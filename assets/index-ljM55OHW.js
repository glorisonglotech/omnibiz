const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/ProductCatalog-BNcAf1xl.js","assets/radix-vendor-DkpkUZpN.js","assets/react-vendor-Cbs3PWxE.js","assets/ui-vendor-DBu71OB-.js","assets/socket-vendor-CA1CrNgP.js","assets/chart-vendor-BrmKkZNj.js","assets/SalesAnalytics-CDC1MDoj.js","assets/OrderTimeline-CSiyWSbK.js","assets/QuickActions-D_H0qkkh.js","assets/EnhancedOrderForm-B-z2r5Cy.js","assets/RealTimeSync-BgU80UuY.js","assets/ModernOrderCard-_dJMOWt0.js"])))=>i.map(i=>d[i]);
import{j as e,S as uv,P as ca,R as I5,T as L5,a as B5,C as z5,L as U5,b as V5,I as $5,c as bS,V as H5,d as W5,e as wS,f as G5,g as Df,h as SS,i as CS,k as Of,u as qa,l as TS,m as kS,n as ES,o as Vs,p as AS,F as _S,D as DS,q as OS,r as Du,s as RS,t as Rf,A as mv,v as PS,w as MS,x as FS,y as Il,z as q5,B as sf,E as IS,G as K5,H as Y5,J as X5,K as Q5,M as Z5,N as J5,O as e_,Q as t_}from"./radix-vendor-DkpkUZpN.js";import{b as s_,e as a_,r as v,R as ft,u as Ka,L as Ht,f as hv,h as sl,O as r_,c as LS,i as n_,B as i_,j as l_,k as Gt}from"./react-vendor-Cbs3PWxE.js";import{X as yr,t as D,A as Mn,G as af,M as Gs,L as vr,H as Eo,a as la,I as fv,J as bo,u as na,v as $s,K as Ml,N as o_,f as er,d as Is,O as BS,Q as c_,P as qt,e as js,V as Fl,g as ms,D as ea,Y as ha,Z as ka,_ as Zs,$ as Pf,U as Xt,a0 as pi,w as Xr,a1 as ta,r as ya,a2 as Dl,S as ia,a3 as hi,a4 as d_,s as Ea,a5 as sd,a6 as xv,a7 as rf,B as Fr,a8 as si,T as fa,a9 as Yu,j as Cs,p as Hi,aa as Yn,y as wi,ab as ng,ac as u_,ad as Lc,ae as zS,af as pv,ag as f0,R as is,ah as m_,ai as h_,q as Pa,aj as f_,ak as gv,al as Ao,am as US,an as va,ao as Ja,ap as Ou,aq as nf,ar as lf,as as Ma,at as Mf,au as x_,av as ig,o as Hs,c as Er,F as al,aw as Ol,h as gi,ax as Kr,i as Qt,ay as p_,az as g_,aA as v_,aB as lg,aC as qc,C as os,k as Cr,b as Qi,x as vi,aD as Aa,aE as j_,aF as y_,aG as N_,aH as og,aI as Ni,aJ as cg,aK as Kc,aL as b_,aM as dg,aN as w_,aO as $i,aP as mu,aQ as Wh,aR as Sb,aS as vu,aT as x0,aU as Bc,W as of,aV as S_,aW as Dc,aX as vv,aY as Cb,aZ as _o,a_ as jv,a$ as zc,b0 as yv,b1 as ru,b2 as C_,b3 as T_,b4 as k_,b5 as VS,b6 as E_,b7 as $S,b8 as A_,b9 as Ru,ba as __,bb as D_,z as ai,bc as O_,bd as Tb,be as kb,bf as R_,bg as HS,bh as P_,bi as Wi,bj as WS,l as Yc,bk as M_,bl as F_,bm as I_,bn as Eb,bo as L_,bp as B_,bq as Xc,br as ug,bs as Uc,bt as p0,bu as g0,bv as Ab,bw as z_,bx as U_,by as V_,bz as $_,bA as GS,bB as H_,bC as W_,bD as G_,bE as q_,bF as K_,bG as Y_,bH as X_,m as _b,bI as Nv,bJ as Q_,bK as Z_,bL as J_,bM as e6,bN as t6,bO as s6,bP as a6,bQ as r6,bR as n6,bS as i6,bT as l6,bU as o6,bV as mg,bW as c6,bX as d6,bY as u6,bZ as m6,b_ as h6,b$ as f6,c0 as x6,c1 as p6,c2 as g6,c3 as v6,c4 as j6,c5 as y6,c6 as N6,c7 as b6,c8 as w6,c9 as S6,ca as C6,cb as T6,cc as k6,cd as qS,ce as KS,E as bv,cf as wv,cg as E6,ch as Db,ci as A6,cj as _6,ck as D6,cl as O6}from"./ui-vendor-DBu71OB-.js";import{l as R6}from"./socket-vendor-CA1CrNgP.js";import{c as YS,R as P6,C as M6,a as Sh,X as Ch,Y as Th,T as nu,L as kh,B as Ob,b as Rb,P as F6,d as I6,e as L6,f as B6,A as z6,g as U6,h as V6}from"./chart-vendor-BrmKkZNj.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function a(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=a(i);fetch(i.href,o)}})();var v0={exports:{}},iu={},j0={exports:{}},y0={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pb;function $6(){return Pb||(Pb=1,(function(t){function s(V,ee){var me=V.length;V.push(ee);e:for(;0<me;){var W=me-1>>>1,se=V[W];if(0<i(se,ee))V[W]=ee,V[me]=se,me=W;else break e}}function a(V){return V.length===0?null:V[0]}function r(V){if(V.length===0)return null;var ee=V[0],me=V.pop();if(me!==ee){V[0]=me;e:for(var W=0,se=V.length,Z=se>>>1;W<Z;){var I=2*(W+1)-1,Q=V[I],O=I+1,te=V[O];if(0>i(Q,me))O<se&&0>i(te,Q)?(V[W]=te,V[O]=me,W=O):(V[W]=Q,V[I]=me,W=I);else if(O<se&&0>i(te,me))V[W]=te,V[O]=me,W=O;else break e}}return ee}function i(V,ee){var me=V.sortIndex-ee.sortIndex;return me!==0?me:V.id-ee.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var c=Date,u=c.now();t.unstable_now=function(){return c.now()-u}}var f=[],x=[],h=1,p=null,g=3,b=!1,N=!1,y=!1,S=!1,C=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;function G(V){for(var ee=a(x);ee!==null;){if(ee.callback===null)r(x);else if(ee.startTime<=V)r(x),ee.sortIndex=ee.expirationTime,s(f,ee);else break;ee=a(x)}}function U(V){if(y=!1,G(V),!N)if(a(f)!==null)N=!0,F||(F=!0,M());else{var ee=a(x);ee!==null&&re(U,ee.startTime-V)}}var F=!1,k=-1,E=5,A=-1;function B(){return S?!0:!(t.unstable_now()-A<E)}function H(){if(S=!1,F){var V=t.unstable_now();A=V;var ee=!0;try{e:{N=!1,y&&(y=!1,T(k),k=-1),b=!0;var me=g;try{t:{for(G(V),p=a(f);p!==null&&!(p.expirationTime>V&&B());){var W=p.callback;if(typeof W=="function"){p.callback=null,g=p.priorityLevel;var se=W(p.expirationTime<=V);if(V=t.unstable_now(),typeof se=="function"){p.callback=se,G(V),ee=!0;break t}p===a(f)&&r(f),G(V)}else r(f);p=a(f)}if(p!==null)ee=!0;else{var Z=a(x);Z!==null&&re(U,Z.startTime-V),ee=!1}}break e}finally{p=null,g=me,b=!1}ee=void 0}}finally{ee?M():F=!1}}}var M;if(typeof _=="function")M=function(){_(H)};else if(typeof MessageChannel<"u"){var q=new MessageChannel,L=q.port2;q.port1.onmessage=H,M=function(){L.postMessage(null)}}else M=function(){C(H,0)};function re(V,ee){k=C(function(){V(t.unstable_now())},ee)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(V){V.callback=null},t.unstable_forceFrameRate=function(V){0>V||125<V?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<V?Math.floor(1e3/V):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_next=function(V){switch(g){case 1:case 2:case 3:var ee=3;break;default:ee=g}var me=g;g=ee;try{return V()}finally{g=me}},t.unstable_requestPaint=function(){S=!0},t.unstable_runWithPriority=function(V,ee){switch(V){case 1:case 2:case 3:case 4:case 5:break;default:V=3}var me=g;g=V;try{return ee()}finally{g=me}},t.unstable_scheduleCallback=function(V,ee,me){var W=t.unstable_now();switch(typeof me=="object"&&me!==null?(me=me.delay,me=typeof me=="number"&&0<me?W+me:W):me=W,V){case 1:var se=-1;break;case 2:se=250;break;case 5:se=1073741823;break;case 4:se=1e4;break;default:se=5e3}return se=me+se,V={id:h++,callback:ee,priorityLevel:V,startTime:me,expirationTime:se,sortIndex:-1},me>W?(V.sortIndex=me,s(x,V),a(f)===null&&V===a(x)&&(y?(T(k),k=-1):y=!0,re(U,me-W))):(V.sortIndex=se,s(f,V),N||b||(N=!0,F||(F=!0,M()))),V},t.unstable_shouldYield=B,t.unstable_wrapCallback=function(V){var ee=g;return function(){var me=g;g=ee;try{return V.apply(this,arguments)}finally{g=me}}}})(y0)),y0}var Mb;function H6(){return Mb||(Mb=1,j0.exports=$6()),j0.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fb;function W6(){if(Fb)return iu;Fb=1;var t=H6(),s=s_(),a=a_();function r(n){var l="https://react.dev/errors/"+n;if(1<arguments.length){l+="?args[]="+encodeURIComponent(arguments[1]);for(var d=2;d<arguments.length;d++)l+="&args[]="+encodeURIComponent(arguments[d])}return"Minified React error #"+n+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function o(n){var l=n,d=n;if(n.alternate)for(;l.return;)l=l.return;else{n=l;do l=n,(l.flags&4098)!==0&&(d=l.return),n=l.return;while(n)}return l.tag===3?d:null}function c(n){if(n.tag===13){var l=n.memoizedState;if(l===null&&(n=n.alternate,n!==null&&(l=n.memoizedState)),l!==null)return l.dehydrated}return null}function u(n){if(n.tag===31){var l=n.memoizedState;if(l===null&&(n=n.alternate,n!==null&&(l=n.memoizedState)),l!==null)return l.dehydrated}return null}function f(n){if(o(n)!==n)throw Error(r(188))}function x(n){var l=n.alternate;if(!l){if(l=o(n),l===null)throw Error(r(188));return l!==n?null:n}for(var d=n,m=l;;){var j=d.return;if(j===null)break;var w=j.alternate;if(w===null){if(m=j.return,m!==null){d=m;continue}break}if(j.child===w.child){for(w=j.child;w;){if(w===d)return f(j),n;if(w===m)return f(j),l;w=w.sibling}throw Error(r(188))}if(d.return!==m.return)d=j,m=w;else{for(var z=!1,ne=j.child;ne;){if(ne===d){z=!0,d=j,m=w;break}if(ne===m){z=!0,m=j,d=w;break}ne=ne.sibling}if(!z){for(ne=w.child;ne;){if(ne===d){z=!0,d=w,m=j;break}if(ne===m){z=!0,m=w,d=j;break}ne=ne.sibling}if(!z)throw Error(r(189))}}if(d.alternate!==m)throw Error(r(190))}if(d.tag!==3)throw Error(r(188));return d.stateNode.current===d?n:l}function h(n){var l=n.tag;if(l===5||l===26||l===27||l===6)return n;for(n=n.child;n!==null;){if(l=h(n),l!==null)return l;n=n.sibling}return null}var p=Object.assign,g=Symbol.for("react.element"),b=Symbol.for("react.transitional.element"),N=Symbol.for("react.portal"),y=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),T=Symbol.for("react.consumer"),_=Symbol.for("react.context"),G=Symbol.for("react.forward_ref"),U=Symbol.for("react.suspense"),F=Symbol.for("react.suspense_list"),k=Symbol.for("react.memo"),E=Symbol.for("react.lazy"),A=Symbol.for("react.activity"),B=Symbol.for("react.memo_cache_sentinel"),H=Symbol.iterator;function M(n){return n===null||typeof n!="object"?null:(n=H&&n[H]||n["@@iterator"],typeof n=="function"?n:null)}var q=Symbol.for("react.client.reference");function L(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===q?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case y:return"Fragment";case C:return"Profiler";case S:return"StrictMode";case U:return"Suspense";case F:return"SuspenseList";case A:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case N:return"Portal";case _:return n.displayName||"Context";case T:return(n._context.displayName||"Context")+".Consumer";case G:var l=n.render;return n=n.displayName,n||(n=l.displayName||l.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case k:return l=n.displayName||null,l!==null?l:L(n.type)||"Memo";case E:l=n._payload,n=n._init;try{return L(n(l))}catch{}}return null}var re=Array.isArray,V=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ee=a.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,me={pending:!1,data:null,method:null,action:null},W=[],se=-1;function Z(n){return{current:n}}function I(n){0>se||(n.current=W[se],W[se]=null,se--)}function Q(n,l){se++,W[se]=n.current,n.current=l}var O=Z(null),te=Z(null),oe=Z(null),je=Z(null);function Me(n,l){switch(Q(oe,l),Q(te,n),Q(O,null),l.nodeType){case 9:case 11:n=(n=l.documentElement)&&(n=n.namespaceURI)?q1(n):0;break;default:if(n=l.tagName,l=l.namespaceURI)l=q1(l),n=K1(l,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}I(O),Q(O,n)}function ve(){I(O),I(te),I(oe)}function ce(n){n.memoizedState!==null&&Q(je,n);var l=O.current,d=K1(l,n.type);l!==d&&(Q(te,n),Q(O,d))}function Pe(n){te.current===n&&(I(O),I(te)),je.current===n&&(I(je),eu._currentValue=me)}var Qe,vt;function xt(n){if(Qe===void 0)try{throw Error()}catch(d){var l=d.stack.trim().match(/\n( *(at )?)/);Qe=l&&l[1]||"",vt=-1<d.stack.indexOf(`
    at`)?" (<anonymous>)":-1<d.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Qe+n+vt}var ht=!1;function bt(n,l){if(!n||ht)return"";ht=!0;var d=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var m={DetermineComponentFrameRoot:function(){try{if(l){var tt=function(){throw Error()};if(Object.defineProperty(tt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(tt,[])}catch(He){var ze=He}Reflect.construct(n,[],tt)}else{try{tt.call()}catch(He){ze=He}n.call(tt.prototype)}}else{try{throw Error()}catch(He){ze=He}(tt=n())&&typeof tt.catch=="function"&&tt.catch(function(){})}}catch(He){if(He&&ze&&typeof He.stack=="string")return[He.stack,ze.stack]}return[null,null]}};m.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var j=Object.getOwnPropertyDescriptor(m.DetermineComponentFrameRoot,"name");j&&j.configurable&&Object.defineProperty(m.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var w=m.DetermineComponentFrameRoot(),z=w[0],ne=w[1];if(z&&ne){var be=z.split(`
`),Be=ne.split(`
`);for(j=m=0;m<be.length&&!be[m].includes("DetermineComponentFrameRoot");)m++;for(;j<Be.length&&!Be[j].includes("DetermineComponentFrameRoot");)j++;if(m===be.length||j===Be.length)for(m=be.length-1,j=Be.length-1;1<=m&&0<=j&&be[m]!==Be[j];)j--;for(;1<=m&&0<=j;m--,j--)if(be[m]!==Be[j]){if(m!==1||j!==1)do if(m--,j--,0>j||be[m]!==Be[j]){var Ke=`
`+be[m].replace(" at new "," at ");return n.displayName&&Ke.includes("<anonymous>")&&(Ke=Ke.replace("<anonymous>",n.displayName)),Ke}while(1<=m&&0<=j);break}}}finally{ht=!1,Error.prepareStackTrace=d}return(d=n?n.displayName||n.name:"")?xt(d):""}function ot(n,l){switch(n.tag){case 26:case 27:case 5:return xt(n.type);case 16:return xt("Lazy");case 13:return n.child!==l&&l!==null?xt("Suspense Fallback"):xt("Suspense");case 19:return xt("SuspenseList");case 0:case 15:return bt(n.type,!1);case 11:return bt(n.type.render,!1);case 1:return bt(n.type,!0);case 31:return xt("Activity");default:return""}}function hs(n){try{var l="",d=null;do l+=ot(n,d),d=n,n=n.return;while(n);return l}catch(m){return`
Error generating stack: `+m.message+`
`+m.stack}}var fs=Object.prototype.hasOwnProperty,Ps=t.unstable_scheduleCallback,ps=t.unstable_cancelCallback,As=t.unstable_shouldYield,cs=t.unstable_requestPaint,_t=t.unstable_now,sa=t.unstable_getCurrentPriorityLevel,Te=t.unstable_ImmediatePriority,Ne=t.unstable_UserBlockingPriority,he=t.unstable_NormalPriority,Ue=t.unstable_LowPriority,st=t.unstable_IdlePriority,Ct=t.log,Dt=t.unstable_setDisableYieldValue,Zt=null,ts=null;function ke(n){if(typeof Ct=="function"&&Dt(n),ts&&typeof ts.setStrictMode=="function")try{ts.setStrictMode(Zt,n)}catch{}}var we=Math.clz32?Math.clz32:pt,nt=Math.log,Ye=Math.LN2;function pt(n){return n>>>=0,n===0?32:31-(nt(n)/Ye|0)|0}var yt=256,Kt=262144,Jt=4194304;function Ut(n){var l=n&42;if(l!==0)return l;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return n&261888;case 262144:case 524288:case 1048576:case 2097152:return n&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function Ia(n,l,d){var m=n.pendingLanes;if(m===0)return 0;var j=0,w=n.suspendedLanes,z=n.pingedLanes;n=n.warmLanes;var ne=m&134217727;return ne!==0?(m=ne&~w,m!==0?j=Ut(m):(z&=ne,z!==0?j=Ut(z):d||(d=ne&~n,d!==0&&(j=Ut(d))))):(ne=m&~w,ne!==0?j=Ut(ne):z!==0?j=Ut(z):d||(d=m&~n,d!==0&&(j=Ut(d)))),j===0?0:l!==0&&l!==j&&(l&w)===0&&(w=j&-j,d=l&-l,w>=d||w===32&&(d&4194048)!==0)?l:j}function La(n,l){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&l)===0}function nr(n,l){switch(n){case 1:case 2:case 4:case 8:case 64:return l+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ys(){var n=Jt;return Jt<<=1,(Jt&62914560)===0&&(Jt=4194304),n}function J(n){for(var l=[],d=0;31>d;d++)l.push(n);return l}function De(n,l){n.pendingLanes|=l,l!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function Ge(n,l,d,m,j,w){var z=n.pendingLanes;n.pendingLanes=d,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=d,n.entangledLanes&=d,n.errorRecoveryDisabledLanes&=d,n.shellSuspendCounter=0;var ne=n.entanglements,be=n.expirationTimes,Be=n.hiddenUpdates;for(d=z&~d;0<d;){var Ke=31-we(d),tt=1<<Ke;ne[Ke]=0,be[Ke]=-1;var ze=Be[Ke];if(ze!==null)for(Be[Ke]=null,Ke=0;Ke<ze.length;Ke++){var He=ze[Ke];He!==null&&(He.lane&=-536870913)}d&=~tt}m!==0&&gt(n,m,0),w!==0&&j===0&&n.tag!==0&&(n.suspendedLanes|=w&~(z&~l))}function gt(n,l,d){n.pendingLanes|=l,n.suspendedLanes&=~l;var m=31-we(l);n.entangledLanes|=l,n.entanglements[m]=n.entanglements[m]|1073741824|d&261930}function jt(n,l){var d=n.entangledLanes|=l;for(n=n.entanglements;d;){var m=31-we(d),j=1<<m;j&l|n[m]&l&&(n[m]|=l),d&=~j}}function ss(n,l){var d=l&-l;return d=(d&42)!==0?1:ks(d),(d&(n.suspendedLanes|l))!==0?0:d}function ks(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function Ns(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function Y(){var n=ee.p;return n!==0?n:(n=window.event,n===void 0?32:gb(n.type))}function de(n,l){var d=ee.p;try{return ee.p=n,l()}finally{ee.p=d}}var le=Math.random().toString(36).slice(2),P="__reactFiber$"+le,ie="__reactProps$"+le,ue="__reactContainer$"+le,Re="__reactEvents$"+le,$e="__reactListeners$"+le,Oe="__reactHandles$"+le,Fe="__reactResources$"+le,Le="__reactMarker$"+le;function rt(n){delete n[P],delete n[ie],delete n[Re],delete n[$e],delete n[Oe]}function xe(n){var l=n[P];if(l)return l;for(var d=n.parentNode;d;){if(l=d[ue]||d[P]){if(d=l.alternate,l.child!==null||d!==null&&d.child!==null)for(n=tb(n);n!==null;){if(d=n[P])return d;n=tb(n)}return l}n=d,d=n.parentNode}return null}function We(n){if(n=n[P]||n[ue]){var l=n.tag;if(l===5||l===6||l===13||l===31||l===26||l===27||l===3)return n}return null}function Ce(n){var l=n.tag;if(l===5||l===26||l===27||l===6)return n.stateNode;throw Error(r(33))}function et(n){var l=n[Fe];return l||(l=n[Fe]={hoistableStyles:new Map,hoistableScripts:new Map}),l}function it(n){n[Le]=!0}var Tt=new Set,Ze={};function $t(n,l){br(n,l),br(n+"Capture",l)}function br(n,l){for(Ze[n]=l,n=0;n<l.length;n++)Tt.add(l[n])}var vn=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Br={},zr={};function jn(n){return fs.call(zr,n)?!0:fs.call(Br,n)?!1:vn.test(n)?zr[n]=!0:(Br[n]=!0,!1)}function wr(n,l,d){if(jn(l))if(d===null)n.removeAttribute(l);else{switch(typeof d){case"undefined":case"function":case"symbol":n.removeAttribute(l);return;case"boolean":var m=l.toLowerCase().slice(0,5);if(m!=="data-"&&m!=="aria-"){n.removeAttribute(l);return}}n.setAttribute(l,""+d)}}function Wo(n,l,d){if(d===null)n.removeAttribute(l);else{switch(typeof d){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(l);return}n.setAttribute(l,""+d)}}function sn(n,l,d,m){if(m===null)n.removeAttribute(d);else{switch(typeof m){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(d);return}n.setAttributeNS(l,d,""+m)}}function Ur(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function hm(n){var l=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(l==="checkbox"||l==="radio")}function lx(n,l,d){var m=Object.getOwnPropertyDescriptor(n.constructor.prototype,l);if(!n.hasOwnProperty(l)&&typeof m<"u"&&typeof m.get=="function"&&typeof m.set=="function"){var j=m.get,w=m.set;return Object.defineProperty(n,l,{configurable:!0,get:function(){return j.call(this)},set:function(z){d=""+z,w.call(this,z)}}),Object.defineProperty(n,l,{enumerable:m.enumerable}),{getValue:function(){return d},setValue:function(z){d=""+z},stopTracking:function(){n._valueTracker=null,delete n[l]}}}}function Yl(n){if(!n._valueTracker){var l=hm(n)?"checked":"value";n._valueTracker=lx(n,l,""+n[l])}}function zj(n){if(!n)return!1;var l=n._valueTracker;if(!l)return!0;var d=l.getValue(),m="";return n&&(m=hm(n)?n.checked?"true":"false":n.value),n=m,n!==d?(l.setValue(n),!0):!1}function fm(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var DA=/[\n"\\]/g;function yn(n){return n.replace(DA,function(l){return"\\"+l.charCodeAt(0).toString(16)+" "})}function ox(n,l,d,m,j,w,z,ne){n.name="",z!=null&&typeof z!="function"&&typeof z!="symbol"&&typeof z!="boolean"?n.type=z:n.removeAttribute("type"),l!=null?z==="number"?(l===0&&n.value===""||n.value!=l)&&(n.value=""+Ur(l)):n.value!==""+Ur(l)&&(n.value=""+Ur(l)):z!=="submit"&&z!=="reset"||n.removeAttribute("value"),l!=null?cx(n,z,Ur(l)):d!=null?cx(n,z,Ur(d)):m!=null&&n.removeAttribute("value"),j==null&&w!=null&&(n.defaultChecked=!!w),j!=null&&(n.checked=j&&typeof j!="function"&&typeof j!="symbol"),ne!=null&&typeof ne!="function"&&typeof ne!="symbol"&&typeof ne!="boolean"?n.name=""+Ur(ne):n.removeAttribute("name")}function Uj(n,l,d,m,j,w,z,ne){if(w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"&&(n.type=w),l!=null||d!=null){if(!(w!=="submit"&&w!=="reset"||l!=null)){Yl(n);return}d=d!=null?""+Ur(d):"",l=l!=null?""+Ur(l):d,ne||l===n.value||(n.value=l),n.defaultValue=l}m=m??j,m=typeof m!="function"&&typeof m!="symbol"&&!!m,n.checked=ne?n.checked:!!m,n.defaultChecked=!!m,z!=null&&typeof z!="function"&&typeof z!="symbol"&&typeof z!="boolean"&&(n.name=z),Yl(n)}function cx(n,l,d){l==="number"&&fm(n.ownerDocument)===n||n.defaultValue===""+d||(n.defaultValue=""+d)}function Go(n,l,d,m){if(n=n.options,l){l={};for(var j=0;j<d.length;j++)l["$"+d[j]]=!0;for(d=0;d<n.length;d++)j=l.hasOwnProperty("$"+n[d].value),n[d].selected!==j&&(n[d].selected=j),j&&m&&(n[d].defaultSelected=!0)}else{for(d=""+Ur(d),l=null,j=0;j<n.length;j++){if(n[j].value===d){n[j].selected=!0,m&&(n[j].defaultSelected=!0);return}l!==null||n[j].disabled||(l=n[j])}l!==null&&(l.selected=!0)}}function Vj(n,l,d){if(l!=null&&(l=""+Ur(l),l!==n.value&&(n.value=l),d==null)){n.defaultValue!==l&&(n.defaultValue=l);return}n.defaultValue=d!=null?""+Ur(d):""}function $j(n,l,d,m){if(l==null){if(m!=null){if(d!=null)throw Error(r(92));if(re(m)){if(1<m.length)throw Error(r(93));m=m[0]}d=m}d==null&&(d=""),l=d}d=Ur(l),n.defaultValue=d,m=n.textContent,m===d&&m!==""&&m!==null&&(n.value=m),Yl(n)}function qo(n,l){if(l){var d=n.firstChild;if(d&&d===n.lastChild&&d.nodeType===3){d.nodeValue=l;return}}n.textContent=l}var OA=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Hj(n,l,d){var m=l.indexOf("--")===0;d==null||typeof d=="boolean"||d===""?m?n.setProperty(l,""):l==="float"?n.cssFloat="":n[l]="":m?n.setProperty(l,d):typeof d!="number"||d===0||OA.has(l)?l==="float"?n.cssFloat=d:n[l]=(""+d).trim():n[l]=d+"px"}function Wj(n,l,d){if(l!=null&&typeof l!="object")throw Error(r(62));if(n=n.style,d!=null){for(var m in d)!d.hasOwnProperty(m)||l!=null&&l.hasOwnProperty(m)||(m.indexOf("--")===0?n.setProperty(m,""):m==="float"?n.cssFloat="":n[m]="");for(var j in l)m=l[j],l.hasOwnProperty(j)&&d[j]!==m&&Hj(n,j,m)}else for(var w in l)l.hasOwnProperty(w)&&Hj(n,w,l[w])}function dx(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var RA=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),PA=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function xm(n){return PA.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}function Ci(){}var ux=null;function mx(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Ko=null,Yo=null;function Gj(n){var l=We(n);if(l&&(n=l.stateNode)){var d=n[ie]||null;e:switch(n=l.stateNode,l.type){case"input":if(ox(n,d.value,d.defaultValue,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name),l=d.name,d.type==="radio"&&l!=null){for(d=n;d.parentNode;)d=d.parentNode;for(d=d.querySelectorAll('input[name="'+yn(""+l)+'"][type="radio"]'),l=0;l<d.length;l++){var m=d[l];if(m!==n&&m.form===n.form){var j=m[ie]||null;if(!j)throw Error(r(90));ox(m,j.value,j.defaultValue,j.defaultValue,j.checked,j.defaultChecked,j.type,j.name)}}for(l=0;l<d.length;l++)m=d[l],m.form===n.form&&zj(m)}break e;case"textarea":Vj(n,d.value,d.defaultValue);break e;case"select":l=d.value,l!=null&&Go(n,!!d.multiple,l,!1)}}}var hx=!1;function qj(n,l,d){if(hx)return n(l,d);hx=!0;try{var m=n(l);return m}finally{if(hx=!1,(Ko!==null||Yo!==null)&&(sh(),Ko&&(l=Ko,n=Yo,Yo=Ko=null,Gj(l),n)))for(l=0;l<n.length;l++)Gj(n[l])}}function gd(n,l){var d=n.stateNode;if(d===null)return null;var m=d[ie]||null;if(m===null)return null;d=m[l];e:switch(l){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(m=!m.disabled)||(n=n.type,m=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!m;break e;default:n=!1}if(n)return null;if(d&&typeof d!="function")throw Error(r(231,l,typeof d));return d}var Ti=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),fx=!1;if(Ti)try{var vd={};Object.defineProperty(vd,"passive",{get:function(){fx=!0}}),window.addEventListener("test",vd,vd),window.removeEventListener("test",vd,vd)}catch{fx=!1}var nl=null,xx=null,pm=null;function Kj(){if(pm)return pm;var n,l=xx,d=l.length,m,j="value"in nl?nl.value:nl.textContent,w=j.length;for(n=0;n<d&&l[n]===j[n];n++);var z=d-n;for(m=1;m<=z&&l[d-m]===j[w-m];m++);return pm=j.slice(n,1<m?1-m:void 0)}function gm(n){var l=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&l===13&&(n=13)):n=l,n===10&&(n=13),32<=n||n===13?n:0}function vm(){return!0}function Yj(){return!1}function Vr(n){function l(d,m,j,w,z){this._reactName=d,this._targetInst=j,this.type=m,this.nativeEvent=w,this.target=z,this.currentTarget=null;for(var ne in n)n.hasOwnProperty(ne)&&(d=n[ne],this[ne]=d?d(w):w[ne]);return this.isDefaultPrevented=(w.defaultPrevented!=null?w.defaultPrevented:w.returnValue===!1)?vm:Yj,this.isPropagationStopped=Yj,this}return p(l.prototype,{preventDefault:function(){this.defaultPrevented=!0;var d=this.nativeEvent;d&&(d.preventDefault?d.preventDefault():typeof d.returnValue!="unknown"&&(d.returnValue=!1),this.isDefaultPrevented=vm)},stopPropagation:function(){var d=this.nativeEvent;d&&(d.stopPropagation?d.stopPropagation():typeof d.cancelBubble!="unknown"&&(d.cancelBubble=!0),this.isPropagationStopped=vm)},persist:function(){},isPersistent:vm}),l}var Xl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},jm=Vr(Xl),jd=p({},Xl,{view:0,detail:0}),MA=Vr(jd),px,gx,yd,ym=p({},jd,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:jx,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==yd&&(yd&&n.type==="mousemove"?(px=n.screenX-yd.screenX,gx=n.screenY-yd.screenY):gx=px=0,yd=n),px)},movementY:function(n){return"movementY"in n?n.movementY:gx}}),Xj=Vr(ym),FA=p({},ym,{dataTransfer:0}),IA=Vr(FA),LA=p({},jd,{relatedTarget:0}),vx=Vr(LA),BA=p({},Xl,{animationName:0,elapsedTime:0,pseudoElement:0}),zA=Vr(BA),UA=p({},Xl,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),VA=Vr(UA),$A=p({},Xl,{data:0}),Qj=Vr($A),HA={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},WA={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},GA={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function qA(n){var l=this.nativeEvent;return l.getModifierState?l.getModifierState(n):(n=GA[n])?!!l[n]:!1}function jx(){return qA}var KA=p({},jd,{key:function(n){if(n.key){var l=HA[n.key]||n.key;if(l!=="Unidentified")return l}return n.type==="keypress"?(n=gm(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?WA[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:jx,charCode:function(n){return n.type==="keypress"?gm(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?gm(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),YA=Vr(KA),XA=p({},ym,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Zj=Vr(XA),QA=p({},jd,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:jx}),ZA=Vr(QA),JA=p({},Xl,{propertyName:0,elapsedTime:0,pseudoElement:0}),e3=Vr(JA),t3=p({},ym,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),s3=Vr(t3),a3=p({},Xl,{newState:0,oldState:0}),r3=Vr(a3),n3=[9,13,27,32],yx=Ti&&"CompositionEvent"in window,Nd=null;Ti&&"documentMode"in document&&(Nd=document.documentMode);var i3=Ti&&"TextEvent"in window&&!Nd,Jj=Ti&&(!yx||Nd&&8<Nd&&11>=Nd),ey=" ",ty=!1;function sy(n,l){switch(n){case"keyup":return n3.indexOf(l.keyCode)!==-1;case"keydown":return l.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ay(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Xo=!1;function l3(n,l){switch(n){case"compositionend":return ay(l);case"keypress":return l.which!==32?null:(ty=!0,ey);case"textInput":return n=l.data,n===ey&&ty?null:n;default:return null}}function o3(n,l){if(Xo)return n==="compositionend"||!yx&&sy(n,l)?(n=Kj(),pm=xx=nl=null,Xo=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(l.ctrlKey||l.altKey||l.metaKey)||l.ctrlKey&&l.altKey){if(l.char&&1<l.char.length)return l.char;if(l.which)return String.fromCharCode(l.which)}return null;case"compositionend":return Jj&&l.locale!=="ko"?null:l.data;default:return null}}var c3={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ry(n){var l=n&&n.nodeName&&n.nodeName.toLowerCase();return l==="input"?!!c3[n.type]:l==="textarea"}function ny(n,l,d,m){Ko?Yo?Yo.push(m):Yo=[m]:Ko=m,l=ch(l,"onChange"),0<l.length&&(d=new jm("onChange","change",null,d,m),n.push({event:d,listeners:l}))}var bd=null,wd=null;function d3(n){U1(n,0)}function Nm(n){var l=Ce(n);if(zj(l))return n}function iy(n,l){if(n==="change")return l}var ly=!1;if(Ti){var Nx;if(Ti){var bx="oninput"in document;if(!bx){var oy=document.createElement("div");oy.setAttribute("oninput","return;"),bx=typeof oy.oninput=="function"}Nx=bx}else Nx=!1;ly=Nx&&(!document.documentMode||9<document.documentMode)}function cy(){bd&&(bd.detachEvent("onpropertychange",dy),wd=bd=null)}function dy(n){if(n.propertyName==="value"&&Nm(wd)){var l=[];ny(l,wd,n,mx(n)),qj(d3,l)}}function u3(n,l,d){n==="focusin"?(cy(),bd=l,wd=d,bd.attachEvent("onpropertychange",dy)):n==="focusout"&&cy()}function m3(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Nm(wd)}function h3(n,l){if(n==="click")return Nm(l)}function f3(n,l){if(n==="input"||n==="change")return Nm(l)}function x3(n,l){return n===l&&(n!==0||1/n===1/l)||n!==n&&l!==l}var an=typeof Object.is=="function"?Object.is:x3;function Sd(n,l){if(an(n,l))return!0;if(typeof n!="object"||n===null||typeof l!="object"||l===null)return!1;var d=Object.keys(n),m=Object.keys(l);if(d.length!==m.length)return!1;for(m=0;m<d.length;m++){var j=d[m];if(!fs.call(l,j)||!an(n[j],l[j]))return!1}return!0}function uy(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function my(n,l){var d=uy(n);n=0;for(var m;d;){if(d.nodeType===3){if(m=n+d.textContent.length,n<=l&&m>=l)return{node:d,offset:l-n};n=m}e:{for(;d;){if(d.nextSibling){d=d.nextSibling;break e}d=d.parentNode}d=void 0}d=uy(d)}}function hy(n,l){return n&&l?n===l?!0:n&&n.nodeType===3?!1:l&&l.nodeType===3?hy(n,l.parentNode):"contains"in n?n.contains(l):n.compareDocumentPosition?!!(n.compareDocumentPosition(l)&16):!1:!1}function fy(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var l=fm(n.document);l instanceof n.HTMLIFrameElement;){try{var d=typeof l.contentWindow.location.href=="string"}catch{d=!1}if(d)n=l.contentWindow;else break;l=fm(n.document)}return l}function wx(n){var l=n&&n.nodeName&&n.nodeName.toLowerCase();return l&&(l==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||l==="textarea"||n.contentEditable==="true")}var p3=Ti&&"documentMode"in document&&11>=document.documentMode,Qo=null,Sx=null,Cd=null,Cx=!1;function xy(n,l,d){var m=d.window===d?d.document:d.nodeType===9?d:d.ownerDocument;Cx||Qo==null||Qo!==fm(m)||(m=Qo,"selectionStart"in m&&wx(m)?m={start:m.selectionStart,end:m.selectionEnd}:(m=(m.ownerDocument&&m.ownerDocument.defaultView||window).getSelection(),m={anchorNode:m.anchorNode,anchorOffset:m.anchorOffset,focusNode:m.focusNode,focusOffset:m.focusOffset}),Cd&&Sd(Cd,m)||(Cd=m,m=ch(Sx,"onSelect"),0<m.length&&(l=new jm("onSelect","select",null,l,d),n.push({event:l,listeners:m}),l.target=Qo)))}function Ql(n,l){var d={};return d[n.toLowerCase()]=l.toLowerCase(),d["Webkit"+n]="webkit"+l,d["Moz"+n]="moz"+l,d}var Zo={animationend:Ql("Animation","AnimationEnd"),animationiteration:Ql("Animation","AnimationIteration"),animationstart:Ql("Animation","AnimationStart"),transitionrun:Ql("Transition","TransitionRun"),transitionstart:Ql("Transition","TransitionStart"),transitioncancel:Ql("Transition","TransitionCancel"),transitionend:Ql("Transition","TransitionEnd")},Tx={},py={};Ti&&(py=document.createElement("div").style,"AnimationEvent"in window||(delete Zo.animationend.animation,delete Zo.animationiteration.animation,delete Zo.animationstart.animation),"TransitionEvent"in window||delete Zo.transitionend.transition);function Zl(n){if(Tx[n])return Tx[n];if(!Zo[n])return n;var l=Zo[n],d;for(d in l)if(l.hasOwnProperty(d)&&d in py)return Tx[n]=l[d];return n}var gy=Zl("animationend"),vy=Zl("animationiteration"),jy=Zl("animationstart"),g3=Zl("transitionrun"),v3=Zl("transitionstart"),j3=Zl("transitioncancel"),yy=Zl("transitionend"),Ny=new Map,kx="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");kx.push("scrollEnd");function zn(n,l){Ny.set(n,l),$t(l,[n])}var bm=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var l=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(l))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)},Nn=[],Jo=0,Ex=0;function wm(){for(var n=Jo,l=Ex=Jo=0;l<n;){var d=Nn[l];Nn[l++]=null;var m=Nn[l];Nn[l++]=null;var j=Nn[l];Nn[l++]=null;var w=Nn[l];if(Nn[l++]=null,m!==null&&j!==null){var z=m.pending;z===null?j.next=j:(j.next=z.next,z.next=j),m.pending=j}w!==0&&by(d,j,w)}}function Sm(n,l,d,m){Nn[Jo++]=n,Nn[Jo++]=l,Nn[Jo++]=d,Nn[Jo++]=m,Ex|=m,n.lanes|=m,n=n.alternate,n!==null&&(n.lanes|=m)}function Ax(n,l,d,m){return Sm(n,l,d,m),Cm(n)}function Jl(n,l){return Sm(n,null,null,l),Cm(n)}function by(n,l,d){n.lanes|=d;var m=n.alternate;m!==null&&(m.lanes|=d);for(var j=!1,w=n.return;w!==null;)w.childLanes|=d,m=w.alternate,m!==null&&(m.childLanes|=d),w.tag===22&&(n=w.stateNode,n===null||n._visibility&1||(j=!0)),n=w,w=w.return;return n.tag===3?(w=n.stateNode,j&&l!==null&&(j=31-we(d),n=w.hiddenUpdates,m=n[j],m===null?n[j]=[l]:m.push(l),l.lane=d|536870912),w):null}function Cm(n){if(50<qd)throw qd=0,Lp=null,Error(r(185));for(var l=n.return;l!==null;)n=l,l=n.return;return n.tag===3?n.stateNode:null}var ec={};function y3(n,l,d,m){this.tag=n,this.key=d,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=m,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function rn(n,l,d,m){return new y3(n,l,d,m)}function _x(n){return n=n.prototype,!(!n||!n.isReactComponent)}function ki(n,l){var d=n.alternate;return d===null?(d=rn(n.tag,l,n.key,n.mode),d.elementType=n.elementType,d.type=n.type,d.stateNode=n.stateNode,d.alternate=n,n.alternate=d):(d.pendingProps=l,d.type=n.type,d.flags=0,d.subtreeFlags=0,d.deletions=null),d.flags=n.flags&65011712,d.childLanes=n.childLanes,d.lanes=n.lanes,d.child=n.child,d.memoizedProps=n.memoizedProps,d.memoizedState=n.memoizedState,d.updateQueue=n.updateQueue,l=n.dependencies,d.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext},d.sibling=n.sibling,d.index=n.index,d.ref=n.ref,d.refCleanup=n.refCleanup,d}function wy(n,l){n.flags&=65011714;var d=n.alternate;return d===null?(n.childLanes=0,n.lanes=l,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=d.childLanes,n.lanes=d.lanes,n.child=d.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=d.memoizedProps,n.memoizedState=d.memoizedState,n.updateQueue=d.updateQueue,n.type=d.type,l=d.dependencies,n.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext}),n}function Tm(n,l,d,m,j,w){var z=0;if(m=n,typeof n=="function")_x(n)&&(z=1);else if(typeof n=="string")z=C5(n,d,O.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case A:return n=rn(31,d,l,j),n.elementType=A,n.lanes=w,n;case y:return eo(d.children,j,w,l);case S:z=8,j|=24;break;case C:return n=rn(12,d,l,j|2),n.elementType=C,n.lanes=w,n;case U:return n=rn(13,d,l,j),n.elementType=U,n.lanes=w,n;case F:return n=rn(19,d,l,j),n.elementType=F,n.lanes=w,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case _:z=10;break e;case T:z=9;break e;case G:z=11;break e;case k:z=14;break e;case E:z=16,m=null;break e}z=29,d=Error(r(130,n===null?"null":typeof n,"")),m=null}return l=rn(z,d,l,j),l.elementType=n,l.type=m,l.lanes=w,l}function eo(n,l,d,m){return n=rn(7,n,m,l),n.lanes=d,n}function Dx(n,l,d){return n=rn(6,n,null,l),n.lanes=d,n}function Sy(n){var l=rn(18,null,null,0);return l.stateNode=n,l}function Ox(n,l,d){return l=rn(4,n.children!==null?n.children:[],n.key,l),l.lanes=d,l.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},l}var Cy=new WeakMap;function bn(n,l){if(typeof n=="object"&&n!==null){var d=Cy.get(n);return d!==void 0?d:(l={value:n,source:l,stack:hs(l)},Cy.set(n,l),l)}return{value:n,source:l,stack:hs(l)}}var tc=[],sc=0,km=null,Td=0,wn=[],Sn=0,il=null,ni=1,ii="";function Ei(n,l){tc[sc++]=Td,tc[sc++]=km,km=n,Td=l}function Ty(n,l,d){wn[Sn++]=ni,wn[Sn++]=ii,wn[Sn++]=il,il=n;var m=ni;n=ii;var j=32-we(m)-1;m&=~(1<<j),d+=1;var w=32-we(l)+j;if(30<w){var z=j-j%5;w=(m&(1<<z)-1).toString(32),m>>=z,j-=z,ni=1<<32-we(l)+j|d<<j|m,ii=w+n}else ni=1<<w|d<<j|m,ii=n}function Rx(n){n.return!==null&&(Ei(n,1),Ty(n,1,0))}function Px(n){for(;n===km;)km=tc[--sc],tc[sc]=null,Td=tc[--sc],tc[sc]=null;for(;n===il;)il=wn[--Sn],wn[Sn]=null,ii=wn[--Sn],wn[Sn]=null,ni=wn[--Sn],wn[Sn]=null}function ky(n,l){wn[Sn++]=ni,wn[Sn++]=ii,wn[Sn++]=il,ni=l.id,ii=l.overflow,il=n}var ir=null,aa=null,Ss=!1,ll=null,Cn=!1,Mx=Error(r(519));function ol(n){var l=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw kd(bn(l,n)),Mx}function Ey(n){var l=n.stateNode,d=n.type,m=n.memoizedProps;switch(l[P]=n,l[ie]=m,d){case"dialog":vs("cancel",l),vs("close",l);break;case"iframe":case"object":case"embed":vs("load",l);break;case"video":case"audio":for(d=0;d<Yd.length;d++)vs(Yd[d],l);break;case"source":vs("error",l);break;case"img":case"image":case"link":vs("error",l),vs("load",l);break;case"details":vs("toggle",l);break;case"input":vs("invalid",l),Uj(l,m.value,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name,!0);break;case"select":vs("invalid",l);break;case"textarea":vs("invalid",l),$j(l,m.value,m.defaultValue,m.children)}d=m.children,typeof d!="string"&&typeof d!="number"&&typeof d!="bigint"||l.textContent===""+d||m.suppressHydrationWarning===!0||W1(l.textContent,d)?(m.popover!=null&&(vs("beforetoggle",l),vs("toggle",l)),m.onScroll!=null&&vs("scroll",l),m.onScrollEnd!=null&&vs("scrollend",l),m.onClick!=null&&(l.onclick=Ci),l=!0):l=!1,l||ol(n,!0)}function Ay(n){for(ir=n.return;ir;)switch(ir.tag){case 5:case 31:case 13:Cn=!1;return;case 27:case 3:Cn=!0;return;default:ir=ir.return}}function ac(n){if(n!==ir)return!1;if(!Ss)return Ay(n),Ss=!0,!1;var l=n.tag,d;if((d=l!==3&&l!==27)&&((d=l===5)&&(d=n.type,d=!(d!=="form"&&d!=="button")||Jp(n.type,n.memoizedProps)),d=!d),d&&aa&&ol(n),Ay(n),l===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(r(317));aa=eb(n)}else if(l===31){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(r(317));aa=eb(n)}else l===27?(l=aa,bl(n.type)?(n=r0,r0=null,aa=n):aa=l):aa=ir?kn(n.stateNode.nextSibling):null;return!0}function to(){aa=ir=null,Ss=!1}function Fx(){var n=ll;return n!==null&&(Gr===null?Gr=n:Gr.push.apply(Gr,n),ll=null),n}function kd(n){ll===null?ll=[n]:ll.push(n)}var Ix=Z(null),so=null,Ai=null;function cl(n,l,d){Q(Ix,l._currentValue),l._currentValue=d}function _i(n){n._currentValue=Ix.current,I(Ix)}function Lx(n,l,d){for(;n!==null;){var m=n.alternate;if((n.childLanes&l)!==l?(n.childLanes|=l,m!==null&&(m.childLanes|=l)):m!==null&&(m.childLanes&l)!==l&&(m.childLanes|=l),n===d)break;n=n.return}}function Bx(n,l,d,m){var j=n.child;for(j!==null&&(j.return=n);j!==null;){var w=j.dependencies;if(w!==null){var z=j.child;w=w.firstContext;e:for(;w!==null;){var ne=w;w=j;for(var be=0;be<l.length;be++)if(ne.context===l[be]){w.lanes|=d,ne=w.alternate,ne!==null&&(ne.lanes|=d),Lx(w.return,d,n),m||(z=null);break e}w=ne.next}}else if(j.tag===18){if(z=j.return,z===null)throw Error(r(341));z.lanes|=d,w=z.alternate,w!==null&&(w.lanes|=d),Lx(z,d,n),z=null}else z=j.child;if(z!==null)z.return=j;else for(z=j;z!==null;){if(z===n){z=null;break}if(j=z.sibling,j!==null){j.return=z.return,z=j;break}z=z.return}j=z}}function rc(n,l,d,m){n=null;for(var j=l,w=!1;j!==null;){if(!w){if((j.flags&524288)!==0)w=!0;else if((j.flags&262144)!==0)break}if(j.tag===10){var z=j.alternate;if(z===null)throw Error(r(387));if(z=z.memoizedProps,z!==null){var ne=j.type;an(j.pendingProps.value,z.value)||(n!==null?n.push(ne):n=[ne])}}else if(j===je.current){if(z=j.alternate,z===null)throw Error(r(387));z.memoizedState.memoizedState!==j.memoizedState.memoizedState&&(n!==null?n.push(eu):n=[eu])}j=j.return}n!==null&&Bx(l,n,d,m),l.flags|=262144}function Em(n){for(n=n.firstContext;n!==null;){if(!an(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function ao(n){so=n,Ai=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function lr(n){return _y(so,n)}function Am(n,l){return so===null&&ao(n),_y(n,l)}function _y(n,l){var d=l._currentValue;if(l={context:l,memoizedValue:d,next:null},Ai===null){if(n===null)throw Error(r(308));Ai=l,n.dependencies={lanes:0,firstContext:l},n.flags|=524288}else Ai=Ai.next=l;return d}var N3=typeof AbortController<"u"?AbortController:function(){var n=[],l=this.signal={aborted:!1,addEventListener:function(d,m){n.push(m)}};this.abort=function(){l.aborted=!0,n.forEach(function(d){return d()})}},b3=t.unstable_scheduleCallback,w3=t.unstable_NormalPriority,Ba={$$typeof:_,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function zx(){return{controller:new N3,data:new Map,refCount:0}}function Ed(n){n.refCount--,n.refCount===0&&b3(w3,function(){n.controller.abort()})}var Ad=null,Ux=0,nc=0,ic=null;function S3(n,l){if(Ad===null){var d=Ad=[];Ux=0,nc=Hp(),ic={status:"pending",value:void 0,then:function(m){d.push(m)}}}return Ux++,l.then(Dy,Dy),l}function Dy(){if(--Ux===0&&Ad!==null){ic!==null&&(ic.status="fulfilled");var n=Ad;Ad=null,nc=0,ic=null;for(var l=0;l<n.length;l++)(0,n[l])()}}function C3(n,l){var d=[],m={status:"pending",value:null,reason:null,then:function(j){d.push(j)}};return n.then(function(){m.status="fulfilled",m.value=l;for(var j=0;j<d.length;j++)(0,d[j])(l)},function(j){for(m.status="rejected",m.reason=j,j=0;j<d.length;j++)(0,d[j])(void 0)}),m}var Oy=V.S;V.S=function(n,l){x1=_t(),typeof l=="object"&&l!==null&&typeof l.then=="function"&&S3(n,l),Oy!==null&&Oy(n,l)};var ro=Z(null);function Vx(){var n=ro.current;return n!==null?n:Js.pooledCache}function _m(n,l){l===null?Q(ro,ro.current):Q(ro,l.pool)}function Ry(){var n=Vx();return n===null?null:{parent:Ba._currentValue,pool:n}}var lc=Error(r(460)),$x=Error(r(474)),Dm=Error(r(542)),Om={then:function(){}};function Py(n){return n=n.status,n==="fulfilled"||n==="rejected"}function My(n,l,d){switch(d=n[d],d===void 0?n.push(l):d!==l&&(l.then(Ci,Ci),l=d),l.status){case"fulfilled":return l.value;case"rejected":throw n=l.reason,Iy(n),n;default:if(typeof l.status=="string")l.then(Ci,Ci);else{if(n=Js,n!==null&&100<n.shellSuspendCounter)throw Error(r(482));n=l,n.status="pending",n.then(function(m){if(l.status==="pending"){var j=l;j.status="fulfilled",j.value=m}},function(m){if(l.status==="pending"){var j=l;j.status="rejected",j.reason=m}})}switch(l.status){case"fulfilled":return l.value;case"rejected":throw n=l.reason,Iy(n),n}throw io=l,lc}}function no(n){try{var l=n._init;return l(n._payload)}catch(d){throw d!==null&&typeof d=="object"&&typeof d.then=="function"?(io=d,lc):d}}var io=null;function Fy(){if(io===null)throw Error(r(459));var n=io;return io=null,n}function Iy(n){if(n===lc||n===Dm)throw Error(r(483))}var oc=null,_d=0;function Rm(n){var l=_d;return _d+=1,oc===null&&(oc=[]),My(oc,n,l)}function Dd(n,l){l=l.props.ref,n.ref=l!==void 0?l:null}function Pm(n,l){throw l.$$typeof===g?Error(r(525)):(n=Object.prototype.toString.call(l),Error(r(31,n==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":n)))}function Ly(n){function l(Ae,Se){if(n){var Ie=Ae.deletions;Ie===null?(Ae.deletions=[Se],Ae.flags|=16):Ie.push(Se)}}function d(Ae,Se){if(!n)return null;for(;Se!==null;)l(Ae,Se),Se=Se.sibling;return null}function m(Ae){for(var Se=new Map;Ae!==null;)Ae.key!==null?Se.set(Ae.key,Ae):Se.set(Ae.index,Ae),Ae=Ae.sibling;return Se}function j(Ae,Se){return Ae=ki(Ae,Se),Ae.index=0,Ae.sibling=null,Ae}function w(Ae,Se,Ie){return Ae.index=Ie,n?(Ie=Ae.alternate,Ie!==null?(Ie=Ie.index,Ie<Se?(Ae.flags|=67108866,Se):Ie):(Ae.flags|=67108866,Se)):(Ae.flags|=1048576,Se)}function z(Ae){return n&&Ae.alternate===null&&(Ae.flags|=67108866),Ae}function ne(Ae,Se,Ie,Xe){return Se===null||Se.tag!==6?(Se=Dx(Ie,Ae.mode,Xe),Se.return=Ae,Se):(Se=j(Se,Ie),Se.return=Ae,Se)}function be(Ae,Se,Ie,Xe){var Vt=Ie.type;return Vt===y?Ke(Ae,Se,Ie.props.children,Xe,Ie.key):Se!==null&&(Se.elementType===Vt||typeof Vt=="object"&&Vt!==null&&Vt.$$typeof===E&&no(Vt)===Se.type)?(Se=j(Se,Ie.props),Dd(Se,Ie),Se.return=Ae,Se):(Se=Tm(Ie.type,Ie.key,Ie.props,null,Ae.mode,Xe),Dd(Se,Ie),Se.return=Ae,Se)}function Be(Ae,Se,Ie,Xe){return Se===null||Se.tag!==4||Se.stateNode.containerInfo!==Ie.containerInfo||Se.stateNode.implementation!==Ie.implementation?(Se=Ox(Ie,Ae.mode,Xe),Se.return=Ae,Se):(Se=j(Se,Ie.children||[]),Se.return=Ae,Se)}function Ke(Ae,Se,Ie,Xe,Vt){return Se===null||Se.tag!==7?(Se=eo(Ie,Ae.mode,Xe,Vt),Se.return=Ae,Se):(Se=j(Se,Ie),Se.return=Ae,Se)}function tt(Ae,Se,Ie){if(typeof Se=="string"&&Se!==""||typeof Se=="number"||typeof Se=="bigint")return Se=Dx(""+Se,Ae.mode,Ie),Se.return=Ae,Se;if(typeof Se=="object"&&Se!==null){switch(Se.$$typeof){case b:return Ie=Tm(Se.type,Se.key,Se.props,null,Ae.mode,Ie),Dd(Ie,Se),Ie.return=Ae,Ie;case N:return Se=Ox(Se,Ae.mode,Ie),Se.return=Ae,Se;case E:return Se=no(Se),tt(Ae,Se,Ie)}if(re(Se)||M(Se))return Se=eo(Se,Ae.mode,Ie,null),Se.return=Ae,Se;if(typeof Se.then=="function")return tt(Ae,Rm(Se),Ie);if(Se.$$typeof===_)return tt(Ae,Am(Ae,Se),Ie);Pm(Ae,Se)}return null}function ze(Ae,Se,Ie,Xe){var Vt=Se!==null?Se.key:null;if(typeof Ie=="string"&&Ie!==""||typeof Ie=="number"||typeof Ie=="bigint")return Vt!==null?null:ne(Ae,Se,""+Ie,Xe);if(typeof Ie=="object"&&Ie!==null){switch(Ie.$$typeof){case b:return Ie.key===Vt?be(Ae,Se,Ie,Xe):null;case N:return Ie.key===Vt?Be(Ae,Se,Ie,Xe):null;case E:return Ie=no(Ie),ze(Ae,Se,Ie,Xe)}if(re(Ie)||M(Ie))return Vt!==null?null:Ke(Ae,Se,Ie,Xe,null);if(typeof Ie.then=="function")return ze(Ae,Se,Rm(Ie),Xe);if(Ie.$$typeof===_)return ze(Ae,Se,Am(Ae,Ie),Xe);Pm(Ae,Ie)}return null}function He(Ae,Se,Ie,Xe,Vt){if(typeof Xe=="string"&&Xe!==""||typeof Xe=="number"||typeof Xe=="bigint")return Ae=Ae.get(Ie)||null,ne(Se,Ae,""+Xe,Vt);if(typeof Xe=="object"&&Xe!==null){switch(Xe.$$typeof){case b:return Ae=Ae.get(Xe.key===null?Ie:Xe.key)||null,be(Se,Ae,Xe,Vt);case N:return Ae=Ae.get(Xe.key===null?Ie:Xe.key)||null,Be(Se,Ae,Xe,Vt);case E:return Xe=no(Xe),He(Ae,Se,Ie,Xe,Vt)}if(re(Xe)||M(Xe))return Ae=Ae.get(Ie)||null,Ke(Se,Ae,Xe,Vt,null);if(typeof Xe.then=="function")return He(Ae,Se,Ie,Rm(Xe),Vt);if(Xe.$$typeof===_)return He(Ae,Se,Ie,Am(Se,Xe),Vt);Pm(Se,Xe)}return null}function St(Ae,Se,Ie,Xe){for(var Vt=null,_s=null,At=Se,ds=Se=0,ws=null;At!==null&&ds<Ie.length;ds++){At.index>ds?(ws=At,At=null):ws=At.sibling;var Ds=ze(Ae,At,Ie[ds],Xe);if(Ds===null){At===null&&(At=ws);break}n&&At&&Ds.alternate===null&&l(Ae,At),Se=w(Ds,Se,ds),_s===null?Vt=Ds:_s.sibling=Ds,_s=Ds,At=ws}if(ds===Ie.length)return d(Ae,At),Ss&&Ei(Ae,ds),Vt;if(At===null){for(;ds<Ie.length;ds++)At=tt(Ae,Ie[ds],Xe),At!==null&&(Se=w(At,Se,ds),_s===null?Vt=At:_s.sibling=At,_s=At);return Ss&&Ei(Ae,ds),Vt}for(At=m(At);ds<Ie.length;ds++)ws=He(At,Ae,ds,Ie[ds],Xe),ws!==null&&(n&&ws.alternate!==null&&At.delete(ws.key===null?ds:ws.key),Se=w(ws,Se,ds),_s===null?Vt=ws:_s.sibling=ws,_s=ws);return n&&At.forEach(function(kl){return l(Ae,kl)}),Ss&&Ei(Ae,ds),Vt}function Wt(Ae,Se,Ie,Xe){if(Ie==null)throw Error(r(151));for(var Vt=null,_s=null,At=Se,ds=Se=0,ws=null,Ds=Ie.next();At!==null&&!Ds.done;ds++,Ds=Ie.next()){At.index>ds?(ws=At,At=null):ws=At.sibling;var kl=ze(Ae,At,Ds.value,Xe);if(kl===null){At===null&&(At=ws);break}n&&At&&kl.alternate===null&&l(Ae,At),Se=w(kl,Se,ds),_s===null?Vt=kl:_s.sibling=kl,_s=kl,At=ws}if(Ds.done)return d(Ae,At),Ss&&Ei(Ae,ds),Vt;if(At===null){for(;!Ds.done;ds++,Ds=Ie.next())Ds=tt(Ae,Ds.value,Xe),Ds!==null&&(Se=w(Ds,Se,ds),_s===null?Vt=Ds:_s.sibling=Ds,_s=Ds);return Ss&&Ei(Ae,ds),Vt}for(At=m(At);!Ds.done;ds++,Ds=Ie.next())Ds=He(At,Ae,ds,Ds.value,Xe),Ds!==null&&(n&&Ds.alternate!==null&&At.delete(Ds.key===null?ds:Ds.key),Se=w(Ds,Se,ds),_s===null?Vt=Ds:_s.sibling=Ds,_s=Ds);return n&&At.forEach(function(F5){return l(Ae,F5)}),Ss&&Ei(Ae,ds),Vt}function Xs(Ae,Se,Ie,Xe){if(typeof Ie=="object"&&Ie!==null&&Ie.type===y&&Ie.key===null&&(Ie=Ie.props.children),typeof Ie=="object"&&Ie!==null){switch(Ie.$$typeof){case b:e:{for(var Vt=Ie.key;Se!==null;){if(Se.key===Vt){if(Vt=Ie.type,Vt===y){if(Se.tag===7){d(Ae,Se.sibling),Xe=j(Se,Ie.props.children),Xe.return=Ae,Ae=Xe;break e}}else if(Se.elementType===Vt||typeof Vt=="object"&&Vt!==null&&Vt.$$typeof===E&&no(Vt)===Se.type){d(Ae,Se.sibling),Xe=j(Se,Ie.props),Dd(Xe,Ie),Xe.return=Ae,Ae=Xe;break e}d(Ae,Se);break}else l(Ae,Se);Se=Se.sibling}Ie.type===y?(Xe=eo(Ie.props.children,Ae.mode,Xe,Ie.key),Xe.return=Ae,Ae=Xe):(Xe=Tm(Ie.type,Ie.key,Ie.props,null,Ae.mode,Xe),Dd(Xe,Ie),Xe.return=Ae,Ae=Xe)}return z(Ae);case N:e:{for(Vt=Ie.key;Se!==null;){if(Se.key===Vt)if(Se.tag===4&&Se.stateNode.containerInfo===Ie.containerInfo&&Se.stateNode.implementation===Ie.implementation){d(Ae,Se.sibling),Xe=j(Se,Ie.children||[]),Xe.return=Ae,Ae=Xe;break e}else{d(Ae,Se);break}else l(Ae,Se);Se=Se.sibling}Xe=Ox(Ie,Ae.mode,Xe),Xe.return=Ae,Ae=Xe}return z(Ae);case E:return Ie=no(Ie),Xs(Ae,Se,Ie,Xe)}if(re(Ie))return St(Ae,Se,Ie,Xe);if(M(Ie)){if(Vt=M(Ie),typeof Vt!="function")throw Error(r(150));return Ie=Vt.call(Ie),Wt(Ae,Se,Ie,Xe)}if(typeof Ie.then=="function")return Xs(Ae,Se,Rm(Ie),Xe);if(Ie.$$typeof===_)return Xs(Ae,Se,Am(Ae,Ie),Xe);Pm(Ae,Ie)}return typeof Ie=="string"&&Ie!==""||typeof Ie=="number"||typeof Ie=="bigint"?(Ie=""+Ie,Se!==null&&Se.tag===6?(d(Ae,Se.sibling),Xe=j(Se,Ie),Xe.return=Ae,Ae=Xe):(d(Ae,Se),Xe=Dx(Ie,Ae.mode,Xe),Xe.return=Ae,Ae=Xe),z(Ae)):d(Ae,Se)}return function(Ae,Se,Ie,Xe){try{_d=0;var Vt=Xs(Ae,Se,Ie,Xe);return oc=null,Vt}catch(At){if(At===lc||At===Dm)throw At;var _s=rn(29,At,null,Ae.mode);return _s.lanes=Xe,_s.return=Ae,_s}finally{}}}var lo=Ly(!0),By=Ly(!1),dl=!1;function Hx(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Wx(n,l){n=n.updateQueue,l.updateQueue===n&&(l.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function ul(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function ml(n,l,d){var m=n.updateQueue;if(m===null)return null;if(m=m.shared,(Ms&2)!==0){var j=m.pending;return j===null?l.next=l:(l.next=j.next,j.next=l),m.pending=l,l=Cm(n),by(n,null,d),l}return Sm(n,m,l,d),Cm(n)}function Od(n,l,d){if(l=l.updateQueue,l!==null&&(l=l.shared,(d&4194048)!==0)){var m=l.lanes;m&=n.pendingLanes,d|=m,l.lanes=d,jt(n,d)}}function Gx(n,l){var d=n.updateQueue,m=n.alternate;if(m!==null&&(m=m.updateQueue,d===m)){var j=null,w=null;if(d=d.firstBaseUpdate,d!==null){do{var z={lane:d.lane,tag:d.tag,payload:d.payload,callback:null,next:null};w===null?j=w=z:w=w.next=z,d=d.next}while(d!==null);w===null?j=w=l:w=w.next=l}else j=w=l;d={baseState:m.baseState,firstBaseUpdate:j,lastBaseUpdate:w,shared:m.shared,callbacks:m.callbacks},n.updateQueue=d;return}n=d.lastBaseUpdate,n===null?d.firstBaseUpdate=l:n.next=l,d.lastBaseUpdate=l}var qx=!1;function Rd(){if(qx){var n=ic;if(n!==null)throw n}}function Pd(n,l,d,m){qx=!1;var j=n.updateQueue;dl=!1;var w=j.firstBaseUpdate,z=j.lastBaseUpdate,ne=j.shared.pending;if(ne!==null){j.shared.pending=null;var be=ne,Be=be.next;be.next=null,z===null?w=Be:z.next=Be,z=be;var Ke=n.alternate;Ke!==null&&(Ke=Ke.updateQueue,ne=Ke.lastBaseUpdate,ne!==z&&(ne===null?Ke.firstBaseUpdate=Be:ne.next=Be,Ke.lastBaseUpdate=be))}if(w!==null){var tt=j.baseState;z=0,Ke=Be=be=null,ne=w;do{var ze=ne.lane&-536870913,He=ze!==ne.lane;if(He?(bs&ze)===ze:(m&ze)===ze){ze!==0&&ze===nc&&(qx=!0),Ke!==null&&(Ke=Ke.next={lane:0,tag:ne.tag,payload:ne.payload,callback:null,next:null});e:{var St=n,Wt=ne;ze=l;var Xs=d;switch(Wt.tag){case 1:if(St=Wt.payload,typeof St=="function"){tt=St.call(Xs,tt,ze);break e}tt=St;break e;case 3:St.flags=St.flags&-65537|128;case 0:if(St=Wt.payload,ze=typeof St=="function"?St.call(Xs,tt,ze):St,ze==null)break e;tt=p({},tt,ze);break e;case 2:dl=!0}}ze=ne.callback,ze!==null&&(n.flags|=64,He&&(n.flags|=8192),He=j.callbacks,He===null?j.callbacks=[ze]:He.push(ze))}else He={lane:ze,tag:ne.tag,payload:ne.payload,callback:ne.callback,next:null},Ke===null?(Be=Ke=He,be=tt):Ke=Ke.next=He,z|=ze;if(ne=ne.next,ne===null){if(ne=j.shared.pending,ne===null)break;He=ne,ne=He.next,He.next=null,j.lastBaseUpdate=He,j.shared.pending=null}}while(!0);Ke===null&&(be=tt),j.baseState=be,j.firstBaseUpdate=Be,j.lastBaseUpdate=Ke,w===null&&(j.shared.lanes=0),gl|=z,n.lanes=z,n.memoizedState=tt}}function zy(n,l){if(typeof n!="function")throw Error(r(191,n));n.call(l)}function Uy(n,l){var d=n.callbacks;if(d!==null)for(n.callbacks=null,n=0;n<d.length;n++)zy(d[n],l)}var cc=Z(null),Mm=Z(0);function Vy(n,l){n=Bi,Q(Mm,n),Q(cc,l),Bi=n|l.baseLanes}function Kx(){Q(Mm,Bi),Q(cc,cc.current)}function Yx(){Bi=Mm.current,I(cc),I(Mm)}var nn=Z(null),Tn=null;function hl(n){var l=n.alternate;Q(Da,Da.current&1),Q(nn,n),Tn===null&&(l===null||cc.current!==null||l.memoizedState!==null)&&(Tn=n)}function Xx(n){Q(Da,Da.current),Q(nn,n),Tn===null&&(Tn=n)}function $y(n){n.tag===22?(Q(Da,Da.current),Q(nn,n),Tn===null&&(Tn=n)):fl()}function fl(){Q(Da,Da.current),Q(nn,nn.current)}function ln(n){I(nn),Tn===n&&(Tn=null),I(Da)}var Da=Z(0);function Fm(n){for(var l=n;l!==null;){if(l.tag===13){var d=l.memoizedState;if(d!==null&&(d=d.dehydrated,d===null||s0(d)||a0(d)))return l}else if(l.tag===19&&(l.memoizedProps.revealOrder==="forwards"||l.memoizedProps.revealOrder==="backwards"||l.memoizedProps.revealOrder==="unstable_legacy-backwards"||l.memoizedProps.revealOrder==="together")){if((l.flags&128)!==0)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===n)break;for(;l.sibling===null;){if(l.return===null||l.return===n)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}var Di=0,rs=null,Ks=null,za=null,Im=!1,dc=!1,oo=!1,Lm=0,Md=0,uc=null,T3=0;function wa(){throw Error(r(321))}function Qx(n,l){if(l===null)return!1;for(var d=0;d<l.length&&d<n.length;d++)if(!an(n[d],l[d]))return!1;return!0}function Zx(n,l,d,m,j,w){return Di=w,rs=l,l.memoizedState=null,l.updateQueue=null,l.lanes=0,V.H=n===null||n.memoizedState===null?TN:hp,oo=!1,w=d(m,j),oo=!1,dc&&(w=Wy(l,d,m,j)),Hy(n),w}function Hy(n){V.H=Ld;var l=Ks!==null&&Ks.next!==null;if(Di=0,za=Ks=rs=null,Im=!1,Md=0,uc=null,l)throw Error(r(300));n===null||Ua||(n=n.dependencies,n!==null&&Em(n)&&(Ua=!0))}function Wy(n,l,d,m){rs=n;var j=0;do{if(dc&&(uc=null),Md=0,dc=!1,25<=j)throw Error(r(301));if(j+=1,za=Ks=null,n.updateQueue!=null){var w=n.updateQueue;w.lastEffect=null,w.events=null,w.stores=null,w.memoCache!=null&&(w.memoCache.index=0)}V.H=kN,w=l(d,m)}while(dc);return w}function k3(){var n=V.H,l=n.useState()[0];return l=typeof l.then=="function"?Fd(l):l,n=n.useState()[0],(Ks!==null?Ks.memoizedState:null)!==n&&(rs.flags|=1024),l}function Jx(){var n=Lm!==0;return Lm=0,n}function ep(n,l,d){l.updateQueue=n.updateQueue,l.flags&=-2053,n.lanes&=~d}function tp(n){if(Im){for(n=n.memoizedState;n!==null;){var l=n.queue;l!==null&&(l.pending=null),n=n.next}Im=!1}Di=0,za=Ks=rs=null,dc=!1,Md=Lm=0,uc=null}function Rr(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return za===null?rs.memoizedState=za=n:za=za.next=n,za}function Oa(){if(Ks===null){var n=rs.alternate;n=n!==null?n.memoizedState:null}else n=Ks.next;var l=za===null?rs.memoizedState:za.next;if(l!==null)za=l,Ks=n;else{if(n===null)throw rs.alternate===null?Error(r(467)):Error(r(310));Ks=n,n={memoizedState:Ks.memoizedState,baseState:Ks.baseState,baseQueue:Ks.baseQueue,queue:Ks.queue,next:null},za===null?rs.memoizedState=za=n:za=za.next=n}return za}function Bm(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Fd(n){var l=Md;return Md+=1,uc===null&&(uc=[]),n=My(uc,n,l),l=rs,(za===null?l.memoizedState:za.next)===null&&(l=l.alternate,V.H=l===null||l.memoizedState===null?TN:hp),n}function zm(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return Fd(n);if(n.$$typeof===_)return lr(n)}throw Error(r(438,String(n)))}function sp(n){var l=null,d=rs.updateQueue;if(d!==null&&(l=d.memoCache),l==null){var m=rs.alternate;m!==null&&(m=m.updateQueue,m!==null&&(m=m.memoCache,m!=null&&(l={data:m.data.map(function(j){return j.slice()}),index:0})))}if(l==null&&(l={data:[],index:0}),d===null&&(d=Bm(),rs.updateQueue=d),d.memoCache=l,d=l.data[l.index],d===void 0)for(d=l.data[l.index]=Array(n),m=0;m<n;m++)d[m]=B;return l.index++,d}function Oi(n,l){return typeof l=="function"?l(n):l}function Um(n){var l=Oa();return ap(l,Ks,n)}function ap(n,l,d){var m=n.queue;if(m===null)throw Error(r(311));m.lastRenderedReducer=d;var j=n.baseQueue,w=m.pending;if(w!==null){if(j!==null){var z=j.next;j.next=w.next,w.next=z}l.baseQueue=j=w,m.pending=null}if(w=n.baseState,j===null)n.memoizedState=w;else{l=j.next;var ne=z=null,be=null,Be=l,Ke=!1;do{var tt=Be.lane&-536870913;if(tt!==Be.lane?(bs&tt)===tt:(Di&tt)===tt){var ze=Be.revertLane;if(ze===0)be!==null&&(be=be.next={lane:0,revertLane:0,gesture:null,action:Be.action,hasEagerState:Be.hasEagerState,eagerState:Be.eagerState,next:null}),tt===nc&&(Ke=!0);else if((Di&ze)===ze){Be=Be.next,ze===nc&&(Ke=!0);continue}else tt={lane:0,revertLane:Be.revertLane,gesture:null,action:Be.action,hasEagerState:Be.hasEagerState,eagerState:Be.eagerState,next:null},be===null?(ne=be=tt,z=w):be=be.next=tt,rs.lanes|=ze,gl|=ze;tt=Be.action,oo&&d(w,tt),w=Be.hasEagerState?Be.eagerState:d(w,tt)}else ze={lane:tt,revertLane:Be.revertLane,gesture:Be.gesture,action:Be.action,hasEagerState:Be.hasEagerState,eagerState:Be.eagerState,next:null},be===null?(ne=be=ze,z=w):be=be.next=ze,rs.lanes|=tt,gl|=tt;Be=Be.next}while(Be!==null&&Be!==l);if(be===null?z=w:be.next=ne,!an(w,n.memoizedState)&&(Ua=!0,Ke&&(d=ic,d!==null)))throw d;n.memoizedState=w,n.baseState=z,n.baseQueue=be,m.lastRenderedState=w}return j===null&&(m.lanes=0),[n.memoizedState,m.dispatch]}function rp(n){var l=Oa(),d=l.queue;if(d===null)throw Error(r(311));d.lastRenderedReducer=n;var m=d.dispatch,j=d.pending,w=l.memoizedState;if(j!==null){d.pending=null;var z=j=j.next;do w=n(w,z.action),z=z.next;while(z!==j);an(w,l.memoizedState)||(Ua=!0),l.memoizedState=w,l.baseQueue===null&&(l.baseState=w),d.lastRenderedState=w}return[w,m]}function Gy(n,l,d){var m=rs,j=Oa(),w=Ss;if(w){if(d===void 0)throw Error(r(407));d=d()}else d=l();var z=!an((Ks||j).memoizedState,d);if(z&&(j.memoizedState=d,Ua=!0),j=j.queue,lp(Yy.bind(null,m,j,n),[n]),j.getSnapshot!==l||z||za!==null&&za.memoizedState.tag&1){if(m.flags|=2048,mc(9,{destroy:void 0},Ky.bind(null,m,j,d,l),null),Js===null)throw Error(r(349));w||(Di&127)!==0||qy(m,l,d)}return d}function qy(n,l,d){n.flags|=16384,n={getSnapshot:l,value:d},l=rs.updateQueue,l===null?(l=Bm(),rs.updateQueue=l,l.stores=[n]):(d=l.stores,d===null?l.stores=[n]:d.push(n))}function Ky(n,l,d,m){l.value=d,l.getSnapshot=m,Xy(l)&&Qy(n)}function Yy(n,l,d){return d(function(){Xy(l)&&Qy(n)})}function Xy(n){var l=n.getSnapshot;n=n.value;try{var d=l();return!an(n,d)}catch{return!0}}function Qy(n){var l=Jl(n,2);l!==null&&qr(l,n,2)}function np(n){var l=Rr();if(typeof n=="function"){var d=n;if(n=d(),oo){ke(!0);try{d()}finally{ke(!1)}}}return l.memoizedState=l.baseState=n,l.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Oi,lastRenderedState:n},l}function Zy(n,l,d,m){return n.baseState=d,ap(n,Ks,typeof m=="function"?m:Oi)}function E3(n,l,d,m,j){if(Hm(n))throw Error(r(485));if(n=l.action,n!==null){var w={payload:j,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(z){w.listeners.push(z)}};V.T!==null?d(!0):w.isTransition=!1,m(w),d=l.pending,d===null?(w.next=l.pending=w,Jy(l,w)):(w.next=d.next,l.pending=d.next=w)}}function Jy(n,l){var d=l.action,m=l.payload,j=n.state;if(l.isTransition){var w=V.T,z={};V.T=z;try{var ne=d(j,m),be=V.S;be!==null&&be(z,ne),eN(n,l,ne)}catch(Be){ip(n,l,Be)}finally{w!==null&&z.types!==null&&(w.types=z.types),V.T=w}}else try{w=d(j,m),eN(n,l,w)}catch(Be){ip(n,l,Be)}}function eN(n,l,d){d!==null&&typeof d=="object"&&typeof d.then=="function"?d.then(function(m){tN(n,l,m)},function(m){return ip(n,l,m)}):tN(n,l,d)}function tN(n,l,d){l.status="fulfilled",l.value=d,sN(l),n.state=d,l=n.pending,l!==null&&(d=l.next,d===l?n.pending=null:(d=d.next,l.next=d,Jy(n,d)))}function ip(n,l,d){var m=n.pending;if(n.pending=null,m!==null){m=m.next;do l.status="rejected",l.reason=d,sN(l),l=l.next;while(l!==m)}n.action=null}function sN(n){n=n.listeners;for(var l=0;l<n.length;l++)(0,n[l])()}function aN(n,l){return l}function rN(n,l){if(Ss){var d=Js.formState;if(d!==null){e:{var m=rs;if(Ss){if(aa){t:{for(var j=aa,w=Cn;j.nodeType!==8;){if(!w){j=null;break t}if(j=kn(j.nextSibling),j===null){j=null;break t}}w=j.data,j=w==="F!"||w==="F"?j:null}if(j){aa=kn(j.nextSibling),m=j.data==="F!";break e}}ol(m)}m=!1}m&&(l=d[0])}}return d=Rr(),d.memoizedState=d.baseState=l,m={pending:null,lanes:0,dispatch:null,lastRenderedReducer:aN,lastRenderedState:l},d.queue=m,d=wN.bind(null,rs,m),m.dispatch=d,m=np(!1),w=mp.bind(null,rs,!1,m.queue),m=Rr(),j={state:l,dispatch:null,action:n,pending:null},m.queue=j,d=E3.bind(null,rs,j,w,d),j.dispatch=d,m.memoizedState=n,[l,d,!1]}function nN(n){var l=Oa();return iN(l,Ks,n)}function iN(n,l,d){if(l=ap(n,l,aN)[0],n=Um(Oi)[0],typeof l=="object"&&l!==null&&typeof l.then=="function")try{var m=Fd(l)}catch(z){throw z===lc?Dm:z}else m=l;l=Oa();var j=l.queue,w=j.dispatch;return d!==l.memoizedState&&(rs.flags|=2048,mc(9,{destroy:void 0},A3.bind(null,j,d),null)),[m,w,n]}function A3(n,l){n.action=l}function lN(n){var l=Oa(),d=Ks;if(d!==null)return iN(l,d,n);Oa(),l=l.memoizedState,d=Oa();var m=d.queue.dispatch;return d.memoizedState=n,[l,m,!1]}function mc(n,l,d,m){return n={tag:n,create:d,deps:m,inst:l,next:null},l=rs.updateQueue,l===null&&(l=Bm(),rs.updateQueue=l),d=l.lastEffect,d===null?l.lastEffect=n.next=n:(m=d.next,d.next=n,n.next=m,l.lastEffect=n),n}function oN(){return Oa().memoizedState}function Vm(n,l,d,m){var j=Rr();rs.flags|=n,j.memoizedState=mc(1|l,{destroy:void 0},d,m===void 0?null:m)}function $m(n,l,d,m){var j=Oa();m=m===void 0?null:m;var w=j.memoizedState.inst;Ks!==null&&m!==null&&Qx(m,Ks.memoizedState.deps)?j.memoizedState=mc(l,w,d,m):(rs.flags|=n,j.memoizedState=mc(1|l,w,d,m))}function cN(n,l){Vm(8390656,8,n,l)}function lp(n,l){$m(2048,8,n,l)}function _3(n){rs.flags|=4;var l=rs.updateQueue;if(l===null)l=Bm(),rs.updateQueue=l,l.events=[n];else{var d=l.events;d===null?l.events=[n]:d.push(n)}}function dN(n){var l=Oa().memoizedState;return _3({ref:l,nextImpl:n}),function(){if((Ms&2)!==0)throw Error(r(440));return l.impl.apply(void 0,arguments)}}function uN(n,l){return $m(4,2,n,l)}function mN(n,l){return $m(4,4,n,l)}function hN(n,l){if(typeof l=="function"){n=n();var d=l(n);return function(){typeof d=="function"?d():l(null)}}if(l!=null)return n=n(),l.current=n,function(){l.current=null}}function fN(n,l,d){d=d!=null?d.concat([n]):null,$m(4,4,hN.bind(null,l,n),d)}function op(){}function xN(n,l){var d=Oa();l=l===void 0?null:l;var m=d.memoizedState;return l!==null&&Qx(l,m[1])?m[0]:(d.memoizedState=[n,l],n)}function pN(n,l){var d=Oa();l=l===void 0?null:l;var m=d.memoizedState;if(l!==null&&Qx(l,m[1]))return m[0];if(m=n(),oo){ke(!0);try{n()}finally{ke(!1)}}return d.memoizedState=[m,l],m}function cp(n,l,d){return d===void 0||(Di&1073741824)!==0&&(bs&261930)===0?n.memoizedState=l:(n.memoizedState=d,n=g1(),rs.lanes|=n,gl|=n,d)}function gN(n,l,d,m){return an(d,l)?d:cc.current!==null?(n=cp(n,d,m),an(n,l)||(Ua=!0),n):(Di&42)===0||(Di&1073741824)!==0&&(bs&261930)===0?(Ua=!0,n.memoizedState=d):(n=g1(),rs.lanes|=n,gl|=n,l)}function vN(n,l,d,m,j){var w=ee.p;ee.p=w!==0&&8>w?w:8;var z=V.T,ne={};V.T=ne,mp(n,!1,l,d);try{var be=j(),Be=V.S;if(Be!==null&&Be(ne,be),be!==null&&typeof be=="object"&&typeof be.then=="function"){var Ke=C3(be,m);Id(n,l,Ke,dn(n))}else Id(n,l,m,dn(n))}catch(tt){Id(n,l,{then:function(){},status:"rejected",reason:tt},dn())}finally{ee.p=w,z!==null&&ne.types!==null&&(z.types=ne.types),V.T=z}}function D3(){}function dp(n,l,d,m){if(n.tag!==5)throw Error(r(476));var j=jN(n).queue;vN(n,j,l,me,d===null?D3:function(){return yN(n),d(m)})}function jN(n){var l=n.memoizedState;if(l!==null)return l;l={memoizedState:me,baseState:me,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Oi,lastRenderedState:me},next:null};var d={};return l.next={memoizedState:d,baseState:d,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Oi,lastRenderedState:d},next:null},n.memoizedState=l,n=n.alternate,n!==null&&(n.memoizedState=l),l}function yN(n){var l=jN(n);l.next===null&&(l=n.alternate.memoizedState),Id(n,l.next.queue,{},dn())}function up(){return lr(eu)}function NN(){return Oa().memoizedState}function bN(){return Oa().memoizedState}function O3(n){for(var l=n.return;l!==null;){switch(l.tag){case 24:case 3:var d=dn();n=ul(d);var m=ml(l,n,d);m!==null&&(qr(m,l,d),Od(m,l,d)),l={cache:zx()},n.payload=l;return}l=l.return}}function R3(n,l,d){var m=dn();d={lane:m,revertLane:0,gesture:null,action:d,hasEagerState:!1,eagerState:null,next:null},Hm(n)?SN(l,d):(d=Ax(n,l,d,m),d!==null&&(qr(d,n,m),CN(d,l,m)))}function wN(n,l,d){var m=dn();Id(n,l,d,m)}function Id(n,l,d,m){var j={lane:m,revertLane:0,gesture:null,action:d,hasEagerState:!1,eagerState:null,next:null};if(Hm(n))SN(l,j);else{var w=n.alternate;if(n.lanes===0&&(w===null||w.lanes===0)&&(w=l.lastRenderedReducer,w!==null))try{var z=l.lastRenderedState,ne=w(z,d);if(j.hasEagerState=!0,j.eagerState=ne,an(ne,z))return Sm(n,l,j,0),Js===null&&wm(),!1}catch{}finally{}if(d=Ax(n,l,j,m),d!==null)return qr(d,n,m),CN(d,l,m),!0}return!1}function mp(n,l,d,m){if(m={lane:2,revertLane:Hp(),gesture:null,action:m,hasEagerState:!1,eagerState:null,next:null},Hm(n)){if(l)throw Error(r(479))}else l=Ax(n,d,m,2),l!==null&&qr(l,n,2)}function Hm(n){var l=n.alternate;return n===rs||l!==null&&l===rs}function SN(n,l){dc=Im=!0;var d=n.pending;d===null?l.next=l:(l.next=d.next,d.next=l),n.pending=l}function CN(n,l,d){if((d&4194048)!==0){var m=l.lanes;m&=n.pendingLanes,d|=m,l.lanes=d,jt(n,d)}}var Ld={readContext:lr,use:zm,useCallback:wa,useContext:wa,useEffect:wa,useImperativeHandle:wa,useLayoutEffect:wa,useInsertionEffect:wa,useMemo:wa,useReducer:wa,useRef:wa,useState:wa,useDebugValue:wa,useDeferredValue:wa,useTransition:wa,useSyncExternalStore:wa,useId:wa,useHostTransitionStatus:wa,useFormState:wa,useActionState:wa,useOptimistic:wa,useMemoCache:wa,useCacheRefresh:wa};Ld.useEffectEvent=wa;var TN={readContext:lr,use:zm,useCallback:function(n,l){return Rr().memoizedState=[n,l===void 0?null:l],n},useContext:lr,useEffect:cN,useImperativeHandle:function(n,l,d){d=d!=null?d.concat([n]):null,Vm(4194308,4,hN.bind(null,l,n),d)},useLayoutEffect:function(n,l){return Vm(4194308,4,n,l)},useInsertionEffect:function(n,l){Vm(4,2,n,l)},useMemo:function(n,l){var d=Rr();l=l===void 0?null:l;var m=n();if(oo){ke(!0);try{n()}finally{ke(!1)}}return d.memoizedState=[m,l],m},useReducer:function(n,l,d){var m=Rr();if(d!==void 0){var j=d(l);if(oo){ke(!0);try{d(l)}finally{ke(!1)}}}else j=l;return m.memoizedState=m.baseState=j,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:j},m.queue=n,n=n.dispatch=R3.bind(null,rs,n),[m.memoizedState,n]},useRef:function(n){var l=Rr();return n={current:n},l.memoizedState=n},useState:function(n){n=np(n);var l=n.queue,d=wN.bind(null,rs,l);return l.dispatch=d,[n.memoizedState,d]},useDebugValue:op,useDeferredValue:function(n,l){var d=Rr();return cp(d,n,l)},useTransition:function(){var n=np(!1);return n=vN.bind(null,rs,n.queue,!0,!1),Rr().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,l,d){var m=rs,j=Rr();if(Ss){if(d===void 0)throw Error(r(407));d=d()}else{if(d=l(),Js===null)throw Error(r(349));(bs&127)!==0||qy(m,l,d)}j.memoizedState=d;var w={value:d,getSnapshot:l};return j.queue=w,cN(Yy.bind(null,m,w,n),[n]),m.flags|=2048,mc(9,{destroy:void 0},Ky.bind(null,m,w,d,l),null),d},useId:function(){var n=Rr(),l=Js.identifierPrefix;if(Ss){var d=ii,m=ni;d=(m&~(1<<32-we(m)-1)).toString(32)+d,l="_"+l+"R_"+d,d=Lm++,0<d&&(l+="H"+d.toString(32)),l+="_"}else d=T3++,l="_"+l+"r_"+d.toString(32)+"_";return n.memoizedState=l},useHostTransitionStatus:up,useFormState:rN,useActionState:rN,useOptimistic:function(n){var l=Rr();l.memoizedState=l.baseState=n;var d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return l.queue=d,l=mp.bind(null,rs,!0,d),d.dispatch=l,[n,l]},useMemoCache:sp,useCacheRefresh:function(){return Rr().memoizedState=O3.bind(null,rs)},useEffectEvent:function(n){var l=Rr(),d={impl:n};return l.memoizedState=d,function(){if((Ms&2)!==0)throw Error(r(440));return d.impl.apply(void 0,arguments)}}},hp={readContext:lr,use:zm,useCallback:xN,useContext:lr,useEffect:lp,useImperativeHandle:fN,useInsertionEffect:uN,useLayoutEffect:mN,useMemo:pN,useReducer:Um,useRef:oN,useState:function(){return Um(Oi)},useDebugValue:op,useDeferredValue:function(n,l){var d=Oa();return gN(d,Ks.memoizedState,n,l)},useTransition:function(){var n=Um(Oi)[0],l=Oa().memoizedState;return[typeof n=="boolean"?n:Fd(n),l]},useSyncExternalStore:Gy,useId:NN,useHostTransitionStatus:up,useFormState:nN,useActionState:nN,useOptimistic:function(n,l){var d=Oa();return Zy(d,Ks,n,l)},useMemoCache:sp,useCacheRefresh:bN};hp.useEffectEvent=dN;var kN={readContext:lr,use:zm,useCallback:xN,useContext:lr,useEffect:lp,useImperativeHandle:fN,useInsertionEffect:uN,useLayoutEffect:mN,useMemo:pN,useReducer:rp,useRef:oN,useState:function(){return rp(Oi)},useDebugValue:op,useDeferredValue:function(n,l){var d=Oa();return Ks===null?cp(d,n,l):gN(d,Ks.memoizedState,n,l)},useTransition:function(){var n=rp(Oi)[0],l=Oa().memoizedState;return[typeof n=="boolean"?n:Fd(n),l]},useSyncExternalStore:Gy,useId:NN,useHostTransitionStatus:up,useFormState:lN,useActionState:lN,useOptimistic:function(n,l){var d=Oa();return Ks!==null?Zy(d,Ks,n,l):(d.baseState=n,[n,d.queue.dispatch])},useMemoCache:sp,useCacheRefresh:bN};kN.useEffectEvent=dN;function fp(n,l,d,m){l=n.memoizedState,d=d(m,l),d=d==null?l:p({},l,d),n.memoizedState=d,n.lanes===0&&(n.updateQueue.baseState=d)}var xp={enqueueSetState:function(n,l,d){n=n._reactInternals;var m=dn(),j=ul(m);j.payload=l,d!=null&&(j.callback=d),l=ml(n,j,m),l!==null&&(qr(l,n,m),Od(l,n,m))},enqueueReplaceState:function(n,l,d){n=n._reactInternals;var m=dn(),j=ul(m);j.tag=1,j.payload=l,d!=null&&(j.callback=d),l=ml(n,j,m),l!==null&&(qr(l,n,m),Od(l,n,m))},enqueueForceUpdate:function(n,l){n=n._reactInternals;var d=dn(),m=ul(d);m.tag=2,l!=null&&(m.callback=l),l=ml(n,m,d),l!==null&&(qr(l,n,d),Od(l,n,d))}};function EN(n,l,d,m,j,w,z){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(m,w,z):l.prototype&&l.prototype.isPureReactComponent?!Sd(d,m)||!Sd(j,w):!0}function AN(n,l,d,m){n=l.state,typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(d,m),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(d,m),l.state!==n&&xp.enqueueReplaceState(l,l.state,null)}function co(n,l){var d=l;if("ref"in l){d={};for(var m in l)m!=="ref"&&(d[m]=l[m])}if(n=n.defaultProps){d===l&&(d=p({},d));for(var j in n)d[j]===void 0&&(d[j]=n[j])}return d}function _N(n){bm(n)}function DN(n){console.error(n)}function ON(n){bm(n)}function Wm(n,l){try{var d=n.onUncaughtError;d(l.value,{componentStack:l.stack})}catch(m){setTimeout(function(){throw m})}}function RN(n,l,d){try{var m=n.onCaughtError;m(d.value,{componentStack:d.stack,errorBoundary:l.tag===1?l.stateNode:null})}catch(j){setTimeout(function(){throw j})}}function pp(n,l,d){return d=ul(d),d.tag=3,d.payload={element:null},d.callback=function(){Wm(n,l)},d}function PN(n){return n=ul(n),n.tag=3,n}function MN(n,l,d,m){var j=d.type.getDerivedStateFromError;if(typeof j=="function"){var w=m.value;n.payload=function(){return j(w)},n.callback=function(){RN(l,d,m)}}var z=d.stateNode;z!==null&&typeof z.componentDidCatch=="function"&&(n.callback=function(){RN(l,d,m),typeof j!="function"&&(vl===null?vl=new Set([this]):vl.add(this));var ne=m.stack;this.componentDidCatch(m.value,{componentStack:ne!==null?ne:""})})}function P3(n,l,d,m,j){if(d.flags|=32768,m!==null&&typeof m=="object"&&typeof m.then=="function"){if(l=d.alternate,l!==null&&rc(l,d,j,!0),d=nn.current,d!==null){switch(d.tag){case 31:case 13:return Tn===null?ah():d.alternate===null&&Sa===0&&(Sa=3),d.flags&=-257,d.flags|=65536,d.lanes=j,m===Om?d.flags|=16384:(l=d.updateQueue,l===null?d.updateQueue=new Set([m]):l.add(m),Up(n,m,j)),!1;case 22:return d.flags|=65536,m===Om?d.flags|=16384:(l=d.updateQueue,l===null?(l={transitions:null,markerInstances:null,retryQueue:new Set([m])},d.updateQueue=l):(d=l.retryQueue,d===null?l.retryQueue=new Set([m]):d.add(m)),Up(n,m,j)),!1}throw Error(r(435,d.tag))}return Up(n,m,j),ah(),!1}if(Ss)return l=nn.current,l!==null?((l.flags&65536)===0&&(l.flags|=256),l.flags|=65536,l.lanes=j,m!==Mx&&(n=Error(r(422),{cause:m}),kd(bn(n,d)))):(m!==Mx&&(l=Error(r(423),{cause:m}),kd(bn(l,d))),n=n.current.alternate,n.flags|=65536,j&=-j,n.lanes|=j,m=bn(m,d),j=pp(n.stateNode,m,j),Gx(n,j),Sa!==4&&(Sa=2)),!1;var w=Error(r(520),{cause:m});if(w=bn(w,d),Gd===null?Gd=[w]:Gd.push(w),Sa!==4&&(Sa=2),l===null)return!0;m=bn(m,d),d=l;do{switch(d.tag){case 3:return d.flags|=65536,n=j&-j,d.lanes|=n,n=pp(d.stateNode,m,n),Gx(d,n),!1;case 1:if(l=d.type,w=d.stateNode,(d.flags&128)===0&&(typeof l.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(vl===null||!vl.has(w))))return d.flags|=65536,j&=-j,d.lanes|=j,j=PN(j),MN(j,n,d,m),Gx(d,j),!1}d=d.return}while(d!==null);return!1}var gp=Error(r(461)),Ua=!1;function or(n,l,d,m){l.child=n===null?By(l,null,d,m):lo(l,n.child,d,m)}function FN(n,l,d,m,j){d=d.render;var w=l.ref;if("ref"in m){var z={};for(var ne in m)ne!=="ref"&&(z[ne]=m[ne])}else z=m;return ao(l),m=Zx(n,l,d,z,w,j),ne=Jx(),n!==null&&!Ua?(ep(n,l,j),Ri(n,l,j)):(Ss&&ne&&Rx(l),l.flags|=1,or(n,l,m,j),l.child)}function IN(n,l,d,m,j){if(n===null){var w=d.type;return typeof w=="function"&&!_x(w)&&w.defaultProps===void 0&&d.compare===null?(l.tag=15,l.type=w,LN(n,l,w,m,j)):(n=Tm(d.type,null,m,l,l.mode,j),n.ref=l.ref,n.return=l,l.child=n)}if(w=n.child,!Cp(n,j)){var z=w.memoizedProps;if(d=d.compare,d=d!==null?d:Sd,d(z,m)&&n.ref===l.ref)return Ri(n,l,j)}return l.flags|=1,n=ki(w,m),n.ref=l.ref,n.return=l,l.child=n}function LN(n,l,d,m,j){if(n!==null){var w=n.memoizedProps;if(Sd(w,m)&&n.ref===l.ref)if(Ua=!1,l.pendingProps=m=w,Cp(n,j))(n.flags&131072)!==0&&(Ua=!0);else return l.lanes=n.lanes,Ri(n,l,j)}return vp(n,l,d,m,j)}function BN(n,l,d,m){var j=m.children,w=n!==null?n.memoizedState:null;if(n===null&&l.stateNode===null&&(l.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),m.mode==="hidden"){if((l.flags&128)!==0){if(w=w!==null?w.baseLanes|d:d,n!==null){for(m=l.child=n.child,j=0;m!==null;)j=j|m.lanes|m.childLanes,m=m.sibling;m=j&~w}else m=0,l.child=null;return zN(n,l,w,d,m)}if((d&536870912)!==0)l.memoizedState={baseLanes:0,cachePool:null},n!==null&&_m(l,w!==null?w.cachePool:null),w!==null?Vy(l,w):Kx(),$y(l);else return m=l.lanes=536870912,zN(n,l,w!==null?w.baseLanes|d:d,d,m)}else w!==null?(_m(l,w.cachePool),Vy(l,w),fl(),l.memoizedState=null):(n!==null&&_m(l,null),Kx(),fl());return or(n,l,j,d),l.child}function Bd(n,l){return n!==null&&n.tag===22||l.stateNode!==null||(l.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.sibling}function zN(n,l,d,m,j){var w=Vx();return w=w===null?null:{parent:Ba._currentValue,pool:w},l.memoizedState={baseLanes:d,cachePool:w},n!==null&&_m(l,null),Kx(),$y(l),n!==null&&rc(n,l,m,!0),l.childLanes=j,null}function Gm(n,l){return l=Km({mode:l.mode,children:l.children},n.mode),l.ref=n.ref,n.child=l,l.return=n,l}function UN(n,l,d){return lo(l,n.child,null,d),n=Gm(l,l.pendingProps),n.flags|=2,ln(l),l.memoizedState=null,n}function M3(n,l,d){var m=l.pendingProps,j=(l.flags&128)!==0;if(l.flags&=-129,n===null){if(Ss){if(m.mode==="hidden")return n=Gm(l,m),l.lanes=536870912,Bd(null,n);if(Xx(l),(n=aa)?(n=J1(n,Cn),n=n!==null&&n.data==="&"?n:null,n!==null&&(l.memoizedState={dehydrated:n,treeContext:il!==null?{id:ni,overflow:ii}:null,retryLane:536870912,hydrationErrors:null},d=Sy(n),d.return=l,l.child=d,ir=l,aa=null)):n=null,n===null)throw ol(l);return l.lanes=536870912,null}return Gm(l,m)}var w=n.memoizedState;if(w!==null){var z=w.dehydrated;if(Xx(l),j)if(l.flags&256)l.flags&=-257,l=UN(n,l,d);else if(l.memoizedState!==null)l.child=n.child,l.flags|=128,l=null;else throw Error(r(558));else if(Ua||rc(n,l,d,!1),j=(d&n.childLanes)!==0,Ua||j){if(m=Js,m!==null&&(z=ss(m,d),z!==0&&z!==w.retryLane))throw w.retryLane=z,Jl(n,z),qr(m,n,z),gp;ah(),l=UN(n,l,d)}else n=w.treeContext,aa=kn(z.nextSibling),ir=l,Ss=!0,ll=null,Cn=!1,n!==null&&ky(l,n),l=Gm(l,m),l.flags|=4096;return l}return n=ki(n.child,{mode:m.mode,children:m.children}),n.ref=l.ref,l.child=n,n.return=l,n}function qm(n,l){var d=l.ref;if(d===null)n!==null&&n.ref!==null&&(l.flags|=4194816);else{if(typeof d!="function"&&typeof d!="object")throw Error(r(284));(n===null||n.ref!==d)&&(l.flags|=4194816)}}function vp(n,l,d,m,j){return ao(l),d=Zx(n,l,d,m,void 0,j),m=Jx(),n!==null&&!Ua?(ep(n,l,j),Ri(n,l,j)):(Ss&&m&&Rx(l),l.flags|=1,or(n,l,d,j),l.child)}function VN(n,l,d,m,j,w){return ao(l),l.updateQueue=null,d=Wy(l,m,d,j),Hy(n),m=Jx(),n!==null&&!Ua?(ep(n,l,w),Ri(n,l,w)):(Ss&&m&&Rx(l),l.flags|=1,or(n,l,d,w),l.child)}function $N(n,l,d,m,j){if(ao(l),l.stateNode===null){var w=ec,z=d.contextType;typeof z=="object"&&z!==null&&(w=lr(z)),w=new d(m,w),l.memoizedState=w.state!==null&&w.state!==void 0?w.state:null,w.updater=xp,l.stateNode=w,w._reactInternals=l,w=l.stateNode,w.props=m,w.state=l.memoizedState,w.refs={},Hx(l),z=d.contextType,w.context=typeof z=="object"&&z!==null?lr(z):ec,w.state=l.memoizedState,z=d.getDerivedStateFromProps,typeof z=="function"&&(fp(l,d,z,m),w.state=l.memoizedState),typeof d.getDerivedStateFromProps=="function"||typeof w.getSnapshotBeforeUpdate=="function"||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(z=w.state,typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount(),z!==w.state&&xp.enqueueReplaceState(w,w.state,null),Pd(l,m,w,j),Rd(),w.state=l.memoizedState),typeof w.componentDidMount=="function"&&(l.flags|=4194308),m=!0}else if(n===null){w=l.stateNode;var ne=l.memoizedProps,be=co(d,ne);w.props=be;var Be=w.context,Ke=d.contextType;z=ec,typeof Ke=="object"&&Ke!==null&&(z=lr(Ke));var tt=d.getDerivedStateFromProps;Ke=typeof tt=="function"||typeof w.getSnapshotBeforeUpdate=="function",ne=l.pendingProps!==ne,Ke||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(ne||Be!==z)&&AN(l,w,m,z),dl=!1;var ze=l.memoizedState;w.state=ze,Pd(l,m,w,j),Rd(),Be=l.memoizedState,ne||ze!==Be||dl?(typeof tt=="function"&&(fp(l,d,tt,m),Be=l.memoizedState),(be=dl||EN(l,d,be,m,ze,Be,z))?(Ke||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount()),typeof w.componentDidMount=="function"&&(l.flags|=4194308)):(typeof w.componentDidMount=="function"&&(l.flags|=4194308),l.memoizedProps=m,l.memoizedState=Be),w.props=m,w.state=Be,w.context=z,m=be):(typeof w.componentDidMount=="function"&&(l.flags|=4194308),m=!1)}else{w=l.stateNode,Wx(n,l),z=l.memoizedProps,Ke=co(d,z),w.props=Ke,tt=l.pendingProps,ze=w.context,Be=d.contextType,be=ec,typeof Be=="object"&&Be!==null&&(be=lr(Be)),ne=d.getDerivedStateFromProps,(Be=typeof ne=="function"||typeof w.getSnapshotBeforeUpdate=="function")||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(z!==tt||ze!==be)&&AN(l,w,m,be),dl=!1,ze=l.memoizedState,w.state=ze,Pd(l,m,w,j),Rd();var He=l.memoizedState;z!==tt||ze!==He||dl||n!==null&&n.dependencies!==null&&Em(n.dependencies)?(typeof ne=="function"&&(fp(l,d,ne,m),He=l.memoizedState),(Ke=dl||EN(l,d,Ke,m,ze,He,be)||n!==null&&n.dependencies!==null&&Em(n.dependencies))?(Be||typeof w.UNSAFE_componentWillUpdate!="function"&&typeof w.componentWillUpdate!="function"||(typeof w.componentWillUpdate=="function"&&w.componentWillUpdate(m,He,be),typeof w.UNSAFE_componentWillUpdate=="function"&&w.UNSAFE_componentWillUpdate(m,He,be)),typeof w.componentDidUpdate=="function"&&(l.flags|=4),typeof w.getSnapshotBeforeUpdate=="function"&&(l.flags|=1024)):(typeof w.componentDidUpdate!="function"||z===n.memoizedProps&&ze===n.memoizedState||(l.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||z===n.memoizedProps&&ze===n.memoizedState||(l.flags|=1024),l.memoizedProps=m,l.memoizedState=He),w.props=m,w.state=He,w.context=be,m=Ke):(typeof w.componentDidUpdate!="function"||z===n.memoizedProps&&ze===n.memoizedState||(l.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||z===n.memoizedProps&&ze===n.memoizedState||(l.flags|=1024),m=!1)}return w=m,qm(n,l),m=(l.flags&128)!==0,w||m?(w=l.stateNode,d=m&&typeof d.getDerivedStateFromError!="function"?null:w.render(),l.flags|=1,n!==null&&m?(l.child=lo(l,n.child,null,j),l.child=lo(l,null,d,j)):or(n,l,d,j),l.memoizedState=w.state,n=l.child):n=Ri(n,l,j),n}function HN(n,l,d,m){return to(),l.flags|=256,or(n,l,d,m),l.child}var jp={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function yp(n){return{baseLanes:n,cachePool:Ry()}}function Np(n,l,d){return n=n!==null?n.childLanes&~d:0,l&&(n|=cn),n}function WN(n,l,d){var m=l.pendingProps,j=!1,w=(l.flags&128)!==0,z;if((z=w)||(z=n!==null&&n.memoizedState===null?!1:(Da.current&2)!==0),z&&(j=!0,l.flags&=-129),z=(l.flags&32)!==0,l.flags&=-33,n===null){if(Ss){if(j?hl(l):fl(),(n=aa)?(n=J1(n,Cn),n=n!==null&&n.data!=="&"?n:null,n!==null&&(l.memoizedState={dehydrated:n,treeContext:il!==null?{id:ni,overflow:ii}:null,retryLane:536870912,hydrationErrors:null},d=Sy(n),d.return=l,l.child=d,ir=l,aa=null)):n=null,n===null)throw ol(l);return a0(n)?l.lanes=32:l.lanes=536870912,null}var ne=m.children;return m=m.fallback,j?(fl(),j=l.mode,ne=Km({mode:"hidden",children:ne},j),m=eo(m,j,d,null),ne.return=l,m.return=l,ne.sibling=m,l.child=ne,m=l.child,m.memoizedState=yp(d),m.childLanes=Np(n,z,d),l.memoizedState=jp,Bd(null,m)):(hl(l),bp(l,ne))}var be=n.memoizedState;if(be!==null&&(ne=be.dehydrated,ne!==null)){if(w)l.flags&256?(hl(l),l.flags&=-257,l=wp(n,l,d)):l.memoizedState!==null?(fl(),l.child=n.child,l.flags|=128,l=null):(fl(),ne=m.fallback,j=l.mode,m=Km({mode:"visible",children:m.children},j),ne=eo(ne,j,d,null),ne.flags|=2,m.return=l,ne.return=l,m.sibling=ne,l.child=m,lo(l,n.child,null,d),m=l.child,m.memoizedState=yp(d),m.childLanes=Np(n,z,d),l.memoizedState=jp,l=Bd(null,m));else if(hl(l),a0(ne)){if(z=ne.nextSibling&&ne.nextSibling.dataset,z)var Be=z.dgst;z=Be,m=Error(r(419)),m.stack="",m.digest=z,kd({value:m,source:null,stack:null}),l=wp(n,l,d)}else if(Ua||rc(n,l,d,!1),z=(d&n.childLanes)!==0,Ua||z){if(z=Js,z!==null&&(m=ss(z,d),m!==0&&m!==be.retryLane))throw be.retryLane=m,Jl(n,m),qr(z,n,m),gp;s0(ne)||ah(),l=wp(n,l,d)}else s0(ne)?(l.flags|=192,l.child=n.child,l=null):(n=be.treeContext,aa=kn(ne.nextSibling),ir=l,Ss=!0,ll=null,Cn=!1,n!==null&&ky(l,n),l=bp(l,m.children),l.flags|=4096);return l}return j?(fl(),ne=m.fallback,j=l.mode,be=n.child,Be=be.sibling,m=ki(be,{mode:"hidden",children:m.children}),m.subtreeFlags=be.subtreeFlags&65011712,Be!==null?ne=ki(Be,ne):(ne=eo(ne,j,d,null),ne.flags|=2),ne.return=l,m.return=l,m.sibling=ne,l.child=m,Bd(null,m),m=l.child,ne=n.child.memoizedState,ne===null?ne=yp(d):(j=ne.cachePool,j!==null?(be=Ba._currentValue,j=j.parent!==be?{parent:be,pool:be}:j):j=Ry(),ne={baseLanes:ne.baseLanes|d,cachePool:j}),m.memoizedState=ne,m.childLanes=Np(n,z,d),l.memoizedState=jp,Bd(n.child,m)):(hl(l),d=n.child,n=d.sibling,d=ki(d,{mode:"visible",children:m.children}),d.return=l,d.sibling=null,n!==null&&(z=l.deletions,z===null?(l.deletions=[n],l.flags|=16):z.push(n)),l.child=d,l.memoizedState=null,d)}function bp(n,l){return l=Km({mode:"visible",children:l},n.mode),l.return=n,n.child=l}function Km(n,l){return n=rn(22,n,null,l),n.lanes=0,n}function wp(n,l,d){return lo(l,n.child,null,d),n=bp(l,l.pendingProps.children),n.flags|=2,l.memoizedState=null,n}function GN(n,l,d){n.lanes|=l;var m=n.alternate;m!==null&&(m.lanes|=l),Lx(n.return,l,d)}function Sp(n,l,d,m,j,w){var z=n.memoizedState;z===null?n.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:m,tail:d,tailMode:j,treeForkCount:w}:(z.isBackwards=l,z.rendering=null,z.renderingStartTime=0,z.last=m,z.tail=d,z.tailMode=j,z.treeForkCount=w)}function qN(n,l,d){var m=l.pendingProps,j=m.revealOrder,w=m.tail;m=m.children;var z=Da.current,ne=(z&2)!==0;if(ne?(z=z&1|2,l.flags|=128):z&=1,Q(Da,z),or(n,l,m,d),m=Ss?Td:0,!ne&&n!==null&&(n.flags&128)!==0)e:for(n=l.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&GN(n,d,l);else if(n.tag===19)GN(n,d,l);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===l)break e;for(;n.sibling===null;){if(n.return===null||n.return===l)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}switch(j){case"forwards":for(d=l.child,j=null;d!==null;)n=d.alternate,n!==null&&Fm(n)===null&&(j=d),d=d.sibling;d=j,d===null?(j=l.child,l.child=null):(j=d.sibling,d.sibling=null),Sp(l,!1,j,d,w,m);break;case"backwards":case"unstable_legacy-backwards":for(d=null,j=l.child,l.child=null;j!==null;){if(n=j.alternate,n!==null&&Fm(n)===null){l.child=j;break}n=j.sibling,j.sibling=d,d=j,j=n}Sp(l,!0,d,null,w,m);break;case"together":Sp(l,!1,null,null,void 0,m);break;default:l.memoizedState=null}return l.child}function Ri(n,l,d){if(n!==null&&(l.dependencies=n.dependencies),gl|=l.lanes,(d&l.childLanes)===0)if(n!==null){if(rc(n,l,d,!1),(d&l.childLanes)===0)return null}else return null;if(n!==null&&l.child!==n.child)throw Error(r(153));if(l.child!==null){for(n=l.child,d=ki(n,n.pendingProps),l.child=d,d.return=l;n.sibling!==null;)n=n.sibling,d=d.sibling=ki(n,n.pendingProps),d.return=l;d.sibling=null}return l.child}function Cp(n,l){return(n.lanes&l)!==0?!0:(n=n.dependencies,!!(n!==null&&Em(n)))}function F3(n,l,d){switch(l.tag){case 3:Me(l,l.stateNode.containerInfo),cl(l,Ba,n.memoizedState.cache),to();break;case 27:case 5:ce(l);break;case 4:Me(l,l.stateNode.containerInfo);break;case 10:cl(l,l.type,l.memoizedProps.value);break;case 31:if(l.memoizedState!==null)return l.flags|=128,Xx(l),null;break;case 13:var m=l.memoizedState;if(m!==null)return m.dehydrated!==null?(hl(l),l.flags|=128,null):(d&l.child.childLanes)!==0?WN(n,l,d):(hl(l),n=Ri(n,l,d),n!==null?n.sibling:null);hl(l);break;case 19:var j=(n.flags&128)!==0;if(m=(d&l.childLanes)!==0,m||(rc(n,l,d,!1),m=(d&l.childLanes)!==0),j){if(m)return qN(n,l,d);l.flags|=128}if(j=l.memoizedState,j!==null&&(j.rendering=null,j.tail=null,j.lastEffect=null),Q(Da,Da.current),m)break;return null;case 22:return l.lanes=0,BN(n,l,d,l.pendingProps);case 24:cl(l,Ba,n.memoizedState.cache)}return Ri(n,l,d)}function KN(n,l,d){if(n!==null)if(n.memoizedProps!==l.pendingProps)Ua=!0;else{if(!Cp(n,d)&&(l.flags&128)===0)return Ua=!1,F3(n,l,d);Ua=(n.flags&131072)!==0}else Ua=!1,Ss&&(l.flags&1048576)!==0&&Ty(l,Td,l.index);switch(l.lanes=0,l.tag){case 16:e:{var m=l.pendingProps;if(n=no(l.elementType),l.type=n,typeof n=="function")_x(n)?(m=co(n,m),l.tag=1,l=$N(null,l,n,m,d)):(l.tag=0,l=vp(null,l,n,m,d));else{if(n!=null){var j=n.$$typeof;if(j===G){l.tag=11,l=FN(null,l,n,m,d);break e}else if(j===k){l.tag=14,l=IN(null,l,n,m,d);break e}}throw l=L(n)||n,Error(r(306,l,""))}}return l;case 0:return vp(n,l,l.type,l.pendingProps,d);case 1:return m=l.type,j=co(m,l.pendingProps),$N(n,l,m,j,d);case 3:e:{if(Me(l,l.stateNode.containerInfo),n===null)throw Error(r(387));m=l.pendingProps;var w=l.memoizedState;j=w.element,Wx(n,l),Pd(l,m,null,d);var z=l.memoizedState;if(m=z.cache,cl(l,Ba,m),m!==w.cache&&Bx(l,[Ba],d,!0),Rd(),m=z.element,w.isDehydrated)if(w={element:m,isDehydrated:!1,cache:z.cache},l.updateQueue.baseState=w,l.memoizedState=w,l.flags&256){l=HN(n,l,m,d);break e}else if(m!==j){j=bn(Error(r(424)),l),kd(j),l=HN(n,l,m,d);break e}else{switch(n=l.stateNode.containerInfo,n.nodeType){case 9:n=n.body;break;default:n=n.nodeName==="HTML"?n.ownerDocument.body:n}for(aa=kn(n.firstChild),ir=l,Ss=!0,ll=null,Cn=!0,d=By(l,null,m,d),l.child=d;d;)d.flags=d.flags&-3|4096,d=d.sibling}else{if(to(),m===j){l=Ri(n,l,d);break e}or(n,l,m,d)}l=l.child}return l;case 26:return qm(n,l),n===null?(d=nb(l.type,null,l.pendingProps,null))?l.memoizedState=d:Ss||(d=l.type,n=l.pendingProps,m=dh(oe.current).createElement(d),m[P]=l,m[ie]=n,cr(m,d,n),it(m),l.stateNode=m):l.memoizedState=nb(l.type,n.memoizedProps,l.pendingProps,n.memoizedState),null;case 27:return ce(l),n===null&&Ss&&(m=l.stateNode=sb(l.type,l.pendingProps,oe.current),ir=l,Cn=!0,j=aa,bl(l.type)?(r0=j,aa=kn(m.firstChild)):aa=j),or(n,l,l.pendingProps.children,d),qm(n,l),n===null&&(l.flags|=4194304),l.child;case 5:return n===null&&Ss&&((j=m=aa)&&(m=m5(m,l.type,l.pendingProps,Cn),m!==null?(l.stateNode=m,ir=l,aa=kn(m.firstChild),Cn=!1,j=!0):j=!1),j||ol(l)),ce(l),j=l.type,w=l.pendingProps,z=n!==null?n.memoizedProps:null,m=w.children,Jp(j,w)?m=null:z!==null&&Jp(j,z)&&(l.flags|=32),l.memoizedState!==null&&(j=Zx(n,l,k3,null,null,d),eu._currentValue=j),qm(n,l),or(n,l,m,d),l.child;case 6:return n===null&&Ss&&((n=d=aa)&&(d=h5(d,l.pendingProps,Cn),d!==null?(l.stateNode=d,ir=l,aa=null,n=!0):n=!1),n||ol(l)),null;case 13:return WN(n,l,d);case 4:return Me(l,l.stateNode.containerInfo),m=l.pendingProps,n===null?l.child=lo(l,null,m,d):or(n,l,m,d),l.child;case 11:return FN(n,l,l.type,l.pendingProps,d);case 7:return or(n,l,l.pendingProps,d),l.child;case 8:return or(n,l,l.pendingProps.children,d),l.child;case 12:return or(n,l,l.pendingProps.children,d),l.child;case 10:return m=l.pendingProps,cl(l,l.type,m.value),or(n,l,m.children,d),l.child;case 9:return j=l.type._context,m=l.pendingProps.children,ao(l),j=lr(j),m=m(j),l.flags|=1,or(n,l,m,d),l.child;case 14:return IN(n,l,l.type,l.pendingProps,d);case 15:return LN(n,l,l.type,l.pendingProps,d);case 19:return qN(n,l,d);case 31:return M3(n,l,d);case 22:return BN(n,l,d,l.pendingProps);case 24:return ao(l),m=lr(Ba),n===null?(j=Vx(),j===null&&(j=Js,w=zx(),j.pooledCache=w,w.refCount++,w!==null&&(j.pooledCacheLanes|=d),j=w),l.memoizedState={parent:m,cache:j},Hx(l),cl(l,Ba,j)):((n.lanes&d)!==0&&(Wx(n,l),Pd(l,null,null,d),Rd()),j=n.memoizedState,w=l.memoizedState,j.parent!==m?(j={parent:m,cache:m},l.memoizedState=j,l.lanes===0&&(l.memoizedState=l.updateQueue.baseState=j),cl(l,Ba,m)):(m=w.cache,cl(l,Ba,m),m!==j.cache&&Bx(l,[Ba],d,!0))),or(n,l,l.pendingProps.children,d),l.child;case 29:throw l.pendingProps}throw Error(r(156,l.tag))}function Pi(n){n.flags|=4}function Tp(n,l,d,m,j){if((l=(n.mode&32)!==0)&&(l=!1),l){if(n.flags|=16777216,(j&335544128)===j)if(n.stateNode.complete)n.flags|=8192;else if(N1())n.flags|=8192;else throw io=Om,$x}else n.flags&=-16777217}function YN(n,l){if(l.type!=="stylesheet"||(l.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!db(l))if(N1())n.flags|=8192;else throw io=Om,$x}function Ym(n,l){l!==null&&(n.flags|=4),n.flags&16384&&(l=n.tag!==22?ys():536870912,n.lanes|=l,pc|=l)}function zd(n,l){if(!Ss)switch(n.tailMode){case"hidden":l=n.tail;for(var d=null;l!==null;)l.alternate!==null&&(d=l),l=l.sibling;d===null?n.tail=null:d.sibling=null;break;case"collapsed":d=n.tail;for(var m=null;d!==null;)d.alternate!==null&&(m=d),d=d.sibling;m===null?l||n.tail===null?n.tail=null:n.tail.sibling=null:m.sibling=null}}function ra(n){var l=n.alternate!==null&&n.alternate.child===n.child,d=0,m=0;if(l)for(var j=n.child;j!==null;)d|=j.lanes|j.childLanes,m|=j.subtreeFlags&65011712,m|=j.flags&65011712,j.return=n,j=j.sibling;else for(j=n.child;j!==null;)d|=j.lanes|j.childLanes,m|=j.subtreeFlags,m|=j.flags,j.return=n,j=j.sibling;return n.subtreeFlags|=m,n.childLanes=d,l}function I3(n,l,d){var m=l.pendingProps;switch(Px(l),l.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ra(l),null;case 1:return ra(l),null;case 3:return d=l.stateNode,m=null,n!==null&&(m=n.memoizedState.cache),l.memoizedState.cache!==m&&(l.flags|=2048),_i(Ba),ve(),d.pendingContext&&(d.context=d.pendingContext,d.pendingContext=null),(n===null||n.child===null)&&(ac(l)?Pi(l):n===null||n.memoizedState.isDehydrated&&(l.flags&256)===0||(l.flags|=1024,Fx())),ra(l),null;case 26:var j=l.type,w=l.memoizedState;return n===null?(Pi(l),w!==null?(ra(l),YN(l,w)):(ra(l),Tp(l,j,null,m,d))):w?w!==n.memoizedState?(Pi(l),ra(l),YN(l,w)):(ra(l),l.flags&=-16777217):(n=n.memoizedProps,n!==m&&Pi(l),ra(l),Tp(l,j,n,m,d)),null;case 27:if(Pe(l),d=oe.current,j=l.type,n!==null&&l.stateNode!=null)n.memoizedProps!==m&&Pi(l);else{if(!m){if(l.stateNode===null)throw Error(r(166));return ra(l),null}n=O.current,ac(l)?Ey(l):(n=sb(j,m,d),l.stateNode=n,Pi(l))}return ra(l),null;case 5:if(Pe(l),j=l.type,n!==null&&l.stateNode!=null)n.memoizedProps!==m&&Pi(l);else{if(!m){if(l.stateNode===null)throw Error(r(166));return ra(l),null}if(w=O.current,ac(l))Ey(l);else{var z=dh(oe.current);switch(w){case 1:w=z.createElementNS("http://www.w3.org/2000/svg",j);break;case 2:w=z.createElementNS("http://www.w3.org/1998/Math/MathML",j);break;default:switch(j){case"svg":w=z.createElementNS("http://www.w3.org/2000/svg",j);break;case"math":w=z.createElementNS("http://www.w3.org/1998/Math/MathML",j);break;case"script":w=z.createElement("div"),w.innerHTML="<script><\/script>",w=w.removeChild(w.firstChild);break;case"select":w=typeof m.is=="string"?z.createElement("select",{is:m.is}):z.createElement("select"),m.multiple?w.multiple=!0:m.size&&(w.size=m.size);break;default:w=typeof m.is=="string"?z.createElement(j,{is:m.is}):z.createElement(j)}}w[P]=l,w[ie]=m;e:for(z=l.child;z!==null;){if(z.tag===5||z.tag===6)w.appendChild(z.stateNode);else if(z.tag!==4&&z.tag!==27&&z.child!==null){z.child.return=z,z=z.child;continue}if(z===l)break e;for(;z.sibling===null;){if(z.return===null||z.return===l)break e;z=z.return}z.sibling.return=z.return,z=z.sibling}l.stateNode=w;e:switch(cr(w,j,m),j){case"button":case"input":case"select":case"textarea":m=!!m.autoFocus;break e;case"img":m=!0;break e;default:m=!1}m&&Pi(l)}}return ra(l),Tp(l,l.type,n===null?null:n.memoizedProps,l.pendingProps,d),null;case 6:if(n&&l.stateNode!=null)n.memoizedProps!==m&&Pi(l);else{if(typeof m!="string"&&l.stateNode===null)throw Error(r(166));if(n=oe.current,ac(l)){if(n=l.stateNode,d=l.memoizedProps,m=null,j=ir,j!==null)switch(j.tag){case 27:case 5:m=j.memoizedProps}n[P]=l,n=!!(n.nodeValue===d||m!==null&&m.suppressHydrationWarning===!0||W1(n.nodeValue,d)),n||ol(l,!0)}else n=dh(n).createTextNode(m),n[P]=l,l.stateNode=n}return ra(l),null;case 31:if(d=l.memoizedState,n===null||n.memoizedState!==null){if(m=ac(l),d!==null){if(n===null){if(!m)throw Error(r(318));if(n=l.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(r(557));n[P]=l}else to(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;ra(l),n=!1}else d=Fx(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=d),n=!0;if(!n)return l.flags&256?(ln(l),l):(ln(l),null);if((l.flags&128)!==0)throw Error(r(558))}return ra(l),null;case 13:if(m=l.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(j=ac(l),m!==null&&m.dehydrated!==null){if(n===null){if(!j)throw Error(r(318));if(j=l.memoizedState,j=j!==null?j.dehydrated:null,!j)throw Error(r(317));j[P]=l}else to(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;ra(l),j=!1}else j=Fx(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=j),j=!0;if(!j)return l.flags&256?(ln(l),l):(ln(l),null)}return ln(l),(l.flags&128)!==0?(l.lanes=d,l):(d=m!==null,n=n!==null&&n.memoizedState!==null,d&&(m=l.child,j=null,m.alternate!==null&&m.alternate.memoizedState!==null&&m.alternate.memoizedState.cachePool!==null&&(j=m.alternate.memoizedState.cachePool.pool),w=null,m.memoizedState!==null&&m.memoizedState.cachePool!==null&&(w=m.memoizedState.cachePool.pool),w!==j&&(m.flags|=2048)),d!==n&&d&&(l.child.flags|=8192),Ym(l,l.updateQueue),ra(l),null);case 4:return ve(),n===null&&Kp(l.stateNode.containerInfo),ra(l),null;case 10:return _i(l.type),ra(l),null;case 19:if(I(Da),m=l.memoizedState,m===null)return ra(l),null;if(j=(l.flags&128)!==0,w=m.rendering,w===null)if(j)zd(m,!1);else{if(Sa!==0||n!==null&&(n.flags&128)!==0)for(n=l.child;n!==null;){if(w=Fm(n),w!==null){for(l.flags|=128,zd(m,!1),n=w.updateQueue,l.updateQueue=n,Ym(l,n),l.subtreeFlags=0,n=d,d=l.child;d!==null;)wy(d,n),d=d.sibling;return Q(Da,Da.current&1|2),Ss&&Ei(l,m.treeForkCount),l.child}n=n.sibling}m.tail!==null&&_t()>eh&&(l.flags|=128,j=!0,zd(m,!1),l.lanes=4194304)}else{if(!j)if(n=Fm(w),n!==null){if(l.flags|=128,j=!0,n=n.updateQueue,l.updateQueue=n,Ym(l,n),zd(m,!0),m.tail===null&&m.tailMode==="hidden"&&!w.alternate&&!Ss)return ra(l),null}else 2*_t()-m.renderingStartTime>eh&&d!==536870912&&(l.flags|=128,j=!0,zd(m,!1),l.lanes=4194304);m.isBackwards?(w.sibling=l.child,l.child=w):(n=m.last,n!==null?n.sibling=w:l.child=w,m.last=w)}return m.tail!==null?(n=m.tail,m.rendering=n,m.tail=n.sibling,m.renderingStartTime=_t(),n.sibling=null,d=Da.current,Q(Da,j?d&1|2:d&1),Ss&&Ei(l,m.treeForkCount),n):(ra(l),null);case 22:case 23:return ln(l),Yx(),m=l.memoizedState!==null,n!==null?n.memoizedState!==null!==m&&(l.flags|=8192):m&&(l.flags|=8192),m?(d&536870912)!==0&&(l.flags&128)===0&&(ra(l),l.subtreeFlags&6&&(l.flags|=8192)):ra(l),d=l.updateQueue,d!==null&&Ym(l,d.retryQueue),d=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(d=n.memoizedState.cachePool.pool),m=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(m=l.memoizedState.cachePool.pool),m!==d&&(l.flags|=2048),n!==null&&I(ro),null;case 24:return d=null,n!==null&&(d=n.memoizedState.cache),l.memoizedState.cache!==d&&(l.flags|=2048),_i(Ba),ra(l),null;case 25:return null;case 30:return null}throw Error(r(156,l.tag))}function L3(n,l){switch(Px(l),l.tag){case 1:return n=l.flags,n&65536?(l.flags=n&-65537|128,l):null;case 3:return _i(Ba),ve(),n=l.flags,(n&65536)!==0&&(n&128)===0?(l.flags=n&-65537|128,l):null;case 26:case 27:case 5:return Pe(l),null;case 31:if(l.memoizedState!==null){if(ln(l),l.alternate===null)throw Error(r(340));to()}return n=l.flags,n&65536?(l.flags=n&-65537|128,l):null;case 13:if(ln(l),n=l.memoizedState,n!==null&&n.dehydrated!==null){if(l.alternate===null)throw Error(r(340));to()}return n=l.flags,n&65536?(l.flags=n&-65537|128,l):null;case 19:return I(Da),null;case 4:return ve(),null;case 10:return _i(l.type),null;case 22:case 23:return ln(l),Yx(),n!==null&&I(ro),n=l.flags,n&65536?(l.flags=n&-65537|128,l):null;case 24:return _i(Ba),null;case 25:return null;default:return null}}function XN(n,l){switch(Px(l),l.tag){case 3:_i(Ba),ve();break;case 26:case 27:case 5:Pe(l);break;case 4:ve();break;case 31:l.memoizedState!==null&&ln(l);break;case 13:ln(l);break;case 19:I(Da);break;case 10:_i(l.type);break;case 22:case 23:ln(l),Yx(),n!==null&&I(ro);break;case 24:_i(Ba)}}function Ud(n,l){try{var d=l.updateQueue,m=d!==null?d.lastEffect:null;if(m!==null){var j=m.next;d=j;do{if((d.tag&n)===n){m=void 0;var w=d.create,z=d.inst;m=w(),z.destroy=m}d=d.next}while(d!==j)}}catch(ne){Bs(l,l.return,ne)}}function xl(n,l,d){try{var m=l.updateQueue,j=m!==null?m.lastEffect:null;if(j!==null){var w=j.next;m=w;do{if((m.tag&n)===n){var z=m.inst,ne=z.destroy;if(ne!==void 0){z.destroy=void 0,j=l;var be=d,Be=ne;try{Be()}catch(Ke){Bs(j,be,Ke)}}}m=m.next}while(m!==w)}}catch(Ke){Bs(l,l.return,Ke)}}function QN(n){var l=n.updateQueue;if(l!==null){var d=n.stateNode;try{Uy(l,d)}catch(m){Bs(n,n.return,m)}}}function ZN(n,l,d){d.props=co(n.type,n.memoizedProps),d.state=n.memoizedState;try{d.componentWillUnmount()}catch(m){Bs(n,l,m)}}function Vd(n,l){try{var d=n.ref;if(d!==null){switch(n.tag){case 26:case 27:case 5:var m=n.stateNode;break;case 30:m=n.stateNode;break;default:m=n.stateNode}typeof d=="function"?n.refCleanup=d(m):d.current=m}}catch(j){Bs(n,l,j)}}function li(n,l){var d=n.ref,m=n.refCleanup;if(d!==null)if(typeof m=="function")try{m()}catch(j){Bs(n,l,j)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof d=="function")try{d(null)}catch(j){Bs(n,l,j)}else d.current=null}function JN(n){var l=n.type,d=n.memoizedProps,m=n.stateNode;try{e:switch(l){case"button":case"input":case"select":case"textarea":d.autoFocus&&m.focus();break e;case"img":d.src?m.src=d.src:d.srcSet&&(m.srcset=d.srcSet)}}catch(j){Bs(n,n.return,j)}}function kp(n,l,d){try{var m=n.stateNode;i5(m,n.type,d,l),m[ie]=l}catch(j){Bs(n,n.return,j)}}function e1(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&bl(n.type)||n.tag===4}function Ep(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||e1(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&bl(n.type)||n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Ap(n,l,d){var m=n.tag;if(m===5||m===6)n=n.stateNode,l?(d.nodeType===9?d.body:d.nodeName==="HTML"?d.ownerDocument.body:d).insertBefore(n,l):(l=d.nodeType===9?d.body:d.nodeName==="HTML"?d.ownerDocument.body:d,l.appendChild(n),d=d._reactRootContainer,d!=null||l.onclick!==null||(l.onclick=Ci));else if(m!==4&&(m===27&&bl(n.type)&&(d=n.stateNode,l=null),n=n.child,n!==null))for(Ap(n,l,d),n=n.sibling;n!==null;)Ap(n,l,d),n=n.sibling}function Xm(n,l,d){var m=n.tag;if(m===5||m===6)n=n.stateNode,l?d.insertBefore(n,l):d.appendChild(n);else if(m!==4&&(m===27&&bl(n.type)&&(d=n.stateNode),n=n.child,n!==null))for(Xm(n,l,d),n=n.sibling;n!==null;)Xm(n,l,d),n=n.sibling}function t1(n){var l=n.stateNode,d=n.memoizedProps;try{for(var m=n.type,j=l.attributes;j.length;)l.removeAttributeNode(j[0]);cr(l,m,d),l[P]=n,l[ie]=d}catch(w){Bs(n,n.return,w)}}var Mi=!1,Va=!1,_p=!1,s1=typeof WeakSet=="function"?WeakSet:Set,tr=null;function B3(n,l){if(n=n.containerInfo,Qp=gh,n=fy(n),wx(n)){if("selectionStart"in n)var d={start:n.selectionStart,end:n.selectionEnd};else e:{d=(d=n.ownerDocument)&&d.defaultView||window;var m=d.getSelection&&d.getSelection();if(m&&m.rangeCount!==0){d=m.anchorNode;var j=m.anchorOffset,w=m.focusNode;m=m.focusOffset;try{d.nodeType,w.nodeType}catch{d=null;break e}var z=0,ne=-1,be=-1,Be=0,Ke=0,tt=n,ze=null;t:for(;;){for(var He;tt!==d||j!==0&&tt.nodeType!==3||(ne=z+j),tt!==w||m!==0&&tt.nodeType!==3||(be=z+m),tt.nodeType===3&&(z+=tt.nodeValue.length),(He=tt.firstChild)!==null;)ze=tt,tt=He;for(;;){if(tt===n)break t;if(ze===d&&++Be===j&&(ne=z),ze===w&&++Ke===m&&(be=z),(He=tt.nextSibling)!==null)break;tt=ze,ze=tt.parentNode}tt=He}d=ne===-1||be===-1?null:{start:ne,end:be}}else d=null}d=d||{start:0,end:0}}else d=null;for(Zp={focusedElem:n,selectionRange:d},gh=!1,tr=l;tr!==null;)if(l=tr,n=l.child,(l.subtreeFlags&1028)!==0&&n!==null)n.return=l,tr=n;else for(;tr!==null;){switch(l=tr,w=l.alternate,n=l.flags,l.tag){case 0:if((n&4)!==0&&(n=l.updateQueue,n=n!==null?n.events:null,n!==null))for(d=0;d<n.length;d++)j=n[d],j.ref.impl=j.nextImpl;break;case 11:case 15:break;case 1:if((n&1024)!==0&&w!==null){n=void 0,d=l,j=w.memoizedProps,w=w.memoizedState,m=d.stateNode;try{var St=co(d.type,j);n=m.getSnapshotBeforeUpdate(St,w),m.__reactInternalSnapshotBeforeUpdate=n}catch(Wt){Bs(d,d.return,Wt)}}break;case 3:if((n&1024)!==0){if(n=l.stateNode.containerInfo,d=n.nodeType,d===9)t0(n);else if(d===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":t0(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(r(163))}if(n=l.sibling,n!==null){n.return=l.return,tr=n;break}tr=l.return}}function a1(n,l,d){var m=d.flags;switch(d.tag){case 0:case 11:case 15:Ii(n,d),m&4&&Ud(5,d);break;case 1:if(Ii(n,d),m&4)if(n=d.stateNode,l===null)try{n.componentDidMount()}catch(z){Bs(d,d.return,z)}else{var j=co(d.type,l.memoizedProps);l=l.memoizedState;try{n.componentDidUpdate(j,l,n.__reactInternalSnapshotBeforeUpdate)}catch(z){Bs(d,d.return,z)}}m&64&&QN(d),m&512&&Vd(d,d.return);break;case 3:if(Ii(n,d),m&64&&(n=d.updateQueue,n!==null)){if(l=null,d.child!==null)switch(d.child.tag){case 27:case 5:l=d.child.stateNode;break;case 1:l=d.child.stateNode}try{Uy(n,l)}catch(z){Bs(d,d.return,z)}}break;case 27:l===null&&m&4&&t1(d);case 26:case 5:Ii(n,d),l===null&&m&4&&JN(d),m&512&&Vd(d,d.return);break;case 12:Ii(n,d);break;case 31:Ii(n,d),m&4&&i1(n,d);break;case 13:Ii(n,d),m&4&&l1(n,d),m&64&&(n=d.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(d=K3.bind(null,d),f5(n,d))));break;case 22:if(m=d.memoizedState!==null||Mi,!m){l=l!==null&&l.memoizedState!==null||Va,j=Mi;var w=Va;Mi=m,(Va=l)&&!w?Li(n,d,(d.subtreeFlags&8772)!==0):Ii(n,d),Mi=j,Va=w}break;case 30:break;default:Ii(n,d)}}function r1(n){var l=n.alternate;l!==null&&(n.alternate=null,r1(l)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(l=n.stateNode,l!==null&&rt(l)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var ua=null,$r=!1;function Fi(n,l,d){for(d=d.child;d!==null;)n1(n,l,d),d=d.sibling}function n1(n,l,d){if(ts&&typeof ts.onCommitFiberUnmount=="function")try{ts.onCommitFiberUnmount(Zt,d)}catch{}switch(d.tag){case 26:Va||li(d,l),Fi(n,l,d),d.memoizedState?d.memoizedState.count--:d.stateNode&&(d=d.stateNode,d.parentNode.removeChild(d));break;case 27:Va||li(d,l);var m=ua,j=$r;bl(d.type)&&(ua=d.stateNode,$r=!1),Fi(n,l,d),Qd(d.stateNode),ua=m,$r=j;break;case 5:Va||li(d,l);case 6:if(m=ua,j=$r,ua=null,Fi(n,l,d),ua=m,$r=j,ua!==null)if($r)try{(ua.nodeType===9?ua.body:ua.nodeName==="HTML"?ua.ownerDocument.body:ua).removeChild(d.stateNode)}catch(w){Bs(d,l,w)}else try{ua.removeChild(d.stateNode)}catch(w){Bs(d,l,w)}break;case 18:ua!==null&&($r?(n=ua,Q1(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,d.stateNode),Sc(n)):Q1(ua,d.stateNode));break;case 4:m=ua,j=$r,ua=d.stateNode.containerInfo,$r=!0,Fi(n,l,d),ua=m,$r=j;break;case 0:case 11:case 14:case 15:xl(2,d,l),Va||xl(4,d,l),Fi(n,l,d);break;case 1:Va||(li(d,l),m=d.stateNode,typeof m.componentWillUnmount=="function"&&ZN(d,l,m)),Fi(n,l,d);break;case 21:Fi(n,l,d);break;case 22:Va=(m=Va)||d.memoizedState!==null,Fi(n,l,d),Va=m;break;default:Fi(n,l,d)}}function i1(n,l){if(l.memoizedState===null&&(n=l.alternate,n!==null&&(n=n.memoizedState,n!==null))){n=n.dehydrated;try{Sc(n)}catch(d){Bs(l,l.return,d)}}}function l1(n,l){if(l.memoizedState===null&&(n=l.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{Sc(n)}catch(d){Bs(l,l.return,d)}}function z3(n){switch(n.tag){case 31:case 13:case 19:var l=n.stateNode;return l===null&&(l=n.stateNode=new s1),l;case 22:return n=n.stateNode,l=n._retryCache,l===null&&(l=n._retryCache=new s1),l;default:throw Error(r(435,n.tag))}}function Qm(n,l){var d=z3(n);l.forEach(function(m){if(!d.has(m)){d.add(m);var j=Y3.bind(null,n,m);m.then(j,j)}})}function Hr(n,l){var d=l.deletions;if(d!==null)for(var m=0;m<d.length;m++){var j=d[m],w=n,z=l,ne=z;e:for(;ne!==null;){switch(ne.tag){case 27:if(bl(ne.type)){ua=ne.stateNode,$r=!1;break e}break;case 5:ua=ne.stateNode,$r=!1;break e;case 3:case 4:ua=ne.stateNode.containerInfo,$r=!0;break e}ne=ne.return}if(ua===null)throw Error(r(160));n1(w,z,j),ua=null,$r=!1,w=j.alternate,w!==null&&(w.return=null),j.return=null}if(l.subtreeFlags&13886)for(l=l.child;l!==null;)o1(l,n),l=l.sibling}var Un=null;function o1(n,l){var d=n.alternate,m=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:Hr(l,n),Wr(n),m&4&&(xl(3,n,n.return),Ud(3,n),xl(5,n,n.return));break;case 1:Hr(l,n),Wr(n),m&512&&(Va||d===null||li(d,d.return)),m&64&&Mi&&(n=n.updateQueue,n!==null&&(m=n.callbacks,m!==null&&(d=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=d===null?m:d.concat(m))));break;case 26:var j=Un;if(Hr(l,n),Wr(n),m&512&&(Va||d===null||li(d,d.return)),m&4){var w=d!==null?d.memoizedState:null;if(m=n.memoizedState,d===null)if(m===null)if(n.stateNode===null){e:{m=n.type,d=n.memoizedProps,j=j.ownerDocument||j;t:switch(m){case"title":w=j.getElementsByTagName("title")[0],(!w||w[Le]||w[P]||w.namespaceURI==="http://www.w3.org/2000/svg"||w.hasAttribute("itemprop"))&&(w=j.createElement(m),j.head.insertBefore(w,j.querySelector("head > title"))),cr(w,m,d),w[P]=n,it(w),m=w;break e;case"link":var z=ob("link","href",j).get(m+(d.href||""));if(z){for(var ne=0;ne<z.length;ne++)if(w=z[ne],w.getAttribute("href")===(d.href==null||d.href===""?null:d.href)&&w.getAttribute("rel")===(d.rel==null?null:d.rel)&&w.getAttribute("title")===(d.title==null?null:d.title)&&w.getAttribute("crossorigin")===(d.crossOrigin==null?null:d.crossOrigin)){z.splice(ne,1);break t}}w=j.createElement(m),cr(w,m,d),j.head.appendChild(w);break;case"meta":if(z=ob("meta","content",j).get(m+(d.content||""))){for(ne=0;ne<z.length;ne++)if(w=z[ne],w.getAttribute("content")===(d.content==null?null:""+d.content)&&w.getAttribute("name")===(d.name==null?null:d.name)&&w.getAttribute("property")===(d.property==null?null:d.property)&&w.getAttribute("http-equiv")===(d.httpEquiv==null?null:d.httpEquiv)&&w.getAttribute("charset")===(d.charSet==null?null:d.charSet)){z.splice(ne,1);break t}}w=j.createElement(m),cr(w,m,d),j.head.appendChild(w);break;default:throw Error(r(468,m))}w[P]=n,it(w),m=w}n.stateNode=m}else cb(j,n.type,n.stateNode);else n.stateNode=lb(j,m,n.memoizedProps);else w!==m?(w===null?d.stateNode!==null&&(d=d.stateNode,d.parentNode.removeChild(d)):w.count--,m===null?cb(j,n.type,n.stateNode):lb(j,m,n.memoizedProps)):m===null&&n.stateNode!==null&&kp(n,n.memoizedProps,d.memoizedProps)}break;case 27:Hr(l,n),Wr(n),m&512&&(Va||d===null||li(d,d.return)),d!==null&&m&4&&kp(n,n.memoizedProps,d.memoizedProps);break;case 5:if(Hr(l,n),Wr(n),m&512&&(Va||d===null||li(d,d.return)),n.flags&32){j=n.stateNode;try{qo(j,"")}catch(St){Bs(n,n.return,St)}}m&4&&n.stateNode!=null&&(j=n.memoizedProps,kp(n,j,d!==null?d.memoizedProps:j)),m&1024&&(_p=!0);break;case 6:if(Hr(l,n),Wr(n),m&4){if(n.stateNode===null)throw Error(r(162));m=n.memoizedProps,d=n.stateNode;try{d.nodeValue=m}catch(St){Bs(n,n.return,St)}}break;case 3:if(hh=null,j=Un,Un=uh(l.containerInfo),Hr(l,n),Un=j,Wr(n),m&4&&d!==null&&d.memoizedState.isDehydrated)try{Sc(l.containerInfo)}catch(St){Bs(n,n.return,St)}_p&&(_p=!1,c1(n));break;case 4:m=Un,Un=uh(n.stateNode.containerInfo),Hr(l,n),Wr(n),Un=m;break;case 12:Hr(l,n),Wr(n);break;case 31:Hr(l,n),Wr(n),m&4&&(m=n.updateQueue,m!==null&&(n.updateQueue=null,Qm(n,m)));break;case 13:Hr(l,n),Wr(n),n.child.flags&8192&&n.memoizedState!==null!=(d!==null&&d.memoizedState!==null)&&(Jm=_t()),m&4&&(m=n.updateQueue,m!==null&&(n.updateQueue=null,Qm(n,m)));break;case 22:j=n.memoizedState!==null;var be=d!==null&&d.memoizedState!==null,Be=Mi,Ke=Va;if(Mi=Be||j,Va=Ke||be,Hr(l,n),Va=Ke,Mi=Be,Wr(n),m&8192)e:for(l=n.stateNode,l._visibility=j?l._visibility&-2:l._visibility|1,j&&(d===null||be||Mi||Va||uo(n)),d=null,l=n;;){if(l.tag===5||l.tag===26){if(d===null){be=d=l;try{if(w=be.stateNode,j)z=w.style,typeof z.setProperty=="function"?z.setProperty("display","none","important"):z.display="none";else{ne=be.stateNode;var tt=be.memoizedProps.style,ze=tt!=null&&tt.hasOwnProperty("display")?tt.display:null;ne.style.display=ze==null||typeof ze=="boolean"?"":(""+ze).trim()}}catch(St){Bs(be,be.return,St)}}}else if(l.tag===6){if(d===null){be=l;try{be.stateNode.nodeValue=j?"":be.memoizedProps}catch(St){Bs(be,be.return,St)}}}else if(l.tag===18){if(d===null){be=l;try{var He=be.stateNode;j?Z1(He,!0):Z1(be.stateNode,!1)}catch(St){Bs(be,be.return,St)}}}else if((l.tag!==22&&l.tag!==23||l.memoizedState===null||l===n)&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===n)break e;for(;l.sibling===null;){if(l.return===null||l.return===n)break e;d===l&&(d=null),l=l.return}d===l&&(d=null),l.sibling.return=l.return,l=l.sibling}m&4&&(m=n.updateQueue,m!==null&&(d=m.retryQueue,d!==null&&(m.retryQueue=null,Qm(n,d))));break;case 19:Hr(l,n),Wr(n),m&4&&(m=n.updateQueue,m!==null&&(n.updateQueue=null,Qm(n,m)));break;case 30:break;case 21:break;default:Hr(l,n),Wr(n)}}function Wr(n){var l=n.flags;if(l&2){try{for(var d,m=n.return;m!==null;){if(e1(m)){d=m;break}m=m.return}if(d==null)throw Error(r(160));switch(d.tag){case 27:var j=d.stateNode,w=Ep(n);Xm(n,w,j);break;case 5:var z=d.stateNode;d.flags&32&&(qo(z,""),d.flags&=-33);var ne=Ep(n);Xm(n,ne,z);break;case 3:case 4:var be=d.stateNode.containerInfo,Be=Ep(n);Ap(n,Be,be);break;default:throw Error(r(161))}}catch(Ke){Bs(n,n.return,Ke)}n.flags&=-3}l&4096&&(n.flags&=-4097)}function c1(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var l=n;c1(l),l.tag===5&&l.flags&1024&&l.stateNode.reset(),n=n.sibling}}function Ii(n,l){if(l.subtreeFlags&8772)for(l=l.child;l!==null;)a1(n,l.alternate,l),l=l.sibling}function uo(n){for(n=n.child;n!==null;){var l=n;switch(l.tag){case 0:case 11:case 14:case 15:xl(4,l,l.return),uo(l);break;case 1:li(l,l.return);var d=l.stateNode;typeof d.componentWillUnmount=="function"&&ZN(l,l.return,d),uo(l);break;case 27:Qd(l.stateNode);case 26:case 5:li(l,l.return),uo(l);break;case 22:l.memoizedState===null&&uo(l);break;case 30:uo(l);break;default:uo(l)}n=n.sibling}}function Li(n,l,d){for(d=d&&(l.subtreeFlags&8772)!==0,l=l.child;l!==null;){var m=l.alternate,j=n,w=l,z=w.flags;switch(w.tag){case 0:case 11:case 15:Li(j,w,d),Ud(4,w);break;case 1:if(Li(j,w,d),m=w,j=m.stateNode,typeof j.componentDidMount=="function")try{j.componentDidMount()}catch(Be){Bs(m,m.return,Be)}if(m=w,j=m.updateQueue,j!==null){var ne=m.stateNode;try{var be=j.shared.hiddenCallbacks;if(be!==null)for(j.shared.hiddenCallbacks=null,j=0;j<be.length;j++)zy(be[j],ne)}catch(Be){Bs(m,m.return,Be)}}d&&z&64&&QN(w),Vd(w,w.return);break;case 27:t1(w);case 26:case 5:Li(j,w,d),d&&m===null&&z&4&&JN(w),Vd(w,w.return);break;case 12:Li(j,w,d);break;case 31:Li(j,w,d),d&&z&4&&i1(j,w);break;case 13:Li(j,w,d),d&&z&4&&l1(j,w);break;case 22:w.memoizedState===null&&Li(j,w,d),Vd(w,w.return);break;case 30:break;default:Li(j,w,d)}l=l.sibling}}function Dp(n,l){var d=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(d=n.memoizedState.cachePool.pool),n=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(n=l.memoizedState.cachePool.pool),n!==d&&(n!=null&&n.refCount++,d!=null&&Ed(d))}function Op(n,l){n=null,l.alternate!==null&&(n=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==n&&(l.refCount++,n!=null&&Ed(n))}function Vn(n,l,d,m){if(l.subtreeFlags&10256)for(l=l.child;l!==null;)d1(n,l,d,m),l=l.sibling}function d1(n,l,d,m){var j=l.flags;switch(l.tag){case 0:case 11:case 15:Vn(n,l,d,m),j&2048&&Ud(9,l);break;case 1:Vn(n,l,d,m);break;case 3:Vn(n,l,d,m),j&2048&&(n=null,l.alternate!==null&&(n=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==n&&(l.refCount++,n!=null&&Ed(n)));break;case 12:if(j&2048){Vn(n,l,d,m),n=l.stateNode;try{var w=l.memoizedProps,z=w.id,ne=w.onPostCommit;typeof ne=="function"&&ne(z,l.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(be){Bs(l,l.return,be)}}else Vn(n,l,d,m);break;case 31:Vn(n,l,d,m);break;case 13:Vn(n,l,d,m);break;case 23:break;case 22:w=l.stateNode,z=l.alternate,l.memoizedState!==null?w._visibility&2?Vn(n,l,d,m):$d(n,l):w._visibility&2?Vn(n,l,d,m):(w._visibility|=2,hc(n,l,d,m,(l.subtreeFlags&10256)!==0||!1)),j&2048&&Dp(z,l);break;case 24:Vn(n,l,d,m),j&2048&&Op(l.alternate,l);break;default:Vn(n,l,d,m)}}function hc(n,l,d,m,j){for(j=j&&((l.subtreeFlags&10256)!==0||!1),l=l.child;l!==null;){var w=n,z=l,ne=d,be=m,Be=z.flags;switch(z.tag){case 0:case 11:case 15:hc(w,z,ne,be,j),Ud(8,z);break;case 23:break;case 22:var Ke=z.stateNode;z.memoizedState!==null?Ke._visibility&2?hc(w,z,ne,be,j):$d(w,z):(Ke._visibility|=2,hc(w,z,ne,be,j)),j&&Be&2048&&Dp(z.alternate,z);break;case 24:hc(w,z,ne,be,j),j&&Be&2048&&Op(z.alternate,z);break;default:hc(w,z,ne,be,j)}l=l.sibling}}function $d(n,l){if(l.subtreeFlags&10256)for(l=l.child;l!==null;){var d=n,m=l,j=m.flags;switch(m.tag){case 22:$d(d,m),j&2048&&Dp(m.alternate,m);break;case 24:$d(d,m),j&2048&&Op(m.alternate,m);break;default:$d(d,m)}l=l.sibling}}var Hd=8192;function fc(n,l,d){if(n.subtreeFlags&Hd)for(n=n.child;n!==null;)u1(n,l,d),n=n.sibling}function u1(n,l,d){switch(n.tag){case 26:fc(n,l,d),n.flags&Hd&&n.memoizedState!==null&&T5(d,Un,n.memoizedState,n.memoizedProps);break;case 5:fc(n,l,d);break;case 3:case 4:var m=Un;Un=uh(n.stateNode.containerInfo),fc(n,l,d),Un=m;break;case 22:n.memoizedState===null&&(m=n.alternate,m!==null&&m.memoizedState!==null?(m=Hd,Hd=16777216,fc(n,l,d),Hd=m):fc(n,l,d));break;default:fc(n,l,d)}}function m1(n){var l=n.alternate;if(l!==null&&(n=l.child,n!==null)){l.child=null;do l=n.sibling,n.sibling=null,n=l;while(n!==null)}}function Wd(n){var l=n.deletions;if((n.flags&16)!==0){if(l!==null)for(var d=0;d<l.length;d++){var m=l[d];tr=m,f1(m,n)}m1(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)h1(n),n=n.sibling}function h1(n){switch(n.tag){case 0:case 11:case 15:Wd(n),n.flags&2048&&xl(9,n,n.return);break;case 3:Wd(n);break;case 12:Wd(n);break;case 22:var l=n.stateNode;n.memoizedState!==null&&l._visibility&2&&(n.return===null||n.return.tag!==13)?(l._visibility&=-3,Zm(n)):Wd(n);break;default:Wd(n)}}function Zm(n){var l=n.deletions;if((n.flags&16)!==0){if(l!==null)for(var d=0;d<l.length;d++){var m=l[d];tr=m,f1(m,n)}m1(n)}for(n=n.child;n!==null;){switch(l=n,l.tag){case 0:case 11:case 15:xl(8,l,l.return),Zm(l);break;case 22:d=l.stateNode,d._visibility&2&&(d._visibility&=-3,Zm(l));break;default:Zm(l)}n=n.sibling}}function f1(n,l){for(;tr!==null;){var d=tr;switch(d.tag){case 0:case 11:case 15:xl(8,d,l);break;case 23:case 22:if(d.memoizedState!==null&&d.memoizedState.cachePool!==null){var m=d.memoizedState.cachePool.pool;m!=null&&m.refCount++}break;case 24:Ed(d.memoizedState.cache)}if(m=d.child,m!==null)m.return=d,tr=m;else e:for(d=n;tr!==null;){m=tr;var j=m.sibling,w=m.return;if(r1(m),m===d){tr=null;break e}if(j!==null){j.return=w,tr=j;break e}tr=w}}}var U3={getCacheForType:function(n){var l=lr(Ba),d=l.data.get(n);return d===void 0&&(d=n(),l.data.set(n,d)),d},cacheSignal:function(){return lr(Ba).controller.signal}},V3=typeof WeakMap=="function"?WeakMap:Map,Ms=0,Js=null,gs=null,bs=0,Ls=0,on=null,pl=!1,xc=!1,Rp=!1,Bi=0,Sa=0,gl=0,mo=0,Pp=0,cn=0,pc=0,Gd=null,Gr=null,Mp=!1,Jm=0,x1=0,eh=1/0,th=null,vl=null,Xa=0,jl=null,gc=null,zi=0,Fp=0,Ip=null,p1=null,qd=0,Lp=null;function dn(){return(Ms&2)!==0&&bs!==0?bs&-bs:V.T!==null?Hp():Y()}function g1(){if(cn===0)if((bs&536870912)===0||Ss){var n=Kt;Kt<<=1,(Kt&3932160)===0&&(Kt=262144),cn=n}else cn=536870912;return n=nn.current,n!==null&&(n.flags|=32),cn}function qr(n,l,d){(n===Js&&(Ls===2||Ls===9)||n.cancelPendingCommit!==null)&&(vc(n,0),yl(n,bs,cn,!1)),De(n,d),((Ms&2)===0||n!==Js)&&(n===Js&&((Ms&2)===0&&(mo|=d),Sa===4&&yl(n,bs,cn,!1)),oi(n))}function v1(n,l,d){if((Ms&6)!==0)throw Error(r(327));var m=!d&&(l&127)===0&&(l&n.expiredLanes)===0||La(n,l),j=m?W3(n,l):zp(n,l,!0),w=m;do{if(j===0){xc&&!m&&yl(n,l,0,!1);break}else{if(d=n.current.alternate,w&&!$3(d)){j=zp(n,l,!1),w=!1;continue}if(j===2){if(w=l,n.errorRecoveryDisabledLanes&w)var z=0;else z=n.pendingLanes&-536870913,z=z!==0?z:z&536870912?536870912:0;if(z!==0){l=z;e:{var ne=n;j=Gd;var be=ne.current.memoizedState.isDehydrated;if(be&&(vc(ne,z).flags|=256),z=zp(ne,z,!1),z!==2){if(Rp&&!be){ne.errorRecoveryDisabledLanes|=w,mo|=w,j=4;break e}w=Gr,Gr=j,w!==null&&(Gr===null?Gr=w:Gr.push.apply(Gr,w))}j=z}if(w=!1,j!==2)continue}}if(j===1){vc(n,0),yl(n,l,0,!0);break}e:{switch(m=n,w=j,w){case 0:case 1:throw Error(r(345));case 4:if((l&4194048)!==l)break;case 6:yl(m,l,cn,!pl);break e;case 2:Gr=null;break;case 3:case 5:break;default:throw Error(r(329))}if((l&62914560)===l&&(j=Jm+300-_t(),10<j)){if(yl(m,l,cn,!pl),Ia(m,0,!0)!==0)break e;zi=l,m.timeoutHandle=Y1(j1.bind(null,m,d,Gr,th,Mp,l,cn,mo,pc,pl,w,"Throttled",-0,0),j);break e}j1(m,d,Gr,th,Mp,l,cn,mo,pc,pl,w,null,-0,0)}}break}while(!0);oi(n)}function j1(n,l,d,m,j,w,z,ne,be,Be,Ke,tt,ze,He){if(n.timeoutHandle=-1,tt=l.subtreeFlags,tt&8192||(tt&16785408)===16785408){tt={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Ci},u1(l,w,tt);var St=(w&62914560)===w?Jm-_t():(w&4194048)===w?x1-_t():0;if(St=k5(tt,St),St!==null){zi=w,n.cancelPendingCommit=St(k1.bind(null,n,l,w,d,m,j,z,ne,be,Ke,tt,null,ze,He)),yl(n,w,z,!Be);return}}k1(n,l,w,d,m,j,z,ne,be)}function $3(n){for(var l=n;;){var d=l.tag;if((d===0||d===11||d===15)&&l.flags&16384&&(d=l.updateQueue,d!==null&&(d=d.stores,d!==null)))for(var m=0;m<d.length;m++){var j=d[m],w=j.getSnapshot;j=j.value;try{if(!an(w(),j))return!1}catch{return!1}}if(d=l.child,l.subtreeFlags&16384&&d!==null)d.return=l,l=d;else{if(l===n)break;for(;l.sibling===null;){if(l.return===null||l.return===n)return!0;l=l.return}l.sibling.return=l.return,l=l.sibling}}return!0}function yl(n,l,d,m){l&=~Pp,l&=~mo,n.suspendedLanes|=l,n.pingedLanes&=~l,m&&(n.warmLanes|=l),m=n.expirationTimes;for(var j=l;0<j;){var w=31-we(j),z=1<<w;m[w]=-1,j&=~z}d!==0&&gt(n,d,l)}function sh(){return(Ms&6)===0?(Kd(0),!1):!0}function Bp(){if(gs!==null){if(Ls===0)var n=gs.return;else n=gs,Ai=so=null,tp(n),oc=null,_d=0,n=gs;for(;n!==null;)XN(n.alternate,n),n=n.return;gs=null}}function vc(n,l){var d=n.timeoutHandle;d!==-1&&(n.timeoutHandle=-1,c5(d)),d=n.cancelPendingCommit,d!==null&&(n.cancelPendingCommit=null,d()),zi=0,Bp(),Js=n,gs=d=ki(n.current,null),bs=l,Ls=0,on=null,pl=!1,xc=La(n,l),Rp=!1,pc=cn=Pp=mo=gl=Sa=0,Gr=Gd=null,Mp=!1,(l&8)!==0&&(l|=l&32);var m=n.entangledLanes;if(m!==0)for(n=n.entanglements,m&=l;0<m;){var j=31-we(m),w=1<<j;l|=n[j],m&=~w}return Bi=l,wm(),d}function y1(n,l){rs=null,V.H=Ld,l===lc||l===Dm?(l=Fy(),Ls=3):l===$x?(l=Fy(),Ls=4):Ls=l===gp?8:l!==null&&typeof l=="object"&&typeof l.then=="function"?6:1,on=l,gs===null&&(Sa=1,Wm(n,bn(l,n.current)))}function N1(){var n=nn.current;return n===null?!0:(bs&4194048)===bs?Tn===null:(bs&62914560)===bs||(bs&536870912)!==0?n===Tn:!1}function b1(){var n=V.H;return V.H=Ld,n===null?Ld:n}function w1(){var n=V.A;return V.A=U3,n}function ah(){Sa=4,pl||(bs&4194048)!==bs&&nn.current!==null||(xc=!0),(gl&134217727)===0&&(mo&134217727)===0||Js===null||yl(Js,bs,cn,!1)}function zp(n,l,d){var m=Ms;Ms|=2;var j=b1(),w=w1();(Js!==n||bs!==l)&&(th=null,vc(n,l)),l=!1;var z=Sa;e:do try{if(Ls!==0&&gs!==null){var ne=gs,be=on;switch(Ls){case 8:Bp(),z=6;break e;case 3:case 2:case 9:case 6:nn.current===null&&(l=!0);var Be=Ls;if(Ls=0,on=null,jc(n,ne,be,Be),d&&xc){z=0;break e}break;default:Be=Ls,Ls=0,on=null,jc(n,ne,be,Be)}}H3(),z=Sa;break}catch(Ke){y1(n,Ke)}while(!0);return l&&n.shellSuspendCounter++,Ai=so=null,Ms=m,V.H=j,V.A=w,gs===null&&(Js=null,bs=0,wm()),z}function H3(){for(;gs!==null;)S1(gs)}function W3(n,l){var d=Ms;Ms|=2;var m=b1(),j=w1();Js!==n||bs!==l?(th=null,eh=_t()+500,vc(n,l)):xc=La(n,l);e:do try{if(Ls!==0&&gs!==null){l=gs;var w=on;t:switch(Ls){case 1:Ls=0,on=null,jc(n,l,w,1);break;case 2:case 9:if(Py(w)){Ls=0,on=null,C1(l);break}l=function(){Ls!==2&&Ls!==9||Js!==n||(Ls=7),oi(n)},w.then(l,l);break e;case 3:Ls=7;break e;case 4:Ls=5;break e;case 7:Py(w)?(Ls=0,on=null,C1(l)):(Ls=0,on=null,jc(n,l,w,7));break;case 5:var z=null;switch(gs.tag){case 26:z=gs.memoizedState;case 5:case 27:var ne=gs;if(z?db(z):ne.stateNode.complete){Ls=0,on=null;var be=ne.sibling;if(be!==null)gs=be;else{var Be=ne.return;Be!==null?(gs=Be,rh(Be)):gs=null}break t}}Ls=0,on=null,jc(n,l,w,5);break;case 6:Ls=0,on=null,jc(n,l,w,6);break;case 8:Bp(),Sa=6;break e;default:throw Error(r(462))}}G3();break}catch(Ke){y1(n,Ke)}while(!0);return Ai=so=null,V.H=m,V.A=j,Ms=d,gs!==null?0:(Js=null,bs=0,wm(),Sa)}function G3(){for(;gs!==null&&!As();)S1(gs)}function S1(n){var l=KN(n.alternate,n,Bi);n.memoizedProps=n.pendingProps,l===null?rh(n):gs=l}function C1(n){var l=n,d=l.alternate;switch(l.tag){case 15:case 0:l=VN(d,l,l.pendingProps,l.type,void 0,bs);break;case 11:l=VN(d,l,l.pendingProps,l.type.render,l.ref,bs);break;case 5:tp(l);default:XN(d,l),l=gs=wy(l,Bi),l=KN(d,l,Bi)}n.memoizedProps=n.pendingProps,l===null?rh(n):gs=l}function jc(n,l,d,m){Ai=so=null,tp(l),oc=null,_d=0;var j=l.return;try{if(P3(n,j,l,d,bs)){Sa=1,Wm(n,bn(d,n.current)),gs=null;return}}catch(w){if(j!==null)throw gs=j,w;Sa=1,Wm(n,bn(d,n.current)),gs=null;return}l.flags&32768?(Ss||m===1?n=!0:xc||(bs&536870912)!==0?n=!1:(pl=n=!0,(m===2||m===9||m===3||m===6)&&(m=nn.current,m!==null&&m.tag===13&&(m.flags|=16384))),T1(l,n)):rh(l)}function rh(n){var l=n;do{if((l.flags&32768)!==0){T1(l,pl);return}n=l.return;var d=I3(l.alternate,l,Bi);if(d!==null){gs=d;return}if(l=l.sibling,l!==null){gs=l;return}gs=l=n}while(l!==null);Sa===0&&(Sa=5)}function T1(n,l){do{var d=L3(n.alternate,n);if(d!==null){d.flags&=32767,gs=d;return}if(d=n.return,d!==null&&(d.flags|=32768,d.subtreeFlags=0,d.deletions=null),!l&&(n=n.sibling,n!==null)){gs=n;return}gs=n=d}while(n!==null);Sa=6,gs=null}function k1(n,l,d,m,j,w,z,ne,be){n.cancelPendingCommit=null;do nh();while(Xa!==0);if((Ms&6)!==0)throw Error(r(327));if(l!==null){if(l===n.current)throw Error(r(177));if(w=l.lanes|l.childLanes,w|=Ex,Ge(n,d,w,z,ne,be),n===Js&&(gs=Js=null,bs=0),gc=l,jl=n,zi=d,Fp=w,Ip=j,p1=m,(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,X3(he,function(){return O1(),null})):(n.callbackNode=null,n.callbackPriority=0),m=(l.flags&13878)!==0,(l.subtreeFlags&13878)!==0||m){m=V.T,V.T=null,j=ee.p,ee.p=2,z=Ms,Ms|=4;try{B3(n,l,d)}finally{Ms=z,ee.p=j,V.T=m}}Xa=1,E1(),A1(),_1()}}function E1(){if(Xa===1){Xa=0;var n=jl,l=gc,d=(l.flags&13878)!==0;if((l.subtreeFlags&13878)!==0||d){d=V.T,V.T=null;var m=ee.p;ee.p=2;var j=Ms;Ms|=4;try{o1(l,n);var w=Zp,z=fy(n.containerInfo),ne=w.focusedElem,be=w.selectionRange;if(z!==ne&&ne&&ne.ownerDocument&&hy(ne.ownerDocument.documentElement,ne)){if(be!==null&&wx(ne)){var Be=be.start,Ke=be.end;if(Ke===void 0&&(Ke=Be),"selectionStart"in ne)ne.selectionStart=Be,ne.selectionEnd=Math.min(Ke,ne.value.length);else{var tt=ne.ownerDocument||document,ze=tt&&tt.defaultView||window;if(ze.getSelection){var He=ze.getSelection(),St=ne.textContent.length,Wt=Math.min(be.start,St),Xs=be.end===void 0?Wt:Math.min(be.end,St);!He.extend&&Wt>Xs&&(z=Xs,Xs=Wt,Wt=z);var Ae=my(ne,Wt),Se=my(ne,Xs);if(Ae&&Se&&(He.rangeCount!==1||He.anchorNode!==Ae.node||He.anchorOffset!==Ae.offset||He.focusNode!==Se.node||He.focusOffset!==Se.offset)){var Ie=tt.createRange();Ie.setStart(Ae.node,Ae.offset),He.removeAllRanges(),Wt>Xs?(He.addRange(Ie),He.extend(Se.node,Se.offset)):(Ie.setEnd(Se.node,Se.offset),He.addRange(Ie))}}}}for(tt=[],He=ne;He=He.parentNode;)He.nodeType===1&&tt.push({element:He,left:He.scrollLeft,top:He.scrollTop});for(typeof ne.focus=="function"&&ne.focus(),ne=0;ne<tt.length;ne++){var Xe=tt[ne];Xe.element.scrollLeft=Xe.left,Xe.element.scrollTop=Xe.top}}gh=!!Qp,Zp=Qp=null}finally{Ms=j,ee.p=m,V.T=d}}n.current=l,Xa=2}}function A1(){if(Xa===2){Xa=0;var n=jl,l=gc,d=(l.flags&8772)!==0;if((l.subtreeFlags&8772)!==0||d){d=V.T,V.T=null;var m=ee.p;ee.p=2;var j=Ms;Ms|=4;try{a1(n,l.alternate,l)}finally{Ms=j,ee.p=m,V.T=d}}Xa=3}}function _1(){if(Xa===4||Xa===3){Xa=0,cs();var n=jl,l=gc,d=zi,m=p1;(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?Xa=5:(Xa=0,gc=jl=null,D1(n,n.pendingLanes));var j=n.pendingLanes;if(j===0&&(vl=null),Ns(d),l=l.stateNode,ts&&typeof ts.onCommitFiberRoot=="function")try{ts.onCommitFiberRoot(Zt,l,void 0,(l.current.flags&128)===128)}catch{}if(m!==null){l=V.T,j=ee.p,ee.p=2,V.T=null;try{for(var w=n.onRecoverableError,z=0;z<m.length;z++){var ne=m[z];w(ne.value,{componentStack:ne.stack})}}finally{V.T=l,ee.p=j}}(zi&3)!==0&&nh(),oi(n),j=n.pendingLanes,(d&261930)!==0&&(j&42)!==0?n===Lp?qd++:(qd=0,Lp=n):qd=0,Kd(0)}}function D1(n,l){(n.pooledCacheLanes&=l)===0&&(l=n.pooledCache,l!=null&&(n.pooledCache=null,Ed(l)))}function nh(){return E1(),A1(),_1(),O1()}function O1(){if(Xa!==5)return!1;var n=jl,l=Fp;Fp=0;var d=Ns(zi),m=V.T,j=ee.p;try{ee.p=32>d?32:d,V.T=null,d=Ip,Ip=null;var w=jl,z=zi;if(Xa=0,gc=jl=null,zi=0,(Ms&6)!==0)throw Error(r(331));var ne=Ms;if(Ms|=4,h1(w.current),d1(w,w.current,z,d),Ms=ne,Kd(0,!1),ts&&typeof ts.onPostCommitFiberRoot=="function")try{ts.onPostCommitFiberRoot(Zt,w)}catch{}return!0}finally{ee.p=j,V.T=m,D1(n,l)}}function R1(n,l,d){l=bn(d,l),l=pp(n.stateNode,l,2),n=ml(n,l,2),n!==null&&(De(n,2),oi(n))}function Bs(n,l,d){if(n.tag===3)R1(n,n,d);else for(;l!==null;){if(l.tag===3){R1(l,n,d);break}else if(l.tag===1){var m=l.stateNode;if(typeof l.type.getDerivedStateFromError=="function"||typeof m.componentDidCatch=="function"&&(vl===null||!vl.has(m))){n=bn(d,n),d=PN(2),m=ml(l,d,2),m!==null&&(MN(d,m,l,n),De(m,2),oi(m));break}}l=l.return}}function Up(n,l,d){var m=n.pingCache;if(m===null){m=n.pingCache=new V3;var j=new Set;m.set(l,j)}else j=m.get(l),j===void 0&&(j=new Set,m.set(l,j));j.has(d)||(Rp=!0,j.add(d),n=q3.bind(null,n,l,d),l.then(n,n))}function q3(n,l,d){var m=n.pingCache;m!==null&&m.delete(l),n.pingedLanes|=n.suspendedLanes&d,n.warmLanes&=~d,Js===n&&(bs&d)===d&&(Sa===4||Sa===3&&(bs&62914560)===bs&&300>_t()-Jm?(Ms&2)===0&&vc(n,0):Pp|=d,pc===bs&&(pc=0)),oi(n)}function P1(n,l){l===0&&(l=ys()),n=Jl(n,l),n!==null&&(De(n,l),oi(n))}function K3(n){var l=n.memoizedState,d=0;l!==null&&(d=l.retryLane),P1(n,d)}function Y3(n,l){var d=0;switch(n.tag){case 31:case 13:var m=n.stateNode,j=n.memoizedState;j!==null&&(d=j.retryLane);break;case 19:m=n.stateNode;break;case 22:m=n.stateNode._retryCache;break;default:throw Error(r(314))}m!==null&&m.delete(l),P1(n,d)}function X3(n,l){return Ps(n,l)}var ih=null,yc=null,Vp=!1,lh=!1,$p=!1,Nl=0;function oi(n){n!==yc&&n.next===null&&(yc===null?ih=yc=n:yc=yc.next=n),lh=!0,Vp||(Vp=!0,Z3())}function Kd(n,l){if(!$p&&lh){$p=!0;do for(var d=!1,m=ih;m!==null;){if(n!==0){var j=m.pendingLanes;if(j===0)var w=0;else{var z=m.suspendedLanes,ne=m.pingedLanes;w=(1<<31-we(42|n)+1)-1,w&=j&~(z&~ne),w=w&201326741?w&201326741|1:w?w|2:0}w!==0&&(d=!0,L1(m,w))}else w=bs,w=Ia(m,m===Js?w:0,m.cancelPendingCommit!==null||m.timeoutHandle!==-1),(w&3)===0||La(m,w)||(d=!0,L1(m,w));m=m.next}while(d);$p=!1}}function Q3(){M1()}function M1(){lh=Vp=!1;var n=0;Nl!==0&&o5()&&(n=Nl);for(var l=_t(),d=null,m=ih;m!==null;){var j=m.next,w=F1(m,l);w===0?(m.next=null,d===null?ih=j:d.next=j,j===null&&(yc=d)):(d=m,(n!==0||(w&3)!==0)&&(lh=!0)),m=j}Xa!==0&&Xa!==5||Kd(n),Nl!==0&&(Nl=0)}function F1(n,l){for(var d=n.suspendedLanes,m=n.pingedLanes,j=n.expirationTimes,w=n.pendingLanes&-62914561;0<w;){var z=31-we(w),ne=1<<z,be=j[z];be===-1?((ne&d)===0||(ne&m)!==0)&&(j[z]=nr(ne,l)):be<=l&&(n.expiredLanes|=ne),w&=~ne}if(l=Js,d=bs,d=Ia(n,n===l?d:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),m=n.callbackNode,d===0||n===l&&(Ls===2||Ls===9)||n.cancelPendingCommit!==null)return m!==null&&m!==null&&ps(m),n.callbackNode=null,n.callbackPriority=0;if((d&3)===0||La(n,d)){if(l=d&-d,l===n.callbackPriority)return l;switch(m!==null&&ps(m),Ns(d)){case 2:case 8:d=Ne;break;case 32:d=he;break;case 268435456:d=st;break;default:d=he}return m=I1.bind(null,n),d=Ps(d,m),n.callbackPriority=l,n.callbackNode=d,l}return m!==null&&m!==null&&ps(m),n.callbackPriority=2,n.callbackNode=null,2}function I1(n,l){if(Xa!==0&&Xa!==5)return n.callbackNode=null,n.callbackPriority=0,null;var d=n.callbackNode;if(nh()&&n.callbackNode!==d)return null;var m=bs;return m=Ia(n,n===Js?m:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),m===0?null:(v1(n,m,l),F1(n,_t()),n.callbackNode!=null&&n.callbackNode===d?I1.bind(null,n):null)}function L1(n,l){if(nh())return null;v1(n,l,!0)}function Z3(){d5(function(){(Ms&6)!==0?Ps(Te,Q3):M1()})}function Hp(){if(Nl===0){var n=nc;n===0&&(n=yt,yt<<=1,(yt&261888)===0&&(yt=256)),Nl=n}return Nl}function B1(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:xm(""+n)}function z1(n,l){var d=l.ownerDocument.createElement("input");return d.name=l.name,d.value=l.value,n.id&&d.setAttribute("form",n.id),l.parentNode.insertBefore(d,l),n=new FormData(n),d.parentNode.removeChild(d),n}function J3(n,l,d,m,j){if(l==="submit"&&d&&d.stateNode===j){var w=B1((j[ie]||null).action),z=m.submitter;z&&(l=(l=z[ie]||null)?B1(l.formAction):z.getAttribute("formAction"),l!==null&&(w=l,z=null));var ne=new jm("action","action",null,m,j);n.push({event:ne,listeners:[{instance:null,listener:function(){if(m.defaultPrevented){if(Nl!==0){var be=z?z1(j,z):new FormData(j);dp(d,{pending:!0,data:be,method:j.method,action:w},null,be)}}else typeof w=="function"&&(ne.preventDefault(),be=z?z1(j,z):new FormData(j),dp(d,{pending:!0,data:be,method:j.method,action:w},w,be))},currentTarget:j}]})}}for(var Wp=0;Wp<kx.length;Wp++){var Gp=kx[Wp],e5=Gp.toLowerCase(),t5=Gp[0].toUpperCase()+Gp.slice(1);zn(e5,"on"+t5)}zn(gy,"onAnimationEnd"),zn(vy,"onAnimationIteration"),zn(jy,"onAnimationStart"),zn("dblclick","onDoubleClick"),zn("focusin","onFocus"),zn("focusout","onBlur"),zn(g3,"onTransitionRun"),zn(v3,"onTransitionStart"),zn(j3,"onTransitionCancel"),zn(yy,"onTransitionEnd"),br("onMouseEnter",["mouseout","mouseover"]),br("onMouseLeave",["mouseout","mouseover"]),br("onPointerEnter",["pointerout","pointerover"]),br("onPointerLeave",["pointerout","pointerover"]),$t("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),$t("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),$t("onBeforeInput",["compositionend","keypress","textInput","paste"]),$t("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),$t("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),$t("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Yd="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),s5=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Yd));function U1(n,l){l=(l&4)!==0;for(var d=0;d<n.length;d++){var m=n[d],j=m.event;m=m.listeners;e:{var w=void 0;if(l)for(var z=m.length-1;0<=z;z--){var ne=m[z],be=ne.instance,Be=ne.currentTarget;if(ne=ne.listener,be!==w&&j.isPropagationStopped())break e;w=ne,j.currentTarget=Be;try{w(j)}catch(Ke){bm(Ke)}j.currentTarget=null,w=be}else for(z=0;z<m.length;z++){if(ne=m[z],be=ne.instance,Be=ne.currentTarget,ne=ne.listener,be!==w&&j.isPropagationStopped())break e;w=ne,j.currentTarget=Be;try{w(j)}catch(Ke){bm(Ke)}j.currentTarget=null,w=be}}}}function vs(n,l){var d=l[Re];d===void 0&&(d=l[Re]=new Set);var m=n+"__bubble";d.has(m)||(V1(l,n,2,!1),d.add(m))}function qp(n,l,d){var m=0;l&&(m|=4),V1(d,n,m,l)}var oh="_reactListening"+Math.random().toString(36).slice(2);function Kp(n){if(!n[oh]){n[oh]=!0,Tt.forEach(function(d){d!=="selectionchange"&&(s5.has(d)||qp(d,!1,n),qp(d,!0,n))});var l=n.nodeType===9?n:n.ownerDocument;l===null||l[oh]||(l[oh]=!0,qp("selectionchange",!1,l))}}function V1(n,l,d,m){switch(gb(l)){case 2:var j=_5;break;case 8:j=D5;break;default:j=c0}d=j.bind(null,l,d,n),j=void 0,!fx||l!=="touchstart"&&l!=="touchmove"&&l!=="wheel"||(j=!0),m?j!==void 0?n.addEventListener(l,d,{capture:!0,passive:j}):n.addEventListener(l,d,!0):j!==void 0?n.addEventListener(l,d,{passive:j}):n.addEventListener(l,d,!1)}function Yp(n,l,d,m,j){var w=m;if((l&1)===0&&(l&2)===0&&m!==null)e:for(;;){if(m===null)return;var z=m.tag;if(z===3||z===4){var ne=m.stateNode.containerInfo;if(ne===j)break;if(z===4)for(z=m.return;z!==null;){var be=z.tag;if((be===3||be===4)&&z.stateNode.containerInfo===j)return;z=z.return}for(;ne!==null;){if(z=xe(ne),z===null)return;if(be=z.tag,be===5||be===6||be===26||be===27){m=w=z;continue e}ne=ne.parentNode}}m=m.return}qj(function(){var Be=w,Ke=mx(d),tt=[];e:{var ze=Ny.get(n);if(ze!==void 0){var He=jm,St=n;switch(n){case"keypress":if(gm(d)===0)break e;case"keydown":case"keyup":He=YA;break;case"focusin":St="focus",He=vx;break;case"focusout":St="blur",He=vx;break;case"beforeblur":case"afterblur":He=vx;break;case"click":if(d.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":He=Xj;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":He=IA;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":He=ZA;break;case gy:case vy:case jy:He=zA;break;case yy:He=e3;break;case"scroll":case"scrollend":He=MA;break;case"wheel":He=s3;break;case"copy":case"cut":case"paste":He=VA;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":He=Zj;break;case"toggle":case"beforetoggle":He=r3}var Wt=(l&4)!==0,Xs=!Wt&&(n==="scroll"||n==="scrollend"),Ae=Wt?ze!==null?ze+"Capture":null:ze;Wt=[];for(var Se=Be,Ie;Se!==null;){var Xe=Se;if(Ie=Xe.stateNode,Xe=Xe.tag,Xe!==5&&Xe!==26&&Xe!==27||Ie===null||Ae===null||(Xe=gd(Se,Ae),Xe!=null&&Wt.push(Xd(Se,Xe,Ie))),Xs)break;Se=Se.return}0<Wt.length&&(ze=new He(ze,St,null,d,Ke),tt.push({event:ze,listeners:Wt}))}}if((l&7)===0){e:{if(ze=n==="mouseover"||n==="pointerover",He=n==="mouseout"||n==="pointerout",ze&&d!==ux&&(St=d.relatedTarget||d.fromElement)&&(xe(St)||St[ue]))break e;if((He||ze)&&(ze=Ke.window===Ke?Ke:(ze=Ke.ownerDocument)?ze.defaultView||ze.parentWindow:window,He?(St=d.relatedTarget||d.toElement,He=Be,St=St?xe(St):null,St!==null&&(Xs=o(St),Wt=St.tag,St!==Xs||Wt!==5&&Wt!==27&&Wt!==6)&&(St=null)):(He=null,St=Be),He!==St)){if(Wt=Xj,Xe="onMouseLeave",Ae="onMouseEnter",Se="mouse",(n==="pointerout"||n==="pointerover")&&(Wt=Zj,Xe="onPointerLeave",Ae="onPointerEnter",Se="pointer"),Xs=He==null?ze:Ce(He),Ie=St==null?ze:Ce(St),ze=new Wt(Xe,Se+"leave",He,d,Ke),ze.target=Xs,ze.relatedTarget=Ie,Xe=null,xe(Ke)===Be&&(Wt=new Wt(Ae,Se+"enter",St,d,Ke),Wt.target=Ie,Wt.relatedTarget=Xs,Xe=Wt),Xs=Xe,He&&St)t:{for(Wt=a5,Ae=He,Se=St,Ie=0,Xe=Ae;Xe;Xe=Wt(Xe))Ie++;Xe=0;for(var Vt=Se;Vt;Vt=Wt(Vt))Xe++;for(;0<Ie-Xe;)Ae=Wt(Ae),Ie--;for(;0<Xe-Ie;)Se=Wt(Se),Xe--;for(;Ie--;){if(Ae===Se||Se!==null&&Ae===Se.alternate){Wt=Ae;break t}Ae=Wt(Ae),Se=Wt(Se)}Wt=null}else Wt=null;He!==null&&$1(tt,ze,He,Wt,!1),St!==null&&Xs!==null&&$1(tt,Xs,St,Wt,!0)}}e:{if(ze=Be?Ce(Be):window,He=ze.nodeName&&ze.nodeName.toLowerCase(),He==="select"||He==="input"&&ze.type==="file")var _s=iy;else if(ry(ze))if(ly)_s=f3;else{_s=m3;var At=u3}else He=ze.nodeName,!He||He.toLowerCase()!=="input"||ze.type!=="checkbox"&&ze.type!=="radio"?Be&&dx(Be.elementType)&&(_s=iy):_s=h3;if(_s&&(_s=_s(n,Be))){ny(tt,_s,d,Ke);break e}At&&At(n,ze,Be),n==="focusout"&&Be&&ze.type==="number"&&Be.memoizedProps.value!=null&&cx(ze,"number",ze.value)}switch(At=Be?Ce(Be):window,n){case"focusin":(ry(At)||At.contentEditable==="true")&&(Qo=At,Sx=Be,Cd=null);break;case"focusout":Cd=Sx=Qo=null;break;case"mousedown":Cx=!0;break;case"contextmenu":case"mouseup":case"dragend":Cx=!1,xy(tt,d,Ke);break;case"selectionchange":if(p3)break;case"keydown":case"keyup":xy(tt,d,Ke)}var ds;if(yx)e:{switch(n){case"compositionstart":var ws="onCompositionStart";break e;case"compositionend":ws="onCompositionEnd";break e;case"compositionupdate":ws="onCompositionUpdate";break e}ws=void 0}else Xo?sy(n,d)&&(ws="onCompositionEnd"):n==="keydown"&&d.keyCode===229&&(ws="onCompositionStart");ws&&(Jj&&d.locale!=="ko"&&(Xo||ws!=="onCompositionStart"?ws==="onCompositionEnd"&&Xo&&(ds=Kj()):(nl=Ke,xx="value"in nl?nl.value:nl.textContent,Xo=!0)),At=ch(Be,ws),0<At.length&&(ws=new Qj(ws,n,null,d,Ke),tt.push({event:ws,listeners:At}),ds?ws.data=ds:(ds=ay(d),ds!==null&&(ws.data=ds)))),(ds=i3?l3(n,d):o3(n,d))&&(ws=ch(Be,"onBeforeInput"),0<ws.length&&(At=new Qj("onBeforeInput","beforeinput",null,d,Ke),tt.push({event:At,listeners:ws}),At.data=ds)),J3(tt,n,Be,d,Ke)}U1(tt,l)})}function Xd(n,l,d){return{instance:n,listener:l,currentTarget:d}}function ch(n,l){for(var d=l+"Capture",m=[];n!==null;){var j=n,w=j.stateNode;if(j=j.tag,j!==5&&j!==26&&j!==27||w===null||(j=gd(n,d),j!=null&&m.unshift(Xd(n,j,w)),j=gd(n,l),j!=null&&m.push(Xd(n,j,w))),n.tag===3)return m;n=n.return}return[]}function a5(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function $1(n,l,d,m,j){for(var w=l._reactName,z=[];d!==null&&d!==m;){var ne=d,be=ne.alternate,Be=ne.stateNode;if(ne=ne.tag,be!==null&&be===m)break;ne!==5&&ne!==26&&ne!==27||Be===null||(be=Be,j?(Be=gd(d,w),Be!=null&&z.unshift(Xd(d,Be,be))):j||(Be=gd(d,w),Be!=null&&z.push(Xd(d,Be,be)))),d=d.return}z.length!==0&&n.push({event:l,listeners:z})}var r5=/\r\n?/g,n5=/\u0000|\uFFFD/g;function H1(n){return(typeof n=="string"?n:""+n).replace(r5,`
`).replace(n5,"")}function W1(n,l){return l=H1(l),H1(n)===l}function Ys(n,l,d,m,j,w){switch(d){case"children":typeof m=="string"?l==="body"||l==="textarea"&&m===""||qo(n,m):(typeof m=="number"||typeof m=="bigint")&&l!=="body"&&qo(n,""+m);break;case"className":Wo(n,"class",m);break;case"tabIndex":Wo(n,"tabindex",m);break;case"dir":case"role":case"viewBox":case"width":case"height":Wo(n,d,m);break;case"style":Wj(n,m,w);break;case"data":if(l!=="object"){Wo(n,"data",m);break}case"src":case"href":if(m===""&&(l!=="a"||d!=="href")){n.removeAttribute(d);break}if(m==null||typeof m=="function"||typeof m=="symbol"||typeof m=="boolean"){n.removeAttribute(d);break}m=xm(""+m),n.setAttribute(d,m);break;case"action":case"formAction":if(typeof m=="function"){n.setAttribute(d,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof w=="function"&&(d==="formAction"?(l!=="input"&&Ys(n,l,"name",j.name,j,null),Ys(n,l,"formEncType",j.formEncType,j,null),Ys(n,l,"formMethod",j.formMethod,j,null),Ys(n,l,"formTarget",j.formTarget,j,null)):(Ys(n,l,"encType",j.encType,j,null),Ys(n,l,"method",j.method,j,null),Ys(n,l,"target",j.target,j,null)));if(m==null||typeof m=="symbol"||typeof m=="boolean"){n.removeAttribute(d);break}m=xm(""+m),n.setAttribute(d,m);break;case"onClick":m!=null&&(n.onclick=Ci);break;case"onScroll":m!=null&&vs("scroll",n);break;case"onScrollEnd":m!=null&&vs("scrollend",n);break;case"dangerouslySetInnerHTML":if(m!=null){if(typeof m!="object"||!("__html"in m))throw Error(r(61));if(d=m.__html,d!=null){if(j.children!=null)throw Error(r(60));n.innerHTML=d}}break;case"multiple":n.multiple=m&&typeof m!="function"&&typeof m!="symbol";break;case"muted":n.muted=m&&typeof m!="function"&&typeof m!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(m==null||typeof m=="function"||typeof m=="boolean"||typeof m=="symbol"){n.removeAttribute("xlink:href");break}d=xm(""+m),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",d);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":m!=null&&typeof m!="function"&&typeof m!="symbol"?n.setAttribute(d,""+m):n.removeAttribute(d);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":m&&typeof m!="function"&&typeof m!="symbol"?n.setAttribute(d,""):n.removeAttribute(d);break;case"capture":case"download":m===!0?n.setAttribute(d,""):m!==!1&&m!=null&&typeof m!="function"&&typeof m!="symbol"?n.setAttribute(d,m):n.removeAttribute(d);break;case"cols":case"rows":case"size":case"span":m!=null&&typeof m!="function"&&typeof m!="symbol"&&!isNaN(m)&&1<=m?n.setAttribute(d,m):n.removeAttribute(d);break;case"rowSpan":case"start":m==null||typeof m=="function"||typeof m=="symbol"||isNaN(m)?n.removeAttribute(d):n.setAttribute(d,m);break;case"popover":vs("beforetoggle",n),vs("toggle",n),wr(n,"popover",m);break;case"xlinkActuate":sn(n,"http://www.w3.org/1999/xlink","xlink:actuate",m);break;case"xlinkArcrole":sn(n,"http://www.w3.org/1999/xlink","xlink:arcrole",m);break;case"xlinkRole":sn(n,"http://www.w3.org/1999/xlink","xlink:role",m);break;case"xlinkShow":sn(n,"http://www.w3.org/1999/xlink","xlink:show",m);break;case"xlinkTitle":sn(n,"http://www.w3.org/1999/xlink","xlink:title",m);break;case"xlinkType":sn(n,"http://www.w3.org/1999/xlink","xlink:type",m);break;case"xmlBase":sn(n,"http://www.w3.org/XML/1998/namespace","xml:base",m);break;case"xmlLang":sn(n,"http://www.w3.org/XML/1998/namespace","xml:lang",m);break;case"xmlSpace":sn(n,"http://www.w3.org/XML/1998/namespace","xml:space",m);break;case"is":wr(n,"is",m);break;case"innerText":case"textContent":break;default:(!(2<d.length)||d[0]!=="o"&&d[0]!=="O"||d[1]!=="n"&&d[1]!=="N")&&(d=RA.get(d)||d,wr(n,d,m))}}function Xp(n,l,d,m,j,w){switch(d){case"style":Wj(n,m,w);break;case"dangerouslySetInnerHTML":if(m!=null){if(typeof m!="object"||!("__html"in m))throw Error(r(61));if(d=m.__html,d!=null){if(j.children!=null)throw Error(r(60));n.innerHTML=d}}break;case"children":typeof m=="string"?qo(n,m):(typeof m=="number"||typeof m=="bigint")&&qo(n,""+m);break;case"onScroll":m!=null&&vs("scroll",n);break;case"onScrollEnd":m!=null&&vs("scrollend",n);break;case"onClick":m!=null&&(n.onclick=Ci);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ze.hasOwnProperty(d))e:{if(d[0]==="o"&&d[1]==="n"&&(j=d.endsWith("Capture"),l=d.slice(2,j?d.length-7:void 0),w=n[ie]||null,w=w!=null?w[d]:null,typeof w=="function"&&n.removeEventListener(l,w,j),typeof m=="function")){typeof w!="function"&&w!==null&&(d in n?n[d]=null:n.hasAttribute(d)&&n.removeAttribute(d)),n.addEventListener(l,m,j);break e}d in n?n[d]=m:m===!0?n.setAttribute(d,""):wr(n,d,m)}}}function cr(n,l,d){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":vs("error",n),vs("load",n);var m=!1,j=!1,w;for(w in d)if(d.hasOwnProperty(w)){var z=d[w];if(z!=null)switch(w){case"src":m=!0;break;case"srcSet":j=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,l));default:Ys(n,l,w,z,d,null)}}j&&Ys(n,l,"srcSet",d.srcSet,d,null),m&&Ys(n,l,"src",d.src,d,null);return;case"input":vs("invalid",n);var ne=w=z=j=null,be=null,Be=null;for(m in d)if(d.hasOwnProperty(m)){var Ke=d[m];if(Ke!=null)switch(m){case"name":j=Ke;break;case"type":z=Ke;break;case"checked":be=Ke;break;case"defaultChecked":Be=Ke;break;case"value":w=Ke;break;case"defaultValue":ne=Ke;break;case"children":case"dangerouslySetInnerHTML":if(Ke!=null)throw Error(r(137,l));break;default:Ys(n,l,m,Ke,d,null)}}Uj(n,w,ne,be,Be,z,j,!1);return;case"select":vs("invalid",n),m=z=w=null;for(j in d)if(d.hasOwnProperty(j)&&(ne=d[j],ne!=null))switch(j){case"value":w=ne;break;case"defaultValue":z=ne;break;case"multiple":m=ne;default:Ys(n,l,j,ne,d,null)}l=w,d=z,n.multiple=!!m,l!=null?Go(n,!!m,l,!1):d!=null&&Go(n,!!m,d,!0);return;case"textarea":vs("invalid",n),w=j=m=null;for(z in d)if(d.hasOwnProperty(z)&&(ne=d[z],ne!=null))switch(z){case"value":m=ne;break;case"defaultValue":j=ne;break;case"children":w=ne;break;case"dangerouslySetInnerHTML":if(ne!=null)throw Error(r(91));break;default:Ys(n,l,z,ne,d,null)}$j(n,m,j,w);return;case"option":for(be in d)if(d.hasOwnProperty(be)&&(m=d[be],m!=null))switch(be){case"selected":n.selected=m&&typeof m!="function"&&typeof m!="symbol";break;default:Ys(n,l,be,m,d,null)}return;case"dialog":vs("beforetoggle",n),vs("toggle",n),vs("cancel",n),vs("close",n);break;case"iframe":case"object":vs("load",n);break;case"video":case"audio":for(m=0;m<Yd.length;m++)vs(Yd[m],n);break;case"image":vs("error",n),vs("load",n);break;case"details":vs("toggle",n);break;case"embed":case"source":case"link":vs("error",n),vs("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Be in d)if(d.hasOwnProperty(Be)&&(m=d[Be],m!=null))switch(Be){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,l));default:Ys(n,l,Be,m,d,null)}return;default:if(dx(l)){for(Ke in d)d.hasOwnProperty(Ke)&&(m=d[Ke],m!==void 0&&Xp(n,l,Ke,m,d,void 0));return}}for(ne in d)d.hasOwnProperty(ne)&&(m=d[ne],m!=null&&Ys(n,l,ne,m,d,null))}function i5(n,l,d,m){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var j=null,w=null,z=null,ne=null,be=null,Be=null,Ke=null;for(He in d){var tt=d[He];if(d.hasOwnProperty(He)&&tt!=null)switch(He){case"checked":break;case"value":break;case"defaultValue":be=tt;default:m.hasOwnProperty(He)||Ys(n,l,He,null,m,tt)}}for(var ze in m){var He=m[ze];if(tt=d[ze],m.hasOwnProperty(ze)&&(He!=null||tt!=null))switch(ze){case"type":w=He;break;case"name":j=He;break;case"checked":Be=He;break;case"defaultChecked":Ke=He;break;case"value":z=He;break;case"defaultValue":ne=He;break;case"children":case"dangerouslySetInnerHTML":if(He!=null)throw Error(r(137,l));break;default:He!==tt&&Ys(n,l,ze,He,m,tt)}}ox(n,z,ne,be,Be,Ke,w,j);return;case"select":He=z=ne=ze=null;for(w in d)if(be=d[w],d.hasOwnProperty(w)&&be!=null)switch(w){case"value":break;case"multiple":He=be;default:m.hasOwnProperty(w)||Ys(n,l,w,null,m,be)}for(j in m)if(w=m[j],be=d[j],m.hasOwnProperty(j)&&(w!=null||be!=null))switch(j){case"value":ze=w;break;case"defaultValue":ne=w;break;case"multiple":z=w;default:w!==be&&Ys(n,l,j,w,m,be)}l=ne,d=z,m=He,ze!=null?Go(n,!!d,ze,!1):!!m!=!!d&&(l!=null?Go(n,!!d,l,!0):Go(n,!!d,d?[]:"",!1));return;case"textarea":He=ze=null;for(ne in d)if(j=d[ne],d.hasOwnProperty(ne)&&j!=null&&!m.hasOwnProperty(ne))switch(ne){case"value":break;case"children":break;default:Ys(n,l,ne,null,m,j)}for(z in m)if(j=m[z],w=d[z],m.hasOwnProperty(z)&&(j!=null||w!=null))switch(z){case"value":ze=j;break;case"defaultValue":He=j;break;case"children":break;case"dangerouslySetInnerHTML":if(j!=null)throw Error(r(91));break;default:j!==w&&Ys(n,l,z,j,m,w)}Vj(n,ze,He);return;case"option":for(var St in d)if(ze=d[St],d.hasOwnProperty(St)&&ze!=null&&!m.hasOwnProperty(St))switch(St){case"selected":n.selected=!1;break;default:Ys(n,l,St,null,m,ze)}for(be in m)if(ze=m[be],He=d[be],m.hasOwnProperty(be)&&ze!==He&&(ze!=null||He!=null))switch(be){case"selected":n.selected=ze&&typeof ze!="function"&&typeof ze!="symbol";break;default:Ys(n,l,be,ze,m,He)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Wt in d)ze=d[Wt],d.hasOwnProperty(Wt)&&ze!=null&&!m.hasOwnProperty(Wt)&&Ys(n,l,Wt,null,m,ze);for(Be in m)if(ze=m[Be],He=d[Be],m.hasOwnProperty(Be)&&ze!==He&&(ze!=null||He!=null))switch(Be){case"children":case"dangerouslySetInnerHTML":if(ze!=null)throw Error(r(137,l));break;default:Ys(n,l,Be,ze,m,He)}return;default:if(dx(l)){for(var Xs in d)ze=d[Xs],d.hasOwnProperty(Xs)&&ze!==void 0&&!m.hasOwnProperty(Xs)&&Xp(n,l,Xs,void 0,m,ze);for(Ke in m)ze=m[Ke],He=d[Ke],!m.hasOwnProperty(Ke)||ze===He||ze===void 0&&He===void 0||Xp(n,l,Ke,ze,m,He);return}}for(var Ae in d)ze=d[Ae],d.hasOwnProperty(Ae)&&ze!=null&&!m.hasOwnProperty(Ae)&&Ys(n,l,Ae,null,m,ze);for(tt in m)ze=m[tt],He=d[tt],!m.hasOwnProperty(tt)||ze===He||ze==null&&He==null||Ys(n,l,tt,ze,m,He)}function G1(n){switch(n){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function l5(){if(typeof performance.getEntriesByType=="function"){for(var n=0,l=0,d=performance.getEntriesByType("resource"),m=0;m<d.length;m++){var j=d[m],w=j.transferSize,z=j.initiatorType,ne=j.duration;if(w&&ne&&G1(z)){for(z=0,ne=j.responseEnd,m+=1;m<d.length;m++){var be=d[m],Be=be.startTime;if(Be>ne)break;var Ke=be.transferSize,tt=be.initiatorType;Ke&&G1(tt)&&(be=be.responseEnd,z+=Ke*(be<ne?1:(ne-Be)/(be-Be)))}if(--m,l+=8*(w+z)/(j.duration/1e3),n++,10<n)break}}if(0<n)return l/n/1e6}return navigator.connection&&(n=navigator.connection.downlink,typeof n=="number")?n:5}var Qp=null,Zp=null;function dh(n){return n.nodeType===9?n:n.ownerDocument}function q1(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function K1(n,l){if(n===0)switch(l){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&l==="foreignObject"?0:n}function Jp(n,l){return n==="textarea"||n==="noscript"||typeof l.children=="string"||typeof l.children=="number"||typeof l.children=="bigint"||typeof l.dangerouslySetInnerHTML=="object"&&l.dangerouslySetInnerHTML!==null&&l.dangerouslySetInnerHTML.__html!=null}var e0=null;function o5(){var n=window.event;return n&&n.type==="popstate"?n===e0?!1:(e0=n,!0):(e0=null,!1)}var Y1=typeof setTimeout=="function"?setTimeout:void 0,c5=typeof clearTimeout=="function"?clearTimeout:void 0,X1=typeof Promise=="function"?Promise:void 0,d5=typeof queueMicrotask=="function"?queueMicrotask:typeof X1<"u"?function(n){return X1.resolve(null).then(n).catch(u5)}:Y1;function u5(n){setTimeout(function(){throw n})}function bl(n){return n==="head"}function Q1(n,l){var d=l,m=0;do{var j=d.nextSibling;if(n.removeChild(d),j&&j.nodeType===8)if(d=j.data,d==="/$"||d==="/&"){if(m===0){n.removeChild(j),Sc(l);return}m--}else if(d==="$"||d==="$?"||d==="$~"||d==="$!"||d==="&")m++;else if(d==="html")Qd(n.ownerDocument.documentElement);else if(d==="head"){d=n.ownerDocument.head,Qd(d);for(var w=d.firstChild;w;){var z=w.nextSibling,ne=w.nodeName;w[Le]||ne==="SCRIPT"||ne==="STYLE"||ne==="LINK"&&w.rel.toLowerCase()==="stylesheet"||d.removeChild(w),w=z}}else d==="body"&&Qd(n.ownerDocument.body);d=j}while(d);Sc(l)}function Z1(n,l){var d=n;n=0;do{var m=d.nextSibling;if(d.nodeType===1?l?(d._stashedDisplay=d.style.display,d.style.display="none"):(d.style.display=d._stashedDisplay||"",d.getAttribute("style")===""&&d.removeAttribute("style")):d.nodeType===3&&(l?(d._stashedText=d.nodeValue,d.nodeValue=""):d.nodeValue=d._stashedText||""),m&&m.nodeType===8)if(d=m.data,d==="/$"){if(n===0)break;n--}else d!=="$"&&d!=="$?"&&d!=="$~"&&d!=="$!"||n++;d=m}while(d)}function t0(n){var l=n.firstChild;for(l&&l.nodeType===10&&(l=l.nextSibling);l;){var d=l;switch(l=l.nextSibling,d.nodeName){case"HTML":case"HEAD":case"BODY":t0(d),rt(d);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(d.rel.toLowerCase()==="stylesheet")continue}n.removeChild(d)}}function m5(n,l,d,m){for(;n.nodeType===1;){var j=d;if(n.nodeName.toLowerCase()!==l.toLowerCase()){if(!m&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(m){if(!n[Le])switch(l){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(w=n.getAttribute("rel"),w==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(w!==j.rel||n.getAttribute("href")!==(j.href==null||j.href===""?null:j.href)||n.getAttribute("crossorigin")!==(j.crossOrigin==null?null:j.crossOrigin)||n.getAttribute("title")!==(j.title==null?null:j.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(w=n.getAttribute("src"),(w!==(j.src==null?null:j.src)||n.getAttribute("type")!==(j.type==null?null:j.type)||n.getAttribute("crossorigin")!==(j.crossOrigin==null?null:j.crossOrigin))&&w&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(l==="input"&&n.type==="hidden"){var w=j.name==null?null:""+j.name;if(j.type==="hidden"&&n.getAttribute("name")===w)return n}else return n;if(n=kn(n.nextSibling),n===null)break}return null}function h5(n,l,d){if(l==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!d||(n=kn(n.nextSibling),n===null))return null;return n}function J1(n,l){for(;n.nodeType!==8;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!l||(n=kn(n.nextSibling),n===null))return null;return n}function s0(n){return n.data==="$?"||n.data==="$~"}function a0(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState!=="loading"}function f5(n,l){var d=n.ownerDocument;if(n.data==="$~")n._reactRetry=l;else if(n.data!=="$?"||d.readyState!=="loading")l();else{var m=function(){l(),d.removeEventListener("DOMContentLoaded",m)};d.addEventListener("DOMContentLoaded",m),n._reactRetry=m}}function kn(n){for(;n!=null;n=n.nextSibling){var l=n.nodeType;if(l===1||l===3)break;if(l===8){if(l=n.data,l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"||l==="F!"||l==="F")break;if(l==="/$"||l==="/&")return null}}return n}var r0=null;function eb(n){n=n.nextSibling;for(var l=0;n;){if(n.nodeType===8){var d=n.data;if(d==="/$"||d==="/&"){if(l===0)return kn(n.nextSibling);l--}else d!=="$"&&d!=="$!"&&d!=="$?"&&d!=="$~"&&d!=="&"||l++}n=n.nextSibling}return null}function tb(n){n=n.previousSibling;for(var l=0;n;){if(n.nodeType===8){var d=n.data;if(d==="$"||d==="$!"||d==="$?"||d==="$~"||d==="&"){if(l===0)return n;l--}else d!=="/$"&&d!=="/&"||l++}n=n.previousSibling}return null}function sb(n,l,d){switch(l=dh(d),n){case"html":if(n=l.documentElement,!n)throw Error(r(452));return n;case"head":if(n=l.head,!n)throw Error(r(453));return n;case"body":if(n=l.body,!n)throw Error(r(454));return n;default:throw Error(r(451))}}function Qd(n){for(var l=n.attributes;l.length;)n.removeAttributeNode(l[0]);rt(n)}var En=new Map,ab=new Set;function uh(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var Ui=ee.d;ee.d={f:x5,r:p5,D:g5,C:v5,L:j5,m:y5,X:b5,S:N5,M:w5};function x5(){var n=Ui.f(),l=sh();return n||l}function p5(n){var l=We(n);l!==null&&l.tag===5&&l.type==="form"?yN(l):Ui.r(n)}var Nc=typeof document>"u"?null:document;function rb(n,l,d){var m=Nc;if(m&&typeof l=="string"&&l){var j=yn(l);j='link[rel="'+n+'"][href="'+j+'"]',typeof d=="string"&&(j+='[crossorigin="'+d+'"]'),ab.has(j)||(ab.add(j),n={rel:n,crossOrigin:d,href:l},m.querySelector(j)===null&&(l=m.createElement("link"),cr(l,"link",n),it(l),m.head.appendChild(l)))}}function g5(n){Ui.D(n),rb("dns-prefetch",n,null)}function v5(n,l){Ui.C(n,l),rb("preconnect",n,l)}function j5(n,l,d){Ui.L(n,l,d);var m=Nc;if(m&&n&&l){var j='link[rel="preload"][as="'+yn(l)+'"]';l==="image"&&d&&d.imageSrcSet?(j+='[imagesrcset="'+yn(d.imageSrcSet)+'"]',typeof d.imageSizes=="string"&&(j+='[imagesizes="'+yn(d.imageSizes)+'"]')):j+='[href="'+yn(n)+'"]';var w=j;switch(l){case"style":w=bc(n);break;case"script":w=wc(n)}En.has(w)||(n=p({rel:"preload",href:l==="image"&&d&&d.imageSrcSet?void 0:n,as:l},d),En.set(w,n),m.querySelector(j)!==null||l==="style"&&m.querySelector(Zd(w))||l==="script"&&m.querySelector(Jd(w))||(l=m.createElement("link"),cr(l,"link",n),it(l),m.head.appendChild(l)))}}function y5(n,l){Ui.m(n,l);var d=Nc;if(d&&n){var m=l&&typeof l.as=="string"?l.as:"script",j='link[rel="modulepreload"][as="'+yn(m)+'"][href="'+yn(n)+'"]',w=j;switch(m){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":w=wc(n)}if(!En.has(w)&&(n=p({rel:"modulepreload",href:n},l),En.set(w,n),d.querySelector(j)===null)){switch(m){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(d.querySelector(Jd(w)))return}m=d.createElement("link"),cr(m,"link",n),it(m),d.head.appendChild(m)}}}function N5(n,l,d){Ui.S(n,l,d);var m=Nc;if(m&&n){var j=et(m).hoistableStyles,w=bc(n);l=l||"default";var z=j.get(w);if(!z){var ne={loading:0,preload:null};if(z=m.querySelector(Zd(w)))ne.loading=5;else{n=p({rel:"stylesheet",href:n,"data-precedence":l},d),(d=En.get(w))&&n0(n,d);var be=z=m.createElement("link");it(be),cr(be,"link",n),be._p=new Promise(function(Be,Ke){be.onload=Be,be.onerror=Ke}),be.addEventListener("load",function(){ne.loading|=1}),be.addEventListener("error",function(){ne.loading|=2}),ne.loading|=4,mh(z,l,m)}z={type:"stylesheet",instance:z,count:1,state:ne},j.set(w,z)}}}function b5(n,l){Ui.X(n,l);var d=Nc;if(d&&n){var m=et(d).hoistableScripts,j=wc(n),w=m.get(j);w||(w=d.querySelector(Jd(j)),w||(n=p({src:n,async:!0},l),(l=En.get(j))&&i0(n,l),w=d.createElement("script"),it(w),cr(w,"link",n),d.head.appendChild(w)),w={type:"script",instance:w,count:1,state:null},m.set(j,w))}}function w5(n,l){Ui.M(n,l);var d=Nc;if(d&&n){var m=et(d).hoistableScripts,j=wc(n),w=m.get(j);w||(w=d.querySelector(Jd(j)),w||(n=p({src:n,async:!0,type:"module"},l),(l=En.get(j))&&i0(n,l),w=d.createElement("script"),it(w),cr(w,"link",n),d.head.appendChild(w)),w={type:"script",instance:w,count:1,state:null},m.set(j,w))}}function nb(n,l,d,m){var j=(j=oe.current)?uh(j):null;if(!j)throw Error(r(446));switch(n){case"meta":case"title":return null;case"style":return typeof d.precedence=="string"&&typeof d.href=="string"?(l=bc(d.href),d=et(j).hoistableStyles,m=d.get(l),m||(m={type:"style",instance:null,count:0,state:null},d.set(l,m)),m):{type:"void",instance:null,count:0,state:null};case"link":if(d.rel==="stylesheet"&&typeof d.href=="string"&&typeof d.precedence=="string"){n=bc(d.href);var w=et(j).hoistableStyles,z=w.get(n);if(z||(j=j.ownerDocument||j,z={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},w.set(n,z),(w=j.querySelector(Zd(n)))&&!w._p&&(z.instance=w,z.state.loading=5),En.has(n)||(d={rel:"preload",as:"style",href:d.href,crossOrigin:d.crossOrigin,integrity:d.integrity,media:d.media,hrefLang:d.hrefLang,referrerPolicy:d.referrerPolicy},En.set(n,d),w||S5(j,n,d,z.state))),l&&m===null)throw Error(r(528,""));return z}if(l&&m!==null)throw Error(r(529,""));return null;case"script":return l=d.async,d=d.src,typeof d=="string"&&l&&typeof l!="function"&&typeof l!="symbol"?(l=wc(d),d=et(j).hoistableScripts,m=d.get(l),m||(m={type:"script",instance:null,count:0,state:null},d.set(l,m)),m):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,n))}}function bc(n){return'href="'+yn(n)+'"'}function Zd(n){return'link[rel="stylesheet"]['+n+"]"}function ib(n){return p({},n,{"data-precedence":n.precedence,precedence:null})}function S5(n,l,d,m){n.querySelector('link[rel="preload"][as="style"]['+l+"]")?m.loading=1:(l=n.createElement("link"),m.preload=l,l.addEventListener("load",function(){return m.loading|=1}),l.addEventListener("error",function(){return m.loading|=2}),cr(l,"link",d),it(l),n.head.appendChild(l))}function wc(n){return'[src="'+yn(n)+'"]'}function Jd(n){return"script[async]"+n}function lb(n,l,d){if(l.count++,l.instance===null)switch(l.type){case"style":var m=n.querySelector('style[data-href~="'+yn(d.href)+'"]');if(m)return l.instance=m,it(m),m;var j=p({},d,{"data-href":d.href,"data-precedence":d.precedence,href:null,precedence:null});return m=(n.ownerDocument||n).createElement("style"),it(m),cr(m,"style",j),mh(m,d.precedence,n),l.instance=m;case"stylesheet":j=bc(d.href);var w=n.querySelector(Zd(j));if(w)return l.state.loading|=4,l.instance=w,it(w),w;m=ib(d),(j=En.get(j))&&n0(m,j),w=(n.ownerDocument||n).createElement("link"),it(w);var z=w;return z._p=new Promise(function(ne,be){z.onload=ne,z.onerror=be}),cr(w,"link",m),l.state.loading|=4,mh(w,d.precedence,n),l.instance=w;case"script":return w=wc(d.src),(j=n.querySelector(Jd(w)))?(l.instance=j,it(j),j):(m=d,(j=En.get(w))&&(m=p({},d),i0(m,j)),n=n.ownerDocument||n,j=n.createElement("script"),it(j),cr(j,"link",m),n.head.appendChild(j),l.instance=j);case"void":return null;default:throw Error(r(443,l.type))}else l.type==="stylesheet"&&(l.state.loading&4)===0&&(m=l.instance,l.state.loading|=4,mh(m,d.precedence,n));return l.instance}function mh(n,l,d){for(var m=d.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),j=m.length?m[m.length-1]:null,w=j,z=0;z<m.length;z++){var ne=m[z];if(ne.dataset.precedence===l)w=ne;else if(w!==j)break}w?w.parentNode.insertBefore(n,w.nextSibling):(l=d.nodeType===9?d.head:d,l.insertBefore(n,l.firstChild))}function n0(n,l){n.crossOrigin==null&&(n.crossOrigin=l.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=l.referrerPolicy),n.title==null&&(n.title=l.title)}function i0(n,l){n.crossOrigin==null&&(n.crossOrigin=l.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=l.referrerPolicy),n.integrity==null&&(n.integrity=l.integrity)}var hh=null;function ob(n,l,d){if(hh===null){var m=new Map,j=hh=new Map;j.set(d,m)}else j=hh,m=j.get(d),m||(m=new Map,j.set(d,m));if(m.has(n))return m;for(m.set(n,null),d=d.getElementsByTagName(n),j=0;j<d.length;j++){var w=d[j];if(!(w[Le]||w[P]||n==="link"&&w.getAttribute("rel")==="stylesheet")&&w.namespaceURI!=="http://www.w3.org/2000/svg"){var z=w.getAttribute(l)||"";z=n+z;var ne=m.get(z);ne?ne.push(w):m.set(z,[w])}}return m}function cb(n,l,d){n=n.ownerDocument||n,n.head.insertBefore(d,l==="title"?n.querySelector("head > title"):null)}function C5(n,l,d){if(d===1||l.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof l.precedence!="string"||typeof l.href!="string"||l.href==="")break;return!0;case"link":if(typeof l.rel!="string"||typeof l.href!="string"||l.href===""||l.onLoad||l.onError)break;switch(l.rel){case"stylesheet":return n=l.disabled,typeof l.precedence=="string"&&n==null;default:return!0}case"script":if(l.async&&typeof l.async!="function"&&typeof l.async!="symbol"&&!l.onLoad&&!l.onError&&l.src&&typeof l.src=="string")return!0}return!1}function db(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}function T5(n,l,d,m){if(d.type==="stylesheet"&&(typeof m.media!="string"||matchMedia(m.media).matches!==!1)&&(d.state.loading&4)===0){if(d.instance===null){var j=bc(m.href),w=l.querySelector(Zd(j));if(w){l=w._p,l!==null&&typeof l=="object"&&typeof l.then=="function"&&(n.count++,n=fh.bind(n),l.then(n,n)),d.state.loading|=4,d.instance=w,it(w);return}w=l.ownerDocument||l,m=ib(m),(j=En.get(j))&&n0(m,j),w=w.createElement("link"),it(w);var z=w;z._p=new Promise(function(ne,be){z.onload=ne,z.onerror=be}),cr(w,"link",m),d.instance=w}n.stylesheets===null&&(n.stylesheets=new Map),n.stylesheets.set(d,l),(l=d.state.preload)&&(d.state.loading&3)===0&&(n.count++,d=fh.bind(n),l.addEventListener("load",d),l.addEventListener("error",d))}}var l0=0;function k5(n,l){return n.stylesheets&&n.count===0&&ph(n,n.stylesheets),0<n.count||0<n.imgCount?function(d){var m=setTimeout(function(){if(n.stylesheets&&ph(n,n.stylesheets),n.unsuspend){var w=n.unsuspend;n.unsuspend=null,w()}},6e4+l);0<n.imgBytes&&l0===0&&(l0=62500*l5());var j=setTimeout(function(){if(n.waitingForImages=!1,n.count===0&&(n.stylesheets&&ph(n,n.stylesheets),n.unsuspend)){var w=n.unsuspend;n.unsuspend=null,w()}},(n.imgBytes>l0?50:800)+l);return n.unsuspend=d,function(){n.unsuspend=null,clearTimeout(m),clearTimeout(j)}}:null}function fh(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)ph(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var xh=null;function ph(n,l){n.stylesheets=null,n.unsuspend!==null&&(n.count++,xh=new Map,l.forEach(E5,n),xh=null,fh.call(n))}function E5(n,l){if(!(l.state.loading&4)){var d=xh.get(n);if(d)var m=d.get(null);else{d=new Map,xh.set(n,d);for(var j=n.querySelectorAll("link[data-precedence],style[data-precedence]"),w=0;w<j.length;w++){var z=j[w];(z.nodeName==="LINK"||z.getAttribute("media")!=="not all")&&(d.set(z.dataset.precedence,z),m=z)}m&&d.set(null,m)}j=l.instance,z=j.getAttribute("data-precedence"),w=d.get(z)||m,w===m&&d.set(null,j),d.set(z,j),this.count++,m=fh.bind(this),j.addEventListener("load",m),j.addEventListener("error",m),w?w.parentNode.insertBefore(j,w.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(j,n.firstChild)),l.state.loading|=4}}var eu={$$typeof:_,Provider:null,Consumer:null,_currentValue:me,_currentValue2:me,_threadCount:0};function A5(n,l,d,m,j,w,z,ne,be){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=J(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=J(0),this.hiddenUpdates=J(null),this.identifierPrefix=m,this.onUncaughtError=j,this.onCaughtError=w,this.onRecoverableError=z,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=be,this.incompleteTransitions=new Map}function ub(n,l,d,m,j,w,z,ne,be,Be,Ke,tt){return n=new A5(n,l,d,z,be,Be,Ke,tt,ne),l=1,w===!0&&(l|=24),w=rn(3,null,null,l),n.current=w,w.stateNode=n,l=zx(),l.refCount++,n.pooledCache=l,l.refCount++,w.memoizedState={element:m,isDehydrated:d,cache:l},Hx(w),n}function mb(n){return n?(n=ec,n):ec}function hb(n,l,d,m,j,w){j=mb(j),m.context===null?m.context=j:m.pendingContext=j,m=ul(l),m.payload={element:d},w=w===void 0?null:w,w!==null&&(m.callback=w),d=ml(n,m,l),d!==null&&(qr(d,n,l),Od(d,n,l))}function fb(n,l){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var d=n.retryLane;n.retryLane=d!==0&&d<l?d:l}}function o0(n,l){fb(n,l),(n=n.alternate)&&fb(n,l)}function xb(n){if(n.tag===13||n.tag===31){var l=Jl(n,67108864);l!==null&&qr(l,n,67108864),o0(n,67108864)}}function pb(n){if(n.tag===13||n.tag===31){var l=dn();l=ks(l);var d=Jl(n,l);d!==null&&qr(d,n,l),o0(n,l)}}var gh=!0;function _5(n,l,d,m){var j=V.T;V.T=null;var w=ee.p;try{ee.p=2,c0(n,l,d,m)}finally{ee.p=w,V.T=j}}function D5(n,l,d,m){var j=V.T;V.T=null;var w=ee.p;try{ee.p=8,c0(n,l,d,m)}finally{ee.p=w,V.T=j}}function c0(n,l,d,m){if(gh){var j=d0(m);if(j===null)Yp(n,l,m,vh,d),vb(n,m);else if(R5(j,n,l,d,m))m.stopPropagation();else if(vb(n,m),l&4&&-1<O5.indexOf(n)){for(;j!==null;){var w=We(j);if(w!==null)switch(w.tag){case 3:if(w=w.stateNode,w.current.memoizedState.isDehydrated){var z=Ut(w.pendingLanes);if(z!==0){var ne=w;for(ne.pendingLanes|=2,ne.entangledLanes|=2;z;){var be=1<<31-we(z);ne.entanglements[1]|=be,z&=~be}oi(w),(Ms&6)===0&&(eh=_t()+500,Kd(0))}}break;case 31:case 13:ne=Jl(w,2),ne!==null&&qr(ne,w,2),sh(),o0(w,2)}if(w=d0(m),w===null&&Yp(n,l,m,vh,d),w===j)break;j=w}j!==null&&m.stopPropagation()}else Yp(n,l,m,null,d)}}function d0(n){return n=mx(n),u0(n)}var vh=null;function u0(n){if(vh=null,n=xe(n),n!==null){var l=o(n);if(l===null)n=null;else{var d=l.tag;if(d===13){if(n=c(l),n!==null)return n;n=null}else if(d===31){if(n=u(l),n!==null)return n;n=null}else if(d===3){if(l.stateNode.current.memoizedState.isDehydrated)return l.tag===3?l.stateNode.containerInfo:null;n=null}else l!==n&&(n=null)}}return vh=n,null}function gb(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(sa()){case Te:return 2;case Ne:return 8;case he:case Ue:return 32;case st:return 268435456;default:return 32}default:return 32}}var m0=!1,wl=null,Sl=null,Cl=null,tu=new Map,su=new Map,Tl=[],O5="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function vb(n,l){switch(n){case"focusin":case"focusout":wl=null;break;case"dragenter":case"dragleave":Sl=null;break;case"mouseover":case"mouseout":Cl=null;break;case"pointerover":case"pointerout":tu.delete(l.pointerId);break;case"gotpointercapture":case"lostpointercapture":su.delete(l.pointerId)}}function au(n,l,d,m,j,w){return n===null||n.nativeEvent!==w?(n={blockedOn:l,domEventName:d,eventSystemFlags:m,nativeEvent:w,targetContainers:[j]},l!==null&&(l=We(l),l!==null&&xb(l)),n):(n.eventSystemFlags|=m,l=n.targetContainers,j!==null&&l.indexOf(j)===-1&&l.push(j),n)}function R5(n,l,d,m,j){switch(l){case"focusin":return wl=au(wl,n,l,d,m,j),!0;case"dragenter":return Sl=au(Sl,n,l,d,m,j),!0;case"mouseover":return Cl=au(Cl,n,l,d,m,j),!0;case"pointerover":var w=j.pointerId;return tu.set(w,au(tu.get(w)||null,n,l,d,m,j)),!0;case"gotpointercapture":return w=j.pointerId,su.set(w,au(su.get(w)||null,n,l,d,m,j)),!0}return!1}function jb(n){var l=xe(n.target);if(l!==null){var d=o(l);if(d!==null){if(l=d.tag,l===13){if(l=c(d),l!==null){n.blockedOn=l,de(n.priority,function(){pb(d)});return}}else if(l===31){if(l=u(d),l!==null){n.blockedOn=l,de(n.priority,function(){pb(d)});return}}else if(l===3&&d.stateNode.current.memoizedState.isDehydrated){n.blockedOn=d.tag===3?d.stateNode.containerInfo:null;return}}}n.blockedOn=null}function jh(n){if(n.blockedOn!==null)return!1;for(var l=n.targetContainers;0<l.length;){var d=d0(n.nativeEvent);if(d===null){d=n.nativeEvent;var m=new d.constructor(d.type,d);ux=m,d.target.dispatchEvent(m),ux=null}else return l=We(d),l!==null&&xb(l),n.blockedOn=d,!1;l.shift()}return!0}function yb(n,l,d){jh(n)&&d.delete(l)}function P5(){m0=!1,wl!==null&&jh(wl)&&(wl=null),Sl!==null&&jh(Sl)&&(Sl=null),Cl!==null&&jh(Cl)&&(Cl=null),tu.forEach(yb),su.forEach(yb)}function yh(n,l){n.blockedOn===l&&(n.blockedOn=null,m0||(m0=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,P5)))}var Nh=null;function Nb(n){Nh!==n&&(Nh=n,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){Nh===n&&(Nh=null);for(var l=0;l<n.length;l+=3){var d=n[l],m=n[l+1],j=n[l+2];if(typeof m!="function"){if(u0(m||d)===null)continue;break}var w=We(d);w!==null&&(n.splice(l,3),l-=3,dp(w,{pending:!0,data:j,method:d.method,action:m},m,j))}}))}function Sc(n){function l(be){return yh(be,n)}wl!==null&&yh(wl,n),Sl!==null&&yh(Sl,n),Cl!==null&&yh(Cl,n),tu.forEach(l),su.forEach(l);for(var d=0;d<Tl.length;d++){var m=Tl[d];m.blockedOn===n&&(m.blockedOn=null)}for(;0<Tl.length&&(d=Tl[0],d.blockedOn===null);)jb(d),d.blockedOn===null&&Tl.shift();if(d=(n.ownerDocument||n).$$reactFormReplay,d!=null)for(m=0;m<d.length;m+=3){var j=d[m],w=d[m+1],z=j[ie]||null;if(typeof w=="function")z||Nb(d);else if(z){var ne=null;if(w&&w.hasAttribute("formAction")){if(j=w,z=w[ie]||null)ne=z.formAction;else if(u0(j)!==null)continue}else ne=z.action;typeof ne=="function"?d[m+1]=ne:(d.splice(m,3),m-=3),Nb(d)}}}function bb(){function n(w){w.canIntercept&&w.info==="react-transition"&&w.intercept({handler:function(){return new Promise(function(z){return j=z})},focusReset:"manual",scroll:"manual"})}function l(){j!==null&&(j(),j=null),m||setTimeout(d,20)}function d(){if(!m&&!navigation.transition){var w=navigation.currentEntry;w&&w.url!=null&&navigation.navigate(w.url,{state:w.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var m=!1,j=null;return navigation.addEventListener("navigate",n),navigation.addEventListener("navigatesuccess",l),navigation.addEventListener("navigateerror",l),setTimeout(d,100),function(){m=!0,navigation.removeEventListener("navigate",n),navigation.removeEventListener("navigatesuccess",l),navigation.removeEventListener("navigateerror",l),j!==null&&(j(),j=null)}}}function h0(n){this._internalRoot=n}bh.prototype.render=h0.prototype.render=function(n){var l=this._internalRoot;if(l===null)throw Error(r(409));var d=l.current,m=dn();hb(d,m,n,l,null,null)},bh.prototype.unmount=h0.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var l=n.containerInfo;hb(n.current,2,null,n,null,null),sh(),l[ue]=null}};function bh(n){this._internalRoot=n}bh.prototype.unstable_scheduleHydration=function(n){if(n){var l=Y();n={blockedOn:null,target:n,priority:l};for(var d=0;d<Tl.length&&l!==0&&l<Tl[d].priority;d++);Tl.splice(d,0,n),d===0&&jb(n)}};var wb=s.version;if(wb!=="19.2.0")throw Error(r(527,wb,"19.2.0"));ee.findDOMNode=function(n){var l=n._reactInternals;if(l===void 0)throw typeof n.render=="function"?Error(r(188)):(n=Object.keys(n).join(","),Error(r(268,n)));return n=x(l),n=n!==null?h(n):null,n=n===null?null:n.stateNode,n};var M5={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:V,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var wh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!wh.isDisabled&&wh.supportsFiber)try{Zt=wh.inject(M5),ts=wh}catch{}}return iu.createRoot=function(n,l){if(!i(n))throw Error(r(299));var d=!1,m="",j=_N,w=DN,z=ON;return l!=null&&(l.unstable_strictMode===!0&&(d=!0),l.identifierPrefix!==void 0&&(m=l.identifierPrefix),l.onUncaughtError!==void 0&&(j=l.onUncaughtError),l.onCaughtError!==void 0&&(w=l.onCaughtError),l.onRecoverableError!==void 0&&(z=l.onRecoverableError)),l=ub(n,1,!1,null,null,d,m,null,j,w,z,bb),n[ue]=l.current,Kp(n),new h0(l)},iu.hydrateRoot=function(n,l,d){if(!i(n))throw Error(r(299));var m=!1,j="",w=_N,z=DN,ne=ON,be=null;return d!=null&&(d.unstable_strictMode===!0&&(m=!0),d.identifierPrefix!==void 0&&(j=d.identifierPrefix),d.onUncaughtError!==void 0&&(w=d.onUncaughtError),d.onCaughtError!==void 0&&(z=d.onCaughtError),d.onRecoverableError!==void 0&&(ne=d.onRecoverableError),d.formState!==void 0&&(be=d.formState)),l=ub(n,1,!0,l,d??null,m,j,be,w,z,ne,bb),l.context=mb(null),d=l.current,m=dn(),m=ks(m),j=ul(m),j.callback=null,ml(d,j,m),d=m,l.current.lanes=d,De(l,d),oi(l),n[ue]=l.current,Kp(n),new bh(l)},iu.version="19.2.0",iu}var Ib;function G6(){if(Ib)return v0.exports;Ib=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(s){console.error(s)}}return t(),v0.exports=W6(),v0.exports}var q6=G6();const Sv="-",K6=t=>{const s=X6(t),{conflictingClassGroups:a,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:c=>{const u=c.split(Sv);return u[0]===""&&u.length!==1&&u.shift(),XS(u,s)||Y6(c)},getConflictingClassGroupIds:(c,u)=>{const f=a[c]||[];return u&&r[c]?[...f,...r[c]]:f}}},XS=(t,s)=>{if(t.length===0)return s.classGroupId;const a=t[0],r=s.nextPart.get(a),i=r?XS(t.slice(1),r):void 0;if(i)return i;if(s.validators.length===0)return;const o=t.join(Sv);return s.validators.find(({validator:c})=>c(o))?.classGroupId},Lb=/^\[(.+)\]$/,Y6=t=>{if(Lb.test(t)){const s=Lb.exec(t)[1],a=s?.substring(0,s.indexOf(":"));if(a)return"arbitrary.."+a}},X6=t=>{const{theme:s,classGroups:a}=t,r={nextPart:new Map,validators:[]};for(const i in a)hg(a[i],r,i,s);return r},hg=(t,s,a,r)=>{t.forEach(i=>{if(typeof i=="string"){const o=i===""?s:Bb(s,i);o.classGroupId=a;return}if(typeof i=="function"){if(Q6(i)){hg(i(r),s,a,r);return}s.validators.push({validator:i,classGroupId:a});return}Object.entries(i).forEach(([o,c])=>{hg(c,Bb(s,o),a,r)})})},Bb=(t,s)=>{let a=t;return s.split(Sv).forEach(r=>{a.nextPart.has(r)||a.nextPart.set(r,{nextPart:new Map,validators:[]}),a=a.nextPart.get(r)}),a},Q6=t=>t.isThemeGetter,Z6=t=>{if(t<1)return{get:()=>{},set:()=>{}};let s=0,a=new Map,r=new Map;const i=(o,c)=>{a.set(o,c),s++,s>t&&(s=0,r=a,a=new Map)};return{get(o){let c=a.get(o);if(c!==void 0)return c;if((c=r.get(o))!==void 0)return i(o,c),c},set(o,c){a.has(o)?a.set(o,c):i(o,c)}}},fg="!",xg=":",J6=xg.length,eD=t=>{const{prefix:s,experimentalParseClassName:a}=t;let r=i=>{const o=[];let c=0,u=0,f=0,x;for(let N=0;N<i.length;N++){let y=i[N];if(c===0&&u===0){if(y===xg){o.push(i.slice(f,N)),f=N+J6;continue}if(y==="/"){x=N;continue}}y==="["?c++:y==="]"?c--:y==="("?u++:y===")"&&u--}const h=o.length===0?i:i.substring(f),p=tD(h),g=p!==h,b=x&&x>f?x-f:void 0;return{modifiers:o,hasImportantModifier:g,baseClassName:p,maybePostfixModifierPosition:b}};if(s){const i=s+xg,o=r;r=c=>c.startsWith(i)?o(c.substring(i.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:c,maybePostfixModifierPosition:void 0}}if(a){const i=r;r=o=>a({className:o,parseClassName:i})}return r},tD=t=>t.endsWith(fg)?t.substring(0,t.length-1):t.startsWith(fg)?t.substring(1):t,sD=t=>{const s=Object.fromEntries(t.orderSensitiveModifiers.map(r=>[r,!0]));return r=>{if(r.length<=1)return r;const i=[];let o=[];return r.forEach(c=>{c[0]==="["||s[c]?(i.push(...o.sort(),c),o=[]):o.push(c)}),i.push(...o.sort()),i}},aD=t=>({cache:Z6(t.cacheSize),parseClassName:eD(t),sortModifiers:sD(t),...K6(t)}),rD=/\s+/,nD=(t,s)=>{const{parseClassName:a,getClassGroupId:r,getConflictingClassGroupIds:i,sortModifiers:o}=s,c=[],u=t.trim().split(rD);let f="";for(let x=u.length-1;x>=0;x-=1){const h=u[x],{isExternal:p,modifiers:g,hasImportantModifier:b,baseClassName:N,maybePostfixModifierPosition:y}=a(h);if(p){f=h+(f.length>0?" "+f:f);continue}let S=!!y,C=r(S?N.substring(0,y):N);if(!C){if(!S){f=h+(f.length>0?" "+f:f);continue}if(C=r(N),!C){f=h+(f.length>0?" "+f:f);continue}S=!1}const T=o(g).join(":"),_=b?T+fg:T,G=_+C;if(c.includes(G))continue;c.push(G);const U=i(C,S);for(let F=0;F<U.length;++F){const k=U[F];c.push(_+k)}f=h+(f.length>0?" "+f:f)}return f};function iD(){let t=0,s,a,r="";for(;t<arguments.length;)(s=arguments[t++])&&(a=QS(s))&&(r&&(r+=" "),r+=a);return r}const QS=t=>{if(typeof t=="string")return t;let s,a="";for(let r=0;r<t.length;r++)t[r]&&(s=QS(t[r]))&&(a&&(a+=" "),a+=s);return a};function lD(t,...s){let a,r,i,o=c;function c(f){const x=s.reduce((h,p)=>p(h),t());return a=aD(x),r=a.cache.get,i=a.cache.set,o=u,u(f)}function u(f){const x=r(f);if(x)return x;const h=nD(f,a);return i(f,h),h}return function(){return o(iD.apply(null,arguments))}}const Qa=t=>{const s=a=>a[t]||[];return s.isThemeGetter=!0,s},ZS=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,JS=/^\((?:(\w[\w-]*):)?(.+)\)$/i,oD=/^\d+\/\d+$/,cD=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,dD=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,uD=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,mD=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,hD=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Cc=t=>oD.test(t),xs=t=>!!t&&!Number.isNaN(Number(t)),El=t=>!!t&&Number.isInteger(Number(t)),N0=t=>t.endsWith("%")&&xs(t.slice(0,-1)),Vi=t=>cD.test(t),fD=()=>!0,xD=t=>dD.test(t)&&!uD.test(t),e4=()=>!1,pD=t=>mD.test(t),gD=t=>hD.test(t),vD=t=>!kt(t)&&!Et(t),jD=t=>ad(t,a4,e4),kt=t=>ZS.test(t),ho=t=>ad(t,r4,xD),b0=t=>ad(t,SD,xs),zb=t=>ad(t,t4,e4),yD=t=>ad(t,s4,gD),Eh=t=>ad(t,n4,pD),Et=t=>JS.test(t),lu=t=>rd(t,r4),ND=t=>rd(t,CD),Ub=t=>rd(t,t4),bD=t=>rd(t,a4),wD=t=>rd(t,s4),Ah=t=>rd(t,n4,!0),ad=(t,s,a)=>{const r=ZS.exec(t);return r?r[1]?s(r[1]):a(r[2]):!1},rd=(t,s,a=!1)=>{const r=JS.exec(t);return r?r[1]?s(r[1]):a:!1},t4=t=>t==="position"||t==="percentage",s4=t=>t==="image"||t==="url",a4=t=>t==="length"||t==="size"||t==="bg-size",r4=t=>t==="length",SD=t=>t==="number",CD=t=>t==="family-name",n4=t=>t==="shadow",TD=()=>{const t=Qa("color"),s=Qa("font"),a=Qa("text"),r=Qa("font-weight"),i=Qa("tracking"),o=Qa("leading"),c=Qa("breakpoint"),u=Qa("container"),f=Qa("spacing"),x=Qa("radius"),h=Qa("shadow"),p=Qa("inset-shadow"),g=Qa("text-shadow"),b=Qa("drop-shadow"),N=Qa("blur"),y=Qa("perspective"),S=Qa("aspect"),C=Qa("ease"),T=Qa("animate"),_=()=>["auto","avoid","all","avoid-page","page","left","right","column"],G=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],U=()=>[...G(),Et,kt],F=()=>["auto","hidden","clip","visible","scroll"],k=()=>["auto","contain","none"],E=()=>[Et,kt,f],A=()=>[Cc,"full","auto",...E()],B=()=>[El,"none","subgrid",Et,kt],H=()=>["auto",{span:["full",El,Et,kt]},El,Et,kt],M=()=>[El,"auto",Et,kt],q=()=>["auto","min","max","fr",Et,kt],L=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],re=()=>["start","end","center","stretch","center-safe","end-safe"],V=()=>["auto",...E()],ee=()=>[Cc,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...E()],me=()=>[t,Et,kt],W=()=>[...G(),Ub,zb,{position:[Et,kt]}],se=()=>["no-repeat",{repeat:["","x","y","space","round"]}],Z=()=>["auto","cover","contain",bD,jD,{size:[Et,kt]}],I=()=>[N0,lu,ho],Q=()=>["","none","full",x,Et,kt],O=()=>["",xs,lu,ho],te=()=>["solid","dashed","dotted","double"],oe=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],je=()=>[xs,N0,Ub,zb],Me=()=>["","none",N,Et,kt],ve=()=>["none",xs,Et,kt],ce=()=>["none",xs,Et,kt],Pe=()=>[xs,Et,kt],Qe=()=>[Cc,"full",...E()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[Vi],breakpoint:[Vi],color:[fD],container:[Vi],"drop-shadow":[Vi],ease:["in","out","in-out"],font:[vD],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[Vi],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[Vi],shadow:[Vi],spacing:["px",xs],text:[Vi],"text-shadow":[Vi],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",Cc,kt,Et,S]}],container:["container"],columns:[{columns:[xs,kt,Et,u]}],"break-after":[{"break-after":_()}],"break-before":[{"break-before":_()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:U()}],overflow:[{overflow:F()}],"overflow-x":[{"overflow-x":F()}],"overflow-y":[{"overflow-y":F()}],overscroll:[{overscroll:k()}],"overscroll-x":[{"overscroll-x":k()}],"overscroll-y":[{"overscroll-y":k()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:A()}],"inset-x":[{"inset-x":A()}],"inset-y":[{"inset-y":A()}],start:[{start:A()}],end:[{end:A()}],top:[{top:A()}],right:[{right:A()}],bottom:[{bottom:A()}],left:[{left:A()}],visibility:["visible","invisible","collapse"],z:[{z:[El,"auto",Et,kt]}],basis:[{basis:[Cc,"full","auto",u,...E()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[xs,Cc,"auto","initial","none",kt]}],grow:[{grow:["",xs,Et,kt]}],shrink:[{shrink:["",xs,Et,kt]}],order:[{order:[El,"first","last","none",Et,kt]}],"grid-cols":[{"grid-cols":B()}],"col-start-end":[{col:H()}],"col-start":[{"col-start":M()}],"col-end":[{"col-end":M()}],"grid-rows":[{"grid-rows":B()}],"row-start-end":[{row:H()}],"row-start":[{"row-start":M()}],"row-end":[{"row-end":M()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":q()}],"auto-rows":[{"auto-rows":q()}],gap:[{gap:E()}],"gap-x":[{"gap-x":E()}],"gap-y":[{"gap-y":E()}],"justify-content":[{justify:[...L(),"normal"]}],"justify-items":[{"justify-items":[...re(),"normal"]}],"justify-self":[{"justify-self":["auto",...re()]}],"align-content":[{content:["normal",...L()]}],"align-items":[{items:[...re(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...re(),{baseline:["","last"]}]}],"place-content":[{"place-content":L()}],"place-items":[{"place-items":[...re(),"baseline"]}],"place-self":[{"place-self":["auto",...re()]}],p:[{p:E()}],px:[{px:E()}],py:[{py:E()}],ps:[{ps:E()}],pe:[{pe:E()}],pt:[{pt:E()}],pr:[{pr:E()}],pb:[{pb:E()}],pl:[{pl:E()}],m:[{m:V()}],mx:[{mx:V()}],my:[{my:V()}],ms:[{ms:V()}],me:[{me:V()}],mt:[{mt:V()}],mr:[{mr:V()}],mb:[{mb:V()}],ml:[{ml:V()}],"space-x":[{"space-x":E()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":E()}],"space-y-reverse":["space-y-reverse"],size:[{size:ee()}],w:[{w:[u,"screen",...ee()]}],"min-w":[{"min-w":[u,"screen","none",...ee()]}],"max-w":[{"max-w":[u,"screen","none","prose",{screen:[c]},...ee()]}],h:[{h:["screen","lh",...ee()]}],"min-h":[{"min-h":["screen","lh","none",...ee()]}],"max-h":[{"max-h":["screen","lh",...ee()]}],"font-size":[{text:["base",a,lu,ho]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[r,Et,b0]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",N0,kt]}],"font-family":[{font:[ND,kt,s]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[i,Et,kt]}],"line-clamp":[{"line-clamp":[xs,"none",Et,b0]}],leading:[{leading:[o,...E()]}],"list-image":[{"list-image":["none",Et,kt]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",Et,kt]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:me()}],"text-color":[{text:me()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...te(),"wavy"]}],"text-decoration-thickness":[{decoration:[xs,"from-font","auto",Et,ho]}],"text-decoration-color":[{decoration:me()}],"underline-offset":[{"underline-offset":[xs,"auto",Et,kt]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:E()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Et,kt]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Et,kt]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:W()}],"bg-repeat":[{bg:se()}],"bg-size":[{bg:Z()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},El,Et,kt],radial:["",Et,kt],conic:[El,Et,kt]},wD,yD]}],"bg-color":[{bg:me()}],"gradient-from-pos":[{from:I()}],"gradient-via-pos":[{via:I()}],"gradient-to-pos":[{to:I()}],"gradient-from":[{from:me()}],"gradient-via":[{via:me()}],"gradient-to":[{to:me()}],rounded:[{rounded:Q()}],"rounded-s":[{"rounded-s":Q()}],"rounded-e":[{"rounded-e":Q()}],"rounded-t":[{"rounded-t":Q()}],"rounded-r":[{"rounded-r":Q()}],"rounded-b":[{"rounded-b":Q()}],"rounded-l":[{"rounded-l":Q()}],"rounded-ss":[{"rounded-ss":Q()}],"rounded-se":[{"rounded-se":Q()}],"rounded-ee":[{"rounded-ee":Q()}],"rounded-es":[{"rounded-es":Q()}],"rounded-tl":[{"rounded-tl":Q()}],"rounded-tr":[{"rounded-tr":Q()}],"rounded-br":[{"rounded-br":Q()}],"rounded-bl":[{"rounded-bl":Q()}],"border-w":[{border:O()}],"border-w-x":[{"border-x":O()}],"border-w-y":[{"border-y":O()}],"border-w-s":[{"border-s":O()}],"border-w-e":[{"border-e":O()}],"border-w-t":[{"border-t":O()}],"border-w-r":[{"border-r":O()}],"border-w-b":[{"border-b":O()}],"border-w-l":[{"border-l":O()}],"divide-x":[{"divide-x":O()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":O()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...te(),"hidden","none"]}],"divide-style":[{divide:[...te(),"hidden","none"]}],"border-color":[{border:me()}],"border-color-x":[{"border-x":me()}],"border-color-y":[{"border-y":me()}],"border-color-s":[{"border-s":me()}],"border-color-e":[{"border-e":me()}],"border-color-t":[{"border-t":me()}],"border-color-r":[{"border-r":me()}],"border-color-b":[{"border-b":me()}],"border-color-l":[{"border-l":me()}],"divide-color":[{divide:me()}],"outline-style":[{outline:[...te(),"none","hidden"]}],"outline-offset":[{"outline-offset":[xs,Et,kt]}],"outline-w":[{outline:["",xs,lu,ho]}],"outline-color":[{outline:me()}],shadow:[{shadow:["","none",h,Ah,Eh]}],"shadow-color":[{shadow:me()}],"inset-shadow":[{"inset-shadow":["none",p,Ah,Eh]}],"inset-shadow-color":[{"inset-shadow":me()}],"ring-w":[{ring:O()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:me()}],"ring-offset-w":[{"ring-offset":[xs,ho]}],"ring-offset-color":[{"ring-offset":me()}],"inset-ring-w":[{"inset-ring":O()}],"inset-ring-color":[{"inset-ring":me()}],"text-shadow":[{"text-shadow":["none",g,Ah,Eh]}],"text-shadow-color":[{"text-shadow":me()}],opacity:[{opacity:[xs,Et,kt]}],"mix-blend":[{"mix-blend":[...oe(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":oe()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[xs]}],"mask-image-linear-from-pos":[{"mask-linear-from":je()}],"mask-image-linear-to-pos":[{"mask-linear-to":je()}],"mask-image-linear-from-color":[{"mask-linear-from":me()}],"mask-image-linear-to-color":[{"mask-linear-to":me()}],"mask-image-t-from-pos":[{"mask-t-from":je()}],"mask-image-t-to-pos":[{"mask-t-to":je()}],"mask-image-t-from-color":[{"mask-t-from":me()}],"mask-image-t-to-color":[{"mask-t-to":me()}],"mask-image-r-from-pos":[{"mask-r-from":je()}],"mask-image-r-to-pos":[{"mask-r-to":je()}],"mask-image-r-from-color":[{"mask-r-from":me()}],"mask-image-r-to-color":[{"mask-r-to":me()}],"mask-image-b-from-pos":[{"mask-b-from":je()}],"mask-image-b-to-pos":[{"mask-b-to":je()}],"mask-image-b-from-color":[{"mask-b-from":me()}],"mask-image-b-to-color":[{"mask-b-to":me()}],"mask-image-l-from-pos":[{"mask-l-from":je()}],"mask-image-l-to-pos":[{"mask-l-to":je()}],"mask-image-l-from-color":[{"mask-l-from":me()}],"mask-image-l-to-color":[{"mask-l-to":me()}],"mask-image-x-from-pos":[{"mask-x-from":je()}],"mask-image-x-to-pos":[{"mask-x-to":je()}],"mask-image-x-from-color":[{"mask-x-from":me()}],"mask-image-x-to-color":[{"mask-x-to":me()}],"mask-image-y-from-pos":[{"mask-y-from":je()}],"mask-image-y-to-pos":[{"mask-y-to":je()}],"mask-image-y-from-color":[{"mask-y-from":me()}],"mask-image-y-to-color":[{"mask-y-to":me()}],"mask-image-radial":[{"mask-radial":[Et,kt]}],"mask-image-radial-from-pos":[{"mask-radial-from":je()}],"mask-image-radial-to-pos":[{"mask-radial-to":je()}],"mask-image-radial-from-color":[{"mask-radial-from":me()}],"mask-image-radial-to-color":[{"mask-radial-to":me()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":G()}],"mask-image-conic-pos":[{"mask-conic":[xs]}],"mask-image-conic-from-pos":[{"mask-conic-from":je()}],"mask-image-conic-to-pos":[{"mask-conic-to":je()}],"mask-image-conic-from-color":[{"mask-conic-from":me()}],"mask-image-conic-to-color":[{"mask-conic-to":me()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:W()}],"mask-repeat":[{mask:se()}],"mask-size":[{mask:Z()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",Et,kt]}],filter:[{filter:["","none",Et,kt]}],blur:[{blur:Me()}],brightness:[{brightness:[xs,Et,kt]}],contrast:[{contrast:[xs,Et,kt]}],"drop-shadow":[{"drop-shadow":["","none",b,Ah,Eh]}],"drop-shadow-color":[{"drop-shadow":me()}],grayscale:[{grayscale:["",xs,Et,kt]}],"hue-rotate":[{"hue-rotate":[xs,Et,kt]}],invert:[{invert:["",xs,Et,kt]}],saturate:[{saturate:[xs,Et,kt]}],sepia:[{sepia:["",xs,Et,kt]}],"backdrop-filter":[{"backdrop-filter":["","none",Et,kt]}],"backdrop-blur":[{"backdrop-blur":Me()}],"backdrop-brightness":[{"backdrop-brightness":[xs,Et,kt]}],"backdrop-contrast":[{"backdrop-contrast":[xs,Et,kt]}],"backdrop-grayscale":[{"backdrop-grayscale":["",xs,Et,kt]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[xs,Et,kt]}],"backdrop-invert":[{"backdrop-invert":["",xs,Et,kt]}],"backdrop-opacity":[{"backdrop-opacity":[xs,Et,kt]}],"backdrop-saturate":[{"backdrop-saturate":[xs,Et,kt]}],"backdrop-sepia":[{"backdrop-sepia":["",xs,Et,kt]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":E()}],"border-spacing-x":[{"border-spacing-x":E()}],"border-spacing-y":[{"border-spacing-y":E()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",Et,kt]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[xs,"initial",Et,kt]}],ease:[{ease:["linear","initial",C,Et,kt]}],delay:[{delay:[xs,Et,kt]}],animate:[{animate:["none",T,Et,kt]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[y,Et,kt]}],"perspective-origin":[{"perspective-origin":U()}],rotate:[{rotate:ve()}],"rotate-x":[{"rotate-x":ve()}],"rotate-y":[{"rotate-y":ve()}],"rotate-z":[{"rotate-z":ve()}],scale:[{scale:ce()}],"scale-x":[{"scale-x":ce()}],"scale-y":[{"scale-y":ce()}],"scale-z":[{"scale-z":ce()}],"scale-3d":["scale-3d"],skew:[{skew:Pe()}],"skew-x":[{"skew-x":Pe()}],"skew-y":[{"skew-y":Pe()}],transform:[{transform:[Et,kt,"","none","gpu","cpu"]}],"transform-origin":[{origin:U()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:Qe()}],"translate-x":[{"translate-x":Qe()}],"translate-y":[{"translate-y":Qe()}],"translate-z":[{"translate-z":Qe()}],"translate-none":["translate-none"],accent:[{accent:me()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:me()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Et,kt]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":E()}],"scroll-mx":[{"scroll-mx":E()}],"scroll-my":[{"scroll-my":E()}],"scroll-ms":[{"scroll-ms":E()}],"scroll-me":[{"scroll-me":E()}],"scroll-mt":[{"scroll-mt":E()}],"scroll-mr":[{"scroll-mr":E()}],"scroll-mb":[{"scroll-mb":E()}],"scroll-ml":[{"scroll-ml":E()}],"scroll-p":[{"scroll-p":E()}],"scroll-px":[{"scroll-px":E()}],"scroll-py":[{"scroll-py":E()}],"scroll-ps":[{"scroll-ps":E()}],"scroll-pe":[{"scroll-pe":E()}],"scroll-pt":[{"scroll-pt":E()}],"scroll-pr":[{"scroll-pr":E()}],"scroll-pb":[{"scroll-pb":E()}],"scroll-pl":[{"scroll-pl":E()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Et,kt]}],fill:[{fill:["none",...me()]}],"stroke-w":[{stroke:[xs,lu,ho,b0]}],stroke:[{stroke:["none",...me()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},kD=lD(TD);function Je(...t){return kD(YS(t))}const Vb=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,$b=YS,Cv=(t,s)=>a=>{var r;if(s?.variants==null)return $b(t,a?.class,a?.className);const{variants:i,defaultVariants:o}=s,c=Object.keys(i).map(x=>{const h=a?.[x],p=o?.[x];if(h===null)return null;const g=Vb(h)||Vb(p);return i[x][g]}),u=a&&Object.entries(a).reduce((x,h)=>{let[p,g]=h;return g===void 0||(x[p]=g),x},{}),f=s==null||(r=s.compoundVariants)===null||r===void 0?void 0:r.reduce((x,h)=>{let{class:p,className:g,...b}=h;return Object.entries(b).every(N=>{let[y,S]=N;return Array.isArray(S)?S.includes({...o,...u}[y]):{...o,...u}[y]===S})?[...x,p,g]:x},[]);return $b(t,c,f,a?.class,a?.className)},pg=Cv("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function R({className:t,variant:s,size:a,asChild:r=!1,...i}){const o=r?uv:"button";return e.jsx(o,{"data-slot":"button",className:Je(pg({variant:s,size:a,className:t})),...i})}function K({className:t,...s}){return e.jsx("div",{"data-slot":"card",className:Je("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",t),...s})}function pe({className:t,...s}){return e.jsx("div",{"data-slot":"card-header",className:Je("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",t),...s})}function ge({className:t,...s}){return e.jsx("div",{"data-slot":"card-title",className:Je("leading-none font-semibold",t),...s})}function lt({className:t,...s}){return e.jsx("div",{"data-slot":"card-description",className:Je("text-muted-foreground text-sm",t),...s})}function X({className:t,...s}){return e.jsx("div",{"data-slot":"card-content",className:Je("px-6",t),...s})}function wo({className:t,...s}){return e.jsx("div",{"data-slot":"card-footer",className:Je("flex items-center px-6 [.border-t]:pt-6",t),...s})}function fe({className:t,type:s,...a}){return e.jsx("input",{type:s,"data-slot":"input",className:Je("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",t),...a})}var ED="Label",i4=v.forwardRef((t,s)=>e.jsx(ca.label,{...t,ref:s,onMouseDown:a=>{a.target.closest("button, input, select, textarea")||(t.onMouseDown?.(a),!a.defaultPrevented&&a.detail>1&&a.preventDefault())}}));i4.displayName=ED;var AD=i4;function ae({className:t,...s}){return e.jsx(AD,{"data-slot":"label",className:Je("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",t),...s})}const Ff=ft.createContext();function Ft({open:t,onOpenChange:s,children:a,...r}){const[i,o]=v.useState(t||!1);v.useEffect(()=>{t!==void 0&&o(t)},[t]);const c=u=>{o(u),s?.(u)};return e.jsx(Ff.Provider,{value:{isOpen:i,onOpenChange:c},children:a})}function Na({children:t,asChild:s,...a}){const{onOpenChange:r}=ft.useContext(Ff),i=()=>{r?.(!0)};return s&&ft.isValidElement(t)?ft.cloneElement(t,{onClick:i,...a}):e.jsx("button",{onClick:i,...a,children:t})}function _D({children:t}){return t}function DD({className:t,...s}){const{isOpen:a,onOpenChange:r}=ft.useContext(Ff);return a?e.jsx("div",{className:Je("fixed inset-0 z-50 bg-black/50 backdrop-blur-sm",t),onClick:()=>r?.(!1),...s}):null}function It({className:t,children:s,showCloseButton:a=!0,...r}){const{isOpen:i,onOpenChange:o}=ft.useContext(Ff);return i?e.jsxs(_D,{children:[e.jsx(DD,{}),e.jsxs("div",{className:Je("fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border bg-white p-6 shadow-lg duration-200 sm:max-w-lg dark:bg-gray-800",t),onClick:c=>c.stopPropagation(),...r,children:[s,a&&e.jsxs("button",{className:"absolute top-4 right-4 rounded-sm opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-none disabled:pointer-events-none",onClick:()=>o?.(!1),children:[e.jsx(yr,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Close"})]})]})]}):null}function Lt({className:t,...s}){return e.jsx("div",{className:Je("flex flex-col gap-2 text-center sm:text-left",t),...s})}function Rs({className:t,...s}){return e.jsx("div",{className:Je("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",t),...s})}function Bt({className:t,...s}){return e.jsx("h2",{className:Je("text-lg leading-none font-semibold",t),...s})}function es({className:t,...s}){return e.jsx("p",{className:Je("text-gray-600 dark:text-gray-400 text-sm",t),...s})}function l4(t,s){return function(){return t.apply(s,arguments)}}const{toString:OD}=Object.prototype,{getPrototypeOf:Tv}=Object,{iterator:If,toStringTag:o4}=Symbol,Lf=(t=>s=>{const a=OD.call(s);return t[a]||(t[a]=a.slice(8,-1).toLowerCase())})(Object.create(null)),ri=t=>(t=t.toLowerCase(),s=>Lf(s)===t),Bf=t=>s=>typeof s===t,{isArray:nd}=Array,Qc=Bf("undefined");function Xu(t){return t!==null&&!Qc(t)&&t.constructor!==null&&!Qc(t.constructor)&&Qr(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const c4=ri("ArrayBuffer");function RD(t){let s;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?s=ArrayBuffer.isView(t):s=t&&t.buffer&&c4(t.buffer),s}const PD=Bf("string"),Qr=Bf("function"),d4=Bf("number"),Qu=t=>t!==null&&typeof t=="object",MD=t=>t===!0||t===!1,Gh=t=>{if(Lf(t)!=="object")return!1;const s=Tv(t);return(s===null||s===Object.prototype||Object.getPrototypeOf(s)===null)&&!(o4 in t)&&!(If in t)},FD=t=>{if(!Qu(t)||Xu(t))return!1;try{return Object.keys(t).length===0&&Object.getPrototypeOf(t)===Object.prototype}catch{return!1}},ID=ri("Date"),LD=ri("File"),BD=ri("Blob"),zD=ri("FileList"),UD=t=>Qu(t)&&Qr(t.pipe),VD=t=>{let s;return t&&(typeof FormData=="function"&&t instanceof FormData||Qr(t.append)&&((s=Lf(t))==="formdata"||s==="object"&&Qr(t.toString)&&t.toString()==="[object FormData]"))},$D=ri("URLSearchParams"),[HD,WD,GD,qD]=["ReadableStream","Request","Response","Headers"].map(ri),KD=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Zu(t,s,{allOwnKeys:a=!1}={}){if(t===null||typeof t>"u")return;let r,i;if(typeof t!="object"&&(t=[t]),nd(t))for(r=0,i=t.length;r<i;r++)s.call(null,t[r],r,t);else{if(Xu(t))return;const o=a?Object.getOwnPropertyNames(t):Object.keys(t),c=o.length;let u;for(r=0;r<c;r++)u=o[r],s.call(null,t[u],u,t)}}function u4(t,s){if(Xu(t))return null;s=s.toLowerCase();const a=Object.keys(t);let r=a.length,i;for(;r-- >0;)if(i=a[r],s===i.toLowerCase())return i;return null}const vo=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,m4=t=>!Qc(t)&&t!==vo;function gg(){const{caseless:t,skipUndefined:s}=m4(this)&&this||{},a={},r=(i,o)=>{const c=t&&u4(a,o)||o;Gh(a[c])&&Gh(i)?a[c]=gg(a[c],i):Gh(i)?a[c]=gg({},i):nd(i)?a[c]=i.slice():(!s||!Qc(i))&&(a[c]=i)};for(let i=0,o=arguments.length;i<o;i++)arguments[i]&&Zu(arguments[i],r);return a}const YD=(t,s,a,{allOwnKeys:r}={})=>(Zu(s,(i,o)=>{a&&Qr(i)?t[o]=l4(i,a):t[o]=i},{allOwnKeys:r}),t),XD=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),QD=(t,s,a,r)=>{t.prototype=Object.create(s.prototype,r),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:s.prototype}),a&&Object.assign(t.prototype,a)},ZD=(t,s,a,r)=>{let i,o,c;const u={};if(s=s||{},t==null)return s;do{for(i=Object.getOwnPropertyNames(t),o=i.length;o-- >0;)c=i[o],(!r||r(c,t,s))&&!u[c]&&(s[c]=t[c],u[c]=!0);t=a!==!1&&Tv(t)}while(t&&(!a||a(t,s))&&t!==Object.prototype);return s},JD=(t,s,a)=>{t=String(t),(a===void 0||a>t.length)&&(a=t.length),a-=s.length;const r=t.indexOf(s,a);return r!==-1&&r===a},eO=t=>{if(!t)return null;if(nd(t))return t;let s=t.length;if(!d4(s))return null;const a=new Array(s);for(;s-- >0;)a[s]=t[s];return a},tO=(t=>s=>t&&s instanceof t)(typeof Uint8Array<"u"&&Tv(Uint8Array)),sO=(t,s)=>{const r=(t&&t[If]).call(t);let i;for(;(i=r.next())&&!i.done;){const o=i.value;s.call(t,o[0],o[1])}},aO=(t,s)=>{let a;const r=[];for(;(a=t.exec(s))!==null;)r.push(a);return r},rO=ri("HTMLFormElement"),nO=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(a,r,i){return r.toUpperCase()+i}),Hb=(({hasOwnProperty:t})=>(s,a)=>t.call(s,a))(Object.prototype),iO=ri("RegExp"),h4=(t,s)=>{const a=Object.getOwnPropertyDescriptors(t),r={};Zu(a,(i,o)=>{let c;(c=s(i,o,t))!==!1&&(r[o]=c||i)}),Object.defineProperties(t,r)},lO=t=>{h4(t,(s,a)=>{if(Qr(t)&&["arguments","caller","callee"].indexOf(a)!==-1)return!1;const r=t[a];if(Qr(r)){if(s.enumerable=!1,"writable"in s){s.writable=!1;return}s.set||(s.set=()=>{throw Error("Can not rewrite read-only method '"+a+"'")})}})},oO=(t,s)=>{const a={},r=i=>{i.forEach(o=>{a[o]=!0})};return nd(t)?r(t):r(String(t).split(s)),a},cO=()=>{},dO=(t,s)=>t!=null&&Number.isFinite(t=+t)?t:s;function uO(t){return!!(t&&Qr(t.append)&&t[o4]==="FormData"&&t[If])}const mO=t=>{const s=new Array(10),a=(r,i)=>{if(Qu(r)){if(s.indexOf(r)>=0)return;if(Xu(r))return r;if(!("toJSON"in r)){s[i]=r;const o=nd(r)?[]:{};return Zu(r,(c,u)=>{const f=a(c,i+1);!Qc(f)&&(o[u]=f)}),s[i]=void 0,o}}return r};return a(t,0)},hO=ri("AsyncFunction"),fO=t=>t&&(Qu(t)||Qr(t))&&Qr(t.then)&&Qr(t.catch),f4=((t,s)=>t?setImmediate:s?((a,r)=>(vo.addEventListener("message",({source:i,data:o})=>{i===vo&&o===a&&r.length&&r.shift()()},!1),i=>{r.push(i),vo.postMessage(a,"*")}))(`axios@${Math.random()}`,[]):a=>setTimeout(a))(typeof setImmediate=="function",Qr(vo.postMessage)),xO=typeof queueMicrotask<"u"?queueMicrotask.bind(vo):typeof process<"u"&&process.nextTick||f4,pO=t=>t!=null&&Qr(t[If]),Ve={isArray:nd,isArrayBuffer:c4,isBuffer:Xu,isFormData:VD,isArrayBufferView:RD,isString:PD,isNumber:d4,isBoolean:MD,isObject:Qu,isPlainObject:Gh,isEmptyObject:FD,isReadableStream:HD,isRequest:WD,isResponse:GD,isHeaders:qD,isUndefined:Qc,isDate:ID,isFile:LD,isBlob:BD,isRegExp:iO,isFunction:Qr,isStream:UD,isURLSearchParams:$D,isTypedArray:tO,isFileList:zD,forEach:Zu,merge:gg,extend:YD,trim:KD,stripBOM:XD,inherits:QD,toFlatObject:ZD,kindOf:Lf,kindOfTest:ri,endsWith:JD,toArray:eO,forEachEntry:sO,matchAll:aO,isHTMLForm:rO,hasOwnProperty:Hb,hasOwnProp:Hb,reduceDescriptors:h4,freezeMethods:lO,toObjectSet:oO,toCamelCase:nO,noop:cO,toFiniteNumber:dO,findKey:u4,global:vo,isContextDefined:m4,isSpecCompliantForm:uO,toJSONObject:mO,isAsyncFn:hO,isThenable:fO,setImmediate:f4,asap:xO,isIterable:pO};function ls(t,s,a,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",s&&(this.code=s),a&&(this.config=a),r&&(this.request=r),i&&(this.response=i,this.status=i.status?i.status:null)}Ve.inherits(ls,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Ve.toJSONObject(this.config),code:this.code,status:this.status}}});const x4=ls.prototype,p4={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{p4[t]={value:t}});Object.defineProperties(ls,p4);Object.defineProperty(x4,"isAxiosError",{value:!0});ls.from=(t,s,a,r,i,o)=>{const c=Object.create(x4);Ve.toFlatObject(t,c,function(h){return h!==Error.prototype},x=>x!=="isAxiosError");const u=t&&t.message?t.message:"Error",f=s==null&&t?t.code:s;return ls.call(c,u,f,a,r,i),t&&c.cause==null&&Object.defineProperty(c,"cause",{value:t,configurable:!0}),c.name=t&&t.name||"Error",o&&Object.assign(c,o),c};const gO=null;function vg(t){return Ve.isPlainObject(t)||Ve.isArray(t)}function g4(t){return Ve.endsWith(t,"[]")?t.slice(0,-2):t}function Wb(t,s,a){return t?t.concat(s).map(function(i,o){return i=g4(i),!a&&o?"["+i+"]":i}).join(a?".":""):s}function vO(t){return Ve.isArray(t)&&!t.some(vg)}const jO=Ve.toFlatObject(Ve,{},null,function(s){return/^is[A-Z]/.test(s)});function zf(t,s,a){if(!Ve.isObject(t))throw new TypeError("target must be an object");s=s||new FormData,a=Ve.toFlatObject(a,{metaTokens:!0,dots:!1,indexes:!1},!1,function(y,S){return!Ve.isUndefined(S[y])});const r=a.metaTokens,i=a.visitor||h,o=a.dots,c=a.indexes,f=(a.Blob||typeof Blob<"u"&&Blob)&&Ve.isSpecCompliantForm(s);if(!Ve.isFunction(i))throw new TypeError("visitor must be a function");function x(N){if(N===null)return"";if(Ve.isDate(N))return N.toISOString();if(Ve.isBoolean(N))return N.toString();if(!f&&Ve.isBlob(N))throw new ls("Blob is not supported. Use a Buffer instead.");return Ve.isArrayBuffer(N)||Ve.isTypedArray(N)?f&&typeof Blob=="function"?new Blob([N]):Buffer.from(N):N}function h(N,y,S){let C=N;if(N&&!S&&typeof N=="object"){if(Ve.endsWith(y,"{}"))y=r?y:y.slice(0,-2),N=JSON.stringify(N);else if(Ve.isArray(N)&&vO(N)||(Ve.isFileList(N)||Ve.endsWith(y,"[]"))&&(C=Ve.toArray(N)))return y=g4(y),C.forEach(function(_,G){!(Ve.isUndefined(_)||_===null)&&s.append(c===!0?Wb([y],G,o):c===null?y:y+"[]",x(_))}),!1}return vg(N)?!0:(s.append(Wb(S,y,o),x(N)),!1)}const p=[],g=Object.assign(jO,{defaultVisitor:h,convertValue:x,isVisitable:vg});function b(N,y){if(!Ve.isUndefined(N)){if(p.indexOf(N)!==-1)throw Error("Circular reference detected in "+y.join("."));p.push(N),Ve.forEach(N,function(C,T){(!(Ve.isUndefined(C)||C===null)&&i.call(s,C,Ve.isString(T)?T.trim():T,y,g))===!0&&b(C,y?y.concat(T):[T])}),p.pop()}}if(!Ve.isObject(t))throw new TypeError("data must be an object");return b(t),s}function Gb(t){const s={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(r){return s[r]})}function kv(t,s){this._pairs=[],t&&zf(t,this,s)}const v4=kv.prototype;v4.append=function(s,a){this._pairs.push([s,a])};v4.toString=function(s){const a=s?function(r){return s.call(this,r,Gb)}:Gb;return this._pairs.map(function(i){return a(i[0])+"="+a(i[1])},"").join("&")};function yO(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function j4(t,s,a){if(!s)return t;const r=a&&a.encode||yO;Ve.isFunction(a)&&(a={serialize:a});const i=a&&a.serialize;let o;if(i?o=i(s,a):o=Ve.isURLSearchParams(s)?s.toString():new kv(s,a).toString(r),o){const c=t.indexOf("#");c!==-1&&(t=t.slice(0,c)),t+=(t.indexOf("?")===-1?"?":"&")+o}return t}class qb{constructor(){this.handlers=[]}use(s,a,r){return this.handlers.push({fulfilled:s,rejected:a,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(s){this.handlers[s]&&(this.handlers[s]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(s){Ve.forEach(this.handlers,function(r){r!==null&&s(r)})}}const y4={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},NO=typeof URLSearchParams<"u"?URLSearchParams:kv,bO=typeof FormData<"u"?FormData:null,wO=typeof Blob<"u"?Blob:null,SO={isBrowser:!0,classes:{URLSearchParams:NO,FormData:bO,Blob:wO},protocols:["http","https","file","blob","url","data"]},Ev=typeof window<"u"&&typeof document<"u",jg=typeof navigator=="object"&&navigator||void 0,CO=Ev&&(!jg||["ReactNative","NativeScript","NS"].indexOf(jg.product)<0),TO=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",kO=Ev&&window.location.href||"http://localhost",EO=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Ev,hasStandardBrowserEnv:CO,hasStandardBrowserWebWorkerEnv:TO,navigator:jg,origin:kO},Symbol.toStringTag,{value:"Module"})),kr={...EO,...SO};function AO(t,s){return zf(t,new kr.classes.URLSearchParams,{visitor:function(a,r,i,o){return kr.isNode&&Ve.isBuffer(a)?(this.append(r,a.toString("base64")),!1):o.defaultVisitor.apply(this,arguments)},...s})}function _O(t){return Ve.matchAll(/\w+|\[(\w*)]/g,t).map(s=>s[0]==="[]"?"":s[1]||s[0])}function DO(t){const s={},a=Object.keys(t);let r;const i=a.length;let o;for(r=0;r<i;r++)o=a[r],s[o]=t[o];return s}function N4(t){function s(a,r,i,o){let c=a[o++];if(c==="__proto__")return!0;const u=Number.isFinite(+c),f=o>=a.length;return c=!c&&Ve.isArray(i)?i.length:c,f?(Ve.hasOwnProp(i,c)?i[c]=[i[c],r]:i[c]=r,!u):((!i[c]||!Ve.isObject(i[c]))&&(i[c]=[]),s(a,r,i[c],o)&&Ve.isArray(i[c])&&(i[c]=DO(i[c])),!u)}if(Ve.isFormData(t)&&Ve.isFunction(t.entries)){const a={};return Ve.forEachEntry(t,(r,i)=>{s(_O(r),i,a,0)}),a}return null}function OO(t,s,a){if(Ve.isString(t))try{return(s||JSON.parse)(t),Ve.trim(t)}catch(r){if(r.name!=="SyntaxError")throw r}return(a||JSON.stringify)(t)}const Ju={transitional:y4,adapter:["xhr","http","fetch"],transformRequest:[function(s,a){const r=a.getContentType()||"",i=r.indexOf("application/json")>-1,o=Ve.isObject(s);if(o&&Ve.isHTMLForm(s)&&(s=new FormData(s)),Ve.isFormData(s))return i?JSON.stringify(N4(s)):s;if(Ve.isArrayBuffer(s)||Ve.isBuffer(s)||Ve.isStream(s)||Ve.isFile(s)||Ve.isBlob(s)||Ve.isReadableStream(s))return s;if(Ve.isArrayBufferView(s))return s.buffer;if(Ve.isURLSearchParams(s))return a.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),s.toString();let u;if(o){if(r.indexOf("application/x-www-form-urlencoded")>-1)return AO(s,this.formSerializer).toString();if((u=Ve.isFileList(s))||r.indexOf("multipart/form-data")>-1){const f=this.env&&this.env.FormData;return zf(u?{"files[]":s}:s,f&&new f,this.formSerializer)}}return o||i?(a.setContentType("application/json",!1),OO(s)):s}],transformResponse:[function(s){const a=this.transitional||Ju.transitional,r=a&&a.forcedJSONParsing,i=this.responseType==="json";if(Ve.isResponse(s)||Ve.isReadableStream(s))return s;if(s&&Ve.isString(s)&&(r&&!this.responseType||i)){const c=!(a&&a.silentJSONParsing)&&i;try{return JSON.parse(s,this.parseReviver)}catch(u){if(c)throw u.name==="SyntaxError"?ls.from(u,ls.ERR_BAD_RESPONSE,this,null,this.response):u}}return s}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:kr.classes.FormData,Blob:kr.classes.Blob},validateStatus:function(s){return s>=200&&s<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Ve.forEach(["delete","get","head","post","put","patch"],t=>{Ju.headers[t]={}});const RO=Ve.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),PO=t=>{const s={};let a,r,i;return t&&t.split(`
`).forEach(function(c){i=c.indexOf(":"),a=c.substring(0,i).trim().toLowerCase(),r=c.substring(i+1).trim(),!(!a||s[a]&&RO[a])&&(a==="set-cookie"?s[a]?s[a].push(r):s[a]=[r]:s[a]=s[a]?s[a]+", "+r:r)}),s},Kb=Symbol("internals");function ou(t){return t&&String(t).trim().toLowerCase()}function qh(t){return t===!1||t==null?t:Ve.isArray(t)?t.map(qh):String(t)}function MO(t){const s=Object.create(null),a=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=a.exec(t);)s[r[1]]=r[2];return s}const FO=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function w0(t,s,a,r,i){if(Ve.isFunction(r))return r.call(this,s,a);if(i&&(s=a),!!Ve.isString(s)){if(Ve.isString(r))return s.indexOf(r)!==-1;if(Ve.isRegExp(r))return r.test(s)}}function IO(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(s,a,r)=>a.toUpperCase()+r)}function LO(t,s){const a=Ve.toCamelCase(" "+s);["get","set","has"].forEach(r=>{Object.defineProperty(t,r+a,{value:function(i,o,c){return this[r].call(this,s,i,o,c)},configurable:!0})})}let Zr=class{constructor(s){s&&this.set(s)}set(s,a,r){const i=this;function o(u,f,x){const h=ou(f);if(!h)throw new Error("header name must be a non-empty string");const p=Ve.findKey(i,h);(!p||i[p]===void 0||x===!0||x===void 0&&i[p]!==!1)&&(i[p||f]=qh(u))}const c=(u,f)=>Ve.forEach(u,(x,h)=>o(x,h,f));if(Ve.isPlainObject(s)||s instanceof this.constructor)c(s,a);else if(Ve.isString(s)&&(s=s.trim())&&!FO(s))c(PO(s),a);else if(Ve.isObject(s)&&Ve.isIterable(s)){let u={},f,x;for(const h of s){if(!Ve.isArray(h))throw TypeError("Object iterator must return a key-value pair");u[x=h[0]]=(f=u[x])?Ve.isArray(f)?[...f,h[1]]:[f,h[1]]:h[1]}c(u,a)}else s!=null&&o(a,s,r);return this}get(s,a){if(s=ou(s),s){const r=Ve.findKey(this,s);if(r){const i=this[r];if(!a)return i;if(a===!0)return MO(i);if(Ve.isFunction(a))return a.call(this,i,r);if(Ve.isRegExp(a))return a.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(s,a){if(s=ou(s),s){const r=Ve.findKey(this,s);return!!(r&&this[r]!==void 0&&(!a||w0(this,this[r],r,a)))}return!1}delete(s,a){const r=this;let i=!1;function o(c){if(c=ou(c),c){const u=Ve.findKey(r,c);u&&(!a||w0(r,r[u],u,a))&&(delete r[u],i=!0)}}return Ve.isArray(s)?s.forEach(o):o(s),i}clear(s){const a=Object.keys(this);let r=a.length,i=!1;for(;r--;){const o=a[r];(!s||w0(this,this[o],o,s,!0))&&(delete this[o],i=!0)}return i}normalize(s){const a=this,r={};return Ve.forEach(this,(i,o)=>{const c=Ve.findKey(r,o);if(c){a[c]=qh(i),delete a[o];return}const u=s?IO(o):String(o).trim();u!==o&&delete a[o],a[u]=qh(i),r[u]=!0}),this}concat(...s){return this.constructor.concat(this,...s)}toJSON(s){const a=Object.create(null);return Ve.forEach(this,(r,i)=>{r!=null&&r!==!1&&(a[i]=s&&Ve.isArray(r)?r.join(", "):r)}),a}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([s,a])=>s+": "+a).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(s){return s instanceof this?s:new this(s)}static concat(s,...a){const r=new this(s);return a.forEach(i=>r.set(i)),r}static accessor(s){const r=(this[Kb]=this[Kb]={accessors:{}}).accessors,i=this.prototype;function o(c){const u=ou(c);r[u]||(LO(i,c),r[u]=!0)}return Ve.isArray(s)?s.forEach(o):o(s),this}};Zr.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Ve.reduceDescriptors(Zr.prototype,({value:t},s)=>{let a=s[0].toUpperCase()+s.slice(1);return{get:()=>t,set(r){this[a]=r}}});Ve.freezeMethods(Zr);function S0(t,s){const a=this||Ju,r=s||a,i=Zr.from(r.headers);let o=r.data;return Ve.forEach(t,function(u){o=u.call(a,o,i.normalize(),s?s.status:void 0)}),i.normalize(),o}function b4(t){return!!(t&&t.__CANCEL__)}function id(t,s,a){ls.call(this,t??"canceled",ls.ERR_CANCELED,s,a),this.name="CanceledError"}Ve.inherits(id,ls,{__CANCEL__:!0});function w4(t,s,a){const r=a.config.validateStatus;!a.status||!r||r(a.status)?t(a):s(new ls("Request failed with status code "+a.status,[ls.ERR_BAD_REQUEST,ls.ERR_BAD_RESPONSE][Math.floor(a.status/100)-4],a.config,a.request,a))}function BO(t){const s=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return s&&s[1]||""}function zO(t,s){t=t||10;const a=new Array(t),r=new Array(t);let i=0,o=0,c;return s=s!==void 0?s:1e3,function(f){const x=Date.now(),h=r[o];c||(c=x),a[i]=f,r[i]=x;let p=o,g=0;for(;p!==i;)g+=a[p++],p=p%t;if(i=(i+1)%t,i===o&&(o=(o+1)%t),x-c<s)return;const b=h&&x-h;return b?Math.round(g*1e3/b):void 0}}function UO(t,s){let a=0,r=1e3/s,i,o;const c=(x,h=Date.now())=>{a=h,i=null,o&&(clearTimeout(o),o=null),t(...x)};return[(...x)=>{const h=Date.now(),p=h-a;p>=r?c(x,h):(i=x,o||(o=setTimeout(()=>{o=null,c(i)},r-p)))},()=>i&&c(i)]}const cf=(t,s,a=3)=>{let r=0;const i=zO(50,250);return UO(o=>{const c=o.loaded,u=o.lengthComputable?o.total:void 0,f=c-r,x=i(f),h=c<=u;r=c;const p={loaded:c,total:u,progress:u?c/u:void 0,bytes:f,rate:x||void 0,estimated:x&&u&&h?(u-c)/x:void 0,event:o,lengthComputable:u!=null,[s?"download":"upload"]:!0};t(p)},a)},Yb=(t,s)=>{const a=t!=null;return[r=>s[0]({lengthComputable:a,total:t,loaded:r}),s[1]]},Xb=t=>(...s)=>Ve.asap(()=>t(...s)),VO=kr.hasStandardBrowserEnv?((t,s)=>a=>(a=new URL(a,kr.origin),t.protocol===a.protocol&&t.host===a.host&&(s||t.port===a.port)))(new URL(kr.origin),kr.navigator&&/(msie|trident)/i.test(kr.navigator.userAgent)):()=>!0,$O=kr.hasStandardBrowserEnv?{write(t,s,a,r,i,o){const c=[t+"="+encodeURIComponent(s)];Ve.isNumber(a)&&c.push("expires="+new Date(a).toGMTString()),Ve.isString(r)&&c.push("path="+r),Ve.isString(i)&&c.push("domain="+i),o===!0&&c.push("secure"),document.cookie=c.join("; ")},read(t){const s=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return s?decodeURIComponent(s[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function HO(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function WO(t,s){return s?t.replace(/\/?\/$/,"")+"/"+s.replace(/^\/+/,""):t}function S4(t,s,a){let r=!HO(s);return t&&(r||a==!1)?WO(t,s):s}const Qb=t=>t instanceof Zr?{...t}:t;function Do(t,s){s=s||{};const a={};function r(x,h,p,g){return Ve.isPlainObject(x)&&Ve.isPlainObject(h)?Ve.merge.call({caseless:g},x,h):Ve.isPlainObject(h)?Ve.merge({},h):Ve.isArray(h)?h.slice():h}function i(x,h,p,g){if(Ve.isUndefined(h)){if(!Ve.isUndefined(x))return r(void 0,x,p,g)}else return r(x,h,p,g)}function o(x,h){if(!Ve.isUndefined(h))return r(void 0,h)}function c(x,h){if(Ve.isUndefined(h)){if(!Ve.isUndefined(x))return r(void 0,x)}else return r(void 0,h)}function u(x,h,p){if(p in s)return r(x,h);if(p in t)return r(void 0,x)}const f={url:o,method:o,data:o,baseURL:c,transformRequest:c,transformResponse:c,paramsSerializer:c,timeout:c,timeoutMessage:c,withCredentials:c,withXSRFToken:c,adapter:c,responseType:c,xsrfCookieName:c,xsrfHeaderName:c,onUploadProgress:c,onDownloadProgress:c,decompress:c,maxContentLength:c,maxBodyLength:c,beforeRedirect:c,transport:c,httpAgent:c,httpsAgent:c,cancelToken:c,socketPath:c,responseEncoding:c,validateStatus:u,headers:(x,h,p)=>i(Qb(x),Qb(h),p,!0)};return Ve.forEach(Object.keys({...t,...s}),function(h){const p=f[h]||i,g=p(t[h],s[h],h);Ve.isUndefined(g)&&p!==u||(a[h]=g)}),a}const C4=t=>{const s=Do({},t);let{data:a,withXSRFToken:r,xsrfHeaderName:i,xsrfCookieName:o,headers:c,auth:u}=s;if(s.headers=c=Zr.from(c),s.url=j4(S4(s.baseURL,s.url,s.allowAbsoluteUrls),t.params,t.paramsSerializer),u&&c.set("Authorization","Basic "+btoa((u.username||"")+":"+(u.password?unescape(encodeURIComponent(u.password)):""))),Ve.isFormData(a)){if(kr.hasStandardBrowserEnv||kr.hasStandardBrowserWebWorkerEnv)c.setContentType(void 0);else if(Ve.isFunction(a.getHeaders)){const f=a.getHeaders(),x=["content-type","content-length"];Object.entries(f).forEach(([h,p])=>{x.includes(h.toLowerCase())&&c.set(h,p)})}}if(kr.hasStandardBrowserEnv&&(r&&Ve.isFunction(r)&&(r=r(s)),r||r!==!1&&VO(s.url))){const f=i&&o&&$O.read(o);f&&c.set(i,f)}return s},GO=typeof XMLHttpRequest<"u",qO=GO&&function(t){return new Promise(function(a,r){const i=C4(t);let o=i.data;const c=Zr.from(i.headers).normalize();let{responseType:u,onUploadProgress:f,onDownloadProgress:x}=i,h,p,g,b,N;function y(){b&&b(),N&&N(),i.cancelToken&&i.cancelToken.unsubscribe(h),i.signal&&i.signal.removeEventListener("abort",h)}let S=new XMLHttpRequest;S.open(i.method.toUpperCase(),i.url,!0),S.timeout=i.timeout;function C(){if(!S)return;const _=Zr.from("getAllResponseHeaders"in S&&S.getAllResponseHeaders()),U={data:!u||u==="text"||u==="json"?S.responseText:S.response,status:S.status,statusText:S.statusText,headers:_,config:t,request:S};w4(function(k){a(k),y()},function(k){r(k),y()},U),S=null}"onloadend"in S?S.onloadend=C:S.onreadystatechange=function(){!S||S.readyState!==4||S.status===0&&!(S.responseURL&&S.responseURL.indexOf("file:")===0)||setTimeout(C)},S.onabort=function(){S&&(r(new ls("Request aborted",ls.ECONNABORTED,t,S)),S=null)},S.onerror=function(G){const U=G&&G.message?G.message:"Network Error",F=new ls(U,ls.ERR_NETWORK,t,S);F.event=G||null,r(F),S=null},S.ontimeout=function(){let G=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const U=i.transitional||y4;i.timeoutErrorMessage&&(G=i.timeoutErrorMessage),r(new ls(G,U.clarifyTimeoutError?ls.ETIMEDOUT:ls.ECONNABORTED,t,S)),S=null},o===void 0&&c.setContentType(null),"setRequestHeader"in S&&Ve.forEach(c.toJSON(),function(G,U){S.setRequestHeader(U,G)}),Ve.isUndefined(i.withCredentials)||(S.withCredentials=!!i.withCredentials),u&&u!=="json"&&(S.responseType=i.responseType),x&&([g,N]=cf(x,!0),S.addEventListener("progress",g)),f&&S.upload&&([p,b]=cf(f),S.upload.addEventListener("progress",p),S.upload.addEventListener("loadend",b)),(i.cancelToken||i.signal)&&(h=_=>{S&&(r(!_||_.type?new id(null,t,S):_),S.abort(),S=null)},i.cancelToken&&i.cancelToken.subscribe(h),i.signal&&(i.signal.aborted?h():i.signal.addEventListener("abort",h)));const T=BO(i.url);if(T&&kr.protocols.indexOf(T)===-1){r(new ls("Unsupported protocol "+T+":",ls.ERR_BAD_REQUEST,t));return}S.send(o||null)})},KO=(t,s)=>{const{length:a}=t=t?t.filter(Boolean):[];if(s||a){let r=new AbortController,i;const o=function(x){if(!i){i=!0,u();const h=x instanceof Error?x:this.reason;r.abort(h instanceof ls?h:new id(h instanceof Error?h.message:h))}};let c=s&&setTimeout(()=>{c=null,o(new ls(`timeout ${s} of ms exceeded`,ls.ETIMEDOUT))},s);const u=()=>{t&&(c&&clearTimeout(c),c=null,t.forEach(x=>{x.unsubscribe?x.unsubscribe(o):x.removeEventListener("abort",o)}),t=null)};t.forEach(x=>x.addEventListener("abort",o));const{signal:f}=r;return f.unsubscribe=()=>Ve.asap(u),f}},YO=function*(t,s){let a=t.byteLength;if(a<s){yield t;return}let r=0,i;for(;r<a;)i=r+s,yield t.slice(r,i),r=i},XO=async function*(t,s){for await(const a of QO(t))yield*YO(a,s)},QO=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const s=t.getReader();try{for(;;){const{done:a,value:r}=await s.read();if(a)break;yield r}}finally{await s.cancel()}},Zb=(t,s,a,r)=>{const i=XO(t,s);let o=0,c,u=f=>{c||(c=!0,r&&r(f))};return new ReadableStream({async pull(f){try{const{done:x,value:h}=await i.next();if(x){u(),f.close();return}let p=h.byteLength;if(a){let g=o+=p;a(g)}f.enqueue(new Uint8Array(h))}catch(x){throw u(x),x}},cancel(f){return u(f),i.return()}},{highWaterMark:2})},Jb=64*1024,{isFunction:_h}=Ve,ZO=(({Request:t,Response:s})=>({Request:t,Response:s}))(Ve.global),{ReadableStream:ew,TextEncoder:tw}=Ve.global,sw=(t,...s)=>{try{return!!t(...s)}catch{return!1}},JO=t=>{t=Ve.merge.call({skipUndefined:!0},ZO,t);const{fetch:s,Request:a,Response:r}=t,i=s?_h(s):typeof fetch=="function",o=_h(a),c=_h(r);if(!i)return!1;const u=i&&_h(ew),f=i&&(typeof tw=="function"?(N=>y=>N.encode(y))(new tw):async N=>new Uint8Array(await new a(N).arrayBuffer())),x=o&&u&&sw(()=>{let N=!1;const y=new a(kr.origin,{body:new ew,method:"POST",get duplex(){return N=!0,"half"}}).headers.has("Content-Type");return N&&!y}),h=c&&u&&sw(()=>Ve.isReadableStream(new r("").body)),p={stream:h&&(N=>N.body)};i&&["text","arrayBuffer","blob","formData","stream"].forEach(N=>{!p[N]&&(p[N]=(y,S)=>{let C=y&&y[N];if(C)return C.call(y);throw new ls(`Response type '${N}' is not supported`,ls.ERR_NOT_SUPPORT,S)})});const g=async N=>{if(N==null)return 0;if(Ve.isBlob(N))return N.size;if(Ve.isSpecCompliantForm(N))return(await new a(kr.origin,{method:"POST",body:N}).arrayBuffer()).byteLength;if(Ve.isArrayBufferView(N)||Ve.isArrayBuffer(N))return N.byteLength;if(Ve.isURLSearchParams(N)&&(N=N+""),Ve.isString(N))return(await f(N)).byteLength},b=async(N,y)=>{const S=Ve.toFiniteNumber(N.getContentLength());return S??g(y)};return async N=>{let{url:y,method:S,data:C,signal:T,cancelToken:_,timeout:G,onDownloadProgress:U,onUploadProgress:F,responseType:k,headers:E,withCredentials:A="same-origin",fetchOptions:B}=C4(N),H=s||fetch;k=k?(k+"").toLowerCase():"text";let M=KO([T,_&&_.toAbortSignal()],G),q=null;const L=M&&M.unsubscribe&&(()=>{M.unsubscribe()});let re;try{if(F&&x&&S!=="get"&&S!=="head"&&(re=await b(E,C))!==0){let Z=new a(y,{method:"POST",body:C,duplex:"half"}),I;if(Ve.isFormData(C)&&(I=Z.headers.get("content-type"))&&E.setContentType(I),Z.body){const[Q,O]=Yb(re,cf(Xb(F)));C=Zb(Z.body,Jb,Q,O)}}Ve.isString(A)||(A=A?"include":"omit");const V=o&&"credentials"in a.prototype,ee={...B,signal:M,method:S.toUpperCase(),headers:E.normalize().toJSON(),body:C,duplex:"half",credentials:V?A:void 0};q=o&&new a(y,ee);let me=await(o?H(q,B):H(y,ee));const W=h&&(k==="stream"||k==="response");if(h&&(U||W&&L)){const Z={};["status","statusText","headers"].forEach(te=>{Z[te]=me[te]});const I=Ve.toFiniteNumber(me.headers.get("content-length")),[Q,O]=U&&Yb(I,cf(Xb(U),!0))||[];me=new r(Zb(me.body,Jb,Q,()=>{O&&O(),L&&L()}),Z)}k=k||"text";let se=await p[Ve.findKey(p,k)||"text"](me,N);return!W&&L&&L(),await new Promise((Z,I)=>{w4(Z,I,{data:se,headers:Zr.from(me.headers),status:me.status,statusText:me.statusText,config:N,request:q})})}catch(V){throw L&&L(),V&&V.name==="TypeError"&&/Load failed|fetch/i.test(V.message)?Object.assign(new ls("Network Error",ls.ERR_NETWORK,N,q),{cause:V.cause||V}):ls.from(V,V&&V.code,N,q)}}},eR=new Map,T4=t=>{let s=t?t.env:{};const{fetch:a,Request:r,Response:i}=s,o=[r,i,a];let c=o.length,u=c,f,x,h=eR;for(;u--;)f=o[u],x=h.get(f),x===void 0&&h.set(f,x=u?new Map:JO(s)),h=x;return x};T4();const yg={http:gO,xhr:qO,fetch:{get:T4}};Ve.forEach(yg,(t,s)=>{if(t){try{Object.defineProperty(t,"name",{value:s})}catch{}Object.defineProperty(t,"adapterName",{value:s})}});const aw=t=>`- ${t}`,tR=t=>Ve.isFunction(t)||t===null||t===!1,k4={getAdapter:(t,s)=>{t=Ve.isArray(t)?t:[t];const{length:a}=t;let r,i;const o={};for(let c=0;c<a;c++){r=t[c];let u;if(i=r,!tR(r)&&(i=yg[(u=String(r)).toLowerCase()],i===void 0))throw new ls(`Unknown adapter '${u}'`);if(i&&(Ve.isFunction(i)||(i=i.get(s))))break;o[u||"#"+c]=i}if(!i){const c=Object.entries(o).map(([f,x])=>`adapter ${f} `+(x===!1?"is not supported by the environment":"is not available in the build"));let u=a?c.length>1?`since :
`+c.map(aw).join(`
`):" "+aw(c[0]):"as no adapter specified";throw new ls("There is no suitable adapter to dispatch the request "+u,"ERR_NOT_SUPPORT")}return i},adapters:yg};function C0(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new id(null,t)}function rw(t){return C0(t),t.headers=Zr.from(t.headers),t.data=S0.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),k4.getAdapter(t.adapter||Ju.adapter,t)(t).then(function(r){return C0(t),r.data=S0.call(t,t.transformResponse,r),r.headers=Zr.from(r.headers),r},function(r){return b4(r)||(C0(t),r&&r.response&&(r.response.data=S0.call(t,t.transformResponse,r.response),r.response.headers=Zr.from(r.response.headers))),Promise.reject(r)})}const E4="1.12.2",Uf={};["object","boolean","number","function","string","symbol"].forEach((t,s)=>{Uf[t]=function(r){return typeof r===t||"a"+(s<1?"n ":" ")+t}});const nw={};Uf.transitional=function(s,a,r){function i(o,c){return"[Axios v"+E4+"] Transitional option '"+o+"'"+c+(r?". "+r:"")}return(o,c,u)=>{if(s===!1)throw new ls(i(c," has been removed"+(a?" in "+a:"")),ls.ERR_DEPRECATED);return a&&!nw[c]&&(nw[c]=!0,console.warn(i(c," has been deprecated since v"+a+" and will be removed in the near future"))),s?s(o,c,u):!0}};Uf.spelling=function(s){return(a,r)=>(console.warn(`${r} is likely a misspelling of ${s}`),!0)};function sR(t,s,a){if(typeof t!="object")throw new ls("options must be an object",ls.ERR_BAD_OPTION_VALUE);const r=Object.keys(t);let i=r.length;for(;i-- >0;){const o=r[i],c=s[o];if(c){const u=t[o],f=u===void 0||c(u,o,t);if(f!==!0)throw new ls("option "+o+" must be "+f,ls.ERR_BAD_OPTION_VALUE);continue}if(a!==!0)throw new ls("Unknown option "+o,ls.ERR_BAD_OPTION)}}const Kh={assertOptions:sR,validators:Uf},ci=Kh.validators;let So=class{constructor(s){this.defaults=s||{},this.interceptors={request:new qb,response:new qb}}async request(s,a){try{return await this._request(s,a)}catch(r){if(r instanceof Error){let i={};Error.captureStackTrace?Error.captureStackTrace(i):i=new Error;const o=i.stack?i.stack.replace(/^.+\n/,""):"";try{r.stack?o&&!String(r.stack).endsWith(o.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+o):r.stack=o}catch{}}throw r}}_request(s,a){typeof s=="string"?(a=a||{},a.url=s):a=s||{},a=Do(this.defaults,a);const{transitional:r,paramsSerializer:i,headers:o}=a;r!==void 0&&Kh.assertOptions(r,{silentJSONParsing:ci.transitional(ci.boolean),forcedJSONParsing:ci.transitional(ci.boolean),clarifyTimeoutError:ci.transitional(ci.boolean)},!1),i!=null&&(Ve.isFunction(i)?a.paramsSerializer={serialize:i}:Kh.assertOptions(i,{encode:ci.function,serialize:ci.function},!0)),a.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?a.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:a.allowAbsoluteUrls=!0),Kh.assertOptions(a,{baseUrl:ci.spelling("baseURL"),withXsrfToken:ci.spelling("withXSRFToken")},!0),a.method=(a.method||this.defaults.method||"get").toLowerCase();let c=o&&Ve.merge(o.common,o[a.method]);o&&Ve.forEach(["delete","get","head","post","put","patch","common"],N=>{delete o[N]}),a.headers=Zr.concat(c,o);const u=[];let f=!0;this.interceptors.request.forEach(function(y){typeof y.runWhen=="function"&&y.runWhen(a)===!1||(f=f&&y.synchronous,u.unshift(y.fulfilled,y.rejected))});const x=[];this.interceptors.response.forEach(function(y){x.push(y.fulfilled,y.rejected)});let h,p=0,g;if(!f){const N=[rw.bind(this),void 0];for(N.unshift(...u),N.push(...x),g=N.length,h=Promise.resolve(a);p<g;)h=h.then(N[p++],N[p++]);return h}g=u.length;let b=a;for(;p<g;){const N=u[p++],y=u[p++];try{b=N(b)}catch(S){y.call(this,S);break}}try{h=rw.call(this,b)}catch(N){return Promise.reject(N)}for(p=0,g=x.length;p<g;)h=h.then(x[p++],x[p++]);return h}getUri(s){s=Do(this.defaults,s);const a=S4(s.baseURL,s.url,s.allowAbsoluteUrls);return j4(a,s.params,s.paramsSerializer)}};Ve.forEach(["delete","get","head","options"],function(s){So.prototype[s]=function(a,r){return this.request(Do(r||{},{method:s,url:a,data:(r||{}).data}))}});Ve.forEach(["post","put","patch"],function(s){function a(r){return function(o,c,u){return this.request(Do(u||{},{method:s,headers:r?{"Content-Type":"multipart/form-data"}:{},url:o,data:c}))}}So.prototype[s]=a(),So.prototype[s+"Form"]=a(!0)});let aR=class A4{constructor(s){if(typeof s!="function")throw new TypeError("executor must be a function.");let a;this.promise=new Promise(function(o){a=o});const r=this;this.promise.then(i=>{if(!r._listeners)return;let o=r._listeners.length;for(;o-- >0;)r._listeners[o](i);r._listeners=null}),this.promise.then=i=>{let o;const c=new Promise(u=>{r.subscribe(u),o=u}).then(i);return c.cancel=function(){r.unsubscribe(o)},c},s(function(o,c,u){r.reason||(r.reason=new id(o,c,u),a(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(s){if(this.reason){s(this.reason);return}this._listeners?this._listeners.push(s):this._listeners=[s]}unsubscribe(s){if(!this._listeners)return;const a=this._listeners.indexOf(s);a!==-1&&this._listeners.splice(a,1)}toAbortSignal(){const s=new AbortController,a=r=>{s.abort(r)};return this.subscribe(a),s.signal.unsubscribe=()=>this.unsubscribe(a),s.signal}static source(){let s;return{token:new A4(function(i){s=i}),cancel:s}}};function rR(t){return function(a){return t.apply(null,a)}}function nR(t){return Ve.isObject(t)&&t.isAxiosError===!0}const Ng={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Ng).forEach(([t,s])=>{Ng[s]=t});function _4(t){const s=new So(t),a=l4(So.prototype.request,s);return Ve.extend(a,So.prototype,s,{allOwnKeys:!0}),Ve.extend(a,s,null,{allOwnKeys:!0}),a.create=function(i){return _4(Do(t,i))},a}const Fa=_4(Ju);Fa.Axios=So;Fa.CanceledError=id;Fa.CancelToken=aR;Fa.isCancel=b4;Fa.VERSION=E4;Fa.toFormData=zf;Fa.AxiosError=ls;Fa.Cancel=Fa.CanceledError;Fa.all=function(s){return Promise.all(s)};Fa.spread=rR;Fa.isAxiosError=nR;Fa.mergeConfig=Do;Fa.AxiosHeaders=Zr;Fa.formToJSON=t=>N4(Ve.isHTMLForm(t)?new FormData(t):t);Fa.getAdapter=k4.getAdapter;Fa.HttpStatusCode=Ng;Fa.default=Fa;const{Axios:HK,AxiosError:WK,CanceledError:GK,isCancel:qK,CancelToken:KK,VERSION:YK,all:XK,Cancel:QK,isAxiosError:ZK,spread:JK,toFormData:eY,AxiosHeaders:tY,HttpStatusCode:sY,formToJSON:aY,getAdapter:rY,mergeConfig:nY}=Fa,ye=Fa.create({baseURL:"http://localhost:5000/api",headers:{"Content-Type":"application/json"},timeout:1e4});ye.interceptors.request.use(t=>{const a=t.url?.includes("/customers/")||t.url?.includes("/public/orders")||t.url?.includes("/public/appointments")?localStorage.getItem("customerToken"):localStorage.getItem("token");return a&&(t.headers.Authorization=`Bearer ${a}`),t},t=>Promise.reject(t));ye.interceptors.response.use(t=>t,t=>{if(t.code==="ECONNABORTED"||t.message.includes("timeout"))D.error("Request timeout. Please check your connection.");else if(t.code==="ERR_NETWORK"||t.message.includes("Network Error"))D.error("Network error. Please check if the server is running.");else if(t.response){const s=t.response.status,a=t.config?.url?.includes("/customers/")||t.config?.url?.includes("/customer/");if(s===401)if(a){const r=t.response?.data?.requiresLogin,i=t.response?.data?.expired;(r||i)&&(localStorage.removeItem("customerToken"),localStorage.removeItem("customerData"),i&&D.error("Session expired. Please log in again."),console.log("Customer auth error - let component handle redirect"))}else localStorage.removeItem("token"),window.location.pathname!=="/loginpage"&&(window.location.href="/loginpage");else s===403?D.error("Access denied."):s===404?console.log("Resource not found:",t.config?.url):s>=500&&D.error("Server error. Please try again later.")}return Promise.reject(t)});const Yh={register:t=>ye.post("/customers/auth/register",t),login:t=>ye.post("/customers/auth/login",t),getProfile:()=>ye.get("/customers/auth/profile"),updateProfile:t=>ye.put("/customers/auth/profile",t),changePassword:t=>ye.put("/customers/auth/change-password",t),forgotPassword:t=>ye.post("/customers/auth/forgot-password",{email:t}),resetPassword:t=>ye.post("/customers/auth/reset-password",t),verifyEmail:t=>ye.get(`/customers/auth/verify-email/${t}`),getMyOrders:t=>ye.get("/customers/orders",{params:t}),getOrderDetails:t=>ye.get(`/customers/orders/${t}`),getMyBookings:t=>ye.get("/customers/bookings",{params:t}),getBookingDetails:t=>ye.get(`/customers/bookings/${t}`),cancelBooking:(t,s)=>ye.put(`/customers/bookings/${t}/cancel`,{reason:s}),getMessages:t=>ye.get("/customers/messages",{params:t}),sendMessage:t=>ye.post("/customers/messages",t),markAsRead:t=>ye.put(`/customers/messages/${t}/read`)},D4=v.createContext(),Es=()=>v.useContext(D4),iR=({children:t})=>{const[s,a]=v.useState(null),[r,i]=v.useState(!1),[o,c]=v.useState(!0);v.useEffect(()=>{const h=localStorage.getItem("token");h?ye.get("/auth/profile",{headers:{Authorization:`Bearer ${h}`}}).then(p=>{a(p.data),i(!0)}).catch(p=>{console.error("Error checking authentication:",p),p.response&&p.response.status===401&&localStorage.removeItem("token"),i(!1)}).finally(()=>{c(!1)}):c(!1)},[]);const x={user:s,isAuthenticated:r,loading:o,login:async(h,p)=>{try{const g=await ye.post("/auth/login",{email:h,password:p}),{token:b,user:N}=g.data;return localStorage.setItem("token",b),a(N),i(!0),window.dispatchEvent(new CustomEvent("userLoggedIn",{detail:{user:N}})),{success:!0}}catch(g){return console.error("Login failed",g),{success:!1,error:g.response?.data?.message||"Login failed. Please try again."}}},logout:()=>{localStorage.removeItem("token"),a(null),i(!1)}};return o?e.jsx("div",{children:"Loading..."}):e.jsx(D4.Provider,{value:x,children:t})};function lR({className:t,...s}){const{login:a}=Es(),[r,i]=v.useState(""),[o,c]=v.useState(""),[u,f]=v.useState(!1),[x,h]=v.useState(!1),[p,g]=v.useState(!1),[b,N]=v.useState(""),[y,S]=v.useState(!1),[C,T]=v.useState(null),_=Ka(),G=async E=>{if(E.preventDefault(),h(!0),!r||!o){D.error("Please enter both email and password."),h(!1);return}try{const A=await a(r,o);A.success?(D.success("Login successful! Welcome to ominbiz Pro."),_("/dashboard"),window.location.reload()):D.error(A.error||"Login failed. Please try again.")}finally{h(!1)}},U=async E=>{if(E.preventDefault(),!b){D.error("Please enter your email address.");return}S(!0);try{await ye.post("/auth/forgot-password",{email:b}),D.success("Password reset link sent! Check your email."),g(!1),N("")}catch(A){D.error(A.response?.data?.message||"Failed to send reset link. Please try again.")}finally{S(!1)}},F=async()=>{T("google");try{const E=`${window.location.origin}/auth/google/callback`,A="YOUR_GOOGLE_CLIENT_ID";window.location.href="http://localhost:5000/api/auth/google"}catch{D.error("Google login failed. Please try again."),T(null)}},k=async()=>{T("github");try{const E=`${window.location.origin}/auth/github/callback`,A="YOUR_GITHUB_CLIENT_ID";window.location.href="http://localhost:5000/api/auth/github"}catch{D.error("GitHub login failed. Please try again."),T(null)}};return e.jsxs("div",{className:Je("flex flex-col gap-6 relative",t),...s,children:[e.jsxs("div",{className:"absolute inset-0 -z-10 overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 left-0 w-64 h-64 bg-primary/10 rounded-full blur-3xl animate-pulse"}),e.jsx("div",{className:"absolute bottom-0 right-0 w-96 h-96 bg-accent/10 rounded-full blur-3xl animate-pulse",style:{animationDelay:"1s"}})]}),e.jsxs("div",{className:"text-center mb-4 animate-in fade-in slide-in-from-top-4 duration-700",children:[e.jsxs("div",{className:"inline-flex items-center gap-2 mb-2",children:[e.jsx(Mn,{className:"h-8 w-8 text-primary animate-pulse"}),e.jsx("h1",{className:"text-4xl font-bold text-primary",children:"ominbiz"})]}),e.jsx("p",{className:"text-muted-foreground text-sm",children:"Business Management Platform"})]}),e.jsxs(K,{className:"border-2 shadow-2xl backdrop-blur-sm bg-card/95 animate-in fade-in slide-in-from-bottom-4 duration-700",children:[e.jsxs(pe,{className:"space-y-2",children:[e.jsxs(ge,{className:"text-2xl font-bold flex items-center gap-2",children:[e.jsx(af,{className:"h-6 w-6 text-primary"}),"Welcome Back"]}),e.jsx(lt,{className:"text-base",children:"Enter your credentials to access your account"})]}),e.jsx(X,{children:e.jsxs("form",{onSubmit:G,children:[e.jsxs("div",{className:"flex flex-col gap-5",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(ae,{htmlFor:"email",className:"text-sm font-medium",children:"Email Address"}),e.jsxs("div",{className:"relative",children:[e.jsx(Gs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(fe,{id:"email",type:"email",value:r,onChange:E=>i(E.target.value),placeholder:"you@example.com",required:!0,className:"pl-10 h-11 transition-all allow-select"})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(ae,{htmlFor:"password",className:"text-sm font-medium",children:"Password"}),e.jsx(R,{type:"button",variant:"link",onClick:()=>g(!0),className:"text-xs text-primary hover:text-primary/80 p-0 h-auto",children:"Forgot password?"})]}),e.jsxs("div",{className:"relative",children:[e.jsx(vr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(fe,{id:"password",type:u?"text":"password",value:o,onChange:E=>c(E.target.value),required:!0,className:"pl-10 pr-10 h-11 transition-all allow-select"}),e.jsx(R,{type:"button",variant:"ghost",size:"icon",className:"absolute right-1 top-1/2 transform -translate-y-1/2 h-8 w-8",onClick:()=>f(!u),children:u?e.jsx(Eo,{className:"h-4 w-4"}):e.jsx(la,{className:"h-4 w-4"})})]})]}),e.jsx(R,{type:"submit",className:"w-full h-11 bg-primary hover:bg-primary/90 transition-all shadow-lg hover:shadow-xl group",disabled:x,children:x?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"h-4 w-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Signing in..."]}):e.jsxs(e.Fragment,{children:["Sign in",e.jsx(fv,{className:"ml-2 h-4 w-4 group-hover:translate-x-1 transition-transform"})]})})]}),e.jsxs("div",{className:"relative my-6",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("span",{className:"w-full border-t"})}),e.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:e.jsx("span",{className:"bg-card px-2 text-muted-foreground",children:"Or continue with"})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs(R,{variant:"outline",type:"button",className:"h-10",onClick:F,disabled:x||C!==null,children:[C==="google"?e.jsx("div",{className:"h-4 w-4 border-2 border-current border-t-transparent rounded-full animate-spin mr-2"}):e.jsxs("svg",{className:"mr-2 h-4 w-4",viewBox:"0 0 24 24",children:[e.jsx("path",{d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z",fill:"#4285F4"}),e.jsx("path",{d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z",fill:"#34A853"}),e.jsx("path",{d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z",fill:"#FBBC05"}),e.jsx("path",{d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z",fill:"#EA4335"})]}),"Google"]}),e.jsxs(R,{variant:"outline",type:"button",className:"h-10",onClick:k,disabled:x||C!==null,children:[C==="github"?e.jsx("div",{className:"h-4 w-4 border-2 border-current border-t-transparent rounded-full animate-spin mr-2"}):e.jsx("svg",{className:"mr-2 h-4 w-4",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 0C4.477 0 0 4.484 0 10.017c0 4.425 2.865 8.18 6.839 9.504.5.092.682-.217.682-.483 0-.237-.008-.868-.013-1.703-2.782.605-3.369-1.343-3.369-1.343-.454-1.158-1.11-1.466-1.11-1.466-.908-.62.069-.608.069-.608 1.003.07 1.531 1.032 1.531 1.032.892 1.53 2.341 1.088 2.91.832.092-.647.35-1.088.636-1.338-2.22-.253-4.555-1.113-4.555-4.951 0-1.093.39-1.988 1.029-2.688-.103-.253-.446-1.272.098-2.65 0 0 .84-.27 2.75 1.026A9.564 9.564 0 0110 4.844c.85.004 1.705.115 2.504.337 1.909-1.296 2.747-1.027 2.747-1.027.546 1.379.203 2.398.1 2.651.64.7 1.028 1.595 1.028 2.688 0 3.848-2.339 4.695-4.566 4.942.359.31.678.921.678 1.856 0 1.338-.012 2.419-.012 2.747 0 .268.18.58.688.482A10.019 10.019 0 0020 10.017C20 4.484 15.522 0 10 0z",clipRule:"evenodd"})}),"GitHub"]})]}),e.jsxs("div",{className:"mt-6 text-center text-sm",children:["Don't have an account?"," ",e.jsx(Ht,{to:"/signup",className:"font-medium text-primary hover:underline",children:"Create account"})]})]})})]}),e.jsx(Ft,{open:p,onOpenChange:g,children:e.jsxs(It,{className:"sm:max-w-md",children:[e.jsxs(Lt,{children:[e.jsxs(Bt,{className:"flex items-center gap-2",children:[e.jsx(Gs,{className:"h-5 w-5 text-primary"}),"Reset Password"]}),e.jsx(es,{children:"Enter your email address and we'll send you a link to reset your password."})]}),e.jsxs("form",{onSubmit:U,children:[e.jsx("div",{className:"grid gap-4 py-4",children:e.jsxs("div",{className:"grid gap-2",children:[e.jsx(ae,{htmlFor:"reset-email",children:"Email Address"}),e.jsx(fe,{id:"reset-email",type:"email",placeholder:"you@example.com",value:b,onChange:E=>N(E.target.value),required:!0,className:"allow-select"})]})}),e.jsxs(Rs,{children:[e.jsx(R,{type:"button",variant:"outline",onClick:()=>g(!1),children:"Cancel"}),e.jsx(R,{type:"submit",disabled:y,children:y?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"h-4 w-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Sending..."]}):"Send Reset Link"})]})]})]})})]})}function oR(){return e.jsx("main",{className:"min-h-screen bg-background flex items-center justify-center px-4 py-12",children:e.jsx("div",{className:"w-full max-w-md",children:e.jsx(lR,{})})})}function cR({className:t,...s}){const[a,r]=v.useState({name:"",email:"",password:"",confirmPassword:"",phone:"",businessName:""}),[i,o]=v.useState(""),[c,u]=v.useState(!1),[f,x]=v.useState(!1),[h,p]=v.useState(!1),g=Ka(),b=y=>{const{id:S,value:C}=y.target;r(T=>({...T,[S]:C}))},N=async y=>{y.preventDefault(),u(!0),o("");const{name:S,email:C,password:T,confirmPassword:_,phone:G,businessName:U}=a;if(!S||!C||!T||!_||!G||!U){o("All fields are required."),D.error("All fields are required."),u(!1);return}if(T!==_){o("Passwords do not match."),D.error("Passwords do not match."),u(!1);return}try{const F=await ye.post("/auth/register",{name:S,email:C,password:T,phone:G,businessName:U});localStorage.setItem("token",F.data.token),localStorage.setItem("user",JSON.stringify(F.data.user)),D.success("Signup successful! Redirecting..."),g("/dashboard"),window.location.reload()}catch(F){const k=F.response?.data?.message||"Signup failed. Try again.";o(k),D.error(k)}finally{u(!1)}};return e.jsxs("div",{className:Je("flex flex-col gap-6 relative",t),...s,children:[e.jsxs("div",{className:"absolute inset-0 -z-10 overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 left-0 w-64 h-64 bg-primary/10 rounded-full blur-3xl animate-pulse"}),e.jsx("div",{className:"absolute bottom-0 right-0 w-96 h-96 bg-accent/10 rounded-full blur-3xl animate-pulse",style:{animationDelay:"1s"}})]}),e.jsxs("div",{className:"text-center mb-4 animate-in fade-in slide-in-from-top-4 duration-700",children:[e.jsxs("div",{className:"inline-flex items-center gap-2 mb-2",children:[e.jsx(Mn,{className:"h-8 w-8 text-primary animate-pulse"}),e.jsx("h1",{className:"text-4xl font-bold text-primary",children:"ominbiz"})]}),e.jsx("p",{className:"text-muted-foreground text-sm",children:"Business Management Platform"})]}),e.jsxs(K,{className:"border-2 shadow-2xl backdrop-blur-sm bg-card/95 animate-in fade-in slide-in-from-bottom-4 duration-700",children:[e.jsxs(pe,{className:"space-y-2",children:[e.jsxs(ge,{className:"text-2xl font-bold flex items-center gap-2",children:[e.jsx(bo,{className:"h-6 w-6 text-primary"}),"Create Your Account"]}),e.jsx(lt,{className:"text-base",children:"Enter your details below to get started"})]}),e.jsx(X,{children:e.jsxs("form",{onSubmit:N,children:[e.jsxs("div",{className:"flex flex-col gap-5",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(ae,{htmlFor:"name",className:"text-sm font-medium",children:"Full Name"}),e.jsxs("div",{className:"relative",children:[e.jsx(na,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(fe,{id:"name",type:"text",value:a.name,onChange:b,placeholder:"John Doe",required:!0,className:"pl-10 h-11 transition-all allow-select"})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(ae,{htmlFor:"email",className:"text-sm font-medium",children:"Email Address"}),e.jsxs("div",{className:"relative",children:[e.jsx(Gs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(fe,{id:"email",type:"email",value:a.email,onChange:b,placeholder:"you@example.com",required:!0,className:"pl-10 h-11 transition-all allow-select"})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(ae,{htmlFor:"phone",className:"text-sm font-medium",children:"Phone Number"}),e.jsxs("div",{className:"relative",children:[e.jsx($s,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(fe,{id:"phone",type:"tel",value:a.phone,onChange:b,placeholder:"+1 (555) 000-0000",required:!0,className:"pl-10 h-11 transition-all allow-select"})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(ae,{htmlFor:"businessName",className:"text-sm font-medium",children:"Business Name"}),e.jsxs("div",{className:"relative",children:[e.jsx(Ml,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(fe,{id:"businessName",type:"text",value:a.businessName,onChange:b,placeholder:"Your Business",required:!0,className:"pl-10 h-11 transition-all allow-select"})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(ae,{htmlFor:"password",className:"text-sm font-medium",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(vr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(fe,{id:"password",type:f?"text":"password",value:a.password,onChange:b,required:!0,className:"pl-10 pr-10 h-11 transition-all allow-select"}),e.jsx(R,{type:"button",variant:"ghost",size:"icon",className:"absolute right-1 top-1/2 transform -translate-y-1/2 h-8 w-8",onClick:()=>x(!f),children:f?e.jsx(Eo,{className:"h-4 w-4"}):e.jsx(la,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(ae,{htmlFor:"confirmPassword",className:"text-sm font-medium",children:"Confirm Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(vr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(fe,{id:"confirmPassword",type:h?"text":"password",value:a.confirmPassword,onChange:b,required:!0,className:"pl-10 pr-10 h-11 transition-all allow-select"}),e.jsx(R,{type:"button",variant:"ghost",size:"icon",className:"absolute right-1 top-1/2 transform -translate-y-1/2 h-8 w-8",onClick:()=>p(!h),children:h?e.jsx(Eo,{className:"h-4 w-4"}):e.jsx(la,{className:"h-4 w-4"})})]})]}),e.jsx(R,{type:"submit",className:"w-full h-11 bg-primary hover:bg-primary/90 transition-all shadow-lg hover:shadow-xl group",disabled:c,children:c?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"h-4 w-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Creating account..."]}):e.jsxs(e.Fragment,{children:["Sign up",e.jsx(fv,{className:"ml-2 h-4 w-4 group-hover:translate-x-1 transition-transform"})]})})]}),e.jsxs("div",{className:"mt-6 text-center text-sm",children:["Already have an account?"," ",e.jsx(Ht,{to:"/loginpage",className:"font-medium text-primary hover:underline",children:"Log in"})]})]})})]})]})}function dR(){return e.jsx("main",{className:"min-h-screen bg-background flex items-center justify-center px-4 py-12",children:e.jsx("div",{className:"w-full max-w-md",children:e.jsx(cR,{})})})}function uR(){return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-white px-4",children:e.jsxs("div",{className:"text-center border border-green-100 rounded-lg p-8 shadow-md max-w-md w-full",children:[e.jsx("h1",{className:"text-6xl font-bold text-green-600 mb-4",children:"404"}),e.jsx("p",{className:"text-lg text-green-700 mb-6",children:"Oops! Page not found."}),e.jsx(Ht,{to:"/",className:"inline-block bg-green-600 text-white px-4 py-2 rounded hover:bg-green-500 transition",children:"Go back home"})]})})}const mR=[{name:"Overview",href:"/dashboard",icon:er,section:"main"},{name:"Analytics",href:"/dashboard/analytics",icon:Is,section:"main"},{name:"Graphs",href:"/dashboard/graphs",icon:BS,section:"main"},{name:"Maps",href:"/dashboard/maps",icon:c_,section:"main"},{name:"Inventory",href:"/dashboard/inventory",icon:qt,section:"business"},{name:"Products",href:"/dashboard/products",icon:qt,section:"business"},{name:"E-Commerce",href:"/dashboard/ecommerce",icon:js,section:"business"},{name:"Discounts",href:"/dashboard/discounts",icon:Fl,section:"business"},{name:"Services",href:"/dashboard/services",icon:Ml,section:"business"},{name:"Appointments",href:"/dashboard/appointments",icon:ms,section:"business"},{name:"Finances",href:"/dashboard/finances",icon:ea,section:"business"},{name:"Purchasing",href:"/dashboard/purchasing",icon:js,section:"business"},{name:"Subscriptions",href:"/dashboard/subscriptions",icon:ha,section:"business"},{name:"Live Sessions",href:"/dashboard/sessions",icon:ka,section:"communication",badge:"New"},{name:"Messages",href:"/dashboard/messages",icon:Zs,section:"communication"},{name:"Live Support",href:"/dashboard/support",icon:Pf,section:"communication"},{name:"Team",href:"/dashboard/team",icon:Xt,section:"team"},{name:"AI Insights",href:"/dashboard/ai-insights",icon:pi,section:"team"},{name:"Locations",href:"/dashboard/locations",icon:Xr,section:"team"},{name:"Security",href:"/dashboard/security-dashboard",icon:ta,section:"security",badge:"AI"},{name:"Reports",href:"/dashboard/reports",icon:ya,section:"tools"},{name:"History",href:"/dashboard/history",icon:Dl,section:"tools"},{name:"Search",href:"/dashboard/search",icon:ia,section:"tools"},{name:"Learning Center",href:"/dashboard/resources",icon:hi,section:"tools"},{name:"UI Components",href:"/dashboard/gui",icon:d_,section:"tools"}];function hR(){const{user:t,isAuthenticated:s,logout:a}=Es(),r=hv(),i=Ka(),[o,c]=v.useState(!1),u=s?t?.name:"Guest",f=s?t?.name.split(" ").map(h=>h[0]).join(""):"G",x=()=>{a(),i("/")};return e.jsx("div",{className:Je("bg-card border-r border-border transition-all duration-300 shadow-sm",o?"w-16":"w-64"),children:e.jsxs("div",{className:"flex h-full flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-border",children:[!o&&e.jsxs(Ht,{to:"/dashboard",className:"flex items-center space-x-2",children:[e.jsx("img",{src:"https://2aa832b0f010801d3551c6c63b116063.cdn.bubble.io/cdn-cgi/image/w=48,h=48,f=auto,dpr=1,fit=contain/f1758225569468x933635082935872100/logo.webp",alt:""}),e.jsxs("span",{className:"text-xl font-bold text-primary",children:["Omin",e.jsx("span",{className:"text-accent",children:"Biz"})]})]}),e.jsx(R,{variant:"ghost",size:"icon",onClick:()=>c(!o),className:"h-8 w-8 text-primary hover:text-primary/80",children:o?e.jsx(o_,{className:"h-4 w-4"}):e.jsx(yr,{className:"h-4 w-4"})})]}),e.jsx("nav",{className:"flex-1 overflow-y-auto p-2 space-y-1",children:mR.map(h=>{if(h.adminOnly&&t?.role!=="admin"&&t?.role!=="super_admin")return null;const p=r.pathname===h.href;return e.jsxs(Ht,{to:h.href,className:Je("flex items-center px-3 py-2 rounded-lg text-sm font-medium transition-colors relative group",p?"bg-primary text-primary-foreground shadow-sm":"text-foreground hover:bg-accent hover:text-accent-foreground"),children:[e.jsx(h.icon,{className:Je("h-5 w-5 flex-shrink-0",o?"mx-auto":"mr-3")}),!o&&e.jsxs("div",{className:"flex items-center justify-between flex-1 min-w-0",children:[e.jsx("span",{className:"truncate",children:h.name}),h.badge&&e.jsx("span",{className:Je("ml-2 px-1.5 py-0.5 text-[10px] font-semibold rounded-full",p?"bg-primary-foreground text-primary":h.badge==="AI"?"bg-gradient-to-r from-purple-500 to-blue-500 text-white":"bg-green-500 text-white"),children:h.badge})]}),o&&h.badge&&e.jsx("span",{className:Je("absolute top-1 right-1 h-2 w-2 rounded-full",h.badge==="AI"?"bg-purple-500":"bg-green-500")})]},h.name)})}),e.jsxs("div",{className:"border-t border-border",children:[e.jsxs("div",{className:"p-2 space-y-1",children:[e.jsxs(Ht,{to:"/dashboard/settings",className:Je("flex items-center px-3 py-2 rounded-lg text-sm font-medium transition-colors",r.pathname==="/dashboard/settings"?"bg-primary text-primary-foreground shadow-sm":"text-foreground hover:bg-accent hover:text-accent-foreground"),children:[e.jsx(Ea,{className:Je("h-5 w-5",o?"mx-auto":"mr-3")}),!o&&e.jsx("span",{children:"Settings"})]}),e.jsxs(Ht,{to:"/dashboard/profile",className:Je("flex items-center px-3 py-2 rounded-lg text-sm font-medium transition-colors",r.pathname==="/dashboard/profile"?"bg-primary text-primary-foreground shadow-sm":"text-foreground hover:bg-accent hover:text-accent-foreground"),children:[e.jsx(na,{className:Je("h-5 w-5",o?"mx-auto":"mr-3")}),!o&&e.jsx("span",{children:"Profile"})]}),e.jsxs(Ht,{to:"/dashboard/wallet",className:Je("flex items-center px-3 py-2 rounded-lg text-sm font-medium transition-colors",r.pathname==="/dashboard/wallet"?"bg-primary text-primary-foreground shadow-sm":"text-foreground hover:bg-accent hover:text-accent-foreground"),children:[e.jsx(sd,{className:Je("h-5 w-5",o?"mx-auto":"mr-3")}),!o&&e.jsx("span",{children:"Wallet"})]}),e.jsxs(Ht,{to:"/dashboard/help",className:Je("flex items-center px-3 py-2 rounded-lg text-sm font-medium transition-colors",r.pathname==="/dashboard/help"?"bg-primary text-primary-foreground shadow-sm":"text-foreground hover:bg-accent hover:text-accent-foreground"),children:[e.jsx(xv,{className:Je("h-5 w-5",o?"mx-auto":"mr-3")}),!o&&e.jsx("span",{children:"Help & Support"})]}),e.jsxs(R,{onClick:x,variant:"ghost",className:Je("flex items-center px-3 py-2 rounded-lg text-sm font-medium transition-colors w-full justify-start","text-destructive hover:bg-destructive/10 hover:text-destructive"),children:[e.jsx(rf,{className:Je("h-5 w-5",o?"mx-auto":"mr-3")}),!o&&e.jsx("span",{children:"Logout"})]})]}),!o&&e.jsx("div",{className:"p-4 border-t border-border bg-muted/30",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("div",{className:"h-8 w-8 rounded-full bg-primary flex items-center justify-center shadow-sm",children:[e.jsx("span",{className:"text-sm font-medium text-primary-foreground",children:f})," "]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("p",{className:"text-sm font-medium text-foreground truncate",children:[u," "]}),e.jsx("p",{className:"text-xs text-muted-foreground truncate",children:t?.role||"User"})]})]})})]})]})})}function bg({...t}){return e.jsx(I5,{"data-slot":"dropdown-menu",...t})}function wg({...t}){return e.jsx(L5,{"data-slot":"dropdown-menu-trigger",...t})}function Sg({className:t,sideOffset:s=4,...a}){return e.jsx(B5,{children:e.jsx(z5,{"data-slot":"dropdown-menu-content",sideOffset:s,className:Je("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 max-h-(--radix-dropdown-menu-content-available-height) min-w-[8rem] origin-(--radix-dropdown-menu-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border p-1 shadow-md",t),...a})})}function qn({className:t,inset:s,variant:a="default",...r}){return e.jsx($5,{"data-slot":"dropdown-menu-item","data-inset":s,"data-variant":a,className:Je("focus:bg-accent focus:text-accent-foreground data-[variant=destructive]:text-destructive data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/20 data-[variant=destructive]:focus:text-destructive data-[variant=destructive]:*:[svg]:!text-destructive [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...r})}function fR({className:t,inset:s,...a}){return e.jsx(U5,{"data-slot":"dropdown-menu-label","data-inset":s,className:Je("px-2 py-1.5 text-sm font-medium data-[inset]:pl-8",t),...a})}function iw({className:t,...s}){return e.jsx(V5,{"data-slot":"dropdown-menu-separator",className:Je("bg-border -mx-1 my-1 h-px",t),...s})}const xR=Cv("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function _e({className:t,variant:s,asChild:a=!1,...r}){const i=a?uv:"span";return e.jsx(i,{"data-slot":"badge",className:Je(xR({variant:s}),t),...r})}const _r=v.forwardRef(({className:t,children:s,...a},r)=>e.jsxs(bS,{ref:r,className:Je("relative overflow-hidden",t),...a,children:[e.jsx(H5,{className:"h-full w-full rounded-[inherit]",children:s}),e.jsx(O4,{}),e.jsx(W5,{})]}));_r.displayName=bS.displayName;const O4=v.forwardRef(({className:t,orientation:s="vertical",...a},r)=>e.jsx(wS,{ref:r,orientation:s,className:Je("flex touch-none select-none transition-colors",s==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",s==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",t),...a,children:e.jsx(G5,{className:"relative flex-1 rounded-full bg-border"})}));O4.displayName=wS.displayName;var Vf="Popover",[R4]=Df(Vf,[Of]),em=Of(),[pR,$l]=R4(Vf),P4=t=>{const{__scopePopover:s,children:a,open:r,defaultOpen:i,onOpenChange:o,modal:c=!1}=t,u=em(s),f=v.useRef(null),[x,h]=v.useState(!1),[p,g]=Du({prop:r,defaultProp:i??!1,onChange:o,caller:Vf});return e.jsx(RS,{...u,children:e.jsx(pR,{scope:s,contentId:Rf(),triggerRef:f,open:p,onOpenChange:g,onOpenToggle:v.useCallback(()=>g(b=>!b),[g]),hasCustomAnchor:x,onCustomAnchorAdd:v.useCallback(()=>h(!0),[]),onCustomAnchorRemove:v.useCallback(()=>h(!1),[]),modal:c,children:a})})};P4.displayName=Vf;var M4="PopoverAnchor",gR=v.forwardRef((t,s)=>{const{__scopePopover:a,...r}=t,i=$l(M4,a),o=em(a),{onCustomAnchorAdd:c,onCustomAnchorRemove:u}=i;return v.useEffect(()=>(c(),()=>u()),[c,u]),e.jsx(mv,{...o,...r,ref:s})});gR.displayName=M4;var F4="PopoverTrigger",I4=v.forwardRef((t,s)=>{const{__scopePopover:a,...r}=t,i=$l(F4,a),o=em(a),c=qa(s,i.triggerRef),u=e.jsx(ca.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":V4(i.open),...r,ref:c,onClick:Vs(t.onClick,i.onOpenToggle)});return i.hasCustomAnchor?u:e.jsx(mv,{asChild:!0,...o,children:u})});I4.displayName=F4;var Av="PopoverPortal",[vR,jR]=R4(Av,{forceMount:void 0}),L4=t=>{const{__scopePopover:s,forceMount:a,children:r,container:i}=t,o=$l(Av,s);return e.jsx(vR,{scope:s,forceMount:a,children:e.jsx(SS,{present:a||o.open,children:e.jsx(CS,{asChild:!0,container:i,children:r})})})};L4.displayName=Av;var Zc="PopoverContent",B4=v.forwardRef((t,s)=>{const a=jR(Zc,t.__scopePopover),{forceMount:r=a.forceMount,...i}=t,o=$l(Zc,t.__scopePopover);return e.jsx(SS,{present:r||o.open,children:o.modal?e.jsx(NR,{...i,ref:s}):e.jsx(bR,{...i,ref:s})})});B4.displayName=Zc;var yR=ES("PopoverContent.RemoveScroll"),NR=v.forwardRef((t,s)=>{const a=$l(Zc,t.__scopePopover),r=v.useRef(null),i=qa(s,r),o=v.useRef(!1);return v.useEffect(()=>{const c=r.current;if(c)return TS(c)},[]),e.jsx(kS,{as:yR,allowPinchZoom:!0,children:e.jsx(z4,{...t,ref:i,trapFocus:a.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Vs(t.onCloseAutoFocus,c=>{c.preventDefault(),o.current||a.triggerRef.current?.focus()}),onPointerDownOutside:Vs(t.onPointerDownOutside,c=>{const u=c.detail.originalEvent,f=u.button===0&&u.ctrlKey===!0,x=u.button===2||f;o.current=x},{checkForDefaultPrevented:!1}),onFocusOutside:Vs(t.onFocusOutside,c=>c.preventDefault(),{checkForDefaultPrevented:!1})})})}),bR=v.forwardRef((t,s)=>{const a=$l(Zc,t.__scopePopover),r=v.useRef(!1),i=v.useRef(!1);return e.jsx(z4,{...t,ref:s,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:o=>{t.onCloseAutoFocus?.(o),o.defaultPrevented||(r.current||a.triggerRef.current?.focus(),o.preventDefault()),r.current=!1,i.current=!1},onInteractOutside:o=>{t.onInteractOutside?.(o),o.defaultPrevented||(r.current=!0,o.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const c=o.target;a.triggerRef.current?.contains(c)&&o.preventDefault(),o.detail.originalEvent.type==="focusin"&&i.current&&o.preventDefault()}})}),z4=v.forwardRef((t,s)=>{const{__scopePopover:a,trapFocus:r,onOpenAutoFocus:i,onCloseAutoFocus:o,disableOutsidePointerEvents:c,onEscapeKeyDown:u,onPointerDownOutside:f,onFocusOutside:x,onInteractOutside:h,...p}=t,g=$l(Zc,a),b=em(a);return AS(),e.jsx(_S,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:i,onUnmountAutoFocus:o,children:e.jsx(DS,{asChild:!0,disableOutsidePointerEvents:c,onInteractOutside:h,onEscapeKeyDown:u,onPointerDownOutside:f,onFocusOutside:x,onDismiss:()=>g.onOpenChange(!1),children:e.jsx(OS,{"data-state":V4(g.open),role:"dialog",id:g.contentId,...b,...p,ref:s,style:{...p.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),U4="PopoverClose",wR=v.forwardRef((t,s)=>{const{__scopePopover:a,...r}=t,i=$l(U4,a);return e.jsx(ca.button,{type:"button",...r,ref:s,onClick:Vs(t.onClick,()=>i.onOpenChange(!1))})});wR.displayName=U4;var SR="PopoverArrow",CR=v.forwardRef((t,s)=>{const{__scopePopover:a,...r}=t,i=em(a);return e.jsx(PS,{...i,...r,ref:s})});CR.displayName=SR;function V4(t){return t?"open":"closed"}var TR=P4,kR=I4,ER=L4,$4=B4;const H4=TR,W4=kR,_v=v.forwardRef(({className:t,align:s="center",sideOffset:a=4,...r},i)=>e.jsx(ER,{children:e.jsx($4,{ref:i,align:s,sideOffset:a,className:Je("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...r})}));_v.displayName=$4.displayName;const G4=v.createContext({}),Io=()=>{const t=v.useContext(G4);if(!t)throw new Error("useCustomerAuth must be used within CustomerAuthProvider");return t},AR=({children:t})=>{const[s,a]=v.useState(()=>{const b=localStorage.getItem("customerData");return b?JSON.parse(b):null}),[r,i]=v.useState(!0),[o,c]=v.useState(()=>!!localStorage.getItem("customerToken"));v.useEffect(()=>{u()},[]);const u=async()=>{const b=localStorage.getItem("customerToken"),N=localStorage.getItem("customerData");if(!b){a(null),c(!1),i(!1);return}try{const y=require("jsonwebtoken"),S=JSON.parse(atob(b.split(".")[1])),C=Date.now()/1e3;if(S.exp&&S.exp<C){console.log("⏰ Token expired, clearing session"),localStorage.removeItem("customerToken"),localStorage.removeItem("customerData"),a(null),c(!1),i(!1),D.error("Session expired. Please log in again.");return}}catch(y){console.error("Error checking token expiry:",y)}if(N)try{a(JSON.parse(N)),c(!0)}catch(y){console.error("Error parsing saved customer:",y)}try{console.log("✅ Customer authenticated from localStorage")}catch(y){console.error("❌ Error loading customer data:",y)}finally{i(!1)}},g={customer:s,loading:r,isAuthenticated:o,login:async b=>{try{const N=await Yh.login(b),{customer:y,token:S,storeOwner:C}=N.data;return console.log("✅ Auth Context: Login response received",y.email),localStorage.setItem("customerToken",S),localStorage.setItem("customerData",JSON.stringify(y)),console.log("✅ Auth Context: Token saved to localStorage"),a(y),c(!0),console.log("✅ Auth Context: State updated",{hasCustomer:!!y}),await new Promise(T=>setTimeout(T,100)),console.log("✅ Customer logged in:",y.email),{success:!0,customer:y,storeOwner:C}}catch(N){const y=N.response?.data?.message||"Login failed";return console.error("❌ Login error:",y),D.error(y),{success:!1,error:y}}},register:async b=>{try{const N=await Yh.register(b),{customer:y,token:S,storeOwner:C}=N.data;return console.log("✅ Auth Context: Registration response received",y.email),localStorage.setItem("customerToken",S),localStorage.setItem("customerData",JSON.stringify(y)),console.log("✅ Auth Context: Token saved to localStorage"),a(y),c(!0),console.log("✅ Auth Context: State updated",{hasCustomer:!!y}),await new Promise(T=>setTimeout(T,100)),console.log("✅ Customer registered:",y.email),{success:!0,customer:y,storeOwner:C}}catch(N){const y=N.response?.data?.message||"Registration failed";return console.error("❌ Registration error:",y),D.error(y),{success:!1,error:y}}},logout:()=>{const b=localStorage.getItem("customerToken");if(b)try{const N=JSON.parse(atob(b.split(".")[1])),y=`cart_items_${N.id||N.email||"guest"}`;localStorage.removeItem(y)}catch(N){console.error("Error clearing cart:",N)}localStorage.removeItem("customerToken"),localStorage.removeItem("customerData"),a(null),c(!1),console.log("✅ Customer logged out"),D.info("Logged out successfully")},updateProfile:async b=>{try{const y=(await Yh.updateProfile(b)).data.customer;return a(y),localStorage.setItem("customerData",JSON.stringify(y)),D.success("Profile updated successfully"),{success:!0}}catch(N){const y=N.response?.data?.message||"Update failed";return D.error(y),{success:!1,error:y}}},checkAuth:u};return e.jsx(G4.Provider,{value:g,children:t})},q4=v.createContext(),da=()=>{const t=v.useContext(q4);return t||(console.warn("useSocket called outside SocketProvider, returning defaults"),{socket:null,connected:!1,notifications:[],unreadCount:0,markAsRead:()=>{},markAllAsRead:()=>{},clearNotifications:()=>{},removeNotification:()=>{},joinRoom:()=>{},leaveRoom:()=>{},startTyping:()=>{},stopTyping:()=>{},emit:()=>{}})},_R=({children:t})=>{const[s,a]=v.useState(null),[r,i]=v.useState(!1),[o,c]=v.useState([]);let u,f,x;try{({user:u,token:f}=Es())}catch{u=null,f=null}try{({customer:x}=Io())}catch{x=null}const h=f||localStorage.getItem("customerToken"),p=!!(u||x);v.useEffect(()=>{if(p&&h){const E=R6("http://localhost:5000",{auth:{token:h},autoConnect:!0});return E.on("connect",()=>{console.log("Socket connected:",E.id),i(!0),D.success("Connected to real-time notifications")}),E.on("disconnect",()=>{console.log("Socket disconnected"),i(!1),D.info("Disconnected from real-time notifications")}),E.on("connect_error",A=>{console.error("Socket connection error:",A),i(!1),D.error("Failed to connect to real-time notifications")}),E.on("order_updated",A=>{console.log("Order updated:",A),g({id:Date.now(),type:"order_update",title:"Order Updated",message:A.data.message||`Order ${A.data.orderNumber} has been updated`,data:A.data,timestamp:new Date(A.timestamp),read:!1}),D.success(`Order ${A.data.orderNumber}: ${A.data.message}`)}),E.on("new_order",A=>{console.log("New order:",A),g({id:Date.now(),type:"new_order",title:"New Order Received",message:`New order from ${A.data.clientName} - $${A.data.total}`,data:A.data,timestamp:new Date(A.timestamp),read:!1}),D.info(`New order: ${A.data.orderNumber} from ${A.data.clientName}`)}),E.on("service_request_updated",A=>{console.log("Service request updated:",A),g({id:Date.now(),type:"service_request_update",title:"Service Request Updated",message:A.data.message||`Service request ${A.data.requestNumber} has been updated`,data:A.data,timestamp:new Date(A.timestamp),read:!1}),D.success(`Service Request ${A.data.requestNumber}: ${A.data.message}`)}),E.on("new_service_request",A=>{console.log("New service request:",A),g({id:Date.now(),type:"new_service_request",title:"New Service Request",message:`New ${A.data.serviceType} request from ${A.data.clientName}`,data:A.data,timestamp:new Date(A.timestamp),read:!1}),D.info(`New service request: ${A.data.title} from ${A.data.clientName}`)}),E.on("notification",A=>{console.log("General notification:",A),g({id:Date.now(),type:A.type||"general",title:A.title||"Notification",message:A.message,data:A.data,timestamp:new Date(A.timestamp),read:!1}),A.showToast!==!1&&D.info(A.message)}),E.on("user_typing",A=>{console.log("User typing:",A)}),E.on("user_stopped_typing",A=>{console.log("User stopped typing:",A)}),a(E),()=>{E.close(),a(null),i(!1)}}},[p,h,u,x]);const g=E=>{c(A=>[E,...A].slice(0,50))},b=E=>{c(A=>A.map(B=>B.id===E?{...B,read:!0}:B))},N=()=>{c(E=>E.map(A=>({...A,read:!0})))},y=()=>{c([])},S=E=>{c(A=>A.filter(B=>B.id!==E))},C=E=>{s&&s.emit("join_room",E)},T=E=>{s&&s.emit("leave_room",E)},_=E=>{s&&s.emit("typing_start",{room:E})},G=E=>{s&&s.emit("typing_stop",{room:E})},U=(E,A)=>{s&&s.emit(E,A)},F=o.filter(E=>!E.read).length,k={socket:s,connected:r,notifications:o,unreadCount:F,markAsRead:b,markAllAsRead:N,clearNotifications:y,removeNotification:S,joinRoom:C,leaveRoom:T,startTyping:_,stopTyping:G,emit:U};return e.jsx(q4.Provider,{value:k,children:t})},DR=()=>{const[t,s]=v.useState(!1),{notifications:a,unreadCount:r,markAsRead:i,markAllAsRead:o,clearNotifications:c,removeNotification:u,connected:f}=da(),x=g=>{switch(g){case"order_update":case"new_order":return e.jsx(qt,{className:"h-4 w-4"});case"service_request_update":case"new_service_request":return e.jsx(Ea,{className:"h-4 w-4"});default:return e.jsx(Cs,{className:"h-4 w-4"})}},h=g=>{switch(g){case"order_update":case"new_order":return"text-blue-600 bg-blue-100";case"service_request_update":case"new_service_request":return"text-green-600 bg-green-100";default:return"text-gray-600 bg-gray-100"}},p=g=>{g.read||i(g.id),console.log("Navigate to:",g.type,g.data)};return e.jsxs(H4,{open:t,onOpenChange:s,children:[e.jsx(W4,{asChild:!0,children:e.jsxs(R,{variant:"ghost",size:"sm",className:"relative",onClick:()=>s(!t),children:[e.jsx(Fr,{className:`h-5 w-5 ${f?"text-gray-700":"text-gray-400"}`}),r>0&&e.jsx(_e,{variant:"destructive",className:"absolute -top-1 -right-1 h-5 w-5 rounded-full p-0 flex items-center justify-center text-xs",children:r>99?"99+":r})]})}),e.jsxs(_v,{className:"w-80 p-0",align:"end",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("h3",{className:"font-semibold",children:"Notifications"}),e.jsx("div",{className:`h-2 w-2 rounded-full ${f?"bg-green-500":"bg-red-500"}`})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[r>0&&e.jsxs(R,{variant:"ghost",size:"sm",onClick:o,className:"text-xs",children:[e.jsx(si,{className:"h-3 w-3 mr-1"}),"Mark all read"]}),a.length>0&&e.jsx(R,{variant:"ghost",size:"sm",onClick:c,className:"text-xs text-red-600 hover:text-red-700",children:e.jsx(fa,{className:"h-3 w-3"})})]})]}),e.jsx(_r,{className:"h-96",children:a.length===0?e.jsxs("div",{className:"p-8 text-center text-gray-500",children:[e.jsx(Fr,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),e.jsx("p",{className:"text-sm",children:"No notifications yet"}),e.jsx("p",{className:"text-xs mt-1",children:f?"You're connected to real-time updates":"Connecting..."})]}):e.jsx("div",{className:"p-2",children:a.map(g=>e.jsx(K,{className:`mb-2 p-3 cursor-pointer transition-colors hover:bg-gray-50 ${g.read?"":"border-l-4 border-l-blue-500 bg-blue-50/30"}`,onClick:()=>p(g),children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:`p-1 rounded-full ${h(g.type)}`,children:x(g.type)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:g.title}),e.jsxs("div",{className:"flex items-center space-x-1",children:[!g.read&&e.jsx("div",{className:"h-2 w-2 bg-blue-500 rounded-full"}),e.jsx(R,{variant:"ghost",size:"sm",onClick:b=>{b.stopPropagation(),u(g.id)},className:"h-6 w-6 p-0 opacity-0 group-hover:opacity-100",children:e.jsx(yr,{className:"h-3 w-3"})})]})]}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:g.message}),e.jsx("p",{className:"text-xs text-gray-400 mt-2",children:g.timestamp?Yu(new Date(g.timestamp),{addSuffix:!0}):"Just now"})]})]})},g.id))})}),!f&&e.jsx("div",{className:"p-3 bg-yellow-50 border-t border-yellow-200",children:e.jsxs("div",{className:"flex items-center space-x-2 text-yellow-800",children:[e.jsx(Cs,{className:"h-4 w-4"}),e.jsx("span",{className:"text-xs",children:"Reconnecting to notifications..."})]})})]})]})},fr=ft.forwardRef(({className:t,...s},a)=>e.jsx("div",{ref:a,className:Je("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",t),...s}));fr.displayName="Avatar";const Rn=ft.forwardRef(({className:t,src:s,alt:a,...r},i)=>{const[o,c]=v.useState(!1),[u,f]=v.useState(!1),x=()=>{c(!0),f(!1)},h=()=>{f(!0),c(!1)};return!s||u?null:e.jsx("img",{ref:i,className:Je("aspect-square h-full w-full object-cover",o?"opacity-100":"opacity-0",t),src:s,alt:a,onLoad:x,onError:h,...r})});Rn.displayName="AvatarImage";const xr=ft.forwardRef(({className:t,...s},a)=>e.jsx("div",{ref:a,className:Je("flex h-full w-full items-center justify-center rounded-full bg-muted text-sm font-medium",t),...s}));xr.displayName="AvatarFallback";const OR=({user:t,size:s="md",editable:a=!1,onUpdate:r=null,className:i=""})=>{const[o,c]=v.useState(!1),[u,f]=v.useState(null),[x,h]=v.useState(!1),p=v.useRef(null),g={xs:"w-6 h-6",sm:"w-8 h-8",md:"w-12 h-12",lg:"w-16 h-16",xl:"w-24 h-24","2xl":"w-32 h-32"},b=G=>G?G.split(" ").map(U=>U.charAt(0)).join("").toUpperCase().slice(0,2):"U",N=()=>u||(t?.profilePicture?t.profilePicture:t?.avatar?t.avatar:null),y=G=>{const U=G.target.files[0];if(!U)return;if(!U.type.startsWith("image/")){D.error("Please select a valid image file");return}if(U.size>5*1024*1024){D.error("Image size must be less than 5MB");return}const F=new FileReader;F.onload=k=>{f(k.target.result)},F.readAsDataURL(U)},S=async()=>{if(p.current?.files[0])try{c(!0);const G=p.current.files[0],U=new FormData;U.append("profilePicture",G),U.append("userId",t.id);const F=await ye.post("/upload/profile-picture",U,{headers:{"Content-Type":"multipart/form-data"}});F.data.success&&(D.success("Profile picture updated successfully"),r?.(F.data.profilePictureUrl),h(!1),f(null))}catch(G){console.error("Error uploading profile picture:",G),D.error("Failed to upload profile picture")}finally{c(!1)}},C=async()=>{try{c(!0),await ye.delete("/upload/profile-picture"),D.success("Profile picture removed"),r?.(null),h(!1),f(null)}catch(G){console.error("Error removing profile picture:",G),D.error("Failed to remove profile picture")}finally{c(!1)}},T=()=>{f(null),h(!1),p.current&&(p.current.value="")},_=({showEditButton:G=!1})=>e.jsxs("div",{className:`relative ${i}`,children:[e.jsxs(fr,{className:`${g[s]} border-2 border-gray-200 dark:border-gray-700`,children:[e.jsx(Rn,{src:N(),alt:t?.name||"User",className:"object-cover"}),e.jsx(xr,{className:"bg-gradient-to-br from-green-400 to-green-600 text-white font-semibold",children:b(t?.name)})]}),G&&a&&e.jsx("button",{onClick:()=>h(!0),className:"absolute -bottom-1 -right-1 p-1 bg-green-600 text-white rounded-full shadow-lg hover:bg-green-700 transition-colors",children:e.jsx(ng,{className:"w-3 h-3"})})]});return a?e.jsxs(e.Fragment,{children:[e.jsx(_,{showEditButton:!0}),e.jsx(Ft,{open:x,onOpenChange:h,children:e.jsxs(It,{className:"sm:max-w-md",children:[e.jsx(Lt,{children:e.jsx(Bt,{children:"Update Profile Picture"})}),e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex justify-center",children:e.jsxs("div",{className:"relative",children:[e.jsxs(fr,{className:"w-32 h-32 border-4 border-gray-200 dark:border-gray-700",children:[e.jsx(Rn,{src:N(),alt:t?.name||"User",className:"object-cover"}),e.jsx(xr,{className:"bg-gradient-to-br from-green-400 to-green-600 text-white text-2xl font-semibold",children:b(t?.name)})]}),u&&e.jsx("div",{className:"absolute inset-0 bg-black/50 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-white text-xs font-medium",children:"Preview"})})]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("input",{ref:p,type:"file",accept:"image/*",onChange:y,className:"hidden"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs(R,{variant:"outline",onClick:()=>p.current?.click(),disabled:o,className:"w-full",children:[e.jsx(Hi,{className:"w-4 h-4 mr-2"}),"Choose Image"]}),(t?.profilePicture||t?.avatar)&&e.jsxs(R,{variant:"outline",onClick:C,disabled:o,className:"w-full text-red-600 hover:text-red-700",children:[e.jsx(yr,{className:"w-4 h-4 mr-2"}),"Remove"]})]}),u&&e.jsxs("div",{className:"flex space-x-3",children:[e.jsxs(R,{onClick:S,disabled:o,className:"flex-1 bg-green-600 hover:bg-green-700",children:[o?e.jsx(Yn,{className:"w-4 h-4 mr-2 animate-spin"}):e.jsx(wi,{className:"w-4 h-4 mr-2"}),o?"Uploading...":"Save"]}),e.jsx(R,{variant:"outline",onClick:T,disabled:o,children:"Cancel"})]})]}),e.jsxs("div",{className:"text-sm text-gray-500 space-y-1",children:[e.jsx("p",{className:"font-medium",children:"Guidelines:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-1 text-xs",children:[e.jsx("li",{children:"Use a clear, professional photo"}),e.jsx("li",{children:"Square images work best"}),e.jsx("li",{children:"Maximum file size: 5MB"}),e.jsx("li",{children:"Supported formats: JPG, PNG, GIF"})]})]})]})]})})]}):e.jsx(_,{})},RR=({size:t="md",variant:s="full",className:a="",showText:r=!0,animated:i=!1})=>{const o={xs:"w-6 h-6",sm:"w-8 h-8",md:"w-12 h-12",lg:"w-16 h-16",xl:"w-24 h-24","2xl":"w-32 h-32"},c={xs:"text-sm",sm:"text-base",md:"text-xl",lg:"text-2xl",xl:"text-3xl","2xl":"text-4xl"},u=({className:f=""})=>e.jsxs("div",{className:`relative ${f} ${i?"animate-pulse":""}`,children:[e.jsx("div",{className:"absolute inset-0 bg-green-500 rounded-full shadow-lg",children:e.jsx("div",{className:"absolute top-1 left-1 w-3 h-3 bg-white/30 rounded-full blur-sm"})}),e.jsx("div",{className:"relative flex items-center justify-center w-full h-full text-white",children:e.jsxs("svg",{viewBox:"0 0 24 24",fill:"currentColor",className:"w-2/3 h-2/3",children:[e.jsx("path",{d:"M12 2L2 7v10c0 5.55 3.84 10 9 11 1.16-.21 2.31-.48 3.38-.84C16.5 26.32 18.74 25.5 21 24.5V7L12 2z"}),e.jsx("path",{d:"M12 2v20c5.16-1 9-5.45 9-11V7L12 2z",opacity:"0.7"}),e.jsx("rect",{x:"6",y:"9",width:"2",height:"2",fill:"currentColor",opacity:"0.8"}),e.jsx("rect",{x:"10",y:"9",width:"2",height:"2",fill:"currentColor",opacity:"0.8"}),e.jsx("rect",{x:"14",y:"9",width:"2",height:"2",fill:"currentColor",opacity:"0.8"}),e.jsx("rect",{x:"6",y:"13",width:"2",height:"2",fill:"currentColor",opacity:"0.8"}),e.jsx("rect",{x:"10",y:"13",width:"2",height:"2",fill:"currentColor",opacity:"0.8"}),e.jsx("rect",{x:"14",y:"13",width:"2",height:"2",fill:"currentColor",opacity:"0.8"})]})}),i&&e.jsx("div",{className:"absolute -inset-1 bg-green-500 rounded-full opacity-20 animate-ping"})]});return s==="icon"?e.jsx(u,{className:`${o[t]} ${a}`}):e.jsxs("div",{className:`flex items-center space-x-3 ${a}`,children:[e.jsx(u,{className:o[t]}),r&&e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:`font-bold text-gray-900 dark:text-white ${c[t]} leading-tight`,children:"ominbiz"}),e.jsx("span",{className:`text-green-600 font-medium ${t==="xs"||t==="sm"?"text-xs":"text-sm"} leading-tight`,children:"Business Pro"})]})]})},K4=v.createContext(),ld=()=>{const t=v.useContext(K4);if(!t)throw new Error("useAppTheme must be used within a ThemeProvider");return t},Pn={light:{name:"Light",description:"Clean and bright interface",preview:"bg-white text-gray-900",category:"default",colors:{primary:"#3b82f6",secondary:"#64748b",accent:"#10b981",background:"#ffffff",foreground:"#1f2937"}},dark:{name:"Dark",description:"Easy on the eyes",preview:"bg-gray-900 text-white",category:"default",colors:{primary:"#60a5fa",secondary:"#94a3b8",accent:"#34d399",background:"#111827",foreground:"#f9fafb"}},blue:{name:"Ocean Blue",description:"Professional blue theme",preview:"bg-blue-600 text-white",category:"color",colors:{primary:"#2563eb",secondary:"#1e40af",accent:"#3b82f6",background:"#eff6ff",foreground:"#1e3a8a"}},green:{name:"Forest Green",description:"Nature-inspired green",preview:"bg-green-600 text-white",category:"color",colors:{primary:"#16a34a",secondary:"#15803d",accent:"#22c55e",background:"#f0fdf4",foreground:"#14532d"}},purple:{name:"Royal Purple",description:"Elegant purple theme",preview:"bg-purple-600 text-white",category:"color",colors:{primary:"#9333ea",secondary:"#7c3aed",accent:"#a855f7",background:"#faf5ff",foreground:"#581c87"}},orange:{name:"Sunset Orange",description:"Warm and energetic",preview:"bg-orange-600 text-white",category:"color",colors:{primary:"#ea580c",secondary:"#dc2626",accent:"#f97316",background:"#fff7ed",foreground:"#9a3412"}},rose:{name:"Rose Pink",description:"Soft and modern",preview:"bg-rose-600 text-white",category:"color",colors:{primary:"#e11d48",secondary:"#be185d",accent:"#f43f5e",background:"#fff1f2",foreground:"#881337"}},slate:{name:"Slate Gray",description:"Professional and minimal",preview:"bg-slate-600 text-white",category:"neutral",colors:{primary:"#475569",secondary:"#334155",accent:"#64748b",background:"#f8fafc",foreground:"#0f172a"}},emerald:{name:"Emerald",description:"Fresh and vibrant",preview:"bg-emerald-600 text-white",category:"color",colors:{primary:"#059669",secondary:"#047857",accent:"#10b981",background:"#ecfdf5",foreground:"#064e3b"}},fresh:{name:"Fresh White",description:"Clean white with green accents",preview:"bg-white text-gray-900 border border-green-500",category:"color",colors:{primary:"#10b981",secondary:"#059669",accent:"#34d399",background:"#ffffff",foreground:"#1f2937"}},indigo:{name:"Deep Indigo",description:"Rich and sophisticated",preview:"bg-indigo-600 text-white",category:"color",colors:{primary:"#4f46e5",secondary:"#4338ca",accent:"#6366f1",background:"#f0f9ff",foreground:"#312e81"}},cyberpunk:{name:"Cyberpunk",description:"Neon and futuristic",preview:"bg-black text-cyan-400 border border-pink-500",category:"special",colors:{primary:"#06b6d4",secondary:"#ec4899",accent:"#10b981",background:"#000000",foreground:"#22d3ee"}},sunset:{name:"Sunset",description:"Warm orange theme",preview:"bg-orange-500 text-white",category:"special",colors:{primary:"#f97316",secondary:"#ec4899",accent:"#fbbf24",background:"#fff7ed",foreground:"#9a3412"}},ocean:{name:"Ocean Depths",description:"Deep blue theme",preview:"bg-blue-800 text-white",category:"special",colors:{primary:"#1e40af",secondary:"#312e81",accent:"#3b82f6",background:"#eff6ff",foreground:"#1e3a8a"}},system:{name:"System",description:"Follow system preference",preview:"bg-gray-500 text-white",category:"auto",colors:{primary:"#3b82f6",secondary:"#64748b",accent:"#10b981",background:"var(--background)",foreground:"var(--foreground)"}},dracula:{name:"Dracula",description:"Popular dark theme",preview:"bg-[#282a36] text-[#f8f8f2] border border-[#bd93f9]",category:"special",colors:{primary:"#bd93f9",secondary:"#ff79c6",accent:"#50fa7b",background:"#282a36",foreground:"#f8f8f2"}},nord:{name:"Nord",description:"Arctic nordic theme",preview:"bg-[#2e3440] text-[#eceff4] border border-[#88c0d0]",category:"special",colors:{primary:"#88c0d0",secondary:"#81a1c1",accent:"#a3be8c",background:"#2e3440",foreground:"#eceff4"}},tokyonight:{name:"Tokyo Night",description:"Neon city nights",preview:"bg-[#1a1b26] text-[#c0caf5] border border-[#7aa2f7]",category:"special",colors:{primary:"#7aa2f7",secondary:"#bb9af7",accent:"#9ece6a",background:"#1a1b26",foreground:"#c0caf5"}},corporate:{name:"Corporate Blue",description:"Professional business theme",preview:"bg-blue-700 text-white",category:"business",colors:{primary:"#1e40af",secondary:"#1e3a8a",accent:"#3b82f6",background:"#ffffff",foreground:"#1e293b"}},forest:{name:"Forest Green",description:"Calm forest vibes",preview:"bg-green-700 text-white",category:"nature",colors:{primary:"#047857",secondary:"#065f46",accent:"#10b981",background:"#f0fdf4",foreground:"#064e3b"}},lavender:{name:"Lavender Dreams",description:"Soft lavender theme",preview:"bg-purple-400 text-white",category:"nature",colors:{primary:"#a855f7",secondary:"#ec4899",accent:"#d946ef",background:"#faf5ff",foreground:"#581c87"}},neon:{name:"Neon Lights",description:"Vibrant neon colors",preview:"bg-gradient-to-r from-pink-500 to-purple-500 text-white",category:"modern",colors:{primary:"#ec4899",secondary:"#a855f7",accent:"#06b6d4",background:"#18181b",foreground:"#fafafa"}},minimal:{name:"Minimal Black",description:"Ultra minimal design",preview:"bg-black text-white",category:"modern",colors:{primary:"#18181b",secondary:"#27272a",accent:"#3f3f46",background:"#ffffff",foreground:"#09090b"}},spring:{name:"Spring Bloom",description:"Fresh spring colors",preview:"bg-gradient-to-r from-green-400 to-pink-400 text-white",category:"seasonal",colors:{primary:"#22c55e",secondary:"#f472b6",accent:"#a3e635",background:"#f0fdf4",foreground:"#14532d"}},autumn:{name:"Autumn Leaves",description:"Warm autumn colors",preview:"bg-gradient-to-r from-orange-600 to-red-700 text-white",category:"seasonal",colors:{primary:"#ea580c",secondary:"#dc2626",accent:"#f59e0b",background:"#fffbeb",foreground:"#78350f"}},midnight:{name:"Midnight Blue",description:"Deep midnight theme",preview:"bg-blue-950 text-blue-100",category:"dark",colors:{primary:"#1e3a8a",secondary:"#1e40af",accent:"#3b82f6",background:"#0c1629",foreground:"#dbeafe"}},monokai:{name:"Monokai",description:"Classic code theme",preview:"bg-[#272822] text-[#f8f8f2] border border-[#66d9ef]",category:"special",colors:{primary:"#66d9ef",secondary:"#f92672",accent:"#a6e22e",background:"#272822",foreground:"#f8f8f2"}},matrix:{name:"Matrix",description:"Enter the matrix",preview:"bg-black text-[#00ff00] border border-[#00ff00]",category:"special",colors:{primary:"#00ff00",secondary:"#00cc00",accent:"#00ff41",background:"#000000",foreground:"#00ff00"}},coral:{name:"Coral Reef",description:"Warm coral colors",preview:"bg-[#fff5f5] text-[#c53030]",category:"color",colors:{primary:"#f56565",secondary:"#fc8181",accent:"#feb2b2",background:"#fff5f5",foreground:"#c53030"}},mint:{name:"Fresh Mint",description:"Cool mint theme",preview:"bg-[#f0fdf4] text-[#065f46]",category:"color",colors:{primary:"#10b981",secondary:"#34d399",accent:"#6ee7b7",background:"#f0fdf4",foreground:"#065f46"}},amber:{name:"Amber Glow",description:"Warm amber tones",preview:"bg-[#fffbeb] text-[#78350f]",category:"color",colors:{primary:"#f59e0b",secondary:"#fbbf24",accent:"#fcd34d",background:"#fffbeb",foreground:"#78350f"}},deepForest:{name:"Deep Forest",description:"Dark forest theme",preview:"bg-[#064e3b] text-[#d1fae5]",category:"special",colors:{primary:"#10b981",secondary:"#34d399",accent:"#6ee7b7",background:"#064e3b",foreground:"#d1fae5"}},sakura:{name:"Cherry Blossom",description:"Soft pink sakura",preview:"bg-[#fdf2f8] text-[#831843]",category:"color",colors:{primary:"#ec4899",secondary:"#f472b6",accent:"#f9a8d4",background:"#fdf2f8",foreground:"#831843"}},arctic:{name:"Arctic Ice",description:"Cool icy blue",preview:"bg-[#f0f9ff] text-[#075985]",category:"color",colors:{primary:"#0ea5e9",secondary:"#38bdf8",accent:"#7dd3fc",background:"#f0f9ff",foreground:"#075985"}},volcano:{name:"Volcano",description:"Fiery red theme",preview:"bg-[#450a0a] text-[#fecaca]",category:"special",colors:{primary:"#dc2626",secondary:"#ef4444",accent:"#f87171",background:"#450a0a",foreground:"#fecaca"}}},lw=({children:t})=>{const[s,a]=v.useState("light"),[r,i]=v.useState(!1),[o,c]=v.useState(!0),[u,f]=v.useState(!1),[x,h]=v.useState("medium"),[p,g]=v.useState("medium"),[b,N]=v.useState(!1),[y,S]=v.useState(!1),[C,T]=v.useState("#3b82f6"),[_,G]=v.useState(!0),[U,F]=v.useState(!0),[k,E]=v.useState(!1),A={small:{name:"Small",class:"text-sm",value:"14px"},medium:{name:"Medium",class:"text-base",value:"16px"},large:{name:"Large",class:"text-lg",value:"18px"},xlarge:{name:"Extra Large",class:"text-xl",value:"20px"}},B={none:{name:"None",value:"0px"},small:{name:"Small",value:"4px"},medium:{name:"Medium",value:"8px"},large:{name:"Large",value:"12px"},xlarge:{name:"Extra Large",value:"16px"}};v.useEffect(()=>{const q=document.documentElement;q.setAttribute("data-theme",s),s==="dark"?q.classList.add("dark"):q.classList.remove("dark"),q.style.setProperty("--font-size-base",A[x].value),q.style.setProperty("--radius",B[p].value),!o||u?(q.style.setProperty("--animation-duration","0s"),q.style.setProperty("--transition-duration","0s")):(q.style.setProperty("--animation-duration","0.3s"),q.style.setProperty("--transition-duration","0.2s"))},[s,x,p,o,u]),v.useEffect(()=>{const q=window.matchMedia("(prefers-reduced-motion: reduce)");f(q.matches);const L=re=>f(re.matches);return q.addEventListener("change",L),()=>q.removeEventListener("change",L)},[]);const H=q=>{q=q.replace("#","");const L=parseInt(q.substring(0,2),16)/255,re=parseInt(q.substring(2,4),16)/255,V=parseInt(q.substring(4,6),16)/255,ee=Math.max(L,re,V),me=Math.min(L,re,V);let W,se,Z=(ee+me)/2;if(ee===me)W=se=0;else{const I=ee-me;switch(se=Z>.5?I/(2-ee-me):I/(ee+me),ee){case L:W=((re-V)/I+(re<V?6:0))/6;break;case re:W=((V-L)/I+2)/6;break;case V:W=((L-re)/I+4)/6;break}}return W=Math.round(W*360),se=Math.round(se*100),Z=Math.round(Z*100),`${W} ${se}% ${Z}%`};v.useEffect(()=>{const q=document.documentElement,L=Pn[s];if(L&&L.colors){const ee=H(L.colors.primary),me=H(L.colors.secondary),W=H(L.colors.accent),se=L.colors.background.startsWith("#")?H(L.colors.background):"0 0% 100%",Z=H(L.colors.foreground);q.style.setProperty("--primary",ee),q.style.setProperty("--primary-foreground","0 0% 100%"),q.style.setProperty("--secondary",me),q.style.setProperty("--secondary-foreground",Z),q.style.setProperty("--accent",W),q.style.setProperty("--accent-foreground",Z),q.style.setProperty("--background",se),q.style.setProperty("--foreground",Z),q.style.setProperty("--card",se),q.style.setProperty("--card-foreground",Z),q.style.setProperty("--popover",se),q.style.setProperty("--popover-foreground",Z),q.style.setProperty("--muted",me),q.style.setProperty("--muted-foreground","0 0% 45%"),q.style.setProperty("--border",`${ee.split(" ")[0]} 30% 80%`),q.style.setProperty("--input",`${ee.split(" ")[0]} 30% 80%`),q.style.setProperty("--ring",ee),q.style.setProperty("--color-primary",L.colors.primary),q.style.setProperty("--color-secondary",L.colors.secondary),q.style.setProperty("--color-accent",L.colors.accent),q.style.setProperty("--color-background",L.colors.background),q.style.setProperty("--color-foreground",L.colors.foreground),document.body.style.backgroundColor=L.colors.background,document.body.style.color=L.colors.foreground}if(C){const ee=H(C);q.style.setProperty("--accent",ee),q.style.setProperty("--color-accent",C)}const re=A[x]?.value||"16px";q.style.setProperty("--font-size-base",re);const V=B[p]?.value||"0.5rem";q.style.setProperty("--border-radius-base",V),q.style.setProperty("--spacing-scale",b?"0.75":"1"),y?q.classList.add("high-contrast"):q.classList.remove("high-contrast"),u?q.classList.add("reduce-motion"):q.classList.remove("reduce-motion"),o?q.classList.remove("no-animations"):q.classList.add("no-animations")},[s,C,x,p,b,y,u,o]),v.useEffect(()=>{(()=>{try{const L=localStorage.getItem("app-theme"),re=localStorage.getItem("app-theme-settings");if(L&&a(L),re){const V=JSON.parse(re);V.sidebarCollapsed!==void 0&&i(V.sidebarCollapsed),V.compactMode!==void 0&&N(V.compactMode),V.highContrast!==void 0&&S(V.highContrast),V.reducedMotion!==void 0&&f(V.reducedMotion),V.customAccentColor&&T(V.customAccentColor),V.animations!==void 0&&c(V.animations),V.fontSize&&h(V.fontSize),V.borderRadius&&g(V.borderRadius),V.soundEnabled!==void 0&&G(V.soundEnabled),V.autoSave!==void 0&&F(V.autoSave)}}catch(L){console.error("Error loading theme from localStorage:",L)}})()},[]),v.useEffect(()=>{const q=async()=>{try{const re=localStorage.getItem("token");if(re){const ee=(await ye.get("/user/profile",{headers:{Authorization:`Bearer ${re}`}})).data.themePreferences;ee&&(ee.theme&&a(ee.theme),ee.sidebarCollapsed!==void 0&&i(ee.sidebarCollapsed),ee.compactMode!==void 0&&N(ee.compactMode),ee.highContrast!==void 0&&S(ee.highContrast),ee.reducedMotion!==void 0&&f(ee.reducedMotion),ee.customAccentColor&&T(ee.customAccentColor),ee.animations!==void 0&&c(ee.animations),ee.fontSize&&h(ee.fontSize),ee.borderRadius&&g(ee.borderRadius),ee.soundEnabled!==void 0&&G(ee.soundEnabled),ee.autoSave!==void 0&&F(ee.autoSave),localStorage.setItem("app-theme",ee.theme||"light"),localStorage.setItem("app-theme-settings",JSON.stringify(ee)))}}catch(re){console.log("Could not load user theme preferences from server:",re.message)}finally{E(!0)}},L=setTimeout(()=>{q()},100);return()=>clearTimeout(L)},[]),v.useEffect(()=>{if(k)try{localStorage.setItem("app-theme",s),localStorage.setItem("app-theme-settings",JSON.stringify({theme:s,sidebarCollapsed:r,compactMode:b,highContrast:y,reducedMotion:u,customAccentColor:C,animations:o,fontSize:x,borderRadius:p,soundEnabled:_,autoSave:U}))}catch(q){console.error("Error saving theme to localStorage:",q)}},[s,r,b,y,u,C,o,x,p,_,U,k]),v.useEffect(()=>{if(!k)return;const q=setTimeout(async()=>{try{const L=localStorage.getItem("token");L&&await ye.put("/user/settings",{section:"appearance",settings:{theme:s,sidebarCollapsed:r,compactMode:b,highContrast:y,reducedMotion:u,customAccentColor:C,animations:o,fontSize:x,borderRadius:p,soundEnabled:_,autoSave:U}},{headers:{Authorization:`Bearer ${L}`}})}catch(L){console.log("Could not sync theme preferences:",L.message)}},1e3);return()=>clearTimeout(q)},[k,s,r,b,y,u,C,o,x,p,_,U]);const M={theme:s,setTheme:a,themes:Object.keys(Pn),availableThemes:Pn,sidebarCollapsed:r,setSidebarCollapsed:i,compactMode:b,setCompactMode:N,animations:o,setAnimations:c,reducedMotion:u,setReducedMotion:f,highContrast:y,setHighContrast:S,fontSize:x,setFontSize:h,fontSizes:A,borderRadius:p,setBorderRadius:g,borderRadiusOptions:B,customAccentColor:C,setCustomAccentColor:T,soundEnabled:_,setSoundEnabled:G,autoSave:U,setAutoSave:F};return e.jsx(K4.Provider,{value:M,children:t})},Dv=v.createContext();function pa({defaultValue:t,value:s,onValueChange:a,className:r,children:i,...o}){const[c,u]=v.useState(s||t),f=h=>{s===void 0&&u(h),a?.(h)},x=s!==void 0?s:c;return e.jsx(Dv.Provider,{value:{value:x,onValueChange:f},children:e.jsx("div",{className:Je("flex flex-col gap-2",r),...o,children:i})})}function ba({className:t,children:s,...a}){return e.jsx("div",{className:Je("inline-flex h-9 w-fit items-center justify-center rounded-lg bg-gray-100 p-1 text-gray-500 dark:bg-gray-800 dark:text-gray-400",t),...a,children:s})}function ut({value:t,className:s,children:a,...r}){const{value:i,onValueChange:o}=v.useContext(Dv),c=i===t;return e.jsx("button",{className:Je("inline-flex h-7 flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-3 py-1 text-sm font-medium whitespace-nowrap transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",c?"bg-white text-gray-900 shadow-sm dark:bg-gray-700 dark:text-gray-100":"hover:bg-white/50 hover:text-gray-700 dark:hover:bg-gray-700/50 dark:hover:text-gray-300",s),onClick:()=>o(t),...r,children:a})}function mt({value:t,className:s,children:a,...r}){const{value:i}=v.useContext(Dv);return i!==t?null:e.jsx("div",{className:Je("flex-1 outline-none",s),...r,children:a})}const PR=()=>{const{theme:t,setTheme:s}=ld(),[a,r]=v.useState(!1),i={default:{name:"Default",icon:zS,themes:[]},color:{name:"Colors",icon:Lc,themes:[]},neutral:{name:"Neutral",icon:u_,themes:[]},special:{name:"Special",icon:Mn,themes:[]}};Object.entries(Pn).forEach(([u,f])=>{const x=f.category||"default";i[x]&&i[x].themes.push({key:u,...f})});const o=u=>{s(u),D.success(`Theme changed to ${Pn[u]?.name||u}`)},c=({themeKey:u,themeData:f,isSelected:x})=>e.jsxs(K,{className:`cursor-pointer transition-all duration-200 hover:shadow-md ${x?"ring-2 ring-primary shadow-md":""}`,onClick:()=>o(u),children:[e.jsxs(pe,{className:"pb-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(ge,{className:"text-sm font-medium",children:f.name}),x&&e.jsx(wi,{className:"h-4 w-4 text-primary"})]}),e.jsx(lt,{className:"text-xs",children:f.description})]}),e.jsx(X,{className:"pt-0",children:e.jsx("div",{className:`h-16 rounded-md border-2 ${f.preview} flex items-center justify-center text-xs font-medium`,style:{backgroundColor:f.colors?.background,color:f.colors?.foreground,borderColor:f.colors?.primary},children:e.jsxs("div",{className:"flex gap-1",children:[e.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:f.colors?.primary}}),e.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:f.colors?.secondary}}),e.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:f.colors?.accent}})]})})})]});return e.jsxs(Ft,{open:a,onOpenChange:r,children:[e.jsx(Na,{asChild:!0,children:e.jsxs(R,{variant:"outline",size:"sm",className:"theme-toggle",children:[e.jsx(Lc,{className:"h-4 w-4 mr-2"}),"Theme"]})}),e.jsxs(It,{className:"max-w-4xl max-h-[80vh] overflow-y-auto",children:[e.jsxs(Lt,{children:[e.jsxs(Bt,{className:"flex items-center gap-2",children:[e.jsx(Lc,{className:"h-5 w-5"}),"Choose Your Theme"]}),e.jsx(es,{children:"Customize your ominbiz experience with beautiful themes"})]}),e.jsxs(pa,{defaultValue:"default",className:"w-full",children:[e.jsx(ba,{className:"grid w-full grid-cols-4",children:Object.entries(i).map(([u,f])=>{const x=f.icon;return e.jsxs(ut,{value:u,className:"flex items-center gap-2",children:[e.jsx(x,{className:"h-4 w-4"}),f.name]},u)})}),Object.entries(i).map(([u,f])=>e.jsx(mt,{value:u,className:"mt-4",children:e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:f.themes.map(({key:x,...h})=>e.jsx(c,{themeKey:x,themeData:h,isSelected:t===x},x))})},u))]}),e.jsxs("div",{className:"flex items-center justify-between pt-4 border-t",children:[e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs(_e,{variant:"secondary",children:["Current: ",Pn[t]?.name]})}),e.jsx(R,{variant:"outline",onClick:()=>r(!1),children:"Done"})]})]})]})};function MR({...t}){return e.jsx("nav",{"aria-label":"breadcrumb",...t})}function FR({className:t,...s}){return e.jsx("ol",{className:Je("flex flex-wrap items-center gap-1.5 break-words text-sm text-muted-foreground sm:gap-2.5",t),...s})}function IR({className:t,...s}){return e.jsx("li",{className:Je("inline-flex items-center gap-1.5",t),...s})}function LR({asChild:t,className:s,...a}){const r=t?uv:"a";return e.jsx(r,{className:Je("transition-colors hover:text-foreground",s),...a})}function BR({className:t,...s}){return e.jsx("span",{role:"link","aria-disabled":"true","aria-current":"page",className:Je("font-normal text-foreground",t),...s})}function zR({children:t,className:s,...a}){return e.jsx("li",{role:"presentation","aria-hidden":"true",className:Je("[&>svg]:size-3.5",s),...a,children:t??e.jsx(pv,{})})}const UR=()=>{const{logout:t,user:s}=Es(),a=Ka(),r=hv(),[i,o]=v.useState(""),c=()=>{t(),a("/")},u=p=>{p.preventDefault(),i.trim()&&(a(`/dashboard/search?q=${encodeURIComponent(i.trim())}`),D.info(`Searching for: "${i.trim()}"`))},x=(()=>{const p=r.pathname.split("/").filter(Boolean),g=[];if(p.length>0&&p[0]==="dashboard"&&(g.push({name:"Dashboard",path:"/dashboard"}),p.length>1)){const b=p[1],N={inventory:"Inventory",ecommerce:"E-Commerce",appointments:"Appointments",finances:"Finances",team:"Team","ai-insights":"AI Insights",locations:"Locations",settings:"Settings",profile:"Profile",products:"Products",help:"Help & Support",analytics:"Analytics",maps:"Maps",purchasing:"Purchasing"};g.push({name:N[b]||b.charAt(0).toUpperCase()+b.slice(1),path:`/dashboard/${b}`,current:!0})}return g})(),h=s?.name||s?.fullName||"Admin";return h.split(" ").map(p=>p[0]).join("").toUpperCase(),e.jsxs("header",{className:"bg-card border-b border-border px-6 py-4 shadow-sm",children:[x.length>0&&e.jsx("div",{className:"mb-4",children:e.jsx(MR,{children:e.jsx(FR,{children:x.map((p,g)=>e.jsxs(ft.Fragment,{children:[e.jsx(IR,{children:p.current?e.jsx(BR,{className:"text-primary font-medium",children:p.name}):e.jsx(LR,{href:p.path,className:"text-foreground hover:text-primary transition-colors",children:p.name})}),g<x.length-1&&e.jsx(zR,{})]},p.path))})})}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center space-x-4 flex-1 max-w-md",children:e.jsxs("form",{onSubmit:u,className:"relative flex-1",children:[e.jsx(ia,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(fe,{value:i,onChange:p=>o(p.target.value),placeholder:"Search across modules...",className:"pl-10 bg-accent/50 border-input focus-visible:ring-primary"})]})}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(PR,{}),e.jsx(DR,{}),e.jsxs(bg,{children:[e.jsx(wg,{asChild:!0,children:e.jsxs(R,{variant:"ghost",className:"flex items-center space-x-2 hover:bg-accent",children:[e.jsx(OR,{user:s,size:"sm",editable:!1}),e.jsxs("div",{className:"hidden md:block text-left",children:[e.jsx("p",{className:"text-sm font-medium text-foreground",children:h}),e.jsx("p",{className:"text-xs text-muted-foreground",children:s?.role||"User"})]})]})}),e.jsxs(Sg,{align:"end",className:"border-border",children:[e.jsx(fR,{className:"text-foreground font-medium",children:"My Account"}),e.jsx(iw,{}),e.jsxs(qn,{className:"text-foreground hover:bg-accent focus:bg-accent cursor-pointer",onClick:()=>a("/dashboard/profile"),children:[e.jsx(na,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"Profile"})]}),e.jsxs(qn,{className:"text-foreground hover:bg-accent focus:bg-accent cursor-pointer",onClick:()=>a("/dashboard/wallet"),children:[e.jsx(sd,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"Wallet"})]}),e.jsxs(qn,{className:"text-foreground hover:bg-accent focus:bg-accent cursor-pointer",onClick:()=>a("/dashboard/settings"),children:[e.jsx(Ea,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"Settings"})]}),e.jsx(iw,{}),e.jsxs(qn,{className:"text-destructive hover:bg-destructive/10 focus:bg-destructive/10 cursor-pointer",onClick:c,children:[e.jsx(rf,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"Log out"})]})]})]})]})]})]})};function Ts({className:t,...s}){return e.jsx("textarea",{"data-slot":"textarea",className:Je("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),...s})}const Y4=()=>{const t=hv(),{inviteCode:s}=sl(),{user:a}=Es(),[r,i]=v.useState(!1),[o,c]=v.useState(!1),[u,f]=v.useState("admin"),[x,h]=v.useState([]),[p,g]=v.useState(""),[b,N]=v.useState(!1),[y,S]=v.useState(!1),[C,T]=v.useState([]),[_,G]=v.useState({}),[U,F]=v.useState(!1),[k,E]=v.useState(!1),[A,B]=v.useState(""),[H,M]=v.useState([]),[q,L]=v.useState(!1),[re,V]=v.useState("professional"),[ee,me]=v.useState(!0),[W,se]=v.useState({}),Z=v.useRef(null);v.useRef(null);const I=v.useRef([]),Q=()=>{Z.current?.scrollIntoView({behavior:"smooth"})};v.useEffect(()=>{Q()},[x]),v.useEffect(()=>{const Ne=t.pathname.toLowerCase();Ne.includes("storefront")||Ne.includes("client")?f("storefront"):f("admin")},[t.pathname]),v.useEffect(()=>{const Ne=()=>u==="storefront"?{id:"1",text:"Welcome to our store! 🛍️ I'm your shopping assistant. I can help you find products, track your orders, book appointments, and answer any questions about our services. How can I assist you today?",sender:"support",timestamp:new Date}:{id:"1",text:`Hello ${a?.name||"there"}! 👋 I'm your ominbiz AI Assistant, powered by advanced machine learning. I can help with analytics, inventory insights, sales trends, financial data, and much more. What would you like to explore?`,sender:"support",timestamp:new Date};x.length===0&&h([Ne()])},[u,a,x.length]),v.useEffect(()=>{const Ne=async()=>{try{const Ue=t.pathname.split("/").pop()||"dashboard",st=localStorage.getItem("token"),Ct=localStorage.getItem("customerToken"),Dt={currentPage:Ue,userName:a?.name||"User",userRole:a?.role||(u==="storefront"?"Customer":"Admin"),dashboardType:u,timestamp:new Date().toISOString(),recentActions:JSON.parse(localStorage.getItem("recentActions")||"[]"),aiPersonality:re};if(st&&u==="admin"){const Zt={Authorization:`Bearer ${st}`};try{const[ts,ke,we,nt]=await Promise.allSettled([ye.get("/orders",{headers:Zt}),ye.get("/products",{headers:Zt}),ye.get("/transactions",{headers:Zt}),ye.get("/appointments",{headers:Zt})]),Ye=ts.status==="fulfilled"?ts.value?.data||[]:[],pt=ke.status==="fulfilled"?ke.value?.data||[]:[],yt=we.status==="fulfilled"?we.value?.data||[]:[],Kt=nt.status==="fulfilled"?nt.value?.data||[]:[];Dt.totalOrders=Ye.length,Dt.totalProducts=pt.length,Dt.totalRevenue=Array.isArray(yt)?yt.reduce((Jt,Ut)=>Jt+(Ut.amount||0),0):0,Dt.pendingOrders=Ye.filter(Jt=>Jt.status==="pending").length,Dt.lowStockItems=pt.filter(Jt=>Jt.stock<10).length,Dt.upcomingAppointments=Kt.filter(Jt=>new Date(Jt.date)>new Date).length,se(Dt)}catch(ts){console.error("Error fetching admin data:",ts)}}else if(u==="storefront"&&s)try{const Zt=Ct?{Authorization:`Bearer ${Ct}`}:{},[ts,ke]=await Promise.allSettled([ye.get("/public/products",{params:{inviteCode:s}}),Ct?ye.get("/customer/orders",{headers:Zt}):Promise.resolve({status:"rejected"})]);Dt.availableProducts=ts.status==="fulfilled"&&ts.value?.data?.length||0,Dt.myOrders=ke.status==="fulfilled"&&ke.value?.data?.orders?.length||0}catch(Zt){console.error("Error fetching storefront data:",Zt)}G(Dt),O(Dt),ee&&Me(Dt)}catch(Ue){console.error("Error gathering context:",Ue)}};Ne();const he=setInterval(Ne,3e4);return()=>clearInterval(he)},[t.pathname,a,u,re,ee,s]);const O=Ne=>{const he=[];Ne.dashboardType==="storefront"?Ne.currentPage==="storefront"||Ne.currentPage==="products"?he.push("Show me popular products","What's on sale today?","Help me find a specific item"):Ne.currentPage==="appointments"||Ne.currentPage==="book"?he.push("Book an appointment","Check my booking status","What services are available?"):Ne.currentPage.includes("order")?he.push("Track my order","View my order history","What's my delivery status?"):he.push("Browse products","Check store hours","How can I contact support?"):Ne.currentPage==="dashboard"?he.push("Show today's sales summary","Top performing products?",Ne.lowStockItems>0?`${Ne.lowStockItems} items need restocking`:"Check inventory status"):Ne.currentPage==="analytics"?he.push("Analyze sales trends","Compare monthly performance","Predict next month's revenue"):Ne.currentPage==="inventory"||Ne.currentPage==="products"?he.push("Show low stock alerts","Suggest reorder quantities","Analyze inventory turnover"):Ne.currentPage==="wallet"||Ne.currentPage==="finances"?he.push("Show spending patterns","Revenue breakdown","Cost optimization tips"):Ne.currentPage==="team"?he.push("Team performance metrics","Schedule management","Add new team member"):he.push("Navigate dashboard","Show key metrics","Business insights"),T(he)},te=async(Ne=null)=>{const he=Ne||p;if(!he.trim())return;const Ue={id:Date.now().toString(),text:he,sender:"user",timestamp:new Date};h(Ct=>[...Ct,Ue]),g(""),N(!0),I.current.push({role:"user",content:he,context:_,timestamp:new Date});const st=JSON.parse(localStorage.getItem("recentActions")||"[]");st.unshift({action:"ai_query",query:he,timestamp:new Date}),localStorage.setItem("recentActions",JSON.stringify(st.slice(0,10)));try{const Ct=await oe(he,_,I.current);N(!1);const Dt={id:(Date.now()+1).toString(),text:Ct,sender:"support",timestamp:new Date};h(Zt=>[...Zt,Dt]),I.current.push({role:"assistant",content:Ct,timestamp:new Date}),r||S(!0)}catch(Ct){console.error("AI Response Error:",Ct),N(!1);const Dt={id:(Date.now()+1).toString(),text:"I apologize, but I encountered an issue processing your request. However, based on your context, I can suggest: "+C[0],sender:"support",timestamp:new Date};h(Zt=>[...Zt,Dt])}},oe=async(Ne,he,Ue)=>{try{const st=localStorage.getItem("token")||localStorage.getItem("customerToken"),Ct=je(he,Ue),Dt={...he,...W,conversationCount:Ue.length,personality:re,previousQueries:ce(5)},Zt=await ye.post("/ai/chat",{message:Ne,context:Dt,history:Ue.slice(-10),systemPrompt:Ct,dashboardType:u},{headers:st?{Authorization:`Bearer ${st}`}:{},timeout:3e4});return ee&&Zt.data.response&&ve(Ne,Zt.data.response,he),Zt.data.response}catch(st){return console.error("AI API Error:",st),(st.response?.status===503||st.response?.status===500)&&console.log("AI service unavailable, using intelligent fallback"),Pe(Ne,he)}},je=(Ne,he)=>{const Ue="You are an intelligent AI assistant for ominbiz, powered by Google Gemini AI.";return Ne.dashboardType==="storefront"?`${Ue}

You are assisting a CUSTOMER on the storefront:
- User: ${Ne.userName}
- Role: Customer/Shopper
- Current Page: ${Ne.currentPage}
- Available Products: ${Ne.availableProducts||"N/A"}
- Their Orders: ${Ne.myOrders||0}

Your capabilities:
- Help find and recommend products
- Track orders and deliveries
- Book appointments/services
- Answer questions about products and services
- Provide shopping assistance

Tone: ${re==="friendly"?"Warm, friendly, and helpful":re==="professional"?"Professional but approachable":"Clear and informative"}
- Be customer-focused and sales-oriented
- Recommend products when relevant
- Make shopping easy and enjoyable
- Use emojis sparingly for a friendly touch

This is interaction #${he.length+1}.`:`${Ue}

You are assisting a BUSINESS ADMIN/MANAGER:
- User: ${Ne.userName} (${Ne.userRole})
- Dashboard: Admin/Business Management
- Current Page: ${Ne.currentPage}

Real-time Business Metrics:
- Total Orders: ${Ne.totalOrders||0}
- Total Products: ${Ne.totalProducts||0}
- Total Revenue: $${Ne.totalRevenue||0}
- Pending Orders: ${Ne.pendingOrders||0}
- Low Stock Items: ${Ne.lowStockItems||0}
- Upcoming Appointments: ${Ne.upcomingAppointments||0}

You have access to:
- Analytics & Sales Reports
- Inventory Management
- Order Processing
- Financial Data & Wallet
- Team Management
- AI-powered Insights
- Customer Management

Tone: ${re==="technical"?"Technical and data-focused":re==="professional"?"Professional and analytical":"Clear and actionable"}
- Provide data-driven insights
- Offer actionable business recommendations
- Focus on efficiency and growth
- Be concise but comprehensive
- Use business terminology

This is interaction #${he.length+1} with this user.`},Me=v.useCallback(Ne=>{try{const he=JSON.parse(localStorage.getItem("aiTrainingContexts")||"[]");he.push({...Ne,timestamp:new Date().toISOString(),sessionId:localStorage.getItem("sessionId")||Date.now().toString()}),localStorage.setItem("aiTrainingContexts",JSON.stringify(he.slice(-200)))}catch(he){console.error("Context storage error:",he)}},[]),ve=(Ne,he,Ue)=>{try{const st=JSON.parse(localStorage.getItem("aiSuccessfulInteractions")||"[]");st.push({question:Ne,answer:he,context:{page:Ue.currentPage,dashboardType:Ue.dashboardType,userRole:Ue.userRole},timestamp:new Date().toISOString(),rating:null}),localStorage.setItem("aiSuccessfulInteractions",JSON.stringify(st.slice(-500)))}catch(st){console.error("Interaction storage error:",st)}},ce=(Ne=5)=>{try{return JSON.parse(localStorage.getItem("aiTrainingData")||"[]").slice(-Ne).map(Ue=>Ue.query)}catch{return[]}},Pe=(Ne,he)=>{const Ue=Ne.toLowerCase(),st=he.dashboardType==="storefront";if(ht(Ne,he),Ue.match(/^(hi|hello|hey|good morning|good afternoon|good evening|greetings)/))if(st){const Dt=["Hello! Welcome to our store. How can I help you find what you're looking for today?","Hi there! I'm here to make your shopping experience amazing. What can I help you with?","Hey! Thanks for visiting. Need help finding products or tracking an order?","Good day! I'm your shopping assistant. How may I assist you?"];return Dt[Math.floor(Math.random()*Dt.length)]}else{const Dt=[`Hello ${he.userName}! Ready to dive into your business metrics. What would you like to explore?`,`Hi ${he.userName}! Your dashboard shows ${he.totalOrders||0} orders and ${he.totalProducts||0} products. How can I help?`,`Good to see you ${he.userName}! I can help with analytics, inventory, or any business insights you need.`,`Hey ${he.userName}! Your business intelligence assistant is ready. What shall we analyze today?`];return Dt[Math.floor(Math.random()*Dt.length)]}if(Ue.includes("how are you")||Ue.includes("how do you do"))return st?"I'm doing great, thanks for asking! I'm here to help you find the perfect products. What are you shopping for today?":"I'm functioning optimally! All systems ready to assist with your business operations. What can I help you analyze today?";if(Ue.includes("what is your name")||Ue.includes("who are you"))return st?"I'm your ominbiz Shopping Assistant, powered by AI! I can help you browse products, track orders, and answer any questions about our store.":`I'm ominbiz Business AI, powered by Google Gemini. I analyze your business data, provide insights, and help optimize operations. I've learned from ${I.current.length} interactions with you!`;if(Ue.includes("thank you")||Ue.includes("thanks"))return"You're welcome! I'm always here to help. Feel free to ask if you need anything else.";if(st){if(Ue.includes("product")||Ue.includes("buy")||Ue.includes("shop"))return`We have ${he.availableProducts||"many"} products available! I can help you find exactly what you need. Are you looking for something specific, or would you like to browse our categories?`;if(Ue.includes("order")||Ue.includes("delivery")||Ue.includes("track"))return he.myOrders>0?`You have ${he.myOrders} order${he.myOrders!==1?"s":""} with us. Would you like me to help you track your latest order or view your order history?`:"You haven't placed any orders yet. Would you like to browse our products? I can help you find what you're looking for!";if(Ue.includes("appointment")||Ue.includes("book"))return"I can help you book an appointment! What type of service are you interested in? Let me show you available time slots."}else{if(Ue.includes("sales")||Ue.includes("revenue"))return`Your current revenue is $${he.totalRevenue?.toFixed(2)||0} from ${he.totalOrders||0} orders. ${he.pendingOrders>0?`You have ${he.pendingOrders} pending orders to process. `:""}Navigate to Analytics for detailed sales trends and insights. Shall I guide you there?`;if(Ue.includes("inventory")||Ue.includes("stock"))return`You have ${he.totalProducts||0} products in inventory. ${he.lowStockItems>0?`⚠️ Alert: ${he.lowStockItems} items are running low on stock!`:"Stock levels look good!"} Check the Inventory page for detailed stock management. Need help?`;if(Ue.includes("appointment"))return`You have ${he.upcomingAppointments||0} upcoming appointments. Navigate to the Appointments page to view the schedule, manage bookings, and set availability. Would you like help with appointment management?`}if(Ue.includes("navigate")||Ue.includes("go to")||Ue.includes("show me"))return`I can help you navigate! Here are the main sections:

Dashboard - Overview & KPIs
Analytics - Sales & Performance
Inventory - Stock Management
Wallet - Financial Transactions
Team - Staff Management
AI Insights - Intelligent Analysis

Which section would you like to visit?`;if(Ue.includes("insight")||Ue.includes("suggest")||Ue.includes("recommend")){const Dt=he.currentPage,Zt=bt();return Dt==="dashboard"?`Here are some insights for your dashboard:

- Check your Analytics page for trend analysis
- Review inventory for low stock items
- Monitor your wallet for expense patterns
- Use AI Insights for predictive analytics${Zt?`

Based on your previous interactions, you frequently ask about `+Zt.topQuery:""}

Would you like me to elaborate on any of these?`:`Based on your activity on the ${Dt} page and ${I.current.length} previous interactions, I suggest exploring related features and checking the AI Insights section for personalized recommendations.`}if(Ue.includes("help")||Ue.includes("how")||Ue.includes("what can you"))return`I'm here to help! I can:

- Answer questions about your business data
- Provide analytics insights
- Help navigate the dashboard
- Suggest optimizations
- Analyze trends
- Track finances
- Learn from our interactions

You're currently on the ${he.currentPage} page with ${he.totalOrders||0} orders. What specific information would you like?`;if(Ue.includes("what can you do")||Ue.includes("your capabilities"))return`I can assist you with:

1. Data Analysis - Review sales, inventory, and financial data
2. Navigation - Guide you through the platform
3. Insights - Provide business intelligence
4. Recommendations - Suggest optimizations
5. Learning - I adapt to your preferences over time

I've learned from ${I.current.length} interactions with you. How can I help today?`;const Ct=ot(Ue);return Ct?`${Ct} ${st?"How can I help you shop today?":`You're on the ${he.currentPage} page. ${C[0]?`Try: "${C[0]}"`:""}`}`:st?`I understand you're asking about "${Ne}". While I process that, you have ${he.availableProducts||"many"} products to browse and ${he.myOrders||0} order${he.myOrders!==1?"s":""}. ${C[0]?`You might want to: "${C[0]}"`:"How else can I help?"}`:`I understand your query about "${Ne}". Currently on ${he.currentPage} page - you have ${he.totalOrders||0} orders, $${he.totalRevenue?.toFixed(2)||0} revenue, and ${he.totalProducts||0} products. ${C[0]?`Try: "${C[0]}"`:"What would you like to explore?"}`},Qe=v.useCallback(()=>{if(!("webkitSpeechRecognition"in window)&&!("SpeechRecognition"in window)){alert("Voice input is not supported in your browser. Please use Chrome or Edge.");return}const Ne=window.SpeechRecognition||window.webkitSpeechRecognition,he=new Ne;he.continuous=!1,he.interimResults=!1,he.lang="en-US",he.onstart=()=>{L(!0)},he.onresult=Ue=>{const st=Ue.results[0][0].transcript;g(st),L(!1)},he.onerror=Ue=>{console.error("Speech recognition error:",Ue.error),L(!1),Ue.error==="no-speech"&&alert("No speech detected. Please try again.")},he.onend=()=>{L(!1)},q?he.stop():he.start()},[q]),vt=v.useCallback(Ne=>{navigator.clipboard.writeText(Ne).then(()=>{})},[]),xt=v.useCallback((Ne,he)=>{try{const Ue=JSON.parse(localStorage.getItem("aiResponseRatings")||"[]");Ue.push({messageId:Ne,isPositive:he,timestamp:new Date().toISOString()}),localStorage.setItem("aiResponseRatings",JSON.stringify(Ue))}catch(Ue){console.error("Rating storage error:",Ue)}},[]),ht=(Ne,he)=>{try{const Ue=JSON.parse(localStorage.getItem("aiTrainingData")||"[]");Ue.push({query:Ne.toLowerCase(),context:{page:he.currentPage,timestamp:new Date().toISOString(),userRole:he.userRole},sessionId:localStorage.getItem("sessionId")||Date.now().toString()}),localStorage.setItem("aiTrainingData",JSON.stringify(Ue.slice(-100)));const st=JSON.parse(localStorage.getItem("aiQueryFrequency")||"{}"),Ct=Ne.toLowerCase().substring(0,50);st[Ct]=(st[Ct]||0)+1,localStorage.setItem("aiQueryFrequency",JSON.stringify(st))}catch(Ue){console.error("Learning storage error:",Ue)}},bt=()=>{try{const Ne=JSON.parse(localStorage.getItem("aiQueryFrequency")||"{}"),he=Object.entries(Ne);if(he.length===0)return null;const Ue=he.reduce((st,Ct)=>st[1]>Ct[1]?st:Ct);return{topQuery:Ue[0],count:Ue[1]}}catch{return null}},ot=Ne=>{try{const Ue=JSON.parse(localStorage.getItem("aiTrainingData")||"[]").filter(st=>st.query.includes(Ne.substring(0,10))||Ne.includes(st.query.substring(0,10)));return Ue.length>0?`Based on ${Ue.length} similar previous queries, I can help you with that.`:null}catch{return null}};v.useEffect(()=>{const Ne=localStorage.getItem("ai_conversation_history");if(Ne)try{const he=JSON.parse(Ne);M(he)}catch(he){console.error("Error loading history:",he)}},[]);const hs=()=>{const he=[{id:Date.now().toString(),date:new Date().toISOString(),messages:x,context:_,summary:x.length>1?x[1].text.substring(0,50)+"...":"New conversation"},...H].slice(0,50);M(he),localStorage.setItem("ai_conversation_history",JSON.stringify(he))},fs=()=>{const Ne=JSON.stringify(x,null,2),he=new Blob([Ne],{type:"application/json"}),Ue=URL.createObjectURL(he),st=document.createElement("a");st.href=Ue,st.download=`ominbiz-ai-chat-${new Date().toISOString()}.json`,st.click(),URL.revokeObjectURL(Ue)},Ps=()=>{window.confirm("Are you sure you want to clear this conversation?")&&h([{id:"1",text:"Hello! I'm your AI assistant. How can I help you today?",sender:"support",timestamp:new Date}])},ps=Ne=>{const he=H.filter(Ue=>Ue.id!==Ne);M(he),localStorage.setItem("ai_conversation_history",JSON.stringify(he))},As=Ne=>{h(Ne.messages),F(!1)},cs=H.filter(Ne=>Ne.summary.toLowerCase().includes(A.toLowerCase())||Ne.messages.some(he=>he.text.toLowerCase().includes(A.toLowerCase()))),_t=()=>{i(!0),S(!1)},sa=()=>{c(!o)},Te=v.useCallback(async()=>{G(Ne=>({...Ne,timestamp:new Date().toISOString()}))},[]);return e.jsxs(e.Fragment,{children:[!r&&e.jsx("div",{className:"fixed bottom-6 right-6 z-50",children:e.jsxs(R,{onClick:_t,className:Je("h-16 w-16 rounded-full shadow-2xl hover:shadow-primary/50 transition-all duration-300 hover:scale-110","bg-gradient-to-r from-primary to-accent animate-pulse-slow relative"),size:"icon",children:[y&&e.jsx(_e,{className:"absolute -top-1 -right-1 h-5 w-5 rounded-full bg-red-500 text-white text-xs p-0 flex items-center justify-center animate-bounce",children:"1"}),e.jsx("div",{className:"absolute inset-0 rounded-full bg-gradient-to-r from-primary/20 to-accent/20 animate-ping"}),e.jsx(Zs,{className:"h-7 w-7 relative z-10"})]})}),r&&e.jsxs("div",{className:"fixed bottom-6 right-6 z-50",children:[e.jsx("div",{className:"fixed inset-0 bg-black/20 backdrop-blur-sm -z-10",onClick:()=>i(!1)}),e.jsxs(K,{className:Je("shadow-2xl border-2 border-primary/30 flex flex-col overflow-hidden backdrop-blur-md bg-card/95 animate-in slide-in-from-bottom-5 duration-300 transition-all",o?"w-full h-full m-0 rounded-none":"w-96 sm:w-[480px] h-[650px] rounded-2xl"),children:[e.jsxs("div",{className:"relative bg-gradient-to-r from-primary via-accent to-primary text-primary-foreground p-4 shadow-lg",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/10 to-transparent animate-shimmer"}),e.jsxs("div",{className:"relative flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"h-10 w-10 rounded-full bg-primary-foreground/20 flex items-center justify-center backdrop-blur-sm",children:e.jsx(f0,{className:"h-6 w-6"})}),e.jsx("div",{className:"absolute bottom-0 right-0 h-3 w-3 bg-green-500 rounded-full border-2 border-primary animate-pulse"})]}),e.jsxs("div",{children:[e.jsxs("p",{className:"font-bold text-lg flex items-center gap-2",children:["AI Assistant",e.jsx(Mn,{className:"h-4 w-4 animate-spin-slow"})]}),e.jsx("p",{className:"text-xs opacity-90",children:b?"Typing...":"Online • Ready to help"})]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(R,{variant:"ghost",size:"icon",onClick:Te,className:"text-primary-foreground hover:bg-primary-foreground/20 transition-all duration-300",title:"Refresh Data",children:e.jsx(is,{className:"h-4 w-4"})}),e.jsx(R,{variant:"ghost",size:"icon",onClick:()=>F(!U),className:"text-primary-foreground hover:bg-primary-foreground/20 transition-all duration-300",title:"Conversation History",children:e.jsx(Dl,{className:"h-4 w-4"})}),e.jsx(R,{variant:"ghost",size:"icon",onClick:()=>E(!k),className:"text-primary-foreground hover:bg-primary-foreground/20 transition-all duration-300",title:"Settings",children:e.jsx(Ea,{className:"h-4 w-4"})}),e.jsx(R,{variant:"ghost",size:"icon",onClick:sa,className:"text-primary-foreground hover:bg-primary-foreground/20 transition-all duration-300",title:o?"Minimize":"Maximize",children:o?e.jsx(m_,{className:"h-4 w-4"}):e.jsx(h_,{className:"h-4 w-4"})}),e.jsx(R,{variant:"ghost",size:"icon",onClick:fs,className:"text-primary-foreground hover:bg-primary-foreground/20 transition-all duration-300",title:"Export Conversation",children:e.jsx(Pa,{className:"h-4 w-4"})}),e.jsx(R,{variant:"ghost",size:"icon",onClick:Ps,className:"text-primary-foreground hover:bg-primary-foreground/20 transition-all duration-300",title:"Clear Conversation",children:e.jsx(fa,{className:"h-4 w-4"})}),e.jsx(R,{variant:"ghost",size:"icon",onClick:()=>i(!1),className:"text-primary-foreground hover:bg-primary-foreground/20 hover:rotate-90 transition-all duration-300",children:e.jsx(yr,{className:"h-5 w-5"})})]})]}),e.jsxs("div",{className:"relative mt-2 flex items-center justify-between gap-2 flex-wrap",children:[e.jsx("div",{className:"flex items-center gap-2",children:u==="admin"?e.jsxs(e.Fragment,{children:[e.jsxs(_e,{variant:"secondary",className:"text-xs bg-primary-foreground/20",children:[e.jsx(er,{className:"h-3 w-3 mr-1"}),"$",W.totalRevenue?.toFixed(0)||0]}),e.jsxs(_e,{variant:"secondary",className:"text-xs bg-primary-foreground/20",children:[e.jsx(qt,{className:"h-3 w-3 mr-1"}),W.totalOrders||0," orders"]}),W.lowStockItems>0&&e.jsxs(_e,{variant:"destructive",className:"text-xs animate-pulse",children:[e.jsx(Cs,{className:"h-3 w-3 mr-1"}),W.lowStockItems," low stock"]})]}):e.jsxs(e.Fragment,{children:[e.jsxs(_e,{variant:"secondary",className:"text-xs bg-primary-foreground/20",children:[e.jsx(js,{className:"h-3 w-3 mr-1"}),_.availableProducts||0," products"]}),e.jsxs(_e,{variant:"secondary",className:"text-xs bg-primary-foreground/20",children:[_.myOrders||0," my orders"]})]})}),I.current.length>2&&e.jsxs(_e,{variant:"secondary",className:"text-xs bg-primary-foreground/20",children:[e.jsx(pi,{className:"h-3 w-3 mr-1"}),I.current.length," learned"]})]})]}),k&&e.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 bg-muted/30",children:[e.jsxs("h3",{className:"font-semibold flex items-center gap-2",children:[e.jsx(Ea,{className:"h-4 w-4"}),"AI Assistant Settings"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"AI Personality"}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:["professional","friendly","technical"].map(Ne=>e.jsx(R,{variant:re===Ne?"default":"outline",size:"sm",onClick:()=>V(Ne),className:"capitalize",children:Ne},Ne))})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"AI Training"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Learn from conversations"})]}),e.jsx(R,{variant:ee?"default":"outline",size:"sm",onClick:()=>me(!ee),children:ee?"Enabled":"Disabled"})]}),e.jsxs("div",{className:"border-t pt-3",children:[e.jsx("p",{className:"text-sm font-medium mb-2",children:"Training Statistics"}),e.jsxs("div",{className:"space-y-1 text-xs text-muted-foreground",children:[e.jsxs("p",{children:["• Conversations: ",H.length]}),e.jsxs("p",{children:["• Interactions: ",I.current.length]}),e.jsxs("p",{children:["• Dashboard: ",u==="storefront"?"Customer":"Admin"]}),e.jsxs("p",{children:["• Context Items: ",Object.keys(_).length]})]})]}),e.jsxs(R,{variant:"outline",size:"sm",onClick:hs,className:"w-full",children:[e.jsx(f_,{className:"h-4 w-4 mr-2"}),"Save Current Chat"]})]})]}),U&&e.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-2 bg-muted/30",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(ia,{className:"h-4 w-4 text-muted-foreground"}),e.jsx(fe,{value:A,onChange:Ne=>B(Ne.target.value),placeholder:"Search conversations...",className:"h-8 text-sm"})]}),cs.length===0?e.jsxs("div",{className:"text-center text-sm text-muted-foreground py-8",children:[e.jsx(Dl,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),e.jsx("p",{children:"No conversation history yet"}),e.jsx("p",{className:"text-xs mt-1",children:"Start chatting to build your history"})]}):cs.map(Ne=>e.jsx("div",{className:"p-3 border rounded-lg hover:bg-accent/50 cursor-pointer transition-colors group",onClick:()=>As(Ne),children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium line-clamp-2",children:Ne.summary}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:new Date(Ne.date).toLocaleString()}),e.jsxs(_e,{variant:"outline",className:"text-xs mt-1",children:[Ne.messages.length," messages"]})]}),e.jsx(R,{variant:"ghost",size:"icon",className:"h-6 w-6 opacity-0 group-hover:opacity-100 transition-opacity",onClick:he=>{he.stopPropagation(),ps(Ne.id)},children:e.jsx(fa,{className:"h-3 w-3"})})]})},Ne.id))]}),!U&&!k&&e.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 bg-gradient-to-b from-accent/5 to-transparent",children:[x.map((Ne,he)=>e.jsxs("div",{className:Je("flex gap-2 items-end animate-in slide-in-from-bottom-3",Ne.sender==="user"?"justify-end":"justify-start"),style:{animationDelay:`${he*50}ms`},children:[Ne.sender==="support"&&e.jsx("div",{className:"h-8 w-8 rounded-full bg-accent/20 flex items-center justify-center flex-shrink-0 border-2 border-accent",children:e.jsx(f0,{className:"h-5 w-5 text-accent"})}),e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:Je("max-w-[85%] rounded-2xl p-3 shadow-md transition-all duration-200 hover:shadow-lg group relative",Ne.sender==="user"?"bg-primary text-primary-foreground rounded-br-sm ml-auto":"bg-card border-2 border-accent/30 text-foreground rounded-bl-sm"),children:[e.jsx("p",{className:"text-sm leading-relaxed whitespace-pre-wrap",children:Ne.text}),e.jsxs("div",{className:"flex items-center justify-between mt-1.5",children:[e.jsx("p",{className:"text-xs opacity-70 flex items-center gap-1",children:Ne.timestamp.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}),Ne.sender==="support"&&e.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[e.jsx(R,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:()=>vt(Ne.text),title:"Copy",children:e.jsx(gv,{className:"h-3 w-3"})}),e.jsx(R,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:()=>xt(Ne.id,!0),title:"Helpful",children:e.jsx(Ao,{className:"h-3 w-3"})}),e.jsx(R,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:()=>xt(Ne.id,!1),title:"Not Helpful",children:e.jsx(US,{className:"h-3 w-3"})})]})]})]})}),Ne.sender==="user"&&e.jsx("div",{className:"h-8 w-8 rounded-full bg-primary flex items-center justify-center flex-shrink-0 border-2 border-primary",children:e.jsx(na,{className:"h-5 w-5 text-primary-foreground"})})]},Ne.id)),b&&e.jsxs("div",{className:"flex gap-2 items-end animate-in fade-in duration-300",children:[e.jsx("div",{className:"h-8 w-8 rounded-full bg-accent/20 flex items-center justify-center flex-shrink-0 border-2 border-accent",children:e.jsx(f0,{className:"h-5 w-5 text-accent"})}),e.jsxs("div",{className:"bg-card border-2 border-accent/30 rounded-2xl rounded-bl-sm p-3 flex gap-1",children:[e.jsx("div",{className:"h-2 w-2 rounded-full bg-accent animate-bounce",style:{animationDelay:"0ms"}}),e.jsx("div",{className:"h-2 w-2 rounded-full bg-accent animate-bounce",style:{animationDelay:"150ms"}}),e.jsx("div",{className:"h-2 w-2 rounded-full bg-accent animate-bounce",style:{animationDelay:"300ms"}})]})]}),e.jsx("div",{ref:Z})]}),!U&&!k&&x.length<=2&&e.jsxs("div",{className:"px-4 pb-2 border-t border-border/50 bg-gradient-to-b from-accent/5 to-transparent",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2 mt-3",children:[e.jsx(va,{className:"h-4 w-4 text-accent"}),e.jsx("p",{className:"text-xs font-medium text-accent",children:"Quick Actions:"})]}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:u==="admin"?e.jsxs(e.Fragment,{children:[e.jsxs(R,{variant:"outline",size:"sm",className:"text-xs justify-start",onClick:()=>te("Show sales summary"),children:[e.jsx(ea,{className:"h-3 w-3 mr-1"})," Sales"]}),e.jsxs(R,{variant:"outline",size:"sm",className:"text-xs justify-start",onClick:()=>te("Check inventory"),children:[e.jsx(qt,{className:"h-3 w-3 mr-1"})," Inventory"]}),e.jsxs(R,{variant:"outline",size:"sm",className:"text-xs justify-start",onClick:()=>te("Business insights"),children:[e.jsx(pi,{className:"h-3 w-3 mr-1"})," Insights"]}),e.jsxs(R,{variant:"outline",size:"sm",className:"text-xs justify-start",onClick:()=>te("Team status"),children:[e.jsx(Xt,{className:"h-3 w-3 mr-1"})," Team"]})]}):e.jsxs(e.Fragment,{children:[e.jsxs(R,{variant:"outline",size:"sm",className:"text-xs justify-start",onClick:()=>te("Show products"),children:[e.jsx(js,{className:"h-3 w-3 mr-1"})," Browse"]}),e.jsxs(R,{variant:"outline",size:"sm",className:"text-xs justify-start",onClick:()=>te("Track my order"),children:[e.jsx(qt,{className:"h-3 w-3 mr-1"})," Track Order"]}),e.jsxs(R,{variant:"outline",size:"sm",className:"text-xs justify-start",onClick:()=>te("Book appointment"),children:[e.jsx(Ja,{className:"h-3 w-3 mr-1"})," Book"]}),e.jsxs(R,{variant:"outline",size:"sm",className:"text-xs justify-start",onClick:()=>te("Contact support"),children:[e.jsx(Mn,{className:"h-3 w-3 mr-1"})," Support"]})]})})]}),!U&&!k&&C.length>0&&x.length<=3&&e.jsxs("div",{className:"px-4 pb-2 border-t border-border/50 bg-gradient-to-b from-accent/5 to-transparent",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2 mt-3",children:[e.jsx(Ou,{className:"h-4 w-4 text-accent animate-pulse"}),e.jsx("p",{className:"text-xs font-medium text-accent",children:"Suggested questions:"})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:C.map((Ne,he)=>e.jsx(R,{variant:"outline",size:"sm",onClick:()=>te(Ne),className:"text-xs hover:bg-accent/10 hover:border-accent transition-all",children:Ne},he))})]}),e.jsxs("div",{className:"p-4 border-t-2 border-border bg-card/50 backdrop-blur-sm",children:[_.currentPage&&e.jsxs("div",{className:"mb-2 flex items-center justify-between gap-2 text-xs text-muted-foreground flex-wrap",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(pi,{className:"h-3 w-3 text-accent animate-pulse"}),e.jsx("span",{children:u==="storefront"?"Shopping":_.currentPage}),ee&&e.jsxs(_e,{variant:"secondary",className:"text-xs px-1.5 py-0",children:[e.jsx(Is,{className:"h-3 w-3 mr-1"}),"Training"]})]}),e.jsx("div",{className:"flex items-center gap-1",children:u==="admin"&&_.pendingOrders>0&&e.jsxs(_e,{variant:"destructive",className:"text-xs px-1.5 py-0 animate-pulse",children:[_.pendingOrders," pending"]})})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(Ts,{value:p,onChange:Ne=>g(Ne.target.value),onKeyPress:Ne=>{Ne.key==="Enter"&&!Ne.shiftKey&&(Ne.preventDefault(),te())},placeholder:u==="storefront"?"Ask me anything about products, orders, or services...":"Ask me about analytics, inventory, sales, or anything else...",className:"flex-1 min-h-[40px] max-h-[120px] border-2 border-input focus:border-primary transition-all bg-background/50 backdrop-blur-sm allow-select resize-none",rows:1}),e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx(R,{onClick:Qe,variant:q?"destructive":"outline",size:"icon",className:Je("h-10 w-10 transition-all duration-200",q&&"animate-pulse"),title:q?"Stop recording":"Voice input",children:q?e.jsx(nf,{className:"h-4 w-4"}):e.jsx(lf,{className:"h-4 w-4"})}),e.jsx(R,{onClick:()=>te(),size:"icon",disabled:!p.trim()||b,className:Je("h-10 w-10 transition-all duration-200",p.trim()&&"hover:scale-110 shadow-lg shadow-primary/50"),children:e.jsx(Ma,{className:"h-4 w-4"})})]})]}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-2 text-center flex items-center justify-center gap-1",children:[e.jsx(Mn,{className:"h-3 w-3"}),"Powered by Google Gemini AI • ",u==="storefront"?"Customer":"Business"," Mode • Enter to send"]})]})]})]})]})},VR=()=>e.jsxs("div",{className:"flex h-screen bg-background text-foreground",children:[e.jsx(hR,{}),e.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[e.jsx(UR,{}),e.jsx("main",{className:"flex-1 overflow-auto p-6 bg-background",children:e.jsx(r_,{})})]}),e.jsx(Y4,{})]});function Zn({className:t,...s}){return e.jsx("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:e.jsx("table",{"data-slot":"table",className:Je("w-full caption-bottom text-sm",t),...s})})}function Jn({className:t,...s}){return e.jsx("thead",{"data-slot":"table-header",className:Je("[&_tr]:border-b",t),...s})}function ei({className:t,...s}){return e.jsx("tbody",{"data-slot":"table-body",className:Je("[&_tr:last-child]:border-0",t),...s})}function ma({className:t,...s}){return e.jsx("tr",{"data-slot":"table-row",className:Je("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",t),...s})}function wt({className:t,...s}){return e.jsx("th",{"data-slot":"table-head",className:Je("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",t),...s})}function Nt({className:t,...s}){return e.jsx("td",{"data-slot":"table-cell",className:Je("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",t),...s})}function Ov(t){const s=v.useRef({value:t,previous:t});return v.useMemo(()=>(s.current.value!==t&&(s.current.previous=s.current.value,s.current.value=t),s.current.previous),[t])}var X4=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),$R="VisuallyHidden",HR=v.forwardRef((t,s)=>e.jsx(ca.span,{...t,ref:s,style:{...X4,...t.style}}));HR.displayName=$R;var WR=[" ","Enter","ArrowUp","ArrowDown"],GR=[" ","Enter"],Oo="Select",[$f,Hf,qR]=FS(Oo),[od]=Df(Oo,[qR,Of]),Wf=Of(),[KR,Hl]=od(Oo),[YR,XR]=od(Oo),Q4=t=>{const{__scopeSelect:s,children:a,open:r,defaultOpen:i,onOpenChange:o,value:c,defaultValue:u,onValueChange:f,dir:x,name:h,autoComplete:p,disabled:g,required:b,form:N}=t,y=Wf(s),[S,C]=v.useState(null),[T,_]=v.useState(null),[G,U]=v.useState(!1),F=MS(x),[k,E]=Du({prop:r,defaultProp:i??!1,onChange:o,caller:Oo}),[A,B]=Du({prop:c,defaultProp:u,onChange:f,caller:Oo}),H=v.useRef(null),M=S?N||!!S.closest("form"):!0,[q,L]=v.useState(new Set),re=Array.from(q).map(V=>V.props.value).join(";");return e.jsx(RS,{...y,children:e.jsxs(KR,{required:b,scope:s,trigger:S,onTriggerChange:C,valueNode:T,onValueNodeChange:_,valueNodeHasChildren:G,onValueNodeHasChildrenChange:U,contentId:Rf(),value:A,onValueChange:B,open:k,onOpenChange:E,dir:F,triggerPointerDownPosRef:H,disabled:g,children:[e.jsx($f.Provider,{scope:s,children:e.jsx(YR,{scope:t.__scopeSelect,onNativeOptionAdd:v.useCallback(V=>{L(ee=>new Set(ee).add(V))},[]),onNativeOptionRemove:v.useCallback(V=>{L(ee=>{const me=new Set(ee);return me.delete(V),me})},[]),children:a})}),M?e.jsxs(jC,{"aria-hidden":!0,required:b,tabIndex:-1,name:h,autoComplete:p,value:A,onChange:V=>B(V.target.value),disabled:g,form:N,children:[A===void 0?e.jsx("option",{value:""}):null,Array.from(q)]},re):null]})})};Q4.displayName=Oo;var Z4="SelectTrigger",J4=v.forwardRef((t,s)=>{const{__scopeSelect:a,disabled:r=!1,...i}=t,o=Wf(a),c=Hl(Z4,a),u=c.disabled||r,f=qa(s,c.onTriggerChange),x=Hf(a),h=v.useRef("touch"),[p,g,b]=NC(y=>{const S=x().filter(_=>!_.disabled),C=S.find(_=>_.value===c.value),T=bC(S,y,C);T!==void 0&&c.onValueChange(T.value)}),N=y=>{u||(c.onOpenChange(!0),b()),y&&(c.triggerPointerDownPosRef.current={x:Math.round(y.pageX),y:Math.round(y.pageY)})};return e.jsx(mv,{asChild:!0,...o,children:e.jsx(ca.button,{type:"button",role:"combobox","aria-controls":c.contentId,"aria-expanded":c.open,"aria-required":c.required,"aria-autocomplete":"none",dir:c.dir,"data-state":c.open?"open":"closed",disabled:u,"data-disabled":u?"":void 0,"data-placeholder":yC(c.value)?"":void 0,...i,ref:f,onClick:Vs(i.onClick,y=>{y.currentTarget.focus(),h.current!=="mouse"&&N(y)}),onPointerDown:Vs(i.onPointerDown,y=>{h.current=y.pointerType;const S=y.target;S.hasPointerCapture(y.pointerId)&&S.releasePointerCapture(y.pointerId),y.button===0&&y.ctrlKey===!1&&y.pointerType==="mouse"&&(N(y),y.preventDefault())}),onKeyDown:Vs(i.onKeyDown,y=>{const S=p.current!=="";!(y.ctrlKey||y.altKey||y.metaKey)&&y.key.length===1&&g(y.key),!(S&&y.key===" ")&&WR.includes(y.key)&&(N(),y.preventDefault())})})})});J4.displayName=Z4;var eC="SelectValue",tC=v.forwardRef((t,s)=>{const{__scopeSelect:a,className:r,style:i,children:o,placeholder:c="",...u}=t,f=Hl(eC,a),{onValueNodeHasChildrenChange:x}=f,h=o!==void 0,p=qa(s,f.onValueNodeChange);return Il(()=>{x(h)},[x,h]),e.jsx(ca.span,{...u,ref:p,style:{pointerEvents:"none"},children:yC(f.value)?e.jsx(e.Fragment,{children:c}):o})});tC.displayName=eC;var QR="SelectIcon",sC=v.forwardRef((t,s)=>{const{__scopeSelect:a,children:r,...i}=t;return e.jsx(ca.span,{"aria-hidden":!0,...i,ref:s,children:r||"▼"})});sC.displayName=QR;var ZR="SelectPortal",aC=t=>e.jsx(CS,{asChild:!0,...t});aC.displayName=ZR;var Ro="SelectContent",rC=v.forwardRef((t,s)=>{const a=Hl(Ro,t.__scopeSelect),[r,i]=v.useState();if(Il(()=>{i(new DocumentFragment)},[]),!a.open){const o=r;return o?LS.createPortal(e.jsx(nC,{scope:t.__scopeSelect,children:e.jsx($f.Slot,{scope:t.__scopeSelect,children:e.jsx("div",{children:t.children})})}),o):null}return e.jsx(iC,{...t,ref:s})});rC.displayName=Ro;var Wn=10,[nC,Wl]=od(Ro),JR="SelectContentImpl",eP=ES("SelectContent.RemoveScroll"),iC=v.forwardRef((t,s)=>{const{__scopeSelect:a,position:r="item-aligned",onCloseAutoFocus:i,onEscapeKeyDown:o,onPointerDownOutside:c,side:u,sideOffset:f,align:x,alignOffset:h,arrowPadding:p,collisionBoundary:g,collisionPadding:b,sticky:N,hideWhenDetached:y,avoidCollisions:S,...C}=t,T=Hl(Ro,a),[_,G]=v.useState(null),[U,F]=v.useState(null),k=qa(s,je=>G(je)),[E,A]=v.useState(null),[B,H]=v.useState(null),M=Hf(a),[q,L]=v.useState(!1),re=v.useRef(!1);v.useEffect(()=>{if(_)return TS(_)},[_]),AS();const V=v.useCallback(je=>{const[Me,...ve]=M().map(Qe=>Qe.ref.current),[ce]=ve.slice(-1),Pe=document.activeElement;for(const Qe of je)if(Qe===Pe||(Qe?.scrollIntoView({block:"nearest"}),Qe===Me&&U&&(U.scrollTop=0),Qe===ce&&U&&(U.scrollTop=U.scrollHeight),Qe?.focus(),document.activeElement!==Pe))return},[M,U]),ee=v.useCallback(()=>V([E,_]),[V,E,_]);v.useEffect(()=>{q&&ee()},[q,ee]);const{onOpenChange:me,triggerPointerDownPosRef:W}=T;v.useEffect(()=>{if(_){let je={x:0,y:0};const Me=ce=>{je={x:Math.abs(Math.round(ce.pageX)-(W.current?.x??0)),y:Math.abs(Math.round(ce.pageY)-(W.current?.y??0))}},ve=ce=>{je.x<=10&&je.y<=10?ce.preventDefault():_.contains(ce.target)||me(!1),document.removeEventListener("pointermove",Me),W.current=null};return W.current!==null&&(document.addEventListener("pointermove",Me),document.addEventListener("pointerup",ve,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",Me),document.removeEventListener("pointerup",ve,{capture:!0})}}},[_,me,W]),v.useEffect(()=>{const je=()=>me(!1);return window.addEventListener("blur",je),window.addEventListener("resize",je),()=>{window.removeEventListener("blur",je),window.removeEventListener("resize",je)}},[me]);const[se,Z]=NC(je=>{const Me=M().filter(Pe=>!Pe.disabled),ve=Me.find(Pe=>Pe.ref.current===document.activeElement),ce=bC(Me,je,ve);ce&&setTimeout(()=>ce.ref.current.focus())}),I=v.useCallback((je,Me,ve)=>{const ce=!re.current&&!ve;(T.value!==void 0&&T.value===Me||ce)&&(A(je),ce&&(re.current=!0))},[T.value]),Q=v.useCallback(()=>_?.focus(),[_]),O=v.useCallback((je,Me,ve)=>{const ce=!re.current&&!ve;(T.value!==void 0&&T.value===Me||ce)&&H(je)},[T.value]),te=r==="popper"?Cg:lC,oe=te===Cg?{side:u,sideOffset:f,align:x,alignOffset:h,arrowPadding:p,collisionBoundary:g,collisionPadding:b,sticky:N,hideWhenDetached:y,avoidCollisions:S}:{};return e.jsx(nC,{scope:a,content:_,viewport:U,onViewportChange:F,itemRefCallback:I,selectedItem:E,onItemLeave:Q,itemTextRefCallback:O,focusSelectedItem:ee,selectedItemText:B,position:r,isPositioned:q,searchRef:se,children:e.jsx(kS,{as:eP,allowPinchZoom:!0,children:e.jsx(_S,{asChild:!0,trapped:T.open,onMountAutoFocus:je=>{je.preventDefault()},onUnmountAutoFocus:Vs(i,je=>{T.trigger?.focus({preventScroll:!0}),je.preventDefault()}),children:e.jsx(DS,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:o,onPointerDownOutside:c,onFocusOutside:je=>je.preventDefault(),onDismiss:()=>T.onOpenChange(!1),children:e.jsx(te,{role:"listbox",id:T.contentId,"data-state":T.open?"open":"closed",dir:T.dir,onContextMenu:je=>je.preventDefault(),...C,...oe,onPlaced:()=>L(!0),ref:k,style:{display:"flex",flexDirection:"column",outline:"none",...C.style},onKeyDown:Vs(C.onKeyDown,je=>{const Me=je.ctrlKey||je.altKey||je.metaKey;if(je.key==="Tab"&&je.preventDefault(),!Me&&je.key.length===1&&Z(je.key),["ArrowUp","ArrowDown","Home","End"].includes(je.key)){let ce=M().filter(Pe=>!Pe.disabled).map(Pe=>Pe.ref.current);if(["ArrowUp","End"].includes(je.key)&&(ce=ce.slice().reverse()),["ArrowUp","ArrowDown"].includes(je.key)){const Pe=je.target,Qe=ce.indexOf(Pe);ce=ce.slice(Qe+1)}setTimeout(()=>V(ce)),je.preventDefault()}})})})})})})});iC.displayName=JR;var tP="SelectItemAlignedPosition",lC=v.forwardRef((t,s)=>{const{__scopeSelect:a,onPlaced:r,...i}=t,o=Hl(Ro,a),c=Wl(Ro,a),[u,f]=v.useState(null),[x,h]=v.useState(null),p=qa(s,k=>h(k)),g=Hf(a),b=v.useRef(!1),N=v.useRef(!0),{viewport:y,selectedItem:S,selectedItemText:C,focusSelectedItem:T}=c,_=v.useCallback(()=>{if(o.trigger&&o.valueNode&&u&&x&&y&&S&&C){const k=o.trigger.getBoundingClientRect(),E=x.getBoundingClientRect(),A=o.valueNode.getBoundingClientRect(),B=C.getBoundingClientRect();if(o.dir!=="rtl"){const Pe=B.left-E.left,Qe=A.left-Pe,vt=k.left-Qe,xt=k.width+vt,ht=Math.max(xt,E.width),bt=window.innerWidth-Wn,ot=sf(Qe,[Wn,Math.max(Wn,bt-ht)]);u.style.minWidth=xt+"px",u.style.left=ot+"px"}else{const Pe=E.right-B.right,Qe=window.innerWidth-A.right-Pe,vt=window.innerWidth-k.right-Qe,xt=k.width+vt,ht=Math.max(xt,E.width),bt=window.innerWidth-Wn,ot=sf(Qe,[Wn,Math.max(Wn,bt-ht)]);u.style.minWidth=xt+"px",u.style.right=ot+"px"}const H=g(),M=window.innerHeight-Wn*2,q=y.scrollHeight,L=window.getComputedStyle(x),re=parseInt(L.borderTopWidth,10),V=parseInt(L.paddingTop,10),ee=parseInt(L.borderBottomWidth,10),me=parseInt(L.paddingBottom,10),W=re+V+q+me+ee,se=Math.min(S.offsetHeight*5,W),Z=window.getComputedStyle(y),I=parseInt(Z.paddingTop,10),Q=parseInt(Z.paddingBottom,10),O=k.top+k.height/2-Wn,te=M-O,oe=S.offsetHeight/2,je=S.offsetTop+oe,Me=re+V+je,ve=W-Me;if(Me<=O){const Pe=H.length>0&&S===H[H.length-1].ref.current;u.style.bottom="0px";const Qe=x.clientHeight-y.offsetTop-y.offsetHeight,vt=Math.max(te,oe+(Pe?Q:0)+Qe+ee),xt=Me+vt;u.style.height=xt+"px"}else{const Pe=H.length>0&&S===H[0].ref.current;u.style.top="0px";const vt=Math.max(O,re+y.offsetTop+(Pe?I:0)+oe)+ve;u.style.height=vt+"px",y.scrollTop=Me-O+y.offsetTop}u.style.margin=`${Wn}px 0`,u.style.minHeight=se+"px",u.style.maxHeight=M+"px",r?.(),requestAnimationFrame(()=>b.current=!0)}},[g,o.trigger,o.valueNode,u,x,y,S,C,o.dir,r]);Il(()=>_(),[_]);const[G,U]=v.useState();Il(()=>{x&&U(window.getComputedStyle(x).zIndex)},[x]);const F=v.useCallback(k=>{k&&N.current===!0&&(_(),T?.(),N.current=!1)},[_,T]);return e.jsx(aP,{scope:a,contentWrapper:u,shouldExpandOnScrollRef:b,onScrollButtonChange:F,children:e.jsx("div",{ref:f,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:G},children:e.jsx(ca.div,{...i,ref:p,style:{boxSizing:"border-box",maxHeight:"100%",...i.style}})})})});lC.displayName=tP;var sP="SelectPopperPosition",Cg=v.forwardRef((t,s)=>{const{__scopeSelect:a,align:r="start",collisionPadding:i=Wn,...o}=t,c=Wf(a);return e.jsx(OS,{...c,...o,ref:s,align:r,collisionPadding:i,style:{boxSizing:"border-box",...o.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});Cg.displayName=sP;var[aP,Rv]=od(Ro,{}),Tg="SelectViewport",oC=v.forwardRef((t,s)=>{const{__scopeSelect:a,nonce:r,...i}=t,o=Wl(Tg,a),c=Rv(Tg,a),u=qa(s,o.onViewportChange),f=v.useRef(0);return e.jsxs(e.Fragment,{children:[e.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),e.jsx($f.Slot,{scope:a,children:e.jsx(ca.div,{"data-radix-select-viewport":"",role:"presentation",...i,ref:u,style:{position:"relative",flex:1,overflow:"hidden auto",...i.style},onScroll:Vs(i.onScroll,x=>{const h=x.currentTarget,{contentWrapper:p,shouldExpandOnScrollRef:g}=c;if(g?.current&&p){const b=Math.abs(f.current-h.scrollTop);if(b>0){const N=window.innerHeight-Wn*2,y=parseFloat(p.style.minHeight),S=parseFloat(p.style.height),C=Math.max(y,S);if(C<N){const T=C+b,_=Math.min(N,T),G=T-_;p.style.height=_+"px",p.style.bottom==="0px"&&(h.scrollTop=G>0?G:0,p.style.justifyContent="flex-end")}}}f.current=h.scrollTop})})})]})});oC.displayName=Tg;var cC="SelectGroup",[rP,nP]=od(cC),iP=v.forwardRef((t,s)=>{const{__scopeSelect:a,...r}=t,i=Rf();return e.jsx(rP,{scope:a,id:i,children:e.jsx(ca.div,{role:"group","aria-labelledby":i,...r,ref:s})})});iP.displayName=cC;var dC="SelectLabel",lP=v.forwardRef((t,s)=>{const{__scopeSelect:a,...r}=t,i=nP(dC,a);return e.jsx(ca.div,{id:i.id,...r,ref:s})});lP.displayName=dC;var df="SelectItem",[oP,uC]=od(df),mC=v.forwardRef((t,s)=>{const{__scopeSelect:a,value:r,disabled:i=!1,textValue:o,...c}=t,u=Hl(df,a),f=Wl(df,a),x=u.value===r,[h,p]=v.useState(o??""),[g,b]=v.useState(!1),N=qa(s,T=>f.itemRefCallback?.(T,r,i)),y=Rf(),S=v.useRef("touch"),C=()=>{i||(u.onValueChange(r),u.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return e.jsx(oP,{scope:a,value:r,disabled:i,textId:y,isSelected:x,onItemTextChange:v.useCallback(T=>{p(_=>_||(T?.textContent??"").trim())},[]),children:e.jsx($f.ItemSlot,{scope:a,value:r,disabled:i,textValue:h,children:e.jsx(ca.div,{role:"option","aria-labelledby":y,"data-highlighted":g?"":void 0,"aria-selected":x&&g,"data-state":x?"checked":"unchecked","aria-disabled":i||void 0,"data-disabled":i?"":void 0,tabIndex:i?void 0:-1,...c,ref:N,onFocus:Vs(c.onFocus,()=>b(!0)),onBlur:Vs(c.onBlur,()=>b(!1)),onClick:Vs(c.onClick,()=>{S.current!=="mouse"&&C()}),onPointerUp:Vs(c.onPointerUp,()=>{S.current==="mouse"&&C()}),onPointerDown:Vs(c.onPointerDown,T=>{S.current=T.pointerType}),onPointerMove:Vs(c.onPointerMove,T=>{S.current=T.pointerType,i?f.onItemLeave?.():S.current==="mouse"&&T.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Vs(c.onPointerLeave,T=>{T.currentTarget===document.activeElement&&f.onItemLeave?.()}),onKeyDown:Vs(c.onKeyDown,T=>{f.searchRef?.current!==""&&T.key===" "||(GR.includes(T.key)&&C(),T.key===" "&&T.preventDefault())})})})})});mC.displayName=df;var hu="SelectItemText",hC=v.forwardRef((t,s)=>{const{__scopeSelect:a,className:r,style:i,...o}=t,c=Hl(hu,a),u=Wl(hu,a),f=uC(hu,a),x=XR(hu,a),[h,p]=v.useState(null),g=qa(s,C=>p(C),f.onItemTextChange,C=>u.itemTextRefCallback?.(C,f.value,f.disabled)),b=h?.textContent,N=v.useMemo(()=>e.jsx("option",{value:f.value,disabled:f.disabled,children:b},f.value),[f.disabled,f.value,b]),{onNativeOptionAdd:y,onNativeOptionRemove:S}=x;return Il(()=>(y(N),()=>S(N)),[y,S,N]),e.jsxs(e.Fragment,{children:[e.jsx(ca.span,{id:f.textId,...o,ref:g}),f.isSelected&&c.valueNode&&!c.valueNodeHasChildren?LS.createPortal(o.children,c.valueNode):null]})});hC.displayName=hu;var fC="SelectItemIndicator",xC=v.forwardRef((t,s)=>{const{__scopeSelect:a,...r}=t;return uC(fC,a).isSelected?e.jsx(ca.span,{"aria-hidden":!0,...r,ref:s}):null});xC.displayName=fC;var kg="SelectScrollUpButton",pC=v.forwardRef((t,s)=>{const a=Wl(kg,t.__scopeSelect),r=Rv(kg,t.__scopeSelect),[i,o]=v.useState(!1),c=qa(s,r.onScrollButtonChange);return Il(()=>{if(a.viewport&&a.isPositioned){let u=function(){const x=f.scrollTop>0;o(x)};const f=a.viewport;return u(),f.addEventListener("scroll",u),()=>f.removeEventListener("scroll",u)}},[a.viewport,a.isPositioned]),i?e.jsx(vC,{...t,ref:c,onAutoScroll:()=>{const{viewport:u,selectedItem:f}=a;u&&f&&(u.scrollTop=u.scrollTop-f.offsetHeight)}}):null});pC.displayName=kg;var Eg="SelectScrollDownButton",gC=v.forwardRef((t,s)=>{const a=Wl(Eg,t.__scopeSelect),r=Rv(Eg,t.__scopeSelect),[i,o]=v.useState(!1),c=qa(s,r.onScrollButtonChange);return Il(()=>{if(a.viewport&&a.isPositioned){let u=function(){const x=f.scrollHeight-f.clientHeight,h=Math.ceil(f.scrollTop)<x;o(h)};const f=a.viewport;return u(),f.addEventListener("scroll",u),()=>f.removeEventListener("scroll",u)}},[a.viewport,a.isPositioned]),i?e.jsx(vC,{...t,ref:c,onAutoScroll:()=>{const{viewport:u,selectedItem:f}=a;u&&f&&(u.scrollTop=u.scrollTop+f.offsetHeight)}}):null});gC.displayName=Eg;var vC=v.forwardRef((t,s)=>{const{__scopeSelect:a,onAutoScroll:r,...i}=t,o=Wl("SelectScrollButton",a),c=v.useRef(null),u=Hf(a),f=v.useCallback(()=>{c.current!==null&&(window.clearInterval(c.current),c.current=null)},[]);return v.useEffect(()=>()=>f(),[f]),Il(()=>{u().find(h=>h.ref.current===document.activeElement)?.ref.current?.scrollIntoView({block:"nearest"})},[u]),e.jsx(ca.div,{"aria-hidden":!0,...i,ref:s,style:{flexShrink:0,...i.style},onPointerDown:Vs(i.onPointerDown,()=>{c.current===null&&(c.current=window.setInterval(r,50))}),onPointerMove:Vs(i.onPointerMove,()=>{o.onItemLeave?.(),c.current===null&&(c.current=window.setInterval(r,50))}),onPointerLeave:Vs(i.onPointerLeave,()=>{f()})})}),cP="SelectSeparator",dP=v.forwardRef((t,s)=>{const{__scopeSelect:a,...r}=t;return e.jsx(ca.div,{"aria-hidden":!0,...r,ref:s})});dP.displayName=cP;var Ag="SelectArrow",uP=v.forwardRef((t,s)=>{const{__scopeSelect:a,...r}=t,i=Wf(a),o=Hl(Ag,a),c=Wl(Ag,a);return o.open&&c.position==="popper"?e.jsx(PS,{...i,...r,ref:s}):null});uP.displayName=Ag;var mP="SelectBubbleInput",jC=v.forwardRef(({__scopeSelect:t,value:s,...a},r)=>{const i=v.useRef(null),o=qa(r,i),c=Ov(s);return v.useEffect(()=>{const u=i.current;if(!u)return;const f=window.HTMLSelectElement.prototype,h=Object.getOwnPropertyDescriptor(f,"value").set;if(c!==s&&h){const p=new Event("change",{bubbles:!0});h.call(u,s),u.dispatchEvent(p)}},[c,s]),e.jsx(ca.select,{...a,style:{...X4,...a.style},ref:o,defaultValue:s})});jC.displayName=mP;function yC(t){return t===""||t===void 0}function NC(t){const s=q5(t),a=v.useRef(""),r=v.useRef(0),i=v.useCallback(c=>{const u=a.current+c;s(u),(function f(x){a.current=x,window.clearTimeout(r.current),x!==""&&(r.current=window.setTimeout(()=>f(""),1e3))})(u)},[s]),o=v.useCallback(()=>{a.current="",window.clearTimeout(r.current)},[]);return v.useEffect(()=>()=>window.clearTimeout(r.current),[]),[a,i,o]}function bC(t,s,a){const i=s.length>1&&Array.from(s).every(x=>x===s[0])?s[0]:s,o=a?t.indexOf(a):-1;let c=hP(t,Math.max(o,0));i.length===1&&(c=c.filter(x=>x!==a));const f=c.find(x=>x.textValue.toLowerCase().startsWith(i.toLowerCase()));return f!==a?f:void 0}function hP(t,s){return t.map((a,r)=>t[(s+r)%t.length])}var fP=Q4,xP=J4,pP=tC,gP=sC,vP=aC,jP=rC,yP=oC,NP=mC,bP=hC,wP=xC,SP=pC,CP=gC;function Ot({...t}){return e.jsx(fP,{"data-slot":"select",...t})}function Rt({...t}){return e.jsx(pP,{"data-slot":"select-value",...t})}function Pt({className:t,size:s="default",children:a,...r}){return e.jsxs(xP,{"data-slot":"select-trigger","data-size":s,className:Je("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-fit items-center justify-between gap-2 rounded-md border bg-transparent px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...r,children:[a,e.jsx(gP,{asChild:!0,children:e.jsx(Mf,{className:"size-4 opacity-50"})})]})}function Mt({className:t,children:s,position:a="popper",...r}){return e.jsx(vP,{children:e.jsxs(jP,{"data-slot":"select-content",className:Je("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md",a==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:a,...r,children:[e.jsx(TP,{}),e.jsx(yP,{className:Je("p-1",a==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:s}),e.jsx(kP,{})]})})}function Ee({className:t,children:s,...a}){return e.jsxs(NP,{"data-slot":"select-item",className:Je("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",t),...a,children:[e.jsx("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:e.jsx(wP,{children:e.jsx(wi,{className:"size-4"})})}),e.jsx(bP,{children:s})]})}function TP({className:t,...s}){return e.jsx(SP,{"data-slot":"select-scroll-up-button",className:Je("flex cursor-default items-center justify-center py-1",t),...s,children:e.jsx(x_,{className:"size-4"})})}function kP({className:t,...s}){return e.jsx(CP,{"data-slot":"select-scroll-down-button",className:Je("flex cursor-default items-center justify-center py-1",t),...s,children:e.jsx(Mf,{className:"size-4"})})}const EP=()=>{const[t,s]=v.useState(""),[a,r]=v.useState("all"),[i,o]=v.useState(!1),[c,u]=v.useState(!1),[f,x]=v.useState(""),[h,p]=v.useState([]),[g,b]=v.useState({name:"",sku:"",category:"",stockQuantity:"",reorderLevel:"",price:"",supplierName:"",description:""}),N={name:"",sku:"",category:"",stockQuantity:"",reorderLevel:"",price:"",supplierName:"",description:""},[y,S]=v.useState(!1),[C,T]=v.useState(null);v.useEffect(()=>{(async()=>{const I=localStorage.getItem("token");if(!I){D.error("Please log in to view your products.");return}try{const Q=await ye.get("/products",{headers:{Authorization:`Bearer ${I}`}});p(Q.data)}catch(Q){Q.response?.status===401?D.error("Unauthorized: Please log in again."):D.error("Error fetching products. Please try again later."),console.error("Error fetching products:",Q)}})()},[]);const _=(Z,I)=>{b(Q=>({...Q,[Z]:I}))},G=async()=>{if(["name","sku","category","stockQuantity","price","supplierName"].some(O=>!g[O]?.toString().trim())){D.error("Please fill in all required fields.");return}const Q={...g,stock:Number(g.stockQuantity),reorderLevel:Number(g.reorderLevel),price:Number(g.price)};try{const O=localStorage.getItem("token"),te=await ye.post("/products",Q,{headers:{Authorization:`Bearer ${O}`,"Content-Type":"application/json"}});p(oe=>[...oe,te.data]),b(N),o(!1),D.success("Product added successfully!")}catch(O){D.error(O.response?.data?.error||"Error adding product."),console.error("Error adding product:",O)}},U=Z=>{T({...Z}),S(!0)},F=(Z,I)=>{T(Q=>({...Q,[Z]:I}))},k=async()=>{if(!C)return;const Z={...C,stockQuantity:Number(C.stockQuantity),reorderLevel:Number(C.reorderLevel),price:Number(C.price)};try{const I=localStorage.getItem("token"),Q=await ye.put(`/products/${C._id}`,Z,{headers:{Authorization:`Bearer ${I}`,"Content-Type":"application/json"}});p(O=>O.map(te=>te._id===Q.data._id?Q.data:te)),S(!1),T(null),D.success("Product updated successfully!")}catch(I){D.error(I.response?.data?.error||"Error updating product."),console.error("Error updating product:",I)}},E=async Z=>{if(window.confirm("Are you sure you want to delete this product?"))try{const Q=localStorage.getItem("token");await ye.delete(`/products/${Z}`,{headers:{Authorization:`Bearer ${Q}`,"Content-Type":"application/json"}}),p(O=>O.filter(te=>te._id!==Z)),D.success("Product deleted successfully!")}catch(Q){D.error(Q.response?.data?.error||"Error deleting product."),console.error("Error deleting product:",Q)}},A=(Z,I,Q)=>I===0?e.jsx(_e,{variant:"destructive",children:"Out of Stock"}):I<=Q?e.jsx(_e,{variant:"secondary",children:"Low Stock"}):e.jsx(_e,{variant:"default",children:"In Stock"}),B=h.filter(Z=>{const I=Z.name.toLowerCase().includes(t.toLowerCase())||Z.sku.toLowerCase().includes(t.toLowerCase()),Q=a==="all"||Z.category===a;return I&&Q}),[H,M]=v.useState([]),[q,L]=v.useState(0);v.useEffect(()=>{(async()=>{const I=localStorage.getItem("token");if(I)try{const Q=await ye.get("/services",{headers:{Authorization:`Bearer ${I}`}});M(Q.data||[]);const O=(Q.data||[]).reduce((te,oe)=>te+(oe.price||0)*(oe.bookingsCount||0),0);L(O)}catch(Q){console.error("Error fetching services:",Q)}})()},[]);const re=B.length,V=h.filter(Z=>Z.stockQuantity<=Z.reorderLevel&&Z.stockQuantity>0).length,ee=h.filter(Z=>Z.stockQuantity===0).length,me=h.reduce((Z,I)=>{const Q=Number(I.price)||0,O=Number(I.stockQuantity)||Number(I.stock)||0,te=Q*O;return console.log(`📦 Product: ${I.name}`),console.log(`   Price: KES ${Q}`),console.log(`   Stock: ${O} units`),console.log(`   Value: KES ${te.toFixed(2)}`),console.log("---"),Z+te},0);console.log("💰 TOTAL INVENTORY VALUE:",`KES ${me.toFixed(2)}`),console.log("📊 Total Products:",h.length),console.log("=====================================");const se=(isNaN(me)?0:me).toFixed(2);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Inventory Management"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage your products, stock levels, and suppliers"})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs(R,{variant:"outline",onClick:()=>u(!0),children:[e.jsx(ig,{className:"mr-2 h-4 w-4"}),"Scan Barcode"]}),e.jsxs(Ft,{open:i,onOpenChange:o,children:[e.jsx(Na,{asChild:!0,children:e.jsxs(R,{className:"bg-green-500 cursor-pointer hover:bg-green-400",children:[e.jsx(Hs,{className:"mr-2 h-4 w-4"}),"Add Product"]})}),e.jsxs(It,{children:[e.jsxs(Lt,{children:[e.jsx(Bt,{children:"Add New Product"}),e.jsx(es,{children:"Register a new product to your inventory"})]}),e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(ae,{htmlFor:"product-name",children:"Product Name"}),e.jsx(fe,{id:"product-name",placeholder:"Enter product name",value:g.name,onChange:Z=>_("name",Z.target.value)})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(ae,{htmlFor:"sku",children:"SKU"}),e.jsx(fe,{id:"sku",placeholder:"Product SKU",value:g.sku,onChange:Z=>_("sku",Z.target.value)})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(ae,{htmlFor:"category",children:"Category"}),e.jsx(fe,{id:"category",placeholder:"Enter category",value:g.category,onChange:Z=>_("category",Z.target.value)})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(ae,{htmlFor:"stock",children:"Stock Quantity"}),e.jsx(fe,{id:"stock",type:"number",min:"0",placeholder:"e.g. 25",value:g.stockQuantity,onChange:Z=>_("stockQuantity",Z.target.value)})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(ae,{htmlFor:"reorderLevel",children:"Reorder Level"}),e.jsx(fe,{id:"reorderLevel",type:"number",min:"0",placeholder:"e.g. 10",value:g.reorderLevel,onChange:Z=>_("reorderLevel",Z.target.value)})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(ae,{htmlFor:"price",children:"Price (KES)"}),e.jsx(fe,{id:"price",type:"number",min:"0",step:"1",placeholder:"e.g. 2500",value:g.price,onChange:Z=>_("price",Z.target.value)})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(ae,{htmlFor:"supplier",children:"Supplier"}),e.jsx(fe,{id:"supplier",placeholder:"Supplier name",value:g.supplierName,onChange:Z=>_("supplierName",Z.target.value)})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(ae,{htmlFor:"description",children:"Description (Optional)"}),e.jsx(Ts,{id:"description",placeholder:"Product description",value:g.description,onChange:Z=>_("description",Z.target.value),className:"resize-none"})]})]}),e.jsxs(Rs,{children:[e.jsx(R,{variant:"outline",className:"text-red-500 cursor-pointer hover:text-red-400",onClick:()=>o(!1),children:"Cancel"}),e.jsxs(R,{className:"bg-green-500 cursor-pointer hover:bg-green-400",onClick:G,children:[e.jsx(Ma,{className:"mr-2 h-4 w-4"}),"Add Product"]})]})]})]})]})]}),e.jsxs("div",{className:"grid gap-6 md:grid-cols-4",children:[e.jsxs(K,{children:[e.jsxs(pe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(ge,{className:"text-sm font-medium",children:"Total Products"}),e.jsx(qt,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(X,{children:[e.jsx("div",{className:"text-2xl font-bold",children:re}),e.jsx("p",{className:"text-xs text-muted-foreground",children:re===0?"No products yet":`${re} total products`})]})]}),e.jsxs(K,{children:[e.jsxs(pe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(ge,{className:"text-sm font-medium",children:"Low Stock Items"}),e.jsx(Er,{className:"h-4 w-4 text-orange-500"})]}),e.jsxs(X,{children:[e.jsx("div",{className:"text-2xl font-bold text-orange-600",children:V}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Need immediate attention"})]})]}),e.jsxs(K,{children:[e.jsxs(pe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(ge,{className:"text-sm font-medium",children:"Out of Stock"}),e.jsx(Er,{className:"h-4 w-4 text-red-500"})]}),e.jsxs(X,{children:[e.jsx("div",{className:"text-2xl font-bold text-red-600",children:ee}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Require restocking"})]})]}),e.jsxs(K,{children:[e.jsxs(pe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(ge,{className:"text-sm font-medium",children:"Total Value"}),e.jsx(ea,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(X,{children:[e.jsxs("div",{className:"text-2xl font-bold",children:["KES ",se]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:re>0?`Value of ${re} products`:"No inventory value"})]})]})]}),e.jsxs(K,{children:[e.jsxs(pe,{children:[e.jsx(ge,{children:"Product Inventory"}),e.jsx(lt,{children:"View and manage all your products"})]}),e.jsxs(X,{children:[e.jsxs("div",{className:"flex items-center space-x-4 mb-6",children:[e.jsxs("div",{className:"relative flex-1 max-w-sm",children:[e.jsx(ia,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(fe,{placeholder:"Search products...",value:t,onChange:Z=>s(Z.target.value),className:"pl-10"})]}),e.jsxs(Ot,{value:a,onValueChange:r,children:[e.jsx(Pt,{className:"w-[180px]",children:e.jsx(Rt,{placeholder:"Category"})}),e.jsxs(Mt,{children:[e.jsx(Ee,{value:"all",children:"All Categories"}),e.jsx(Ee,{value:"Hair Care",children:"Hair Care"}),e.jsx(Ee,{value:"Skincare",children:"Skincare"}),e.jsx(Ee,{value:"Equipment",children:"Equipment"})]})]}),e.jsxs(R,{variant:"outline",children:[e.jsx(al,{className:"mr-2 h-4 w-4"}),"More Filters"]})]}),e.jsxs(Zn,{children:[e.jsx(Jn,{children:e.jsxs(ma,{children:[e.jsx(wt,{children:"Product"}),e.jsx(wt,{children:"SKU"}),e.jsx(wt,{children:"Category"}),e.jsx(wt,{children:"Stock"}),e.jsx(wt,{children:"Price"}),e.jsx(wt,{children:"Supplier"}),e.jsx(wt,{children:"Status"}),e.jsx(wt,{children:"Actions"})]})}),e.jsx(ei,{children:B.map((Z,I)=>e.jsxs(ma,{children:[e.jsx(Nt,{className:"font-medium",children:Z.name}),e.jsx(Nt,{children:Z.sku}),e.jsx(Nt,{children:Z.category}),e.jsx(Nt,{children:Z.stockQuantity}),e.jsxs(Nt,{children:["KES ",Z.price?.toLocaleString()||0]}),e.jsx(Nt,{children:Z.supplierName}),e.jsx(Nt,{children:A(Z.status,Z.stock,Z.reorderLevel)}),e.jsx(Nt,{children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(R,{variant:"outline",size:"sm",onClick:()=>U(Z),children:"Edit"}),e.jsx(R,{variant:"destructive",size:"sm",onClick:()=>E(Z._id),children:e.jsx(fa,{className:"h-4 w-4"})})]})})]},Z._id||`product-${I}`))})]})]})]}),y&&C&&e.jsx(Ft,{open:y,onOpenChange:S,children:e.jsxs(It,{children:[e.jsxs(Lt,{children:[e.jsx(Bt,{children:"Edit Product"}),e.jsx(es,{children:"Update product details"})]}),e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(ae,{htmlFor:"edit-product-name",children:"Product Name"}),e.jsx(fe,{id:"edit-product-name",placeholder:"Enter product name",value:C?.name??"",onChange:Z=>F("name",Z.target.value)})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(ae,{htmlFor:"edit-sku",children:"SKU"}),e.jsx(fe,{id:"edit-sku",placeholder:"Product SKU",value:C?.sku??"",onChange:Z=>F("sku",Z.target.value)})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(ae,{htmlFor:"edit-category",children:"Category"}),e.jsx(fe,{id:"edit-category",placeholder:"Enter category",value:C?.category??"",onChange:Z=>F("category",Z.target.value)})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(ae,{htmlFor:"edit-stock",children:"Stock Quantity"}),e.jsx(fe,{id:"edit-stock",type:"number",min:"0",placeholder:"e.g. 25",value:C?.stockQuantity??"",onChange:Z=>F("stockQuantity",Z.target.value)})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(ae,{htmlFor:"edit-reorderLevel",children:"Reorder Level"}),e.jsx(fe,{id:"edit-reorderLevel",type:"number",min:"0",placeholder:"e.g. 10",value:C?.reorderLevel??"",onChange:Z=>F("reorderLevel",Z.target.value)})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(ae,{htmlFor:"edit-price",children:"Price (KES)"}),e.jsx(fe,{id:"edit-price",type:"number",min:"0",step:"1",placeholder:"e.g. 2500",value:C?.price??"",onChange:Z=>F("price",Z.target.value)})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(ae,{htmlFor:"edit-supplier",children:"Supplier"}),e.jsx(fe,{id:"edit-supplier",placeholder:"Supplier name",value:C?.supplierName??"",onChange:Z=>F("supplierName",Z.target.value)})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(ae,{htmlFor:"edit-description",children:"Description (Optional)"}),e.jsx(Ts,{id:"edit-description",placeholder:"Product description",value:C?.description??"",onChange:Z=>F("description",Z.target.value),className:"resize-none"})]})]}),e.jsxs(Rs,{children:[e.jsx(R,{variant:"outline",className:"text-red-500 cursor-pointer hover:text-red-400",onClick:()=>S(!1),children:"Cancel"}),e.jsxs(R,{className:"bg-green-500 cursor-pointer hover:bg-green-400",onClick:k,children:[e.jsx(Ma,{className:"mr-2 h-4 w-4"}),"Save Changes"]})]})]})}),e.jsx(Ft,{open:c,onOpenChange:u,children:e.jsxs(It,{children:[e.jsxs(Lt,{children:[e.jsx(Bt,{children:"Scan Barcode"}),e.jsx(es,{children:"Enter barcode/SKU to search for products"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(ae,{htmlFor:"barcode",children:"Barcode / SKU"}),e.jsx(fe,{id:"barcode",placeholder:"Enter SKU or barcode...",value:f,onChange:Z=>x(Z.target.value),onKeyPress:Z=>{if(Z.key==="Enter"&&f.trim()){const I=h.find(Q=>Q.sku?.toLowerCase()===f.trim().toLowerCase());I?(D.success(`Product found: ${I.name}`),T(I),S(!0),u(!1),x("")):D.error("Product not found")}},autoFocus:!0})]}),e.jsx("div",{className:"text-sm text-muted-foreground",children:e.jsx("p",{children:"💡 Enter the product SKU and press Enter to search"})})]}),e.jsxs(Rs,{children:[e.jsx(R,{variant:"outline",onClick:()=>{u(!1),x("")},children:"Cancel"}),e.jsxs(R,{onClick:()=>{if(f.trim()){const Z=h.find(I=>I.sku?.toLowerCase()===f.trim().toLowerCase());Z?(D.success(`Product found: ${Z.name}`),T(Z),S(!0),u(!1),x("")):D.error("Product not found")}},children:[e.jsx(ia,{className:"mr-2 h-4 w-4"}),"Search"]})]})]})})]})},AP=()=>{const{user:t}=Es(),s=f=>t?(Array.isArray(f)?f:[f]).includes(t.role):!1;return{user:t,hasRole:s,hasPermission:f=>!t||!t.permissions?!1:t.permissions[f]===!0,hasAnyPermission:f=>!t||!t.permissions?!1:f.some(x=>t.permissions[x]===!0),hasAllPermissions:f=>!t||!t.permissions?!1:f.every(x=>t.permissions[x]===!0),isAdmin:()=>s(["admin","super_admin"]),isSuperAdmin:()=>s(["super_admin"]),isClient:()=>s(["client"]),permissions:t?.permissions||{}}};/*! xlsx.js (C) 2013-present SheetJS -- http://sheetjs.com */var uf={};uf.version="0.18.5";var wC=1252,_P=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],SC=function(t){_P.indexOf(t)!=-1&&(wC=t)};function DP(){SC(1252)}var Pu=function(t){SC(t)};function OP(){Pu(1200),DP()}var Dh=function(s){return String.fromCharCode(s)},ow=function(s){return String.fromCharCode(s)},mf,Rl="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function Mu(t){for(var s="",a=0,r=0,i=0,o=0,c=0,u=0,f=0,x=0;x<t.length;)a=t.charCodeAt(x++),o=a>>2,r=t.charCodeAt(x++),c=(a&3)<<4|r>>4,i=t.charCodeAt(x++),u=(r&15)<<2|i>>6,f=i&63,isNaN(r)?u=f=64:isNaN(i)&&(f=64),s+=Rl.charAt(o)+Rl.charAt(c)+Rl.charAt(u)+Rl.charAt(f);return s}function Zi(t){var s="",a=0,r=0,i=0,o=0,c=0,u=0,f=0;t=t.replace(/[^\w\+\/\=]/g,"");for(var x=0;x<t.length;)o=Rl.indexOf(t.charAt(x++)),c=Rl.indexOf(t.charAt(x++)),a=o<<2|c>>4,s+=String.fromCharCode(a),u=Rl.indexOf(t.charAt(x++)),r=(c&15)<<4|u>>2,u!==64&&(s+=String.fromCharCode(r)),f=Rl.indexOf(t.charAt(x++)),i=(u&3)<<6|f,f!==64&&(s+=String.fromCharCode(i));return s}var Fs=(function(){return typeof Buffer<"u"&&typeof process<"u"&&typeof process.versions<"u"&&!!process.versions.node})(),rl=(function(){if(typeof Buffer<"u"){var t=!Buffer.from;if(!t)try{Buffer.from("foo","utf8")}catch{t=!0}return t?function(s,a){return a?new Buffer(s,a):new Buffer(s)}:Buffer.from.bind(Buffer)}return function(){}})();function Po(t){return Fs?Buffer.alloc?Buffer.alloc(t):new Buffer(t):typeof Uint8Array<"u"?new Uint8Array(t):new Array(t)}function cw(t){return Fs?Buffer.allocUnsafe?Buffer.allocUnsafe(t):new Buffer(t):typeof Uint8Array<"u"?new Uint8Array(t):new Array(t)}var Kn=function(s){return Fs?rl(s,"binary"):s.split("").map(function(a){return a.charCodeAt(0)&255})};function Gf(t){if(typeof ArrayBuffer>"u")return Kn(t);for(var s=new ArrayBuffer(t.length),a=new Uint8Array(s),r=0;r!=t.length;++r)a[r]=t.charCodeAt(r)&255;return s}function tm(t){if(Array.isArray(t))return t.map(function(r){return String.fromCharCode(r)}).join("");for(var s=[],a=0;a<t.length;++a)s[a]=String.fromCharCode(t[a]);return s.join("")}function RP(t){if(typeof Uint8Array>"u")throw new Error("Unsupported");return new Uint8Array(t)}var pr=Fs?function(t){return Buffer.concat(t.map(function(s){return Buffer.isBuffer(s)?s:rl(s)}))}:function(t){if(typeof Uint8Array<"u"){var s=0,a=0;for(s=0;s<t.length;++s)a+=t[s].length;var r=new Uint8Array(a),i=0;for(s=0,a=0;s<t.length;a+=i,++s)if(i=t[s].length,t[s]instanceof Uint8Array)r.set(t[s],a);else{if(typeof t[s]=="string")throw"wtf";r.set(new Uint8Array(t[s]),a)}return r}return[].concat.apply([],t.map(function(o){return Array.isArray(o)?o:[].slice.call(o)}))};function PP(t){for(var s=[],a=0,r=t.length+250,i=Po(t.length+255),o=0;o<t.length;++o){var c=t.charCodeAt(o);if(c<128)i[a++]=c;else if(c<2048)i[a++]=192|c>>6&31,i[a++]=128|c&63;else if(c>=55296&&c<57344){c=(c&1023)+64;var u=t.charCodeAt(++o)&1023;i[a++]=240|c>>8&7,i[a++]=128|c>>2&63,i[a++]=128|u>>6&15|(c&3)<<4,i[a++]=128|u&63}else i[a++]=224|c>>12&15,i[a++]=128|c>>6&63,i[a++]=128|c&63;a>r&&(s.push(i.slice(0,a)),a=0,i=Po(65535),r=65530)}return s.push(i.slice(0,a)),pr(s)}var ju=/\u0000/g,Oh=/[\u0001-\u0006]/g;function Vc(t){for(var s="",a=t.length-1;a>=0;)s+=t.charAt(a--);return s}function Xn(t,s){var a=""+t;return a.length>=s?a:Ta("0",s-a.length)+a}function Pv(t,s){var a=""+t;return a.length>=s?a:Ta(" ",s-a.length)+a}function hf(t,s){var a=""+t;return a.length>=s?a:a+Ta(" ",s-a.length)}function MP(t,s){var a=""+Math.round(t);return a.length>=s?a:Ta("0",s-a.length)+a}function FP(t,s){var a=""+t;return a.length>=s?a:Ta("0",s-a.length)+a}var dw=Math.pow(2,32);function Tc(t,s){if(t>dw||t<-dw)return MP(t,s);var a=Math.round(t);return FP(a,s)}function ff(t,s){return s=s||0,t.length>=7+s&&(t.charCodeAt(s)|32)===103&&(t.charCodeAt(s+1)|32)===101&&(t.charCodeAt(s+2)|32)===110&&(t.charCodeAt(s+3)|32)===101&&(t.charCodeAt(s+4)|32)===114&&(t.charCodeAt(s+5)|32)===97&&(t.charCodeAt(s+6)|32)===108}var uw=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],T0=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];function IP(t){return t||(t={}),t[0]="General",t[1]="0",t[2]="0.00",t[3]="#,##0",t[4]="#,##0.00",t[9]="0%",t[10]="0.00%",t[11]="0.00E+00",t[12]="# ?/?",t[13]="# ??/??",t[14]="m/d/yy",t[15]="d-mmm-yy",t[16]="d-mmm",t[17]="mmm-yy",t[18]="h:mm AM/PM",t[19]="h:mm:ss AM/PM",t[20]="h:mm",t[21]="h:mm:ss",t[22]="m/d/yy h:mm",t[37]="#,##0 ;(#,##0)",t[38]="#,##0 ;[Red](#,##0)",t[39]="#,##0.00;(#,##0.00)",t[40]="#,##0.00;[Red](#,##0.00)",t[45]="mm:ss",t[46]="[h]:mm:ss",t[47]="mmss.0",t[48]="##0.0E+0",t[49]="@",t[56]='"上午/下午 "hh"時"mm"分"ss"秒 "',t}var _a={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"上午/下午 "hh"時"mm"分"ss"秒 "'},mw={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},LP={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function xf(t,s,a){for(var r=t<0?-1:1,i=t*r,o=0,c=1,u=0,f=1,x=0,h=0,p=Math.floor(i);x<s&&(p=Math.floor(i),u=p*c+o,h=p*x+f,!(i-p<5e-8));)i=1/(i-p),o=c,c=u,f=x,x=h;if(h>s&&(x>s?(h=f,u=o):(h=x,u=c)),!a)return[0,r*u,h];var g=Math.floor(r*u/h);return[g,r*u-g*h,h]}function Rh(t,s,a){if(t>2958465||t<0)return null;var r=t|0,i=Math.floor(86400*(t-r)),o=0,c=[],u={D:r,T:i,u:86400*(t-r)-i,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(u.u)<1e-6&&(u.u=0),s&&s.date1904&&(r+=1462),u.u>.9999&&(u.u=0,++i==86400&&(u.T=i=0,++r,++u.D)),r===60)c=a?[1317,10,29]:[1900,2,29],o=3;else if(r===0)c=a?[1317,8,29]:[1900,1,0],o=6;else{r>60&&--r;var f=new Date(1900,0,1);f.setDate(f.getDate()+r-1),c=[f.getFullYear(),f.getMonth()+1,f.getDate()],o=f.getDay(),r<60&&(o=(o+6)%7),a&&(o=WP(f,c))}return u.y=c[0],u.m=c[1],u.d=c[2],u.S=i%60,i=Math.floor(i/60),u.M=i%60,i=Math.floor(i/60),u.H=i,u.q=o,u}var CC=new Date(1899,11,31,0,0,0),BP=CC.getTime(),zP=new Date(1900,2,1,0,0,0);function TC(t,s){var a=t.getTime();return s?a-=1461*24*60*60*1e3:t>=zP&&(a+=1440*60*1e3),(a-(BP+(t.getTimezoneOffset()-CC.getTimezoneOffset())*6e4))/(1440*60*1e3)}function Mv(t){return t.indexOf(".")==-1?t:t.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function UP(t){return t.indexOf("E")==-1?t:t.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}function VP(t){var s=t<0?12:11,a=Mv(t.toFixed(12));return a.length<=s||(a=t.toPrecision(10),a.length<=s)?a:t.toExponential(5)}function $P(t){var s=Mv(t.toFixed(11));return s.length>(t<0?12:11)||s==="0"||s==="-0"?t.toPrecision(6):s}function HP(t){var s=Math.floor(Math.log(Math.abs(t))*Math.LOG10E),a;return s>=-4&&s<=-1?a=t.toPrecision(10+s):Math.abs(s)<=9?a=VP(t):s===10?a=t.toFixed(10).substr(0,12):a=$P(t),Mv(UP(a.toUpperCase()))}function _g(t,s){switch(typeof t){case"string":return t;case"boolean":return t?"TRUE":"FALSE";case"number":return(t|0)===t?t.toString(10):HP(t);case"undefined":return"";case"object":if(t==null)return"";if(t instanceof Date)return Ll(14,TC(t,s&&s.date1904),s)}throw new Error("unsupported value in General format: "+t)}function WP(t,s){s[0]-=581;var a=t.getDay();return t<60&&(a=(a+6)%7),a}function GP(t,s,a,r){var i="",o=0,c=0,u=a.y,f,x=0;switch(t){case 98:u=a.y+543;case 121:switch(s.length){case 1:case 2:f=u%100,x=2;break;default:f=u%1e4,x=4;break}break;case 109:switch(s.length){case 1:case 2:f=a.m,x=s.length;break;case 3:return T0[a.m-1][1];case 5:return T0[a.m-1][0];default:return T0[a.m-1][2]}break;case 100:switch(s.length){case 1:case 2:f=a.d,x=s.length;break;case 3:return uw[a.q][0];default:return uw[a.q][1]}break;case 104:switch(s.length){case 1:case 2:f=1+(a.H+11)%12,x=s.length;break;default:throw"bad hour format: "+s}break;case 72:switch(s.length){case 1:case 2:f=a.H,x=s.length;break;default:throw"bad hour format: "+s}break;case 77:switch(s.length){case 1:case 2:f=a.M,x=s.length;break;default:throw"bad minute format: "+s}break;case 115:if(s!="s"&&s!="ss"&&s!=".0"&&s!=".00"&&s!=".000")throw"bad second format: "+s;return a.u===0&&(s=="s"||s=="ss")?Xn(a.S,s.length):(r>=2?c=r===3?1e3:100:c=r===1?10:1,o=Math.round(c*(a.S+a.u)),o>=60*c&&(o=0),s==="s"?o===0?"0":""+o/c:(i=Xn(o,2+r),s==="ss"?i.substr(0,2):"."+i.substr(2,s.length-1)));case 90:switch(s){case"[h]":case"[hh]":f=a.D*24+a.H;break;case"[m]":case"[mm]":f=(a.D*24+a.H)*60+a.M;break;case"[s]":case"[ss]":f=((a.D*24+a.H)*60+a.M)*60+Math.round(a.S+a.u);break;default:throw"bad abstime format: "+s}x=s.length===3?1:2;break;case 101:f=u,x=1;break}var h=x>0?Xn(f,x):"";return h}function Pl(t){var s=3;if(t.length<=s)return t;for(var a=t.length%s,r=t.substr(0,a);a!=t.length;a+=s)r+=(r.length>0?",":"")+t.substr(a,s);return r}var kC=/%/g;function qP(t,s,a){var r=s.replace(kC,""),i=s.length-r.length;return Ki(t,r,a*Math.pow(10,2*i))+Ta("%",i)}function KP(t,s,a){for(var r=s.length-1;s.charCodeAt(r-1)===44;)--r;return Ki(t,s.substr(0,r),a/Math.pow(10,3*(s.length-r)))}function EC(t,s){var a,r=t.indexOf("E")-t.indexOf(".")-1;if(t.match(/^#+0.0E\+0$/)){if(s==0)return"0.0E+0";if(s<0)return"-"+EC(t,-s);var i=t.indexOf(".");i===-1&&(i=t.indexOf("E"));var o=Math.floor(Math.log(s)*Math.LOG10E)%i;if(o<0&&(o+=i),a=(s/Math.pow(10,o)).toPrecision(r+1+(i+o)%i),a.indexOf("e")===-1){var c=Math.floor(Math.log(s)*Math.LOG10E);for(a.indexOf(".")===-1?a=a.charAt(0)+"."+a.substr(1)+"E+"+(c-a.length+o):a+="E+"+(c-o);a.substr(0,2)==="0.";)a=a.charAt(0)+a.substr(2,i)+"."+a.substr(2+i),a=a.replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");a=a.replace(/\+-/,"-")}a=a.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(u,f,x,h){return f+x+h.substr(0,(i+o)%i)+"."+h.substr(o)+"E"})}else a=s.toExponential(r);return t.match(/E\+00$/)&&a.match(/e[+-]\d$/)&&(a=a.substr(0,a.length-1)+"0"+a.charAt(a.length-1)),t.match(/E\-/)&&a.match(/e\+/)&&(a=a.replace(/e\+/,"e")),a.replace("e","E")}var AC=/# (\?+)( ?)\/( ?)(\d+)/;function YP(t,s,a){var r=parseInt(t[4],10),i=Math.round(s*r),o=Math.floor(i/r),c=i-o*r,u=r;return a+(o===0?"":""+o)+" "+(c===0?Ta(" ",t[1].length+1+t[4].length):Pv(c,t[1].length)+t[2]+"/"+t[3]+Xn(u,t[4].length))}function XP(t,s,a){return a+(s===0?"":""+s)+Ta(" ",t[1].length+2+t[4].length)}var _C=/^#*0*\.([0#]+)/,DC=/\).*[0#]/,OC=/\(###\) ###\\?-####/;function Pr(t){for(var s="",a,r=0;r!=t.length;++r)switch(a=t.charCodeAt(r)){case 35:break;case 63:s+=" ";break;case 48:s+="0";break;default:s+=String.fromCharCode(a)}return s}function hw(t,s){var a=Math.pow(10,s);return""+Math.round(t*a)/a}function fw(t,s){var a=t-Math.floor(t),r=Math.pow(10,s);return s<(""+Math.round(a*r)).length?0:Math.round(a*r)}function QP(t,s){return s<(""+Math.round((t-Math.floor(t))*Math.pow(10,s))).length?1:0}function ZP(t){return t<2147483647&&t>-2147483648?""+(t>=0?t|0:t-1|0):""+Math.floor(t)}function _n(t,s,a){if(t.charCodeAt(0)===40&&!s.match(DC)){var r=s.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return a>=0?_n("n",r,a):"("+_n("n",r,-a)+")"}if(s.charCodeAt(s.length-1)===44)return KP(t,s,a);if(s.indexOf("%")!==-1)return qP(t,s,a);if(s.indexOf("E")!==-1)return EC(s,a);if(s.charCodeAt(0)===36)return"$"+_n(t,s.substr(s.charAt(1)==" "?2:1),a);var i,o,c,u,f=Math.abs(a),x=a<0?"-":"";if(s.match(/^00+$/))return x+Tc(f,s.length);if(s.match(/^[#?]+$/))return i=Tc(a,0),i==="0"&&(i=""),i.length>s.length?i:Pr(s.substr(0,s.length-i.length))+i;if(o=s.match(AC))return YP(o,f,x);if(s.match(/^#+0+$/))return x+Tc(f,s.length-s.indexOf("0"));if(o=s.match(_C))return i=hw(a,o[1].length).replace(/^([^\.]+)$/,"$1."+Pr(o[1])).replace(/\.$/,"."+Pr(o[1])).replace(/\.(\d*)$/,function(N,y){return"."+y+Ta("0",Pr(o[1]).length-y.length)}),s.indexOf("0.")!==-1?i:i.replace(/^0\./,".");if(s=s.replace(/^#+([0.])/,"$1"),o=s.match(/^(0*)\.(#*)$/))return x+hw(f,o[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,o[1].length?"0.":".");if(o=s.match(/^#{1,3},##0(\.?)$/))return x+Pl(Tc(f,0));if(o=s.match(/^#,##0\.([#0]*0)$/))return a<0?"-"+_n(t,s,-a):Pl(""+(Math.floor(a)+QP(a,o[1].length)))+"."+Xn(fw(a,o[1].length),o[1].length);if(o=s.match(/^#,#*,#0/))return _n(t,s.replace(/^#,#*,/,""),a);if(o=s.match(/^([0#]+)(\\?-([0#]+))+$/))return i=Vc(_n(t,s.replace(/[\\-]/g,""),a)),c=0,Vc(Vc(s.replace(/\\/g,"")).replace(/[0#]/g,function(N){return c<i.length?i.charAt(c++):N==="0"?"0":""}));if(s.match(OC))return i=_n(t,"##########",a),"("+i.substr(0,3)+") "+i.substr(3,3)+"-"+i.substr(6);var h="";if(o=s.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return c=Math.min(o[4].length,7),u=xf(f,Math.pow(10,c)-1,!1),i=""+x,h=Ki("n",o[1],u[1]),h.charAt(h.length-1)==" "&&(h=h.substr(0,h.length-1)+"0"),i+=h+o[2]+"/"+o[3],h=hf(u[2],c),h.length<o[4].length&&(h=Pr(o[4].substr(o[4].length-h.length))+h),i+=h,i;if(o=s.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return c=Math.min(Math.max(o[1].length,o[4].length),7),u=xf(f,Math.pow(10,c)-1,!0),x+(u[0]||(u[1]?"":"0"))+" "+(u[1]?Pv(u[1],c)+o[2]+"/"+o[3]+hf(u[2],c):Ta(" ",2*c+1+o[2].length+o[3].length));if(o=s.match(/^[#0?]+$/))return i=Tc(a,0),s.length<=i.length?i:Pr(s.substr(0,s.length-i.length))+i;if(o=s.match(/^([#0?]+)\.([#0]+)$/)){i=""+a.toFixed(Math.min(o[2].length,10)).replace(/([^0])0+$/,"$1"),c=i.indexOf(".");var p=s.indexOf(".")-c,g=s.length-i.length-p;return Pr(s.substr(0,p)+i+s.substr(s.length-g))}if(o=s.match(/^00,000\.([#0]*0)$/))return c=fw(a,o[1].length),a<0?"-"+_n(t,s,-a):Pl(ZP(a)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(N){return"00,"+(N.length<3?Xn(0,3-N.length):"")+N})+"."+Xn(c,o[1].length);switch(s){case"###,##0.00":return _n(t,"#,##0.00",a);case"###,###":case"##,###":case"#,###":var b=Pl(Tc(f,0));return b!=="0"?x+b:"";case"###,###.00":return _n(t,"###,##0.00",a).replace(/^0\./,".");case"#,###.00":return _n(t,"#,##0.00",a).replace(/^0\./,".")}throw new Error("unsupported format |"+s+"|")}function JP(t,s,a){for(var r=s.length-1;s.charCodeAt(r-1)===44;)--r;return Ki(t,s.substr(0,r),a/Math.pow(10,3*(s.length-r)))}function eM(t,s,a){var r=s.replace(kC,""),i=s.length-r.length;return Ki(t,r,a*Math.pow(10,2*i))+Ta("%",i)}function RC(t,s){var a,r=t.indexOf("E")-t.indexOf(".")-1;if(t.match(/^#+0.0E\+0$/)){if(s==0)return"0.0E+0";if(s<0)return"-"+RC(t,-s);var i=t.indexOf(".");i===-1&&(i=t.indexOf("E"));var o=Math.floor(Math.log(s)*Math.LOG10E)%i;if(o<0&&(o+=i),a=(s/Math.pow(10,o)).toPrecision(r+1+(i+o)%i),!a.match(/[Ee]/)){var c=Math.floor(Math.log(s)*Math.LOG10E);a.indexOf(".")===-1?a=a.charAt(0)+"."+a.substr(1)+"E+"+(c-a.length+o):a+="E+"+(c-o),a=a.replace(/\+-/,"-")}a=a.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(u,f,x,h){return f+x+h.substr(0,(i+o)%i)+"."+h.substr(o)+"E"})}else a=s.toExponential(r);return t.match(/E\+00$/)&&a.match(/e[+-]\d$/)&&(a=a.substr(0,a.length-1)+"0"+a.charAt(a.length-1)),t.match(/E\-/)&&a.match(/e\+/)&&(a=a.replace(/e\+/,"e")),a.replace("e","E")}function di(t,s,a){if(t.charCodeAt(0)===40&&!s.match(DC)){var r=s.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return a>=0?di("n",r,a):"("+di("n",r,-a)+")"}if(s.charCodeAt(s.length-1)===44)return JP(t,s,a);if(s.indexOf("%")!==-1)return eM(t,s,a);if(s.indexOf("E")!==-1)return RC(s,a);if(s.charCodeAt(0)===36)return"$"+di(t,s.substr(s.charAt(1)==" "?2:1),a);var i,o,c,u,f=Math.abs(a),x=a<0?"-":"";if(s.match(/^00+$/))return x+Xn(f,s.length);if(s.match(/^[#?]+$/))return i=""+a,a===0&&(i=""),i.length>s.length?i:Pr(s.substr(0,s.length-i.length))+i;if(o=s.match(AC))return XP(o,f,x);if(s.match(/^#+0+$/))return x+Xn(f,s.length-s.indexOf("0"));if(o=s.match(_C))return i=(""+a).replace(/^([^\.]+)$/,"$1."+Pr(o[1])).replace(/\.$/,"."+Pr(o[1])),i=i.replace(/\.(\d*)$/,function(N,y){return"."+y+Ta("0",Pr(o[1]).length-y.length)}),s.indexOf("0.")!==-1?i:i.replace(/^0\./,".");if(s=s.replace(/^#+([0.])/,"$1"),o=s.match(/^(0*)\.(#*)$/))return x+(""+f).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,o[1].length?"0.":".");if(o=s.match(/^#{1,3},##0(\.?)$/))return x+Pl(""+f);if(o=s.match(/^#,##0\.([#0]*0)$/))return a<0?"-"+di(t,s,-a):Pl(""+a)+"."+Ta("0",o[1].length);if(o=s.match(/^#,#*,#0/))return di(t,s.replace(/^#,#*,/,""),a);if(o=s.match(/^([0#]+)(\\?-([0#]+))+$/))return i=Vc(di(t,s.replace(/[\\-]/g,""),a)),c=0,Vc(Vc(s.replace(/\\/g,"")).replace(/[0#]/g,function(N){return c<i.length?i.charAt(c++):N==="0"?"0":""}));if(s.match(OC))return i=di(t,"##########",a),"("+i.substr(0,3)+") "+i.substr(3,3)+"-"+i.substr(6);var h="";if(o=s.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return c=Math.min(o[4].length,7),u=xf(f,Math.pow(10,c)-1,!1),i=""+x,h=Ki("n",o[1],u[1]),h.charAt(h.length-1)==" "&&(h=h.substr(0,h.length-1)+"0"),i+=h+o[2]+"/"+o[3],h=hf(u[2],c),h.length<o[4].length&&(h=Pr(o[4].substr(o[4].length-h.length))+h),i+=h,i;if(o=s.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return c=Math.min(Math.max(o[1].length,o[4].length),7),u=xf(f,Math.pow(10,c)-1,!0),x+(u[0]||(u[1]?"":"0"))+" "+(u[1]?Pv(u[1],c)+o[2]+"/"+o[3]+hf(u[2],c):Ta(" ",2*c+1+o[2].length+o[3].length));if(o=s.match(/^[#0?]+$/))return i=""+a,s.length<=i.length?i:Pr(s.substr(0,s.length-i.length))+i;if(o=s.match(/^([#0]+)\.([#0]+)$/)){i=""+a.toFixed(Math.min(o[2].length,10)).replace(/([^0])0+$/,"$1"),c=i.indexOf(".");var p=s.indexOf(".")-c,g=s.length-i.length-p;return Pr(s.substr(0,p)+i+s.substr(s.length-g))}if(o=s.match(/^00,000\.([#0]*0)$/))return a<0?"-"+di(t,s,-a):Pl(""+a).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(N){return"00,"+(N.length<3?Xn(0,3-N.length):"")+N})+"."+Xn(0,o[1].length);switch(s){case"###,###":case"##,###":case"#,###":var b=Pl(""+f);return b!=="0"?x+b:"";default:if(s.match(/\.[0#?]*$/))return di(t,s.slice(0,s.lastIndexOf(".")),a)+Pr(s.slice(s.lastIndexOf(".")))}throw new Error("unsupported format |"+s+"|")}function Ki(t,s,a){return(a|0)===a?di(t,s,a):_n(t,s,a)}function tM(t){for(var s=[],a=!1,r=0,i=0;r<t.length;++r)switch(t.charCodeAt(r)){case 34:a=!a;break;case 95:case 42:case 92:++r;break;case 59:s[s.length]=t.substr(i,r-i),i=r+1}if(s[s.length]=t.substr(i),a===!0)throw new Error("Format |"+t+"| unterminated string ");return s}var PC=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function MC(t){for(var s=0,a="",r="";s<t.length;)switch(a=t.charAt(s)){case"G":ff(t,s)&&(s+=6),s++;break;case'"':for(;t.charCodeAt(++s)!==34&&s<t.length;);++s;break;case"\\":s+=2;break;case"_":s+=2;break;case"@":++s;break;case"B":case"b":if(t.charAt(s+1)==="1"||t.charAt(s+1)==="2")return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"上":if(t.substr(s,3).toUpperCase()==="A/P"||t.substr(s,5).toUpperCase()==="AM/PM"||t.substr(s,5).toUpperCase()==="上午/下午")return!0;++s;break;case"[":for(r=a;t.charAt(s++)!=="]"&&s<t.length;)r+=t.charAt(s);if(r.match(PC))return!0;break;case".":case"0":case"#":for(;s<t.length&&("0#?.,E+-%".indexOf(a=t.charAt(++s))>-1||a=="\\"&&t.charAt(s+1)=="-"&&"0#".indexOf(t.charAt(s+2))>-1););break;case"?":for(;t.charAt(++s)===a;);break;case"*":++s,(t.charAt(s)==" "||t.charAt(s)=="*")&&++s;break;case"(":case")":++s;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;s<t.length&&"0123456789".indexOf(t.charAt(++s))>-1;);break;case" ":++s;break;default:++s;break}return!1}function sM(t,s,a,r){for(var i=[],o="",c=0,u="",f="t",x,h,p,g="H";c<t.length;)switch(u=t.charAt(c)){case"G":if(!ff(t,c))throw new Error("unrecognized character "+u+" in "+t);i[i.length]={t:"G",v:"General"},c+=7;break;case'"':for(o="";(p=t.charCodeAt(++c))!==34&&c<t.length;)o+=String.fromCharCode(p);i[i.length]={t:"t",v:o},++c;break;case"\\":var b=t.charAt(++c),N=b==="("||b===")"?b:"t";i[i.length]={t:N,v:b},++c;break;case"_":i[i.length]={t:"t",v:" "},c+=2;break;case"@":i[i.length]={t:"T",v:s},++c;break;case"B":case"b":if(t.charAt(c+1)==="1"||t.charAt(c+1)==="2"){if(x==null&&(x=Rh(s,a,t.charAt(c+1)==="2"),x==null))return"";i[i.length]={t:"X",v:t.substr(c,2)},f=u,c+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":u=u.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(s<0||x==null&&(x=Rh(s,a),x==null))return"";for(o=u;++c<t.length&&t.charAt(c).toLowerCase()===u;)o+=u;u==="m"&&f.toLowerCase()==="h"&&(u="M"),u==="h"&&(u=g),i[i.length]={t:u,v:o},f=u;break;case"A":case"a":case"上":var y={t:u,v:u};if(x==null&&(x=Rh(s,a)),t.substr(c,3).toUpperCase()==="A/P"?(x!=null&&(y.v=x.H>=12?"P":"A"),y.t="T",g="h",c+=3):t.substr(c,5).toUpperCase()==="AM/PM"?(x!=null&&(y.v=x.H>=12?"PM":"AM"),y.t="T",c+=5,g="h"):t.substr(c,5).toUpperCase()==="上午/下午"?(x!=null&&(y.v=x.H>=12?"下午":"上午"),y.t="T",c+=5,g="h"):(y.t="t",++c),x==null&&y.t==="T")return"";i[i.length]=y,f=u;break;case"[":for(o=u;t.charAt(c++)!=="]"&&c<t.length;)o+=t.charAt(c);if(o.slice(-1)!=="]")throw'unterminated "[" block: |'+o+"|";if(o.match(PC)){if(x==null&&(x=Rh(s,a),x==null))return"";i[i.length]={t:"Z",v:o.toLowerCase()},f=o.charAt(1)}else o.indexOf("$")>-1&&(o=(o.match(/\$([^-\[\]]*)/)||[])[1]||"$",MC(t)||(i[i.length]={t:"t",v:o}));break;case".":if(x!=null){for(o=u;++c<t.length&&(u=t.charAt(c))==="0";)o+=u;i[i.length]={t:"s",v:o};break}case"0":case"#":for(o=u;++c<t.length&&"0#?.,E+-%".indexOf(u=t.charAt(c))>-1;)o+=u;i[i.length]={t:"n",v:o};break;case"?":for(o=u;t.charAt(++c)===u;)o+=u;i[i.length]={t:u,v:o},f=u;break;case"*":++c,(t.charAt(c)==" "||t.charAt(c)=="*")&&++c;break;case"(":case")":i[i.length]={t:r===1?"t":u,v:u},++c;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(o=u;c<t.length&&"0123456789".indexOf(t.charAt(++c))>-1;)o+=t.charAt(c);i[i.length]={t:"D",v:o};break;case" ":i[i.length]={t:u,v:u},++c;break;case"$":i[i.length]={t:"t",v:"$"},++c;break;default:if(",$-+/():!^&'~{}<>=€acfijklopqrtuvwxzP".indexOf(u)===-1)throw new Error("unrecognized character "+u+" in "+t);i[i.length]={t:"t",v:u},++c;break}var S=0,C=0,T;for(c=i.length-1,f="t";c>=0;--c)switch(i[c].t){case"h":case"H":i[c].t=g,f="h",S<1&&(S=1);break;case"s":(T=i[c].v.match(/\.0+$/))&&(C=Math.max(C,T[0].length-1)),S<3&&(S=3);case"d":case"y":case"M":case"e":f=i[c].t;break;case"m":f==="s"&&(i[c].t="M",S<2&&(S=2));break;case"X":break;case"Z":S<1&&i[c].v.match(/[Hh]/)&&(S=1),S<2&&i[c].v.match(/[Mm]/)&&(S=2),S<3&&i[c].v.match(/[Ss]/)&&(S=3)}switch(S){case 0:break;case 1:x.u>=.5&&(x.u=0,++x.S),x.S>=60&&(x.S=0,++x.M),x.M>=60&&(x.M=0,++x.H);break;case 2:x.u>=.5&&(x.u=0,++x.S),x.S>=60&&(x.S=0,++x.M);break}var _="",G;for(c=0;c<i.length;++c)switch(i[c].t){case"t":case"T":case" ":case"D":break;case"X":i[c].v="",i[c].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":i[c].v=GP(i[c].t.charCodeAt(0),i[c].v,x,C),i[c].t="t";break;case"n":case"?":for(G=c+1;i[G]!=null&&((u=i[G].t)==="?"||u==="D"||(u===" "||u==="t")&&i[G+1]!=null&&(i[G+1].t==="?"||i[G+1].t==="t"&&i[G+1].v==="/")||i[c].t==="("&&(u===" "||u==="n"||u===")")||u==="t"&&(i[G].v==="/"||i[G].v===" "&&i[G+1]!=null&&i[G+1].t=="?"));)i[c].v+=i[G].v,i[G]={v:"",t:";"},++G;_+=i[c].v,c=G-1;break;case"G":i[c].t="t",i[c].v=_g(s,a);break}var U="",F,k;if(_.length>0){_.charCodeAt(0)==40?(F=s<0&&_.charCodeAt(0)===45?-s:s,k=Ki("n",_,F)):(F=s<0&&r>1?-s:s,k=Ki("n",_,F),F<0&&i[0]&&i[0].t=="t"&&(k=k.substr(1),i[0].v="-"+i[0].v)),G=k.length-1;var E=i.length;for(c=0;c<i.length;++c)if(i[c]!=null&&i[c].t!="t"&&i[c].v.indexOf(".")>-1){E=c;break}var A=i.length;if(E===i.length&&k.indexOf("E")===-1){for(c=i.length-1;c>=0;--c)i[c]==null||"n?".indexOf(i[c].t)===-1||(G>=i[c].v.length-1?(G-=i[c].v.length,i[c].v=k.substr(G+1,i[c].v.length)):G<0?i[c].v="":(i[c].v=k.substr(0,G+1),G=-1),i[c].t="t",A=c);G>=0&&A<i.length&&(i[A].v=k.substr(0,G+1)+i[A].v)}else if(E!==i.length&&k.indexOf("E")===-1){for(G=k.indexOf(".")-1,c=E;c>=0;--c)if(!(i[c]==null||"n?".indexOf(i[c].t)===-1)){for(h=i[c].v.indexOf(".")>-1&&c===E?i[c].v.indexOf(".")-1:i[c].v.length-1,U=i[c].v.substr(h+1);h>=0;--h)G>=0&&(i[c].v.charAt(h)==="0"||i[c].v.charAt(h)==="#")&&(U=k.charAt(G--)+U);i[c].v=U,i[c].t="t",A=c}for(G>=0&&A<i.length&&(i[A].v=k.substr(0,G+1)+i[A].v),G=k.indexOf(".")+1,c=E;c<i.length;++c)if(!(i[c]==null||"n?(".indexOf(i[c].t)===-1&&c!==E)){for(h=i[c].v.indexOf(".")>-1&&c===E?i[c].v.indexOf(".")+1:0,U=i[c].v.substr(0,h);h<i[c].v.length;++h)G<k.length&&(U+=k.charAt(G++));i[c].v=U,i[c].t="t",A=c}}}for(c=0;c<i.length;++c)i[c]!=null&&"n?".indexOf(i[c].t)>-1&&(F=r>1&&s<0&&c>0&&i[c-1].v==="-"?-s:s,i[c].v=Ki(i[c].t,i[c].v,F),i[c].t="t");var B="";for(c=0;c!==i.length;++c)i[c]!=null&&(B+=i[c].v);return B}var xw=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function pw(t,s){if(s==null)return!1;var a=parseFloat(s[2]);switch(s[1]){case"=":if(t==a)return!0;break;case">":if(t>a)return!0;break;case"<":if(t<a)return!0;break;case"<>":if(t!=a)return!0;break;case">=":if(t>=a)return!0;break;case"<=":if(t<=a)return!0;break}return!1}function aM(t,s){var a=tM(t),r=a.length,i=a[r-1].indexOf("@");if(r<4&&i>-1&&--r,a.length>4)throw new Error("cannot find right format for |"+a.join("|")+"|");if(typeof s!="number")return[4,a.length===4||i>-1?a[a.length-1]:"@"];switch(a.length){case 1:a=i>-1?["General","General","General",a[0]]:[a[0],a[0],a[0],"@"];break;case 2:a=i>-1?[a[0],a[0],a[0],a[1]]:[a[0],a[1],a[0],"@"];break;case 3:a=i>-1?[a[0],a[1],a[0],a[2]]:[a[0],a[1],a[2],"@"];break}var o=s>0?a[0]:s<0?a[1]:a[2];if(a[0].indexOf("[")===-1&&a[1].indexOf("[")===-1)return[r,o];if(a[0].match(/\[[=<>]/)!=null||a[1].match(/\[[=<>]/)!=null){var c=a[0].match(xw),u=a[1].match(xw);return pw(s,c)?[r,a[0]]:pw(s,u)?[r,a[1]]:[r,a[c!=null&&u!=null?2:1]]}return[r,o]}function Ll(t,s,a){a==null&&(a={});var r="";switch(typeof t){case"string":t=="m/d/yy"&&a.dateNF?r=a.dateNF:r=t;break;case"number":t==14&&a.dateNF?r=a.dateNF:r=(a.table!=null?a.table:_a)[t],r==null&&(r=a.table&&a.table[mw[t]]||_a[mw[t]]),r==null&&(r=LP[t]||"General");break}if(ff(r,0))return _g(s,a);s instanceof Date&&(s=TC(s,a.date1904));var i=aM(r,s);if(ff(i[1]))return _g(s,a);if(s===!0)s="TRUE";else if(s===!1)s="FALSE";else if(s===""||s==null)return"";return sM(i[1],s,a,i[0])}function FC(t,s){if(typeof s!="number"){s=+s||-1;for(var a=0;a<392;++a){if(_a[a]==null){s<0&&(s=a);continue}if(_a[a]==t){s=a;break}}s<0&&(s=391)}return _a[s]=t,s}function qf(t){for(var s=0;s!=392;++s)t[s]!==void 0&&FC(t[s],s)}function Kf(){_a=IP()}var IC=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;function rM(t){var s=typeof t=="number"?_a[t]:t;return s=s.replace(IC,"(\\d+)"),new RegExp("^"+s+"$")}function nM(t,s,a){var r=-1,i=-1,o=-1,c=-1,u=-1,f=-1;(s.match(IC)||[]).forEach(function(p,g){var b=parseInt(a[g+1],10);switch(p.toLowerCase().charAt(0)){case"y":r=b;break;case"d":o=b;break;case"h":c=b;break;case"s":f=b;break;case"m":c>=0?u=b:i=b;break}}),f>=0&&u==-1&&i>=0&&(u=i,i=-1);var x=(""+(r>=0?r:new Date().getFullYear())).slice(-4)+"-"+("00"+(i>=1?i:1)).slice(-2)+"-"+("00"+(o>=1?o:1)).slice(-2);x.length==7&&(x="0"+x),x.length==8&&(x="20"+x);var h=("00"+(c>=0?c:0)).slice(-2)+":"+("00"+(u>=0?u:0)).slice(-2)+":"+("00"+(f>=0?f:0)).slice(-2);return c==-1&&u==-1&&f==-1?x:r==-1&&i==-1&&o==-1?h:x+"T"+h}var iM=(function(){var t={};t.version="1.2.0";function s(){for(var k=0,E=new Array(256),A=0;A!=256;++A)k=A,k=k&1?-306674912^k>>>1:k>>>1,k=k&1?-306674912^k>>>1:k>>>1,k=k&1?-306674912^k>>>1:k>>>1,k=k&1?-306674912^k>>>1:k>>>1,k=k&1?-306674912^k>>>1:k>>>1,k=k&1?-306674912^k>>>1:k>>>1,k=k&1?-306674912^k>>>1:k>>>1,k=k&1?-306674912^k>>>1:k>>>1,E[A]=k;return typeof Int32Array<"u"?new Int32Array(E):E}var a=s();function r(k){var E=0,A=0,B=0,H=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(B=0;B!=256;++B)H[B]=k[B];for(B=0;B!=256;++B)for(A=k[B],E=256+B;E<4096;E+=256)A=H[E]=A>>>8^k[A&255];var M=[];for(B=1;B!=16;++B)M[B-1]=typeof Int32Array<"u"?H.subarray(B*256,B*256+256):H.slice(B*256,B*256+256);return M}var i=r(a),o=i[0],c=i[1],u=i[2],f=i[3],x=i[4],h=i[5],p=i[6],g=i[7],b=i[8],N=i[9],y=i[10],S=i[11],C=i[12],T=i[13],_=i[14];function G(k,E){for(var A=E^-1,B=0,H=k.length;B<H;)A=A>>>8^a[(A^k.charCodeAt(B++))&255];return~A}function U(k,E){for(var A=E^-1,B=k.length-15,H=0;H<B;)A=_[k[H++]^A&255]^T[k[H++]^A>>8&255]^C[k[H++]^A>>16&255]^S[k[H++]^A>>>24]^y[k[H++]]^N[k[H++]]^b[k[H++]]^g[k[H++]]^p[k[H++]]^h[k[H++]]^x[k[H++]]^f[k[H++]]^u[k[H++]]^c[k[H++]]^o[k[H++]]^a[k[H++]];for(B+=15;H<B;)A=A>>>8^a[(A^k[H++])&255];return~A}function F(k,E){for(var A=E^-1,B=0,H=k.length,M=0,q=0;B<H;)M=k.charCodeAt(B++),M<128?A=A>>>8^a[(A^M)&255]:M<2048?(A=A>>>8^a[(A^(192|M>>6&31))&255],A=A>>>8^a[(A^(128|M&63))&255]):M>=55296&&M<57344?(M=(M&1023)+64,q=k.charCodeAt(B++)&1023,A=A>>>8^a[(A^(240|M>>8&7))&255],A=A>>>8^a[(A^(128|M>>2&63))&255],A=A>>>8^a[(A^(128|q>>6&15|(M&3)<<4))&255],A=A>>>8^a[(A^(128|q&63))&255]):(A=A>>>8^a[(A^(224|M>>12&15))&255],A=A>>>8^a[(A^(128|M>>6&63))&255],A=A>>>8^a[(A^(128|M&63))&255]);return~A}return t.table=a,t.bstr=G,t.buf=U,t.str=F,t})(),Qs=(function(){var s={};s.version="1.2.1";function a(Y,de){for(var le=Y.split("/"),P=de.split("/"),ie=0,ue=0,Re=Math.min(le.length,P.length);ie<Re;++ie){if(ue=le[ie].length-P[ie].length)return ue;if(le[ie]!=P[ie])return le[ie]<P[ie]?-1:1}return le.length-P.length}function r(Y){if(Y.charAt(Y.length-1)=="/")return Y.slice(0,-1).indexOf("/")===-1?Y:r(Y.slice(0,-1));var de=Y.lastIndexOf("/");return de===-1?Y:Y.slice(0,de+1)}function i(Y){if(Y.charAt(Y.length-1)=="/")return i(Y.slice(0,-1));var de=Y.lastIndexOf("/");return de===-1?Y:Y.slice(de+1)}function o(Y,de){typeof de=="string"&&(de=new Date(de));var le=de.getHours();le=le<<6|de.getMinutes(),le=le<<5|de.getSeconds()>>>1,Y.write_shift(2,le);var P=de.getFullYear()-1980;P=P<<4|de.getMonth()+1,P=P<<5|de.getDate(),Y.write_shift(2,P)}function c(Y){var de=Y.read_shift(2)&65535,le=Y.read_shift(2)&65535,P=new Date,ie=le&31;le>>>=5;var ue=le&15;le>>>=4,P.setMilliseconds(0),P.setFullYear(le+1980),P.setMonth(ue-1),P.setDate(ie);var Re=de&31;de>>>=5;var $e=de&63;return de>>>=6,P.setHours(de),P.setMinutes($e),P.setSeconds(Re<<1),P}function u(Y){hn(Y,0);for(var de={},le=0;Y.l<=Y.length-4;){var P=Y.read_shift(2),ie=Y.read_shift(2),ue=Y.l+ie,Re={};switch(P){case 21589:le=Y.read_shift(1),le&1&&(Re.mtime=Y.read_shift(4)),ie>5&&(le&2&&(Re.atime=Y.read_shift(4)),le&4&&(Re.ctime=Y.read_shift(4))),Re.mtime&&(Re.mt=new Date(Re.mtime*1e3));break}Y.l=ue,de[P]=Re}return de}var f;function x(){return f||(f={})}function h(Y,de){if(Y[0]==80&&Y[1]==75)return yt(Y,de);if((Y[0]|32)==109&&(Y[1]|32)==105)return De(Y,de);if(Y.length<512)throw new Error("CFB file size "+Y.length+" < 512");var le=3,P=512,ie=0,ue=0,Re=0,$e=0,Oe=0,Fe=[],Le=Y.slice(0,512);hn(Le,0);var rt=p(Le);switch(le=rt[0],le){case 3:P=512;break;case 4:P=4096;break;case 0:if(rt[1]==0)return yt(Y,de);default:throw new Error("Major Version: Expected 3 or 4 saw "+le)}P!==512&&(Le=Y.slice(0,P),hn(Le,28));var xe=Y.slice(0,P);g(Le,le);var We=Le.read_shift(4,"i");if(le===3&&We!==0)throw new Error("# Directory Sectors: Expected 0 saw "+We);Le.l+=4,Re=Le.read_shift(4,"i"),Le.l+=4,Le.chk("00100000","Mini Stream Cutoff Size: "),$e=Le.read_shift(4,"i"),ie=Le.read_shift(4,"i"),Oe=Le.read_shift(4,"i"),ue=Le.read_shift(4,"i");for(var Ce=-1,et=0;et<109&&(Ce=Le.read_shift(4,"i"),!(Ce<0));++et)Fe[et]=Ce;var it=b(Y,P);S(Oe,ue,it,P,Fe);var Tt=T(it,Re,Fe,P);Tt[Re].name="!Directory",ie>0&&$e!==q&&(Tt[$e].name="!MiniFAT"),Tt[Fe[0]].name="!FAT",Tt.fat_addrs=Fe,Tt.ssz=P;var Ze={},$t=[],br=[],vn=[];_(Re,Tt,it,$t,ie,Ze,br,$e),N(br,vn,$t),$t.shift();var Br={FileIndex:br,FullPaths:vn};return de&&de.raw&&(Br.raw={header:xe,sectors:it}),Br}function p(Y){if(Y[Y.l]==80&&Y[Y.l+1]==75)return[0,0];Y.chk(L,"Header Signature: "),Y.l+=16;var de=Y.read_shift(2,"u");return[Y.read_shift(2,"u"),de]}function g(Y,de){var le=9;switch(Y.l+=2,le=Y.read_shift(2)){case 9:if(de!=3)throw new Error("Sector Shift: Expected 9 saw "+le);break;case 12:if(de!=4)throw new Error("Sector Shift: Expected 12 saw "+le);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+le)}Y.chk("0600","Mini Sector Shift: "),Y.chk("000000000000","Reserved: ")}function b(Y,de){for(var le=Math.ceil(Y.length/de)-1,P=[],ie=1;ie<le;++ie)P[ie-1]=Y.slice(ie*de,(ie+1)*de);return P[le-1]=Y.slice(le*de),P}function N(Y,de,le){for(var P=0,ie=0,ue=0,Re=0,$e=0,Oe=le.length,Fe=[],Le=[];P<Oe;++P)Fe[P]=Le[P]=P,de[P]=le[P];for(;$e<Le.length;++$e)P=Le[$e],ie=Y[P].L,ue=Y[P].R,Re=Y[P].C,Fe[P]===P&&(ie!==-1&&Fe[ie]!==ie&&(Fe[P]=Fe[ie]),ue!==-1&&Fe[ue]!==ue&&(Fe[P]=Fe[ue])),Re!==-1&&(Fe[Re]=P),ie!==-1&&P!=Fe[P]&&(Fe[ie]=Fe[P],Le.lastIndexOf(ie)<$e&&Le.push(ie)),ue!==-1&&P!=Fe[P]&&(Fe[ue]=Fe[P],Le.lastIndexOf(ue)<$e&&Le.push(ue));for(P=1;P<Oe;++P)Fe[P]===P&&(ue!==-1&&Fe[ue]!==ue?Fe[P]=Fe[ue]:ie!==-1&&Fe[ie]!==ie&&(Fe[P]=Fe[ie]));for(P=1;P<Oe;++P)if(Y[P].type!==0){if($e=P,$e!=Fe[$e])do $e=Fe[$e],de[P]=de[$e]+"/"+de[P];while($e!==0&&Fe[$e]!==-1&&$e!=Fe[$e]);Fe[P]=-1}for(de[0]+="/",P=1;P<Oe;++P)Y[P].type!==2&&(de[P]+="/")}function y(Y,de,le){for(var P=Y.start,ie=Y.size,ue=[],Re=P;le&&ie>0&&Re>=0;)ue.push(de.slice(Re*M,Re*M+M)),ie-=M,Re=go(le,Re*4);return ue.length===0?qe(0):pr(ue).slice(0,Y.size)}function S(Y,de,le,P,ie){var ue=q;if(Y===q){if(de!==0)throw new Error("DIFAT chain shorter than expected")}else if(Y!==-1){var Re=le[Y],$e=(P>>>2)-1;if(!Re)return;for(var Oe=0;Oe<$e&&(ue=go(Re,Oe*4))!==q;++Oe)ie.push(ue);S(go(Re,P-4),de-1,le,P,ie)}}function C(Y,de,le,P,ie){var ue=[],Re=[];ie||(ie=[]);var $e=P-1,Oe=0,Fe=0;for(Oe=de;Oe>=0;){ie[Oe]=!0,ue[ue.length]=Oe,Re.push(Y[Oe]);var Le=le[Math.floor(Oe*4/P)];if(Fe=Oe*4&$e,P<4+Fe)throw new Error("FAT boundary crossed: "+Oe+" 4 "+P);if(!Y[Le])break;Oe=go(Y[Le],Fe)}return{nodes:ue,data:Sw([Re])}}function T(Y,de,le,P){var ie=Y.length,ue=[],Re=[],$e=[],Oe=[],Fe=P-1,Le=0,rt=0,xe=0,We=0;for(Le=0;Le<ie;++Le)if($e=[],xe=Le+de,xe>=ie&&(xe-=ie),!Re[xe]){Oe=[];var Ce=[];for(rt=xe;rt>=0;){Ce[rt]=!0,Re[rt]=!0,$e[$e.length]=rt,Oe.push(Y[rt]);var et=le[Math.floor(rt*4/P)];if(We=rt*4&Fe,P<4+We)throw new Error("FAT boundary crossed: "+rt+" 4 "+P);if(!Y[et]||(rt=go(Y[et],We),Ce[rt]))break}ue[xe]={nodes:$e,data:Sw([Oe])}}return ue}function _(Y,de,le,P,ie,ue,Re,$e){for(var Oe=0,Fe=P.length?2:0,Le=de[Y].data,rt=0,xe=0,We;rt<Le.length;rt+=128){var Ce=Le.slice(rt,rt+128);hn(Ce,64),xe=Ce.read_shift(2),We=zv(Ce,0,xe-Fe),P.push(We);var et={name:We,type:Ce.read_shift(1),color:Ce.read_shift(1),L:Ce.read_shift(4,"i"),R:Ce.read_shift(4,"i"),C:Ce.read_shift(4,"i"),clsid:Ce.read_shift(16),state:Ce.read_shift(4,"i"),start:0,size:0},it=Ce.read_shift(2)+Ce.read_shift(2)+Ce.read_shift(2)+Ce.read_shift(2);it!==0&&(et.ct=G(Ce,Ce.l-8));var Tt=Ce.read_shift(2)+Ce.read_shift(2)+Ce.read_shift(2)+Ce.read_shift(2);Tt!==0&&(et.mt=G(Ce,Ce.l-8)),et.start=Ce.read_shift(4,"i"),et.size=Ce.read_shift(4,"i"),et.size<0&&et.start<0&&(et.size=et.type=0,et.start=q,et.name=""),et.type===5?(Oe=et.start,ie>0&&Oe!==q&&(de[Oe].name="!StreamData")):et.size>=4096?(et.storage="fat",de[et.start]===void 0&&(de[et.start]=C(le,et.start,de.fat_addrs,de.ssz)),de[et.start].name=et.name,et.content=de[et.start].data.slice(0,et.size)):(et.storage="minifat",et.size<0?et.size=0:Oe!==q&&et.start!==q&&de[Oe]&&(et.content=y(et,de[Oe].data,(de[$e]||{}).data))),et.content&&hn(et.content,0),ue[We]=et,Re.push(et)}}function G(Y,de){return new Date((xn(Y,de+4)/1e7*Math.pow(2,32)+xn(Y,de)/1e7-11644473600)*1e3)}function U(Y,de){return x(),h(f.readFileSync(Y),de)}function F(Y,de){var le=de&&de.type;switch(le||Fs&&Buffer.isBuffer(Y)&&(le="buffer"),le||"base64"){case"file":return U(Y,de);case"base64":return h(Kn(Zi(Y)),de);case"binary":return h(Kn(Y),de)}return h(Y,de)}function k(Y,de){var le=de||{},P=le.root||"Root Entry";if(Y.FullPaths||(Y.FullPaths=[]),Y.FileIndex||(Y.FileIndex=[]),Y.FullPaths.length!==Y.FileIndex.length)throw new Error("inconsistent CFB structure");Y.FullPaths.length===0&&(Y.FullPaths[0]=P+"/",Y.FileIndex[0]={name:P,type:5}),le.CLSID&&(Y.FileIndex[0].clsid=le.CLSID),E(Y)}function E(Y){var de="Sh33tJ5";if(!Qs.find(Y,"/"+de)){var le=qe(4);le[0]=55,le[1]=le[3]=50,le[2]=54,Y.FileIndex.push({name:de,type:2,content:le,size:4,L:69,R:69,C:69}),Y.FullPaths.push(Y.FullPaths[0]+de),A(Y)}}function A(Y,de){k(Y);for(var le=!1,P=!1,ie=Y.FullPaths.length-1;ie>=0;--ie){var ue=Y.FileIndex[ie];switch(ue.type){case 0:P?le=!0:(Y.FileIndex.pop(),Y.FullPaths.pop());break;case 1:case 2:case 5:P=!0,isNaN(ue.R*ue.L*ue.C)&&(le=!0),ue.R>-1&&ue.L>-1&&ue.R==ue.L&&(le=!0);break;default:le=!0;break}}if(!(!le&&!de)){var Re=new Date(1987,1,19),$e=0,Oe=Object.create?Object.create(null):{},Fe=[];for(ie=0;ie<Y.FullPaths.length;++ie)Oe[Y.FullPaths[ie]]=!0,Y.FileIndex[ie].type!==0&&Fe.push([Y.FullPaths[ie],Y.FileIndex[ie]]);for(ie=0;ie<Fe.length;++ie){var Le=r(Fe[ie][0]);P=Oe[Le],P||(Fe.push([Le,{name:i(Le).replace("/",""),type:1,clsid:V,ct:Re,mt:Re,content:null}]),Oe[Le]=!0)}for(Fe.sort(function(We,Ce){return a(We[0],Ce[0])}),Y.FullPaths=[],Y.FileIndex=[],ie=0;ie<Fe.length;++ie)Y.FullPaths[ie]=Fe[ie][0],Y.FileIndex[ie]=Fe[ie][1];for(ie=0;ie<Fe.length;++ie){var rt=Y.FileIndex[ie],xe=Y.FullPaths[ie];if(rt.name=i(xe).replace("/",""),rt.L=rt.R=rt.C=-(rt.color=1),rt.size=rt.content?rt.content.length:0,rt.start=0,rt.clsid=rt.clsid||V,ie===0)rt.C=Fe.length>1?1:-1,rt.size=0,rt.type=5;else if(xe.slice(-1)=="/"){for($e=ie+1;$e<Fe.length&&r(Y.FullPaths[$e])!=xe;++$e);for(rt.C=$e>=Fe.length?-1:$e,$e=ie+1;$e<Fe.length&&r(Y.FullPaths[$e])!=r(xe);++$e);rt.R=$e>=Fe.length?-1:$e,rt.type=1}else r(Y.FullPaths[ie+1]||"")==r(xe)&&(rt.R=ie+1),rt.type=2}}}function B(Y,de){var le=de||{};if(le.fileType=="mad")return Ge(Y,le);switch(A(Y),le.fileType){case"zip":return Jt(Y,le)}var P=(function(We){for(var Ce=0,et=0,it=0;it<We.FileIndex.length;++it){var Tt=We.FileIndex[it];if(Tt.content){var Ze=Tt.content.length;Ze>0&&(Ze<4096?Ce+=Ze+63>>6:et+=Ze+511>>9)}}for(var $t=We.FullPaths.length+3>>2,br=Ce+7>>3,vn=Ce+127>>7,Br=br+et+$t+vn,zr=Br+127>>7,jn=zr<=109?0:Math.ceil((zr-109)/127);Br+zr+jn+127>>7>zr;)jn=++zr<=109?0:Math.ceil((zr-109)/127);var wr=[1,jn,zr,vn,$t,et,Ce,0];return We.FileIndex[0].size=Ce<<6,wr[7]=(We.FileIndex[0].start=wr[0]+wr[1]+wr[2]+wr[3]+wr[4]+wr[5])+(wr[6]+7>>3),wr})(Y),ie=qe(P[7]<<9),ue=0,Re=0;{for(ue=0;ue<8;++ue)ie.write_shift(1,re[ue]);for(ue=0;ue<8;++ue)ie.write_shift(2,0);for(ie.write_shift(2,62),ie.write_shift(2,3),ie.write_shift(2,65534),ie.write_shift(2,9),ie.write_shift(2,6),ue=0;ue<3;++ue)ie.write_shift(2,0);for(ie.write_shift(4,0),ie.write_shift(4,P[2]),ie.write_shift(4,P[0]+P[1]+P[2]+P[3]-1),ie.write_shift(4,0),ie.write_shift(4,4096),ie.write_shift(4,P[3]?P[0]+P[1]+P[2]-1:q),ie.write_shift(4,P[3]),ie.write_shift(-4,P[1]?P[0]-1:q),ie.write_shift(4,P[1]),ue=0;ue<109;++ue)ie.write_shift(-4,ue<P[2]?P[1]+ue:-1)}if(P[1])for(Re=0;Re<P[1];++Re){for(;ue<236+Re*127;++ue)ie.write_shift(-4,ue<P[2]?P[1]+ue:-1);ie.write_shift(-4,Re===P[1]-1?q:Re+1)}var $e=function(We){for(Re+=We;ue<Re-1;++ue)ie.write_shift(-4,ue+1);We&&(++ue,ie.write_shift(-4,q))};for(Re=ue=0,Re+=P[1];ue<Re;++ue)ie.write_shift(-4,ee.DIFSECT);for(Re+=P[2];ue<Re;++ue)ie.write_shift(-4,ee.FATSECT);$e(P[3]),$e(P[4]);for(var Oe=0,Fe=0,Le=Y.FileIndex[0];Oe<Y.FileIndex.length;++Oe)Le=Y.FileIndex[Oe],Le.content&&(Fe=Le.content.length,!(Fe<4096)&&(Le.start=Re,$e(Fe+511>>9)));for($e(P[6]+7>>3);ie.l&511;)ie.write_shift(-4,ee.ENDOFCHAIN);for(Re=ue=0,Oe=0;Oe<Y.FileIndex.length;++Oe)Le=Y.FileIndex[Oe],Le.content&&(Fe=Le.content.length,!(!Fe||Fe>=4096)&&(Le.start=Re,$e(Fe+63>>6)));for(;ie.l&511;)ie.write_shift(-4,ee.ENDOFCHAIN);for(ue=0;ue<P[4]<<2;++ue){var rt=Y.FullPaths[ue];if(!rt||rt.length===0){for(Oe=0;Oe<17;++Oe)ie.write_shift(4,0);for(Oe=0;Oe<3;++Oe)ie.write_shift(4,-1);for(Oe=0;Oe<12;++Oe)ie.write_shift(4,0);continue}Le=Y.FileIndex[ue],ue===0&&(Le.start=Le.size?Le.start-1:q);var xe=ue===0&&le.root||Le.name;if(Fe=2*(xe.length+1),ie.write_shift(64,xe,"utf16le"),ie.write_shift(2,Fe),ie.write_shift(1,Le.type),ie.write_shift(1,Le.color),ie.write_shift(-4,Le.L),ie.write_shift(-4,Le.R),ie.write_shift(-4,Le.C),Le.clsid)ie.write_shift(16,Le.clsid,"hex");else for(Oe=0;Oe<4;++Oe)ie.write_shift(4,0);ie.write_shift(4,Le.state||0),ie.write_shift(4,0),ie.write_shift(4,0),ie.write_shift(4,0),ie.write_shift(4,0),ie.write_shift(4,Le.start),ie.write_shift(4,Le.size),ie.write_shift(4,0)}for(ue=1;ue<Y.FileIndex.length;++ue)if(Le=Y.FileIndex[ue],Le.size>=4096)if(ie.l=Le.start+1<<9,Fs&&Buffer.isBuffer(Le.content))Le.content.copy(ie,ie.l,0,Le.size),ie.l+=Le.size+511&-512;else{for(Oe=0;Oe<Le.size;++Oe)ie.write_shift(1,Le.content[Oe]);for(;Oe&511;++Oe)ie.write_shift(1,0)}for(ue=1;ue<Y.FileIndex.length;++ue)if(Le=Y.FileIndex[ue],Le.size>0&&Le.size<4096)if(Fs&&Buffer.isBuffer(Le.content))Le.content.copy(ie,ie.l,0,Le.size),ie.l+=Le.size+63&-64;else{for(Oe=0;Oe<Le.size;++Oe)ie.write_shift(1,Le.content[Oe]);for(;Oe&63;++Oe)ie.write_shift(1,0)}if(Fs)ie.l=ie.length;else for(;ie.l<ie.length;)ie.write_shift(1,0);return ie}function H(Y,de){var le=Y.FullPaths.map(function(Oe){return Oe.toUpperCase()}),P=le.map(function(Oe){var Fe=Oe.split("/");return Fe[Fe.length-(Oe.slice(-1)=="/"?2:1)]}),ie=!1;de.charCodeAt(0)===47?(ie=!0,de=le[0].slice(0,-1)+de):ie=de.indexOf("/")!==-1;var ue=de.toUpperCase(),Re=ie===!0?le.indexOf(ue):P.indexOf(ue);if(Re!==-1)return Y.FileIndex[Re];var $e=!ue.match(Oh);for(ue=ue.replace(ju,""),$e&&(ue=ue.replace(Oh,"!")),Re=0;Re<le.length;++Re)if(($e?le[Re].replace(Oh,"!"):le[Re]).replace(ju,"")==ue||($e?P[Re].replace(Oh,"!"):P[Re]).replace(ju,"")==ue)return Y.FileIndex[Re];return null}var M=64,q=-2,L="d0cf11e0a1b11ae1",re=[208,207,17,224,161,177,26,225],V="00000000000000000000000000000000",ee={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:q,FREESECT:-1,HEADER_SIGNATURE:L,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:V,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function me(Y,de,le){x();var P=B(Y,le);f.writeFileSync(de,P)}function W(Y){for(var de=new Array(Y.length),le=0;le<Y.length;++le)de[le]=String.fromCharCode(Y[le]);return de.join("")}function se(Y,de){var le=B(Y,de);switch(de&&de.type||"buffer"){case"file":return x(),f.writeFileSync(de.filename,le),le;case"binary":return typeof le=="string"?le:W(le);case"base64":return Mu(typeof le=="string"?le:W(le));case"buffer":if(Fs)return Buffer.isBuffer(le)?le:rl(le);case"array":return typeof le=="string"?Kn(le):le}return le}var Z;function I(Y){try{var de=Y.InflateRaw,le=new de;if(le._processChunk(new Uint8Array([3,0]),le._finishFlushFlag),le.bytesRead)Z=Y;else throw new Error("zlib does not expose bytesRead")}catch(P){console.error("cannot use native zlib: "+(P.message||P))}}function Q(Y,de){if(!Z)return Ye(Y,de);var le=Z.InflateRaw,P=new le,ie=P._processChunk(Y.slice(Y.l),P._finishFlushFlag);return Y.l+=P.bytesRead,ie}function O(Y){return Z?Z.deflateRawSync(Y):st(Y)}var te=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],oe=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],je=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function Me(Y){var de=(Y<<1|Y<<11)&139536|(Y<<5|Y<<15)&558144;return(de>>16|de>>8|de)&255}for(var ve=typeof Uint8Array<"u",ce=ve?new Uint8Array(256):[],Pe=0;Pe<256;++Pe)ce[Pe]=Me(Pe);function Qe(Y,de){var le=ce[Y&255];return de<=8?le>>>8-de:(le=le<<8|ce[Y>>8&255],de<=16?le>>>16-de:(le=le<<8|ce[Y>>16&255],le>>>24-de))}function vt(Y,de){var le=de&7,P=de>>>3;return(Y[P]|(le<=6?0:Y[P+1]<<8))>>>le&3}function xt(Y,de){var le=de&7,P=de>>>3;return(Y[P]|(le<=5?0:Y[P+1]<<8))>>>le&7}function ht(Y,de){var le=de&7,P=de>>>3;return(Y[P]|(le<=4?0:Y[P+1]<<8))>>>le&15}function bt(Y,de){var le=de&7,P=de>>>3;return(Y[P]|(le<=3?0:Y[P+1]<<8))>>>le&31}function ot(Y,de){var le=de&7,P=de>>>3;return(Y[P]|(le<=1?0:Y[P+1]<<8))>>>le&127}function hs(Y,de,le){var P=de&7,ie=de>>>3,ue=(1<<le)-1,Re=Y[ie]>>>P;return le<8-P||(Re|=Y[ie+1]<<8-P,le<16-P)||(Re|=Y[ie+2]<<16-P,le<24-P)||(Re|=Y[ie+3]<<24-P),Re&ue}function fs(Y,de,le){var P=de&7,ie=de>>>3;return P<=5?Y[ie]|=(le&7)<<P:(Y[ie]|=le<<P&255,Y[ie+1]=(le&7)>>8-P),de+3}function Ps(Y,de,le){var P=de&7,ie=de>>>3;return le=(le&1)<<P,Y[ie]|=le,de+1}function ps(Y,de,le){var P=de&7,ie=de>>>3;return le<<=P,Y[ie]|=le&255,le>>>=8,Y[ie+1]=le,de+8}function As(Y,de,le){var P=de&7,ie=de>>>3;return le<<=P,Y[ie]|=le&255,le>>>=8,Y[ie+1]=le&255,Y[ie+2]=le>>>8,de+16}function cs(Y,de){var le=Y.length,P=2*le>de?2*le:de+5,ie=0;if(le>=de)return Y;if(Fs){var ue=cw(P);if(Y.copy)Y.copy(ue);else for(;ie<Y.length;++ie)ue[ie]=Y[ie];return ue}else if(ve){var Re=new Uint8Array(P);if(Re.set)Re.set(Y);else for(;ie<le;++ie)Re[ie]=Y[ie];return Re}return Y.length=P,Y}function _t(Y){for(var de=new Array(Y),le=0;le<Y;++le)de[le]=0;return de}function sa(Y,de,le){var P=1,ie=0,ue=0,Re=0,$e=0,Oe=Y.length,Fe=ve?new Uint16Array(32):_t(32);for(ue=0;ue<32;++ue)Fe[ue]=0;for(ue=Oe;ue<le;++ue)Y[ue]=0;Oe=Y.length;var Le=ve?new Uint16Array(Oe):_t(Oe);for(ue=0;ue<Oe;++ue)Fe[ie=Y[ue]]++,P<ie&&(P=ie),Le[ue]=0;for(Fe[0]=0,ue=1;ue<=P;++ue)Fe[ue+16]=$e=$e+Fe[ue-1]<<1;for(ue=0;ue<Oe;++ue)$e=Y[ue],$e!=0&&(Le[ue]=Fe[$e+16]++);var rt=0;for(ue=0;ue<Oe;++ue)if(rt=Y[ue],rt!=0)for($e=Qe(Le[ue],P)>>P-rt,Re=(1<<P+4-rt)-1;Re>=0;--Re)de[$e|Re<<rt]=rt&15|ue<<4;return P}var Te=ve?new Uint16Array(512):_t(512),Ne=ve?new Uint16Array(32):_t(32);if(!ve){for(var he=0;he<512;++he)Te[he]=0;for(he=0;he<32;++he)Ne[he]=0}(function(){for(var Y=[],de=0;de<32;de++)Y.push(5);sa(Y,Ne,32);var le=[];for(de=0;de<=143;de++)le.push(8);for(;de<=255;de++)le.push(9);for(;de<=279;de++)le.push(7);for(;de<=287;de++)le.push(8);sa(le,Te,288)})();var Ue=(function(){for(var de=ve?new Uint8Array(32768):[],le=0,P=0;le<je.length-1;++le)for(;P<je[le+1];++P)de[P]=le;for(;P<32768;++P)de[P]=29;var ie=ve?new Uint8Array(259):[];for(le=0,P=0;le<oe.length-1;++le)for(;P<oe[le+1];++P)ie[P]=le;function ue($e,Oe){for(var Fe=0;Fe<$e.length;){var Le=Math.min(65535,$e.length-Fe),rt=Fe+Le==$e.length;for(Oe.write_shift(1,+rt),Oe.write_shift(2,Le),Oe.write_shift(2,~Le&65535);Le-- >0;)Oe[Oe.l++]=$e[Fe++]}return Oe.l}function Re($e,Oe){for(var Fe=0,Le=0,rt=ve?new Uint16Array(32768):[];Le<$e.length;){var xe=Math.min(65535,$e.length-Le);if(xe<10){for(Fe=fs(Oe,Fe,+(Le+xe==$e.length)),Fe&7&&(Fe+=8-(Fe&7)),Oe.l=Fe/8|0,Oe.write_shift(2,xe),Oe.write_shift(2,~xe&65535);xe-- >0;)Oe[Oe.l++]=$e[Le++];Fe=Oe.l*8;continue}Fe=fs(Oe,Fe,+(Le+xe==$e.length)+2);for(var We=0;xe-- >0;){var Ce=$e[Le];We=(We<<5^Ce)&32767;var et=-1,it=0;if((et=rt[We])&&(et|=Le&-32768,et>Le&&(et-=32768),et<Le))for(;$e[et+it]==$e[Le+it]&&it<250;)++it;if(it>2){Ce=ie[it],Ce<=22?Fe=ps(Oe,Fe,ce[Ce+1]>>1)-1:(ps(Oe,Fe,3),Fe+=5,ps(Oe,Fe,ce[Ce-23]>>5),Fe+=3);var Tt=Ce<8?0:Ce-4>>2;Tt>0&&(As(Oe,Fe,it-oe[Ce]),Fe+=Tt),Ce=de[Le-et],Fe=ps(Oe,Fe,ce[Ce]>>3),Fe-=3;var Ze=Ce<4?0:Ce-2>>1;Ze>0&&(As(Oe,Fe,Le-et-je[Ce]),Fe+=Ze);for(var $t=0;$t<it;++$t)rt[We]=Le&32767,We=(We<<5^$e[Le])&32767,++Le;xe-=it-1}else Ce<=143?Ce=Ce+48:Fe=Ps(Oe,Fe,1),Fe=ps(Oe,Fe,ce[Ce]),rt[We]=Le&32767,++Le}Fe=ps(Oe,Fe,0)-1}return Oe.l=(Fe+7)/8|0,Oe.l}return function(Oe,Fe){return Oe.length<8?ue(Oe,Fe):Re(Oe,Fe)}})();function st(Y){var de=qe(50+Math.floor(Y.length*1.1)),le=Ue(Y,de);return de.slice(0,le)}var Ct=ve?new Uint16Array(32768):_t(32768),Dt=ve?new Uint16Array(32768):_t(32768),Zt=ve?new Uint16Array(128):_t(128),ts=1,ke=1;function we(Y,de){var le=bt(Y,de)+257;de+=5;var P=bt(Y,de)+1;de+=5;var ie=ht(Y,de)+4;de+=4;for(var ue=0,Re=ve?new Uint8Array(19):_t(19),$e=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],Oe=1,Fe=ve?new Uint8Array(8):_t(8),Le=ve?new Uint8Array(8):_t(8),rt=Re.length,xe=0;xe<ie;++xe)Re[te[xe]]=ue=xt(Y,de),Oe<ue&&(Oe=ue),Fe[ue]++,de+=3;var We=0;for(Fe[0]=0,xe=1;xe<=Oe;++xe)Le[xe]=We=We+Fe[xe-1]<<1;for(xe=0;xe<rt;++xe)(We=Re[xe])!=0&&($e[xe]=Le[We]++);var Ce=0;for(xe=0;xe<rt;++xe)if(Ce=Re[xe],Ce!=0){We=ce[$e[xe]]>>8-Ce;for(var et=(1<<7-Ce)-1;et>=0;--et)Zt[We|et<<Ce]=Ce&7|xe<<3}var it=[];for(Oe=1;it.length<le+P;)switch(We=Zt[ot(Y,de)],de+=We&7,We>>>=3){case 16:for(ue=3+vt(Y,de),de+=2,We=it[it.length-1];ue-- >0;)it.push(We);break;case 17:for(ue=3+xt(Y,de),de+=3;ue-- >0;)it.push(0);break;case 18:for(ue=11+ot(Y,de),de+=7;ue-- >0;)it.push(0);break;default:it.push(We),Oe<We&&(Oe=We);break}var Tt=it.slice(0,le),Ze=it.slice(le);for(xe=le;xe<286;++xe)Tt[xe]=0;for(xe=P;xe<30;++xe)Ze[xe]=0;return ts=sa(Tt,Ct,286),ke=sa(Ze,Dt,30),de}function nt(Y,de){if(Y[0]==3&&!(Y[1]&3))return[Po(de),2];for(var le=0,P=0,ie=cw(de||1<<18),ue=0,Re=ie.length>>>0,$e=0,Oe=0;(P&1)==0;){if(P=xt(Y,le),le+=3,P>>>1)P>>1==1?($e=9,Oe=5):(le=we(Y,le),$e=ts,Oe=ke);else{le&7&&(le+=8-(le&7));var Fe=Y[le>>>3]|Y[(le>>>3)+1]<<8;if(le+=32,Fe>0)for(!de&&Re<ue+Fe&&(ie=cs(ie,ue+Fe),Re=ie.length);Fe-- >0;)ie[ue++]=Y[le>>>3],le+=8;continue}for(;;){!de&&Re<ue+32767&&(ie=cs(ie,ue+32767),Re=ie.length);var Le=hs(Y,le,$e),rt=P>>>1==1?Te[Le]:Ct[Le];if(le+=rt&15,rt>>>=4,(rt>>>8&255)===0)ie[ue++]=rt;else{if(rt==256)break;rt-=257;var xe=rt<8?0:rt-4>>2;xe>5&&(xe=0);var We=ue+oe[rt];xe>0&&(We+=hs(Y,le,xe),le+=xe),Le=hs(Y,le,Oe),rt=P>>>1==1?Ne[Le]:Dt[Le],le+=rt&15,rt>>>=4;var Ce=rt<4?0:rt-2>>1,et=je[rt];for(Ce>0&&(et+=hs(Y,le,Ce),le+=Ce),!de&&Re<We&&(ie=cs(ie,We+100),Re=ie.length);ue<We;)ie[ue]=ie[ue-et],++ue}}}return de?[ie,le+7>>>3]:[ie.slice(0,ue),le+7>>>3]}function Ye(Y,de){var le=Y.slice(Y.l||0),P=nt(le,de);return Y.l+=P[1],P[0]}function pt(Y,de){if(Y)typeof console<"u"&&console.error(de);else throw new Error(de)}function yt(Y,de){var le=Y;hn(le,0);var P=[],ie=[],ue={FileIndex:P,FullPaths:ie};k(ue,{root:de.root});for(var Re=le.length-4;(le[Re]!=80||le[Re+1]!=75||le[Re+2]!=5||le[Re+3]!=6)&&Re>=0;)--Re;le.l=Re+4,le.l+=4;var $e=le.read_shift(2);le.l+=6;var Oe=le.read_shift(4);for(le.l=Oe,Re=0;Re<$e;++Re){le.l+=20;var Fe=le.read_shift(4),Le=le.read_shift(4),rt=le.read_shift(2),xe=le.read_shift(2),We=le.read_shift(2);le.l+=8;var Ce=le.read_shift(4),et=u(le.slice(le.l+rt,le.l+rt+xe));le.l+=rt+xe+We;var it=le.l;le.l=Ce+4,Kt(le,Fe,Le,ue,et),le.l=it}return ue}function Kt(Y,de,le,P,ie){Y.l+=2;var ue=Y.read_shift(2),Re=Y.read_shift(2),$e=c(Y);if(ue&8257)throw new Error("Unsupported ZIP encryption");for(var Oe=Y.read_shift(4),Fe=Y.read_shift(4),Le=Y.read_shift(4),rt=Y.read_shift(2),xe=Y.read_shift(2),We="",Ce=0;Ce<rt;++Ce)We+=String.fromCharCode(Y[Y.l++]);if(xe){var et=u(Y.slice(Y.l,Y.l+xe));(et[21589]||{}).mt&&($e=et[21589].mt),((ie||{})[21589]||{}).mt&&($e=ie[21589].mt)}Y.l+=xe;var it=Y.slice(Y.l,Y.l+Fe);switch(Re){case 8:it=Q(Y,Le);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+Re)}var Tt=!1;ue&8&&(Oe=Y.read_shift(4),Oe==134695760&&(Oe=Y.read_shift(4),Tt=!0),Fe=Y.read_shift(4),Le=Y.read_shift(4)),Fe!=de&&pt(Tt,"Bad compressed size: "+de+" != "+Fe),Le!=le&&pt(Tt,"Bad uncompressed size: "+le+" != "+Le),jt(P,We,it,{unsafe:!0,mt:$e})}function Jt(Y,de){var le=de||{},P=[],ie=[],ue=qe(1),Re=le.compression?8:0,$e=0,Oe=0,Fe=0,Le=0,rt=0,xe=Y.FullPaths[0],We=xe,Ce=Y.FileIndex[0],et=[],it=0;for(Oe=1;Oe<Y.FullPaths.length;++Oe)if(We=Y.FullPaths[Oe].slice(xe.length),Ce=Y.FileIndex[Oe],!(!Ce.size||!Ce.content||We=="Sh33tJ5")){var Tt=Le,Ze=qe(We.length);for(Fe=0;Fe<We.length;++Fe)Ze.write_shift(1,We.charCodeAt(Fe)&127);Ze=Ze.slice(0,Ze.l),et[rt]=iM.buf(Ce.content,0);var $t=Ce.content;Re==8&&($t=O($t)),ue=qe(30),ue.write_shift(4,67324752),ue.write_shift(2,20),ue.write_shift(2,$e),ue.write_shift(2,Re),Ce.mt?o(ue,Ce.mt):ue.write_shift(4,0),ue.write_shift(-4,et[rt]),ue.write_shift(4,$t.length),ue.write_shift(4,Ce.content.length),ue.write_shift(2,Ze.length),ue.write_shift(2,0),Le+=ue.length,P.push(ue),Le+=Ze.length,P.push(Ze),Le+=$t.length,P.push($t),ue=qe(46),ue.write_shift(4,33639248),ue.write_shift(2,0),ue.write_shift(2,20),ue.write_shift(2,$e),ue.write_shift(2,Re),ue.write_shift(4,0),ue.write_shift(-4,et[rt]),ue.write_shift(4,$t.length),ue.write_shift(4,Ce.content.length),ue.write_shift(2,Ze.length),ue.write_shift(2,0),ue.write_shift(2,0),ue.write_shift(2,0),ue.write_shift(2,0),ue.write_shift(4,0),ue.write_shift(4,Tt),it+=ue.l,ie.push(ue),it+=Ze.length,ie.push(Ze),++rt}return ue=qe(22),ue.write_shift(4,101010256),ue.write_shift(2,0),ue.write_shift(2,0),ue.write_shift(2,rt),ue.write_shift(2,rt),ue.write_shift(4,it),ue.write_shift(4,Le),ue.write_shift(2,0),pr([pr(P),pr(ie),ue])}var Ut={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function Ia(Y,de){if(Y.ctype)return Y.ctype;var le=Y.name||"",P=le.match(/\.([^\.]+)$/);return P&&Ut[P[1]]||de&&(P=(le=de).match(/[\.\\]([^\.\\])+$/),P&&Ut[P[1]])?Ut[P[1]]:"application/octet-stream"}function La(Y){for(var de=Mu(Y),le=[],P=0;P<de.length;P+=76)le.push(de.slice(P,P+76));return le.join(`\r
`)+`\r
`}function nr(Y){var de=Y.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function(Fe){var Le=Fe.charCodeAt(0).toString(16).toUpperCase();return"="+(Le.length==1?"0"+Le:Le)});de=de.replace(/ $/mg,"=20").replace(/\t$/mg,"=09"),de.charAt(0)==`
`&&(de="=0D"+de.slice(1)),de=de.replace(/\r(?!\n)/mg,"=0D").replace(/\n\n/mg,`
=0A`).replace(/([^\r\n])\n/mg,"$1=0A");for(var le=[],P=de.split(`\r
`),ie=0;ie<P.length;++ie){var ue=P[ie];if(ue.length==0){le.push("");continue}for(var Re=0;Re<ue.length;){var $e=76,Oe=ue.slice(Re,Re+$e);Oe.charAt($e-1)=="="?$e--:Oe.charAt($e-2)=="="?$e-=2:Oe.charAt($e-3)=="="&&($e-=3),Oe=ue.slice(Re,Re+$e),Re+=$e,Re<ue.length&&(Oe+="="),le.push(Oe)}}return le.join(`\r
`)}function ys(Y){for(var de=[],le=0;le<Y.length;++le){for(var P=Y[le];le<=Y.length&&P.charAt(P.length-1)=="=";)P=P.slice(0,P.length-1)+Y[++le];de.push(P)}for(var ie=0;ie<de.length;++ie)de[ie]=de[ie].replace(/[=][0-9A-Fa-f]{2}/g,function(ue){return String.fromCharCode(parseInt(ue.slice(1),16))});return Kn(de.join(`\r
`))}function J(Y,de,le){for(var P="",ie="",ue="",Re,$e=0;$e<10;++$e){var Oe=de[$e];if(!Oe||Oe.match(/^\s*$/))break;var Fe=Oe.match(/^(.*?):\s*([^\s].*)$/);if(Fe)switch(Fe[1].toLowerCase()){case"content-location":P=Fe[2].trim();break;case"content-type":ue=Fe[2].trim();break;case"content-transfer-encoding":ie=Fe[2].trim();break}}switch(++$e,ie.toLowerCase()){case"base64":Re=Kn(Zi(de.slice($e).join("")));break;case"quoted-printable":Re=ys(de.slice($e));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+ie)}var Le=jt(Y,P.slice(le.length),Re,{unsafe:!0});ue&&(Le.ctype=ue)}function De(Y,de){if(W(Y.slice(0,13)).toLowerCase()!="mime-version:")throw new Error("Unsupported MAD header");var le=de&&de.root||"",P=(Fs&&Buffer.isBuffer(Y)?Y.toString("binary"):W(Y)).split(`\r
`),ie=0,ue="";for(ie=0;ie<P.length;++ie)if(ue=P[ie],!!/^Content-Location:/i.test(ue)&&(ue=ue.slice(ue.indexOf("file")),le||(le=ue.slice(0,ue.lastIndexOf("/")+1)),ue.slice(0,le.length)!=le))for(;le.length>0&&(le=le.slice(0,le.length-1),le=le.slice(0,le.lastIndexOf("/")+1),ue.slice(0,le.length)!=le););var Re=(P[1]||"").match(/boundary="(.*?)"/);if(!Re)throw new Error("MAD cannot find boundary");var $e="--"+(Re[1]||""),Oe=[],Fe=[],Le={FileIndex:Oe,FullPaths:Fe};k(Le);var rt,xe=0;for(ie=0;ie<P.length;++ie){var We=P[ie];We!==$e&&We!==$e+"--"||(xe++&&J(Le,P.slice(rt,ie),le),rt=ie)}return Le}function Ge(Y,de){var le=de||{},P=le.boundary||"SheetJS";P="------="+P;for(var ie=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+P.slice(2)+'"',"","",""],ue=Y.FullPaths[0],Re=ue,$e=Y.FileIndex[0],Oe=1;Oe<Y.FullPaths.length;++Oe)if(Re=Y.FullPaths[Oe].slice(ue.length),$e=Y.FileIndex[Oe],!(!$e.size||!$e.content||Re=="Sh33tJ5")){Re=Re.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(it){return"_x"+it.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(it){return"_u"+it.charCodeAt(0).toString(16)+"_"});for(var Fe=$e.content,Le=Fs&&Buffer.isBuffer(Fe)?Fe.toString("binary"):W(Fe),rt=0,xe=Math.min(1024,Le.length),We=0,Ce=0;Ce<=xe;++Ce)(We=Le.charCodeAt(Ce))>=32&&We<128&&++rt;var et=rt>=xe*4/5;ie.push(P),ie.push("Content-Location: "+(le.root||"file:///C:/SheetJS/")+Re),ie.push("Content-Transfer-Encoding: "+(et?"quoted-printable":"base64")),ie.push("Content-Type: "+Ia($e,Re)),ie.push(""),ie.push(et?nr(Le):La(Le))}return ie.push(P+`--\r
`),ie.join(`\r
`)}function gt(Y){var de={};return k(de,Y),de}function jt(Y,de,le,P){var ie=P&&P.unsafe;ie||k(Y);var ue=!ie&&Qs.find(Y,de);if(!ue){var Re=Y.FullPaths[0];de.slice(0,Re.length)==Re?Re=de:(Re.slice(-1)!="/"&&(Re+="/"),Re=(Re+de).replace("//","/")),ue={name:i(de),type:2},Y.FileIndex.push(ue),Y.FullPaths.push(Re),ie||Qs.utils.cfb_gc(Y)}return ue.content=le,ue.size=le?le.length:0,P&&(P.CLSID&&(ue.clsid=P.CLSID),P.mt&&(ue.mt=P.mt),P.ct&&(ue.ct=P.ct)),ue}function ss(Y,de){k(Y);var le=Qs.find(Y,de);if(le){for(var P=0;P<Y.FileIndex.length;++P)if(Y.FileIndex[P]==le)return Y.FileIndex.splice(P,1),Y.FullPaths.splice(P,1),!0}return!1}function ks(Y,de,le){k(Y);var P=Qs.find(Y,de);if(P){for(var ie=0;ie<Y.FileIndex.length;++ie)if(Y.FileIndex[ie]==P)return Y.FileIndex[ie].name=i(le),Y.FullPaths[ie]=le,!0}return!1}function Ns(Y){A(Y,!0)}return s.find=H,s.read=F,s.parse=h,s.write=se,s.writeFile=me,s.utils={cfb_new:gt,cfb_add:jt,cfb_del:ss,cfb_mov:ks,cfb_gc:Ns,ReadShift:Nu,CheckField:tT,prep_blob:hn,bconcat:pr,use_zlib:I,_deflateRaw:st,_inflateRaw:Ye,consts:ee},s})();function lM(t){return typeof t=="string"?Gf(t):Array.isArray(t)?RP(t):t}function sm(t,s,a){if(typeof Deno<"u"){if(a&&typeof s=="string")switch(a){case"utf8":s=new TextEncoder(a).encode(s);break;case"binary":s=Gf(s);break;default:throw new Error("Unsupported encoding "+a)}return Deno.writeFileSync(t,s)}var r=a=="utf8"?Iu(s):s;if(typeof IE_SaveFile<"u")return IE_SaveFile(r,t);if(typeof Blob<"u"){var i=new Blob([lM(r)],{type:"application/octet-stream"});if(typeof navigator<"u"&&navigator.msSaveBlob)return navigator.msSaveBlob(i,t);if(typeof saveAs<"u")return saveAs(i,t);if(typeof URL<"u"&&typeof document<"u"&&document.createElement&&URL.createObjectURL){var o=URL.createObjectURL(i);if(typeof chrome=="object"&&typeof(chrome.downloads||{}).download=="function")return URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(o)},6e4),chrome.downloads.download({url:o,filename:t,saveAs:!0});var c=document.createElement("a");if(c.download!=null)return c.download=t,c.href=o,document.body.appendChild(c),c.click(),document.body.removeChild(c),URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(o)},6e4),o}}if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var u=File(t);return u.open("w"),u.encoding="binary",Array.isArray(s)&&(s=tm(s)),u.write(s),u.close(),s}catch(f){if(!f.message||!f.message.match(/onstruct/))throw f}throw new Error("cannot save file "+t)}function Nr(t){for(var s=Object.keys(t),a=[],r=0;r<s.length;++r)Object.prototype.hasOwnProperty.call(t,s[r])&&a.push(s[r]);return a}function gw(t,s){for(var a=[],r=Nr(t),i=0;i!==r.length;++i)a[t[r[i]][s]]==null&&(a[t[r[i]][s]]=r[i]);return a}function Fv(t){for(var s=[],a=Nr(t),r=0;r!==a.length;++r)s[t[a[r]]]=a[r];return s}function Yf(t){for(var s=[],a=Nr(t),r=0;r!==a.length;++r)s[t[a[r]]]=parseInt(a[r],10);return s}function oM(t){for(var s=[],a=Nr(t),r=0;r!==a.length;++r)s[t[a[r]]]==null&&(s[t[a[r]]]=[]),s[t[a[r]]].push(a[r]);return s}var pf=new Date(1899,11,30,0,0,0);function en(t,s){var a=t.getTime(),r=pf.getTime()+(t.getTimezoneOffset()-pf.getTimezoneOffset())*6e4;return(a-r)/(1440*60*1e3)}var LC=new Date,cM=pf.getTime()+(LC.getTimezoneOffset()-pf.getTimezoneOffset())*6e4,vw=LC.getTimezoneOffset();function BC(t){var s=new Date;return s.setTime(t*24*60*60*1e3+cM),s.getTimezoneOffset()!==vw&&s.setTime(s.getTime()+(s.getTimezoneOffset()-vw)*6e4),s}var jw=new Date("2017-02-19T19:06:09.000Z"),zC=isNaN(jw.getFullYear())?new Date("2/19/17"):jw,dM=zC.getFullYear()==2017;function Lr(t,s){var a=new Date(t);if(dM)return s>0?a.setTime(a.getTime()+a.getTimezoneOffset()*60*1e3):s<0&&a.setTime(a.getTime()-a.getTimezoneOffset()*60*1e3),a;if(t instanceof Date)return t;if(zC.getFullYear()==1917&&!isNaN(a.getFullYear())){var r=a.getFullYear();return t.indexOf(""+r)>-1||a.setFullYear(a.getFullYear()+100),a}var i=t.match(/\d+/g)||["2017","2","19","0","0","0"],o=new Date(+i[0],+i[1]-1,+i[2],+i[3]||0,+i[4]||0,+i[5]||0);return t.indexOf("Z")>-1&&(o=new Date(o.getTime()-o.getTimezoneOffset()*60*1e3)),o}function Xf(t,s){if(Fs&&Buffer.isBuffer(t))return t.toString("binary");if(typeof TextDecoder<"u")try{var a={"€":"","‚":"",ƒ:"","„":"","…":"","†":"","‡":"","ˆ":"","‰":"",Š:"","‹":"",Œ:"",Ž:"","‘":"","’":"","“":"","”":"","•":"","–":"","—":"","˜":"","™":"",š:"","›":"",œ:"",ž:"",Ÿ:""};return Array.isArray(t)&&(t=new Uint8Array(t)),new TextDecoder("latin1").decode(t).replace(/[€‚ƒ„…†‡ˆ‰Š‹ŒŽ‘’“”•–—˜™š›œžŸ]/g,function(o){return a[o]||o})}catch{}for(var r=[],i=0;i!=t.length;++i)r.push(String.fromCharCode(t[i]));return r.join("")}function tn(t){if(typeof JSON<"u"&&!Array.isArray(t))return JSON.parse(JSON.stringify(t));if(typeof t!="object"||t==null)return t;if(t instanceof Date)return new Date(t.getTime());var s={};for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(s[a]=tn(t[a]));return s}function Ta(t,s){for(var a="";a.length<s;)a+=t;return a}function Yi(t){var s=Number(t);if(!isNaN(s))return isFinite(s)?s:NaN;if(!/\d/.test(t))return s;var a=1,r=t.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return a*=100,""});return!isNaN(s=Number(r))||(r=r.replace(/[(](.*)[)]/,function(i,o){return a=-a,o}),!isNaN(s=Number(r)))?s/a:s}var uM=["january","february","march","april","may","june","july","august","september","october","november","december"];function Fu(t){var s=new Date(t),a=new Date(NaN),r=s.getYear(),i=s.getMonth(),o=s.getDate();if(isNaN(o))return a;var c=t.toLowerCase();if(c.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if(c=c.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,""),c.length>3&&uM.indexOf(c)==-1)return a}else if(c.match(/[a-z]/))return a;return r<0||r>8099?a:(i>0||o>1)&&r!=101?s:t.match(/[^-0-9:,\/\\]/)?a:s}function us(t,s,a){if(t.FullPaths){if(typeof a=="string"){var r;return Fs?r=rl(a):r=PP(a),Qs.utils.cfb_add(t,s,r)}Qs.utils.cfb_add(t,s,a)}else t.file(s,a)}function Iv(){return Qs.utils.cfb_new()}var Ya=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r
`,mM={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},Lv=Fv(mM),Bv=/[&<>'"]/g,hM=/[\u0000-\u0008\u000b-\u001f]/g;function Ws(t){var s=t+"";return s.replace(Bv,function(a){return Lv[a]}).replace(hM,function(a){return"_x"+("000"+a.charCodeAt(0).toString(16)).slice(-4)+"_"})}function yw(t){return Ws(t).replace(/ /g,"_x0020_")}var UC=/[\u0000-\u001f]/g;function fM(t){var s=t+"";return s.replace(Bv,function(a){return Lv[a]}).replace(/\n/g,"<br/>").replace(UC,function(a){return"&#x"+("000"+a.charCodeAt(0).toString(16)).slice(-4)+";"})}function xM(t){var s=t+"";return s.replace(Bv,function(a){return Lv[a]}).replace(UC,function(a){return"&#x"+a.charCodeAt(0).toString(16).toUpperCase()+";"})}function pM(t){return t.replace(/(\r\n|[\r\n])/g,"&#10;")}function gM(t){switch(t){case 1:case!0:case"1":case"true":case"TRUE":return!0;default:return!1}}function k0(t){for(var s="",a=0,r=0,i=0,o=0,c=0,u=0;a<t.length;){if(r=t.charCodeAt(a++),r<128){s+=String.fromCharCode(r);continue}if(i=t.charCodeAt(a++),r>191&&r<224){c=(r&31)<<6,c|=i&63,s+=String.fromCharCode(c);continue}if(o=t.charCodeAt(a++),r<240){s+=String.fromCharCode((r&15)<<12|(i&63)<<6|o&63);continue}c=t.charCodeAt(a++),u=((r&7)<<18|(i&63)<<12|(o&63)<<6|c&63)-65536,s+=String.fromCharCode(55296+(u>>>10&1023)),s+=String.fromCharCode(56320+(u&1023))}return s}function Nw(t){var s=Po(2*t.length),a,r,i=1,o=0,c=0,u;for(r=0;r<t.length;r+=i)i=1,(u=t.charCodeAt(r))<128?a=u:u<224?(a=(u&31)*64+(t.charCodeAt(r+1)&63),i=2):u<240?(a=(u&15)*4096+(t.charCodeAt(r+1)&63)*64+(t.charCodeAt(r+2)&63),i=3):(i=4,a=(u&7)*262144+(t.charCodeAt(r+1)&63)*4096+(t.charCodeAt(r+2)&63)*64+(t.charCodeAt(r+3)&63),a-=65536,c=55296+(a>>>10&1023),a=56320+(a&1023)),c!==0&&(s[o++]=c&255,s[o++]=c>>>8,c=0),s[o++]=a%256,s[o++]=a>>>8;return s.slice(0,o).toString("ucs2")}function bw(t){return rl(t,"binary").toString("utf8")}var Ph="foo bar bazâð£",yu=Fs&&(bw(Ph)==k0(Ph)&&bw||Nw(Ph)==k0(Ph)&&Nw)||k0,Iu=Fs?function(t){return rl(t,"utf8").toString("binary")}:function(t){for(var s=[],a=0,r=0,i=0;a<t.length;)switch(r=t.charCodeAt(a++),!0){case r<128:s.push(String.fromCharCode(r));break;case r<2048:s.push(String.fromCharCode(192+(r>>6))),s.push(String.fromCharCode(128+(r&63)));break;case(r>=55296&&r<57344):r-=55296,i=t.charCodeAt(a++)-56320+(r<<10),s.push(String.fromCharCode(240+(i>>18&7))),s.push(String.fromCharCode(144+(i>>12&63))),s.push(String.fromCharCode(128+(i>>6&63))),s.push(String.fromCharCode(128+(i&63)));break;default:s.push(String.fromCharCode(224+(r>>12))),s.push(String.fromCharCode(128+(r>>6&63))),s.push(String.fromCharCode(128+(r&63)))}return s.join("")},vM=(function(){var t=[["nbsp"," "],["middot","·"],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(s){return[new RegExp("&"+s[0]+";","ig"),s[1]]});return function(a){for(var r=a.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,`
`).replace(/<[^>]*>/g,""),i=0;i<t.length;++i)r=r.replace(t[i][0],t[i][1]);return r}})(),VC=/(^\s|\s$|\n)/;function gr(t,s){return"<"+t+(s.match(VC)?' xml:space="preserve"':"")+">"+s+"</"+t+">"}function Lu(t){return Nr(t).map(function(s){return" "+s+'="'+t[s]+'"'}).join("")}function ct(t,s,a){return"<"+t+(a!=null?Lu(a):"")+(s!=null?(s.match(VC)?' xml:space="preserve"':"")+">"+s+"</"+t:"/")+">"}function Dg(t,s){try{return t.toISOString().replace(/\.\d*/,"")}catch(a){if(s)throw a}return""}function jM(t,s){switch(typeof t){case"string":var a=ct("vt:lpwstr",Ws(t));return a=a.replace(/&quot;/g,"_x0022_"),a;case"number":return ct((t|0)==t?"vt:i4":"vt:r8",Ws(String(t)));case"boolean":return ct("vt:bool",t?"true":"false")}if(t instanceof Date)return ct("vt:filetime",Dg(t));throw new Error("Unable to serialize "+t)}var sr={CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/metadata/core-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/custom-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties",CT:"http://schemas.openxmlformats.org/package/2006/content-types",RELS:"http://schemas.openxmlformats.org/package/2006/relationships",TCMNT:"http://schemas.microsoft.com/office/spreadsheetml/2018/threadedcomments",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",dcmitype:"http://purl.org/dc/dcmitype/",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",vt:"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes",xsi:"http://www.w3.org/2001/XMLSchema-instance",xsd:"http://www.w3.org/2001/XMLSchema"},cd=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"],fn={o:"urn:schemas-microsoft-com:office:office",x:"urn:schemas-microsoft-com:office:excel",ss:"urn:schemas-microsoft-com:office:spreadsheet",dt:"uuid:C2F41010-65B3-11d1-A29F-00AA00C14882",mv:"http://macVmlSchemaUri",v:"urn:schemas-microsoft-com:vml",html:"http://www.w3.org/TR/REC-html40"};function yM(t,s){for(var a=1-2*(t[s+7]>>>7),r=((t[s+7]&127)<<4)+(t[s+6]>>>4&15),i=t[s+6]&15,o=5;o>=0;--o)i=i*256+t[s+o];return r==2047?i==0?a*(1/0):NaN:(r==0?r=-1022:(r-=1023,i+=Math.pow(2,52)),a*Math.pow(2,r-52)*i)}function NM(t,s,a){var r=(s<0||1/s==-1/0?1:0)<<7,i=0,o=0,c=r?-s:s;isFinite(c)?c==0?i=o=0:(i=Math.floor(Math.log(c)/Math.LN2),o=c*Math.pow(2,52-i),i<=-1023&&(!isFinite(o)||o<Math.pow(2,52))?i=-1022:(o-=Math.pow(2,52),i+=1023)):(i=2047,o=isNaN(s)?26985:0);for(var u=0;u<=5;++u,o/=256)t[a+u]=o&255;t[a+6]=(i&15)<<4|o&15,t[a+7]=i>>4|r}var ww=function(t){for(var s=[],a=10240,r=0;r<t[0].length;++r)if(t[0][r])for(var i=0,o=t[0][r].length;i<o;i+=a)s.push.apply(s,t[0][r].slice(i,i+a));return s},Sw=Fs?function(t){return t[0].length>0&&Buffer.isBuffer(t[0][0])?Buffer.concat(t[0].map(function(s){return Buffer.isBuffer(s)?s:rl(s)})):ww(t)}:ww,Cw=function(t,s,a){for(var r=[],i=s;i<a;i+=2)r.push(String.fromCharCode(fu(t,i)));return r.join("").replace(ju,"")},zv=Fs?function(t,s,a){return Buffer.isBuffer(t)?t.toString("utf16le",s,a).replace(ju,""):Cw(t,s,a)}:Cw,Tw=function(t,s,a){for(var r=[],i=s;i<s+a;++i)r.push(("0"+t[i].toString(16)).slice(-2));return r.join("")},$C=Fs?function(t,s,a){return Buffer.isBuffer(t)?t.toString("hex",s,s+a):Tw(t,s,a)}:Tw,kw=function(t,s,a){for(var r=[],i=s;i<a;i++)r.push(String.fromCharCode(_c(t,i)));return r.join("")},am=Fs?function(s,a,r){return Buffer.isBuffer(s)?s.toString("utf8",a,r):kw(s,a,r)}:kw,HC=function(t,s){var a=xn(t,s);return a>0?am(t,s+4,s+4+a-1):""},WC=HC,GC=function(t,s){var a=xn(t,s);return a>0?am(t,s+4,s+4+a-1):""},qC=GC,KC=function(t,s){var a=2*xn(t,s);return a>0?am(t,s+4,s+4+a-1):""},YC=KC,XC=function(s,a){var r=xn(s,a);return r>0?zv(s,a+4,a+4+r):""},QC=XC,ZC=function(t,s){var a=xn(t,s);return a>0?am(t,s+4,s+4+a):""},JC=ZC,eT=function(t,s){return yM(t,s)},gf=eT,Uv=function(s){return Array.isArray(s)||typeof Uint8Array<"u"&&s instanceof Uint8Array};Fs&&(WC=function(s,a){if(!Buffer.isBuffer(s))return HC(s,a);var r=s.readUInt32LE(a);return r>0?s.toString("utf8",a+4,a+4+r-1):""},qC=function(s,a){if(!Buffer.isBuffer(s))return GC(s,a);var r=s.readUInt32LE(a);return r>0?s.toString("utf8",a+4,a+4+r-1):""},YC=function(s,a){if(!Buffer.isBuffer(s))return KC(s,a);var r=2*s.readUInt32LE(a);return s.toString("utf16le",a+4,a+4+r-1)},QC=function(s,a){if(!Buffer.isBuffer(s))return XC(s,a);var r=s.readUInt32LE(a);return s.toString("utf16le",a+4,a+4+r)},JC=function(s,a){if(!Buffer.isBuffer(s))return ZC(s,a);var r=s.readUInt32LE(a);return s.toString("utf8",a+4,a+4+r)},gf=function(s,a){return Buffer.isBuffer(s)?s.readDoubleLE(a):eT(s,a)},Uv=function(s){return Buffer.isBuffer(s)||Array.isArray(s)||typeof Uint8Array<"u"&&s instanceof Uint8Array});var _c=function(t,s){return t[s]},fu=function(t,s){return t[s+1]*256+t[s]},bM=function(t,s){var a=t[s+1]*256+t[s];return a<32768?a:(65535-a+1)*-1},xn=function(t,s){return t[s+3]*(1<<24)+(t[s+2]<<16)+(t[s+1]<<8)+t[s]},go=function(t,s){return t[s+3]<<24|t[s+2]<<16|t[s+1]<<8|t[s]},wM=function(t,s){return t[s]<<24|t[s+1]<<16|t[s+2]<<8|t[s+3]};function Nu(t,s){var a="",r,i,o=[],c,u,f,x;switch(s){case"dbcs":if(x=this.l,Fs&&Buffer.isBuffer(this))a=this.slice(this.l,this.l+2*t).toString("utf16le");else for(f=0;f<t;++f)a+=String.fromCharCode(fu(this,x)),x+=2;t*=2;break;case"utf8":a=am(this,this.l,this.l+t);break;case"utf16le":t*=2,a=zv(this,this.l,this.l+t);break;case"wstr":return Nu.call(this,t,"dbcs");case"lpstr-ansi":a=WC(this,this.l),t=4+xn(this,this.l);break;case"lpstr-cp":a=qC(this,this.l),t=4+xn(this,this.l);break;case"lpwstr":a=YC(this,this.l),t=4+2*xn(this,this.l);break;case"lpp4":t=4+xn(this,this.l),a=QC(this,this.l),t&2&&(t+=2);break;case"8lpp4":t=4+xn(this,this.l),a=JC(this,this.l),t&3&&(t+=4-(t&3));break;case"cstr":for(t=0,a="";(c=_c(this,this.l+t++))!==0;)o.push(Dh(c));a=o.join("");break;case"_wstr":for(t=0,a="";(c=fu(this,this.l+t))!==0;)o.push(Dh(c)),t+=2;t+=2,a=o.join("");break;case"dbcs-cont":for(a="",x=this.l,f=0;f<t;++f){if(this.lens&&this.lens.indexOf(x)!==-1)return c=_c(this,x),this.l=x+1,u=Nu.call(this,t-f,c?"dbcs-cont":"sbcs-cont"),o.join("")+u;o.push(Dh(fu(this,x))),x+=2}a=o.join(""),t*=2;break;case"cpstr":case"sbcs-cont":for(a="",x=this.l,f=0;f!=t;++f){if(this.lens&&this.lens.indexOf(x)!==-1)return c=_c(this,x),this.l=x+1,u=Nu.call(this,t-f,c?"dbcs-cont":"sbcs-cont"),o.join("")+u;o.push(Dh(_c(this,x))),x+=1}a=o.join("");break;default:switch(t){case 1:return r=_c(this,this.l),this.l++,r;case 2:return r=(s==="i"?bM:fu)(this,this.l),this.l+=2,r;case 4:case-4:return s==="i"||(this[this.l+3]&128)===0?(r=(t>0?go:wM)(this,this.l),this.l+=4,r):(i=xn(this,this.l),this.l+=4,i);case 8:case-8:if(s==="f")return t==8?i=gf(this,this.l):i=gf([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,i;t=8;case 16:a=$C(this,this.l,t);break}}return this.l+=t,a}var SM=function(t,s,a){t[a]=s&255,t[a+1]=s>>>8&255,t[a+2]=s>>>16&255,t[a+3]=s>>>24&255},CM=function(t,s,a){t[a]=s&255,t[a+1]=s>>8&255,t[a+2]=s>>16&255,t[a+3]=s>>24&255},TM=function(t,s,a){t[a]=s&255,t[a+1]=s>>>8&255};function kM(t,s,a){var r=0,i=0;if(a==="dbcs"){for(i=0;i!=s.length;++i)TM(this,s.charCodeAt(i),this.l+2*i);r=2*s.length}else if(a==="sbcs"){for(s=s.replace(/[^\x00-\x7F]/g,"_"),i=0;i!=s.length;++i)this[this.l+i]=s.charCodeAt(i)&255;r=s.length}else if(a==="hex"){for(;i<t;++i)this[this.l++]=parseInt(s.slice(2*i,2*i+2),16)||0;return this}else if(a==="utf16le"){var o=Math.min(this.l+t,this.length);for(i=0;i<Math.min(s.length,t);++i){var c=s.charCodeAt(i);this[this.l++]=c&255,this[this.l++]=c>>8}for(;this.l<o;)this[this.l++]=0;return this}else switch(t){case 1:r=1,this[this.l]=s&255;break;case 2:r=2,this[this.l]=s&255,s>>>=8,this[this.l+1]=s&255;break;case 3:r=3,this[this.l]=s&255,s>>>=8,this[this.l+1]=s&255,s>>>=8,this[this.l+2]=s&255;break;case 4:r=4,SM(this,s,this.l);break;case 8:if(r=8,a==="f"){NM(this,s,this.l);break}case 16:break;case-4:r=4,CM(this,s,this.l);break}return this.l+=r,this}function tT(t,s){var a=$C(this,this.l,t.length>>1);if(a!==t)throw new Error(s+"Expected "+t+" saw "+a);this.l+=t.length>>1}function hn(t,s){t.l=s,t.read_shift=Nu,t.chk=tT,t.write_shift=kM}function bi(t,s){t.l+=s}function qe(t){var s=Po(t);return hn(s,0),s}function Jr(){var t=[],s=Fs?256:2048,a=function(x){var h=qe(x);return hn(h,0),h},r=a(s),i=function(){r&&(r.length>r.l&&(r=r.slice(0,r.l),r.l=r.length),r.length>0&&t.push(r),r=null)},o=function(x){return r&&x<r.length-r.l?r:(i(),r=a(Math.max(x+1,s)))},c=function(){return i(),pr(t)},u=function(x){i(),r=x,r.l==null&&(r.l=r.length),o(s)};return{next:o,push:u,end:c,_bufs:t}}function at(t,s,a,r){var i=+s,o;if(!isNaN(i)){r||(r=y7[i].p||(a||[]).length||0),o=1+(i>=128?1:0)+1,r>=128&&++o,r>=16384&&++o,r>=2097152&&++o;var c=t.next(o);i<=127?c.write_shift(1,i):(c.write_shift(1,(i&127)+128),c.write_shift(1,i>>7));for(var u=0;u!=4;++u)if(r>=128)c.write_shift(1,(r&127)+128),r>>=7;else{c.write_shift(1,r);break}r>0&&Uv(a)&&t.push(a)}}function bu(t,s,a){var r=tn(t);if(s.s?(r.cRel&&(r.c+=s.s.c),r.rRel&&(r.r+=s.s.r)):(r.cRel&&(r.c+=s.c),r.rRel&&(r.r+=s.r)),!a||a.biff<12){for(;r.c>=256;)r.c-=256;for(;r.r>=65536;)r.r-=65536}return r}function Ew(t,s,a){var r=tn(t);return r.s=bu(r.s,s.s,a),r.e=bu(r.e,s.s,a),r}function wu(t,s){if(t.cRel&&t.c<0)for(t=tn(t);t.c<0;)t.c+=s>8?16384:256;if(t.rRel&&t.r<0)for(t=tn(t);t.r<0;)t.r+=s>8?1048576:s>5?65536:16384;var a=qs(t);return!t.cRel&&t.cRel!=null&&(a=_M(a)),!t.rRel&&t.rRel!=null&&(a=EM(a)),a}function E0(t,s){return t.s.r==0&&!t.s.rRel&&t.e.r==(s.biff>=12?1048575:s.biff>=8?65536:16384)&&!t.e.rRel?(t.s.cRel?"":"$")+Dr(t.s.c)+":"+(t.e.cRel?"":"$")+Dr(t.e.c):t.s.c==0&&!t.s.cRel&&t.e.c==(s.biff>=12?16383:255)&&!t.e.cRel?(t.s.rRel?"":"$")+jr(t.s.r)+":"+(t.e.rRel?"":"$")+jr(t.e.r):wu(t.s,s.biff)+":"+wu(t.e,s.biff)}function Vv(t){return parseInt(AM(t),10)-1}function jr(t){return""+(t+1)}function EM(t){return t.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}function AM(t){return t.replace(/\$(\d+)$/,"$1")}function $v(t){for(var s=DM(t),a=0,r=0;r!==s.length;++r)a=26*a+s.charCodeAt(r)-64;return a-1}function Dr(t){if(t<0)throw new Error("invalid column "+t);var s="";for(++t;t;t=Math.floor((t-1)/26))s=String.fromCharCode((t-1)%26+65)+s;return s}function _M(t){return t.replace(/^([A-Z])/,"$$$1")}function DM(t){return t.replace(/^\$([A-Z])/,"$1")}function OM(t){return t.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")}function ar(t){for(var s=0,a=0,r=0;r<t.length;++r){var i=t.charCodeAt(r);i>=48&&i<=57?s=10*s+(i-48):i>=65&&i<=90&&(a=26*a+(i-64))}return{c:a-1,r:s-1}}function qs(t){for(var s=t.c+1,a="";s;s=(s-1)/26|0)a=String.fromCharCode((s-1)%26+65)+a;return a+(t.r+1)}function pn(t){var s=t.indexOf(":");return s==-1?{s:ar(t),e:ar(t)}:{s:ar(t.slice(0,s)),e:ar(t.slice(s+1))}}function Ga(t,s){return typeof s>"u"||typeof s=="number"?Ga(t.s,t.e):(typeof t!="string"&&(t=qs(t)),typeof s!="string"&&(s=qs(s)),t==s?t:t+":"+s)}function oa(t){var s={s:{c:0,r:0},e:{c:0,r:0}},a=0,r=0,i=0,o=t.length;for(a=0;r<o&&!((i=t.charCodeAt(r)-64)<1||i>26);++r)a=26*a+i;for(s.s.c=--a,a=0;r<o&&!((i=t.charCodeAt(r)-48)<0||i>9);++r)a=10*a+i;if(s.s.r=--a,r===o||i!=10)return s.e.c=s.s.c,s.e.r=s.s.r,s;for(++r,a=0;r!=o&&!((i=t.charCodeAt(r)-64)<1||i>26);++r)a=26*a+i;for(s.e.c=--a,a=0;r!=o&&!((i=t.charCodeAt(r)-48)<0||i>9);++r)a=10*a+i;return s.e.r=--a,s}function Aw(t,s){var a=t.t=="d"&&s instanceof Date;if(t.z!=null)try{return t.w=Ll(t.z,a?en(s):s)}catch{}try{return t.w=Ll((t.XF||{}).numFmtId||(a?14:0),a?en(s):s)}catch{return""+s}}function Ji(t,s,a){return t==null||t.t==null||t.t=="z"?"":t.w!==void 0?t.w:(t.t=="d"&&!t.z&&a&&a.dateNF&&(t.z=a.dateNF),t.t=="e"?rm[t.v]||t.v:s==null?Aw(t,t.v):Aw(t,s))}function Lo(t,s){var a=s&&s.sheet?s.sheet:"Sheet1",r={};return r[a]=t,{SheetNames:[a],Sheets:r}}function sT(t,s,a){var r=a||{},i=t?Array.isArray(t):r.dense,o=t||(i?[]:{}),c=0,u=0;if(o&&r.origin!=null){if(typeof r.origin=="number")c=r.origin;else{var f=typeof r.origin=="string"?ar(r.origin):r.origin;c=f.r,u=f.c}o["!ref"]||(o["!ref"]="A1:A1")}var x={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(o["!ref"]){var h=oa(o["!ref"]);x.s.c=h.s.c,x.s.r=h.s.r,x.e.c=Math.max(x.e.c,h.e.c),x.e.r=Math.max(x.e.r,h.e.r),c==-1&&(x.e.r=c=h.e.r+1)}for(var p=0;p!=s.length;++p)if(s[p]){if(!Array.isArray(s[p]))throw new Error("aoa_to_sheet expects an array of arrays");for(var g=0;g!=s[p].length;++g)if(!(typeof s[p][g]>"u")){var b={v:s[p][g]},N=c+p,y=u+g;if(x.s.r>N&&(x.s.r=N),x.s.c>y&&(x.s.c=y),x.e.r<N&&(x.e.r=N),x.e.c<y&&(x.e.c=y),s[p][g]&&typeof s[p][g]=="object"&&!Array.isArray(s[p][g])&&!(s[p][g]instanceof Date))b=s[p][g];else if(Array.isArray(b.v)&&(b.f=s[p][g][1],b.v=b.v[0]),b.v===null)if(b.f)b.t="n";else if(r.nullError)b.t="e",b.v=0;else if(r.sheetStubs)b.t="z";else continue;else typeof b.v=="number"?b.t="n":typeof b.v=="boolean"?b.t="b":b.v instanceof Date?(b.z=r.dateNF||_a[14],r.cellDates?(b.t="d",b.w=Ll(b.z,en(b.v))):(b.t="n",b.v=en(b.v),b.w=Ll(b.z,b.v))):b.t="s";if(i)o[N]||(o[N]=[]),o[N][y]&&o[N][y].z&&(b.z=o[N][y].z),o[N][y]=b;else{var S=qs({c:y,r:N});o[S]&&o[S].z&&(b.z=o[S].z),o[S]=b}}}return x.s.c<1e7&&(o["!ref"]=Ga(x)),o}function dd(t,s){return sT(null,t,s)}function RM(t){return t.read_shift(4,"i")}function ti(t,s){return s||(s=qe(4)),s.write_shift(4,t),s}function Or(t){var s=t.read_shift(4);return s===0?"":t.read_shift(s,"dbcs")}function rr(t,s){var a=!1;return s==null&&(a=!0,s=qe(4+2*t.length)),s.write_shift(4,t.length),t.length>0&&s.write_shift(0,t,"dbcs"),a?s.slice(0,s.l):s}function PM(t){return{ich:t.read_shift(2),ifnt:t.read_shift(2)}}function MM(t,s){return s||(s=qe(4)),s.write_shift(2,0),s.write_shift(2,0),s}function Hv(t,s){var a=t.l,r=t.read_shift(1),i=Or(t),o=[],c={t:i,h:i};if((r&1)!==0){for(var u=t.read_shift(4),f=0;f!=u;++f)o.push(PM(t));c.r=o}else c.r=[{ich:0,ifnt:0}];return t.l=a+s,c}function FM(t,s){var a=!1;return s==null&&(a=!0,s=qe(15+4*t.t.length)),s.write_shift(1,0),rr(t.t,s),a?s.slice(0,s.l):s}var IM=Hv;function LM(t,s){var a=!1;return s==null&&(a=!0,s=qe(23+4*t.t.length)),s.write_shift(1,1),rr(t.t,s),s.write_shift(4,1),MM({},s),a?s.slice(0,s.l):s}function Bn(t){var s=t.read_shift(4),a=t.read_shift(2);return a+=t.read_shift(1)<<16,t.l++,{c:s,iStyleRef:a}}function Bo(t,s){return s==null&&(s=qe(8)),s.write_shift(-4,t.c),s.write_shift(3,t.iStyleRef||t.s),s.write_shift(1,0),s}function zo(t){var s=t.read_shift(2);return s+=t.read_shift(1)<<16,t.l++,{c:-1,iStyleRef:s}}function Uo(t,s){return s==null&&(s=qe(4)),s.write_shift(3,t.iStyleRef||t.s),s.write_shift(1,0),s}var BM=Or,aT=rr;function Wv(t){var s=t.read_shift(4);return s===0||s===4294967295?"":t.read_shift(s,"dbcs")}function vf(t,s){var a=!1;return s==null&&(a=!0,s=qe(127)),s.write_shift(4,t.length>0?t.length:4294967295),t.length>0&&s.write_shift(0,t,"dbcs"),a?s.slice(0,s.l):s}var zM=Or,Og=Wv,Gv=vf;function rT(t){var s=t.slice(t.l,t.l+4),a=s[0]&1,r=s[0]&2;t.l+=4;var i=r===0?gf([0,0,0,0,s[0]&252,s[1],s[2],s[3]],0):go(s,0)>>2;return a?i/100:i}function nT(t,s){s==null&&(s=qe(4));var a=0,r=0,i=t*100;if(t==(t|0)&&t>=-536870912&&t<1<<29?r=1:i==(i|0)&&i>=-536870912&&i<1<<29&&(r=1,a=1),r)s.write_shift(-4,((a?i:t)<<2)+(a+2));else throw new Error("unsupported RkNumber "+t)}function iT(t){var s={s:{},e:{}};return s.s.r=t.read_shift(4),s.e.r=t.read_shift(4),s.s.c=t.read_shift(4),s.e.c=t.read_shift(4),s}function UM(t,s){return s||(s=qe(16)),s.write_shift(4,t.s.r),s.write_shift(4,t.e.r),s.write_shift(4,t.s.c),s.write_shift(4,t.e.c),s}var Vo=iT,ud=UM;function md(t){if(t.length-t.l<8)throw"XLS Xnum Buffer underflow";return t.read_shift(8,"f")}function Mo(t,s){return(s||qe(8)).write_shift(8,t,"f")}function VM(t){var s={},a=t.read_shift(1),r=a>>>1,i=t.read_shift(1),o=t.read_shift(2,"i"),c=t.read_shift(1),u=t.read_shift(1),f=t.read_shift(1);switch(t.l++,r){case 0:s.auto=1;break;case 1:s.index=i;var x=QM[i];x&&(s.rgb=zw(x));break;case 2:s.rgb=zw([c,u,f]);break;case 3:s.theme=i;break}return o!=0&&(s.tint=o>0?o/32767:o/32768),s}function jf(t,s){if(s||(s=qe(8)),!t||t.auto)return s.write_shift(4,0),s.write_shift(4,0),s;t.index!=null?(s.write_shift(1,2),s.write_shift(1,t.index)):t.theme!=null?(s.write_shift(1,6),s.write_shift(1,t.theme)):(s.write_shift(1,5),s.write_shift(1,0));var a=t.tint||0;if(a>0?a*=32767:a<0&&(a*=32768),s.write_shift(2,a),!t.rgb||t.theme!=null)s.write_shift(2,0),s.write_shift(1,0),s.write_shift(1,0);else{var r=t.rgb||"FFFFFF";typeof r=="number"&&(r=("000000"+r.toString(16)).slice(-6)),s.write_shift(1,parseInt(r.slice(0,2),16)),s.write_shift(1,parseInt(r.slice(2,4),16)),s.write_shift(1,parseInt(r.slice(4,6),16)),s.write_shift(1,255)}return s}function $M(t){var s=t.read_shift(1);t.l++;var a={fBold:s&1,fItalic:s&2,fUnderline:s&4,fStrikeout:s&8,fOutline:s&16,fShadow:s&32,fCondense:s&64,fExtend:s&128};return a}function HM(t,s){s||(s=qe(2));var a=(t.italic?2:0)|(t.strike?8:0)|(t.outline?16:0)|(t.shadow?32:0)|(t.condense?64:0)|(t.extend?128:0);return s.write_shift(1,a),s.write_shift(1,0),s}var lT=2,un=3,Mh=11,yf=19,Fh=64,WM=65,GM=71,qM=4108,KM=4126,hr=80,_w={1:{n:"CodePage",t:lT},2:{n:"Category",t:hr},3:{n:"PresentationFormat",t:hr},4:{n:"ByteCount",t:un},5:{n:"LineCount",t:un},6:{n:"ParagraphCount",t:un},7:{n:"SlideCount",t:un},8:{n:"NoteCount",t:un},9:{n:"HiddenCount",t:un},10:{n:"MultimediaClipCount",t:un},11:{n:"ScaleCrop",t:Mh},12:{n:"HeadingPairs",t:qM},13:{n:"TitlesOfParts",t:KM},14:{n:"Manager",t:hr},15:{n:"Company",t:hr},16:{n:"LinksUpToDate",t:Mh},17:{n:"CharacterCount",t:un},19:{n:"SharedDoc",t:Mh},22:{n:"HyperlinksChanged",t:Mh},23:{n:"AppVersion",t:un,p:"version"},24:{n:"DigSig",t:WM},26:{n:"ContentType",t:hr},27:{n:"ContentStatus",t:hr},28:{n:"Language",t:hr},29:{n:"Version",t:hr},255:{},2147483648:{n:"Locale",t:yf},2147483651:{n:"Behavior",t:yf},1919054434:{}},Dw={1:{n:"CodePage",t:lT},2:{n:"Title",t:hr},3:{n:"Subject",t:hr},4:{n:"Author",t:hr},5:{n:"Keywords",t:hr},6:{n:"Comments",t:hr},7:{n:"Template",t:hr},8:{n:"LastAuthor",t:hr},9:{n:"RevNumber",t:hr},10:{n:"EditTime",t:Fh},11:{n:"LastPrinted",t:Fh},12:{n:"CreatedDate",t:Fh},13:{n:"ModifiedDate",t:Fh},14:{n:"PageCount",t:un},15:{n:"WordCount",t:un},16:{n:"CharCount",t:un},17:{n:"Thumbnail",t:GM},18:{n:"Application",t:hr},19:{n:"DocSecurity",t:un},255:{},2147483648:{n:"Locale",t:yf},2147483651:{n:"Behavior",t:yf},1919054434:{}};function YM(t){return t.map(function(s){return[s>>16&255,s>>8&255,s&255]})}var XM=YM([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),QM=tn(XM),rm={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},ZM={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"},Ih={workbooks:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml",xlsm:"application/vnd.ms-excel.sheet.macroEnabled.main+xml",xlsb:"application/vnd.ms-excel.sheet.binary.macroEnabled.main",xlam:"application/vnd.ms-excel.addin.macroEnabled.main+xml",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml"},strs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml",xlsb:"application/vnd.ms-excel.sharedStrings"},comments:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml",xlsb:"application/vnd.ms-excel.comments"},sheets:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml",xlsb:"application/vnd.ms-excel.worksheet"},charts:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml",xlsb:"application/vnd.ms-excel.chartsheet"},dialogs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml",xlsb:"application/vnd.ms-excel.dialogsheet"},macros:{xlsx:"application/vnd.ms-excel.macrosheet+xml",xlsb:"application/vnd.ms-excel.macrosheet"},metadata:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml",xlsb:"application/vnd.ms-excel.sheetMetadata"},styles:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml",xlsb:"application/vnd.ms-excel.styles"}};function oT(){return{workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""}}function cT(t,s){var a=oM(ZM),r=[],i;r[r.length]=Ya,r[r.length]=ct("Types",null,{xmlns:sr.CT,"xmlns:xsd":sr.xsd,"xmlns:xsi":sr.xsi}),r=r.concat([["xml","application/xml"],["bin","application/vnd.ms-excel.sheet.binary.macroEnabled.main"],["vml","application/vnd.openxmlformats-officedocument.vmlDrawing"],["data","application/vnd.openxmlformats-officedocument.model+data"],["bmp","image/bmp"],["png","image/png"],["gif","image/gif"],["emf","image/x-emf"],["wmf","image/x-wmf"],["jpg","image/jpeg"],["jpeg","image/jpeg"],["tif","image/tiff"],["tiff","image/tiff"],["pdf","application/pdf"],["rels","application/vnd.openxmlformats-package.relationships+xml"]].map(function(f){return ct("Default",null,{Extension:f[0],ContentType:f[1]})}));var o=function(f){t[f]&&t[f].length>0&&(i=t[f][0],r[r.length]=ct("Override",null,{PartName:(i[0]=="/"?"":"/")+i,ContentType:Ih[f][s.bookType]||Ih[f].xlsx}))},c=function(f){(t[f]||[]).forEach(function(x){r[r.length]=ct("Override",null,{PartName:(x[0]=="/"?"":"/")+x,ContentType:Ih[f][s.bookType]||Ih[f].xlsx})})},u=function(f){(t[f]||[]).forEach(function(x){r[r.length]=ct("Override",null,{PartName:(x[0]=="/"?"":"/")+x,ContentType:a[f][0]})})};return o("workbooks"),c("sheets"),c("charts"),u("themes"),["strs","styles"].forEach(o),["coreprops","extprops","custprops"].forEach(u),u("vba"),u("comments"),u("threadedcomments"),u("drawings"),c("metadata"),u("people"),r.length>2&&(r[r.length]="</Types>",r[1]=r[1].replace("/>",">")),r.join("")}var Os={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function dT(t){var s=t.lastIndexOf("/");return t.slice(0,s+1)+"_rels/"+t.slice(s+1)+".rels"}function $c(t){var s=[Ya,ct("Relationships",null,{xmlns:sr.RELS})];return Nr(t["!id"]).forEach(function(a){s[s.length]=ct("Relationship",null,t["!id"][a])}),s.length>2&&(s[s.length]="</Relationships>",s[1]=s[1].replace("/>",">")),s.join("")}function Us(t,s,a,r,i,o){if(i||(i={}),t["!id"]||(t["!id"]={}),t["!idx"]||(t["!idx"]=1),s<0)for(s=t["!idx"];t["!id"]["rId"+s];++s);if(t["!idx"]=s+1,i.Id="rId"+s,i.Type=r,i.Target=a,[Os.HLINK,Os.XPATH,Os.XMISS].indexOf(i.Type)>-1&&(i.TargetMode="External"),t["!id"][i.Id])throw new Error("Cannot rewrite rId "+s);return t["!id"][i.Id]=i,t[("/"+i.Target).replace("//","/")]=i,s}function JM(t){var s=[Ya];s.push(`<manifest:manifest xmlns:manifest="urn:oasis:names:tc:opendocument:xmlns:manifest:1.0" manifest:version="1.2">
`),s.push(`  <manifest:file-entry manifest:full-path="/" manifest:version="1.2" manifest:media-type="application/vnd.oasis.opendocument.spreadsheet"/>
`);for(var a=0;a<t.length;++a)s.push('  <manifest:file-entry manifest:full-path="'+t[a][0]+'" manifest:media-type="'+t[a][1]+`"/>
`);return s.push("</manifest:manifest>"),s.join("")}function Ow(t,s,a){return['  <rdf:Description rdf:about="'+t+`">
`,'    <rdf:type rdf:resource="http://docs.oasis-open.org/ns/office/1.2/meta/'+(a||"odf")+"#"+s+`"/>
`,`  </rdf:Description>
`].join("")}function e8(t,s){return['  <rdf:Description rdf:about="'+t+`">
`,'    <ns0:hasPart xmlns:ns0="http://docs.oasis-open.org/ns/office/1.2/meta/pkg#" rdf:resource="'+s+`"/>
`,`  </rdf:Description>
`].join("")}function t8(t){var s=[Ya];s.push(`<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
`);for(var a=0;a!=t.length;++a)s.push(Ow(t[a][0],t[a][1])),s.push(e8("",t[a][0]));return s.push(Ow("","Document","pkg")),s.push("</rdf:RDF>"),s.join("")}function uT(){return'<office:document-meta xmlns:office="urn:oasis:names:tc:opendocument:xmlns:office:1.0" xmlns:meta="urn:oasis:names:tc:opendocument:xmlns:meta:1.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:xlink="http://www.w3.org/1999/xlink" office:version="1.2"><office:meta><meta:generator>SheetJS '+uf.version+"</meta:generator></office:meta></office:document-meta>"}var Co=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]];function A0(t,s,a,r,i){i[t]!=null||s==null||s===""||(i[t]=s,s=Ws(s),r[r.length]=a?ct(t,s,a):gr(t,s))}function mT(t,s){var a=s||{},r=[Ya,ct("cp:coreProperties",null,{"xmlns:cp":sr.CORE_PROPS,"xmlns:dc":sr.dc,"xmlns:dcterms":sr.dcterms,"xmlns:dcmitype":sr.dcmitype,"xmlns:xsi":sr.xsi})],i={};if(!t&&!a.Props)return r.join("");t&&(t.CreatedDate!=null&&A0("dcterms:created",typeof t.CreatedDate=="string"?t.CreatedDate:Dg(t.CreatedDate,a.WTF),{"xsi:type":"dcterms:W3CDTF"},r,i),t.ModifiedDate!=null&&A0("dcterms:modified",typeof t.ModifiedDate=="string"?t.ModifiedDate:Dg(t.ModifiedDate,a.WTF),{"xsi:type":"dcterms:W3CDTF"},r,i));for(var o=0;o!=Co.length;++o){var c=Co[o],u=a.Props&&a.Props[c[1]]!=null?a.Props[c[1]]:t?t[c[1]]:null;u===!0?u="1":u===!1?u="0":typeof u=="number"&&(u=String(u)),u!=null&&A0(c[0],u,null,r,i)}return r.length>2&&(r[r.length]="</cp:coreProperties>",r[1]=r[1].replace("/>",">")),r.join("")}var Hc=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]],hT=["Worksheets","SheetNames","NamedRanges","DefinedNames","Chartsheets","ChartNames"];function fT(t){var s=[],a=ct;return t||(t={}),t.Application="SheetJS",s[s.length]=Ya,s[s.length]=ct("Properties",null,{xmlns:sr.EXT_PROPS,"xmlns:vt":sr.vt}),Hc.forEach(function(r){if(t[r[1]]!==void 0){var i;switch(r[2]){case"string":i=Ws(String(t[r[1]]));break;case"bool":i=t[r[1]]?"true":"false";break}i!==void 0&&(s[s.length]=a(r[0],i))}}),s[s.length]=a("HeadingPairs",a("vt:vector",a("vt:variant","<vt:lpstr>Worksheets</vt:lpstr>")+a("vt:variant",a("vt:i4",String(t.Worksheets))),{size:2,baseType:"variant"})),s[s.length]=a("TitlesOfParts",a("vt:vector",t.SheetNames.map(function(r){return"<vt:lpstr>"+Ws(r)+"</vt:lpstr>"}).join(""),{size:t.Worksheets,baseType:"lpstr"})),s.length>2&&(s[s.length]="</Properties>",s[1]=s[1].replace("/>",">")),s.join("")}function xT(t){var s=[Ya,ct("Properties",null,{xmlns:sr.CUST_PROPS,"xmlns:vt":sr.vt})];if(!t)return s.join("");var a=1;return Nr(t).forEach(function(i){++a,s[s.length]=ct("property",jM(t[i]),{fmtid:"{D5CDD505-2E9C-101B-9397-08002B2CF9AE}",pid:a,name:Ws(i)})}),s.length>2&&(s[s.length]="</Properties>",s[1]=s[1].replace("/>",">")),s.join("")}var Rw={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"};function s8(t,s){var a=[];return Nr(Rw).map(function(r){for(var i=0;i<Co.length;++i)if(Co[i][1]==r)return Co[i];for(i=0;i<Hc.length;++i)if(Hc[i][1]==r)return Hc[i];throw r}).forEach(function(r){if(t[r[1]]!=null){var i=s&&s.Props&&s.Props[r[1]]!=null?s.Props[r[1]]:t[r[1]];switch(r[2]){case"date":i=new Date(i).toISOString().replace(/\.\d*Z/,"Z");break}typeof i=="number"?i=String(i):i===!0||i===!1?i=i?"1":"0":i instanceof Date&&(i=new Date(i).toISOString().replace(/\.\d*Z/,"")),a.push(gr(Rw[r[1]]||r[1],i))}}),ct("DocumentProperties",a.join(""),{xmlns:fn.o})}function a8(t,s){var a=["Worksheets","SheetNames"],r="CustomDocumentProperties",i=[];return t&&Nr(t).forEach(function(o){if(Object.prototype.hasOwnProperty.call(t,o)){for(var c=0;c<Co.length;++c)if(o==Co[c][1])return;for(c=0;c<Hc.length;++c)if(o==Hc[c][1])return;for(c=0;c<a.length;++c)if(o==a[c])return;var u=t[o],f="string";typeof u=="number"?(f="float",u=String(u)):u===!0||u===!1?(f="boolean",u=u?"1":"0"):u=String(u),i.push(ct(yw(o),u,{"dt:dt":f}))}}),s&&Nr(s).forEach(function(o){if(Object.prototype.hasOwnProperty.call(s,o)&&!(t&&Object.prototype.hasOwnProperty.call(t,o))){var c=s[o],u="string";typeof c=="number"?(u="float",c=String(c)):c===!0||c===!1?(u="boolean",c=c?"1":"0"):c instanceof Date?(u="dateTime.tz",c=c.toISOString()):c=String(c),i.push(ct(yw(o),c,{"dt:dt":u}))}}),"<"+r+' xmlns="'+fn.o+'">'+i.join("")+"</"+r+">"}function r8(t){var s=typeof t=="string"?new Date(Date.parse(t)):t,a=s.getTime()/1e3+11644473600,r=a%Math.pow(2,32),i=(a-r)/Math.pow(2,32);r*=1e7,i*=1e7;var o=r/Math.pow(2,32)|0;o>0&&(r=r%Math.pow(2,32),i+=o);var c=qe(8);return c.write_shift(4,r),c.write_shift(4,i),c}function Pw(t,s){var a=qe(4),r=qe(4);switch(a.write_shift(4,t==80?31:t),t){case 3:r.write_shift(-4,s);break;case 5:r=qe(8),r.write_shift(8,s,"f");break;case 11:r.write_shift(4,s?1:0);break;case 64:r=r8(s);break;case 31:case 80:for(r=qe(4+2*(s.length+1)+(s.length%2?0:2)),r.write_shift(4,s.length+1),r.write_shift(0,s,"dbcs");r.l!=r.length;)r.write_shift(1,0);break;default:throw new Error("TypedPropertyValue unrecognized type "+t+" "+s)}return pr([a,r])}var pT=["CodePage","Thumbnail","_PID_LINKBASE","_PID_HLINKS","SystemIdentifier","FMTID"];function n8(t){switch(typeof t){case"boolean":return 11;case"number":return(t|0)==t?3:5;case"string":return 31;case"object":if(t instanceof Date)return 64;break}return-1}function Mw(t,s,a){var r=qe(8),i=[],o=[],c=8,u=0,f=qe(8),x=qe(8);if(f.write_shift(4,2),f.write_shift(4,1200),x.write_shift(4,1),o.push(f),i.push(x),c+=8+f.length,!s){x=qe(8),x.write_shift(4,0),i.unshift(x);var h=[qe(4)];for(h[0].write_shift(4,t.length),u=0;u<t.length;++u){var p=t[u][0];for(f=qe(8+2*(p.length+1)+(p.length%2?0:2)),f.write_shift(4,u+2),f.write_shift(4,p.length+1),f.write_shift(0,p,"dbcs");f.l!=f.length;)f.write_shift(1,0);h.push(f)}f=pr(h),o.unshift(f),c+=8+f.length}for(u=0;u<t.length;++u)if(!(s&&!s[t[u][0]])&&!(pT.indexOf(t[u][0])>-1||hT.indexOf(t[u][0])>-1)&&t[u][1]!=null){var g=t[u][1],b=0;if(s){b=+s[t[u][0]];var N=a[b];if(N.p=="version"&&typeof g=="string"){var y=g.split(".");g=(+y[0]<<16)+(+y[1]||0)}f=Pw(N.t,g)}else{var S=n8(g);S==-1&&(S=31,g=String(g)),f=Pw(S,g)}o.push(f),x=qe(8),x.write_shift(4,s?b:2+u),i.push(x),c+=8+f.length}var C=8*(o.length+1);for(u=0;u<o.length;++u)i[u].write_shift(4,C),C+=o[u].length;return r.write_shift(4,c),r.write_shift(4,o.length),pr([r].concat(i).concat(o))}function Fw(t,s,a,r,i,o){var c=qe(i?68:48),u=[c];c.write_shift(2,65534),c.write_shift(2,0),c.write_shift(4,842412599),c.write_shift(16,Qs.utils.consts.HEADER_CLSID,"hex"),c.write_shift(4,i?2:1),c.write_shift(16,s,"hex"),c.write_shift(4,i?68:48);var f=Mw(t,a,r);if(u.push(f),i){var x=Mw(i,null,null);c.write_shift(16,o,"hex"),c.write_shift(4,68+f.length),u.push(x)}return pr(u)}function i8(t,s){s||(s=qe(t));for(var a=0;a<t;++a)s.write_shift(1,0);return s}function l8(t,s){return t.read_shift(s)===1}function Mr(t,s){return s||(s=qe(2)),s.write_shift(2,+!!t),s}function gT(t){return t.read_shift(2,"u")}function On(t,s){return s||(s=qe(2)),s.write_shift(2,t),s}function vT(t,s,a){return a||(a=qe(2)),a.write_shift(1,s=="e"?+t:+!!t),a.write_shift(1,s=="e"?1:0),a}function jT(t,s,a){var r=t.read_shift(a&&a.biff>=12?2:1),i="sbcs-cont";if(a&&a.biff>=8,!a||a.biff==8){var o=t.read_shift(1);o&&(i="dbcs-cont")}else a.biff==12&&(i="wstr");a.biff>=2&&a.biff<=5&&(i="cpstr");var c=r?t.read_shift(r,i):"";return c}function o8(t){var s=t.t||"",a=qe(3);a.write_shift(2,s.length),a.write_shift(1,1);var r=qe(2*s.length);r.write_shift(2*s.length,s,"utf16le");var i=[a,r];return pr(i)}function c8(t,s,a){var r;if(a){if(a.biff>=2&&a.biff<=5)return t.read_shift(s,"cpstr");if(a.biff>=12)return t.read_shift(s,"dbcs-cont")}var i=t.read_shift(1);return i===0?r=t.read_shift(s,"sbcs-cont"):r=t.read_shift(s,"dbcs-cont"),r}function d8(t,s,a){var r=t.read_shift(a&&a.biff==2?1:2);return r===0?(t.l++,""):c8(t,r,a)}function u8(t,s,a){if(a.biff>5)return d8(t,s,a);var r=t.read_shift(1);return r===0?(t.l++,""):t.read_shift(r,a.biff<=4||!t.lens?"cpstr":"sbcs-cont")}function yT(t,s,a){return a||(a=qe(3+2*t.length)),a.write_shift(2,t.length),a.write_shift(1,1),a.write_shift(31,t,"utf16le"),a}function Iw(t,s){s||(s=qe(6+t.length*2)),s.write_shift(4,1+t.length);for(var a=0;a<t.length;++a)s.write_shift(2,t.charCodeAt(a));return s.write_shift(2,0),s}function m8(t){var s=qe(512),a=0,r=t.Target;r.slice(0,7)=="file://"&&(r=r.slice(7));var i=r.indexOf("#"),o=i>-1?31:23;switch(r.charAt(0)){case"#":o=28;break;case".":o&=-3;break}s.write_shift(4,2),s.write_shift(4,o);var c=[8,6815827,6619237,4849780,83];for(a=0;a<c.length;++a)s.write_shift(4,c[a]);if(o==28)r=r.slice(1),Iw(r,s);else if(o&2){for(c="e0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),a=0;a<c.length;++a)s.write_shift(1,parseInt(c[a],16));var u=i>-1?r.slice(0,i):r;for(s.write_shift(4,2*(u.length+1)),a=0;a<u.length;++a)s.write_shift(2,u.charCodeAt(a));s.write_shift(2,0),o&8&&Iw(i>-1?r.slice(i+1):"",s)}else{for(c="03 03 00 00 00 00 00 00 c0 00 00 00 00 00 00 46".split(" "),a=0;a<c.length;++a)s.write_shift(1,parseInt(c[a],16));for(var f=0;r.slice(f*3,f*3+3)=="../"||r.slice(f*3,f*3+3)=="..\\";)++f;for(s.write_shift(2,f),s.write_shift(4,r.length-3*f+1),a=0;a<r.length-3*f;++a)s.write_shift(1,r.charCodeAt(a+3*f)&255);for(s.write_shift(1,0),s.write_shift(2,65535),s.write_shift(2,57005),a=0;a<6;++a)s.write_shift(4,0)}return s.slice(0,s.l)}function Fo(t,s,a,r){return r||(r=qe(6)),r.write_shift(2,t),r.write_shift(2,s),r.write_shift(2,a||0),r}function h8(t,s,a){var r=a.biff>8?4:2,i=t.read_shift(r),o=t.read_shift(r,"i"),c=t.read_shift(r,"i");return[i,o,c]}function f8(t){var s=t.read_shift(2),a=t.read_shift(2),r=t.read_shift(2),i=t.read_shift(2);return{s:{c:r,r:s},e:{c:i,r:a}}}function NT(t,s){return s||(s=qe(8)),s.write_shift(2,t.s.r),s.write_shift(2,t.e.r),s.write_shift(2,t.s.c),s.write_shift(2,t.e.c),s}function qv(t,s,a){var r=1536,i=16;switch(a.bookType){case"biff8":break;case"biff5":r=1280,i=8;break;case"biff4":r=4,i=6;break;case"biff3":r=3,i=6;break;case"biff2":r=2,i=4;break;case"xla":break;default:throw new Error("unsupported BIFF version")}var o=qe(i);return o.write_shift(2,r),o.write_shift(2,s),i>4&&o.write_shift(2,29282),i>6&&o.write_shift(2,1997),i>8&&(o.write_shift(2,49161),o.write_shift(2,1),o.write_shift(2,1798),o.write_shift(2,0)),o}function x8(t,s){var a=!s||s.biff==8,r=qe(a?112:54);for(r.write_shift(s.biff==8?2:1,7),a&&r.write_shift(1,0),r.write_shift(4,859007059),r.write_shift(4,5458548|(a?0:536870912));r.l<r.length;)r.write_shift(1,a?0:32);return r}function p8(t,s){var a=!s||s.biff>=8?2:1,r=qe(8+a*t.name.length);r.write_shift(4,t.pos),r.write_shift(1,t.hs||0),r.write_shift(1,t.dt),r.write_shift(1,t.name.length),s.biff>=8&&r.write_shift(1,1),r.write_shift(a*t.name.length,t.name,s.biff<8?"sbcs":"utf16le");var i=r.slice(0,r.l);return i.l=r.l,i}function g8(t,s){var a=qe(8);a.write_shift(4,t.Count),a.write_shift(4,t.Unique);for(var r=[],i=0;i<t.length;++i)r[i]=o8(t[i]);var o=pr([a].concat(r));return o.parts=[a.length].concat(r.map(function(c){return c.length})),o}function v8(){var t=qe(18);return t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,29280),t.write_shift(2,17600),t.write_shift(2,56),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,1),t.write_shift(2,500),t}function j8(t){var s=qe(18),a=1718;return t&&t.RTL&&(a|=64),s.write_shift(2,a),s.write_shift(4,0),s.write_shift(4,64),s.write_shift(4,0),s.write_shift(4,0),s}function y8(t,s){var a=t.name||"Arial",r=s&&s.biff==5,i=r?15+a.length:16+2*a.length,o=qe(i);return o.write_shift(2,t.sz*20),o.write_shift(4,0),o.write_shift(2,400),o.write_shift(4,0),o.write_shift(2,0),o.write_shift(1,a.length),r||o.write_shift(1,1),o.write_shift((r?1:2)*a.length,a,r?"sbcs":"utf16le"),o}function N8(t,s,a,r){var i=qe(10);return Fo(t,s,r,i),i.write_shift(4,a),i}function b8(t,s,a,r,i){var o=!i||i.biff==8,c=qe(8+ +o+(1+o)*a.length);return Fo(t,s,r,c),c.write_shift(2,a.length),o&&c.write_shift(1,1),c.write_shift((1+o)*a.length,a,o?"utf16le":"sbcs"),c}function w8(t,s,a,r){var i=a&&a.biff==5;r||(r=qe(i?3+s.length:5+2*s.length)),r.write_shift(2,t),r.write_shift(i?1:2,s.length),i||r.write_shift(1,1),r.write_shift((i?1:2)*s.length,s,i?"sbcs":"utf16le");var o=r.length>r.l?r.slice(0,r.l):r;return o.l==null&&(o.l=o.length),o}function S8(t,s){var a=s.biff==8||!s.biff?4:2,r=qe(2*a+6);return r.write_shift(a,t.s.r),r.write_shift(a,t.e.r+1),r.write_shift(2,t.s.c),r.write_shift(2,t.e.c+1),r.write_shift(2,0),r}function Lw(t,s,a,r){var i=a&&a.biff==5;r||(r=qe(i?16:20)),r.write_shift(2,0),t.style?(r.write_shift(2,t.numFmtId||0),r.write_shift(2,65524)):(r.write_shift(2,t.numFmtId||0),r.write_shift(2,s<<4));var o=0;return t.numFmtId>0&&i&&(o|=1024),r.write_shift(4,o),r.write_shift(4,0),i||r.write_shift(4,0),r.write_shift(2,0),r}function C8(t){var s=qe(8);return s.write_shift(4,0),s.write_shift(2,0),s.write_shift(2,0),s}function T8(t,s,a,r,i,o){var c=qe(8);return Fo(t,s,r,c),vT(a,o,c),c}function k8(t,s,a,r){var i=qe(14);return Fo(t,s,r,i),Mo(a,i),i}function E8(t,s,a){if(a.biff<8)return A8(t,s,a);for(var r=[],i=t.l+s,o=t.read_shift(a.biff>8?4:2);o--!==0;)r.push(h8(t,a.biff>8?12:6,a));if(t.l!=i)throw new Error("Bad ExternSheet: "+t.l+" != "+i);return r}function A8(t,s,a){t[t.l+1]==3&&t[t.l]++;var r=jT(t,s,a);return r.charCodeAt(0)==3?r.slice(1):r}function _8(t){var s=qe(2+t.length*8);s.write_shift(2,t.length);for(var a=0;a<t.length;++a)NT(t[a],s);return s}function D8(t){var s=qe(24),a=ar(t[0]);s.write_shift(2,a.r),s.write_shift(2,a.r),s.write_shift(2,a.c),s.write_shift(2,a.c);for(var r="d0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),i=0;i<16;++i)s.write_shift(1,parseInt(r[i],16));return pr([s,m8(t[1])])}function O8(t){var s=t[1].Tooltip,a=qe(10+2*(s.length+1));a.write_shift(2,2048);var r=ar(t[0]);a.write_shift(2,r.r),a.write_shift(2,r.r),a.write_shift(2,r.c),a.write_shift(2,r.c);for(var i=0;i<s.length;++i)a.write_shift(2,s.charCodeAt(i));return a.write_shift(2,0),a}function R8(t){return t||(t=qe(4)),t.write_shift(2,1),t.write_shift(2,1),t}function P8(t,s,a){if(!a.cellStyles)return bi(t,s);var r=a&&a.biff>=12?4:2,i=t.read_shift(r),o=t.read_shift(r),c=t.read_shift(r),u=t.read_shift(r),f=t.read_shift(2);r==2&&(t.l+=2);var x={s:i,e:o,w:c,ixfe:u,flags:f};return(a.biff>=5||!a.biff)&&(x.level=f>>8&7),x}function M8(t,s){var a=qe(12);a.write_shift(2,s),a.write_shift(2,s),a.write_shift(2,t.width*256),a.write_shift(2,0);var r=0;return t.hidden&&(r|=1),a.write_shift(1,r),r=t.level||0,a.write_shift(1,r),a.write_shift(2,0),a}function F8(t){for(var s=qe(2*t),a=0;a<t;++a)s.write_shift(2,a+1);return s}function I8(t,s,a){var r=qe(15);return im(r,t,s),r.write_shift(8,a,"f"),r}function L8(t,s,a){var r=qe(9);return im(r,t,s),r.write_shift(2,a),r}var B8=(function(){var t={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},s=Fv({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function a(u,f){var x=[],h=Po(1);switch(f.type){case"base64":h=Kn(Zi(u));break;case"binary":h=Kn(u);break;case"buffer":case"array":h=u;break}hn(h,0);var p=h.read_shift(1),g=!!(p&136),b=!1,N=!1;switch(p){case 2:break;case 3:break;case 48:b=!0,g=!0;break;case 49:b=!0,g=!0;break;case 131:break;case 139:break;case 140:N=!0;break;case 245:break;default:throw new Error("DBF Unsupported Version: "+p.toString(16))}var y=0,S=521;p==2&&(y=h.read_shift(2)),h.l+=3,p!=2&&(y=h.read_shift(4)),y>1048576&&(y=1e6),p!=2&&(S=h.read_shift(2));var C=h.read_shift(2),T=f.codepage||1252;p!=2&&(h.l+=16,h.read_shift(1),h[h.l]!==0&&(T=t[h[h.l]]),h.l+=1,h.l+=2),N&&(h.l+=36);for(var _=[],G={},U=Math.min(h.length,p==2?521:S-10-(b?264:0)),F=N?32:11;h.l<U&&h[h.l]!=13;)switch(G={},G.name=mf.utils.decode(T,h.slice(h.l,h.l+F)).replace(/[\u0000\r\n].*$/g,""),h.l+=F,G.type=String.fromCharCode(h.read_shift(1)),p!=2&&!N&&(G.offset=h.read_shift(4)),G.len=h.read_shift(1),p==2&&(G.offset=h.read_shift(2)),G.dec=h.read_shift(1),G.name.length&&_.push(G),p!=2&&(h.l+=N?13:14),G.type){case"B":(!b||G.len!=8)&&f.WTF&&console.log("Skipping "+G.name+":"+G.type);break;case"G":case"P":f.WTF&&console.log("Skipping "+G.name+":"+G.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+G.type)}if(h[h.l]!==13&&(h.l=S-1),h.read_shift(1)!==13)throw new Error("DBF Terminator not found "+h.l+" "+h[h.l]);h.l=S;var k=0,E=0;for(x[0]=[],E=0;E!=_.length;++E)x[0][E]=_[E].name;for(;y-- >0;){if(h[h.l]===42){h.l+=C;continue}for(++h.l,x[++k]=[],E=0,E=0;E!=_.length;++E){var A=h.slice(h.l,h.l+_[E].len);h.l+=_[E].len,hn(A,0);var B=mf.utils.decode(T,A);switch(_[E].type){case"C":B.trim().length&&(x[k][E]=B.replace(/\s+$/,""));break;case"D":B.length===8?x[k][E]=new Date(+B.slice(0,4),+B.slice(4,6)-1,+B.slice(6,8)):x[k][E]=B;break;case"F":x[k][E]=parseFloat(B.trim());break;case"+":case"I":x[k][E]=N?A.read_shift(-4,"i")^2147483648:A.read_shift(4,"i");break;case"L":switch(B.trim().toUpperCase()){case"Y":case"T":x[k][E]=!0;break;case"N":case"F":x[k][E]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+B+"|")}break;case"M":if(!g)throw new Error("DBF Unexpected MEMO for type "+p.toString(16));x[k][E]="##MEMO##"+(N?parseInt(B.trim(),10):A.read_shift(4));break;case"N":B=B.replace(/\u0000/g,"").trim(),B&&B!="."&&(x[k][E]=+B||0);break;case"@":x[k][E]=new Date(A.read_shift(-8,"f")-621356832e5);break;case"T":x[k][E]=new Date((A.read_shift(4)-2440588)*864e5+A.read_shift(4));break;case"Y":x[k][E]=A.read_shift(4,"i")/1e4+A.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":x[k][E]=-A.read_shift(-8,"f");break;case"B":if(b&&_[E].len==8){x[k][E]=A.read_shift(8,"f");break}case"G":case"P":A.l+=_[E].len;break;case"0":if(_[E].name==="_NullFlags")break;default:throw new Error("DBF Unsupported data type "+_[E].type)}}}if(p!=2&&h.l<h.length&&h[h.l++]!=26)throw new Error("DBF EOF Marker missing "+(h.l-1)+" of "+h.length+" "+h[h.l-1].toString(16));return f&&f.sheetRows&&(x=x.slice(0,f.sheetRows)),f.DBF=_,x}function r(u,f){var x=f||{};x.dateNF||(x.dateNF="yyyymmdd");var h=dd(a(u,x),x);return h["!cols"]=x.DBF.map(function(p){return{wch:p.len,DBF:p}}),delete x.DBF,h}function i(u,f){try{return Lo(r(u,f),f)}catch(x){if(f&&f.WTF)throw x}return{SheetNames:[],Sheets:{}}}var o={B:8,C:250,L:1,D:8,"?":0,"":0};function c(u,f){var x=f||{};if(+x.codepage>=0&&Pu(+x.codepage),x.type=="string")throw new Error("Cannot write DBF to JS string");var h=Jr(),p=Cf(u,{header:1,raw:!0,cellDates:!0}),g=p[0],b=p.slice(1),N=u["!cols"]||[],y=0,S=0,C=0,T=1;for(y=0;y<g.length;++y){if(((N[y]||{}).DBF||{}).name){g[y]=N[y].DBF.name,++C;continue}if(g[y]!=null){if(++C,typeof g[y]=="number"&&(g[y]=g[y].toString(10)),typeof g[y]!="string")throw new Error("DBF Invalid column name "+g[y]+" |"+typeof g[y]+"|");if(g.indexOf(g[y])!==y){for(S=0;S<1024;++S)if(g.indexOf(g[y]+"_"+S)==-1){g[y]+="_"+S;break}}}}var _=oa(u["!ref"]),G=[],U=[],F=[];for(y=0;y<=_.e.c-_.s.c;++y){var k="",E="",A=0,B=[];for(S=0;S<b.length;++S)b[S][y]!=null&&B.push(b[S][y]);if(B.length==0||g[y]==null){G[y]="?";continue}for(S=0;S<B.length;++S){switch(typeof B[S]){case"number":E="B";break;case"string":E="C";break;case"boolean":E="L";break;case"object":E=B[S]instanceof Date?"D":"C";break;default:E="C"}A=Math.max(A,String(B[S]).length),k=k&&k!=E?"C":E}A>250&&(A=250),E=((N[y]||{}).DBF||{}).type,E=="C"&&N[y].DBF.len>A&&(A=N[y].DBF.len),k=="B"&&E=="N"&&(k="N",F[y]=N[y].DBF.dec,A=N[y].DBF.len),U[y]=k=="C"||E=="N"?A:o[k]||0,T+=U[y],G[y]=k}var H=h.next(32);for(H.write_shift(4,318902576),H.write_shift(4,b.length),H.write_shift(2,296+32*C),H.write_shift(2,T),y=0;y<4;++y)H.write_shift(4,0);for(H.write_shift(4,0|(+s[wC]||3)<<8),y=0,S=0;y<g.length;++y)if(g[y]!=null){var M=h.next(32),q=(g[y].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);M.write_shift(1,q,"sbcs"),M.write_shift(1,G[y]=="?"?"C":G[y],"sbcs"),M.write_shift(4,S),M.write_shift(1,U[y]||o[G[y]]||0),M.write_shift(1,F[y]||0),M.write_shift(1,2),M.write_shift(4,0),M.write_shift(1,0),M.write_shift(4,0),M.write_shift(4,0),S+=U[y]||o[G[y]]||0}var L=h.next(264);for(L.write_shift(4,13),y=0;y<65;++y)L.write_shift(4,0);for(y=0;y<b.length;++y){var re=h.next(T);for(re.write_shift(1,0),S=0;S<g.length;++S)if(g[S]!=null)switch(G[S]){case"L":re.write_shift(1,b[y][S]==null?63:b[y][S]?84:70);break;case"B":re.write_shift(8,b[y][S]||0,"f");break;case"N":var V="0";for(typeof b[y][S]=="number"&&(V=b[y][S].toFixed(F[S]||0)),C=0;C<U[S]-V.length;++C)re.write_shift(1,32);re.write_shift(1,V,"sbcs");break;case"D":b[y][S]?(re.write_shift(4,("0000"+b[y][S].getFullYear()).slice(-4),"sbcs"),re.write_shift(2,("00"+(b[y][S].getMonth()+1)).slice(-2),"sbcs"),re.write_shift(2,("00"+b[y][S].getDate()).slice(-2),"sbcs")):re.write_shift(8,"00000000","sbcs");break;case"C":var ee=String(b[y][S]!=null?b[y][S]:"").slice(0,U[S]);for(re.write_shift(1,ee,"sbcs"),C=0;C<U[S]-ee.length;++C)re.write_shift(1,32);break}}return h.next(1).write_shift(1,26),h.end()}return{to_workbook:i,to_sheet:r,from_sheet:c}})(),z8=(function(){var t={AA:"À",BA:"Á",CA:"Â",DA:195,HA:"Ä",JA:197,AE:"È",BE:"É",CE:"Ê",HE:"Ë",AI:"Ì",BI:"Í",CI:"Î",HI:"Ï",AO:"Ò",BO:"Ó",CO:"Ô",DO:213,HO:"Ö",AU:"Ù",BU:"Ú",CU:"Û",HU:"Ü",Aa:"à",Ba:"á",Ca:"â",Da:227,Ha:"ä",Ja:229,Ae:"è",Be:"é",Ce:"ê",He:"ë",Ai:"ì",Bi:"í",Ci:"î",Hi:"ï",Ao:"ò",Bo:"ó",Co:"ô",Do:245,Ho:"ö",Au:"ù",Bu:"ú",Cu:"û",Hu:"ü",KC:"Ç",Kc:"ç",q:"æ",z:"œ",a:"Æ",j:"Œ",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},s=new RegExp("\x1BN("+Nr(t).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),a=function(g,b){var N=t[b];return typeof N=="number"?ow(N):N},r=function(g,b,N){var y=b.charCodeAt(0)-32<<4|N.charCodeAt(0)-48;return y==59?g:ow(y)};t["|"]=254;function i(g,b){switch(b.type){case"base64":return o(Zi(g),b);case"binary":return o(g,b);case"buffer":return o(Fs&&Buffer.isBuffer(g)?g.toString("binary"):tm(g),b);case"array":return o(Xf(g),b)}throw new Error("Unrecognized type "+b.type)}function o(g,b){var N=g.split(/[\n\r]+/),y=-1,S=-1,C=0,T=0,_=[],G=[],U=null,F={},k=[],E=[],A=[],B=0,H;for(+b.codepage>=0&&Pu(+b.codepage);C!==N.length;++C){B=0;var M=N[C].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,r).replace(s,a),q=M.replace(/;;/g,"\0").split(";").map(function(te){return te.replace(/\u0000/g,";")}),L=q[0],re;if(M.length>0)switch(L){case"ID":break;case"E":break;case"B":break;case"O":break;case"W":break;case"P":q[1].charAt(0)=="P"&&G.push(M.slice(3).replace(/;;/g,";"));break;case"C":var V=!1,ee=!1,me=!1,W=!1,se=-1,Z=-1;for(T=1;T<q.length;++T)switch(q[T].charAt(0)){case"A":break;case"X":S=parseInt(q[T].slice(1))-1,ee=!0;break;case"Y":for(y=parseInt(q[T].slice(1))-1,ee||(S=0),H=_.length;H<=y;++H)_[H]=[];break;case"K":re=q[T].slice(1),re.charAt(0)==='"'?re=re.slice(1,re.length-1):re==="TRUE"?re=!0:re==="FALSE"?re=!1:isNaN(Yi(re))?isNaN(Fu(re).getDate())||(re=Lr(re)):(re=Yi(re),U!==null&&MC(U)&&(re=BC(re))),V=!0;break;case"E":W=!0;var I=LF(q[T].slice(1),{r:y,c:S});_[y][S]=[_[y][S],I];break;case"S":me=!0,_[y][S]=[_[y][S],"S5S"];break;case"G":break;case"R":se=parseInt(q[T].slice(1))-1;break;case"C":Z=parseInt(q[T].slice(1))-1;break;default:if(b&&b.WTF)throw new Error("SYLK bad record "+M)}if(V&&(_[y][S]&&_[y][S].length==2?_[y][S][0]=re:_[y][S]=re,U=null),me){if(W)throw new Error("SYLK shared formula cannot have own formula");var Q=se>-1&&_[se][Z];if(!Q||!Q[1])throw new Error("SYLK shared formula cannot find base");_[y][S][1]=BF(Q[1],{r:y-se,c:S-Z})}break;case"F":var O=0;for(T=1;T<q.length;++T)switch(q[T].charAt(0)){case"X":S=parseInt(q[T].slice(1))-1,++O;break;case"Y":for(y=parseInt(q[T].slice(1))-1,H=_.length;H<=y;++H)_[H]=[];break;case"M":B=parseInt(q[T].slice(1))/20;break;case"F":break;case"G":break;case"P":U=G[parseInt(q[T].slice(1))];break;case"S":break;case"D":break;case"N":break;case"W":for(A=q[T].slice(1).split(" "),H=parseInt(A[0],10);H<=parseInt(A[1],10);++H)B=parseInt(A[2],10),E[H-1]=B===0?{hidden:!0}:{wch:B},Kv(E[H-1]);break;case"C":S=parseInt(q[T].slice(1))-1,E[S]||(E[S]={});break;case"R":y=parseInt(q[T].slice(1))-1,k[y]||(k[y]={}),B>0?(k[y].hpt=B,k[y].hpx=TT(B)):B===0&&(k[y].hidden=!0);break;default:if(b&&b.WTF)throw new Error("SYLK bad record "+M)}O<1&&(U=null);break;default:if(b&&b.WTF)throw new Error("SYLK bad record "+M)}}return k.length>0&&(F["!rows"]=k),E.length>0&&(F["!cols"]=E),b&&b.sheetRows&&(_=_.slice(0,b.sheetRows)),[_,F]}function c(g,b){var N=i(g,b),y=N[0],S=N[1],C=dd(y,b);return Nr(S).forEach(function(T){C[T]=S[T]}),C}function u(g,b){return Lo(c(g,b),b)}function f(g,b,N,y){var S="C;Y"+(N+1)+";X"+(y+1)+";K";switch(g.t){case"n":S+=g.v||0,g.f&&!g.F&&(S+=";E"+Xv(g.f,{r:N,c:y}));break;case"b":S+=g.v?"TRUE":"FALSE";break;case"e":S+=g.w||g.v;break;case"d":S+='"'+(g.w||g.v)+'"';break;case"s":S+='"'+g.v.replace(/"/g,"").replace(/;/g,";;")+'"';break}return S}function x(g,b){b.forEach(function(N,y){var S="F;W"+(y+1)+" "+(y+1)+" ";N.hidden?S+="0":(typeof N.width=="number"&&!N.wpx&&(N.wpx=Nf(N.width)),typeof N.wpx=="number"&&!N.wch&&(N.wch=bf(N.wpx)),typeof N.wch=="number"&&(S+=Math.round(N.wch))),S.charAt(S.length-1)!=" "&&g.push(S)})}function h(g,b){b.forEach(function(N,y){var S="F;";N.hidden?S+="M0;":N.hpt?S+="M"+20*N.hpt+";":N.hpx&&(S+="M"+20*wf(N.hpx)+";"),S.length>2&&g.push(S+"R"+(y+1))})}function p(g,b){var N=["ID;PWXL;N;E"],y=[],S=oa(g["!ref"]),C,T=Array.isArray(g),_=`\r
`;N.push("P;PGeneral"),N.push("F;P0;DG0G8;M255"),g["!cols"]&&x(N,g["!cols"]),g["!rows"]&&h(N,g["!rows"]),N.push("B;Y"+(S.e.r-S.s.r+1)+";X"+(S.e.c-S.s.c+1)+";D"+[S.s.c,S.s.r,S.e.c,S.e.r].join(" "));for(var G=S.s.r;G<=S.e.r;++G)for(var U=S.s.c;U<=S.e.c;++U){var F=qs({r:G,c:U});C=T?(g[G]||[])[U]:g[F],!(!C||C.v==null&&(!C.f||C.F))&&y.push(f(C,g,G,U))}return N.join(_)+_+y.join(_)+_+"E"+_}return{to_workbook:u,to_sheet:c,from_sheet:p}})(),U8=(function(){function t(o,c){switch(c.type){case"base64":return s(Zi(o),c);case"binary":return s(o,c);case"buffer":return s(Fs&&Buffer.isBuffer(o)?o.toString("binary"):tm(o),c);case"array":return s(Xf(o),c)}throw new Error("Unrecognized type "+c.type)}function s(o,c){for(var u=o.split(`
`),f=-1,x=-1,h=0,p=[];h!==u.length;++h){if(u[h].trim()==="BOT"){p[++f]=[],x=0;continue}if(!(f<0)){var g=u[h].trim().split(","),b=g[0],N=g[1];++h;for(var y=u[h]||"";(y.match(/["]/g)||[]).length&1&&h<u.length-1;)y+=`
`+u[++h];switch(y=y.trim(),+b){case-1:if(y==="BOT"){p[++f]=[],x=0;continue}else if(y!=="EOD")throw new Error("Unrecognized DIF special command "+y);break;case 0:y==="TRUE"?p[f][x]=!0:y==="FALSE"?p[f][x]=!1:isNaN(Yi(N))?isNaN(Fu(N).getDate())?p[f][x]=N:p[f][x]=Lr(N):p[f][x]=Yi(N),++x;break;case 1:y=y.slice(1,y.length-1),y=y.replace(/""/g,'"'),y&&y.match(/^=".*"$/)&&(y=y.slice(2,-1)),p[f][x++]=y!==""?y:null;break}if(y==="EOD")break}}return c&&c.sheetRows&&(p=p.slice(0,c.sheetRows)),p}function a(o,c){return dd(t(o,c),c)}function r(o,c){return Lo(a(o,c),c)}var i=(function(){var o=function(f,x,h,p,g){f.push(x),f.push(h+","+p),f.push('"'+g.replace(/"/g,'""')+'"')},c=function(f,x,h,p){f.push(x+","+h),f.push(x==1?'"'+p.replace(/"/g,'""')+'"':p)};return function(f){var x=[],h=oa(f["!ref"]),p,g=Array.isArray(f);o(x,"TABLE",0,1,"sheetjs"),o(x,"VECTORS",0,h.e.r-h.s.r+1,""),o(x,"TUPLES",0,h.e.c-h.s.c+1,""),o(x,"DATA",0,0,"");for(var b=h.s.r;b<=h.e.r;++b){c(x,-1,0,"BOT");for(var N=h.s.c;N<=h.e.c;++N){var y=qs({r:b,c:N});if(p=g?(f[b]||[])[N]:f[y],!p){c(x,1,0,"");continue}switch(p.t){case"n":var S=p.w;!S&&p.v!=null&&(S=p.v),S==null?p.f&&!p.F?c(x,1,0,"="+p.f):c(x,1,0,""):c(x,0,S,"V");break;case"b":c(x,0,p.v?1:0,p.v?"TRUE":"FALSE");break;case"s":c(x,1,0,isNaN(p.v)?p.v:'="'+p.v+'"');break;case"d":p.w||(p.w=Ll(p.z||_a[14],en(Lr(p.v)))),c(x,0,p.w,"V");break;default:c(x,1,0,"")}}}c(x,-1,0,"EOD");var C=`\r
`,T=x.join(C);return T}})();return{to_workbook:r,to_sheet:a,from_sheet:i}})(),bT=(function(){function t(p){return p.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,`
`)}function s(p){return p.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function a(p,g){for(var b=p.split(`
`),N=-1,y=-1,S=0,C=[];S!==b.length;++S){var T=b[S].trim().split(":");if(T[0]==="cell"){var _=ar(T[1]);if(C.length<=_.r)for(N=C.length;N<=_.r;++N)C[N]||(C[N]=[]);switch(N=_.r,y=_.c,T[2]){case"t":C[N][y]=t(T[3]);break;case"v":C[N][y]=+T[3];break;case"vtf":var G=T[T.length-1];case"vtc":switch(T[3]){case"nl":C[N][y]=!!+T[4];break;default:C[N][y]=+T[4];break}T[2]=="vtf"&&(C[N][y]=[C[N][y],G])}}}return g&&g.sheetRows&&(C=C.slice(0,g.sheetRows)),C}function r(p,g){return dd(a(p,g),g)}function i(p,g){return Lo(r(p,g),g)}var o=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join(`
`),c=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join(`
`)+`
`,u=["# SocialCalc Spreadsheet Control Save","part:sheet"].join(`
`),f="--SocialCalcSpreadsheetControlSave--";function x(p){if(!p||!p["!ref"])return"";for(var g=[],b=[],N,y="",S=pn(p["!ref"]),C=Array.isArray(p),T=S.s.r;T<=S.e.r;++T)for(var _=S.s.c;_<=S.e.c;++_)if(y=qs({r:T,c:_}),N=C?(p[T]||[])[_]:p[y],!(!N||N.v==null||N.t==="z")){switch(b=["cell",y,"t"],N.t){case"s":case"str":b.push(s(N.v));break;case"n":N.f?(b[2]="vtf",b[3]="n",b[4]=N.v,b[5]=s(N.f)):(b[2]="v",b[3]=N.v);break;case"b":b[2]="vt"+(N.f?"f":"c"),b[3]="nl",b[4]=N.v?"1":"0",b[5]=s(N.f||(N.v?"TRUE":"FALSE"));break;case"d":var G=en(Lr(N.v));b[2]="vtc",b[3]="nd",b[4]=""+G,b[5]=N.w||Ll(N.z||_a[14],G);break;case"e":continue}g.push(b.join(":"))}return g.push("sheet:c:"+(S.e.c-S.s.c+1)+":r:"+(S.e.r-S.s.r+1)+":tvf:1"),g.push("valueformat:1:text-wiki"),g.join(`
`)}function h(p){return[o,c,u,c,x(p),f].join(`
`)}return{to_workbook:i,to_sheet:r,from_sheet:h}})(),V8=(function(){function t(h,p,g,b,N){N.raw?p[g][b]=h:h===""||(h==="TRUE"?p[g][b]=!0:h==="FALSE"?p[g][b]=!1:isNaN(Yi(h))?isNaN(Fu(h).getDate())?p[g][b]=h:p[g][b]=Lr(h):p[g][b]=Yi(h))}function s(h,p){var g=p||{},b=[];if(!h||h.length===0)return b;for(var N=h.split(/[\r\n]/),y=N.length-1;y>=0&&N[y].length===0;)--y;for(var S=10,C=0,T=0;T<=y;++T)C=N[T].indexOf(" "),C==-1?C=N[T].length:C++,S=Math.max(S,C);for(T=0;T<=y;++T){b[T]=[];var _=0;for(t(N[T].slice(0,S).trim(),b,T,_,g),_=1;_<=(N[T].length-S)/10+1;++_)t(N[T].slice(S+(_-1)*10,S+_*10).trim(),b,T,_,g)}return g.sheetRows&&(b=b.slice(0,g.sheetRows)),b}var a={44:",",9:"	",59:";",124:"|"},r={44:3,9:2,59:1,124:0};function i(h){for(var p={},g=!1,b=0,N=0;b<h.length;++b)(N=h.charCodeAt(b))==34?g=!g:!g&&N in a&&(p[N]=(p[N]||0)+1);N=[];for(b in p)Object.prototype.hasOwnProperty.call(p,b)&&N.push([p[b],b]);if(!N.length){p=r;for(b in p)Object.prototype.hasOwnProperty.call(p,b)&&N.push([p[b],b])}return N.sort(function(y,S){return y[0]-S[0]||r[y[1]]-r[S[1]]}),a[N.pop()[1]]||44}function o(h,p){var g=p||{},b="",N=g.dense?[]:{},y={s:{c:0,r:0},e:{c:0,r:0}};h.slice(0,4)=="sep="?h.charCodeAt(5)==13&&h.charCodeAt(6)==10?(b=h.charAt(4),h=h.slice(7)):h.charCodeAt(5)==13||h.charCodeAt(5)==10?(b=h.charAt(4),h=h.slice(6)):b=i(h.slice(0,1024)):g&&g.FS?b=g.FS:b=i(h.slice(0,1024));var S=0,C=0,T=0,_=0,G=0,U=b.charCodeAt(0),F=!1,k=0,E=h.charCodeAt(0);h=h.replace(/\r\n/mg,`
`);var A=g.dateNF!=null?rM(g.dateNF):null;function B(){var H=h.slice(_,G),M={};if(H.charAt(0)=='"'&&H.charAt(H.length-1)=='"'&&(H=H.slice(1,-1).replace(/""/g,'"')),H.length===0)M.t="z";else if(g.raw)M.t="s",M.v=H;else if(H.trim().length===0)M.t="s",M.v=H;else if(H.charCodeAt(0)==61)H.charCodeAt(1)==34&&H.charCodeAt(H.length-1)==34?(M.t="s",M.v=H.slice(2,-1).replace(/""/g,'"')):zF(H)?(M.t="n",M.f=H.slice(1)):(M.t="s",M.v=H);else if(H=="TRUE")M.t="b",M.v=!0;else if(H=="FALSE")M.t="b",M.v=!1;else if(!isNaN(T=Yi(H)))M.t="n",g.cellText!==!1&&(M.w=H),M.v=T;else if(!isNaN(Fu(H).getDate())||A&&H.match(A)){M.z=g.dateNF||_a[14];var q=0;A&&H.match(A)&&(H=nM(H,g.dateNF,H.match(A)||[]),q=1),g.cellDates?(M.t="d",M.v=Lr(H,q)):(M.t="n",M.v=en(Lr(H,q))),g.cellText!==!1&&(M.w=Ll(M.z,M.v instanceof Date?en(M.v):M.v)),g.cellNF||delete M.z}else M.t="s",M.v=H;if(M.t=="z"||(g.dense?(N[S]||(N[S]=[]),N[S][C]=M):N[qs({c:C,r:S})]=M),_=G+1,E=h.charCodeAt(_),y.e.c<C&&(y.e.c=C),y.e.r<S&&(y.e.r=S),k==U)++C;else if(C=0,++S,g.sheetRows&&g.sheetRows<=S)return!0}e:for(;G<h.length;++G)switch(k=h.charCodeAt(G)){case 34:E===34&&(F=!F);break;case U:case 10:case 13:if(!F&&B())break e;break}return G-_>0&&B(),N["!ref"]=Ga(y),N}function c(h,p){return!(p&&p.PRN)||p.FS||h.slice(0,4)=="sep="||h.indexOf("	")>=0||h.indexOf(",")>=0||h.indexOf(";")>=0?o(h,p):dd(s(h,p),p)}function u(h,p){var g="",b=p.type=="string"?[0,0,0,0]:e9(h,p);switch(p.type){case"base64":g=Zi(h);break;case"binary":g=h;break;case"buffer":p.codepage==65001?g=h.toString("utf8"):p.codepage&&typeof mf<"u"||(g=Fs&&Buffer.isBuffer(h)?h.toString("binary"):tm(h));break;case"array":g=Xf(h);break;case"string":g=h;break;default:throw new Error("Unrecognized type "+p.type)}return b[0]==239&&b[1]==187&&b[2]==191?g=yu(g.slice(3)):p.type!="string"&&p.type!="buffer"&&p.codepage==65001?g=yu(g):p.type=="binary"&&typeof mf<"u",g.slice(0,19)=="socialcalc:version:"?bT.to_sheet(p.type=="string"?g:yu(g),p):c(g,p)}function f(h,p){return Lo(u(h,p),p)}function x(h){for(var p=[],g=oa(h["!ref"]),b,N=Array.isArray(h),y=g.s.r;y<=g.e.r;++y){for(var S=[],C=g.s.c;C<=g.e.c;++C){var T=qs({r:y,c:C});if(b=N?(h[y]||[])[C]:h[T],!b||b.v==null){S.push("          ");continue}for(var _=(b.w||(Ji(b),b.w)||"").slice(0,10);_.length<10;)_+=" ";S.push(_+(C===0?" ":""))}p.push(S.join(""))}return p.join(`
`)}return{to_workbook:f,to_sheet:u,from_sheet:x}})(),Bw=(function(){function t(I,Q,O){if(I){hn(I,I.l||0);for(var te=O.Enum||se;I.l<I.length;){var oe=I.read_shift(2),je=te[oe]||te[65535],Me=I.read_shift(2),ve=I.l+Me,ce=je.f&&je.f(I,Me,O);if(I.l=ve,Q(ce,je,oe))return}}}function s(I,Q){switch(Q.type){case"base64":return a(Kn(Zi(I)),Q);case"binary":return a(Kn(I),Q);case"buffer":case"array":return a(I,Q)}throw"Unsupported type "+Q.type}function a(I,Q){if(!I)return I;var O=Q||{},te=O.dense?[]:{},oe="Sheet1",je="",Me=0,ve={},ce=[],Pe=[],Qe={s:{r:0,c:0},e:{r:0,c:0}},vt=O.sheetRows||0;if(I[2]==0&&(I[3]==8||I[3]==9)&&I.length>=16&&I[14]==5&&I[15]===108)throw new Error("Unsupported Works 3 for Mac file");if(I[2]==2)O.Enum=se,t(I,function(ot,hs,fs){switch(fs){case 0:O.vers=ot,ot>=4096&&(O.qpro=!0);break;case 6:Qe=ot;break;case 204:ot&&(je=ot);break;case 222:je=ot;break;case 15:case 51:O.qpro||(ot[1].v=ot[1].v.slice(1));case 13:case 14:case 16:fs==14&&(ot[2]&112)==112&&(ot[2]&15)>1&&(ot[2]&15)<15&&(ot[1].z=O.dateNF||_a[14],O.cellDates&&(ot[1].t="d",ot[1].v=BC(ot[1].v))),O.qpro&&ot[3]>Me&&(te["!ref"]=Ga(Qe),ve[oe]=te,ce.push(oe),te=O.dense?[]:{},Qe={s:{r:0,c:0},e:{r:0,c:0}},Me=ot[3],oe=je||"Sheet"+(Me+1),je="");var Ps=O.dense?(te[ot[0].r]||[])[ot[0].c]:te[qs(ot[0])];if(Ps){Ps.t=ot[1].t,Ps.v=ot[1].v,ot[1].z!=null&&(Ps.z=ot[1].z),ot[1].f!=null&&(Ps.f=ot[1].f);break}O.dense?(te[ot[0].r]||(te[ot[0].r]=[]),te[ot[0].r][ot[0].c]=ot[1]):te[qs(ot[0])]=ot[1];break}},O);else if(I[2]==26||I[2]==14)O.Enum=Z,I[2]==14&&(O.qpro=!0,I.l=0),t(I,function(ot,hs,fs){switch(fs){case 204:oe=ot;break;case 22:ot[1].v=ot[1].v.slice(1);case 23:case 24:case 25:case 37:case 39:case 40:if(ot[3]>Me&&(te["!ref"]=Ga(Qe),ve[oe]=te,ce.push(oe),te=O.dense?[]:{},Qe={s:{r:0,c:0},e:{r:0,c:0}},Me=ot[3],oe="Sheet"+(Me+1)),vt>0&&ot[0].r>=vt)break;O.dense?(te[ot[0].r]||(te[ot[0].r]=[]),te[ot[0].r][ot[0].c]=ot[1]):te[qs(ot[0])]=ot[1],Qe.e.c<ot[0].c&&(Qe.e.c=ot[0].c),Qe.e.r<ot[0].r&&(Qe.e.r=ot[0].r);break;case 27:ot[14e3]&&(Pe[ot[14e3][0]]=ot[14e3][1]);break;case 1537:Pe[ot[0]]=ot[1],ot[0]==Me&&(oe=ot[1]);break}},O);else throw new Error("Unrecognized LOTUS BOF "+I[2]);if(te["!ref"]=Ga(Qe),ve[je||oe]=te,ce.push(je||oe),!Pe.length)return{SheetNames:ce,Sheets:ve};for(var xt={},ht=[],bt=0;bt<Pe.length;++bt)ve[ce[bt]]?(ht.push(Pe[bt]||ce[bt]),xt[Pe[bt]]=ve[Pe[bt]]||ve[ce[bt]]):(ht.push(Pe[bt]),xt[Pe[bt]]={"!ref":"A1"});return{SheetNames:ht,Sheets:xt}}function r(I,Q){var O=Q||{};if(+O.codepage>=0&&Pu(+O.codepage),O.type=="string")throw new Error("Cannot write WK1 to JS string");var te=Jr(),oe=oa(I["!ref"]),je=Array.isArray(I),Me=[];dt(te,0,o(1030)),dt(te,6,f(oe));for(var ve=Math.min(oe.e.r,8191),ce=oe.s.r;ce<=ve;++ce)for(var Pe=jr(ce),Qe=oe.s.c;Qe<=oe.e.c;++Qe){ce===oe.s.r&&(Me[Qe]=Dr(Qe));var vt=Me[Qe]+Pe,xt=je?(I[ce]||[])[Qe]:I[vt];if(!(!xt||xt.t=="z"))if(xt.t=="n")(xt.v|0)==xt.v&&xt.v>=-32768&&xt.v<=32767?dt(te,13,b(ce,Qe,xt.v)):dt(te,14,y(ce,Qe,xt.v));else{var ht=Ji(xt);dt(te,15,p(ce,Qe,ht.slice(0,239)))}}return dt(te,1),te.end()}function i(I,Q){var O=Q||{};if(+O.codepage>=0&&Pu(+O.codepage),O.type=="string")throw new Error("Cannot write WK3 to JS string");var te=Jr();dt(te,0,c(I));for(var oe=0,je=0;oe<I.SheetNames.length;++oe)(I.Sheets[I.SheetNames[oe]]||{})["!ref"]&&dt(te,27,W(I.SheetNames[oe],je++));var Me=0;for(oe=0;oe<I.SheetNames.length;++oe){var ve=I.Sheets[I.SheetNames[oe]];if(!(!ve||!ve["!ref"])){for(var ce=oa(ve["!ref"]),Pe=Array.isArray(ve),Qe=[],vt=Math.min(ce.e.r,8191),xt=ce.s.r;xt<=vt;++xt)for(var ht=jr(xt),bt=ce.s.c;bt<=ce.e.c;++bt){xt===ce.s.r&&(Qe[bt]=Dr(bt));var ot=Qe[bt]+ht,hs=Pe?(ve[xt]||[])[bt]:ve[ot];if(!(!hs||hs.t=="z"))if(hs.t=="n")dt(te,23,B(xt,bt,Me,hs.v));else{var fs=Ji(hs);dt(te,22,k(xt,bt,Me,fs.slice(0,239)))}}++Me}}return dt(te,1),te.end()}function o(I){var Q=qe(2);return Q.write_shift(2,I),Q}function c(I){var Q=qe(26);Q.write_shift(2,4096),Q.write_shift(2,4),Q.write_shift(4,0);for(var O=0,te=0,oe=0,je=0;je<I.SheetNames.length;++je){var Me=I.SheetNames[je],ve=I.Sheets[Me];if(!(!ve||!ve["!ref"])){++oe;var ce=pn(ve["!ref"]);O<ce.e.r&&(O=ce.e.r),te<ce.e.c&&(te=ce.e.c)}}return O>8191&&(O=8191),Q.write_shift(2,O),Q.write_shift(1,oe),Q.write_shift(1,te),Q.write_shift(2,0),Q.write_shift(2,0),Q.write_shift(1,1),Q.write_shift(1,2),Q.write_shift(4,0),Q.write_shift(4,0),Q}function u(I,Q,O){var te={s:{c:0,r:0},e:{c:0,r:0}};return Q==8&&O.qpro?(te.s.c=I.read_shift(1),I.l++,te.s.r=I.read_shift(2),te.e.c=I.read_shift(1),I.l++,te.e.r=I.read_shift(2),te):(te.s.c=I.read_shift(2),te.s.r=I.read_shift(2),Q==12&&O.qpro&&(I.l+=2),te.e.c=I.read_shift(2),te.e.r=I.read_shift(2),Q==12&&O.qpro&&(I.l+=2),te.s.c==65535&&(te.s.c=te.e.c=te.s.r=te.e.r=0),te)}function f(I){var Q=qe(8);return Q.write_shift(2,I.s.c),Q.write_shift(2,I.s.r),Q.write_shift(2,I.e.c),Q.write_shift(2,I.e.r),Q}function x(I,Q,O){var te=[{c:0,r:0},{t:"n",v:0},0,0];return O.qpro&&O.vers!=20768?(te[0].c=I.read_shift(1),te[3]=I.read_shift(1),te[0].r=I.read_shift(2),I.l+=2):(te[2]=I.read_shift(1),te[0].c=I.read_shift(2),te[0].r=I.read_shift(2)),te}function h(I,Q,O){var te=I.l+Q,oe=x(I,Q,O);if(oe[1].t="s",O.vers==20768){I.l++;var je=I.read_shift(1);return oe[1].v=I.read_shift(je,"utf8"),oe}return O.qpro&&I.l++,oe[1].v=I.read_shift(te-I.l,"cstr"),oe}function p(I,Q,O){var te=qe(7+O.length);te.write_shift(1,255),te.write_shift(2,Q),te.write_shift(2,I),te.write_shift(1,39);for(var oe=0;oe<te.length;++oe){var je=O.charCodeAt(oe);te.write_shift(1,je>=128?95:je)}return te.write_shift(1,0),te}function g(I,Q,O){var te=x(I,Q,O);return te[1].v=I.read_shift(2,"i"),te}function b(I,Q,O){var te=qe(7);return te.write_shift(1,255),te.write_shift(2,Q),te.write_shift(2,I),te.write_shift(2,O,"i"),te}function N(I,Q,O){var te=x(I,Q,O);return te[1].v=I.read_shift(8,"f"),te}function y(I,Q,O){var te=qe(13);return te.write_shift(1,255),te.write_shift(2,Q),te.write_shift(2,I),te.write_shift(8,O,"f"),te}function S(I,Q,O){var te=I.l+Q,oe=x(I,Q,O);if(oe[1].v=I.read_shift(8,"f"),O.qpro)I.l=te;else{var je=I.read_shift(2);G(I.slice(I.l,I.l+je),oe),I.l+=je}return oe}function C(I,Q,O){var te=Q&32768;return Q&=-32769,Q=(te?I:0)+(Q>=8192?Q-16384:Q),(te?"":"$")+(O?Dr(Q):jr(Q))}var T={51:["FALSE",0],52:["TRUE",0],70:["LEN",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],111:["T",1]},_=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function G(I,Q){hn(I,0);for(var O=[],te=0,oe="",je="",Me="",ve="";I.l<I.length;){var ce=I[I.l++];switch(ce){case 0:O.push(I.read_shift(8,"f"));break;case 1:je=C(Q[0].c,I.read_shift(2),!0),oe=C(Q[0].r,I.read_shift(2),!1),O.push(je+oe);break;case 2:{var Pe=C(Q[0].c,I.read_shift(2),!0),Qe=C(Q[0].r,I.read_shift(2),!1);je=C(Q[0].c,I.read_shift(2),!0),oe=C(Q[0].r,I.read_shift(2),!1),O.push(Pe+Qe+":"+je+oe)}break;case 3:if(I.l<I.length){console.error("WK1 premature formula end");return}break;case 4:O.push("("+O.pop()+")");break;case 5:O.push(I.read_shift(2));break;case 6:{for(var vt="";ce=I[I.l++];)vt+=String.fromCharCode(ce);O.push('"'+vt.replace(/"/g,'""')+'"')}break;case 8:O.push("-"+O.pop());break;case 23:O.push("+"+O.pop());break;case 22:O.push("NOT("+O.pop()+")");break;case 20:case 21:ve=O.pop(),Me=O.pop(),O.push(["AND","OR"][ce-20]+"("+Me+","+ve+")");break;default:if(ce<32&&_[ce])ve=O.pop(),Me=O.pop(),O.push(Me+_[ce]+ve);else if(T[ce]){if(te=T[ce][1],te==69&&(te=I[I.l++]),te>O.length){console.error("WK1 bad formula parse 0x"+ce.toString(16)+":|"+O.join("|")+"|");return}var xt=O.slice(-te);O.length-=te,O.push(T[ce][0]+"("+xt.join(",")+")")}else return ce<=7?console.error("WK1 invalid opcode "+ce.toString(16)):ce<=24?console.error("WK1 unsupported op "+ce.toString(16)):ce<=30?console.error("WK1 invalid opcode "+ce.toString(16)):ce<=115?console.error("WK1 unsupported function opcode "+ce.toString(16)):console.error("WK1 unrecognized opcode "+ce.toString(16))}}O.length==1?Q[1].f=""+O[0]:console.error("WK1 bad formula parse |"+O.join("|")+"|")}function U(I){var Q=[{c:0,r:0},{t:"n",v:0},0];return Q[0].r=I.read_shift(2),Q[3]=I[I.l++],Q[0].c=I[I.l++],Q}function F(I,Q){var O=U(I);return O[1].t="s",O[1].v=I.read_shift(Q-4,"cstr"),O}function k(I,Q,O,te){var oe=qe(6+te.length);oe.write_shift(2,I),oe.write_shift(1,O),oe.write_shift(1,Q),oe.write_shift(1,39);for(var je=0;je<te.length;++je){var Me=te.charCodeAt(je);oe.write_shift(1,Me>=128?95:Me)}return oe.write_shift(1,0),oe}function E(I,Q){var O=U(I);O[1].v=I.read_shift(2);var te=O[1].v>>1;if(O[1].v&1)switch(te&7){case 0:te=(te>>3)*5e3;break;case 1:te=(te>>3)*500;break;case 2:te=(te>>3)/20;break;case 3:te=(te>>3)/200;break;case 4:te=(te>>3)/2e3;break;case 5:te=(te>>3)/2e4;break;case 6:te=(te>>3)/16;break;case 7:te=(te>>3)/64;break}return O[1].v=te,O}function A(I,Q){var O=U(I),te=I.read_shift(4),oe=I.read_shift(4),je=I.read_shift(2);if(je==65535)return te===0&&oe===3221225472?(O[1].t="e",O[1].v=15):te===0&&oe===3489660928?(O[1].t="e",O[1].v=42):O[1].v=0,O;var Me=je&32768;return je=(je&32767)-16446,O[1].v=(1-Me*2)*(oe*Math.pow(2,je+32)+te*Math.pow(2,je)),O}function B(I,Q,O,te){var oe=qe(14);if(oe.write_shift(2,I),oe.write_shift(1,O),oe.write_shift(1,Q),te==0)return oe.write_shift(4,0),oe.write_shift(4,0),oe.write_shift(2,65535),oe;var je=0,Me=0,ve=0,ce=0;return te<0&&(je=1,te=-te),Me=Math.log2(te)|0,te/=Math.pow(2,Me-31),ce=te>>>0,(ce&2147483648)==0&&(te/=2,++Me,ce=te>>>0),te-=ce,ce|=2147483648,ce>>>=0,te*=Math.pow(2,32),ve=te>>>0,oe.write_shift(4,ve),oe.write_shift(4,ce),Me+=16383+(je?32768:0),oe.write_shift(2,Me),oe}function H(I,Q){var O=A(I);return I.l+=Q-14,O}function M(I,Q){var O=U(I),te=I.read_shift(4);return O[1].v=te>>6,O}function q(I,Q){var O=U(I),te=I.read_shift(8,"f");return O[1].v=te,O}function L(I,Q){var O=q(I);return I.l+=Q-10,O}function re(I,Q){return I[I.l+Q-1]==0?I.read_shift(Q,"cstr"):""}function V(I,Q){var O=I[I.l++];O>Q-1&&(O=Q-1);for(var te="";te.length<O;)te+=String.fromCharCode(I[I.l++]);return te}function ee(I,Q,O){if(!(!O.qpro||Q<21)){var te=I.read_shift(1);I.l+=17,I.l+=1,I.l+=2;var oe=I.read_shift(Q-21,"cstr");return[te,oe]}}function me(I,Q){for(var O={},te=I.l+Q;I.l<te;){var oe=I.read_shift(2);if(oe==14e3){for(O[oe]=[0,""],O[oe][0]=I.read_shift(2);I[I.l];)O[oe][1]+=String.fromCharCode(I[I.l]),I.l++;I.l++}}return O}function W(I,Q){var O=qe(5+I.length);O.write_shift(2,14e3),O.write_shift(2,Q);for(var te=0;te<I.length;++te){var oe=I.charCodeAt(te);O[O.l++]=oe>127?95:oe}return O[O.l++]=0,O}var se={0:{n:"BOF",f:gT},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:u},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f:g},14:{n:"NUMBER",f:N},15:{n:"LABEL",f:h},16:{n:"FORMULA",f:S},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f:h},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:re},222:{n:"SHEETNAMELP",f:V},65535:{n:""}},Z={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:F},23:{n:"NUMBER17",f:A},24:{n:"NUMBER18",f:E},25:{n:"FORMULA19",f:H},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:me},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:M},38:{n:"??"},39:{n:"NUMBER27",f:q},40:{n:"FORMULA28",f:L},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:re},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:ee},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};return{sheet_to_wk1:r,book_to_wk3:i,to_workbook:s}})(),$8=/^\s|\s$|[\t\n\r]/;function wT(t,s){if(!s.bookSST)return"";var a=[Ya];a[a.length]=ct("sst",null,{xmlns:cd[0],count:t.Count,uniqueCount:t.Unique});for(var r=0;r!=t.length;++r)if(t[r]!=null){var i=t[r],o="<si>";i.r?o+=i.r:(o+="<t",i.t||(i.t=""),i.t.match($8)&&(o+=' xml:space="preserve"'),o+=">"+Ws(i.t)+"</t>"),o+="</si>",a[a.length]=o}return a.length>2&&(a[a.length]="</sst>",a[1]=a[1].replace("/>",">")),a.join("")}function H8(t){return[t.read_shift(4),t.read_shift(4)]}function W8(t,s){return s||(s=qe(8)),s.write_shift(4,t.Count),s.write_shift(4,t.Unique),s}var G8=FM;function q8(t){var s=Jr();at(s,159,W8(t));for(var a=0;a<t.length;++a)at(s,19,G8(t[a]));return at(s,160),s.end()}function K8(t){for(var s=[],a=t.split(""),r=0;r<a.length;++r)s[r]=a[r].charCodeAt(0);return s}function ST(t){var s=0,a,r=K8(t),i=r.length+1,o,c,u,f,x;for(a=Po(i),a[0]=r.length,o=1;o!=i;++o)a[o]=r[o-1];for(o=i-1;o>=0;--o)c=a[o],u=(s&16384)===0?0:1,f=s<<1&32767,x=u|f,s=x^c;return s^52811}var Y8=(function(){function t(i,o){switch(o.type){case"base64":return s(Zi(i),o);case"binary":return s(i,o);case"buffer":return s(Fs&&Buffer.isBuffer(i)?i.toString("binary"):tm(i),o);case"array":return s(Xf(i),o)}throw new Error("Unrecognized type "+o.type)}function s(i,o){var c=o||{},u=c.dense?[]:{},f=i.match(/\\trowd.*?\\row\b/g);if(!f.length)throw new Error("RTF missing table");var x={s:{c:0,r:0},e:{c:0,r:f.length-1}};return f.forEach(function(h,p){Array.isArray(u)&&(u[p]=[]);for(var g=/\\\w+\b/g,b=0,N,y=-1;N=g.exec(h);){switch(N[0]){case"\\cell":var S=h.slice(b,g.lastIndex-N[0].length);if(S[0]==" "&&(S=S.slice(1)),++y,S.length){var C={v:S,t:"s"};Array.isArray(u)?u[p][y]=C:u[qs({r:p,c:y})]=C}break}b=g.lastIndex}y>x.e.c&&(x.e.c=y)}),u["!ref"]=Ga(x),u}function a(i,o){return Lo(t(i,o),o)}function r(i){for(var o=["{\\rtf1\\ansi"],c=oa(i["!ref"]),u,f=Array.isArray(i),x=c.s.r;x<=c.e.r;++x){o.push("\\trowd\\trautofit1");for(var h=c.s.c;h<=c.e.c;++h)o.push("\\cellx"+(h+1));for(o.push("\\pard\\intbl"),h=c.s.c;h<=c.e.c;++h){var p=qs({r:x,c:h});u=f?(i[x]||[])[h]:i[p],!(!u||u.v==null&&(!u.f||u.F))&&(o.push(" "+(u.w||(Ji(u),u.w))),o.push("\\cell"))}o.push("\\pard\\intbl\\row")}return o.join("")+"}"}return{to_workbook:a,to_sheet:t,from_sheet:r}})();function zw(t){for(var s=0,a=1;s!=3;++s)a=a*256+(t[s]>255?255:t[s]<0?0:t[s]);return a.toString(16).toUpperCase().slice(1)}var X8=6,Xi=X8;function Nf(t){return Math.floor((t+Math.round(128/Xi)/256)*Xi)}function bf(t){return Math.floor((t-5)/Xi*100+.5)/100}function Rg(t){return Math.round((t*Xi+5)/Xi*256)/256}function Kv(t){t.width?(t.wpx=Nf(t.width),t.wch=bf(t.wpx),t.MDW=Xi):t.wpx?(t.wch=bf(t.wpx),t.width=Rg(t.wch),t.MDW=Xi):typeof t.wch=="number"&&(t.width=Rg(t.wch),t.wpx=Nf(t.width),t.MDW=Xi),t.customWidth&&delete t.customWidth}var Q8=96,CT=Q8;function wf(t){return t*96/CT}function TT(t){return t*CT/96}function Z8(t){var s=["<numFmts>"];return[[5,8],[23,26],[41,44],[50,392]].forEach(function(a){for(var r=a[0];r<=a[1];++r)t[r]!=null&&(s[s.length]=ct("numFmt",null,{numFmtId:r,formatCode:Ws(t[r])}))}),s.length===1?"":(s[s.length]="</numFmts>",s[0]=ct("numFmts",null,{count:s.length-2}).replace("/>",">"),s.join(""))}function J8(t){var s=[];return s[s.length]=ct("cellXfs",null),t.forEach(function(a){s[s.length]=ct("xf",null,a)}),s[s.length]="</cellXfs>",s.length===2?"":(s[0]=ct("cellXfs",null,{count:s.length-2}).replace("/>",">"),s.join(""))}function kT(t,s){var a=[Ya,ct("styleSheet",null,{xmlns:cd[0],"xmlns:vt":sr.vt})],r;return t.SSF&&(r=Z8(t.SSF))!=null&&(a[a.length]=r),a[a.length]='<fonts count="1"><font><sz val="12"/><color theme="1"/><name val="Calibri"/><family val="2"/><scheme val="minor"/></font></fonts>',a[a.length]='<fills count="2"><fill><patternFill patternType="none"/></fill><fill><patternFill patternType="gray125"/></fill></fills>',a[a.length]='<borders count="1"><border><left/><right/><top/><bottom/><diagonal/></border></borders>',a[a.length]='<cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0"/></cellStyleXfs>',(r=J8(s.cellXfs))&&(a[a.length]=r),a[a.length]='<cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0"/></cellStyles>',a[a.length]='<dxfs count="0"/>',a[a.length]='<tableStyles count="0" defaultTableStyle="TableStyleMedium9" defaultPivotStyle="PivotStyleMedium4"/>',a.length>2&&(a[a.length]="</styleSheet>",a[1]=a[1].replace("/>",">")),a.join("")}function eF(t,s){var a=t.read_shift(2),r=Or(t);return[a,r]}function tF(t,s,a){a||(a=qe(6+4*s.length)),a.write_shift(2,t),rr(s,a);var r=a.length>a.l?a.slice(0,a.l):a;return a.l==null&&(a.l=a.length),r}function sF(t,s,a){var r={};r.sz=t.read_shift(2)/20;var i=$M(t);i.fItalic&&(r.italic=1),i.fCondense&&(r.condense=1),i.fExtend&&(r.extend=1),i.fShadow&&(r.shadow=1),i.fOutline&&(r.outline=1),i.fStrikeout&&(r.strike=1);var o=t.read_shift(2);switch(o===700&&(r.bold=1),t.read_shift(2)){case 1:r.vertAlign="superscript";break;case 2:r.vertAlign="subscript";break}var c=t.read_shift(1);c!=0&&(r.underline=c);var u=t.read_shift(1);u>0&&(r.family=u);var f=t.read_shift(1);switch(f>0&&(r.charset=f),t.l++,r.color=VM(t),t.read_shift(1)){case 1:r.scheme="major";break;case 2:r.scheme="minor";break}return r.name=Or(t),r}function aF(t,s){s||(s=qe(153)),s.write_shift(2,t.sz*20),HM(t,s),s.write_shift(2,t.bold?700:400);var a=0;t.vertAlign=="superscript"?a=1:t.vertAlign=="subscript"&&(a=2),s.write_shift(2,a),s.write_shift(1,t.underline||0),s.write_shift(1,t.family||0),s.write_shift(1,t.charset||0),s.write_shift(1,0),jf(t.color,s);var r=0;return r=2,s.write_shift(1,r),rr(t.name,s),s.length>s.l?s.slice(0,s.l):s}var rF=["none","solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"],_0,nF=bi;function Uw(t,s){s||(s=qe(84)),_0||(_0=Fv(rF));var a=_0[t.patternType];a==null&&(a=40),s.write_shift(4,a);var r=0;if(a!=40)for(jf({auto:1},s),jf({auto:1},s);r<12;++r)s.write_shift(4,0);else{for(;r<4;++r)s.write_shift(4,0);for(;r<12;++r)s.write_shift(4,0)}return s.length>s.l?s.slice(0,s.l):s}function iF(t,s){var a=t.l+s,r=t.read_shift(2),i=t.read_shift(2);return t.l=a,{ixfe:r,numFmtId:i}}function ET(t,s,a){a||(a=qe(16)),a.write_shift(2,s||0),a.write_shift(2,t.numFmtId||0),a.write_shift(2,0),a.write_shift(2,0),a.write_shift(2,0),a.write_shift(1,0),a.write_shift(1,0);var r=0;return a.write_shift(1,r),a.write_shift(1,0),a.write_shift(1,0),a.write_shift(1,0),a}function cu(t,s){return s||(s=qe(10)),s.write_shift(1,0),s.write_shift(1,0),s.write_shift(4,0),s.write_shift(4,0),s}var lF=bi;function oF(t,s){return s||(s=qe(51)),s.write_shift(1,0),cu(null,s),cu(null,s),cu(null,s),cu(null,s),cu(null,s),s.length>s.l?s.slice(0,s.l):s}function cF(t,s){return s||(s=qe(52)),s.write_shift(4,t.xfId),s.write_shift(2,1),s.write_shift(1,0),s.write_shift(1,0),vf(t.name||"",s),s.length>s.l?s.slice(0,s.l):s}function dF(t,s,a){var r=qe(2052);return r.write_shift(4,t),vf(s,r),vf(a,r),r.length>r.l?r.slice(0,r.l):r}function uF(t,s){if(s){var a=0;[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var i=r[0];i<=r[1];++i)s[i]!=null&&++a}),a!=0&&(at(t,615,ti(a)),[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var i=r[0];i<=r[1];++i)s[i]!=null&&at(t,44,tF(i,s[i]))}),at(t,616))}}function mF(t){var s=1;at(t,611,ti(s)),at(t,43,aF({sz:12,color:{theme:1},name:"Calibri",family:2})),at(t,612)}function hF(t){var s=2;at(t,603,ti(s)),at(t,45,Uw({patternType:"none"})),at(t,45,Uw({patternType:"gray125"})),at(t,604)}function fF(t){var s=1;at(t,613,ti(s)),at(t,46,oF()),at(t,614)}function xF(t){var s=1;at(t,626,ti(s)),at(t,47,ET({numFmtId:0},65535)),at(t,627)}function pF(t,s){at(t,617,ti(s.length)),s.forEach(function(a){at(t,47,ET(a,0))}),at(t,618)}function gF(t){var s=1;at(t,619,ti(s)),at(t,48,cF({xfId:0,name:"Normal"})),at(t,620)}function vF(t){var s=0;at(t,505,ti(s)),at(t,506)}function jF(t){var s=0;at(t,508,dF(s,"TableStyleMedium9","PivotStyleMedium4")),at(t,509)}function yF(t,s){var a=Jr();return at(a,278),uF(a,t.SSF),mF(a),hF(a),fF(a),xF(a),pF(a,s.cellXfs),gF(a),vF(a),jF(a),at(a,279),a.end()}function AT(t,s){if(s&&s.themeXLSX)return s.themeXLSX;if(t&&typeof t.raw=="string")return t.raw;var a=[Ya];return a[a.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',a[a.length]="<a:themeElements>",a[a.length]='<a:clrScheme name="Office">',a[a.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',a[a.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',a[a.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',a[a.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',a[a.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',a[a.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',a[a.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',a[a.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',a[a.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',a[a.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',a[a.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',a[a.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',a[a.length]="</a:clrScheme>",a[a.length]='<a:fontScheme name="Office">',a[a.length]="<a:majorFont>",a[a.length]='<a:latin typeface="Cambria"/>',a[a.length]='<a:ea typeface=""/>',a[a.length]='<a:cs typeface=""/>',a[a.length]='<a:font script="Jpan" typeface="ＭＳ Ｐゴシック"/>',a[a.length]='<a:font script="Hang" typeface="맑은 고딕"/>',a[a.length]='<a:font script="Hans" typeface="宋体"/>',a[a.length]='<a:font script="Hant" typeface="新細明體"/>',a[a.length]='<a:font script="Arab" typeface="Times New Roman"/>',a[a.length]='<a:font script="Hebr" typeface="Times New Roman"/>',a[a.length]='<a:font script="Thai" typeface="Tahoma"/>',a[a.length]='<a:font script="Ethi" typeface="Nyala"/>',a[a.length]='<a:font script="Beng" typeface="Vrinda"/>',a[a.length]='<a:font script="Gujr" typeface="Shruti"/>',a[a.length]='<a:font script="Khmr" typeface="MoolBoran"/>',a[a.length]='<a:font script="Knda" typeface="Tunga"/>',a[a.length]='<a:font script="Guru" typeface="Raavi"/>',a[a.length]='<a:font script="Cans" typeface="Euphemia"/>',a[a.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',a[a.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',a[a.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',a[a.length]='<a:font script="Thaa" typeface="MV Boli"/>',a[a.length]='<a:font script="Deva" typeface="Mangal"/>',a[a.length]='<a:font script="Telu" typeface="Gautami"/>',a[a.length]='<a:font script="Taml" typeface="Latha"/>',a[a.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',a[a.length]='<a:font script="Orya" typeface="Kalinga"/>',a[a.length]='<a:font script="Mlym" typeface="Kartika"/>',a[a.length]='<a:font script="Laoo" typeface="DokChampa"/>',a[a.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',a[a.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',a[a.length]='<a:font script="Viet" typeface="Times New Roman"/>',a[a.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',a[a.length]='<a:font script="Geor" typeface="Sylfaen"/>',a[a.length]="</a:majorFont>",a[a.length]="<a:minorFont>",a[a.length]='<a:latin typeface="Calibri"/>',a[a.length]='<a:ea typeface=""/>',a[a.length]='<a:cs typeface=""/>',a[a.length]='<a:font script="Jpan" typeface="ＭＳ Ｐゴシック"/>',a[a.length]='<a:font script="Hang" typeface="맑은 고딕"/>',a[a.length]='<a:font script="Hans" typeface="宋体"/>',a[a.length]='<a:font script="Hant" typeface="新細明體"/>',a[a.length]='<a:font script="Arab" typeface="Arial"/>',a[a.length]='<a:font script="Hebr" typeface="Arial"/>',a[a.length]='<a:font script="Thai" typeface="Tahoma"/>',a[a.length]='<a:font script="Ethi" typeface="Nyala"/>',a[a.length]='<a:font script="Beng" typeface="Vrinda"/>',a[a.length]='<a:font script="Gujr" typeface="Shruti"/>',a[a.length]='<a:font script="Khmr" typeface="DaunPenh"/>',a[a.length]='<a:font script="Knda" typeface="Tunga"/>',a[a.length]='<a:font script="Guru" typeface="Raavi"/>',a[a.length]='<a:font script="Cans" typeface="Euphemia"/>',a[a.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',a[a.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',a[a.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',a[a.length]='<a:font script="Thaa" typeface="MV Boli"/>',a[a.length]='<a:font script="Deva" typeface="Mangal"/>',a[a.length]='<a:font script="Telu" typeface="Gautami"/>',a[a.length]='<a:font script="Taml" typeface="Latha"/>',a[a.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',a[a.length]='<a:font script="Orya" typeface="Kalinga"/>',a[a.length]='<a:font script="Mlym" typeface="Kartika"/>',a[a.length]='<a:font script="Laoo" typeface="DokChampa"/>',a[a.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',a[a.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',a[a.length]='<a:font script="Viet" typeface="Arial"/>',a[a.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',a[a.length]='<a:font script="Geor" typeface="Sylfaen"/>',a[a.length]="</a:minorFont>",a[a.length]="</a:fontScheme>",a[a.length]='<a:fmtScheme name="Office">',a[a.length]="<a:fillStyleLst>",a[a.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',a[a.length]='<a:gradFill rotWithShape="1">',a[a.length]="<a:gsLst>",a[a.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',a[a.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',a[a.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',a[a.length]="</a:gsLst>",a[a.length]='<a:lin ang="16200000" scaled="1"/>',a[a.length]="</a:gradFill>",a[a.length]='<a:gradFill rotWithShape="1">',a[a.length]="<a:gsLst>",a[a.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',a[a.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',a[a.length]="</a:gsLst>",a[a.length]='<a:lin ang="16200000" scaled="0"/>',a[a.length]="</a:gradFill>",a[a.length]="</a:fillStyleLst>",a[a.length]="<a:lnStyleLst>",a[a.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',a[a.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',a[a.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',a[a.length]="</a:lnStyleLst>",a[a.length]="<a:effectStyleLst>",a[a.length]="<a:effectStyle>",a[a.length]="<a:effectLst>",a[a.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',a[a.length]="</a:effectLst>",a[a.length]="</a:effectStyle>",a[a.length]="<a:effectStyle>",a[a.length]="<a:effectLst>",a[a.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',a[a.length]="</a:effectLst>",a[a.length]="</a:effectStyle>",a[a.length]="<a:effectStyle>",a[a.length]="<a:effectLst>",a[a.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',a[a.length]="</a:effectLst>",a[a.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',a[a.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',a[a.length]="</a:effectStyle>",a[a.length]="</a:effectStyleLst>",a[a.length]="<a:bgFillStyleLst>",a[a.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',a[a.length]='<a:gradFill rotWithShape="1">',a[a.length]="<a:gsLst>",a[a.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',a[a.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',a[a.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',a[a.length]="</a:gsLst>",a[a.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',a[a.length]="</a:gradFill>",a[a.length]='<a:gradFill rotWithShape="1">',a[a.length]="<a:gsLst>",a[a.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',a[a.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',a[a.length]="</a:gsLst>",a[a.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',a[a.length]="</a:gradFill>",a[a.length]="</a:bgFillStyleLst>",a[a.length]="</a:fmtScheme>",a[a.length]="</a:themeElements>",a[a.length]="<a:objectDefaults>",a[a.length]="<a:spDef>",a[a.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',a[a.length]="</a:spDef>",a[a.length]="<a:lnDef>",a[a.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',a[a.length]="</a:lnDef>",a[a.length]="</a:objectDefaults>",a[a.length]="<a:extraClrSchemeLst/>",a[a.length]="</a:theme>",a.join("")}function NF(t,s){return{flags:t.read_shift(4),version:t.read_shift(4),name:Or(t)}}function bF(t){var s=qe(12+2*t.name.length);return s.write_shift(4,t.flags),s.write_shift(4,t.version),rr(t.name,s),s.slice(0,s.l)}function wF(t){for(var s=[],a=t.read_shift(4);a-- >0;)s.push([t.read_shift(4),t.read_shift(4)]);return s}function SF(t){var s=qe(4+8*t.length);s.write_shift(4,t.length);for(var a=0;a<t.length;++a)s.write_shift(4,t[a][0]),s.write_shift(4,t[a][1]);return s}function CF(t,s){var a=qe(8+2*s.length);return a.write_shift(4,t),rr(s,a),a.slice(0,a.l)}function TF(t){return t.l+=4,t.read_shift(4)!=0}function kF(t,s){var a=qe(8);return a.write_shift(4,t),a.write_shift(4,1),a}function EF(){var t=Jr();return at(t,332),at(t,334,ti(1)),at(t,335,bF({name:"XLDAPR",version:12e4,flags:3496657072})),at(t,336),at(t,339,CF(1,"XLDAPR")),at(t,52),at(t,35,ti(514)),at(t,4096,ti(0)),at(t,4097,On(1)),at(t,36),at(t,53),at(t,340),at(t,337,kF(1)),at(t,51,SF([[1,0]])),at(t,338),at(t,333),t.end()}function _T(){var t=[Ya];return t.push(`<metadata xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:xlrd="http://schemas.microsoft.com/office/spreadsheetml/2017/richdata" xmlns:xda="http://schemas.microsoft.com/office/spreadsheetml/2017/dynamicarray">
  <metadataTypes count="1">
    <metadataType name="XLDAPR" minSupportedVersion="120000" copy="1" pasteAll="1" pasteValues="1" merge="1" splitFirst="1" rowColShift="1" clearFormats="1" clearComments="1" assign="1" coerce="1" cellMeta="1"/>
  </metadataTypes>
  <futureMetadata name="XLDAPR" count="1">
    <bk>
      <extLst>
        <ext uri="{bdbb8cdc-fa1e-496e-a857-3c3f30c029c3}">
          <xda:dynamicArrayProperties fDynamic="1" fCollapsed="0"/>
        </ext>
      </extLst>
    </bk>
  </futureMetadata>
  <cellMetadata count="1">
    <bk>
      <rc t="1" v="0"/>
    </bk>
  </cellMetadata>
</metadata>`),t.join("")}function AF(t){var s={};s.i=t.read_shift(4);var a={};a.r=t.read_shift(4),a.c=t.read_shift(4),s.r=qs(a);var r=t.read_shift(1);return r&2&&(s.l="1"),r&8&&(s.a="1"),s}var Oc=1024;function DT(t,s){for(var a=[21600,21600],r=["m0,0l0",a[1],a[0],a[1],a[0],"0xe"].join(","),i=[ct("xml",null,{"xmlns:v":fn.v,"xmlns:o":fn.o,"xmlns:x":fn.x,"xmlns:mv":fn.mv}).replace(/\/>/,">"),ct("o:shapelayout",ct("o:idmap",null,{"v:ext":"edit",data:t}),{"v:ext":"edit"}),ct("v:shapetype",[ct("v:stroke",null,{joinstyle:"miter"}),ct("v:path",null,{gradientshapeok:"t","o:connecttype":"rect"})].join(""),{id:"_x0000_t202","o:spt":202,coordsize:a.join(","),path:r})];Oc<t*1e3;)Oc+=1e3;return s.forEach(function(o){var c=ar(o[0]),u={color2:"#BEFF82",type:"gradient"};u.type=="gradient"&&(u.angle="-180");var f=u.type=="gradient"?ct("o:fill",null,{type:"gradientUnscaled","v:ext":"view"}):null,x=ct("v:fill",f,u),h={on:"t",obscured:"t"};++Oc,i=i.concat(["<v:shape"+Lu({id:"_x0000_s"+Oc,type:"#_x0000_t202",style:"position:absolute; margin-left:80pt;margin-top:5pt;width:104pt;height:64pt;z-index:10"+(o[1].hidden?";visibility:hidden":""),fillcolor:"#ECFAD4",strokecolor:"#edeaa1"})+">",x,ct("v:shadow",null,h),ct("v:path",null,{"o:connecttype":"none"}),'<v:textbox><div style="text-align:left"></div></v:textbox>','<x:ClientData ObjectType="Note">',"<x:MoveWithCells/>","<x:SizeWithCells/>",gr("x:Anchor",[c.c+1,0,c.r+1,0,c.c+3,20,c.r+5,20].join(",")),gr("x:AutoFill","False"),gr("x:Row",String(c.r)),gr("x:Column",String(c.c)),o[1].hidden?"":"<x:Visible/>","</x:ClientData>","</v:shape>"])}),i.push("</xml>"),i.join("")}function OT(t){var s=[Ya,ct("comments",null,{xmlns:cd[0]})],a=[];return s.push("<authors>"),t.forEach(function(r){r[1].forEach(function(i){var o=Ws(i.a);a.indexOf(o)==-1&&(a.push(o),s.push("<author>"+o+"</author>")),i.T&&i.ID&&a.indexOf("tc="+i.ID)==-1&&(a.push("tc="+i.ID),s.push("<author>tc="+i.ID+"</author>"))})}),a.length==0&&(a.push("SheetJ5"),s.push("<author>SheetJ5</author>")),s.push("</authors>"),s.push("<commentList>"),t.forEach(function(r){var i=0,o=[];if(r[1][0]&&r[1][0].T&&r[1][0].ID?i=a.indexOf("tc="+r[1][0].ID):r[1].forEach(function(f){f.a&&(i=a.indexOf(Ws(f.a))),o.push(f.t||"")}),s.push('<comment ref="'+r[0]+'" authorId="'+i+'"><text>'),o.length<=1)s.push(gr("t",Ws(o[0]||"")));else{for(var c=`Comment:
    `+o[0]+`
`,u=1;u<o.length;++u)c+=`Reply:
    `+o[u]+`
`;s.push(gr("t",Ws(c)))}s.push("</text></comment>")}),s.push("</commentList>"),s.length>2&&(s[s.length]="</comments>",s[1]=s[1].replace("/>",">")),s.join("")}function _F(t,s,a){var r=[Ya,ct("ThreadedComments",null,{xmlns:sr.TCMNT}).replace(/[\/]>/,">")];return t.forEach(function(i){var o="";(i[1]||[]).forEach(function(c,u){if(!c.T){delete c.ID;return}c.a&&s.indexOf(c.a)==-1&&s.push(c.a);var f={ref:i[0],id:"{54EE7951-7262-4200-6969-"+("000000000000"+a.tcid++).slice(-12)+"}"};u==0?o=f.id:f.parentId=o,c.ID=f.id,c.a&&(f.personId="{54EE7950-7262-4200-6969-"+("000000000000"+s.indexOf(c.a)).slice(-12)+"}"),r.push(ct("threadedComment",gr("text",c.t||""),f))})}),r.push("</ThreadedComments>"),r.join("")}function DF(t){var s=[Ya,ct("personList",null,{xmlns:sr.TCMNT,"xmlns:x":cd[0]}).replace(/[\/]>/,">")];return t.forEach(function(a,r){s.push(ct("person",null,{displayName:a,id:"{54EE7950-7262-4200-6969-"+("000000000000"+r).slice(-12)+"}",userId:a,providerId:"None"}))}),s.push("</personList>"),s.join("")}function OF(t){var s={};s.iauthor=t.read_shift(4);var a=Vo(t);return s.rfx=a.s,s.ref=qs(a.s),t.l+=16,s}function RF(t,s){return s==null&&(s=qe(36)),s.write_shift(4,t[1].iauthor),ud(t[0],s),s.write_shift(4,0),s.write_shift(4,0),s.write_shift(4,0),s.write_shift(4,0),s}var PF=Or;function MF(t){return rr(t.slice(0,54))}function FF(t){var s=Jr(),a=[];return at(s,628),at(s,630),t.forEach(function(r){r[1].forEach(function(i){a.indexOf(i.a)>-1||(a.push(i.a.slice(0,54)),at(s,632,MF(i.a)))})}),at(s,631),at(s,633),t.forEach(function(r){r[1].forEach(function(i){i.iauthor=a.indexOf(i.a);var o={s:ar(r[0]),e:ar(r[0])};at(s,635,RF([o,i])),i.t&&i.t.length>0&&at(s,637,LM(i)),at(s,636),delete i.iauthor})}),at(s,634),at(s,629),s.end()}function IF(t,s){s.FullPaths.forEach(function(a,r){if(r!=0){var i=a.replace(/[^\/]*[\/]/,"/_VBA_PROJECT_CUR/");i.slice(-1)!=="/"&&Qs.utils.cfb_add(t,i,s.FileIndex[r].content)}})}var RT=["xlsb","xlsm","xlam","biff8","xla"],LF=(function(){var t=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,s={r:0,c:0};function a(r,i,o,c){var u=!1,f=!1;o.length==0?f=!0:o.charAt(0)=="["&&(f=!0,o=o.slice(1,-1)),c.length==0?u=!0:c.charAt(0)=="["&&(u=!0,c=c.slice(1,-1));var x=o.length>0?parseInt(o,10)|0:0,h=c.length>0?parseInt(c,10)|0:0;return u?h+=s.c:--h,f?x+=s.r:--x,i+(u?"":"$")+Dr(h)+(f?"":"$")+jr(x)}return function(i,o){return s=o,i.replace(t,a)}})(),Yv=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,Xv=(function(){return function(s,a){return s.replace(Yv,function(r,i,o,c,u,f){var x=$v(c)-(o?0:a.c),h=Vv(f)-(u?0:a.r),p=h==0?"":u?h+1:"["+h+"]",g=x==0?"":o?x+1:"["+x+"]";return i+"R"+p+"C"+g})}})();function BF(t,s){return t.replace(Yv,function(a,r,i,o,c,u){return r+(i=="$"?i+o:Dr($v(o)+s.c))+(c=="$"?c+u:jr(Vv(u)+s.r))})}function zF(t){return t.length!=1}function $a(t){t.l+=1}function Bl(t,s){var a=t.read_shift(2);return[a&16383,a>>14&1,a>>15&1]}function PT(t,s,a){var r=2;if(a){if(a.biff>=2&&a.biff<=5)return MT(t);a.biff==12&&(r=4)}var i=t.read_shift(r),o=t.read_shift(r),c=Bl(t),u=Bl(t);return{s:{r:i,c:c[0],cRel:c[1],rRel:c[2]},e:{r:o,c:u[0],cRel:u[1],rRel:u[2]}}}function MT(t){var s=Bl(t),a=Bl(t),r=t.read_shift(1),i=t.read_shift(1);return{s:{r:s[0],c:r,cRel:s[1],rRel:s[2]},e:{r:a[0],c:i,cRel:a[1],rRel:a[2]}}}function UF(t,s,a){if(a.biff<8)return MT(t);var r=t.read_shift(a.biff==12?4:2),i=t.read_shift(a.biff==12?4:2),o=Bl(t),c=Bl(t);return{s:{r,c:o[0],cRel:o[1],rRel:o[2]},e:{r:i,c:c[0],cRel:c[1],rRel:c[2]}}}function FT(t,s,a){if(a&&a.biff>=2&&a.biff<=5)return VF(t);var r=t.read_shift(a&&a.biff==12?4:2),i=Bl(t);return{r,c:i[0],cRel:i[1],rRel:i[2]}}function VF(t){var s=Bl(t),a=t.read_shift(1);return{r:s[0],c:a,cRel:s[1],rRel:s[2]}}function $F(t){var s=t.read_shift(2),a=t.read_shift(2);return{r:s,c:a&255,fQuoted:!!(a&16384),cRel:a>>15,rRel:a>>15}}function HF(t,s,a){var r=a&&a.biff?a.biff:8;if(r>=2&&r<=5)return WF(t);var i=t.read_shift(r>=12?4:2),o=t.read_shift(2),c=(o&16384)>>14,u=(o&32768)>>15;if(o&=16383,u==1)for(;i>524287;)i-=1048576;if(c==1)for(;o>8191;)o=o-16384;return{r:i,c:o,cRel:c,rRel:u}}function WF(t){var s=t.read_shift(2),a=t.read_shift(1),r=(s&32768)>>15,i=(s&16384)>>14;return s&=16383,r==1&&s>=8192&&(s=s-16384),i==1&&a>=128&&(a=a-256),{r:s,c:a,cRel:i,rRel:r}}function GF(t,s,a){var r=(t[t.l++]&96)>>5,i=PT(t,a.biff>=2&&a.biff<=5?6:8,a);return[r,i]}function qF(t,s,a){var r=(t[t.l++]&96)>>5,i=t.read_shift(2,"i"),o=8;if(a)switch(a.biff){case 5:t.l+=12,o=6;break;case 12:o=12;break}var c=PT(t,o,a);return[r,i,c]}function KF(t,s,a){var r=(t[t.l++]&96)>>5;return t.l+=a&&a.biff>8?12:a.biff<8?6:8,[r]}function YF(t,s,a){var r=(t[t.l++]&96)>>5,i=t.read_shift(2),o=8;if(a)switch(a.biff){case 5:t.l+=12,o=6;break;case 12:o=12;break}return t.l+=o,[r,i]}function XF(t,s,a){var r=(t[t.l++]&96)>>5,i=UF(t,s-1,a);return[r,i]}function QF(t,s,a){var r=(t[t.l++]&96)>>5;return t.l+=a.biff==2?6:a.biff==12?14:7,[r]}function Vw(t){var s=t[t.l+1]&1,a=1;return t.l+=4,[s,a]}function ZF(t,s,a){t.l+=2;for(var r=t.read_shift(a&&a.biff==2?1:2),i=[],o=0;o<=r;++o)i.push(t.read_shift(a&&a.biff==2?1:2));return i}function JF(t,s,a){var r=t[t.l+1]&255?1:0;return t.l+=2,[r,t.read_shift(a&&a.biff==2?1:2)]}function eI(t,s,a){var r=t[t.l+1]&255?1:0;return t.l+=2,[r,t.read_shift(a&&a.biff==2?1:2)]}function tI(t){var s=t[t.l+1]&255?1:0;return t.l+=2,[s,t.read_shift(2)]}function sI(t,s,a){var r=t[t.l+1]&255?1:0;return t.l+=a&&a.biff==2?3:4,[r]}function IT(t){var s=t.read_shift(1),a=t.read_shift(1);return[s,a]}function aI(t){return t.read_shift(2),IT(t)}function rI(t){return t.read_shift(2),IT(t)}function nI(t,s,a){var r=(t[t.l]&96)>>5;t.l+=1;var i=FT(t,0,a);return[r,i]}function iI(t,s,a){var r=(t[t.l]&96)>>5;t.l+=1;var i=HF(t,0,a);return[r,i]}function lI(t,s,a){var r=(t[t.l]&96)>>5;t.l+=1;var i=t.read_shift(2);a&&a.biff==5&&(t.l+=12);var o=FT(t,0,a);return[r,i,o]}function oI(t,s,a){var r=(t[t.l]&96)>>5;t.l+=1;var i=t.read_shift(a&&a.biff<=3?1:2);return[oL[i],zT[i],r]}function cI(t,s,a){var r=t[t.l++],i=t.read_shift(1),o=a&&a.biff<=3?[r==88?-1:0,t.read_shift(1)]:dI(t);return[i,(o[0]===0?zT:lL)[o[1]]]}function dI(t){return[t[t.l+1]>>7,t.read_shift(2)&32767]}function uI(t,s,a){t.l+=a&&a.biff==2?3:4}function mI(t,s,a){if(t.l++,a&&a.biff==12)return[t.read_shift(4,"i"),0];var r=t.read_shift(2),i=t.read_shift(a&&a.biff==2?1:2);return[r,i]}function hI(t){return t.l++,rm[t.read_shift(1)]}function fI(t){return t.l++,t.read_shift(2)}function xI(t){return t.l++,t.read_shift(1)!==0}function pI(t){return t.l++,md(t)}function gI(t,s,a){return t.l++,jT(t,s-1,a)}function vI(t,s){var a=[t.read_shift(1)];if(s==12)switch(a[0]){case 2:a[0]=4;break;case 4:a[0]=16;break;case 0:a[0]=1;break;case 1:a[0]=2;break}switch(a[0]){case 4:a[1]=l8(t,1)?"TRUE":"FALSE",s!=12&&(t.l+=7);break;case 37:case 16:a[1]=rm[t[t.l]],t.l+=s==12?4:8;break;case 0:t.l+=8;break;case 1:a[1]=md(t);break;case 2:a[1]=u8(t,0,{biff:s>0&&s<8?2:s});break;default:throw new Error("Bad SerAr: "+a[0])}return a}function jI(t,s,a){for(var r=t.read_shift(a.biff==12?4:2),i=[],o=0;o!=r;++o)i.push((a.biff==12?Vo:f8)(t));return i}function yI(t,s,a){var r=0,i=0;a.biff==12?(r=t.read_shift(4),i=t.read_shift(4)):(i=1+t.read_shift(1),r=1+t.read_shift(2)),a.biff>=2&&a.biff<8&&(--r,--i==0&&(i=256));for(var o=0,c=[];o!=r&&(c[o]=[]);++o)for(var u=0;u!=i;++u)c[o][u]=vI(t,a.biff);return c}function NI(t,s,a){var r=t.read_shift(1)>>>5&3,i=!a||a.biff>=8?4:2,o=t.read_shift(i);switch(a.biff){case 2:t.l+=5;break;case 3:case 4:t.l+=8;break;case 5:t.l+=12;break}return[r,0,o]}function bI(t,s,a){if(a.biff==5)return wI(t);var r=t.read_shift(1)>>>5&3,i=t.read_shift(2),o=t.read_shift(4);return[r,i,o]}function wI(t){var s=t.read_shift(1)>>>5&3,a=t.read_shift(2,"i");t.l+=8;var r=t.read_shift(2);return t.l+=12,[s,a,r]}function SI(t,s,a){var r=t.read_shift(1)>>>5&3;t.l+=a&&a.biff==2?3:4;var i=t.read_shift(a&&a.biff==2?1:2);return[r,i]}function CI(t,s,a){var r=t.read_shift(1)>>>5&3,i=t.read_shift(a&&a.biff==2?1:2);return[r,i]}function TI(t,s,a){var r=t.read_shift(1)>>>5&3;return t.l+=4,a.biff<8&&t.l--,a.biff==12&&(t.l+=2),[r]}function kI(t,s,a){var r=(t[t.l++]&96)>>5,i=t.read_shift(2),o=4;if(a)switch(a.biff){case 5:o=15;break;case 12:o=6;break}return t.l+=o,[r,i]}var EI=bi,AI=bi,_I=bi;function nm(t,s,a){return t.l+=2,[$F(t)]}function Qv(t){return t.l+=6,[]}var DI=nm,OI=Qv,RI=Qv,PI=nm;function LT(t){return t.l+=2,[gT(t),t.read_shift(2)&1]}var MI=nm,FI=LT,II=Qv,LI=nm,BI=nm,zI=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];function UI(t){t.l+=2;var s=t.read_shift(2),a=t.read_shift(2),r=t.read_shift(4),i=t.read_shift(2),o=t.read_shift(2),c=zI[a>>2&31];return{ixti:s,coltype:a&3,rt:c,idx:r,c:i,C:o}}function VI(t){return t.l+=2,[t.read_shift(4)]}function $I(t,s,a){return t.l+=5,t.l+=2,t.l+=a.biff==2?1:4,["PTGSHEET"]}function HI(t,s,a){return t.l+=a.biff==2?4:5,["PTGENDSHEET"]}function WI(t){var s=t.read_shift(1)>>>5&3,a=t.read_shift(2);return[s,a]}function GI(t){var s=t.read_shift(1)>>>5&3,a=t.read_shift(2);return[s,a]}function qI(t){return t.l+=4,[0,0]}var $w={1:{n:"PtgExp",f:mI},2:{n:"PtgTbl",f:_I},3:{n:"PtgAdd",f:$a},4:{n:"PtgSub",f:$a},5:{n:"PtgMul",f:$a},6:{n:"PtgDiv",f:$a},7:{n:"PtgPower",f:$a},8:{n:"PtgConcat",f:$a},9:{n:"PtgLt",f:$a},10:{n:"PtgLe",f:$a},11:{n:"PtgEq",f:$a},12:{n:"PtgGe",f:$a},13:{n:"PtgGt",f:$a},14:{n:"PtgNe",f:$a},15:{n:"PtgIsect",f:$a},16:{n:"PtgUnion",f:$a},17:{n:"PtgRange",f:$a},18:{n:"PtgUplus",f:$a},19:{n:"PtgUminus",f:$a},20:{n:"PtgPercent",f:$a},21:{n:"PtgParen",f:$a},22:{n:"PtgMissArg",f:$a},23:{n:"PtgStr",f:gI},26:{n:"PtgSheet",f:$I},27:{n:"PtgEndSheet",f:HI},28:{n:"PtgErr",f:hI},29:{n:"PtgBool",f:xI},30:{n:"PtgInt",f:fI},31:{n:"PtgNum",f:pI},32:{n:"PtgArray",f:QF},33:{n:"PtgFunc",f:oI},34:{n:"PtgFuncVar",f:cI},35:{n:"PtgName",f:NI},36:{n:"PtgRef",f:nI},37:{n:"PtgArea",f:GF},38:{n:"PtgMemArea",f:SI},39:{n:"PtgMemErr",f:EI},40:{n:"PtgMemNoMem",f:AI},41:{n:"PtgMemFunc",f:CI},42:{n:"PtgRefErr",f:TI},43:{n:"PtgAreaErr",f:KF},44:{n:"PtgRefN",f:iI},45:{n:"PtgAreaN",f:XF},46:{n:"PtgMemAreaN",f:WI},47:{n:"PtgMemNoMemN",f:GI},57:{n:"PtgNameX",f:bI},58:{n:"PtgRef3d",f:lI},59:{n:"PtgArea3d",f:qF},60:{n:"PtgRefErr3d",f:kI},61:{n:"PtgAreaErr3d",f:YF},255:{}},KI={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},YI={1:{n:"PtgElfLel",f:LT},2:{n:"PtgElfRw",f:LI},3:{n:"PtgElfCol",f:DI},6:{n:"PtgElfRwV",f:BI},7:{n:"PtgElfColV",f:PI},10:{n:"PtgElfRadical",f:MI},11:{n:"PtgElfRadicalS",f:II},13:{n:"PtgElfColS",f:OI},15:{n:"PtgElfColSV",f:RI},16:{n:"PtgElfRadicalLel",f:FI},25:{n:"PtgList",f:UI},29:{n:"PtgSxName",f:VI},255:{}},XI={0:{n:"PtgAttrNoop",f:qI},1:{n:"PtgAttrSemi",f:sI},2:{n:"PtgAttrIf",f:eI},4:{n:"PtgAttrChoose",f:ZF},8:{n:"PtgAttrGoto",f:JF},16:{n:"PtgAttrSum",f:uI},32:{n:"PtgAttrBaxcel",f:Vw},33:{n:"PtgAttrBaxcel",f:Vw},64:{n:"PtgAttrSpace",f:aI},65:{n:"PtgAttrSpaceSemi",f:rI},128:{n:"PtgAttrIfError",f:tI},255:{}};function QI(t,s,a,r){if(r.biff<8)return bi(t,s);for(var i=t.l+s,o=[],c=0;c!==a.length;++c)switch(a[c][0]){case"PtgArray":a[c][1]=yI(t,0,r),o.push(a[c][1]);break;case"PtgMemArea":a[c][2]=jI(t,a[c][1],r),o.push(a[c][2]);break;case"PtgExp":r&&r.biff==12&&(a[c][1][1]=t.read_shift(4),o.push(a[c][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+a[c][0]}return s=i-t.l,s!==0&&o.push(bi(t,s)),o}function ZI(t,s,a){for(var r=t.l+s,i,o,c=[];r!=t.l;)s=r-t.l,o=t[t.l],i=$w[o]||$w[KI[o]],(o===24||o===25)&&(i=(o===24?YI:XI)[t[t.l+1]]),!i||!i.f?bi(t,s):c.push([i.n,i.f(t,s,a)]);return c}function JI(t){for(var s=[],a=0;a<t.length;++a){for(var r=t[a],i=[],o=0;o<r.length;++o){var c=r[o];if(c)switch(c[0]){case 2:i.push('"'+c[1].replace(/"/g,'""')+'"');break;default:i.push(c[1])}else i.push("")}s.push(i.join(","))}return s.join(";")}var eL={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function tL(t,s){if(!t&&!(s&&s.biff<=5&&s.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(t)?"'"+t+"'":t}function BT(t,s,a){if(!t)return"SH33TJSERR0";if(a.biff>8&&(!t.XTI||!t.XTI[s]))return t.SheetNames[s];if(!t.XTI)return"SH33TJSERR6";var r=t.XTI[s];if(a.biff<8)return s>1e4&&(s-=65536),s<0&&(s=-s),s==0?"":t.XTI[s-1];if(!r)return"SH33TJSERR1";var i="";if(a.biff>8)switch(t[r[0]][0]){case 357:return i=r[1]==-1?"#REF":t.SheetNames[r[1]],r[1]==r[2]?i:i+":"+t.SheetNames[r[2]];case 358:return a.SID!=null?t.SheetNames[a.SID]:"SH33TJSSAME"+t[r[0]][0];case 355:default:return"SH33TJSSRC"+t[r[0]][0]}switch(t[r[0]][0][0]){case 1025:return i=r[1]==-1?"#REF":t.SheetNames[r[1]]||"SH33TJSERR3",r[1]==r[2]?i:i+":"+t.SheetNames[r[2]];case 14849:return t[r[0]].slice(1).map(function(o){return o.Name}).join(";;");default:return t[r[0]][0][3]?(i=r[1]==-1?"#REF":t[r[0]][0][3][r[1]]||"SH33TJSERR4",r[1]==r[2]?i:i+":"+t[r[0]][0][3][r[2]]):"SH33TJSERR2"}}function Hw(t,s,a){var r=BT(t,s,a);return r=="#REF"?r:tL(r,a)}function Jc(t,s,a,r,i){var o=i&&i.biff||8,c={s:{c:0,r:0}},u=[],f,x,h,p=0,g=0,b,N="";if(!t[0]||!t[0][0])return"";for(var y=-1,S="",C=0,T=t[0].length;C<T;++C){var _=t[0][C];switch(_[0]){case"PtgUminus":u.push("-"+u.pop());break;case"PtgUplus":u.push("+"+u.pop());break;case"PtgPercent":u.push(u.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(f=u.pop(),x=u.pop(),y>=0){switch(t[0][y][1][0]){case 0:S=Ta(" ",t[0][y][1][1]);break;case 1:S=Ta("\r",t[0][y][1][1]);break;default:if(S="",i.WTF)throw new Error("Unexpected PtgAttrSpaceType "+t[0][y][1][0])}x=x+S,y=-1}u.push(x+eL[_[0]]+f);break;case"PtgIsect":f=u.pop(),x=u.pop(),u.push(x+" "+f);break;case"PtgUnion":f=u.pop(),x=u.pop(),u.push(x+","+f);break;case"PtgRange":f=u.pop(),x=u.pop(),u.push(x+":"+f);break;case"PtgAttrChoose":break;case"PtgAttrGoto":break;case"PtgAttrIf":break;case"PtgAttrIfError":break;case"PtgRef":h=bu(_[1][1],c,i),u.push(wu(h,o));break;case"PtgRefN":h=a?bu(_[1][1],a,i):_[1][1],u.push(wu(h,o));break;case"PtgRef3d":p=_[1][1],h=bu(_[1][2],c,i),N=Hw(r,p,i),u.push(N+"!"+wu(h,o));break;case"PtgFunc":case"PtgFuncVar":var G=_[1][0],U=_[1][1];G||(G=0),G&=127;var F=G==0?[]:u.slice(-G);u.length-=G,U==="User"&&(U=F.shift()),u.push(U+"("+F.join(",")+")");break;case"PtgBool":u.push(_[1]?"TRUE":"FALSE");break;case"PtgInt":u.push(_[1]);break;case"PtgNum":u.push(String(_[1]));break;case"PtgStr":u.push('"'+_[1].replace(/"/g,'""')+'"');break;case"PtgErr":u.push(_[1]);break;case"PtgAreaN":b=Ew(_[1][1],a?{s:a}:c,i),u.push(E0(b,i));break;case"PtgArea":b=Ew(_[1][1],c,i),u.push(E0(b,i));break;case"PtgArea3d":p=_[1][1],b=_[1][2],N=Hw(r,p,i),u.push(N+"!"+E0(b,i));break;case"PtgAttrSum":u.push("SUM("+u.pop()+")");break;case"PtgAttrBaxcel":case"PtgAttrSemi":break;case"PtgName":g=_[1][2];var k=(r.names||[])[g-1]||(r[0]||[])[g],E=k?k.Name:"SH33TJSNAME"+String(g);E&&E.slice(0,6)=="_xlfn."&&!i.xlfn&&(E=E.slice(6)),u.push(E);break;case"PtgNameX":var A=_[1][1];g=_[1][2];var B;if(i.biff<=5)A<0&&(A=-A),r[A]&&(B=r[A][g]);else{var H="";if(((r[A]||[])[0]||[])[0]==14849||(((r[A]||[])[0]||[])[0]==1025?r[A][g]&&r[A][g].itab>0&&(H=r.SheetNames[r[A][g].itab-1]+"!"):H=r.SheetNames[g-1]+"!"),r[A]&&r[A][g])H+=r[A][g].Name;else if(r[0]&&r[0][g])H+=r[0][g].Name;else{var M=(BT(r,A,i)||"").split(";;");M[g-1]?H=M[g-1]:H+="SH33TJSERRX"}u.push(H);break}B||(B={Name:"SH33TJSERRY"}),u.push(B.Name);break;case"PtgParen":var q="(",L=")";if(y>=0){switch(S="",t[0][y][1][0]){case 2:q=Ta(" ",t[0][y][1][1])+q;break;case 3:q=Ta("\r",t[0][y][1][1])+q;break;case 4:L=Ta(" ",t[0][y][1][1])+L;break;case 5:L=Ta("\r",t[0][y][1][1])+L;break;default:if(i.WTF)throw new Error("Unexpected PtgAttrSpaceType "+t[0][y][1][0])}y=-1}u.push(q+u.pop()+L);break;case"PtgRefErr":u.push("#REF!");break;case"PtgRefErr3d":u.push("#REF!");break;case"PtgExp":h={c:_[1][1],r:_[1][0]};var re={c:a.c,r:a.r};if(r.sharedf[qs(h)]){var V=r.sharedf[qs(h)];u.push(Jc(V,c,re,r,i))}else{var ee=!1;for(f=0;f!=r.arrayf.length;++f)if(x=r.arrayf[f],!(h.c<x[0].s.c||h.c>x[0].e.c)&&!(h.r<x[0].s.r||h.r>x[0].e.r)){u.push(Jc(x[1],c,re,r,i)),ee=!0;break}ee||u.push(_[1])}break;case"PtgArray":u.push("{"+JI(_[1])+"}");break;case"PtgMemArea":break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":y=C;break;case"PtgTbl":break;case"PtgMemErr":break;case"PtgMissArg":u.push("");break;case"PtgAreaErr":u.push("#REF!");break;case"PtgAreaErr3d":u.push("#REF!");break;case"PtgList":u.push("Table"+_[1].idx+"[#"+_[1].rt+"]");break;case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":break;case"PtgMemFunc":break;case"PtgMemNoMem":break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");case"PtgSxName":throw new Error("Unrecognized Formula Token: "+String(_));default:throw new Error("Unrecognized Formula Token: "+String(_))}var me=["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"];if(i.biff!=3&&y>=0&&me.indexOf(t[0][C][0])==-1){_=t[0][y];var W=!0;switch(_[1][0]){case 4:W=!1;case 0:S=Ta(" ",_[1][1]);break;case 5:W=!1;case 1:S=Ta("\r",_[1][1]);break;default:if(S="",i.WTF)throw new Error("Unexpected PtgAttrSpaceType "+_[1][0])}u.push((W?S:"")+u.pop()+(W?"":S)),y=-1}}if(u.length>1&&i.WTF)throw new Error("bad formula stack");return u[0]}function sL(t){if(t==null){var s=qe(8);return s.write_shift(1,3),s.write_shift(1,0),s.write_shift(2,0),s.write_shift(2,0),s.write_shift(2,65535),s}else if(typeof t=="number")return Mo(t);return Mo(0)}function aL(t,s,a,r,i){var o=Fo(s,a,i),c=sL(t.v),u=qe(6),f=33;u.write_shift(2,f),u.write_shift(4,0);for(var x=qe(t.bf.length),h=0;h<t.bf.length;++h)x[h]=t.bf[h];var p=pr([o,c,u,x]);return p}function Qf(t,s,a){var r=t.read_shift(4),i=ZI(t,r,a),o=t.read_shift(4),c=o>0?QI(t,o,i,a):null;return[i,c]}var rL=Qf,Zf=Qf,nL=Qf,iL=Qf,lL={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},zT={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},oL={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function cL(t){var s="of:="+t.replace(Yv,"$1[.$2$3$4$5]").replace(/\]:\[/g,":");return s.replace(/;/g,"|").replace(/,/g,";")}function dL(t){return t.replace(/\./,"!")}var Su=typeof Map<"u";function Zv(t,s,a){var r=0,i=t.length;if(a){if(Su?a.has(s):Object.prototype.hasOwnProperty.call(a,s)){for(var o=Su?a.get(s):a[s];r<o.length;++r)if(t[o[r]].t===s)return t.Count++,o[r]}}else for(;r<i;++r)if(t[r].t===s)return t.Count++,r;return t[i]={t:s},t.Count++,t.Unique++,a&&(Su?(a.has(s)||a.set(s,[]),a.get(s).push(i)):(Object.prototype.hasOwnProperty.call(a,s)||(a[s]=[]),a[s].push(i))),i}function Jf(t,s){var a={min:t+1,max:t+1},r=-1;return s.MDW&&(Xi=s.MDW),s.width!=null?a.customWidth=1:s.wpx!=null?r=bf(s.wpx):s.wch!=null&&(r=s.wch),r>-1?(a.width=Rg(r),a.customWidth=1):s.width!=null&&(a.width=s.width),s.hidden&&(a.hidden=!0),s.level!=null&&(a.outlineLevel=a.level=s.level),a}function UT(t,s){if(t){var a=[.7,.7,.75,.75,.3,.3];t.left==null&&(t.left=a[0]),t.right==null&&(t.right=a[1]),t.top==null&&(t.top=a[2]),t.bottom==null&&(t.bottom=a[3]),t.header==null&&(t.header=a[4]),t.footer==null&&(t.footer=a[5])}}function Gl(t,s,a){var r=a.revssf[s.z!=null?s.z:"General"],i=60,o=t.length;if(r==null&&a.ssf){for(;i<392;++i)if(a.ssf[i]==null){FC(s.z,i),a.ssf[i]=s.z,a.revssf[s.z]=r=i;break}}for(i=0;i!=o;++i)if(t[i].numFmtId===r)return i;return t[o]={numFmtId:r,fontId:0,fillId:0,borderId:0,xfId:0,applyNumberFormat:1},o}function uL(t,s,a){if(t&&t["!ref"]){var r=oa(t["!ref"]);if(r.e.c<r.s.c||r.e.r<r.s.r)throw new Error("Bad range ("+a+"): "+t["!ref"])}}function mL(t){if(t.length===0)return"";for(var s='<mergeCells count="'+t.length+'">',a=0;a!=t.length;++a)s+='<mergeCell ref="'+Ga(t[a])+'"/>';return s+"</mergeCells>"}function hL(t,s,a,r,i){var o=!1,c={},u=null;if(r.bookType!=="xlsx"&&s.vbaraw){var f=s.SheetNames[a];try{s.Workbook&&(f=s.Workbook.Sheets[a].CodeName||f)}catch{}o=!0,c.codeName=Iu(Ws(f))}if(t&&t["!outline"]){var x={summaryBelow:1,summaryRight:1};t["!outline"].above&&(x.summaryBelow=0),t["!outline"].left&&(x.summaryRight=0),u=(u||"")+ct("outlinePr",null,x)}!o&&!u||(i[i.length]=ct("sheetPr",u,c))}var fL=["objects","scenarios","selectLockedCells","selectUnlockedCells"],xL=["formatColumns","formatRows","formatCells","insertColumns","insertRows","insertHyperlinks","deleteColumns","deleteRows","sort","autoFilter","pivotTables"];function pL(t){var s={sheet:1};return fL.forEach(function(a){t[a]!=null&&t[a]&&(s[a]="1")}),xL.forEach(function(a){t[a]!=null&&!t[a]&&(s[a]="0")}),t.password&&(s.password=ST(t.password).toString(16).toUpperCase()),ct("sheetProtection",null,s)}function gL(t){return UT(t),ct("pageMargins",null,t)}function vL(t,s){for(var a=["<cols>"],r,i=0;i!=s.length;++i)(r=s[i])&&(a[a.length]=ct("col",null,Jf(i,r)));return a[a.length]="</cols>",a.join("")}function jL(t,s,a,r){var i=typeof t.ref=="string"?t.ref:Ga(t.ref);a.Workbook||(a.Workbook={Sheets:[]}),a.Workbook.Names||(a.Workbook.Names=[]);var o=a.Workbook.Names,c=pn(i);c.s.r==c.e.r&&(c.e.r=pn(s["!ref"]).e.r,i=Ga(c));for(var u=0;u<o.length;++u){var f=o[u];if(f.Name=="_xlnm._FilterDatabase"&&f.Sheet==r){f.Ref="'"+a.SheetNames[r]+"'!"+i;break}}return u==o.length&&o.push({Name:"_xlnm._FilterDatabase",Sheet:r,Ref:"'"+a.SheetNames[r]+"'!"+i}),ct("autoFilter",null,{ref:i})}function yL(t,s,a,r){var i={workbookViewId:"0"};return(((r||{}).Workbook||{}).Views||[])[0]&&(i.rightToLeft=r.Workbook.Views[0].RTL?"1":"0"),ct("sheetViews",ct("sheetView",null,i),{})}function NL(t,s,a,r){if(t.c&&a["!comments"].push([s,t.c]),t.v===void 0&&typeof t.f!="string"||t.t==="z"&&!t.f)return"";var i="",o=t.t,c=t.v;if(t.t!=="z")switch(t.t){case"b":i=t.v?"1":"0";break;case"n":i=""+t.v;break;case"e":i=rm[t.v];break;case"d":r&&r.cellDates?i=Lr(t.v,-1).toISOString():(t=tn(t),t.t="n",i=""+(t.v=en(Lr(t.v)))),typeof t.z>"u"&&(t.z=_a[14]);break;default:i=t.v;break}var u=gr("v",Ws(i)),f={r:s},x=Gl(r.cellXfs,t,r);switch(x!==0&&(f.s=x),t.t){case"n":break;case"d":f.t="d";break;case"b":f.t="b";break;case"e":f.t="e";break;case"z":break;default:if(t.v==null){delete t.t;break}if(t.v.length>32767)throw new Error("Text length must not exceed 32767 characters");if(r&&r.bookSST){u=gr("v",""+Zv(r.Strings,t.v,r.revStrings)),f.t="s";break}f.t="str";break}if(t.t!=o&&(t.t=o,t.v=c),typeof t.f=="string"&&t.f){var h=t.F&&t.F.slice(0,s.length)==s?{t:"array",ref:t.F}:null;u=ct("f",Ws(t.f),h)+(t.v!=null?u:"")}return t.l&&a["!links"].push([s,t.l]),t.D&&(f.cm=1),ct("c",u,f)}function bL(t,s,a,r){var i=[],o=[],c=oa(t["!ref"]),u="",f,x="",h=[],p=0,g=0,b=t["!rows"],N=Array.isArray(t),y={r:x},S,C=-1;for(g=c.s.c;g<=c.e.c;++g)h[g]=Dr(g);for(p=c.s.r;p<=c.e.r;++p){for(o=[],x=jr(p),g=c.s.c;g<=c.e.c;++g){f=h[g]+x;var T=N?(t[p]||[])[g]:t[f];T!==void 0&&(u=NL(T,f,t,s))!=null&&o.push(u)}(o.length>0||b&&b[p])&&(y={r:x},b&&b[p]&&(S=b[p],S.hidden&&(y.hidden=1),C=-1,S.hpx?C=wf(S.hpx):S.hpt&&(C=S.hpt),C>-1&&(y.ht=C,y.customHeight=1),S.level&&(y.outlineLevel=S.level)),i[i.length]=ct("row",o.join(""),y))}if(b)for(;p<b.length;++p)b&&b[p]&&(y={r:p+1},S=b[p],S.hidden&&(y.hidden=1),C=-1,S.hpx?C=wf(S.hpx):S.hpt&&(C=S.hpt),C>-1&&(y.ht=C,y.customHeight=1),S.level&&(y.outlineLevel=S.level),i[i.length]=ct("row","",y));return i.join("")}function VT(t,s,a,r){var i=[Ya,ct("worksheet",null,{xmlns:cd[0],"xmlns:r":sr.r})],o=a.SheetNames[t],c=0,u="",f=a.Sheets[o];f==null&&(f={});var x=f["!ref"]||"A1",h=oa(x);if(h.e.c>16383||h.e.r>1048575){if(s.WTF)throw new Error("Range "+x+" exceeds format limit A1:XFD1048576");h.e.c=Math.min(h.e.c,16383),h.e.r=Math.min(h.e.c,1048575),x=Ga(h)}r||(r={}),f["!comments"]=[];var p=[];hL(f,a,t,s,i),i[i.length]=ct("dimension",null,{ref:x}),i[i.length]=yL(f,s,t,a),s.sheetFormat&&(i[i.length]=ct("sheetFormatPr",null,{defaultRowHeight:s.sheetFormat.defaultRowHeight||"16",baseColWidth:s.sheetFormat.baseColWidth||"10",outlineLevelRow:s.sheetFormat.outlineLevelRow||"7"})),f["!cols"]!=null&&f["!cols"].length>0&&(i[i.length]=vL(f,f["!cols"])),i[c=i.length]="<sheetData/>",f["!links"]=[],f["!ref"]!=null&&(u=bL(f,s),u.length>0&&(i[i.length]=u)),i.length>c+1&&(i[i.length]="</sheetData>",i[c]=i[c].replace("/>",">")),f["!protect"]&&(i[i.length]=pL(f["!protect"])),f["!autofilter"]!=null&&(i[i.length]=jL(f["!autofilter"],f,a,t)),f["!merges"]!=null&&f["!merges"].length>0&&(i[i.length]=mL(f["!merges"]));var g=-1,b,N=-1;return f["!links"].length>0&&(i[i.length]="<hyperlinks>",f["!links"].forEach(function(y){y[1].Target&&(b={ref:y[0]},y[1].Target.charAt(0)!="#"&&(N=Us(r,-1,Ws(y[1].Target).replace(/#.*$/,""),Os.HLINK),b["r:id"]="rId"+N),(g=y[1].Target.indexOf("#"))>-1&&(b.location=Ws(y[1].Target.slice(g+1))),y[1].Tooltip&&(b.tooltip=Ws(y[1].Tooltip)),i[i.length]=ct("hyperlink",null,b))}),i[i.length]="</hyperlinks>"),delete f["!links"],f["!margins"]!=null&&(i[i.length]=gL(f["!margins"])),(!s||s.ignoreEC||s.ignoreEC==null)&&(i[i.length]=gr("ignoredErrors",ct("ignoredError",null,{numberStoredAsText:1,sqref:x}))),p.length>0&&(N=Us(r,-1,"../drawings/drawing"+(t+1)+".xml",Os.DRAW),i[i.length]=ct("drawing",null,{"r:id":"rId"+N}),f["!drawing"]=p),f["!comments"].length>0&&(N=Us(r,-1,"../drawings/vmlDrawing"+(t+1)+".vml",Os.VML),i[i.length]=ct("legacyDrawing",null,{"r:id":"rId"+N}),f["!legacy"]=N),i.length>1&&(i[i.length]="</worksheet>",i[1]=i[1].replace("/>",">")),i.join("")}function wL(t,s){var a={},r=t.l+s;a.r=t.read_shift(4),t.l+=4;var i=t.read_shift(2);t.l+=1;var o=t.read_shift(1);return t.l=r,o&7&&(a.level=o&7),o&16&&(a.hidden=!0),o&32&&(a.hpt=i/20),a}function SL(t,s,a){var r=qe(145),i=(a["!rows"]||[])[t]||{};r.write_shift(4,t),r.write_shift(4,0);var o=320;i.hpx?o=wf(i.hpx)*20:i.hpt&&(o=i.hpt*20),r.write_shift(2,o),r.write_shift(1,0);var c=0;i.level&&(c|=i.level),i.hidden&&(c|=16),(i.hpx||i.hpt)&&(c|=32),r.write_shift(1,c),r.write_shift(1,0);var u=0,f=r.l;r.l+=4;for(var x={r:t,c:0},h=0;h<16;++h)if(!(s.s.c>h+1<<10||s.e.c<h<<10)){for(var p=-1,g=-1,b=h<<10;b<h+1<<10;++b){x.c=b;var N=Array.isArray(a)?(a[x.r]||[])[x.c]:a[qs(x)];N&&(p<0&&(p=b),g=b)}p<0||(++u,r.write_shift(4,p),r.write_shift(4,g))}var y=r.l;return r.l=f,r.write_shift(4,u),r.l=y,r.length>r.l?r.slice(0,r.l):r}function CL(t,s,a,r){var i=SL(r,a,s);(i.length>17||(s["!rows"]||[])[r])&&at(t,0,i)}var TL=Vo,kL=ud;function EL(){}function AL(t,s){var a={},r=t[t.l];return++t.l,a.above=!(r&64),a.left=!(r&128),t.l+=18,a.name=BM(t),a}function _L(t,s,a){a==null&&(a=qe(84+4*t.length));var r=192;s&&(s.above&&(r&=-65),s.left&&(r&=-129)),a.write_shift(1,r);for(var i=1;i<3;++i)a.write_shift(1,0);return jf({auto:1},a),a.write_shift(-4,-1),a.write_shift(-4,-1),aT(t,a),a.slice(0,a.l)}function DL(t){var s=Bn(t);return[s]}function OL(t,s,a){return a==null&&(a=qe(8)),Bo(s,a)}function RL(t){var s=zo(t);return[s]}function PL(t,s,a){return a==null&&(a=qe(4)),Uo(s,a)}function ML(t){var s=Bn(t),a=t.read_shift(1);return[s,a,"b"]}function FL(t,s,a){return a==null&&(a=qe(9)),Bo(s,a),a.write_shift(1,t.v?1:0),a}function IL(t){var s=zo(t),a=t.read_shift(1);return[s,a,"b"]}function LL(t,s,a){return a==null&&(a=qe(5)),Uo(s,a),a.write_shift(1,t.v?1:0),a}function BL(t){var s=Bn(t),a=t.read_shift(1);return[s,a,"e"]}function zL(t,s,a){return a==null&&(a=qe(9)),Bo(s,a),a.write_shift(1,t.v),a}function UL(t){var s=zo(t),a=t.read_shift(1);return[s,a,"e"]}function VL(t,s,a){return a==null&&(a=qe(8)),Uo(s,a),a.write_shift(1,t.v),a.write_shift(2,0),a.write_shift(1,0),a}function $L(t){var s=Bn(t),a=t.read_shift(4);return[s,a,"s"]}function HL(t,s,a){return a==null&&(a=qe(12)),Bo(s,a),a.write_shift(4,s.v),a}function WL(t){var s=zo(t),a=t.read_shift(4);return[s,a,"s"]}function GL(t,s,a){return a==null&&(a=qe(8)),Uo(s,a),a.write_shift(4,s.v),a}function qL(t){var s=Bn(t),a=md(t);return[s,a,"n"]}function KL(t,s,a){return a==null&&(a=qe(16)),Bo(s,a),Mo(t.v,a),a}function YL(t){var s=zo(t),a=md(t);return[s,a,"n"]}function XL(t,s,a){return a==null&&(a=qe(12)),Uo(s,a),Mo(t.v,a),a}function QL(t){var s=Bn(t),a=rT(t);return[s,a,"n"]}function ZL(t,s,a){return a==null&&(a=qe(12)),Bo(s,a),nT(t.v,a),a}function JL(t){var s=zo(t),a=rT(t);return[s,a,"n"]}function eB(t,s,a){return a==null&&(a=qe(8)),Uo(s,a),nT(t.v,a),a}function tB(t){var s=Bn(t),a=Hv(t);return[s,a,"is"]}function sB(t){var s=Bn(t),a=Or(t);return[s,a,"str"]}function aB(t,s,a){return a==null&&(a=qe(12+4*t.v.length)),Bo(s,a),rr(t.v,a),a.length>a.l?a.slice(0,a.l):a}function rB(t){var s=zo(t),a=Or(t);return[s,a,"str"]}function nB(t,s,a){return a==null&&(a=qe(8+4*t.v.length)),Uo(s,a),rr(t.v,a),a.length>a.l?a.slice(0,a.l):a}function iB(t,s,a){var r=t.l+s,i=Bn(t);i.r=a["!row"];var o=t.read_shift(1),c=[i,o,"b"];if(a.cellFormula){t.l+=2;var u=Zf(t,r-t.l,a);c[3]=Jc(u,null,i,a.supbooks,a)}else t.l=r;return c}function lB(t,s,a){var r=t.l+s,i=Bn(t);i.r=a["!row"];var o=t.read_shift(1),c=[i,o,"e"];if(a.cellFormula){t.l+=2;var u=Zf(t,r-t.l,a);c[3]=Jc(u,null,i,a.supbooks,a)}else t.l=r;return c}function oB(t,s,a){var r=t.l+s,i=Bn(t);i.r=a["!row"];var o=md(t),c=[i,o,"n"];if(a.cellFormula){t.l+=2;var u=Zf(t,r-t.l,a);c[3]=Jc(u,null,i,a.supbooks,a)}else t.l=r;return c}function cB(t,s,a){var r=t.l+s,i=Bn(t);i.r=a["!row"];var o=Or(t),c=[i,o,"str"];if(a.cellFormula){t.l+=2;var u=Zf(t,r-t.l,a);c[3]=Jc(u,null,i,a.supbooks,a)}else t.l=r;return c}var dB=Vo,uB=ud;function mB(t,s){return s==null&&(s=qe(4)),s.write_shift(4,t),s}function hB(t,s){var a=t.l+s,r=Vo(t),i=Wv(t),o=Or(t),c=Or(t),u=Or(t);t.l=a;var f={rfx:r,relId:i,loc:o,display:u};return c&&(f.Tooltip=c),f}function fB(t,s){var a=qe(50+4*(t[1].Target.length+(t[1].Tooltip||"").length));ud({s:ar(t[0]),e:ar(t[0])},a),Gv("rId"+s,a);var r=t[1].Target.indexOf("#"),i=r==-1?"":t[1].Target.slice(r+1);return rr(i||"",a),rr(t[1].Tooltip||"",a),rr("",a),a.slice(0,a.l)}function xB(){}function pB(t,s,a){var r=t.l+s,i=iT(t),o=t.read_shift(1),c=[i];if(c[2]=o,a.cellFormula){var u=rL(t,r-t.l,a);c[1]=u}else t.l=r;return c}function gB(t,s,a){var r=t.l+s,i=Vo(t),o=[i];if(a.cellFormula){var c=iL(t,r-t.l,a);o[1]=c,t.l=r}else t.l=r;return o}function vB(t,s,a){a==null&&(a=qe(18));var r=Jf(t,s);a.write_shift(-4,t),a.write_shift(-4,t),a.write_shift(4,(r.width||10)*256),a.write_shift(4,0);var i=0;return s.hidden&&(i|=1),typeof r.width=="number"&&(i|=2),s.level&&(i|=s.level<<8),a.write_shift(2,i),a}var $T=["left","right","top","bottom","header","footer"];function jB(t){var s={};return $T.forEach(function(a){s[a]=md(t)}),s}function yB(t,s){return s==null&&(s=qe(48)),UT(t),$T.forEach(function(a){Mo(t[a],s)}),s}function NB(t){var s=t.read_shift(2);return t.l+=28,{RTL:s&32}}function bB(t,s,a){a==null&&(a=qe(30));var r=924;return(((s||{}).Views||[])[0]||{}).RTL&&(r|=32),a.write_shift(2,r),a.write_shift(4,0),a.write_shift(4,0),a.write_shift(4,0),a.write_shift(1,0),a.write_shift(1,0),a.write_shift(2,0),a.write_shift(2,100),a.write_shift(2,0),a.write_shift(2,0),a.write_shift(2,0),a.write_shift(4,0),a}function wB(t){var s=qe(24);return s.write_shift(4,4),s.write_shift(4,1),ud(t,s),s}function SB(t,s){return s==null&&(s=qe(66)),s.write_shift(2,t.password?ST(t.password):0),s.write_shift(4,1),[["objects",!1],["scenarios",!1],["formatCells",!0],["formatColumns",!0],["formatRows",!0],["insertColumns",!0],["insertRows",!0],["insertHyperlinks",!0],["deleteColumns",!0],["deleteRows",!0],["selectLockedCells",!1],["sort",!0],["autoFilter",!0],["pivotTables",!0],["selectUnlockedCells",!1]].forEach(function(a){a[1]?s.write_shift(4,t[a[0]]!=null&&!t[a[0]]?1:0):s.write_shift(4,t[a[0]]!=null&&t[a[0]]?0:1)}),s}function CB(){}function TB(){}function kB(t,s,a,r,i,o,c){if(s.v===void 0)return!1;var u="";switch(s.t){case"b":u=s.v?"1":"0";break;case"d":s=tn(s),s.z=s.z||_a[14],s.v=en(Lr(s.v)),s.t="n";break;case"n":case"e":u=""+s.v;break;default:u=s.v;break}var f={r:a,c:r};switch(f.s=Gl(i.cellXfs,s,i),s.l&&o["!links"].push([qs(f),s.l]),s.c&&o["!comments"].push([qs(f),s.c]),s.t){case"s":case"str":return i.bookSST?(u=Zv(i.Strings,s.v,i.revStrings),f.t="s",f.v=u,c?at(t,18,GL(s,f)):at(t,7,HL(s,f))):(f.t="str",c?at(t,17,nB(s,f)):at(t,6,aB(s,f))),!0;case"n":return s.v==(s.v|0)&&s.v>-1e3&&s.v<1e3?c?at(t,13,eB(s,f)):at(t,2,ZL(s,f)):c?at(t,16,XL(s,f)):at(t,5,KL(s,f)),!0;case"b":return f.t="b",c?at(t,15,LL(s,f)):at(t,4,FL(s,f)),!0;case"e":return f.t="e",c?at(t,14,VL(s,f)):at(t,3,zL(s,f)),!0}return c?at(t,12,PL(s,f)):at(t,1,OL(s,f)),!0}function EB(t,s,a,r){var i=oa(s["!ref"]||"A1"),o,c="",u=[];at(t,145);var f=Array.isArray(s),x=i.e.r;s["!rows"]&&(x=Math.max(i.e.r,s["!rows"].length-1));for(var h=i.s.r;h<=x;++h){c=jr(h),CL(t,s,i,h);var p=!1;if(h<=i.e.r)for(var g=i.s.c;g<=i.e.c;++g){h===i.s.r&&(u[g]=Dr(g)),o=u[g]+c;var b=f?(s[h]||[])[g]:s[o];if(!b){p=!1;continue}p=kB(t,b,h,g,r,s,p)}}at(t,146)}function AB(t,s){!s||!s["!merges"]||(at(t,177,mB(s["!merges"].length)),s["!merges"].forEach(function(a){at(t,176,uB(a))}),at(t,178))}function _B(t,s){!s||!s["!cols"]||(at(t,390),s["!cols"].forEach(function(a,r){a&&at(t,60,vB(r,a))}),at(t,391))}function DB(t,s){!s||!s["!ref"]||(at(t,648),at(t,649,wB(oa(s["!ref"]))),at(t,650))}function OB(t,s,a){s["!links"].forEach(function(r){if(r[1].Target){var i=Us(a,-1,r[1].Target.replace(/#.*$/,""),Os.HLINK);at(t,494,fB(r,i))}}),delete s["!links"]}function RB(t,s,a,r){if(s["!comments"].length>0){var i=Us(r,-1,"../drawings/vmlDrawing"+(a+1)+".vml",Os.VML);at(t,551,Gv("rId"+i)),s["!legacy"]=i}}function PB(t,s,a,r){if(s["!autofilter"]){var i=s["!autofilter"],o=typeof i.ref=="string"?i.ref:Ga(i.ref);a.Workbook||(a.Workbook={Sheets:[]}),a.Workbook.Names||(a.Workbook.Names=[]);var c=a.Workbook.Names,u=pn(o);u.s.r==u.e.r&&(u.e.r=pn(s["!ref"]).e.r,o=Ga(u));for(var f=0;f<c.length;++f){var x=c[f];if(x.Name=="_xlnm._FilterDatabase"&&x.Sheet==r){x.Ref="'"+a.SheetNames[r]+"'!"+o;break}}f==c.length&&c.push({Name:"_xlnm._FilterDatabase",Sheet:r,Ref:"'"+a.SheetNames[r]+"'!"+o}),at(t,161,ud(oa(o))),at(t,162)}}function MB(t,s,a){at(t,133),at(t,137,bB(s,a)),at(t,138),at(t,134)}function FB(t,s){s["!protect"]&&at(t,535,SB(s["!protect"]))}function IB(t,s,a,r){var i=Jr(),o=a.SheetNames[t],c=a.Sheets[o]||{},u=o;try{a&&a.Workbook&&(u=a.Workbook.Sheets[t].CodeName||u)}catch{}var f=oa(c["!ref"]||"A1");if(f.e.c>16383||f.e.r>1048575){if(s.WTF)throw new Error("Range "+(c["!ref"]||"A1")+" exceeds format limit A1:XFD1048576");f.e.c=Math.min(f.e.c,16383),f.e.r=Math.min(f.e.c,1048575)}return c["!links"]=[],c["!comments"]=[],at(i,129),(a.vbaraw||c["!outline"])&&at(i,147,_L(u,c["!outline"])),at(i,148,kL(f)),MB(i,c,a.Workbook),_B(i,c),EB(i,c,t,s),FB(i,c),PB(i,c,a,t),AB(i,c),OB(i,c,r),c["!margins"]&&at(i,476,yB(c["!margins"])),(!s||s.ignoreEC||s.ignoreEC==null)&&DB(i,c),RB(i,c,t,r),at(i,130),i.end()}function LB(t,s){t.l+=10;var a=Or(t);return{name:a}}var BB=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]];function zB(t){return!t.Workbook||!t.Workbook.WBProps?"false":gM(t.Workbook.WBProps.date1904)?"true":"false"}var UB="][*?/\\".split("");function HT(t,s){if(t.length>31)throw new Error("Sheet names cannot exceed 31 chars");var a=!0;return UB.forEach(function(r){if(t.indexOf(r)!=-1)throw new Error("Sheet name cannot contain : \\ / ? * [ ]")}),a}function VB(t,s,a){t.forEach(function(r,i){HT(r);for(var o=0;o<i;++o)if(r==t[o])throw new Error("Duplicate Sheet Name: "+r);if(a){var c=s&&s[i]&&s[i].CodeName||r;if(c.charCodeAt(0)==95&&c.length>22)throw new Error("Bad Code Name: Worksheet"+c)}})}function $B(t){if(!t||!t.SheetNames||!t.Sheets)throw new Error("Invalid Workbook");if(!t.SheetNames.length)throw new Error("Workbook is empty");var s=t.Workbook&&t.Workbook.Sheets||[];VB(t.SheetNames,s,!!t.vbaraw);for(var a=0;a<t.SheetNames.length;++a)uL(t.Sheets[t.SheetNames[a]],t.SheetNames[a],a)}function WT(t){var s=[Ya];s[s.length]=ct("workbook",null,{xmlns:cd[0],"xmlns:r":sr.r});var a=t.Workbook&&(t.Workbook.Names||[]).length>0,r={codeName:"ThisWorkbook"};t.Workbook&&t.Workbook.WBProps&&(BB.forEach(function(u){t.Workbook.WBProps[u[0]]!=null&&t.Workbook.WBProps[u[0]]!=u[1]&&(r[u[0]]=t.Workbook.WBProps[u[0]])}),t.Workbook.WBProps.CodeName&&(r.codeName=t.Workbook.WBProps.CodeName,delete r.CodeName)),s[s.length]=ct("workbookPr",null,r);var i=t.Workbook&&t.Workbook.Sheets||[],o=0;if(i&&i[0]&&i[0].Hidden){for(s[s.length]="<bookViews>",o=0;o!=t.SheetNames.length&&!(!i[o]||!i[o].Hidden);++o);o==t.SheetNames.length&&(o=0),s[s.length]='<workbookView firstSheet="'+o+'" activeTab="'+o+'"/>',s[s.length]="</bookViews>"}for(s[s.length]="<sheets>",o=0;o!=t.SheetNames.length;++o){var c={name:Ws(t.SheetNames[o].slice(0,31))};if(c.sheetId=""+(o+1),c["r:id"]="rId"+(o+1),i[o])switch(i[o].Hidden){case 1:c.state="hidden";break;case 2:c.state="veryHidden";break}s[s.length]=ct("sheet",null,c)}return s[s.length]="</sheets>",a&&(s[s.length]="<definedNames>",t.Workbook&&t.Workbook.Names&&t.Workbook.Names.forEach(function(u){var f={name:u.Name};u.Comment&&(f.comment=u.Comment),u.Sheet!=null&&(f.localSheetId=""+u.Sheet),u.Hidden&&(f.hidden="1"),u.Ref&&(s[s.length]=ct("definedName",Ws(u.Ref),f))}),s[s.length]="</definedNames>"),s.length>2&&(s[s.length]="</workbook>",s[1]=s[1].replace("/>",">")),s.join("")}function HB(t,s){var a={};return a.Hidden=t.read_shift(4),a.iTabID=t.read_shift(4),a.strRelID=Og(t),a.name=Or(t),a}function WB(t,s){return s||(s=qe(127)),s.write_shift(4,t.Hidden),s.write_shift(4,t.iTabID),Gv(t.strRelID,s),rr(t.name.slice(0,31),s),s.length>s.l?s.slice(0,s.l):s}function GB(t,s){var a={},r=t.read_shift(4);a.defaultThemeVersion=t.read_shift(4);var i=s>8?Or(t):"";return i.length>0&&(a.CodeName=i),a.autoCompressPictures=!!(r&65536),a.backupFile=!!(r&64),a.checkCompatibility=!!(r&4096),a.date1904=!!(r&1),a.filterPrivacy=!!(r&8),a.hidePivotFieldList=!!(r&1024),a.promptedSolutions=!!(r&16),a.publishItems=!!(r&2048),a.refreshAllConnections=!!(r&262144),a.saveExternalLinkValues=!!(r&128),a.showBorderUnselectedTables=!!(r&4),a.showInkAnnotation=!!(r&32),a.showObjects=["all","placeholders","none"][r>>13&3],a.showPivotChartFilter=!!(r&32768),a.updateLinks=["userSet","never","always"][r>>8&3],a}function qB(t,s){s||(s=qe(72));var a=0;return t&&t.filterPrivacy&&(a|=8),s.write_shift(4,a),s.write_shift(4,0),aT(t&&t.CodeName||"ThisWorkbook",s),s.slice(0,s.l)}function KB(t,s,a){var r=t.l+s;t.l+=4,t.l+=1;var i=t.read_shift(4),o=zM(t),c=nL(t,0,a),u=Wv(t);t.l=r;var f={Name:o,Ptg:c};return i<268435455&&(f.Sheet=i),u&&(f.Comment=u),f}function YB(t,s){at(t,143);for(var a=0;a!=s.SheetNames.length;++a){var r=s.Workbook&&s.Workbook.Sheets&&s.Workbook.Sheets[a]&&s.Workbook.Sheets[a].Hidden||0,i={Hidden:r,iTabID:a+1,strRelID:"rId"+(a+1),name:s.SheetNames[a]};at(t,156,WB(i))}at(t,144)}function XB(t,s){s||(s=qe(127));for(var a=0;a!=4;++a)s.write_shift(4,0);return rr("SheetJS",s),rr(uf.version,s),rr(uf.version,s),rr("7262",s),s.length>s.l?s.slice(0,s.l):s}function QB(t,s){s||(s=qe(29)),s.write_shift(-4,0),s.write_shift(-4,460),s.write_shift(4,28800),s.write_shift(4,17600),s.write_shift(4,500),s.write_shift(4,t),s.write_shift(4,t);var a=120;return s.write_shift(1,a),s.length>s.l?s.slice(0,s.l):s}function ZB(t,s){if(!(!s.Workbook||!s.Workbook.Sheets)){for(var a=s.Workbook.Sheets,r=0,i=-1,o=-1;r<a.length;++r)!a[r]||!a[r].Hidden&&i==-1?i=r:a[r].Hidden==1&&o==-1&&(o=r);o>i||(at(t,135),at(t,158,QB(i)),at(t,136))}}function JB(t,s){var a=Jr();return at(a,131),at(a,128,XB()),at(a,153,qB(t.Workbook&&t.Workbook.WBProps||null)),ZB(a,t),YB(a,t),at(a,132),a.end()}function e7(t,s,a){return(s.slice(-4)===".bin"?JB:WT)(t)}function t7(t,s,a,r,i){return(s.slice(-4)===".bin"?IB:VT)(t,a,r,i)}function s7(t,s,a){return(s.slice(-4)===".bin"?yF:kT)(t,a)}function a7(t,s,a){return(s.slice(-4)===".bin"?q8:wT)(t,a)}function r7(t,s,a){return(s.slice(-4)===".bin"?FF:OT)(t)}function n7(t){return(t.slice(-4)===".bin"?EF:_T)()}function i7(t,s){var a=[];return t.Props&&a.push(s8(t.Props,s)),t.Custprops&&a.push(a8(t.Props,t.Custprops)),a.join("")}function l7(){return""}function o7(t,s){var a=['<Style ss:ID="Default" ss:Name="Normal"><NumberFormat/></Style>'];return s.cellXfs.forEach(function(r,i){var o=[];o.push(ct("NumberFormat",null,{"ss:Format":Ws(_a[r.numFmtId])}));var c={"ss:ID":"s"+(21+i)};a.push(ct("Style",o.join(""),c))}),ct("Styles",a.join(""))}function GT(t){return ct("NamedRange",null,{"ss:Name":t.Name,"ss:RefersTo":"="+Xv(t.Ref,{r:0,c:0})})}function c7(t){if(!((t||{}).Workbook||{}).Names)return"";for(var s=t.Workbook.Names,a=[],r=0;r<s.length;++r){var i=s[r];i.Sheet==null&&(i.Name.match(/^_xlfn\./)||a.push(GT(i)))}return ct("Names",a.join(""))}function d7(t,s,a,r){if(!t||!((r||{}).Workbook||{}).Names)return"";for(var i=r.Workbook.Names,o=[],c=0;c<i.length;++c){var u=i[c];u.Sheet==a&&(u.Name.match(/^_xlfn\./)||o.push(GT(u)))}return o.join("")}function u7(t,s,a,r){if(!t)return"";var i=[];if(t["!margins"]&&(i.push("<PageSetup>"),t["!margins"].header&&i.push(ct("Header",null,{"x:Margin":t["!margins"].header})),t["!margins"].footer&&i.push(ct("Footer",null,{"x:Margin":t["!margins"].footer})),i.push(ct("PageMargins",null,{"x:Bottom":t["!margins"].bottom||"0.75","x:Left":t["!margins"].left||"0.7","x:Right":t["!margins"].right||"0.7","x:Top":t["!margins"].top||"0.75"})),i.push("</PageSetup>")),r&&r.Workbook&&r.Workbook.Sheets&&r.Workbook.Sheets[a])if(r.Workbook.Sheets[a].Hidden)i.push(ct("Visible",r.Workbook.Sheets[a].Hidden==1?"SheetHidden":"SheetVeryHidden",{}));else{for(var o=0;o<a&&!(r.Workbook.Sheets[o]&&!r.Workbook.Sheets[o].Hidden);++o);o==a&&i.push("<Selected/>")}return((((r||{}).Workbook||{}).Views||[])[0]||{}).RTL&&i.push("<DisplayRightToLeft/>"),t["!protect"]&&(i.push(gr("ProtectContents","True")),t["!protect"].objects&&i.push(gr("ProtectObjects","True")),t["!protect"].scenarios&&i.push(gr("ProtectScenarios","True")),t["!protect"].selectLockedCells!=null&&!t["!protect"].selectLockedCells?i.push(gr("EnableSelection","NoSelection")):t["!protect"].selectUnlockedCells!=null&&!t["!protect"].selectUnlockedCells&&i.push(gr("EnableSelection","UnlockedCells")),[["formatCells","AllowFormatCells"],["formatColumns","AllowSizeCols"],["formatRows","AllowSizeRows"],["insertColumns","AllowInsertCols"],["insertRows","AllowInsertRows"],["insertHyperlinks","AllowInsertHyperlinks"],["deleteColumns","AllowDeleteCols"],["deleteRows","AllowDeleteRows"],["sort","AllowSort"],["autoFilter","AllowFilter"],["pivotTables","AllowUsePivotTables"]].forEach(function(c){t["!protect"][c[0]]&&i.push("<"+c[1]+"/>")})),i.length==0?"":ct("WorksheetOptions",i.join(""),{xmlns:fn.x})}function m7(t){return t.map(function(s){var a=pM(s.t||""),r=ct("ss:Data",a,{xmlns:"http://www.w3.org/TR/REC-html40"});return ct("Comment",r,{"ss:Author":s.a})}).join("")}function h7(t,s,a,r,i,o,c){if(!t||t.v==null&&t.f==null)return"";var u={};if(t.f&&(u["ss:Formula"]="="+Ws(Xv(t.f,c))),t.F&&t.F.slice(0,s.length)==s){var f=ar(t.F.slice(s.length+1));u["ss:ArrayRange"]="RC:R"+(f.r==c.r?"":"["+(f.r-c.r)+"]")+"C"+(f.c==c.c?"":"["+(f.c-c.c)+"]")}if(t.l&&t.l.Target&&(u["ss:HRef"]=Ws(t.l.Target),t.l.Tooltip&&(u["x:HRefScreenTip"]=Ws(t.l.Tooltip))),a["!merges"])for(var x=a["!merges"],h=0;h!=x.length;++h)x[h].s.c!=c.c||x[h].s.r!=c.r||(x[h].e.c>x[h].s.c&&(u["ss:MergeAcross"]=x[h].e.c-x[h].s.c),x[h].e.r>x[h].s.r&&(u["ss:MergeDown"]=x[h].e.r-x[h].s.r));var p="",g="";switch(t.t){case"z":if(!r.sheetStubs)return"";break;case"n":p="Number",g=String(t.v);break;case"b":p="Boolean",g=t.v?"1":"0";break;case"e":p="Error",g=rm[t.v];break;case"d":p="DateTime",g=new Date(t.v).toISOString(),t.z==null&&(t.z=t.z||_a[14]);break;case"s":p="String",g=xM(t.v||"");break}var b=Gl(r.cellXfs,t,r);u["ss:StyleID"]="s"+(21+b),u["ss:Index"]=c.c+1;var N=t.v!=null?g:"",y=t.t=="z"?"":'<Data ss:Type="'+p+'">'+N+"</Data>";return(t.c||[]).length>0&&(y+=m7(t.c)),ct("Cell",y,u)}function f7(t,s){var a='<Row ss:Index="'+(t+1)+'"';return s&&(s.hpt&&!s.hpx&&(s.hpx=TT(s.hpt)),s.hpx&&(a+=' ss:AutoFitHeight="0" ss:Height="'+s.hpx+'"'),s.hidden&&(a+=' ss:Hidden="1"')),a+">"}function x7(t,s,a,r){if(!t["!ref"])return"";var i=oa(t["!ref"]),o=t["!merges"]||[],c=0,u=[];t["!cols"]&&t["!cols"].forEach(function(S,C){Kv(S);var T=!!S.width,_=Jf(C,S),G={"ss:Index":C+1};T&&(G["ss:Width"]=Nf(_.width)),S.hidden&&(G["ss:Hidden"]="1"),u.push(ct("Column",null,G))});for(var f=Array.isArray(t),x=i.s.r;x<=i.e.r;++x){for(var h=[f7(x,(t["!rows"]||[])[x])],p=i.s.c;p<=i.e.c;++p){var g=!1;for(c=0;c!=o.length;++c)if(!(o[c].s.c>p)&&!(o[c].s.r>x)&&!(o[c].e.c<p)&&!(o[c].e.r<x)){(o[c].s.c!=p||o[c].s.r!=x)&&(g=!0);break}if(!g){var b={r:x,c:p},N=qs(b),y=f?(t[x]||[])[p]:t[N];h.push(h7(y,N,t,s,a,r,b))}}h.push("</Row>"),h.length>2&&u.push(h.join(""))}return u.join("")}function p7(t,s,a){var r=[],i=a.SheetNames[t],o=a.Sheets[i],c=o?d7(o,s,t,a):"";return c.length>0&&r.push("<Names>"+c+"</Names>"),c=o?x7(o,s,t,a):"",c.length>0&&r.push("<Table>"+c+"</Table>"),r.push(u7(o,s,t,a)),r.join("")}function g7(t,s){s||(s={}),t.SSF||(t.SSF=tn(_a)),t.SSF&&(Kf(),qf(t.SSF),s.revssf=Yf(t.SSF),s.revssf[t.SSF[65535]]=0,s.ssf=t.SSF,s.cellXfs=[],Gl(s.cellXfs,{},{revssf:{General:0}}));var a=[];a.push(i7(t,s)),a.push(l7()),a.push(""),a.push("");for(var r=0;r<t.SheetNames.length;++r)a.push(ct("Worksheet",p7(r,s,t),{"ss:Name":Ws(t.SheetNames[r])}));return a[2]=o7(t,s),a[3]=c7(t),Ya+ct("Workbook",a.join(""),{xmlns:fn.ss,"xmlns:o":fn.o,"xmlns:x":fn.x,"xmlns:ss":fn.ss,"xmlns:dt":fn.dt,"xmlns:html":fn.html})}var D0={SI:"e0859ff2f94f6810ab9108002b27b3d9",DSI:"02d5cdd59c2e1b10939708002b2cf9ae",UDI:"05d5cdd59c2e1b10939708002b2cf9ae"};function v7(t,s){var a=[],r=[],i=[],o=0,c,u=gw(_w,"n"),f=gw(Dw,"n");if(t.Props)for(c=Nr(t.Props),o=0;o<c.length;++o)(Object.prototype.hasOwnProperty.call(u,c[o])?a:Object.prototype.hasOwnProperty.call(f,c[o])?r:i).push([c[o],t.Props[c[o]]]);if(t.Custprops)for(c=Nr(t.Custprops),o=0;o<c.length;++o)Object.prototype.hasOwnProperty.call(t.Props||{},c[o])||(Object.prototype.hasOwnProperty.call(u,c[o])?a:Object.prototype.hasOwnProperty.call(f,c[o])?r:i).push([c[o],t.Custprops[c[o]]]);var x=[];for(o=0;o<i.length;++o)pT.indexOf(i[o][0])>-1||hT.indexOf(i[o][0])>-1||i[o][1]!=null&&x.push(i[o]);r.length&&Qs.utils.cfb_add(s,"/SummaryInformation",Fw(r,D0.SI,f,Dw)),(a.length||x.length)&&Qs.utils.cfb_add(s,"/DocumentSummaryInformation",Fw(a,D0.DSI,u,_w,x.length?x:null,D0.UDI))}function j7(t,s){var a=s||{},r=Qs.utils.cfb_new({root:"R"}),i="/Workbook";switch(a.bookType||"xls"){case"xls":a.bookType="biff8";case"xla":a.bookType||(a.bookType="xla");case"biff8":i="/Workbook",a.biff=8;break;case"biff5":i="/Book",a.biff=5;break;default:throw new Error("invalid type "+a.bookType+" for XLS CFB")}return Qs.utils.cfb_add(r,i,qT(t,a)),a.biff==8&&(t.Props||t.Custprops)&&v7(t,r),a.biff==8&&t.vbaraw&&IF(r,Qs.read(t.vbaraw,{type:typeof t.vbaraw=="string"?"binary":"buffer"})),r}var y7={0:{f:wL},1:{f:DL},2:{f:QL},3:{f:BL},4:{f:ML},5:{f:qL},6:{f:sB},7:{f:$L},8:{f:cB},9:{f:oB},10:{f:iB},11:{f:lB},12:{f:RL},13:{f:JL},14:{f:UL},15:{f:IL},16:{f:YL},17:{f:rB},18:{f:WL},19:{f:Hv},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:KB},40:{},42:{},43:{f:sF},44:{f:eF},45:{f:nF},46:{f:lF},47:{f:iF},48:{},49:{f:RM},50:{},51:{f:wF},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:P8},62:{f:tB},63:{f:AF},64:{f:CB},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:bi,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:NB},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:AL},148:{f:TL,p:16},151:{f:xB},152:{},153:{f:GB},154:{},155:{},156:{f:HB},157:{},158:{},159:{T:1,f:H8},160:{T:-1},161:{T:1,f:Vo},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:dB},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:NF},336:{T:-1},337:{f:TF,T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:Og},357:{},358:{},359:{},360:{T:1},361:{},362:{f:E8},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:pB},427:{f:gB},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:jB},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:EL},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:hB},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:Og},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:PF},633:{T:1},634:{T:-1},635:{T:1,f:OF},636:{T:-1},637:{f:IM},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:LB},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:TB},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}};function dt(t,s,a,r){var i=s;if(!isNaN(i)){var o=r||(a||[]).length||0,c=t.next(4);c.write_shift(2,i),c.write_shift(2,o),o>0&&Uv(a)&&t.push(a)}}function N7(t,s,a,r){var i=(a||[]).length||0;if(i<=8224)return dt(t,s,a,i);var o=s;if(!isNaN(o)){for(var c=a.parts||[],u=0,f=0,x=0;x+(c[u]||8224)<=8224;)x+=c[u]||8224,u++;var h=t.next(4);for(h.write_shift(2,o),h.write_shift(2,x),t.push(a.slice(f,f+x)),f+=x;f<i;){for(h=t.next(4),h.write_shift(2,60),x=0;x+(c[u]||8224)<=8224;)x+=c[u]||8224,u++;h.write_shift(2,x),t.push(a.slice(f,f+x)),f+=x}}}function im(t,s,a){return t||(t=qe(7)),t.write_shift(2,s),t.write_shift(2,a),t.write_shift(2,0),t.write_shift(1,0),t}function b7(t,s,a,r){var i=qe(9);return im(i,t,s),vT(a,r||"b",i),i}function w7(t,s,a){var r=qe(8+2*a.length);return im(r,t,s),r.write_shift(1,a.length),r.write_shift(a.length,a,"sbcs"),r.l<r.length?r.slice(0,r.l):r}function S7(t,s,a,r){if(s.v!=null)switch(s.t){case"d":case"n":var i=s.t=="d"?en(Lr(s.v)):s.v;i==(i|0)&&i>=0&&i<65536?dt(t,2,L8(a,r,i)):dt(t,3,I8(a,r,i));return;case"b":case"e":dt(t,5,b7(a,r,s.v,s.t));return;case"s":case"str":dt(t,4,w7(a,r,(s.v||"").slice(0,255)));return}dt(t,1,im(null,a,r))}function C7(t,s,a,r){var i=Array.isArray(s),o=oa(s["!ref"]||"A1"),c,u="",f=[];if(o.e.c>255||o.e.r>16383){if(r.WTF)throw new Error("Range "+(s["!ref"]||"A1")+" exceeds format limit A1:IV16384");o.e.c=Math.min(o.e.c,255),o.e.r=Math.min(o.e.c,16383),c=Ga(o)}for(var x=o.s.r;x<=o.e.r;++x){u=jr(x);for(var h=o.s.c;h<=o.e.c;++h){x===o.s.r&&(f[h]=Dr(h)),c=f[h]+u;var p=i?(s[x]||[])[h]:s[c];p&&S7(t,p,x,h)}}}function T7(t,s){for(var a=s||{},r=Jr(),i=0,o=0;o<t.SheetNames.length;++o)t.SheetNames[o]==a.sheet&&(i=o);if(i==0&&a.sheet&&t.SheetNames[0]!=a.sheet)throw new Error("Sheet not found: "+a.sheet);return dt(r,a.biff==4?1033:a.biff==3?521:9,qv(t,16,a)),C7(r,t.Sheets[t.SheetNames[i]],i,a),dt(r,10),r.end()}function k7(t,s,a){dt(t,49,y8({sz:12,name:"Arial"},a))}function E7(t,s,a){s&&[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var i=r[0];i<=r[1];++i)s[i]!=null&&dt(t,1054,w8(i,s[i],a))})}function A7(t,s){var a=qe(19);a.write_shift(4,2151),a.write_shift(4,0),a.write_shift(4,0),a.write_shift(2,3),a.write_shift(1,1),a.write_shift(4,0),dt(t,2151,a),a=qe(39),a.write_shift(4,2152),a.write_shift(4,0),a.write_shift(4,0),a.write_shift(2,3),a.write_shift(1,0),a.write_shift(4,0),a.write_shift(2,1),a.write_shift(4,4),a.write_shift(2,0),NT(oa(s["!ref"]||"A1"),a),a.write_shift(4,4),dt(t,2152,a)}function _7(t,s){for(var a=0;a<16;++a)dt(t,224,Lw({numFmtId:0,style:!0},0,s));s.cellXfs.forEach(function(r){dt(t,224,Lw(r,0,s))})}function D7(t,s){for(var a=0;a<s["!links"].length;++a){var r=s["!links"][a];dt(t,440,D8(r)),r[1].Tooltip&&dt(t,2048,O8(r))}delete s["!links"]}function O7(t,s){if(s){var a=0;s.forEach(function(r,i){++a<=256&&r&&dt(t,125,M8(Jf(i,r),i))})}}function R7(t,s,a,r,i){var o=16+Gl(i.cellXfs,s,i);if(s.v==null&&!s.bf){dt(t,513,Fo(a,r,o));return}if(s.bf)dt(t,6,aL(s,a,r,i,o));else switch(s.t){case"d":case"n":var c=s.t=="d"?en(Lr(s.v)):s.v;dt(t,515,k8(a,r,c,o));break;case"b":case"e":dt(t,517,T8(a,r,s.v,o,i,s.t));break;case"s":case"str":if(i.bookSST){var u=Zv(i.Strings,s.v,i.revStrings);dt(t,253,N8(a,r,u,o))}else dt(t,516,b8(a,r,(s.v||"").slice(0,255),o,i));break;default:dt(t,513,Fo(a,r,o))}}function P7(t,s,a){var r=Jr(),i=a.SheetNames[t],o=a.Sheets[i]||{},c=(a||{}).Workbook||{},u=(c.Sheets||[])[t]||{},f=Array.isArray(o),x=s.biff==8,h,p="",g=[],b=oa(o["!ref"]||"A1"),N=x?65536:16384;if(b.e.c>255||b.e.r>=N){if(s.WTF)throw new Error("Range "+(o["!ref"]||"A1")+" exceeds format limit A1:IV16384");b.e.c=Math.min(b.e.c,255),b.e.r=Math.min(b.e.c,N-1)}dt(r,2057,qv(a,16,s)),dt(r,13,On(1)),dt(r,12,On(100)),dt(r,15,Mr(!0)),dt(r,17,Mr(!1)),dt(r,16,Mo(.001)),dt(r,95,Mr(!0)),dt(r,42,Mr(!1)),dt(r,43,Mr(!1)),dt(r,130,On(1)),dt(r,128,C8()),dt(r,131,Mr(!1)),dt(r,132,Mr(!1)),x&&O7(r,o["!cols"]),dt(r,512,S8(b,s)),x&&(o["!links"]=[]);for(var y=b.s.r;y<=b.e.r;++y){p=jr(y);for(var S=b.s.c;S<=b.e.c;++S){y===b.s.r&&(g[S]=Dr(S)),h=g[S]+p;var C=f?(o[y]||[])[S]:o[h];C&&(R7(r,C,y,S,s),x&&C.l&&o["!links"].push([h,C.l]))}}var T=u.CodeName||u.name||i;return x&&dt(r,574,j8((c.Views||[])[0])),x&&(o["!merges"]||[]).length&&dt(r,229,_8(o["!merges"])),x&&D7(r,o),dt(r,442,yT(T)),x&&A7(r,o),dt(r,10),r.end()}function M7(t,s,a){var r=Jr(),i=(t||{}).Workbook||{},o=i.Sheets||[],c=i.WBProps||{},u=a.biff==8,f=a.biff==5;if(dt(r,2057,qv(t,5,a)),a.bookType=="xla"&&dt(r,135),dt(r,225,u?On(1200):null),dt(r,193,i8(2)),f&&dt(r,191),f&&dt(r,192),dt(r,226),dt(r,92,x8("SheetJS",a)),dt(r,66,On(u?1200:1252)),u&&dt(r,353,On(0)),u&&dt(r,448),dt(r,317,F8(t.SheetNames.length)),u&&t.vbaraw&&dt(r,211),u&&t.vbaraw){var x=c.CodeName||"ThisWorkbook";dt(r,442,yT(x))}dt(r,156,On(17)),dt(r,25,Mr(!1)),dt(r,18,Mr(!1)),dt(r,19,On(0)),u&&dt(r,431,Mr(!1)),u&&dt(r,444,On(0)),dt(r,61,v8()),dt(r,64,Mr(!1)),dt(r,141,On(0)),dt(r,34,Mr(zB(t)=="true")),dt(r,14,Mr(!0)),u&&dt(r,439,Mr(!1)),dt(r,218,On(0)),k7(r,t,a),E7(r,t.SSF,a),_7(r,a),u&&dt(r,352,Mr(!1));var h=r.end(),p=Jr();u&&dt(p,140,R8()),u&&a.Strings&&N7(p,252,g8(a.Strings)),dt(p,10);var g=p.end(),b=Jr(),N=0,y=0;for(y=0;y<t.SheetNames.length;++y)N+=(u?12:11)+(u?2:1)*t.SheetNames[y].length;var S=h.length+N+g.length;for(y=0;y<t.SheetNames.length;++y){var C=o[y]||{};dt(b,133,p8({pos:S,hs:C.Hidden||0,dt:0,name:t.SheetNames[y]},a)),S+=s[y].length}var T=b.end();if(N!=T.length)throw new Error("BS8 "+N+" != "+T.length);var _=[];return h.length&&_.push(h),T.length&&_.push(T),g.length&&_.push(g),pr(_)}function F7(t,s){var a=s||{},r=[];t&&!t.SSF&&(t.SSF=tn(_a)),t&&t.SSF&&(Kf(),qf(t.SSF),a.revssf=Yf(t.SSF),a.revssf[t.SSF[65535]]=0,a.ssf=t.SSF),a.Strings=[],a.Strings.Count=0,a.Strings.Unique=0,Jv(a),a.cellXfs=[],Gl(a.cellXfs,{},{revssf:{General:0}}),t.Props||(t.Props={});for(var i=0;i<t.SheetNames.length;++i)r[r.length]=P7(i,a,t);return r.unshift(M7(t,r,a)),pr(r)}function qT(t,s){for(var a=0;a<=t.SheetNames.length;++a){var r=t.Sheets[t.SheetNames[a]];if(!(!r||!r["!ref"])){var i=pn(r["!ref"]);i.e.c>255&&typeof console<"u"&&console.error&&console.error("Worksheet '"+t.SheetNames[a]+"' extends beyond column IV (255).  Data may be lost.")}}var o=s||{};switch(o.biff||2){case 8:case 5:return F7(t,s);case 4:case 3:case 2:return T7(t,s)}throw new Error("invalid type "+o.bookType+" for BIFF")}function I7(t,s,a,r){for(var i=t["!merges"]||[],o=[],c=s.s.c;c<=s.e.c;++c){for(var u=0,f=0,x=0;x<i.length;++x)if(!(i[x].s.r>a||i[x].s.c>c)&&!(i[x].e.r<a||i[x].e.c<c)){if(i[x].s.r<a||i[x].s.c<c){u=-1;break}u=i[x].e.r-i[x].s.r+1,f=i[x].e.c-i[x].s.c+1;break}if(!(u<0)){var h=qs({r:a,c}),p=r.dense?(t[a]||[])[c]:t[h],g=p&&p.v!=null&&(p.h||fM(p.w||(Ji(p),p.w)||""))||"",b={};u>1&&(b.rowspan=u),f>1&&(b.colspan=f),r.editable?g='<span contenteditable="true">'+g+"</span>":p&&(b["data-t"]=p&&p.t||"z",p.v!=null&&(b["data-v"]=p.v),p.z!=null&&(b["data-z"]=p.z),p.l&&(p.l.Target||"#").charAt(0)!="#"&&(g='<a href="'+p.l.Target+'">'+g+"</a>")),b.id=(r.id||"sjs")+"-"+h,o.push(ct("td",g,b))}}var N="<tr>";return N+o.join("")+"</tr>"}var L7='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',B7="</body></html>";function z7(t,s,a){var r=[];return r.join("")+"<table"+(a&&a.id?' id="'+a.id+'"':"")+">"}function KT(t,s){var a=s||{},r=a.header!=null?a.header:L7,i=a.footer!=null?a.footer:B7,o=[r],c=pn(t["!ref"]);a.dense=Array.isArray(t),o.push(z7(t,c,a));for(var u=c.s.r;u<=c.e.r;++u)o.push(I7(t,c,u,a));return o.push("</table>"+i),o.join("")}function YT(t,s,a){var r=a||{},i=0,o=0;if(r.origin!=null)if(typeof r.origin=="number")i=r.origin;else{var c=typeof r.origin=="string"?ar(r.origin):r.origin;i=c.r,o=c.c}var u=s.getElementsByTagName("tr"),f=Math.min(r.sheetRows||1e7,u.length),x={s:{r:0,c:0},e:{r:i,c:o}};if(t["!ref"]){var h=pn(t["!ref"]);x.s.r=Math.min(x.s.r,h.s.r),x.s.c=Math.min(x.s.c,h.s.c),x.e.r=Math.max(x.e.r,h.e.r),x.e.c=Math.max(x.e.c,h.e.c),i==-1&&(x.e.r=i=h.e.r+1)}var p=[],g=0,b=t["!rows"]||(t["!rows"]=[]),N=0,y=0,S=0,C=0,T=0,_=0;for(t["!cols"]||(t["!cols"]=[]);N<u.length&&y<f;++N){var G=u[N];if(Ww(G)){if(r.display)continue;b[y]={hidden:!0}}var U=G.children;for(S=C=0;S<U.length;++S){var F=U[S];if(!(r.display&&Ww(F))){var k=F.hasAttribute("data-v")?F.getAttribute("data-v"):F.hasAttribute("v")?F.getAttribute("v"):vM(F.innerHTML),E=F.getAttribute("data-z")||F.getAttribute("z");for(g=0;g<p.length;++g){var A=p[g];A.s.c==C+o&&A.s.r<y+i&&y+i<=A.e.r&&(C=A.e.c+1-o,g=-1)}_=+F.getAttribute("colspan")||1,((T=+F.getAttribute("rowspan")||1)>1||_>1)&&p.push({s:{r:y+i,c:C+o},e:{r:y+i+(T||1)-1,c:C+o+(_||1)-1}});var B={t:"s",v:k},H=F.getAttribute("data-t")||F.getAttribute("t")||"";k!=null&&(k.length==0?B.t=H||"z":r.raw||k.trim().length==0||H=="s"||(k==="TRUE"?B={t:"b",v:!0}:k==="FALSE"?B={t:"b",v:!1}:isNaN(Yi(k))?isNaN(Fu(k).getDate())||(B={t:"d",v:Lr(k)},r.cellDates||(B={t:"n",v:en(B.v)}),B.z=r.dateNF||_a[14]):B={t:"n",v:Yi(k)})),B.z===void 0&&E!=null&&(B.z=E);var M="",q=F.getElementsByTagName("A");if(q&&q.length)for(var L=0;L<q.length&&!(q[L].hasAttribute("href")&&(M=q[L].getAttribute("href"),M.charAt(0)!="#"));++L);M&&M.charAt(0)!="#"&&(B.l={Target:M}),r.dense?(t[y+i]||(t[y+i]=[]),t[y+i][C+o]=B):t[qs({c:C+o,r:y+i})]=B,x.e.c<C+o&&(x.e.c=C+o),C+=_}}++y}return p.length&&(t["!merges"]=(t["!merges"]||[]).concat(p)),x.e.r=Math.max(x.e.r,y-1+i),t["!ref"]=Ga(x),y>=f&&(t["!fullref"]=Ga((x.e.r=u.length-N+y-1+i,x))),t}function XT(t,s){var a=s||{},r=a.dense?[]:{};return YT(r,t,s)}function U7(t,s){return Lo(XT(t,s),s)}function Ww(t){var s="",a=V7(t);return a&&(s=a(t).getPropertyValue("display")),s||(s=t.style&&t.style.display),s==="none"}function V7(t){return t.ownerDocument.defaultView&&typeof t.ownerDocument.defaultView.getComputedStyle=="function"?t.ownerDocument.defaultView.getComputedStyle:typeof getComputedStyle=="function"?getComputedStyle:null}var $7=(function(){var t=["<office:master-styles>",'<style:master-page style:name="mp1" style:page-layout-name="mp1">',"<style:header/>",'<style:header-left style:display="false"/>',"<style:footer/>",'<style:footer-left style:display="false"/>',"</style:master-page>","</office:master-styles>"].join(""),s="<office:document-styles "+Lu({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","office:version":"1.2"})+">"+t+"</office:document-styles>";return function(){return Ya+s}})(),Gw=(function(){var t=function(o){return Ws(o).replace(/  +/g,function(c){return'<text:s text:c="'+c.length+'"/>'}).replace(/\t/g,"<text:tab/>").replace(/\n/g,"</text:p><text:p>").replace(/^ /,"<text:s/>").replace(/ $/,"<text:s/>")},s=`          <table:table-cell />
`,a=`          <table:covered-table-cell/>
`,r=function(o,c,u){var f=[];f.push('      <table:table table:name="'+Ws(c.SheetNames[u])+`" table:style-name="ta1">
`);var x=0,h=0,p=pn(o["!ref"]||"A1"),g=o["!merges"]||[],b=0,N=Array.isArray(o);if(o["!cols"])for(h=0;h<=p.e.c;++h)f.push("        <table:table-column"+(o["!cols"][h]?' table:style-name="co'+o["!cols"][h].ods+'"':"")+`></table:table-column>
`);var y="",S=o["!rows"]||[];for(x=0;x<p.s.r;++x)y=S[x]?' table:style-name="ro'+S[x].ods+'"':"",f.push("        <table:table-row"+y+`></table:table-row>
`);for(;x<=p.e.r;++x){for(y=S[x]?' table:style-name="ro'+S[x].ods+'"':"",f.push("        <table:table-row"+y+`>
`),h=0;h<p.s.c;++h)f.push(s);for(;h<=p.e.c;++h){var C=!1,T={},_="";for(b=0;b!=g.length;++b)if(!(g[b].s.c>h)&&!(g[b].s.r>x)&&!(g[b].e.c<h)&&!(g[b].e.r<x)){(g[b].s.c!=h||g[b].s.r!=x)&&(C=!0),T["table:number-columns-spanned"]=g[b].e.c-g[b].s.c+1,T["table:number-rows-spanned"]=g[b].e.r-g[b].s.r+1;break}if(C){f.push(a);continue}var G=qs({r:x,c:h}),U=N?(o[x]||[])[h]:o[G];if(U&&U.f&&(T["table:formula"]=Ws(cL(U.f)),U.F&&U.F.slice(0,G.length)==G)){var F=pn(U.F);T["table:number-matrix-columns-spanned"]=F.e.c-F.s.c+1,T["table:number-matrix-rows-spanned"]=F.e.r-F.s.r+1}if(!U){f.push(s);continue}switch(U.t){case"b":_=U.v?"TRUE":"FALSE",T["office:value-type"]="boolean",T["office:boolean-value"]=U.v?"true":"false";break;case"n":_=U.w||String(U.v||0),T["office:value-type"]="float",T["office:value"]=U.v||0;break;case"s":case"str":_=U.v==null?"":U.v,T["office:value-type"]="string";break;case"d":_=U.w||Lr(U.v).toISOString(),T["office:value-type"]="date",T["office:date-value"]=Lr(U.v).toISOString(),T["table:style-name"]="ce1";break;default:f.push(s);continue}var k=t(_);if(U.l&&U.l.Target){var E=U.l.Target;E=E.charAt(0)=="#"?"#"+dL(E.slice(1)):E,E.charAt(0)!="#"&&!E.match(/^\w+:/)&&(E="../"+E),k=ct("text:a",k,{"xlink:href":E.replace(/&/g,"&amp;")})}f.push("          "+ct("table:table-cell",ct("text:p",k,{}),T)+`
`)}f.push(`        </table:table-row>
`)}return f.push(`      </table:table>
`),f.join("")},i=function(o,c){o.push(` <office:automatic-styles>
`),o.push(`  <number:date-style style:name="N37" number:automatic-order="true">
`),o.push(`   <number:month number:style="long"/>
`),o.push(`   <number:text>/</number:text>
`),o.push(`   <number:day number:style="long"/>
`),o.push(`   <number:text>/</number:text>
`),o.push(`   <number:year/>
`),o.push(`  </number:date-style>
`);var u=0;c.SheetNames.map(function(x){return c.Sheets[x]}).forEach(function(x){if(x&&x["!cols"]){for(var h=0;h<x["!cols"].length;++h)if(x["!cols"][h]){var p=x["!cols"][h];if(p.width==null&&p.wpx==null&&p.wch==null)continue;Kv(p),p.ods=u;var g=x["!cols"][h].wpx+"px";o.push('  <style:style style:name="co'+u+`" style:family="table-column">
`),o.push('   <style:table-column-properties fo:break-before="auto" style:column-width="'+g+`"/>
`),o.push(`  </style:style>
`),++u}}});var f=0;c.SheetNames.map(function(x){return c.Sheets[x]}).forEach(function(x){if(x&&x["!rows"]){for(var h=0;h<x["!rows"].length;++h)if(x["!rows"][h]){x["!rows"][h].ods=f;var p=x["!rows"][h].hpx+"px";o.push('  <style:style style:name="ro'+f+`" style:family="table-row">
`),o.push('   <style:table-row-properties fo:break-before="auto" style:row-height="'+p+`"/>
`),o.push(`  </style:style>
`),++f}}}),o.push(`  <style:style style:name="ta1" style:family="table" style:master-page-name="mp1">
`),o.push(`   <style:table-properties table:display="true" style:writing-mode="lr-tb"/>
`),o.push(`  </style:style>
`),o.push(`  <style:style style:name="ce1" style:family="table-cell" style:parent-style-name="Default" style:data-style-name="N37"/>
`),o.push(` </office:automatic-styles>
`)};return function(c,u){var f=[Ya],x=Lu({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:meta":"urn:oasis:names:tc:opendocument:xmlns:meta:1.0","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:presentation":"urn:oasis:names:tc:opendocument:xmlns:presentation:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:chart":"urn:oasis:names:tc:opendocument:xmlns:chart:1.0","xmlns:dr3d":"urn:oasis:names:tc:opendocument:xmlns:dr3d:1.0","xmlns:math":"http://www.w3.org/1998/Math/MathML","xmlns:form":"urn:oasis:names:tc:opendocument:xmlns:form:1.0","xmlns:script":"urn:oasis:names:tc:opendocument:xmlns:script:1.0","xmlns:ooo":"http://openoffice.org/2004/office","xmlns:ooow":"http://openoffice.org/2004/writer","xmlns:oooc":"http://openoffice.org/2004/calc","xmlns:dom":"http://www.w3.org/2001/xml-events","xmlns:xforms":"http://www.w3.org/2002/xforms","xmlns:xsd":"http://www.w3.org/2001/XMLSchema","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","xmlns:sheet":"urn:oasis:names:tc:opendocument:sh33tjs:1.0","xmlns:rpt":"http://openoffice.org/2005/report","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","xmlns:xhtml":"http://www.w3.org/1999/xhtml","xmlns:grddl":"http://www.w3.org/2003/g/data-view#","xmlns:tableooo":"http://openoffice.org/2009/table","xmlns:drawooo":"http://openoffice.org/2010/draw","xmlns:calcext":"urn:org:documentfoundation:names:experimental:calc:xmlns:calcext:1.0","xmlns:loext":"urn:org:documentfoundation:names:experimental:office:xmlns:loext:1.0","xmlns:field":"urn:openoffice:names:experimental:ooo-ms-interop:xmlns:field:1.0","xmlns:formx":"urn:openoffice:names:experimental:ooxml-odf-interop:xmlns:form:1.0","xmlns:css3t":"http://www.w3.org/TR/css3-text/","office:version":"1.2"}),h=Lu({"xmlns:config":"urn:oasis:names:tc:opendocument:xmlns:config:1.0","office:mimetype":"application/vnd.oasis.opendocument.spreadsheet"});u.bookType=="fods"?(f.push("<office:document"+x+h+`>
`),f.push(uT().replace(/office:document-meta/g,"office:meta"))):f.push("<office:document-content"+x+`>
`),i(f,c),f.push(`  <office:body>
`),f.push(`    <office:spreadsheet>
`);for(var p=0;p!=c.SheetNames.length;++p)f.push(r(c.Sheets[c.SheetNames[p]],c,p));return f.push(`    </office:spreadsheet>
`),f.push(`  </office:body>
`),u.bookType=="fods"?f.push("</office:document>"):f.push("</office:document-content>"),f.join("")}})();function QT(t,s){if(s.bookType=="fods")return Gw(t,s);var a=Iv(),r="",i=[],o=[];return r="mimetype",us(a,r,"application/vnd.oasis.opendocument.spreadsheet"),r="content.xml",us(a,r,Gw(t,s)),i.push([r,"text/xml"]),o.push([r,"ContentFile"]),r="styles.xml",us(a,r,$7(t,s)),i.push([r,"text/xml"]),o.push([r,"StylesFile"]),r="meta.xml",us(a,r,Ya+uT()),i.push([r,"text/xml"]),o.push([r,"MetadataFile"]),r="manifest.rdf",us(a,r,t8(o)),i.push([r,"application/rdf+xml"]),r="META-INF/manifest.xml",us(a,r,JM(i)),a}/*! sheetjs (C) 2013-present SheetJS -- http://sheetjs.com */function Sf(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function H7(t){return typeof TextEncoder<"u"?new TextEncoder().encode(t):Kn(Iu(t))}function W7(t,s){e:for(var a=0;a<=t.length-s.length;++a){for(var r=0;r<s.length;++r)if(t[a+r]!=s[r])continue e;return!0}return!1}function zl(t){var s=t.reduce(function(i,o){return i+o.length},0),a=new Uint8Array(s),r=0;return t.forEach(function(i){a.set(i,r),r+=i.length}),a}function G7(t,s,a){var r=Math.floor(a==0?0:Math.LOG10E*Math.log(Math.abs(a)))+6176-20,i=a/Math.pow(10,r-6176);t[s+15]|=r>>7,t[s+14]|=(r&127)<<1;for(var o=0;i>=1;++o,i/=256)t[s+o]=i&255;t[s+15]|=a>=0?0:128}function Bu(t,s){var a=s?s[0]:0,r=t[a]&127;e:if(t[a++]>=128&&(r|=(t[a]&127)<<7,t[a++]<128||(r|=(t[a]&127)<<14,t[a++]<128)||(r|=(t[a]&127)<<21,t[a++]<128)||(r+=(t[a]&127)*Math.pow(2,28),++a,t[a++]<128)||(r+=(t[a]&127)*Math.pow(2,35),++a,t[a++]<128)||(r+=(t[a]&127)*Math.pow(2,42),++a,t[a++]<128)))break e;return s&&(s[0]=a),r}function zs(t){var s=new Uint8Array(7);s[0]=t&127;var a=1;e:if(t>127){if(s[a-1]|=128,s[a]=t>>7&127,++a,t<=16383||(s[a-1]|=128,s[a]=t>>14&127,++a,t<=2097151)||(s[a-1]|=128,s[a]=t>>21&127,++a,t<=268435455)||(s[a-1]|=128,s[a]=t/256>>>21&127,++a,t<=34359738367)||(s[a-1]|=128,s[a]=t/65536>>>21&127,++a,t<=4398046511103))break e;s[a-1]|=128,s[a]=t/16777216>>>21&127,++a}return s.slice(0,a)}function Wc(t){var s=0,a=t[s]&127;e:if(t[s++]>=128){if(a|=(t[s]&127)<<7,t[s++]<128||(a|=(t[s]&127)<<14,t[s++]<128)||(a|=(t[s]&127)<<21,t[s++]<128))break e;a|=(t[s]&127)<<28}return a}function Za(t){for(var s=[],a=[0];a[0]<t.length;){var r=a[0],i=Bu(t,a),o=i&7;i=Math.floor(i/8);var c=0,u;if(i==0)break;switch(o){case 0:{for(var f=a[0];t[a[0]++]>=128;);u=t.slice(f,a[0])}break;case 5:c=4,u=t.slice(a[0],a[0]+c),a[0]+=c;break;case 1:c=8,u=t.slice(a[0],a[0]+c),a[0]+=c;break;case 2:c=Bu(t,a),u=t.slice(a[0],a[0]+c),a[0]+=c;break;case 3:case 4:default:throw new Error("PB Type ".concat(o," for Field ").concat(i," at offset ").concat(r))}var x={data:u,type:o};s[i]==null?s[i]=[x]:s[i].push(x)}return s}function ur(t){var s=[];return t.forEach(function(a,r){a.forEach(function(i){i.data&&(s.push(zs(r*8+i.type)),i.type==2&&s.push(zs(i.data.length)),s.push(i.data))})}),zl(s)}function $n(t){for(var s,a=[],r=[0];r[0]<t.length;){var i=Bu(t,r),o=Za(t.slice(r[0],r[0]+i));r[0]+=i;var c={id:Wc(o[1][0].data),messages:[]};o[2].forEach(function(u){var f=Za(u.data),x=Wc(f[3][0].data);c.messages.push({meta:f,data:t.slice(r[0],r[0]+x)}),r[0]+=x}),(s=o[3])!=null&&s[0]&&(c.merge=Wc(o[3][0].data)>>>0>0),a.push(c)}return a}function kc(t){var s=[];return t.forEach(function(a){var r=[];r[1]=[{data:zs(a.id),type:0}],r[2]=[],a.merge!=null&&(r[3]=[{data:zs(+!!a.merge),type:0}]);var i=[];a.messages.forEach(function(c){i.push(c.data),c.meta[3]=[{type:0,data:zs(c.data.length)}],r[2].push({data:ur(c.meta),type:2})});var o=ur(r);s.push(zs(o.length)),s.push(o),i.forEach(function(c){return s.push(c)})}),zl(s)}function q7(t,s){if(t!=0)throw new Error("Unexpected Snappy chunk type ".concat(t));for(var a=[0],r=Bu(s,a),i=[];a[0]<s.length;){var o=s[a[0]]&3;if(o==0){var c=s[a[0]++]>>2;if(c<60)++c;else{var u=c-59;c=s[a[0]],u>1&&(c|=s[a[0]+1]<<8),u>2&&(c|=s[a[0]+2]<<16),u>3&&(c|=s[a[0]+3]<<24),c>>>=0,c++,a[0]+=u}i.push(s.slice(a[0],a[0]+c)),a[0]+=c;continue}else{var f=0,x=0;if(o==1?(x=(s[a[0]]>>2&7)+4,f=(s[a[0]++]&224)<<3,f|=s[a[0]++]):(x=(s[a[0]++]>>2)+1,o==2?(f=s[a[0]]|s[a[0]+1]<<8,a[0]+=2):(f=(s[a[0]]|s[a[0]+1]<<8|s[a[0]+2]<<16|s[a[0]+3]<<24)>>>0,a[0]+=4)),i=[zl(i)],f==0)throw new Error("Invalid offset 0");if(f>i[0].length)throw new Error("Invalid offset beyond length");if(x>=f)for(i.push(i[0].slice(-f)),x-=f;x>=i[i.length-1].length;)i.push(i[i.length-1]),x-=i[i.length-1].length;i.push(i[0].slice(-f,-f+x))}}var h=zl(i);if(h.length!=r)throw new Error("Unexpected length: ".concat(h.length," != ").concat(r));return h}function Hn(t){for(var s=[],a=0;a<t.length;){var r=t[a++],i=t[a]|t[a+1]<<8|t[a+2]<<16;a+=3,s.push(q7(r,t.slice(a,a+i))),a+=i}if(a!==t.length)throw new Error("data is not a valid framed stream!");return zl(s)}function Ec(t){for(var s=[],a=0;a<t.length;){var r=Math.min(t.length-a,268435455),i=new Uint8Array(4);s.push(i);var o=zs(r),c=o.length;s.push(o),r<=60?(c++,s.push(new Uint8Array([r-1<<2]))):r<=256?(c+=2,s.push(new Uint8Array([240,r-1&255]))):r<=65536?(c+=3,s.push(new Uint8Array([244,r-1&255,r-1>>8&255]))):r<=16777216?(c+=4,s.push(new Uint8Array([248,r-1&255,r-1>>8&255,r-1>>16&255]))):r<=4294967296&&(c+=5,s.push(new Uint8Array([252,r-1&255,r-1>>8&255,r-1>>16&255,r-1>>>24&255]))),s.push(t.slice(a,a+r)),c+=r,i[0]=0,i[1]=c&255,i[2]=c>>8&255,i[3]=c>>16&255,a+=r}return zl(s)}function O0(t,s){var a=new Uint8Array(32),r=Sf(a),i=12,o=0;switch(a[0]=5,t.t){case"n":a[1]=2,G7(a,i,t.v),o|=1,i+=16;break;case"b":a[1]=6,r.setFloat64(i,t.v?1:0,!0),o|=2,i+=8;break;case"s":if(s.indexOf(t.v)==-1)throw new Error("Value ".concat(t.v," missing from SST!"));a[1]=3,r.setUint32(i,s.indexOf(t.v),!0),o|=8,i+=4;break;default:throw"unsupported cell type "+t.t}return r.setUint32(8,o,!0),a.slice(0,i)}function R0(t,s){var a=new Uint8Array(32),r=Sf(a),i=12,o=0;switch(a[0]=3,t.t){case"n":a[2]=2,r.setFloat64(i,t.v,!0),o|=32,i+=8;break;case"b":a[2]=6,r.setFloat64(i,t.v?1:0,!0),o|=32,i+=8;break;case"s":if(s.indexOf(t.v)==-1)throw new Error("Value ".concat(t.v," missing from SST!"));a[2]=3,r.setUint32(i,s.indexOf(t.v),!0),o|=16,i+=4;break;default:throw"unsupported cell type "+t.t}return r.setUint32(4,o,!0),a.slice(0,i)}function Al(t){var s=Za(t);return Bu(s[1][0].data)}function K7(t,s,a){var r,i,o,c;if(!((r=t[6])!=null&&r[0])||!((i=t[7])!=null&&i[0]))throw"Mutation only works on post-BNC storages!";var u=((c=(o=t[8])==null?void 0:o[0])==null?void 0:c.data)&&Wc(t[8][0].data)>0||!1;if(u)throw"Math only works with normal offsets";for(var f=0,x=Sf(t[7][0].data),h=0,p=[],g=Sf(t[4][0].data),b=0,N=[],y=0;y<s.length;++y){if(s[y]==null){x.setUint16(y*2,65535,!0),g.setUint16(y*2,65535);continue}x.setUint16(y*2,h,!0),g.setUint16(y*2,b,!0);var S,C;switch(typeof s[y]){case"string":S=O0({t:"s",v:s[y]},a),C=R0({t:"s",v:s[y]},a);break;case"number":S=O0({t:"n",v:s[y]},a),C=R0({t:"n",v:s[y]},a);break;case"boolean":S=O0({t:"b",v:s[y]},a),C=R0({t:"b",v:s[y]},a);break;default:throw new Error("Unsupported value "+s[y])}p.push(S),h+=S.length,N.push(C),b+=C.length,++f}for(t[2][0].data=zs(f);y<t[7][0].data.length/2;++y)x.setUint16(y*2,65535,!0),g.setUint16(y*2,65535,!0);return t[6][0].data=zl(p),t[3][0].data=zl(N),f}function Y7(t,s){if(!s||!s.numbers)throw new Error("Must pass a `numbers` option -- check the README");var a=t.Sheets[t.SheetNames[0]];t.SheetNames.length>1&&console.error("The Numbers writer currently writes only the first table");var r=pn(a["!ref"]);r.s.r=r.s.c=0;var i=!1;r.e.c>9&&(i=!0,r.e.c=9),r.e.r>49&&(i=!0,r.e.r=49),i&&console.error("The Numbers writer is currently limited to ".concat(Ga(r)));var o=Cf(a,{range:r,header:1}),c=["~Sh33tJ5~"];o.forEach(function(Q){return Q.forEach(function(O){typeof O=="string"&&c.push(O)})});var u={},f=[],x=Qs.read(s.numbers,{type:"base64"});x.FileIndex.map(function(Q,O){return[Q,x.FullPaths[O]]}).forEach(function(Q){var O=Q[0],te=Q[1];if(O.type==2&&O.name.match(/\.iwa/)){var oe=O.content,je=Hn(oe),Me=$n(je);Me.forEach(function(ve){f.push(ve.id),u[ve.id]={deps:[],location:te,type:Wc(ve.messages[0].meta[1][0].data)}})}}),f.sort(function(Q,O){return Q-O});var h=f.filter(function(Q){return Q>1}).map(function(Q){return[Q,zs(Q)]});x.FileIndex.map(function(Q,O){return[Q,x.FullPaths[O]]}).forEach(function(Q){var O=Q[0];if(Q[1],!!O.name.match(/\.iwa/)){var te=$n(Hn(O.content));te.forEach(function(oe){oe.messages.forEach(function(je){h.forEach(function(Me){oe.messages.some(function(ve){return Wc(ve.meta[1][0].data)!=11006&&W7(ve.data,Me[1])})&&u[Me[0]].deps.push(oe.id)})})})}});for(var p=Qs.find(x,u[1].location),g=$n(Hn(p.content)),b,N=0;N<g.length;++N){var y=g[N];y.id==1&&(b=y)}var S=Al(Za(b.messages[0].data)[1][0].data);for(p=Qs.find(x,u[S].location),g=$n(Hn(p.content)),N=0;N<g.length;++N)y=g[N],y.id==S&&(b=y);for(S=Al(Za(b.messages[0].data)[2][0].data),p=Qs.find(x,u[S].location),g=$n(Hn(p.content)),N=0;N<g.length;++N)y=g[N],y.id==S&&(b=y);for(S=Al(Za(b.messages[0].data)[2][0].data),p=Qs.find(x,u[S].location),g=$n(Hn(p.content)),N=0;N<g.length;++N)y=g[N],y.id==S&&(b=y);var C=Za(b.messages[0].data);{C[6][0].data=zs(r.e.r+1),C[7][0].data=zs(r.e.c+1);var T=Al(C[46][0].data),_=Qs.find(x,u[T].location),G=$n(Hn(_.content));{for(var U=0;U<G.length&&G[U].id!=T;++U);if(G[U].id!=T)throw"Bad ColumnRowUIDMapArchive";var F=Za(G[U].messages[0].data);F[1]=[],F[2]=[],F[3]=[];for(var k=0;k<=r.e.c;++k){var E=[];E[1]=E[2]=[{type:0,data:zs(k+420690)}],F[1].push({type:2,data:ur(E)}),F[2].push({type:0,data:zs(k)}),F[3].push({type:0,data:zs(k)})}F[4]=[],F[5]=[],F[6]=[];for(var A=0;A<=r.e.r;++A)E=[],E[1]=E[2]=[{type:0,data:zs(A+726270)}],F[4].push({type:2,data:ur(E)}),F[5].push({type:0,data:zs(A)}),F[6].push({type:0,data:zs(A)});G[U].messages[0].data=ur(F)}_.content=Ec(kc(G)),_.size=_.content.length,delete C[46];var B=Za(C[4][0].data);{B[7][0].data=zs(r.e.r+1);var H=Za(B[1][0].data),M=Al(H[2][0].data);_=Qs.find(x,u[M].location),G=$n(Hn(_.content));{if(G[0].id!=M)throw"Bad HeaderStorageBucket";var q=Za(G[0].messages[0].data);for(A=0;A<o.length;++A){var L=Za(q[2][0].data);L[1][0].data=zs(A),L[4][0].data=zs(o[A].length),q[2][A]={type:q[2][0].type,data:ur(L)}}G[0].messages[0].data=ur(q)}_.content=Ec(kc(G)),_.size=_.content.length;var re=Al(B[2][0].data);_=Qs.find(x,u[re].location),G=$n(Hn(_.content));{if(G[0].id!=re)throw"Bad HeaderStorageBucket";for(q=Za(G[0].messages[0].data),k=0;k<=r.e.c;++k)L=Za(q[2][0].data),L[1][0].data=zs(k),L[4][0].data=zs(r.e.r+1),q[2][k]={type:q[2][0].type,data:ur(L)};G[0].messages[0].data=ur(q)}_.content=Ec(kc(G)),_.size=_.content.length;var V=Al(B[4][0].data);(function(){for(var Q=Qs.find(x,u[V].location),O=$n(Hn(Q.content)),te,oe=0;oe<O.length;++oe){var je=O[oe];je.id==V&&(te=je)}var Me=Za(te.messages[0].data);{Me[3]=[];var ve=[];c.forEach(function(Qe,vt){ve[1]=[{type:0,data:zs(vt)}],ve[2]=[{type:0,data:zs(1)}],ve[3]=[{type:2,data:H7(Qe)}],Me[3].push({type:2,data:ur(ve)})})}te.messages[0].data=ur(Me);var ce=kc(O),Pe=Ec(ce);Q.content=Pe,Q.size=Q.content.length})();var ee=Za(B[3][0].data);{var me=ee[1][0];delete ee[2];var W=Za(me.data);{var se=Al(W[2][0].data);(function(){for(var Q=Qs.find(x,u[se].location),O=$n(Hn(Q.content)),te,oe=0;oe<O.length;++oe){var je=O[oe];je.id==se&&(te=je)}var Me=Za(te.messages[0].data);{delete Me[6],delete ee[7];var ve=new Uint8Array(Me[5][0].data);Me[5]=[];for(var ce=0,Pe=0;Pe<=r.e.r;++Pe){var Qe=Za(ve);ce+=K7(Qe,o[Pe],c),Qe[1][0].data=zs(Pe),Me[5].push({data:ur(Qe),type:2})}Me[1]=[{type:0,data:zs(r.e.c+1)}],Me[2]=[{type:0,data:zs(r.e.r+1)}],Me[3]=[{type:0,data:zs(ce)}],Me[4]=[{type:0,data:zs(r.e.r+1)}]}te.messages[0].data=ur(Me);var vt=kc(O),xt=Ec(vt);Q.content=xt,Q.size=Q.content.length})()}me.data=ur(W)}B[3][0].data=ur(ee)}C[4][0].data=ur(B)}b.messages[0].data=ur(C);var Z=kc(g),I=Ec(Z);return p.content=I,p.size=p.content.length,x}function X7(t){return function(a){for(var r=0;r!=t.length;++r){var i=t[r];a[i[0]]===void 0&&(a[i[0]]=i[1]),i[2]==="n"&&(a[i[0]]=Number(a[i[0]]))}}}function Jv(t){X7([["cellDates",!1],["bookSST",!1],["bookType","xlsx"],["compression",!1],["WTF",!1]])(t)}function Q7(t,s){return s.bookType=="ods"?QT(t,s):s.bookType=="numbers"?Y7(t,s):s.bookType=="xlsb"?Z7(t,s):J7(t,s)}function Z7(t,s){Oc=1024,t&&!t.SSF&&(t.SSF=tn(_a)),t&&t.SSF&&(Kf(),qf(t.SSF),s.revssf=Yf(t.SSF),s.revssf[t.SSF[65535]]=0,s.ssf=t.SSF),s.rels={},s.wbrels={},s.Strings=[],s.Strings.Count=0,s.Strings.Unique=0,Su?s.revStrings=new Map:(s.revStrings={},s.revStrings.foo=[],delete s.revStrings.foo);var a=s.bookType=="xlsb"?"bin":"xml",r=RT.indexOf(s.bookType)>-1,i=oT();Jv(s=s||{});var o=Iv(),c="",u=0;if(s.cellXfs=[],Gl(s.cellXfs,{},{revssf:{General:0}}),t.Props||(t.Props={}),c="docProps/core.xml",us(o,c,mT(t.Props,s)),i.coreprops.push(c),Us(s.rels,2,c,Os.CORE_PROPS),c="docProps/app.xml",!(t.Props&&t.Props.SheetNames))if(!t.Workbook||!t.Workbook.Sheets)t.Props.SheetNames=t.SheetNames;else{for(var f=[],x=0;x<t.SheetNames.length;++x)(t.Workbook.Sheets[x]||{}).Hidden!=2&&f.push(t.SheetNames[x]);t.Props.SheetNames=f}for(t.Props.Worksheets=t.Props.SheetNames.length,us(o,c,fT(t.Props)),i.extprops.push(c),Us(s.rels,3,c,Os.EXT_PROPS),t.Custprops!==t.Props&&Nr(t.Custprops||{}).length>0&&(c="docProps/custom.xml",us(o,c,xT(t.Custprops)),i.custprops.push(c),Us(s.rels,4,c,Os.CUST_PROPS)),u=1;u<=t.SheetNames.length;++u){var h={"!id":{}},p=t.Sheets[t.SheetNames[u-1]],g=(p||{})["!type"]||"sheet";switch(g){case"chart":default:c="xl/worksheets/sheet"+u+"."+a,us(o,c,t7(u-1,c,s,t,h)),i.sheets.push(c),Us(s.wbrels,-1,"worksheets/sheet"+u+"."+a,Os.WS[0])}if(p){var b=p["!comments"],N=!1,y="";b&&b.length>0&&(y="xl/comments"+u+"."+a,us(o,y,r7(b,y)),i.comments.push(y),Us(h,-1,"../comments"+u+"."+a,Os.CMNT),N=!0),p["!legacy"]&&N&&us(o,"xl/drawings/vmlDrawing"+u+".vml",DT(u,p["!comments"])),delete p["!comments"],delete p["!legacy"]}h["!id"].rId1&&us(o,dT(c),$c(h))}return s.Strings!=null&&s.Strings.length>0&&(c="xl/sharedStrings."+a,us(o,c,a7(s.Strings,c,s)),i.strs.push(c),Us(s.wbrels,-1,"sharedStrings."+a,Os.SST)),c="xl/workbook."+a,us(o,c,e7(t,c)),i.workbooks.push(c),Us(s.rels,1,c,Os.WB),c="xl/theme/theme1.xml",us(o,c,AT(t.Themes,s)),i.themes.push(c),Us(s.wbrels,-1,"theme/theme1.xml",Os.THEME),c="xl/styles."+a,us(o,c,s7(t,c,s)),i.styles.push(c),Us(s.wbrels,-1,"styles."+a,Os.STY),t.vbaraw&&r&&(c="xl/vbaProject.bin",us(o,c,t.vbaraw),i.vba.push(c),Us(s.wbrels,-1,"vbaProject.bin",Os.VBA)),c="xl/metadata."+a,us(o,c,n7(c)),i.metadata.push(c),Us(s.wbrels,-1,"metadata."+a,Os.XLMETA),us(o,"[Content_Types].xml",cT(i,s)),us(o,"_rels/.rels",$c(s.rels)),us(o,"xl/_rels/workbook."+a+".rels",$c(s.wbrels)),delete s.revssf,delete s.ssf,o}function J7(t,s){Oc=1024,t&&!t.SSF&&(t.SSF=tn(_a)),t&&t.SSF&&(Kf(),qf(t.SSF),s.revssf=Yf(t.SSF),s.revssf[t.SSF[65535]]=0,s.ssf=t.SSF),s.rels={},s.wbrels={},s.Strings=[],s.Strings.Count=0,s.Strings.Unique=0,Su?s.revStrings=new Map:(s.revStrings={},s.revStrings.foo=[],delete s.revStrings.foo);var a="xml",r=RT.indexOf(s.bookType)>-1,i=oT();Jv(s=s||{});var o=Iv(),c="",u=0;if(s.cellXfs=[],Gl(s.cellXfs,{},{revssf:{General:0}}),t.Props||(t.Props={}),c="docProps/core.xml",us(o,c,mT(t.Props,s)),i.coreprops.push(c),Us(s.rels,2,c,Os.CORE_PROPS),c="docProps/app.xml",!(t.Props&&t.Props.SheetNames))if(!t.Workbook||!t.Workbook.Sheets)t.Props.SheetNames=t.SheetNames;else{for(var f=[],x=0;x<t.SheetNames.length;++x)(t.Workbook.Sheets[x]||{}).Hidden!=2&&f.push(t.SheetNames[x]);t.Props.SheetNames=f}t.Props.Worksheets=t.Props.SheetNames.length,us(o,c,fT(t.Props)),i.extprops.push(c),Us(s.rels,3,c,Os.EXT_PROPS),t.Custprops!==t.Props&&Nr(t.Custprops||{}).length>0&&(c="docProps/custom.xml",us(o,c,xT(t.Custprops)),i.custprops.push(c),Us(s.rels,4,c,Os.CUST_PROPS));var h=["SheetJ5"];for(s.tcid=0,u=1;u<=t.SheetNames.length;++u){var p={"!id":{}},g=t.Sheets[t.SheetNames[u-1]],b=(g||{})["!type"]||"sheet";switch(b){case"chart":default:c="xl/worksheets/sheet"+u+"."+a,us(o,c,VT(u-1,s,t,p)),i.sheets.push(c),Us(s.wbrels,-1,"worksheets/sheet"+u+"."+a,Os.WS[0])}if(g){var N=g["!comments"],y=!1,S="";if(N&&N.length>0){var C=!1;N.forEach(function(T){T[1].forEach(function(_){_.T==!0&&(C=!0)})}),C&&(S="xl/threadedComments/threadedComment"+u+"."+a,us(o,S,_F(N,h,s)),i.threadedcomments.push(S),Us(p,-1,"../threadedComments/threadedComment"+u+"."+a,Os.TCMNT)),S="xl/comments"+u+"."+a,us(o,S,OT(N)),i.comments.push(S),Us(p,-1,"../comments"+u+"."+a,Os.CMNT),y=!0}g["!legacy"]&&y&&us(o,"xl/drawings/vmlDrawing"+u+".vml",DT(u,g["!comments"])),delete g["!comments"],delete g["!legacy"]}p["!id"].rId1&&us(o,dT(c),$c(p))}return s.Strings!=null&&s.Strings.length>0&&(c="xl/sharedStrings."+a,us(o,c,wT(s.Strings,s)),i.strs.push(c),Us(s.wbrels,-1,"sharedStrings."+a,Os.SST)),c="xl/workbook."+a,us(o,c,WT(t)),i.workbooks.push(c),Us(s.rels,1,c,Os.WB),c="xl/theme/theme1.xml",us(o,c,AT(t.Themes,s)),i.themes.push(c),Us(s.wbrels,-1,"theme/theme1.xml",Os.THEME),c="xl/styles."+a,us(o,c,kT(t,s)),i.styles.push(c),Us(s.wbrels,-1,"styles."+a,Os.STY),t.vbaraw&&r&&(c="xl/vbaProject.bin",us(o,c,t.vbaraw),i.vba.push(c),Us(s.wbrels,-1,"vbaProject.bin",Os.VBA)),c="xl/metadata."+a,us(o,c,_T()),i.metadata.push(c),Us(s.wbrels,-1,"metadata."+a,Os.XLMETA),h.length>1&&(c="xl/persons/person.xml",us(o,c,DF(h)),i.people.push(c),Us(s.wbrels,-1,"persons/person.xml",Os.PEOPLE)),us(o,"[Content_Types].xml",cT(i,s)),us(o,"_rels/.rels",$c(s.rels)),us(o,"xl/_rels/workbook."+a+".rels",$c(s.wbrels)),delete s.revssf,delete s.ssf,o}function e9(t,s){var a="";switch((s||{}).type||"base64"){case"buffer":return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]];case"base64":a=Zi(t.slice(0,12));break;case"binary":a=t;break;case"array":return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]];default:throw new Error("Unrecognized type "+(s&&s.type||"undefined"))}return[a.charCodeAt(0),a.charCodeAt(1),a.charCodeAt(2),a.charCodeAt(3),a.charCodeAt(4),a.charCodeAt(5),a.charCodeAt(6),a.charCodeAt(7)]}function ZT(t,s){switch(s.type){case"base64":case"binary":break;case"buffer":case"array":s.type="";break;case"file":return sm(s.file,Qs.write(t,{type:Fs?"buffer":""}));case"string":throw new Error("'string' output type invalid for '"+s.bookType+"' files");default:throw new Error("Unrecognized type "+s.type)}return Qs.write(t,s)}function t9(t,s){var a=tn(s||{}),r=Q7(t,a);return s9(r,a)}function s9(t,s){var a={},r=Fs?"nodebuffer":typeof Uint8Array<"u"?"array":"string";if(s.compression&&(a.compression="DEFLATE"),s.password)a.type=r;else switch(s.type){case"base64":a.type="base64";break;case"binary":a.type="string";break;case"string":throw new Error("'string' output type invalid for '"+s.bookType+"' files");case"buffer":case"file":a.type=r;break;default:throw new Error("Unrecognized type "+s.type)}var i=t.FullPaths?Qs.write(t,{fileType:"zip",type:{nodebuffer:"buffer",string:"binary"}[a.type]||a.type,compression:!!s.compression}):t.generate(a);if(typeof Deno<"u"&&typeof i=="string"){if(s.type=="binary"||s.type=="base64")return i;i=new Uint8Array(Gf(i))}return s.password&&typeof encrypt_agile<"u"?ZT(encrypt_agile(i,s.password),s):s.type==="file"?sm(s.file,i):s.type=="string"?yu(i):i}function a9(t,s){var a=s||{},r=j7(t,a);return ZT(r,a)}function ui(t,s,a){a||(a="");var r=a+t;switch(s.type){case"base64":return Mu(Iu(r));case"binary":return Iu(r);case"string":return t;case"file":return sm(s.file,r,"utf8");case"buffer":return Fs?rl(r,"utf8"):typeof TextEncoder<"u"?new TextEncoder().encode(r):ui(r,{type:"binary"}).split("").map(function(i){return i.charCodeAt(0)})}throw new Error("Unrecognized type "+s.type)}function r9(t,s){switch(s.type){case"base64":return Mu(t);case"binary":return t;case"string":return t;case"file":return sm(s.file,t,"binary");case"buffer":return Fs?rl(t,"binary"):t.split("").map(function(a){return a.charCodeAt(0)})}throw new Error("Unrecognized type "+s.type)}function Lh(t,s){switch(s.type){case"string":case"base64":case"binary":for(var a="",r=0;r<t.length;++r)a+=String.fromCharCode(t[r]);return s.type=="base64"?Mu(a):s.type=="string"?yu(a):a;case"file":return sm(s.file,t);case"buffer":return t;default:throw new Error("Unrecognized type "+s.type)}}function JT(t,s){OP(),$B(t);var a=tn(s||{});if(a.cellStyles&&(a.cellNF=!0,a.sheetStubs=!0),a.type=="array"){a.type="binary";var r=JT(t,a);return a.type="array",Gf(r)}var i=0;if(a.sheet&&(typeof a.sheet=="number"?i=a.sheet:i=t.SheetNames.indexOf(a.sheet),!t.SheetNames[i]))throw new Error("Sheet not found: "+a.sheet+" : "+typeof a.sheet);switch(a.bookType||"xlsb"){case"xml":case"xlml":return ui(g7(t,a),a);case"slk":case"sylk":return ui(z8.from_sheet(t.Sheets[t.SheetNames[i]],a),a);case"htm":case"html":return ui(KT(t.Sheets[t.SheetNames[i]],a),a);case"txt":return r9(ek(t.Sheets[t.SheetNames[i]],a),a);case"csv":return ui(ej(t.Sheets[t.SheetNames[i]],a),a,"\uFEFF");case"dif":return ui(U8.from_sheet(t.Sheets[t.SheetNames[i]],a),a);case"dbf":return Lh(B8.from_sheet(t.Sheets[t.SheetNames[i]],a),a);case"prn":return ui(V8.from_sheet(t.Sheets[t.SheetNames[i]],a),a);case"rtf":return ui(Y8.from_sheet(t.Sheets[t.SheetNames[i]],a),a);case"eth":return ui(bT.from_sheet(t.Sheets[t.SheetNames[i]],a),a);case"fods":return ui(QT(t,a),a);case"wk1":return Lh(Bw.sheet_to_wk1(t.Sheets[t.SheetNames[i]],a),a);case"wk3":return Lh(Bw.book_to_wk3(t,a),a);case"biff2":a.biff||(a.biff=2);case"biff3":a.biff||(a.biff=3);case"biff4":return a.biff||(a.biff=4),Lh(qT(t,a),a);case"biff5":a.biff||(a.biff=5);case"biff8":case"xla":case"xls":return a.biff||(a.biff=8),a9(t,a);case"xlsx":case"xlsm":case"xlam":case"xlsb":case"numbers":case"ods":return t9(t,a);default:throw new Error("Unrecognized bookType |"+a.bookType+"|")}}function n9(t){if(!t.bookType){var s={xls:"biff8",htm:"html",slk:"sylk",socialcalc:"eth",Sh33tJS:"WTF"},a=t.file.slice(t.file.lastIndexOf(".")).toLowerCase();a.match(/^\.[a-z]+$/)&&(t.bookType=a.slice(1)),t.bookType=s[t.bookType]||t.bookType}}function i9(t,s,a){var r={};return r.type="file",r.file=s,n9(r),JT(t,r)}function l9(t,s,a,r,i,o,c,u){var f=jr(a),x=u.defval,h=u.raw||!Object.prototype.hasOwnProperty.call(u,"raw"),p=!0,g=i===1?[]:{};if(i!==1)if(Object.defineProperty)try{Object.defineProperty(g,"__rowNum__",{value:a,enumerable:!1})}catch{g.__rowNum__=a}else g.__rowNum__=a;if(!c||t[a])for(var b=s.s.c;b<=s.e.c;++b){var N=c?t[a][b]:t[r[b]+f];if(N===void 0||N.t===void 0){if(x===void 0)continue;o[b]!=null&&(g[o[b]]=x);continue}var y=N.v;switch(N.t){case"z":if(y==null)break;continue;case"e":y=y==0?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+N.t)}if(o[b]!=null){if(y==null)if(N.t=="e"&&y===null)g[o[b]]=null;else if(x!==void 0)g[o[b]]=x;else if(h&&y===null)g[o[b]]=null;else continue;else g[o[b]]=h&&(N.t!=="n"||N.t==="n"&&u.rawNumbers!==!1)?y:Ji(N,y,u);y!=null&&(p=!1)}}return{row:g,isempty:p}}function Cf(t,s){if(t==null||t["!ref"]==null)return[];var a={t:"n",v:0},r=0,i=1,o=[],c=0,u="",f={s:{r:0,c:0},e:{r:0,c:0}},x=s||{},h=x.range!=null?x.range:t["!ref"];switch(x.header===1?r=1:x.header==="A"?r=2:Array.isArray(x.header)?r=3:x.header==null&&(r=0),typeof h){case"string":f=oa(h);break;case"number":f=oa(t["!ref"]),f.s.r=h;break;default:f=h}r>0&&(i=0);var p=jr(f.s.r),g=[],b=[],N=0,y=0,S=Array.isArray(t),C=f.s.r,T=0,_={};S&&!t[C]&&(t[C]=[]);var G=x.skipHidden&&t["!cols"]||[],U=x.skipHidden&&t["!rows"]||[];for(T=f.s.c;T<=f.e.c;++T)if(!(G[T]||{}).hidden)switch(g[T]=Dr(T),a=S?t[C][T]:t[g[T]+p],r){case 1:o[T]=T-f.s.c;break;case 2:o[T]=g[T];break;case 3:o[T]=x.header[T-f.s.c];break;default:if(a==null&&(a={w:"__EMPTY",t:"s"}),u=c=Ji(a,null,x),y=_[c]||0,!y)_[c]=1;else{do u=c+"_"+y++;while(_[u]);_[c]=y,_[u]=1}o[T]=u}for(C=f.s.r+i;C<=f.e.r;++C)if(!(U[C]||{}).hidden){var F=l9(t,f,C,g,r,o,S,x);(F.isempty===!1||(r===1?x.blankrows!==!1:x.blankrows))&&(b[N++]=F.row)}return b.length=N,b}var qw=/"/g;function o9(t,s,a,r,i,o,c,u){for(var f=!0,x=[],h="",p=jr(a),g=s.s.c;g<=s.e.c;++g)if(r[g]){var b=u.dense?(t[a]||[])[g]:t[r[g]+p];if(b==null)h="";else if(b.v!=null){f=!1,h=""+(u.rawNumbers&&b.t=="n"?b.v:Ji(b,null,u));for(var N=0,y=0;N!==h.length;++N)if((y=h.charCodeAt(N))===i||y===o||y===34||u.forceQuotes){h='"'+h.replace(qw,'""')+'"';break}h=="ID"&&(h='"ID"')}else b.f!=null&&!b.F?(f=!1,h="="+b.f,h.indexOf(",")>=0&&(h='"'+h.replace(qw,'""')+'"')):h="";x.push(h)}return u.blankrows===!1&&f?null:x.join(c)}function ej(t,s){var a=[],r=s??{};if(t==null||t["!ref"]==null)return"";var i=oa(t["!ref"]),o=r.FS!==void 0?r.FS:",",c=o.charCodeAt(0),u=r.RS!==void 0?r.RS:`
`,f=u.charCodeAt(0),x=new RegExp((o=="|"?"\\|":o)+"+$"),h="",p=[];r.dense=Array.isArray(t);for(var g=r.skipHidden&&t["!cols"]||[],b=r.skipHidden&&t["!rows"]||[],N=i.s.c;N<=i.e.c;++N)(g[N]||{}).hidden||(p[N]=Dr(N));for(var y=0,S=i.s.r;S<=i.e.r;++S)(b[S]||{}).hidden||(h=o9(t,i,S,p,c,f,o,r),h!=null&&(r.strip&&(h=h.replace(x,"")),(h||r.blankrows!==!1)&&a.push((y++?u:"")+h)));return delete r.dense,a.join("")}function ek(t,s){s||(s={}),s.FS="	",s.RS=`
`;var a=ej(t,s);return a}function c9(t){var s="",a,r="";if(t==null||t["!ref"]==null)return[];var i=oa(t["!ref"]),o="",c=[],u,f=[],x=Array.isArray(t);for(u=i.s.c;u<=i.e.c;++u)c[u]=Dr(u);for(var h=i.s.r;h<=i.e.r;++h)for(o=jr(h),u=i.s.c;u<=i.e.c;++u)if(s=c[u]+o,a=x?(t[h]||[])[u]:t[s],r="",a!==void 0){if(a.F!=null){if(s=a.F,!a.f)continue;r=a.f,s.indexOf(":")==-1&&(s=s+":"+s)}if(a.f!=null)r=a.f;else{if(a.t=="z")continue;if(a.t=="n"&&a.v!=null)r=""+a.v;else if(a.t=="b")r=a.v?"TRUE":"FALSE";else if(a.w!==void 0)r="'"+a.w;else{if(a.v===void 0)continue;a.t=="s"?r="'"+a.v:r=""+a.v}}f[f.length]=s+"="+r}return f}function tk(t,s,a){var r=a||{},i=+!r.skipHeader,o=t||{},c=0,u=0;if(o&&r.origin!=null)if(typeof r.origin=="number")c=r.origin;else{var f=typeof r.origin=="string"?ar(r.origin):r.origin;c=f.r,u=f.c}var x,h={s:{c:0,r:0},e:{c:u,r:c+s.length-1+i}};if(o["!ref"]){var p=oa(o["!ref"]);h.e.c=Math.max(h.e.c,p.e.c),h.e.r=Math.max(h.e.r,p.e.r),c==-1&&(c=p.e.r+1,h.e.r=c+s.length-1+i)}else c==-1&&(c=0,h.e.r=s.length-1+i);var g=r.header||[],b=0;s.forEach(function(y,S){Nr(y).forEach(function(C){(b=g.indexOf(C))==-1&&(g[b=g.length]=C);var T=y[C],_="z",G="",U=qs({c:u+b,r:c+S+i});x=zu(o,U),T&&typeof T=="object"&&!(T instanceof Date)?o[U]=T:(typeof T=="number"?_="n":typeof T=="boolean"?_="b":typeof T=="string"?_="s":T instanceof Date?(_="d",r.cellDates||(_="n",T=en(T)),G=r.dateNF||_a[14]):T===null&&r.nullError&&(_="e",T=0),x?(x.t=_,x.v=T,delete x.w,delete x.R,G&&(x.z=G)):o[U]=x={t:_,v:T},G&&(x.z=G))})}),h.e.c=Math.max(h.e.c,u+g.length-1);var N=jr(c);if(i)for(b=0;b<g.length;++b)o[Dr(b+u)+N]={t:"s",v:g[b]};return o["!ref"]=Ga(h),o}function d9(t,s){return tk(null,t,s)}function zu(t,s,a){if(typeof s=="string"){if(Array.isArray(t)){var r=ar(s);return t[r.r]||(t[r.r]=[]),t[r.r][r.c]||(t[r.r][r.c]={t:"z"})}return t[s]||(t[s]={t:"z"})}return typeof s!="number"?zu(t,qs(s)):zu(t,qs({r:s,c:a||0}))}function u9(t,s){if(typeof s=="number"){if(s>=0&&t.SheetNames.length>s)return s;throw new Error("Cannot find sheet # "+s)}else if(typeof s=="string"){var a=t.SheetNames.indexOf(s);if(a>-1)return a;throw new Error("Cannot find sheet name |"+s+"|")}else throw new Error("Cannot find sheet |"+s+"|")}function m9(){return{SheetNames:[],Sheets:{}}}function h9(t,s,a,r){var i=1;if(!a)for(;i<=65535&&t.SheetNames.indexOf(a="Sheet"+i)!=-1;++i,a=void 0);if(!a||t.SheetNames.length>=65535)throw new Error("Too many worksheets");if(r&&t.SheetNames.indexOf(a)>=0){var o=a.match(/(^.*?)(\d+)$/);i=o&&+o[2]||0;var c=o&&o[1]||a;for(++i;i<=65535&&t.SheetNames.indexOf(a=c+i)!=-1;++i);}if(HT(a),t.SheetNames.indexOf(a)>=0)throw new Error("Worksheet with name |"+a+"| already exists!");return t.SheetNames.push(a),t.Sheets[a]=s,a}function f9(t,s,a){t.Workbook||(t.Workbook={}),t.Workbook.Sheets||(t.Workbook.Sheets=[]);var r=u9(t,s);switch(t.Workbook.Sheets[r]||(t.Workbook.Sheets[r]={}),a){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+a)}t.Workbook.Sheets[r].Hidden=a}function x9(t,s){return t.z=s,t}function sk(t,s,a){return s?(t.l={Target:s},a&&(t.l.Tooltip=a)):delete t.l,t}function p9(t,s,a){return sk(t,"#"+s,a)}function g9(t,s,a){t.c||(t.c=[]),t.c.push({t:s,a:a||"SheetJS"})}function v9(t,s,a,r){for(var i=typeof s!="string"?s:oa(s),o=typeof s=="string"?s:Ga(s),c=i.s.r;c<=i.e.r;++c)for(var u=i.s.c;u<=i.e.c;++u){var f=zu(t,c,u);f.t="n",f.F=o,delete f.v,c==i.s.r&&u==i.s.c&&(f.f=a,r&&(f.D=!0))}return t}var P0={encode_col:Dr,encode_row:jr,encode_cell:qs,encode_range:Ga,decode_col:$v,decode_row:Vv,split_cell:OM,decode_cell:ar,decode_range:pn,format_cell:Ji,sheet_add_aoa:sT,sheet_add_json:tk,sheet_add_dom:YT,aoa_to_sheet:dd,json_to_sheet:d9,table_to_sheet:XT,table_to_book:U7,sheet_to_csv:ej,sheet_to_txt:ek,sheet_to_json:Cf,sheet_to_html:KT,sheet_to_formulae:c9,sheet_to_row_object_array:Cf,sheet_get_cell:zu,book_new:m9,book_append_sheet:h9,book_set_sheet_visibility:f9,cell_set_number_format:x9,cell_set_hyperlink:sk,cell_set_internal_link:p9,cell_add_comment:g9,sheet_set_array_formula:v9,consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}};const j9=()=>{const t=Ka(),[s,a]=v.useState({upcomingSessions:0,openTickets:0,unreadMessages:0,todayAppointments:0});v.useEffect(()=>{r()},[]);const r=async()=>{try{const u={Authorization:`Bearer ${localStorage.getItem("token")}`},[f,x,h]=await Promise.allSettled([ye.get("/sessions?upcoming=true",{headers:u}),ye.get("/support/tickets?status=open",{headers:u}),ye.get("/appointments",{headers:u})]);a({upcomingSessions:f.status==="fulfilled"&&f.value?.data?.length||0,openTickets:x.status==="fulfilled"&&x.value?.data?.length||0,unreadMessages:0,todayAppointments:h.status==="fulfilled"&&h.value?.data?.filter(p=>{const g=new Date(p.date),b=new Date;return g.toDateString()===b.toDateString()}).length||0})}catch(c){console.error("Error fetching communication stats:",c)}},i=[{icon:ka,title:"Live Sessions",description:"Schedule and host video meetings",href:"/dashboard/sessions",color:"text-blue-500",bgColor:"bg-blue-50 dark:bg-blue-950",stat:s.upcomingSessions,statLabel:"upcoming",badge:"New",badgeColor:"bg-green-500"},{icon:Pf,title:"Support Tickets",description:"Manage customer support requests",href:"/dashboard/support",color:"text-purple-500",bgColor:"bg-purple-50 dark:bg-purple-950",stat:s.openTickets,statLabel:"open"},{icon:Zs,title:"Messages",description:"Chat with clients and team",href:"/dashboard/messages",color:"text-green-500",bgColor:"bg-green-50 dark:bg-green-950",stat:s.unreadMessages,statLabel:"unread"},{icon:ms,title:"Appointments",description:"View and manage bookings",href:"/dashboard/appointments",color:"text-orange-500",bgColor:"bg-orange-50 dark:bg-orange-950",stat:s.todayAppointments,statLabel:"today"}],o=[{icon:ka,label:"Schedule Session",onClick:()=>t("/dashboard/sessions"),variant:"default"},{icon:Zs,label:"New Ticket",onClick:()=>t("/dashboard/support"),variant:"outline"},{icon:Gs,label:"Send Email",onClick:()=>window.location.href="mailto:",variant:"outline"}];return e.jsxs(K,{className:"w-full",children:[e.jsx(pe,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs(ge,{className:"flex items-center gap-2",children:[e.jsx(Xt,{className:"h-5 w-5"}),"Communication Hub"]}),e.jsx(lt,{children:"Manage all your client communications in one place"})]}),e.jsxs(R,{variant:"ghost",size:"sm",onClick:()=>t("/dashboard/support"),children:["View All",e.jsx(Ol,{className:"h-4 w-4 ml-2"})]})]})}),e.jsxs(X,{className:"space-y-6",children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:i.map(c=>e.jsx(K,{className:"cursor-pointer hover:shadow-md transition-shadow relative overflow-hidden group",onClick:()=>t(c.href),children:e.jsxs(X,{className:"p-4",children:[e.jsx("div",{className:`${c.bgColor} rounded-lg p-3 w-fit mb-3 group-hover:scale-110 transition-transform`,children:e.jsx(c.icon,{className:`h-6 w-6 ${c.color}`})}),e.jsxs("h3",{className:"font-semibold text-sm mb-1 flex items-center gap-2",children:[c.title,c.badge&&e.jsx(_e,{className:`${c.badgeColor} text-white text-[10px] px-1.5 py-0`,children:c.badge})]}),e.jsx("p",{className:"text-xs text-muted-foreground mb-2",children:c.description}),c.stat!==void 0&&e.jsxs("div",{className:"text-lg font-bold",children:[c.stat,e.jsx("span",{className:"text-xs text-muted-foreground font-normal ml-1",children:c.statLabel})]})]})},c.title))}),e.jsxs("div",{className:"border-t pt-4",children:[e.jsx("h4",{className:"text-sm font-semibold mb-3",children:"Quick Actions"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:o.map(c=>e.jsxs(R,{variant:c.variant,size:"sm",onClick:c.onClick,className:"gap-2",children:[e.jsx(c.icon,{className:"h-4 w-4"}),c.label]},c.label))})]}),e.jsxs("div",{className:"bg-muted/50 rounded-lg p-4 space-y-2",children:[e.jsxs("h4",{className:"text-sm font-semibold flex items-center gap-2",children:[e.jsx($s,{className:"h-4 w-4"}),"Communication Tips"]}),e.jsxs("ul",{className:"text-xs text-muted-foreground space-y-1",children:[e.jsx("li",{children:"• Use Live Sessions for face-to-face client meetings"}),e.jsx("li",{children:"• Create support tickets for trackable customer issues"}),e.jsx("li",{children:"• Schedule appointments for structured consultations"}),e.jsx("li",{children:"• Response time affects customer satisfaction"})]})]})]})]})},M0=async()=>{try{const t=localStorage.getItem("token");if(!t)return null;const s={Authorization:`Bearer ${t}`},[a,r,i,o,c]=await Promise.allSettled([ye.get("/orders",{headers:s}),ye.get("/products",{headers:s}),ye.get("/transactions",{headers:s}),ye.get("/appointments",{headers:s}),ye.get("/customers",{headers:s})]),u=a.status==="fulfilled"?a.value?.data||[]:[],f=u.length,x=i.status==="fulfilled"?i.value?.data||[]:[],h=Array.isArray(x)?x.reduce((E,A)=>E+(Number(A.amount)||0),0):0,g=(c.status==="fulfilled"?c.value?.data||[]:[]).length,b=isNaN(h)?0:h,N=isNaN(f)?0:f,y=isNaN(g)?0:g,S=o.status==="fulfilled"?o.value?.data||[]:[],C=new Date;C.setHours(0,0,0,0);const T=new Date(C);T.setDate(T.getDate()+1);const _=S.filter(E=>{const A=new Date(E.time||E.date);return A>=C&&A<T}).length,G=new Date().getMonth(),U=u.filter(E=>new Date(E.createdAt).getMonth()===G).length,F=u.filter(E=>new Date(E.createdAt).getMonth()===G-1).length,k=F>0?((U-F)/F*100).toFixed(1):0;return{stats:[{title:"Total Revenue",value:`KES ${b.toLocaleString()}`,change:"+12.3%",trend:"up",icon:ea,description:"from last month"},{title:"Total Orders",value:N.toString(),change:`${k>0?"+":""}${k}%`,trend:k>=0?"up":"down",icon:js,description:"from last month"},{title:"Active Customers",value:y.toString(),change:"+5.2%",trend:"up",icon:Xt,description:"total customers"},{title:"Appointments Today",value:(isNaN(_)?0:_).toString(),change:S.length>0?`${S.length} total`:"0 total",trend:_>0?"up":"down",icon:ms,description:"scheduled today"}]}}catch(t){return console.error("Error fetching dashboard data:",t),{stats:[{title:"Total Revenue",value:"KES 0",change:"0%",trend:"up",icon:ea,description:"from last month"},{title:"Total Orders",value:"0",change:"0%",trend:"up",icon:js,description:"from last month"},{title:"Active Customers",value:"0",change:"0%",trend:"up",icon:Xt,description:"total customers"},{title:"Appointments Today",value:"0",change:"0",trend:"down",icon:ms,description:"scheduled today"}]}}},y9=()=>{const{user:t,isAuthenticated:s,loading:a}=Es();AP();const r=Ka(),[i,o]=v.useState(null),[c,u]=v.useState(!1),[f,x]=v.useState(!1),[h,p]=v.useState(!1),g=async()=>{p(!0);const S=await M0();o(S),p(!1)},b=[{name:"Add Product",icon:qt,path:"/dashboard/products",color:"text-blue-600"},{name:"Add Service",icon:Ml,path:"/dashboard/services",color:"text-green-600"},{name:"Create Discount",icon:Fl,path:"/dashboard/discounts",color:"text-purple-600"},{name:"View Analytics",icon:er,path:"/dashboard/analytics",color:"text-orange-600"},{name:"View Reports",icon:ya,path:"/dashboard/reports",color:"text-red-600"},{name:"Settings",icon:Ea,path:"/dashboard/settings",color:"text-gray-600"}];if(v.useEffect(()=>{s&&M0().then(o)},[s]),v.useEffect(()=>{if(!s)return;const S=setInterval(()=>{M0().then(o)},3e4);return()=>clearInterval(S)},[s]),a)return e.jsx("div",{children:"Loading..."});if(!s)return e.jsx("div",{children:"Please log in to view your dashboard."});if(!i)return e.jsx("div",{children:"Loading dashboard data..."});const{stats:N}=i,y=()=>{const S=P0.json_to_sheet(N.map(T=>({Title:T.title,Value:T.value,Change:T.change,Trend:T.trend,Description:T.description}))),C=P0.book_new();P0.book_append_sheet(C,S,"Stats Report"),i9(C,"dashboard_report.xlsx")};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold text-foreground",children:["Welcome back, ",e.jsx("span",{className:"text-green-500",children:t?t.name:"Guest"}),"!"]}),e.jsx("p",{className:"text-muted-foreground",children:"Here's what's happening with your business today."})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs(R,{variant:"outline",onClick:g,disabled:h,children:[e.jsx(is,{className:`mr-2 h-4 w-4 ${h?"animate-spin":""}`}),h?"Refreshing...":"Refresh"]}),e.jsxs(R,{variant:"outline",onClick:()=>u(!c),children:[e.jsx(la,{className:"mr-2 h-4 w-4"}),"View Reports"]}),e.jsxs(R,{onClick:()=>x(!0),children:[e.jsx(Hs,{className:"mr-2 h-4 w-4"}),"Quick Action"]})]})]}),c&&e.jsxs("div",{className:"mt-4",children:[e.jsxs(K,{children:[e.jsxs(pe,{children:[e.jsx(ge,{children:"Stats Report"}),e.jsx(lt,{children:"Generated Report of Business Stats"})]}),e.jsx(X,{children:e.jsxs("table",{className:"min-w-full table-auto",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2 text-left",children:"Title"}),e.jsx("th",{className:"px-4 py-2 text-left",children:"Value"}),e.jsx("th",{className:"px-4 py-2 text-left",children:"Change"}),e.jsx("th",{className:"px-4 py-2 text-left",children:"Trend"}),e.jsx("th",{className:"px-4 py-2 text-left",children:"Description"})]})}),e.jsx("tbody",{children:N.map(S=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-2",children:S.title}),e.jsx("td",{className:"px-4 py-2",children:S.value}),e.jsx("td",{className:"px-4 py-2",children:S.change}),e.jsx("td",{className:"px-4 py-2",children:S.trend==="up"?"📈":"📉"}),e.jsx("td",{className:"px-4 py-2",children:S.description})]},S.title))})]})})]}),e.jsx(R,{className:"mt-4",onClick:y,children:"Download Report (Excel)"})]}),e.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-4",children:N.map(S=>{const C=S.icon;return e.jsxs(K,{children:[e.jsxs(pe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(ge,{className:"text-sm font-medium",children:S.title}),e.jsx(C,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(X,{children:[e.jsx("div",{className:"text-2xl font-bold",children:S.value}),e.jsxs("div",{className:"flex items-center text-xs text-muted-foreground",children:[S.trend==="up"?e.jsx(Is,{className:"mr-1 h-3 w-3 text-green-600"}):e.jsx(gi,{className:"mr-1 h-3 w-3 text-red-600"}),e.jsx("span",{className:S.trend==="up"?"text-green-600":"text-red-600",children:S.change}),e.jsx("span",{className:"ml-1",children:S.description})]})]})]},S.title)})}),e.jsx(j9,{}),e.jsxs(K,{children:[e.jsxs(pe,{children:[e.jsx(ge,{children:"Quick Actions"}),e.jsx(lt,{children:"Common tasks and shortcuts"})]}),e.jsx(X,{children:e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[e.jsxs(R,{variant:"outline",className:"h-auto flex-col py-4",onClick:()=>r("/dashboard/products"),children:[e.jsx(qt,{className:"h-6 w-6 mb-2"}),e.jsx("span",{className:"text-xs",children:"Add Product"})]}),e.jsxs(R,{variant:"outline",className:"h-auto flex-col py-4",onClick:()=>r("/dashboard/services"),children:[e.jsx(Ml,{className:"h-6 w-6 mb-2"}),e.jsx("span",{className:"text-xs",children:"Add Service"})]}),e.jsxs(R,{variant:"outline",className:"h-auto flex-col py-4",onClick:()=>r("/dashboard/appointments"),children:[e.jsx(ms,{className:"h-6 w-6 mb-2"}),e.jsx("span",{className:"text-xs",children:"Appointments"})]}),e.jsxs(R,{variant:"outline",className:"h-auto flex-col py-4",onClick:()=>r("/dashboard/discounts"),children:[e.jsx(Fl,{className:"h-6 w-6 mb-2"}),e.jsx("span",{className:"text-xs",children:"Discounts"})]})]})})]}),e.jsx(Ft,{open:f,onOpenChange:x,children:e.jsxs(It,{className:"sm:max-w-md",children:[e.jsxs(Lt,{children:[e.jsx(Bt,{children:"Quick Actions"}),e.jsx(es,{children:"Choose an action to perform quickly"})]}),e.jsx("div",{className:"grid grid-cols-2 gap-3",children:b.map(S=>{const C=S.icon;return e.jsxs(R,{variant:"outline",className:"h-20 flex-col gap-2",onClick:()=>{r(S.path),x(!1)},children:[e.jsx(C,{className:`h-6 w-6 ${S.color}`}),e.jsx("span",{className:"text-xs",children:S.name})]},S.name)})})]})})]})};function ak(){const t=[{id:1,icon:qt,title:"Inventory Management",description:"Track stock levels, manage suppliers, and automate reordering with real-time inventory updates.",features:["Real-time tracking","Low stock alerts","Supplier management","Barcode scanning"]},{id:2,icon:js,title:"E-Commerce Integration",description:"Seamlessly connect your online store with inventory and order management systems.",features:["Multi-platform sync","Order processing","Product catalog","Payment integration"]},{id:3,icon:ms,title:"Appointment Scheduling",description:"Manage bookings, send reminders, and optimize your schedule with intelligent calendar management.",features:["Online booking","SMS reminders","Calendar sync","Staff scheduling"]},{id:4,icon:ea,title:"Financial Management",description:"Handle invoicing, track expenses, and monitor cash flow with comprehensive financial tools.",features:["Invoice generation","Expense tracking","Payment processing","Financial reports"]},{id:5,icon:er,title:"Analytics & Insights",description:"Make data-driven decisions with detailed analytics and AI-powered business insights.",features:["Sales analytics","Performance metrics","Trend analysis","Custom reports"]},{id:6,icon:Xt,title:"Customer Management",description:"Build stronger relationships with comprehensive customer profiles and communication tools.",features:["Customer profiles","Communication history","Loyalty programs","Feedback management"]},{id:7,icon:ta,title:"Security & Compliance",description:"Enterprise-grade security with data encryption and compliance with industry standards.",features:["Data encryption","Access controls","Audit trails","GDPR compliance"]},{id:8,icon:Kr,title:"Mobile Access",description:"Manage your business on-the-go with our responsive mobile interface and dedicated apps.",features:["Mobile responsive","Offline access","Push notifications","Cross-platform"]}],s=[{icon:Qt,title:"24/7 Support",description:"Round-the-clock customer support"},{icon:Is,title:"Scalable",description:"Grows with your business needs"},{icon:ya,title:"Documentation",description:"Comprehensive guides and tutorials"},{icon:Ea,title:"Customizable",description:"Tailor the platform to your workflow"}];return e.jsx("section",{className:"py-16 bg-background",children:e.jsxs("div",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"text-center mb-16",children:[e.jsxs("h2",{className:"text-4xl font-bold text-foreground mb-4",children:["Powerful ",e.jsx("span",{className:"text-green-400",children:"Features "})," for Your Business"]}),e.jsx("p",{className:"text-xl text-muted-foreground max-w-3xl mx-auto",children:"Everything you need to streamline operations, boost productivity, and grow your business in one comprehensive platform."})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-8 mb-16",children:t.map(a=>{const r=a.icon;return e.jsxs("div",{className:"bg-card p-6 rounded-lg border shadow-sm hover:shadow-md transition-shadow duration-300 group",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("div",{className:"p-3 bg-primary/10 rounded-lg mr-4 group-hover:bg-primary/20 transition-colors duration-300",children:e.jsx(r,{className:"h-6 w-6 text-green-500"})}),e.jsx("h3",{className:"text-lg font-semibold text-foreground",children:a.title})]}),e.jsx("p",{className:"text-muted-foreground mb-4 text-sm leading-relaxed",children:a.description}),e.jsx("ul",{className:"space-y-2",children:a.features.map((i,o)=>e.jsxs("li",{className:"flex items-center text-sm text-muted-foreground",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-primary rounded-full mr-2 flex-shrink-0"}),i]},o))})]},a.id)})}),e.jsxs("div",{className:"bg-muted/30 rounded-2xl p-8",children:[e.jsx("h3",{className:"text-2xl font-bold text-center text-foreground mb-8",children:"Why Choose ominbiz?"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:s.map((a,r)=>{const i=a.icon;return e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"inline-flex p-4 bg-primary/10 rounded-full mb-4",children:e.jsx(i,{className:"h-8 w-8 text-green-500"})}),e.jsx("h4",{className:"font-semibold text-foreground mb-2",children:a.title}),e.jsx("p",{className:"text-sm text-muted-foreground",children:a.description})]},r)})})]}),e.jsxs("div",{className:"text-center mt-16",children:[e.jsx("h3",{className:"text-2xl font-bold text-foreground mb-4",children:"Ready to Transform Your Business?"}),e.jsx("p",{className:"text-muted-foreground mb-8 max-w-2xl mx-auto",children:"Join thousands of businesses that have streamlined their operations with ominbiz. Start your free trial today and see the difference."}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[e.jsx(Ht,{to:"/signup",children:e.jsx("button",{className:"bg-green-500 text-white px-8 py-3 rounded-lg font-medium cursor-pointer hover:bg-green-400  transition-colors duration-200",children:"Start Free Trial"})}),e.jsx(Ht,{to:"/contact",children:e.jsx("button",{className:"border border-input px-8 py-3 rounded-lg  cursor-pointer font-medium text-foreground hover:bg-accent hover:text-accent-foreground transition-colors duration-200",children:"Schedule Demo"})})]})]})]})})}const $o=()=>{const[t,s]=v.useState({});return e.jsx("div",{className:"footer",children:e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-8",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-3xl font-bold mb-4",children:["Omni",e.jsx("span",{className:"text-green-500",children:"Biz"})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Streamline your business operations with our comprehensive management platform."})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-4",children:"Features"}),e.jsxs("ul",{className:"space-y-2 text-sm",children:[e.jsx("li",{children:e.jsx(Ht,{to:"/features",className:"hover:text-primary",children:"Inventory Management"})}),e.jsx("li",{children:e.jsx(Ht,{to:"/features",className:"hover:text-primary",children:"E-commerce"})}),e.jsx("li",{children:e.jsx(Ht,{to:"/features",className:"hover:text-primary",children:"Appointments"})}),e.jsx("li",{children:e.jsx(Ht,{to:"/features",className:"hover:text-primary",children:"Finance"})})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-4",children:"Company"}),e.jsxs("ul",{className:"space-y-2 text-sm",children:[e.jsx("li",{children:e.jsx(Ht,{to:"/about",className:"hover:text-primary",children:"About"})}),e.jsx("li",{children:e.jsx(Ht,{to:"/contact",className:"hover:text-primary",children:"Contact"})}),e.jsx("li",{children:e.jsx(Ht,{to:"/contact",className:"hover:text-primary",children:"Support"})})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-4",children:"Legal"}),e.jsxs("ul",{className:"space-y-2 text-sm",children:[e.jsx("li",{children:e.jsx(Ht,{to:"/privacy",className:"hover:text-primary",children:"Privacy Policy"})}),e.jsx("li",{children:e.jsx(Ht,{to:"/terms",className:"hover:text-primary",children:"Terms of Service"})})]})]})]}),e.jsx("div",{className:"border-t mt-8 pt-8 text-center text-sm text-muted-foreground",children:e.jsxs("p",{children:["© ",new Date().getFullYear()," ",e.jsxs("span",{className:"text-2xl font-bold",children:["Omni",e.jsx("span",{className:"text-green-500",children:"Biz"})]}),". All rights reserved."]})})]})})};function N9({title:t,titleId:s,...a},r){return v.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":s},a),t?v.createElement("title",{id:s},t):null,v.createElement("path",{fillRule:"evenodd",d:"M12.97 3.97a.75.75 0 0 1 1.06 0l7.5 7.5a.75.75 0 0 1 0 1.06l-7.5 7.5a.75.75 0 1 1-1.06-1.06l6.22-6.22H3a.75.75 0 0 1 0-1.5h16.19l-6.22-6.22a.75.75 0 0 1 0-1.06Z",clipRule:"evenodd"}))}const b9=v.forwardRef(N9);function w9({title:t,titleId:s,...a},r){return v.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":s},a),t?v.createElement("title",{id:s},t):null,v.createElement("path",{fillRule:"evenodd",d:"M15.22 6.268a.75.75 0 0 1 .968-.431l5.942 2.28a.75.75 0 0 1 .431.97l-2.28 5.94a.75.75 0 1 1-1.4-.537l1.63-4.251-1.086.484a11.2 11.2 0 0 0-5.45 5.173.75.75 0 0 1-1.199.19L9 12.312l-6.22 6.22a.75.75 0 0 1-1.06-1.061l6.75-6.75a.75.75 0 0 1 1.06 0l3.606 3.606a12.695 12.695 0 0 1 5.68-4.974l1.086-.483-4.251-1.632a.75.75 0 0 1-.432-.97Z",clipRule:"evenodd"}))}const Kw=v.forwardRef(w9);function S9({title:t,titleId:s,...a},r){return v.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":s},a),t?v.createElement("title",{id:s},t):null,v.createElement("path",{fillRule:"evenodd",d:"M3 6.75A.75.75 0 0 1 3.75 6h16.5a.75.75 0 0 1 0 1.5H3.75A.75.75 0 0 1 3 6.75ZM3 12a.75.75 0 0 1 .75-.75h16.5a.75.75 0 0 1 0 1.5H3.75A.75.75 0 0 1 3 12Zm0 5.25a.75.75 0 0 1 .75-.75h16.5a.75.75 0 0 1 0 1.5H3.75a.75.75 0 0 1-.75-.75Z",clipRule:"evenodd"}))}const C9=v.forwardRef(S9);function T9({title:t,titleId:s,...a},r){return v.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":s},a),t?v.createElement("title",{id:s},t):null,v.createElement("path",{fillRule:"evenodd",d:"M12.516 2.17a.75.75 0 0 0-1.032 0 11.209 11.209 0 0 1-7.877 3.08.75.75 0 0 0-.722.515A12.74 12.74 0 0 0 2.25 9.75c0 5.942 4.064 10.933 9.563 12.348a.749.749 0 0 0 .374 0c5.499-1.415 9.563-6.406 9.563-12.348 0-1.39-.223-2.73-.635-3.985a.75.75 0 0 0-.722-.516l-.143.001c-2.996 0-5.717-1.17-7.734-3.08Zm3.094 8.016a.75.75 0 1 0-1.22-.872l-3.236 4.53L9.53 12.22a.75.75 0 0 0-1.06 1.06l2.25 2.25a.75.75 0 0 0 1.14-.094l3.75-5.25Z",clipRule:"evenodd"}))}const k9=v.forwardRef(T9);function E9({title:t,titleId:s,...a},r){return v.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":s},a),t?v.createElement("title",{id:s},t):null,v.createElement("path",{fillRule:"evenodd",d:"M8.25 6.75a3.75 3.75 0 1 1 7.5 0 3.75 3.75 0 0 1-7.5 0ZM15.75 9.75a3 3 0 1 1 6 0 3 3 0 0 1-6 0ZM2.25 9.75a3 3 0 1 1 6 0 3 3 0 0 1-6 0ZM6.31 15.117A6.745 6.745 0 0 1 12 12a6.745 6.745 0 0 1 6.709 7.498.75.75 0 0 1-.372.568A12.696 12.696 0 0 1 12 21.75c-2.305 0-4.47-.612-6.337-1.684a.75.75 0 0 1-.372-.568 6.787 6.787 0 0 1 1.019-4.38Z",clipRule:"evenodd"}),v.createElement("path",{d:"M5.082 14.254a8.287 8.287 0 0 0-1.308 5.135 9.687 9.687 0 0 1-1.764-.44l-.115-.04a.563.563 0 0 1-.373-.487l-.01-.121a3.75 3.75 0 0 1 3.57-4.047ZM20.226 19.389a8.287 8.287 0 0 0-1.308-5.135 3.75 3.75 0 0 1 3.57 4.047l-.01.121a.563.563 0 0 1-.373.486l-.115.04c-.567.2-1.156.349-1.764.441Z"}))}const A9=v.forwardRef(E9);function _9({title:t,titleId:s,...a},r){return v.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":s},a),t?v.createElement("title",{id:s},t):null,v.createElement("path",{fillRule:"evenodd",d:"M5.47 5.47a.75.75 0 0 1 1.06 0L12 10.94l5.47-5.47a.75.75 0 1 1 1.06 1.06L13.06 12l5.47 5.47a.75.75 0 1 1-1.06 1.06L12 13.06l-5.47 5.47a.75.75 0 0 1-1.06-1.06L10.94 12 5.47 6.53a.75.75 0 0 1 0-1.06Z",clipRule:"evenodd"}))}const D9=v.forwardRef(_9);function O9(){return e.jsxs("section",{className:"bg-gray-200 flex flex-col md:flex-row items-center md:h-screen px-4 sm:px-6 lg:px-10 py-10",children:[e.jsxs("div",{className:"space-y-5 w-full md:w-1/2",children:[e.jsxs("p",{className:"bg-green-500 mt-4 text-white flex items-center w-fit px-4 py-2 rounded-md text-sm",children:[e.jsx(Kw,{className:"w-5 h-5 text-white mr-2"}),"Trusted by 10,000+ businesses"]}),e.jsxs("h1",{className:"text-3xl sm:text-4xl md:text-6xl font-bold text-gray-800 leading-tight",children:["Complete Business ",e.jsx("span",{className:"text-green-600",children:"Management"})," ","Solution"]}),e.jsx("p",{className:"text-base sm:text-lg md:text-2xl font-medium text-gray-600",children:"Streamline your entire business with our all-in-one platform. Manage inventory, run your e-commerce store, schedule appointments, and track finances — all from one beautiful dashboard."}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4",children:[e.jsxs("p",{className:"flex items-center text-gray-700",children:[e.jsx(A9,{className:"w-8 h-8 text-green-600 mr-2"}),"10,000+ users"]}),e.jsxs("p",{className:"flex items-center text-gray-700",children:[e.jsx(k9,{className:"w-8 h-8 text-green-600 mr-2"}),"Bank-level Security"]}),e.jsxs("p",{className:"flex items-center text-gray-700",children:[e.jsx(Kw,{className:"w-8 h-8 text-green-600 mr-2"}),"99.9% Uptime"]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 sm:gap-10",children:[e.jsx(Ht,{to:"/signup",children:e.jsxs(R,{className:"bg-green-500 text-white px-10 py-6 hover:bg-green-400 flex items-center justify-center gap-2",children:["Start free trial ",e.jsx(b9,{className:"w-5 h-5"})]})}),e.jsx(Ht,{to:"/features",children:e.jsx(R,{className:"px-10 py-6 border border-gray-400 text-gray-200",children:"Learn more"})})]}),e.jsx("p",{className:"text-sm text-gray-500",children:"No credit card required • 14-day free trial • Cancel anytime"})]}),e.jsx("div",{className:"mt-10 md:mt-0 md:ml-10 w-full md:w-[60%]",children:e.jsx("img",{src:"https://preview--verdant-manage.lovable.app/assets/hero-dashboard-CKmWT72o.jpg",alt:"Dashboard preview",className:"rounded w-full max-w-md sm:max-w-lg md:max-w-2xl mx-auto"})})]})}const Ho=()=>{const[t,s]=v.useState(!1);return v.useEffect(()=>{const a=r=>{t&&!r.target.closest("nav")&&s(!1)};return document.addEventListener("click",a),()=>document.removeEventListener("click",a)},[t]),e.jsx("nav",{className:"bg-background border-b border-border sticky top-0 z-50",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"flex justify-between items-center h-16",children:[e.jsxs(Ht,{to:"/",className:"flex items-center space-x-2",children:[e.jsx("img",{src:"https://2aa832b0f010801d3551c6c63b116063.cdn.bubble.io/cdn-cgi/image/w=48,h=48,f=auto,dpr=1,fit=contain/f1758225569468x933635082935872100/logo.webp",alt:"ominbizHub Logo"}),e.jsxs("span",{className:"text-xl font-bold text-foreground",children:["Omin",e.jsx("span",{className:"text-green-500",children:"BIZ"})]})]}),e.jsxs("div",{className:"hidden md:flex items-center space-x-8",children:[e.jsx(Ht,{to:"/features",className:"text-foreground hover:text-primary transition-colors",children:"Features"}),e.jsx(Ht,{to:"/pricing",className:"text-foreground hover:text-primary transition-colors",children:"Pricing"}),e.jsx(Ht,{to:"/about",className:"text-foreground hover:text-primary transition-colors",children:"About"}),e.jsx(Ht,{to:"/contact",className:"text-foreground hover:text-primary transition-colors",children:"Contact"})]}),e.jsxs("div",{className:"hidden md:flex items-center space-x-4",children:[e.jsx(Ht,{to:"/loginpage",children:e.jsx(R,{variant:"ghost",children:"Login"})}),e.jsx(Ht,{to:"/signup",children:e.jsx(R,{className:"bg-green-500 py-6 px-8 cursor-pointer hover:bg-green-400",children:"Start Free Trial"})})]}),e.jsx("div",{className:"md:hidden",children:e.jsx(R,{variant:"ghost",size:"icon",onClick:()=>s(!t),children:t?e.jsx(D9,{className:"h-6 w-6"}):e.jsx(C9,{className:"h-6 w-6"})})})]}),t&&e.jsx("div",{className:"md:hidden",children:e.jsxs("div",{className:"px-2 pt-2 pb-3 space-y-1 bg-background border-t border-border",children:[e.jsx(Ht,{to:"/features",className:"block px-3 py-2 text-foreground hover:text-primary transition-colors",onClick:()=>s(!1),children:"Features"}),e.jsx(Ht,{to:"/pricing",className:"block px-3 py-2 text-foreground hover:text-primary transition-colors",onClick:()=>s(!1),children:"Pricing"}),e.jsx(Ht,{to:"/about",className:"block px-3 py-2 text-foreground hover:text-primary transition-colors",onClick:()=>s(!1),children:"About"}),e.jsx(Ht,{to:"/contact",className:"block px-3 py-2 text-foreground hover:text-primary transition-colors",onClick:()=>s(!1),children:"Contact"}),e.jsxs("div",{className:"pt-4 space-y-2",children:[e.jsx(Ht,{to:"/loginpage",onClick:()=>s(!1),children:e.jsx(R,{variant:"ghost",className:"w-full",children:"Login"})}),e.jsx(Ht,{to:"/signup",onClick:()=>s(!1),children:e.jsx(R,{className:"bg-green-500 py-6 px-8 cursor-pointer w-full",children:"Start Free Trial"})})]})]})})]})})},R9=[{name:"Sarah Chebet",role:"Restaurant Owner",company:"Green Leaf Bistro",content:"BizHub transformed how we manage our restaurant. From inventory tracking to appointment reservations, everything is seamless. Our efficiency increased by 40%!",rating:5,avatar:"SJ"},{name:"Mike Simiyu",role:"Retail Manager",company:"Tech Gadgets Plus",content:"The e-commerce integration is incredible. We went from manual order processing to complete automation. Our online sales doubled in just 3 months.",rating:5,avatar:"MC"},{name:"Emily Wangoi",role:"Salon Owner",company:"Bella Beauty Studio",content:"The appointment scheduling feature is a game-changer. Clients love the automatic reminders, and we've reduced no-shows by 60%. Highly recommended!",rating:5,avatar:"ER"}],P9=()=>e.jsx("section",{className:"py-16 lg:py-24 bg-secondary/30",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"text-center max-w-3xl mx-auto mb-16",children:[e.jsxs("h2",{className:"text-3xl lg:text-5xl font-bold text-foreground mb-6",children:["Trusted by Business Owners",e.jsx("span",{className:"text-green-500 block",children:"Across Industries"})]}),e.jsx("p",{className:"text-xl text-muted-foreground",children:"See how BizHub is helping businesses streamline operations and accelerate growth."})]}),e.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-8",children:R9.map(t=>e.jsxs(K,{className:"relative group hover:shadow-md transition-all duration-200",children:[e.jsx("div",{className:"absolute -top-3 -left-3 w-8 h-8 bg-gray-200 rounded-full flex items-center justify-center opacity-80 group-hover:opacity-100 transition-opacity",children:e.jsx(p_,{className:"h-4 w-4 text-green-700"})}),e.jsxs(X,{className:"space-y-4 pt-6",children:[e.jsx("div",{className:"flex items-center space-x-1",children:[...Array(t.rating)].map((s,a)=>e.jsx(Ja,{className:"h-4 w-4 fill-amber-400 text-amber-400"},a))}),e.jsxs("p",{className:"text-foreground leading-relaxed",children:['"',t.content,'"']}),e.jsxs("div",{className:"flex items-center space-x-3 pt-4 border-t border-border",children:[e.jsx("div",{className:"w-10 h-10 bg-primary/10 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-sm font-semibold text-primary",children:t.avatar})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-foreground",children:t.name}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:[t.role,", ",t.company]})]})]})]})]},t.name))}),e.jsxs("div",{className:"mt-16 grid grid-cols-2 md:grid-cols-4 gap-8 text-center",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex flex-col items-center justify-center space-y-1",children:[e.jsx(Xt,{className:"h-6 w-6 text-green-500"}),e.jsx("div",{className:"text-3xl font-bold text-green-500",children:"10,000+"})]}),e.jsx("div",{className:"text-muted-foreground",children:"Active Users"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex flex-col items-center justify-center space-y-1",children:[e.jsx(g_,{className:"h-6 w-6 text-green-500"}),e.jsx("div",{className:"text-3xl font-bold text-green-500",children:"99.9%"})]}),e.jsx("div",{className:"text-muted-foreground",children:"Uptime"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex flex-col items-center justify-center space-y-1",children:[e.jsx(v_,{className:"h-6 w-6 text-green-500"}),e.jsx("div",{className:"text-3xl font-bold text-green-500",children:"24/7"})]}),e.jsx("div",{className:"text-muted-foreground",children:"Support"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex flex-col items-center justify-center space-y-1",children:[e.jsx(Ja,{className:"h-6 w-6 text-green-500 fill-green-500"}),e.jsx("div",{className:"text-3xl font-bold text-green-500",children:"4.9/5"})]}),e.jsx("div",{className:"text-muted-foreground",children:"User Rating"})]})]})]})});function M9(){return e.jsxs(e.Fragment,{children:[e.jsx(Ho,{}),e.jsx(O9,{}),e.jsx(ak,{}),e.jsx(P9,{}),e.jsx($o,{})]})}const F9="modulepreload",I9=function(t){return"/"+t},Yw={},ql=function(s,a,r){let i=Promise.resolve();if(a&&a.length>0){let f=function(x){return Promise.all(x.map(h=>Promise.resolve(h).then(p=>({status:"fulfilled",value:p}),p=>({status:"rejected",reason:p}))))};document.getElementsByTagName("link");const c=document.querySelector("meta[property=csp-nonce]"),u=c?.nonce||c?.getAttribute("nonce");i=f(a.map(x=>{if(x=I9(x),x in Yw)return;Yw[x]=!0;const h=x.endsWith(".css"),p=h?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${x}"]${p}`))return;const g=document.createElement("link");if(g.rel=h?"stylesheet":F9,h||(g.as="script"),g.crossOrigin="",g.href=x,u&&g.setAttribute("nonce",u),document.head.appendChild(g),h)return new Promise((b,N)=>{g.addEventListener("load",b),g.addEventListener("error",()=>N(new Error(`Unable to preload CSS for ${x}`)))})}))}function o(c){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=c,window.dispatchEvent(u),!u.defaultPrevented)throw c}return i.then(c=>{for(const u of c||[])u.status==="rejected"&&o(u.reason);return s().catch(o)})},rk=v.createContext(),nk=()=>v.useContext(rk),L9=({children:t})=>{const{isAuthenticated:s}=Es(),[a,r]=v.useState({summary:null,transactions:[],loading:!0,error:null}),i=async()=>{try{const h=await ye.get("/financial-summary",{timeout:3e4});r(p=>({...p,summary:h.data,loading:!1,error:null}))}catch(h){console.error("Error fetching financial summary:",h),r(p=>({...p,summary:{totalRevenue:0,totalExpenses:0,netProfit:0,pendingPayments:0},loading:!1,error:null}))}},o=async()=>{try{const h=await ye.get("/transactions",{timeout:3e4});r(p=>({...p,transactions:h.data||[],error:null}))}catch(h){console.error("Error fetching transactions:",h),r(p=>({...p,transactions:[],error:null}))}},c=async()=>{r(h=>({...h,loading:!0})),await Promise.all([i(),o()])},u=h=>{r(p=>({...p,transactions:[h,...p.transactions]})),i()},f=h=>{r(p=>({...p,transactions:p.transactions.map(g=>g._id===h._id?h:g)})),i()};v.useEffect(()=>{s&&c()},[s]),v.useEffect(()=>{if(!s)return;const h=setInterval(()=>{i(),o()},3e4);return()=>clearInterval(h)},[s]);const x={...a,refreshFinancialData:c,addTransaction:u,updateTransaction:f,fetchFinancialSummary:i,fetchTransactions:o};return e.jsx(rk.Provider,{value:x,children:t})},dr=[];for(let t=0;t<256;++t)dr.push((t+256).toString(16).slice(1));function B9(t,s=0){return(dr[t[s+0]]+dr[t[s+1]]+dr[t[s+2]]+dr[t[s+3]]+"-"+dr[t[s+4]]+dr[t[s+5]]+"-"+dr[t[s+6]]+dr[t[s+7]]+"-"+dr[t[s+8]]+dr[t[s+9]]+"-"+dr[t[s+10]]+dr[t[s+11]]+dr[t[s+12]]+dr[t[s+13]]+dr[t[s+14]]+dr[t[s+15]]).toLowerCase()}let F0;const z9=new Uint8Array(16);function U9(){if(!F0){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");F0=crypto.getRandomValues.bind(crypto)}return F0(z9)}const V9=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Xw={randomUUID:V9};function $9(t,s,a){t=t||{};const r=t.random??t.rng?.()??U9();if(r.length<16)throw new Error("Random bytes length must be >= 16");return r[6]=r[6]&15|64,r[8]=r[8]&63|128,B9(r)}function H9(t,s,a){return Xw.randomUUID&&!t?Xw.randomUUID():$9(t)}const W9=v.lazy(()=>ql(()=>import("./ProductCatalog-BNcAf1xl.js"),__vite__mapDeps([0,1,2,3,4,5]))),G9=v.lazy(()=>ql(()=>import("./SalesAnalytics-CDC1MDoj.js"),__vite__mapDeps([6,1,2,3,4,5]))),q9=v.lazy(()=>ql(()=>import("./OrderTimeline-CSiyWSbK.js"),__vite__mapDeps([7,1,2,3,4,5]))),K9=v.lazy(()=>ql(()=>import("./QuickActions-D_H0qkkh.js"),__vite__mapDeps([8,1,2,3,4,5]))),Y9=v.lazy(()=>ql(()=>Promise.resolve().then(()=>FK),void 0)),X9=v.lazy(()=>ql(()=>import("./EnhancedOrderForm-B-z2r5Cy.js"),__vite__mapDeps([9,1,2,3,4,5]))),Q9=v.lazy(()=>ql(()=>import("./RealTimeSync-BgU80UuY.js"),__vite__mapDeps([10,1,2,3,4,5]))),Z9=v.lazy(()=>ql(()=>import("./ModernOrderCard-_dJMOWt0.js"),__vite__mapDeps([11,1,2,3,4,5]))),J9={name:"",sku:"",category:"",stockQuantity:"",reorderLevel:"",price:"",supplierName:"",description:"",currency:"KES"},ez=()=>{const t=Ka(),{isAuthenticated:s,user:a}=Es(),{refreshFinancialData:r}=nk(),[i,o]=v.useState([]),[c,u]=v.useState([]),[f,x]=v.useState(!0),[h,p]=v.useState(!0),[g,b]=v.useState(null),[N,y]=v.useState(null),[S,C]=v.useState(!1),[T,_]=v.useState(null),[G,U]=v.useState(!1),[F,k]=v.useState(null),[E,A]=v.useState(!1),[B,H]=v.useState(null),[M,q]=v.useState("overview"),[L,re]=v.useState("month"),[V,ee]=v.useState(!1),[me,W]=v.useState(J9),[se,Z]=v.useState(!1),[I,Q]=v.useState(""),[O,te]=v.useState(!1),oe=async()=>{if(s){x(!0),b(null);try{const we=await ye.get("/client/orders",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}),nt=we.data,Ye=Array.isArray(nt)?nt:nt.orders||[];console.log("✅ Orders loaded:",Ye.length),o(Ye),we.data.length===0&&D.info("No orders yet. Create your first order!",{duration:3e3})}catch(we){console.error("❌ Error fetching orders:",we),b(we.response?.data?.message||we.message||"Failed to load orders"),D.error("Failed to load orders. Click refresh to retry.")}finally{x(!1)}}};v.useEffect(()=>{oe()},[s]);const je=async()=>{if(s){p(!0),y(null);try{const we=await ye.get("/products",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});console.log("✅ Products loaded:",we.data.length),u(we.data||[]),we.data.length===0&&D.info("No products yet. Add your first product!",{duration:3e3})}catch(we){console.error("❌ Error fetching products:",we),y(we.response?.data?.message||we.message||"Failed to load products"),D.error("Failed to load products. Click refresh to retry.")}finally{p(!1)}}},Me=async()=>{D.info("Refreshing data...",{duration:1e3}),await Promise.all([je(),oe()]),D.success("Data refreshed successfully!")};v.useEffect(()=>{je()},[s]);const ve=we=>{_({...we}),C(!0)},ce=we=>{k(we),U(!0)},Pe=(we,nt)=>{_(we==="customerName"||we==="customerEmail"?Ye=>({...Ye,customer:{...Ye?.customer||{},[we==="customerName"?"name":"email"]:nt}}):Ye=>({...Ye,[we]:nt}))},Qe=async()=>{try{const we=T.id||T._id,nt=await ye.put(`/orders/${we}`,T,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});o(Ye=>Ye.map(pt=>pt.id===nt.data.id||pt._id===nt.data.id?nt.data:pt)),C(!1),_(null),D.success("The order has been updated successfully."),(nt.data.status==="Paid"||nt.data.paymentStatus==="Paid")&&r?.()}catch(we){D.error("We couldn't update this order."),console.error("Error updating order:",we)}},vt=async we=>{if(window.confirm(`Are you sure you want to delete order ${we.orderId}? This action cannot be undone.`))try{const nt=we._id||we.id;await ye.delete(`/client/orders/${nt}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}),o(Ye=>Ye.filter(pt=>(pt._id||pt.id)!==nt)),D.success("Order deleted successfully!"),we.paymentStatus==="Paid"&&r?.()}catch(nt){D.error(nt.response?.data?.message||"Failed to delete order"),console.error("Error deleting order:",nt)}},xt=we=>{H(we),A(!0)},ht=async we=>{try{await ye.delete(`/products/${we._id||we.id}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}),u(nt=>nt.filter(Ye=>(Ye._id||Ye.id)!==(we._id||we.id))),D.success("Product deleted successfully!")}catch{D.error("Failed to delete product")}},bt=we=>{D.info(`Viewing ${we.name}`)},ot=()=>{const we=document.createElement("input");we.type="file",we.accept=".csv,.xlsx",we.onchange=async nt=>{nt.target.files[0]&&D.info("Import feature coming soon!")},we.click()},hs=()=>{try{const we=JSON.stringify({products:c,orders:i},null,2),nt=new Blob([we],{type:"application/json"}),Ye=URL.createObjectURL(nt),pt=document.createElement("a");pt.href=Ye,pt.download=`ecommerce-data-${new Date().toISOString().split("T")[0]}.json`,pt.click(),URL.revokeObjectURL(Ye),D.success("Data exported successfully!")}catch{D.error("Failed to export data")}},fs=()=>{D.info("Generating report..."),setTimeout(()=>{D.success("Report generation coming soon!")},1e3)},Ps=we=>{u(nt=>{const Ye=nt.findIndex(pt=>(pt._id||pt.id)===(we._id||we.id));if(Ye!==-1){const pt=[...nt];return pt[Ye]=we,pt}return[...nt,we]})},ps=we=>{o(nt=>{const Ye=nt.findIndex(pt=>(pt._id||pt.id)===(we._id||we.id));if(Ye!==-1){const pt=[...nt];return pt[Ye]=we,pt}return[...nt,we]}),(we.status==="Paid"||we.paymentStatus==="Paid")&&r?.()},As=we=>{u(nt=>nt.map(Ye=>Ye._id===we.productId||Ye.id===we.productId?{...Ye,stockQuantity:we.stockQuantity}:Ye))},cs=async we=>{try{const nt=localStorage.getItem("token"),Ye=await ye.post("/products",we,{headers:{Authorization:`Bearer ${nt}`,"Content-Type":"application/json"}});u(pt=>[...pt,Ye.data]),ee(!1),D.success("Product added successfully with images!")}catch(nt){D.error(nt.response?.data?.error||"Failed to add product")}},_t=async we=>{try{const nt=localStorage.getItem("token"),Ye=await ye.post("/client/orders",we,{headers:{Authorization:`Bearer ${nt}`,"Content-Type":"application/json"}});o(pt=>[...pt,Ye.data]),Z(!1),D.success("Order created successfully!"),(Ye.data.status==="Paid"||Ye.data.paymentStatus==="Paid")&&r?.()}catch(nt){D.error(nt.response?.data?.error||"Failed to create order")}},sa=async()=>{te(!0);try{const we=H9().replace(/-/g,"").substring(0,12),nt=localStorage.getItem("token");if(!nt)throw new Error("No authentication token found. Please log in again.");const Ye=await ye.post("/user/invite-code",{inviteCode:we},{headers:{Authorization:`Bearer ${nt}`}});console.log("Invite code save response:",Ye.data);const pt=`${window.location.origin}/client/signup/${we}`;Q(pt),D.success("Invite link generated and saved. Share this link with your clients.")}catch(we){const nt=we.response?.data?.error||we.message;D.error(`Failed to generate invite link: ${nt}`),console.error("Error generating invite code:",we.response?.data||we.message)}finally{te(!1)}},Te=()=>{navigator.clipboard.writeText(I),D.success("Invite link copied to clipboard.")},Ne=()=>{navigator.share?navigator.share({title:"Join My Store",text:"You've been invited to access my exclusive online store!",url:I}).catch(()=>{}):Te()},he=we=>{const nt={Pending:{variant:"secondary"},Processing:{variant:"default"},Shipped:{variant:"default"},Delivered:{variant:"default"},Paid:{variant:"default"},Cancelled:{variant:"destructive"}};return e.jsx(_e,{variant:nt[we]?.variant||"default",children:we})},Ue=i.length,st=i.reduce((we,nt)=>we+(Number(nt.total)||0),0),Ct=Ue&&st>0?(st/Ue).toFixed(2):"0.00",Dt=isNaN(st)?0:st,Zt=isNaN(parseFloat(Ct))?"0.00":Ct,ts=(()=>{const we={};return i.forEach(nt=>{nt.items?.forEach(Ye=>{const pt=Ye.product||Ye.name;we[pt]||(we[pt]={name:Ye.name||"Unknown Product",sales:0,revenue:0}),we[pt].sales+=Ye.quantity||1,we[pt].revenue+=(Ye.price||0)*(Ye.quantity||1)})}),Object.values(we).sort((nt,Ye)=>Ye.revenue-nt.revenue).slice(0,4).map(nt=>({...nt,revenue:`KES ${nt.revenue.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}`}))})(),ke=()=>e.jsx("div",{className:"flex items-center justify-center p-8",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})});return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"E-Commerce Dashboard"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage your online store and orders"}),e.jsx("div",{className:"mt-2",children:e.jsx(v.Suspense,{fallback:null,children:e.jsx(Q9,{onProductUpdate:Ps,onOrderUpdate:ps,onStockUpdate:As,onManualRefresh:Me})})})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsxs(R,{variant:"default",className:"gap-2 bg-purple-600 hover:bg-purple-700",onClick:()=>Z(!0),children:[e.jsx(js,{className:"h-4 w-4"}),"Create Order"]}),e.jsxs(R,{variant:"default",className:"gap-2 bg-blue-600 hover:bg-blue-700",onClick:()=>{t("/store"),D.success("Opening store overview...")},children:[e.jsx(qt,{className:"h-4 w-4"}),"Store Overview"]}),e.jsxs(Ft,{children:[e.jsx(Na,{asChild:!0,children:e.jsxs(R,{variant:"outline",className:"gap-2",children:[e.jsx(lg,{className:"h-4 w-4"}),"Generate Invite Link"]})}),e.jsxs(It,{className:"sm:max-w-md",children:[e.jsxs(Lt,{children:[e.jsx(Bt,{children:"Invite Clients to Your Store"}),e.jsx(es,{children:"Generate a unique invite link and share it with your clients. They'll sign up and get access to your exclusive store."})]}),e.jsx("div",{className:"space-y-4",children:I?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex items-center space-x-2",children:e.jsx(fe,{readOnly:!0,value:I,className:"flex-1 bg-muted"})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(R,{onClick:Te,variant:"outline",className:"flex-1 gap-2",children:[e.jsx(gv,{className:"h-4 w-4"}),"Copy Link"]}),e.jsxs(R,{onClick:Ne,className:"flex-1 gap-2",children:[e.jsx(qc,{className:"h-4 w-4"}),"Share"]})]}),e.jsx("p",{className:"text-xs text-muted-foreground text-center",children:"💡 Tip: This link is unique to your store. Clients who use it will only see your products."})]}):e.jsxs(R,{onClick:sa,disabled:O,className:"w-full",children:[e.jsx(lg,{className:"mr-2 h-4 w-4"}),O?"Generating...":"Generate Invite Link"]})})]})]}),e.jsxs(R,{variant:"outline",className:"gap-2",onClick:()=>{a?.inviteCode?(window.open(`/store/${a.inviteCode}`,"_blank"),D.success("Opening your client store in a new tab...")):(window.open("/store","_blank"),D.info("Opening store view..."))},children:[e.jsx(la,{className:"h-4 w-4"}),"View Store"]}),e.jsxs(R,{className:"gap-2 bg-green-500 hover:bg-green-400",onClick:()=>ee(!0),children:[e.jsx(Hs,{className:"h-4 w-4"}),"Add Product"]})]})]}),e.jsxs("div",{className:"flex items-center gap-2 border-b border-border pb-2",children:[e.jsxs(R,{variant:M==="overview"?"default":"ghost",onClick:()=>q("overview"),className:"gap-2",children:[e.jsx(js,{className:"h-4 w-4"}),"Overview"]}),e.jsxs(R,{variant:M==="products"?"default":"ghost",onClick:()=>q("products"),className:"gap-2",children:[e.jsx(qt,{className:"h-4 w-4"}),"Products (",c.length,")"]}),e.jsxs(R,{variant:M==="analytics"?"default":"ghost",onClick:()=>q("analytics"),className:"gap-2",children:[e.jsx(Is,{className:"h-4 w-4"}),"Analytics"]})]}),e.jsx(v.Suspense,{fallback:e.jsx(ke,{}),children:e.jsx(K9,{onAddProduct:()=>ee(!0),onImport:ot,onExport:hs,onGenerateReport:fs})}),M==="overview"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid gap-6 md:grid-cols-4",children:[e.jsxs(K,{children:[e.jsxs(pe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(ge,{className:"text-sm font-medium",children:"Total Orders"}),e.jsx(js,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(X,{children:f?e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"h-8 w-16 bg-gray-200 rounded animate-pulse"}),e.jsx("div",{className:"h-3 w-24 bg-gray-100 rounded animate-pulse"})]}):g?e.jsxs("div",{children:[e.jsx("div",{className:"text-lg font-bold text-red-600",children:"Error"}),e.jsx(R,{size:"sm",variant:"link",onClick:oe,className:"p-0 h-auto text-xs",children:"Retry"})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-2xl font-bold",children:Ue}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Total orders placed"})]})})]}),e.jsxs(K,{children:[e.jsxs(pe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(ge,{className:"text-sm font-medium",children:"Revenue"}),e.jsx(ha,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(X,{children:f?e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"h-8 w-24 bg-gray-200 rounded animate-pulse"}),e.jsx("div",{className:"h-3 w-20 bg-gray-100 rounded animate-pulse"})]}):g?e.jsxs("div",{children:[e.jsx("div",{className:"text-lg font-bold text-red-600",children:"Error"}),e.jsx(R,{size:"sm",variant:"link",onClick:oe,className:"p-0 h-auto text-xs",children:"Retry"})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-2xl font-bold",children:["KES ",Dt.toLocaleString()]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Total revenue earned"})]})})]}),e.jsxs(K,{children:[e.jsxs(pe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(ge,{className:"text-sm font-medium",children:"Products"}),e.jsx(qt,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(X,{children:h?e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"h-8 w-16 bg-gray-200 rounded animate-pulse"}),e.jsx("div",{className:"h-3 w-24 bg-gray-100 rounded animate-pulse"})]}):N?e.jsxs("div",{children:[e.jsx("div",{className:"text-lg font-bold text-red-600",children:"Error"}),e.jsx(R,{size:"sm",variant:"link",onClick:je,className:"p-0 h-auto text-xs",children:"Retry"})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-2xl font-bold",children:c.length}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Active products"})]})})]}),e.jsxs(K,{children:[e.jsxs(pe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(ge,{className:"text-sm font-medium",children:"Avg. Order Value"}),e.jsx(Is,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(X,{children:f?e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"h-8 w-20 bg-gray-200 rounded animate-pulse"}),e.jsx("div",{className:"h-3 w-24 bg-gray-100 rounded animate-pulse"})]}):g?e.jsxs("div",{children:[e.jsx("div",{className:"text-lg font-bold text-red-600",children:"Error"}),e.jsx(R,{size:"sm",variant:"link",onClick:oe,className:"p-0 h-auto text-xs",children:"Retry"})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-2xl font-bold",children:["KES ",Zt]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Average per order"})]})})]})]}),e.jsxs("div",{className:"grid gap-6 lg:grid-cols-3",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-4",children:[e.jsx(K,{children:e.jsx(pe,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(ge,{children:"Recent Orders"}),e.jsx(lt,{children:"Latest customer orders with product details"})]}),e.jsxs(R,{variant:"outline",size:"sm",onClick:oe,disabled:f,className:"gap-2",children:[e.jsx(is,{className:`h-4 w-4 ${f?"animate-spin":""}`}),"Refresh"]})]})})}),f?e.jsx("div",{className:"space-y-4",children:[1,2,3].map(we=>e.jsx(K,{className:"animate-pulse",children:e.jsxs(X,{className:"p-6 space-y-4",children:[e.jsx("div",{className:"h-6 bg-gray-200 rounded w-1/3"}),e.jsx("div",{className:"h-4 bg-gray-100 rounded w-1/2"}),e.jsx("div",{className:"h-20 bg-gray-100 rounded"})]})},we))}):g?e.jsx(K,{className:"border-red-200",children:e.jsxs(X,{className:"p-8 text-center",children:[e.jsx(Cs,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-red-700 mb-2",children:"Failed to Load Orders"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:g}),e.jsxs(R,{onClick:oe,variant:"outline",children:[e.jsx(is,{className:"h-4 w-4 mr-2"}),"Try Again"]})]})}):i.length===0?e.jsx(K,{children:e.jsxs(X,{className:"p-8 text-center",children:[e.jsx(js,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No Orders Yet"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Create your first order to get started!"}),e.jsxs(R,{onClick:()=>Z(!0),children:[e.jsx(Hs,{className:"h-4 w-4 mr-2"}),"Create Order"]})]})}):e.jsxs("div",{className:"space-y-4",children:[e.jsx(v.Suspense,{fallback:e.jsx(ke,{}),children:i.slice(0,5).map(we=>e.jsx(Z9,{order:we,onView:ce,onEdit:ve,onDelete:vt},we._id||we.id))}),i.length>5&&e.jsx("div",{className:"text-center py-4",children:e.jsxs(R,{variant:"outline",onClick:()=>q("analytics"),children:["View All ",i.length," Orders"]})})]})]}),e.jsxs(K,{children:[e.jsxs(pe,{children:[e.jsx(ge,{children:"Top Products"}),e.jsx(lt,{children:"Best selling items this month"})]}),e.jsx(X,{children:f?e.jsx("div",{className:"space-y-4",children:[1,2,3,4].map(we=>e.jsxs("div",{className:"flex items-center justify-between animate-pulse",children:[e.jsxs("div",{className:"space-y-2 flex-1",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),e.jsx("div",{className:"h-3 bg-gray-200 rounded w-1/2"})]}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-20"})]},we))}):g?e.jsxs("div",{className:"text-center py-8 text-red-600",children:[e.jsx(Cs,{className:"h-8 w-8 mx-auto mb-2"}),e.jsx("p",{className:"text-sm",children:g})]}):ts.length===0?e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(qt,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{className:"text-sm font-medium",children:"No product sales yet"}),e.jsx("p",{className:"text-xs mt-2",children:"Top sellers will appear here"})]}):e.jsx("div",{className:"space-y-4",children:ts.map((we,nt)=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-foreground",children:we.name}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[we.sales," sales"]})]}),e.jsx("div",{className:"text-right",children:e.jsx("p",{className:"text-sm font-medium text-foreground",children:we.revenue})})]},nt))})})]})]}),e.jsxs("div",{className:"grid gap-6 lg:grid-cols-4",children:[e.jsxs(K,{children:[e.jsx(pe,{className:"pb-3",children:e.jsx(ge,{className:"text-base",children:"Pending Orders"})}),e.jsxs(X,{children:[e.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:i.filter(we=>we.status==="Pending").length}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Need processing"})]})]}),e.jsxs(K,{children:[e.jsx(pe,{className:"pb-3",children:e.jsx(ge,{className:"text-base",children:"Processing"})}),e.jsxs(X,{children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:i.filter(we=>we.status==="Processing").length}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Being prepared"})]})]}),e.jsxs(K,{children:[e.jsx(pe,{className:"pb-3",children:e.jsx(ge,{className:"text-base",children:"Shipped"})}),e.jsxs(X,{children:[e.jsx("div",{className:"text-2xl font-bold text-purple-600",children:i.filter(we=>we.status==="Shipped").length}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"In transit"})]})]}),e.jsxs(K,{children:[e.jsx(pe,{className:"pb-3",children:e.jsx(ge,{className:"text-base",children:"Delivered"})}),e.jsxs(X,{children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:i.filter(we=>we.status==="Delivered").length}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"This month"})]})]})]}),e.jsx(v.Suspense,{fallback:e.jsx(ke,{}),children:e.jsx(q9,{orders:i,limit:15})})]}),M==="products"&&e.jsx(v.Suspense,{fallback:e.jsx(ke,{}),children:e.jsx(W9,{products:c,onEdit:xt,onDelete:ht,onView:bt})}),M==="analytics"&&e.jsxs("div",{id:"analytics-section",className:"space-y-4",children:[e.jsx(K,{className:"border-primary/20",children:e.jsx(X,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Sales Analytics"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"View your sales performance and trends"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ae,{htmlFor:"timeframe",className:"text-sm",children:"Time Period:"}),e.jsxs(Ot,{value:L,onValueChange:re,children:[e.jsx(Pt,{id:"timeframe",className:"w-32",children:e.jsx(Rt,{})}),e.jsxs(Mt,{children:[e.jsx(Ee,{value:"week",children:"This Week"}),e.jsx(Ee,{value:"month",children:"This Month"}),e.jsx(Ee,{value:"year",children:"This Year"})]})]})]})]})})}),e.jsx(v.Suspense,{fallback:e.jsx(ke,{}),children:e.jsx(G9,{orders:i,timeFrame:L})})]}),G&&F&&e.jsx(Ft,{open:G,onOpenChange:U,children:e.jsxs(It,{children:[e.jsxs(Lt,{children:[e.jsx(Bt,{children:"Order Details"}),e.jsx(es,{children:"View order information"})]}),e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{children:[e.jsx(ae,{children:"Order ID"}),e.jsx("div",{className:"font-medium",children:F.orderId||F.id})]}),e.jsxs("div",{children:[e.jsx(ae,{children:"Customer"}),e.jsx("div",{children:F.customer?.name})]}),e.jsxs("div",{children:[e.jsx(ae,{children:"Email"}),e.jsx("div",{children:F.customer?.email})]}),e.jsxs("div",{children:[e.jsx(ae,{children:"Date"}),e.jsx("div",{children:F.date?new Date(F.date).toLocaleString():""})]}),e.jsxs("div",{children:[e.jsx(ae,{children:"Total"}),e.jsxs("div",{children:["KES ",Number(F.total||0).toFixed(2)]})]}),e.jsxs("div",{children:[e.jsx(ae,{children:"Status"}),e.jsx("div",{children:he(F.status)})]}),e.jsxs("div",{children:[e.jsx(ae,{children:"Items"}),e.jsx("div",{children:Array.isArray(F.items)?`${F.items.length} items`:F.items})]}),e.jsxs("div",{children:[e.jsx(ae,{children:"Notes"}),e.jsx("div",{children:F.notes})]})]}),e.jsx(Rs,{children:e.jsx(R,{variant:"outline",onClick:()=>U(!1),children:"Close"})})]})}),S&&T&&e.jsx(Ft,{open:S,onOpenChange:C,children:e.jsxs(It,{children:[e.jsxs(Lt,{children:[e.jsx(Bt,{children:"Edit Order"}),e.jsx(es,{children:"Update order details"})]}),e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(ae,{htmlFor:"edit-customer",children:"Customer Name"}),e.jsx(fe,{id:"edit-customer",value:T.customer?.name||"",onChange:we=>Pe("customerName",we.target.value)})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(ae,{htmlFor:"edit-email",children:"Customer Email"}),e.jsx(fe,{id:"edit-email",value:T.customer?.email||"",onChange:we=>Pe("customerEmail",we.target.value)})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(ae,{htmlFor:"edit-date",children:"Order Date"}),e.jsx(fe,{id:"edit-date",type:"date",value:T.date?new Date(T.date).toISOString().slice(0,10):"",onChange:we=>Pe("date",we.target.value)})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(ae,{htmlFor:"edit-total",children:"Total Amount (KES)"}),e.jsx(fe,{id:"edit-total",type:"number",min:"0",step:"0.01",value:T.total||"",onChange:we=>Pe("total",we.target.value)})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(ae,{htmlFor:"edit-items",children:"Number of Items"}),e.jsx(fe,{id:"edit-items",type:"number",min:"0",value:Array.isArray(T.items)?T.items.length:T.items||0,onChange:we=>{const nt=parseInt(we.target.value)||0,Ye=Array.from({length:nt},(pt,yt)=>({id:yt+1,name:`Item ${yt+1}`,quantity:1,price:nt>0?Number(T.total||0)/nt:0}));Pe("items",Ye)}})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(ae,{htmlFor:"edit-status",children:"Status"}),e.jsxs(Ot,{value:T.status||"Pending",onValueChange:we=>Pe("status",we),children:[e.jsx(Pt,{children:e.jsx(Rt,{placeholder:"Select status"})}),e.jsxs(Mt,{children:[e.jsx(Ee,{value:"Pending",children:"Pending"}),e.jsx(Ee,{value:"Processing",children:"Processing"}),e.jsx(Ee,{value:"Shipped",children:"Shipped"}),e.jsx(Ee,{value:"Delivered",children:"Delivered"}),e.jsx(Ee,{value:"Paid",children:"Paid"}),e.jsx(Ee,{value:"Cancelled",children:"Cancelled"})]})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(ae,{htmlFor:"edit-notes",children:"Notes (Optional)"}),e.jsx(Ts,{id:"edit-notes",value:T.notes||"",onChange:we=>Pe("notes",we.target.value),className:"resize-none"})]})]}),e.jsxs(Rs,{children:[e.jsx(R,{variant:"outline",onClick:()=>C(!1),children:"Cancel"}),e.jsx(R,{onClick:Qe,children:"Save Changes"})]})]})}),e.jsx(v.Suspense,{fallback:e.jsx(ke,{}),children:e.jsx(Y9,{isOpen:V,onClose:()=>ee(!1),onSubmit:cs,initialData:B,mode:B?"edit":"add"})}),e.jsx(v.Suspense,{fallback:e.jsx(ke,{}),children:e.jsx(X9,{isOpen:se,onClose:()=>Z(!1),onSubmit:_t,products:c,mode:"add"})})]})},Qw=["Pending","Confirmed","Completed","Cancelled","Rejected"],tz=()=>{const{user:t,isAuthenticated:s,loading:a}=Es(),{socket:r,connected:i}=da(),o=()=>new Date().toISOString().split("T")[0],[c,u]=v.useState(o()),[f,x]=v.useState([]),[h,p]=v.useState([]),[g,b]=v.useState(0),[N,y]=v.useState(0),[S,C]=v.useState(0),[T,_]=v.useState(0),[G,U]=v.useState(0),[F,k]=v.useState(0),[E,A]=v.useState(0),[B,H]=v.useState("all"),[M,q]=v.useState(""),[L,re]=v.useState(null),[V,ee]=v.useState(!1),[me,W]=v.useState([]),[se,Z]=v.useState([]),[I,Q]=v.useState(!1),[O,te]=v.useState(null),[oe,je]=v.useState({customerName:"",service:"",time:"",durationMinutes:"",status:"Pending",notes:""});v.useEffect(()=>{c&&(async()=>{if(s)try{const{data:Ne}=await ye.get(`/appointments?date=${c}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});x(Ne)}catch(Ne){D.error("Error fetching appointments."),console.error("Error fetching appointments:",Ne)}})()},[c,s]),v.useEffect(()=>{(async()=>{if(s)try{const{data:Ne}=await ye.get("/team",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});W(Ne)}catch(Ne){console.error("Error fetching team members:",Ne)}})()},[s]),v.useEffect(()=>{if(!(!r||!i))return r.on("appointment_created",Te=>{console.log("New appointment created:",Te),x(Ne=>[Te.appointment,...Ne]),D.success(`New appointment from ${Te.appointment.customerName}`),Me()}),r.on("appointment_updated",Te=>{console.log("Appointment updated:",Te),x(Ne=>Ne.map(he=>he._id===Te.appointment._id?Te.appointment:he)),D.info("Appointment updated in real-time")}),r.on("appointment_confirmed",Te=>{console.log("Appointment confirmed:",Te),x(Ne=>Ne.map(he=>he._id===Te.appointment._id?Te.appointment:he)),D.success(`Appointment confirmed for ${Te.appointment.customerName}`),Me()}),r.on("appointment_rejected",Te=>{console.log("Appointment rejected:",Te),x(Ne=>Ne.map(he=>he._id===Te.appointment._id?Te.appointment:he)),D.info("Appointment rejected"),Me()}),r.on("appointment_completed",Te=>{console.log("Appointment completed:",Te),x(Ne=>Ne.map(he=>he._id===Te.appointment._id?Te.appointment:he)),D.success("Appointment completed"),Me()}),r.on("appointment_deleted",Te=>{console.log("Appointment deleted:",Te),x(Ne=>Ne.filter(he=>he._id!==Te.appointmentId)),D.info("Appointment removed"),Me()}),()=>{r.off("appointment_created"),r.off("appointment_updated"),r.off("appointment_confirmed"),r.off("appointment_rejected"),r.off("appointment_completed"),r.off("appointment_deleted")}},[r,i]);const Me=async()=>{try{const{data:Te}=await ye.get("/appointments/stats/overview",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});re(Te)}catch(Te){console.error("Error fetching appointment stats:",Te)}};v.useEffect(()=>{s&&Me()},[s]);const ve=Te=>{const Ne=(Dt="")=>Dt.trim().toLowerCase(),he=Te.filter(Dt=>Ne(Dt.status)==="confirmed").length,Ue=Te.filter(Dt=>Ne(Dt.status)==="pending").length,st=Te.filter(Dt=>Ne(Dt.status)==="cancelled").length,Ct=Te.filter(Dt=>Ne(Dt.status)==="completed").length;b(Te.length),_(he),U(Ue),k(st),A(Ct),C(st)};v.useEffect(()=>{ve(f),Pe(f),ce()},[f,B,M]);const ce=()=>{let Te=[...f];if(B!=="all"&&(Te=Te.filter(Ne=>Ne.status.toLowerCase()===B.toLowerCase())),M.trim()){const Ne=M.toLowerCase();Te=Te.filter(he=>he.customerName?.toLowerCase().includes(Ne)||he.service?.toLowerCase().includes(Ne)||he.customerEmail?.toLowerCase().includes(Ne))}p(Te)},Pe=Te=>{if(Te.length===0){Z([]);return}const Ne={};Te.forEach(st=>{const Ct=st.service||"Unknown";Ne[Ct]=(Ne[Ct]||0)+1});const he=Te.length,Ue=Object.entries(Ne).map(([st,Ct])=>({service:st,count:Ct,percentage:(Ct/he*100).toFixed(0)})).sort((st,Ct)=>Ct.count-st.count).slice(0,3);Z(Ue)},Qe=(Te,Ne)=>{je(he=>({...he,[Te]:Ne}))},vt=async()=>{if(!oe.customerName||!oe.service||!oe.time||!oe.durationMinutes){D.error("Please fill in all required fields.");return}const Te=!isNaN(new Date(oe.time).getTime()),Ne=Number(oe.durationMinutes);if(!Te||isNaN(Ne)||Ne<=0){D.error("Invalid time or duration.");return}try{const he={customerName:oe.customerName,service:oe.service,time:new Date(oe.time),durationMinutes:Ne,status:oe.status||"Pending",notes:oe.notes},Ue=localStorage.getItem("token"),{data:st}=await ye.post("/appointments",he,{headers:{Authorization:`Bearer ${Ue}`,"Content-Type":"application/json"}});x(Ct=>[st,...Ct]),ee(!1),je({customerName:"",service:"",time:o(),durationMinutes:"",status:"Pending",notes:""}),D.success("Appointment added successfully!")}catch(he){const Ue=he.response?.data?.error||"Error adding appointment.";D.error(Ue),console.error("Error adding appointment:",Ue)}},xt=Te=>{te({...Te,time:ht(Te.time),durationMinutes:String(Te.durationMinutes??"")}),Q(!0)},ht=Te=>{if(!Te)return"";const Ne=new Date(Te);if(Number.isNaN(Ne.getTime()))return"";const he=ts=>ts.toString().padStart(2,"0"),Ue=Ne.getFullYear(),st=he(Ne.getMonth()+1),Ct=he(Ne.getDate()),Dt=he(Ne.getHours()),Zt=he(Ne.getMinutes());return`${Ue}-${st}-${Ct}T${Dt}:${Zt}`},bt=(Te,Ne)=>{te(he=>({...he,[Te]:Ne}))},ot=async()=>{try{if(!O?._id)return;const Te=localStorage.getItem("token"),Ne={...O,time:new Date(O.time),durationMinutes:Number(O.durationMinutes)},{data:he}=await ye.put(`/appointments/${O._id}`,Ne,{headers:{Authorization:`Bearer ${Te}`,"Content-Type":"application/json"}});x(Ue=>Ue.map(st=>st._id===he._id?he:st)),Q(!1),te(null),D.success("Appointment updated successfully!")}catch(Te){D.error("Error updating appointment."),console.error("Error updating appointment:",Te)}},hs=async Te=>{try{const Ne=localStorage.getItem("token");await ye.delete(`/appointments/${Te}`,{headers:{Authorization:`Bearer ${Ne}`}}),x(he=>he.filter(Ue=>Ue._id!==Te)),D.success("Appointment deleted successfully!"),Me()}catch(Ne){D.error("Error deleting appointment."),console.error("Error deleting appointment:",Ne)}},fs=async Te=>{try{const Ne=localStorage.getItem("token"),{data:he}=await ye.put(`/appointments/${Te}/confirm`,{},{headers:{Authorization:`Bearer ${Ne}`}});x(Ue=>Ue.map(st=>st._id===Te?he.appointment:st)),D.success("Appointment confirmed! Email sent to customer."),Me()}catch(Ne){D.error(Ne.response?.data?.error||"Error confirming appointment."),console.error("Error confirming appointment:",Ne)}},Ps=async(Te,Ne="Time slot unavailable")=>{try{const he=localStorage.getItem("token"),{data:Ue}=await ye.put(`/appointments/${Te}/reject`,{reason:Ne},{headers:{Authorization:`Bearer ${he}`}});x(st=>st.map(Ct=>Ct._id===Te?Ue.appointment:Ct)),D.success("Appointment rejected. Customer notified."),Me()}catch(he){D.error(he.response?.data?.error||"Error rejecting appointment."),console.error("Error rejecting appointment:",he)}},ps=async Te=>{try{const Ne=localStorage.getItem("token"),{data:he}=await ye.put(`/appointments/${Te}/complete`,{},{headers:{Authorization:`Bearer ${Ne}`}});x(Ue=>Ue.map(st=>st._id===Te?he.appointment:st)),D.success("Appointment marked as completed!"),Me()}catch(Ne){D.error(Ne.response?.data?.error||"Error completing appointment."),console.error("Error completing appointment:",Ne)}};if(a)return e.jsx("div",{children:"Loading..."});if(!s)return e.jsx("div",{children:"Please log in to manage your appointments."});const As=["09:00","09:30","10:00","10:30","11:00","11:30","12:00","12:30","13:00","13:30","14:00","14:30","15:00","15:30","16:00","16:30","17:00","17:30"],cs=Te=>f.some(Ne=>{const he=new Date(Ne.time);return`${he.getHours().toString().padStart(2,"0")}:${he.getMinutes().toString().padStart(2,"0")}`===Te}),_t=Te=>{const Ne={Confirmed:{variant:"default",className:"bg-green-100 text-green-800"},Pending:{variant:"secondary",className:"bg-yellow-100 text-yellow-800"},Cancelled:{variant:"destructive",className:"bg-red-100 text-red-800"},Rejected:{variant:"destructive",className:"bg-red-100 text-red-800"},Completed:{variant:"default",className:"bg-blue-100 text-blue-800"}};return e.jsx(_e,{variant:Ne[Te]?.variant||"default",className:Ne[Te]?.className,children:Te})},sa=Te=>{const Ne=Te.status==="Pending",he=Te.status==="Confirmed";return e.jsxs("div",{className:"flex gap-1",children:[Ne&&e.jsxs(e.Fragment,{children:[e.jsxs(R,{variant:"outline",size:"sm",className:"text-green-600 hover:text-green-700 hover:bg-green-50",onClick:()=>fs(Te._id),children:[e.jsx(os,{className:"h-4 w-4 mr-1"}),"Confirm"]}),e.jsxs(R,{variant:"outline",size:"sm",className:"text-red-600 hover:text-red-700 hover:bg-red-50",onClick:()=>Ps(Te._id),children:[e.jsx(Cr,{className:"h-4 w-4 mr-1"}),"Reject"]})]}),he&&e.jsxs(R,{variant:"outline",size:"sm",className:"text-blue-600 hover:text-blue-700 hover:bg-blue-50",onClick:()=>ps(Te._id),children:[e.jsx(si,{className:"h-4 w-4 mr-1"}),"Complete"]}),Te.customerEmail&&e.jsx(R,{variant:"ghost",size:"sm",onClick:()=>window.location.href=`mailto:${Te.customerEmail}`,children:e.jsx(Gs,{className:"h-4 w-4"})})]})};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Appointment Scheduling"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage bookings and calendar"})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs("div",{className:"relative",children:[e.jsx(ia,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(fe,{placeholder:"Search appointments...",value:M,onChange:Te=>q(Te.target.value),className:"pl-9 w-64"})]}),e.jsxs(Ot,{value:B,onValueChange:H,children:[e.jsx(Pt,{className:"w-[140px]",children:e.jsx(Rt,{placeholder:"Filter status"})}),e.jsxs(Mt,{children:[e.jsx(Ee,{value:"all",children:"All Status"}),e.jsx(Ee,{value:"pending",children:"Pending"}),e.jsx(Ee,{value:"confirmed",children:"Confirmed"}),e.jsx(Ee,{value:"completed",children:"Completed"}),e.jsx(Ee,{value:"cancelled",children:"Cancelled"}),e.jsx(Ee,{value:"rejected",children:"Rejected"})]})]}),e.jsx(fe,{type:"date",value:c,onChange:Te=>u(Te.target.value),className:"w-auto"}),e.jsxs(R,{variant:"outline",onClick:()=>{q(""),H("all")},children:[e.jsx(is,{className:"mr-2 h-4 w-4"}),"Reset"]}),e.jsxs(Ft,{open:V,onOpenChange:ee,children:[e.jsx(Na,{asChild:!0,children:e.jsxs(R,{className:"bg-green-500 cursor-pointer hover:bg-green-400",children:[e.jsx(Hs,{className:"mr-2 h-4 w-4"}),"New Appointment"]})}),e.jsxs(It,{children:[e.jsxs(Lt,{children:[e.jsx(Bt,{children:"Add New Appointment"}),e.jsx(es,{children:"Fill in the details to schedule a new appointment."})]}),e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(ae,{htmlFor:"customerName",children:"Customer Name"}),e.jsx(fe,{id:"customerName",placeholder:"Enter customer name",value:oe.customerName,onChange:Te=>Qe("customerName",Te.target.value)})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(ae,{htmlFor:"service",children:"Service"}),e.jsx(fe,{id:"service",placeholder:"e.g. Hair Cut",value:oe.service,onChange:Te=>Qe("service",Te.target.value)})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(ae,{htmlFor:"time",children:"Date & Time"}),e.jsx(fe,{id:"time",type:"datetime-local",value:oe.time,onChange:Te=>Qe("time",Te.target.value)})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(ae,{htmlFor:"durationMinutes",children:"Duration (minutes)"}),e.jsx(fe,{id:"durationMinutes",type:"number",min:"15",step:"15",placeholder:"e.g. 30",value:oe.durationMinutes,onChange:Te=>Qe("durationMinutes",Te.target.value)})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(ae,{htmlFor:"status",children:"Status"}),e.jsx("select",{id:"status",className:"border rounded px-2 py-1",value:oe.status,onChange:Te=>Qe("status",Te.target.value),children:Qw.map(Te=>e.jsx("option",{value:Te,children:Te},Te))})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(ae,{htmlFor:"notes",children:"Notes (Optional)"}),e.jsx(Ts,{id:"notes",placeholder:"Appointment notes",value:oe.notes,onChange:Te=>Qe("notes",Te.target.value),className:"resize-none"})]})]}),e.jsxs(Rs,{children:[e.jsx(R,{variant:"outline",className:"text-red-500",onClick:()=>ee(!1),children:"Cancel"}),e.jsxs(R,{className:"bg-green-500 hover:bg-green-400",onClick:vt,children:[e.jsx(Ma,{className:"mr-2 h-4 w-4"}),"Add Appointment"]})]})]})]})]})]}),e.jsxs("div",{className:"grid gap-6 md:grid-cols-5",children:[e.jsxs(K,{children:[e.jsxs(pe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(ge,{className:"text-sm font-medium",children:"Today's Appointments"}),e.jsx(ms,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(X,{children:[e.jsx("div",{className:"text-2xl font-bold",children:g}),e.jsx("p",{className:"text-xs text-green-600",children:"appointments"})]})]}),e.jsxs(K,{children:[e.jsxs(pe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(ge,{className:"text-sm font-medium",children:"Pending"}),e.jsx(Qt,{className:"h-4 w-4 text-yellow-600"})]}),e.jsxs(X,{children:[e.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:L?.pending||G}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Awaiting confirmation"})]})]}),e.jsxs(K,{children:[e.jsxs(pe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(ge,{className:"text-sm font-medium",children:"Confirmed"}),e.jsx(os,{className:"h-4 w-4 text-green-600"})]}),e.jsxs(X,{children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:L?.confirmed||T}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Ready to serve"})]})]}),e.jsxs(K,{children:[e.jsxs(pe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(ge,{className:"text-sm font-medium",children:"Completed"}),e.jsx(si,{className:"h-4 w-4 text-blue-600"})]}),e.jsxs(X,{children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:L?.completed||E}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Service done"})]})]}),e.jsxs(K,{children:[e.jsxs(pe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(ge,{className:"text-sm font-medium",children:"Cancelled"}),e.jsx(Cr,{className:"h-4 w-4 text-red-600"})]}),e.jsxs(X,{children:[e.jsx("div",{className:"text-2xl font-bold text-red-600",children:L?.cancelled||F}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"No-shows/rejected"})]})]})]}),e.jsxs("div",{className:"grid gap-6 lg:grid-cols-3",children:[e.jsxs(K,{className:"lg:col-span-2",children:[e.jsxs(pe,{children:[e.jsxs(ge,{children:["Today's Schedule - ",new Date(c).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})]}),e.jsxs(lt,{children:["View and manage daily appointments ",i&&e.jsx(_e,{variant:"outline",className:"ml-2 bg-green-100 text-green-800",children:"● Live"})]})]}),e.jsx(X,{children:e.jsx("div",{className:"space-y-4",children:h.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(ms,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"No appointments found"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:M||B!=="all"?"Try adjusting your filters":"Add a new appointment to get started"})]}):h.map(Te=>e.jsxs("div",{className:"flex items-center space-x-4 p-4 border rounded-lg",children:[e.jsxs("div",{className:"text-center min-w-[80px]",children:[e.jsx("p",{className:"font-semibold text-foreground",children:Te.time?new Date(Te.time).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):""}),e.jsx("p",{className:"text-xs text-muted-foreground",children:Te.durationMinutes||""})]}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("p",{className:"font-medium text-foreground",children:Te.customerName}),_t(Te.status)]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:Te.service}),Te.customerEmail&&e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:Te.customerEmail})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[sa(Te),e.jsx(R,{variant:"outline",size:"sm",onClick:()=>xt(Te),children:"Edit"}),e.jsx(R,{variant:"ghost",size:"sm",className:"text-red-500 hover:text-red-600",onClick:()=>hs(Te._id),children:e.jsx(fa,{className:"h-4 w-4"})})]})]},Te._id||Te.id))})})]}),e.jsxs(K,{children:[e.jsxs(pe,{children:[e.jsx(ge,{children:"Available Slots"}),e.jsx(lt,{children:"Quick booking slots for today"})]}),e.jsx(X,{children:e.jsx("div",{className:"grid grid-cols-2 gap-2",children:As.map(Te=>e.jsx(R,{variant:cs(Te)?"secondary":"outline",size:"sm",disabled:cs(Te),className:"text-xs",onClick:()=>Qe("time",`${c}T${Te}`),children:Te},Te))})})]})]}),I&&O&&e.jsx(Ft,{open:I,onOpenChange:Q,children:e.jsxs(It,{children:[e.jsxs(Lt,{children:[e.jsx(Bt,{children:"Edit Appointment"}),e.jsx(es,{children:"Update appointment details"})]}),e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(ae,{htmlFor:"edit-customerName",children:"Customer Name"}),e.jsx(fe,{id:"edit-customerName",placeholder:"Enter customer name",value:O.customerName||"",onChange:Te=>bt("customerName",Te.target.value)})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(ae,{htmlFor:"edit-service",children:"Service"}),e.jsx(fe,{id:"edit-service",placeholder:"e.g. Hair Cut",value:O.service||"",onChange:Te=>bt("service",Te.target.value)})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(ae,{htmlFor:"edit-time",children:"Date & Time"}),e.jsx(fe,{id:"edit-time",type:"datetime-local",value:O.time||"",onChange:Te=>bt("time",Te.target.value)})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(ae,{htmlFor:"edit-durationMinutes",children:"Duration (minutes)"}),e.jsx(fe,{id:"edit-durationMinutes",type:"number",min:"15",step:"15",placeholder:"e.g. 30",value:O.durationMinutes||"",onChange:Te=>bt("durationMinutes",Te.target.value)})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(ae,{htmlFor:"edit-status",children:"Status"}),e.jsx("select",{id:"edit-status",className:"border rounded px-2 py-1",value:O.status||"Pending",onChange:Te=>bt("status",Te.target.value),children:Qw.map(Te=>e.jsx("option",{value:Te,children:Te},Te))})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(ae,{htmlFor:"edit-notes",children:"Notes (Optional)"}),e.jsx(Ts,{id:"edit-notes",placeholder:"Appointment notes",className:"resize-none",value:O.notes||"",onChange:Te=>bt("notes",Te.target.value)})]})]}),e.jsxs(Rs,{children:[e.jsx(R,{variant:"outline",className:"text-red-500",onClick:()=>Q(!1),children:"Cancel"}),e.jsxs(R,{className:"bg-green-500 hover:bg-green-400",onClick:ot,children:[e.jsx(Ma,{className:"mr-2 h-4 w-4"}),"Save Changes"]})]})]})}),e.jsxs("div",{className:"grid gap-6 lg:grid-cols-3",children:[e.jsxs(K,{children:[e.jsx(pe,{children:e.jsx(ge,{children:"Appointment Status"})}),e.jsx(X,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm",children:"Confirmed"}),e.jsx(_e,{variant:"default",children:T})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm",children:"Pending"}),e.jsx(_e,{variant:"secondary",children:G})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm",children:"Cancelled"}),e.jsx(_e,{variant:"destructive",children:F})]})]})})]}),e.jsxs(K,{children:[e.jsx(pe,{children:e.jsx(ge,{children:"Popular Services"})}),e.jsx(X,{children:e.jsx("div",{className:"space-y-3",children:se.length>0?se.map((Te,Ne)=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm",children:Te.service}),e.jsxs("span",{className:"text-sm font-medium",children:[Te.percentage,"%"]})]},Ne)):e.jsx("p",{className:"text-sm text-muted-foreground",children:"No service data available"})})})]}),e.jsxs(K,{children:[e.jsx(pe,{children:e.jsx(ge,{children:"Staff Availability"})}),e.jsx(X,{children:e.jsx("div",{className:"space-y-3",children:me.length>0?me.slice(0,3).map(Te=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm",children:Te.name}),e.jsx(_e,{variant:Te.status==="active"?"default":"secondary",children:Te.status==="active"?"Available":Te.status||"Unknown"})]},Te._id)):e.jsx("p",{className:"text-sm text-muted-foreground",children:"No team members found"})})})]})]})]})},I0=[{name:"Professional Haircut & Styling",description:"Expert haircut and styling service tailored to your preferences. Includes wash, cut, and blow-dry.",price:1500,duration:"45 min",category:"Hair & Beauty"},{name:"Full Body Massage",description:"Relaxing full body massage to relieve stress and tension. Perfect for unwinding after a long day.",price:3500,duration:"90 min",category:"Wellness & Spa"},{name:"Manicure & Pedicure",description:"Complete nail care service including filing, buffing, cuticle care, and polish application.",price:2e3,duration:"60 min",category:"Hair & Beauty"},{name:"Personal Training Session",description:"One-on-one fitness training with certified personal trainer. Customized workout plan included.",price:2500,duration:"60 min",category:"Fitness & Health"},{name:"Deep Tissue Massage",description:"Therapeutic massage targeting deep muscle layers to relieve chronic pain and muscle tension.",price:4e3,duration:"75 min",category:"Wellness & Spa"},{name:"Facial Treatment",description:"Rejuvenating facial treatment with deep cleansing, exfoliation, and hydration for glowing skin.",price:3e3,duration:"60 min",category:"Hair & Beauty"},{name:"Yoga Class",description:"Group or private yoga session for flexibility, strength, and mindfulness. All levels welcome.",price:1200,duration:"60 min",category:"Fitness & Health"},{name:"Hair Coloring Service",description:"Professional hair coloring with premium products. Includes consultation, application, and styling.",price:4500,duration:"120 min",category:"Hair & Beauty"},{name:"Nutritional Consultation",description:"Personalized nutrition plan and dietary guidance from certified nutritionist.",price:2800,duration:"45 min",category:"Fitness & Health"},{name:"Hot Stone Massage",description:"Luxurious massage using heated stones to melt away tension and promote deep relaxation.",price:4500,duration:"90 min",category:"Wellness & Spa"},{name:"Makeup Application",description:"Professional makeup for events, photoshoots, or special occasions. Includes consultation.",price:3500,duration:"60 min",category:"Hair & Beauty"},{name:"Aromatherapy Session",description:"Therapeutic treatment using essential oils to enhance physical and emotional well-being.",price:3200,duration:"60 min",category:"Wellness & Spa"},{name:"Group Fitness Class",description:"High-energy group workout including cardio, strength training, and flexibility exercises.",price:800,duration:"45 min",category:"Fitness & Health"},{name:"Reflexology Treatment",description:"Foot reflexology targeting pressure points to promote healing and relaxation throughout the body.",price:2500,duration:"60 min",category:"Wellness & Spa"},{name:"Bridal Hair & Makeup",description:"Complete bridal beauty package including hair styling, makeup, and trial session.",price:8500,duration:"150 min",category:"Hair & Beauty"}],sz=()=>{const[t,s]=v.useState([]),[a,r]=v.useState(!0),[i,o]=v.useState(!1),[c,u]=v.useState(!1),[f,x]=v.useState(null),[h,p]=v.useState(!1),[g,b]=v.useState({name:"",description:"",price:"",duration:"",category:""});v.useEffect(()=>{N()},[]);const N=async()=>{r(!0);try{const T=localStorage.getItem("token"),G=(await ye.get("/services",{headers:{Authorization:`Bearer ${T}`}})).data,U=Array.isArray(G)?G:G?.services||[];s(U),console.log(`✅ Loaded ${U.length} services`)}catch(T){console.error("Error fetching services:",T),D.error("Failed to load services"),s([])}finally{r(!1)}},y=async()=>{if(!g.name||!g.price){D.error("Please fill in required fields");return}try{const T=localStorage.getItem("token");await ye.post("/services",g,{headers:{Authorization:`Bearer ${T}`}}),D.success("Service added successfully!"),o(!1),b({name:"",description:"",price:"",duration:"",category:""}),N()}catch(T){console.error("Error adding service:",T),D.error("Failed to add service")}},S=async T=>{if(confirm("Are you sure you want to delete this service?"))try{const _=localStorage.getItem("token");await ye.delete(`/services/${T}`,{headers:{Authorization:`Bearer ${_}`}}),D.success("Service deleted successfully!"),N()}catch(_){console.error("Error deleting service:",_),D.error("Failed to delete service")}},C=async()=>{p(!0);try{const T=localStorage.getItem("token");let _=0,G=0;for(const U of I0)try{await ye.post("/services",U,{headers:{Authorization:`Bearer ${T}`}}),_++}catch(F){if(console.error(`Error adding service ${U.name}:`,F),console.error("Error details:",F.response?.data),G++,G===1){const k=F.response?.data?.message||F.message;console.error("First error message:",k)}}if(_>0&&(D.success(`Successfully added ${_} of ${I0.length} sample services!`),N()),G>0){const U=G===I0.length?"All services failed to add. Please check your permissions.":`${G} services failed to add`;D.warning(U)}_===0&&G===0&&D.info("No services were added")}catch(T){console.error("Error loading sample services:",T);const _=T.response?.status===403?"Permission denied. Please ensure you're logged in with proper access.":T.response?.data?.message||"Failed to load sample services";D.error(_)}finally{p(!1)}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Services"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage your service offerings"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(R,{onClick:N,variant:"outline",disabled:a,children:[e.jsx(is,{className:`h-4 w-4 mr-2 ${a?"animate-spin":""}`}),"Refresh"]}),e.jsxs(R,{onClick:C,variant:"secondary",disabled:h,children:[e.jsx(Hi,{className:`h-4 w-4 mr-2 ${h?"animate-spin":""}`}),h?"Loading...":"Load Sample Services"]}),e.jsxs(Ft,{open:i,onOpenChange:o,children:[e.jsx(Na,{asChild:!0,children:e.jsxs(R,{children:[e.jsx(Hs,{className:"h-4 w-4 mr-2"}),"Add Service"]})}),e.jsxs(It,{children:[e.jsxs(Lt,{children:[e.jsx(Bt,{children:"Add New Service"}),e.jsx(es,{children:"Create a new service offering"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(ae,{children:"Service Name *"}),e.jsx(fe,{value:g.name,onChange:T=>b({...g,name:T.target.value}),placeholder:"e.g., Haircut & Styling"})]}),e.jsxs("div",{children:[e.jsx(ae,{children:"Description"}),e.jsx(Ts,{value:g.description,onChange:T=>b({...g,description:T.target.value}),placeholder:"Describe your service"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(ae,{children:"Price (KES) *"}),e.jsx(fe,{type:"number",value:g.price,onChange:T=>b({...g,price:T.target.value}),placeholder:"1500"})]}),e.jsxs("div",{children:[e.jsx(ae,{children:"Duration"}),e.jsx(fe,{value:g.duration,onChange:T=>b({...g,duration:T.target.value}),placeholder:"60 min"})]})]}),e.jsxs("div",{children:[e.jsx(ae,{children:"Category"}),e.jsxs(Ot,{value:g.category,onValueChange:T=>b({...g,category:T}),children:[e.jsx(Pt,{children:e.jsx(Rt,{placeholder:"Select category"})}),e.jsxs(Mt,{children:[e.jsx(Ee,{value:"Hair & Beauty",children:"Hair & Beauty"}),e.jsx(Ee,{value:"Wellness & Spa",children:"Wellness & Spa"}),e.jsx(Ee,{value:"Fitness & Health",children:"Fitness & Health"}),e.jsx(Ee,{value:"Professional Services",children:"Professional Services"}),e.jsx(Ee,{value:"Other",children:"Other"})]})]})]})]}),e.jsxs(Rs,{children:[e.jsx(R,{variant:"outline",onClick:()=>o(!1),children:"Cancel"}),e.jsx(R,{onClick:y,children:"Add Service"})]})]})]})]})]}),e.jsx("div",{className:"grid gap-6 md:grid-cols-4",children:e.jsx(K,{children:e.jsx(X,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Total Services"}),e.jsx("p",{className:"text-2xl font-bold",children:t.length})]}),e.jsx(Ml,{className:"h-8 w-8 text-blue-600"})]})})})}),e.jsxs(K,{children:[e.jsxs(pe,{children:[e.jsx(ge,{children:"All Services"}),e.jsx(lt,{children:"Manage and track all your service offerings"})]}),e.jsx(X,{children:a?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(is,{className:"h-12 w-12 animate-spin text-primary mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"Loading services..."})]}):t.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Cs,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No Services Yet"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"Add your first service or load sample services"}),e.jsxs("div",{className:"flex gap-2 justify-center",children:[e.jsxs(R,{onClick:C,disabled:h,children:[e.jsx(Hi,{className:"h-4 w-4 mr-2"}),"Load 15 Sample Services"]}),e.jsxs(R,{onClick:()=>o(!0),variant:"outline",children:[e.jsx(Hs,{className:"h-4 w-4 mr-2"}),"Add Manually"]})]})]}):e.jsxs(Zn,{children:[e.jsx(Jn,{children:e.jsxs(ma,{children:[e.jsx(wt,{children:"Service Name"}),e.jsx(wt,{children:"Category"}),e.jsx(wt,{children:"Duration"}),e.jsx(wt,{children:"Price"}),e.jsx(wt,{children:"Actions"})]})}),e.jsx(ei,{children:t.map(T=>e.jsxs(ma,{children:[e.jsx(Nt,{children:e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:T.name}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[T.description?.substring(0,50),"..."]})]})}),e.jsx(Nt,{children:e.jsx(_e,{variant:"outline",children:T.category||"Uncategorized"})}),e.jsx(Nt,{children:T.duration||"N/A"}),e.jsxs(Nt,{className:"font-semibold",children:["KES ",T.price?.toLocaleString()]}),e.jsx(Nt,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(R,{variant:"ghost",size:"sm",children:e.jsx(Qi,{className:"h-4 w-4"})}),e.jsx(R,{variant:"ghost",size:"sm",onClick:()=>S(T._id||T.id),children:e.jsx(fa,{className:"h-4 w-4 text-red-500"})})]})})]},T._id||T.id))})]})})]})]})};var ex="Switch",[az]=Df(ex),[rz,nz]=az(ex),ik=v.forwardRef((t,s)=>{const{__scopeSwitch:a,name:r,checked:i,defaultChecked:o,required:c,disabled:u,value:f="on",onCheckedChange:x,form:h,...p}=t,[g,b]=v.useState(null),N=qa(s,_=>b(_)),y=v.useRef(!1),S=g?h||!!g.closest("form"):!0,[C,T]=Du({prop:i,defaultProp:o??!1,onChange:x,caller:ex});return e.jsxs(rz,{scope:a,checked:C,disabled:u,children:[e.jsx(ca.button,{type:"button",role:"switch","aria-checked":C,"aria-required":c,"data-state":dk(C),"data-disabled":u?"":void 0,disabled:u,value:f,...p,ref:N,onClick:Vs(t.onClick,_=>{T(G=>!G),S&&(y.current=_.isPropagationStopped(),y.current||_.stopPropagation())})}),S&&e.jsx(ck,{control:g,bubbles:!y.current,name:r,value:f,checked:C,required:c,disabled:u,form:h,style:{transform:"translateX(-100%)"}})]})});ik.displayName=ex;var lk="SwitchThumb",ok=v.forwardRef((t,s)=>{const{__scopeSwitch:a,...r}=t,i=nz(lk,a);return e.jsx(ca.span,{"data-state":dk(i.checked),"data-disabled":i.disabled?"":void 0,...r,ref:s})});ok.displayName=lk;var iz="SwitchBubbleInput",ck=v.forwardRef(({__scopeSwitch:t,control:s,checked:a,bubbles:r=!0,...i},o)=>{const c=v.useRef(null),u=qa(c,o),f=Ov(a),x=IS(s);return v.useEffect(()=>{const h=c.current;if(!h)return;const p=window.HTMLInputElement.prototype,b=Object.getOwnPropertyDescriptor(p,"checked").set;if(f!==a&&b){const N=new Event("click",{bubbles:r});b.call(h,a),h.dispatchEvent(N)}},[f,a,r]),e.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:a,...i,tabIndex:-1,ref:u,style:{...i.style,...x,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});ck.displayName=iz;function dk(t){return t?"checked":"unchecked"}var lz=ik,oz=ok;function ns({className:t,...s}){return e.jsx(lz,{"data-slot":"switch",className:Je("peer data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:border-ring focus-visible:ring-ring/50 dark:data-[state=unchecked]:bg-input/80 inline-flex h-[1.15rem] w-8 shrink-0 items-center rounded-full border border-transparent shadow-xs transition-all outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",t),...s,children:e.jsx(oz,{"data-slot":"switch-thumb",className:Je("bg-background dark:data-[state=unchecked]:bg-foreground dark:data-[state=checked]:bg-primary-foreground pointer-events-none block size-4 rounded-full ring-0 transition-transform data-[state=checked]:translate-x-[calc(100%-2px)] data-[state=unchecked]:translate-x-0")})})}const cz=()=>{const[t,s]=v.useState(""),[a,r]=v.useState("all"),[i,o]=v.useState(!1),[c,u]=v.useState(!1),[f,x]=v.useState(!1),[h,p]=v.useState(null),{user:g,isAuthenticated:b,loading:N}=Es(),y=W=>({_id:W._id||W.id,name:W.name??W.fullName??"",email:W.email??W.contactEmail??"",phone:W.phone??W.phoneNumber??"",role:W.role??"",salary:W.salary??0,status:W.status??"Active",notifications:{sms:W.notifications?.sms??W.notifyBySMS??!1,email:W.notifications?.email??W.notifyByEmail??!1},joinDate:W.joinDate??W.createdAt??null}),[S,C]=v.useState([]),[T,_]=v.useState([]),[G,U]=v.useState({name:"",email:"",phone:"",role:"",salary:"",profilePhoto:"",notifications:{sms:!1,email:!1}}),[F,k]=v.useState({employeeId:"",amount:"",phone:"",message:"",smsReceipt:!1});v.useEffect(()=>{(async()=>{if(b)try{const se=localStorage.getItem("token"),[Z,I]=await Promise.all([ye.get("/team",{headers:{Authorization:`Bearer ${se}`}}),ye.get("/expenses",{headers:{Authorization:`Bearer ${se}`}})]);C((Z.data||[]).map(y)),_(I.data||[])}catch(se){D.error("Failed to fetch data"),console.error(se)}})()},[b]);const E=async()=>{const W=localStorage.getItem("token");if(!W)return D.error("Please log in first.");const{name:se,email:Z,phone:I,role:Q,salary:O,notifications:te}=G;if(!se||!Z||!Q)return D.error("Name, email and role are required.");if(S.find(je=>je.contactEmail?.toLowerCase()===Z.toLowerCase()))return D.error("An employee with this email already exists.");if(I&&S.find(je=>je.phoneNumber===I))return D.error("An employee with this phone number already exists.");try{const je=await ye.post("/team",{fullName:se,contactEmail:Z,phoneNumber:I,role:Q,salary:Number(O)||0,profilePhoto:G.profilePhoto||`https://ui-avatars.com/api/?name=${encodeURIComponent(se)}&background=10b981&color=fff`,notifyBySMS:te.sms,notifyByEmail:te.email},{headers:{Authorization:`Bearer ${W}`}});C(Me=>[...Me,je.data]),o(!1),U({name:"",email:"",phone:"",role:"",salary:"",profilePhoto:"",notifications:{sms:!1,email:!1}}),D.success("Employee added successfully!")}catch(je){D.error(je.response?.data?.message||"Error adding employee."),console.error(je)}},A=W=>{p({...W,salary:String(W.salary??"")}),x(!0)},B=(W,se)=>{p(Z=>({...Z,[W]:se}))},H=async()=>{const W=localStorage.getItem("token");if(!(!W||!h?._id))try{const se=await ye.put(`/team/${h._id}`,{fullName:h.name,contactEmail:h.email,phoneNumber:h.phone,role:h.role,salary:Number(h.salary)||0,notifyBySMS:h.notifications?.sms,notifyByEmail:h.notifications?.email},{headers:{Authorization:`Bearer ${W}`}});C(Z=>Z.map(I=>I._id===se.data._id?se.data:I)),x(!1),p(null),D.success("Employee updated!")}catch(se){D.error(se.response?.data?.message||"Error updating employee."),console.error(se)}},M=async W=>{const se=localStorage.getItem("token");if(!se)return D.error("Please log in first.");try{await ye.delete(`/team/${W}`,{headers:{Authorization:`Bearer ${se}`}}),C(Z=>Z.filter(I=>(I._id||I.id)!==W)),D.success("Employee deleted.")}catch(Z){D.error(Z.response?.data?.message||"Error deleting employee."),console.error(Z)}},q=async()=>{const W=localStorage.getItem("token");if(!W){D.error("Please log in first.");return}if(!F.employeeId||!F.amount||!F.phone){D.error("Please fill in all required fields.");return}const se=Number(F.amount);if(isNaN(se)||se<1){D.error("Amount must be a positive number (at least 1 KSh).");return}try{const Z=S.find(Q=>Q._id===F.employeeId),I=await ye.post("/mpesa/stkpush",{phone:F.phone,amount:se,accountReference:"Payroll Payment",transactionDesc:`Payroll payment for ${Z?.name||"Employee"} - ${F.message||""}`},{headers:{Authorization:`Bearer ${W}`}});if(I.status===200&&I.data?.data?.checkoutRequestID){const Q=I.data.data.checkoutRequestID;await ye.post("/expenses",{employeeId:F.employeeId,amount:se,phone:F.phone,message:F.message,smsReceipt:F.smsReceipt,paymentMethod:"M-Pesa",transactionId:Q,category:"Payroll",description:`Payroll payment via M-Pesa for ${Z?.name||"Employee"}`},{headers:{Authorization:`Bearer ${W}`}}),u(!1),k({employeeId:"",amount:"",phone:"",message:"",smsReceipt:!1});const O=await ye.get("/expenses",{headers:{Authorization:`Bearer ${W}`}});_(O.data||[]),D.success("M-Pesa STK Push initiated successfully! Employee will receive payment prompt on their phone.")}else throw new Error(I.data?.error||I.data?.message||"M-Pesa STK Push failed")}catch(Z){console.error("Payroll payment error:",Z),D.error(Z.response?.data?.error||Z.response?.data?.message||"Error sending payroll payment. Please try again.")}},L=W=>{switch(W){case"Active":return e.jsx(_e,{variant:"default",children:"Active"});case"On Leave":return e.jsx(_e,{variant:"secondary",children:"On Leave"});case"Inactive":return e.jsx(_e,{variant:"destructive",children:"Inactive"});default:return e.jsx(_e,{variant:"outline",children:W})}},re=W=>{switch(W){case"Completed":return e.jsx(_e,{variant:"default",children:"Completed"});case"Pending":return e.jsx(_e,{variant:"secondary",children:"Pending"});case"Failed":return e.jsx(_e,{variant:"destructive",children:"Failed"});default:return e.jsx(_e,{variant:"outline",children:W})}},V=S.filter(W=>{const se=W.name?.toLowerCase().includes(t.toLowerCase())||W.email?.toLowerCase().includes(t.toLowerCase()),Z=a==="all"||W.role===a;return se&&Z}),ee=S.reduce((W,se)=>W+(se.salary||0),0),me=S.filter(W=>W.status==="Active").length;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Team Management"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage employees, payroll, and notifications"})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs(Ft,{open:c,onOpenChange:u,children:[e.jsx(Na,{asChild:!0,children:e.jsxs(R,{variant:"outline",children:[e.jsx(ha,{className:"mr-2 h-4 w-4"}),"M-Pesa Payroll"]})}),e.jsxs(It,{className:"max-w-2xl",children:[e.jsxs(Lt,{children:[e.jsx(Bt,{children:"M-Pesa Payroll Management"}),e.jsx(es,{children:"Send salaries directly to employee phone numbers via M-Pesa"})]}),e.jsxs(pa,{defaultValue:"pay-salary",className:"w-full",children:[e.jsxs(ba,{className:"grid w-full grid-cols-2",children:[e.jsx(ut,{value:"pay-salary",children:"Pay Salary"}),e.jsx(ut,{value:"payment-history",children:"Payment History"})]}),e.jsxs(mt,{value:"pay-salary",className:"space-y-4",children:[e.jsxs("div",{className:"grid gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(ae,{htmlFor:"employee-select",children:"Select Employee"}),e.jsxs(Ot,{value:F.employeeId,onValueChange:W=>k(se=>({...se,employeeId:W})),children:[e.jsx(Pt,{children:e.jsx(Rt,{placeholder:"Choose employee"})}),e.jsx(Mt,{children:S.map(W=>e.jsxs(Ee,{value:W._id||W.id,children:[W.name," - KSh ",W.salary?.toLocaleString()]},W._id||W.id))})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(ae,{htmlFor:"amount",children:"Amount (KSh)"}),e.jsx(fe,{id:"amount",placeholder:"45,000",value:F.amount,onChange:W=>k(se=>({...se,amount:W.target.value})),type:"number",min:"1"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(ae,{htmlFor:"phone",children:"Phone Number"}),e.jsx(fe,{id:"phone",placeholder:"+254701234567",value:F.phone,onChange:W=>k(se=>({...se,phone:W.target.value}))})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(ae,{htmlFor:"message",children:"Payment Message (Optional)"}),e.jsx(Ts,{id:"message",placeholder:"Salary payment for January 2024",className:"resize-none",value:F.message,onChange:W=>k(se=>({...se,message:W.target.value}))})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ns,{id:"sms-receipt",checked:F.smsReceipt,onCheckedChange:W=>k(se=>({...se,smsReceipt:W}))}),e.jsx(ae,{htmlFor:"sms-receipt",children:"Send SMS receipt"})]})]}),e.jsxs(Rs,{children:[e.jsx(R,{variant:"outline",className:"text-red-500 cursor-pointer hover:text-red-500",onClick:()=>u(!1),children:"Cancel"}),e.jsxs(R,{className:"bg-green-500 cursor-pointer hover:bg-green-400",onClick:q,children:[e.jsx(Ma,{className:"mr-2 h-4 w-4"}),"Send Payment"]})]})]}),e.jsx(mt,{value:"payment-history",children:e.jsx("div",{className:"space-y-4",children:e.jsxs(Zn,{children:[e.jsx(Jn,{children:e.jsxs(ma,{children:[e.jsx(wt,{children:"Employee"}),e.jsx(wt,{children:"Amount"}),e.jsx(wt,{children:"Date"}),e.jsx(wt,{children:"Status"}),e.jsx(wt,{children:"Transaction ID"})]})}),e.jsx(ei,{children:T.map(W=>e.jsxs(ma,{children:[e.jsx(Nt,{children:W.employeeName}),e.jsxs(Nt,{children:["KSh ",W.amount?.toLocaleString()]}),e.jsx(Nt,{children:W.date?new Date(W.date).toLocaleDateString():""}),e.jsx(Nt,{children:re(W.status)}),e.jsx(Nt,{className:"font-mono text-xs",children:W.transactionId})]},W._id||W.id))})]})})})]})]})]}),e.jsxs(Ft,{open:i,onOpenChange:o,children:[e.jsx(Na,{asChild:!0,children:e.jsxs(R,{className:"bg-green-500 cursor-pointer hover:bg-green-400",children:[e.jsx(Hs,{className:"mr-2 h-4 w-4"}),"Add Employee"]})}),e.jsxs(It,{children:[e.jsxs(Lt,{children:[e.jsx(Bt,{children:"Add New Employee"}),e.jsx(es,{children:"Register a new team member to your business"})]}),e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(ae,{htmlFor:"name",children:"Full Name"}),e.jsx(fe,{id:"name",placeholder:"Enter full name",value:G.name,onChange:W=>U(se=>({...se,name:W.target.value}))})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(ae,{htmlFor:"email",children:"Email Address"}),e.jsx(fe,{id:"email",type:"email",placeholder:"employee@example.com",value:G.email,onChange:W=>U(se=>({...se,email:W.target.value}))})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(ae,{htmlFor:"phone",children:"Phone Number"}),e.jsx(fe,{id:"phone",placeholder:"+254701234567",value:G.phone,onChange:W=>U(se=>({...se,phone:W.target.value}))})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(ae,{htmlFor:"profilePhoto",children:"Profile Photo URL (Optional)"}),e.jsx(fe,{id:"profilePhoto",placeholder:"https://example.com/photo.jpg",value:G.profilePhoto,onChange:W=>U(se=>({...se,profilePhoto:W.target.value}))}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Leave empty to auto-generate an avatar based on the name"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(ae,{htmlFor:"role",children:"Role"}),e.jsxs(Ot,{value:G.role,onValueChange:W=>U(se=>({...se,role:W})),children:[e.jsx(Pt,{children:e.jsx(Rt,{placeholder:"Select role"})}),e.jsxs(Mt,{children:[e.jsx(Ee,{value:"Manager",children:"Manager"}),e.jsx(Ee,{value:"Stylist",children:"Stylist"}),e.jsx(Ee,{value:"Receptionist",children:"Receptionist"}),e.jsx(Ee,{value:"Staff",children:"Staff"})]})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(ae,{htmlFor:"salary",children:"Monthly Salary (KSh)"}),e.jsx(fe,{id:"salary",placeholder:"35,000",value:G.salary,onChange:W=>U(se=>({...se,salary:W.target.value}))})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(ae,{children:"Notification Preferences"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(vi,{className:"h-4 w-4"}),e.jsx(ae,{htmlFor:"sms-notifications",children:"SMS Notifications"})]}),e.jsx(ns,{id:"sms-notifications",checked:G.notifications.sms,onCheckedChange:W=>U(se=>({...se,notifications:{...se.notifications,sms:W}}))})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Gs,{className:"h-4 w-4"}),e.jsx(ae,{htmlFor:"email-notifications",children:"Email Notifications"})]}),e.jsx(ns,{id:"email-notifications",checked:G.notifications.email,onCheckedChange:W=>U(se=>({...se,notifications:{...se.notifications,email:W}}))})]})]})]}),e.jsxs(Rs,{children:[e.jsx(R,{variant:"outline",className:"text-red-500 cursor-pointer hover:text-red-400",onClick:()=>o(!1),children:"Cancel"}),e.jsx(R,{className:"bg-green-500 cursor-pointer hover:bg-green-400",onClick:E,children:"Add Employee"})]})]})]})]})]}),e.jsxs("div",{className:"grid gap-6 md:grid-cols-4",children:[e.jsxs(K,{children:[e.jsxs(pe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(ge,{className:"text-sm font-medium",children:"Total Employees"}),e.jsx(Xt,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(X,{children:[e.jsx("div",{className:"text-2xl font-bold",children:S.length}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[me," active"]})]})]}),e.jsxs(K,{children:[e.jsxs(pe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(ge,{className:"text-sm font-medium",children:"Monthly Payroll"}),e.jsx(ea,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(X,{children:[e.jsxs("div",{className:"text-2xl font-bold",children:["KSh ",ee.toLocaleString()]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Total monthly budget"})]})]}),e.jsxs(K,{children:[e.jsxs(pe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(ge,{className:"text-sm font-medium",children:"Last Payment"}),e.jsx(ha,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(X,{children:[e.jsx("div",{className:"text-2xl font-bold",children:T[0]?.date?new Date(T[0].date).toLocaleDateString("en-US",{month:"short",day:"numeric"}):"--"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Next due: Feb 1"})]})]}),e.jsxs(K,{children:[e.jsxs(pe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(ge,{className:"text-sm font-medium",children:"Notifications Sent"}),e.jsx(Fr,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(X,{children:[e.jsx("div",{className:"text-2xl font-bold",children:"47"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"This month"})]})]})]}),e.jsxs(K,{children:[e.jsxs(pe,{children:[e.jsx(ge,{children:"Employee Directory"}),e.jsx(lt,{children:"Manage your team members and their details"})]}),e.jsxs(X,{children:[e.jsxs("div",{className:"flex items-center space-x-4 mb-6",children:[e.jsxs("div",{className:"relative flex-1 max-w-sm",children:[e.jsx(ia,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(fe,{placeholder:"Search employees...",value:t,onChange:W=>s(W.target.value),className:"pl-10"})]}),e.jsxs(Ot,{value:a,onValueChange:r,children:[e.jsx(Pt,{className:"w-[180px]",children:e.jsx(Rt,{placeholder:"Filter by role"})}),e.jsxs(Mt,{children:[e.jsx(Ee,{value:"all",children:"All Roles"}),e.jsx(Ee,{value:"Manager",children:"Manager"}),e.jsx(Ee,{value:"Stylist",children:"Stylist"}),e.jsx(Ee,{value:"Receptionist",children:"Receptionist"}),e.jsx(Ee,{value:"Staff",children:"Staff"})]})]})]}),e.jsxs(Zn,{children:[e.jsx(Jn,{children:e.jsxs(ma,{children:[e.jsx(wt,{children:"Employee"}),e.jsx(wt,{children:"Contact"}),e.jsx(wt,{children:"Role"}),e.jsx(wt,{children:"Salary"}),e.jsx(wt,{children:"Status"}),e.jsx(wt,{children:"Notifications"}),e.jsx(wt,{children:"Actions"})]})}),e.jsx(ei,{children:V.map(W=>e.jsxs(ma,{children:[e.jsx(Nt,{children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:W.name}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Joined"," ",W.joinDate?new Date(W.joinDate).toLocaleDateString():""]})]})}),e.jsx(Nt,{children:e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center text-sm",children:[e.jsx(Gs,{className:"mr-1 h-3 w-3"}),W.email]}),e.jsxs("div",{className:"flex items-center text-sm",children:[e.jsx($s,{className:"mr-1 h-3 w-3"}),W.phone]})]})}),e.jsx(Nt,{children:W.role}),e.jsxs(Nt,{children:["KSh ",W.salary?.toLocaleString()]}),e.jsx(Nt,{children:L(W.status)}),e.jsx(Nt,{children:e.jsxs("div",{className:"flex space-x-1",children:[W.notifications?.sms&&e.jsx(_e,{variant:"outline",className:"text-xs",children:"SMS"}),W.notifications?.email&&e.jsx(_e,{variant:"outline",className:"text-xs",children:"Email"})]})}),e.jsx(Nt,{children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(R,{variant:"outline",size:"sm",onClick:()=>A(W),children:e.jsx(Qi,{className:"h-3 w-3"})}),e.jsx(R,{variant:"outline",size:"sm",onClick:()=>M(W._id||W.id),children:e.jsx(fa,{className:"h-3 w-3"})})]})})]},W._id||W.id))})]})]})]}),f&&h&&e.jsx(Ft,{open:f,onOpenChange:x,children:e.jsxs(It,{children:[e.jsxs(Lt,{children:[e.jsx(Bt,{children:"Edit Employee"}),e.jsx(es,{children:"Update employee details"})]}),e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsx(ae,{children:"Name"}),e.jsx(fe,{value:h.name,onChange:W=>B("name",W.target.value)}),e.jsx(ae,{children:"Email"}),e.jsx(fe,{type:"email",value:h.email,onChange:W=>B("email",W.target.value)}),e.jsx(ae,{children:"Phone"}),e.jsx(fe,{value:h.phone,onChange:W=>B("phone",W.target.value)}),e.jsx(ae,{children:"Role"}),e.jsx(fe,{value:h.role,onChange:W=>B("role",W.target.value)}),e.jsx(ae,{children:"Salary"}),e.jsx(fe,{type:"number",value:h.salary,onChange:W=>B("salary",W.target.value)})]}),e.jsxs(Rs,{children:[e.jsx(R,{variant:"outline",onClick:()=>x(!1),children:"Cancel"}),e.jsx(R,{className:"bg-green-500 hover:bg-green-400",onClick:H,children:"Save"})]})]})})]})},as=({data:t=null,type:s="line",title:a="Analytics Chart",description:r="",height:i=300,showControls:o=!0,autoRefresh:c=!1,refreshInterval:u=3e4,className:f="",onDataUpdate:x=null})=>{const[h,p]=v.useState(s),[g,b]=v.useState("7d"),[N,y]=v.useState(t),[S,C]=v.useState(!1),[T,_]=v.useState(new Date),G={primary:["#10b981","#059669","#047857","#065f46"],profit:["#22c55e","#16a34a","#15803d","#166534"],loss:["#ef4444","#dc2626","#b91c1c","#991b1b"],rainbow:["#10b981","#3b82f6","#8b5cf6","#f59e0b","#ef4444","#06b6d4"]},U=(q,L)=>{const re=L==="7d"?7:L==="30d"?30:L==="90d"?90:365,V=[];for(let ee=0;ee<re;ee++){const me=new Date;me.setDate(me.getDate()-(re-ee-1));const W=1e3+Math.random()*500,se=q==="profit"?ee*10:q==="loss"?-ee*5:Math.sin(ee/5)*100;V.push({date:me.toISOString().split("T")[0],name:me.toLocaleDateString("en-US",{month:"short",day:"numeric"}),value:Math.max(0,W+se+(Math.random()-.5)*200),profit:Math.max(0,W*.3+se*.5+(Math.random()-.5)*100),loss:Math.max(0,W*.1-se*.3+(Math.random()-.5)*50),revenue:W+se+(Math.random()-.5)*300,orders:Math.floor(20+Math.random()*50+ee*2),customers:Math.floor(10+Math.random()*30+ee),products:Math.floor(5+Math.random()*15),growth:((Math.random()-.5)*20).toFixed(1)})}return V};v.useEffect(()=>{if(c){const q=setInterval(()=>{F()},u);return()=>clearInterval(q)}},[c,u,g]),v.useEffect(()=>{y(t||U(s,g))},[t,s,g]);const F=async()=>{C(!0);try{await new Promise(L=>setTimeout(L,1e3));const q=t||U(s,g);y(q),_(new Date),x&&x(q),D.success("Chart data updated successfully")}catch{D.error("Failed to update chart data")}finally{C(!1)}},k=()=>{D.info("Exporting chart data...");const q=N.map(ee=>Object.entries(ee).map(([me,W])=>`${me}: ${W}`).join(", ")).join(`
`),L=new Blob([q],{type:"text/csv"}),re=URL.createObjectURL(L),V=document.createElement("a");V.href=re,V.download=`${a.replace(/\s+/g,"_")}_${new Date().toISOString().split("T")[0]}.csv`,V.click(),URL.revokeObjectURL(re)},A=a.toLowerCase().includes("profit")||a.toLowerCase().includes("revenue")?G.profit:a.toLowerCase().includes("loss")||a.toLowerCase().includes("expense")?G.loss:G.primary,B=()=>{if(!N||N.length===0)return e.jsx("div",{className:"flex items-center justify-center h-64 text-muted-foreground",children:e.jsxs("div",{className:"text-center",children:[e.jsx(er,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"No data available"})]})});const q={data:N,margin:{top:5,right:30,left:20,bottom:5}};switch(h){case"line":return e.jsxs(V6,{...q,children:[e.jsx(Sh,{strokeDasharray:"3 3",stroke:"#f0f0f0"}),e.jsx(Ch,{dataKey:"name",stroke:"#666"}),e.jsx(Th,{stroke:"#666"}),e.jsx(nu,{contentStyle:{backgroundColor:"#fff",border:"1px solid #e5e7eb",borderRadius:"8px",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1)"}}),e.jsx(kh,{}),e.jsx(Rb,{type:"monotone",dataKey:"value",stroke:A[0],strokeWidth:3,dot:{fill:A[0],strokeWidth:2,r:4},activeDot:{r:6,stroke:A[0],strokeWidth:2}})]});case"area":return e.jsxs(z6,{...q,children:[e.jsx(Sh,{strokeDasharray:"3 3",stroke:"#f0f0f0"}),e.jsx(Ch,{dataKey:"name",stroke:"#666"}),e.jsx(Th,{stroke:"#666"}),e.jsx(nu,{contentStyle:{backgroundColor:"#fff",border:"1px solid #e5e7eb",borderRadius:"8px",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1)"}}),e.jsx(kh,{}),e.jsx(U6,{type:"monotone",dataKey:"value",stroke:A[0],fill:A[0],fillOpacity:.3,strokeWidth:2})]});case"bar":return e.jsxs(B6,{...q,children:[e.jsx(Sh,{strokeDasharray:"3 3",stroke:"#f0f0f0"}),e.jsx(Ch,{dataKey:"name",stroke:"#666"}),e.jsx(Th,{stroke:"#666"}),e.jsx(nu,{contentStyle:{backgroundColor:"#fff",border:"1px solid #e5e7eb",borderRadius:"8px",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1)"}}),e.jsx(kh,{}),e.jsx(Ob,{dataKey:"value",fill:A[0],radius:[4,4,0,0]})]});case"pie":const L=N.slice(0,6).map((re,V)=>({name:re.name,value:re.value,fill:G.rainbow[V%G.rainbow.length]}));return e.jsxs(F6,{children:[e.jsx(I6,{data:L,cx:"50%",cy:"50%",labelLine:!1,label:({name:re,percent:V})=>`${re} ${(V*100).toFixed(0)}%`,outerRadius:80,fill:"#8884d8",dataKey:"value",children:L.map((re,V)=>e.jsx(L6,{fill:re.fill},`cell-${V}`))}),e.jsx(nu,{})]});case"composed":return e.jsxs(M6,{...q,children:[e.jsx(Sh,{strokeDasharray:"3 3",stroke:"#f0f0f0"}),e.jsx(Ch,{dataKey:"name",stroke:"#666"}),e.jsx(Th,{stroke:"#666"}),e.jsx(nu,{contentStyle:{backgroundColor:"#fff",border:"1px solid #e5e7eb",borderRadius:"8px",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1)"}}),e.jsx(kh,{}),e.jsx(Ob,{dataKey:"profit",fill:G.profit[0],radius:[2,2,0,0]}),e.jsx(Rb,{type:"monotone",dataKey:"revenue",stroke:A[0],strokeWidth:3})]});default:return B()}},H=[{value:"line",label:"Line Chart",icon:Aa},{value:"area",label:"Area Chart",icon:Is},{value:"bar",label:"Bar Chart",icon:er},{value:"pie",label:"Pie Chart",icon:BS},{value:"composed",label:"Combined",icon:er}],M=[{value:"7d",label:"7 Days"},{value:"30d",label:"30 Days"},{value:"90d",label:"90 Days"},{value:"1y",label:"1 Year"}];return e.jsxs(K,{className:f,children:[e.jsxs(pe,{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs(ge,{className:"flex items-center gap-2",children:[e.jsx(er,{className:"h-5 w-5 text-green-600"}),a]}),r&&e.jsx(lt,{children:r})]}),o&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(Ot,{value:h,onValueChange:p,children:[e.jsx(Pt,{className:"w-32",children:e.jsx(Rt,{})}),e.jsx(Mt,{children:H.map(q=>{const L=q.icon;return e.jsx(Ee,{value:q.value,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(L,{className:"h-4 w-4"}),q.label]})},q.value)})})]}),e.jsxs(Ot,{value:g,onValueChange:b,children:[e.jsx(Pt,{className:"w-24",children:e.jsx(Rt,{})}),e.jsx(Mt,{children:M.map(q=>e.jsx(Ee,{value:q.value,children:q.label},q.value))})]}),e.jsx(R,{variant:"outline",size:"sm",onClick:F,disabled:S,children:e.jsx(is,{className:`h-4 w-4 ${S?"animate-spin":""}`})}),e.jsx(R,{variant:"outline",size:"sm",onClick:k,children:e.jsx(Pa,{className:"h-4 w-4"})})]})]}),T&&e.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[e.jsx(Qt,{className:"h-3 w-3"}),"Last updated: ",T.toLocaleTimeString(),c&&e.jsx(_e,{variant:"secondary",className:"text-xs",children:"Auto-refresh"})]})]}),e.jsx(X,{children:e.jsx(P6,{width:"100%",height:i,children:B()})})]})},dz=({amount:t,description:s,onSuccess:a,onError:r,disabled:i=!1})=>{const[o,c]=v.useState(!1),[u,f]=v.useState(""),[x,h]=v.useState(!1),[p,g]=v.useState(null),[b,N]=v.useState(""),y=k=>{const E=k.replace(/\D/g,"");return E.startsWith("254")?E:E.startsWith("0")?"254"+E.substring(1):E.length===9?"254"+E:E},S=k=>{const E=y(k);return E.length===12&&E.startsWith("254")},C=async()=>{if(!S(u)){D.error("Please enter a valid Kenyan phone number");return}h(!0),g("pending");try{const k=localStorage.getItem("token"),E=y(u),A=await ye.post("/payments/mpesa/initiate",{phoneNumber:E,amount:t,description:s||"Payment for ominbiz services"},{headers:{Authorization:`Bearer ${k}`}});if(A.data.success)N(A.data.transactionId),D.success("Payment request sent! Please check your phone for the M-Pesa prompt."),T(A.data.transactionId);else throw new Error(A.data.message||"Payment initiation failed")}catch(k){console.error("M-Pesa payment error:",k),g("failed");const E=k.response?.data?.message||k.message||"Payment failed";D.error(E),r&&r(k)}},T=async k=>{let A=0;const B=async()=>{try{const H=localStorage.getItem("token"),M=await ye.get(`/payments/mpesa/status/${k}`,{headers:{Authorization:`Bearer ${H}`}}),q=M.data.status;q==="completed"?(g("success"),h(!1),D.success("Payment completed successfully!"),a&&a(M.data),setTimeout(()=>c(!1),2e3)):q==="failed"||q==="cancelled"?(g("failed"),h(!1),D.error("Payment was cancelled or failed"),r&&r(new Error("Payment failed"))):A<30?(A++,setTimeout(B,1e4)):(g("failed"),h(!1),D.error("Payment timeout. Please try again."),r&&r(new Error("Payment timeout")))}catch(H){console.error("Error checking payment status:",H),A<30?(A++,setTimeout(B,1e4)):(g("failed"),h(!1),D.error("Unable to verify payment status"),r&&r(H))}};B()},_=()=>{g(null),h(!1),N(""),f("")},G=()=>{x||(c(!1),_())},U=()=>{switch(p){case"pending":return e.jsx(Qt,{className:"h-8 w-8 text-yellow-500"});case"success":return e.jsx(os,{className:"h-8 w-8 text-green-500"});case"failed":return e.jsx(Cs,{className:"h-8 w-8 text-red-500"});default:return e.jsx(Kr,{className:"h-8 w-8 text-primary"})}},F=()=>{switch(p){case"pending":return"Waiting for payment confirmation...";case"success":return"Payment completed successfully!";case"failed":return"Payment failed. Please try again.";default:return"Enter your M-Pesa number to proceed"}};return e.jsxs(Ft,{open:o,onOpenChange:G,children:[e.jsx(Na,{asChild:!0,children:e.jsxs(R,{onClick:()=>c(!0),disabled:i,className:"bg-green-600 hover:bg-green-700 text-white",children:[e.jsx(Kr,{className:"mr-2 h-4 w-4"}),"Pay with M-Pesa"]})}),e.jsxs(It,{className:"sm:max-w-md",children:[e.jsxs(Lt,{children:[e.jsxs(Bt,{className:"flex items-center gap-2",children:[e.jsx(Kr,{className:"h-5 w-5 text-green-600"}),"M-Pesa Payment"]}),e.jsxs(es,{children:["Pay KES ",t?.toLocaleString()," using M-Pesa"]})]}),e.jsx(K,{children:e.jsxs(X,{className:"pt-6",children:[e.jsxs("div",{className:"text-center space-y-4",children:[U(),e.jsx("p",{className:"text-sm text-muted-foreground",children:F()})]}),!p&&e.jsxs("div",{className:"space-y-4 mt-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(ae,{htmlFor:"phone",children:"Phone Number"}),e.jsx(fe,{id:"phone",type:"tel",placeholder:"0712345678 or 254712345678",value:u,onChange:k=>f(k.target.value),disabled:x}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Enter your Safaricom M-Pesa number"})]}),e.jsx(R,{onClick:C,disabled:!u||x,className:"w-full bg-green-600 hover:bg-green-700",children:x?e.jsxs(e.Fragment,{children:[e.jsx(Yn,{className:"mr-2 h-4 w-4 animate-spin"}),"Processing..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Kr,{className:"mr-2 h-4 w-4"}),"Send Payment Request"]})})]}),p==="pending"&&e.jsxs("div",{className:"mt-6 p-4 bg-yellow-50 dark:bg-yellow-900/20 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 text-yellow-800 dark:text-yellow-200",children:[e.jsx(Yn,{className:"h-4 w-4 animate-spin"}),e.jsx("span",{className:"text-sm font-medium",children:"Check your phone for M-Pesa prompt"})]}),e.jsxs("p",{className:"text-xs text-yellow-700 dark:text-yellow-300 mt-1",children:["Transaction ID: ",b]})]}),p==="failed"&&e.jsxs("div",{className:"mt-6 space-y-3",children:[e.jsx("div",{className:"p-4 bg-red-50 dark:bg-red-900/20 rounded-lg",children:e.jsx("p",{className:"text-sm text-red-800 dark:text-red-200",children:"Payment was not completed. Please try again."})}),e.jsx(R,{onClick:_,variant:"outline",className:"w-full",children:"Try Again"})]})]})})]})]})},uz=({amount:t,description:s,currency:a="USD",onSuccess:r,onError:i,disabled:o=!1})=>{const[c,u]=v.useState(!1),[f,x]=v.useState(!1),[h,p]=v.useState(null),[g,b]=v.useState(!1),[N,y]=v.useState(null);v.useEffect(()=>{if(typeof window<"u"&&!window.paypal){const F=document.createElement("script"),k="demo_client_id";F.src=`https://www.paypal.com/sdk/js?client-id=${k}&currency=${a}`,F.async=!0,F.onload=()=>{b(!0)},F.onerror=()=>{console.error("Failed to load PayPal SDK"),b(!1)},document.body.appendChild(F)}else window.paypal&&b(!0)},[a]),v.useEffect(()=>{c&&g&&window.paypal&&!N&&S()},[c,g,N]);const S=()=>{if(!window.paypal)return;const F=window.paypal.Buttons({createOrder:async(E,A)=>{try{x(!0);const B=localStorage.getItem("token"),H=await ye.post("/payments/paypal/create-order",{amount:t,currency:a,description:s||"Payment for ominbiz services"},{headers:{Authorization:`Bearer ${B}`}});if(H.data.success)return H.data.orderID;throw new Error(H.data.message||"Failed to create PayPal order")}catch(B){return console.error("Error creating PayPal order:",B),x(!1),D.error("Failed to create payment order"),i&&i(B),null}},onApprove:async(E,A)=>{try{const B=localStorage.getItem("token"),H=await ye.post("/payments/paypal/capture-order",{orderID:E.orderID},{headers:{Authorization:`Bearer ${B}`}});if(H.data.success)p("success"),x(!1),D.success("Payment completed successfully!"),r&&r(H.data),setTimeout(()=>u(!1),2e3);else throw new Error(H.data.message||"Payment capture failed")}catch(B){console.error("Error capturing PayPal payment:",B),p("failed"),x(!1),D.error("Payment failed to complete"),i&&i(B)}},onError:E=>{console.error("PayPal error:",E),p("failed"),x(!1),D.error("PayPal payment error occurred"),i&&i(E)},onCancel:E=>{console.log("PayPal payment cancelled:",E),x(!1),D.info("Payment was cancelled")},style:{layout:"vertical",color:"blue",shape:"rect",label:"paypal",height:40}}),k=document.getElementById("paypal-button-container");k&&k.children.length===0&&F.render("#paypal-button-container").then(()=>{y(F)}).catch(E=>{console.error("Error rendering PayPal buttons:",E),D.error("Failed to load PayPal payment options")})},C=()=>{p(null),x(!1);const F=document.getElementById("paypal-button-container");F&&(F.innerHTML=""),y(null)},T=()=>{f||(u(!1),C())},_=F=>{F?(u(!0),C()):T()},G=()=>{switch(h){case"success":return e.jsx(os,{className:"h-8 w-8 text-green-500"});case"failed":return e.jsx(Cs,{className:"h-8 w-8 text-red-500"});default:return e.jsx(ha,{className:"h-8 w-8 text-blue-500"})}},U=()=>{switch(h){case"success":return"Payment completed successfully!";case"failed":return"Payment failed. Please try again.";default:return"Choose your payment method below"}};return e.jsxs(Ft,{open:c,onOpenChange:_,children:[e.jsx(Na,{asChild:!0,children:e.jsxs(R,{disabled:o,className:"bg-blue-600 hover:bg-blue-700 text-white",children:[e.jsx(ha,{className:"mr-2 h-4 w-4"}),"Pay with PayPal"]})}),e.jsxs(It,{className:"sm:max-w-md",children:[e.jsxs(Lt,{children:[e.jsxs(Bt,{className:"flex items-center gap-2",children:[e.jsx(ha,{className:"h-5 w-5 text-blue-600"}),"PayPal Payment"]}),e.jsxs(es,{children:["Pay ",a," ",t?.toLocaleString()," using PayPal"]})]}),e.jsx(K,{children:e.jsxs(X,{className:"pt-6",children:[e.jsxs("div",{className:"text-center space-y-4",children:[G(),e.jsx("p",{className:"text-sm text-muted-foreground",children:U()})]}),!h&&e.jsx("div",{className:"mt-6 space-y-4",children:g?e.jsxs(e.Fragment,{children:[e.jsx("div",{id:"paypal-button-container",className:"min-h-[50px]"}),f&&e.jsxs("div",{className:"flex items-center justify-center py-4",children:[e.jsx(Yn,{className:"h-4 w-4 animate-spin mr-2"}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"Processing payment..."})]})]}):e.jsxs("div",{className:"flex items-center justify-center py-8",children:[e.jsx(Yn,{className:"h-6 w-6 animate-spin mr-2"}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"Loading PayPal..."})]})}),h==="failed"&&e.jsxs("div",{className:"mt-6 space-y-3",children:[e.jsx("div",{className:"p-4 bg-red-50 dark:bg-red-900/20 rounded-lg",children:e.jsx("p",{className:"text-sm text-red-800 dark:text-red-200",children:"Payment was not completed. Please try again."})}),e.jsx(R,{onClick:C,variant:"outline",className:"w-full",children:"Try Again"})]}),e.jsxs("div",{className:"mt-6 pt-4 border-t",children:[e.jsxs("div",{className:"flex items-center justify-center space-x-2 text-xs text-muted-foreground",children:[e.jsx(ha,{className:"h-3 w-3"}),e.jsx("span",{children:"Secured by PayPal"})]}),e.jsx("p",{className:"text-center text-xs text-muted-foreground mt-1",children:"Your payment information is encrypted and secure"})]})]})})]})]})},uk=({amount:t,description:s,currency:a="KES",onSuccess:r,onError:i,disabled:o=!1,triggerText:c="Make Payment",showMpesa:u=!0,showPaypal:f=!0})=>{const[x,h]=v.useState(!1),p=N=>{h(!1),r&&r(N)},g=N=>{i&&i(N)},b=(N,y)=>y==="KES"?`KES ${N?.toLocaleString()}`:y==="USD"?`$${N?.toLocaleString()}`:`${y} ${N?.toLocaleString()}`;return e.jsxs(Ft,{open:x,onOpenChange:h,children:[e.jsx(Na,{asChild:!0,children:e.jsxs(R,{disabled:o,className:"bg-primary hover:bg-primary/90",children:[e.jsx(ha,{className:"mr-2 h-4 w-4"}),c]})}),e.jsxs(It,{className:"sm:max-w-lg",children:[e.jsxs(Lt,{children:[e.jsxs(Bt,{className:"flex items-center gap-2",children:[e.jsx(j_,{className:"h-5 w-5"}),"Payment Options"]}),e.jsxs(es,{children:["Choose your preferred payment method for ",b(t,a)]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(K,{children:[e.jsx(pe,{className:"pb-3",children:e.jsx(ge,{className:"text-lg",children:"Payment Summary"})}),e.jsxs(X,{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Amount:"}),e.jsx("span",{className:"font-semibold",children:b(t,a)})]}),s&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Description:"}),e.jsx("span",{className:"text-sm",children:s})]})]})]}),e.jsxs(pa,{defaultValue:u?"mpesa":"paypal",className:"w-full",children:[e.jsxs(ba,{className:"grid w-full grid-cols-2",children:[u&&e.jsxs(ut,{value:"mpesa",className:"flex items-center gap-2",children:[e.jsx(Kr,{className:"h-4 w-4"}),"M-Pesa"]}),f&&e.jsxs(ut,{value:"paypal",className:"flex items-center gap-2",children:[e.jsx(ha,{className:"h-4 w-4"}),"PayPal"]})]}),u&&e.jsx(mt,{value:"mpesa",className:"space-y-4",children:e.jsxs(K,{children:[e.jsxs(pe,{className:"pb-3",children:[e.jsxs(ge,{className:"flex items-center gap-2 text-green-600",children:[e.jsx(Kr,{className:"h-5 w-5"}),"M-Pesa Payment"]}),e.jsx(lt,{children:"Pay instantly using your Safaricom M-Pesa mobile money"})]}),e.jsxs(X,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Qt,{className:"h-4 w-4 text-green-500"}),e.jsx("span",{children:"Instant payment"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ta,{className:"h-4 w-4 text-green-500"}),e.jsx("span",{children:"Secure & trusted"})]})]}),e.jsx("div",{className:"pt-2",children:e.jsx(dz,{amount:a==="KES"?t:Math.round(t*130),description:s,onSuccess:p,onError:g})})]})]})}),f&&e.jsx(mt,{value:"paypal",className:"space-y-4",children:e.jsxs(K,{children:[e.jsxs(pe,{className:"pb-3",children:[e.jsxs(ge,{className:"flex items-center gap-2 text-blue-600",children:[e.jsx(ha,{className:"h-5 w-5"}),"PayPal Payment"]}),e.jsx(lt,{children:"Pay with PayPal, credit card, or debit card"})]}),e.jsxs(X,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ta,{className:"h-4 w-4 text-blue-500"}),e.jsx("span",{children:"Buyer protection"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ha,{className:"h-4 w-4 text-blue-500"}),e.jsx("span",{children:"Cards accepted"})]})]}),e.jsx("div",{className:"pt-2",children:e.jsx(uz,{amount:a==="USD"?t:Math.round(t/130*100)/100,description:s,currency:"USD",onSuccess:p,onError:g})})]})]})})]}),e.jsx("div",{className:"bg-muted/50 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(ta,{className:"h-5 w-5 text-primary mt-0.5"}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-sm font-medium",children:"Secure Payment"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Your payment information is encrypted and processed securely. We never store your payment details."})]})]})})]})]})]})};function mz({onBalanceUpdate:t}){const{socket:s,connected:a}=da(),{user:r}=Es(),[i,o]=v.useState(null),[c,u]=v.useState(!0),[f,x]=v.useState(""),[h,p]=v.useState(!1);v.useEffect(()=>{g()},[]),v.useEffect(()=>{if(!(!s||!a))return s.on("wallet_updated",y=>{o(S=>S?{...S,balance:y.balance}:null),D.success(`Wallet ${y.type}: ${y.transaction?.description}`),t&&t(y.balance)}),s.on("payment_success",y=>{o(S=>S?{...S,balance:y.balance}:null),p(!1),D.success(`Payment successful! Receipt: ${y.receipt}`),t&&t(y.balance)}),s.on("payment_failed",y=>{p(!1),D.error(`Payment failed: ${y.reason}`)}),s.on("mpesa_initiated",y=>{D.info(y.message||"Check your phone for M-Pesa prompt",{duration:1e4})}),()=>{s.off("wallet_updated"),s.off("payment_success"),s.off("payment_failed"),s.off("mpesa_initiated")}},[s,a,t]);const g=async()=>{try{const y=await ye.get("/wallet");o(y.data)}catch(y){console.error("Error fetching wallet:",y)}finally{u(!1)}},b=async()=>{if(!f||f<=0)return D.error("Please enter a valid amount");try{p(!0);const y=await ye.post("/mpesa/stk-push",{phone:"",amount:Number(f),accountReference:"WALLET_TOPUP",transactionDesc:"Wallet top-up via M-Pesa"});D.success(y.data.message),x("")}catch(y){D.error(y.response?.data?.error||"Failed to initiate payment"),p(!1)}},N=async(y,S="manual")=>{try{const C=await ye.post("/wallet/deposit",{amount:Number(y),source:S,description:`Wallet deposit from ${S}`});D.success(C.data.message),await g(),t&&t(C.data.wallet.balance)}catch(C){D.error(C.response?.data?.error||"Failed to deposit")}};return c?e.jsx("div",{className:"animate-pulse space-y-4",children:e.jsx("div",{className:"h-40 bg-muted rounded-lg"})}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs(K,{className:"border-2 border-green-500/20 bg-gradient-to-br from-green-50 to-transparent dark:from-green-950/20",children:[e.jsx(pe,{children:e.jsxs(ge,{className:"flex items-center gap-2",children:[e.jsx(sd,{className:"h-5 w-5 text-green-600"}),"Digital Wallet",a&&e.jsxs(_e,{variant:"default",className:"gap-1 ml-auto bg-green-600 text-white border-green-600",children:[e.jsx(va,{className:"h-3 w-3"}),"Live"]})]})}),e.jsxs(X,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:"Available Balance"}),e.jsxs("div",{className:"text-2xl font-bold text-green-600",children:[i?.currency||"KES"," ",i?.balance?.toLocaleString()||"0.00"]}),e.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground mt-1",children:[e.jsx(ta,{className:"h-3 w-3"}),"Secure"]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:"Daily Limit"}),e.jsxs("div",{className:"text-lg font-semibold",children:[i?.currency||"KES"," ",i?.dailyLimit?.toLocaleString()||"100,000"]}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:["Used: ",i?.todaySpent?.toLocaleString()||"0"]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:"Transactions"}),e.jsx("div",{className:"text-lg font-semibold",children:i?.totalTransactions||0}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"All time"})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsxs(Ft,{children:[e.jsx(Na,{asChild:!0,children:e.jsxs(R,{size:"sm",variant:"default",className:"gap-2",children:[e.jsx(y_,{className:"h-4 w-4"}),"Deposit"]})}),e.jsxs(It,{children:[e.jsx(Lt,{children:e.jsx(Bt,{children:"Deposit Funds"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs(ae,{children:["Amount (",i?.currency||"KES",")"]}),e.jsx(fe,{type:"number",placeholder:"0.00",id:"deposit-amount"})]}),e.jsx(R,{className:"w-full",onClick:()=>{const y=document.getElementById("deposit-amount").value;y&&N(y)},children:"Deposit"})]})]})]}),e.jsxs(R,{size:"sm",variant:"outline",className:"gap-2",children:[e.jsx(N_,{className:"h-4 w-4"}),"Withdraw"]}),e.jsxs(R,{size:"sm",variant:"outline",className:"gap-2",children:[e.jsx(Ma,{className:"h-4 w-4"}),"Transfer"]})]})]})]}),e.jsxs(K,{className:"border-2 border-green-600/20",children:[e.jsxs(pe,{children:[e.jsxs(ge,{className:"flex items-center gap-2",children:[e.jsx(Kr,{className:"h-5 w-5 text-green-600"}),"M-Pesa Quick Top-Up"]}),e.jsxs(lt,{children:["Top up using your registered phone: ",r?.phone||"Not set"]})]}),e.jsxs(X,{children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx(fe,{type:"number",placeholder:"Amount (KES)",value:f,onChange:y=>x(y.target.value),disabled:h,className:"flex-1"}),e.jsx(R,{onClick:b,disabled:h||!f,className:"gap-2",children:h?e.jsxs(e.Fragment,{children:[e.jsx(Qt,{className:"h-4 w-4 animate-spin"}),"Processing"]}):e.jsxs(e.Fragment,{children:[e.jsx(Kr,{className:"h-4 w-4"}),"Pay"]})})]}),e.jsxs("div",{className:"mt-3 p-3 bg-muted/50 rounded text-xs space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(os,{className:"h-3 w-3 text-green-600"}),"Uses your registered phone number"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(os,{className:"h-3 w-3 text-green-600"}),"Instant wallet credit on payment"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(os,{className:"h-3 w-3 text-green-600"}),"Real-time payment notifications"]})]})]})]})]})}const hz=Cv("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),Uu=v.forwardRef(({className:t,variant:s,...a},r)=>e.jsx("div",{ref:r,role:"alert",className:Je(hz({variant:s}),t),...a}));Uu.displayName="Alert";const fz=v.forwardRef(({className:t,...s},a)=>e.jsx("h5",{ref:a,className:Je("mb-1 font-medium leading-none tracking-tight",t),...s}));fz.displayName="AlertTitle";const Vu=v.forwardRef(({className:t,...s},a)=>e.jsx("div",{ref:a,className:Je("text-sm [&_p]:leading-relaxed",t),...s}));Vu.displayName="AlertDescription";function xz({onSuccess:t}){const{user:s}=Es(),[a,r]=v.useState(!1),[i,o]=v.useState(!1),[c,u]=v.useState([]),[f,x]=v.useState(null),[h,p]=v.useState({recipientId:"",recipientName:"",recipientPhone:"",amount:"",paymentMethod:"wallet",description:"",category:"salary",pin:""});v.useEffect(()=>{a&&(g(),b())},[a]);const g=async()=>{try{const S=await ye.get("/team");u(S.data||[])}catch(S){console.error("Error fetching team:",S)}},b=async()=>{try{const S=await ye.get("/wallet");x(S.data)}catch(S){console.error("Error fetching wallet:",S)}},N=S=>{const C=c.find(T=>T._id===S);C&&p(T=>({...T,recipientId:C._id,recipientName:C.name,recipientPhone:C.phone||""}))},y=async()=>{if(!h.recipientId)return D.error("Please select a recipient");if(!h.amount||h.amount<=0)return D.error("Please enter a valid amount");if(h.paymentMethod==="wallet"&&!h.pin)return D.error("Please enter your wallet PIN");if(h.paymentMethod==="wallet"&&(!f||f.balance<h.amount))return D.error("Insufficient wallet balance");try{o(!0);let S;h.paymentMethod==="wallet"?S=await ye.post("/wallet/transfer",{amount:Number(h.amount),recipientId:h.recipientId,description:`${h.category}: ${h.description}`,pin:h.pin}):S=await ye.post("/mpesa/stk-push",{phone:h.recipientPhone,amount:Number(h.amount),accountReference:`PAY_${h.recipientId}`,transactionDesc:`Payment to ${h.recipientName}: ${h.description}`}),await ye.post("/transactions",{description:`Payment to ${h.recipientName} - ${h.category}`,amount:Number(h.amount),type:"expense",category:"employee_payment",status:"completed",reference:h.recipientId,notes:h.description}),D.success(`Payment initiated successfully to ${h.recipientName}`),r(!1),p({recipientId:"",recipientName:"",recipientPhone:"",amount:"",paymentMethod:"wallet",description:"",category:"salary",pin:""}),t&&t(S.data)}catch(S){console.error("Payment error:",S),D.error(S.response?.data?.error||"Payment failed")}finally{o(!1)}};return e.jsxs(Ft,{open:a,onOpenChange:r,children:[e.jsx(Na,{asChild:!0,children:e.jsxs(R,{className:"gap-2",children:[e.jsx(Xt,{className:"h-4 w-4"}),"Pay Employee/Contractor"]})}),e.jsxs(It,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsx(Lt,{children:e.jsxs(Bt,{className:"flex items-center gap-2",children:[e.jsx(Ma,{className:"h-5 w-5"}),"Make Payment to Team Member"]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs(Uu,{children:[e.jsx(ta,{className:"h-4 w-4"}),e.jsx(Vu,{children:"All payments are secure, logged, and auditable. Transaction records are maintained for compliance."})]}),f&&h.paymentMethod==="wallet"&&e.jsx("div",{className:"p-3 bg-green-50 dark:bg-green-950/20 rounded-lg border border-green-200 dark:border-green-800",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Available Balance:"}),e.jsxs("span",{className:"text-lg font-semibold text-green-600",children:[f.currency," ",f.balance?.toLocaleString()]})]})}),e.jsxs("div",{children:[e.jsx(ae,{children:"Select Recipient *"}),e.jsxs(Ot,{value:h.recipientId,onValueChange:N,children:[e.jsx(Pt,{children:e.jsx(Rt,{placeholder:"Choose team member"})}),e.jsx(Mt,{children:c.length===0?e.jsx("div",{className:"p-2 text-sm text-muted-foreground",children:"No team members found"}):c.map(S=>e.jsx(Ee,{value:S._id,children:e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsx("span",{children:S.name}),e.jsx(_e,{variant:"secondary",className:"text-xs",children:S.role||"Employee"})]})},S._id))})]})]}),e.jsxs("div",{children:[e.jsx(ae,{children:"Payment Method *"}),e.jsxs(Ot,{value:h.paymentMethod,onValueChange:S=>p(C=>({...C,paymentMethod:S})),children:[e.jsx(Pt,{children:e.jsx(Rt,{})}),e.jsxs(Mt,{children:[e.jsx(Ee,{value:"wallet",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(sd,{className:"h-4 w-4"}),"From Wallet (Instant Transfer)"]})}),e.jsx(Ee,{value:"mpesa",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Kr,{className:"h-4 w-4"}),"M-Pesa Direct (to recipient phone)"]})})]})]})]}),e.jsxs("div",{children:[e.jsxs(ae,{children:["Amount (",f?.currency||"KES",") *"]}),e.jsx(fe,{type:"number",placeholder:"0.00",value:h.amount,onChange:S=>p(C=>({...C,amount:S.target.value}))})]}),e.jsxs("div",{children:[e.jsx(ae,{children:"Payment Category *"}),e.jsxs(Ot,{value:h.category,onValueChange:S=>p(C=>({...C,category:S})),children:[e.jsx(Pt,{children:e.jsx(Rt,{})}),e.jsxs(Mt,{children:[e.jsx(Ee,{value:"salary",children:"Salary"}),e.jsx(Ee,{value:"bonus",children:"Bonus"}),e.jsx(Ee,{value:"commission",children:"Commission"}),e.jsx(Ee,{value:"reimbursement",children:"Reimbursement"}),e.jsx(Ee,{value:"allowance",children:"Allowance"}),e.jsx(Ee,{value:"contractor_fee",children:"Contractor Fee"})]})]})]}),e.jsxs("div",{children:[e.jsx(ae,{children:"Description/Notes *"}),e.jsx(Ts,{placeholder:"Payment purpose, period, etc.",value:h.description,onChange:S=>p(C=>({...C,description:S.target.value})),rows:3})]}),h.paymentMethod==="wallet"&&e.jsxs("div",{children:[e.jsx(ae,{children:"Wallet PIN *"}),e.jsx(fe,{type:"password",placeholder:"Enter your wallet PIN",value:h.pin,onChange:S=>p(C=>({...C,pin:S.target.value})),maxLength:6}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Required for security verification"})]}),h.paymentMethod==="mpesa"&&h.recipientPhone&&e.jsxs(Uu,{children:[e.jsx(Cs,{className:"h-4 w-4"}),e.jsxs(Vu,{children:["M-Pesa prompt will be sent to: ",e.jsx("strong",{children:h.recipientPhone})]})]}),h.amount&&h.recipientName&&e.jsxs("div",{className:"p-4 bg-muted rounded-lg space-y-2",children:[e.jsx("h4",{className:"font-semibold text-sm",children:"Payment Summary"}),e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Recipient:"}),e.jsx("span",{className:"font-medium",children:h.recipientName})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Amount:"}),e.jsxs("span",{className:"font-medium",children:[f?.currency||"KES"," ",Number(h.amount).toLocaleString()]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Method:"}),e.jsx("span",{className:"font-medium capitalize",children:h.paymentMethod})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Category:"}),e.jsx("span",{className:"font-medium capitalize",children:h.category.replace("_"," ")})]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(R,{variant:"outline",className:"flex-1",onClick:()=>r(!1),disabled:i,children:"Cancel"}),e.jsx(R,{className:"flex-1 gap-2",onClick:y,disabled:i,children:i?e.jsx(e.Fragment,{children:"Processing..."}):e.jsxs(e.Fragment,{children:[e.jsx(Ma,{className:"h-4 w-4"}),"Send Payment"]})})]})]})]})]})}const pz=()=>{const{user:t,isAuthenticated:s,loading:a}=Es(),{summary:r,transactions:i,loading:o,refreshFinancialData:c}=nk(),{socket:u,connected:f}=da(),x=r||{totalRevenue:"KES 0",totalExpenses:"KES 0",netProfit:"KES 0",pendingInvoices:"KES 0"},h=i||[],[p,g]=v.useState(""),[b,N]=v.useState(!1),[y,S]=v.useState(!1),[C,T]=v.useState([]),[_,G]=v.useState([]),[U,F]=v.useState([]),[k,E]=v.useState({revenueGrowth:0,expenseGrowth:0,profitGrowth:0,pendingCount:0}),[A,B]=v.useState({clientName:"",clientEmail:"",amount:"",dueDate:"",description:""}),H=W=>Array.isArray(W)?W:W?.invoices||W?.items||W?.data||[],M=W=>({id:W._id||W.id,customerName:W.customerName??W.clientName??W.customer?.name??"",totalAmount:Number(W.totalAmount??W.amount??0),paymentStatus:W.paymentStatus??W.status??"pending"});v.useEffect(()=>{const W=async()=>{if(s)try{const I={Authorization:`Bearer ${localStorage.getItem("token")}`},[Q,O,te]=await Promise.all([ye.get("/invoices",{headers:I}).catch(()=>({data:[]})),ye.get("/expenses",{headers:I}).catch(()=>({data:[]})),ye.get("/orders",{headers:I}).catch(()=>({data:[]}))]),oe=H(Q.data).map(M),je=O.data||[],Me=te.data||[];T(oe),G(je),F(Me),re(oe,je,Me),console.log("✅ Financial data loaded:",{invoices:oe.length,expenses:je.length,orders:Me.length})}catch(Z){D.error("Error fetching financial data."),console.error("Error fetching financial data:",Z)}};W();const se=setInterval(W,12e4);return()=>clearInterval(se)},[s]);const q=(W,se)=>{const Z={};for(let I=11;I>=0;I--){const Q=new Date;Q.setMonth(Q.getMonth()-I);const O=`${Q.getFullYear()}-${String(Q.getMonth()+1).padStart(2,"0")}`,te=Q.toLocaleDateString("en-US",{month:"short",year:"2-digit"});Z[O]={name:te,revenue:0,expenses:0,profit:0}}return W.forEach(I=>{const Q=new Date(I.createdAt||I.date),O=`${Q.getFullYear()}-${String(Q.getMonth()+1).padStart(2,"0")}`;Z[O]&&(Z[O].revenue+=Number(I.total)||0)}),se.forEach(I=>{const Q=new Date(I.createdAt||I.date),O=`${Q.getFullYear()}-${String(Q.getMonth()+1).padStart(2,"0")}`;Z[O]&&(Z[O].expenses+=Number(I.amount)||0)}),Object.values(Z).forEach(I=>{I.profit=I.revenue-I.expenses}),Object.values(Z)},L=(W,se)=>{const Z=[],I=new Date;for(let Q=29;Q>=0;Q--){const O=new Date(I);O.setDate(O.getDate()-Q);const te=O.toISOString().split("T")[0],oe=W.filter(ce=>new Date(ce.createdAt||ce.date).toISOString().split("T")[0]===te),je=se.filter(ce=>new Date(ce.createdAt||ce.date).toISOString().split("T")[0]===te),Me=oe.reduce((ce,Pe)=>ce+(Number(Pe.total)||0),0),ve=je.reduce((ce,Pe)=>ce+(Number(Pe.amount)||0),0);Z.push({date:te,name:O.toLocaleDateString("en-US",{month:"short",day:"numeric"}),value:Me-ve,revenue:Me,expenses:ve})}return Z},re=(W,se,Z)=>{const I=new Date,Q=new Date(I.getFullYear(),I.getMonth()-1,1),O=new Date(I.getFullYear(),I.getMonth(),1),te=Z.filter(ht=>new Date(ht.createdAt)>=Q&&new Date(ht.createdAt)<O).reduce((ht,bt)=>ht+(Number(bt.total)||0),0),oe=Z.filter(ht=>new Date(ht.createdAt)>=O).reduce((ht,bt)=>ht+(Number(bt.total)||0),0),je=te>0?((oe-te)/te*100).toFixed(1):0,Me=se.filter(ht=>new Date(ht.createdAt)>=Q&&new Date(ht.createdAt)<O).reduce((ht,bt)=>ht+(Number(bt.amount)||0),0),ve=se.filter(ht=>new Date(ht.createdAt)>=O).reduce((ht,bt)=>ht+(Number(bt.amount)||0),0),ce=Me>0?((ve-Me)/Me*100).toFixed(1):0,Pe=te-Me,Qe=oe-ve,vt=Pe>0?((Qe-Pe)/Pe*100).toFixed(1):0,xt=W.filter(ht=>ht.paymentStatus==="pending"||ht.paymentStatus==="unpaid").length;E({revenueGrowth:Number(je),expenseGrowth:Number(ce),profitGrowth:Number(vt),pendingCount:xt})},V=async()=>{try{const W=localStorage.getItem("token"),se=await ye.post("/expenses",{description:"New expense",amount:1e3,category:"office"},{headers:{Authorization:`Bearer ${W}`}});D.success("Expense added successfully!"),S(!1)}catch(W){D.error("Error adding expense."),console.error("Error adding expense:",W)}},ee=async()=>{const W=localStorage.getItem("token");if(!W)return D.error("Please log in first.");const{clientName:se,clientEmail:Z,amount:I,dueDate:Q,description:O}=A;if(!se||!Z||!I||!Q)return D.error("Please fill in all required fields.");try{const te=await ye.post("/invoices",{customerName:se,clientEmail:Z,totalAmount:Number(I),dueDate:Q,description:O},{headers:{Authorization:`Bearer ${W}`}});D.success("Invoice created successfully!"),N(!1),B({clientName:"",clientEmail:"",amount:"",dueDate:"",description:""});const oe=M(te.data);T(je=>[oe,...je])}catch(te){D.error(te.response?.data?.error||"Error creating invoice."),console.error("Error creating invoice:",te)}};if(a||o)return e.jsx("div",{children:"Loading..."});if(!s)return e.jsx("div",{children:"Please log in to manage financial data."});const me=W=>{switch(W){case"paid":case"completed":return"bg-success text-success-foreground";case"pending":return"bg-warning text-warning-foreground";case"overdue":return"bg-destructive text-destructive-foreground";default:return"bg-muted text-muted-foreground"}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Financial Management"}),e.jsx("p",{className:"text-muted-foreground",children:"Track wallet, payments, income, expenses, and manage invoices"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(Ft,{open:y,onOpenChange:S,children:[e.jsx(Na,{asChild:!0,children:e.jsxs(R,{variant:"outline",className:"gap-2",children:[e.jsx(og,{className:"h-4 w-4"}),"Add Expense"]})}),e.jsxs(It,{children:[e.jsx(Lt,{children:e.jsx(Bt,{children:"Record New Expense"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(ae,{htmlFor:"expense-description",children:"Description"}),e.jsx(fe,{id:"expense-description",placeholder:"Enter expense description"})]}),e.jsxs("div",{children:[e.jsx(ae,{htmlFor:"expense-amount",children:"Amount (KES)"}),e.jsx(fe,{id:"expense-amount",type:"number",placeholder:"0.00"})]}),e.jsxs("div",{children:[e.jsx(ae,{htmlFor:"expense-category",children:"Category"}),e.jsxs(Ot,{children:[e.jsx(Pt,{children:e.jsx(Rt,{placeholder:"Select category"})}),e.jsxs(Mt,{children:[e.jsx(Ee,{value:"office",children:"Office Supplies"}),e.jsx(Ee,{value:"marketing",children:"Marketing"}),e.jsx(Ee,{value:"transport",children:"Transport"}),e.jsx(Ee,{value:"utilities",children:"Utilities"}),e.jsx(Ee,{value:"other",children:"Other"})]})]})]}),e.jsxs("div",{children:[e.jsx(ae,{htmlFor:"expense-notes",children:"Notes"}),e.jsx(Ts,{id:"expense-notes",placeholder:"Additional notes (optional)"})]}),e.jsx(R,{className:"w-full",onClick:V,children:"Record Expense"})]})]})]}),e.jsxs(Ft,{open:b,onOpenChange:N,children:[e.jsx(Na,{asChild:!0,children:e.jsxs(R,{className:"gap-2",children:[e.jsx(Hs,{className:"h-4 w-4"}),"Create Invoice"]})}),e.jsxs(It,{children:[e.jsx(Lt,{children:e.jsx(Bt,{children:"Create New Invoice"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(ae,{htmlFor:"client-name",children:"Client Name"}),e.jsx(fe,{id:"client-name",placeholder:"Enter client name",value:A.clientName,onChange:W=>B({...A,clientName:W.target.value})})]}),e.jsxs("div",{children:[e.jsx(ae,{htmlFor:"client-email",children:"Client Email"}),e.jsx(fe,{id:"client-email",type:"email",placeholder:"client@example.com",value:A.clientEmail,onChange:W=>B({...A,clientEmail:W.target.value})})]}),e.jsxs("div",{children:[e.jsx(ae,{htmlFor:"invoice-amount",children:"Amount (KES)"}),e.jsx(fe,{id:"invoice-amount",type:"number",placeholder:"0.00",value:A.amount,onChange:W=>B({...A,amount:W.target.value})})]}),e.jsxs("div",{children:[e.jsx(ae,{htmlFor:"due-date",children:"Due Date"}),e.jsx(fe,{id:"due-date",type:"date",value:A.dueDate,onChange:W=>B({...A,dueDate:W.target.value})})]}),e.jsxs("div",{children:[e.jsx(ae,{htmlFor:"invoice-description",children:"Description"}),e.jsx(Ts,{id:"invoice-description",placeholder:"Invoice description or items",value:A.description,onChange:W=>B({...A,description:W.target.value})})]}),e.jsx(R,{className:"w-full",onClick:ee,children:"Create Invoice"})]})]})]})]})]}),e.jsx(mz,{onBalanceUpdate:c}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsxs(K,{children:[e.jsxs(pe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(ge,{className:"text-sm font-medium",children:"Total Revenue"}),e.jsx(Is,{className:"h-4 w-4 text-success"})]}),e.jsxs(X,{children:[e.jsx("div",{className:"text-2xl font-bold text-success",children:x.totalRevenue}),e.jsxs("p",{className:`text-xs ${k.revenueGrowth>=0?"text-green-600":"text-red-600"}`,children:[k.revenueGrowth>=0?"+":"",k.revenueGrowth,"% from last month"]})]})]}),e.jsxs(K,{children:[e.jsxs(pe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(ge,{className:"text-sm font-medium",children:"Total Expenses"}),e.jsx(gi,{className:"h-4 w-4 text-destructive"})]}),e.jsxs(X,{children:[e.jsx("div",{className:"text-2xl font-bold text-destructive",children:x.totalExpenses}),e.jsxs("p",{className:`text-xs ${k.expenseGrowth>=0?"text-red-600":"text-green-600"}`,children:[k.expenseGrowth>=0?"+":"",k.expenseGrowth,"% from last month"]})]})]}),e.jsxs(K,{children:[e.jsxs(pe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(ge,{className:"text-sm font-medium",children:"Net Profit"}),e.jsx(ea,{className:"h-4 w-4 text-primary"})]}),e.jsxs(X,{children:[e.jsx("div",{className:"text-2xl font-bold text-primary",children:x.netProfit}),e.jsxs("p",{className:`text-xs ${k.profitGrowth>=0?"text-green-600":"text-red-600"}`,children:[k.profitGrowth>=0?"+":"",k.profitGrowth,"% from last month"]})]})]}),e.jsxs(K,{children:[e.jsxs(pe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(ge,{className:"text-sm font-medium",children:"Pending Invoices"}),e.jsx(ha,{className:"h-4 w-4 text-warning"})]}),e.jsxs(X,{children:[e.jsx("div",{className:"text-2xl font-bold text-warning",children:x.pendingInvoices}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[k.pendingCount," invoice",k.pendingCount!==1?"s":""," pending"]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx(as,{title:"Revenue vs Expenses",description:"Last 12 months from real orders and expenses",type:"composed",data:q(U,_),height:350,autoRefresh:!0,refreshInterval:12e4}),e.jsx(as,{title:"Profit Trends",description:"Net profit calculated from revenue - expenses",type:"area",data:q(U,_).map(W=>({name:W.name,value:W.profit,profit:W.profit})),height:350,autoRefresh:!0,refreshInterval:12e4})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx(as,{title:"Expense Categories",description:"Breakdown of business expenses from real data",type:"pie",data:(()=>{const W={};return _.forEach(se=>{const Z=se.category||"Other";W[Z]=(W[Z]||0)+(Number(se.amount)||0)}),Object.entries(W).length>0?Object.entries(W).map(([se,Z])=>({name:se,value:Z})):[{name:"No expenses yet",value:1}]})(),height:300,showControls:!1}),e.jsx(as,{title:"Cash Flow",description:"Last 30 days: Revenue - Expenses",type:"line",data:L(U,_),height:300,autoRefresh:!0,refreshInterval:12e4}),e.jsx(as,{title:"Invoice Status",description:"Payment status distribution from real invoices",type:"bar",data:(()=>{const W={paid:0,pending:0,overdue:0};return C.forEach(se=>{const Z=se.paymentStatus?.toLowerCase()||"pending";Z==="paid"||Z==="completed"?W.paid++:Z==="overdue"?W.overdue++:W.pending++}),C.length>0?[{name:"Paid",value:W.paid},{name:"Pending",value:W.pending},{name:"Overdue",value:W.overdue}]:[{name:"No invoices yet",value:1}]})(),height:300,showControls:!1})]}),e.jsxs(K,{children:[e.jsxs(pe,{children:[e.jsxs(ge,{className:"flex items-center gap-2",children:[e.jsx(Xt,{className:"h-5 w-5"}),"Pay Employees & Contractors"]}),e.jsx(lt,{children:"Secure payments to team members via wallet or direct transfer"})]}),e.jsx(X,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Make secure payments to your team members. All transactions are logged and tracked for audit purposes."}),e.jsx(xz,{onSuccess:c})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(K,{children:[e.jsx(pe,{children:e.jsxs(ge,{className:"flex items-center gap-2",children:[e.jsx(ha,{className:"h-5 w-5"}),"Recent Transactions"]})}),e.jsx(X,{children:e.jsx("div",{className:"space-y-4",children:Array.isArray(h)&&h.length>0?h.map(W=>e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-foreground",children:W.description}),e.jsx("p",{className:"text-sm text-muted-foreground",children:W.date})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:`font-semibold ${W.type==="income"?"text-success":"text-destructive"}`,children:[W.type==="income"?"+":"-",W.amount]}),e.jsx(_e,{className:me(W.status),children:W.status})]})]},W.id)):e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{className:"text-muted-foreground",children:"No recent transactions found"})})})})]}),e.jsxs(K,{children:[e.jsx(pe,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(ge,{className:"flex items-center gap-2",children:[e.jsx(ya,{className:"h-5 w-5"}),"Invoice Management"]}),e.jsxs(R,{variant:"outline",size:"sm",className:"gap-2",children:[e.jsx(Pa,{className:"h-4 w-4"}),"Export"]})]})}),e.jsx(X,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(ia,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),e.jsx(fe,{placeholder:"Search invoices...",value:p,onChange:W=>g(W.target.value),className:"pl-8"})]}),e.jsxs(Zn,{children:[e.jsx(Jn,{children:e.jsxs(ma,{children:[e.jsx(wt,{children:"Invoice"}),e.jsx(wt,{children:"Client"}),e.jsx(wt,{children:"Amount"}),e.jsx(wt,{children:"Status"})]})}),e.jsx(ei,{children:C.length===0?e.jsx(ma,{children:e.jsx(Nt,{colSpan:4,className:"text-center text-muted-foreground",children:"No invoices found."})}):C.map(W=>e.jsxs(ma,{children:[e.jsx(Nt,{className:"font-medium",children:W.id}),e.jsx(Nt,{children:W.customerName}),e.jsx(Nt,{children:`KES ${Number(W.totalAmount).toLocaleString()}`}),e.jsx(Nt,{children:e.jsx(_e,{className:me(W.paymentStatus),children:W.paymentStatus})})]},W.id))})]})]})})]})]}),e.jsxs("div",{className:"mt-8 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Financial Analytics"}),e.jsx(_e,{variant:"secondary",children:"Live Data"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx(as,{title:"Revenue vs Expenses",description:"Monthly comparison from real data",defaultType:"bar",data:q(U,_),height:350,autoRefresh:!0,refreshInterval:12e4}),e.jsx(as,{title:"Profit Trends",description:"Net profit over time",defaultType:"line",data:q(U,_).map(W=>({name:W.name,value:W.profit})),height:350,autoRefresh:!0,refreshInterval:12e4})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx(as,{title:"Expense Categories",description:"Real expense breakdown",defaultType:"pie",data:(()=>{const W={};return _.forEach(se=>{const Z=se.category||"Other";W[Z]=(W[Z]||0)+(Number(se.amount)||0)}),Object.entries(W).length>0?Object.entries(W).map(([se,Z])=>({name:se,value:Z})):[{name:"No data",value:1}]})(),height:350,autoRefresh:!1,refreshInterval:12e4}),e.jsx(as,{title:"Cash Flow Analysis",description:"Daily cash flow from operations",defaultType:"area",data:L(U,_),height:350,autoRefresh:!0,refreshInterval:12e4})]}),e.jsx("div",{className:"w-full",children:e.jsx(as,{title:"Invoice Status Overview",description:"Invoice payment status distribution",defaultType:"composed",data:(()=>{const W={paid:0,pending:0,overdue:0};return C.forEach(se=>{const Z=se.paymentStatus?.toLowerCase()||"pending";Z==="paid"||Z==="completed"?W.paid++:Z==="overdue"?W.overdue++:W.pending++}),[{name:"Paid",value:W.paid},{name:"Pending",value:W.pending},{name:"Overdue",value:W.overdue}]})(),height:400,autoRefresh:!0,refreshInterval:12e4})})]})]})},Tr=v.forwardRef(({className:t,value:s,...a},r)=>e.jsx("div",{ref:r,className:Je("relative h-4 w-full overflow-hidden rounded-full bg-gray-200",t),...a,children:e.jsx("div",{className:"h-full bg-blue-600 transition-all duration-300 ease-in-out",style:{width:`${Math.min(100,Math.max(0,s||0))}%`}})}));Tr.displayName="Progress";const Zw=[{id:"starter",name:"Starter",price:0,billing:"Free Forever",description:"Perfect for getting started",features:["100 Products","5 Team Members","Basic Inventory","Email Support","Standard Features"],limits:{products:100,teamMembers:5},badge:"Free",badgeColor:"bg-green-600"},{id:"professional",name:"Professional",price:2999,billing:"KES 2,999/month",description:"For growing businesses",features:["Unlimited Products","Unlimited Team Members","Advanced Inventory","Priority Support","Advanced Analytics","API Access","Custom Reports"],limits:{products:-1,teamMembers:-1},badge:"Popular",badgeColor:"bg-blue-600",popular:!0},{id:"enterprise",name:"Enterprise",price:"custom",billing:"Custom Pricing",description:"For large organizations",features:["Everything in Professional","Dedicated Support","Custom Features","SLA Guarantee","Training & Onboarding","White Label Options","Advanced Security"],limits:{products:-1,teamMembers:-1},badge:"Enterprise",badgeColor:"bg-purple-600"}];function gz(){const{user:t}=Es(),[s,a]=v.useState(null),[r,i]=v.useState(null),[o,c]=v.useState(!0);v.useEffect(()=>{u()},[]);const u=async()=>{try{const[p,g]=await Promise.all([ye.get("/subscriptions/current"),ye.get("/subscriptions/usage")]);a(p.data.subscription),i(g.data)}catch(p){console.error("Error fetching subscription:",p),D.error("Failed to load subscription data")}finally{c(!1)}},f=async p=>{if(p==="starter"){try{await ye.post("/subscriptions/activate",{planId:"starter"}),D.success("Starter plan activated!"),u()}catch{D.error("Failed to activate plan")}return}if(p==="enterprise"){D.info("Contact sales for Enterprise plan");return}D.info("Subscription payment coming soon")},x=async()=>{if(confirm("Are you sure you want to cancel your subscription?"))try{await ye.post("/subscriptions/cancel"),D.success("Subscription cancelled. Access continues until end of billing period."),u()}catch{D.error("Failed to cancel subscription")}};if(o)return e.jsx("div",{className:"flex items-center justify-center h-screen",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})});const h=Zw.find(p=>p.id===(s?.plan||"starter"));return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Subscription Management"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage your plan and billing"})]}),e.jsxs(K,{className:"border-2 border-primary/20",children:[e.jsx(pe,{children:e.jsxs(ge,{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(ta,{className:"h-5 w-5"}),"Current Plan"]}),e.jsx(_e,{className:`${h?.badgeColor} text-white`,children:h?.badge})]})}),e.jsxs(X,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:"Plan"}),e.jsx("div",{className:"text-2xl font-bold",children:h?.name})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:"Status"}),e.jsx(_e,{variant:s?.status==="active"?"default":"destructive",children:s?.status||"Active"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:"Billing"}),e.jsx("div",{className:"text-lg font-semibold",children:h?.billing})]})]}),s?.nextBilling&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[e.jsx(ms,{className:"h-4 w-4"}),"Next billing: ",new Date(s.nextBilling).toLocaleDateString()]}),s?.cancelAtPeriodEnd&&e.jsxs(Uu,{variant:"destructive",children:[e.jsx(Cs,{className:"h-4 w-4"}),e.jsxs(Vu,{children:["Your subscription will end on ",new Date(s.nextBilling).toLocaleDateString()]})]})]})]}),r&&e.jsxs(K,{children:[e.jsxs(pe,{children:[e.jsx(ge,{children:"Usage Statistics"}),e.jsx(lt,{children:"Current usage vs. plan limits"})]}),e.jsxs(X,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(qt,{className:"h-4 w-4"}),"Products"]}),e.jsxs("span",{className:"font-medium",children:[r.usage?.products||0,r.limits?.products!==-1?` / ${r.limits?.products}`:" (Unlimited)"]})]}),r.limits?.products!==-1&&e.jsx(Tr,{value:r.usage?.products/r.limits?.products*100,className:"h-2"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(Xt,{className:"h-4 w-4"}),"Team Members"]}),e.jsxs("span",{className:"font-medium",children:[r.usage?.teamMembers||0,r.limits?.teamMembers!==-1?` / ${r.limits?.teamMembers}`:" (Unlimited)"]})]}),r.limits?.teamMembers!==-1&&e.jsx(Tr,{value:r.usage?.teamMembers/r.limits?.teamMembers*100,className:"h-2"})]})]})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Available Plans"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:Zw.map(p=>e.jsxs(K,{className:`relative ${p.popular?"border-2 border-primary shadow-lg":""} ${s?.plan===p.id?"bg-muted/50":""}`,children:[p.popular&&e.jsx("div",{className:"absolute -top-3 left-1/2 -translate-x-1/2",children:e.jsx(_e,{className:"bg-primary text-primary-foreground",children:"Most Popular"})}),e.jsxs(pe,{children:[e.jsxs(ge,{className:"flex items-center justify-between",children:[e.jsx("span",{children:p.name}),s?.plan===p.id&&e.jsx(_e,{variant:"secondary",children:"Current"})]}),e.jsx(lt,{children:p.description})]}),e.jsxs(X,{className:"space-y-4",children:[e.jsx("div",{className:"text-center py-4",children:typeof p.price=="number"?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-4xl font-bold",children:["KES ",p.price.toLocaleString()]}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"per month"})]}):e.jsx("div",{className:"text-2xl font-bold",children:p.billing})}),e.jsx("div",{className:"space-y-2",children:p.features.map((g,b)=>e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(wi,{className:"h-4 w-4 text-green-600 flex-shrink-0"}),e.jsx("span",{children:g})]},b))}),e.jsx(R,{className:"w-full",variant:s?.plan===p.id?"outline":"default",disabled:s?.plan===p.id,onClick:()=>f(p.id),children:s?.plan===p.id?"Current Plan":p.id==="enterprise"?"Contact Sales":`Upgrade to ${p.name}`})]})]},p.id))})]}),s?.plan!=="starter"&&e.jsxs(K,{children:[e.jsx(pe,{children:e.jsx(ge,{children:"Manage Subscription"})}),e.jsxs(X,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(ha,{className:"h-5 w-5 text-muted-foreground"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium",children:"Payment Method"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Manage your payment methods and billing details"})]}),e.jsx(R,{variant:"outline",size:"sm",children:"Update"})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Cs,{className:"h-5 w-5 text-destructive"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium",children:"Cancel Subscription"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"You will continue to have access until the end of your billing period"})]}),e.jsx(R,{variant:"destructive",size:"sm",onClick:x,children:"Cancel Plan"})]})]})]})]})}const vz=()=>{const[t,s]=v.useState([]),[a,r]=v.useState(!1),i=[{id:1,type:"trend",priority:"high",title:"Sales Spike Detected",description:"Your sales have increased by 23% in the last 24 hours compared to the same period last week.",icon:Is,color:"text-green-600",bgColor:"bg-green-50",recommendation:"Consider increasing inventory for top-selling items.",timestamp:new Date(Date.now()-7200*1e3)},{id:2,type:"alert",priority:"medium",title:"Low Stock Warning",description:"5 products are running low on inventory and may need restocking soon.",icon:Er,color:"text-orange-600",bgColor:"bg-orange-50",recommendation:"Review inventory levels and place orders for affected items.",timestamp:new Date(Date.now()-14400*1e3)},{id:3,type:"opportunity",priority:"medium",title:"Customer Behavior Pattern",description:"Customers who buy Product A are 67% more likely to purchase Product B within 7 days.",icon:Ou,color:"text-blue-600",bgColor:"bg-blue-50",recommendation:"Create a bundle offer or cross-selling campaign for these products.",timestamp:new Date(Date.now()-360*60*1e3)},{id:4,type:"performance",priority:"low",title:"Peak Hours Identified",description:"Your busiest hours are between 2-4 PM and 7-9 PM on weekdays.",icon:er,color:"text-purple-600",bgColor:"bg-purple-50",recommendation:"Schedule staff accordingly and consider targeted promotions during these hours.",timestamp:new Date(Date.now()-480*60*1e3)}],o=()=>{r(!0),setTimeout(()=>{s(i),r(!1)},1e3)};v.useEffect(()=>{o()},[]);const c=f=>{switch(f){case"high":return"bg-red-100 text-red-800";case"medium":return"bg-yellow-100 text-yellow-800";case"low":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}},u=f=>{const h=new Date-f,p=Math.floor(h/(1e3*60*60));return p<1?`${Math.floor(h/6e4)} minutes ago`:p<24?`${p} hours ago`:`${Math.floor(p/24)} days ago`};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"AI Insights"}),e.jsx("p",{className:"text-gray-600",children:"Real-time business intelligence and recommendations"})]}),e.jsxs(R,{onClick:o,disabled:a,variant:"outline",size:"sm",children:[e.jsx(is,{className:`h-4 w-4 mr-2 ${a?"animate-spin":""}`}),"Refresh"]})]}),e.jsx("div",{className:"grid gap-4",children:a?e.jsxs("div",{className:"flex items-center justify-center py-12",children:[e.jsx(is,{className:"h-8 w-8 animate-spin text-gray-400"}),e.jsx("span",{className:"ml-2 text-gray-600",children:"Loading insights..."})]}):t.map(f=>{const x=f.icon;return e.jsxs(K,{className:"hover:shadow-md transition-shadow",children:[e.jsx(pe,{className:"pb-3",children:e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:`p-2 rounded-lg ${f.bgColor}`,children:e.jsx(x,{className:`h-5 w-5 ${f.color}`})}),e.jsxs("div",{children:[e.jsx(ge,{className:"text-lg",children:f.title}),e.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[e.jsx(_e,{className:c(f.priority),children:f.priority.toUpperCase()}),e.jsx("span",{className:"text-sm text-gray-500",children:u(f.timestamp)})]})]})]})})}),e.jsxs(X,{children:[e.jsx(lt,{className:"text-base mb-3",children:f.description}),e.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg",children:[e.jsx("p",{className:"text-sm font-medium text-gray-700 mb-1",children:"💡 Recommendation:"}),e.jsx("p",{className:"text-sm text-gray-600",children:f.recommendation})]})]})]},f.id)})}),!a&&t.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Ou,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No insights available"}),e.jsx("p",{className:"text-gray-600",children:"Check back later for AI-powered business insights."})]})]})},jz=()=>{const{user:t,isAuthenticated:s,loading:a}=Es(),{socket:r,connected:i}=da(),[o,c]=v.useState([]),[u,f]=v.useState([]),[x,h]=v.useState({salesTrend:"neutral",customerSatisfaction:0,inventoryOptimization:0,revenueGrowth:0}),[p,g]=v.useState({orders:[],products:[],transactions:[],salesData:[],customerData:[]}),[b,N]=v.useState(!0),[y,S]=v.useState(null);v.useEffect(()=>{const k=async()=>{if(s){N(!0),S(null);try{const B={Authorization:`Bearer ${localStorage.getItem("token")}`},[H,M,q]=await Promise.all([ye.get("/orders",{headers:B}).catch(()=>({data:[]})),ye.get("/products",{headers:B}).catch(()=>({data:[]})),ye.get("/transactions",{headers:B}).catch(()=>({data:[]}))]);console.log("✅ Real data loaded:",{orders:H.data.length,products:M.data.length,transactions:q.data.length}),g({orders:H.data||[],products:M.data||[],transactions:q.data||[],salesData:C(H.data||[]),customerData:T(H.data||[])}),_(H.data,M.data,q.data)}catch(A){console.error("❌ Error fetching real data:",A),S(A.message),D.error("Failed to load AI insights data")}finally{N(!1)}}};k(),r&&i&&r.on("ai_insights_updated",A=>{console.log("✅ AI insights updated via socket:",A),A.insights&&c(B=>[...A.insights,...B].slice(0,10)),A.recommendations&&f(A.recommendations),D.success("AI insights updated!")});const E=setInterval(k,12e4);return()=>clearInterval(E)},[s]);const C=k=>{const E=[],A=new Date;for(let B=29;B>=0;B--){const H=new Date(A);H.setDate(H.getDate()-B);const M=H.toISOString().split("T")[0],q=k.filter(re=>new Date(re.date||re.createdAt).toISOString().split("T")[0]===M),L=q.reduce((re,V)=>re+(Number(V.total)||0),0);E.push({date:M,name:H.toLocaleDateString("en-US",{month:"short",day:"numeric"}),value:L,orders:q.length,customers:new Set(q.map(re=>re.customer?.email)).size})}return E},T=k=>{const E=Array(24).fill(0).map((A,B)=>({hour:B,name:`${B}:00`,value:0,orders:0}));return k.forEach(A=>{const H=new Date(A.date||A.createdAt).getHours();E[H].value+=Number(A.total)||0,E[H].orders+=1}),E},_=(k,E,A)=>{const B=new Date,H=new Date(B.getFullYear(),B.getMonth()-1,1),M=new Date(B.getFullYear(),B.getMonth(),1),q=k.filter(O=>{const te=new Date(O.date||O.createdAt);return te>=H&&te<M}),L=k.filter(O=>new Date(O.date||O.createdAt)>=M),re=q.reduce((O,te)=>O+(Number(te.total)||0),0),V=L.reduce((O,te)=>O+(Number(te.total)||0),0),ee=re>0?((V-re)/re*100).toFixed(1):0,me=E.filter(O=>(O.stockQuantity||0)<=(O.reorderLevel||5)),W={};k.forEach(O=>{const te=new Date(O.date||O.createdAt).getHours();W[te]=(W[te]||0)+1});const se=Object.entries(W).sort((O,te)=>te[1]-O[1]).slice(0,2).map(([O])=>O),Z=[{id:1,type:"sales",title:"Sales Performance Analysis",description:`Your sales have ${ee>=0?"increased":"decreased"} by ${Math.abs(ee)}% this month compared to last month (${L.length} orders vs ${q.length}).`,confidence:95,impact:Math.abs(ee)>20?"high":"medium",trend:ee>=0?"up":"down"},{id:2,type:"inventory",title:"Inventory Optimization",description:me.length>0?`${me.length} products are running low on stock and need immediate restocking.`:"All products are adequately stocked. Inventory levels are optimal.",confidence:92,impact:me.length>5?"high":me.length>0?"medium":"low",trend:me.length>0?"warning":"neutral"},{id:3,type:"customer",title:"Customer Behavior Pattern",description:se.length>0?`Peak sales hours are between ${se[0]}:00-${se[1]||se[0]+2}:00. Consider staffing optimization during these hours.`:"Analyzing customer patterns to identify peak sales periods.",confidence:88,impact:"medium",trend:"neutral"}],I=[];ee>15&&I.push({id:1,title:"Increase Marketing Budget",description:`With ${ee}% growth, increasing marketing spend by 20% could boost revenue further.`,priority:"high",category:"marketing"}),me.length>0&&I.push({id:2,title:"Restock Critical Items",description:`${me.length} products need immediate restocking: ${me.slice(0,3).map(O=>O.name).join(", ")}.`,priority:"high",category:"inventory"});const Q=E.map(O=>{const te=k.filter(oe=>oe.items?.some(je=>je.product===O._id||je.name===O.name));return{...O,orderCount:te.length}}).sort((O,te)=>O.orderCount-te.orderCount);if(Q.length>0&&Q[0].orderCount===0){const O=Q.filter(te=>te.orderCount===0).length;I.push({id:3,title:"Optimize Product Pricing",description:`${O} products have no recent sales. Consider price adjustments or promotions.`,priority:"medium",category:"pricing"})}h({salesTrend:ee>=0?"up":"down",customerSatisfaction:k.length>0?85:70,inventoryOptimization:E.length>0?((E.length-me.length)/E.length*100).toFixed(0):78,revenueGrowth:parseFloat(ee)}),c(Z),f(I.length>0?I:[{id:1,title:"Continue Current Strategy",description:"Your business is performing well. Maintain current operations.",priority:"low",category:"general"}])};if(a)return e.jsx("div",{children:"Loading..."});if(!s)return e.jsx("div",{children:"Please log in to view AI insights."});const G=k=>{switch(k){case"sales":return er;case"inventory":return Ni;case"customer":return Aa;default:return pi}},U=k=>{switch(k){case"up":return Is;case"down":return gi;case"warning":return Er;default:return os}},F=k=>{switch(k){case"high":return"bg-red-100 text-red-800 border-red-200";case"medium":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"low":return"bg-green-100 text-green-800 border-green-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"AI Insights"}),e.jsx("p",{className:"text-muted-foreground",children:"AI-powered analytics and recommendations for your business"})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs(R,{variant:"outline",onClick:()=>{window.location.href="/dashboard/analytics",D.success("Opening detailed analytics reports...")},children:[e.jsx(la,{className:"mr-2 h-4 w-4"}),"View Reports"]}),e.jsxs(R,{className:"bg-green-500 cursor-pointer hover:bg-green-400",disabled:b,onClick:async()=>{D.info("Analyzing your business data...",{duration:2e3});try{const E={Authorization:`Bearer ${localStorage.getItem("token")}`},[A,B]=await Promise.all([ye.get("/orders",{headers:E}),ye.get("/products",{headers:E})]),H=A.data||[],M=B.data||[],q=[],L={};H.forEach(ce=>{ce.items?.forEach(Pe=>{const Qe=Pe.product||Pe.name;L[Qe]=(L[Qe]||0)+(Pe.quantity||1)})});const re=Object.entries(L).sort((ce,Pe)=>Pe[1]-ce[1]).slice(0,3);if(re.length>0){const ce=re.map(([Pe,Qe])=>M.find(xt=>xt._id===Pe||xt.name===Pe)?.name||"Unknown");q.push({id:Date.now()+1,type:"sales",title:"Top Performing Products",description:`Your best sellers are: ${ce.join(", ")}. Focus marketing efforts on these products.`,confidence:96,impact:"high",trend:"up"})}const V=H.filter(ce=>{const Pe=new Date(ce.date||ce.createdAt);return(new Date-Pe)/(1e3*60*60*24)<=7}),ee=H.filter(ce=>{const Pe=new Date(ce.date||ce.createdAt),Qe=(new Date-Pe)/(1e3*60*60*24);return Qe>7&&Qe<=14}),me=V.reduce((ce,Pe)=>ce+(Number(Pe.total)||0),0),W=ee.reduce((ce,Pe)=>ce+(Number(Pe.total)||0),0),se=W>0?((me-W)/W*100).toFixed(1):0;q.push({id:Date.now()+2,type:"sales",title:"Revenue Velocity",description:`Revenue ${se>=0?"accelerated":"decelerated"} by ${Math.abs(se)}% in the last 7 days. ${se>=10?"Excellent momentum!":se<0?"Consider promotional campaigns.":"Steady performance."}`,confidence:93,impact:Math.abs(se)>15?"high":"medium",trend:se>=0?"up":"down"});const Z={};H.forEach(ce=>{const Pe=ce.customer?.email;Pe&&(Z[Pe]=(Z[Pe]||0)+1)});const I=Object.values(Z).filter(ce=>ce>1).length,Q=Object.keys(Z).length,O=Q>0?(I/Q*100).toFixed(1):0;q.push({id:Date.now()+3,type:"customer",title:"Customer Retention Analysis",description:`${O}% of customers are repeat buyers (${I} out of ${Q}). ${O>30?"Strong loyalty!":O>15?"Good retention.":"Focus on loyalty programs."}`,confidence:91,impact:"medium",trend:O>25?"up":"neutral"});const oe=M.map(ce=>{const Pe=Object.entries(L).find(([Qe])=>Qe===ce._id||Qe===ce.name);return{...ce,salesCount:Pe?Pe[1]:0,turnoverRate:ce.stockQuantity>0?(Pe?.[1]||0)/ce.stockQuantity:0}}).sort((ce,Pe)=>Pe.turnoverRate-ce.turnoverRate).filter(ce=>ce.salesCount===0&&ce.stockQuantity>0).length;oe>0&&q.push({id:Date.now()+4,type:"inventory",title:"Inventory Turnover Alert",description:`${oe} products have no sales activity. Consider discounts or bundling to improve turnover.`,confidence:89,impact:oe>5?"high":"medium",trend:"warning"});const je=H.length>0?H.reduce((ce,Pe)=>ce+(Number(Pe.total)||0),0)/H.length:0,Me=V.length>0?V.reduce((ce,Pe)=>ce+(Number(Pe.total)||0),0)/V.length:0,ve=je>0?((Me-je)/je*100).toFixed(1):0;q.push({id:Date.now()+5,type:"sales",title:"Average Order Value Trend",description:`Recent avg order value is $${Me.toFixed(2)} (${ve>=0?"+":""}${ve}% vs overall avg of $${je.toFixed(2)}). ${ve>10?"Customers are spending more!":ve<-10?"Consider upselling strategies.":"Stable spending patterns."}`,confidence:90,impact:Math.abs(ve)>15?"high":"medium",trend:ve>=0?"up":"down"}),c([...o,...q]),D.success(`Generated ${q.length} new AI insights!`,{description:"Advanced analysis complete"})}catch(k){console.error("Error generating insights:",k),D.error("Failed to generate insights. Please try again.")}},children:[e.jsx(va,{className:"mr-2 h-4 w-4"}),b?"Loading...":"Generate Insights"]})]})]}),e.jsxs("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-4",children:[e.jsxs(K,{children:[e.jsxs(pe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(ge,{className:"text-sm font-medium",children:"Sales Trend"}),e.jsx(Is,{className:"h-4 w-4 text-green-600"})]}),e.jsxs(X,{children:[e.jsxs("div",{className:"text-2xl font-bold text-green-600",children:["+",x.revenueGrowth,"%"]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Revenue growth this month"})]})]}),e.jsxs(K,{children:[e.jsxs(pe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(ge,{className:"text-sm font-medium",children:"Customer Satisfaction"}),e.jsx(Aa,{className:"h-4 w-4 text-blue-600"})]}),e.jsxs(X,{children:[e.jsxs("div",{className:"text-2xl font-bold text-blue-600",children:[x.customerSatisfaction,"%"]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Based on feedback analysis"})]})]}),e.jsxs(K,{children:[e.jsxs(pe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(ge,{className:"text-sm font-medium",children:"Inventory Optimization"}),e.jsx(Ni,{className:"h-4 w-4 text-orange-600"})]}),e.jsxs(X,{children:[e.jsxs("div",{className:"text-2xl font-bold text-orange-600",children:[x.inventoryOptimization,"%"]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Efficiency score"})]})]}),e.jsxs(K,{children:[e.jsxs(pe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(ge,{className:"text-sm font-medium",children:"AI Confidence"}),e.jsx(pi,{className:"h-4 w-4 text-purple-600"})]}),e.jsxs(X,{children:[e.jsx("div",{className:"text-2xl font-bold text-purple-600",children:"89%"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Average prediction accuracy"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx(as,{title:"Predictive Sales Trends",description:"Real-time sales data and forecasting",type:"area",data:p.salesData.length>0?p.salesData:[{name:"Loading...",value:0}],height:350,autoRefresh:!0,refreshInterval:12e4}),e.jsx(as,{title:"Customer Behavior Analysis",description:"Hourly sales patterns from actual orders",type:"line",data:p.customerData.length>0?p.customerData:[{name:"Loading...",value:0}],height:350,autoRefresh:!0,refreshInterval:12e4})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx(as,{title:"Market Opportunities",description:"Monthly revenue trends",type:"bar",data:p.salesData.length>0?p.salesData.slice(-12):[{name:"Loading...",value:0}],height:300}),e.jsx(as,{title:"Risk Assessment",description:"Business risk analysis by AI",type:"pie",data:[{name:"Low Risk",value:60},{name:"Medium Risk",value:30},{name:"High Risk",value:10}],height:300,showControls:!1}),e.jsx(as,{title:"Performance Optimization",description:"AI-suggested improvements",type:"composed",data:p.salesData.length>0?p.salesData.slice(-20):[{name:"Loading...",value:0}],height:300})]}),e.jsxs("div",{className:"grid gap-6 lg:grid-cols-2",children:[e.jsxs(K,{children:[e.jsxs(pe,{children:[e.jsxs(ge,{className:"flex items-center gap-2",children:[e.jsx(pi,{className:"h-5 w-5"}),"AI Insights"]}),e.jsx(lt,{children:"Data-driven insights about your business performance"})]}),e.jsx(X,{children:e.jsx("div",{className:"space-y-4",children:o.map(k=>{const E=G(k.type),A=U(k.trend);return e.jsxs("div",{className:"p-4 border rounded-lg hover:bg-gray-50 transition-colors",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(E,{className:"h-5 w-5 text-blue-600"}),e.jsx("h3",{className:"font-semibold",children:k.title})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(A,{className:"h-4 w-4 text-gray-500"}),e.jsxs(_e,{variant:"outline",children:[k.confidence,"% confidence"]})]})]}),e.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:k.description}),e.jsxs(_e,{className:k.impact==="high"?"bg-red-100 text-red-800":k.impact==="medium"?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800",children:[k.impact," impact"]})]},k.id)})})})]}),e.jsxs(K,{children:[e.jsxs(pe,{children:[e.jsxs(ge,{className:"flex items-center gap-2",children:[e.jsx(Ou,{className:"h-5 w-5"}),"AI Recommendations"]}),e.jsx(lt,{children:"Actionable suggestions to improve your business"})]}),e.jsx(X,{children:e.jsx("div",{className:"space-y-4",children:u.map(k=>e.jsxs("div",{className:"p-4 border rounded-lg hover:bg-gray-50 transition-colors",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsx("h3",{className:"font-semibold",children:k.title}),e.jsxs(_e,{className:F(k.priority),children:[k.priority," priority"]})]}),e.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:k.description}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(_e,{variant:"outline",children:k.category}),e.jsx(R,{size:"sm",variant:"outline",children:"Apply"})]})]},k.id))})})]})]}),e.jsx("div",{className:"mt-8",children:e.jsx(vz,{title:"Advanced AI Business Intelligence",autoStart:!0,showNotifications:!0,updateInterval:2e4})}),e.jsxs("div",{className:"mt-8 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"AI-Powered Analytics"}),e.jsx(_e,{variant:"secondary",children:"Predictive Insights"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx(as,{title:"Predictive Sales Trends",defaultType:"line",height:350,autoRefresh:!0,refreshInterval:25e3}),e.jsx(as,{title:"Customer Behavior Analysis",defaultType:"area",height:350,autoRefresh:!0,refreshInterval:3e4})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx(as,{title:"Market Opportunities",defaultType:"bar",height:350,autoRefresh:!0,refreshInterval:45e3}),e.jsx(as,{title:"Risk Assessment",defaultType:"pie",height:350,autoRefresh:!1,refreshInterval:6e4})]}),e.jsx("div",{className:"w-full",children:e.jsx(as,{title:"Performance Optimization Insights",defaultType:"composed",height:400,autoRefresh:!0,refreshInterval:15e3})})]})]})},yz=()=>{const{user:t,isAuthenticated:s,loading:a}=Es(),[r,i]=v.useState([]),[o,c]=v.useState({totalLocations:0,activeLocations:0,totalEmployees:0,totalInventory:0,totalRevenue:0,averagePerformance:0}),[u,f]=v.useState(!1),[x,h]=v.useState(!1),[p,g]=v.useState(!1),[b,N]=v.useState(null),[y,S]=v.useState(!1),[C,T]=v.useState({name:"",address:"",city:"",state:"",zipCode:"",phone:"",email:"",manager:"",operatingHours:"",description:""}),_=async()=>{if(s)try{const[V,ee]=await Promise.all([ye.get("/locations"),ye.get("/locations/stats")]),me=V.data,W=ee.data;if(me.length===0){i([]),c({totalLocations:0,activeLocations:0,totalEmployees:0,totalInventory:0,totalRevenue:0,averagePerformance:0});return}const se=me.map(Z=>({id:Z._id,name:Z.name,address:Z.address,city:Z.city,state:Z.state,zipCode:Z.zipCode,phone:Z.phone,email:Z.email,manager:Z.manager,operatingHours:Z.operatingHours,status:Z.status,employees:Z.employees,inventory:Z.inventory,description:Z.description,dailyRevenue:Z.dailyRevenue,monthlyRevenue:Z.dailyRevenue*30,performance:Z.performance,todayOrders:Z.dailyOrders,activeCustomers:Z.dailyCustomers,lastUpdated:Z.updatedAt}));i(se),c(W),console.log("✅ Loaded",se.length,"real-time locations from database")}catch(V){D.error("Error fetching locations data."),console.error("Error fetching locations:",V)}};v.useEffect(()=>{_()},[s]),v.useEffect(()=>{if(!s)return;const V=setInterval(()=>{_()},3e4);return()=>clearInterval(V)},[s]);const G=async()=>{S(!0),await _(),S(!1),D.success("Location data refreshed!")},U=V=>{window.location.href=`tel:${V}`,D.success(`Calling ${V}...`)},F=V=>{window.location.href=`sms:${V}`,D.success(`Opening SMS to ${V}...`)},k=(V,ee)=>{window.location.href=`mailto:${V}?subject=Regarding ${ee}`,D.success(`Opening email to ${V}...`)},E=(V,ee)=>{const me=V.replace(/\s+/g,"").replace("+","");window.open(`https://wa.me/${me}?text=Hello, regarding ${ee}`,"_blank"),D.success("Opening WhatsApp...")},A=(V,ee)=>{const me=encodeURIComponent(`${V}, ${ee}`);window.open(`https://www.google.com/maps/search/?api=1&query=${me}`,"_blank"),D.success("Opening Google Maps...")},B=async()=>{try{S(!0);const V=await ye.post("/locations/seed");D.success(`${V.data.count} default locations added to database!`),await _()}catch(V){V.response?.status===400?D.error(V.response.data.error):D.error("Error seeding locations. Please try again."),console.error("Error seeding locations:",V)}finally{S(!1)}},H=async()=>{const{name:V,address:ee,city:me,phone:W,manager:se}=C;if(!V||!ee||!me||!W||!se)return D.error("Please fill in all required fields.");try{const Z=await ye.post("/locations",C);await _(),D.success("Location added successfully!"),f(!1),T({name:"",address:"",city:"",state:"",zipCode:"",phone:"",email:"",manager:"",operatingHours:"",description:""})}catch(Z){D.error("Error adding location. Please try again."),console.error("Error adding location:",Z)}},M=V=>{N(V),T(V),h(!0)},q=async()=>{try{const V=r.map(ee=>ee.id===b.id?{...C}:ee);i(V),D.success("Location updated successfully!"),h(!1),N(null),T({name:"",address:"",city:"",state:"",zipCode:"",phone:"",email:"",manager:"",operatingHours:"",description:""})}catch(V){D.error("Error updating location."),console.error("Error updating location:",V)}},L=async V=>{try{const ee=r.filter(me=>me.id!==V);i(ee),D.success("Location deleted successfully!")}catch(ee){D.error("Error deleting location."),console.error("Error deleting location:",ee)}};if(a)return e.jsx("div",{children:"Loading..."});if(!s)return e.jsx("div",{children:"Please log in to manage locations."});const re=V=>{switch(V){case"active":return"bg-green-100 text-green-800";case"maintenance":return"bg-yellow-100 text-yellow-800";case"closed":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Locations Overview"}),e.jsx("p",{className:"text-muted-foreground",children:"Real-time monitoring and management of your business locations"})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs(R,{variant:"outline",onClick:G,disabled:y,children:[e.jsx(is,{className:`mr-2 h-4 w-4 ${y?"animate-spin":""}`}),y?"Refreshing...":"Refresh"]}),e.jsxs(R,{variant:"outline",onClick:()=>{window.location.href="/dashboard/analytics",D.success("Redirecting to analytics dashboard...")},children:[e.jsx(er,{className:"mr-2 h-4 w-4"}),"Analytics"]}),e.jsxs(R,{variant:"outline",onClick:()=>{window.open("https://maps.google.com","_blank"),D.success("Opening map view...")},children:[e.jsx(cg,{className:"mr-2 h-4 w-4"}),"View Map"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-6 gap-4",children:[e.jsxs(K,{children:[e.jsxs(pe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(ge,{className:"text-sm font-medium",children:"Total Locations"}),e.jsx(Kc,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(X,{children:[e.jsx("div",{className:"text-2xl font-bold",children:o.totalLocations}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[o.activeLocations," active"]})]})]}),e.jsxs(K,{children:[e.jsxs(pe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(ge,{className:"text-sm font-medium",children:"Active Locations"}),e.jsx(os,{className:"h-4 w-4 text-green-500"})]}),e.jsxs(X,{children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:o.activeLocations}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[Math.round(o.activeLocations/o.totalLocations*100),"% operational"]})]})]}),e.jsxs(K,{children:[e.jsxs(pe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(ge,{className:"text-sm font-medium",children:"Total Employees"}),e.jsx(Xt,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(X,{children:[e.jsx("div",{className:"text-2xl font-bold",children:o.totalEmployees}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Across all locations"})]})]}),e.jsxs(K,{children:[e.jsxs(pe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(ge,{className:"text-sm font-medium",children:"Total Inventory"}),e.jsx(qt,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(X,{children:[e.jsx("div",{className:"text-2xl font-bold",children:o.totalInventory.toLocaleString()}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Items in stock"})]})]}),e.jsxs(K,{children:[e.jsxs(pe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(ge,{className:"text-sm font-medium",children:"Today's Revenue"}),e.jsx(ea,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(X,{children:[e.jsxs("div",{className:"text-2xl font-bold",children:["KES ",o.totalRevenue.toLocaleString()]}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[e.jsx(Is,{className:"inline h-3 w-3 text-green-500 mr-1"}),"+12% from yesterday"]})]})]}),e.jsxs(K,{children:[e.jsxs(pe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(ge,{className:"text-sm font-medium",children:"Avg Performance"}),e.jsx(Aa,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(X,{children:[e.jsxs("div",{className:"text-2xl font-bold",children:[o.averagePerformance,"%"]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Overall efficiency"})]})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[r.length===0&&e.jsxs(R,{variant:"outline",onClick:B,disabled:y,className:"border-blue-500 text-blue-600 hover:bg-blue-50",children:[e.jsx(qt,{className:"mr-2 h-4 w-4"}),y?"Seeding...":"Seed Demo Locations"]}),e.jsxs(Ft,{open:u,onOpenChange:f,children:[e.jsx(Na,{asChild:!0,children:e.jsxs(R,{className:"bg-green-500 cursor-pointer hover:bg-green-400",children:[e.jsx(Hs,{className:"mr-2 h-4 w-4"}),"Add Location"]})}),e.jsxs(It,{className:"max-w-2xl",children:[e.jsxs(Lt,{children:[e.jsx(Bt,{children:"Add New Location"}),e.jsx(es,{children:"Add a new business location or branch"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(ae,{htmlFor:"location-name",children:"Location Name *"}),e.jsx(fe,{id:"location-name",placeholder:"Enter location name",value:C.name,onChange:V=>T({...C,name:V.target.value})})]}),e.jsxs("div",{children:[e.jsx(ae,{htmlFor:"manager",children:"Manager *"}),e.jsx(fe,{id:"manager",placeholder:"Manager name",value:C.manager,onChange:V=>T({...C,manager:V.target.value})})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx(ae,{htmlFor:"address",children:"Address *"}),e.jsx(fe,{id:"address",placeholder:"Street address",value:C.address,onChange:V=>T({...C,address:V.target.value})})]}),e.jsxs("div",{children:[e.jsx(ae,{htmlFor:"city",children:"City *"}),e.jsx(fe,{id:"city",placeholder:"City",value:C.city,onChange:V=>T({...C,city:V.target.value})})]}),e.jsxs("div",{children:[e.jsx(ae,{htmlFor:"state",children:"State/County"}),e.jsx(fe,{id:"state",placeholder:"State or County",value:C.state,onChange:V=>T({...C,state:V.target.value})})]}),e.jsxs("div",{children:[e.jsx(ae,{htmlFor:"zipCode",children:"Zip/Postal Code"}),e.jsx(fe,{id:"zipCode",placeholder:"Postal code",value:C.zipCode,onChange:V=>T({...C,zipCode:V.target.value})})]}),e.jsxs("div",{children:[e.jsx(ae,{htmlFor:"phone",children:"Phone *"}),e.jsx(fe,{id:"phone",placeholder:"+254 700 000 000",value:C.phone,onChange:V=>T({...C,phone:V.target.value})})]}),e.jsxs("div",{children:[e.jsx(ae,{htmlFor:"email",children:"Email"}),e.jsx(fe,{id:"email",type:"email",placeholder:"location@ominbiz.com",value:C.email,onChange:V=>T({...C,email:V.target.value})})]}),e.jsxs("div",{children:[e.jsx(ae,{htmlFor:"operatingHours",children:"Operating Hours"}),e.jsx(fe,{id:"operatingHours",placeholder:"8:00 AM - 6:00 PM",value:C.operatingHours,onChange:V=>T({...C,operatingHours:V.target.value})})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx(ae,{htmlFor:"description",children:"Description"}),e.jsx(Ts,{id:"description",placeholder:"Location description",value:C.description,onChange:V=>T({...C,description:V.target.value})})]})]}),e.jsxs(Rs,{children:[e.jsx(R,{variant:"outline",onClick:()=>f(!1),children:"Cancel"}),e.jsx(R,{onClick:H,children:"Add Location"})]})]})]})]}),r.length===0&&e.jsx(K,{className:"p-12",children:e.jsxs(X,{className:"flex flex-col items-center justify-center text-center space-y-4",children:[e.jsx(Xr,{className:"h-16 w-16 text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No Locations Found"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"Get started by adding your first location or seed demo data"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs(R,{onClick:B,disabled:y,children:[e.jsx(qt,{className:"mr-2 h-4 w-4"}),"Seed Demo Locations"]}),e.jsxs(R,{variant:"outline",onClick:()=>f(!0),children:[e.jsx(Hs,{className:"mr-2 h-4 w-4"}),"Add Your First Location"]})]})]})}),r.length>0&&e.jsxs(K,{children:[e.jsxs(pe,{children:[e.jsxs(ge,{className:"flex items-center justify-between",children:[e.jsx("span",{children:"All Locations"}),e.jsxs(_e,{variant:"outline",className:"text-xs",children:["Last updated: ",new Date().toLocaleTimeString()]})]}),e.jsx(lt,{children:"Real-time monitoring and management of your business locations"})]}),e.jsx(X,{children:e.jsxs(Zn,{children:[e.jsx(Jn,{children:e.jsxs(ma,{children:[e.jsx(wt,{children:"Location"}),e.jsx(wt,{children:"Performance"}),e.jsx(wt,{children:"Today's Metrics"}),e.jsx(wt,{children:"Manager"}),e.jsx(wt,{children:"Contact"}),e.jsx(wt,{children:"Status"}),e.jsx(wt,{children:"Actions"})]})}),e.jsx(ei,{children:r.map(V=>e.jsxs(ma,{children:[e.jsx(Nt,{children:e.jsxs("div",{children:[e.jsxs("div",{className:"font-medium flex items-center gap-2",children:[V.name,V.status==="active"&&e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"})]}),e.jsx("div",{className:"text-sm text-muted-foreground",children:V.description}),e.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:[V.city,", ",V.state]})]})}),e.jsx(Nt,{children:e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"text-sm font-medium",children:[V.performance,"%"]}),V.performance>=90?e.jsx(Is,{className:"h-3 w-3 text-green-500"}):V.performance>=70?e.jsx(Aa,{className:"h-3 w-3 text-yellow-500"}):e.jsx(gi,{className:"h-3 w-3 text-red-500"})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-1.5",children:e.jsx("div",{className:`h-1.5 rounded-full ${V.performance>=90?"bg-green-500":V.performance>=70?"bg-yellow-500":"bg-red-500"}`,style:{width:`${V.performance}%`}})})]})}),e.jsx(Nt,{children:e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(ea,{className:"h-3 w-3 text-green-600"}),e.jsxs("span",{className:"font-medium",children:["KES ",V.dailyRevenue.toLocaleString()]})]}),e.jsxs("div",{className:"flex items-center gap-1 text-muted-foreground",children:[e.jsx(qt,{className:"h-3 w-3"}),e.jsxs("span",{children:[V.todayOrders," orders"]})]}),e.jsxs("div",{className:"flex items-center gap-1 text-muted-foreground",children:[e.jsx(Xt,{className:"h-3 w-3"}),e.jsxs("span",{children:[V.activeCustomers," customers"]})]})]})}),e.jsx(Nt,{children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:V.manager}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:[V.employees," staff members"]})]})}),e.jsx(Nt,{children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"text-sm space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx($s,{className:"h-3 w-3"}),V.phone]}),V.email&&e.jsxs("div",{className:"flex items-center gap-1 text-muted-foreground",children:[e.jsx(Gs,{className:"h-3 w-3"}),V.email]}),e.jsxs("div",{className:"flex items-center gap-1 text-muted-foreground",children:[e.jsx(Qt,{className:"h-3 w-3"}),V.operatingHours]})]}),e.jsxs("div",{className:"flex gap-1 flex-wrap",children:[e.jsxs(R,{size:"sm",variant:"outline",className:"h-7 px-2 text-xs",onClick:()=>U(V.phone),children:[e.jsx($s,{className:"h-3 w-3 mr-1"}),"Call"]}),e.jsxs(R,{size:"sm",variant:"outline",className:"h-7 px-2 text-xs",onClick:()=>F(V.phone),children:[e.jsx(vi,{className:"h-3 w-3 mr-1"}),"SMS"]}),e.jsxs(R,{size:"sm",variant:"outline",className:"h-7 px-2 text-xs",onClick:()=>k(V.email,V.name),children:[e.jsx(Gs,{className:"h-3 w-3 mr-1"}),"Email"]}),e.jsxs(R,{size:"sm",variant:"outline",className:"h-7 px-2 text-xs bg-green-50 hover:bg-green-100",onClick:()=>E(V.phone,V.name),children:[e.jsx(Zs,{className:"h-3 w-3 mr-1 text-green-600"}),"WhatsApp"]}),e.jsxs(R,{size:"sm",variant:"outline",className:"h-7 px-2 text-xs",onClick:()=>A(V.address,V.city),children:[e.jsx(cg,{className:"h-3 w-3 mr-1"}),"Map"]})]})]})}),e.jsx(Nt,{children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs(_e,{className:re(V.status),children:[V.status==="active"&&e.jsx(os,{className:"h-3 w-3 mr-1"}),V.status==="maintenance"&&e.jsx(Er,{className:"h-3 w-3 mr-1"}),V.status==="closed"&&e.jsx(Cr,{className:"h-3 w-3 mr-1"}),V.status]}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:[V.inventory," items"]})]})}),e.jsx(Nt,{children:e.jsxs("div",{className:"flex space-x-1",children:[e.jsx(R,{variant:"outline",size:"sm",onClick:()=>{N(V),g(!0)},children:e.jsx(la,{className:"h-4 w-4"})}),e.jsx(R,{variant:"outline",size:"sm",onClick:()=>M(V),children:e.jsx(Qi,{className:"h-4 w-4"})}),e.jsx(R,{variant:"outline",size:"sm",onClick:()=>L(V.id),children:e.jsx(fa,{className:"h-4 w-4"})})]})})]},V.id))})]})})]}),e.jsx(Ft,{open:p,onOpenChange:g,children:e.jsxs(It,{className:"max-w-4xl",children:[e.jsxs(Lt,{children:[e.jsxs(Bt,{className:"flex items-center gap-2",children:[e.jsx(Kc,{className:"h-5 w-5"}),b?.name," - Detailed View"]}),e.jsx(es,{children:"Real-time location performance and operational details"})]}),b&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs(K,{children:[e.jsx(pe,{className:"pb-2",children:e.jsx(ge,{className:"text-sm",children:"Performance Score"})}),e.jsxs(X,{children:[e.jsxs("div",{className:"text-2xl font-bold",children:[b.performance,"%"]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 mt-2",children:e.jsx("div",{className:`h-2 rounded-full ${b.performance>=90?"bg-green-500":b.performance>=70?"bg-yellow-500":"bg-red-500"}`,style:{width:`${b.performance}%`}})})]})]}),e.jsxs(K,{children:[e.jsx(pe,{className:"pb-2",children:e.jsx(ge,{className:"text-sm",children:"Today's Revenue"})}),e.jsxs(X,{children:[e.jsxs("div",{className:"text-2xl font-bold",children:["KES ",b.dailyRevenue.toLocaleString()]}),e.jsxs("p",{className:"text-xs text-green-600 flex items-center",children:[e.jsx(Is,{className:"h-3 w-3 mr-1"}),"+15% vs yesterday"]})]})]}),e.jsxs(K,{children:[e.jsx(pe,{className:"pb-2",children:e.jsx(ge,{className:"text-sm",children:"Orders Today"})}),e.jsxs(X,{children:[e.jsx("div",{className:"text-2xl font-bold",children:b.todayOrders}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[b.activeCustomers," active customers"]})]})]}),e.jsxs(K,{children:[e.jsx(pe,{className:"pb-2",children:e.jsx(ge,{className:"text-sm",children:"Inventory Status"})}),e.jsxs(X,{children:[e.jsx("div",{className:"text-2xl font-bold",children:b.inventory}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Items in stock"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(K,{children:[e.jsx(pe,{children:e.jsx(ge,{className:"text-lg",children:"Location Information"})}),e.jsxs(X,{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(Xr,{className:"h-4 w-4 mt-1 text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:b.address}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:[b.city,", ",b.state," ",b.zipCode]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx($s,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{children:b.phone})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Gs,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{children:b.email})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Qt,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{children:b.operatingHours})]})]})]}),e.jsxs(K,{children:[e.jsx(pe,{children:e.jsx(ge,{className:"text-lg",children:"Staff & Operations"})}),e.jsxs(X,{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Xt,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("span",{children:["Manager: ",b.manager]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Xt,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("span",{children:[b.employees," Staff Members"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Aa,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{children:"Status: "}),e.jsx(_e,{className:re(b.status),children:b.status})]}),e.jsx("div",{className:"pt-2",children:e.jsx("p",{className:"text-sm text-muted-foreground",children:b.description})})]})]})]})]}),e.jsxs(Rs,{children:[e.jsx(R,{variant:"outline",onClick:()=>g(!1),children:"Close"}),e.jsx(R,{onClick:()=>{g(!1),M(b)},children:"Edit Location"})]})]})}),e.jsx(Ft,{open:x,onOpenChange:h,children:e.jsxs(It,{className:"max-w-2xl",children:[e.jsxs(Lt,{children:[e.jsx(Bt,{children:"Edit Location"}),e.jsx(es,{children:"Update location information"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(ae,{htmlFor:"edit-location-name",children:"Location Name *"}),e.jsx(fe,{id:"edit-location-name",placeholder:"Enter location name",value:C.name,onChange:V=>T({...C,name:V.target.value})})]}),e.jsxs("div",{children:[e.jsx(ae,{htmlFor:"edit-manager",children:"Manager *"}),e.jsx(fe,{id:"edit-manager",placeholder:"Manager name",value:C.manager,onChange:V=>T({...C,manager:V.target.value})})]})]}),e.jsxs(Rs,{children:[e.jsx(R,{variant:"outline",onClick:()=>h(!1),children:"Cancel"}),e.jsx(R,{onClick:q,children:"Update Location"})]})]})})]})};var mk=["PageUp","PageDown"],hk=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],fk={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},hd="Slider",[Pg,Nz,bz]=FS(hd),[xk]=Df(hd,[bz]),[wz,tx]=xk(hd),pk=v.forwardRef((t,s)=>{const{name:a,min:r=0,max:i=100,step:o=1,orientation:c="horizontal",disabled:u=!1,minStepsBetweenThumbs:f=0,defaultValue:x=[r],value:h,onValueChange:p=()=>{},onValueCommit:g=()=>{},inverted:b=!1,form:N,...y}=t,S=v.useRef(new Set),C=v.useRef(0),_=c==="horizontal"?Sz:Cz,[G=[],U]=Du({prop:h,defaultProp:x,onChange:H=>{[...S.current][C.current]?.focus(),p(H)}}),F=v.useRef(G);function k(H){const M=_z(G,H);B(H,M)}function E(H){B(H,C.current)}function A(){const H=F.current[C.current];G[C.current]!==H&&g(G)}function B(H,M,{commit:q}={commit:!1}){const L=Pz(o),re=Mz(Math.round((H-r)/o)*o+r,L),V=sf(re,[r,i]);U((ee=[])=>{const me=Ez(ee,V,M);if(Rz(me,f*o)){C.current=me.indexOf(V);const W=String(me)!==String(ee);return W&&q&&g(me),W?me:ee}else return ee})}return e.jsx(wz,{scope:t.__scopeSlider,name:a,disabled:u,min:r,max:i,valueIndexToChangeRef:C,thumbs:S.current,values:G,orientation:c,form:N,children:e.jsx(Pg.Provider,{scope:t.__scopeSlider,children:e.jsx(Pg.Slot,{scope:t.__scopeSlider,children:e.jsx(_,{"aria-disabled":u,"data-disabled":u?"":void 0,...y,ref:s,onPointerDown:Vs(y.onPointerDown,()=>{u||(F.current=G)}),min:r,max:i,inverted:b,onSlideStart:u?void 0:k,onSlideMove:u?void 0:E,onSlideEnd:u?void 0:A,onHomeKeyDown:()=>!u&&B(r,0,{commit:!0}),onEndKeyDown:()=>!u&&B(i,G.length-1,{commit:!0}),onStepKeyDown:({event:H,direction:M})=>{if(!u){const re=mk.includes(H.key)||H.shiftKey&&hk.includes(H.key)?10:1,V=C.current,ee=G[V],me=o*re*M;B(ee+me,V,{commit:!0})}}})})})})});pk.displayName=hd;var[gk,vk]=xk(hd,{startEdge:"left",endEdge:"right",size:"width",direction:1}),Sz=v.forwardRef((t,s)=>{const{min:a,max:r,dir:i,inverted:o,onSlideStart:c,onSlideMove:u,onSlideEnd:f,onStepKeyDown:x,...h}=t,[p,g]=v.useState(null),b=qa(s,_=>g(_)),N=v.useRef(void 0),y=MS(i),S=y==="ltr",C=S&&!o||!S&&o;function T(_){const G=N.current||p.getBoundingClientRect(),U=[0,G.width],k=tj(U,C?[a,r]:[r,a]);return N.current=G,k(_-G.left)}return e.jsx(gk,{scope:t.__scopeSlider,startEdge:C?"left":"right",endEdge:C?"right":"left",direction:C?1:-1,size:"width",children:e.jsx(jk,{dir:y,"data-orientation":"horizontal",...h,ref:b,style:{...h.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:_=>{const G=T(_.clientX);c?.(G)},onSlideMove:_=>{const G=T(_.clientX);u?.(G)},onSlideEnd:()=>{N.current=void 0,f?.()},onStepKeyDown:_=>{const U=fk[C?"from-left":"from-right"].includes(_.key);x?.({event:_,direction:U?-1:1})}})})}),Cz=v.forwardRef((t,s)=>{const{min:a,max:r,inverted:i,onSlideStart:o,onSlideMove:c,onSlideEnd:u,onStepKeyDown:f,...x}=t,h=v.useRef(null),p=qa(s,h),g=v.useRef(void 0),b=!i;function N(y){const S=g.current||h.current.getBoundingClientRect(),C=[0,S.height],_=tj(C,b?[r,a]:[a,r]);return g.current=S,_(y-S.top)}return e.jsx(gk,{scope:t.__scopeSlider,startEdge:b?"bottom":"top",endEdge:b?"top":"bottom",size:"height",direction:b?1:-1,children:e.jsx(jk,{"data-orientation":"vertical",...x,ref:p,style:{...x.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:y=>{const S=N(y.clientY);o?.(S)},onSlideMove:y=>{const S=N(y.clientY);c?.(S)},onSlideEnd:()=>{g.current=void 0,u?.()},onStepKeyDown:y=>{const C=fk[b?"from-bottom":"from-top"].includes(y.key);f?.({event:y,direction:C?-1:1})}})})}),jk=v.forwardRef((t,s)=>{const{__scopeSlider:a,onSlideStart:r,onSlideMove:i,onSlideEnd:o,onHomeKeyDown:c,onEndKeyDown:u,onStepKeyDown:f,...x}=t,h=tx(hd,a);return e.jsx(ca.span,{...x,ref:s,onKeyDown:Vs(t.onKeyDown,p=>{p.key==="Home"?(c(p),p.preventDefault()):p.key==="End"?(u(p),p.preventDefault()):mk.concat(hk).includes(p.key)&&(f(p),p.preventDefault())}),onPointerDown:Vs(t.onPointerDown,p=>{const g=p.target;g.setPointerCapture(p.pointerId),p.preventDefault(),h.thumbs.has(g)?g.focus():r(p)}),onPointerMove:Vs(t.onPointerMove,p=>{p.target.hasPointerCapture(p.pointerId)&&i(p)}),onPointerUp:Vs(t.onPointerUp,p=>{const g=p.target;g.hasPointerCapture(p.pointerId)&&(g.releasePointerCapture(p.pointerId),o(p))})})}),yk="SliderTrack",Nk=v.forwardRef((t,s)=>{const{__scopeSlider:a,...r}=t,i=tx(yk,a);return e.jsx(ca.span,{"data-disabled":i.disabled?"":void 0,"data-orientation":i.orientation,...r,ref:s})});Nk.displayName=yk;var Mg="SliderRange",bk=v.forwardRef((t,s)=>{const{__scopeSlider:a,...r}=t,i=tx(Mg,a),o=vk(Mg,a),c=v.useRef(null),u=qa(s,c),f=i.values.length,x=i.values.map(g=>Ck(g,i.min,i.max)),h=f>1?Math.min(...x):0,p=100-Math.max(...x);return e.jsx(ca.span,{"data-orientation":i.orientation,"data-disabled":i.disabled?"":void 0,...r,ref:u,style:{...t.style,[o.startEdge]:h+"%",[o.endEdge]:p+"%"}})});bk.displayName=Mg;var Fg="SliderThumb",wk=v.forwardRef((t,s)=>{const a=Nz(t.__scopeSlider),[r,i]=v.useState(null),o=qa(s,u=>i(u)),c=v.useMemo(()=>r?a().findIndex(u=>u.ref.current===r):-1,[a,r]);return e.jsx(Tz,{...t,ref:o,index:c})}),Tz=v.forwardRef((t,s)=>{const{__scopeSlider:a,index:r,name:i,...o}=t,c=tx(Fg,a),u=vk(Fg,a),[f,x]=v.useState(null),h=qa(s,T=>x(T)),p=f?c.form||!!f.closest("form"):!0,g=IS(f),b=c.values[r],N=b===void 0?0:Ck(b,c.min,c.max),y=Az(r,c.values.length),S=g?.[u.size],C=S?Dz(S,N,u.direction):0;return v.useEffect(()=>{if(f)return c.thumbs.add(f),()=>{c.thumbs.delete(f)}},[f,c.thumbs]),e.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[u.startEdge]:`calc(${N}% + ${C}px)`},children:[e.jsx(Pg.ItemSlot,{scope:t.__scopeSlider,children:e.jsx(ca.span,{role:"slider","aria-label":t["aria-label"]||y,"aria-valuemin":c.min,"aria-valuenow":b,"aria-valuemax":c.max,"aria-orientation":c.orientation,"data-orientation":c.orientation,"data-disabled":c.disabled?"":void 0,tabIndex:c.disabled?void 0:0,...o,ref:h,style:b===void 0?{display:"none"}:t.style,onFocus:Vs(t.onFocus,()=>{c.valueIndexToChangeRef.current=r})})}),p&&e.jsx(Sk,{name:i??(c.name?c.name+(c.values.length>1?"[]":""):void 0),form:c.form,value:b},r)]})});wk.displayName=Fg;var kz="RadioBubbleInput",Sk=v.forwardRef(({__scopeSlider:t,value:s,...a},r)=>{const i=v.useRef(null),o=qa(i,r),c=Ov(s);return v.useEffect(()=>{const u=i.current;if(!u)return;const f=window.HTMLInputElement.prototype,h=Object.getOwnPropertyDescriptor(f,"value").set;if(c!==s&&h){const p=new Event("input",{bubbles:!0});h.call(u,s),u.dispatchEvent(p)}},[c,s]),e.jsx(ca.input,{style:{display:"none"},...a,ref:o,defaultValue:s})});Sk.displayName=kz;function Ez(t=[],s,a){const r=[...t];return r[a]=s,r.sort((i,o)=>i-o)}function Ck(t,s,a){const o=100/(a-s)*(t-s);return sf(o,[0,100])}function Az(t,s){return s>2?`Value ${t+1} of ${s}`:s===2?["Minimum","Maximum"][t]:void 0}function _z(t,s){if(t.length===1)return 0;const a=t.map(i=>Math.abs(i-s)),r=Math.min(...a);return a.indexOf(r)}function Dz(t,s,a){const r=t/2,o=tj([0,50],[0,r]);return(r-o(s)*a)*a}function Oz(t){return t.slice(0,-1).map((s,a)=>t[a+1]-s)}function Rz(t,s){if(s>0){const a=Oz(t);return Math.min(...a)>=s}return!0}function tj(t,s){return a=>{if(t[0]===t[1]||s[0]===s[1])return s[0];const r=(s[1]-s[0])/(t[1]-t[0]);return s[0]+r*(a-t[0])}}function Pz(t){return(String(t).split(".")[1]||"").length}function Mz(t,s){const a=Math.pow(10,s);return Math.round(t*a)/a}var Tk=pk,Fz=Nk,Iz=bk,Lz=wk;const fi=v.forwardRef(({className:t,...s},a)=>e.jsxs(Tk,{ref:a,className:Je("relative flex w-full touch-none select-none items-center",t),...s,children:[e.jsx(Fz,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary",children:e.jsx(Iz,{className:"absolute h-full bg-primary"})}),e.jsx(Lz,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]}));fi.displayName=Tk.displayName;var Bz=(t,s,a,r,i,o,c,u)=>{let f=document.documentElement,x=["light","dark"];function h(b){(Array.isArray(t)?t:[t]).forEach(N=>{let y=N==="class",S=y&&o?i.map(C=>o[C]||C):i;y?(f.classList.remove(...S),f.classList.add(o&&o[b]?o[b]:b)):f.setAttribute(N,b)}),p(b)}function p(b){u&&x.includes(b)&&(f.style.colorScheme=b)}function g(){return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}if(r)h(r);else try{let b=localStorage.getItem(s)||a,N=c&&b==="system"?g():b;h(N)}catch{}},zz=v.createContext(void 0),Uz={setTheme:t=>{},themes:[]},sj=()=>{var t;return(t=v.useContext(zz))!=null?t:Uz};v.memo(({forcedTheme:t,storageKey:s,attribute:a,enableSystem:r,enableColorScheme:i,defaultTheme:o,value:c,themes:u,nonce:f,scriptProps:x})=>{let h=JSON.stringify([a,s,o,t,u,c,r,i]).slice(1,-1);return v.createElement("script",{...x,suppressHydrationWarning:!0,nonce:typeof window>"u"?f:"",dangerouslySetInnerHTML:{__html:`(${Bz.toString()})(${h})`}})});const Vz=()=>{const{theme:t,setTheme:s,sidebarCollapsed:a,setSidebarCollapsed:r,animations:i,setAnimations:o,reducedMotion:c,setReducedMotion:u,fontSize:f,setFontSize:x,borderRadius:h,setBorderRadius:p,compactMode:g,setCompactMode:b,highContrast:N,setHighContrast:y,customAccentColor:S,setCustomAccentColor:C,soundEnabled:T,setSoundEnabled:_,autoSave:G,setAutoSave:U}=ld(),[F,k]=v.useState(S),E=[{value:"small",label:"Small (14px)",size:14},{value:"medium",label:"Medium (16px)",size:16},{value:"large",label:"Large (18px)",size:18},{value:"extra-large",label:"Extra Large (20px)",size:20}],A=[{value:"none",label:"None",radius:"0px"},{value:"small",label:"Small",radius:"0.25rem"},{value:"medium",label:"Medium",radius:"0.5rem"},{value:"large",label:"Large",radius:"0.75rem"},{value:"extra-large",label:"Extra Large",radius:"1rem"}],B=q=>{k(q),C(q),D.success("Accent color updated")},H=()=>{s("light"),o(!0),u(!1),x("medium"),p("medium"),b(!1),y(!1),C("#3b82f6"),_(!0),U(!0),k("#3b82f6"),D.success("Settings reset to defaults")},M=()=>{const q={theme:t,animations:i,reducedMotion:c,fontSize:f,borderRadius:h,compactMode:g,highContrast:N,customAccentColor:S,soundEnabled:T,autoSave:G,exportedAt:new Date().toISOString()},L=new Blob([JSON.stringify(q,null,2)],{type:"application/json"}),re=URL.createObjectURL(L),V=document.createElement("a");V.href=re,V.download="ominbiz-theme-settings.json",V.click(),URL.revokeObjectURL(re),D.success("Settings exported successfully")};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs(K,{children:[e.jsxs(pe,{children:[e.jsxs(ge,{className:"flex items-center gap-2",children:[e.jsx(Lc,{className:"h-5 w-5"}),"Appearance"]}),e.jsx(lt,{children:"Customize the visual appearance of your dashboard"})]}),e.jsxs(X,{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(ae,{children:"Custom Accent Color"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(fe,{type:"color",value:F,onChange:q=>B(q.target.value),className:"w-16 h-10 p-1 border rounded"}),e.jsx(fe,{type:"text",value:F,onChange:q=>B(q.target.value),className:"flex-1",placeholder:"#3b82f6"})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(ae,{children:"Font Size"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:E.map(q=>e.jsxs(R,{variant:f===q.value?"default":"outline",size:"sm",onClick:()=>x(q.value),className:"justify-start",children:[e.jsx(b_,{className:"h-4 w-4 mr-2"}),q.label]},q.value))})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(ae,{children:"Border Radius"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:A.map(q=>e.jsx(R,{variant:h===q.value?"default":"outline",size:"sm",onClick:()=>p(q.value),className:"justify-start",style:{borderRadius:q.radius},children:q.label},q.value))})]})]})]}),e.jsxs(K,{children:[e.jsxs(pe,{children:[e.jsxs(ge,{className:"flex items-center gap-2",children:[e.jsx(la,{className:"h-5 w-5"}),"Accessibility"]}),e.jsx(lt,{children:"Settings to improve accessibility and usability"})]}),e.jsxs(X,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(ae,{children:"High Contrast Mode"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Increase contrast for better visibility"})]}),e.jsx(ns,{checked:N,onCheckedChange:y})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(ae,{children:"Reduced Motion"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Minimize animations and transitions"})]}),e.jsx(ns,{checked:c,onCheckedChange:u})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(ae,{children:"Compact Mode"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Reduce spacing for more content"})]}),e.jsx(ns,{checked:g,onCheckedChange:b})]})]})]}),e.jsxs(K,{children:[e.jsxs(pe,{children:[e.jsxs(ge,{className:"flex items-center gap-2",children:[e.jsx(va,{className:"h-5 w-5"}),"Performance"]}),e.jsx(lt,{children:"Settings that affect performance and user experience"})]}),e.jsxs(X,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(ae,{children:"Enable Animations"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Show smooth transitions and animations"})]}),e.jsx(ns,{checked:i,onCheckedChange:o})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(ae,{children:"Sound Effects"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Play sounds for interactions"})]}),e.jsx(ns,{checked:T,onCheckedChange:_})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(ae,{children:"Auto-save Settings"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Automatically save theme changes"})]}),e.jsx(ns,{checked:G,onCheckedChange:U})]})]})]}),e.jsxs(K,{children:[e.jsxs(pe,{children:[e.jsx(ge,{children:"Theme Management"}),e.jsx(lt,{children:"Export, import, or reset your theme settings"})]}),e.jsx(X,{children:e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsxs(R,{variant:"outline",onClick:M,children:[e.jsx(Pa,{className:"h-4 w-4 mr-2"}),"Export Settings"]}),e.jsxs(R,{variant:"outline",onClick:H,children:[e.jsx(dg,{className:"h-4 w-4 mr-2"}),"Reset to Defaults"]})]})})]})]})},$z=()=>{const{isAuthenticated:t,loading:s,user:a}=Es(),{theme:r,setTheme:i,systemTheme:o}=sj(),{sidebarCollapsed:c,setSidebarCollapsed:u,animations:f,setAnimations:x,fontSize:h,setFontSize:p,fontSizes:g,borderRadius:b,setBorderRadius:N,borderRadiusOptions:y,compactMode:S,setCompactMode:C,highContrast:T,setHighContrast:_,reducedMotion:G,setReducedMotion:U,customAccentColor:F,setCustomAccentColor:k,soundEnabled:E,setSoundEnabled:A,autoSave:B,setAutoSave:H}=ld(),[M,q]=v.useState(!1),[L,re]=v.useState(!1),[V,ee]=v.useState(!1),[me,W]=v.useState("general"),[se,Z]=v.useState({businessName:"ominbiz",businessEmail:"admin@ominbiz.com",businessPhone:"+254 700 123 456",businessAddress:"123 Business Street, Nairobi",timezone:"Africa/Nairobi",currency:"KES",language:"en",emailNotifications:!0,smsNotifications:!1,pushNotifications:!0,marketingEmails:!1,soundNotifications:E,desktopNotifications:!0,twoFactorAuth:!1,sessionTimeout:"30",passwordExpiry:"90",loginAlerts:!0,deviceTracking:!0,theme:r||"light",sidebarCollapsed:c,compactMode:S,highContrast:T,reducedMotion:G,customAccentColor:F,animations:f,fontSize:h,borderRadius:b,dataSharing:!1,analytics:!0,crashReporting:!0,usageStatistics:!1,autoSave:B,cacheSize:100,backgroundSync:!0,currentPassword:"",newPassword:"",confirmPassword:""});v.useEffect(()=>{Z(oe=>({...oe,theme:r,sidebarCollapsed:c,compactMode:S,highContrast:T,reducedMotion:G,customAccentColor:F,animations:f,fontSize:h,borderRadius:b,soundNotifications:E,autoSave:B}))},[r,c,S,T,G,F,f,h,b,E,B]),v.useEffect(()=>{(async()=>{if(t)try{re(!0);const je=localStorage.getItem("token"),ve=(await ye.get("/user/profile",{headers:{Authorization:`Bearer ${je}`}})).data;console.log("✅ Settings loaded from server:",{user:ve.name,email:ve.email}),Z(ce=>({...ce,businessName:ve.businessName||ve.name||ce.businessName,businessEmail:ve.businessEmail||ve.email||ce.businessEmail,businessPhone:ve.businessPhone||ve.phone||ce.businessPhone,businessAddress:ve.businessAddress||ve.address||ce.businessAddress,timezone:ve.timezone||ce.timezone,currency:ve.currency||ce.currency,language:ve.language||ce.language,emailNotifications:ve.emailNotifications??ce.emailNotifications,smsNotifications:ve.smsNotifications??ce.smsNotifications,pushNotifications:ve.pushNotifications??ce.pushNotifications,marketingEmails:ve.marketingEmails??ce.marketingEmails,twoFactorAuth:ve.twoFactorAuth??ce.twoFactorAuth,sessionTimeout:ve.sessionTimeout?.toString()||ce.sessionTimeout,passwordExpiry:ve.passwordExpiry?.toString()||ce.passwordExpiry,dataSharing:ve.dataSharing??ce.dataSharing,analytics:ve.analytics??ce.analytics}))}catch(je){console.error("Error fetching settings:",je),D.error(je.response?.data?.message||"Error fetching settings. Using default settings.")}finally{re(!1)}})()},[t]);const I=async oe=>{try{re(!0);const je=localStorage.getItem("token");let Me={},ve="/user/settings",ce="put";switch(oe){case"general":Me={businessName:se.businessName,businessEmail:se.businessEmail,businessPhone:se.businessPhone,businessAddress:se.businessAddress,timezone:se.timezone,currency:se.currency,language:se.language};break;case"notifications":Me={emailNotifications:se.emailNotifications,smsNotifications:se.smsNotifications,pushNotifications:se.pushNotifications,marketingEmails:se.marketingEmails,soundNotifications:se.soundNotifications},A(se.soundNotifications);break;case"security":Me={twoFactorAuth:se.twoFactorAuth,sessionTimeout:parseInt(se.sessionTimeout),passwordExpiry:parseInt(se.passwordExpiry),loginAlerts:se.loginAlerts,deviceTracking:se.deviceTracking};break;case"appearance":Me={theme:se.theme,sidebarCollapsed:se.sidebarCollapsed,compactMode:se.compactMode,highContrast:se.highContrast,reducedMotion:se.reducedMotion,customAccentColor:se.customAccentColor,animations:se.animations,fontSize:se.fontSize,borderRadius:se.borderRadius},i(se.theme),u(se.sidebarCollapsed),C(se.compactMode),_(se.highContrast),U(se.reducedMotion),k(se.customAccentColor),x(se.animations),p(se.fontSize),N(se.borderRadius);break;case"privacy":Me={dataSharing:se.dataSharing,analytics:se.analytics,crashReporting:se.crashReporting,usageStatistics:se.usageStatistics};break;case"performance":Me={autoSave:se.autoSave,cacheSize:se.cacheSize,backgroundSync:se.backgroundSync},H(se.autoSave);break}await ye[ce](ve,{section:oe,settings:Me},{headers:{Authorization:`Bearer ${je}`}}),ee(!1),console.log(`✅ ${oe.charAt(0).toUpperCase()+oe.slice(1)} settings saved:`,Me),D.success(`${oe.charAt(0).toUpperCase()+oe.slice(1)} settings saved successfully!`),oe==="general"&&(document.title=`${se.businessName} - Dashboard`),oe==="notifications"&&se.soundNotifications&&console.log("🔊 Sound notifications enabled")}catch(je){console.error(`Error saving ${oe} settings:`,je),D.error(je.response?.data?.message||`Error saving ${oe} settings.`)}finally{re(!1)}},Q=async()=>{if(!se.currentPassword||!se.newPassword||!se.confirmPassword)return D.error("Please fill in all password fields.");if(se.newPassword!==se.confirmPassword)return D.error("New passwords do not match.");if(se.newPassword.length<8)return D.error("Password must be at least 8 characters long.");if(!/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]/.test(se.newPassword))return D.error("Password must include uppercase, lowercase, number, and special character.");try{re(!0);const je=localStorage.getItem("token");await ye.put("/user/change-password",{currentPassword:se.currentPassword,newPassword:se.newPassword},{headers:{Authorization:`Bearer ${je}`}}),D.success("Password changed successfully!"),Z({...se,currentPassword:"",newPassword:"",confirmPassword:""}),ee(!1)}catch(je){console.error("Error changing password:",je),D.error(je.response?.data?.message||"Error changing password. Please check your current password.")}finally{re(!1)}},O=(oe,je)=>{Z(Me=>({...Me,[oe]:je})),ee(!0)},te=oe=>{const je={general:{businessName:"ominbiz",businessEmail:"admin@ominbiz.com",businessPhone:"+254 700 123 456",businessAddress:"123 Business Street, Nairobi",timezone:"Africa/Nairobi",currency:"KES",language:"en"},notifications:{emailNotifications:!0,smsNotifications:!1,pushNotifications:!0,marketingEmails:!1,soundNotifications:!0}};je[oe]&&(Z(Me=>({...Me,...je[oe]})),D.info(`${oe} settings reset to defaults`))};return s||L?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"text-center",children:[e.jsx(is,{className:"h-8 w-8 animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"Loading settings..."})]})}):t?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold text-foreground flex items-center gap-2",children:[e.jsx(Ea,{className:"h-8 w-8"}),"Settings"]}),e.jsx("p",{className:"text-muted-foreground",children:"Manage your account and application preferences"})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[V&&e.jsxs(_e,{variant:"outline",className:"text-amber-600 border-amber-200",children:[e.jsx(Er,{className:"h-3 w-3 mr-1"}),"Unsaved Changes"]}),e.jsxs(_e,{variant:"secondary",children:[e.jsx(na,{className:"h-3 w-3 mr-1"}),a?.role||"User"]})]})]}),e.jsxs(pa,{defaultValue:"general",value:me,onValueChange:W,className:"space-y-6",children:[e.jsxs(ba,{className:"grid w-full grid-cols-6",children:[e.jsxs(ut,{value:"general",className:"flex items-center gap-2",children:[e.jsx(Ea,{className:"h-4 w-4"}),"General"]}),e.jsxs(ut,{value:"notifications",className:"flex items-center gap-2",children:[e.jsx(Fr,{className:"h-4 w-4"}),"Notifications"]}),e.jsxs(ut,{value:"security",className:"flex items-center gap-2",children:[e.jsx(ta,{className:"h-4 w-4"}),"Security"]}),e.jsxs(ut,{value:"appearance",className:"flex items-center gap-2",children:[e.jsx(Lc,{className:"h-4 w-4"}),"Appearance"]}),e.jsxs(ut,{value:"privacy",className:"flex items-center gap-2",children:[e.jsx(vr,{className:"h-4 w-4"}),"Privacy"]}),e.jsxs(ut,{value:"performance",className:"flex items-center gap-2",children:[e.jsx(va,{className:"h-4 w-4"}),"Performance"]})]}),e.jsx(mt,{value:"general",children:e.jsxs(K,{children:[e.jsxs(pe,{children:[e.jsxs(ge,{className:"flex items-center gap-2",children:[e.jsx(Kc,{className:"h-5 w-5"}),"Business Information"]}),e.jsx(lt,{children:"Configure your business details and regional preferences"})]}),e.jsxs(X,{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs(ae,{htmlFor:"businessName",className:"flex items-center gap-2",children:[e.jsx(Kc,{className:"h-4 w-4"}),"Business Name"]}),e.jsx(fe,{id:"businessName",value:se.businessName,onChange:oe=>O("businessName",oe.target.value),placeholder:"Enter your business name"})]}),e.jsxs("div",{children:[e.jsxs(ae,{htmlFor:"businessEmail",className:"flex items-center gap-2",children:[e.jsx(Gs,{className:"h-4 w-4"}),"Business Email"]}),e.jsx(fe,{id:"businessEmail",type:"email",value:se.businessEmail,onChange:oe=>O("businessEmail",oe.target.value),placeholder:"business@example.com"})]}),e.jsxs("div",{children:[e.jsxs(ae,{htmlFor:"businessPhone",className:"flex items-center gap-2",children:[e.jsx($s,{className:"h-4 w-4"}),"Business Phone"]}),e.jsx(fe,{id:"businessPhone",value:se.businessPhone,onChange:oe=>O("businessPhone",oe.target.value),placeholder:"+254 700 000 000"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs(ae,{htmlFor:"timezone",className:"flex items-center gap-2",children:[e.jsx(Qt,{className:"h-4 w-4"}),"Timezone"]}),e.jsxs(Ot,{value:se.timezone,onValueChange:oe=>O("timezone",oe),children:[e.jsx(Pt,{children:e.jsx(Rt,{})}),e.jsxs(Mt,{children:[e.jsx(Ee,{value:"Africa/Nairobi",children:"East Africa Time (Nairobi)"}),e.jsx(Ee,{value:"Africa/Cairo",children:"Eastern European Time (Cairo)"}),e.jsx(Ee,{value:"UTC",children:"Coordinated Universal Time (UTC)"}),e.jsx(Ee,{value:"America/New_York",children:"Eastern Time (New York)"}),e.jsx(Ee,{value:"Europe/London",children:"Greenwich Mean Time (London)"})]})]})]}),e.jsxs("div",{children:[e.jsxs(ae,{htmlFor:"currency",className:"flex items-center gap-2",children:[e.jsx(ha,{className:"h-4 w-4"}),"Currency"]}),e.jsxs(Ot,{value:se.currency,onValueChange:oe=>O("currency",oe),children:[e.jsx(Pt,{children:e.jsx(Rt,{})}),e.jsxs(Mt,{children:[e.jsx(Ee,{value:"KES",children:"KES - Kenyan Shilling"}),e.jsx(Ee,{value:"USD",children:"USD - US Dollar"}),e.jsx(Ee,{value:"EUR",children:"EUR - Euro"}),e.jsx(Ee,{value:"GBP",children:"GBP - British Pound"}),e.jsx(Ee,{value:"UGX",children:"UGX - Ugandan Shilling"}),e.jsx(Ee,{value:"TZS",children:"TZS - Tanzanian Shilling"})]})]})]}),e.jsxs("div",{children:[e.jsxs(ae,{htmlFor:"language",className:"flex items-center gap-2",children:[e.jsx(w_,{className:"h-4 w-4"}),"Language"]}),e.jsxs(Ot,{value:se.language,onValueChange:oe=>O("language",oe),children:[e.jsx(Pt,{children:e.jsx(Rt,{})}),e.jsxs(Mt,{children:[e.jsx(Ee,{value:"en",children:"English"}),e.jsx(Ee,{value:"sw",children:"Swahili"}),e.jsx(Ee,{value:"fr",children:"French"}),e.jsx(Ee,{value:"ar",children:"Arabic"})]})]})]})]})]}),e.jsxs("div",{children:[e.jsxs(ae,{htmlFor:"businessAddress",className:"flex items-center gap-2",children:[e.jsx(Xr,{className:"h-4 w-4"}),"Business Address"]}),e.jsx(Ts,{id:"businessAddress",value:se.businessAddress,onChange:oe=>O("businessAddress",oe.target.value),placeholder:"Enter your business address",rows:3})]}),e.jsxs("div",{className:"flex gap-3 pt-4 border-t",children:[e.jsxs(R,{onClick:()=>I("general"),disabled:L,className:"flex items-center gap-2",children:[L?e.jsx(is,{className:"h-4 w-4 animate-spin"}):e.jsx($i,{className:"h-4 w-4"}),"Save General Settings"]}),e.jsxs(R,{variant:"outline",onClick:()=>te("general"),disabled:L,children:[e.jsx(is,{className:"h-4 w-4 mr-2"}),"Reset to Defaults"]})]})]})]})}),e.jsx(mt,{value:"notifications",children:e.jsxs(K,{children:[e.jsxs(pe,{children:[e.jsxs(ge,{className:"flex items-center gap-2",children:[e.jsx(Fr,{className:"h-5 w-5"}),"Notification Preferences"]}),e.jsx(lt,{children:"Control how and when you receive notifications"})]}),e.jsxs(X,{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg border",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsxs(ae,{className:"flex items-center gap-2",children:[e.jsx(Gs,{className:"h-4 w-4"}),"Email Notifications"]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Receive important updates via email"})]}),e.jsx(ns,{checked:se.emailNotifications,onCheckedChange:oe=>O("emailNotifications",oe)})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg border",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsxs(ae,{className:"flex items-center gap-2",children:[e.jsx(Kr,{className:"h-4 w-4"}),"SMS Notifications"]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Get urgent alerts via SMS"})]}),e.jsx(ns,{checked:se.smsNotifications,onCheckedChange:oe=>O("smsNotifications",oe)})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg border",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsxs(ae,{className:"flex items-center gap-2",children:[e.jsx(va,{className:"h-4 w-4"}),"Push Notifications"]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Real-time notifications in your browser"})]}),e.jsx(ns,{checked:se.pushNotifications,onCheckedChange:oe=>O("pushNotifications",oe)})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg border",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsxs(ae,{className:"flex items-center gap-2",children:[se.soundNotifications?e.jsx(mu,{className:"h-4 w-4"}):e.jsx(Wh,{className:"h-4 w-4"}),"Sound Notifications"]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Play sounds for new notifications"})]}),e.jsx(ns,{checked:se.soundNotifications,onCheckedChange:oe=>O("soundNotifications",oe)})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg border",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsxs(ae,{className:"flex items-center gap-2",children:[e.jsx(Sb,{className:"h-4 w-4"}),"Marketing Emails"]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Receive promotions and updates"})]}),e.jsx(ns,{checked:se.marketingEmails,onCheckedChange:oe=>O("marketingEmails",oe)})]})]}),e.jsxs("div",{className:"flex gap-3 pt-4 border-t",children:[e.jsxs(R,{onClick:()=>I("notifications"),disabled:L,className:"flex items-center gap-2",children:[L?e.jsx(is,{className:"h-4 w-4 animate-spin"}):e.jsx($i,{className:"h-4 w-4"}),"Save Notification Settings"]}),e.jsxs(R,{variant:"outline",onClick:()=>te("notifications"),disabled:L,children:[e.jsx(is,{className:"h-4 w-4 mr-2"}),"Reset to Defaults"]})]})]})]})}),e.jsx(mt,{value:"security",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs(K,{children:[e.jsxs(pe,{children:[e.jsxs(ge,{className:"flex items-center gap-2",children:[e.jsx(af,{className:"h-5 w-5"}),"Security Preferences"]}),e.jsx(lt,{children:"Enhance your account security with these settings"})]}),e.jsxs(X,{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg border",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsxs(ae,{className:"flex items-center gap-2",children:[e.jsx(vr,{className:"h-4 w-4"}),"Two-Factor Authentication"]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Extra security layer for your account"})]}),e.jsx(ns,{checked:se.twoFactorAuth,onCheckedChange:oe=>O("twoFactorAuth",oe)})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs(ae,{htmlFor:"sessionTimeout",className:"flex items-center gap-2",children:[e.jsx(Qt,{className:"h-4 w-4"}),"Session Timeout (minutes)"]}),e.jsx(fe,{id:"sessionTimeout",type:"number",min:"5",max:"1440",value:se.sessionTimeout,onChange:oe=>O("sessionTimeout",oe.target.value)}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Automatic logout after inactivity"})]}),e.jsxs("div",{children:[e.jsxs(ae,{htmlFor:"passwordExpiry",className:"flex items-center gap-2",children:[e.jsx(is,{className:"h-4 w-4"}),"Password Expiry (days)"]}),e.jsx(fe,{id:"passwordExpiry",type:"number",min:"1",max:"365",value:se.passwordExpiry,onChange:oe=>O("passwordExpiry",oe.target.value)}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Require password change periodically"})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg border",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsxs(ae,{className:"flex items-center gap-2",children:[e.jsx(Fr,{className:"h-4 w-4"}),"Login Alerts"]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Get notified of new sign-ins"})]}),e.jsx(ns,{checked:se.loginAlerts,onCheckedChange:oe=>O("loginAlerts",oe)})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg border",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsxs(ae,{className:"flex items-center gap-2",children:[e.jsx(Kr,{className:"h-4 w-4"}),"Device Tracking"]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Monitor active devices and sessions"})]}),e.jsx(ns,{checked:se.deviceTracking,onCheckedChange:oe=>O("deviceTracking",oe)})]})]}),e.jsx("div",{className:"flex gap-3 pt-4 border-t",children:e.jsxs(R,{onClick:()=>I("security"),disabled:L,className:"flex items-center gap-2",children:[L?e.jsx(is,{className:"h-4 w-4 animate-spin"}):e.jsx($i,{className:"h-4 w-4"}),"Save Security Settings"]})})]})]}),e.jsxs(K,{children:[e.jsxs(pe,{children:[e.jsxs(ge,{className:"flex items-center gap-2",children:[e.jsx(vr,{className:"h-5 w-5"}),"Change Password"]}),e.jsx(lt,{children:"Update your account password for enhanced security"})]}),e.jsxs(X,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(ae,{htmlFor:"currentPassword",children:"Current Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(fe,{id:"currentPassword",type:M?"text":"password",value:se.currentPassword,onChange:oe=>O("currentPassword",oe.target.value),placeholder:"Enter current password"}),e.jsx(R,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>q(!M),children:M?e.jsx(Eo,{className:"h-4 w-4"}):e.jsx(la,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{children:[e.jsx(ae,{htmlFor:"newPassword",children:"New Password"}),e.jsx(fe,{id:"newPassword",type:"password",value:se.newPassword,onChange:oe=>O("newPassword",oe.target.value),placeholder:"Enter new password"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Must be at least 8 characters with uppercase, lowercase, number, and special character"})]}),e.jsxs("div",{children:[e.jsx(ae,{htmlFor:"confirmPassword",children:"Confirm New Password"}),e.jsx(fe,{id:"confirmPassword",type:"password",value:se.confirmPassword,onChange:oe=>O("confirmPassword",oe.target.value),placeholder:"Confirm new password"})]}),e.jsxs(R,{onClick:Q,disabled:L||!se.currentPassword||!se.newPassword||!se.confirmPassword,className:"flex items-center gap-2",children:[L?e.jsx(is,{className:"h-4 w-4 animate-spin"}):e.jsx(vr,{className:"h-4 w-4"}),"Change Password"]})]})]})]})}),e.jsx(mt,{value:"appearance",children:e.jsx(Vz,{})}),e.jsx(mt,{value:"performance",children:e.jsxs(K,{children:[e.jsxs(pe,{children:[e.jsxs(ge,{className:"flex items-center gap-2",children:[e.jsx(va,{className:"h-5 w-5"}),"Performance & Data Settings"]}),e.jsx(lt,{children:"Optimize application performance and data usage"})]}),e.jsxs(X,{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg border",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsxs(ae,{className:"flex items-center gap-2",children:[e.jsx($i,{className:"h-4 w-4"}),"Auto-Save"]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Automatically save changes as you work"})]}),e.jsx(ns,{checked:se.autoSave,onCheckedChange:oe=>{O("autoSave",oe),H(oe),console.log(`🔄 Auto-save ${oe?"enabled":"disabled"}`),D.success(`Auto-save ${oe?"enabled":"disabled"}`)}})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg border",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsxs(ae,{className:"flex items-center gap-2",children:[e.jsx(is,{className:"h-4 w-4"}),"Background Sync"]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Keep data synchronized in the background"})]}),e.jsx(ns,{checked:se.backgroundSync,onCheckedChange:oe=>{O("backgroundSync",oe),console.log(`🔄 Background sync ${oe?"enabled":"disabled"}`)}})]}),e.jsxs("div",{children:[e.jsxs(ae,{htmlFor:"cacheSize",className:"flex items-center gap-2",children:[e.jsx(vu,{className:"h-4 w-4"}),"Cache Size: ",se.cacheSize," MB"]}),e.jsx(fi,{id:"cacheSize",min:50,max:500,step:50,value:[se.cacheSize],onValueChange:([oe])=>O("cacheSize",oe),className:"mt-2"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Adjust how much data is cached locally (50-500 MB)"})]}),e.jsx("div",{className:"p-4 rounded-lg bg-muted/50",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(x0,{className:"h-5 w-5 text-muted-foreground mt-0.5"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-medium",children:"Performance Tips"}),e.jsxs("ul",{className:"text-sm text-muted-foreground space-y-1",children:[e.jsx("li",{children:"• Enable auto-save to prevent data loss"}),e.jsx("li",{children:"• Background sync keeps your data up-to-date"}),e.jsx("li",{children:"• Increase cache for faster load times"}),e.jsx("li",{children:"• Reduce animations if experiencing lag"})]})]})]})})]}),e.jsxs("div",{className:"flex gap-3 pt-4 border-t",children:[e.jsxs(R,{onClick:()=>I("performance"),disabled:L,className:"flex items-center gap-2",children:[L?e.jsx(is,{className:"h-4 w-4 animate-spin"}):e.jsx($i,{className:"h-4 w-4"}),"Save Performance Settings"]}),e.jsxs(R,{variant:"outline",onClick:()=>{localStorage.clear(),D.success("Cache cleared! Refresh to see changes."),console.log("🗑️ Cache cleared")},children:[e.jsx(fa,{className:"h-4 w-4 mr-2"}),"Clear Cache"]})]})]})]})}),e.jsx(mt,{value:"privacy",children:e.jsxs(K,{children:[e.jsxs(pe,{children:[e.jsxs(ge,{className:"flex items-center gap-2",children:[e.jsx(vu,{className:"h-5 w-5"}),"Privacy & Data Settings"]}),e.jsx(lt,{children:"Control how your data is collected and used"})]}),e.jsxs(X,{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg border",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsxs(ae,{className:"flex items-center gap-2",children:[e.jsx(Hi,{className:"h-4 w-4"}),"Data Sharing"]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Share anonymized data to help improve our services"})]}),e.jsx(ns,{checked:se.dataSharing,onCheckedChange:oe=>O("dataSharing",oe)})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg border",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsxs(ae,{className:"flex items-center gap-2",children:[e.jsx(Sb,{className:"h-4 w-4"}),"Usage Analytics"]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Help us understand how you use the application"})]}),e.jsx(ns,{checked:se.analytics,onCheckedChange:oe=>O("analytics",oe)})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg border",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsxs(ae,{className:"flex items-center gap-2",children:[e.jsx(Er,{className:"h-4 w-4"}),"Crash Reporting"]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Automatically report errors and crashes"})]}),e.jsx(ns,{checked:se.crashReporting,onCheckedChange:oe=>O("crashReporting",oe)})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg border",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsxs(ae,{className:"flex items-center gap-2",children:[e.jsx(x0,{className:"h-4 w-4"}),"Usage Statistics"]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Collect data about feature usage and performance"})]}),e.jsx(ns,{checked:se.usageStatistics,onCheckedChange:oe=>O("usageStatistics",oe)})]})]}),e.jsx("div",{className:"p-4 rounded-lg bg-muted/50",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(x0,{className:"h-5 w-5 text-muted-foreground mt-0.5"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-medium",children:"Data Privacy Information"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"We respect your privacy. All data collection is anonymized and used solely to improve your experience. You can review our privacy policy for more details."}),e.jsxs(R,{variant:"outline",size:"sm",className:"flex items-center gap-2",children:[e.jsx(Ol,{className:"h-3 w-3"}),"View Privacy Policy"]})]})]})}),e.jsxs("div",{className:"flex gap-3 pt-4 border-t",children:[e.jsxs(R,{onClick:()=>I("privacy"),disabled:L,className:"flex items-center gap-2",children:[L?e.jsx(is,{className:"h-4 w-4 animate-spin"}):e.jsx($i,{className:"h-4 w-4"}),"Save Privacy Settings"]}),e.jsxs(R,{variant:"outline",className:"flex items-center gap-2",children:[e.jsx(Pa,{className:"h-4 w-4"}),"Export Data"]}),e.jsxs(R,{variant:"outline",className:"flex items-center gap-2 text-red-600 hover:text-red-700",children:[e.jsx(fa,{className:"h-4 w-4"}),"Delete Account"]})]})]})]})})]})]}):e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs(K,{className:"p-6 text-center",children:[e.jsx(Er,{className:"h-12 w-12 text-yellow-500 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Authentication Required"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"Please log in to access settings"}),e.jsx(R,{onClick:()=>window.location.href="/login",children:"Go to Login"})]})})};var Hz="Separator",Jw="horizontal",Wz=["horizontal","vertical"],kk=v.forwardRef((t,s)=>{const{decorative:a,orientation:r=Jw,...i}=t,o=Gz(r)?r:Jw,u=a?{role:"none"}:{"aria-orientation":o==="vertical"?o:void 0,role:"separator"};return e.jsx(ca.div,{"data-orientation":o,...u,...i,ref:s})});kk.displayName=Hz;function Gz(t){return Wz.includes(t)}var Ek=kk;const Fn=v.forwardRef(({className:t,orientation:s="horizontal",decorative:a=!0,...r},i)=>e.jsx(Ek,{ref:i,decorative:a,orientation:s,className:Je("shrink-0 bg-border",s==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",t),...r}));Fn.displayName=Ek.displayName;const Ak=()=>{const[t,s]=v.useState(navigator.onLine),[a,r]=v.useState(!1);return v.useEffect(()=>{const i=()=>{s(!0),r(!0),setTimeout(()=>r(!1),5e3)},o=()=>{s(!1)};return window.addEventListener("online",i),window.addEventListener("offline",o),()=>{window.removeEventListener("online",i),window.removeEventListener("offline",o)}},[]),{isOnline:t,wasOffline:a}},qz=({showBadge:t=!0,className:s=""})=>{const{isOnline:a,wasOffline:r}=Ak();return v.useEffect(()=>{r&&D.success("Back online!",{description:"Your internet connection has been restored.",icon:e.jsx(os,{className:"h-4 w-4"})})},[r]),v.useEffect(()=>{a||D.error("No internet connection",{description:"You are currently offline. Some features may not work.",icon:e.jsx(Bc,{className:"h-4 w-4"}),duration:1/0})},[a]),t?e.jsx("div",{className:`flex items-center gap-2 ${s}`,children:a?e.jsxs(_e,{variant:"outline",className:"bg-green-50 text-green-700 border-green-200",children:[e.jsx(of,{className:"h-3 w-3 mr-1"}),"Online"]}):e.jsxs(_e,{variant:"outline",className:"bg-red-50 text-red-700 border-red-200 animate-pulse",children:[e.jsx(Bc,{className:"h-3 w-3 mr-1"}),"Offline"]})}):null},Kz=()=>{const{user:t,isAuthenticated:s,loading:a}=Es(),{theme:r,customAccentColor:i}=ld();Ak();const[o,c]=v.useState(!1),[u,f]=v.useState("overview"),[x,h]=v.useState(!1),[p,g]=v.useState("public"),[b,N]=v.useState(!1),[y,S]=v.useState(""),[C,T]=v.useState(1),[_,G]=v.useState(0),[U,F]=v.useState(!1);v.useRef(null);const k=v.useRef(null),E=v.useRef(null),[A,B]=v.useState({firstName:"",lastName:"",email:"",phone:"",address:"",city:"",country:"",dateOfBirth:"",gender:"",jobTitle:"",department:"",bio:"",avatar:"",coverImage:"",website:"",linkedin:"",twitter:"",github:"",instagram:"",skills:[],languages:[],interests:[],timezone:"UTC",emergencyContact:"",emergencyPhone:"",pronouns:"",location:"",workingHours:"9:00 AM - 5:00 PM",availability:"available",customFields:{}}),[H,M]=v.useState({completionRate:0,profileViews:0,connections:0,totalOrders:0,totalRevenue:0,activeProjects:0,teamMembers:0,rating:0,reviewsCount:0,engagements:0,totalSales:0,achievements:[]}),[q,L]=v.useState({emailNotifications:!0,pushNotifications:!0,marketingEmails:!1,weeklyDigest:!0,profileVisibility:"public",showActivity:!0,showStats:!0,allowMessages:!0,showOnlineStatus:!0}),[re,V]=v.useState({twoFactorEnabled:!1,loginAlerts:!0,sessionTimeout:30,deviceTracking:!0,passwordLastChanged:"2024-01-15"}),[ee,me]=v.useState([]),[W,se]=v.useState([{name:"JavaScript",level:90,category:"Programming"},{name:"React",level:85,category:"Frontend"},{name:"Node.js",level:80,category:"Backend"},{name:"Python",level:75,category:"Programming"},{name:"UI/UX Design",level:70,category:"Design"},{name:"Project Management",level:85,category:"Management"}]),[Z,I]=v.useState([]),[Q,O]=v.useState(!1),[te,oe]=v.useState(!1),[je,Me]=v.useState({email:"",message:""}),[ve,ce]=v.useState(!1),[Pe,Qe]=v.useState(""),[vt,xt]=v.useState(!1),ht=async()=>{O(!0);try{const J=await ye.get("/connections");I(J.data.connections||[])}catch(J){console.error("Error fetching connections:",J),I([{id:1,name:"Sarah Johnson",role:"Product Manager",email:"sarah@example.com",avatar:"",mutual:12,connected:!0},{id:2,name:"Mike Chen",role:"Developer",email:"mike@example.com",avatar:"",mutual:8,connected:!0},{id:3,name:"Emily Davis",role:"Designer",email:"emily@example.com",avatar:"",mutual:15,connected:!1},{id:4,name:"Alex Rodriguez",role:"Marketing Lead",email:"alex@example.com",avatar:"",mutual:6,connected:!0}])}finally{O(!1)}},bt=async J=>{try{await ye.post(`/connections/${J}/connect`),I(De=>De.map(Ge=>Ge.id===J?{...Ge,connected:!0}:Ge)),D.success("Connection request sent!")}catch(De){console.error("Error connecting:",De),D.error("Failed to send connection request")}},ot=async J=>{try{await ye.delete(`/connections/${J}`),I(De=>De.map(Ge=>Ge.id===J?{...Ge,connected:!1}:Ge)),D.success("Connection removed")}catch(De){console.error("Error disconnecting:",De),D.error("Failed to remove connection")}},hs=async()=>{if(!je.email){D.error("Please enter an email address");return}try{await ye.post("/connections/invite",je),D.success("Connection invitation sent!"),oe(!1),Me({email:"",message:""}),ht()}catch(J){console.error("Error adding connection:",J),D.error(J.response?.data?.message||"Failed to send invitation")}},fs=async()=>{if(Pe!=="DELETE"){D.error("Please type DELETE to confirm");return}xt(!0);try{const J=localStorage.getItem("token");await ye.delete("/user/account",{headers:{Authorization:`Bearer ${J}`}}),localStorage.clear(),sessionStorage.clear(),D.success("Account deleted successfully. Redirecting..."),setTimeout(()=>{window.location.href="/"},1500)}catch(J){console.error("Error deleting account:",J),D.error(J.response?.data?.message||"Failed to delete account"),xt(!1)}},[Ps,ps]=v.useState([]),[As,cs]=v.useState(null),[_t,sa]=v.useState({brightness:100,contrast:100,saturation:100}),Te=[{id:1,name:"Gold Crown",icon:VS,color:"border-yellow-400"},{id:2,name:"Silver Diamond",icon:E_,color:"border-gray-300"},{id:3,name:"Blue Tech",icon:$S,color:"border-blue-500"},{id:4,name:"Green Nature",icon:Mn,color:"border-green-500"},{id:5,name:"Red Flame",icon:A_,color:"border-red-500"}];v.useEffect(()=>{(async()=>{if(s)try{const De=localStorage.getItem("token"),gt=(await ye.get("/user/profile",{headers:{Authorization:`Bearer ${De}`}})).data,jt={firstName:gt.firstName||gt.name?.split(" ")[0]||"",lastName:gt.lastName||gt.name?.split(" ")[1]||"",email:gt.email||"",phone:gt.phone||"",address:gt.address||"",city:gt.city||"",country:gt.country||"",dateOfBirth:gt.dateOfBirth?gt.dateOfBirth.split("T")[0]:"",gender:gt.gender||"",jobTitle:gt.jobTitle||gt.role||"",department:gt.department||"",bio:gt.bio||"",avatar:gt.avatar||"",location:gt.city||gt.country||""};B(jt),gt.avatar&&ps([gt.avatar]),console.log("✅ Profile data loaded:",jt)}catch(De){console.error("❌ Error fetching profile data:",De),D.error("Error fetching profile data.")}})(),s&&ht()},[s,t]),v.useEffect(()=>{if(u==="connections"&&s){ht();const J=setInterval(ht,3e4);return()=>clearInterval(J)}},[u,s]),v.useEffect(()=>{(async()=>{if(s)try{const Ge={Authorization:`Bearer ${localStorage.getItem("token")}`},[gt,jt,ss,ks]=await Promise.allSettled([ye.get("/orders",{headers:Ge}),ye.get("/invoices",{headers:Ge}),ye.get("/team",{headers:Ge}),ye.get("/products",{headers:Ge})]),Ns=gt.status==="fulfilled"?Array.isArray(gt.value?.data)?gt.value.data:[]:[],Y=jt.status==="fulfilled"?Array.isArray(jt.value?.data)?jt.value.data:[]:[],de=ss.status==="fulfilled"?Array.isArray(ss.value?.data)?ss.value.data:[]:[],le=ks.status==="fulfilled"?Array.isArray(ks.value?.data)?ks.value.data:[]:[],P=Ns.reduce((Ce,et)=>{const it=parseFloat(et.total||et.amount||0);return Ce+it},0),ie=Ns.length,ue=de.length,Re=le.filter(Ce=>Ce.status==="active").length,$e=[{id:1,title:"First Sale",description:"Made your first sale",earned:ie>0,icon:"🎯",date:ie>0?Ns[0]?.createdAt:null,type:"sales"},{id:2,title:"Team Builder",description:"Added 10+ team members",earned:ue>=10,icon:"👥",date:ue>=10?new Date().toISOString():null,type:"team"},{id:3,title:"Revenue Milestone",description:"Reached $10K revenue",earned:P>=1e4,icon:"💰",date:P>=1e4?new Date().toISOString():null,type:"revenue"},{id:4,title:"Customer Champion",description:"100+ satisfied customers",earned:ie>=100,icon:"⭐",date:ie>=100?new Date().toISOString():null,type:"customer"},{id:5,title:"Innovation Leader",description:"Launched 5+ products",earned:le.length>=5,icon:"🚀",date:le.length>=5?new Date().toISOString():null,type:"innovation"},{id:6,title:"Community Builder",description:"50+ orders completed",earned:ie>=50,icon:"🤝",date:ie>=50?new Date().toISOString():null,type:"community"}],Oe=[...Ns.slice(0,3).map((Ce,et)=>({id:`order-${et}`,action:`Created order #${Ce.orderNumber||Ce._id?.slice(-6)} - ${Ce.customerName||"Customer"}`,timestamp:Ne(Ce.createdAt),type:"order",icon:qt,color:"text-blue-500",metadata:{amount:Ce.total||Ce.amount}})),...Y.slice(0,2).map((Ce,et)=>({id:`invoice-${et}`,action:`Generated invoice #${Ce.invoiceNumber||Ce._id?.slice(-6)} - $${Ce.total||0}`,timestamp:Ne(Ce.createdAt),type:"finance",icon:ea,color:"text-green-500",metadata:{amount:Ce.total}})),...de.slice(0,2).map((Ce,et)=>({id:`team-${et}`,action:`Added team member: ${Ce.name||Ce.email}`,timestamp:Ne(Ce.createdAt),type:"team",icon:Xt,color:"text-orange-500"})),...le.filter(Ce=>Ce.createdAt).slice(0,2).map((Ce,et)=>({id:`product-${et}`,action:`Added product: ${Ce.name}`,timestamp:Ne(Ce.createdAt),type:"product",icon:qt,color:"text-purple-500"}))].slice(0,8);me(Oe);const Fe=Ns.length+Y.length+de.length+le.length,Le=Ns.filter(Ce=>Ce.status==="completed"||Ce.status==="delivered").length,xe=Ns.filter(Ce=>Ce.status==="completed"||Ce.status==="delivered").filter(Ce=>Ce.rating),We=xe.length>0?xe.reduce((Ce,et)=>Ce+(et.rating||0),0)/xe.length:0;M({completionRate:La(),profileViews:0,connections:de.length,totalOrders:ie,totalRevenue:P,activeProjects:Re,teamMembers:ue,rating:We,reviewsCount:xe.length,engagements:Fe,totalSales:Le,achievements:$e}),Oe.length>0&&me(Oe),console.log("✅ Performance data loaded:",{orders:ie,revenue:P,team:ue,achievements:$e.filter(Ce=>Ce.earned).length})}catch(De){console.error("❌ Error fetching performance data:",De)}})()},[s]);const Ne=J=>{if(!J)return"Recently";const De=new Date(J),gt=new Date-De,jt=Math.floor(gt/6e4),ss=Math.floor(gt/36e5),ks=Math.floor(gt/864e5);return jt<60?`${jt} minute${jt!==1?"s":""} ago`:ss<24?`${ss} hour${ss!==1?"s":""} ago`:ks<7?`${ks} day${ks!==1?"s":""} ago`:De.toLocaleDateString()},he=async()=>{try{const J=localStorage.getItem("token"),De={...A};(!De.gender||De.gender==="")&&delete De.gender,Object.keys(De).forEach(Ge=>{De[Ge]===""&&delete De[Ge]}),await ye.put("/user/profile",De,{headers:{Authorization:`Bearer ${J}`}}),D.success("Profile updated successfully!"),c(!1)}catch(J){D.error("Error updating profile."),console.error("Error updating profile:",J)}},Ue=async J=>{const De=J.target.files[0];if(De){if(De.size>5*1024*1024){D.error("File size must be less than 5MB");return}if(!De.type.startsWith("image/")){D.error("Please select an image file");return}try{F(!0);const Ge=new FileReader;Ge.onload=gt=>{const jt=gt.target.result;S(jt),N(!0),ps(ss=>[jt,...ss.slice(0,4)])},Ge.readAsDataURL(De)}catch(Ge){D.error("Error processing image"),console.error("Error processing image:",Ge)}finally{F(!1)}}},st=()=>{y&&(B({...A,avatar:y}),D.success("Profile picture updated!"),N(!1),T(1),G(0),sa({brightness:100,contrast:100,saturation:100}))},Ct=async()=>{const J=prompt("Enter image URL:");if(J)try{F(!0);const De=new Cb;De.onload=()=>{S(J),N(!0),ps(Ge=>[J,...Ge.slice(0,4)])},De.onerror=()=>D.error("Invalid image URL"),De.src=J}catch{D.error("Error loading image from URL")}finally{F(!1)}},Dt=J=>{const De=J.target.files[0];if(De){if(De.size>10*1024*1024){D.error("File size must be less than 10MB");return}const Ge=new FileReader;Ge.onload=gt=>{B({...A,coverImage:gt.target.result}),D.success("Cover image updated!")},Ge.readAsDataURL(De)}},Zt=()=>{B({...A,avatar:""}),S(""),D.success("Profile picture removed")},ts=()=>{G(J=>(J+90)%360)},ke=J=>{T(De=>{const Ge=J==="in"?De+.1:De-.1;return Math.max(.5,Math.min(3,Ge))})},we=(J,De)=>{sa(Ge=>({...Ge,[J]:De}))},nt=(J,De=50)=>{J&&!W.find(Ge=>Ge.name.toLowerCase()===J.toLowerCase())&&(se([...W,{name:J,level:De,category:"Other"}]),D.success(`Added skill: ${J}`))},Ye=J=>{se(W.filter(De=>De.name!==J)),D.success(`Removed skill: ${J}`)},pt=(J,De)=>{se(W.map(Ge=>Ge.name===J?{...Ge,level:De}:Ge))},yt=()=>{const J=`${window.location.origin}/profile/${t?.id}`;return`https://api.qrserver.com/v1/create-qr-code/?size=200x200&data=${encodeURIComponent(J)}`},Kt=()=>{const J=`${window.location.origin}/profile/${t?.id}`;navigator.clipboard.writeText(J),D.success("Profile link copied to clipboard!")},Jt=async()=>{const J=`${window.location.origin}/profile/${t?.id}`;if(navigator.share)try{await navigator.share({title:`${A.firstName} ${A.lastName}'s Profile`,text:"Check out my profile on ominbiz",url:J})}catch{Kt()}else Kt()},Ut=()=>{const J={...A,stats:H,preferences:q,exportedAt:new Date().toISOString()},De=new Blob([JSON.stringify(J,null,2)],{type:"application/json"}),Ge=URL.createObjectURL(De),gt=document.createElement("a");gt.href=Ge,gt.download=`${A.firstName}_${A.lastName}_profile.json`,gt.click(),URL.revokeObjectURL(Ge),D.success("Profile exported successfully!")},Ia=async()=>{D.info("This feature would generate a profile card image")};if(a)return e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-primary"})});if(!s)return e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsx(K,{className:"w-96",children:e.jsxs(X,{className:"p-6 text-center",children:[e.jsx(ta,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground"}),e.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Authentication Required"}),e.jsx("p",{className:"text-muted-foreground",children:"Please log in to view your profile."})]})})});const La=()=>{const J=[A.firstName,A.lastName,A.email,A.phone,A.bio,A.jobTitle,A.avatar,A.location],De=J.filter(Ge=>Ge&&Ge.trim()!=="").length;return Math.round(De/J.length*100)},nr=J=>{switch(J){case"available":return"bg-green-500";case"busy":return"bg-red-500";case"away":return"bg-yellow-500";default:return"bg-gray-500"}},ys=J=>{switch(J){case"available":return"Available";case"busy":return"Busy";case"away":return"Away";default:return"Offline"}};return e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsxs("div",{className:"relative h-64 bg-gradient-to-r from-blue-600 via-purple-600 to-pink-600 overflow-hidden",children:[A.coverImage&&e.jsx("img",{src:A.coverImage,alt:"Cover",className:"w-full h-full object-cover"}),e.jsx("div",{className:"absolute inset-0 bg-black/20"}),o&&e.jsxs("div",{className:"absolute top-4 right-4",children:[e.jsx("input",{type:"file",accept:"image/*",onChange:Dt,className:"hidden",id:"cover-upload",ref:E}),e.jsxs(R,{variant:"secondary",size:"sm",onClick:()=>E.current?.click(),children:[e.jsx(ng,{className:"h-4 w-4 mr-2"}),"Change Cover"]})]}),e.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-6",children:e.jsxs("div",{className:"flex items-end gap-6",children:[e.jsxs("div",{className:"relative group",children:[e.jsxs("div",{className:`relative rounded-full p-1 ${As?As.color:"border-4 border-white/20"}`,children:[e.jsxs(fr,{className:"h-32 w-32 border-4 border-white shadow-lg",children:[e.jsx(Rn,{src:A.avatar,alt:`${A.firstName} ${A.lastName}`}),e.jsxs(xr,{className:"text-2xl font-bold bg-primary text-primary-foreground",children:[A.firstName?.[0],A.lastName?.[0]]})]}),o&&e.jsxs(bg,{children:[e.jsx(wg,{asChild:!0,children:e.jsx("div",{className:"absolute inset-0 bg-black/50 rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity cursor-pointer",children:e.jsx(ng,{className:"h-8 w-8 text-white"})})}),e.jsxs(Sg,{align:"center",children:[e.jsxs(qn,{onClick:()=>k.current?.click(),children:[e.jsx(S_,{className:"h-4 w-4 mr-2"}),"Upload Photo"]}),e.jsxs(qn,{onClick:Ct,children:[e.jsx(Dc,{className:"h-4 w-4 mr-2"}),"From URL"]}),A.avatar&&e.jsxs(qn,{onClick:Zt,children:[e.jsx(fa,{className:"h-4 w-4 mr-2"}),"Remove Photo"]}),Ps.length>0&&e.jsxs(qn,{onClick:()=>N(!0),children:[e.jsx(Qi,{className:"h-4 w-4 mr-2"}),"Edit Photo"]})]})]})]}),e.jsx("div",{className:`absolute bottom-2 right-2 h-6 w-6 rounded-full border-2 border-white ${nr(A.availability)}`})]}),e.jsxs("div",{className:"flex-1 text-white",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsxs("h1",{className:"text-3xl font-bold",children:[A.firstName," ",A.lastName]}),A.pronouns&&e.jsx(_e,{variant:"secondary",className:"text-xs",children:A.pronouns}),e.jsx("div",{className:`px-2 py-1 rounded-full text-xs font-medium ${nr(A.availability)} text-white`,children:ys(A.availability)}),e.jsx(qz,{showBadge:!0,className:"bg-white/10 backdrop-blur-sm px-2 py-1 rounded-full"})]}),e.jsxs("div",{className:"flex items-center gap-4 text-sm opacity-90 mb-3",children:[A.jobTitle&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Ml,{className:"h-4 w-4"}),A.jobTitle]}),A.location&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Xr,{className:"h-4 w-4"}),A.location]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Ja,{className:"h-4 w-4 fill-current"}),H.rating," (",H.reviewsCount," reviews)"]})]}),A.bio&&e.jsx("p",{className:"text-sm opacity-90 max-w-2xl",children:A.bio})]}),e.jsx("div",{className:"flex items-center gap-2",children:o?e.jsxs(e.Fragment,{children:[e.jsx(R,{variant:"outline",onClick:()=>c(!1),children:"Cancel"}),e.jsxs(R,{onClick:he,children:[e.jsx($i,{className:"h-4 w-4 mr-2"}),"Save Changes"]})]}):e.jsxs(e.Fragment,{children:[e.jsxs(R,{variant:"secondary",size:"sm",onClick:Jt,children:[e.jsx(qc,{className:"h-4 w-4 mr-2"}),"Share"]}),e.jsxs(R,{variant:"secondary",size:"sm",onClick:()=>h(!0),children:[e.jsx(ig,{className:"h-4 w-4 mr-2"}),"QR Code"]}),e.jsxs(R,{onClick:()=>c(!0),children:[e.jsx(Qi,{className:"h-4 w-4 mr-2"}),"Edit Profile"]})]})})]})})]}),e.jsx("input",{type:"file",accept:"image/*",onChange:Ue,className:"hidden",ref:k}),e.jsxs("div",{className:"max-w-7xl mx-auto px-6 py-8",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[e.jsx(K,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Total Orders"}),e.jsx("p",{className:"text-2xl font-bold",children:H.totalOrders.toLocaleString()}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"From orders API"})]}),e.jsx(qt,{className:"h-8 w-8 text-blue-500"})]})}),e.jsx(K,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Total Revenue"}),e.jsxs("p",{className:"text-2xl font-bold",children:["$",H.totalRevenue.toLocaleString()]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Calculated from orders"})]}),e.jsx(ea,{className:"h-8 w-8 text-green-500"})]})}),e.jsx(K,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Engagements"}),e.jsx("p",{className:"text-2xl font-bold",children:H.engagements.toLocaleString()}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Orders + Invoices + Team + Products"})]}),e.jsx(Is,{className:"h-8 w-8 text-purple-500"})]})}),e.jsx(K,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Completed Sales"}),e.jsx("p",{className:"text-2xl font-bold",children:H.totalSales.toLocaleString()}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Delivered orders"})]}),e.jsx(os,{className:"h-8 w-8 text-emerald-500"})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[e.jsx(K,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Team Size"}),e.jsx("p",{className:"text-2xl font-bold",children:H.teamMembers})]}),e.jsx(Xt,{className:"h-8 w-8 text-orange-500"})]})}),e.jsx(K,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Active Projects"}),e.jsx("p",{className:"text-2xl font-bold",children:H.activeProjects})]}),e.jsx(Ml,{className:"h-8 w-8 text-indigo-500"})]})}),e.jsx(K,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Avg Rating"}),e.jsx("p",{className:"text-2xl font-bold",children:H.rating?H.rating.toFixed(1):"0.0"}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[H.reviewsCount," reviews"]})]}),e.jsx(Ja,{className:"h-8 w-8 text-yellow-500 fill-current"})]})}),e.jsx(K,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Profile Progress"}),e.jsxs("p",{className:"text-2xl font-bold",children:[La(),"%"]})]}),e.jsx(Ni,{className:"h-8 w-8 text-pink-500"})]})})]}),e.jsxs(pa,{value:u,onValueChange:f,className:"space-y-6",children:[e.jsxs(ba,{className:"grid w-full grid-cols-6",children:[e.jsx(ut,{value:"overview",children:"Overview"}),e.jsx(ut,{value:"about",children:"About"}),e.jsx(ut,{value:"skills",children:"Skills"}),e.jsx(ut,{value:"activity",children:"Activity"}),e.jsx(ut,{value:"connections",children:"Network"}),e.jsx(ut,{value:"settings",children:"Settings"})]}),e.jsx(mt,{value:"overview",className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs(K,{children:[e.jsxs(pe,{children:[e.jsxs(ge,{className:"flex items-center gap-2",children:[e.jsx(Ni,{className:"h-5 w-5"}),"Profile Completion"]}),e.jsx(lt,{children:"Complete your profile to get better visibility"})]}),e.jsx(X,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium",children:"Overall Progress"}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[La(),"%"]})]}),e.jsx(Tr,{value:La(),className:"h-2"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mt-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(os,{className:`h-4 w-4 ${A.avatar?"text-green-500":"text-gray-300"}`}),e.jsx("span",{className:"text-sm",children:"Profile Picture"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(os,{className:`h-4 w-4 ${A.bio?"text-green-500":"text-gray-300"}`}),e.jsx("span",{className:"text-sm",children:"Bio"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(os,{className:`h-4 w-4 ${A.jobTitle?"text-green-500":"text-gray-300"}`}),e.jsx("span",{className:"text-sm",children:"Job Title"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(os,{className:`h-4 w-4 ${A.location?"text-green-500":"text-gray-300"}`}),e.jsx("span",{className:"text-sm",children:"Location"})]})]})]})})]}),e.jsxs(K,{children:[e.jsxs(pe,{children:[e.jsxs(ge,{className:"flex items-center gap-2",children:[e.jsx(vv,{className:"h-5 w-5"}),"Achievements"]}),e.jsx(lt,{children:"Your milestones and accomplishments"})]}),e.jsx(X,{children:e.jsx("div",{className:"grid grid-cols-2 gap-4",children:H.achievements.map(J=>e.jsx("div",{className:`p-4 rounded-lg border-2 transition-all ${J.earned?"border-green-200 bg-green-50 dark:border-green-800 dark:bg-green-950":"border-gray-200 bg-gray-50 dark:border-gray-800 dark:bg-gray-950 opacity-60"}`,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"text-2xl",children:J.icon}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-medium text-sm",children:J.title}),e.jsx("p",{className:"text-xs text-muted-foreground",children:J.description}),J.earned&&J.date&&e.jsxs("p",{className:"text-xs text-green-600 dark:text-green-400 mt-1",children:["Earned ",new Date(J.date).toLocaleDateString()]})]}),J.earned&&e.jsx(os,{className:"h-5 w-5 text-green-500"})]})},J.id))})})]}),e.jsxs(K,{children:[e.jsxs(pe,{children:[e.jsxs(ge,{className:"flex items-center gap-2",children:[e.jsx(Aa,{className:"h-5 w-5"}),"Recent Activity"]}),e.jsx(lt,{children:"Your latest actions and updates"})]}),e.jsx(X,{children:e.jsx(_r,{className:"h-64",children:e.jsx("div",{className:"space-y-4",children:ee.map(J=>e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:`p-2 rounded-full ${J.color} bg-opacity-10`,children:e.jsx(J.icon,{className:`h-4 w-4 ${J.color}`})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium",children:J.action}),e.jsx("p",{className:"text-xs text-muted-foreground",children:J.timestamp})]})]},J.id))})})})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(K,{children:[e.jsx(pe,{children:e.jsxs(ge,{className:"flex items-center gap-2",children:[e.jsx(va,{className:"h-5 w-5"}),"Quick Actions"]})}),e.jsxs(X,{className:"space-y-3",children:[e.jsxs(R,{variant:"outline",className:"w-full justify-start",onClick:Kt,children:[e.jsx(Dc,{className:"h-4 w-4 mr-2"}),"Copy Profile Link"]}),e.jsxs(R,{variant:"outline",className:"w-full justify-start",onClick:Ut,children:[e.jsx(Pa,{className:"h-4 w-4 mr-2"}),"Export Profile"]}),e.jsxs(R,{variant:"outline",className:"w-full justify-start",onClick:()=>h(!0),children:[e.jsx(ig,{className:"h-4 w-4 mr-2"}),"Show QR Code"]}),e.jsxs(R,{variant:"outline",className:"w-full justify-start",onClick:Ia,children:[e.jsx(Cb,{className:"h-4 w-4 mr-2"}),"Save as Image"]})]})]}),e.jsxs(K,{children:[e.jsx(pe,{children:e.jsxs(ge,{className:"flex items-center gap-2",children:[e.jsx(_o,{className:"h-5 w-5"}),"Social Links"]})}),e.jsxs(X,{className:"space-y-3",children:[A.website&&e.jsxs("a",{href:A.website,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 text-sm hover:text-primary transition-colors",children:[e.jsx(_o,{className:"h-4 w-4"}),"Website",e.jsx(Ol,{className:"h-3 w-3"})]}),A.linkedin&&e.jsxs("a",{href:A.linkedin,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 text-sm hover:text-primary transition-colors",children:[e.jsx(jv,{className:"h-4 w-4"}),"LinkedIn",e.jsx(Ol,{className:"h-3 w-3"})]}),A.github&&e.jsxs("a",{href:A.github,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 text-sm hover:text-primary transition-colors",children:[e.jsx(zc,{className:"h-4 w-4"}),"GitHub",e.jsx(Ol,{className:"h-3 w-3"})]}),A.twitter&&e.jsxs("a",{href:A.twitter,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 text-sm hover:text-primary transition-colors",children:[e.jsx(yv,{className:"h-4 w-4"}),"Twitter",e.jsx(Ol,{className:"h-3 w-3"})]})]})]}),e.jsxs(K,{children:[e.jsx(pe,{children:e.jsxs(ge,{className:"flex items-center gap-2",children:[e.jsx(er,{className:"h-5 w-5"}),"Profile Stats"]})}),e.jsxs(X,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm",children:"Total Orders"}),e.jsx("span",{className:"font-medium",children:H.totalOrders})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm",children:"Revenue"}),e.jsxs("span",{className:"font-medium",children:["$",H.totalRevenue.toLocaleString()]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm",children:"Active Projects"}),e.jsx("span",{className:"font-medium",children:H.activeProjects})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm",children:"Team Members"}),e.jsx("span",{className:"font-medium",children:H.teamMembers})]})]})]})]})]})}),e.jsx(mt,{value:"about",className:"space-y-6",children:e.jsxs(K,{children:[e.jsxs(pe,{children:[e.jsx(ge,{children:"About Me"}),e.jsx(lt,{children:"Personal and professional information"})]}),e.jsx(X,{className:"space-y-6",children:o?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(ae,{children:"First Name"}),e.jsx(fe,{value:A.firstName,onChange:J=>B({...A,firstName:J.target.value})})]}),e.jsxs("div",{children:[e.jsx(ae,{children:"Last Name"}),e.jsx(fe,{value:A.lastName,onChange:J=>B({...A,lastName:J.target.value})})]})]}),e.jsxs("div",{children:[e.jsx(ae,{children:"Bio"}),e.jsx(Ts,{rows:4,value:A.bio,onChange:J=>B({...A,bio:J.target.value}),placeholder:"Tell us about yourself..."})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(ae,{children:"Email"}),e.jsx(fe,{type:"email",value:A.email,onChange:J=>B({...A,email:J.target.value})})]}),e.jsxs("div",{children:[e.jsx(ae,{children:"Phone"}),e.jsx(fe,{value:A.phone,onChange:J=>B({...A,phone:J.target.value})})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(ae,{children:"Job Title"}),e.jsx(fe,{value:A.jobTitle,onChange:J=>B({...A,jobTitle:J.target.value})})]}),e.jsxs("div",{children:[e.jsx(ae,{children:"Department"}),e.jsx(fe,{value:A.department,onChange:J=>B({...A,department:J.target.value})})]})]}),e.jsxs("div",{children:[e.jsx(ae,{children:"Location"}),e.jsx(fe,{value:A.location,onChange:J=>B({...A,location:J.target.value})})]})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Gs,{className:"h-5 w-5 text-muted-foreground mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Email"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:A.email||"Not provided"})]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx($s,{className:"h-5 w-5 text-muted-foreground mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Phone"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:A.phone||"Not provided"})]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Ml,{className:"h-5 w-5 text-muted-foreground mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Job Title"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:A.jobTitle||"Not provided"})]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Xr,{className:"h-5 w-5 text-muted-foreground mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Location"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:A.location||"Not provided"})]})]})]})})]})}),e.jsx(mt,{value:"skills",className:"space-y-6",children:e.jsxs(K,{children:[e.jsx(pe,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(ge,{children:"Skills & Expertise"}),e.jsx(lt,{children:"Your professional skills and proficiency levels"})]}),e.jsxs(R,{size:"sm",onClick:()=>{const J=prompt("Enter skill name:");J&&nt(J,50)},children:[e.jsx(Hs,{className:"h-4 w-4 mr-2"}),"Add Skill"]})]})}),e.jsx(X,{children:e.jsx("div",{className:"space-y-6",children:W.map(J=>e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"font-medium",children:J.name}),e.jsx(_e,{variant:"secondary",className:"text-xs",children:J.category})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-sm text-muted-foreground",children:[J.level,"%"]}),e.jsx(R,{variant:"ghost",size:"sm",onClick:()=>Ye(J.name),children:e.jsx(yr,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Tr,{value:J.level,className:"h-2 flex-1"}),e.jsx(fi,{value:[J.level],onValueChange:([De])=>pt(J.name,De),max:100,step:5,className:"w-32"})]})]},J.name))})})]})}),e.jsx(mt,{value:"activity",className:"space-y-6",children:e.jsxs(K,{children:[e.jsxs(pe,{children:[e.jsx(ge,{children:"Activity Timeline"}),e.jsx(lt,{children:"Your recent actions and updates"})]}),e.jsx(X,{children:e.jsx(_r,{className:"h-96",children:e.jsx("div",{className:"space-y-4",children:ee.map(J=>e.jsxs("div",{className:"flex items-start gap-4 p-4 rounded-lg hover:bg-muted/50 transition-colors",children:[e.jsx("div",{className:`p-2 rounded-full ${J.color} bg-opacity-10`,children:e.jsx(J.icon,{className:`h-5 w-5 ${J.color}`})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-medium",children:J.action}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:J.timestamp}),e.jsx(_e,{variant:"outline",className:"mt-2 text-xs",children:J.type})]})]},J.id))})})})]})}),e.jsx(mt,{value:"connections",className:"space-y-6",children:e.jsxs(K,{children:[e.jsx(pe,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(ge,{children:"Network & Connections"}),e.jsxs(lt,{children:[Z.length," connections",Q&&" • Refreshing..."]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(R,{size:"sm",variant:"outline",onClick:ht,disabled:Q,children:[e.jsx(ru,{className:`h-4 w-4 mr-2 ${Q?"animate-spin":""}`}),"Refresh"]}),e.jsxs(R,{size:"sm",onClick:()=>oe(!0),children:[e.jsx(bo,{className:"h-4 w-4 mr-2"}),"Add Connection"]})]})]})}),e.jsx(X,{children:Q&&Z.length===0?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsxs("div",{className:"text-center",children:[e.jsx(ru,{className:"h-8 w-8 animate-spin mx-auto text-muted-foreground mb-2"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Loading connections..."})]})}):Z.length===0?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Xt,{className:"h-12 w-12 mx-auto text-muted-foreground mb-3"}),e.jsx("h3",{className:"font-medium mb-1",children:"No connections yet"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Start building your network"}),e.jsxs(R,{size:"sm",onClick:()=>oe(!0),children:[e.jsx(bo,{className:"h-4 w-4 mr-2"}),"Add Your First Connection"]})]})}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:Z.map(J=>e.jsx(K,{className:"p-4 hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(fr,{className:"h-12 w-12",children:[e.jsx(Rn,{src:J.avatar}),e.jsx(xr,{children:J.name.split(" ").map(De=>De[0]).join("")})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h4",{className:"font-medium text-sm",children:J.name}),e.jsx("p",{className:"text-xs text-muted-foreground",children:J.role}),J.email&&e.jsx("p",{className:"text-xs text-muted-foreground",children:J.email}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[J.mutual," mutual connection",J.mutual!==1?"s":""]})]}),e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx(R,{variant:J.connected?"outline":"default",size:"sm",onClick:()=>J.connected?ot(J.id):bt(J.id),children:J.connected?"Connected":"Connect"}),J.connected&&e.jsxs(bg,{children:[e.jsx(wg,{asChild:!0,children:e.jsx(R,{variant:"ghost",size:"sm",children:e.jsx(C_,{className:"h-4 w-4"})})}),e.jsxs(Sg,{children:[e.jsxs(qn,{children:[e.jsx(Zs,{className:"h-4 w-4 mr-2"}),"Send Message"]}),e.jsxs(qn,{children:[e.jsx(la,{className:"h-4 w-4 mr-2"}),"View Profile"]}),e.jsxs(qn,{className:"text-destructive",onClick:()=>ot(J.id),children:[e.jsx(fa,{className:"h-4 w-4 mr-2"}),"Remove Connection"]})]})]})]})]})},J.id))})})]})}),e.jsx(Ft,{open:te,onOpenChange:oe,children:e.jsxs(It,{children:[e.jsxs(Lt,{children:[e.jsx(Bt,{children:"Add New Connection"}),e.jsx(es,{children:"Send a connection invitation to someone via email"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(ae,{htmlFor:"connection-email",children:"Email Address"}),e.jsx(fe,{id:"connection-email",type:"email",placeholder:"colleague@example.com",value:je.email,onChange:J=>Me(De=>({...De,email:J.target.value}))})]}),e.jsxs("div",{children:[e.jsx(ae,{htmlFor:"connection-message",children:"Personal Message (Optional)"}),e.jsx(Ts,{id:"connection-message",placeholder:"I'd like to connect with you...",value:je.message,onChange:J=>Me(De=>({...De,message:J.target.value})),rows:3})]})]}),e.jsxs(Rs,{children:[e.jsx(R,{variant:"outline",onClick:()=>{oe(!1),Me({email:"",message:""})},children:"Cancel"}),e.jsxs(R,{onClick:hs,children:[e.jsx(bo,{className:"h-4 w-4 mr-2"}),"Send Invitation"]})]})]})}),e.jsx(mt,{value:"settings",className:"space-y-6",children:e.jsxs(K,{children:[e.jsxs(pe,{children:[e.jsx(ge,{children:"Profile Settings"}),e.jsx(lt,{children:"Manage your privacy and preferences"})]}),e.jsx(X,{className:"space-y-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg border",children:[e.jsxs("div",{children:[e.jsx(ae,{children:"Email Notifications"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Receive updates via email"})]}),e.jsx(ns,{checked:q.emailNotifications,onCheckedChange:J=>{L({...q,emailNotifications:J}),D.success(`Email notifications ${J?"enabled":"disabled"}`)}})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg border",children:[e.jsxs("div",{children:[e.jsx(ae,{children:"Push Notifications"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Browser push notifications"})]}),e.jsx(ns,{checked:q.pushNotifications,onCheckedChange:J=>{L({...q,pushNotifications:J}),D.success(`Push notifications ${J?"enabled":"disabled"}`)}})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg border",children:[e.jsxs("div",{children:[e.jsx(ae,{children:"Show Activity Status"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Let others see when you're active"})]}),e.jsx(ns,{checked:q.showActivity,onCheckedChange:J=>{L({...q,showActivity:J}),D.success(`Activity status ${J?"visible":"hidden"}`)}})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg border",children:[e.jsxs("div",{children:[e.jsx(ae,{children:"Profile Visibility"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Control who can see your profile"})]}),e.jsxs(Ot,{value:q.profileVisibility,onValueChange:J=>{L({...q,profileVisibility:J}),D.success(`Profile visibility set to ${J}`)},children:[e.jsx(Pt,{className:"w-32",children:e.jsx(Rt,{})}),e.jsxs(Mt,{children:[e.jsx(Ee,{value:"public",children:"Public"}),e.jsx(Ee,{value:"connections",children:"Connections"}),e.jsx(Ee,{value:"private",children:"Private"})]})]})]}),e.jsxs("div",{className:"p-4 rounded-lg bg-red-50 dark:bg-red-950 border border-red-200 dark:border-red-800",children:[e.jsx("h4",{className:"font-medium text-red-900 dark:text-red-100 mb-2",children:"Danger Zone"}),e.jsx("p",{className:"text-sm text-red-700 dark:text-red-300 mb-4",children:"Irreversible actions"}),e.jsxs(R,{variant:"destructive",size:"sm",onClick:()=>ce(!0),children:[e.jsx(fa,{className:"h-4 w-4 mr-2"}),"Delete Account"]})]})]})})]})})]})]}),e.jsx(Ft,{open:x,onOpenChange:h,children:e.jsxs(It,{className:"sm:max-w-md",children:[e.jsxs(Lt,{children:[e.jsx(Bt,{children:"Profile QR Code"}),e.jsx(es,{children:"Share your profile with others using this QR code"})]}),e.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[e.jsx("div",{className:"p-4 bg-white rounded-lg",children:e.jsx("img",{src:yt(),alt:"Profile QR Code",className:"w-48 h-48"})}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs(R,{variant:"outline",onClick:Kt,children:[e.jsx(gv,{className:"h-4 w-4 mr-2"}),"Copy Link"]}),e.jsxs(R,{onClick:Jt,children:[e.jsx(qc,{className:"h-4 w-4 mr-2"}),"Share"]})]})]})]})}),e.jsx(Ft,{open:ve,onOpenChange:ce,children:e.jsxs(It,{className:"sm:max-w-md",children:[e.jsxs(Lt,{children:[e.jsxs(Bt,{className:"flex items-center gap-2 text-red-600",children:[e.jsx(Cs,{className:"h-5 w-5"}),"Delete Account"]}),e.jsx(es,{children:"This action cannot be undone. This will permanently delete your account and remove all your data from our servers."})]}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(ae,{htmlFor:"delete-confirm",children:["Type ",e.jsx("strong",{children:"DELETE"})," to confirm"]}),e.jsx(fe,{id:"delete-confirm",value:Pe,onChange:J=>Qe(J.target.value),placeholder:"DELETE",className:"allow-select"})]}),e.jsxs("div",{className:"bg-red-50 dark:bg-red-950 p-3 rounded-lg",children:[e.jsx("p",{className:"text-sm text-red-800 dark:text-red-200 font-medium",children:"Warning:"}),e.jsxs("ul",{className:"text-xs text-red-700 dark:text-red-300 mt-2 space-y-1 list-disc list-inside",children:[e.jsx("li",{children:"All your profile data will be deleted"}),e.jsx("li",{children:"All your orders and transactions will be removed"}),e.jsx("li",{children:"All your products and inventory will be deleted"}),e.jsx("li",{children:"This action cannot be reversed"})]})]})]}),e.jsxs(Rs,{children:[e.jsx(R,{variant:"outline",onClick:()=>{ce(!1),Qe("")},disabled:vt,children:"Cancel"}),e.jsx(R,{variant:"destructive",onClick:fs,disabled:vt||Pe!=="DELETE",children:vt?e.jsxs(e.Fragment,{children:[e.jsx(ru,{className:"h-4 w-4 mr-2 animate-spin"}),"Deleting..."]}):e.jsxs(e.Fragment,{children:[e.jsx(fa,{className:"h-4 w-4 mr-2"}),"Delete Account"]})})]})]})}),e.jsx(Ft,{open:b,onOpenChange:N,children:e.jsxs(It,{className:"sm:max-w-2xl",children:[e.jsxs(Lt,{children:[e.jsx(Bt,{children:"Edit Profile Picture"}),e.jsx(es,{children:"Adjust and customize your profile picture"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"relative h-64 bg-gray-100 dark:bg-gray-800 rounded-lg flex items-center justify-center overflow-hidden",children:y&&e.jsx("img",{src:y,alt:"Avatar preview",className:"max-h-56 max-w-56 rounded-full object-cover transition-all",style:{transform:`scale(${C}) rotate(${_}deg)`,filter:`brightness(${_t.brightness}%) contrast(${_t.contrast}%) saturate(${_t.saturation}%)`}})}),e.jsxs("div",{className:"flex justify-center space-x-2",children:[e.jsxs(R,{variant:"outline",size:"sm",onClick:ts,children:[e.jsx(ru,{className:"h-4 w-4 mr-1"}),"Rotate"]}),e.jsxs(R,{variant:"outline",size:"sm",onClick:()=>ke("in"),children:[e.jsx(T_,{className:"h-4 w-4 mr-1"}),"Zoom In"]}),e.jsxs(R,{variant:"outline",size:"sm",onClick:()=>ke("out"),children:[e.jsx(k_,{className:"h-4 w-4 mr-1"}),"Zoom Out"]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx(ae,{children:"Brightness"}),e.jsx(fi,{value:[_t.brightness],onValueChange:([J])=>we("brightness",J),max:200,step:1}),e.jsx(ae,{children:"Contrast"}),e.jsx(fi,{value:[_t.contrast],onValueChange:([J])=>we("contrast",J),max:200,step:1}),e.jsx(ae,{children:"Saturation"}),e.jsx(fi,{value:[_t.saturation],onValueChange:([J])=>we("saturation",J),max:200,step:1})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ae,{children:"Avatar Frames"}),e.jsx("div",{className:"flex space-x-2",children:Te.map(J=>e.jsx(R,{variant:"outline",size:"sm",className:`p-2 ${As?.id===J.id?"border-2 border-primary":""}`,onClick:()=>cs(J),children:e.jsx(J.icon,{className:"h-4 w-4"})},J.id))})]}),Ps.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(ae,{children:"Recent Photos"}),e.jsx("div",{className:"flex space-x-2",children:Ps.slice(0,4).map((J,De)=>e.jsx("img",{src:J,alt:`Previous ${De+1}`,className:"h-12 w-12 rounded-full object-cover cursor-pointer border-2 hover:border-primary transition-colors",onClick:()=>S(J)},De))})]})]})]}),e.jsxs(Rs,{children:[e.jsx(R,{variant:"outline",onClick:()=>N(!1),children:"Cancel"}),e.jsxs(R,{onClick:st,disabled:U,children:[U?e.jsx(ru,{className:"h-4 w-4 mr-2 animate-spin"}):e.jsx($i,{className:"h-4 w-4 mr-2"}),"Save Changes"]})]})]})})]})},Yz=()=>{const{user:t,isAuthenticated:s}=Es(),{socket:a,connected:r}=da(),[i,o]=v.useState({balance:0,totalIncome:0,totalExpenses:0,pendingPayments:0,availableFunds:0}),[c,u]=v.useState([]),[f,x]=v.useState([]),[h,p]=v.useState(!0),[g,b]=v.useState(!1),[N,y]=v.useState(!0),[S,C]=v.useState("all"),[T,_]=v.useState(!1),[G,U]=v.useState(!1),[F,k]=v.useState(!1),[E,A]=v.useState(!1),[B,H]=v.useState({amount:"",method:"bank",bankAccount:"",description:""}),[M,q]=v.useState({amount:"",method:"mpesa",reference:"",description:""}),[L,re]=v.useState({amount:"",plan:"fixed",duration:"12",expectedReturn:""}),[V,ee]=v.useState({amount:"",recipient:"",accountNumber:"",description:""}),[me,W]=v.useState(!1),[se,Z]=v.useState(""),[I,Q]=v.useState(null),[O,te]=v.useState({daily:5e4,perTransaction:2e4,todaySpent:0}),[oe,je]=v.useState(!1),[Me,ve]=v.useState(!1),[ce,Pe]=v.useState({amount:"",recipient:"",frequency:"monthly",startDate:""}),[Qe,vt]=v.useState({category:"",limit:"",period:"monthly"}),[xt,ht]=v.useState([]),[bt,ot]=v.useState([]),[hs,fs]=v.useState(!1),[Ps,ps]=v.useState(!1),[As,cs]=v.useState(!1),[_t,sa]=v.useState([]),[Te,Ne]=v.useState({transactionNotifications:!0,emailNotifications:!0,smsNotifications:!1,twoFactorAuth:!1,autoSaveReceipts:!0,currency:"KES",language:"en",theme:"auto"}),[he,Ue]=v.useState({provider:"",accountType:"",phoneNumber:"",email:"",accountNumber:"",accountName:""}),[st,Ct]=v.useState({provider:"",accountId:"",amount:"",recipient:"",description:""});v.useEffect(()=>{s&&(Jt(),Zt(),ts(),ke(),we(),nt(),Dt())},[s]);const Dt=()=>{if(a)return a.on("wallet_balance_update",P=>{o(ie=>({...ie,balance:P.balance,availableFunds:P.availableFunds})),D.info("Balance updated",{duration:2e3})}),a.on("wallet_transaction",P=>{u(ie=>[P,...ie]),D.success(`New transaction: ${P.type}`,{duration:3e3}),Jt()}),a.on("transaction_status_update",P=>{u(ie=>ie.map(ue=>ue.id===P.transactionId?{...ue,status:P.status}:ue)),D.info(`Transaction ${P.transactionId} ${P.status}`)}),()=>{a.off("wallet_balance_update"),a.off("wallet_transaction"),a.off("transaction_status_update")}},Zt=async()=>{try{const P=localStorage.getItem("token"),ie=await ye.get("/wallet/limits",{headers:{Authorization:`Bearer ${P}`}});te(ie.data)}catch(P){P.response?.status===404&&te({daily:5e4,perTransaction:2e4,todaySpent:0})}},ts=async()=>{try{const P=localStorage.getItem("token"),ie=await ye.get("/wallet/budgets",{headers:{Authorization:`Bearer ${P}`}});ht(ie.data||[])}catch(P){P.response?.status===404&&ht([])}},ke=async()=>{try{const P=localStorage.getItem("token"),ie=await ye.get("/wallet/recurring",{headers:{Authorization:`Bearer ${P}`}});ot(ie.data||[])}catch(P){P.response?.status===404&&ot([])}},we=async()=>{try{const P=localStorage.getItem("token"),ie=await ye.get("/wallet/connected-accounts",{headers:{Authorization:`Bearer ${P}`}});sa(ie.data||[])}catch(P){P.response?.status===404&&sa([])}},nt=async()=>{try{const P=localStorage.getItem("token"),ie=await ye.get("/wallet/settings",{headers:{Authorization:`Bearer ${P}`}});Ne(ie.data||Te)}catch(P){if(P.response?.status===404){const ie=localStorage.getItem("walletSettings");if(ie)try{Ne(JSON.parse(ie))}catch{}}}},Ye=async()=>{try{const P=localStorage.getItem("token");await ye.put("/wallet/settings",{...Te,userId:t?._id},{headers:{Authorization:`Bearer ${P}`}}),D.success("Wallet settings updated successfully!"),cs(!1)}catch(P){P.response?.status===404?(localStorage.setItem("walletSettings",JSON.stringify(Te)),D.success("Settings saved locally!"),cs(!1)):D.error("Failed to update settings")}},pt=async()=>{if(!he.provider){D.error("Please select a payment provider");return}if(he.provider==="mpesa"&&!he.phoneNumber){D.error("Please enter M-Pesa phone number");return}if(he.provider==="paypal"&&!he.email){D.error("Please enter PayPal email");return}if(he.provider==="bank"&&!he.accountNumber){D.error("Please enter bank account number");return}try{const P=localStorage.getItem("token"),ie=await ye.post("/wallet/connect-account",{type:he.accountType,accountName:he.accountName,accountNumber:he.accountNumber,provider:he.provider},{headers:{Authorization:`Bearer ${P}`}});D.success(`${he.provider.toUpperCase()} account linked successfully!`),fs(!1),Ue({provider:"",accountType:"",phoneNumber:"",email:"",accountNumber:"",accountName:""}),await we()}catch(P){console.error("Link account error:",P),D.error("Failed to link account. Please try again.")}},yt=async()=>{if(!st.provider||!st.accountId){D.error("Please select a destination account");return}if(!st.amount||parseFloat(st.amount)<=0){D.error("Please enter a valid amount");return}if(parseFloat(st.amount)>i.availableFunds){D.error("Insufficient funds");return}if(nr(parseFloat(st.amount)))try{const P=localStorage.getItem("token"),ie=await ye.post("/wallet/external-transfer",{...st,amount:parseFloat(st.amount),userId:t?._id},{headers:{Authorization:`Bearer ${P}`}});a&&r&&a.emit("wallet_action",{type:"external_transfer",amount:parseFloat(st.amount),provider:st.provider,userId:t?._id}),D.success(`Transfer to ${st.provider.toUpperCase()} initiated successfully!`),ps(!1),Ct({provider:"",accountId:"",amount:"",recipient:"",description:""}),await Jt(),await Zt()}catch(P){console.error("External transfer error:",P),D.error("Transfer failed. Please try again.")}},Kt=async P=>{try{const ie=localStorage.getItem("token");await ye.delete(`/wallet/connected-accounts/${P}`,{headers:{Authorization:`Bearer ${ie}`}}),D.success("Account disconnected successfully"),await we()}catch(ie){console.error("Disconnect error:",ie),D.error("Failed to disconnect account")}},Jt=async()=>{try{p(!0);const ie={Authorization:`Bearer ${localStorage.getItem("token")}`},[ue,Re,$e]=await Promise.allSettled([ye.get("/orders",{headers:ie}),ye.get("/invoices",{headers:ie}),ye.get("/payments",{headers:ie})]),Oe=ue.status==="fulfilled"?Array.isArray(ue.value?.data)?ue.value.data:[]:[],Fe=Re.status==="fulfilled"?Array.isArray(Re.value?.data)?Re.value.data:[]:[],Le=$e.status==="fulfilled"?Array.isArray($e.value?.data)?$e.value.data:[]:[],rt=Oe.filter(Ze=>Ze.status==="completed"||Ze.status==="delivered").reduce((Ze,$t)=>Ze+parseFloat($t.total||$t.amount||0),0),xe=Le.filter(Ze=>Ze.type==="expense"||Ze.type==="refund").reduce((Ze,$t)=>Ze+parseFloat($t.amount||0),0),We=Fe.filter(Ze=>Ze.status==="pending"||Ze.status==="sent").reduce((Ze,$t)=>Ze+parseFloat($t.total||0),0),Ce=rt-xe,et=Ce-We;o({balance:Ce,totalIncome:rt,totalExpenses:xe,pendingPayments:We,availableFunds:et});const it=[...Oe.map(Ze=>({id:Ze._id,type:"income",category:"sale",description:`Order #${Ze.orderNumber||Ze._id?.slice(-6)} - ${Ze.customerName||"Customer"}`,amount:parseFloat(Ze.total||Ze.amount||0),currency:Ze.currency||"KES",status:Ze.status,date:new Date(Ze.createdAt),method:Ze.paymentMethod||"Card"})),...Fe.map(Ze=>({id:Ze._id,type:Ze.status==="paid"?"income":"pending",category:"invoice",description:`Invoice #${Ze.invoiceNumber||Ze._id?.slice(-6)} - ${Ze.clientName||"Client"}`,amount:parseFloat(Ze.total||0),currency:Ze.currency||"KES",status:Ze.status,date:new Date(Ze.createdAt),method:Ze.paymentMethod||"Bank Transfer"})),...Le.map(Ze=>({id:Ze._id,type:"expense",category:Ze.category||"expense",description:Ze.description||`Payment ${Ze._id?.slice(-6)}`,amount:parseFloat(Ze.amount||0),currency:Ze.currency||"KES",status:Ze.status||"completed",date:new Date(Ze.createdAt||Ze.date),method:Ze.method||"Cash"}))].sort((Ze,$t)=>$t.date-Ze.date);u(it);const Tt={};it.forEach(Ze=>{Tt[Ze.currency]||(Tt[Ze.currency]={income:0,expenses:0,balance:0}),Ze.type==="income"?Tt[Ze.currency].income+=Ze.amount:Ze.type==="expense"&&(Tt[Ze.currency].expenses+=Ze.amount),Tt[Ze.currency].balance=Tt[Ze.currency].income-Tt[Ze.currency].expenses}),x(Object.entries(Tt).map(([Ze,$t])=>({code:Ze,...$t}))),console.log("✅ Wallet data loaded:",{balance:Ce,transactions:it.length,currencies:Object.keys(Tt).length})}catch(P){console.error("❌ Error fetching wallet data:",P),D.error("Failed to load wallet data")}finally{p(!1)}},Ut=async()=>{b(!0),await Jt(),b(!1),D.success("Wallet data refreshed!")},Ia=(P,ie)=>{Q({action:P,data:ie}),W(!0)},La=async()=>{if(!se||se.length<4){D.error("Please enter a valid PIN");return}try{const P=localStorage.getItem("token");if((await ye.post("/wallet/verify-pin",{pin:se,userId:t?._id},{headers:{Authorization:`Bearer ${P}`}})).data.verified){if(W(!1),Z(""),I){switch(I.action){case"withdraw":await J(I.data);break;case"transfer":await ss(I.data);break;case"invest":await gt(I.data);break}Q(null)}}else D.error("Invalid PIN")}catch(P){D.error("Security verification failed"),console.error("PIN verification error:",P)}},nr=P=>P>O.perTransaction?(D.error(`Transaction limit is KES ${O.perTransaction.toLocaleString()}`),!1):O.todaySpent+P>O.daily?(D.error(`Daily limit exceeded. Remaining: KES ${(O.daily-O.todaySpent).toLocaleString()}`),!1):!0,ys=async()=>{if(!B.amount||parseFloat(B.amount)<=0){D.error("Please enter a valid amount");return}if(parseFloat(B.amount)>i.availableFunds){D.error("Insufficient funds");return}nr(parseFloat(B.amount))&&Ia("withdraw",B)},J=async P=>{try{const ie=localStorage.getItem("token"),ue=await ye.post("/wallet/withdraw",{...P,amount:parseFloat(P.amount),userId:t?._id},{headers:{Authorization:`Bearer ${ie}`}});a&&r&&a.emit("wallet_action",{type:"withdraw",amount:parseFloat(P.amount),userId:t?._id}),D.success(`Withdrawal of KES ${P.amount} initiated successfully!`),_(!1),H({amount:"",method:"bank",bankAccount:"",description:""}),await Jt(),await Zt()}catch(ie){console.error("Withdrawal error:",ie),D.error("Withdrawal failed. Please try again.")}},De=async()=>{if(!M.amount||parseFloat(M.amount)<=0){D.error("Please enter a valid amount");return}try{const P=localStorage.getItem("token");await ye.post("/wallet/deposit",{...M,amount:parseFloat(M.amount),userId:t?._id},{headers:{Authorization:`Bearer ${P}`}}),D.success(`Deposit of KES ${M.amount} recorded successfully!`),U(!1),q({amount:"",method:"mpesa",reference:"",description:""}),await Jt()}catch(P){console.error("Deposit error:",P),D.error("Deposit failed. Please try again.")}},Ge=async()=>{if(!L.amount||parseFloat(L.amount)<=0){D.error("Please enter a valid amount");return}if(parseFloat(L.amount)>i.availableFunds){D.error("Insufficient funds for investment");return}Ia("invest",L)},gt=async P=>{try{const ie=localStorage.getItem("token"),ue=ks(parseFloat(P.amount),P.plan,parseInt(P.duration)),Re=await ye.post("/wallet/invest",{...P,amount:parseFloat(P.amount),expectedReturn:ue,userId:t?._id},{headers:{Authorization:`Bearer ${ie}`}});a&&r&&a.emit("wallet_action",{type:"invest",amount:parseFloat(P.amount),plan:P.plan,userId:t?._id}),D.success(`Investment of KES ${P.amount} created successfully!`),k(!1),re({amount:"",plan:"fixed",duration:"12",expectedReturn:""}),await Jt()}catch(ie){console.error("Investment error:",ie),D.error("Investment failed. Please try again.")}},jt=async()=>{if(!V.amount||parseFloat(V.amount)<=0){D.error("Please enter a valid amount");return}if(parseFloat(V.amount)>i.availableFunds){D.error("Insufficient funds");return}if(!V.recipient||!V.accountNumber){D.error("Please provide recipient details");return}nr(parseFloat(V.amount))&&Ia("transfer",V)},ss=async P=>{try{const ie=localStorage.getItem("token"),ue=await ye.post("/wallet/transfer",{...P,amount:parseFloat(P.amount),userId:t?._id},{headers:{Authorization:`Bearer ${ie}`}});a&&r&&a.emit("wallet_action",{type:"transfer",amount:parseFloat(P.amount),recipient:P.recipient,userId:t?._id}),D.success(`Transfer of KES ${P.amount} to ${P.recipient} successful!`),A(!1),ee({amount:"",recipient:"",accountNumber:"",description:""}),await Jt(),await Zt()}catch(ie){console.error("Transfer error:",ie),D.error("Transfer failed. Please try again.")}},ks=(P,ie,ue)=>{const $e={fixed:.08,flexible:.06,premium:.12,compound:.1}[ie]||.08,Oe=ue/12;return ie==="compound"?P*Math.pow(1+$e,Oe):P*(1+$e*Oe)},Ns=(P,ie)=>P==="income"?e.jsx(Tb,{className:"h-4 w-4 text-green-600"}):P==="expense"?e.jsx(kb,{className:"h-4 w-4 text-red-600"}):e.jsx(is,{className:"h-4 w-4 text-blue-600"}),Y=P=>{switch(P?.toLowerCase()){case"mpesa":return"📱";case"paypal":return"💙";case"bank":return"🏦";case"card":return"💳";case"stripe":return"💜";case"flutterwave":return"🟠";case"airtel":return"🔴";case"tkash":return"📲";case"paystack":return"🔵";case"pesapal":return"🟢";default:return"💰"}},de=P=>{switch(P?.toLowerCase()){case"completed":case"paid":case"delivered":return"bg-green-100 text-green-800";case"pending":case"processing":return"bg-yellow-100 text-yellow-800";case"failed":case"cancelled":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},le=c.filter(P=>S==="all"?!0:S==="income"?P.type==="income":S==="expense"?P.type==="expense":S==="pending"?P.type==="pending":!0);return h?e.jsx("div",{className:"p-6 max-w-7xl mx-auto",children:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto"}),e.jsx("p",{className:"text-muted-foreground",children:"Loading wallet data..."})]})})}):e.jsxs("div",{className:"p-6 max-w-7xl mx-auto space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold text-foreground flex items-center gap-3",children:[e.jsx(sd,{className:"h-8 w-8 text-primary"}),"My Wallet"]}),e.jsx("p",{className:"text-muted-foreground mt-2",children:"Track your financial transactions and manage your funds"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(R,{variant:"outline",onClick:()=>cs(!0),children:[e.jsx(Ea,{className:"mr-2 h-4 w-4"}),"Settings"]}),e.jsxs(R,{variant:"outline",onClick:Ut,disabled:g,children:[e.jsx(is,{className:`mr-2 h-4 w-4 ${g?"animate-spin":""}`}),g?"Refreshing...":"Refresh"]}),e.jsxs(R,{variant:"outline",children:[e.jsx(Pa,{className:"mr-2 h-4 w-4"}),"Export"]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs(Ft,{open:G,onOpenChange:U,children:[e.jsx(Na,{asChild:!0,children:e.jsx(K,{className:"cursor-pointer hover:shadow-lg transition-shadow hover:border-green-500",children:e.jsxs(X,{className:"p-6 text-center",children:[e.jsx("div",{className:"mx-auto w-12 h-12 rounded-full bg-green-100 flex items-center justify-center mb-3",children:e.jsx(Hs,{className:"h-6 w-6 text-green-600"})}),e.jsx("h3",{className:"font-semibold",children:"Deposit"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Add funds"})]})})}),e.jsxs(It,{children:[e.jsxs(Lt,{children:[e.jsx(Bt,{children:"Deposit Funds"}),e.jsx(es,{children:"Add money to your wallet"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(ae,{htmlFor:"deposit-amount",children:"Amount (KES) *"}),e.jsx(fe,{id:"deposit-amount",type:"number",placeholder:"Enter amount",value:M.amount,onChange:P=>q({...M,amount:P.target.value})})]}),e.jsxs("div",{children:[e.jsx(ae,{htmlFor:"deposit-method",children:"Payment Method *"}),e.jsxs(Ot,{value:M.method,onValueChange:P=>q({...M,method:P}),children:[e.jsx(Pt,{children:e.jsx(Rt,{})}),e.jsxs(Mt,{children:[e.jsx(Ee,{value:"mpesa",children:"M-Pesa"}),e.jsx(Ee,{value:"bank",children:"Bank Transfer"}),e.jsx(Ee,{value:"card",children:"Credit/Debit Card"}),e.jsx(Ee,{value:"paypal",children:"PayPal"})]})]})]}),e.jsxs("div",{children:[e.jsx(ae,{htmlFor:"deposit-reference",children:"Reference Number"}),e.jsx(fe,{id:"deposit-reference",placeholder:"Transaction reference",value:M.reference,onChange:P=>q({...M,reference:P.target.value})})]}),e.jsxs("div",{children:[e.jsx(ae,{htmlFor:"deposit-description",children:"Description (Optional)"}),e.jsx(Ts,{id:"deposit-description",placeholder:"Add notes",value:M.description,onChange:P=>q({...M,description:P.target.value})})]})]}),e.jsxs(Rs,{children:[e.jsx(R,{variant:"outline",onClick:()=>U(!1),children:"Cancel"}),e.jsx(R,{onClick:De,children:"Confirm Deposit"})]})]})]}),e.jsxs(Ft,{open:T,onOpenChange:_,children:[e.jsx(Na,{asChild:!0,children:e.jsx(K,{className:"cursor-pointer hover:shadow-lg transition-shadow hover:border-red-500",children:e.jsxs(X,{className:"p-6 text-center",children:[e.jsx("div",{className:"mx-auto w-12 h-12 rounded-full bg-red-100 flex items-center justify-center mb-3",children:e.jsx(Ru,{className:"h-6 w-6 text-red-600"})}),e.jsx("h3",{className:"font-semibold",children:"Withdraw"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Cash out"})]})})}),e.jsxs(It,{children:[e.jsxs(Lt,{children:[e.jsx(Bt,{children:"Withdraw Funds"}),e.jsxs(es,{children:["Available: KES ",i.availableFunds.toLocaleString()]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(ae,{htmlFor:"withdraw-amount",children:"Amount (KES) *"}),e.jsx(fe,{id:"withdraw-amount",type:"number",placeholder:"Enter amount",value:B.amount,onChange:P=>H({...B,amount:P.target.value})})]}),e.jsxs("div",{children:[e.jsx(ae,{htmlFor:"withdraw-method",children:"Withdrawal Method *"}),e.jsxs(Ot,{value:B.method,onValueChange:P=>H({...B,method:P}),children:[e.jsx(Pt,{children:e.jsx(Rt,{})}),e.jsxs(Mt,{children:[e.jsx(Ee,{value:"bank",children:"Bank Transfer"}),e.jsx(Ee,{value:"mpesa",children:"M-Pesa"}),e.jsx(Ee,{value:"paypal",children:"PayPal"})]})]})]}),e.jsxs("div",{children:[e.jsx(ae,{htmlFor:"withdraw-account",children:"Bank Account / Phone Number *"}),e.jsx(fe,{id:"withdraw-account",placeholder:"Account details",value:B.bankAccount,onChange:P=>H({...B,bankAccount:P.target.value})})]}),e.jsxs("div",{children:[e.jsx(ae,{htmlFor:"withdraw-description",children:"Description (Optional)"}),e.jsx(Ts,{id:"withdraw-description",placeholder:"Add notes",value:B.description,onChange:P=>H({...B,description:P.target.value})})]})]}),e.jsxs(Rs,{children:[e.jsx(R,{variant:"outline",onClick:()=>_(!1),children:"Cancel"}),e.jsx(R,{onClick:ys,variant:"destructive",children:"Confirm Withdrawal"})]})]})]}),e.jsxs(Ft,{open:E,onOpenChange:A,children:[e.jsx(Na,{asChild:!0,children:e.jsx(K,{className:"cursor-pointer hover:shadow-lg transition-shadow hover:border-blue-500",children:e.jsxs(X,{className:"p-6 text-center",children:[e.jsx("div",{className:"mx-auto w-12 h-12 rounded-full bg-blue-100 flex items-center justify-center mb-3",children:e.jsx(__,{className:"h-6 w-6 text-blue-600"})}),e.jsx("h3",{className:"font-semibold",children:"Transfer"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Send money"})]})})}),e.jsxs(It,{children:[e.jsxs(Lt,{children:[e.jsx(Bt,{children:"Transfer Funds"}),e.jsx(es,{children:"Send money to another account"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(ae,{htmlFor:"transfer-amount",children:"Amount (KES) *"}),e.jsx(fe,{id:"transfer-amount",type:"number",placeholder:"Enter amount",value:V.amount,onChange:P=>ee({...V,amount:P.target.value})})]}),e.jsxs("div",{children:[e.jsx(ae,{htmlFor:"transfer-recipient",children:"Recipient Name *"}),e.jsx(fe,{id:"transfer-recipient",placeholder:"Full name",value:V.recipient,onChange:P=>ee({...V,recipient:P.target.value})})]}),e.jsxs("div",{children:[e.jsx(ae,{htmlFor:"transfer-account",children:"Account Number *"}),e.jsx(fe,{id:"transfer-account",placeholder:"Account or phone number",value:V.accountNumber,onChange:P=>ee({...V,accountNumber:P.target.value})})]}),e.jsxs("div",{children:[e.jsx(ae,{htmlFor:"transfer-description",children:"Description (Optional)"}),e.jsx(Ts,{id:"transfer-description",placeholder:"Add notes",value:V.description,onChange:P=>ee({...V,description:P.target.value})})]})]}),e.jsxs(Rs,{children:[e.jsx(R,{variant:"outline",onClick:()=>A(!1),children:"Cancel"}),e.jsx(R,{onClick:jt,children:"Send Transfer"})]})]})]}),e.jsxs(Ft,{open:F,onOpenChange:k,children:[e.jsx(Na,{asChild:!0,children:e.jsx(K,{className:"cursor-pointer hover:shadow-lg transition-shadow hover:border-purple-500",children:e.jsxs(X,{className:"p-6 text-center",children:[e.jsx("div",{className:"mx-auto w-12 h-12 rounded-full bg-purple-100 flex items-center justify-center mb-3",children:e.jsx(D_,{className:"h-6 w-6 text-purple-600"})}),e.jsx("h3",{className:"font-semibold",children:"Invest"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Grow wealth"})]})})}),e.jsxs(It,{children:[e.jsxs(Lt,{children:[e.jsx(Bt,{children:"Create Investment"}),e.jsx(es,{children:"Invest your funds and earn returns"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(ae,{htmlFor:"invest-amount",children:"Amount (KES) *"}),e.jsx(fe,{id:"invest-amount",type:"number",placeholder:"Enter amount",value:L.amount,onChange:P=>re({...L,amount:P.target.value})})]}),e.jsxs("div",{children:[e.jsx(ae,{htmlFor:"invest-plan",children:"Investment Plan *"}),e.jsxs(Ot,{value:L.plan,onValueChange:P=>re({...L,plan:P}),children:[e.jsx(Pt,{children:e.jsx(Rt,{})}),e.jsxs(Mt,{children:[e.jsx(Ee,{value:"fixed",children:"Fixed Deposit (8% p.a.)"}),e.jsx(Ee,{value:"flexible",children:"Flexible Savings (6% p.a.)"}),e.jsx(Ee,{value:"premium",children:"Premium Growth (12% p.a.)"}),e.jsx(Ee,{value:"compound",children:"Compound Interest (10% p.a.)"})]})]})]}),e.jsxs("div",{children:[e.jsx(ae,{htmlFor:"invest-duration",children:"Duration (Months) *"}),e.jsxs(Ot,{value:L.duration,onValueChange:P=>re({...L,duration:P}),children:[e.jsx(Pt,{children:e.jsx(Rt,{})}),e.jsxs(Mt,{children:[e.jsx(Ee,{value:"3",children:"3 Months"}),e.jsx(Ee,{value:"6",children:"6 Months"}),e.jsx(Ee,{value:"12",children:"12 Months"}),e.jsx(Ee,{value:"24",children:"24 Months"}),e.jsx(Ee,{value:"36",children:"36 Months"})]})]})]}),L.amount&&e.jsxs("div",{className:"p-4 bg-muted rounded-lg",children:[e.jsx("p",{className:"text-sm font-medium mb-1",children:"Expected Return:"}),e.jsxs("p",{className:"text-2xl font-bold text-green-600",children:["KES ",ks(parseFloat(L.amount)||0,L.plan,parseInt(L.duration)).toLocaleString(void 0,{maximumFractionDigits:2})]}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Profit: KES ",(ks(parseFloat(L.amount)||0,L.plan,parseInt(L.duration))-(parseFloat(L.amount)||0)).toLocaleString(void 0,{maximumFractionDigits:2})]})]})]}),e.jsxs(Rs,{children:[e.jsx(R,{variant:"outline",onClick:()=>k(!1),children:"Cancel"}),e.jsx(R,{onClick:Ge,children:"Start Investment"})]})]})]})]}),e.jsx(Ft,{open:me,onOpenChange:W,children:e.jsxs(It,{children:[e.jsxs(Lt,{children:[e.jsxs(Bt,{className:"flex items-center gap-2",children:[e.jsx(ta,{className:"h-5 w-5 text-primary"}),"Security Verification Required"]}),e.jsx(es,{children:"Enter your 4-digit security PIN to continue"})]}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{children:[e.jsx(ae,{htmlFor:"security-pin",children:"Security PIN *"}),e.jsx(fe,{id:"security-pin",type:"password",placeholder:"Enter 4-digit PIN",maxLength:4,value:se,onChange:P=>Z(P.target.value.replace(/\D/g,"")),className:"text-center text-2xl tracking-widest"})]}),I&&e.jsxs("div",{className:"p-4 bg-muted rounded-lg",children:[e.jsx("p",{className:"text-sm font-medium mb-1",children:"Pending Action:"}),e.jsx("p",{className:"text-lg font-bold capitalize",children:I.action}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Amount: KES ",parseFloat(I.data?.amount||0).toLocaleString()]})]}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:[e.jsx("p",{children:"🔒 Your PIN is encrypted and secure"}),e.jsx("p",{children:"💡 Forgot PIN? Contact support"})]})]}),e.jsxs(Rs,{children:[e.jsx(R,{variant:"outline",onClick:()=>{W(!1),Z(""),Q(null)},children:"Cancel"}),e.jsxs(R,{onClick:La,disabled:se.length<4,children:[e.jsx(vr,{className:"mr-2 h-4 w-4"}),"Verify & Continue"]})]})]})}),e.jsx(Ft,{open:As,onOpenChange:cs,children:e.jsxs(It,{className:"sm:max-w-[600px] max-h-[90vh] overflow-y-auto",children:[e.jsxs(Lt,{children:[e.jsxs(Bt,{className:"flex items-center gap-2",children:[e.jsx(Ea,{className:"h-5 w-5 text-primary"}),"Wallet Settings"]}),e.jsx(es,{children:"Manage your wallet preferences and security settings"})]}),e.jsxs("div",{className:"space-y-6 py-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-3",children:"Notifications"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(ae,{htmlFor:"tx-notif",children:"Transaction Notifications"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Get notified for all transactions"})]}),e.jsx("input",{type:"checkbox",id:"tx-notif",checked:Te.transactionNotifications,onChange:P=>Ne({...Te,transactionNotifications:P.target.checked}),className:"h-4 w-4"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(ae,{htmlFor:"email-notif",children:"Email Notifications"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Receive transaction alerts via email"})]}),e.jsx("input",{type:"checkbox",id:"email-notif",checked:Te.emailNotifications,onChange:P=>Ne({...Te,emailNotifications:P.target.checked}),className:"h-4 w-4"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(ae,{htmlFor:"sms-notif",children:"SMS Notifications"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Get SMS alerts for transactions"})]}),e.jsx("input",{type:"checkbox",id:"sms-notif",checked:Te.smsNotifications,onChange:P=>Ne({...Te,smsNotifications:P.target.checked}),className:"h-4 w-4"})]})]})]}),e.jsxs("div",{className:"border-t pt-4",children:[e.jsx("h3",{className:"font-semibold mb-3",children:"Security"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(ae,{htmlFor:"2fa",children:"Two-Factor Authentication"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Extra security for your wallet"})]}),e.jsx("input",{type:"checkbox",id:"2fa",checked:Te.twoFactorAuth,onChange:P=>Ne({...Te,twoFactorAuth:P.target.checked}),className:"h-4 w-4"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(ae,{htmlFor:"auto-save",children:"Auto-Save Receipts"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Automatically save transaction receipts"})]}),e.jsx("input",{type:"checkbox",id:"auto-save",checked:Te.autoSaveReceipts,onChange:P=>Ne({...Te,autoSaveReceipts:P.target.checked}),className:"h-4 w-4"})]})]})]}),e.jsxs("div",{className:"border-t pt-4",children:[e.jsx("h3",{className:"font-semibold mb-3",children:"Preferences"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx(ae,{htmlFor:"currency",children:"Default Currency"}),e.jsxs(Ot,{value:Te.currency,onValueChange:P=>Ne({...Te,currency:P}),children:[e.jsx(Pt,{children:e.jsx(Rt,{})}),e.jsxs(Mt,{children:[e.jsx(Ee,{value:"KES",children:"🇰🇪 KES - Kenyan Shilling"}),e.jsx(Ee,{value:"USD",children:"🇺🇸 USD - US Dollar"}),e.jsx(Ee,{value:"EUR",children:"🇪🇺 EUR - Euro"}),e.jsx(Ee,{value:"GBP",children:"🇬🇧 GBP - British Pound"}),e.jsx(Ee,{value:"UGX",children:"🇺🇬 UGX - Ugandan Shilling"}),e.jsx(Ee,{value:"TZS",children:"🇹🇿 TZS - Tanzanian Shilling"})]})]})]}),e.jsxs("div",{children:[e.jsx(ae,{htmlFor:"language",children:"Language"}),e.jsxs(Ot,{value:Te.language,onValueChange:P=>Ne({...Te,language:P}),children:[e.jsx(Pt,{children:e.jsx(Rt,{})}),e.jsxs(Mt,{children:[e.jsx(Ee,{value:"en",children:"English"}),e.jsx(Ee,{value:"sw",children:"Swahili"}),e.jsx(Ee,{value:"fr",children:"French"})]})]})]}),e.jsxs("div",{children:[e.jsx(ae,{htmlFor:"theme",children:"Theme"}),e.jsxs(Ot,{value:Te.theme,onValueChange:P=>Ne({...Te,theme:P}),children:[e.jsx(Pt,{children:e.jsx(Rt,{})}),e.jsxs(Mt,{children:[e.jsx(Ee,{value:"auto",children:"Auto (System)"}),e.jsx(Ee,{value:"light",children:"Light"}),e.jsx(Ee,{value:"dark",children:"Dark"})]})]})]})]})]}),e.jsxs("div",{className:"border-t pt-4",children:[e.jsx("h3",{className:"font-semibold mb-3",children:"Transaction Limits"}),e.jsxs("div",{className:"p-4 bg-muted rounded-lg space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Daily Limit:"}),e.jsxs("span",{className:"font-medium",children:["KES ",O.daily.toLocaleString()]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Per Transaction:"}),e.jsxs("span",{className:"font-medium",children:["KES ",O.perTransaction.toLocaleString()]})]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:"Contact support to increase limits"})]})]})]}),e.jsxs(Rs,{children:[e.jsx(R,{variant:"outline",onClick:()=>cs(!1),children:"Cancel"}),e.jsxs(R,{onClick:Ye,children:[e.jsx(ai,{className:"mr-2 h-4 w-4"}),"Save Settings"]})]})]})}),e.jsx(Ft,{open:hs,onOpenChange:fs,children:e.jsxs(It,{className:"sm:max-w-[500px]",children:[e.jsxs(Lt,{children:[e.jsxs(Bt,{className:"flex items-center gap-2",children:[e.jsx(Dc,{className:"h-5 w-5 text-primary"}),"Link Payment Account"]}),e.jsx(es,{children:"Connect your external payment accounts for seamless transfers"})]}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{children:[e.jsx(ae,{htmlFor:"provider",children:"Payment Provider *"}),e.jsxs(Ot,{value:he.provider,onValueChange:P=>Ue({...he,provider:P}),children:[e.jsx(Pt,{children:e.jsx(Rt,{placeholder:"Select provider"})}),e.jsxs(Mt,{children:[e.jsx(Ee,{value:"mpesa",children:"📱 M-Pesa (Safaricom)"}),e.jsx(Ee,{value:"airtel",children:"🔴 Airtel Money"}),e.jsx(Ee,{value:"tkash",children:"📲 T-Kash (Telkom)"}),e.jsx(Ee,{value:"paypal",children:"💙 PayPal"}),e.jsx(Ee,{value:"stripe",children:"💜 Stripe"}),e.jsx(Ee,{value:"flutterwave",children:"🟠 Flutterwave"}),e.jsx(Ee,{value:"paystack",children:"🔵 Paystack"}),e.jsx(Ee,{value:"pesapal",children:"🟢 PesaPal"}),e.jsx(Ee,{value:"bank",children:"🏦 Bank Account"}),e.jsx(Ee,{value:"card",children:"💳 Credit/Debit Card"})]})]})]}),he.provider==="mpesa"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx(ae,{htmlFor:"mpesa-phone",children:"M-Pesa Phone Number *"}),e.jsx(fe,{id:"mpesa-phone",placeholder:"+254 700 000 000",value:he.phoneNumber,onChange:P=>Ue({...he,phoneNumber:P.target.value})})]}),e.jsxs("div",{children:[e.jsx(ae,{htmlFor:"mpesa-name",children:"Account Name *"}),e.jsx(fe,{id:"mpesa-name",placeholder:"Full name as registered",value:he.accountName,onChange:P=>Ue({...he,accountName:P.target.value})})]})]}),he.provider==="paypal"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx(ae,{htmlFor:"paypal-email",children:"PayPal Email *"}),e.jsx(fe,{id:"paypal-email",type:"email",placeholder:"your.email@example.com",value:he.email,onChange:P=>Ue({...he,email:P.target.value})})]}),e.jsxs("div",{children:[e.jsx(ae,{htmlFor:"paypal-name",children:"Account Name *"}),e.jsx(fe,{id:"paypal-name",placeholder:"Full name",value:he.accountName,onChange:P=>Ue({...he,accountName:P.target.value})})]})]}),he.provider==="airtel"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx(ae,{htmlFor:"airtel-phone",children:"Airtel Money Phone Number *"}),e.jsx(fe,{id:"airtel-phone",placeholder:"+254 700 000 000",value:he.phoneNumber,onChange:P=>Ue({...he,phoneNumber:P.target.value})})]}),e.jsxs("div",{children:[e.jsx(ae,{htmlFor:"airtel-name",children:"Account Name *"}),e.jsx(fe,{id:"airtel-name",placeholder:"Full name as registered",value:he.accountName,onChange:P=>Ue({...he,accountName:P.target.value})})]})]}),he.provider==="tkash"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx(ae,{htmlFor:"tkash-phone",children:"T-Kash Phone Number *"}),e.jsx(fe,{id:"tkash-phone",placeholder:"+254 700 000 000",value:he.phoneNumber,onChange:P=>Ue({...he,phoneNumber:P.target.value})})]}),e.jsxs("div",{children:[e.jsx(ae,{htmlFor:"tkash-name",children:"Account Name *"}),e.jsx(fe,{id:"tkash-name",placeholder:"Full name as registered",value:he.accountName,onChange:P=>Ue({...he,accountName:P.target.value})})]})]}),he.provider==="stripe"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx(ae,{htmlFor:"stripe-email",children:"Stripe Email *"}),e.jsx(fe,{id:"stripe-email",type:"email",placeholder:"your.email@example.com",value:he.email,onChange:P=>Ue({...he,email:P.target.value})})]}),e.jsxs("div",{children:[e.jsx(ae,{htmlFor:"stripe-account",children:"Stripe Account ID (Optional)"}),e.jsx(fe,{id:"stripe-account",placeholder:"acct_xxxxxxxxxxxx",value:he.accountNumber,onChange:P=>Ue({...he,accountNumber:P.target.value})})]}),e.jsxs("div",{children:[e.jsx(ae,{htmlFor:"stripe-name",children:"Account Name *"}),e.jsx(fe,{id:"stripe-name",placeholder:"Full name",value:he.accountName,onChange:P=>Ue({...he,accountName:P.target.value})})]})]}),he.provider==="flutterwave"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx(ae,{htmlFor:"flutterwave-email",children:"Flutterwave Email *"}),e.jsx(fe,{id:"flutterwave-email",type:"email",placeholder:"your.email@example.com",value:he.email,onChange:P=>Ue({...he,email:P.target.value})})]}),e.jsxs("div",{children:[e.jsx(ae,{htmlFor:"flutterwave-phone",children:"Phone Number *"}),e.jsx(fe,{id:"flutterwave-phone",placeholder:"+254 700 000 000",value:he.phoneNumber,onChange:P=>Ue({...he,phoneNumber:P.target.value})})]}),e.jsxs("div",{children:[e.jsx(ae,{htmlFor:"flutterwave-name",children:"Account Name *"}),e.jsx(fe,{id:"flutterwave-name",placeholder:"Full name",value:he.accountName,onChange:P=>Ue({...he,accountName:P.target.value})})]})]}),he.provider==="paystack"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx(ae,{htmlFor:"paystack-email",children:"Paystack Email *"}),e.jsx(fe,{id:"paystack-email",type:"email",placeholder:"your.email@example.com",value:he.email,onChange:P=>Ue({...he,email:P.target.value})})]}),e.jsxs("div",{children:[e.jsx(ae,{htmlFor:"paystack-name",children:"Account Name *"}),e.jsx(fe,{id:"paystack-name",placeholder:"Full name",value:he.accountName,onChange:P=>Ue({...he,accountName:P.target.value})})]})]}),he.provider==="pesapal"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx(ae,{htmlFor:"pesapal-email",children:"PesaPal Email *"}),e.jsx(fe,{id:"pesapal-email",type:"email",placeholder:"your.email@example.com",value:he.email,onChange:P=>Ue({...he,email:P.target.value})})]}),e.jsxs("div",{children:[e.jsx(ae,{htmlFor:"pesapal-phone",children:"Phone Number *"}),e.jsx(fe,{id:"pesapal-phone",placeholder:"+254 700 000 000",value:he.phoneNumber,onChange:P=>Ue({...he,phoneNumber:P.target.value})})]}),e.jsxs("div",{children:[e.jsx(ae,{htmlFor:"pesapal-name",children:"Account Name *"}),e.jsx(fe,{id:"pesapal-name",placeholder:"Full name",value:he.accountName,onChange:P=>Ue({...he,accountName:P.target.value})})]})]}),he.provider==="bank"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx(ae,{htmlFor:"bank-name",children:"Bank Name *"}),e.jsx(fe,{id:"bank-name",placeholder:"e.g., Equity Bank",value:he.accountType,onChange:P=>Ue({...he,accountType:P.target.value})})]}),e.jsxs("div",{children:[e.jsx(ae,{htmlFor:"bank-account",children:"Account Number *"}),e.jsx(fe,{id:"bank-account",placeholder:"Account number",value:he.accountNumber,onChange:P=>Ue({...he,accountNumber:P.target.value})})]}),e.jsxs("div",{children:[e.jsx(ae,{htmlFor:"bank-account-name",children:"Account Name *"}),e.jsx(fe,{id:"bank-account-name",placeholder:"Account holder name",value:he.accountName,onChange:P=>Ue({...he,accountName:P.target.value})})]})]}),he.provider==="card"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx(ae,{htmlFor:"card-number",children:"Card Number *"}),e.jsx(fe,{id:"card-number",placeholder:"1234 5678 9012 3456",maxLength:19,value:he.accountNumber,onChange:P=>Ue({...he,accountNumber:P.target.value})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(ae,{htmlFor:"card-expiry",children:"Expiry Date *"}),e.jsx(fe,{id:"card-expiry",placeholder:"MM/YY",maxLength:5})]}),e.jsxs("div",{children:[e.jsx(ae,{htmlFor:"card-cvv",children:"CVV *"}),e.jsx(fe,{id:"card-cvv",type:"password",placeholder:"123",maxLength:3})]})]}),e.jsxs("div",{children:[e.jsx(ae,{htmlFor:"card-name",children:"Card Holder Name *"}),e.jsx(fe,{id:"card-name",placeholder:"Name on card",value:he.accountName,onChange:P=>Ue({...he,accountName:P.target.value})})]})]}),e.jsxs("div",{className:"p-3 bg-blue-50 rounded-lg text-sm text-blue-700",children:[e.jsx("p",{className:"font-medium mb-1",children:"🔒 Secure Connection"}),e.jsx("p",{className:"text-xs",children:"Your payment information is encrypted and secure. We never store sensitive data."})]})]}),e.jsxs(Rs,{children:[e.jsx(R,{variant:"outline",onClick:()=>fs(!1),children:"Cancel"}),e.jsxs(R,{onClick:pt,children:[e.jsx(Dc,{className:"mr-2 h-4 w-4"}),"Link Account"]})]})]})}),e.jsx(Ft,{open:Ps,onOpenChange:ps,children:e.jsxs(It,{className:"sm:max-w-[500px]",children:[e.jsxs(Lt,{children:[e.jsxs(Bt,{className:"flex items-center gap-2",children:[e.jsx(Ma,{className:"h-5 w-5 text-primary"}),"External Transfer"]}),e.jsx(es,{children:"Transfer funds to your connected payment accounts"})]}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{children:[e.jsx(ae,{htmlFor:"transfer-account",children:"Destination Account *"}),e.jsxs(Ot,{value:st.accountId,onValueChange:P=>{const ie=_t.find(ue=>ue._id===P);Ct({...st,accountId:P,provider:ie?.provider||""})},children:[e.jsx(Pt,{children:e.jsx(Rt,{placeholder:"Select connected account"})}),e.jsx(Mt,{children:_t.map(P=>e.jsxs(Ee,{value:P._id,children:[Y(P.provider)," ",P.provider.toUpperCase()," - ",P.accountName||P.phoneNumber||P.email]},P._id))})]})]}),_t.length===0&&e.jsxs("div",{className:"p-4 bg-yellow-50 rounded-lg",children:[e.jsx("p",{className:"text-sm text-yellow-800",children:"No connected accounts found. Please link an account first."}),e.jsx(R,{size:"sm",variant:"outline",className:"mt-2",onClick:()=>{ps(!1),fs(!0)},children:"Link Account"})]}),e.jsxs("div",{children:[e.jsx(ae,{htmlFor:"external-amount",children:"Amount (KES) *"}),e.jsx(fe,{id:"external-amount",type:"number",placeholder:"Enter amount",value:st.amount,onChange:P=>Ct({...st,amount:P.target.value})}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Available: KES ",i.availableFunds.toLocaleString()]})]}),e.jsxs("div",{children:[e.jsx(ae,{htmlFor:"external-description",children:"Description (Optional)"}),e.jsx(Ts,{id:"external-description",placeholder:"Add notes about this transfer",value:st.description,onChange:P=>Ct({...st,description:P.target.value})})]}),st.provider&&e.jsxs("div",{className:"p-4 bg-muted rounded-lg",children:[e.jsx("p",{className:"text-sm font-medium mb-2",children:"Transfer Summary:"}),e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("p",{children:["Provider: ",st.provider.toUpperCase()]}),e.jsxs("p",{children:["Amount: KES ",parseFloat(st.amount||0).toLocaleString()]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:"Processing time: 1-24 hours"})]})]})]}),e.jsxs(Rs,{children:[e.jsx(R,{variant:"outline",onClick:()=>ps(!1),children:"Cancel"}),e.jsxs(R,{onClick:yt,disabled:_t.length===0,children:[e.jsx(Ma,{className:"mr-2 h-4 w-4"}),"Send Transfer"]})]})]})}),_t.length>0&&e.jsxs(K,{children:[e.jsx(pe,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs(ge,{className:"flex items-center gap-2",children:[e.jsx(Dc,{className:"h-5 w-5"}),"Connected Accounts"]}),e.jsx(lt,{children:"Manage your linked payment accounts"})]}),e.jsxs(R,{variant:"outline",size:"sm",onClick:()=>fs(!0),children:[e.jsx(Hs,{className:"mr-2 h-4 w-4"}),"Link Account"]})]})}),e.jsx(X,{children:e.jsx("div",{className:"space-y-3",children:_t.map(P=>e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg hover:bg-muted/50 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"text-3xl",children:Y(P.provider)}),e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium flex items-center gap-2",children:[P.provider.toUpperCase(),P.verified&&e.jsx(ai,{className:"h-4 w-4 text-green-600"})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:P.accountName||P.phoneNumber||P.email||P.accountNumber}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Linked ",new Date(P.createdAt).toLocaleDateString()]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(R,{size:"sm",variant:"outline",onClick:()=>{Ct({...st,accountId:P._id,provider:P.provider}),ps(!0)},children:[e.jsx(Ma,{className:"h-4 w-4 mr-1"}),"Transfer"]}),e.jsx(R,{size:"sm",variant:"ghost",onClick:()=>Kt(P._id),children:e.jsx(O_,{className:"h-4 w-4"})})]})]},P._id))})})]}),_t.length===0&&e.jsx(K,{className:"border-dashed",children:e.jsxs(X,{className:"p-8 text-center",children:[e.jsx(Dc,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),e.jsx("h3",{className:"font-semibold mb-2",children:"Connect Payment Accounts"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Link your M-Pesa, PayPal, or Bank accounts for quick transfers"}),e.jsxs(R,{onClick:()=>fs(!0),children:[e.jsx(Hs,{className:"mr-2 h-4 w-4"}),"Link Your First Account"]})]})}),e.jsx(K,{className:"border-l-4 border-l-orange-500",children:e.jsxs(X,{className:"p-4",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"font-semibold text-sm mb-2 flex items-center gap-2",children:[e.jsx(ta,{className:"h-4 w-4 text-orange-500"}),"Transaction Limits & Security"]}),e.jsxs("div",{className:"space-y-1 text-sm text-muted-foreground",children:[e.jsxs("p",{children:["Daily Limit: KES ",O.daily.toLocaleString()]}),e.jsxs("p",{children:["Per Transaction: KES ",O.perTransaction.toLocaleString()]}),e.jsxs("p",{children:["Today's Spending: KES ",O.todaySpent.toLocaleString()]}),e.jsxs("p",{className:"text-xs text-green-600",children:["Remaining: KES ",(O.daily-O.todaySpent).toLocaleString()]})]})]}),e.jsx(_e,{variant:"outline",className:"bg-green-50 text-green-700 border-green-200",children:r?"🟢 Live":"🔴 Offline"})]}),e.jsx(Tr,{value:O.todaySpent/O.daily*100,className:"mt-3 h-2"})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsxs(K,{className:"relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-gradient-to-br from-primary/20 to-transparent rounded-full -mr-16 -mt-16"}),e.jsx(pe,{className:"pb-2",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(ge,{className:"text-sm font-medium text-muted-foreground",children:"Total Balance"}),e.jsx(R,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:()=>y(!N),children:N?e.jsx(la,{className:"h-4 w-4"}):e.jsx(Eo,{className:"h-4 w-4"})})]})}),e.jsxs(X,{children:[e.jsx("div",{className:"text-3xl font-bold",children:N?`KES ${i.balance.toLocaleString()}`:"••••••"}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-2",children:["Available funds: KES ",i.availableFunds.toLocaleString()]})]})]}),e.jsxs(K,{children:[e.jsx(pe,{className:"pb-2",children:e.jsxs(ge,{className:"text-sm font-medium text-muted-foreground flex items-center gap-2",children:[e.jsx(Tb,{className:"h-4 w-4 text-green-600"}),"Total Income"]})}),e.jsxs(X,{children:[e.jsxs("div",{className:"text-3xl font-bold text-green-600",children:["KES ",i.totalIncome.toLocaleString()]}),e.jsxs("div",{className:"mt-2 flex items-center text-xs text-green-600",children:[e.jsx(Is,{className:"h-3 w-3 mr-1"}),"From sales & payments"]})]})]}),e.jsxs(K,{children:[e.jsx(pe,{className:"pb-2",children:e.jsxs(ge,{className:"text-sm font-medium text-muted-foreground flex items-center gap-2",children:[e.jsx(kb,{className:"h-4 w-4 text-red-600"}),"Total Expenses"]})}),e.jsxs(X,{children:[e.jsxs("div",{className:"text-3xl font-bold text-red-600",children:["KES ",i.totalExpenses.toLocaleString()]}),e.jsxs("div",{className:"mt-2 flex items-center text-xs text-red-600",children:[e.jsx(gi,{className:"h-3 w-3 mr-1"}),"Payments & refunds"]})]})]}),e.jsxs(K,{children:[e.jsx(pe,{className:"pb-2",children:e.jsxs(ge,{className:"text-sm font-medium text-muted-foreground flex items-center gap-2",children:[e.jsx(og,{className:"h-4 w-4 text-orange-600"}),"Pending Payments"]})}),e.jsxs(X,{children:[e.jsxs("div",{className:"text-3xl font-bold text-orange-600",children:["KES ",i.pendingPayments.toLocaleString()]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:"Awaiting payment"})]})]})]}),f.length>0&&e.jsxs(K,{children:[e.jsxs(pe,{children:[e.jsx(ge,{children:"Currency Breakdown"}),e.jsx(lt,{children:"Your balance across different currencies"})]}),e.jsx(X,{children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:f.map(P=>e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-muted-foreground",children:P.code}),e.jsx(_e,{variant:"outline",children:P.code})]}),e.jsx("div",{className:"text-2xl font-bold mb-1",children:P.balance.toLocaleString()}),e.jsxs("div",{className:"flex items-center justify-between text-xs text-muted-foreground",children:[e.jsxs("span",{className:"text-green-600",children:["↓ ",P.income.toLocaleString()]}),e.jsxs("span",{className:"text-red-600",children:["↑ ",P.expenses.toLocaleString()]})]})]},P.code))})})]}),e.jsxs(K,{children:[e.jsx(pe,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(ge,{children:"Transactions"}),e.jsx(lt,{children:"View all your financial activities"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(R,{variant:S==="all"?"default":"outline",size:"sm",onClick:()=>C("all"),children:"All"}),e.jsxs(R,{variant:S==="income"?"default":"outline",size:"sm",onClick:()=>C("income"),children:[e.jsx(Hs,{className:"h-3 w-3 mr-1"}),"Income"]}),e.jsxs(R,{variant:S==="expense"?"default":"outline",size:"sm",onClick:()=>C("expense"),children:[e.jsx(Ru,{className:"h-3 w-3 mr-1"}),"Expenses"]})]})]})}),e.jsx(X,{children:e.jsx(_r,{className:"h-[500px]",children:le.length===0?e.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[e.jsx(og,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"No transactions found"})]}):e.jsx("div",{className:"space-y-2",children:le.map(P=>e.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg border hover:bg-muted/50 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:`p-2 rounded-lg ${P.type==="income"?"bg-green-100":P.type==="expense"?"bg-red-100":"bg-blue-100"}`,children:Ns(P.type,P.category)}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:P.description}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx(_e,{variant:"secondary",className:"text-xs",children:P.category}),e.jsx(_e,{className:`text-xs ${de(P.status)}`,children:P.status}),e.jsx("span",{className:"text-xs text-muted-foreground",children:P.method})]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:`text-lg font-bold ${P.type==="income"?"text-green-600":P.type==="expense"?"text-red-600":"text-orange-600"}`,children:[P.type==="income"?"+":P.type==="expense"?"-":"",P.currency," ",P.amount.toLocaleString()]}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[P.date.toLocaleDateString()," ",P.date.toLocaleTimeString()]})]})]},P.id))})})})]})]})},e2={Electronics:["Smartphones","Laptops","Tablets","Accessories","Audio","Cameras","Gaming","Wearables","Smart Home"],"Clothing & Fashion":["Men","Women","Kids","Shoes","Accessories","Sportswear","Jewelry","Watches","Bags"],"Home & Garden":["Furniture","Decor","Kitchen","Bedding","Garden","Tools","Lighting","Storage","Bathroom"],"Books & Media":["Fiction","Non-Fiction","Educational","Comics","Magazines","E-books","Audiobooks"],"Sports & Outdoors":["Equipment","Apparel","Outdoor","Fitness","Team Sports","Camping","Cycling","Water Sports"],"Toys & Games":["Action Figures","Educational","Puzzles","Outdoor","Electronic","Board Games","Dolls","Building Sets"],"Beauty & Personal Care":["Skincare","Makeup","Haircare","Fragrances","Tools","Bath & Body","Nail Care","Men Grooming"],"Food & Beverages":["Snacks","Beverages","Bakery","Organic","Frozen","Fresh Produce","Dairy","Meat","Canned Goods"],"Health & Wellness":["Vitamins","Supplements","Personal Care","Medical Supplies","Fitness Equipment","Yoga","Diet"],Automotive:["Parts","Accessories","Maintenance","Electronics","Tires","Oil & Fluids","Tools"],"Baby & Kids":["Diapers","Baby Food","Toys","Clothing","Furniture","Safety","Strollers","Car Seats"],"Pet Supplies":["Pet Food","Toys","Accessories","Health","Grooming","Beds","Leashes","Aquariums"],"Office & Stationery":["Paper","Pens","Notebooks","Furniture","Electronics","Art Supplies","Filing"],"Arts & Crafts":["Painting","Drawing","Sewing","Knitting","Scrapbooking","Jewelry Making","Woodwork"],"Music & Instruments":["Guitars","Keyboards","Drums","Accessories","DJ Equipment","Sheet Music"],"Tools & Hardware":["Hand Tools","Power Tools","Electrical","Plumbing","Safety","Measuring","Fasteners"],"Jewelry & Watches":["Rings","Necklaces","Bracelets","Earrings","Watches","Accessories"],Appliances:["Kitchen","Laundry","Cleaning","Heating","Cooling","Small Appliances"],Furniture:["Living Room","Bedroom","Office","Outdoor","Storage","Kids"],Photography:["Cameras","Lenses","Tripods","Lighting","Bags","Accessories","Drones"],"Party & Events":["Decorations","Supplies","Balloons","Costumes","Tableware"],"Luggage & Travel":["Suitcases","Backpacks","Travel Accessories","Organizers"],"Industrial & Scientific":["Lab Equipment","Safety","Testing","Machinery","Raw Materials"],Other:["Custom Category"]},Xz=["piece","kg","g","liter","ml","pack","box","dozen"],Qz=["Generic","Samsung","Apple","Sony","Nike","Adidas","HP","Dell","Lenovo","Canon","Nikon","LG","Panasonic","Philips","Xiaomi"],Zz=["active","inactive","draft","out-of-stock"],Jz=["new","refurbished","used-like-new","used-good","used-acceptable"],_k=({isOpen:t,onClose:s,onSubmit:a,initialData:r=null,mode:i="add"})=>{const o=()=>({name:"",description:"",price:"",category:"",subcategory:"",brand:"",sku:"",barcode:"",stock:"",minStock:"",unit:"piece",weight:"",dimensions:{length:"",width:"",height:""},condition:"new",status:"active",supplier:"",cost:"",taxRate:"16",featured:!1,freeShipping:!1,allowBackorder:!1,trackInventory:!0,images:[],tags:[],specifications:[],warranty:"",returnPolicy:"30",metaTitle:"",metaDescription:""}),[c,u]=v.useState(r||o()),[f,x]=v.useState(""),[h,p]=v.useState({key:"",value:""}),[g,b]=v.useState([]),[N,y]=v.useState(0),[S,C]=v.useState(0),[T,_]=v.useState(""),[G,U]=v.useState(!1);v.useEffect(()=>{r&&u({...o(),...r})},[r]),v.useEffect(()=>{c.category&&(c.category==="Other"?(U(!0),b([])):(U(!1),b(e2[c.category]||[])))},[c.category]),v.useEffect(()=>{const L=parseFloat(c.price)||0,re=parseFloat(c.cost)||0,V=parseFloat(c.taxRate)||0;if(L>0&&re>0){const ee=L-re-L*(V/100),me=(ee/L*100).toFixed(2);y(ee.toFixed(2)),C(me)}else y(0),C(0)},[c.price,c.cost,c.taxRate]);const F=(L,re)=>{u(V=>({...V,[L]:re}))},k=(L,re,V)=>{u(ee=>({...ee,[L]:{...ee[L],[re]:V}}))},E=()=>{f&&!c.tags.includes(f)&&(u(L=>({...L,tags:[...L.tags,f]})),x(""))},A=L=>{u(re=>({...re,tags:re.tags.filter(V=>V!==L)}))},B=()=>{h.key&&h.value&&(u(L=>({...L,specifications:[...L.specifications,{...h}]})),p({key:"",value:""}))},H=L=>{u(re=>({...re,specifications:re.specifications.filter((V,ee)=>ee!==L)}))},M=()=>{if(!c.name||!c.price||!c.category||!c.supplier){D.error("Please fill in all required fields (Name, Price, Category, Supplier)");return}if(parseFloat(c.price)<=0){D.error("Price must be greater than 0");return}let L=c.sku;if(!L){const V=c.category.substring(0,3).toUpperCase(),ee=Date.now().toString().slice(-6);L=`${V}-${ee}`}const re={name:c.name,description:c.description,price:parseFloat(c.price),category:c.category,subcategory:c.subcategory,brand:c.brand,sku:L,barcode:c.barcode,stockQuantity:c.stock?parseInt(c.stock):0,reorderLevel:c.minStock?parseInt(c.minStock):5,supplierName:c.supplier,status:c.status,unit:c.unit,weight:c.weight,dimensions:c.dimensions,condition:c.condition,cost:c.cost?parseFloat(c.cost):void 0,taxRate:c.taxRate?parseFloat(c.taxRate):16,featured:c.featured,freeShipping:c.freeShipping,allowBackorder:c.allowBackorder,trackInventory:c.trackInventory,image:c.images&&c.images.length>0?c.images[0]:void 0,tags:c.tags,specifications:c.specifications,warranty:c.warranty,returnPolicy:c.returnPolicy,metaTitle:c.metaTitle,metaDescription:c.metaDescription};a(re)},q=()=>{const L=c.category?c.category.substring(0,3).toUpperCase():"PRD",re=Date.now().toString().slice(-6);F("sku",`${L}-${re}`),D.success("SKU generated automatically")};return e.jsx(Ft,{open:t,onOpenChange:s,children:e.jsxs(It,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(Lt,{children:[e.jsxs(Bt,{className:"flex items-center gap-2",children:[e.jsx(qt,{className:"h-5 w-5"}),i==="add"?"Add New Product":"Edit Product"]}),e.jsx(es,{children:"Fill in the product details below. Fields marked with * are required."})]}),e.jsxs(pa,{defaultValue:"basic",className:"w-full",children:[e.jsxs(ba,{className:"grid w-full grid-cols-4",children:[e.jsx(ut,{value:"basic",children:"Basic Info"}),e.jsx(ut,{value:"pricing",children:"Pricing & Stock"}),e.jsx(ut,{value:"details",children:"Details"}),e.jsx(ut,{value:"seo",children:"SEO & Meta"})]}),e.jsx(mt,{value:"basic",className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"col-span-2",children:[e.jsx(ae,{htmlFor:"name",children:"Product Name *"}),e.jsx(fe,{id:"name",value:c.name,onChange:L=>F("name",L.target.value),placeholder:"Enter product name",className:"font-medium"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx(ae,{htmlFor:"description",children:"Description"}),e.jsx(Ts,{id:"description",value:c.description,onChange:L=>F("description",L.target.value),placeholder:"Detailed product description",rows:4})]}),e.jsxs("div",{children:[e.jsx(ae,{htmlFor:"category",children:"Category *"}),e.jsxs(Ot,{value:c.category,onValueChange:L=>{F("category",L),F("subcategory",""),L!=="Other"&&_("")},children:[e.jsx(Pt,{children:e.jsx(Rt,{placeholder:"Select category"})}),e.jsx(Mt,{className:"max-h-80",children:Object.keys(e2).map(L=>e.jsx(Ee,{value:L,children:L},L))})]})]}),G&&e.jsxs("div",{className:"col-span-2",children:[e.jsx(ae,{htmlFor:"customCategory",children:"Custom Category Name *"}),e.jsx(fe,{id:"customCategory",value:T,onChange:L=>{_(L.target.value),F("category",L.target.value||"Other")},placeholder:"Enter your custom category name",className:"border-primary/50"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:'Type your own category name (e.g., "Cosmetics", "Agriculture", "Real Estate")'})]}),e.jsxs("div",{children:[e.jsx(ae,{htmlFor:"subcategory",children:"Subcategory"}),e.jsxs(Ot,{value:c.subcategory,onValueChange:L=>F("subcategory",L),disabled:!c.category||G,children:[e.jsx(Pt,{children:e.jsx(Rt,{placeholder:"Select subcategory"})}),e.jsx(Mt,{children:g.map(L=>e.jsx(Ee,{value:L,children:L},L))})]})]}),e.jsxs("div",{children:[e.jsx(ae,{htmlFor:"brand",children:"Brand"}),e.jsxs(Ot,{value:c.brand,onValueChange:L=>F("brand",L),children:[e.jsx(Pt,{children:e.jsx(Rt,{placeholder:"Select brand"})}),e.jsx(Mt,{children:Qz.map(L=>e.jsx(Ee,{value:L,children:L},L))})]})]}),e.jsxs("div",{children:[e.jsx(ae,{htmlFor:"condition",children:"Condition"}),e.jsxs(Ot,{value:c.condition,onValueChange:L=>F("condition",L),children:[e.jsx(Pt,{children:e.jsx(Rt,{})}),e.jsx(Mt,{children:Jz.map(L=>e.jsx(Ee,{value:L,children:L.split("-").map(re=>re.charAt(0).toUpperCase()+re.slice(1)).join(" ")},L))})]})]}),e.jsxs("div",{children:[e.jsx(ae,{htmlFor:"status",children:"Status"}),e.jsxs(Ot,{value:c.status,onValueChange:L=>F("status",L),children:[e.jsx(Pt,{children:e.jsx(Rt,{})}),e.jsx(Mt,{children:Zz.map(L=>e.jsx(Ee,{value:L,children:L.charAt(0).toUpperCase()+L.slice(1)},L))})]})]}),e.jsxs("div",{children:[e.jsx(ae,{htmlFor:"supplier",children:"Supplier Name"}),e.jsx(fe,{id:"supplier",value:c.supplier,onChange:L=>F("supplier",L.target.value),placeholder:"Supplier or manufacturer"})]})]})}),e.jsx(mt,{value:"pricing",className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(ae,{htmlFor:"price",children:"Selling Price (KES) *"}),e.jsxs("div",{className:"relative",children:[e.jsx(ea,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),e.jsx(fe,{id:"price",type:"number",value:c.price,onChange:L=>F("price",L.target.value),placeholder:"0.00",className:"pl-10"})]})]}),e.jsxs("div",{children:[e.jsx(ae,{htmlFor:"cost",children:"Cost Price (KES)"}),e.jsxs("div",{className:"relative",children:[e.jsx(ea,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),e.jsx(fe,{id:"cost",type:"number",value:c.cost,onChange:L=>F("cost",L.target.value),placeholder:"0.00",className:"pl-10"})]})]}),e.jsxs("div",{children:[e.jsx(ae,{htmlFor:"taxRate",children:"Tax Rate (%)"}),e.jsx(fe,{id:"taxRate",type:"number",value:c.taxRate,onChange:L=>F("taxRate",L.target.value),placeholder:"16"})]}),e.jsxs("div",{className:"bg-muted p-4 rounded-lg",children:[e.jsx("p",{className:"text-sm font-medium mb-2",children:"Profit Calculation"}),e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Profit:"}),e.jsxs("span",{className:"font-bold text-green-600",children:["KES ",N]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Margin:"}),e.jsxs("span",{className:"font-bold",children:[S,"%"]})]})]})]}),e.jsxs("div",{children:[e.jsx(ae,{htmlFor:"stock",children:"Stock Quantity *"}),e.jsxs("div",{className:"relative",children:[e.jsx(R_,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),e.jsx(fe,{id:"stock",type:"number",value:c.stock,onChange:L=>F("stock",L.target.value),placeholder:"0",className:"pl-10"})]})]}),e.jsxs("div",{children:[e.jsx(ae,{htmlFor:"minStock",children:"Minimum Stock Alert"}),e.jsx(fe,{id:"minStock",type:"number",value:c.minStock,onChange:L=>F("minStock",L.target.value),placeholder:"5"})]}),e.jsxs("div",{children:[e.jsx(ae,{htmlFor:"unit",children:"Unit"}),e.jsxs(Ot,{value:c.unit,onValueChange:L=>F("unit",L),children:[e.jsx(Pt,{children:e.jsx(Rt,{})}),e.jsx(Mt,{children:Xz.map(L=>e.jsx(Ee,{value:L,children:L},L))})]})]}),e.jsxs("div",{children:[e.jsx(ae,{htmlFor:"sku",children:"SKU (Stock Keeping Unit)"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(fe,{id:"sku",value:c.sku,onChange:L=>F("sku",L.target.value),placeholder:"Auto-generated"}),e.jsx(R,{type:"button",variant:"outline",onClick:q,children:"Generate"})]})]}),e.jsxs("div",{className:"col-span-2 space-y-3 bg-muted p-4 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(ae,{htmlFor:"featured",children:"Featured Product"}),e.jsx(ns,{id:"featured",checked:c.featured,onCheckedChange:L=>F("featured",L)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(ae,{htmlFor:"freeShipping",children:"Free Shipping"}),e.jsx(ns,{id:"freeShipping",checked:c.freeShipping,onCheckedChange:L=>F("freeShipping",L)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(ae,{htmlFor:"allowBackorder",children:"Allow Backorder"}),e.jsx(ns,{id:"allowBackorder",checked:c.allowBackorder,onCheckedChange:L=>F("allowBackorder",L)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(ae,{htmlFor:"trackInventory",children:"Track Inventory"}),e.jsx(ns,{id:"trackInventory",checked:c.trackInventory,onCheckedChange:L=>F("trackInventory",L)})]})]})]})}),e.jsx(mt,{value:"details",className:"space-y-4",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(ae,{htmlFor:"weight",children:"Weight (kg)"}),e.jsx(fe,{id:"weight",type:"number",step:"0.01",value:c.weight,onChange:L=>F("weight",L.target.value),placeholder:"0.00"})]}),e.jsxs("div",{children:[e.jsx(ae,{children:"Dimensions (cm)"}),e.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[e.jsx(fe,{type:"number",value:c.dimensions.length,onChange:L=>k("dimensions","length",L.target.value),placeholder:"Length"}),e.jsx(fe,{type:"number",value:c.dimensions.width,onChange:L=>k("dimensions","width",L.target.value),placeholder:"Width"}),e.jsx(fe,{type:"number",value:c.dimensions.height,onChange:L=>k("dimensions","height",L.target.value),placeholder:"Height"})]})]}),e.jsxs("div",{children:[e.jsx(ae,{htmlFor:"barcode",children:"Barcode / EAN"}),e.jsx(fe,{id:"barcode",value:c.barcode,onChange:L=>F("barcode",L.target.value),placeholder:"Enter barcode number"})]}),e.jsxs("div",{children:[e.jsx(ae,{children:"Tags"}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsx(fe,{value:f,onChange:L=>x(L.target.value),placeholder:"Add a tag",onKeyPress:L=>L.key==="Enter"&&(L.preventDefault(),E())}),e.jsx(R,{type:"button",variant:"outline",onClick:E,children:e.jsx(Hs,{className:"h-4 w-4"})})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:c.tags.map((L,re)=>e.jsxs(_e,{variant:"secondary",children:[L,e.jsx(yr,{className:"h-3 w-3 ml-1 cursor-pointer",onClick:()=>A(L)})]},re))})]}),e.jsxs("div",{children:[e.jsx(ae,{children:"Specifications"}),e.jsx("div",{className:"space-y-2 mb-2",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(fe,{value:h.key,onChange:L=>p({...h,key:L.target.value}),placeholder:"Key (e.g., Color)"}),e.jsx(fe,{value:h.value,onChange:L=>p({...h,value:L.target.value}),placeholder:"Value (e.g., Blue)"}),e.jsx(R,{type:"button",variant:"outline",onClick:B,children:e.jsx(Hs,{className:"h-4 w-4"})})]})}),e.jsx("div",{className:"space-y-2",children:c.specifications.map((L,re)=>e.jsxs("div",{className:"flex items-center justify-between p-2 bg-muted rounded",children:[e.jsxs("span",{className:"text-sm",children:[e.jsxs("strong",{children:[L.key,":"]})," ",L.value]}),e.jsx(yr,{className:"h-4 w-4 cursor-pointer text-destructive",onClick:()=>H(re)})]},re))})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(ae,{htmlFor:"warranty",children:"Warranty (months)"}),e.jsx(fe,{id:"warranty",type:"number",value:c.warranty,onChange:L=>F("warranty",L.target.value),placeholder:"12"})]}),e.jsxs("div",{children:[e.jsx(ae,{htmlFor:"returnPolicy",children:"Return Policy (days)"}),e.jsx(fe,{id:"returnPolicy",type:"number",value:c.returnPolicy,onChange:L=>F("returnPolicy",L.target.value),placeholder:"30"})]})]})]})}),e.jsx(mt,{value:"seo",className:"space-y-4",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(ae,{htmlFor:"metaTitle",children:"Meta Title"}),e.jsx(fe,{id:"metaTitle",value:c.metaTitle,onChange:L=>F("metaTitle",L.target.value),placeholder:"SEO optimized title",maxLength:60}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[c.metaTitle.length,"/60 characters"]})]}),e.jsxs("div",{children:[e.jsx(ae,{htmlFor:"metaDescription",children:"Meta Description"}),e.jsx(Ts,{id:"metaDescription",value:c.metaDescription,onChange:L=>F("metaDescription",L.target.value),placeholder:"SEO optimized description",maxLength:160,rows:3}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[c.metaDescription.length,"/160 characters"]})]}),e.jsxs("div",{children:[e.jsx(ae,{htmlFor:"image",children:"Product Image URL"}),e.jsx(fe,{id:"image",value:c.image,onChange:L=>F("image",L.target.value),placeholder:"https://example.com/image.jpg"})]}),e.jsx("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-200",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(Cs,{className:"h-5 w-5 text-blue-600 mt-0.5"}),e.jsxs("div",{className:"text-sm",children:[e.jsx("p",{className:"font-medium text-blue-900",children:"SEO Tips"}),e.jsxs("ul",{className:"list-disc list-inside text-blue-700 mt-2 space-y-1",children:[e.jsx("li",{children:"Use descriptive, keyword-rich titles"}),e.jsx("li",{children:"Include product benefits in description"}),e.jsx("li",{children:"Add relevant tags for better searchability"}),e.jsx("li",{children:"Use high-quality product images"})]})]})]})})]})})]}),e.jsxs("div",{className:"flex justify-between items-center pt-4 border-t",children:[e.jsx(R,{variant:"outline",onClick:s,children:"Cancel"}),e.jsxs(R,{onClick:M,className:"px-8",children:[e.jsx(os,{className:"mr-2 h-4 w-4"}),i==="add"?"Add Product":"Update Product"]})]})]})})},eU=()=>{const t=Ka(),[s,a]=v.useState([]),[r,i]=v.useState([]),[o,c]=v.useState(""),[u,f]=v.useState("all"),[x,h]=v.useState("name"),[p,g]=v.useState("grid"),[b,N]=v.useState(!1),[y,S]=v.useState(!1),[C,T]=v.useState(!1),[_,G]=v.useState("add"),[U,F]=v.useState(null),[k,E]=v.useState([]),[A,B]=v.useState(null),[H,M]=v.useState(!1),[q,L]=v.useState(!1),[re,V]=v.useState({name:"",description:"",price:"",category:"",stock:"",image:"",featured:!1,supplierName:""}),[ee,me]=v.useState({id:"",name:"",description:"",price:"",category:"",stock:"",image:"",featured:!1,supplierName:""}),W=async()=>{try{const Pe=(await ye.get("/products")).data;if(Pe.length===0)D.info("No products found in the database."),a([]),i([]);else{const Qe=Pe.map(vt=>({id:vt._id,name:vt.name,description:vt.description||"",price:vt.price,category:vt.category,stock:vt.stockQuantity||0,image:vt.image||"https://images.unsplash.com/photo-1560472354-b33ff0c44a43?w=400&h=300&fit=crop",featured:vt.featured||!1,rating:vt.rating||4.5,reviews:vt.reviews||Math.floor(Math.random()*100),sku:vt.sku,supplierName:vt.supplierName,status:vt.status}));a(Qe),i(Qe)}}catch(ce){console.error("Error fetching products:",ce),D.error("Failed to load products. Please try again."),a([]),i([])}},se=async()=>{L(!0),await W(),L(!1),D.success("Products refreshed!")};v.useEffect(()=>{W()},[]),v.useEffect(()=>{let ce=s.filter(Pe=>{const Qe=Pe.name.toLowerCase().includes(o.toLowerCase())||Pe.description.toLowerCase().includes(o.toLowerCase()),vt=u==="all"||Pe.category===u;return Qe&&vt});ce.sort((Pe,Qe)=>{switch(x){case"price-low":return Pe.price-Qe.price;case"price-high":return Qe.price-Pe.price;case"rating":return(Qe.rating||0)-(Pe.rating||0);case"name":default:return Pe.name.localeCompare(Qe.name)}}),i(ce)},[s,o,u,x]);const Z=["all",...new Set(s.map(ce=>ce.category))],I=async ce=>{try{k.find(Qe=>Qe.id===ce.id)?(E(k.filter(Qe=>Qe.id!==ce.id)),D.success(`${ce.name} removed from wishlist`),await ye.delete(`/wishlist/${ce.id}`)):(E([...k,ce]),D.success(`${ce.name} added to wishlist!`),await ye.post("/wishlist",{productId:ce.id}))}catch(Pe){console.error("Error updating wishlist:",Pe),D.error("Failed to update wishlist. Please try again.")}},Q=ce=>k.some(Pe=>Pe.id===ce),O=async ce=>{try{const Pe={name:ce.name,description:ce.description,price:parseFloat(ce.price),category:ce.category,subcategory:ce.subcategory,brand:ce.brand,stockQuantity:parseInt(ce.stock)||0,sku:ce.sku,barcode:ce.barcode,unit:ce.unit,weight:parseFloat(ce.weight)||0,dimensions:ce.dimensions,condition:ce.condition,status:ce.status,supplierName:ce.supplier||"Default Supplier",cost:parseFloat(ce.cost)||0,taxRate:parseFloat(ce.taxRate)||16,featured:ce.featured,freeShipping:ce.freeShipping,allowBackorder:ce.allowBackorder,trackInventory:ce.trackInventory,image:ce.image||"https://images.unsplash.com/photo-1560472354-b33ff0c44a43?w=400&h=300&fit=crop",tags:ce.tags,specifications:ce.specifications,warranty:ce.warranty,returnPolicy:ce.returnPolicy,minStock:parseInt(ce.minStock)||0,metaTitle:ce.metaTitle,metaDescription:ce.metaDescription};_==="edit"&&U?.id?(await ye.put(`/products/${U.id}`,Pe),D.success("Product updated successfully!")):(await ye.post("/products",Pe),D.success("Product added successfully!")),await W(),T(!1),F(null)}catch(Pe){console.error("Error saving product:",Pe),D.error("Failed to save product. Please try again.")}},te=async()=>{if(!re.name||!re.price||!re.category){D.error("Please fill in all required fields");return}try{const ce={name:re.name,description:re.description,price:parseFloat(re.price),category:re.category,stockQuantity:parseInt(re.stock)||0,sku:`SKU-${Date.now()}`,supplierName:re.supplierName||"Default Supplier",image:re.image||"https://images.unsplash.com/photo-1560472354-b33ff0c44a43?w=400&h=300&fit=crop",featured:re.featured};await ye.post("/products",ce),await W(),V({name:"",description:"",price:"",category:"",stock:"",image:"",featured:!1,supplierName:""}),N(!1),D.success("Product added successfully!")}catch(ce){console.error("Error adding product:",ce),D.error("Failed to add product. Please try again.")}},oe=async()=>{if(!ee.name||!ee.price||!ee.category){D.error("Please fill in all required fields");return}try{const ce={name:ee.name,description:ee.description,price:parseFloat(ee.price),category:ee.category,stockQuantity:parseInt(ee.stock)||0,supplierName:ee.supplierName||"Default Supplier",image:ee.image||"https://images.unsplash.com/photo-1560472354-b33ff0c44a43?w=400&h=300&fit=crop",featured:ee.featured};await ye.put(`/products/${ee.id}`,ce),await W(),me({id:"",name:"",description:"",price:"",category:"",stock:"",image:"",featured:!1,supplierName:""}),S(!1),D.success("Product updated successfully!")}catch(ce){console.error("Error updating product:",ce),D.error("Failed to update product. Please try again.")}},je=async ce=>{try{await ye.delete(`/products/${ce}`),await W(),D.success("Product deleted successfully!")}catch(Pe){console.error("Error deleting product:",Pe),D.error("Failed to delete product. Please try again.")}},Me=ce=>{me({id:ce.id,name:ce.name,description:ce.description,price:ce.price.toString(),category:ce.category,stock:ce.stock.toString(),image:ce.image,featured:ce.featured,supplierName:ce.supplierName}),S(!0)},ve=({product:ce})=>{const Pe=Q(ce.id),Qe=Math.floor(ce.rating||0);return e.jsxs(K,{className:"group bg-white/30 backdrop-blur-md border border-green-200 rounded-xl shadow-md hover:shadow-lg transition-all duration-300",children:[e.jsxs("div",{className:"relative overflow-hidden rounded-t-xl",children:[e.jsx("img",{src:ce.image||"/placeholder.jpg",alt:ce.name||"Product image",className:"w-full h-48 object-cover transition-transform duration-300 group-hover:scale-105"}),ce.featured&&e.jsx(_e,{className:"absolute top-2 left-2 bg-green-600 text-white text-xs font-medium",children:"Featured"}),e.jsxs("div",{className:"absolute top-2 right-2 flex gap-1",children:[e.jsx(R,{size:"sm",variant:"ghost",className:`h-8 w-8 p-0 opacity-0 group-hover:opacity-100 transition-opacity ${Pe?"bg-green-100 text-green-600":""}`,onClick:()=>I(ce),"aria-label":"Toggle wishlist",children:e.jsx(Wi,{className:`h-4 w-4 ${Pe?"fill-current":""}`})}),e.jsx(R,{size:"sm",variant:"ghost",className:"h-8 w-8 p-0 opacity-0 group-hover:opacity-100 transition-opacity",onClick:()=>{B(ce),M(!0)},"aria-label":"View details",children:e.jsx(la,{className:"h-4 w-4"})})]})]}),e.jsxs(X,{className:"p-4 space-y-3",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsx("h3",{className:"font-semibold text-lg line-clamp-1",children:ce.name}),e.jsx(_e,{variant:"outline",className:"text-xs border-green-300 text-green-600",children:ce.category})]}),e.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2",children:ce.description}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"flex items-center",children:[...Array(5)].map((vt,xt)=>e.jsx(Ja,{className:`h-4 w-4 ${xt<Qe?"fill-yellow-400 text-yellow-400":"text-gray-300"}`},xt))}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:["(",ce.reviews||0,")"]})]}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-2xl font-bold text-green-600",children:["KES ",ce.price.toLocaleString()]}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Stock: ",ce.stock]})]}),e.jsxs("div",{className:"flex gap-2 pt-2",children:[e.jsxs(R,{size:"sm",variant:"outline",onClick:()=>Me(ce),className:"text-green-600 hover:text-green-700 hover:bg-green-50",children:[e.jsx(Qi,{className:"h-4 w-4 mr-1"}),"Edit"]}),e.jsxs(R,{size:"sm",variant:"outline",onClick:()=>je(ce.id),className:"text-red-600 hover:text-red-700 hover:bg-red-50",children:[e.jsx(fa,{className:"h-4 w-4 mr-1"}),"Delete"]})]})]})]})};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Products"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage your product catalog and inventory"})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsxs(R,{variant:"outline",size:"sm",onClick:()=>t("/dashboard/inventory"),className:"gap-2",children:[e.jsx(HS,{className:"h-4 w-4"}),"Inventory"]}),e.jsxs(R,{variant:"outline",size:"sm",onClick:()=>t("/store"),className:"gap-2",children:[e.jsx(P_,{className:"h-4 w-4"}),"Store"]}),e.jsxs(R,{variant:"outline",size:"sm",onClick:()=>t("/dashboard/ecommerce"),className:"gap-2",children:[e.jsx(js,{className:"h-4 w-4"}),"Orders"]}),e.jsxs(R,{variant:"outline",size:"sm",onClick:se,disabled:q,className:"gap-2",children:[e.jsx(is,{className:`h-4 w-4 ${q?"animate-spin":""}`}),q?"Refreshing...":"Refresh"]}),e.jsxs(R,{size:"sm",onClick:()=>{G("add"),F(null),T(!0)},className:"gap-2 bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700",children:[e.jsx(Hs,{className:"h-4 w-4"}),"Add Product (Enhanced)"]}),e.jsxs(Ft,{open:b,onOpenChange:N,children:[e.jsx(Na,{asChild:!0,children:e.jsxs(R,{variant:"outline",size:"sm",children:[e.jsx(Hs,{className:"mr-2 h-4 w-4"}),"Quick Add"]})}),e.jsxs(It,{className:"sm:max-w-md",children:[e.jsxs(Lt,{children:[e.jsx(Bt,{children:"Add New Product"}),e.jsx(es,{children:"Create a new product for your catalog"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(ae,{htmlFor:"name",children:"Product Name *"}),e.jsx(fe,{id:"name",value:re.name,onChange:ce=>V({...re,name:ce.target.value}),placeholder:"Enter product name"})]}),e.jsxs("div",{children:[e.jsx(ae,{htmlFor:"description",children:"Description"}),e.jsx(Ts,{id:"description",value:re.description,onChange:ce=>V({...re,description:ce.target.value}),placeholder:"Product description"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(ae,{htmlFor:"price",children:"Price (KES) *"}),e.jsx(fe,{id:"price",type:"number",value:re.price,onChange:ce=>V({...re,price:ce.target.value}),placeholder:"0"})]}),e.jsxs("div",{children:[e.jsx(ae,{htmlFor:"stock",children:"Stock"}),e.jsx(fe,{id:"stock",type:"number",value:re.stock,onChange:ce=>V({...re,stock:ce.target.value}),placeholder:"0"})]})]}),e.jsxs("div",{children:[e.jsx(ae,{htmlFor:"category",children:"Category *"}),e.jsxs(Ot,{value:re.category,onValueChange:ce=>V({...re,category:ce}),children:[e.jsx(Pt,{children:e.jsx(Rt,{placeholder:"Select category"})}),e.jsxs(Mt,{children:[e.jsx(Ee,{value:"Beverages",children:"Beverages"}),e.jsx(Ee,{value:"Snacks",children:"Snacks"}),e.jsx(Ee,{value:"Bakery",children:"Bakery"}),e.jsx(Ee,{value:"Electronics",children:"Electronics"}),e.jsx(Ee,{value:"Clothing",children:"Clothing"}),e.jsx(Ee,{value:"Books",children:"Books"})]})]})]}),e.jsxs("div",{children:[e.jsx(ae,{htmlFor:"image",children:"Image URL"}),e.jsx(fe,{id:"image",value:re.image,onChange:ce=>V({...re,image:ce.target.value}),placeholder:"https://example.com/image.jpg"})]}),e.jsxs("div",{children:[e.jsx(ae,{htmlFor:"supplierName",children:"Supplier Name"}),e.jsx(fe,{id:"supplierName",value:re.supplierName,onChange:ce=>V({...re,supplierName:ce.target.value}),placeholder:"Enter supplier name"})]}),e.jsx(R,{onClick:te,className:"w-full",children:"Add Product"})]})]})]})]})]}),e.jsx(K,{className:"bg-card border-border",children:e.jsx(X,{className:"p-4",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(ia,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),e.jsx(fe,{placeholder:"Search products...",value:o,onChange:ce=>c(ce.target.value),className:"pl-10"})]})}),e.jsxs(Ot,{value:u,onValueChange:f,children:[e.jsx(Pt,{className:"w-full sm:w-48",children:e.jsx(Rt,{placeholder:"Category"})}),e.jsx(Mt,{children:Z.map(ce=>e.jsx(Ee,{value:ce,children:ce==="all"?"All Categories":ce},ce))})]}),e.jsxs(Ot,{value:x,onValueChange:h,children:[e.jsx(Pt,{className:"w-full sm:w-48",children:e.jsx(Rt,{placeholder:"Sort by"})}),e.jsxs(Mt,{children:[e.jsx(Ee,{value:"name",children:"Name"}),e.jsx(Ee,{value:"price-low",children:"Price: Low to High"}),e.jsx(Ee,{value:"price-high",children:"Price: High to Low"}),e.jsx(Ee,{value:"rating",children:"Rating"})]})]})]})})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:r.map(ce=>e.jsx(ve,{product:ce},ce.id))}),r.length===0&&e.jsx(K,{className:"bg-card border-border",children:e.jsxs(X,{className:"p-8 text-center",children:[e.jsx(qt,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No products found"}),e.jsx("p",{className:"text-muted-foreground",children:"Try adjusting your search or filter criteria"})]})}),A&&e.jsx(Ft,{open:H,onOpenChange:M,children:e.jsxs(It,{className:"sm:max-w-2xl",children:[e.jsxs(Lt,{children:[e.jsx(Bt,{children:A.name}),e.jsx(es,{children:"Product details and specifications"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx("div",{children:e.jsx("img",{src:A.image,alt:A.name,className:"w-full h-64 object-cover rounded-lg"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(_e,{variant:"outline",children:A.category}),A.featured&&e.jsx(_e,{className:"ml-2",children:"Featured"})]}),e.jsx("p",{className:"text-muted-foreground",children:A.description}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"flex items-center",children:[...Array(5)].map((ce,Pe)=>e.jsx(Ja,{className:`h-4 w-4 ${Pe<Math.floor(A.rating||0)?"fill-yellow-400 text-yellow-400":"text-gray-300"}`},Pe))}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[A.rating," (",A.reviews," reviews)"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("p",{className:"text-3xl font-bold text-primary",children:["KES ",A.price.toLocaleString()]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Stock: ",A.stock," available"]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(R,{onClick:()=>Me(A),className:"flex-1",children:[e.jsx(Qi,{className:"w-4 h-4 mr-2"}),"Edit Product"]}),e.jsx(R,{variant:"outline",onClick:()=>I(A),className:Q(A.id)?"bg-red-50 text-red-600":"",children:e.jsx(Wi,{className:`w-4 h-4 ${Q(A.id)?"fill-current":""}`})})]})]})]})]})}),e.jsx(Ft,{open:y,onOpenChange:S,children:e.jsxs(It,{className:"sm:max-w-md",children:[e.jsxs(Lt,{children:[e.jsx(Bt,{children:"Edit Product"}),e.jsx(es,{children:"Update product details"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(ae,{htmlFor:"edit-name",children:"Product Name *"}),e.jsx(fe,{id:"edit-name",value:ee.name,onChange:ce=>me({...ee,name:ce.target.value}),placeholder:"Enter product name"})]}),e.jsxs("div",{children:[e.jsx(ae,{htmlFor:"edit-description",children:"Description"}),e.jsx(Ts,{id:"edit-description",value:ee.description,onChange:ce=>me({...ee,description:ce.target.value}),placeholder:"Product description"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(ae,{htmlFor:"edit-price",children:"Price (KES) *"}),e.jsx(fe,{id:"edit-price",type:"number",value:ee.price,onChange:ce=>me({...ee,price:ce.target.value}),placeholder:"0"})]}),e.jsxs("div",{children:[e.jsx(ae,{htmlFor:"edit-stock",children:"Stock"}),e.jsx(fe,{id:"edit-stock",type:"number",value:ee.stock,onChange:ce=>me({...ee,stock:ce.target.value}),placeholder:"0"})]})]}),e.jsxs("div",{children:[e.jsx(ae,{htmlFor:"edit-category",children:"Category *"}),e.jsxs(Ot,{value:ee.category,onValueChange:ce=>me({...ee,category:ce}),children:[e.jsx(Pt,{children:e.jsx(Rt,{placeholder:"Select category"})}),e.jsxs(Mt,{children:[e.jsx(Ee,{value:"Beverages",children:"Beverages"}),e.jsx(Ee,{value:"Snacks",children:"Snacks"}),e.jsx(Ee,{value:"Bakery",children:"Bakery"}),e.jsx(Ee,{value:"Electronics",children:"Electronics"}),e.jsx(Ee,{value:"Clothing",children:"Clothing"}),e.jsx(Ee,{value:"Books",children:"Books"})]})]})]}),e.jsxs("div",{children:[e.jsx(ae,{htmlFor:"edit-image",children:"Image URL"}),e.jsx(fe,{id:"edit-image",value:ee.image,onChange:ce=>me({...ee,image:ce.target.value}),placeholder:"https://example.com/image.jpg"})]}),e.jsxs("div",{children:[e.jsx(ae,{htmlFor:"edit-supplierName",children:"Supplier Name"}),e.jsx(fe,{id:"edit-supplierName",value:ee.supplierName,onChange:ce=>me({...ee,supplierName:ce.target.value}),placeholder:"Enter supplier name"})]}),e.jsx(R,{onClick:oe,className:"w-full",children:"Update Product"})]})]})}),e.jsx(_k,{isOpen:C,onClose:()=>{T(!1),F(null)},onSubmit:O,initialData:U,mode:_})]})},Dk=v.createContext(),aj=()=>{const t=v.useContext(Dk);if(!t)throw new Error("useCart must be used within CartProvider");return t},tU=({children:t})=>{const s=()=>{const p=localStorage.getItem("customerToken");if(p)try{const g=JSON.parse(atob(p.split(".")[1]));return`cart_items_${g.id||g.email||"guest"}`}catch{return"cart_items_guest"}return"cart_items_guest"},[a,r]=v.useState(()=>{try{const p=s(),g=localStorage.getItem(p);return g?JSON.parse(g):[]}catch{return[]}});v.useEffect(()=>{const p=s();localStorage.setItem(p,JSON.stringify(a))},[a]),v.useEffect(()=>{const p=s();try{const g=localStorage.getItem(p);r(g?JSON.parse(g):[])}catch{r([])}},[localStorage.getItem("customerToken")]);const i=(p,g=1)=>{const b=p._id||p.id;r(N=>N.find(S=>(S._id||S.id)===b)?N.map(S=>(S._id||S.id)===b?{...S,quantity:S.quantity+g}:S):[...N,{...p,_id:b,id:b,quantity:g}])},o=(p,g)=>{r(b=>b.map(N=>(N._id||N.id)===p?{...N,quantity:Math.max(0,g)}:N).filter(N=>N.quantity>0))},c=p=>r(g=>g.filter(b=>(b._id||b.id)!==p)),u=()=>r([]),f=v.useMemo(()=>a.reduce((p,g)=>p+(g.price||0)*(g.quantity||0),0),[a]),x=v.useMemo(()=>a.reduce((p,g)=>p+(g.quantity||0),0),[a]),h={items:a,add:i,update:o,remove:c,clear:u,total:f,count:x};return e.jsx(Dk.Provider,{value:h,children:t})},sU=()=>{const t=Ka(),{items:s,update:a,remove:r,clear:i,total:o,count:c}=aj(),{socket:u,connected:f}=da(),{user:x,isAuthenticated:h}=Es(),[p,g]=v.useState(1),[b,N]=v.useState(!1),[y,S]=v.useState(""),[C,T]=v.useState(!1),[_,G]=v.useState({firstName:"",lastName:"",email:"",phone:"",company:""}),[U,F]=v.useState({address:"",city:"",state:"",zipCode:"",country:"Kenya",deliveryMethod:"standard",specialInstructions:""});v.useEffect(()=>{h&&x&&G({firstName:x.firstName||x.name?.split(" ")[0]||"",lastName:x.lastName||x.name?.split(" ")[1]||"",email:x.email||"",phone:x.phone||"",company:x.company||""})},[h,x]),v.useEffect(()=>{if(u&&f&&y)return u.on("order_status_updated",Z=>{Z.orderNumber===y&&D.info(`Order ${y}: ${Z.status}`)}),()=>{u.off("order_status_updated")}},[u,f,y]);const k=(Z,I)=>{if(I<=0){r(Z),D.success("Item removed from cart");return}a(Z,I)},E=Z=>{r(Z),D.success("Item removed from cart")},A=()=>s.reduce((Z,I)=>Z+I.price*I.quantity,0),B=()=>A()>=1e4?0:U.deliveryMethod==="express"?800:400,H=()=>Math.round(A()*.16),M=()=>A()+B()+H(),q=(Z,I)=>{G(Q=>({...Q,[Z]:I}))},L=(Z,I)=>{F(Q=>({...Q,[Z]:I}))},re=Z=>{switch(Z){case 1:return s.length>0;case 2:return _.firstName&&_.lastName&&_.email&&_.phone;case 3:return U.address&&U.city&&U.state&&U.zipCode;default:return!0}},V=()=>{re(p)?g(Z=>Math.min(Z+1,4)):D.error("Please fill in all required fields")},ee=()=>{g(Z=>Math.max(Z-1,1))},me=async Z=>{T(!0);try{const I=localStorage.getItem("token"),Q={customer:_,shippingAddress:U,items:s.map(oe=>({product:oe._id||oe.id,name:oe.name,quantity:oe.quantity,price:oe.price})),payment:Z,subtotal:A(),shippingCost:B(),tax:H(),total:M(),status:"pending"},te=(await ye.post("/orders",Q,{headers:{Authorization:`Bearer ${I}`}})).data.orderNumber||`ORD-${Date.now()}`;S(te),N(!0),g(5),u&&f&&u.emit("order_created",{orderNumber:te,userId:x?._id,total:M()}),i(),D.success("Order placed successfully!")}catch(I){console.error("Order creation error:",I),D.error("Failed to create order. Please try again.")}finally{T(!1)}},W=Z=>{D.error("Payment failed. Please try again.")};if(b)return e.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center p-4",children:e.jsx(K,{className:"w-full max-w-md text-center bg-card border-border",children:e.jsx(X,{className:"pt-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"mx-auto w-16 h-16 bg-green-100 rounded-full flex items-center justify-center",children:e.jsx(os,{className:"w-8 h-8 text-green-600"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-foreground",children:"Order Confirmed!"}),e.jsx("p",{className:"text-muted-foreground mt-2",children:"Thank you for your purchase. Your order has been successfully placed."})]}),e.jsxs("div",{className:"bg-muted p-4 rounded-lg",children:[e.jsx("p",{className:"text-sm font-medium",children:"Order Number"}),e.jsx("p",{className:"text-lg font-bold text-primary",children:y})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(R,{onClick:()=>t("/dashboard/products"),className:"w-full",children:"Continue Shopping"}),e.jsx(R,{variant:"outline",onClick:()=>t("/dashboard/ecommerce"),className:"w-full",children:"View Order History"})]})]})})})});const se=[{number:1,title:"Cart Review",icon:js},{number:2,title:"Customer Info",icon:na},{number:3,title:"Shipping",icon:Yc},{number:4,title:"Payment",icon:ha}];return e.jsx("div",{className:"min-h-screen bg-background",children:e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[e.jsxs(R,{variant:"outline",size:"sm",onClick:()=>t("/dashboard/products"),children:[e.jsx(WS,{className:"w-4 h-4 mr-2"}),"Back to Products"]}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Checkout"}),e.jsx("p",{className:"text-muted-foreground",children:"Complete your purchase"})]})]}),e.jsx("div",{className:"mb-8",children:e.jsx("div",{className:"flex items-center justify-between",children:se.map((Z,I)=>e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`flex items-center justify-center w-10 h-10 rounded-full border-2 ${p>=Z.number?"bg-primary border-primary text-primary-foreground":"border-muted-foreground text-muted-foreground"}`,children:e.jsx(Z.icon,{className:"w-5 h-5"})}),e.jsx("div",{className:"ml-3 hidden sm:block",children:e.jsx("p",{className:`text-sm font-medium ${p>=Z.number?"text-foreground":"text-muted-foreground"}`,children:Z.title})}),I<se.length-1&&e.jsx("div",{className:`w-12 h-0.5 mx-4 ${p>Z.number?"bg-primary":"bg-muted"}`})]},Z.number))})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-2",children:[p===1&&e.jsxs(K,{className:"bg-card border-border",children:[e.jsxs(pe,{children:[e.jsxs(ge,{className:"flex items-center gap-2",children:[e.jsx(js,{className:"w-5 h-5"}),"Review Your Cart"]}),e.jsx(lt,{children:"Review your items before proceeding to checkout"})]}),e.jsxs(X,{className:"space-y-4",children:[s.map(Z=>e.jsxs("div",{className:"flex items-center gap-4 p-4 border rounded-lg",children:[e.jsx("img",{src:Z.image,alt:Z.name,className:"w-16 h-16 object-cover rounded-md"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold",children:Z.name}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["KES ",Z.price.toLocaleString()," each"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(R,{size:"sm",variant:"outline",onClick:()=>k(Z.id,Z.quantity-1),children:e.jsx(Ru,{className:"w-4 h-4"})}),e.jsx("span",{className:"w-8 text-center",children:Z.quantity}),e.jsx(R,{size:"sm",variant:"outline",onClick:()=>k(Z.id,Z.quantity+1),children:e.jsx(Hs,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"font-semibold",children:["KES ",(Z.price*Z.quantity).toLocaleString()]}),e.jsx(R,{size:"sm",variant:"ghost",onClick:()=>E(Z.id),className:"text-red-600 hover:text-red-700",children:e.jsx(fa,{className:"w-4 h-4"})})]})]},Z.id)),s.length===0&&e.jsxs("div",{className:"text-center py-8",children:[e.jsx(qt,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"Your cart is empty"}),e.jsx(R,{onClick:()=>t("/dashboard/products"),className:"mt-4",children:"Continue Shopping"})]})]})]}),p===2&&e.jsxs(K,{className:"bg-card border-border",children:[e.jsxs(pe,{children:[e.jsxs(ge,{className:"flex items-center gap-2",children:[e.jsx(na,{className:"w-5 h-5"}),"Customer Information"]}),e.jsx(lt,{children:"Please provide your contact information"})]}),e.jsxs(X,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(ae,{htmlFor:"firstName",children:"First Name *"}),e.jsx(fe,{id:"firstName",value:_.firstName,onChange:Z=>q("firstName",Z.target.value),placeholder:"John"})]}),e.jsxs("div",{children:[e.jsx(ae,{htmlFor:"lastName",children:"Last Name *"}),e.jsx(fe,{id:"lastName",value:_.lastName,onChange:Z=>q("lastName",Z.target.value),placeholder:"Doe"})]})]}),e.jsxs("div",{children:[e.jsx(ae,{htmlFor:"email",children:"Email Address *"}),e.jsx(fe,{id:"email",type:"email",value:_.email,onChange:Z=>q("email",Z.target.value),placeholder:"john@example.com"})]}),e.jsxs("div",{children:[e.jsx(ae,{htmlFor:"phone",children:"Phone Number *"}),e.jsx(fe,{id:"phone",value:_.phone,onChange:Z=>q("phone",Z.target.value),placeholder:"+254 700 000 000"})]}),e.jsxs("div",{children:[e.jsx(ae,{htmlFor:"company",children:"Company (Optional)"}),e.jsx(fe,{id:"company",value:_.company,onChange:Z=>q("company",Z.target.value),placeholder:"Your Company"})]})]})]}),p===3&&e.jsxs(K,{className:"bg-card border-border",children:[e.jsxs(pe,{children:[e.jsxs(ge,{className:"flex items-center gap-2",children:[e.jsx(Yc,{className:"w-5 h-5"}),"Shipping Information"]}),e.jsx(lt,{children:"Where should we deliver your order?"})]}),e.jsxs(X,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(ae,{htmlFor:"address",children:"Street Address *"}),e.jsx(fe,{id:"address",value:U.address,onChange:Z=>L("address",Z.target.value),placeholder:"123 Main Street"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(ae,{htmlFor:"city",children:"City *"}),e.jsx(fe,{id:"city",value:U.city,onChange:Z=>L("city",Z.target.value),placeholder:"Nairobi"})]}),e.jsxs("div",{children:[e.jsx(ae,{htmlFor:"state",children:"State/County *"}),e.jsx(fe,{id:"state",value:U.state,onChange:Z=>L("state",Z.target.value),placeholder:"Nairobi County"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(ae,{htmlFor:"zipCode",children:"Postal Code *"}),e.jsx(fe,{id:"zipCode",value:U.zipCode,onChange:Z=>L("zipCode",Z.target.value),placeholder:"00100"})]}),e.jsxs("div",{children:[e.jsx(ae,{htmlFor:"country",children:"Country"}),e.jsxs(Ot,{value:U.country,onValueChange:Z=>L("country",Z),children:[e.jsx(Pt,{children:e.jsx(Rt,{})}),e.jsxs(Mt,{children:[e.jsx(Ee,{value:"Kenya",children:"Kenya"}),e.jsx(Ee,{value:"Uganda",children:"Uganda"}),e.jsx(Ee,{value:"Tanzania",children:"Tanzania"})]})]})]})]}),e.jsxs("div",{children:[e.jsx(ae,{htmlFor:"deliveryMethod",children:"Delivery Method"}),e.jsxs(Ot,{value:U.deliveryMethod,onValueChange:Z=>L("deliveryMethod",Z),children:[e.jsx(Pt,{children:e.jsx(Rt,{})}),e.jsxs(Mt,{children:[e.jsx(Ee,{value:"standard",children:"Standard Delivery (3-5 days) - KES 400"}),e.jsx(Ee,{value:"express",children:"Express Delivery (1-2 days) - KES 800"})]})]})]}),e.jsxs("div",{children:[e.jsx(ae,{htmlFor:"specialInstructions",children:"Special Instructions (Optional)"}),e.jsx(Ts,{id:"specialInstructions",value:U.specialInstructions,onChange:Z=>L("specialInstructions",Z.target.value),placeholder:"Any special delivery instructions..."})]})]})]}),p===4&&e.jsxs(K,{className:"bg-card border-border",children:[e.jsxs(pe,{children:[e.jsxs(ge,{className:"flex items-center gap-2",children:[e.jsx(ha,{className:"w-5 h-5"}),"Payment Method"]}),e.jsx(lt,{children:"Choose your preferred payment method"})]}),e.jsxs(X,{children:[e.jsx(uk,{amount:M(),description:`Order for ${s.length} items`,currency:"KES",triggerText:`Pay KES ${M().toLocaleString()}`,onSuccess:me,onError:W}),e.jsx("div",{className:"mt-6 p-4 bg-muted/50 rounded-lg",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(ta,{className:"w-5 h-5 text-primary mt-0.5"}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-sm font-medium",children:"Secure Payment"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Your payment information is encrypted and secure. We never store your payment details."})]})]})})]})]}),p<4&&e.jsxs("div",{className:"flex justify-between mt-6",children:[e.jsx(R,{variant:"outline",onClick:ee,disabled:p===1,children:"Previous"}),e.jsx(R,{onClick:V,disabled:!re(p),children:p===3?"Proceed to Payment":"Next"})]})]}),e.jsx("div",{className:"lg:col-span-1",children:e.jsxs(K,{className:"bg-card border-border sticky top-4",children:[e.jsx(pe,{children:e.jsx(ge,{children:"Order Summary"})}),e.jsxs(X,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Subtotal"}),e.jsxs("span",{children:["KES ",A().toLocaleString()]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Shipping"}),e.jsx("span",{children:B()===0?"Free":`KES ${B().toLocaleString()}`})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"VAT (16%)"}),e.jsxs("span",{children:["KES ",H().toLocaleString()]})]}),e.jsx(Fn,{}),e.jsxs("div",{className:"flex justify-between font-semibold text-lg",children:[e.jsx("span",{children:"Total"}),e.jsxs("span",{children:["KES ",M().toLocaleString()]})]})]}),B()===0&&e.jsx("div",{className:"p-3 bg-green-50 border border-green-200 rounded-lg",children:e.jsx("p",{className:"text-sm text-green-800 font-medium",children:"🎉 Free shipping on orders over KES 10,000!"})}),e.jsxs("div",{className:"space-y-2 text-sm text-muted-foreground",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Qt,{className:"w-4 h-4"}),e.jsx("span",{children:"Estimated delivery: 3-5 business days"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ta,{className:"w-4 h-4"}),e.jsx("span",{children:"Secure checkout"})]})]})]})]})})]})]})})},rj=v.createContext({});function nj(t){const s=v.useRef(null);return s.current===null&&(s.current=t()),s.current}const ij=typeof window<"u",Ok=ij?v.useLayoutEffect:v.useEffect,sx=v.createContext(null);function lj(t,s){t.indexOf(s)===-1&&t.push(s)}function oj(t,s){const a=t.indexOf(s);a>-1&&t.splice(a,1)}const el=(t,s,a)=>a>s?s:a<t?t:a;let cj=()=>{};const tl={},Rk=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function Pk(t){return typeof t=="object"&&t!==null}const Mk=t=>/^0[^.\s]+$/u.test(t);function dj(t){let s;return()=>(s===void 0&&(s=t()),s)}const Ln=t=>t,aU=(t,s)=>a=>s(t(a)),lm=(...t)=>t.reduce(aU),$u=(t,s,a)=>{const r=s-t;return r===0?1:(a-t)/r};class uj{constructor(){this.subscriptions=[]}add(s){return lj(this.subscriptions,s),()=>oj(this.subscriptions,s)}notify(s,a,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](s,a,r);else for(let o=0;o<i;o++){const c=this.subscriptions[o];c&&c(s,a,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const ji=t=>t*1e3,In=t=>t/1e3;function Fk(t,s){return s?t*(1e3/s):0}const Ik=(t,s,a)=>(((1-3*a+3*s)*t+(3*a-6*s))*t+3*s)*t,rU=1e-7,nU=12;function iU(t,s,a,r,i){let o,c,u=0;do c=s+(a-s)/2,o=Ik(c,r,i)-t,o>0?a=c:s=c;while(Math.abs(o)>rU&&++u<nU);return c}function om(t,s,a,r){if(t===s&&a===r)return Ln;const i=o=>iU(o,0,1,t,a);return o=>o===0||o===1?o:Ik(i(o),s,r)}const Lk=t=>s=>s<=.5?t(2*s)/2:(2-t(2*(1-s)))/2,Bk=t=>s=>1-t(1-s),zk=om(.33,1.53,.69,.99),mj=Bk(zk),Uk=Lk(mj),Vk=t=>(t*=2)<1?.5*mj(t):.5*(2-Math.pow(2,-10*(t-1))),hj=t=>1-Math.sin(Math.acos(t)),$k=Bk(hj),Hk=Lk(hj),lU=om(.42,0,1,1),oU=om(0,0,.58,1),Wk=om(.42,0,.58,1),cU=t=>Array.isArray(t)&&typeof t[0]!="number",Gk=t=>Array.isArray(t)&&typeof t[0]=="number",dU={linear:Ln,easeIn:lU,easeInOut:Wk,easeOut:oU,circIn:hj,circInOut:Hk,circOut:$k,backIn:mj,backInOut:Uk,backOut:zk,anticipate:Vk},uU=t=>typeof t=="string",t2=t=>{if(Gk(t)){cj(t.length===4);const[s,a,r,i]=t;return om(s,a,r,i)}else if(uU(t))return dU[t];return t},Bh=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function mU(t,s){let a=new Set,r=new Set,i=!1,o=!1;const c=new WeakSet;let u={delta:0,timestamp:0,isProcessing:!1};function f(h){c.has(h)&&(x.schedule(h),t()),h(u)}const x={schedule:(h,p=!1,g=!1)=>{const N=g&&i?a:r;return p&&c.add(h),N.has(h)||N.add(h),h},cancel:h=>{r.delete(h),c.delete(h)},process:h=>{if(u=h,i){o=!0;return}i=!0,[a,r]=[r,a],a.forEach(f),a.clear(),i=!1,o&&(o=!1,x.process(h))}};return x}const hU=40;function qk(t,s){let a=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},o=()=>a=!0,c=Bh.reduce((_,G)=>(_[G]=mU(o),_),{}),{setup:u,read:f,resolveKeyframes:x,preUpdate:h,update:p,preRender:g,render:b,postRender:N}=c,y=()=>{const _=tl.useManualTiming?i.timestamp:performance.now();a=!1,tl.useManualTiming||(i.delta=r?1e3/60:Math.max(Math.min(_-i.timestamp,hU),1)),i.timestamp=_,i.isProcessing=!0,u.process(i),f.process(i),x.process(i),h.process(i),p.process(i),g.process(i),b.process(i),N.process(i),i.isProcessing=!1,a&&s&&(r=!1,t(y))},S=()=>{a=!0,r=!0,i.isProcessing||t(y)};return{schedule:Bh.reduce((_,G)=>{const U=c[G];return _[G]=(F,k=!1,E=!1)=>(a||S(),U.schedule(F,k,E)),_},{}),cancel:_=>{for(let G=0;G<Bh.length;G++)c[Bh[G]].cancel(_)},state:i,steps:c}}const{schedule:xa,cancel:Ul,state:mr,steps:L0}=qk(typeof requestAnimationFrame<"u"?requestAnimationFrame:Ln,!0);let Xh;function fU(){Xh=void 0}const Yr={now:()=>(Xh===void 0&&Yr.set(mr.isProcessing||tl.useManualTiming?mr.timestamp:performance.now()),Xh),set:t=>{Xh=t,queueMicrotask(fU)}},Kk=t=>s=>typeof s=="string"&&s.startsWith(t),fj=Kk("--"),xU=Kk("var(--"),xj=t=>xU(t)?pU.test(t.split("/*")[0].trim()):!1,pU=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,fd={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Hu={...fd,transform:t=>el(0,1,t)},zh={...fd,default:1},Cu=t=>Math.round(t*1e5)/1e5,pj=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function gU(t){return t==null}const vU=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,gj=(t,s)=>a=>!!(typeof a=="string"&&vU.test(a)&&a.startsWith(t)||s&&!gU(a)&&Object.prototype.hasOwnProperty.call(a,s)),Yk=(t,s,a)=>r=>{if(typeof r!="string")return r;const[i,o,c,u]=r.match(pj);return{[t]:parseFloat(i),[s]:parseFloat(o),[a]:parseFloat(c),alpha:u!==void 0?parseFloat(u):1}},jU=t=>el(0,255,t),B0={...fd,transform:t=>Math.round(jU(t))},jo={test:gj("rgb","red"),parse:Yk("red","green","blue"),transform:({red:t,green:s,blue:a,alpha:r=1})=>"rgba("+B0.transform(t)+", "+B0.transform(s)+", "+B0.transform(a)+", "+Cu(Hu.transform(r))+")"};function yU(t){let s="",a="",r="",i="";return t.length>5?(s=t.substring(1,3),a=t.substring(3,5),r=t.substring(5,7),i=t.substring(7,9)):(s=t.substring(1,2),a=t.substring(2,3),r=t.substring(3,4),i=t.substring(4,5),s+=s,a+=a,r+=r,i+=i),{red:parseInt(s,16),green:parseInt(a,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const Ig={test:gj("#"),parse:yU,transform:jo.transform},cm=t=>({test:s=>typeof s=="string"&&s.endsWith(t)&&s.split(" ").length===1,parse:parseFloat,transform:s=>`${s}${t}`}),_l=cm("deg"),yi=cm("%"),Yt=cm("px"),NU=cm("vh"),bU=cm("vw"),s2={...yi,parse:t=>yi.parse(t)/100,transform:t=>yi.transform(t*100)},Rc={test:gj("hsl","hue"),parse:Yk("hue","saturation","lightness"),transform:({hue:t,saturation:s,lightness:a,alpha:r=1})=>"hsla("+Math.round(t)+", "+yi.transform(Cu(s))+", "+yi.transform(Cu(a))+", "+Cu(Hu.transform(r))+")"},Wa={test:t=>jo.test(t)||Ig.test(t)||Rc.test(t),parse:t=>jo.test(t)?jo.parse(t):Rc.test(t)?Rc.parse(t):Ig.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?jo.transform(t):Rc.transform(t),getAnimatableNone:t=>{const s=Wa.parse(t);return s.alpha=0,Wa.transform(s)}},wU=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function SU(t){return isNaN(t)&&typeof t=="string"&&(t.match(pj)?.length||0)+(t.match(wU)?.length||0)>0}const Xk="number",Qk="color",CU="var",TU="var(",a2="${}",kU=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Wu(t){const s=t.toString(),a=[],r={color:[],number:[],var:[]},i=[];let o=0;const u=s.replace(kU,f=>(Wa.test(f)?(r.color.push(o),i.push(Qk),a.push(Wa.parse(f))):f.startsWith(TU)?(r.var.push(o),i.push(CU),a.push(f)):(r.number.push(o),i.push(Xk),a.push(parseFloat(f))),++o,a2)).split(a2);return{values:a,split:u,indexes:r,types:i}}function Zk(t){return Wu(t).values}function Jk(t){const{split:s,types:a}=Wu(t),r=s.length;return i=>{let o="";for(let c=0;c<r;c++)if(o+=s[c],i[c]!==void 0){const u=a[c];u===Xk?o+=Cu(i[c]):u===Qk?o+=Wa.transform(i[c]):o+=i[c]}return o}}const EU=t=>typeof t=="number"?0:Wa.test(t)?Wa.getAnimatableNone(t):t;function AU(t){const s=Zk(t);return Jk(t)(s.map(EU))}const Vl={test:SU,parse:Zk,createTransformer:Jk,getAnimatableNone:AU};function z0(t,s,a){return a<0&&(a+=1),a>1&&(a-=1),a<1/6?t+(s-t)*6*a:a<1/2?s:a<2/3?t+(s-t)*(2/3-a)*6:t}function _U({hue:t,saturation:s,lightness:a,alpha:r}){t/=360,s/=100,a/=100;let i=0,o=0,c=0;if(!s)i=o=c=a;else{const u=a<.5?a*(1+s):a+s-a*s,f=2*a-u;i=z0(f,u,t+1/3),o=z0(f,u,t),c=z0(f,u,t-1/3)}return{red:Math.round(i*255),green:Math.round(o*255),blue:Math.round(c*255),alpha:r}}function Tf(t,s){return a=>a>0?s:t}const ja=(t,s,a)=>t+(s-t)*a,U0=(t,s,a)=>{const r=t*t,i=a*(s*s-r)+r;return i<0?0:Math.sqrt(i)},DU=[Ig,jo,Rc],OU=t=>DU.find(s=>s.test(t));function r2(t){const s=OU(t);if(!s)return!1;let a=s.parse(t);return s===Rc&&(a=_U(a)),a}const n2=(t,s)=>{const a=r2(t),r=r2(s);if(!a||!r)return Tf(t,s);const i={...a};return o=>(i.red=U0(a.red,r.red,o),i.green=U0(a.green,r.green,o),i.blue=U0(a.blue,r.blue,o),i.alpha=ja(a.alpha,r.alpha,o),jo.transform(i))},Lg=new Set(["none","hidden"]);function RU(t,s){return Lg.has(t)?a=>a<=0?t:s:a=>a>=1?s:t}function PU(t,s){return a=>ja(t,s,a)}function vj(t){return typeof t=="number"?PU:typeof t=="string"?xj(t)?Tf:Wa.test(t)?n2:IU:Array.isArray(t)?eE:typeof t=="object"?Wa.test(t)?n2:MU:Tf}function eE(t,s){const a=[...t],r=a.length,i=t.map((o,c)=>vj(o)(o,s[c]));return o=>{for(let c=0;c<r;c++)a[c]=i[c](o);return a}}function MU(t,s){const a={...t,...s},r={};for(const i in a)t[i]!==void 0&&s[i]!==void 0&&(r[i]=vj(t[i])(t[i],s[i]));return i=>{for(const o in r)a[o]=r[o](i);return a}}function FU(t,s){const a=[],r={color:0,var:0,number:0};for(let i=0;i<s.values.length;i++){const o=s.types[i],c=t.indexes[o][r[o]],u=t.values[c]??0;a[i]=u,r[o]++}return a}const IU=(t,s)=>{const a=Vl.createTransformer(s),r=Wu(t),i=Wu(s);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?Lg.has(t)&&!i.values.length||Lg.has(s)&&!r.values.length?RU(t,s):lm(eE(FU(r,i),i.values),a):Tf(t,s)};function tE(t,s,a){return typeof t=="number"&&typeof s=="number"&&typeof a=="number"?ja(t,s,a):vj(t)(t,s)}const LU=t=>{const s=({timestamp:a})=>t(a);return{start:(a=!0)=>xa.update(s,a),stop:()=>Ul(s),now:()=>mr.isProcessing?mr.timestamp:Yr.now()}},sE=(t,s,a=10)=>{let r="";const i=Math.max(Math.round(s/a),2);for(let o=0;o<i;o++)r+=Math.round(t(o/(i-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},kf=2e4;function jj(t){let s=0;const a=50;let r=t.next(s);for(;!r.done&&s<kf;)s+=a,r=t.next(s);return s>=kf?1/0:s}function BU(t,s=100,a){const r=a({...t,keyframes:[0,s]}),i=Math.min(jj(r),kf);return{type:"keyframes",ease:o=>r.next(i*o).value/s,duration:In(i)}}const zU=5;function aE(t,s,a){const r=Math.max(s-zU,0);return Fk(a-t(r),s-r)}const Ca={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},V0=.001;function UU({duration:t=Ca.duration,bounce:s=Ca.bounce,velocity:a=Ca.velocity,mass:r=Ca.mass}){let i,o,c=1-s;c=el(Ca.minDamping,Ca.maxDamping,c),t=el(Ca.minDuration,Ca.maxDuration,In(t)),c<1?(i=x=>{const h=x*c,p=h*t,g=h-a,b=Bg(x,c),N=Math.exp(-p);return V0-g/b*N},o=x=>{const p=x*c*t,g=p*a+a,b=Math.pow(c,2)*Math.pow(x,2)*t,N=Math.exp(-p),y=Bg(Math.pow(x,2),c);return(-i(x)+V0>0?-1:1)*((g-b)*N)/y}):(i=x=>{const h=Math.exp(-x*t),p=(x-a)*t+1;return-V0+h*p},o=x=>{const h=Math.exp(-x*t),p=(a-x)*(t*t);return h*p});const u=5/t,f=$U(i,o,u);if(t=ji(t),isNaN(f))return{stiffness:Ca.stiffness,damping:Ca.damping,duration:t};{const x=Math.pow(f,2)*r;return{stiffness:x,damping:c*2*Math.sqrt(r*x),duration:t}}}const VU=12;function $U(t,s,a){let r=a;for(let i=1;i<VU;i++)r=r-t(r)/s(r);return r}function Bg(t,s){return t*Math.sqrt(1-s*s)}const HU=["duration","bounce"],WU=["stiffness","damping","mass"];function i2(t,s){return s.some(a=>t[a]!==void 0)}function GU(t){let s={velocity:Ca.velocity,stiffness:Ca.stiffness,damping:Ca.damping,mass:Ca.mass,isResolvedFromDuration:!1,...t};if(!i2(t,WU)&&i2(t,HU))if(t.visualDuration){const a=t.visualDuration,r=2*Math.PI/(a*1.2),i=r*r,o=2*el(.05,1,1-(t.bounce||0))*Math.sqrt(i);s={...s,mass:Ca.mass,stiffness:i,damping:o}}else{const a=UU(t);s={...s,...a,mass:Ca.mass},s.isResolvedFromDuration=!0}return s}function Ef(t=Ca.visualDuration,s=Ca.bounce){const a=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:s}:t;let{restSpeed:r,restDelta:i}=a;const o=a.keyframes[0],c=a.keyframes[a.keyframes.length-1],u={done:!1,value:o},{stiffness:f,damping:x,mass:h,duration:p,velocity:g,isResolvedFromDuration:b}=GU({...a,velocity:-In(a.velocity||0)}),N=g||0,y=x/(2*Math.sqrt(f*h)),S=c-o,C=In(Math.sqrt(f/h)),T=Math.abs(S)<5;r||(r=T?Ca.restSpeed.granular:Ca.restSpeed.default),i||(i=T?Ca.restDelta.granular:Ca.restDelta.default);let _;if(y<1){const U=Bg(C,y);_=F=>{const k=Math.exp(-y*C*F);return c-k*((N+y*C*S)/U*Math.sin(U*F)+S*Math.cos(U*F))}}else if(y===1)_=U=>c-Math.exp(-C*U)*(S+(N+C*S)*U);else{const U=C*Math.sqrt(y*y-1);_=F=>{const k=Math.exp(-y*C*F),E=Math.min(U*F,300);return c-k*((N+y*C*S)*Math.sinh(E)+U*S*Math.cosh(E))/U}}const G={calculatedDuration:b&&p||null,next:U=>{const F=_(U);if(b)u.done=U>=p;else{let k=U===0?N:0;y<1&&(k=U===0?ji(N):aE(_,U,F));const E=Math.abs(k)<=r,A=Math.abs(c-F)<=i;u.done=E&&A}return u.value=u.done?c:F,u},toString:()=>{const U=Math.min(jj(G),kf),F=sE(k=>G.next(U*k).value,U,30);return U+"ms "+F},toTransition:()=>{}};return G}Ef.applyToOptions=t=>{const s=BU(t,100,Ef);return t.ease=s.ease,t.duration=ji(s.duration),t.type="keyframes",t};function zg({keyframes:t,velocity:s=0,power:a=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:o=500,modifyTarget:c,min:u,max:f,restDelta:x=.5,restSpeed:h}){const p=t[0],g={done:!1,value:p},b=E=>u!==void 0&&E<u||f!==void 0&&E>f,N=E=>u===void 0?f:f===void 0||Math.abs(u-E)<Math.abs(f-E)?u:f;let y=a*s;const S=p+y,C=c===void 0?S:c(S);C!==S&&(y=C-p);const T=E=>-y*Math.exp(-E/r),_=E=>C+T(E),G=E=>{const A=T(E),B=_(E);g.done=Math.abs(A)<=x,g.value=g.done?C:B};let U,F;const k=E=>{b(g.value)&&(U=E,F=Ef({keyframes:[g.value,N(g.value)],velocity:aE(_,E,g.value),damping:i,stiffness:o,restDelta:x,restSpeed:h}))};return k(0),{calculatedDuration:null,next:E=>{let A=!1;return!F&&U===void 0&&(A=!0,G(E),k(E)),U!==void 0&&E>=U?F.next(E-U):(!A&&G(E),g)}}}function qU(t,s,a){const r=[],i=a||tl.mix||tE,o=t.length-1;for(let c=0;c<o;c++){let u=i(t[c],t[c+1]);if(s){const f=Array.isArray(s)?s[c]||Ln:s;u=lm(f,u)}r.push(u)}return r}function KU(t,s,{clamp:a=!0,ease:r,mixer:i}={}){const o=t.length;if(cj(o===s.length),o===1)return()=>s[0];if(o===2&&s[0]===s[1])return()=>s[1];const c=t[0]===t[1];t[0]>t[o-1]&&(t=[...t].reverse(),s=[...s].reverse());const u=qU(s,r,i),f=u.length,x=h=>{if(c&&h<t[0])return s[0];let p=0;if(f>1)for(;p<t.length-2&&!(h<t[p+1]);p++);const g=$u(t[p],t[p+1],h);return u[p](g)};return a?h=>x(el(t[0],t[o-1],h)):x}function YU(t,s){const a=t[t.length-1];for(let r=1;r<=s;r++){const i=$u(0,s,r);t.push(ja(a,1,i))}}function XU(t){const s=[0];return YU(s,t.length-1),s}function QU(t,s){return t.map(a=>a*s)}function ZU(t,s){return t.map(()=>s||Wk).splice(0,t.length-1)}function Tu({duration:t=300,keyframes:s,times:a,ease:r="easeInOut"}){const i=cU(r)?r.map(t2):t2(r),o={done:!1,value:s[0]},c=QU(a&&a.length===s.length?a:XU(s),t),u=KU(c,s,{ease:Array.isArray(i)?i:ZU(s,i)});return{calculatedDuration:t,next:f=>(o.value=u(f),o.done=f>=t,o)}}const JU=t=>t!==null;function yj(t,{repeat:s,repeatType:a="loop"},r,i=1){const o=t.filter(JU),u=i<0||s&&a!=="loop"&&s%2===1?0:o.length-1;return!u||r===void 0?o[u]:r}const eV={decay:zg,inertia:zg,tween:Tu,keyframes:Tu,spring:Ef};function rE(t){typeof t.type=="string"&&(t.type=eV[t.type])}class Nj{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(s=>{this.resolve=s})}notifyFinished(){this.resolve()}then(s,a){return this.finished.then(s,a)}}const tV=t=>t/100;class bj extends Nj{constructor(s){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:a}=this.options;a&&a.updatedAt!==Yr.now()&&this.tick(Yr.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=s,this.initAnimation(),this.play(),s.autoplay===!1&&this.pause()}initAnimation(){const{options:s}=this;rE(s);const{type:a=Tu,repeat:r=0,repeatDelay:i=0,repeatType:o,velocity:c=0}=s;let{keyframes:u}=s;const f=a||Tu;f!==Tu&&typeof u[0]!="number"&&(this.mixKeyframes=lm(tV,tE(u[0],u[1])),u=[0,100]);const x=f({...s,keyframes:u});o==="mirror"&&(this.mirroredGenerator=f({...s,keyframes:[...u].reverse(),velocity:-c})),x.calculatedDuration===null&&(x.calculatedDuration=jj(x));const{calculatedDuration:h}=x;this.calculatedDuration=h,this.resolvedDuration=h+i,this.totalDuration=this.resolvedDuration*(r+1)-i,this.generator=x}updateTime(s){const a=Math.round(s-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=a}tick(s,a=!1){const{generator:r,totalDuration:i,mixKeyframes:o,mirroredGenerator:c,resolvedDuration:u,calculatedDuration:f}=this;if(this.startTime===null)return r.next(0);const{delay:x=0,keyframes:h,repeat:p,repeatType:g,repeatDelay:b,type:N,onUpdate:y,finalKeyframe:S}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,s):this.speed<0&&(this.startTime=Math.min(s-i/this.speed,this.startTime)),a?this.currentTime=s:this.updateTime(s);const C=this.currentTime-x*(this.playbackSpeed>=0?1:-1),T=this.playbackSpeed>=0?C<0:C>i;this.currentTime=Math.max(C,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=i);let _=this.currentTime,G=r;if(p){const E=Math.min(this.currentTime,i)/u;let A=Math.floor(E),B=E%1;!B&&E>=1&&(B=1),B===1&&A--,A=Math.min(A,p+1),!!(A%2)&&(g==="reverse"?(B=1-B,b&&(B-=b/u)):g==="mirror"&&(G=c)),_=el(0,1,B)*u}const U=T?{done:!1,value:h[0]}:G.next(_);o&&(U.value=o(U.value));let{done:F}=U;!T&&f!==null&&(F=this.playbackSpeed>=0?this.currentTime>=i:this.currentTime<=0);const k=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&F);return k&&N!==zg&&(U.value=yj(h,this.options,S,this.speed)),y&&y(U.value),k&&this.finish(),U}then(s,a){return this.finished.then(s,a)}get duration(){return In(this.calculatedDuration)}get iterationDuration(){const{delay:s=0}=this.options||{};return this.duration+In(s)}get time(){return In(this.currentTime)}set time(s){s=ji(s),this.currentTime=s,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=s:this.driver&&(this.startTime=this.driver.now()-s/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(s){this.updateTime(Yr.now());const a=this.playbackSpeed!==s;this.playbackSpeed=s,a&&(this.time=In(this.currentTime))}play(){if(this.isStopped)return;const{driver:s=LU,startTime:a}=this.options;this.driver||(this.driver=s(i=>this.tick(i))),this.options.onPlay?.();const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=a??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Yr.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(s){return this.startTime=0,this.tick(s,!0)}attachTimeline(s){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),s.observe(this)}}function sV(t){for(let s=1;s<t.length;s++)t[s]??(t[s]=t[s-1])}const yo=t=>t*180/Math.PI,Ug=t=>{const s=yo(Math.atan2(t[1],t[0]));return Vg(s)},aV={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:Ug,rotateZ:Ug,skewX:t=>yo(Math.atan(t[1])),skewY:t=>yo(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},Vg=t=>(t=t%360,t<0&&(t+=360),t),l2=Ug,o2=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),c2=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),rV={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:o2,scaleY:c2,scale:t=>(o2(t)+c2(t))/2,rotateX:t=>Vg(yo(Math.atan2(t[6],t[5]))),rotateY:t=>Vg(yo(Math.atan2(-t[2],t[0]))),rotateZ:l2,rotate:l2,skewX:t=>yo(Math.atan(t[4])),skewY:t=>yo(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function $g(t){return t.includes("scale")?1:0}function Hg(t,s){if(!t||t==="none")return $g(s);const a=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,i;if(a)r=rV,i=a;else{const u=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=aV,i=u}if(!i)return $g(s);const o=r[s],c=i[1].split(",").map(iV);return typeof o=="function"?o(c):c[o]}const nV=(t,s)=>{const{transform:a="none"}=getComputedStyle(t);return Hg(a,s)};function iV(t){return parseFloat(t.trim())}const xd=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],pd=new Set(xd),d2=t=>t===fd||t===Yt,lV=new Set(["x","y","z"]),oV=xd.filter(t=>!lV.has(t));function cV(t){const s=[];return oV.forEach(a=>{const r=t.getValue(a);r!==void 0&&(s.push([a,r.get()]),r.set(a.startsWith("scale")?1:0))}),s}const To={width:({x:t},{paddingLeft:s="0",paddingRight:a="0"})=>t.max-t.min-parseFloat(s)-parseFloat(a),height:({y:t},{paddingTop:s="0",paddingBottom:a="0"})=>t.max-t.min-parseFloat(s)-parseFloat(a),top:(t,{top:s})=>parseFloat(s),left:(t,{left:s})=>parseFloat(s),bottom:({y:t},{top:s})=>parseFloat(s)+(t.max-t.min),right:({x:t},{left:s})=>parseFloat(s)+(t.max-t.min),x:(t,{transform:s})=>Hg(s,"x"),y:(t,{transform:s})=>Hg(s,"y")};To.translateX=To.x;To.translateY=To.y;const ko=new Set;let Wg=!1,Gg=!1,qg=!1;function nE(){if(Gg){const t=Array.from(ko).filter(r=>r.needsMeasurement),s=new Set(t.map(r=>r.element)),a=new Map;s.forEach(r=>{const i=cV(r);i.length&&(a.set(r,i),r.render())}),t.forEach(r=>r.measureInitialState()),s.forEach(r=>{r.render();const i=a.get(r);i&&i.forEach(([o,c])=>{r.getValue(o)?.set(c)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}Gg=!1,Wg=!1,ko.forEach(t=>t.complete(qg)),ko.clear()}function iE(){ko.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(Gg=!0)})}function dV(){qg=!0,iE(),nE(),qg=!1}class wj{constructor(s,a,r,i,o,c=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...s],this.onComplete=a,this.name=r,this.motionValue=i,this.element=o,this.isAsync=c}scheduleResolve(){this.state="scheduled",this.isAsync?(ko.add(this),Wg||(Wg=!0,xa.read(iE),xa.resolveKeyframes(nE))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:s,name:a,element:r,motionValue:i}=this;if(s[0]===null){const o=i?.get(),c=s[s.length-1];if(o!==void 0)s[0]=o;else if(r&&a){const u=r.readValue(a,c);u!=null&&(s[0]=u)}s[0]===void 0&&(s[0]=c),i&&o===void 0&&i.set(s[0])}sV(s)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(s=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,s),ko.delete(this)}cancel(){this.state==="scheduled"&&(ko.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const uV=t=>t.startsWith("--");function mV(t,s,a){uV(s)?t.style.setProperty(s,a):t.style[s]=a}const hV=dj(()=>window.ScrollTimeline!==void 0),fV={};function xV(t,s){const a=dj(t);return()=>fV[s]??a()}const lE=xV(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),xu=([t,s,a,r])=>`cubic-bezier(${t}, ${s}, ${a}, ${r})`,u2={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:xu([0,.65,.55,1]),circOut:xu([.55,0,1,.45]),backIn:xu([.31,.01,.66,-.59]),backOut:xu([.33,1.53,.69,.99])};function oE(t,s){if(t)return typeof t=="function"?lE()?sE(t,s):"ease-out":Gk(t)?xu(t):Array.isArray(t)?t.map(a=>oE(a,s)||u2.easeOut):u2[t]}function pV(t,s,a,{delay:r=0,duration:i=300,repeat:o=0,repeatType:c="loop",ease:u="easeOut",times:f}={},x=void 0){const h={[s]:a};f&&(h.offset=f);const p=oE(u,i);Array.isArray(p)&&(h.easing=p);const g={delay:r,duration:i,easing:Array.isArray(p)?"linear":p,fill:"both",iterations:o+1,direction:c==="reverse"?"alternate":"normal"};return x&&(g.pseudoElement=x),t.animate(h,g)}function cE(t){return typeof t=="function"&&"applyToOptions"in t}function gV({type:t,...s}){return cE(t)&&lE()?t.applyToOptions(s):(s.duration??(s.duration=300),s.ease??(s.ease="easeOut"),s)}class vV extends Nj{constructor(s){if(super(),this.finishedTime=null,this.isStopped=!1,!s)return;const{element:a,name:r,keyframes:i,pseudoElement:o,allowFlatten:c=!1,finalKeyframe:u,onComplete:f}=s;this.isPseudoElement=!!o,this.allowFlatten=c,this.options=s,cj(typeof s.type!="string");const x=gV(s);this.animation=pV(a,r,i,x,o),x.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!o){const h=yj(i,this.options,u,this.speed);this.updateMotionValue?this.updateMotionValue(h):mV(a,r,h),this.animation.cancel()}f?.(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:s}=this;s==="idle"||s==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const s=this.animation.effect?.getComputedTiming?.().duration||0;return In(Number(s))}get iterationDuration(){const{delay:s=0}=this.options||{};return this.duration+In(s)}get time(){return In(Number(this.animation.currentTime)||0)}set time(s){this.finishedTime=null,this.animation.currentTime=ji(s)}get speed(){return this.animation.playbackRate}set speed(s){s<0&&(this.finishedTime=null),this.animation.playbackRate=s}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(s){this.animation.startTime=s}attachTimeline({timeline:s,observe:a}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,s&&hV()?(this.animation.timeline=s,Ln):a(this)}}const dE={anticipate:Vk,backInOut:Uk,circInOut:Hk};function jV(t){return t in dE}function yV(t){typeof t.ease=="string"&&jV(t.ease)&&(t.ease=dE[t.ease])}const m2=10;class NV extends vV{constructor(s){yV(s),rE(s),super(s),s.startTime&&(this.startTime=s.startTime),this.options=s}updateMotionValue(s){const{motionValue:a,onUpdate:r,onComplete:i,element:o,...c}=this.options;if(!a)return;if(s!==void 0){a.set(s);return}const u=new bj({...c,autoplay:!1}),f=ji(this.finishedTime??this.time);a.setWithVelocity(u.sample(f-m2).value,u.sample(f).value,m2),u.stop()}}const h2=(t,s)=>s==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(Vl.test(t)||t==="0")&&!t.startsWith("url("));function bV(t){const s=t[0];if(t.length===1)return!0;for(let a=0;a<t.length;a++)if(t[a]!==s)return!0}function wV(t,s,a,r){const i=t[0];if(i===null)return!1;if(s==="display"||s==="visibility")return!0;const o=t[t.length-1],c=h2(i,s),u=h2(o,s);return!c||!u?!1:bV(t)||(a==="spring"||cE(a))&&r}function Kg(t){t.duration=0,t.type="keyframes"}const SV=new Set(["opacity","clipPath","filter","transform"]),CV=dj(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function TV(t){const{motionValue:s,name:a,repeatDelay:r,repeatType:i,damping:o,type:c}=t;if(!(s?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:f,transformTemplate:x}=s.owner.getProps();return CV()&&a&&SV.has(a)&&(a!=="transform"||!x)&&!f&&!r&&i!=="mirror"&&o!==0&&c!=="inertia"}const kV=40;class EV extends Nj{constructor({autoplay:s=!0,delay:a=0,type:r="keyframes",repeat:i=0,repeatDelay:o=0,repeatType:c="loop",keyframes:u,name:f,motionValue:x,element:h,...p}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=Yr.now();const g={autoplay:s,delay:a,type:r,repeat:i,repeatDelay:o,repeatType:c,name:f,motionValue:x,element:h,...p},b=h?.KeyframeResolver||wj;this.keyframeResolver=new b(u,(N,y,S)=>this.onKeyframesResolved(N,y,g,!S),f,x,h),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(s,a,r,i){this.keyframeResolver=void 0;const{name:o,type:c,velocity:u,delay:f,isHandoff:x,onUpdate:h}=r;this.resolvedAt=Yr.now(),wV(s,o,c,u)||((tl.instantAnimations||!f)&&h?.(yj(s,r,a)),s[0]=s[s.length-1],Kg(r),r.repeat=0);const g={startTime:i?this.resolvedAt?this.resolvedAt-this.createdAt>kV?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:a,...r,keyframes:s},b=!x&&TV(g)?new NV({...g,element:g.motionValue.owner.current}):new bj(g);b.finished.then(()=>this.notifyFinished()).catch(Ln),this.pendingTimeline&&(this.stopTimeline=b.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=b}get finished(){return this._animation?this.animation.finished:this._finished}then(s,a){return this.finished.finally(s).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),dV()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(s){this.animation.time=s}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(s){this.animation.speed=s}get startTime(){return this.animation.startTime}attachTimeline(s){return this._animation?this.stopTimeline=this.animation.attachTimeline(s):this.pendingTimeline=s,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}const AV=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function _V(t){const s=AV.exec(t);if(!s)return[,];const[,a,r,i]=s;return[`--${a??r}`,i]}function uE(t,s,a=1){const[r,i]=_V(t);if(!r)return;const o=window.getComputedStyle(s).getPropertyValue(r);if(o){const c=o.trim();return Rk(c)?parseFloat(c):c}return xj(i)?uE(i,s,a+1):i}function Sj(t,s){return t?.[s]??t?.default??t}const mE=new Set(["width","height","top","left","right","bottom",...xd]),DV={test:t=>t==="auto",parse:t=>t},hE=t=>s=>s.test(t),fE=[fd,Yt,yi,_l,bU,NU,DV],f2=t=>fE.find(hE(t));function OV(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||Mk(t):!0}const RV=new Set(["brightness","contrast","saturate","opacity"]);function PV(t){const[s,a]=t.slice(0,-1).split("(");if(s==="drop-shadow")return t;const[r]=a.match(pj)||[];if(!r)return t;const i=a.replace(r,"");let o=RV.has(s)?1:0;return r!==a&&(o*=100),s+"("+o+i+")"}const MV=/\b([a-z-]*)\(.*?\)/gu,Yg={...Vl,getAnimatableNone:t=>{const s=t.match(MV);return s?s.map(PV).join(" "):t}},x2={...fd,transform:Math.round},FV={rotate:_l,rotateX:_l,rotateY:_l,rotateZ:_l,scale:zh,scaleX:zh,scaleY:zh,scaleZ:zh,skew:_l,skewX:_l,skewY:_l,distance:Yt,translateX:Yt,translateY:Yt,translateZ:Yt,x:Yt,y:Yt,z:Yt,perspective:Yt,transformPerspective:Yt,opacity:Hu,originX:s2,originY:s2,originZ:Yt},Cj={borderWidth:Yt,borderTopWidth:Yt,borderRightWidth:Yt,borderBottomWidth:Yt,borderLeftWidth:Yt,borderRadius:Yt,radius:Yt,borderTopLeftRadius:Yt,borderTopRightRadius:Yt,borderBottomRightRadius:Yt,borderBottomLeftRadius:Yt,width:Yt,maxWidth:Yt,height:Yt,maxHeight:Yt,top:Yt,right:Yt,bottom:Yt,left:Yt,padding:Yt,paddingTop:Yt,paddingRight:Yt,paddingBottom:Yt,paddingLeft:Yt,margin:Yt,marginTop:Yt,marginRight:Yt,marginBottom:Yt,marginLeft:Yt,backgroundPositionX:Yt,backgroundPositionY:Yt,...FV,zIndex:x2,fillOpacity:Hu,strokeOpacity:Hu,numOctaves:x2},IV={...Cj,color:Wa,backgroundColor:Wa,outlineColor:Wa,fill:Wa,stroke:Wa,borderColor:Wa,borderTopColor:Wa,borderRightColor:Wa,borderBottomColor:Wa,borderLeftColor:Wa,filter:Yg,WebkitFilter:Yg},xE=t=>IV[t];function pE(t,s){let a=xE(t);return a!==Yg&&(a=Vl),a.getAnimatableNone?a.getAnimatableNone(s):void 0}const LV=new Set(["auto","none","0"]);function BV(t,s,a){let r=0,i;for(;r<t.length&&!i;){const o=t[r];typeof o=="string"&&!LV.has(o)&&Wu(o).values.length&&(i=t[r]),r++}if(i&&a)for(const o of s)t[o]=pE(a,i)}class zV extends wj{constructor(s,a,r,i,o){super(s,a,r,i,o,!0)}readKeyframes(){const{unresolvedKeyframes:s,element:a,name:r}=this;if(!a||!a.current)return;super.readKeyframes();for(let f=0;f<s.length;f++){let x=s[f];if(typeof x=="string"&&(x=x.trim(),xj(x))){const h=uE(x,a.current);h!==void 0&&(s[f]=h),f===s.length-1&&(this.finalKeyframe=x)}}if(this.resolveNoneKeyframes(),!mE.has(r)||s.length!==2)return;const[i,o]=s,c=f2(i),u=f2(o);if(c!==u)if(d2(c)&&d2(u))for(let f=0;f<s.length;f++){const x=s[f];typeof x=="string"&&(s[f]=parseFloat(x))}else To[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:s,name:a}=this,r=[];for(let i=0;i<s.length;i++)(s[i]===null||OV(s[i]))&&r.push(i);r.length&&BV(s,r,a)}measureInitialState(){const{element:s,unresolvedKeyframes:a,name:r}=this;if(!s||!s.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=To[r](s.measureViewportBox(),window.getComputedStyle(s.current)),a[0]=this.measuredOrigin;const i=a[a.length-1];i!==void 0&&s.getValue(r,i).jump(i,!1)}measureEndState(){const{element:s,name:a,unresolvedKeyframes:r}=this;if(!s||!s.current)return;const i=s.getValue(a);i&&i.jump(this.measuredOrigin,!1);const o=r.length-1,c=r[o];r[o]=To[a](s.measureViewportBox(),window.getComputedStyle(s.current)),c!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=c),this.removedTransforms?.length&&this.removedTransforms.forEach(([u,f])=>{s.getValue(u).set(f)}),this.resolveNoneKeyframes()}}function UV(t,s,a){if(t instanceof EventTarget)return[t];if(typeof t=="string"){let r=document;const i=a?.[t]??r.querySelectorAll(t);return i?Array.from(i):[]}return Array.from(t)}const gE=(t,s)=>s&&typeof t=="number"?s.transform(t):t;function vE(t){return Pk(t)&&"offsetHeight"in t}const p2=30,VV=t=>!isNaN(parseFloat(t));class $V{constructor(s,a={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=r=>{const i=Yr.now();if(this.updatedAt!==i&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const o of this.dependents)o.dirty()},this.hasAnimated=!1,this.setCurrent(s),this.owner=a.owner}setCurrent(s){this.current=s,this.updatedAt=Yr.now(),this.canTrackVelocity===null&&s!==void 0&&(this.canTrackVelocity=VV(this.current))}setPrevFrameValue(s=this.current){this.prevFrameValue=s,this.prevUpdatedAt=this.updatedAt}onChange(s){return this.on("change",s)}on(s,a){this.events[s]||(this.events[s]=new uj);const r=this.events[s].add(a);return s==="change"?()=>{r(),xa.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const s in this.events)this.events[s].clear()}attach(s,a){this.passiveEffect=s,this.stopPassiveEffect=a}set(s){this.passiveEffect?this.passiveEffect(s,this.updateAndNotify):this.updateAndNotify(s)}setWithVelocity(s,a,r){this.set(a),this.prev=void 0,this.prevFrameValue=s,this.prevUpdatedAt=this.updatedAt-r}jump(s,a=!0){this.updateAndNotify(s),this.prev=s,this.prevUpdatedAt=this.prevFrameValue=void 0,a&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(s){this.dependents||(this.dependents=new Set),this.dependents.add(s)}removeDependent(s){this.dependents&&this.dependents.delete(s)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const s=Yr.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||s-this.updatedAt>p2)return 0;const a=Math.min(this.updatedAt-this.prevUpdatedAt,p2);return Fk(parseFloat(this.current)-parseFloat(this.prevFrameValue),a)}start(s){return this.stop(),new Promise(a=>{this.hasAnimated=!0,this.animation=s(a),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function ed(t,s){return new $V(t,s)}const{schedule:Tj}=qk(queueMicrotask,!1),Gn={x:!1,y:!1};function jE(){return Gn.x||Gn.y}function HV(t){return t==="x"||t==="y"?Gn[t]?null:(Gn[t]=!0,()=>{Gn[t]=!1}):Gn.x||Gn.y?null:(Gn.x=Gn.y=!0,()=>{Gn.x=Gn.y=!1})}function yE(t,s){const a=UV(t),r=new AbortController,i={passive:!0,...s,signal:r.signal};return[a,i,()=>r.abort()]}function g2(t){return!(t.pointerType==="touch"||jE())}function WV(t,s,a={}){const[r,i,o]=yE(t,a),c=u=>{if(!g2(u))return;const{target:f}=u,x=s(f,u);if(typeof x!="function"||!f)return;const h=p=>{g2(p)&&(x(p),f.removeEventListener("pointerleave",h))};f.addEventListener("pointerleave",h,i)};return r.forEach(u=>{u.addEventListener("pointerenter",c,i)}),o}const NE=(t,s)=>s?t===s?!0:NE(t,s.parentElement):!1,kj=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,GV=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function qV(t){return GV.has(t.tagName)||t.tabIndex!==-1}const Qh=new WeakSet;function v2(t){return s=>{s.key==="Enter"&&t(s)}}function $0(t,s){t.dispatchEvent(new PointerEvent("pointer"+s,{isPrimary:!0,bubbles:!0}))}const KV=(t,s)=>{const a=t.currentTarget;if(!a)return;const r=v2(()=>{if(Qh.has(a))return;$0(a,"down");const i=v2(()=>{$0(a,"up")}),o=()=>$0(a,"cancel");a.addEventListener("keyup",i,s),a.addEventListener("blur",o,s)});a.addEventListener("keydown",r,s),a.addEventListener("blur",()=>a.removeEventListener("keydown",r),s)};function j2(t){return kj(t)&&!jE()}function YV(t,s,a={}){const[r,i,o]=yE(t,a),c=u=>{const f=u.currentTarget;if(!j2(u))return;Qh.add(f);const x=s(f,u),h=(b,N)=>{window.removeEventListener("pointerup",p),window.removeEventListener("pointercancel",g),Qh.has(f)&&Qh.delete(f),j2(b)&&typeof x=="function"&&x(b,{success:N})},p=b=>{h(b,f===window||f===document||a.useGlobalTarget||NE(f,b.target))},g=b=>{h(b,!1)};window.addEventListener("pointerup",p,i),window.addEventListener("pointercancel",g,i)};return r.forEach(u=>{(a.useGlobalTarget?window:u).addEventListener("pointerdown",c,i),vE(u)&&(u.addEventListener("focus",x=>KV(x,i)),!qV(u)&&!u.hasAttribute("tabindex")&&(u.tabIndex=0))}),o}function bE(t){return Pk(t)&&"ownerSVGElement"in t}function XV(t){return bE(t)&&t.tagName==="svg"}const Ar=t=>!!(t&&t.getVelocity),QV=[...fE,Wa,Vl],ZV=t=>QV.find(hE(t)),Ej=v.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});function y2(t,s){if(typeof t=="function")return t(s);t!=null&&(t.current=s)}function JV(...t){return s=>{let a=!1;const r=t.map(i=>{const o=y2(i,s);return!a&&typeof o=="function"&&(a=!0),o});if(a)return()=>{for(let i=0;i<r.length;i++){const o=r[i];typeof o=="function"?o():y2(t[i],null)}}}}function e$(...t){return v.useCallback(JV(...t),t)}class t$ extends v.Component{getSnapshotBeforeUpdate(s){const a=this.props.childRef.current;if(a&&s.isPresent&&!this.props.isPresent){const r=a.offsetParent,i=vE(r)&&r.offsetWidth||0,o=this.props.sizeRef.current;o.height=a.offsetHeight||0,o.width=a.offsetWidth||0,o.top=a.offsetTop,o.left=a.offsetLeft,o.right=i-o.width-o.left}return null}componentDidUpdate(){}render(){return this.props.children}}function s$({children:t,isPresent:s,anchorX:a,root:r}){const i=v.useId(),o=v.useRef(null),c=v.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:u}=v.useContext(Ej),f=e$(o,t?.ref);return v.useInsertionEffect(()=>{const{width:x,height:h,top:p,left:g,right:b}=c.current;if(s||!o.current||!x||!h)return;const N=a==="left"?`left: ${g}`:`right: ${b}`;o.current.dataset.motionPopId=i;const y=document.createElement("style");u&&(y.nonce=u);const S=r??document.head;return S.appendChild(y),y.sheet&&y.sheet.insertRule(`
          [data-motion-pop-id="${i}"] {
            position: absolute !important;
            width: ${x}px !important;
            height: ${h}px !important;
            ${N}px !important;
            top: ${p}px !important;
          }
        `),()=>{S.contains(y)&&S.removeChild(y)}},[s]),e.jsx(t$,{isPresent:s,childRef:o,sizeRef:c,children:v.cloneElement(t,{ref:f})})}const a$=({children:t,initial:s,isPresent:a,onExitComplete:r,custom:i,presenceAffectsLayout:o,mode:c,anchorX:u,root:f})=>{const x=nj(r$),h=v.useId();let p=!0,g=v.useMemo(()=>(p=!1,{id:h,initial:s,isPresent:a,custom:i,onExitComplete:b=>{x.set(b,!0);for(const N of x.values())if(!N)return;r&&r()},register:b=>(x.set(b,!1),()=>x.delete(b))}),[a,x,r]);return o&&p&&(g={...g}),v.useMemo(()=>{x.forEach((b,N)=>x.set(N,!1))},[a]),v.useEffect(()=>{!a&&!x.size&&r&&r()},[a]),c==="popLayout"&&(t=e.jsx(s$,{isPresent:a,anchorX:u,root:f,children:t})),e.jsx(sx.Provider,{value:g,children:t})};function r$(){return new Map}function wE(t=!0){const s=v.useContext(sx);if(s===null)return[!0,null];const{isPresent:a,onExitComplete:r,register:i}=s,o=v.useId();v.useEffect(()=>{if(t)return i(o)},[t]);const c=v.useCallback(()=>t&&r&&r(o),[o,r,t]);return!a&&r?[!1,c]:[!0]}const Uh=t=>t.key||"";function N2(t){const s=[];return v.Children.forEach(t,a=>{v.isValidElement(a)&&s.push(a)}),s}const SE=({children:t,custom:s,initial:a=!0,onExitComplete:r,presenceAffectsLayout:i=!0,mode:o="sync",propagate:c=!1,anchorX:u="left",root:f})=>{const[x,h]=wE(c),p=v.useMemo(()=>N2(t),[t]),g=c&&!x?[]:p.map(Uh),b=v.useRef(!0),N=v.useRef(p),y=nj(()=>new Map),[S,C]=v.useState(p),[T,_]=v.useState(p);Ok(()=>{b.current=!1,N.current=p;for(let F=0;F<T.length;F++){const k=Uh(T[F]);g.includes(k)?y.delete(k):y.get(k)!==!0&&y.set(k,!1)}},[T,g.length,g.join("-")]);const G=[];if(p!==S){let F=[...p];for(let k=0;k<T.length;k++){const E=T[k],A=Uh(E);g.includes(A)||(F.splice(k,0,E),G.push(E))}return o==="wait"&&G.length&&(F=G),_(N2(F)),C(p),null}const{forceRender:U}=v.useContext(rj);return e.jsx(e.Fragment,{children:T.map(F=>{const k=Uh(F),E=c&&!x?!1:p===T||g.includes(k),A=()=>{if(y.has(k))y.set(k,!0);else return;let B=!0;y.forEach(H=>{H||(B=!1)}),B&&(U?.(),_(N.current),c&&h?.(),r&&r())};return e.jsx(a$,{isPresent:E,initial:!b.current||a?void 0:!1,custom:s,presenceAffectsLayout:i,mode:o,root:f,onExitComplete:E?void 0:A,anchorX:u,children:F},k)})})},CE=v.createContext({strict:!1}),b2={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},td={};for(const t in b2)td[t]={isEnabled:s=>b2[t].some(a=>!!s[a])};function n$(t){for(const s in t)td[s]={...td[s],...t[s]}}const i$=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Af(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||i$.has(t)}let TE=t=>!Af(t);function l$(t){typeof t=="function"&&(TE=s=>s.startsWith("on")?!Af(s):t(s))}try{l$(require("@emotion/is-prop-valid").default)}catch{}function o$(t,s,a){const r={};for(const i in t)i==="values"&&typeof t.values=="object"||(TE(i)||a===!0&&Af(i)||!s&&!Af(i)||t.draggable&&i.startsWith("onDrag"))&&(r[i]=t[i]);return r}const ax=v.createContext({});function rx(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function Gu(t){return typeof t=="string"||Array.isArray(t)}const Aj=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],_j=["initial",...Aj];function nx(t){return rx(t.animate)||_j.some(s=>Gu(t[s]))}function kE(t){return!!(nx(t)||t.variants)}function c$(t,s){if(nx(t)){const{initial:a,animate:r}=t;return{initial:a===!1||Gu(a)?a:void 0,animate:Gu(r)?r:void 0}}return t.inherit!==!1?s:{}}function d$(t){const{initial:s,animate:a}=c$(t,v.useContext(ax));return v.useMemo(()=>({initial:s,animate:a}),[w2(s),w2(a)])}function w2(t){return Array.isArray(t)?t.join(" "):t}const qu={};function u$(t){for(const s in t)qu[s]=t[s],fj(s)&&(qu[s].isCSSVariable=!0)}function EE(t,{layout:s,layoutId:a}){return pd.has(t)||t.startsWith("origin")||(s||a!==void 0)&&(!!qu[t]||t==="opacity")}const m$={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},h$=xd.length;function f$(t,s,a){let r="",i=!0;for(let o=0;o<h$;o++){const c=xd[o],u=t[c];if(u===void 0)continue;let f=!0;if(typeof u=="number"?f=u===(c.startsWith("scale")?1:0):f=parseFloat(u)===0,!f||a){const x=gE(u,Cj[c]);if(!f){i=!1;const h=m$[c]||c;r+=`${h}(${x}) `}a&&(s[c]=x)}}return r=r.trim(),a?r=a(s,i?"":r):i&&(r="none"),r}function Dj(t,s,a){const{style:r,vars:i,transformOrigin:o}=t;let c=!1,u=!1;for(const f in s){const x=s[f];if(pd.has(f)){c=!0;continue}else if(fj(f)){i[f]=x;continue}else{const h=gE(x,Cj[f]);f.startsWith("origin")?(u=!0,o[f]=h):r[f]=h}}if(s.transform||(c||a?r.transform=f$(s,t.transform,a):r.transform&&(r.transform="none")),u){const{originX:f="50%",originY:x="50%",originZ:h=0}=o;r.transformOrigin=`${f} ${x} ${h}`}}const Oj=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function AE(t,s,a){for(const r in s)!Ar(s[r])&&!EE(r,a)&&(t[r]=s[r])}function x$({transformTemplate:t},s){return v.useMemo(()=>{const a=Oj();return Dj(a,s,t),Object.assign({},a.vars,a.style)},[s])}function p$(t,s){const a=t.style||{},r={};return AE(r,a,t),Object.assign(r,x$(t,s)),r}function g$(t,s){const a={},r=p$(t,s);return t.drag&&t.dragListener!==!1&&(a.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(a.tabIndex=0),a.style=r,a}const v$={offset:"stroke-dashoffset",array:"stroke-dasharray"},j$={offset:"strokeDashoffset",array:"strokeDasharray"};function y$(t,s,a=1,r=0,i=!0){t.pathLength=1;const o=i?v$:j$;t[o.offset]=Yt.transform(-r);const c=Yt.transform(s),u=Yt.transform(a);t[o.array]=`${c} ${u}`}function _E(t,{attrX:s,attrY:a,attrScale:r,pathLength:i,pathSpacing:o=1,pathOffset:c=0,...u},f,x,h){if(Dj(t,u,x),f){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:p,style:g}=t;p.transform&&(g.transform=p.transform,delete p.transform),(g.transform||p.transformOrigin)&&(g.transformOrigin=p.transformOrigin??"50% 50%",delete p.transformOrigin),g.transform&&(g.transformBox=h?.transformBox??"fill-box",delete p.transformBox),s!==void 0&&(p.x=s),a!==void 0&&(p.y=a),r!==void 0&&(p.scale=r),i!==void 0&&y$(p,i,o,c,!1)}const DE=()=>({...Oj(),attrs:{}}),OE=t=>typeof t=="string"&&t.toLowerCase()==="svg";function N$(t,s,a,r){const i=v.useMemo(()=>{const o=DE();return _E(o,s,OE(r),t.transformTemplate,t.style),{...o.attrs,style:{...o.style}}},[s]);if(t.style){const o={};AE(o,t.style,t),i.style={...o,...i.style}}return i}const b$=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Rj(t){return typeof t!="string"||t.includes("-")?!1:!!(b$.indexOf(t)>-1||/[A-Z]/u.test(t))}function w$(t,s,a,{latestValues:r},i,o=!1){const u=(Rj(t)?N$:g$)(s,r,i,t),f=o$(s,typeof t=="string",o),x=t!==v.Fragment?{...f,...u,ref:a}:{},{children:h}=s,p=v.useMemo(()=>Ar(h)?h.get():h,[h]);return v.createElement(t,{...x,children:p})}function S2(t){const s=[{},{}];return t?.values.forEach((a,r)=>{s[0][r]=a.get(),s[1][r]=a.getVelocity()}),s}function Pj(t,s,a,r){if(typeof s=="function"){const[i,o]=S2(r);s=s(a!==void 0?a:t.custom,i,o)}if(typeof s=="string"&&(s=t.variants&&t.variants[s]),typeof s=="function"){const[i,o]=S2(r);s=s(a!==void 0?a:t.custom,i,o)}return s}function Zh(t){return Ar(t)?t.get():t}function S$({scrapeMotionValuesFromProps:t,createRenderState:s},a,r,i){return{latestValues:C$(a,r,i,t),renderState:s()}}function C$(t,s,a,r){const i={},o=r(t,{});for(const g in o)i[g]=Zh(o[g]);let{initial:c,animate:u}=t;const f=nx(t),x=kE(t);s&&x&&!f&&t.inherit!==!1&&(c===void 0&&(c=s.initial),u===void 0&&(u=s.animate));let h=a?a.initial===!1:!1;h=h||c===!1;const p=h?u:c;if(p&&typeof p!="boolean"&&!rx(p)){const g=Array.isArray(p)?p:[p];for(let b=0;b<g.length;b++){const N=Pj(t,g[b]);if(N){const{transitionEnd:y,transition:S,...C}=N;for(const T in C){let _=C[T];if(Array.isArray(_)){const G=h?_.length-1:0;_=_[G]}_!==null&&(i[T]=_)}for(const T in y)i[T]=y[T]}}}return i}const RE=t=>(s,a)=>{const r=v.useContext(ax),i=v.useContext(sx),o=()=>S$(t,s,r,i);return a?o():nj(o)};function Mj(t,s,a){const{style:r}=t,i={};for(const o in r)(Ar(r[o])||s.style&&Ar(s.style[o])||EE(o,t)||a?.getValue(o)?.liveStyle!==void 0)&&(i[o]=r[o]);return i}const T$=RE({scrapeMotionValuesFromProps:Mj,createRenderState:Oj});function PE(t,s,a){const r=Mj(t,s,a);for(const i in t)if(Ar(t[i])||Ar(s[i])){const o=xd.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[o]=t[i]}return r}const k$=RE({scrapeMotionValuesFromProps:PE,createRenderState:DE}),E$=Symbol.for("motionComponentSymbol");function Pc(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function A$(t,s,a){return v.useCallback(r=>{r&&t.onMount&&t.onMount(r),s&&(r?s.mount(r):s.unmount()),a&&(typeof a=="function"?a(r):Pc(a)&&(a.current=r))},[s])}const Fj=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),_$="framerAppearId",ME="data-"+Fj(_$),FE=v.createContext({});function D$(t,s,a,r,i){const{visualElement:o}=v.useContext(ax),c=v.useContext(CE),u=v.useContext(sx),f=v.useContext(Ej).reducedMotion,x=v.useRef(null);r=r||c.renderer,!x.current&&r&&(x.current=r(t,{visualState:s,parent:o,props:a,presenceContext:u,blockInitialAnimation:u?u.initial===!1:!1,reducedMotionConfig:f}));const h=x.current,p=v.useContext(FE);h&&!h.projection&&i&&(h.type==="html"||h.type==="svg")&&O$(x.current,a,i,p);const g=v.useRef(!1);v.useInsertionEffect(()=>{h&&g.current&&h.update(a,u)});const b=a[ME],N=v.useRef(!!b&&!window.MotionHandoffIsComplete?.(b)&&window.MotionHasOptimisedAnimation?.(b));return Ok(()=>{h&&(g.current=!0,window.MotionIsMounted=!0,h.updateFeatures(),h.scheduleRenderMicrotask(),N.current&&h.animationState&&h.animationState.animateChanges())}),v.useEffect(()=>{h&&(!N.current&&h.animationState&&h.animationState.animateChanges(),N.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(b)}),N.current=!1),h.enteringChildren=void 0)}),h}function O$(t,s,a,r){const{layoutId:i,layout:o,drag:c,dragConstraints:u,layoutScroll:f,layoutRoot:x,layoutCrossfade:h}=s;t.projection=new a(t.latestValues,s["data-framer-portal-id"]?void 0:IE(t.parent)),t.projection.setOptions({layoutId:i,layout:o,alwaysMeasureLayout:!!c||u&&Pc(u),visualElement:t,animationType:typeof o=="string"?o:"both",initialPromotionConfig:r,crossfade:h,layoutScroll:f,layoutRoot:x})}function IE(t){if(t)return t.options.allowProjection!==!1?t.projection:IE(t.parent)}function H0(t,{forwardMotionProps:s=!1}={},a,r){a&&n$(a);const i=Rj(t)?k$:T$;function o(u,f){let x;const h={...v.useContext(Ej),...u,layoutId:R$(u)},{isStatic:p}=h,g=d$(u),b=i(u,p);if(!p&&ij){P$();const N=M$(h);x=N.MeasureLayout,g.visualElement=D$(t,b,h,r,N.ProjectionNode)}return e.jsxs(ax.Provider,{value:g,children:[x&&g.visualElement?e.jsx(x,{visualElement:g.visualElement,...h}):null,w$(t,u,A$(b,g.visualElement,f),b,p,s)]})}o.displayName=`motion.${typeof t=="string"?t:`create(${t.displayName??t.name??""})`}`;const c=v.forwardRef(o);return c[E$]=t,c}function R$({layoutId:t}){const s=v.useContext(rj).id;return s&&t!==void 0?s+"-"+t:t}function P$(t,s){v.useContext(CE).strict}function M$(t){const{drag:s,layout:a}=td;if(!s&&!a)return{};const r={...s,...a};return{MeasureLayout:s?.isEnabled(t)||a?.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}function F$(t,s){if(typeof Proxy>"u")return H0;const a=new Map,r=(o,c)=>H0(o,c,t,s),i=(o,c)=>r(o,c);return new Proxy(i,{get:(o,c)=>c==="create"?r:(a.has(c)||a.set(c,H0(c,void 0,t,s)),a.get(c))})}function LE({top:t,left:s,right:a,bottom:r}){return{x:{min:s,max:a},y:{min:t,max:r}}}function I$({x:t,y:s}){return{top:s.min,right:t.max,bottom:s.max,left:t.min}}function L$(t,s){if(!s)return t;const a=s({x:t.left,y:t.top}),r=s({x:t.right,y:t.bottom});return{top:a.y,left:a.x,bottom:r.y,right:r.x}}function W0(t){return t===void 0||t===1}function Xg({scale:t,scaleX:s,scaleY:a}){return!W0(t)||!W0(s)||!W0(a)}function po(t){return Xg(t)||BE(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function BE(t){return C2(t.x)||C2(t.y)}function C2(t){return t&&t!=="0%"}function _f(t,s,a){const r=t-a,i=s*r;return a+i}function T2(t,s,a,r,i){return i!==void 0&&(t=_f(t,i,r)),_f(t,a,r)+s}function Qg(t,s=0,a=1,r,i){t.min=T2(t.min,s,a,r,i),t.max=T2(t.max,s,a,r,i)}function zE(t,{x:s,y:a}){Qg(t.x,s.translate,s.scale,s.originPoint),Qg(t.y,a.translate,a.scale,a.originPoint)}const k2=.999999999999,E2=1.0000000000001;function B$(t,s,a,r=!1){const i=a.length;if(!i)return;s.x=s.y=1;let o,c;for(let u=0;u<i;u++){o=a[u],c=o.projectionDelta;const{visualElement:f}=o.options;f&&f.props.style&&f.props.style.display==="contents"||(r&&o.options.layoutScroll&&o.scroll&&o!==o.root&&Fc(t,{x:-o.scroll.offset.x,y:-o.scroll.offset.y}),c&&(s.x*=c.x.scale,s.y*=c.y.scale,zE(t,c)),r&&po(o.latestValues)&&Fc(t,o.latestValues))}s.x<E2&&s.x>k2&&(s.x=1),s.y<E2&&s.y>k2&&(s.y=1)}function Mc(t,s){t.min=t.min+s,t.max=t.max+s}function A2(t,s,a,r,i=.5){const o=ja(t.min,t.max,i);Qg(t,s,a,o,r)}function Fc(t,s){A2(t.x,s.x,s.scaleX,s.scale,s.originX),A2(t.y,s.y,s.scaleY,s.scale,s.originY)}function UE(t,s){return LE(L$(t.getBoundingClientRect(),s))}function z$(t,s,a){const r=UE(t,a),{scroll:i}=s;return i&&(Mc(r.x,i.offset.x),Mc(r.y,i.offset.y)),r}const _2=()=>({translate:0,scale:1,origin:0,originPoint:0}),Ic=()=>({x:_2(),y:_2()}),D2=()=>({min:0,max:0}),Ra=()=>({x:D2(),y:D2()}),Zg={current:null},VE={current:!1};function U$(){if(VE.current=!0,!!ij)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),s=()=>Zg.current=t.matches;t.addEventListener("change",s),s()}else Zg.current=!1}const V$=new WeakMap;function $$(t,s,a){for(const r in s){const i=s[r],o=a[r];if(Ar(i))t.addValue(r,i);else if(Ar(o))t.addValue(r,ed(i,{owner:t}));else if(o!==i)if(t.hasValue(r)){const c=t.getValue(r);c.liveStyle===!0?c.jump(i):c.hasAnimated||c.set(i)}else{const c=t.getStaticValue(r);t.addValue(r,ed(c!==void 0?c:i,{owner:t}))}}for(const r in a)s[r]===void 0&&t.removeValue(r);return s}const O2=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class H${scrapeMotionValuesFromProps(s,a,r){return{}}constructor({parent:s,props:a,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:o,visualState:c},u={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=wj,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const g=Yr.now();this.renderScheduledAt<g&&(this.renderScheduledAt=g,xa.render(this.render,!1,!0))};const{latestValues:f,renderState:x}=c;this.latestValues=f,this.baseTarget={...f},this.initialValues=a.initial?{...f}:{},this.renderState=x,this.parent=s,this.props=a,this.presenceContext=r,this.depth=s?s.depth+1:0,this.reducedMotionConfig=i,this.options=u,this.blockInitialAnimation=!!o,this.isControllingVariants=nx(a),this.isVariantNode=kE(a),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(s&&s.current);const{willChange:h,...p}=this.scrapeMotionValuesFromProps(a,{},this);for(const g in p){const b=p[g];f[g]!==void 0&&Ar(b)&&b.set(f[g])}}mount(s){this.current=s,V$.set(s,this),this.projection&&!this.projection.instance&&this.projection.mount(s),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((a,r)=>this.bindToMotionValue(r,a)),VE.current||U$(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Zg.current,this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),Ul(this.notifyUpdate),Ul(this.render),this.valueSubscriptions.forEach(s=>s()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const s in this.events)this.events[s].clear();for(const s in this.features){const a=this.features[s];a&&(a.unmount(),a.isMounted=!1)}this.current=null}addChild(s){this.children.add(s),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(s)}removeChild(s){this.children.delete(s),this.enteringChildren&&this.enteringChildren.delete(s)}bindToMotionValue(s,a){this.valueSubscriptions.has(s)&&this.valueSubscriptions.get(s)();const r=pd.has(s);r&&this.onBindTransform&&this.onBindTransform();const i=a.on("change",c=>{this.latestValues[s]=c,this.props.onUpdate&&xa.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let o;window.MotionCheckAppearSync&&(o=window.MotionCheckAppearSync(this,s,a)),this.valueSubscriptions.set(s,()=>{i(),o&&o(),a.owner&&a.stop()})}sortNodePosition(s){return!this.current||!this.sortInstanceNodePosition||this.type!==s.type?0:this.sortInstanceNodePosition(this.current,s.current)}updateFeatures(){let s="animation";for(s in td){const a=td[s];if(!a)continue;const{isEnabled:r,Feature:i}=a;if(!this.features[s]&&i&&r(this.props)&&(this.features[s]=new i(this)),this.features[s]){const o=this.features[s];o.isMounted?o.update():(o.mount(),o.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Ra()}getStaticValue(s){return this.latestValues[s]}setStaticValue(s,a){this.latestValues[s]=a}update(s,a){(s.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=s,this.prevPresenceContext=this.presenceContext,this.presenceContext=a;for(let r=0;r<O2.length;r++){const i=O2[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const o="on"+i,c=s[o];c&&(this.propEventSubscriptions[i]=this.on(i,c))}this.prevMotionValues=$$(this,this.scrapeMotionValuesFromProps(s,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(s){return this.props.variants?this.props.variants[s]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(s){const a=this.getClosestVariantNode();if(a)return a.variantChildren&&a.variantChildren.add(s),()=>a.variantChildren.delete(s)}addValue(s,a){const r=this.values.get(s);a!==r&&(r&&this.removeValue(s),this.bindToMotionValue(s,a),this.values.set(s,a),this.latestValues[s]=a.get())}removeValue(s){this.values.delete(s);const a=this.valueSubscriptions.get(s);a&&(a(),this.valueSubscriptions.delete(s)),delete this.latestValues[s],this.removeValueFromRenderState(s,this.renderState)}hasValue(s){return this.values.has(s)}getValue(s,a){if(this.props.values&&this.props.values[s])return this.props.values[s];let r=this.values.get(s);return r===void 0&&a!==void 0&&(r=ed(a===null?void 0:a,{owner:this}),this.addValue(s,r)),r}readValue(s,a){let r=this.latestValues[s]!==void 0||!this.current?this.latestValues[s]:this.getBaseTargetFromProps(this.props,s)??this.readValueFromInstance(this.current,s,this.options);return r!=null&&(typeof r=="string"&&(Rk(r)||Mk(r))?r=parseFloat(r):!ZV(r)&&Vl.test(a)&&(r=pE(s,a)),this.setBaseTarget(s,Ar(r)?r.get():r)),Ar(r)?r.get():r}setBaseTarget(s,a){this.baseTarget[s]=a}getBaseTarget(s){const{initial:a}=this.props;let r;if(typeof a=="string"||typeof a=="object"){const o=Pj(this.props,a,this.presenceContext?.custom);o&&(r=o[s])}if(a&&r!==void 0)return r;const i=this.getBaseTargetFromProps(this.props,s);return i!==void 0&&!Ar(i)?i:this.initialValues[s]!==void 0&&r===void 0?void 0:this.baseTarget[s]}on(s,a){return this.events[s]||(this.events[s]=new uj),this.events[s].add(a)}notify(s,...a){this.events[s]&&this.events[s].notify(...a)}scheduleRenderMicrotask(){Tj.render(this.render)}}class $E extends H${constructor(){super(...arguments),this.KeyframeResolver=zV}sortInstanceNodePosition(s,a){return s.compareDocumentPosition(a)&2?1:-1}getBaseTargetFromProps(s,a){return s.style?s.style[a]:void 0}removeValueFromRenderState(s,{vars:a,style:r}){delete a[s],delete r[s]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:s}=this.props;Ar(s)&&(this.childSubscription=s.on("change",a=>{this.current&&(this.current.textContent=`${a}`)}))}}function HE(t,{style:s,vars:a},r,i){const o=t.style;let c;for(c in s)o[c]=s[c];i?.applyProjectionStyles(o,r);for(c in a)o.setProperty(c,a[c])}function W$(t){return window.getComputedStyle(t)}class G$ extends $E{constructor(){super(...arguments),this.type="html",this.renderInstance=HE}readValueFromInstance(s,a){if(pd.has(a))return this.projection?.isProjecting?$g(a):nV(s,a);{const r=W$(s),i=(fj(a)?r.getPropertyValue(a):r[a])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(s,{transformPagePoint:a}){return UE(s,a)}build(s,a,r){Dj(s,a,r.transformTemplate)}scrapeMotionValuesFromProps(s,a,r){return Mj(s,a,r)}}const WE=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function q$(t,s,a,r){HE(t,s,void 0,r);for(const i in s.attrs)t.setAttribute(WE.has(i)?i:Fj(i),s.attrs[i])}class K$ extends $E{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Ra}getBaseTargetFromProps(s,a){return s[a]}readValueFromInstance(s,a){if(pd.has(a)){const r=xE(a);return r&&r.default||0}return a=WE.has(a)?a:Fj(a),s.getAttribute(a)}scrapeMotionValuesFromProps(s,a,r){return PE(s,a,r)}build(s,a,r){_E(s,a,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(s,a,r,i){q$(s,a,r,i)}mount(s){this.isSVGTag=OE(s.tagName),super.mount(s)}}const Y$=(t,s)=>Rj(t)?new K$(s):new G$(s,{allowProjection:t!==v.Fragment});function Gc(t,s,a){const r=t.getProps();return Pj(r,s,a!==void 0?a:r.custom,t)}const Jg=t=>Array.isArray(t);function X$(t,s,a){t.hasValue(s)?t.getValue(s).set(a):t.addValue(s,ed(a))}function Q$(t){return Jg(t)?t[t.length-1]||0:t}function Z$(t,s){const a=Gc(t,s);let{transitionEnd:r={},transition:i={},...o}=a||{};o={...o,...r};for(const c in o){const u=Q$(o[c]);X$(t,c,u)}}function J$(t){return!!(Ar(t)&&t.add)}function ev(t,s){const a=t.getValue("willChange");if(J$(a))return a.add(s);if(!a&&tl.WillChange){const r=new tl.WillChange("auto");t.addValue("willChange",r),r.add(s)}}function GE(t){return t.props[ME]}const eH=t=>t!==null;function tH(t,{repeat:s,repeatType:a="loop"},r){const i=t.filter(eH),o=s&&a!=="loop"&&s%2===1?0:i.length-1;return i[o]}const sH={type:"spring",stiffness:500,damping:25,restSpeed:10},aH=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),rH={type:"keyframes",duration:.8},nH={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},iH=(t,{keyframes:s})=>s.length>2?rH:pd.has(t)?t.startsWith("scale")?aH(s[1]):sH:nH;function lH({when:t,delay:s,delayChildren:a,staggerChildren:r,staggerDirection:i,repeat:o,repeatType:c,repeatDelay:u,from:f,elapsed:x,...h}){return!!Object.keys(h).length}const Ij=(t,s,a,r={},i,o)=>c=>{const u=Sj(r,t)||{},f=u.delay||r.delay||0;let{elapsed:x=0}=r;x=x-ji(f);const h={keyframes:Array.isArray(a)?a:[null,a],ease:"easeOut",velocity:s.getVelocity(),...u,delay:-x,onUpdate:g=>{s.set(g),u.onUpdate&&u.onUpdate(g)},onComplete:()=>{c(),u.onComplete&&u.onComplete()},name:t,motionValue:s,element:o?void 0:i};lH(u)||Object.assign(h,iH(t,h)),h.duration&&(h.duration=ji(h.duration)),h.repeatDelay&&(h.repeatDelay=ji(h.repeatDelay)),h.from!==void 0&&(h.keyframes[0]=h.from);let p=!1;if((h.type===!1||h.duration===0&&!h.repeatDelay)&&(Kg(h),h.delay===0&&(p=!0)),(tl.instantAnimations||tl.skipAnimations)&&(p=!0,Kg(h),h.delay=0),h.allowFlatten=!u.type&&!u.ease,p&&!o&&s.get()!==void 0){const g=tH(h.keyframes,u);if(g!==void 0){xa.update(()=>{h.onUpdate(g),h.onComplete()});return}}return u.isSync?new bj(h):new EV(h)};function oH({protectedKeys:t,needsAnimating:s},a){const r=t.hasOwnProperty(a)&&s[a]!==!0;return s[a]=!1,r}function qE(t,s,{delay:a=0,transitionOverride:r,type:i}={}){let{transition:o=t.getDefaultTransition(),transitionEnd:c,...u}=s;r&&(o=r);const f=[],x=i&&t.animationState&&t.animationState.getState()[i];for(const h in u){const p=t.getValue(h,t.latestValues[h]??null),g=u[h];if(g===void 0||x&&oH(x,h))continue;const b={delay:a,...Sj(o||{},h)},N=p.get();if(N!==void 0&&!p.isAnimating&&!Array.isArray(g)&&g===N&&!b.velocity)continue;let y=!1;if(window.MotionHandoffAnimation){const C=GE(t);if(C){const T=window.MotionHandoffAnimation(C,h,xa);T!==null&&(b.startTime=T,y=!0)}}ev(t,h),p.start(Ij(h,p,g,t.shouldReduceMotion&&mE.has(h)?{type:!1}:b,t,y));const S=p.animation;S&&f.push(S)}return c&&Promise.all(f).then(()=>{xa.update(()=>{c&&Z$(t,c)})}),f}function KE(t,s,a,r=0,i=1){const o=Array.from(t).sort((x,h)=>x.sortNodePosition(h)).indexOf(s),c=t.size,u=(c-1)*r;return typeof a=="function"?a(o,c):i===1?o*r:u-o*r}function tv(t,s,a={}){const r=Gc(t,s,a.type==="exit"?t.presenceContext?.custom:void 0);let{transition:i=t.getDefaultTransition()||{}}=r||{};a.transitionOverride&&(i=a.transitionOverride);const o=r?()=>Promise.all(qE(t,r,a)):()=>Promise.resolve(),c=t.variantChildren&&t.variantChildren.size?(f=0)=>{const{delayChildren:x=0,staggerChildren:h,staggerDirection:p}=i;return cH(t,s,f,x,h,p,a)}:()=>Promise.resolve(),{when:u}=i;if(u){const[f,x]=u==="beforeChildren"?[o,c]:[c,o];return f().then(()=>x())}else return Promise.all([o(),c(a.delay)])}function cH(t,s,a=0,r=0,i=0,o=1,c){const u=[];for(const f of t.variantChildren)f.notify("AnimationStart",s),u.push(tv(f,s,{...c,delay:a+(typeof r=="function"?0:r)+KE(t.variantChildren,f,r,i,o)}).then(()=>f.notify("AnimationComplete",s)));return Promise.all(u)}function dH(t,s,a={}){t.notify("AnimationStart",s);let r;if(Array.isArray(s)){const i=s.map(o=>tv(t,o,a));r=Promise.all(i)}else if(typeof s=="string")r=tv(t,s,a);else{const i=typeof s=="function"?Gc(t,s,a.custom):s;r=Promise.all(qE(t,i,a))}return r.then(()=>{t.notify("AnimationComplete",s)})}function YE(t,s){if(!Array.isArray(s))return!1;const a=s.length;if(a!==t.length)return!1;for(let r=0;r<a;r++)if(s[r]!==t[r])return!1;return!0}const uH=_j.length;function XE(t){if(!t)return;if(!t.isControllingVariants){const a=t.parent?XE(t.parent)||{}:{};return t.props.initial!==void 0&&(a.initial=t.props.initial),a}const s={};for(let a=0;a<uH;a++){const r=_j[a],i=t.props[r];(Gu(i)||i===!1)&&(s[r]=i)}return s}const mH=[...Aj].reverse(),hH=Aj.length;function fH(t){return s=>Promise.all(s.map(({animation:a,options:r})=>dH(t,a,r)))}function xH(t){let s=fH(t),a=R2(),r=!0;const i=f=>(x,h)=>{const p=Gc(t,h,f==="exit"?t.presenceContext?.custom:void 0);if(p){const{transition:g,transitionEnd:b,...N}=p;x={...x,...N,...b}}return x};function o(f){s=f(t)}function c(f){const{props:x}=t,h=XE(t.parent)||{},p=[],g=new Set;let b={},N=1/0;for(let S=0;S<hH;S++){const C=mH[S],T=a[C],_=x[C]!==void 0?x[C]:h[C],G=Gu(_),U=C===f?T.isActive:null;U===!1&&(N=S);let F=_===h[C]&&_!==x[C]&&G;if(F&&r&&t.manuallyAnimateOnMount&&(F=!1),T.protectedKeys={...b},!T.isActive&&U===null||!_&&!T.prevProp||rx(_)||typeof _=="boolean")continue;const k=pH(T.prevProp,_);let E=k||C===f&&T.isActive&&!F&&G||S>N&&G,A=!1;const B=Array.isArray(_)?_:[_];let H=B.reduce(i(C),{});U===!1&&(H={});const{prevResolvedValues:M={}}=T,q={...M,...H},L=ee=>{E=!0,g.has(ee)&&(A=!0,g.delete(ee)),T.needsAnimating[ee]=!0;const me=t.getValue(ee);me&&(me.liveStyle=!1)};for(const ee in q){const me=H[ee],W=M[ee];if(b.hasOwnProperty(ee))continue;let se=!1;Jg(me)&&Jg(W)?se=!YE(me,W):se=me!==W,se?me!=null?L(ee):g.add(ee):me!==void 0&&g.has(ee)?L(ee):T.protectedKeys[ee]=!0}T.prevProp=_,T.prevResolvedValues=H,T.isActive&&(b={...b,...H}),r&&t.blockInitialAnimation&&(E=!1);const re=F&&k;E&&(!re||A)&&p.push(...B.map(ee=>{const me={type:C};if(typeof ee=="string"&&r&&!re&&t.manuallyAnimateOnMount&&t.parent){const{parent:W}=t,se=Gc(W,ee);if(W.enteringChildren&&se){const{delayChildren:Z}=se.transition||{};me.delay=KE(W.enteringChildren,t,Z)}}return{animation:ee,options:me}}))}if(g.size){const S={};if(typeof x.initial!="boolean"){const C=Gc(t,Array.isArray(x.initial)?x.initial[0]:x.initial);C&&C.transition&&(S.transition=C.transition)}g.forEach(C=>{const T=t.getBaseTarget(C),_=t.getValue(C);_&&(_.liveStyle=!0),S[C]=T??null}),p.push({animation:S})}let y=!!p.length;return r&&(x.initial===!1||x.initial===x.animate)&&!t.manuallyAnimateOnMount&&(y=!1),r=!1,y?s(p):Promise.resolve()}function u(f,x){if(a[f].isActive===x)return Promise.resolve();t.variantChildren?.forEach(p=>p.animationState?.setActive(f,x)),a[f].isActive=x;const h=c(f);for(const p in a)a[p].protectedKeys={};return h}return{animateChanges:c,setActive:u,setAnimateFunction:o,getState:()=>a,reset:()=>{a=R2()}}}function pH(t,s){return typeof s=="string"?s!==t:Array.isArray(s)?!YE(s,t):!1}function fo(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function R2(){return{animate:fo(!0),whileInView:fo(),whileHover:fo(),whileTap:fo(),whileDrag:fo(),whileFocus:fo(),exit:fo()}}class Kl{constructor(s){this.isMounted=!1,this.node=s}update(){}}class gH extends Kl{constructor(s){super(s),s.animationState||(s.animationState=xH(s))}updateAnimationControlsSubscription(){const{animate:s}=this.node.getProps();rx(s)&&(this.unmountControls=s.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:s}=this.node.getProps(),{animate:a}=this.node.prevProps||{};s!==a&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let vH=0;class jH extends Kl{constructor(){super(...arguments),this.id=vH++}update(){if(!this.node.presenceContext)return;const{isPresent:s,onExitComplete:a}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||s===r)return;const i=this.node.animationState.setActive("exit",!s);a&&!s&&i.then(()=>{a(this.id)})}mount(){const{register:s,onExitComplete:a}=this.node.presenceContext||{};a&&a(this.id),s&&(this.unmount=s(this.id))}unmount(){}}const yH={animation:{Feature:gH},exit:{Feature:jH}};function Ku(t,s,a,r={passive:!0}){return t.addEventListener(s,a,r),()=>t.removeEventListener(s,a)}function dm(t){return{point:{x:t.pageX,y:t.pageY}}}const NH=t=>s=>kj(s)&&t(s,dm(s));function ku(t,s,a,r){return Ku(t,s,NH(a),r)}const QE=1e-4,bH=1-QE,wH=1+QE,ZE=.01,SH=0-ZE,CH=0+ZE;function Ir(t){return t.max-t.min}function TH(t,s,a){return Math.abs(t-s)<=a}function P2(t,s,a,r=.5){t.origin=r,t.originPoint=ja(s.min,s.max,t.origin),t.scale=Ir(a)/Ir(s),t.translate=ja(a.min,a.max,t.origin)-t.originPoint,(t.scale>=bH&&t.scale<=wH||isNaN(t.scale))&&(t.scale=1),(t.translate>=SH&&t.translate<=CH||isNaN(t.translate))&&(t.translate=0)}function Eu(t,s,a,r){P2(t.x,s.x,a.x,r?r.originX:void 0),P2(t.y,s.y,a.y,r?r.originY:void 0)}function M2(t,s,a){t.min=a.min+s.min,t.max=t.min+Ir(s)}function kH(t,s,a){M2(t.x,s.x,a.x),M2(t.y,s.y,a.y)}function F2(t,s,a){t.min=s.min-a.min,t.max=t.min+Ir(s)}function Au(t,s,a){F2(t.x,s.x,a.x),F2(t.y,s.y,a.y)}function Dn(t){return[t("x"),t("y")]}const JE=({current:t})=>t?t.ownerDocument.defaultView:null,I2=(t,s)=>Math.abs(t-s);function EH(t,s){const a=I2(t.x,s.x),r=I2(t.y,s.y);return Math.sqrt(a**2+r**2)}class eA{constructor(s,a,{transformPagePoint:r,contextWindow:i=window,dragSnapToOrigin:o=!1,distanceThreshold:c=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const g=q0(this.lastMoveEventInfo,this.history),b=this.startEvent!==null,N=EH(g.offset,{x:0,y:0})>=this.distanceThreshold;if(!b&&!N)return;const{point:y}=g,{timestamp:S}=mr;this.history.push({...y,timestamp:S});const{onStart:C,onMove:T}=this.handlers;b||(C&&C(this.lastMoveEvent,g),this.startEvent=this.lastMoveEvent),T&&T(this.lastMoveEvent,g)},this.handlePointerMove=(g,b)=>{this.lastMoveEvent=g,this.lastMoveEventInfo=G0(b,this.transformPagePoint),xa.update(this.updatePoint,!0)},this.handlePointerUp=(g,b)=>{this.end();const{onEnd:N,onSessionEnd:y,resumeAnimation:S}=this.handlers;if(this.dragSnapToOrigin&&S&&S(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const C=q0(g.type==="pointercancel"?this.lastMoveEventInfo:G0(b,this.transformPagePoint),this.history);this.startEvent&&N&&N(g,C),y&&y(g,C)},!kj(s))return;this.dragSnapToOrigin=o,this.handlers=a,this.transformPagePoint=r,this.distanceThreshold=c,this.contextWindow=i||window;const u=dm(s),f=G0(u,this.transformPagePoint),{point:x}=f,{timestamp:h}=mr;this.history=[{...x,timestamp:h}];const{onSessionStart:p}=a;p&&p(s,q0(f,this.history)),this.removeListeners=lm(ku(this.contextWindow,"pointermove",this.handlePointerMove),ku(this.contextWindow,"pointerup",this.handlePointerUp),ku(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(s){this.handlers=s}end(){this.removeListeners&&this.removeListeners(),Ul(this.updatePoint)}}function G0(t,s){return s?{point:s(t.point)}:t}function L2(t,s){return{x:t.x-s.x,y:t.y-s.y}}function q0({point:t},s){return{point:t,delta:L2(t,tA(s)),offset:L2(t,AH(s)),velocity:_H(s,.1)}}function AH(t){return t[0]}function tA(t){return t[t.length-1]}function _H(t,s){if(t.length<2)return{x:0,y:0};let a=t.length-1,r=null;const i=tA(t);for(;a>=0&&(r=t[a],!(i.timestamp-r.timestamp>ji(s)));)a--;if(!r)return{x:0,y:0};const o=In(i.timestamp-r.timestamp);if(o===0)return{x:0,y:0};const c={x:(i.x-r.x)/o,y:(i.y-r.y)/o};return c.x===1/0&&(c.x=0),c.y===1/0&&(c.y=0),c}function DH(t,{min:s,max:a},r){return s!==void 0&&t<s?t=r?ja(s,t,r.min):Math.max(t,s):a!==void 0&&t>a&&(t=r?ja(a,t,r.max):Math.min(t,a)),t}function B2(t,s,a){return{min:s!==void 0?t.min+s:void 0,max:a!==void 0?t.max+a-(t.max-t.min):void 0}}function OH(t,{top:s,left:a,bottom:r,right:i}){return{x:B2(t.x,a,i),y:B2(t.y,s,r)}}function z2(t,s){let a=s.min-t.min,r=s.max-t.max;return s.max-s.min<t.max-t.min&&([a,r]=[r,a]),{min:a,max:r}}function RH(t,s){return{x:z2(t.x,s.x),y:z2(t.y,s.y)}}function PH(t,s){let a=.5;const r=Ir(t),i=Ir(s);return i>r?a=$u(s.min,s.max-r,t.min):r>i&&(a=$u(t.min,t.max-i,s.min)),el(0,1,a)}function MH(t,s){const a={};return s.min!==void 0&&(a.min=s.min-t.min),s.max!==void 0&&(a.max=s.max-t.min),a}const sv=.35;function FH(t=sv){return t===!1?t=0:t===!0&&(t=sv),{x:U2(t,"left","right"),y:U2(t,"top","bottom")}}function U2(t,s,a){return{min:V2(t,s),max:V2(t,a)}}function V2(t,s){return typeof t=="number"?t:t[s]||0}const IH=new WeakMap;class LH{constructor(s){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Ra(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=s}start(s,{snapToCursor:a=!1,distanceThreshold:r}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const o=p=>{const{dragSnapToOrigin:g}=this.getProps();g?this.pauseAnimation():this.stopAnimation(),a&&this.snapToCursor(dm(p).point)},c=(p,g)=>{const{drag:b,dragPropagation:N,onDragStart:y}=this.getProps();if(b&&!N&&(this.openDragLock&&this.openDragLock(),this.openDragLock=HV(b),!this.openDragLock))return;this.latestPointerEvent=p,this.latestPanInfo=g,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Dn(C=>{let T=this.getAxisMotionValue(C).get()||0;if(yi.test(T)){const{projection:_}=this.visualElement;if(_&&_.layout){const G=_.layout.layoutBox[C];G&&(T=Ir(G)*(parseFloat(T)/100))}}this.originPoint[C]=T}),y&&xa.postRender(()=>y(p,g)),ev(this.visualElement,"transform");const{animationState:S}=this.visualElement;S&&S.setActive("whileDrag",!0)},u=(p,g)=>{this.latestPointerEvent=p,this.latestPanInfo=g;const{dragPropagation:b,dragDirectionLock:N,onDirectionLock:y,onDrag:S}=this.getProps();if(!b&&!this.openDragLock)return;const{offset:C}=g;if(N&&this.currentDirection===null){this.currentDirection=BH(C),this.currentDirection!==null&&y&&y(this.currentDirection);return}this.updateAxis("x",g.point,C),this.updateAxis("y",g.point,C),this.visualElement.render(),S&&S(p,g)},f=(p,g)=>{this.latestPointerEvent=p,this.latestPanInfo=g,this.stop(p,g),this.latestPointerEvent=null,this.latestPanInfo=null},x=()=>Dn(p=>this.getAnimationState(p)==="paused"&&this.getAxisMotionValue(p).animation?.play()),{dragSnapToOrigin:h}=this.getProps();this.panSession=new eA(s,{onSessionStart:o,onStart:c,onMove:u,onSessionEnd:f,resumeAnimation:x},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:h,distanceThreshold:r,contextWindow:JE(this.visualElement)})}stop(s,a){const r=s||this.latestPointerEvent,i=a||this.latestPanInfo,o=this.isDragging;if(this.cancel(),!o||!i||!r)return;const{velocity:c}=i;this.startAnimation(c);const{onDragEnd:u}=this.getProps();u&&xa.postRender(()=>u(r,i))}cancel(){this.isDragging=!1;const{projection:s,animationState:a}=this.visualElement;s&&(s.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),a&&a.setActive("whileDrag",!1)}updateAxis(s,a,r){const{drag:i}=this.getProps();if(!r||!Vh(s,i,this.currentDirection))return;const o=this.getAxisMotionValue(s);let c=this.originPoint[s]+r[s];this.constraints&&this.constraints[s]&&(c=DH(c,this.constraints[s],this.elastic[s])),o.set(c)}resolveConstraints(){const{dragConstraints:s,dragElastic:a}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,i=this.constraints;s&&Pc(s)?this.constraints||(this.constraints=this.resolveRefConstraints()):s&&r?this.constraints=OH(r.layoutBox,s):this.constraints=!1,this.elastic=FH(a),i!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&Dn(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=MH(r.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:s,onMeasureDragConstraints:a}=this.getProps();if(!s||!Pc(s))return!1;const r=s.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const o=z$(r,i.root,this.visualElement.getTransformPagePoint());let c=RH(i.layout.layoutBox,o);if(a){const u=a(I$(c));this.hasMutatedConstraints=!!u,u&&(c=LE(u))}return c}startAnimation(s){const{drag:a,dragMomentum:r,dragElastic:i,dragTransition:o,dragSnapToOrigin:c,onDragTransitionEnd:u}=this.getProps(),f=this.constraints||{},x=Dn(h=>{if(!Vh(h,a,this.currentDirection))return;let p=f&&f[h]||{};c&&(p={min:0,max:0});const g=i?200:1e6,b=i?40:1e7,N={type:"inertia",velocity:r?s[h]:0,bounceStiffness:g,bounceDamping:b,timeConstant:750,restDelta:1,restSpeed:10,...o,...p};return this.startAxisValueAnimation(h,N)});return Promise.all(x).then(u)}startAxisValueAnimation(s,a){const r=this.getAxisMotionValue(s);return ev(this.visualElement,s),r.start(Ij(s,r,0,a,this.visualElement,!1))}stopAnimation(){Dn(s=>this.getAxisMotionValue(s).stop())}pauseAnimation(){Dn(s=>this.getAxisMotionValue(s).animation?.pause())}getAnimationState(s){return this.getAxisMotionValue(s).animation?.state}getAxisMotionValue(s){const a=`_drag${s.toUpperCase()}`,r=this.visualElement.getProps(),i=r[a];return i||this.visualElement.getValue(s,(r.initial?r.initial[s]:void 0)||0)}snapToCursor(s){Dn(a=>{const{drag:r}=this.getProps();if(!Vh(a,r,this.currentDirection))return;const{projection:i}=this.visualElement,o=this.getAxisMotionValue(a);if(i&&i.layout){const{min:c,max:u}=i.layout.layoutBox[a];o.set(s[a]-ja(c,u,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:s,dragConstraints:a}=this.getProps(),{projection:r}=this.visualElement;if(!Pc(a)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};Dn(c=>{const u=this.getAxisMotionValue(c);if(u&&this.constraints!==!1){const f=u.get();i[c]=PH({min:f,max:f},this.constraints[c])}});const{transformTemplate:o}=this.visualElement.getProps();this.visualElement.current.style.transform=o?o({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),Dn(c=>{if(!Vh(c,s,null))return;const u=this.getAxisMotionValue(c),{min:f,max:x}=this.constraints[c];u.set(ja(f,x,i[c]))})}addListeners(){if(!this.visualElement.current)return;IH.set(this.visualElement,this);const s=this.visualElement.current,a=ku(s,"pointerdown",f=>{const{drag:x,dragListener:h=!0}=this.getProps();x&&h&&this.start(f)}),r=()=>{const{dragConstraints:f}=this.getProps();Pc(f)&&f.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,o=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),xa.read(r);const c=Ku(window,"resize",()=>this.scalePositionWithinConstraints()),u=i.addEventListener("didUpdate",(({delta:f,hasLayoutChanged:x})=>{this.isDragging&&x&&(Dn(h=>{const p=this.getAxisMotionValue(h);p&&(this.originPoint[h]+=f[h].translate,p.set(p.get()+f[h].translate))}),this.visualElement.render())}));return()=>{c(),a(),o(),u&&u()}}getProps(){const s=this.visualElement.getProps(),{drag:a=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:o=!1,dragElastic:c=sv,dragMomentum:u=!0}=s;return{...s,drag:a,dragDirectionLock:r,dragPropagation:i,dragConstraints:o,dragElastic:c,dragMomentum:u}}}function Vh(t,s,a){return(s===!0||s===t)&&(a===null||a===t)}function BH(t,s=10){let a=null;return Math.abs(t.y)>s?a="y":Math.abs(t.x)>s&&(a="x"),a}class zH extends Kl{constructor(s){super(s),this.removeGroupControls=Ln,this.removeListeners=Ln,this.controls=new LH(s)}mount(){const{dragControls:s}=this.node.getProps();s&&(this.removeGroupControls=s.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Ln}unmount(){this.removeGroupControls(),this.removeListeners()}}const $2=t=>(s,a)=>{t&&xa.postRender(()=>t(s,a))};class UH extends Kl{constructor(){super(...arguments),this.removePointerDownListener=Ln}onPointerDown(s){this.session=new eA(s,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:JE(this.node)})}createPanHandlers(){const{onPanSessionStart:s,onPanStart:a,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:$2(s),onStart:$2(a),onMove:r,onEnd:(o,c)=>{delete this.session,i&&xa.postRender(()=>i(o,c))}}}mount(){this.removePointerDownListener=ku(this.node.current,"pointerdown",s=>this.onPointerDown(s))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Jh={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function H2(t,s){return s.max===s.min?0:t/(s.max-s.min)*100}const du={correct:(t,s)=>{if(!s.target)return t;if(typeof t=="string")if(Yt.test(t))t=parseFloat(t);else return t;const a=H2(t,s.target.x),r=H2(t,s.target.y);return`${a}% ${r}%`}},VH={correct:(t,{treeScale:s,projectionDelta:a})=>{const r=t,i=Vl.parse(t);if(i.length>5)return r;const o=Vl.createTransformer(t),c=typeof i[0]!="number"?1:0,u=a.x.scale*s.x,f=a.y.scale*s.y;i[0+c]/=u,i[1+c]/=f;const x=ja(u,f,.5);return typeof i[2+c]=="number"&&(i[2+c]/=x),typeof i[3+c]=="number"&&(i[3+c]/=x),o(i)}};let K0=!1;class $H extends v.Component{componentDidMount(){const{visualElement:s,layoutGroup:a,switchLayoutGroup:r,layoutId:i}=this.props,{projection:o}=s;u$(HH),o&&(a.group&&a.group.add(o),r&&r.register&&i&&r.register(o),K0&&o.root.didUpdate(),o.addEventListener("animationComplete",()=>{this.safeToRemove()}),o.setOptions({...o.options,onExitComplete:()=>this.safeToRemove()})),Jh.hasEverUpdated=!0}getSnapshotBeforeUpdate(s){const{layoutDependency:a,visualElement:r,drag:i,isPresent:o}=this.props,{projection:c}=r;return c&&(c.isPresent=o,K0=!0,i||s.layoutDependency!==a||a===void 0||s.isPresent!==o?c.willUpdate():this.safeToRemove(),s.isPresent!==o&&(o?c.promote():c.relegate()||xa.postRender(()=>{const u=c.getStack();(!u||!u.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:s}=this.props.visualElement;s&&(s.root.didUpdate(),Tj.postRender(()=>{!s.currentAnimation&&s.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:s,layoutGroup:a,switchLayoutGroup:r}=this.props,{projection:i}=s;K0=!0,i&&(i.scheduleCheckAfterUnmount(),a&&a.group&&a.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:s}=this.props;s&&s()}render(){return null}}function sA(t){const[s,a]=wE(),r=v.useContext(rj);return e.jsx($H,{...t,layoutGroup:r,switchLayoutGroup:v.useContext(FE),isPresent:s,safeToRemove:a})}const HH={borderRadius:{...du,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:du,borderTopRightRadius:du,borderBottomLeftRadius:du,borderBottomRightRadius:du,boxShadow:VH};function WH(t,s,a){const r=Ar(t)?t:ed(t);return r.start(Ij("",r,s,a)),r.animation}const GH=(t,s)=>t.depth-s.depth;class qH{constructor(){this.children=[],this.isDirty=!1}add(s){lj(this.children,s),this.isDirty=!0}remove(s){oj(this.children,s),this.isDirty=!0}forEach(s){this.isDirty&&this.children.sort(GH),this.isDirty=!1,this.children.forEach(s)}}function KH(t,s){const a=Yr.now(),r=({timestamp:i})=>{const o=i-a;o>=s&&(Ul(r),t(o-s))};return xa.setup(r,!0),()=>Ul(r)}const aA=["TopLeft","TopRight","BottomLeft","BottomRight"],YH=aA.length,W2=t=>typeof t=="string"?parseFloat(t):t,G2=t=>typeof t=="number"||Yt.test(t);function XH(t,s,a,r,i,o){i?(t.opacity=ja(0,a.opacity??1,QH(r)),t.opacityExit=ja(s.opacity??1,0,ZH(r))):o&&(t.opacity=ja(s.opacity??1,a.opacity??1,r));for(let c=0;c<YH;c++){const u=`border${aA[c]}Radius`;let f=q2(s,u),x=q2(a,u);if(f===void 0&&x===void 0)continue;f||(f=0),x||(x=0),f===0||x===0||G2(f)===G2(x)?(t[u]=Math.max(ja(W2(f),W2(x),r),0),(yi.test(x)||yi.test(f))&&(t[u]+="%")):t[u]=x}(s.rotate||a.rotate)&&(t.rotate=ja(s.rotate||0,a.rotate||0,r))}function q2(t,s){return t[s]!==void 0?t[s]:t.borderRadius}const QH=rA(0,.5,$k),ZH=rA(.5,.95,Ln);function rA(t,s,a){return r=>r<t?0:r>s?1:a($u(t,s,r))}function K2(t,s){t.min=s.min,t.max=s.max}function An(t,s){K2(t.x,s.x),K2(t.y,s.y)}function Y2(t,s){t.translate=s.translate,t.scale=s.scale,t.originPoint=s.originPoint,t.origin=s.origin}function X2(t,s,a,r,i){return t-=s,t=_f(t,1/a,r),i!==void 0&&(t=_f(t,1/i,r)),t}function JH(t,s=0,a=1,r=.5,i,o=t,c=t){if(yi.test(s)&&(s=parseFloat(s),s=ja(c.min,c.max,s/100)-c.min),typeof s!="number")return;let u=ja(o.min,o.max,r);t===o&&(u-=s),t.min=X2(t.min,s,a,u,i),t.max=X2(t.max,s,a,u,i)}function Q2(t,s,[a,r,i],o,c){JH(t,s[a],s[r],s[i],s.scale,o,c)}const eW=["x","scaleX","originX"],tW=["y","scaleY","originY"];function Z2(t,s,a,r){Q2(t.x,s,eW,a?a.x:void 0,r?r.x:void 0),Q2(t.y,s,tW,a?a.y:void 0,r?r.y:void 0)}function J2(t){return t.translate===0&&t.scale===1}function nA(t){return J2(t.x)&&J2(t.y)}function eS(t,s){return t.min===s.min&&t.max===s.max}function sW(t,s){return eS(t.x,s.x)&&eS(t.y,s.y)}function tS(t,s){return Math.round(t.min)===Math.round(s.min)&&Math.round(t.max)===Math.round(s.max)}function iA(t,s){return tS(t.x,s.x)&&tS(t.y,s.y)}function sS(t){return Ir(t.x)/Ir(t.y)}function aS(t,s){return t.translate===s.translate&&t.scale===s.scale&&t.originPoint===s.originPoint}class aW{constructor(){this.members=[]}add(s){lj(this.members,s),s.scheduleRender()}remove(s){if(oj(this.members,s),s===this.prevLead&&(this.prevLead=void 0),s===this.lead){const a=this.members[this.members.length-1];a&&this.promote(a)}}relegate(s){const a=this.members.findIndex(i=>s===i);if(a===0)return!1;let r;for(let i=a;i>=0;i--){const o=this.members[i];if(o.isPresent!==!1){r=o;break}}return r?(this.promote(r),!0):!1}promote(s,a){const r=this.lead;if(s!==r&&(this.prevLead=r,this.lead=s,s.show(),r)){r.instance&&r.scheduleRender(),s.scheduleRender(),s.resumeFrom=r,a&&(s.resumeFrom.preserveOpacity=!0),r.snapshot&&(s.snapshot=r.snapshot,s.snapshot.latestValues=r.animationValues||r.latestValues),s.root&&s.root.isUpdating&&(s.isLayoutDirty=!0);const{crossfade:i}=s.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(s=>{const{options:a,resumingFrom:r}=s;a.onExitComplete&&a.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(s=>{s.instance&&s.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function rW(t,s,a){let r="";const i=t.x.translate/s.x,o=t.y.translate/s.y,c=a?.z||0;if((i||o||c)&&(r=`translate3d(${i}px, ${o}px, ${c}px) `),(s.x!==1||s.y!==1)&&(r+=`scale(${1/s.x}, ${1/s.y}) `),a){const{transformPerspective:x,rotate:h,rotateX:p,rotateY:g,skewX:b,skewY:N}=a;x&&(r=`perspective(${x}px) ${r}`),h&&(r+=`rotate(${h}deg) `),p&&(r+=`rotateX(${p}deg) `),g&&(r+=`rotateY(${g}deg) `),b&&(r+=`skewX(${b}deg) `),N&&(r+=`skewY(${N}deg) `)}const u=t.x.scale*s.x,f=t.y.scale*s.y;return(u!==1||f!==1)&&(r+=`scale(${u}, ${f})`),r||"none"}const Y0=["","X","Y","Z"],nW=1e3;let iW=0;function X0(t,s,a,r){const{latestValues:i}=s;i[t]&&(a[t]=i[t],s.setStaticValue(t,0),r&&(r[t]=0))}function lA(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:s}=t.options;if(!s)return;const a=GE(s);if(window.MotionHasOptimisedAnimation(a,"transform")){const{layout:i,layoutId:o}=t.options;window.MotionCancelOptimisedAnimation(a,"transform",xa,!(i||o))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&lA(r)}function oA({attachResizeListener:t,defaultParent:s,measureScroll:a,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(c={},u=s?.()){this.id=iW++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(cW),this.nodes.forEach(hW),this.nodes.forEach(fW),this.nodes.forEach(dW)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=c,this.root=u?u.root||u:this,this.path=u?[...u.path,u]:[],this.parent=u,this.depth=u?u.depth+1:0;for(let f=0;f<this.path.length;f++)this.path[f].shouldResetTransform=!0;this.root===this&&(this.nodes=new qH)}addEventListener(c,u){return this.eventHandlers.has(c)||this.eventHandlers.set(c,new uj),this.eventHandlers.get(c).add(u)}notifyListeners(c,...u){const f=this.eventHandlers.get(c);f&&f.notify(...u)}hasListeners(c){return this.eventHandlers.has(c)}mount(c){if(this.instance)return;this.isSVG=bE(c)&&!XV(c),this.instance=c;const{layoutId:u,layout:f,visualElement:x}=this.options;if(x&&!x.current&&x.mount(c),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(f||u)&&(this.isLayoutDirty=!0),t){let h,p=0;const g=()=>this.root.updateBlockedByResize=!1;xa.read(()=>{p=window.innerWidth}),t(c,()=>{const b=window.innerWidth;b!==p&&(p=b,this.root.updateBlockedByResize=!0,h&&h(),h=KH(g,250),Jh.hasAnimatedSinceResize&&(Jh.hasAnimatedSinceResize=!1,this.nodes.forEach(iS)))})}u&&this.root.registerSharedNode(u,this),this.options.animate!==!1&&x&&(u||f)&&this.addEventListener("didUpdate",({delta:h,hasLayoutChanged:p,hasRelativeLayoutChanged:g,layout:b})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const N=this.options.transition||x.getDefaultTransition()||jW,{onLayoutAnimationStart:y,onLayoutAnimationComplete:S}=x.getProps(),C=!this.targetLayout||!iA(this.targetLayout,b),T=!p&&g;if(this.options.layoutRoot||this.resumeFrom||T||p&&(C||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const _={...Sj(N,"layout"),onPlay:y,onComplete:S};(x.shouldReduceMotion||this.options.layoutRoot)&&(_.delay=0,_.type=!1),this.startAnimation(_),this.setAnimationOrigin(h,T)}else p||iS(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=b})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const c=this.getStack();c&&c.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Ul(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(xW),this.animationId++)}getTransformTemplate(){const{visualElement:c}=this.options;return c&&c.getProps().transformTemplate}willUpdate(c=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&lA(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let h=0;h<this.path.length;h++){const p=this.path[h];p.shouldResetTransform=!0,p.updateScroll("snapshot"),p.options.layoutRoot&&p.willUpdate(!1)}const{layoutId:u,layout:f}=this.options;if(u===void 0&&!f)return;const x=this.getTransformTemplate();this.prevTransformTemplateValue=x?x(this.latestValues,""):void 0,this.updateSnapshot(),c&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(rS);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(nS);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(mW),this.nodes.forEach(lW),this.nodes.forEach(oW)):this.nodes.forEach(nS),this.clearAllSnapshots();const u=Yr.now();mr.delta=el(0,1e3/60,u-mr.timestamp),mr.timestamp=u,mr.isProcessing=!0,L0.update.process(mr),L0.preRender.process(mr),L0.render.process(mr),mr.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Tj.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(uW),this.sharedNodes.forEach(pW)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,xa.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){xa.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Ir(this.snapshot.measuredBox.x)&&!Ir(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let f=0;f<this.path.length;f++)this.path[f].updateScroll();const c=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Ra(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:u}=this.options;u&&u.notify("LayoutMeasure",this.layout.layoutBox,c?c.layoutBox:void 0)}updateScroll(c="measure"){let u=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===c&&(u=!1),u&&this.instance){const f=r(this.instance);this.scroll={animationId:this.root.animationId,phase:c,isRoot:f,offset:a(this.instance),wasRoot:this.scroll?this.scroll.isRoot:f}}}resetTransform(){if(!i)return;const c=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,u=this.projectionDelta&&!nA(this.projectionDelta),f=this.getTransformTemplate(),x=f?f(this.latestValues,""):void 0,h=x!==this.prevTransformTemplateValue;c&&this.instance&&(u||po(this.latestValues)||h)&&(i(this.instance,x),this.shouldResetTransform=!1,this.scheduleRender())}measure(c=!0){const u=this.measurePageBox();let f=this.removeElementScroll(u);return c&&(f=this.removeTransform(f)),yW(f),{animationId:this.root.animationId,measuredBox:u,layoutBox:f,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:c}=this.options;if(!c)return Ra();const u=c.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(NW))){const{scroll:x}=this.root;x&&(Mc(u.x,x.offset.x),Mc(u.y,x.offset.y))}return u}removeElementScroll(c){const u=Ra();if(An(u,c),this.scroll?.wasRoot)return u;for(let f=0;f<this.path.length;f++){const x=this.path[f],{scroll:h,options:p}=x;x!==this.root&&h&&p.layoutScroll&&(h.wasRoot&&An(u,c),Mc(u.x,h.offset.x),Mc(u.y,h.offset.y))}return u}applyTransform(c,u=!1){const f=Ra();An(f,c);for(let x=0;x<this.path.length;x++){const h=this.path[x];!u&&h.options.layoutScroll&&h.scroll&&h!==h.root&&Fc(f,{x:-h.scroll.offset.x,y:-h.scroll.offset.y}),po(h.latestValues)&&Fc(f,h.latestValues)}return po(this.latestValues)&&Fc(f,this.latestValues),f}removeTransform(c){const u=Ra();An(u,c);for(let f=0;f<this.path.length;f++){const x=this.path[f];if(!x.instance||!po(x.latestValues))continue;Xg(x.latestValues)&&x.updateSnapshot();const h=Ra(),p=x.measurePageBox();An(h,p),Z2(u,x.latestValues,x.snapshot?x.snapshot.layoutBox:void 0,h)}return po(this.latestValues)&&Z2(u,this.latestValues),u}setTargetDelta(c){this.targetDelta=c,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(c){this.options={...this.options,...c,crossfade:c.crossfade!==void 0?c.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==mr.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(c=!1){const u=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=u.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=u.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=u.isSharedProjectionDirty);const f=!!this.resumingFrom||this!==u;if(!(c||f&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:h,layoutId:p}=this.options;if(!(!this.layout||!(h||p))){if(this.resolvedRelativeTargetAt=mr.timestamp,!this.targetDelta&&!this.relativeTarget){const g=this.getClosestProjectingParent();g&&g.layout&&this.animationProgress!==1?(this.relativeParent=g,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Ra(),this.relativeTargetOrigin=Ra(),Au(this.relativeTargetOrigin,this.layout.layoutBox,g.layout.layoutBox),An(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Ra(),this.targetWithTransforms=Ra()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),kH(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):An(this.target,this.layout.layoutBox),zE(this.target,this.targetDelta)):An(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const g=this.getClosestProjectingParent();g&&!!g.resumingFrom==!!this.resumingFrom&&!g.options.layoutScroll&&g.target&&this.animationProgress!==1?(this.relativeParent=g,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Ra(),this.relativeTargetOrigin=Ra(),Au(this.relativeTargetOrigin,this.target,g.target),An(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||Xg(this.parent.latestValues)||BE(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){const c=this.getLead(),u=!!this.resumingFrom||this!==c;let f=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(f=!1),u&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(f=!1),this.resolvedRelativeTargetAt===mr.timestamp&&(f=!1),f)return;const{layout:x,layoutId:h}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(x||h))return;An(this.layoutCorrected,this.layout.layoutBox);const p=this.treeScale.x,g=this.treeScale.y;B$(this.layoutCorrected,this.treeScale,this.path,u),c.layout&&!c.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(c.target=c.layout.layoutBox,c.targetWithTransforms=Ra());const{target:b}=c;if(!b){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(Y2(this.prevProjectionDelta.x,this.projectionDelta.x),Y2(this.prevProjectionDelta.y,this.projectionDelta.y)),Eu(this.projectionDelta,this.layoutCorrected,b,this.latestValues),(this.treeScale.x!==p||this.treeScale.y!==g||!aS(this.projectionDelta.x,this.prevProjectionDelta.x)||!aS(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",b))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(c=!0){if(this.options.visualElement?.scheduleRender(),c){const u=this.getStack();u&&u.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Ic(),this.projectionDelta=Ic(),this.projectionDeltaWithTransform=Ic()}setAnimationOrigin(c,u=!1){const f=this.snapshot,x=f?f.latestValues:{},h={...this.latestValues},p=Ic();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!u;const g=Ra(),b=f?f.source:void 0,N=this.layout?this.layout.source:void 0,y=b!==N,S=this.getStack(),C=!S||S.members.length<=1,T=!!(y&&!C&&this.options.crossfade===!0&&!this.path.some(vW));this.animationProgress=0;let _;this.mixTargetDelta=G=>{const U=G/1e3;lS(p.x,c.x,U),lS(p.y,c.y,U),this.setTargetDelta(p),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Au(g,this.layout.layoutBox,this.relativeParent.layout.layoutBox),gW(this.relativeTarget,this.relativeTargetOrigin,g,U),_&&sW(this.relativeTarget,_)&&(this.isProjectionDirty=!1),_||(_=Ra()),An(_,this.relativeTarget)),y&&(this.animationValues=h,XH(h,x,this.latestValues,U,T,C)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=U},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(c){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(Ul(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=xa.update(()=>{Jh.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=ed(0)),this.currentAnimation=WH(this.motionValue,[0,1e3],{...c,velocity:0,isSync:!0,onUpdate:u=>{this.mixTargetDelta(u),c.onUpdate&&c.onUpdate(u)},onStop:()=>{},onComplete:()=>{c.onComplete&&c.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const c=this.getStack();c&&c.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(nW),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const c=this.getLead();let{targetWithTransforms:u,target:f,layout:x,latestValues:h}=c;if(!(!u||!f||!x)){if(this!==c&&this.layout&&x&&cA(this.options.animationType,this.layout.layoutBox,x.layoutBox)){f=this.target||Ra();const p=Ir(this.layout.layoutBox.x);f.x.min=c.target.x.min,f.x.max=f.x.min+p;const g=Ir(this.layout.layoutBox.y);f.y.min=c.target.y.min,f.y.max=f.y.min+g}An(u,f),Fc(u,h),Eu(this.projectionDeltaWithTransform,this.layoutCorrected,u,h)}}registerSharedNode(c,u){this.sharedNodes.has(c)||this.sharedNodes.set(c,new aW),this.sharedNodes.get(c).add(u);const x=u.options.initialPromotionConfig;u.promote({transition:x?x.transition:void 0,preserveFollowOpacity:x&&x.shouldPreserveFollowOpacity?x.shouldPreserveFollowOpacity(u):void 0})}isLead(){const c=this.getStack();return c?c.lead===this:!0}getLead(){const{layoutId:c}=this.options;return c?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:c}=this.options;return c?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:c}=this.options;if(c)return this.root.sharedNodes.get(c)}promote({needsReset:c,transition:u,preserveFollowOpacity:f}={}){const x=this.getStack();x&&x.promote(this,f),c&&(this.projectionDelta=void 0,this.needsReset=!0),u&&this.setOptions({transition:u})}relegate(){const c=this.getStack();return c?c.relegate(this):!1}resetSkewAndRotation(){const{visualElement:c}=this.options;if(!c)return;let u=!1;const{latestValues:f}=c;if((f.z||f.rotate||f.rotateX||f.rotateY||f.rotateZ||f.skewX||f.skewY)&&(u=!0),!u)return;const x={};f.z&&X0("z",c,x,this.animationValues);for(let h=0;h<Y0.length;h++)X0(`rotate${Y0[h]}`,c,x,this.animationValues),X0(`skew${Y0[h]}`,c,x,this.animationValues);c.render();for(const h in x)c.setStaticValue(h,x[h]),this.animationValues&&(this.animationValues[h]=x[h]);c.scheduleRender()}applyProjectionStyles(c,u){if(!this.instance||this.isSVG)return;if(!this.isVisible){c.visibility="hidden";return}const f=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,c.visibility="",c.opacity="",c.pointerEvents=Zh(u?.pointerEvents)||"",c.transform=f?f(this.latestValues,""):"none";return}const x=this.getLead();if(!this.projectionDelta||!this.layout||!x.target){this.options.layoutId&&(c.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,c.pointerEvents=Zh(u?.pointerEvents)||""),this.hasProjected&&!po(this.latestValues)&&(c.transform=f?f({},""):"none",this.hasProjected=!1);return}c.visibility="";const h=x.animationValues||x.latestValues;this.applyTransformsToTarget();let p=rW(this.projectionDeltaWithTransform,this.treeScale,h);f&&(p=f(h,p)),c.transform=p;const{x:g,y:b}=this.projectionDelta;c.transformOrigin=`${g.origin*100}% ${b.origin*100}% 0`,x.animationValues?c.opacity=x===this?h.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:h.opacityExit:c.opacity=x===this?h.opacity!==void 0?h.opacity:"":h.opacityExit!==void 0?h.opacityExit:0;for(const N in qu){if(h[N]===void 0)continue;const{correct:y,applyTo:S,isCSSVariable:C}=qu[N],T=p==="none"?h[N]:y(h[N],x);if(S){const _=S.length;for(let G=0;G<_;G++)c[S[G]]=T}else C?this.options.visualElement.renderState.vars[N]=T:c[N]=T}this.options.layoutId&&(c.pointerEvents=x===this?Zh(u?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(c=>c.currentAnimation?.stop()),this.root.nodes.forEach(rS),this.root.sharedNodes.clear()}}}function lW(t){t.updateLayout()}function oW(t){const s=t.resumeFrom?.snapshot||t.snapshot;if(t.isLead()&&t.layout&&s&&t.hasListeners("didUpdate")){const{layoutBox:a,measuredBox:r}=t.layout,{animationType:i}=t.options,o=s.source!==t.layout.source;i==="size"?Dn(h=>{const p=o?s.measuredBox[h]:s.layoutBox[h],g=Ir(p);p.min=a[h].min,p.max=p.min+g}):cA(i,s.layoutBox,a)&&Dn(h=>{const p=o?s.measuredBox[h]:s.layoutBox[h],g=Ir(a[h]);p.max=p.min+g,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[h].max=t.relativeTarget[h].min+g)});const c=Ic();Eu(c,a,s.layoutBox);const u=Ic();o?Eu(u,t.applyTransform(r,!0),s.measuredBox):Eu(u,a,s.layoutBox);const f=!nA(c);let x=!1;if(!t.resumeFrom){const h=t.getClosestProjectingParent();if(h&&!h.resumeFrom){const{snapshot:p,layout:g}=h;if(p&&g){const b=Ra();Au(b,s.layoutBox,p.layoutBox);const N=Ra();Au(N,a,g.layoutBox),iA(b,N)||(x=!0),h.options.layoutRoot&&(t.relativeTarget=N,t.relativeTargetOrigin=b,t.relativeParent=h)}}}t.notifyListeners("didUpdate",{layout:a,snapshot:s,delta:u,layoutDelta:c,hasLayoutChanged:f,hasRelativeLayoutChanged:x})}else if(t.isLead()){const{onExitComplete:a}=t.options;a&&a()}t.options.transition=void 0}function cW(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function dW(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function uW(t){t.clearSnapshot()}function rS(t){t.clearMeasurements()}function nS(t){t.isLayoutDirty=!1}function mW(t){const{visualElement:s}=t.options;s&&s.getProps().onBeforeLayoutMeasure&&s.notify("BeforeLayoutMeasure"),t.resetTransform()}function iS(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function hW(t){t.resolveTargetDelta()}function fW(t){t.calcProjection()}function xW(t){t.resetSkewAndRotation()}function pW(t){t.removeLeadSnapshot()}function lS(t,s,a){t.translate=ja(s.translate,0,a),t.scale=ja(s.scale,1,a),t.origin=s.origin,t.originPoint=s.originPoint}function oS(t,s,a,r){t.min=ja(s.min,a.min,r),t.max=ja(s.max,a.max,r)}function gW(t,s,a,r){oS(t.x,s.x,a.x,r),oS(t.y,s.y,a.y,r)}function vW(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const jW={duration:.45,ease:[.4,0,.1,1]},cS=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),dS=cS("applewebkit/")&&!cS("chrome/")?Math.round:Ln;function uS(t){t.min=dS(t.min),t.max=dS(t.max)}function yW(t){uS(t.x),uS(t.y)}function cA(t,s,a){return t==="position"||t==="preserve-aspect"&&!TH(sS(s),sS(a),.2)}function NW(t){return t!==t.root&&t.scroll?.wasRoot}const bW=oA({attachResizeListener:(t,s)=>Ku(t,"resize",s),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Q0={current:void 0},dA=oA({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!Q0.current){const t=new bW({});t.mount(window),t.setOptions({layoutScroll:!0}),Q0.current=t}return Q0.current},resetTransform:(t,s)=>{t.style.transform=s!==void 0?s:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),wW={pan:{Feature:UH},drag:{Feature:zH,ProjectionNode:dA,MeasureLayout:sA}};function mS(t,s,a){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",a==="Start");const i="onHover"+a,o=r[i];o&&xa.postRender(()=>o(s,dm(s)))}class SW extends Kl{mount(){const{current:s}=this.node;s&&(this.unmount=WV(s,(a,r)=>(mS(this.node,r,"Start"),i=>mS(this.node,i,"End"))))}unmount(){}}class CW extends Kl{constructor(){super(...arguments),this.isActive=!1}onFocus(){let s=!1;try{s=this.node.current.matches(":focus-visible")}catch{s=!0}!s||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=lm(Ku(this.node.current,"focus",()=>this.onFocus()),Ku(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function hS(t,s,a){const{props:r}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",a==="Start");const i="onTap"+(a==="End"?"":a),o=r[i];o&&xa.postRender(()=>o(s,dm(s)))}class TW extends Kl{mount(){const{current:s}=this.node;s&&(this.unmount=YV(s,(a,r)=>(hS(this.node,r,"Start"),(i,{success:o})=>hS(this.node,i,o?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const av=new WeakMap,Z0=new WeakMap,kW=t=>{const s=av.get(t.target);s&&s(t)},EW=t=>{t.forEach(kW)};function AW({root:t,...s}){const a=t||document;Z0.has(a)||Z0.set(a,{});const r=Z0.get(a),i=JSON.stringify(s);return r[i]||(r[i]=new IntersectionObserver(EW,{root:t,...s})),r[i]}function _W(t,s,a){const r=AW(s);return av.set(t,a),r.observe(t),()=>{av.delete(t),r.unobserve(t)}}const DW={some:0,all:1};class OW extends Kl{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:s={}}=this.node.getProps(),{root:a,margin:r,amount:i="some",once:o}=s,c={root:a?a.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:DW[i]},u=f=>{const{isIntersecting:x}=f;if(this.isInView===x||(this.isInView=x,o&&!x&&this.hasEnteredView))return;x&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",x);const{onViewportEnter:h,onViewportLeave:p}=this.node.getProps(),g=x?h:p;g&&g(f)};return _W(this.node.current,c,u)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:s,prevProps:a}=this.node;["amount","margin","root"].some(RW(s,a))&&this.startObserver()}unmount(){}}function RW({viewport:t={}},{viewport:s={}}={}){return a=>t[a]!==s[a]}const PW={inView:{Feature:OW},tap:{Feature:TW},focus:{Feature:CW},hover:{Feature:SW}},MW={layout:{ProjectionNode:dA,MeasureLayout:sA}},FW={...yH,...PW,...wW,...MW},Ha=F$(FW,Y$),IW=({onComplete:t,duration:s=3e3})=>{const[a,r]=v.useState(0),[i,o]=v.useState(0),[c,u]=v.useState(!0),f=[{label:"Initializing ominbiz...",duration:800},{label:"Loading your workspace...",duration:600},{label:"Connecting to services...",duration:700},{label:"Preparing dashboard...",duration:500},{label:"Almost ready...",duration:400}];return v.useEffect(()=>{let x,h,p=0;return(()=>{x=setInterval(()=>{r(N=>{const y=N+100/(s/50);return y>=100?100:y})},50);const b=()=>{i<f.length-1&&(h=setTimeout(()=>{o(N=>N+1),p+=f[i].duration,p<s-500&&b()},f[i].duration))};b(),setTimeout(()=>{r(100),setTimeout(()=>{u(!1),setTimeout(()=>{t?.()},500)},300)},s)})(),()=>{x&&clearInterval(x),h&&clearTimeout(h)}},[s,t,i]),e.jsx(SE,{children:c&&e.jsxs(Ha.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0,scale:1.1},transition:{duration:.5},className:"fixed inset-0 z-50 flex items-center justify-center bg-gradient-to-br from-green-50 via-white to-green-50 dark:from-gray-900 dark:via-gray-800 dark:to-gray-900",children:[e.jsx("div",{className:"absolute inset-0 opacity-5",children:e.jsx("div",{className:"absolute inset-0",style:{backgroundImage:`url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23059669' fill-opacity='0.1'%3E%3Ccircle cx='30' cy='30' r='2'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E")`}})}),e.jsxs("div",{className:"relative flex flex-col items-center space-y-8 p-8",children:[e.jsx(Ha.div,{initial:{scale:.5,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.8,ease:"easeOut",delay:.2},children:e.jsx(RR,{size:"2xl",variant:"full",animated:!0,className:"mb-4"})}),e.jsxs(Ha.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{duration:.6,delay:.8},className:"text-center space-y-2",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Welcome to ominbiz"}),e.jsx("p",{className:"text-lg text-gray-600 dark:text-gray-300",children:"Your Complete Business Management Solution"})]}),e.jsxs(Ha.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{duration:.6,delay:1.2},className:"w-full max-w-md space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Tr,{value:a,className:"h-2 bg-gray-200 dark:bg-gray-700"}),e.jsxs("div",{className:"flex justify-between text-xs text-gray-500 dark:text-gray-400",children:[e.jsx("span",{children:"Loading..."}),e.jsxs("span",{children:[Math.round(a),"%"]})]})]}),e.jsx(Ha.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.3},className:"text-center",children:e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:f[i]?.label})},i)]}),e.jsx(Ha.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{duration:.6,delay:1.6},className:"grid grid-cols-3 gap-6 mt-8",children:[{icon:"📊",label:"Analytics"},{icon:"🛒",label:"Orders"},{icon:"👥",label:"Customers"}].map((x,h)=>e.jsxs(Ha.div,{initial:{scale:0},animate:{scale:1},transition:{duration:.4,delay:1.8+h*.1,type:"spring",stiffness:200},className:"flex flex-col items-center space-y-2 p-4 rounded-lg bg-white/50 dark:bg-gray-800/50 backdrop-blur-sm",children:[e.jsx("span",{className:"text-2xl",children:x.icon}),e.jsx("span",{className:"text-xs font-medium text-gray-700 dark:text-gray-300",children:x.label})]},x.label))}),e.jsx("div",{className:"absolute inset-0 pointer-events-none",children:[...Array(6)].map((x,h)=>e.jsx(Ha.div,{className:"absolute w-2 h-2 bg-green-400 rounded-full opacity-20",style:{left:`${20+h*15}%`,top:`${30+h%2*40}%`},animate:{y:[-10,10,-10],opacity:[.2,.5,.2]},transition:{duration:2+h*.5,repeat:1/0,ease:"easeInOut"}},h))})]}),e.jsxs(Ha.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.6,delay:2},className:"absolute bottom-8 text-center",children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Powered by ominbiz Technology"}),e.jsx("p",{className:"text-xs text-gray-400 dark:text-gray-500 mt-1",children:"Version 2.0.0"})]})]})})};function LW(){const t=[{icon:va,title:"Boost Productivity",description:"Automate routine tasks and streamline workflows to increase team efficiency by up to 40%."},{icon:er,title:"Data-Driven Insights",description:"Make informed decisions with real-time analytics and comprehensive business intelligence."},{icon:Xt,title:"Team Collaboration",description:"Enable seamless collaboration across departments with integrated communication tools."},{icon:ta,title:"Enterprise Security",description:"Bank-level security with end-to-end encryption and compliance with global standards."}],s=["QuickBooks","Xero","Shopify","WooCommerce","Stripe","PayPal","Mailchimp","Slack","Google Workspace","Microsoft 365","Zapier","API Access"],a=[{name:"Retail & E-commerce",description:"Manage inventory, process orders, and track sales across multiple channels.",features:["Multi-channel inventory","Order management","Customer analytics"]},{name:"Professional Services",description:"Schedule appointments, track time, and manage client relationships.",features:["Appointment booking","Time tracking","Client portal"]},{name:"Manufacturing",description:"Optimize production, manage supply chain, and track quality metrics.",features:["Production planning","Supply chain","Quality control"]},{name:"Healthcare",description:"Manage patient records, schedule appointments, and handle billing.",features:["Patient management","Appointment scheduling","Billing integration"]}];return e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx(Ho,{}),e.jsx("section",{className:"py-20 bg-gradient-to-br from-green-50 to-blue-50",children:e.jsxs("div",{className:"container mx-auto px-4 text-center",children:[e.jsxs("h1",{className:"text-5xl font-bold text-foreground mb-6",children:["Powerful ",e.jsx("span",{className:"text-green-500",children:"Features"})," for Modern Business"]}),e.jsx("p",{className:"text-xl text-muted-foreground max-w-3xl mx-auto mb-8",children:"Discover how ominbiz can transform your business operations with our comprehensive suite of integrated tools and intelligent automation."}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[e.jsx(Ht,{to:"/signup",children:e.jsx(R,{size:"lg",className:"bg-green-500 hover:bg-green-600",children:"Start Free Trial"})}),e.jsx(Ht,{to:"/pricing",children:e.jsx(R,{size:"lg",variant:"outline",children:"View Pricing"})})]})]})}),e.jsx(ak,{}),e.jsx("section",{className:"py-16 bg-muted/30",children:e.jsxs("div",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h2",{className:"text-3xl font-bold text-foreground mb-4",children:"Why Businesses Choose ominbiz"}),e.jsx("p",{className:"text-muted-foreground max-w-2xl mx-auto",children:"Join thousands of businesses that have transformed their operations with our platform."})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:t.map((r,i)=>{const o=r.icon;return e.jsxs(K,{className:"text-center hover:shadow-md transition-shadow",children:[e.jsxs(pe,{children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx("div",{className:"p-3 bg-green-100 rounded-full",children:e.jsx(o,{className:"h-6 w-6 text-green-600"})})}),e.jsx(ge,{className:"text-lg",children:r.title})]}),e.jsx(X,{children:e.jsx("p",{className:"text-sm text-muted-foreground",children:r.description})})]},i)})})]})}),e.jsx("section",{className:"py-16",children:e.jsxs("div",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h2",{className:"text-3xl font-bold text-foreground mb-4",children:"Tailored for Your Industry"}),e.jsx("p",{className:"text-muted-foreground max-w-2xl mx-auto",children:"ominbiz adapts to your specific industry needs with customizable workflows and features."})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 max-w-4xl mx-auto",children:a.map((r,i)=>e.jsxs(K,{className:"hover:shadow-md transition-shadow",children:[e.jsxs(pe,{children:[e.jsx(ge,{className:"text-xl",children:r.name}),e.jsx(lt,{children:r.description})]}),e.jsx(X,{children:e.jsx("div",{className:"space-y-2",children:r.features.map((o,c)=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(os,{className:"h-4 w-4 text-green-500"}),e.jsx("span",{className:"text-sm text-muted-foreground",children:o})]},c))})})]},i))})]})}),e.jsx("section",{className:"py-16 bg-muted/30",children:e.jsxs("div",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h2",{className:"text-3xl font-bold text-foreground mb-4",children:"Seamless Integrations"}),e.jsx("p",{className:"text-muted-foreground max-w-2xl mx-auto",children:"Connect ominbiz with your favorite tools and services for a unified business ecosystem."})]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4 max-w-4xl mx-auto",children:s.map((r,i)=>e.jsx(K,{className:"text-center p-4 hover:shadow-md transition-shadow",children:e.jsx(X,{className:"p-2",children:e.jsx("span",{className:"text-sm font-medium text-muted-foreground",children:r})})},i))}),e.jsxs("div",{className:"text-center mt-8",children:[e.jsx("p",{className:"text-muted-foreground mb-4",children:"Don't see your tool? We offer custom integrations and a powerful API."}),e.jsx(Ht,{to:"/contact",children:e.jsxs(R,{variant:"outline",children:["Request Integration",e.jsx(fv,{className:"h-4 w-4 ml-2"})]})})]})]})}),e.jsx("section",{className:"py-16",children:e.jsxs("div",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h2",{className:"text-3xl font-bold text-foreground mb-4",children:"Built for Scale and Performance"}),e.jsx("p",{className:"text-muted-foreground max-w-2xl mx-auto",children:"Enterprise-grade infrastructure that grows with your business."})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsxs(K,{className:"text-center",children:[e.jsxs(pe,{children:[e.jsx(M_,{className:"h-8 w-8 text-green-600 mx-auto mb-2"}),e.jsx(ge,{className:"text-lg",children:"Cloud-Native"})]}),e.jsx(X,{children:e.jsx("p",{className:"text-sm text-muted-foreground",children:"Built on modern cloud infrastructure for reliability and scalability."})})]}),e.jsxs(K,{className:"text-center",children:[e.jsxs(pe,{children:[e.jsx(Kr,{className:"h-8 w-8 text-green-600 mx-auto mb-2"}),e.jsx(ge,{className:"text-lg",children:"Mobile-First"})]}),e.jsx(X,{children:e.jsx("p",{className:"text-sm text-muted-foreground",children:"Responsive design that works perfectly on all devices and screen sizes."})})]}),e.jsxs(K,{className:"text-center",children:[e.jsxs(pe,{children:[e.jsx(_o,{className:"h-8 w-8 text-green-600 mx-auto mb-2"}),e.jsx(ge,{className:"text-lg",children:"Global CDN"})]}),e.jsx(X,{children:e.jsx("p",{className:"text-sm text-muted-foreground",children:"Fast loading times worldwide with our global content delivery network."})})]}),e.jsxs(K,{className:"text-center",children:[e.jsxs(pe,{children:[e.jsx(Pf,{className:"h-8 w-8 text-green-600 mx-auto mb-2"}),e.jsx(ge,{className:"text-lg",children:"24/7 Support"})]}),e.jsx(X,{children:e.jsx("p",{className:"text-sm text-muted-foreground",children:"Round-the-clock customer support to help you succeed."})})]})]})]})}),e.jsx("section",{className:"py-16 bg-green-50",children:e.jsxs("div",{className:"container mx-auto px-4 text-center",children:[e.jsx("h2",{className:"text-3xl font-bold text-foreground mb-4",children:"Ready to Transform Your Business?"}),e.jsx("p",{className:"text-muted-foreground mb-8 max-w-2xl mx-auto",children:"Join thousands of businesses that have streamlined their operations with ominbiz. Start your free trial today and experience the difference."}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[e.jsx(Ht,{to:"/signup",children:e.jsx(R,{size:"lg",className:"bg-green-500 hover:bg-green-600",children:"Start Free Trial - No Credit Card Required"})}),e.jsx(Ht,{to:"/contact",children:e.jsx(R,{size:"lg",variant:"outline",children:"Schedule a Demo"})})]})]})}),e.jsx($o,{})]})}function BW(){const{user:t}=Es(),s=Ka(),[a,r]=v.useState(!1),[i,o]=v.useState(null),[c,u]=v.useState(!1),[f,x]=v.useState(!1),[h,p]=v.useState(null),[g,b]=v.useState({cardNumber:"",expiryDate:"",cvv:"",cardholderName:"",billingAddress:{street:"",city:"",state:"",zipCode:"",country:"US"}});v.useEffect(()=>{if(t){N();const U=setInterval(N,3e4);return()=>clearInterval(U)}},[t]);const N=async()=>{try{const U=await ye.get("/subscriptions/current");p(U.data.subscription)}catch(U){console.error("Error fetching subscription:",U)}},y=[{id:"starter",name:"Starter",price:0,originalPrice:0,period:"forever",description:"Perfect for small businesses just getting started",icon:Ja,popular:!1,features:["Up to 100 products","Basic inventory tracking","5 team members","Email support","Basic reports","Mobile app access"],limitations:["Limited integrations","Basic analytics only","No custom branding"],buttonText:"Get Started Free",buttonVariant:"outline",trialDays:0},{id:"professional",name:"Professional",price:a?24:29,originalPrice:29,period:a?"per month (billed annually)":"per month",description:"Ideal for growing businesses with advanced needs",icon:va,popular:!0,features:["Unlimited products","Advanced inventory management","Unlimited team members","Priority support","Advanced analytics","API access","Custom integrations","Multi-location support","Automated workflows","Custom reports","Real-time AI insights","Interactive maps"],limitations:[],buttonText:h?.plan==="professional"?"Current Plan":"Start Free Trial",buttonVariant:h?.plan==="professional"?"outline":"default",trialDays:14},{id:"enterprise",name:"Enterprise",price:"Custom",originalPrice:"Custom",period:"contact us",description:"For large organizations with complex requirements",icon:VS,popular:!1,features:["Everything in Professional","Dedicated account manager","Custom development","On-premise deployment","Advanced security features","SLA guarantee","Training & onboarding","24/7 phone support","Custom integrations","White-label options","Advanced compliance","Custom reporting"],limitations:[],buttonText:"Contact Sales",buttonVariant:"outline",trialDays:30}],S=async U=>{if(!t){D.info("Please sign in to subscribe to a plan"),s("/login");return}if(U.id==="starter"){try{u(!0),await ye.post("/subscriptions/activate",{planId:U.id}),D.success("Welcome to ominbiz Starter!"),N()}catch{D.error("Failed to activate plan. Please try again.")}finally{u(!1)}return}if(U.id==="enterprise"){s("/contact");return}o(U),x(!0)},C=async()=>{if(i)try{if(u(!0),!g.cardNumber||!g.expiryDate||!g.cvv||!g.cardholderName){D.error("Please fill in all payment details");return}const U={planId:i.id,isAnnual:a,amount:a?i.price*12*.8:i.price,paymentMethod:{cardNumber:g.cardNumber.replace(/\s/g,""),expiryDate:g.expiryDate,cvv:g.cvv,cardholderName:g.cardholderName,billingAddress:g.billingAddress}};(await ye.post("/subscriptions/subscribe",U)).data.success&&(D.success(`Successfully subscribed to ${i.name}!`),x(!1),N(),setTimeout(()=>{s("/dashboard")},2e3))}catch(U){D.error(U.response?.data?.message||"Payment failed. Please try again.")}finally{u(!1)}},T=(U,F)=>{if(U.includes(".")){const[k,E]=U.split(".");b(A=>({...A,[k]:{...A[k],[E]:F}}))}else b(k=>({...k,[U]:F}))},_=U=>{const F=U.replace(/\s+/g,"").replace(/[^0-9]/gi,""),k=F.match(/\d{4,16}/g),E=k&&k[0]||"",A=[];for(let B=0,H=E.length;B<H;B+=4)A.push(E.substring(B,B+4));return A.length?A.join(" "):F},G=[{question:"Can I change my plan at any time?",answer:"Yes, you can upgrade or downgrade your plan at any time. Changes take effect immediately and billing is prorated."},{question:"Is there a free trial?",answer:"Yes, we offer a 14-day free trial for all paid plans. No credit card required to start."},{question:"What payment methods do you accept?",answer:"We accept all major credit cards, PayPal, and bank transfers for annual plans."},{question:"Can I cancel anytime?",answer:"Absolutely. You can cancel your subscription at any time with no cancellation fees."}];return e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx(Ho,{}),e.jsx("section",{className:"py-20 bg-gradient-to-br from-green-50 to-blue-50",children:e.jsxs("div",{className:"container mx-auto px-4 text-center",children:[e.jsxs("h1",{className:"text-5xl font-bold text-foreground mb-6",children:["Simple, Transparent ",e.jsx("span",{className:"text-green-500",children:"Pricing"})]}),e.jsx("p",{className:"text-xl text-muted-foreground max-w-3xl mx-auto mb-8",children:"Choose the perfect plan for your business. Start free and scale as you grow."}),e.jsxs("div",{className:"flex justify-center items-center gap-4 mb-8",children:[e.jsx("span",{className:`text-sm ${a?"text-muted-foreground":"text-foreground font-medium"}`,children:"Monthly"}),e.jsx(ns,{checked:a,onCheckedChange:r,className:"data-[state=checked]:bg-green-500"}),e.jsxs("span",{className:`text-sm ${a?"text-foreground font-medium":"text-muted-foreground"}`,children:["Annual ",e.jsx(_e,{variant:"secondary",className:"ml-2",children:"Save 20%"})]})]}),h&&e.jsx("div",{className:"max-w-md mx-auto mb-8",children:e.jsx(K,{className:"border-green-200 bg-green-50",children:e.jsxs(X,{className:"pt-6",children:[e.jsxs("div",{className:"flex items-center justify-center gap-2 text-green-700",children:[e.jsx(ta,{className:"h-5 w-5"}),e.jsxs("span",{className:"font-medium",children:["Current Plan: ",h.plan.charAt(0).toUpperCase()+h.plan.slice(1)]})]}),e.jsx("div",{className:"text-center text-sm text-green-600 mt-2",children:h.status==="active"?e.jsxs(e.Fragment,{children:["Next billing: ",new Date(h.nextBilling).toLocaleDateString()]}):e.jsxs(e.Fragment,{children:["Status: ",h.status]})})]})})})]})}),e.jsx("section",{className:"py-16",children:e.jsx("div",{className:"container mx-auto px-4",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 max-w-6xl mx-auto",children:y.map((U,F)=>{const k=U.icon;return e.jsxs(K,{className:`relative ${U.popular?"border-green-500 shadow-lg scale-105":""}`,children:[U.popular&&e.jsx(_e,{className:"absolute -top-3 left-1/2 transform -translate-x-1/2 bg-green-500",children:"Most Popular"}),e.jsxs(pe,{className:"text-center pb-4",children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx("div",{className:"p-3 bg-green-100 rounded-full",children:e.jsx(k,{className:"h-8 w-8 text-green-600"})})}),e.jsx(ge,{className:"text-2xl",children:U.name}),e.jsx(lt,{className:"text-sm",children:U.description}),e.jsxs("div",{className:"mt-4",children:[e.jsxs("div",{className:"flex items-baseline justify-center gap-2",children:[e.jsx("span",{className:"text-4xl font-bold text-foreground",children:typeof U.price=="number"?`$${U.price}`:U.price}),a&&U.originalPrice!==U.price&&typeof U.price=="number"&&e.jsxs("span",{className:"text-lg text-muted-foreground line-through",children:["$",U.originalPrice]})]}),U.period&&e.jsxs("div",{className:"text-muted-foreground text-sm mt-1",children:[U.period,U.trialDays>0&&e.jsxs("div",{className:"text-green-600 font-medium mt-1",children:[U.trialDays,"-day free trial"]})]})]})]}),e.jsxs(X,{className:"space-y-4",children:[e.jsx(R,{className:`w-full ${U.popular?"bg-green-500 hover:bg-green-600":""}`,variant:U.buttonVariant,onClick:()=>S(U),disabled:c||h?.plan===U.id&&h?.status==="active",children:c?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Processing..."]}):U.buttonText}),e.jsxs("div",{className:"flex items-center justify-center gap-4 text-xs text-muted-foreground",children:[U.id!=="starter"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Xt,{className:"h-3 w-3"}),e.jsx("span",{children:"Unlimited users"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(ta,{className:"h-3 w-3"}),e.jsx("span",{children:"Secure"})]})]}),U.trialDays>0&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Qt,{className:"h-3 w-3"}),e.jsxs("span",{children:[U.trialDays,"-day trial"]})]})]}),e.jsxs("div",{className:"space-y-3",children:[U.features.map((E,A)=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(wi,{className:"h-4 w-4 text-green-500 flex-shrink-0"}),e.jsx("span",{className:"text-sm text-foreground",children:E})]},A)),U.limitations.map((E,A)=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(yr,{className:"h-4 w-4 text-red-400 flex-shrink-0"}),e.jsx("span",{className:"text-sm text-muted-foreground",children:E})]},A))]})]})]},F)})})})}),e.jsx("section",{className:"py-16 bg-muted/30",children:e.jsxs("div",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h2",{className:"text-3xl font-bold text-foreground mb-4",children:"Frequently Asked Questions"}),e.jsx("p",{className:"text-muted-foreground max-w-2xl mx-auto",children:"Have questions? We have answers. If you can't find what you're looking for, contact our support team."})]}),e.jsx("div",{className:"max-w-3xl mx-auto space-y-6",children:G.map((U,F)=>e.jsxs(K,{children:[e.jsx(pe,{children:e.jsx(ge,{className:"text-lg",children:U.question})}),e.jsx(X,{children:e.jsx("p",{className:"text-muted-foreground",children:U.answer})})]},F))})]})}),e.jsx("section",{className:"py-16",children:e.jsxs("div",{className:"container mx-auto px-4 text-center",children:[e.jsx("h2",{className:"text-3xl font-bold text-foreground mb-4",children:"Ready to Get Started?"}),e.jsx("p",{className:"text-muted-foreground mb-8 max-w-2xl mx-auto",children:"Join thousands of businesses that trust ominbiz to manage their operations."}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[e.jsx(Ht,{to:"/signup",children:e.jsx(R,{size:"lg",className:"bg-green-500 hover:bg-green-600",children:"Start Free Trial"})}),e.jsx(Ht,{to:"/contact",children:e.jsx(R,{size:"lg",variant:"outline",children:"Contact Sales"})})]})]})}),e.jsx(Ft,{open:f,onOpenChange:x,children:e.jsxs(It,{className:"max-w-md",children:[e.jsxs(Lt,{children:[e.jsxs(Bt,{children:["Subscribe to ",i?.name]}),e.jsx(es,{children:"Complete your subscription to unlock all features"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-muted/30 p-4 rounded-lg",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("span",{className:"font-medium",children:[i?.name," Plan"]}),e.jsxs("span",{className:"font-bold",children:["$",a?i?.price*12*.8:i?.price,a?"/year":"/month"]})]}),a&&e.jsxs("div",{className:"text-sm text-green-600 mt-1",children:["Save $",i?.price*12*.2,"/year with annual billing"]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(ae,{htmlFor:"cardholderName",children:"Cardholder Name"}),e.jsx(fe,{id:"cardholderName",value:g.cardholderName,onChange:U=>T("cardholderName",U.target.value),placeholder:"John Doe"})]}),e.jsxs("div",{children:[e.jsx(ae,{htmlFor:"cardNumber",children:"Card Number"}),e.jsx(fe,{id:"cardNumber",value:g.cardNumber,onChange:U=>T("cardNumber",_(U.target.value)),placeholder:"1234 5678 9012 3456",maxLength:19})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(ae,{htmlFor:"expiryDate",children:"Expiry Date"}),e.jsx(fe,{id:"expiryDate",value:g.expiryDate,onChange:U=>T("expiryDate",U.target.value),placeholder:"MM/YY",maxLength:5})]}),e.jsxs("div",{children:[e.jsx(ae,{htmlFor:"cvv",children:"CVV"}),e.jsx(fe,{id:"cvv",value:g.cvv,onChange:U=>T("cvv",U.target.value),placeholder:"123",maxLength:4})]})]}),e.jsxs("div",{children:[e.jsx(ae,{htmlFor:"billingAddress",children:"Billing Address"}),e.jsx(fe,{id:"billingAddress",value:g.billingAddress.street,onChange:U=>T("billingAddress.street",U.target.value),placeholder:"123 Main St",className:"mb-2"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx(fe,{value:g.billingAddress.city,onChange:U=>T("billingAddress.city",U.target.value),placeholder:"City"}),e.jsx(fe,{value:g.billingAddress.zipCode,onChange:U=>T("billingAddress.zipCode",U.target.value),placeholder:"ZIP Code"})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[e.jsx(ta,{className:"h-4 w-4"}),e.jsx("span",{children:"Your payment information is secure and encrypted"})]}),e.jsxs("div",{className:"flex gap-2 pt-4",children:[e.jsx(R,{variant:"outline",onClick:()=>x(!1),className:"flex-1",disabled:c,children:"Cancel"}),e.jsx(R,{onClick:C,className:"flex-1 bg-green-500 hover:bg-green-600",disabled:c,children:c?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Processing..."]}):e.jsxs(e.Fragment,{children:[e.jsx(ha,{className:"h-4 w-4 mr-2"}),"Subscribe Now"]})})]})]})]})}),e.jsx($o,{})]})}function zW(){const[t,s]=v.useState({name:"",email:"",company:"",subject:"",message:"",inquiryType:""}),[a,r]=v.useState(!1),i=x=>{const{name:h,value:p}=x.target;s(g=>({...g,[h]:p}))},o=x=>{s(h=>({...h,inquiryType:x}))},c=async x=>{x.preventDefault(),r(!0);try{await new Promise(h=>setTimeout(h,2e3)),D.success("Message sent successfully! We'll get back to you soon."),s({name:"",email:"",company:"",subject:"",message:"",inquiryType:""})}catch{D.error("Failed to send message. Please try again.")}finally{r(!1)}},u=[{icon:Gs,title:"Email Us",description:"Send us an email anytime",contact:"hello@ominbiz.com",action:"mailto:hello@ominbiz.com"},{icon:$s,title:"Call Us",description:"Mon-Fri from 8am to 6pm",contact:"+254 700 123 456",action:"tel:+254700123456"},{icon:Xr,title:"Visit Us",description:"Come say hello at our office",contact:"Nairobi, Kenya",action:"#"},{icon:Qt,title:"Working Hours",description:"Monday - Friday",contact:"8:00 AM - 6:00 PM",action:"#"}],f=[{icon:vi,title:"Live Chat",description:"Chat with our support team",available:"Available 24/7"},{icon:Pf,title:"Phone Support",description:"Call our support hotline",available:"Mon-Fri 8AM-6PM"},{icon:Xt,title:"Community",description:"Join our user community",available:"Always active"}];return e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx(Ho,{}),e.jsx("section",{className:"py-20 bg-gradient-to-br from-green-50 to-blue-50",children:e.jsxs("div",{className:"container mx-auto px-4 text-center",children:[e.jsxs("h1",{className:"text-5xl font-bold text-foreground mb-6",children:["Get in ",e.jsx("span",{className:"text-green-500",children:"Touch"})]}),e.jsx("p",{className:"text-xl text-muted-foreground max-w-3xl mx-auto",children:"Have questions about ominbiz? We're here to help. Reach out to our team and we'll get back to you as soon as possible."})]})}),e.jsx("section",{className:"py-16",children:e.jsx("div",{className:"container mx-auto px-4",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-16",children:u.map((x,h)=>{const p=x.icon;return e.jsxs(K,{className:"text-center hover:shadow-md transition-shadow",children:[e.jsxs(pe,{children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx("div",{className:"p-3 bg-green-100 rounded-full",children:e.jsx(p,{className:"h-6 w-6 text-green-600"})})}),e.jsx(ge,{className:"text-lg",children:x.title}),e.jsx(lt,{children:x.description})]}),e.jsx(X,{children:e.jsx("a",{href:x.action,className:"text-green-600 hover:text-green-700 font-medium",children:x.contact})})]},h)})})})}),e.jsx("section",{className:"py-16 bg-muted/30",children:e.jsx("div",{className:"container mx-auto px-4",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-12 max-w-6xl mx-auto",children:[e.jsxs(K,{children:[e.jsxs(pe,{children:[e.jsx(ge,{className:"text-2xl",children:"Send us a Message"}),e.jsx(lt,{children:"Fill out the form below and we'll get back to you within 24 hours."})]}),e.jsx(X,{children:e.jsxs("form",{onSubmit:c,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(ae,{htmlFor:"name",children:"Full Name *"}),e.jsx(fe,{id:"name",name:"name",value:t.name,onChange:i,required:!0,placeholder:"Your full name"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ae,{htmlFor:"email",children:"Email *"}),e.jsx(fe,{id:"email",name:"email",type:"email",value:t.email,onChange:i,required:!0,placeholder:"your@email.com"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(ae,{htmlFor:"company",children:"Company"}),e.jsx(fe,{id:"company",name:"company",value:t.company,onChange:i,placeholder:"Your company name"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ae,{htmlFor:"inquiryType",children:"Inquiry Type"}),e.jsxs(Ot,{onValueChange:o,children:[e.jsx(Pt,{children:e.jsx(Rt,{placeholder:"Select inquiry type"})}),e.jsxs(Mt,{children:[e.jsx(Ee,{value:"sales",children:"Sales Inquiry"}),e.jsx(Ee,{value:"support",children:"Technical Support"}),e.jsx(Ee,{value:"billing",children:"Billing Question"}),e.jsx(Ee,{value:"partnership",children:"Partnership"}),e.jsx(Ee,{value:"other",children:"Other"})]})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ae,{htmlFor:"subject",children:"Subject *"}),e.jsx(fe,{id:"subject",name:"subject",value:t.subject,onChange:i,required:!0,placeholder:"Brief description of your inquiry"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ae,{htmlFor:"message",children:"Message *"}),e.jsx(Ts,{id:"message",name:"message",value:t.message,onChange:i,required:!0,placeholder:"Tell us more about your inquiry...",rows:5})]}),e.jsx(R,{type:"submit",className:"w-full bg-green-500 hover:bg-green-600",disabled:a,children:a?e.jsx(e.Fragment,{children:"Sending..."}):e.jsxs(e.Fragment,{children:[e.jsx(Ma,{className:"h-4 w-4 mr-2"}),"Send Message"]})})]})})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-foreground mb-4",children:"Other Ways to Reach Us"}),e.jsx("p",{className:"text-muted-foreground mb-6",children:"Choose the support option that works best for you."})]}),e.jsx("div",{className:"space-y-4",children:f.map((x,h)=>{const p=x.icon;return e.jsx(K,{className:"hover:shadow-md transition-shadow",children:e.jsxs(X,{className:"flex items-center p-6",children:[e.jsx("div",{className:"p-3 bg-green-100 rounded-full mr-4",children:e.jsx(p,{className:"h-6 w-6 text-green-600"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-foreground",children:x.title}),e.jsx("p",{className:"text-sm text-muted-foreground",children:x.description}),e.jsx("p",{className:"text-sm text-green-600 font-medium",children:x.available})]})]})},h)})}),e.jsxs(K,{className:"bg-green-50 border-green-200",children:[e.jsx(pe,{children:e.jsx(ge,{className:"text-green-800",children:"Office Hours"})}),e.jsx(X,{className:"text-green-700",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Monday - Friday:"}),e.jsx("span",{children:"8:00 AM - 6:00 PM"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Saturday:"}),e.jsx("span",{children:"9:00 AM - 2:00 PM"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Sunday:"}),e.jsx("span",{children:"Closed"})]})]})})]})]})]})})}),e.jsx($o,{})]})}const UW="/assets/glorison-CRlH09PY.jpg",VW="/assets/dan-Yi6WQeZ9.jpg";function $W(){const t=[{icon:Ni,title:"Mission-Driven",description:"We're committed to empowering businesses with tools that drive real growth and success."},{icon:Xt,title:"Customer-Centric",description:"Every decision we make is guided by what's best for our customers and their businesses."},{icon:Ou,title:"Innovation",description:"We continuously innovate to stay ahead of business needs and technological advances."},{icon:Wi,title:"Passion",description:"We're passionate about helping businesses thrive in an increasingly digital world."}],s=[{number:"10,000+",label:"Active Businesses"},{number:"50+",label:"Countries Served"},{number:"99.9%",label:"Uptime Guarantee"},{number:"24/7",label:"Customer Support"}],a=[{name:"Daniel Ndk",role:"CEO & Founder",image:VW,bio:"Visionary leader driving innovation and growth in business management solutions."},{name:"Glorison Ouma",role:"CTO & Co-Founder",image:UW,bio:"Technology expert passionate about building scalable, intelligent solutions for businesses."},{name:"Mr Timothy Ndala",role:"Head of Operations",image:"https://tse1.mm.bing.net/th/id/OIP.w-L3HP_7QYalYXw7apT2tAHaHx?cb=12&rs=1&pid=ImgDetMain&o=7&rm=3",bio:"Operations strategist ensuring seamless business workflows and customer success."},{name:"David Kamau",role:"Head of Product Development",image:"https://th.bing.com/th/id/R.9a5877425188cdd10fd29f9178b680f6?rik=F%2fI%2bWzCaY1cPrw&riu=http%3a%2f%2fart.beopenfuture.com%2fwp-content%2fuploads%2fAlex-Ayivi.jpg&ehk=L0n3vEqGR9PpE9zPHHwZvTSZYPdDlCzbovMdLkQPoyI%3d&risl=&pid=ImgRaw&r=0",bio:"Product innovator focused on delivering exceptional user experiences and features."}],r=[{year:"2020",title:"Company Founded",description:"Started with a vision to simplify business operations for SMEs"},{year:"2021",title:"First 1,000 Customers",description:"Reached our first major milestone with businesses across 10 countries"},{year:"2022",title:"Series A Funding",description:"Raised $10M to accelerate product development and global expansion"},{year:"2023",title:"AI Integration",description:"Launched AI-powered insights and automation features"},{year:"2024",title:"Global Expansion",description:"Now serving 10,000+ businesses across 50+ countries"}];return e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx(Ho,{}),e.jsx("section",{className:"py-20 bg-gradient-to-br from-green-50 to-blue-50",children:e.jsxs("div",{className:"container mx-auto px-4 text-center",children:[e.jsxs("h1",{className:"text-5xl font-bold text-foreground mb-6",children:["About ",e.jsx("span",{className:"text-green-500",children:"ominbiz"})]}),e.jsx("p",{className:"text-xl text-muted-foreground max-w-3xl mx-auto mb-8",children:"We're on a mission to empower businesses worldwide with intelligent, integrated solutions that drive growth and operational excellence."}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[e.jsx(Ht,{to:"/contact",children:e.jsx(R,{size:"lg",className:"bg-green-500 hover:bg-green-600",children:"Get in Touch"})}),e.jsx(Ht,{to:"/pricing",children:e.jsx(R,{size:"lg",variant:"outline",children:"View Pricing"})})]})]})}),e.jsx("section",{className:"py-16",children:e.jsx("div",{className:"container mx-auto px-4",children:e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-8 text-center",children:s.map((i,o)=>e.jsxs("div",{children:[e.jsx("div",{className:"text-4xl font-bold text-green-600 mb-2",children:i.number}),e.jsx("div",{className:"text-muted-foreground",children:i.label})]},o))})})}),e.jsx("section",{className:"py-16 bg-muted/30",children:e.jsx("div",{className:"container mx-auto px-4",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-12 max-w-6xl mx-auto",children:[e.jsxs(K,{children:[e.jsx(pe,{children:e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:e.jsx(Ni,{className:"h-6 w-6 text-green-600"})}),e.jsx(ge,{className:"text-2xl",children:"Our Mission"})]})}),e.jsx(X,{children:e.jsx("p",{className:"text-muted-foreground leading-relaxed",children:"To democratize access to enterprise-grade business management tools, enabling businesses of all sizes to operate efficiently, make data-driven decisions, and achieve sustainable growth in the digital economy."})})]}),e.jsxs(K,{children:[e.jsx(pe,{children:e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx(_o,{className:"h-6 w-6 text-blue-600"})}),e.jsx(ge,{className:"text-2xl",children:"Our Vision"})]})}),e.jsx(X,{children:e.jsx("p",{className:"text-muted-foreground leading-relaxed",children:"To become the world's most trusted business management platform, powering millions of businesses globally and fostering economic growth through technology innovation and exceptional user experiences."})})]})]})})}),e.jsx("section",{className:"py-16",children:e.jsxs("div",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h2",{className:"text-3xl font-bold text-foreground mb-4",children:"Our Values"}),e.jsx("p",{className:"text-muted-foreground max-w-2xl mx-auto",children:"The principles that guide everything we do and shape our company culture."})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:t.map((i,o)=>{const c=i.icon;return e.jsxs(K,{className:"text-center hover:shadow-md transition-shadow",children:[e.jsxs(pe,{children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx("div",{className:"p-3 bg-green-100 rounded-full",children:e.jsx(c,{className:"h-6 w-6 text-green-600"})})}),e.jsx(ge,{className:"text-lg",children:i.title})]}),e.jsx(X,{children:e.jsx("p",{className:"text-sm text-muted-foreground",children:i.description})})]},o)})})]})}),e.jsx("section",{className:"py-16 bg-muted/30",children:e.jsxs("div",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h2",{className:"text-3xl font-bold text-foreground mb-4",children:"Meet Our Team"}),e.jsx("p",{className:"text-muted-foreground max-w-2xl mx-auto",children:"The passionate individuals behind OminBiz, dedicated to your business success."})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8",children:a.map((i,o)=>e.jsxs(K,{className:"text-center hover:shadow-md transition-shadow",children:[e.jsxs(pe,{children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx("img",{src:i.image,alt:i.name,className:"w-20 h-20 rounded-full object-cover"})}),e.jsx(ge,{className:"text-lg",children:i.name}),e.jsx(lt,{className:"text-green-600 font-medium",children:i.role})]}),e.jsx(X,{children:e.jsx("p",{className:"text-sm text-muted-foreground",children:i.bio})})]},o))})]})}),e.jsx("section",{className:"py-16",children:e.jsxs("div",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h2",{className:"text-3xl font-bold text-foreground mb-4",children:"Our Journey"}),e.jsx("p",{className:"text-muted-foreground max-w-2xl mx-auto",children:"Key milestones in our mission to transform business operations worldwide."})]}),e.jsx("div",{className:"max-w-4xl mx-auto",children:e.jsx("div",{className:"space-y-8",children:r.map((i,o)=>e.jsxs("div",{className:"flex items-start gap-6",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-12 h-12 bg-green-500 rounded-full flex items-center justify-center text-white font-bold",children:i.year.slice(-2)})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("h3",{className:"text-xl font-semibold text-foreground",children:i.title}),e.jsx("span",{className:"text-sm text-green-600 font-medium",children:i.year})]}),e.jsx("p",{className:"text-muted-foreground",children:i.description})]})]},o))})})]})}),e.jsx("section",{className:"py-16 bg-green-50",children:e.jsxs("div",{className:"container mx-auto px-4 text-center",children:[e.jsx("h2",{className:"text-3xl font-bold text-foreground mb-4",children:"Ready to Join Our Journey?"}),e.jsx("p",{className:"text-muted-foreground mb-8 max-w-2xl mx-auto",children:"Whether you're looking to streamline your business operations or join our team, we'd love to hear from you."}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[e.jsx(Ht,{to:"/signup",children:e.jsx(R,{size:"lg",className:"bg-green-500 hover:bg-green-600",children:"Start Your Free Trial"})}),e.jsx(Ht,{to:"/contact",children:e.jsx(R,{size:"lg",variant:"outline",children:"Contact Us"})})]})]})}),e.jsx($o,{})]})}function HW(){const t=[{icon:ya,title:"Information We Collect",content:["Personal information (name, email, phone number, business details)","Account credentials and authentication data","Payment and billing information","Business data (inventory, orders, customers, transactions)","Usage data and analytics","Device information and IP addresses","Cookies and tracking technologies"]},{icon:la,title:"How We Use Your Information",content:["Provide and maintain our services","Process transactions and payments","Send important updates and notifications","Improve and optimize our platform","Provide customer support","Detect and prevent fraud","Comply with legal obligations","Personalize your experience"]},{icon:ta,title:"Data Security",content:["Industry-standard encryption (SSL/TLS)","Secure data centers with 24/7 monitoring","Regular security audits and updates","Access controls and authentication","Data backup and disaster recovery","Employee training on data protection","Compliance with GDPR and data protection laws"]},{icon:vr,title:"Your Rights",content:["Access your personal data","Correct inaccurate information","Request data deletion","Export your data","Opt-out of marketing communications","Withdraw consent","Lodge a complaint with supervisory authorities"]}];return e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx(Ho,{}),e.jsx("section",{className:"py-20 bg-gradient-to-br from-green-50 to-blue-50",children:e.jsxs("div",{className:"container mx-auto px-4 text-center",children:[e.jsx("div",{className:"flex justify-center mb-6",children:e.jsx("div",{className:"p-4 bg-green-100 rounded-full",children:e.jsx(ta,{className:"h-12 w-12 text-green-600"})})}),e.jsxs("h1",{className:"text-5xl font-bold text-foreground mb-6",children:["Privacy ",e.jsx("span",{className:"text-green-500",children:"Policy"})]}),e.jsx("p",{className:"text-xl text-muted-foreground max-w-3xl mx-auto mb-4",children:"Your privacy is important to us. This policy explains how we collect, use, and protect your information."}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Last updated: ",new Date().toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"})]})]})}),e.jsx("section",{className:"py-16",children:e.jsxs("div",{className:"container mx-auto px-4 max-w-4xl",children:[e.jsx(K,{className:"mb-8",children:e.jsx(X,{className:"pt-6",children:e.jsx("p",{className:"text-muted-foreground leading-relaxed",children:"At ominbiz, we are committed to protecting your privacy and ensuring the security of your personal and business data. This Privacy Policy describes how we collect, use, store, and share information when you use our platform. By using ominbiz, you agree to the practices described in this policy."})})}),e.jsx("div",{className:"space-y-6",children:t.map((s,a)=>{const r=s.icon;return e.jsxs(K,{children:[e.jsx(pe,{children:e.jsxs(ge,{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:e.jsx(r,{className:"h-5 w-5 text-green-600"})}),s.title]})}),e.jsx(X,{children:e.jsx("ul",{className:"space-y-3",children:s.content.map((i,o)=>e.jsxs("li",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-green-500 rounded-full mt-2 flex-shrink-0"}),e.jsx("span",{className:"text-muted-foreground",children:i})]},o))})})]},a)})}),e.jsxs(K,{className:"mt-6",children:[e.jsx(pe,{children:e.jsxs(ge,{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:e.jsx(ya,{className:"h-5 w-5 text-green-600"})}),"Information Sharing"]})}),e.jsxs(X,{className:"space-y-4",children:[e.jsx("p",{className:"text-muted-foreground",children:"We do not sell your personal information. We may share your information only in the following circumstances:"}),e.jsxs("ul",{className:"space-y-2",children:[e.jsxs("li",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-green-500 rounded-full mt-2 flex-shrink-0"}),e.jsxs("span",{className:"text-muted-foreground",children:[e.jsx("strong",{children:"Service Providers:"})," With trusted third-party vendors who help us provide our services (payment processors, hosting providers, analytics services)"]})]}),e.jsxs("li",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-green-500 rounded-full mt-2 flex-shrink-0"}),e.jsxs("span",{className:"text-muted-foreground",children:[e.jsx("strong",{children:"Legal Requirements:"})," When required by law or to protect our rights and safety"]})]}),e.jsxs("li",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-green-500 rounded-full mt-2 flex-shrink-0"}),e.jsxs("span",{className:"text-muted-foreground",children:[e.jsx("strong",{children:"Business Transfers:"})," In connection with a merger, acquisition, or sale of assets"]})]})]})]})]}),e.jsxs(K,{className:"mt-6",children:[e.jsx(pe,{children:e.jsx(ge,{children:"Cookies and Tracking"})}),e.jsxs(X,{className:"space-y-4",children:[e.jsx("p",{className:"text-muted-foreground",children:"We use cookies and similar tracking technologies to enhance your experience, analyze usage, and provide personalized content. You can control cookies through your browser settings."}),e.jsxs("div",{className:"bg-muted/30 p-4 rounded-lg",children:[e.jsx("p",{className:"text-sm font-medium mb-2",children:"Types of cookies we use:"}),e.jsxs("ul",{className:"space-y-1 text-sm text-muted-foreground",children:[e.jsx("li",{children:"• Essential cookies (required for platform functionality)"}),e.jsx("li",{children:"• Analytics cookies (help us understand usage patterns)"}),e.jsx("li",{children:"• Preference cookies (remember your settings)"}),e.jsx("li",{children:"• Marketing cookies (deliver relevant content)"})]})]})]})]}),e.jsxs(K,{className:"mt-6",children:[e.jsx(pe,{children:e.jsx(ge,{children:"Data Retention"})}),e.jsx(X,{children:e.jsx("p",{className:"text-muted-foreground mb-4",children:"We retain your information for as long as necessary to provide our services and comply with legal obligations. When you close your account, we will delete or anonymize your data within 90 days, except where we are required to retain it for legal or regulatory purposes."})})]}),e.jsxs(K,{className:"mt-6",children:[e.jsx(pe,{children:e.jsx(ge,{children:"Children's Privacy"})}),e.jsx(X,{children:e.jsx("p",{className:"text-muted-foreground",children:"Our services are not intended for individuals under the age of 18. We do not knowingly collect personal information from children. If you believe we have collected information from a child, please contact us immediately."})})]}),e.jsxs(K,{className:"mt-6",children:[e.jsx(pe,{children:e.jsx(ge,{children:"International Data Transfers"})}),e.jsx(X,{children:e.jsx("p",{className:"text-muted-foreground",children:"Your information may be transferred to and processed in countries other than your own. We ensure appropriate safeguards are in place to protect your data in accordance with this Privacy Policy and applicable laws."})})]}),e.jsxs(K,{className:"mt-6",children:[e.jsx(pe,{children:e.jsx(ge,{children:"Policy Updates"})}),e.jsx(X,{children:e.jsx("p",{className:"text-muted-foreground",children:"We may update this Privacy Policy from time to time. We will notify you of significant changes by email or through our platform. Your continued use of ominbiz after changes constitutes acceptance of the updated policy."})})]}),e.jsxs(K,{className:"mt-6 border-green-200 bg-green-50",children:[e.jsx(pe,{children:e.jsx(ge,{className:"text-green-900",children:"Contact Us"})}),e.jsxs(X,{className:"space-y-3",children:[e.jsx("p",{className:"text-green-800",children:"If you have questions about this Privacy Policy or how we handle your data, please contact us:"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-3 text-green-800",children:[e.jsx(Gs,{className:"h-4 w-4"}),e.jsx("span",{children:"privacy@ominbiz.com"})]}),e.jsxs("div",{className:"flex items-center gap-3 text-green-800",children:[e.jsx($s,{className:"h-4 w-4"}),e.jsx("span",{children:"+254 700 000 000"})]}),e.jsxs("div",{className:"flex items-center gap-3 text-green-800",children:[e.jsx(ya,{className:"h-4 w-4"}),e.jsx("span",{children:"Data Protection Officer: dpo@ominbiz.com"})]})]})]})]})]})}),e.jsx($o,{})]})}function WW(){return e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx(Ho,{}),e.jsx("section",{className:"py-20 bg-gradient-to-br from-green-50 to-blue-50",children:e.jsxs("div",{className:"container mx-auto px-4 text-center",children:[e.jsx("div",{className:"flex justify-center mb-6",children:e.jsx("div",{className:"p-4 bg-green-100 rounded-full",children:e.jsx(ya,{className:"h-12 w-12 text-green-600"})})}),e.jsxs("h1",{className:"text-5xl font-bold text-foreground mb-6",children:["Terms of ",e.jsx("span",{className:"text-green-500",children:"Service"})]}),e.jsx("p",{className:"text-xl text-muted-foreground max-w-3xl mx-auto mb-4",children:"Please read these terms carefully before using ominbiz platform."}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Last updated: ",new Date().toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"})]})]})}),e.jsx("section",{className:"py-16",children:e.jsxs("div",{className:"container mx-auto px-4 max-w-4xl",children:[e.jsxs(Uu,{className:"mb-8 border-green-200 bg-green-50",children:[e.jsx(Er,{className:"h-4 w-4 text-green-600"}),e.jsx(Vu,{className:"text-green-800",children:"By accessing and using ominbiz, you agree to be bound by these Terms of Service and all applicable laws and regulations. If you do not agree with any of these terms, you are prohibited from using this platform."})]}),e.jsxs(K,{className:"mb-6",children:[e.jsx(pe,{children:e.jsxs(ge,{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:e.jsx(os,{className:"h-5 w-5 text-green-600"})}),"1. Acceptance of Terms"]})}),e.jsxs(X,{className:"space-y-4",children:[e.jsx("p",{className:"text-muted-foreground",children:'These Terms of Service ("Terms") govern your use of the ominbiz platform and services ("Services"). By creating an account or using our Services, you acknowledge that you have read, understood, and agree to be bound by these Terms.'}),e.jsx("p",{className:"text-muted-foreground",children:"We reserve the right to modify these Terms at any time. Continued use of the Services after changes constitutes acceptance of the modified Terms."})]})]}),e.jsxs(K,{className:"mb-6",children:[e.jsx(pe,{children:e.jsxs(ge,{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:e.jsx(Xt,{className:"h-5 w-5 text-green-600"})}),"2. Eligibility"]})}),e.jsx(X,{children:e.jsxs("ul",{className:"space-y-3",children:[e.jsxs("li",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-green-500 rounded-full mt-2 flex-shrink-0"}),e.jsx("span",{className:"text-muted-foreground",children:"You must be at least 18 years old to use ominbiz"})]}),e.jsxs("li",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-green-500 rounded-full mt-2 flex-shrink-0"}),e.jsx("span",{className:"text-muted-foreground",children:"You must have the authority to enter into these Terms on behalf of your business"})]}),e.jsxs("li",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-green-500 rounded-full mt-2 flex-shrink-0"}),e.jsx("span",{className:"text-muted-foreground",children:"You must provide accurate and complete information during registration"})]}),e.jsxs("li",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-green-500 rounded-full mt-2 flex-shrink-0"}),e.jsx("span",{className:"text-muted-foreground",children:"You must comply with all applicable laws and regulations"})]})]})})]}),e.jsxs(K,{className:"mb-6",children:[e.jsx(pe,{children:e.jsx(ge,{children:"3. Account Registration and Security"})}),e.jsxs(X,{className:"space-y-4",children:[e.jsx("p",{className:"text-muted-foreground",children:"To access certain features, you must create an account. You agree to:"}),e.jsxs("ul",{className:"space-y-3",children:[e.jsxs("li",{className:"flex items-start gap-3",children:[e.jsx(os,{className:"h-4 w-4 text-green-500 mt-1 flex-shrink-0"}),e.jsx("span",{className:"text-muted-foreground",children:"Provide accurate, current, and complete information"})]}),e.jsxs("li",{className:"flex items-start gap-3",children:[e.jsx(os,{className:"h-4 w-4 text-green-500 mt-1 flex-shrink-0"}),e.jsx("span",{className:"text-muted-foreground",children:"Maintain and update your information to keep it accurate"})]}),e.jsxs("li",{className:"flex items-start gap-3",children:[e.jsx(os,{className:"h-4 w-4 text-green-500 mt-1 flex-shrink-0"}),e.jsx("span",{className:"text-muted-foreground",children:"Maintain the security of your password and account"})]}),e.jsxs("li",{className:"flex items-start gap-3",children:[e.jsx(os,{className:"h-4 w-4 text-green-500 mt-1 flex-shrink-0"}),e.jsx("span",{className:"text-muted-foreground",children:"Immediately notify us of any unauthorized access"})]}),e.jsxs("li",{className:"flex items-start gap-3",children:[e.jsx(os,{className:"h-4 w-4 text-green-500 mt-1 flex-shrink-0"}),e.jsx("span",{className:"text-muted-foreground",children:"Be responsible for all activities under your account"})]})]})]})]}),e.jsxs(K,{className:"mb-6",children:[e.jsx(pe,{children:e.jsxs(ge,{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:e.jsx(ha,{className:"h-5 w-5 text-green-600"})}),"4. Subscription and Payment Terms"]})}),e.jsxs(X,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-2",children:"Subscription Plans"}),e.jsx("p",{className:"text-muted-foreground mb-3",children:"ominbiz offers various subscription tiers (Client, Standard, Professional, Premium, Enterprise) with different features and pricing."})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-2",children:"Billing"}),e.jsxs("ul",{className:"space-y-2",children:[e.jsxs("li",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-green-500 rounded-full mt-2 flex-shrink-0"}),e.jsx("span",{className:"text-muted-foreground",children:"Subscription fees are billed in advance on a monthly or annual basis"})]}),e.jsxs("li",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-green-500 rounded-full mt-2 flex-shrink-0"}),e.jsx("span",{className:"text-muted-foreground",children:"All fees are non-refundable except as required by law"})]}),e.jsxs("li",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-green-500 rounded-full mt-2 flex-shrink-0"}),e.jsx("span",{className:"text-muted-foreground",children:"You authorize us to charge your payment method automatically"})]}),e.jsxs("li",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-green-500 rounded-full mt-2 flex-shrink-0"}),e.jsx("span",{className:"text-muted-foreground",children:"Failure to pay may result in service suspension or termination"})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-2",children:"Free Trial"}),e.jsx("p",{className:"text-muted-foreground",children:"Free trials are available for eligible plans. You will be charged automatically at the end of the trial period unless you cancel before it ends."})]})]})]}),e.jsxs(K,{className:"mb-6",children:[e.jsx(pe,{children:e.jsxs(ge,{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:e.jsx(F_,{className:"h-5 w-5 text-green-600"})}),"5. Acceptable Use Policy"]})}),e.jsxs(X,{className:"space-y-4",children:[e.jsx("p",{className:"text-muted-foreground",children:"You agree NOT to:"}),e.jsxs("ul",{className:"space-y-3",children:[e.jsxs("li",{className:"flex items-start gap-3",children:[e.jsx(Cr,{className:"h-4 w-4 text-red-500 mt-1 flex-shrink-0"}),e.jsx("span",{className:"text-muted-foreground",children:"Violate any laws or regulations"})]}),e.jsxs("li",{className:"flex items-start gap-3",children:[e.jsx(Cr,{className:"h-4 w-4 text-red-500 mt-1 flex-shrink-0"}),e.jsx("span",{className:"text-muted-foreground",children:"Infringe on intellectual property rights"})]}),e.jsxs("li",{className:"flex items-start gap-3",children:[e.jsx(Cr,{className:"h-4 w-4 text-red-500 mt-1 flex-shrink-0"}),e.jsx("span",{className:"text-muted-foreground",children:"Upload malicious code, viruses, or harmful content"})]}),e.jsxs("li",{className:"flex items-start gap-3",children:[e.jsx(Cr,{className:"h-4 w-4 text-red-500 mt-1 flex-shrink-0"}),e.jsx("span",{className:"text-muted-foreground",children:"Attempt to gain unauthorized access to our systems"})]}),e.jsxs("li",{className:"flex items-start gap-3",children:[e.jsx(Cr,{className:"h-4 w-4 text-red-500 mt-1 flex-shrink-0"}),e.jsx("span",{className:"text-muted-foreground",children:"Interfere with the operation of the Services"})]}),e.jsxs("li",{className:"flex items-start gap-3",children:[e.jsx(Cr,{className:"h-4 w-4 text-red-500 mt-1 flex-shrink-0"}),e.jsx("span",{className:"text-muted-foreground",children:"Use the Services for illegal or fraudulent activities"})]}),e.jsxs("li",{className:"flex items-start gap-3",children:[e.jsx(Cr,{className:"h-4 w-4 text-red-500 mt-1 flex-shrink-0"}),e.jsx("span",{className:"text-muted-foreground",children:"Share your account credentials with unauthorized parties"})]}),e.jsxs("li",{className:"flex items-start gap-3",children:[e.jsx(Cr,{className:"h-4 w-4 text-red-500 mt-1 flex-shrink-0"}),e.jsx("span",{className:"text-muted-foreground",children:"Reverse engineer, decompile, or disassemble the platform"})]})]})]})]}),e.jsxs(K,{className:"mb-6",children:[e.jsx(pe,{children:e.jsx(ge,{children:"6. Data Ownership and License"})}),e.jsxs(X,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-2",children:"Your Data"}),e.jsx("p",{className:"text-muted-foreground",children:"You retain all rights to your business data. By using ominbiz, you grant us a limited license to use, store, and process your data solely to provide and improve our Services."})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-2",children:"Our Platform"}),e.jsx("p",{className:"text-muted-foreground",children:"ominbiz and all intellectual property rights in the platform remain our property. You are granted a limited, non-exclusive, non-transferable license to use the Services."})]})]})]}),e.jsxs(K,{className:"mb-6",children:[e.jsx(pe,{children:e.jsx(ge,{children:"7. Service Availability and Support"})}),e.jsxs(X,{className:"space-y-4",children:[e.jsx("p",{className:"text-muted-foreground",children:"We strive to provide 99.9% uptime but do not guarantee uninterrupted access. We may perform maintenance, updates, or improvements that may temporarily affect service availability."}),e.jsx("p",{className:"text-muted-foreground",children:"Support is provided according to your subscription tier. Response times and support channels vary by plan."})]})]}),e.jsxs(K,{className:"mb-6",children:[e.jsx(pe,{children:e.jsx(ge,{children:"8. Termination"})}),e.jsxs(X,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-2",children:"By You"}),e.jsx("p",{className:"text-muted-foreground",children:"You may cancel your subscription at any time through your account settings. Cancellation takes effect at the end of your current billing period."})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-2",children:"By Us"}),e.jsx("p",{className:"text-muted-foreground mb-3",children:"We may suspend or terminate your account if you:"}),e.jsxs("ul",{className:"space-y-2",children:[e.jsxs("li",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-green-500 rounded-full mt-2 flex-shrink-0"}),e.jsx("span",{className:"text-muted-foreground",children:"Violate these Terms"})]}),e.jsxs("li",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-green-500 rounded-full mt-2 flex-shrink-0"}),e.jsx("span",{className:"text-muted-foreground",children:"Fail to pay fees"})]}),e.jsxs("li",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-green-500 rounded-full mt-2 flex-shrink-0"}),e.jsx("span",{className:"text-muted-foreground",children:"Engage in fraudulent or illegal activity"})]}),e.jsxs("li",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-green-500 rounded-full mt-2 flex-shrink-0"}),e.jsx("span",{className:"text-muted-foreground",children:"Pose a security risk to our platform"})]})]})]})]})]}),e.jsxs(K,{className:"mb-6",children:[e.jsx(pe,{children:e.jsx(ge,{children:"9. Disclaimers and Limitations of Liability"})}),e.jsxs(X,{className:"space-y-4",children:[e.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 p-4 rounded-lg",children:[e.jsx("p",{className:"text-sm font-medium text-yellow-900 mb-2",children:"IMPORTANT LEGAL NOTICE"}),e.jsx("p",{className:"text-sm text-yellow-800",children:'THE SERVICES ARE PROVIDED "AS IS" AND "AS AVAILABLE" WITHOUT WARRANTIES OF ANY KIND, EITHER EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE, OR NON-INFRINGEMENT.'})]}),e.jsx("p",{className:"text-muted-foreground",children:"TO THE MAXIMUM EXTENT PERMITTED BY LAW, ominbiz SHALL NOT BE LIABLE FOR ANY INDIRECT, INCIDENTAL, SPECIAL, CONSEQUENTIAL, OR PUNITIVE DAMAGES, OR ANY LOSS OF PROFITS OR REVENUES, WHETHER INCURRED DIRECTLY OR INDIRECTLY, OR ANY LOSS OF DATA, USE, GOODWILL, OR OTHER INTANGIBLE LOSSES."})]})]}),e.jsxs(K,{className:"mb-6",children:[e.jsx(pe,{children:e.jsx(ge,{children:"10. Indemnification"})}),e.jsx(X,{children:e.jsx("p",{className:"text-muted-foreground",children:"You agree to indemnify and hold ominbiz harmless from any claims, damages, losses, liabilities, and expenses (including legal fees) arising from your use of the Services, violation of these Terms, or infringement of any third-party rights."})})]}),e.jsxs(K,{className:"mb-6",children:[e.jsx(pe,{children:e.jsx(ge,{children:"11. Governing Law and Dispute Resolution"})}),e.jsx(X,{className:"space-y-4",children:e.jsx("p",{className:"text-muted-foreground",children:"These Terms are governed by the laws of Kenya. Any disputes arising from these Terms or the Services shall be resolved through arbitration in Nairobi, Kenya, or through the courts of Kenya."})})]}),e.jsxs(K,{className:"mb-6",children:[e.jsx(pe,{children:e.jsx(ge,{children:"12. Changes to Terms"})}),e.jsx(X,{children:e.jsx("p",{className:"text-muted-foreground",children:"We reserve the right to modify these Terms at any time. We will notify you of material changes via email or through the platform. Your continued use of the Services after such notification constitutes acceptance of the modified Terms."})})]}),e.jsxs(K,{className:"border-green-200 bg-green-50",children:[e.jsx(pe,{children:e.jsx(ge,{className:"text-green-900",children:"13. Contact Information"})}),e.jsxs(X,{className:"space-y-3",children:[e.jsx("p",{className:"text-green-800",children:"For questions about these Terms of Service, please contact us:"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-3 text-green-800",children:[e.jsx(ya,{className:"h-4 w-4"}),e.jsx("span",{children:"legal@ominbiz.com"})]}),e.jsxs("div",{className:"flex items-center gap-3 text-green-800",children:[e.jsx(Xt,{className:"h-4 w-4"}),e.jsx("span",{children:"ominbiz Limited, Nairobi, Kenya"})]})]}),e.jsx("div",{className:"mt-4 pt-4 border-t border-green-200",children:e.jsx("p",{className:"text-sm text-green-800",children:"By using ominbiz, you acknowledge that you have read and understood these Terms of Service and agree to be bound by them. Thank you for choosing ominbiz!"})})]})]}),e.jsxs("div",{className:"mt-8 p-6 bg-muted/30 rounded-lg",children:[e.jsx("h3",{className:"font-semibold mb-4",children:"Related Documents"}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsx(Ht,{to:"/privacy",className:"text-green-600 hover:text-green-700 font-medium",children:"→ Privacy Policy"}),e.jsx(Ht,{to:"/contact",className:"text-green-600 hover:text-green-700 font-medium",children:"→ Contact Support"}),e.jsx(Ht,{to:"/pricing",className:"text-green-600 hover:text-green-700 font-medium",children:"→ View Pricing"})]})]})]})}),e.jsx($o,{})]})}const GW=()=>{const[t,s]=v.useState(""),[a,r]=v.useState({subject:"",category:"",message:"",priority:"medium"}),i=[{id:"getting-started",title:"Getting Started",icon:hi,faqs:[{question:"How do I set up my ominbiz account?",answer:"To set up your account, click on Sign Up, fill in your business details, verify your email, and complete the onboarding process."},{question:"What features are included in the free plan?",answer:"The free plan includes basic inventory management, up to 100 products, basic reporting, and email support."},{question:"How do I add my first product?",answer:"Go to Products > Add Product, fill in the product details including name, price, category, and stock quantity."}]},{id:"inventory",title:"Inventory Management",icon:qt,faqs:[{question:"How do I track stock levels?",answer:"Stock levels are automatically updated when you make sales or receive inventory. You can also manually adjust stock in the Inventory section."},{question:"Can I set up low stock alerts?",answer:"Yes, you can set reorder levels for each product. When stock falls below this level, you'll receive notifications."},{question:"How do I manage multiple locations?",answer:"Go to Locations to add and manage multiple business locations. Each location can have separate inventory tracking."}]},{id:"payments",title:"Payments & Billing",icon:ha,faqs:[{question:"What payment methods do you accept?",answer:"We accept M-Pesa, PayPal, Visa, Mastercard, and bank transfers for subscription payments."},{question:"How do I set up M-Pesa integration?",answer:"Go to Settings > Payment Integration, enter your M-Pesa business details, and follow the verification process."},{question:"Can I process customer payments through the system?",answer:"Yes, you can process payments through our integrated payment gateway for both online and in-person sales."}]},{id:"reports",title:"Reports & Analytics",icon:er,faqs:[{question:"How do I generate sales reports?",answer:"Go to Finances > Reports to generate various sales reports including daily, weekly, monthly, and custom date ranges."},{question:"Can I export data to Excel?",answer:"Yes, all reports can be exported to Excel, PDF, or CSV formats for further analysis."},{question:"How do I track business performance?",answer:"Use the Dashboard overview and AI Insights section to monitor key performance indicators and business trends."}]}],o=[{title:"Live Chat",description:"Get instant help from our support team",icon:vi,action:"Start Chat",available:"24/7"},{title:"Phone Support",description:"Speak directly with our experts",icon:$s,action:"Call Now",available:"Mon-Fri 8AM-6PM"},{title:"Email Support",description:"Send us a detailed message",icon:Gs,action:"Send Email",available:"Response within 24hrs"},{title:"Video Tutorial",description:"Watch step-by-step guides",icon:ka,action:"Watch Now",available:"On-demand"}],c=f=>{if(f.preventDefault(),!a.subject||!a.message){D.error("Please fill in all required fields");return}D.success("Support ticket submitted successfully! We'll get back to you within 24 hours."),r({subject:"",category:"",message:"",priority:"medium"})},u=i.map(f=>({...f,faqs:f.faqs.filter(x=>x.question.toLowerCase().includes(t.toLowerCase())||x.answer.toLowerCase().includes(t.toLowerCase()))})).filter(f=>f.faqs.length>0);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Help & Support"}),e.jsx("p",{className:"text-muted-foreground",children:"Get help with ominbiz features and find answers to common questions"})]}),e.jsx(_e,{variant:"outline",className:"text-xs",children:"Support Center"})]}),e.jsx(K,{children:e.jsx(X,{className:"p-6",children:e.jsxs("div",{className:"relative",children:[e.jsx(ia,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),e.jsx(fe,{placeholder:"Search for help articles, features, or common issues...",value:t,onChange:f=>s(f.target.value),className:"pl-10"})]})})}),e.jsxs(pa,{defaultValue:"faq",className:"space-y-6",children:[e.jsxs(ba,{className:"grid w-full grid-cols-3",children:[e.jsx(ut,{value:"faq",children:"FAQ"}),e.jsx(ut,{value:"support",children:"Contact Support"}),e.jsx(ut,{value:"resources",children:"Resources"})]}),e.jsxs(mt,{value:"faq",className:"space-y-6",children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:o.map((f,x)=>e.jsx(K,{className:"hover:shadow-md transition-shadow",children:e.jsxs(X,{className:"p-4 text-center",children:[e.jsx(f.icon,{className:"h-8 w-8 mx-auto mb-2 text-primary"}),e.jsx("h3",{className:"font-semibold mb-1",children:f.title}),e.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:f.description}),e.jsx(_e,{variant:"outline",className:"text-xs mb-3",children:f.available}),e.jsx(R,{size:"sm",className:"w-full",onClick:()=>{switch(f.title){case"Live Chat":D.success("Opening live chat..."),window.open("https://tawk.to/chat/ominbiz","_blank");break;case"Phone Support":window.location.href="tel:+254758175275",D.success("Opening phone dialer...");break;case"Email Support":window.location.href="mailto:ominbizsolutions@gmail.com?subject=Support Request",D.success("Opening email client...");break;case"Video Tutorial":window.open("/tutorials","_blank"),D.success("Opening video tutorials...");break;default:D.info(`${f.title} feature coming soon!`)}},children:f.action})]})},x))}),e.jsx("div",{className:"space-y-6",children:(t?u:i).map(f=>e.jsxs(K,{children:[e.jsx(pe,{children:e.jsxs(ge,{className:"flex items-center gap-2",children:[e.jsx(f.icon,{className:"h-5 w-5"}),f.title]})}),e.jsx(X,{className:"space-y-4",children:f.faqs.map((x,h)=>e.jsxs("div",{className:"border-b pb-4 last:border-b-0",children:[e.jsxs("h4",{className:"font-medium mb-2 flex items-center gap-2",children:[e.jsx(xv,{className:"h-4 w-4 text-primary"}),x.question]}),e.jsx("p",{className:"text-muted-foreground text-sm pl-6",children:x.answer})]},h))})]},f.id))})]}),e.jsx(mt,{value:"support",className:"space-y-6",children:e.jsxs(K,{children:[e.jsxs(pe,{children:[e.jsx(ge,{children:"Submit a Support Ticket"}),e.jsx(lt,{children:"Can't find what you're looking for? Send us a message and we'll help you out."})]}),e.jsx(X,{children:e.jsxs("form",{onSubmit:c,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Subject *"}),e.jsx(fe,{value:a.subject,onChange:f=>r({...a,subject:f.target.value}),placeholder:"Brief description of your issue"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Category"}),e.jsxs("select",{className:"w-full p-2 border rounded-md",value:a.category,onChange:f=>r({...a,category:f.target.value}),children:[e.jsx("option",{value:"",children:"Select a category"}),e.jsx("option",{value:"technical",children:"Technical Issue"}),e.jsx("option",{value:"billing",children:"Billing & Payments"}),e.jsx("option",{value:"feature",children:"Feature Request"}),e.jsx("option",{value:"general",children:"General Question"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Priority"}),e.jsxs("select",{className:"w-full p-2 border rounded-md",value:a.priority,onChange:f=>r({...a,priority:f.target.value}),children:[e.jsx("option",{value:"low",children:"Low"}),e.jsx("option",{value:"medium",children:"Medium"}),e.jsx("option",{value:"high",children:"High"}),e.jsx("option",{value:"urgent",children:"Urgent"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Message *"}),e.jsx(Ts,{value:a.message,onChange:f=>r({...a,message:f.target.value}),placeholder:"Please describe your issue in detail...",rows:5})]}),e.jsxs(R,{type:"submit",className:"w-full",children:[e.jsx(Ma,{className:"h-4 w-4 mr-2"}),"Submit Support Ticket"]})]})})]})}),e.jsx(mt,{value:"resources",className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[e.jsxs(K,{children:[e.jsx(pe,{children:e.jsxs(ge,{className:"flex items-center gap-2",children:[e.jsx(ka,{className:"h-5 w-5"}),"Video Tutorials"]})}),e.jsxs(X,{children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Step-by-step video guides for all ominbiz features"}),e.jsx(R,{variant:"outline",className:"w-full",children:"Watch Tutorials"})]})]}),e.jsxs(K,{children:[e.jsx(pe,{children:e.jsxs(ge,{className:"flex items-center gap-2",children:[e.jsx(ya,{className:"h-5 w-5"}),"Documentation"]})}),e.jsxs(X,{children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Comprehensive guides and API documentation"}),e.jsx(R,{variant:"outline",className:"w-full",children:"Read Docs"})]})]}),e.jsxs(K,{children:[e.jsx(pe,{children:e.jsxs(ge,{className:"flex items-center gap-2",children:[e.jsx(Xt,{className:"h-5 w-5"}),"Community"]})}),e.jsxs(X,{children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Connect with other ominbiz users and share tips"}),e.jsx(R,{variant:"outline",className:"w-full",children:"Join Community"})]})]})]})})]})]})},xo=(t="trend",s=30)=>{const a=[];for(let i=0;i<s;i++){const o=new Date;o.setDate(o.getDate()-(s-i-1));const c=t==="growth"?i*20:t==="decline"?-i*10:Math.sin(i/5)*100,u=(Math.random()-.5)*200;a.push({name:o.toLocaleDateString("en-US",{month:"short",day:"numeric"}),date:o.toISOString().split("T")[0],value:Math.max(0,1e3+c+u),revenue:Math.max(0,1e3+c+u),profit:Math.max(0,(1e3+c+u)*.3),loss:Math.max(0,(1e3+c+u)*.1),orders:Math.floor(20+Math.random()*50+i*2),customers:Math.floor(10+Math.random()*30+i),products:Math.floor(5+Math.random()*15)})}return a},qW=()=>{const{isAuthenticated:t}=Es(),[s,a]=v.useState(!0),[r,i]=v.useState(null),[o,c]=v.useState({orders:[],products:[],salesData:[],customerData:[]}),[u,f]=v.useState({overview:{totalRevenue:0,totalOrders:0,totalCustomers:0,averageOrderValue:0,growthRate:0,conversionRate:3.2},salesTrends:{daily:[],topProducts:[]},customerInsights:{demographics:{ageGroups:[],locations:[]},behavior:{averageSessionTime:"0m 0s",bounceRate:0,repeatCustomers:0,customerLifetimeValue:0}},performance:{goals:[{name:"Monthly Revenue",target:15e4,current:0,percentage:0},{name:"New Customers",target:200,current:0,percentage:0},{name:"Order Volume",target:1500,current:0,percentage:0},{name:"Customer Satisfaction",target:95,current:92,percentage:96.8}],kpis:{revenueGrowth:0,customerGrowth:0,orderGrowth:0,profitMargin:0}}}),[x,h]=v.useState(!1),[p,g]=v.useState("7d"),b=async()=>{if(t){a(!0),i(null);try{const k={Authorization:`Bearer ${localStorage.getItem("token")}`},[E,A,B]=await Promise.all([ye.get("/orders",{headers:k}).catch(()=>({data:[]})),ye.get("/products",{headers:k}).catch(()=>({data:[]})),ye.get("/transactions",{headers:k}).catch(()=>({data:[]}))]),H=E.data||[],M=A.data||[],q=B.data||[];console.log("✅ Analytics data loaded:",{orders:H.length,products:M.length,transactions:q.length}),N(H,M,q),c({orders:H,products:M,salesData:S(H),customerData:C(H)})}catch(F){console.error("❌ Error fetching analytics:",F),i(F.message),D.error("Failed to load analytics data")}finally{a(!1)}}},N=(F,k,E)=>{const A=F.reduce((Q,O)=>Q+(Number(O.total)||0),0),B=F.length,H=new Set(F.map(Q=>Q.customer?.email).filter(Boolean)).size,M=B>0?A/B:0,q=new Date,L=new Date(q.getFullYear(),q.getMonth()-1,1),re=new Date(q.getFullYear(),q.getMonth(),1),V=F.filter(Q=>{const O=new Date(Q.date||Q.createdAt);return O>=L&&O<re}),ee=F.filter(Q=>new Date(Q.date||Q.createdAt)>=re),me=V.reduce((Q,O)=>Q+(Number(O.total)||0),0),W=ee.reduce((Q,O)=>Q+(Number(O.total)||0),0),se=me>0?(W-me)/me*100:0,Z={};F.forEach(Q=>{Q.items?.forEach(O=>{const te=O.product||O.name;Z[te]||(Z[te]={name:O.name||"Unknown",sales:0,revenue:0}),Z[te].sales+=O.quantity||1,Z[te].revenue+=(O.price||0)*(O.quantity||1)})});const I=Object.values(Z).sort((Q,O)=>O.revenue-Q.revenue).slice(0,5);f({overview:{totalRevenue:A,totalOrders:B,totalCustomers:H,averageOrderValue:M,growthRate:se,conversionRate:3.2},salesTrends:{daily:y(F),topProducts:I.length>0?I:u.salesTrends.topProducts},customerInsights:u.customerInsights,performance:{...u.performance,goals:[{name:"Monthly Revenue",target:15e4,current:W,percentage:W/15e4*100},{name:"New Customers",target:200,current:H,percentage:H/200*100},{name:"Order Volume",target:1500,current:B,percentage:B/1500*100},{name:"Customer Satisfaction",target:95,current:92,percentage:96.8}],kpis:{revenueGrowth:se,customerGrowth:(()=>{const Q=new Set(V.map(te=>te.customer?.email).filter(Boolean)).size,O=new Set(ee.map(te=>te.customer?.email).filter(Boolean)).size;return Q>0?(O-Q)/Q*100:0})(),orderGrowth:(ee.length-V.length)/Math.max(V.length,1)*100,profitMargin:A>0?A*.25/A*100:0}}})},y=F=>{const k=[],E=new Date;for(let A=6;A>=0;A--){const B=new Date(E);B.setDate(B.getDate()-A);const H=B.toISOString().split("T")[0],M=F.filter(L=>new Date(L.date||L.createdAt).toISOString().split("T")[0]===H),q=M.reduce((L,re)=>L+(Number(re.total)||0),0);k.push({date:H,revenue:q,orders:M.length})}return k},S=F=>{const k=[],E=new Date;for(let A=29;A>=0;A--){const B=new Date(E);B.setDate(B.getDate()-A);const H=B.toISOString().split("T")[0],M=F.filter(L=>new Date(L.date||L.createdAt).toISOString().split("T")[0]===H),q=M.reduce((L,re)=>L+(Number(re.total)||0),0);k.push({date:H,name:B.toLocaleDateString("en-US",{month:"short",day:"numeric"}),value:q,orders:M.length})}return k},C=F=>{const k=[],E=new Date;for(let A=29;A>=0;A--){const B=new Date(E);B.setDate(B.getDate()-A);const H=B.toISOString().split("T")[0],M=F.filter(L=>new Date(L.date||L.createdAt).toISOString().split("T")[0]===H),q=new Set(M.map(L=>L.customer?.email).filter(Boolean)).size;k.push({date:H,name:B.toLocaleDateString("en-US",{month:"short",day:"numeric"}),value:q})}return k};v.useEffect(()=>{b();const F=setInterval(b,12e4);return()=>clearInterval(F)},[t]);const T=async()=>{h(!0),await b(),h(!1),D.success("Analytics data refreshed!")},_=F=>{D.info(`Generating ${F} report...`,{duration:2e3});const k={reportType:F,generatedAt:new Date().toISOString(),period:p,data:{overview:u.overview,salesTrends:u.salesTrends,customerInsights:u.customerInsights,performance:u.performance}},E=JSON.stringify(k,null,2),A=new Blob([E],{type:"application/json"}),B=URL.createObjectURL(A),H=document.createElement("a");H.href=B,H.download=`${F.toLowerCase().replace(/\s+/g,"-")}-report-${Date.now()}.json`,document.body.appendChild(H),H.click(),document.body.removeChild(H),URL.revokeObjectURL(B),D.success(`${F} report downloaded!`)},G=F=>new Intl.NumberFormat("en-KE",{style:"currency",currency:"KES"}).format(F),U=F=>`${F.toFixed(1)}%`;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Analytics Dashboard"}),e.jsx("p",{className:"text-muted-foreground",children:"Comprehensive business insights and performance metrics"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("select",{value:p,onChange:F=>g(F.target.value),className:"px-3 py-2 border rounded-md",children:[e.jsx("option",{value:"7d",children:"Last 7 days"}),e.jsx("option",{value:"30d",children:"Last 30 days"}),e.jsx("option",{value:"90d",children:"Last 90 days"}),e.jsx("option",{value:"1y",children:"Last year"})]}),e.jsxs(R,{onClick:T,disabled:x,variant:"outline",children:[e.jsx(is,{className:`h-4 w-4 mr-2 ${x?"animate-spin":""}`}),"Refresh"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx(K,{children:e.jsx(X,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Total Revenue"}),e.jsx("p",{className:"text-2xl font-bold",children:G(u.overview.totalRevenue)}),e.jsxs("p",{className:"text-xs text-green-600 flex items-center mt-1",children:[e.jsx(Is,{className:"h-3 w-3 mr-1"}),"+",U(u.overview.growthRate)," from last month"]})]}),e.jsx(ea,{className:"h-8 w-8 text-green-600"})]})})}),e.jsx(K,{children:e.jsx(X,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Total Orders"}),e.jsx("p",{className:"text-2xl font-bold",children:u.overview.totalOrders.toLocaleString()}),e.jsxs("p",{className:`text-xs flex items-center mt-1 ${u.performance.kpis.orderGrowth>=0?"text-green-600":"text-red-600"}`,children:[u.performance.kpis.orderGrowth>=0?e.jsx(Is,{className:"h-3 w-3 mr-1"}):e.jsx(gi,{className:"h-3 w-3 mr-1"}),u.performance.kpis.orderGrowth>=0?"+":"",U(Math.abs(u.performance.kpis.orderGrowth))," from last month"]})]}),e.jsx(js,{className:"h-8 w-8 text-blue-600"})]})})}),e.jsx(K,{children:e.jsx(X,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Total Customers"}),e.jsx("p",{className:"text-2xl font-bold",children:u.overview.totalCustomers.toLocaleString()}),e.jsxs("p",{className:`text-xs flex items-center mt-1 ${u.performance.kpis.customerGrowth>=0?"text-green-600":"text-red-600"}`,children:[u.performance.kpis.customerGrowth>=0?e.jsx(Is,{className:"h-3 w-3 mr-1"}):e.jsx(gi,{className:"h-3 w-3 mr-1"}),u.performance.kpis.customerGrowth>=0?"+":"",U(Math.abs(u.performance.kpis.customerGrowth))," from last month"]})]}),e.jsx(Xt,{className:"h-8 w-8 text-purple-600"})]})})}),e.jsx(K,{children:e.jsx(X,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Avg Order Value"}),e.jsx("p",{className:"text-2xl font-bold",children:G(u.overview.averageOrderValue)}),u.overview.totalOrders>0?e.jsxs("p",{className:"text-xs text-muted-foreground flex items-center mt-1",children:["Based on ",u.overview.totalOrders," orders"]}):e.jsx("p",{className:"text-xs text-muted-foreground flex items-center mt-1",children:"No orders yet"})]}),e.jsx(Ni,{className:"h-8 w-8 text-orange-600"})]})})})]}),e.jsxs(pa,{defaultValue:"sales",className:"space-y-6",children:[e.jsxs(ba,{className:"grid w-full grid-cols-4",children:[e.jsx(ut,{value:"sales",children:"Sales Analytics"}),e.jsx(ut,{value:"customers",children:"Customer Insights"}),e.jsx(ut,{value:"performance",children:"Performance"}),e.jsx(ut,{value:"reports",children:"Reports"})]}),e.jsx(mt,{value:"sales",className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx(as,{title:"Sales Revenue Trends",description:"Last 30 days of revenue from real orders",type:"area",data:s?xo("growth",30):o.salesData,height:350,autoRefresh:!0,refreshInterval:12e4}),e.jsx(as,{title:"Order Volume Trends",description:"Daily order count from database",type:"line",data:s?xo("trend",30):o.salesData,height:350,autoRefresh:!0,refreshInterval:12e4}),e.jsxs(K,{children:[e.jsxs(pe,{children:[e.jsxs(ge,{className:"flex items-center gap-2",children:[e.jsx(qt,{className:"h-5 w-5"}),"Top Products"]}),e.jsx(lt,{children:"Best performing products by revenue"})]}),e.jsx(X,{children:e.jsx("div",{className:"space-y-4",children:u.salesTrends.topProducts.map((F,k)=>e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium",children:F.name}),e.jsx("span",{className:"text-sm",children:G(F.revenue)})]}),e.jsxs("div",{className:"flex items-center justify-between text-xs text-muted-foreground",children:[e.jsxs("span",{children:[F.sales," sales"]}),e.jsx(Tr,{value:F.sales/250*100,className:"w-20 h-2"})]})]},k))})})]})]})}),e.jsx(mt,{value:"customers",className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx(as,{title:"Customer Demographics",description:"Customer distribution from real orders",type:"pie",data:s?[{name:"18-25",value:25},{name:"26-35",value:35},{name:"36-45",value:20},{name:"46-55",value:15},{name:"55+",value:5}]:[{name:"Active Customers",value:u.overview.totalCustomers},{name:"One-time Buyers",value:Math.floor(u.overview.totalCustomers*.3)},{name:"Repeat Customers",value:Math.floor(u.overview.totalCustomers*.7)}],height:350,showControls:!1}),e.jsx(as,{title:"Customer Acquisition",description:"Daily unique customers from database",type:"bar",data:s?xo("growth",30):o.customerData,height:350,autoRefresh:!0,refreshInterval:12e4}),e.jsxs(K,{children:[e.jsxs(pe,{children:[e.jsxs(ge,{className:"flex items-center gap-2",children:[e.jsx(Aa,{className:"h-5 w-5"}),"Customer Behavior"]}),e.jsx(lt,{children:"Calculated from order data"})]}),e.jsx(X,{children:s?e.jsx("div",{className:"space-y-4",children:[1,2,3,4].map(F=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"h-4 w-32 bg-gray-200 rounded animate-pulse"}),e.jsx("div",{className:"h-4 w-20 bg-gray-200 rounded animate-pulse"})]},F))}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm",children:"Total Customers"}),e.jsx("span",{className:"text-sm font-medium",children:u.overview.totalCustomers})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm",children:"Avg Orders per Customer"}),e.jsx("span",{className:"text-sm font-medium",children:u.overview.totalCustomers>0?(u.overview.totalOrders/u.overview.totalCustomers).toFixed(1):"0"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm",children:"Customer Lifetime Value"}),e.jsx("span",{className:"text-sm font-medium",children:G(u.overview.averageOrderValue*1.5)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm",children:"Repeat Purchase Rate"}),e.jsx("span",{className:"text-sm font-medium",children:(()=>{if(u.overview.totalCustomers===0)return"0%";const F=(u.overview.totalOrders-u.overview.totalCustomers)/u.overview.totalCustomers*100;return F>0?`${F.toFixed(1)}%`:"0%"})()})]})]})})]})]})}),e.jsxs(mt,{value:"performance",className:"space-y-6",children:[e.jsxs(K,{children:[e.jsxs(pe,{children:[e.jsxs(ge,{className:"flex items-center gap-2",children:[e.jsx(Ni,{className:"h-5 w-5"}),"Goals & Targets"]}),e.jsx(lt,{children:"Track progress towards monthly goals"})]}),e.jsx(X,{children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:u.performance.goals.map((F,k)=>e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium",children:F.name}),e.jsxs("span",{className:"text-sm",children:[F.current.toLocaleString()," / ",F.target.toLocaleString()]})]}),e.jsx(Tr,{value:F.percentage,className:"h-3"}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[F.percentage.toFixed(1),"% of target achieved"]})]},k))})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(K,{children:e.jsxs(X,{className:"p-4 text-center",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Revenue Growth"}),e.jsxs("p",{className:"text-2xl font-bold text-green-600",children:["+",u.performance.kpis.revenueGrowth,"%"]})]})}),e.jsx(K,{children:e.jsxs(X,{className:"p-4 text-center",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Customer Growth"}),e.jsxs("p",{className:"text-2xl font-bold text-blue-600",children:["+",u.performance.kpis.customerGrowth,"%"]})]})}),e.jsx(K,{children:e.jsxs(X,{className:"p-4 text-center",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Order Growth"}),e.jsxs("p",{className:"text-2xl font-bold text-purple-600",children:["+",u.performance.kpis.orderGrowth,"%"]})]})}),e.jsx(K,{children:e.jsxs(X,{className:"p-4 text-center",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Profit Margin"}),e.jsxs("p",{className:"text-2xl font-bold text-orange-600",children:[u.performance.kpis.profitMargin,"%"]})]})})]})]}),e.jsx(mt,{value:"reports",className:"space-y-6",children:e.jsxs(K,{children:[e.jsxs(pe,{children:[e.jsxs(ge,{className:"flex items-center gap-2",children:[e.jsx(er,{className:"h-5 w-5"}),"Generate Reports"]}),e.jsx(lt,{children:"Export detailed analytics reports"})]}),e.jsx(X,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.jsxs(R,{variant:"outline",className:"h-20 flex-col hover:bg-blue-50 hover:border-blue-500 transition-colors",onClick:()=>_("Monthly Report"),children:[e.jsx(ms,{className:"h-6 w-6 mb-2"}),"Monthly Report"]}),e.jsxs(R,{variant:"outline",className:"h-20 flex-col hover:bg-purple-50 hover:border-purple-500 transition-colors",onClick:()=>_("Customer Report"),children:[e.jsx(Xt,{className:"h-6 w-6 mb-2"}),"Customer Report"]}),e.jsxs(R,{variant:"outline",className:"h-20 flex-col hover:bg-orange-50 hover:border-orange-500 transition-colors",onClick:()=>_("Product Report"),children:[e.jsx(qt,{className:"h-6 w-6 mb-2"}),"Product Report"]}),e.jsxs(R,{variant:"outline",className:"h-20 flex-col hover:bg-green-50 hover:border-green-500 transition-colors",onClick:()=>_("Financial Report"),children:[e.jsx(ea,{className:"h-6 w-6 mb-2"}),"Financial Report"]}),e.jsxs(R,{variant:"outline",className:"h-20 flex-col hover:bg-cyan-50 hover:border-cyan-500 transition-colors",onClick:()=>_("Growth Report"),children:[e.jsx(Is,{className:"h-6 w-6 mb-2"}),"Growth Report"]}),e.jsxs(R,{variant:"outline",className:"h-20 flex-col hover:bg-pink-50 hover:border-pink-500 transition-colors",onClick:()=>_("Performance Report"),children:[e.jsx(Aa,{className:"h-6 w-6 mb-2"}),"Performance Report"]})]})})]})})]}),e.jsxs("div",{className:"mt-8 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Advanced Analytics"}),e.jsx(_e,{variant:"secondary",children:"Real-time Data"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx(as,{title:"Sales Revenue Trends",description:"Real-time revenue from orders",defaultType:"line",data:s?xo("growth",30):o.salesData,height:350,autoRefresh:!0,refreshInterval:12e4}),e.jsx(as,{title:"Order Volume Analysis",description:"Daily order counts from database",defaultType:"bar",data:s?xo("trend",30):o.salesData,height:350,autoRefresh:!0,refreshInterval:12e4})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx(as,{title:"Customer Demographics",description:"Customer segmentation from orders",defaultType:"pie",data:s?[{name:"Segment A",value:30},{name:"Segment B",value:40},{name:"Segment C",value:30}]:[{name:"Active",value:u.overview.totalCustomers},{name:"New",value:Math.floor(u.overview.totalCustomers*.4)},{name:"Returning",value:Math.floor(u.overview.totalCustomers*.6)}],height:350,autoRefresh:!1,refreshInterval:12e4}),e.jsx(as,{title:"Customer Acquisition",description:"Daily new customers",defaultType:"area",data:s?xo("growth",30):o.customerData,height:350,autoRefresh:!0,refreshInterval:12e4})]}),e.jsx("div",{className:"w-full",children:e.jsx(as,{title:"Comprehensive Business Analytics",description:"Combined metrics from all data sources",defaultType:"composed",data:s?xo("growth",30):o.salesData,height:400,autoRefresh:!0,refreshInterval:12e4,fullscreen:!1})})]})]})},KW=()=>{const{user:t,isAuthenticated:s}=Es(),{socket:a,connected:r}=da(),[i,o]=v.useState(!0),[c,u]=v.useState(!0),f=v.useRef(null),[x,h]=v.useState({locations:[{id:1,name:"Main Store",address:"123 Business Street, Nairobi",coordinates:{lat:-1.2921,lng:36.8219},status:"active",employees:12,dailyRevenue:15420,customers:156,type:"store"},{id:2,name:"Westlands Branch",address:"456 Westlands Avenue, Nairobi",coordinates:{lat:-1.2676,lng:36.8108},status:"active",employees:8,dailyRevenue:12300,customers:98,type:"branch"},{id:3,name:"Kisumu Branch",address:"789 Kisumu Road, Kisumu",coordinates:{lat:-.0917,lng:34.768},status:"active",employees:10,dailyRevenue:9800,customers:87,type:"branch"},{id:4,name:"Delivery Hub",address:"321 Industrial Area, Nairobi",coordinates:{lat:-1.3197,lng:36.851},status:"active",employees:5,dailyRevenue:0,customers:0,type:"warehouse"}],deliveries:[{id:1,orderId:"ORD-001",customer:"John Doe",address:"Kilimani, Nairobi",coordinates:{lat:-1.2884,lng:36.7856},status:"in_transit",estimatedTime:"15 mins",driver:"Peter Kamau"},{id:2,orderId:"ORD-002",customer:"Jane Smith",address:"Karen, Nairobi",coordinates:{lat:-1.3197,lng:36.7076},status:"delivered",estimatedTime:"Delivered",driver:"Mary Wanjiku"},{id:3,orderId:"ORD-003",customer:"Bob Johnson",address:"Eastleigh, Nairobi",coordinates:{lat:-1.2921,lng:36.857},status:"pending",estimatedTime:"30 mins",driver:"James Mwangi"}],analytics:{totalLocations:4,activeDeliveries:2,completedToday:15,averageDeliveryTime:"22 mins",coverage:"85%"}}),[p,g]=v.useState(null),[b,N]=v.useState(""),[y,S]=v.useState("locations"),[C,T]=v.useState(!1),[_,G]=v.useState(!1),[U,F]=v.useState(!1),k=async()=>{try{const L=localStorage.getItem("token"),re=await ye.get("/locations",{headers:{Authorization:`Bearer ${L}`}});if(re.data&&Array.isArray(re.data)){const V=re.data.map(ee=>({id:ee._id||ee.id,name:ee.name,address:`${ee.address}, ${ee.city||""}`,coordinates:ee.coordinates||{lat:-1.2921,lng:36.8219},status:ee.status||"active",employees:ee.employees||0,dailyRevenue:ee.revenue||0,customers:ee.customers||0,type:ee.type||"branch",phone:ee.phone,manager:ee.manager,operatingHours:ee.operatingHours}));return h(ee=>({...ee,locations:V,analytics:{...ee.analytics,totalLocations:V.length}})),u(!1),V}}catch(L){console.error("Error fetching locations:",L),D.error("Failed to fetch locations from database"),u(!1)}},E=async()=>{try{const L=localStorage.getItem("token"),re=await ye.get("/orders?status=in_transit,pending",{headers:{Authorization:`Bearer ${L}`}});if(re.data&&Array.isArray(re.data)){const V=re.data.map(ee=>({id:ee._id||ee.id,orderId:ee.orderNumber||`ORD-${ee.id}`,customer:ee.customerName||ee.customer?.name||"Customer",address:ee.deliveryAddress||ee.address,coordinates:ee.deliveryCoordinates||{lat:-1.2921,lng:36.8219},status:ee.status||"pending",estimatedTime:ee.estimatedDelivery||"30 mins",driver:ee.driver||"Assigned"}));h(ee=>({...ee,deliveries:V,analytics:{...ee.analytics,activeDeliveries:V.filter(me=>me.status==="in_transit").length}}))}}catch(L){console.error("Error fetching deliveries:",L)}};v.useEffect(()=>{if(a&&r&&i)return a.emit("join_maps",{userId:t?._id}),a.on("location_updated",L=>{h(re=>({...re,locations:re.locations.map(V=>V.id===L.id?{...V,...L}:V)})),D.info(`Location "${L.name}" updated`)}),a.on("location_added",L=>{h(re=>({...re,locations:[...re.locations,L],analytics:{...re.analytics,totalLocations:re.analytics.totalLocations+1}})),D.success(`New location "${L.name}" added`)}),a.on("delivery_updated",L=>{h(re=>({...re,deliveries:re.deliveries.map(V=>V.id===L.id?{...V,...L}:V)}))}),a.on("delivery_started",L=>{h(re=>({...re,deliveries:[...re.deliveries,L],analytics:{...re.analytics,activeDeliveries:re.analytics.activeDeliveries+1}})),D.info(`New delivery started: ${L.orderId}`)}),()=>{a.off("location_updated"),a.off("location_added"),a.off("delivery_updated"),a.off("delivery_started")}},[a,r,i,t]),v.useEffect(()=>{s&&(k(),E())},[s]),v.useEffect(()=>{if(!i&&s)return f.current=setInterval(()=>{k(),E()},3e4),()=>{f.current&&clearInterval(f.current)}},[i,s]);const A=async()=>{T(!0),await Promise.all([k(),E()]),T(!1),D.success("Map data refreshed!")},B=L=>{switch(L){case"active":return"bg-green-500";case"inactive":return"bg-gray-500";case"maintenance":return"bg-yellow-500";case"in_transit":return"bg-blue-500";case"delivered":return"bg-green-500";case"pending":return"bg-orange-500";default:return"bg-gray-500"}},H=L=>{switch(L){case"store":return"🏪";case"branch":return"🏢";case"warehouse":return"🏭";default:return"📍"}},M=x.locations.filter(L=>L.name.toLowerCase().includes(b.toLowerCase())||L.address.toLowerCase().includes(b.toLowerCase())),q=x.deliveries.filter(L=>L.customer.toLowerCase().includes(b.toLowerCase())||L.orderId.toLowerCase().includes(b.toLowerCase()));return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Maps & Locations"}),e.jsxs("p",{className:"text-muted-foreground",children:["Track locations, deliveries, and geographic analytics •",r?e.jsx("span",{className:"text-green-600",children:" 🟢 Real-time Connected"}):e.jsx("span",{className:"text-red-600",children:" 🔴 Offline Mode"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 border rounded-lg bg-background",children:[e.jsx(va,{className:`h-4 w-4 ${i?"text-green-500":"text-gray-400"}`}),e.jsx(ae,{htmlFor:"realtime-sync",className:"text-sm cursor-pointer",children:"Real-time Sync"}),e.jsx(ns,{id:"realtime-sync",checked:i,onCheckedChange:L=>{o(L),D.info(L?"Real-time sync enabled":"Real-time sync disabled")}})]}),e.jsxs(R,{onClick:A,disabled:C||c,variant:"outline",children:[e.jsx(is,{className:`h-4 w-4 mr-2 ${C?"animate-spin":""}`}),"Refresh"]}),e.jsxs(R,{variant:"outline",onClick:()=>D.info("Full screen mode - Coming soon"),children:[e.jsx(I_,{className:"h-4 w-4 mr-2"}),"Full Screen"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:[e.jsx(K,{children:e.jsxs(X,{className:"p-4 text-center",children:[e.jsx(Xr,{className:"h-6 w-6 mx-auto mb-2 text-blue-600"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Locations"}),e.jsx("p",{className:"text-2xl font-bold",children:x.analytics.totalLocations})]})}),e.jsx(K,{children:e.jsxs(X,{className:"p-4 text-center",children:[e.jsx(Eb,{className:"h-6 w-6 mx-auto mb-2 text-green-600"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Active Deliveries"}),e.jsx("p",{className:"text-2xl font-bold",children:x.analytics.activeDeliveries})]})}),e.jsx(K,{children:e.jsxs(X,{className:"p-4 text-center",children:[e.jsx(qt,{className:"h-6 w-6 mx-auto mb-2 text-purple-600"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Completed Today"}),e.jsx("p",{className:"text-2xl font-bold",children:x.analytics.completedToday})]})}),e.jsx(K,{children:e.jsxs(X,{className:"p-4 text-center",children:[e.jsx(Qt,{className:"h-6 w-6 mx-auto mb-2 text-orange-600"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Avg Delivery Time"}),e.jsx("p",{className:"text-2xl font-bold",children:x.analytics.averageDeliveryTime})]})}),e.jsx(K,{children:e.jsxs(X,{className:"p-4 text-center",children:[e.jsx(Aa,{className:"h-6 w-6 mx-auto mb-2 text-red-600"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Coverage"}),e.jsx("p",{className:"text-2xl font-bold",children:x.analytics.coverage})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsxs(K,{children:[e.jsx(pe,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(ge,{className:"flex items-center gap-2",children:[e.jsx(L_,{className:"h-5 w-5"}),"Interactive Map"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(R,{variant:y==="locations"?"default":"outline",size:"sm",onClick:()=>S("locations"),children:"Locations"}),e.jsx(R,{variant:y==="deliveries"?"default":"outline",size:"sm",onClick:()=>S("deliveries"),children:"Deliveries"})]})]})}),e.jsx(X,{children:e.jsxs("div",{className:"h-96 bg-gray-100 rounded-lg flex items-center justify-center relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-50 to-green-50"}),e.jsxs("div",{className:"relative z-10 text-center",children:[e.jsx(Xr,{className:"h-12 w-12 mx-auto mb-4 text-blue-600"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Interactive Map View"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:y==="locations"?"Showing business locations":"Showing active deliveries"}),e.jsx(_e,{variant:"outline",children:"Map integration ready - Connect your preferred map service"})]}),y==="locations"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"absolute top-20 left-32 w-6 h-6 bg-red-500 rounded-full flex items-center justify-center text-white text-xs font-bold animate-pulse",children:"1"}),e.jsx("div",{className:"absolute top-32 right-40 w-6 h-6 bg-blue-500 rounded-full flex items-center justify-center text-white text-xs font-bold animate-pulse",children:"2"}),e.jsx("div",{className:"absolute bottom-20 left-20 w-6 h-6 bg-green-500 rounded-full flex items-center justify-center text-white text-xs font-bold animate-pulse",children:"3"})]}),y==="deliveries"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"absolute top-24 right-32 w-4 h-4 bg-orange-500 rounded-full animate-bounce"}),e.jsx("div",{className:"absolute bottom-32 left-40 w-4 h-4 bg-green-500 rounded-full"}),e.jsx("div",{className:"absolute top-40 left-24 w-4 h-4 bg-blue-500 rounded-full animate-pulse"})]})]})})]})}),e.jsxs("div",{className:"space-y-6",children:[e.jsx(K,{children:e.jsx(X,{className:"p-4",children:e.jsxs("div",{className:"relative",children:[e.jsx(ia,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),e.jsx(fe,{placeholder:"Search locations or deliveries...",value:b,onChange:L=>N(L.target.value),className:"pl-10"})]})})}),e.jsxs(pa,{defaultValue:"locations",className:"space-y-4",children:[e.jsxs(ba,{className:"grid w-full grid-cols-2",children:[e.jsx(ut,{value:"locations",children:"Locations"}),e.jsx(ut,{value:"deliveries",children:"Deliveries"})]}),e.jsx(mt,{value:"locations",className:"space-y-4",children:e.jsxs(K,{children:[e.jsxs(pe,{children:[e.jsx(ge,{className:"text-lg",children:"Business Locations"}),e.jsx(lt,{children:"Manage your business locations"})]}),e.jsx(X,{className:"space-y-4",children:M.map(L=>e.jsx("div",{className:`p-3 border rounded-lg cursor-pointer transition-colors ${p?.id===L.id?"bg-blue-50 border-blue-200":"hover:bg-gray-50"}`,onClick:()=>g(L),children:e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"text-lg",children:H(L.type)}),e.jsx("h4",{className:"font-medium",children:L.name}),e.jsx("div",{className:`w-2 h-2 rounded-full ${B(L.status)}`})]}),e.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:L.address}),e.jsxs("div",{className:"flex items-center gap-4 text-xs",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Xt,{className:"h-3 w-3"}),L.employees]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(ea,{className:"h-3 w-3"}),"KES ",L.dailyRevenue.toLocaleString()]})]})]})})},L.id))})]})}),e.jsx(mt,{value:"deliveries",className:"space-y-4",children:e.jsxs(K,{children:[e.jsxs(pe,{children:[e.jsx(ge,{className:"text-lg",children:"Active Deliveries"}),e.jsx(lt,{children:"Track ongoing deliveries"})]}),e.jsx(X,{className:"space-y-4",children:q.map(L=>e.jsxs("div",{className:"p-3 border rounded-lg",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:L.orderId}),e.jsx("p",{className:"text-sm text-muted-foreground",children:L.customer})]}),e.jsx(_e,{variant:"outline",className:`${B(L.status)} text-white border-none`,children:L.status.replace("_"," ")})]}),e.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:L.address}),e.jsxs("div",{className:"flex items-center justify-between text-xs",children:[e.jsxs("span",{children:["Driver: ",L.driver]}),e.jsx("span",{className:"font-medium",children:L.estimatedTime})]})]},L.id))})]})})]}),e.jsxs(K,{children:[e.jsx(pe,{children:e.jsx(ge,{className:"text-lg",children:"Quick Actions"})}),e.jsxs(X,{className:"space-y-2",children:[e.jsxs(R,{variant:"outline",className:"w-full justify-start",onClick:()=>window.open("/dashboard/locations","_blank"),children:[e.jsx(Xr,{className:"h-4 w-4 mr-2"}),"Manage Locations"]}),e.jsxs(R,{variant:"outline",className:"w-full justify-start",onClick:()=>D.info("Route planning - Coming soon"),children:[e.jsx(Eb,{className:"h-4 w-4 mr-2"}),"Plan Route"]}),e.jsxs(R,{variant:"outline",className:"w-full justify-start",onClick:()=>S("deliveries"),children:[e.jsx(cg,{className:"h-4 w-4 mr-2"}),"Track Deliveries"]}),e.jsxs(R,{variant:"outline",className:"w-full justify-start",onClick:()=>{G(!_),D.info(_?"Heatmap disabled":"Heatmap enabled")},children:[e.jsx(Ni,{className:"h-4 w-4 mr-2"}),_?"Hide":"Show"," Heatmap"]})]})]}),e.jsxs(K,{children:[e.jsx(pe,{children:e.jsx(ge,{className:"text-lg",children:"Map Settings"})}),e.jsxs(X,{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(ae,{htmlFor:"show-routes",className:"text-sm",children:"Show Routes"}),e.jsx(ns,{id:"show-routes",checked:U,onCheckedChange:F})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(ae,{htmlFor:"show-heatmap",className:"text-sm",children:"Revenue Heatmap"}),e.jsx(ns,{id:"show-heatmap",checked:_,onCheckedChange:G})]}),e.jsx(R,{variant:"outline",size:"sm",className:"w-full",onClick:()=>{N(""),S("locations"),G(!1),F(!1),D.success("Map view reset")},children:"Reset View"})]})]}),c?e.jsx(K,{children:e.jsxs(X,{className:"p-6 text-center",children:[e.jsx(is,{className:"h-8 w-8 mx-auto mb-2 animate-spin text-primary"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Loading map data..."})]})}):e.jsxs(K,{children:[e.jsx(pe,{children:e.jsxs(ge,{className:"text-lg flex items-center gap-2",children:[e.jsx(B_,{className:"h-4 w-4"}),"Sync Status"]})}),e.jsxs(X,{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Connection"}),e.jsx(_e,{variant:r?"default":"secondary",children:r?"🟢 Connected":"🔴 Disconnected"})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Real-time"}),e.jsx(_e,{variant:i?"default":"outline",children:i?"Enabled":"Disabled"})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Last Updated"}),e.jsx("span",{className:"text-xs",children:new Date().toLocaleTimeString()})]})]})]})]})]})]})},YW=()=>{const{socket:t,connected:s}=da(),{user:a}=Es(),[r,i]=v.useState([]),[o,c]=v.useState([]),[u,f]=v.useState(!1),[x,h]=v.useState(!1),[p,g]=v.useState(!1),[b,N]=v.useState(null),[y,S]=v.useState(null),[C,T]=v.useState(!1),[_,G]=v.useState(!0),[U,F]=v.useState([]);v.useRef(null);const[k,E]=v.useState({supplier:"",items:[{product:"",quantity:1,unitPrice:0}],expectedDelivery:"",notes:"",priority:"medium"}),[A,B]=v.useState({name:"",contact:"",email:"",address:""}),H=[{id:1,orderNumber:"PO-001",supplier:"ABC Suppliers Ltd",totalAmount:25e3,status:"pending",orderDate:"2024-01-15",expectedDelivery:"2024-01-22",items:[{product:"Office Chairs",quantity:10,unitPrice:2e3},{product:"Desk Lamps",quantity:5,unitPrice:1e3}]},{id:2,orderNumber:"PO-002",supplier:"XYZ Trading Co",totalAmount:18500,status:"approved",orderDate:"2024-01-14",expectedDelivery:"2024-01-20",items:[{product:"Laptops",quantity:3,unitPrice:5500},{product:"Keyboards",quantity:10,unitPrice:250}]},{id:3,orderNumber:"PO-003",supplier:"Tech Solutions Inc",totalAmount:45e3,status:"delivered",orderDate:"2024-01-10",expectedDelivery:"2024-01-18",items:[{product:"Servers",quantity:1,unitPrice:45e3}]}],M=[{id:1,name:"ABC Suppliers Ltd",contact:"+254 700 123 456",email:"info@abcsuppliers.com"},{id:2,name:"XYZ Trading Co",contact:"+254 700 789 012",email:"sales@xyztrading.com"},{id:3,name:"Tech Solutions Inc",contact:"+254 700 345 678",email:"orders@techsolutions.com"}];v.useEffect(()=>{q()},[]);const q=async()=>{G(!0);try{const O=localStorage.getItem("token"),[te,oe]=await Promise.allSettled([ye.get("/purchasing/orders",{headers:{Authorization:`Bearer ${O}`}}),ye.get("/purchasing/suppliers",{headers:{Authorization:`Bearer ${O}`}})]);te.status==="fulfilled"&&te.value?.data?i(te.value.data):i(H),oe.status==="fulfilled"&&oe.value?.data?c(oe.value.data):c(M),G(!1)}catch(O){console.error("Error fetching purchase data:",O),D.error("Error loading purchase data"),i(H),c(M),G(!1)}};v.useEffect(()=>{if(t&&s)return t.emit("join_purchasing",{userId:a?._id}),t.on("purchase_order_updated",O=>{i(te=>te.map(oe=>oe.id===O.id?{...oe,...O}:oe)),D.info(`Purchase order ${O.orderNumber}: ${O.status}`),F(te=>[{id:Date.now(),type:"order_update",message:`PO ${O.orderNumber} status changed to ${O.status}`,timestamp:new Date},...te])}),t.on("delivery_status_updated",O=>{i(te=>te.map(oe=>oe.id===O.orderId?{...oe,deliveryStatus:O.status}:oe)),D.success(`Delivery update: ${O.status}`)}),t.on("payment_processed",O=>{i(te=>te.map(oe=>oe.id===O.orderId?{...oe,paymentStatus:O.status}:oe)),D.success(`Payment ${O.status} for ${O.orderNumber}`),F(te=>[{id:Date.now(),type:"payment",message:`Payment ${O.status} - ${O.amount}`,timestamp:new Date},...te])}),()=>{t.off("purchase_order_updated"),t.off("delivery_status_updated"),t.off("payment_processed")}},[t,s,a]);const L=async()=>{T(!0),await q(),T(!1),D.success("Purchase data refreshed!")},re=async()=>{if(!k.supplier||k.items.length===0){D.error("Please fill in all required fields");return}try{const O=k.items.reduce((oe,je)=>oe+je.quantity*je.unitPrice,0),te={...k,orderNumber:`PO-${String(r.length+1).padStart(3,"0")}`,totalAmount:O,status:"pending",orderDate:new Date().toISOString().split("T")[0]};i([te,...r]),f(!1),E({supplier:"",items:[{product:"",quantity:1,unitPrice:0}],expectedDelivery:"",notes:"",priority:"medium"}),D.success("Purchase order created successfully!")}catch(O){console.error("Error creating purchase order:",O),D.error("Error creating purchase order")}},V=()=>{E({...k,items:[...k.items,{product:"",quantity:1,unitPrice:0}]})},ee=O=>{const te=k.items.filter((oe,je)=>je!==O);E({...k,items:te})},me=(O,te,oe)=>{const je=k.items.map((Me,ve)=>ve===O?{...Me,[te]:oe}:Me);E({...k,items:je})},W=O=>{const te={pending:{variant:"outline",color:"text-yellow-600",icon:Qt},approved:{variant:"outline",color:"text-blue-600",icon:os},delivered:{variant:"outline",color:"text-green-600",icon:qt},cancelled:{variant:"outline",color:"text-red-600",icon:Cs}},oe=te[O]||te.pending,je=oe.icon;return e.jsxs(_e,{variant:oe.variant,className:oe.color,children:[e.jsx(je,{className:"h-3 w-3 mr-1"}),O.charAt(0).toUpperCase()+O.slice(1)]})},se=O=>new Intl.NumberFormat("en-KE",{style:"currency",currency:"KES"}).format(O),Z=r.filter(O=>O.status==="pending").length,I=r.filter(O=>O.status==="approved").length,Q=r.reduce((O,te)=>O+te.totalAmount,0);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Purchasing"}),e.jsxs("p",{className:"text-muted-foreground",children:["Manage purchase orders and supplier relationships •",s?e.jsx("span",{className:"text-green-600",children:" 🟢 Real-time Connected"}):e.jsx("span",{className:"text-red-600",children:" 🔴 Offline Mode"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(R,{onClick:L,disabled:C||_,variant:"outline",children:[e.jsx(is,{className:`h-4 w-4 mr-2 ${C?"animate-spin":""}`}),"Refresh"]}),e.jsxs(Ft,{open:u,onOpenChange:f,children:[e.jsx(Na,{asChild:!0,children:e.jsxs(R,{className:"bg-green-500 hover:bg-green-400",children:[e.jsx(Hs,{className:"h-4 w-4 mr-2"}),"New Purchase Order"]})}),e.jsxs(It,{className:"max-w-4xl max-h-[80vh] overflow-y-auto",children:[e.jsxs(Lt,{children:[e.jsx(Bt,{children:"Create Purchase Order"}),e.jsx(es,{children:"Create a new purchase order for your suppliers"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(ae,{children:"Supplier *"}),e.jsxs(Ot,{value:k.supplier,onValueChange:O=>E({...k,supplier:O}),children:[e.jsx(Pt,{children:e.jsx(Rt,{placeholder:"Select supplier"})}),e.jsx(Mt,{children:o.map(O=>e.jsx(Ee,{value:O.name,children:O.name},O.id))})]})]}),e.jsxs("div",{children:[e.jsx(ae,{children:"Expected Delivery"}),e.jsx(fe,{type:"date",value:k.expectedDelivery,onChange:O=>E({...k,expectedDelivery:O.target.value})})]})]}),e.jsxs("div",{children:[e.jsx(ae,{children:"Priority"}),e.jsxs(Ot,{value:k.priority,onValueChange:O=>E({...k,priority:O}),children:[e.jsx(Pt,{children:e.jsx(Rt,{})}),e.jsxs(Mt,{children:[e.jsx(Ee,{value:"low",children:"Low"}),e.jsx(Ee,{value:"medium",children:"Medium"}),e.jsx(Ee,{value:"high",children:"High"}),e.jsx(Ee,{value:"urgent",children:"Urgent"})]})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx(ae,{children:"Items *"}),e.jsxs(R,{type:"button",variant:"outline",size:"sm",onClick:V,children:[e.jsx(Hs,{className:"h-4 w-4 mr-1"}),"Add Item"]})]}),e.jsx("div",{className:"space-y-2",children:k.items.map((O,te)=>e.jsxs("div",{className:"grid grid-cols-12 gap-2 items-end",children:[e.jsx("div",{className:"col-span-5",children:e.jsx(fe,{placeholder:"Product name",value:O.product,onChange:oe=>me(te,"product",oe.target.value)})}),e.jsx("div",{className:"col-span-2",children:e.jsx(fe,{type:"number",placeholder:"Qty",value:O.quantity,onChange:oe=>me(te,"quantity",parseInt(oe.target.value)||1)})}),e.jsx("div",{className:"col-span-3",children:e.jsx(fe,{type:"number",placeholder:"Unit price",value:O.unitPrice,onChange:oe=>me(te,"unitPrice",parseFloat(oe.target.value)||0)})}),e.jsx("div",{className:"col-span-1",children:e.jsx("p",{className:"text-sm font-medium",children:se(O.quantity*O.unitPrice)})}),e.jsx("div",{className:"col-span-1",children:k.items.length>1&&e.jsx(R,{type:"button",variant:"outline",size:"sm",onClick:()=>ee(te),children:e.jsx(fa,{className:"h-4 w-4"})})})]},te))}),e.jsx("div",{className:"text-right mt-2",children:e.jsxs("p",{className:"text-lg font-semibold",children:["Total: ",se(k.items.reduce((O,te)=>O+te.quantity*te.unitPrice,0))]})})]}),e.jsxs("div",{children:[e.jsx(ae,{children:"Notes"}),e.jsx(Ts,{placeholder:"Additional notes or requirements",value:k.notes,onChange:O=>E({...k,notes:O.target.value})})]})]}),e.jsxs(Rs,{children:[e.jsx(R,{variant:"outline",onClick:()=>f(!1),children:"Cancel"}),e.jsx(R,{onClick:re,children:"Create Purchase Order"})]})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsx(K,{children:e.jsx(X,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Total Orders"}),e.jsx("p",{className:"text-2xl font-bold",children:r.length})]}),e.jsx(js,{className:"h-8 w-8 text-blue-600"})]})})}),e.jsx(K,{children:e.jsx(X,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Pending Orders"}),e.jsx("p",{className:"text-2xl font-bold",children:Z})]}),e.jsx(Qt,{className:"h-8 w-8 text-yellow-600"})]})})}),e.jsx(K,{children:e.jsx(X,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Approved Orders"}),e.jsx("p",{className:"text-2xl font-bold",children:I})]}),e.jsx(os,{className:"h-8 w-8 text-green-600"})]})})}),e.jsx(K,{children:e.jsx(X,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Total Value"}),e.jsx("p",{className:"text-2xl font-bold",children:se(Q)})]}),e.jsx(ea,{className:"h-8 w-8 text-purple-600"})]})})})]}),e.jsxs(pa,{defaultValue:"orders",className:"space-y-6",children:[e.jsxs(ba,{className:"grid w-full grid-cols-3",children:[e.jsx(ut,{value:"orders",children:"Purchase Orders"}),e.jsx(ut,{value:"suppliers",children:"Suppliers"}),e.jsx(ut,{value:"activity",children:"Activity & Payments"})]}),e.jsx(mt,{value:"orders",children:e.jsxs(K,{children:[e.jsxs(pe,{children:[e.jsx(ge,{children:"Purchase Orders"}),e.jsx(lt,{children:"Manage and track all purchase orders"})]}),e.jsx(X,{children:e.jsxs(Zn,{children:[e.jsx(Jn,{children:e.jsxs(ma,{children:[e.jsx(wt,{children:"Order Number"}),e.jsx(wt,{children:"Supplier"}),e.jsx(wt,{children:"Order Date"}),e.jsx(wt,{children:"Expected Delivery"}),e.jsx(wt,{children:"Total Amount"}),e.jsx(wt,{children:"Status"}),e.jsx(wt,{children:"Actions"})]})}),e.jsx(ei,{children:r.map(O=>e.jsxs(ma,{children:[e.jsx(Nt,{className:"font-medium",children:O.orderNumber}),e.jsx(Nt,{children:O.supplier}),e.jsx(Nt,{children:new Date(O.orderDate).toLocaleDateString()}),e.jsx(Nt,{children:new Date(O.expectedDelivery).toLocaleDateString()}),e.jsx(Nt,{children:se(O.totalAmount)}),e.jsx(Nt,{children:W(O.status)}),e.jsx(Nt,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(R,{variant:"outline",size:"sm",onClick:()=>{N(O),h(!0)},children:e.jsx(la,{className:"h-4 w-4"})}),e.jsx(R,{variant:"outline",size:"sm",children:e.jsx(Qi,{className:"h-4 w-4"})})]})})]},O.id))})]})})]})}),e.jsx(mt,{value:"suppliers",children:e.jsxs(K,{children:[e.jsx(pe,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(ge,{children:"Suppliers"}),e.jsx(lt,{children:"Manage supplier contacts and information"})]}),e.jsxs(R,{onClick:()=>g(!0),children:[e.jsx(Hs,{className:"h-4 w-4 mr-2"}),"Add Supplier"]})]})}),e.jsx(X,{children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:o.map(O=>e.jsxs(K,{className:"hover:shadow-md transition-shadow",children:[e.jsx(pe,{children:e.jsxs(ge,{className:"text-lg flex items-center gap-2",children:[e.jsx(Kc,{className:"h-5 w-5 text-blue-600"}),O.name]})}),e.jsxs(X,{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx($s,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{children:O.contact})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(Gs,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"truncate",children:O.email})]}),e.jsxs("div",{className:"flex gap-2 mt-4",children:[e.jsxs(R,{variant:"outline",size:"sm",className:"flex-1",onClick:()=>{window.location.href=`tel:${O.contact}`,D.info(`Calling ${O.name}...`)},children:[e.jsx($s,{className:"h-4 w-4 mr-1"}),"Call"]}),e.jsxs(R,{variant:"outline",size:"sm",className:"flex-1",onClick:()=>{window.location.href=`mailto:${O.email}`,D.info(`Opening email to ${O.name}...`)},children:[e.jsx(Gs,{className:"h-4 w-4 mr-1"}),"Email"]})]})]})]},O.id))})})]})}),e.jsx(mt,{value:"activity",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(K,{children:[e.jsxs(pe,{children:[e.jsxs(ge,{className:"flex items-center gap-2",children:[e.jsx(Aa,{className:"h-5 w-5"}),"Recent Activity"]}),e.jsx(lt,{children:"Track purchasing activities in real-time"})]}),e.jsx(X,{children:e.jsx("div",{className:"space-y-4",children:U.length>0?U.slice(0,10).map(O=>e.jsxs("div",{className:"flex items-start gap-3 pb-3 border-b last:border-0",children:[e.jsx("div",{className:`mt-1 rounded-full p-2 ${O.type==="payment"?"bg-green-100":O.type==="order_update"?"bg-blue-100":"bg-gray-100"}`,children:O.type==="payment"?e.jsx(ha,{className:"h-4 w-4 text-green-600"}):e.jsx(ya,{className:"h-4 w-4 text-blue-600"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium",children:O.message}),e.jsx("p",{className:"text-xs text-muted-foreground",children:new Date(O.timestamp).toLocaleString()})]})]},O.id)):e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(Aa,{className:"h-12 w-12 mx-auto mb-2 opacity-20"}),e.jsx("p",{children:"No recent activities"})]})})})]}),e.jsxs(K,{children:[e.jsxs(pe,{children:[e.jsxs(ge,{className:"flex items-center gap-2",children:[e.jsx(ha,{className:"h-5 w-5"}),"Payment Tracking"]}),e.jsx(lt,{children:"Monitor payment status for purchase orders"})]}),e.jsx(X,{children:e.jsx("div",{className:"space-y-4",children:r.filter(O=>O.status!=="cancelled").map(O=>e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-sm",children:O.orderNumber}),e.jsx("p",{className:"text-xs text-muted-foreground",children:O.supplier})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"font-semibold text-sm",children:se(O.totalAmount)}),e.jsx(_e,{variant:O.paymentStatus==="paid"?"default":O.paymentStatus==="pending"?"secondary":"outline",className:"text-xs",children:O.paymentStatus||"Pending"})]})]},O.id))})})]}),e.jsxs(K,{className:"lg:col-span-2",children:[e.jsxs(pe,{children:[e.jsxs(ge,{className:"flex items-center gap-2",children:[e.jsx(Yc,{className:"h-5 w-5"}),"Delivery Status"]}),e.jsx(lt,{children:"Track delivery status after purchase orders"})]}),e.jsx(X,{children:e.jsxs(Zn,{children:[e.jsx(Jn,{children:e.jsxs(ma,{children:[e.jsx(wt,{children:"Order Number"}),e.jsx(wt,{children:"Supplier"}),e.jsx(wt,{children:"Expected Delivery"}),e.jsx(wt,{children:"Delivery Status"}),e.jsx(wt,{children:"Payment Status"})]})}),e.jsx(ei,{children:r.filter(O=>O.status==="approved"||O.status==="delivered").map(O=>e.jsxs(ma,{children:[e.jsx(Nt,{className:"font-medium",children:O.orderNumber}),e.jsx(Nt,{children:O.supplier}),e.jsx(Nt,{children:new Date(O.expectedDelivery).toLocaleDateString()}),e.jsx(Nt,{children:e.jsx(_e,{variant:O.status==="delivered"?"default":"secondary",children:O.deliveryStatus||O.status})}),e.jsx(Nt,{children:e.jsx(_e,{variant:O.paymentStatus==="paid"?"default":"outline",children:O.paymentStatus||"Pending"})})]},O.id))})]})})]})]})})]}),e.jsx(Ft,{open:x,onOpenChange:h,children:e.jsxs(It,{className:"max-w-2xl",children:[e.jsxs(Lt,{children:[e.jsx(Bt,{children:"Purchase Order Details"}),e.jsxs(es,{children:[b?.orderNumber," - ",b?.supplier]})]}),b&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(ae,{children:"Order Date"}),e.jsx("p",{className:"text-sm",children:new Date(b.orderDate).toLocaleDateString()})]}),e.jsxs("div",{children:[e.jsx(ae,{children:"Expected Delivery"}),e.jsx("p",{className:"text-sm",children:new Date(b.expectedDelivery).toLocaleDateString()})]}),e.jsxs("div",{children:[e.jsx(ae,{children:"Status"}),e.jsx("div",{className:"mt-1",children:W(b.status)})]}),e.jsxs("div",{children:[e.jsx(ae,{children:"Total Amount"}),e.jsx("p",{className:"text-sm font-semibold",children:se(b.totalAmount)})]})]}),e.jsxs("div",{children:[e.jsx(ae,{children:"Items"}),e.jsxs(Zn,{children:[e.jsx(Jn,{children:e.jsxs(ma,{children:[e.jsx(wt,{children:"Product"}),e.jsx(wt,{children:"Quantity"}),e.jsx(wt,{children:"Unit Price"}),e.jsx(wt,{children:"Total"})]})}),e.jsx(ei,{children:b.items.map((O,te)=>e.jsxs(ma,{children:[e.jsx(Nt,{children:O.product}),e.jsx(Nt,{children:O.quantity}),e.jsx(Nt,{children:se(O.unitPrice)}),e.jsx(Nt,{children:se(O.quantity*O.unitPrice)})]},te))})]})]})]}),e.jsx(Rs,{children:e.jsx(R,{variant:"outline",onClick:()=>h(!1),children:"Close"})})]})}),e.jsx(Ft,{open:p,onOpenChange:g,children:e.jsxs(It,{className:"max-w-md",children:[e.jsxs(Lt,{children:[e.jsx(Bt,{children:"Add New Supplier"}),e.jsx(es,{children:"Add a new supplier contact to your database"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(ae,{children:"Supplier Name *"}),e.jsx(fe,{placeholder:"e.g., ABC Suppliers Ltd",value:A.name,onChange:O=>B({...A,name:O.target.value})})]}),e.jsxs("div",{children:[e.jsx(ae,{children:"Contact Number *"}),e.jsx(fe,{placeholder:"e.g., +254 700 123 456",value:A.contact,onChange:O=>B({...A,contact:O.target.value})})]}),e.jsxs("div",{children:[e.jsx(ae,{children:"Email Address *"}),e.jsx(fe,{type:"email",placeholder:"e.g., info@supplier.com",value:A.email,onChange:O=>B({...A,email:O.target.value})})]}),e.jsxs("div",{children:[e.jsx(ae,{children:"Address (Optional)"}),e.jsx(Ts,{placeholder:"Business address",value:A.address,onChange:O=>B({...A,address:O.target.value})})]})]}),e.jsxs(Rs,{children:[e.jsx(R,{variant:"outline",onClick:()=>{g(!1),B({name:"",contact:"",email:"",address:""})},children:"Cancel"}),e.jsx(R,{onClick:async()=>{if(!A.name||!A.contact||!A.email){D.error("Please fill in all required fields");return}try{const O=localStorage.getItem("token"),te=await ye.post("/purchasing/suppliers",A,{headers:{Authorization:`Bearer ${O}`}});c(oe=>[...oe,te.data]),g(!1),B({name:"",contact:"",email:"",address:""}),D.success("Supplier added successfully!")}catch(O){console.error("Error adding supplier:",O),D.error("Failed to add supplier")}},children:"Add Supplier"})]})]})})]})};function uA({date:t,setDate:s,className:a,...r}){const[i,o]=v.useState(!1),c=p=>p?p.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"",u=()=>t?t.from&&t.to?`${c(t.from)} - ${c(t.to)}`:t.from?`${c(t.from)} - ...`:"Pick a date range":"Pick a date range",f=(p,g)=>{const b={...t};b[p]=new Date(g),b.from&&b.to&&b.from>b.to&&(p==="from"?b.to=b.from:b.from=b.to),s(b)},x=p=>p?p.toISOString().split("T")[0]:"",h=[{label:"Last 7 days",range:{from:new Date(Date.now()-10080*60*1e3),to:new Date}},{label:"Last 30 days",range:{from:new Date(Date.now()-720*60*60*1e3),to:new Date}},{label:"Last 90 days",range:{from:new Date(Date.now()-2160*60*60*1e3),to:new Date}},{label:"This month",range:{from:new Date(new Date().getFullYear(),new Date().getMonth(),1),to:new Date}}];return e.jsxs("div",{className:Je("relative",a),...r,children:[e.jsxs(R,{variant:"outline",className:Je("w-full justify-start text-left font-normal",!t&&"text-muted-foreground"),onClick:()=>o(!i),children:[e.jsx(ms,{className:"mr-2 h-4 w-4"}),u(),e.jsx(Mf,{className:"ml-auto h-4 w-4"})]}),i&&e.jsxs("div",{className:"absolute top-full left-0 z-50 mt-1 w-full min-w-[300px] rounded-md border bg-white p-4 shadow-lg dark:bg-gray-800",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("h4",{className:"text-sm font-medium mb-2",children:"Quick Select"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:h.map(p=>e.jsx(R,{variant:"outline",size:"sm",className:"text-xs",onClick:()=>{s(p.range),o(!1)},children:p.label},p.label))})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-1 block",children:"From Date"}),e.jsx("input",{type:"date",value:x(t?.from),onChange:p=>f("from",p.target.value),className:"w-full px-3 py-2 border rounded-md text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-1 block",children:"To Date"}),e.jsx("input",{type:"date",value:x(t?.to),onChange:p=>f("to",p.target.value),className:"w-full px-3 py-2 border rounded-md text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600"})]})]}),e.jsxs("div",{className:"flex justify-between mt-4 pt-3 border-t",children:[e.jsx(R,{variant:"outline",size:"sm",onClick:()=>{s(null),o(!1)},children:"Clear"}),e.jsx(R,{size:"sm",onClick:()=>o(!1),children:"Done"})]})]}),i&&e.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>o(!1)})]})}const pu=({userId:t=null,showFilters:s=!0,limit:a=20})=>{const{user:r}=Es(),[i,o]=v.useState([]),[c,u]=v.useState(!0),[f,x]=v.useState({currentPage:1,totalPages:1,totalCount:0,hasNext:!1,hasPrev:!1}),[h,p]=v.useState({category:"all",action:"all",search:"",dateRange:null,page:1}),[g,b]=v.useState({summary:{totalActivities:0,successRate:100,timeframe:"30d",categoriesBreakdown:[]},trends:[],highRiskActivities:[]});v.useEffect(()=>{N(),y()},[h,t]);const N=async()=>{try{u(!0);const E=new URLSearchParams;h.category&&h.category!=="all"&&E.append("category",h.category),h.action&&h.action!=="all"&&E.append("action",h.action),h.search&&E.append("search",h.search),h.dateRange?.from&&E.append("startDate",h.dateRange.from.toISOString()),h.dateRange?.to&&E.append("endDate",h.dateRange.to.toISOString()),E.append("page",h.page.toString()),E.append("limit",a.toString());const A=await ye.get(`/activities/history?${E}`);o(A.data.activities),x(A.data.pagination)}catch(E){console.error("Error fetching activities:",E),D.error("Failed to load activity history")}finally{u(!1)}},y=async()=>{try{const E=await ye.get("/activities/stats?timeframe=30d");b(E.data)}catch(E){console.error("Error fetching activity stats:",E)}},S=(E,A)=>{p(B=>({...B,[E]:A,page:1}))},C=E=>{p(A=>({...A,page:E}))},T=async()=>{try{const E={format:"json",startDate:h.dateRange?.from?.toISOString(),endDate:h.dateRange?.to?.toISOString(),categories:h.category?[h.category]:[],includeMetadata:!1},A=await ye.post("/activities/export",E),B=new Blob([JSON.stringify(A.data,null,2)],{type:"application/json"}),H=window.URL.createObjectURL(B),M=document.createElement("a");M.href=H,M.download=`activity-history-${Date.now()}.json`,document.body.appendChild(M),M.click(),window.URL.revokeObjectURL(H),document.body.removeChild(M),D.success("Activity history exported successfully")}catch(E){console.error("Error exporting activities:",E),D.error("Failed to export activity history")}},_=(E,A)=>{switch(E){case"authentication":return e.jsx(na,{className:"h-4 w-4"});case"orders":return e.jsx(js,{className:"h-4 w-4"});case"services":return e.jsx(ya,{className:"h-4 w-4"});case"financial":return e.jsx(ea,{className:"h-4 w-4"});case"admin":return e.jsx(Ea,{className:"h-4 w-4"});case"system":return e.jsx(la,{className:"h-4 w-4"});default:return e.jsx(Qt,{className:"h-4 w-4"})}},G=(E,A)=>{if(!A)return"text-red-600 bg-red-50";switch(E){case"authentication":return"text-blue-600 bg-blue-50";case"orders":return"text-green-600 bg-green-50";case"services":return"text-purple-600 bg-purple-50";case"financial":return"text-yellow-600 bg-yellow-50";case"admin":return"text-red-600 bg-red-50";case"system":return"text-gray-600 bg-gray-50";default:return"text-gray-600 bg-gray-50"}},U=E=>{const A={low:"bg-green-100 text-green-800",medium:"bg-yellow-100 text-yellow-800",high:"bg-orange-100 text-orange-800",critical:"bg-red-100 text-red-800"};return e.jsx(_e,{className:`${A[E]||A.low} text-xs`,children:E})},F=E=>new Date(E).toLocaleString(),k=[{value:"all",label:"All Categories"},{value:"authentication",label:"Authentication"},{value:"orders",label:"Orders"},{value:"services",label:"Services"},{value:"financial",label:"Financial"},{value:"admin",label:"Admin"},{value:"system",label:"System"}];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(K,{children:e.jsx(X,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Activities"}),e.jsx("p",{className:"text-2xl font-bold",children:g.summary.totalActivities})]}),e.jsx(Qt,{className:"h-8 w-8 text-blue-600"})]})})}),e.jsx(K,{children:e.jsx(X,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Success Rate"}),e.jsxs("p",{className:"text-2xl font-bold text-green-600",children:[g.summary.successRate,"%"]})]}),e.jsx(os,{className:"h-8 w-8 text-green-600"})]})})}),e.jsx(K,{children:e.jsx(X,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"High Risk Events"}),e.jsx("p",{className:"text-2xl font-bold text-orange-600",children:g.highRiskActivities.length})]}),e.jsx(Er,{className:"h-8 w-8 text-orange-600"})]})})})]}),s&&e.jsxs(K,{children:[e.jsx(pe,{children:e.jsxs(ge,{className:"flex items-center gap-2",children:[e.jsx(al,{className:"h-5 w-5"}),"Filters"]})}),e.jsx(X,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Category"}),e.jsxs(Ot,{value:h.category,onValueChange:E=>S("category",E),children:[e.jsx(Pt,{children:e.jsx(Rt,{placeholder:"Select category"})}),e.jsx(Mt,{children:k.map(E=>e.jsx(Ee,{value:E.value,children:E.label},E.value))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Search"}),e.jsxs("div",{className:"relative",children:[e.jsx(ia,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(fe,{placeholder:"Search activities...",value:h.search,onChange:E=>S("search",E.target.value),className:"pl-10"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Date Range"}),e.jsx(uA,{date:h.dateRange,setDate:E=>S("dateRange",E)})]}),e.jsx("div",{className:"flex items-end",children:e.jsxs(R,{onClick:T,variant:"outline",className:"w-full",children:[e.jsx(Pa,{className:"h-4 w-4 mr-2"}),"Export"]})})]})})]}),e.jsxs(K,{children:[e.jsx(pe,{children:e.jsx(ge,{children:"Activity History"})}),e.jsxs(X,{children:[c?e.jsx("div",{className:"flex items-center justify-center h-32",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900"})}):i.length===0?e.jsx("div",{className:"text-center py-8 text-gray-500",children:"No activities found for the selected criteria."}):e.jsx("div",{className:"space-y-4",children:i.map(E=>e.jsxs("div",{className:"flex items-start space-x-4 p-4 border rounded-lg hover:bg-gray-50",children:[e.jsx("div",{className:`p-2 rounded-full ${G(E.category,E.metadata?.success)}`,children:_(E.category,E.action)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:E.description}),e.jsxs("div",{className:"flex items-center space-x-2",children:[U(E.riskLevel),E.metadata?.success===!1&&e.jsx(Cr,{className:"h-4 w-4 text-red-600"})]})]}),e.jsxs("div",{className:"mt-1 flex items-center space-x-4 text-xs text-gray-500",children:[e.jsxs("span",{className:"flex items-center",children:[e.jsx(ms,{className:"h-3 w-3 mr-1"}),F(E.timestamp)]}),e.jsx(_e,{variant:"outline",className:"text-xs",children:E.category}),e.jsx(_e,{variant:"outline",className:"text-xs",children:E.action}),E.metadata?.ipAddress&&e.jsxs("span",{children:["IP: ",E.metadata.ipAddress]})]})]})]},E._id))}),f.totalPages>1&&e.jsxs("div",{className:"flex items-center justify-between mt-6",children:[e.jsxs("div",{className:"text-sm text-gray-500",children:["Showing ",(f.currentPage-1)*a+1," to ",Math.min(f.currentPage*a,f.totalCount)," of ",f.totalCount," activities"]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(R,{variant:"outline",size:"sm",onClick:()=>C(f.currentPage-1),disabled:!f.hasPrev,children:"Previous"}),e.jsx(R,{variant:"outline",size:"sm",onClick:()=>C(f.currentPage+1),disabled:!f.hasNext,children:"Next"})]})]})]})]})]})},XW=()=>{const{user:t,isAuthenticated:s}=Es(),a=Ka(),[r,i]=v.useState(!1),[o,c]=v.useState(!0),[u,f]=v.useState(!1),[x,h]=v.useState(null),[p,g]=v.useState([{title:"Total Activities",value:"0",change:"0%",trend:"up",icon:Aa,description:"from last month"},{title:"User Actions",value:"0",change:"0%",trend:"up",icon:Xt,description:"from last month"},{title:"System Events",value:"0",change:"0%",trend:"up",icon:Ea,description:"from last month"},{title:"Critical Events",value:"0",change:"0%",trend:"down",icon:ya,description:"from last month"}]),b=v.useCallback(async(_=!1)=>{if(s)try{_?(f(!0),D.info("Refreshing activity data...")):c(!0),h(null);const U={Authorization:`Bearer ${localStorage.getItem("token")}`},[F,k,E,A]=await Promise.all([ye.get("/orders",{headers:U}).catch(()=>({data:[]})),ye.get("/invoices",{headers:U}).catch(()=>({data:[]})),ye.get("/expenses",{headers:U}).catch(()=>({data:[]})),ye.get("/transactions",{headers:U}).catch(()=>({data:[]}))]),B=Array.isArray(F.data)?F.data:[],H=Array.isArray(k.data)?k.data:[],M=Array.isArray(E.data)?E.data:[],q=Array.isArray(A.data)?A.data:[];console.log("📊 Fetched data:",{orders:B.length,invoices:H.length,expenses:M.length,transactions:q.length});const L=new Date,re=new Date(L.getFullYear(),L.getMonth()-1,1),V=new Date(L.getFullYear(),L.getMonth(),1),ee=(B?.filter(ve=>ve.createdAt&&new Date(ve.createdAt)>=V)||[]).length+(H?.filter(ve=>ve.createdAt&&new Date(ve.createdAt)>=V)||[]).length+(M?.filter(ve=>ve.createdAt&&new Date(ve.createdAt)>=V)||[]).length+(q?.filter(ve=>ve.createdAt&&new Date(ve.createdAt)>=V)||[]).length,me=(B?.filter(ve=>ve.createdAt&&new Date(ve.createdAt)>=re&&new Date(ve.createdAt)<V)||[]).length+(H?.filter(ve=>ve.createdAt&&new Date(ve.createdAt)>=re&&new Date(ve.createdAt)<V)||[]).length+(M?.filter(ve=>ve.createdAt&&new Date(ve.createdAt)>=re&&new Date(ve.createdAt)<V)||[]).length+(q?.filter(ve=>ve.createdAt&&new Date(ve.createdAt)>=re&&new Date(ve.createdAt)<V)||[]).length,W=me>0?((ee-me)/me*100).toFixed(1):0,se=(B?.filter(ve=>ve.createdAt&&new Date(ve.createdAt)>=V)||[]).length+(H?.filter(ve=>ve.createdAt&&new Date(ve.createdAt)>=V)||[]).length,Z=(B?.filter(ve=>ve.createdAt&&new Date(ve.createdAt)>=re&&new Date(ve.createdAt)<V)||[]).length+(H?.filter(ve=>ve.createdAt&&new Date(ve.createdAt)>=re&&new Date(ve.createdAt)<V)||[]).length,I=Z>0?((se-Z)/Z*100).toFixed(1):0,Q=(q?.filter(ve=>ve.createdAt&&new Date(ve.createdAt)>=V)||[]).length+(M?.filter(ve=>ve.createdAt&&new Date(ve.createdAt)>=V)||[]).length,O=(q?.filter(ve=>ve.createdAt&&new Date(ve.createdAt)>=re&&new Date(ve.createdAt)<V)||[]).length+(M?.filter(ve=>ve.createdAt&&new Date(ve.createdAt)>=re&&new Date(ve.createdAt)<V)||[]).length,te=O>0?((Q-O)/O*100).toFixed(1):0,oe=(q?.filter(ve=>ve.createdAt&&new Date(ve.createdAt)>=V&&(ve.status==="failed"||ve.status==="error"))||[]).length+(H?.filter(ve=>ve.createdAt&&new Date(ve.createdAt)>=V&&ve.paymentStatus==="overdue")||[]).length,je=(q?.filter(ve=>ve.createdAt&&new Date(ve.createdAt)>=re&&new Date(ve.createdAt)<V&&(ve.status==="failed"||ve.status==="error"))||[]).length+(H?.filter(ve=>ve.createdAt&&new Date(ve.createdAt)>=re&&new Date(ve.createdAt)<V&&ve.paymentStatus==="overdue")||[]).length,Me=je>0?((oe-je)/je*100).toFixed(1):0;g([{title:"Total Activities",value:ee.toLocaleString(),change:`${W>=0?"+":""}${W}%`,trend:W>=0?"up":"down",icon:Aa,description:"from last month"},{title:"User Actions",value:se.toLocaleString(),change:`${I>=0?"+":""}${I}%`,trend:I>=0?"up":"down",icon:Xt,description:"from last month"},{title:"System Events",value:Q.toLocaleString(),change:`${te>=0?"+":""}${te}%`,trend:te>=0?"up":"down",icon:Ea,description:"from last month"},{title:"Critical Events",value:oe.toLocaleString(),change:`${Me>=0?"+":""}${Me}%`,trend:Me>=0?"up":"down",icon:ya,description:"from last month"}]),console.log("✅ Activity stats loaded:",{total:ee,user:se,system:Q,critical:oe}),_&&D.success("Activity data refreshed!")}catch(G){console.error("❌ Error fetching activity stats:",G),h(G.message||"Failed to load activity data"),_&&D.error("Failed to refresh activity data")}finally{c(!1),f(!1)}},[s]);v.useEffect(()=>{if(s){b();const _=setInterval(()=>b(),18e4);return()=>clearInterval(_)}},[s,b]);const N=async()=>{try{i(!0);const _=await fetch("/api/activities/export?format=csv",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(_.ok){const G=await _.blob(),U=window.URL.createObjectURL(G),F=document.createElement("a");F.href=U,F.download=`activity-history-${Date.now()}.csv`,document.body.appendChild(F),F.click(),window.URL.revokeObjectURL(U),document.body.removeChild(F),D.success("History exported successfully!")}else throw new Error("Export failed")}catch{D.error("Failed to export history. Please try again.")}finally{i(!1)}},y=()=>{D.info("Opening schedule settings..."),a("/dashboard/reports")},S=()=>{D.info("Opening alert configuration..."),a("/dashboard/settings")},C=()=>{D.info("Archive feature coming soon!")},T=()=>{b(!0)};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold text-foreground flex items-center gap-2",children:[e.jsx(Dl,{className:"h-8 w-8 text-green-600"}),"Activity History"]}),e.jsx("p",{className:"text-muted-foreground",children:"Comprehensive tracking of all system activities and user actions"})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs(R,{variant:"outline",onClick:T,disabled:u,children:[e.jsx(is,{className:`mr-2 h-4 w-4 ${u?"animate-spin":""}`}),"Refresh"]}),e.jsxs(R,{variant:"outline",onClick:N,disabled:r,children:[e.jsx(Pa,{className:"mr-2 h-4 w-4"}),r?"Exporting...":"Export History"]}),e.jsxs(R,{onClick:()=>{D.info("Advanced filters feature coming soon!")},children:[e.jsx(al,{className:"mr-2 h-4 w-4"}),"Advanced Filters"]})]})]}),x?e.jsx(K,{className:"border-red-200 bg-red-50",children:e.jsx(X,{className:"flex items-center justify-center py-12",children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx(Cs,{className:"h-12 w-12 text-red-500 mx-auto"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-red-700",children:"Failed to Load Activity Data"}),e.jsx("p",{className:"text-sm text-red-600",children:x})]}),e.jsxs(R,{onClick:()=>b(),variant:"outline",children:[e.jsx(is,{className:"mr-2 h-4 w-4"}),"Retry"]})]})})}):o?e.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-4",children:[1,2,3,4].map(_=>e.jsxs(K,{children:[e.jsx(pe,{className:"pb-2",children:e.jsx("div",{className:"h-4 w-32 bg-gray-200 rounded animate-pulse"})}),e.jsxs(X,{children:[e.jsx("div",{className:"h-8 w-20 bg-gray-200 rounded animate-pulse mb-2"}),e.jsx("div",{className:"h-3 w-24 bg-gray-200 rounded animate-pulse"})]})]},_))}):e.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-4",children:p.map(_=>{const G=_.icon;return e.jsxs(K,{children:[e.jsxs(pe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(ge,{className:"text-sm font-medium",children:_.title}),e.jsx(G,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(X,{children:[e.jsx("div",{className:"text-2xl font-bold",children:_.value}),e.jsxs("div",{className:"flex items-center text-xs text-muted-foreground",children:[_.trend==="up"?e.jsx(Is,{className:"mr-1 h-3 w-3 text-green-600"}):e.jsx(Is,{className:"mr-1 h-3 w-3 text-red-600 rotate-180"}),e.jsx("span",{className:_.trend==="up"?"text-green-600":"text-red-600",children:_.change}),e.jsx("span",{className:"ml-1",children:_.description})]})]})]},_.title)})}),e.jsxs(pa,{defaultValue:"all",className:"space-y-4",children:[e.jsxs(ba,{children:[e.jsx(ut,{value:"all",children:"All Activities"}),e.jsx(ut,{value:"user",children:"User Actions"}),e.jsx(ut,{value:"system",children:"System Events"}),e.jsx(ut,{value:"critical",children:"Critical"})]}),e.jsx(mt,{value:"all",className:"space-y-4",children:e.jsxs(K,{children:[e.jsxs(pe,{children:[e.jsx(ge,{children:"Complete Activity Log"}),e.jsx(lt,{children:"All system activities and user actions in chronological order"})]}),e.jsx(X,{children:e.jsx(pu,{showFilters:!0,limit:50})})]})}),e.jsx(mt,{value:"user",className:"space-y-4",children:e.jsxs(K,{children:[e.jsxs(pe,{children:[e.jsx(ge,{children:"User Actions"}),e.jsx(lt,{children:"Activities performed by users in the system"})]}),e.jsx(X,{children:e.jsx(pu,{showFilters:!0,limit:50,filterCategory:"user"})})]})}),e.jsx(mt,{value:"system",className:"space-y-4",children:e.jsxs(K,{children:[e.jsxs(pe,{children:[e.jsx(ge,{children:"System Events"}),e.jsx(lt,{children:"Automated system activities and background processes"})]}),e.jsx(X,{children:e.jsx(pu,{showFilters:!0,limit:50,filterCategory:"system"})})]})}),e.jsx(mt,{value:"critical",className:"space-y-4",children:e.jsxs(K,{children:[e.jsxs(pe,{children:[e.jsx(ge,{children:"Critical Events"}),e.jsx(lt,{children:"High-priority events that require attention"})]}),e.jsx(X,{children:e.jsx(pu,{showFilters:!0,limit:50,filterPriority:"critical"})})]})})]}),e.jsxs(K,{children:[e.jsxs(pe,{children:[e.jsx(ge,{children:"Quick Actions"}),e.jsx(lt,{children:"Common history-related tasks and utilities"})]}),e.jsx(X,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs(R,{variant:"outline",className:"h-auto flex-col py-4 hover:bg-blue-50 hover:border-blue-500 transition-colors",onClick:y,children:[e.jsx(ms,{className:"h-6 w-6 mb-2 text-blue-600"}),e.jsx("span",{className:"text-sm font-medium",children:"Schedule Report"}),e.jsx("span",{className:"text-xs text-muted-foreground mt-1",children:"Automate activity reports"})]}),e.jsxs(R,{variant:"outline",className:"h-auto flex-col py-4 hover:bg-orange-50 hover:border-orange-500 transition-colors",onClick:S,children:[e.jsx(Qt,{className:"h-6 w-6 mb-2 text-orange-600"}),e.jsx("span",{className:"text-sm font-medium",children:"Set Alerts"}),e.jsx("span",{className:"text-xs text-muted-foreground mt-1",children:"Configure notifications"})]}),e.jsxs(R,{variant:"outline",className:"h-auto flex-col py-4 hover:bg-purple-50 hover:border-purple-500 transition-colors",onClick:C,children:[e.jsx(ya,{className:"h-6 w-6 mb-2 text-purple-600"}),e.jsx("span",{className:"text-sm font-medium",children:"Archive Data"}),e.jsx("span",{className:"text-xs text-muted-foreground mt-1",children:"Store old records"})]})]})})]})]})},J0={search:async(t,s={})=>{try{return(await ye.get("/search",{params:{q:t,...s}})).data}catch(a){return console.error("Error searching:",a),D.error("Search failed. Please try again."),{products:[],orders:[],customers:[],transactions:[],locations:[],appointments:[],documents:[]}}},searchByCategory:async(t,s)=>{try{return(await ye.get(`/search/${t}`,{params:{q:s}})).data}catch(a){return console.error(`Error searching ${t}:`,a),[]}}},Ac={createTicket:async t=>{try{const s=await ye.post("/support/tickets",t);return D.success("Support ticket created!"),s.data}catch(s){throw D.error("Failed to create ticket"),s}},getTickets:async()=>{try{return(await ye.get("/support/tickets")).data}catch(t){return console.error("Error fetching tickets:",t),[]}},getTicketById:async t=>{try{return(await ye.get(`/support/tickets/${t}`)).data}catch(s){throw console.error("Error fetching ticket:",s),s}},updateTicket:async(t,s)=>{try{const a=await ye.put(`/support/tickets/${t}`,s);return D.success("Ticket updated!"),a.data}catch(a){throw D.error("Failed to update ticket"),a}},getFAQs:async()=>{try{return(await ye.get("/support/faqs")).data}catch(t){return console.error("Error fetching FAQs:",t),[]}},getSupportAgents:async()=>{try{return(await ye.get("/support/agents")).data}catch(t){return console.error("Error fetching support agents:",t),[{id:1,name:"Support Team",role:"Customer Support",avatar:"/api/placeholder/40/40",status:"online",rating:4.9,specialties:["General Support","Technical Help"]}]}},sendMessage:async(t,s)=>{try{return(await ye.post(`/support/tickets/${t}/messages`,{message:s})).data}catch(a){throw D.error("Failed to send message"),a}}},QW=()=>{const[t]=n_(),s=Ka(),[a,r]=v.useState(t.get("q")||""),[i,o]=v.useState({products:[],orders:[],customers:[],transactions:[],locations:[],appointments:[],documents:[]}),[c,u]=v.useState(!1),[f,x]=v.useState("all"),[h,p]=v.useState(0),[g,b]=v.useState(null),[N,y]=v.useState(!1),[S,C]=v.useState({products:{loaded:!1,count:0,error:null},orders:{loaded:!1,count:0,error:null},customers:{loaded:!1,count:0,error:null}});v.useEffect(()=>{const k=t.get("q");k&&(r(k),T(k))},[t]),v.useEffect(()=>{if(!a.trim()){o({products:[],orders:[],customers:[],transactions:[],locations:[],appointments:[],documents:[]}),p(0),y(!1);return}const k=setTimeout(()=>{T(a)},500);return()=>clearTimeout(k)},[a]);const T=async k=>{if(k.trim()){u(!0),b(null),y(!0);try{const E=localStorage.getItem("token"),[A,B,H]=await Promise.allSettled([J0.searchByCategory("products",k),J0.searchByCategory("orders",k),J0.searchByCategory("customers",k)]),M={products:{loaded:A.status==="fulfilled",count:A.status==="fulfilled"&&A.value?.length||0,error:A.status==="rejected"?A.reason?.message:null},orders:{loaded:B.status==="fulfilled",count:B.status==="fulfilled"&&B.value?.length||0,error:B.status==="rejected"?B.reason?.message:null},customers:{loaded:H.status==="fulfilled",count:H.status==="fulfilled"&&H.value?.length||0,error:H.status==="rejected"?H.reason?.message:null}};C(M);const q={products:A.status==="fulfilled"?A.value||[]:[],orders:B.status==="fulfilled"?B.value||[]:[],customers:H.status==="fulfilled"?H.value||[]:[],transactions:[],locations:[],appointments:[],documents:[]};o(q);const L=Object.values(q).reduce((ee,me)=>ee+(me?.length||0),0);p(L);const re=Object.values(M).filter(ee=>!ee.loaded).length,V=Object.values(M).filter(ee=>ee.loaded).length;console.log("✅ Search completed:",{query:k,total:L,sources:{success:V,failed:re},breakdown:{products:M.products.count,orders:M.orders.count,customers:M.customers.count}}),L>0?D.success(`Found ${L} results for "${k}" from ${V} sources`):re>0?D.warning(`No results found. ${re} source(s) unavailable.`):D.info("No results found. Try different keywords.")}catch(E){console.error("❌ Search error:",E),b(E.message||"Search failed"),D.error("Search failed. Please check your connection and try again."),o({products:[],orders:[],customers:[],transactions:[],locations:[],appointments:[],documents:[]}),p(0)}finally{u(!1)}}},_=k=>{k.preventDefault(),a.trim()&&(T(a),s(`/dashboard/search?q=${encodeURIComponent(a.trim())}`,{replace:!0}))},G=[{id:"all",label:"All Results",icon:ia,count:h},{id:"products",label:"Products",icon:qt,count:i.products?.length||0},{id:"orders",label:"Orders",icon:js,count:i.orders?.length||0},{id:"customers",label:"Customers",icon:Xt,count:i.customers?.length||0},{id:"transactions",label:"Transactions",icon:ea,count:i.transactions?.length||0},{id:"locations",label:"Locations",icon:Xr,count:i.locations?.length||0},{id:"appointments",label:"Appointments",icon:ms,count:i.appointments?.length||0},{id:"documents",label:"Documents",icon:ya,count:i.documents?.length||0}],U=(k,E)=>{switch(E){case"products":s("/dashboard/inventory"),D.success(`Viewing product: ${k.name}`);break;case"orders":s("/dashboard/ecommerce"),D.success(`Viewing order: ${k.id}`);break;case"customers":s("/dashboard/ecommerce"),D.success(`Viewing customer: ${k.name}`);break;case"transactions":s("/dashboard/finances"),D.success(`Viewing transaction: ${k.id}`);break;case"locations":s("/dashboard/locations"),D.success(`Viewing location: ${k.name}`);break;case"appointments":s("/dashboard/appointments"),D.success(`Viewing appointment with ${k.client}`);break;case"documents":s("/dashboard/reports"),D.success(`Viewing document: ${k.name}`);break;default:D.info("Opening details...")}},F=({item:k,type:E})=>e.jsx(K,{className:"hover:shadow-md transition-shadow cursor-pointer",onClick:()=>U(k,E),children:e.jsx(X,{className:"p-4",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-sm mb-1",children:k.name||k.client||k.customer?.name||k.customer?.email||`${E.toUpperCase()} #${k.id}`}),e.jsxs("p",{className:"text-xs text-muted-foreground mb-2",children:[E==="products"&&`${k.category} • $${k.price} • Stock: ${k.stock}`,E==="orders"&&`${k.customer?.name||k.customer?.email||"Unknown"} • $${k.total} • ${k.status}`,E==="customers"&&`${k.email} • ${k.orders} orders • $${k.totalSpent}`,E==="transactions"&&`${k.type} • $${Math.abs(k.amount)} • ${k.description}`,E==="locations"&&`${k.address}, ${k.city} • ${k.status}`,E==="appointments"&&`${k.service} • ${k.date} at ${k.time}`,E==="documents"&&`${k.type} • ${k.date} • ${k.size}`]})]}),e.jsx(Ol,{className:"h-4 w-4 text-muted-foreground"})]})})});return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold text-foreground flex items-center gap-2",children:[e.jsx(ia,{className:"h-8 w-8 text-green-600"}),"Search Results"]}),e.jsx("p",{className:"text-muted-foreground",children:a?`Results for "${a}"`:"Search across all modules and data"})]})}),e.jsx(K,{children:e.jsxs(X,{className:"p-4",children:[e.jsxs("form",{onSubmit:_,className:"flex gap-2",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(ia,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(fe,{value:a,onChange:k=>r(k.target.value),placeholder:"Search products, orders, customers, and more...",className:"pl-10"})]}),e.jsx(R,{type:"submit",disabled:c,children:c?"Searching...":"Search"})]}),N&&!c&&e.jsxs("div",{className:"mt-4 space-y-2",children:[e.jsx("p",{className:"text-xs font-medium text-muted-foreground",children:"Data Sources:"}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:Object.entries(S).map(([k,E])=>e.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[E.loaded?e.jsx(ai,{className:"h-3 w-3 text-green-600"}):e.jsx(Cs,{className:"h-3 w-3 text-red-600"}),e.jsx("span",{className:E.loaded?"text-green-600":"text-red-600",children:k.charAt(0).toUpperCase()+k.slice(1)}),E.loaded&&E.count>0&&e.jsx(_e,{variant:"secondary",className:"text-xs px-1 py-0",children:E.count})]},k))})]})]})}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-8 gap-2",children:G.map(k=>{const E=k.icon;return e.jsxs(R,{variant:f===k.id?"default":"outline",className:"h-auto p-3 flex flex-col items-center gap-1",onClick:()=>x(k.id),children:[e.jsx(E,{className:"h-4 w-4"}),e.jsx("span",{className:"text-xs",children:k.label}),e.jsx(_e,{variant:"secondary",className:"text-xs",children:k.count})]},k.id)})}),h>0?e.jsxs(pa,{value:f,onValueChange:x,children:[e.jsx(mt,{value:"all",className:"space-y-4",children:Object.entries(i).map(([k,E])=>E.length>0&&e.jsxs(K,{children:[e.jsx(pe,{children:e.jsxs(ge,{className:"capitalize",children:[k," (",E.length,")"]})}),e.jsxs(X,{className:"space-y-2",children:[E.slice(0,3).map((A,B)=>e.jsx(F,{item:A,type:k},B)),E.length>3&&e.jsxs(R,{variant:"outline",size:"sm",className:"w-full",children:["View all ",E.length," ",k]})]})]},k))}),Object.entries(i).map(([k,E])=>e.jsxs(mt,{value:k,className:"space-y-2",children:[E.map((A,B)=>e.jsx(F,{item:A,type:k},B)),E.length===0&&e.jsx(K,{children:e.jsxs(X,{className:"p-8 text-center",children:[e.jsx(ia,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),e.jsxs("h3",{className:"text-lg font-semibold mb-2",children:["No ",k," found"]}),e.jsx("p",{className:"text-muted-foreground",children:"Try adjusting your search terms or check your filters"})]})})]},k))]}):g?e.jsx(K,{className:"border-red-200 bg-red-50",children:e.jsxs(X,{className:"p-8 text-center",children:[e.jsx(Cs,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-red-700 mb-2",children:"Search Error"}),e.jsx("p",{className:"text-red-600 mb-4",children:g}),e.jsx(R,{onClick:()=>T(a),variant:"outline",children:"Try Again"})]})}):a&&!c?e.jsx(K,{children:e.jsxs(X,{className:"p-8 text-center",children:[e.jsx(ia,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No results found"}),e.jsx("p",{className:"text-muted-foreground",children:"Try different keywords or check your spelling"})]})}):null]})},ZW=()=>{const{socket:t,connected:s}=da(),{isAuthenticated:a}=Es(),[r,i]=v.useState(0),[o,c]=v.useState(!0),[u,f]=v.useState({revenue:[],sales:[],categories:[],traffic:[],performance:[]});v.useEffect(()=>{(async()=>{if(a){c(!0);try{const g={Authorization:`Bearer ${localStorage.getItem("token")}`},[b,N]=await Promise.all([ye.get("/orders",{headers:g}).catch(()=>({data:[]})),ye.get("/products",{headers:g}).catch(()=>({data:[]}))]),y=b.data||[],S=N.data||[],C=[];for(let E=29;E>=0;E--){const A=new Date;A.setDate(A.getDate()-E);const B=y.filter(H=>new Date(H.date||H.createdAt).toDateString()===A.toDateString());C.push({name:A.toLocaleDateString("en-US",{month:"short",day:"numeric"}),value:B.reduce((H,M)=>H+(Number(M.total)||0),0),orders:B.length})}const T={};S.forEach(E=>{const A=E.category||"Other";T[A]=(T[A]||0)+E.price*(E.stockQuantity||0)});const _=Object.entries(T).map(([E,A])=>({name:E,value:A})),G={Online:0,"Walk-in":0,Mobile:0};y.forEach(E=>{const A=E.source||"Online";G[A]=(G[A]||0)+1});const U=Object.entries(G).map(([E,A])=>({name:E,value:A})),F={};y.forEach(E=>{const A=E.status||"Pending";F[A]=(F[A]||0)+1});const k=Object.entries(F).map(([E,A])=>({name:E,value:A}));f({revenue:C,sales:C,categories:_.length>0?_:[{name:"No Data",value:1}],traffic:U,performance:k.length>0?k:[{name:"No Data",value:1}]})}catch(p){console.error("Error fetching graph data:",p)}finally{c(!1)}}})()},[a,r]);const x=()=>{i(h=>h+1),D.success("All graphs refreshed successfully!")};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold text-foreground flex items-center gap-2",children:[e.jsx(er,{className:"h-8 w-8 text-green-600"}),"Real-Time Business Analytics"]}),e.jsx("p",{className:"text-muted-foreground",children:"Live data from your business operations"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(_e,{variant:s?"default":"secondary",children:s?"● Live":"Offline"}),e.jsxs(R,{onClick:x,className:"gap-2",disabled:o,children:[e.jsx(is,{className:`h-4 w-4 ${o?"animate-spin":""}`}),"Refresh All"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(K,{children:e.jsx(X,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Aa,{className:"h-5 w-5 text-blue-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:"Real-time Updates"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Auto-refresh capabilities"})]})]})})}),e.jsx(K,{children:e.jsx(X,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ni,{className:"h-5 w-5 text-green-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:"Interactive Controls"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Chart type switching"})]})]})})}),e.jsx(K,{children:e.jsx(X,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(va,{className:"h-5 w-5 text-yellow-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:"Export Ready"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"CSV data export"})]})]})})}),e.jsx(K,{children:e.jsx(X,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(er,{className:"h-5 w-5 text-purple-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:"Multiple Types"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Line, Bar, Pie, Area"})]})]})})})]}),e.jsxs(pa,{defaultValue:"trends",className:"space-y-6",children:[e.jsxs(ba,{className:"grid w-full grid-cols-5",children:[e.jsx(ut,{value:"trends",children:"Trends"}),e.jsx(ut,{value:"comparisons",children:"Comparisons"}),e.jsx(ut,{value:"distributions",children:"Distributions"}),e.jsx(ut,{value:"performance",children:"Performance"}),e.jsx(ut,{value:"realtime",children:"Real-time"})]}),e.jsxs(mt,{value:"trends",className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx(as,{title:"Revenue Growth Trends",description:`Last 30 days - KES ${u.revenue.reduce((h,p)=>h+p.value,0).toLocaleString()}`,type:"area",data:u.revenue,height:350},`trend-1-${r}`),e.jsx(as,{title:"Daily Sales Performance",description:`${u.sales.reduce((h,p)=>h+p.orders,0)} total orders`,type:"line",data:u.sales,height:350},`trend-2-${r}`)]}),e.jsx(as,{title:"Sales Performance Timeline",description:"Real-time sales data with order metrics",type:"composed",data:u.sales,height:400},`trend-3-${r}`)]}),e.jsx(mt,{value:"comparisons",className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx(as,{title:"Daily Revenue Comparison",description:"Day-by-day performance analysis",type:"bar",data:u.revenue,height:350},`comp-1-${r}`),e.jsx(as,{title:"Product Category Performance",description:`${u.categories.length} categories`,type:"bar",data:u.categories,height:350,showControls:!1},`comp-2-${r}`)]})}),e.jsx(mt,{value:"distributions",className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx(as,{title:"Order Sources",description:"Order source distribution",type:"pie",data:u.traffic,height:300,showControls:!1},`dist-1-${r}`),e.jsx(as,{title:"Product Categories",description:"Sales by product category",type:"pie",data:u.categories,height:300,showControls:!1},`dist-2-${r}`),e.jsx(as,{title:"Order Status",description:"Current order distribution",type:"pie",data:u.performance,height:300,showControls:!1},`dist-3-${r}`)]})}),e.jsx(mt,{value:"performance",className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx(as,{title:"Sales KPI Dashboard",description:"Real-time sales performance",type:"composed",data:u.sales,height:350},`perf-1-${r}`),e.jsx(as,{title:"Revenue Efficiency",description:"Revenue generation over time",type:"area",data:u.revenue,height:350},`perf-2-${r}`)]})}),e.jsxs(mt,{value:"realtime",className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx(as,{title:"Live Sales Data",description:"Last 7 days real-time sales",type:"line",data:u.sales.slice(-7),height:350,autoRefresh:!0,refreshInterval:3e4},`rt-1-${r}`),e.jsx(as,{title:"Revenue Tracking",description:"Real-time revenue monitoring",type:"area",data:u.revenue.slice(-7),height:350,autoRefresh:!0,refreshInterval:3e4},`rt-2-${r}`)]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx(as,{title:"Recent Activity",description:"Last 10 days",type:"line",data:u.sales.slice(-10),height:250,autoRefresh:!0,refreshInterval:3e4},`rt-3-${r}`),e.jsx(as,{title:"Category Distribution",description:"Live category breakdown",type:"bar",data:u.categories.slice(0,5),height:250,autoRefresh:!0,refreshInterval:6e4},`rt-4-${r}`),e.jsx(as,{title:"Order Status",description:"Current order status",type:"pie",data:u.performance,height:250,autoRefresh:!0,refreshInterval:3e4,showControls:!1},`rt-5-${r}`)]})]})]}),e.jsxs(K,{children:[e.jsxs(pe,{children:[e.jsx(ge,{children:"How to Use Comprehensive Graphs"}),e.jsx(lt,{children:"Interactive features and customization options"})]}),e.jsx(X,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-2",children:"Interactive Features"}),e.jsxs("ul",{className:"text-sm space-y-1 text-muted-foreground",children:[e.jsx("li",{children:"• Switch between chart types (Line, Bar, Area, Pie)"}),e.jsx("li",{children:"• Adjust time ranges (7d, 30d, 90d, 1y)"}),e.jsx("li",{children:"• Real-time data refresh capabilities"}),e.jsx("li",{children:"• Export data to CSV format"}),e.jsx("li",{children:"• Hover tooltips for detailed information"})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-2",children:"Customization Options"}),e.jsxs("ul",{className:"text-sm space-y-1 text-muted-foreground",children:[e.jsx("li",{children:"• Custom color schemes for different data types"}),e.jsx("li",{children:"• Configurable auto-refresh intervals"}),e.jsx("li",{children:"• Responsive design for all screen sizes"}),e.jsx("li",{children:"• Data transformation and filtering"}),e.jsx("li",{children:"• Integration with existing API endpoints"})]})]})]})})]})]})},JW=({userId:t=null,showFilters:s=!0,limit:a=20})=>{const{user:r}=Es(),[i,o]=v.useState([]),[c,u]=v.useState(!0),[f,x]=v.useState({currentPage:1,totalPages:1,totalCount:0,hasNext:!1,hasPrev:!1}),[h,p]=v.useState({status:"all",orderType:"all",priority:"all",search:"",dateRange:null,minAmount:"",maxAmount:"",page:1}),[g,b]=v.useState({totalOrders:0,totalValue:0,averageOrderValue:0,statusBreakdown:{},monthlyTrends:[]});v.useEffect(()=>{N(),y()},[h,t]);const N=async()=>{try{u(!0);const H=new URLSearchParams;h.status&&h.status!=="all"&&H.append("status",h.status),h.orderType&&h.orderType!=="all"&&H.append("orderType",h.orderType),h.priority&&h.priority!=="all"&&H.append("priority",h.priority),h.search&&H.append("search",h.search),h.dateRange?.from&&H.append("startDate",h.dateRange.from.toISOString()),h.dateRange?.to&&H.append("endDate",h.dateRange.to.toISOString()),h.minAmount&&H.append("minAmount",h.minAmount),h.maxAmount&&H.append("maxAmount",h.maxAmount),H.append("page",h.page.toString()),H.append("limit",a.toString());const M=r.role==="client"?"/client/orders":"/admin/orders",q=await ye.get(`${M}?${H}`);o(q.data.orders||[]),x(q.data.pagination||{})}catch(H){console.error("Error fetching orders:",H),D.error("Failed to load order history")}finally{u(!1)}},y=async()=>{try{const H=await ye.get("/dashboard/analytics/orders?timeframe=12m");b(H.data.data||{})}catch(H){console.error("Error fetching order stats:",H)}},S=(H,M)=>{p(q=>({...q,[H]:M,page:1}))},C=H=>{p(M=>({...M,page:H}))},T=H=>{window.open(`/dashboard/orders/${H}`,"_blank")},_=async()=>{try{const H=new URLSearchParams;h.status&&H.append("status",h.status),h.dateRange?.from&&H.append("startDate",h.dateRange.from.toISOString()),h.dateRange?.to&&H.append("endDate",h.dateRange.to.toISOString()),H.append("format","csv");const M=r.role==="client"?"/client/orders/export":"/admin/orders/export",q=await ye.get(`${M}?${H}`,{responseType:"blob"}),L=new Blob([q.data],{type:"text/csv"}),re=window.URL.createObjectURL(L),V=document.createElement("a");V.href=re,V.download=`orders-export-${Date.now()}.csv`,document.body.appendChild(V),V.click(),window.URL.revokeObjectURL(re),document.body.removeChild(V),D.success("Orders exported successfully")}catch(H){console.error("Error exporting orders:",H),D.error("Failed to export orders")}},G=H=>{const M={Draft:{color:"bg-gray-100 text-gray-800",icon:Qt},Submitted:{color:"bg-blue-100 text-blue-800",icon:Qt},Under_Review:{color:"bg-yellow-100 text-yellow-800",icon:Er},Approved:{color:"bg-green-100 text-green-800",icon:os},Rejected:{color:"bg-red-100 text-red-800",icon:Cr},Completed:{color:"bg-green-100 text-green-800",icon:os},Cancelled:{color:"bg-red-100 text-red-800",icon:Cr}},q=M[H]||M.Draft,L=q.icon;return e.jsxs(_e,{className:`${q.color} flex items-center gap-1`,children:[e.jsx(L,{className:"h-3 w-3"}),H.replace("_"," ")]})},U=H=>{const M={low:"bg-green-100 text-green-800",normal:"bg-blue-100 text-blue-800",high:"bg-orange-100 text-orange-800",urgent:"bg-red-100 text-red-800"};return e.jsx(_e,{className:`${M[H]||M.normal} text-xs`,children:H})},F=H=>new Intl.NumberFormat("en-KE",{style:"currency",currency:"KES"}).format(H),k=H=>new Date(H).toLocaleDateString("en-KE",{year:"numeric",month:"short",day:"numeric"}),E=[{value:"all",label:"All Statuses"},{value:"Draft",label:"Draft"},{value:"Submitted",label:"Submitted"},{value:"Under_Review",label:"Under Review"},{value:"Approved",label:"Approved"},{value:"Rejected",label:"Rejected"},{value:"Completed",label:"Completed"},{value:"Cancelled",label:"Cancelled"}],A=[{value:"all",label:"All Types"},{value:"standard",label:"Standard"},{value:"bulk",label:"Bulk"},{value:"custom",label:"Custom"},{value:"urgent",label:"Urgent"}],B=[{value:"all",label:"All Priorities"},{value:"low",label:"Low"},{value:"normal",label:"Normal"},{value:"high",label:"High"},{value:"urgent",label:"Urgent"}];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx(K,{children:e.jsx(X,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Orders"}),e.jsx("p",{className:"text-2xl font-bold",children:g.totalOrders||0})]}),e.jsx(qt,{className:"h-8 w-8 text-blue-600"})]})})}),e.jsx(K,{children:e.jsx(X,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Value"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:F(g.totalValue||0)})]}),e.jsx(ea,{className:"h-8 w-8 text-green-600"})]})})}),e.jsx(K,{children:e.jsx(X,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Average Order"}),e.jsx("p",{className:"text-2xl font-bold text-purple-600",children:F(g.averageOrderValue||0)})]}),e.jsx(Is,{className:"h-8 w-8 text-purple-600"})]})})}),e.jsx(K,{children:e.jsx(X,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"This Month"}),e.jsx("p",{className:"text-2xl font-bold text-orange-600",children:g.monthlyTrends?.[0]?.count||0})]}),e.jsx(ms,{className:"h-8 w-8 text-orange-600"})]})})})]}),s&&e.jsxs(K,{children:[e.jsx(pe,{children:e.jsxs(ge,{className:"flex items-center gap-2",children:[e.jsx(al,{className:"h-5 w-5"}),"Filters"]})}),e.jsxs(X,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-5 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Status"}),e.jsxs(Ot,{value:h.status,onValueChange:H=>S("status",H),children:[e.jsx(Pt,{children:e.jsx(Rt,{placeholder:"Select status"})}),e.jsx(Mt,{children:E.map(H=>e.jsx(Ee,{value:H.value,children:H.label},H.value))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Type"}),e.jsxs(Ot,{value:h.orderType,onValueChange:H=>S("orderType",H),children:[e.jsx(Pt,{children:e.jsx(Rt,{placeholder:"Select type"})}),e.jsx(Mt,{children:A.map(H=>e.jsx(Ee,{value:H.value,children:H.label},H.value))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Priority"}),e.jsxs(Ot,{value:h.priority,onValueChange:H=>S("priority",H),children:[e.jsx(Pt,{children:e.jsx(Rt,{placeholder:"Select priority"})}),e.jsx(Mt,{children:B.map(H=>e.jsx(Ee,{value:H.value,children:H.label},H.value))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Search"}),e.jsxs("div",{className:"relative",children:[e.jsx(ia,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(fe,{placeholder:"Order ID, customer...",value:h.search,onChange:H=>S("search",H.target.value),className:"pl-10"})]})]}),e.jsx("div",{className:"flex items-end",children:e.jsxs(R,{onClick:_,variant:"outline",className:"w-full",children:[e.jsx(Pa,{className:"h-4 w-4 mr-2"}),"Export"]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mt-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Date Range"}),e.jsx(uA,{date:h.dateRange,setDate:H=>S("dateRange",H)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Min Amount"}),e.jsx(fe,{type:"number",placeholder:"0",value:h.minAmount,onChange:H=>S("minAmount",H.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Max Amount"}),e.jsx(fe,{type:"number",placeholder:"No limit",value:h.maxAmount,onChange:H=>S("maxAmount",H.target.value)})]})]})]})]}),e.jsxs(K,{children:[e.jsx(pe,{children:e.jsx(ge,{children:"Order History"})}),e.jsxs(X,{children:[c?e.jsx("div",{className:"flex items-center justify-center h-32",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900"})}):i.length===0?e.jsx("div",{className:"text-center py-8 text-gray-500",children:"No orders found for the selected criteria."}):e.jsx("div",{className:"space-y-4",children:i.map(H=>e.jsxs("div",{className:"border rounded-lg p-4 hover:bg-gray-50 transition-colors",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("h3",{className:"font-semibold text-lg",children:H.orderId}),G(H.status),U(H.priority)]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-lg font-bold text-green-600",children:F(H.total)}),e.jsxs(R,{variant:"outline",size:"sm",onClick:()=>T(H._id),children:[e.jsx(la,{className:"h-4 w-4 mr-1"}),"View"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm text-gray-600",children:[e.jsxs("div",{children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Customer:"})," ",H.customer?.name||"N/A"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Type:"})," ",H.orderType]})]}),e.jsxs("div",{children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Items:"})," ",H.items?.length||0," items"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Created:"})," ",k(H.createdAt)]})]}),e.jsxs("div",{children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Delivery:"})," ",H.deliveryInfo?.address||"N/A"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Updated:"})," ",k(H.updatedAt)]})]})]}),H.clientNotes&&e.jsx("div",{className:"mt-3 p-3 bg-gray-50 rounded",children:e.jsxs("p",{className:"text-sm",children:[e.jsx("strong",{children:"Notes:"})," ",H.clientNotes]})})]},H._id))}),f.totalPages>1&&e.jsxs("div",{className:"flex items-center justify-between mt-6",children:[e.jsxs("div",{className:"text-sm text-gray-500",children:["Showing ",(f.currentPage-1)*a+1," to ",Math.min(f.currentPage*a,f.totalCount)," of ",f.totalCount," orders"]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(R,{variant:"outline",size:"sm",onClick:()=>C(f.currentPage-1),disabled:!f.hasPrev,children:"Previous"}),e.jsx(R,{variant:"outline",size:"sm",onClick:()=>C(f.currentPage+1),disabled:!f.hasNext,children:"Next"})]})]})]})]})]})},eG=()=>{const{user:t,isAuthenticated:s}=Es(),[a,r]=v.useState(!0),[i,o]=v.useState(null),[c,u]=v.useState(!1),[f,x]=v.useState({overview:{},trends:{},analytics:{}}),[h,p]=v.useState({timeframe:"30d",reportType:"overview",dateRange:null}),[g,b]=v.useState([]);v.useEffect(()=>{s&&(N(),y())},[h.timeframe,s]);const N=v.useCallback(async(F=!1)=>{if(s)try{F?(u(!0),D.info("Refreshing reports...")):r(!0),o(null);const E={Authorization:`Bearer ${localStorage.getItem("token")}`},[A,B,H]=await Promise.allSettled([ye.get("/orders",{headers:E}),ye.get("/invoices",{headers:E}),ye.get("/expenses",{headers:E})]),M=A.status==="fulfilled"?A.value?.data||[]:[],q=B.status==="fulfilled"?B.value?.data||[]:[],L=H.status==="fulfilled"?H.value?.data||[]:[],re=Array.isArray(M)?M:[],V=Array.isArray(q)?q:[],ee=Array.isArray(L)?L:[],me=re.reduce((ht,bt)=>ht+(Number(bt.total)||0),0),W=re.length,se=new Set(re.map(ht=>ht.customer?.email).filter(Boolean)).size,Z=V.filter(ht=>ht.paymentStatus==="pending").length,I=new Date,Q=h.timeframe==="7d"?7:h.timeframe==="30d"?30:h.timeframe==="90d"?90:365,O=new Date(I.getTime()-Q*24*60*60*1e3),te=new Date(O.getTime()-Q*24*60*60*1e3),oe=re.filter(ht=>new Date(ht.createdAt)>=O),je=re.filter(ht=>new Date(ht.createdAt)>=te&&new Date(ht.createdAt)<O),Me=oe.reduce((ht,bt)=>ht+(Number(bt.total)||0),0),ve=je.reduce((ht,bt)=>ht+(Number(bt.total)||0),0),ce=ve>0?((Me-ve)/ve*100).toFixed(1):0,Pe=je.length>0?((oe.length-je.length)/je.length*100).toFixed(1):0,Qe=new Set(oe.map(ht=>ht.customer?.email).filter(Boolean)).size,vt=new Set(je.map(ht=>ht.customer?.email).filter(Boolean)).size,xt=vt>0?((Qe-vt)/vt*100).toFixed(1):0;x({overview:{totalRevenue:me,totalOrders:W,totalUsers:se,activeServiceRequests:Z,growthRates:{revenue:Number(ce),orders:Number(Pe),users:Number(xt)}},analytics:{orders:re,invoices:V,expenses:ee}}),console.log("✅ Report data loaded:",{orders:re.length,invoices:V.length,expenses:ee.length,totalRevenue:me,growthRates:{revenueGrowth:ce,ordersGrowth:Pe,usersGrowth:xt}}),F&&D.success("Reports refreshed!")}catch(k){console.error("❌ Error fetching report data:",k),o(k.message||"Failed to load report data"),D.error("Failed to load report data")}finally{r(!1),u(!1)}},[h.timeframe,s]),y=()=>{const F=[{id:"sales-summary",name:"Sales Summary Report",description:"Comprehensive sales performance and revenue analysis",icon:ea,category:"Financial",permissions:["canViewReports","admin"]},{id:"order-analysis",name:"Order Analysis Report",description:"Detailed order trends, status breakdown, and customer insights",icon:js,category:"Operations",permissions:["canViewAllOrders"]},{id:"customer-insights",name:"Customer Insights Report",description:"Customer behavior, demographics, and engagement metrics",icon:Xt,category:"Marketing",permissions:["canViewAllClients"]},{id:"activity-audit",name:"Activity Audit Report",description:"User activity logs, security events, and system usage",icon:ya,category:"Security",permissions:["canViewReports"]},{id:"performance-metrics",name:"Performance Metrics Report",description:"System performance, response times, and efficiency metrics",icon:Is,category:"Technical",permissions:["canManageSettings"]}],k=t?.permissions||{},E=t?.role||"user",A=F.filter(B=>E==="admin"||B.permissions.some(H=>k[H]||H===E));b(A.length>0?A:F)},S=async F=>{try{r(!0),D.info(`Generating ${F} report...`);const k=localStorage.getItem("token"),E={reportType:F,timeframe:h.timeframe,format:"pdf"};h.dateRange?.from&&(E.startDate=h.dateRange.from.toISOString()),h.dateRange?.to&&(E.endDate=h.dateRange.to.toISOString());const A=await ye.post("/reports/generate",E,{headers:{Authorization:`Bearer ${k}`},responseType:"blob"});if(A.data){const B=new Blob([A.data],{type:"application/pdf"}),H=window.URL.createObjectURL(B),M=document.createElement("a");M.href=H,M.download=`${F}-${new Date().toISOString().split("T")[0]}.pdf`,document.body.appendChild(M),M.click(),window.URL.revokeObjectURL(H),document.body.removeChild(M),D.success("Report downloaded successfully!")}else throw new Error("No data received")}catch(k){console.error("Error generating report:",k),D.error(k.response?.data?.message||"Report generation is currently unavailable. Please try again later.")}finally{r(!1)}},C=async(F="csv")=>{try{D.info(`Preparing ${F.toUpperCase()} export...`);const k=localStorage.getItem("token"),E=await ye.post("/reports/export",{format:F,timeframe:h.timeframe,dateRange:h.dateRange,includeCharts:F==="pdf"},{headers:{Authorization:`Bearer ${k}`},responseType:"blob"}),A=new Blob([E.data],{type:F==="pdf"?"application/pdf":"text/csv"}),B=window.URL.createObjectURL(A),H=document.createElement("a");H.href=B,H.download=`ominbiz-report-${new Date().toISOString().split("T")[0]}.${F}`,document.body.appendChild(H),H.click(),window.URL.revokeObjectURL(B),document.body.removeChild(H),D.success(`Data exported as ${F.toUpperCase()}`)}catch(k){console.error("Error exporting data:",k),D.error("Export feature is currently unavailable. Please contact support.")}},T=async(F,k)=>{try{const E=localStorage.getItem("token");await ye.post("/reports/schedule",{reportId:F,schedule:k,recipients:[t?.email||"admin@ominbiz.com"],format:"pdf"},{headers:{Authorization:`Bearer ${E}`}}),D.success(`${F} report scheduled to be sent ${k}`)}catch(E){console.error("Error scheduling report:",E),D.error("Report scheduling is currently unavailable. Feature coming soon!")}},_=F=>new Intl.NumberFormat("en-KE",{style:"currency",currency:"KES"}).format(F),G=F=>new Intl.NumberFormat().format(F),U=[{value:"7d",label:"Last 7 Days"},{value:"30d",label:"Last 30 Days"},{value:"90d",label:"Last 90 Days"},{value:"1y",label:"Last Year"}];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Reports & Analytics"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Generate comprehensive reports and analyze business performance"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(R,{variant:"outline",onClick:()=>N(!0),disabled:c||a,children:[e.jsx(is,{className:`h-4 w-4 mr-2 ${c?"animate-spin":""}`}),c?"Refreshing...":"Refresh"]}),e.jsxs(R,{onClick:()=>C("csv"),disabled:a,children:[e.jsx(Pa,{className:"h-4 w-4 mr-2"}),"Export CSV"]})]})]}),e.jsxs(K,{children:[e.jsx(pe,{children:e.jsxs(ge,{className:"flex items-center gap-2",children:[e.jsx(al,{className:"h-5 w-5"}),"Report Filters"]})}),e.jsx(X,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Timeframe"}),e.jsxs(Ot,{value:h.timeframe,onValueChange:F=>p(k=>({...k,timeframe:F})),children:[e.jsx(Pt,{children:e.jsx(Rt,{placeholder:"Select timeframe"})}),e.jsx(Mt,{children:U.map(F=>e.jsx(Ee,{value:F.value,children:F.label},F.value))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Report Type"}),e.jsxs(Ot,{value:h.reportType,onValueChange:F=>p(k=>({...k,reportType:F})),children:[e.jsx(Pt,{children:e.jsx(Rt,{placeholder:"Select type"})}),e.jsxs(Mt,{children:[e.jsx(Ee,{value:"overview",children:"Overview"}),e.jsx(Ee,{value:"detailed",children:"Detailed"}),e.jsx(Ee,{value:"summary",children:"Summary"})]})]})]}),e.jsx("div",{className:"flex items-end",children:e.jsxs(R,{onClick:()=>N(!0),className:"w-full",disabled:a||c,children:[e.jsx(er,{className:"h-4 w-4 mr-2"}),a?"Loading...":"Update Reports"]})})]})})]}),e.jsxs(pa,{defaultValue:"overview",className:"space-y-6",children:[e.jsxs(ba,{className:"grid w-full grid-cols-5",children:[e.jsx(ut,{value:"overview",children:"Overview"}),e.jsx(ut,{value:"reports",children:"Reports"}),e.jsx(ut,{value:"orders",children:"Orders"}),e.jsx(ut,{value:"activities",children:"Activities"}),e.jsx(ut,{value:"analytics",children:"Analytics"})]}),e.jsx(mt,{value:"overview",className:"space-y-6",children:i?e.jsx(K,{className:"border-red-200 bg-red-50",children:e.jsx(X,{className:"flex items-center justify-center py-12",children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx(Cs,{className:"h-12 w-12 text-red-500 mx-auto"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-red-700",children:"Failed to Load Report Data"}),e.jsx("p",{className:"text-sm text-red-600",children:i})]}),e.jsxs(R,{onClick:()=>N(),variant:"outline",children:[e.jsx(is,{className:"mr-2 h-4 w-4"}),"Retry"]})]})})}):a?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[1,2,3,4].map(F=>e.jsx(K,{children:e.jsx(X,{className:"p-6",children:e.jsxs("div",{className:"space-y-2 animate-pulse",children:[e.jsx("div",{className:"h-4 w-24 bg-gray-200 rounded"}),e.jsx("div",{className:"h-8 w-32 bg-gray-200 rounded"}),e.jsx("div",{className:"h-3 w-20 bg-gray-200 rounded"})]})})},F))}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx(K,{children:e.jsx(X,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Revenue"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:_(f.overview?.totalRevenue||0)}),e.jsx("div",{className:"flex items-center mt-1",children:(f.overview?.growthRates?.revenue||0)>=0?e.jsxs(e.Fragment,{children:[e.jsx(Is,{className:"h-3 w-3 text-green-600 mr-1"}),e.jsxs("span",{className:"text-xs text-green-600",children:["+",Math.abs(f.overview?.growthRates?.revenue||0),"%"]})]}):e.jsxs(e.Fragment,{children:[e.jsx(gi,{className:"h-3 w-3 text-red-600 mr-1"}),e.jsxs("span",{className:"text-xs text-red-600",children:[f.overview?.growthRates?.revenue,"%"]})]})})]}),e.jsx(ea,{className:"h-8 w-8 text-green-600"})]})})}),e.jsx(K,{children:e.jsx(X,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Orders"}),e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:G(f.overview?.totalOrders||0)}),e.jsx("div",{className:"flex items-center mt-1",children:(f.overview?.growthRates?.orders||0)>=0?e.jsxs(e.Fragment,{children:[e.jsx(Is,{className:"h-3 w-3 text-green-600 mr-1"}),e.jsxs("span",{className:"text-xs text-green-600",children:["+",Math.abs(f.overview?.growthRates?.orders||0),"%"]})]}):e.jsxs(e.Fragment,{children:[e.jsx(gi,{className:"h-3 w-3 text-red-600 mr-1"}),e.jsxs("span",{className:"text-xs text-red-600",children:[f.overview?.growthRates?.orders,"%"]})]})})]}),e.jsx(js,{className:"h-8 w-8 text-blue-600"})]})})}),e.jsx(K,{children:e.jsx(X,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Users"}),e.jsx("p",{className:"text-2xl font-bold text-purple-600",children:G(f.overview?.totalUsers||0)}),e.jsx("div",{className:"flex items-center mt-1",children:(f.overview?.growthRates?.users||0)>=0?e.jsxs(e.Fragment,{children:[e.jsx(Is,{className:"h-3 w-3 text-green-600 mr-1"}),e.jsxs("span",{className:"text-xs text-green-600",children:["+",Math.abs(f.overview?.growthRates?.users||0),"%"]})]}):e.jsxs(e.Fragment,{children:[e.jsx(gi,{className:"h-3 w-3 text-red-600 mr-1"}),e.jsxs("span",{className:"text-xs text-red-600",children:[f.overview?.growthRates?.users,"%"]})]})})]}),e.jsx(Xt,{className:"h-8 w-8 text-purple-600"})]})})}),e.jsx(K,{children:e.jsx(X,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Active Requests"}),e.jsx("p",{className:"text-2xl font-bold text-orange-600",children:G(f.overview?.activeServiceRequests||0)}),e.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Service requests"})]}),e.jsx(ya,{className:"h-8 w-8 text-orange-600"})]})})})]}),e.jsxs(K,{children:[e.jsx(pe,{children:e.jsx(ge,{children:"Quick Report Actions"})}),e.jsx(X,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs(R,{variant:"outline",className:"h-20 flex-col",onClick:()=>C("pdf"),children:[e.jsx(Pa,{className:"h-6 w-6 mb-2"}),e.jsx("span",{className:"text-sm",children:"Export PDF Report"})]}),e.jsxs(R,{variant:"outline",className:"h-20 flex-col",onClick:()=>C("csv"),children:[e.jsx(ya,{className:"h-6 w-6 mb-2"}),e.jsx("span",{className:"text-sm",children:"Export Data CSV"})]}),e.jsxs(R,{variant:"outline",className:"h-20 flex-col",onClick:()=>T("overview","weekly"),children:[e.jsx(Gs,{className:"h-6 w-6 mb-2"}),e.jsx("span",{className:"text-sm",children:"Schedule Weekly Report"})]})]})})]})]})}),e.jsx(mt,{value:"reports",className:"space-y-6",children:g.length===0?e.jsx(K,{children:e.jsx(X,{className:"flex items-center justify-center py-12",children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx(ya,{className:"h-12 w-12 text-muted-foreground mx-auto"}),e.jsx("p",{className:"text-muted-foreground",children:"No reports available"})]})})}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:g.map(F=>{const k=F.icon;return e.jsxs(K,{className:"hover:shadow-lg transition-shadow",children:[e.jsxs(pe,{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(k,{className:"h-8 w-8 text-blue-600"}),e.jsx(_e,{variant:"outline",children:F.category})]}),e.jsx(ge,{className:"text-lg",children:F.name})]}),e.jsxs(X,{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:F.description}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs(R,{size:"sm",onClick:()=>S(F.id),disabled:a,children:[e.jsx(Pa,{className:"h-4 w-4 mr-1"}),"Generate"]}),e.jsxs(R,{size:"sm",variant:"outline",onClick:()=>T(F.id,"monthly"),children:[e.jsx(Qt,{className:"h-4 w-4 mr-1"}),"Schedule"]})]})]})]},F.id)})})}),e.jsx(mt,{value:"orders",children:e.jsx(JW,{showFilters:!0,limit:20})}),e.jsx(mt,{value:"activities",children:e.jsx(pu,{showFilters:!0,limit:20})}),e.jsx(mt,{value:"analytics",className:"space-y-6",children:e.jsxs(K,{children:[e.jsx(pe,{children:e.jsx(ge,{children:"Advanced Analytics"})}),e.jsx(X,{children:e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(er,{className:"h-16 w-16 mx-auto mb-4 text-gray-300"}),e.jsx("p",{children:"Advanced analytics charts and visualizations will be displayed here."}),e.jsx("p",{className:"text-sm mt-2",children:"Integration with charting libraries like Chart.js or D3.js recommended."})]})})]})})]})]})},tG=()=>{const{user:t}=Es(),{socket:s,connected:a}=da(),r=Ka(),[i,o]=v.useState("chat"),[c,u]=v.useState([]),[f,x]=v.useState(""),[h,p]=v.useState(!1),[g,b]=v.useState([]),[N,y]=v.useState(null),[S,C]=v.useState("offline"),[T,_]=v.useState(""),[G,U]=v.useState([]),[F,k]=v.useState([]),[E,A]=v.useState(!1),[B,H]=v.useState(!1),[M,q]=v.useState(!1),[L,re]=v.useState({subject:"",description:"",priority:"medium"}),[V,ee]=v.useState(!0),[me,W]=v.useState(null),[se,Z]=v.useState(null),[I,Q]=v.useState(null),[O,te]=v.useState(null),[oe,je]=v.useState(!0),[Me,ve]=v.useState(!0),ce=v.useRef(null),Pe=v.useRef(null),Qe=v.useRef(null),vt=v.useRef(null);v.useEffect(()=>(ht(),bt(),ot(),xt(),()=>{cs()}),[s]);const xt=()=>{if(s)return s.emit("join_support_chat",{userId:t?._id,userName:t?.name}),s.on("support_message_received",ke=>{u(we=>[...we,ke]),p(!1)}),s.on("agent_typing",ke=>{p(ke.isTyping)}),s.on("agent_status_update",ke=>{b(we=>we.map(nt=>nt.id===ke.agentId?{...nt,status:ke.status}:nt)),ke.agentId===N?.id&&C(ke.status)}),s.on("ticket_status_update",ke=>{k(we=>we.map(nt=>nt.id===ke.ticketId?{...nt,status:ke.status,lastUpdate:new Date}:nt)),D.info(`Ticket ${ke.ticketId} updated: ${ke.status}`)}),s.on("video_offer",Te),s.on("video_answer",Ne),s.on("ice_candidate",he),s.on("call_ended",Ue),()=>{s.off("support_message_received"),s.off("agent_typing"),s.off("agent_status_update"),s.off("ticket_status_update"),s.off("video_offer"),s.off("video_answer"),s.off("ice_candidate"),s.off("call_ended")}};v.useEffect(()=>{fs()},[c]);const ht=async()=>{try{ee(!0),W(null);const ke=await Ac.getSupportAgents().catch(()=>[{id:1,name:"Support Team",role:"Customer Support",avatar:"/api/placeholder/40/40",status:"online",rating:4.9,specialties:["General Support","Technical Help"]}]);b(ke),y(ke[0]),C(ke[0]?.status||"online");const we={id:1,sender:"agent",message:`Hi ${t?.name||"there"}! I'm ${ke[0]?.name}, your support specialist. How can I help you today?`,timestamp:new Date,agent:ke[0]};u([we]),console.log("✅ Support initialized:",{agents:ke.length,activeAgent:ke[0]?.name})}catch(ke){console.error("❌ Error initializing support:",ke),W("Failed to connect to support. Please try again later."),D.error("Failed to initialize support system")}finally{ee(!1)}},bt=async()=>{try{const ke=await Ac.getFAQs();U(Array.isArray(ke)?ke:[]),console.log("✅ FAQs loaded:",ke.length)}catch(ke){console.error("❌ Error loading FAQs:",ke),U([{id:1,question:"How do I reset my password?",answer:'You can reset your password by clicking on "Forgot Password" on the login page. Enter your email and follow the instructions sent to your inbox.',category:"Account",helpful:45,views:234},{id:2,question:"How to integrate with third-party APIs?",answer:"Our API integration guide provides step-by-step instructions. Visit the Developer section in Settings for API keys and documentation.",category:"Technical",helpful:38,views:189},{id:3,question:"What payment methods do you accept?",answer:"We accept all major credit cards (Visa, Mastercard, Amex), PayPal, M-Pesa, and bank transfers. All transactions are encrypted and secure.",category:"Billing",helpful:52,views:312},{id:4,question:"How do I export my data?",answer:"Navigate to Reports > Export Data. Choose your format (CSV, PDF, Excel) and date range. Your export will download automatically.",category:"Data",helpful:29,views:156},{id:5,question:"Can I customize my dashboard?",answer:"Yes! Click the Settings icon on your dashboard. You can rearrange widgets, choose themes, and customize which metrics to display.",category:"Customization",helpful:67,views:421}])}},ot=async()=>{try{const ke=await Ac.getTickets();k(Array.isArray(ke)?ke:[]),console.log("✅ Tickets loaded:",ke.length)}catch(ke){console.error("❌ Error loading tickets:",ke),k([])}},hs=async()=>{if(!f.trim())return;const ke={id:Date.now(),sender:"user",senderName:t?.name,message:f,timestamp:new Date,userId:t?._id,agentId:N?.id};u(we=>[...we,ke]),x(""),s&&a&&s.emit("send_support_message",ke);try{await Ac.sendMessage(N?.id,f)}catch(we){console.error("Failed to save message:",we)}},fs=()=>{ce.current?.scrollIntoView({behavior:"smooth"})},Ps=ke=>{const we=ke.target.files[0];if(we){const nt={id:Date.now(),sender:"user",message:`Uploaded file: ${we.name}`,timestamp:new Date,attachment:{name:we.name,size:we.size,type:we.type}};u(Ye=>[...Ye,nt]),D.success("File uploaded successfully")}},ps=async()=>{try{const ke=await navigator.mediaDevices.getUserMedia({video:{width:1280,height:720},audio:!0});Z(ke),H(!0),Qe.current&&(Qe.current.srcObject=ke);const we=new RTCPeerConnection({iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:"stun:stun1.l.google.com:19302"}]});ke.getTracks().forEach(Ye=>{we.addTrack(Ye,ke)}),we.ontrack=Ye=>{Q(Ye.streams[0]),vt.current&&(vt.current.srcObject=Ye.streams[0])},we.onicecandidate=Ye=>{Ye.candidate&&s&&s.emit("ice_candidate",{candidate:Ye.candidate,userId:t?._id,agentId:N?.id})},te(we);const nt=await we.createOffer();await we.setLocalDescription(nt),s&&s.emit("video_call_offer",{offer:nt,userId:t?._id,agentId:N?.id}),D.success("Video call started with "+N?.name)}catch(ke){console.error("Error starting video call:",ke),D.error("Failed to access camera/microphone. Please check permissions.")}},As=()=>{cs(),s&&s.emit("end_video_call",{userId:t?._id,agentId:N?.id}),H(!1),D.info("Video call ended")},cs=()=>{se&&(se.getTracks().forEach(ke=>ke.stop()),Z(null)),O&&(O.close(),te(null)),Q(null),je(!0),ve(!0)},_t=()=>{if(se){const ke=se.getVideoTracks()[0];ke&&(ke.enabled=!ke.enabled,je(ke.enabled),D.info(ke.enabled?"Camera on":"Camera off"))}},sa=()=>{if(se){const ke=se.getAudioTracks()[0];ke&&(ke.enabled=!ke.enabled,ve(ke.enabled),D.info(ke.enabled?"Microphone on":"Microphone off"))}},Te=async ke=>{if(O)try{await O.setRemoteDescription(new RTCSessionDescription(ke.offer));const we=await O.createAnswer();await O.setLocalDescription(we),s&&s.emit("video_call_answer",{answer:we,userId:t?._id,agentId:ke.userId})}catch(we){console.error("Error handling video offer:",we)}},Ne=async ke=>{if(O)try{await O.setRemoteDescription(new RTCSessionDescription(ke.answer))}catch(we){console.error("Error handling video answer:",we)}},he=async ke=>{if(O)try{await O.addIceCandidate(new RTCIceCandidate(ke.candidate))}catch(we){console.error("Error adding ICE candidate:",we)}},Ue=()=>{cs(),H(!1),D.info("Call ended by agent")},st=()=>{A(!E),D.info(E?"Recording stopped":"Recording started")},Ct=async()=>{if(!L.subject.trim()||!L.description.trim()){D.error("Please fill in all required fields");return}try{const ke=await Ac.createTicket({subject:L.subject,description:L.description,priority:L.priority,userId:t?._id});k(we=>[ke,...we]),re({subject:"",description:"",priority:"medium"}),q(!1),D.success("Support ticket created successfully!")}catch(ke){console.error("Error creating ticket:",ke);const we={id:`TKT-${Date.now()}`,subject:L.subject,status:"open",priority:L.priority,created:new Date,lastUpdate:new Date,agent:"Unassigned"};k(nt=>[we,...nt]),re({subject:"",description:"",priority:"medium"}),q(!1),D.success("Support ticket created successfully!")}},Dt=(ke,we)=>{U(nt=>nt.map(Ye=>Ye.id===ke?{...Ye,helpful:Ye.helpful+(we?1:-1)}:Ye)),D.success(we?"Marked as helpful!":"Feedback recorded")},Zt=async ke=>{ke.preventDefault();const we=new FormData(ke.target),nt=we.get("subject"),Ye=we.get("message");try{await Ac.createTicket({subject:nt,description:Ye,priority:"medium",userId:t?._id}),D.success("Message sent! We'll respond shortly."),ke.target.reset()}catch{const yt={id:`TKT-${Date.now()}`,subject:nt,status:"open",priority:"medium",created:new Date,lastUpdate:new Date,agent:"Unassigned"};k(Kt=>[yt,...Kt]),D.success("Message sent! We'll respond shortly."),ke.target.reset()}},ts=G.filter(ke=>ke.question.toLowerCase().includes(T.toLowerCase())||ke.answer.toLowerCase().includes(T.toLowerCase()));return V?e.jsx("div",{className:"p-6 max-w-7xl mx-auto",children:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto"}),e.jsx("p",{className:"text-muted-foreground",children:"Loading support system..."})]})})}):me?e.jsx("div",{className:"p-6 max-w-7xl mx-auto",children:e.jsx(K,{className:"border-red-200 bg-red-50",children:e.jsx(X,{className:"flex items-center justify-center py-12",children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx(Cs,{className:"h-12 w-12 text-red-500 mx-auto"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-red-700",children:"Support System Error"}),e.jsx("p",{className:"text-sm text-red-600",children:me})]}),e.jsxs(R,{onClick:ht,variant:"outline",children:[e.jsx(is,{className:"mr-2 h-4 w-4"}),"Try Again"]})]})})})}):e.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Help & Support"}),e.jsxs("p",{className:"text-muted-foreground mt-2",children:["Get instant help from our support team • ",a?"🟢 Connected":"🔴 Offline"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-8",children:[e.jsx(K,{className:"cursor-pointer hover:shadow-lg transition-all hover:border-primary group",onClick:()=>r("/dashboard/sessions"),children:e.jsxs(X,{className:"p-6",children:[e.jsx("div",{className:"bg-blue-50 dark:bg-blue-950 rounded-lg p-3 w-fit mb-3 group-hover:scale-110 transition-transform",children:e.jsx(ka,{className:"h-6 w-6 text-blue-500"})}),e.jsxs("h3",{className:"font-semibold mb-1 flex items-center gap-2",children:["Live Sessions",e.jsx(_e,{className:"bg-green-500 text-white text-[10px] px-1.5 py-0",children:"New"})]}),e.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Schedule video meetings & webinars"}),e.jsx(R,{variant:"link",className:"p-0 h-auto text-sm",children:"Schedule Now →"})]})}),e.jsx(K,{className:"cursor-pointer hover:shadow-lg transition-all hover:border-primary",onClick:()=>r("/dashboard/messages"),children:e.jsxs(X,{className:"p-6",children:[e.jsx("div",{className:"bg-purple-50 dark:bg-purple-950 rounded-lg p-3 w-fit mb-3",children:e.jsx(Zs,{className:"h-6 w-6 text-purple-500"})}),e.jsx("h3",{className:"font-semibold mb-1",children:"Messages"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Direct messaging with team"}),e.jsx(R,{variant:"link",className:"p-0 h-auto text-sm",children:"Open Messages →"})]})}),e.jsx(K,{className:"cursor-pointer hover:shadow-lg transition-all hover:border-primary",children:e.jsxs(X,{className:"p-6",children:[e.jsx("div",{className:"bg-green-50 dark:bg-green-950 rounded-lg p-3 w-fit mb-3",children:e.jsx(ya,{className:"h-6 w-6 text-green-500"})}),e.jsx("h3",{className:"font-semibold mb-1",children:"Support Tickets"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Track your support requests"}),e.jsx(R,{variant:"link",className:"p-0 h-auto text-sm",onClick:()=>o("tickets"),children:"View Tickets →"})]})}),e.jsx(K,{className:"cursor-pointer hover:shadow-lg transition-all hover:border-primary",children:e.jsxs(X,{className:"p-6",children:[e.jsx("div",{className:"bg-orange-50 dark:bg-orange-950 rounded-lg p-3 w-fit mb-3",children:e.jsx($s,{className:"h-6 w-6 text-orange-500"})}),e.jsx("h3",{className:"font-semibold mb-1",children:"Contact Us"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Phone, email & social media"}),e.jsx(R,{variant:"link",className:"p-0 h-auto text-sm",onClick:()=>o("contact"),children:"Get in Touch →"})]})})]}),e.jsxs(pa,{value:i,onValueChange:o,className:"space-y-6",children:[e.jsxs(ba,{className:"grid w-full grid-cols-4",children:[e.jsxs(ut,{value:"chat",className:"flex items-center gap-2",children:[e.jsx(Zs,{className:"h-4 w-4"}),"Live Chat"]}),e.jsxs(ut,{value:"faq",className:"flex items-center gap-2",children:[e.jsx(xv,{className:"h-4 w-4"}),"FAQ"]}),e.jsxs(ut,{value:"tickets",className:"flex items-center gap-2",children:[e.jsx(ya,{className:"h-4 w-4"}),"Support Tickets"]}),e.jsxs(ut,{value:"contact",className:"flex items-center gap-2",children:[e.jsx($s,{className:"h-4 w-4"}),"Contact"]})]}),e.jsx(mt,{value:"chat",className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[e.jsxs(K,{className:"lg:col-span-1",children:[e.jsx(pe,{children:e.jsxs(ge,{className:"flex items-center gap-2",children:[e.jsx(Xt,{className:"h-5 w-5"}),"Support Team"]})}),e.jsx(X,{className:"space-y-4",children:g.map(ke=>e.jsxs("div",{className:`p-3 rounded-lg cursor-pointer transition-colors border ${N?.id===ke.id?"bg-primary/10 border-primary":"hover:bg-muted border-transparent"}`,onClick:()=>y(ke),children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"relative",children:[e.jsxs(fr,{className:"h-10 w-10",children:[e.jsx(Rn,{src:ke.avatar}),e.jsx(xr,{children:ke.name.split(" ").map(we=>we[0]).join("")})]}),e.jsx("div",{className:`absolute -bottom-1 -right-1 w-3 h-3 rounded-full border-2 border-white ${ke.status==="online"?"bg-green-500":ke.status==="busy"?"bg-yellow-500":"bg-gray-400"}`})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-medium text-sm",children:ke.name}),e.jsx("p",{className:"text-xs text-muted-foreground",children:ke.role}),e.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[e.jsx(Ja,{className:"h-3 w-3 text-yellow-500 fill-current"}),e.jsx("span",{className:"text-xs text-muted-foreground",children:ke.rating})]})]})]}),e.jsx("div",{className:"mt-2",children:ke.specialties&&Array.isArray(ke.specialties)&&ke.specialties.map(we=>e.jsx(_e,{variant:"secondary",className:"text-xs mr-1 mb-1",children:we},we))})]},ke.id))})]}),e.jsxs(K,{className:"lg:col-span-3",children:[e.jsx(pe,{className:"border-b",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(fr,{className:"h-10 w-10",children:[e.jsx(Rn,{src:N?.avatar}),e.jsx(xr,{children:N?.name.split(" ").map(ke=>ke[0]).join("")})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:N?.name}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${S==="online"?"bg-green-500":"bg-muted-foreground"}`}),e.jsx("span",{className:"text-sm text-muted-foreground capitalize",children:S})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(R,{variant:"outline",size:"sm",onClick:ps,className:"flex items-center gap-2",children:[e.jsx(ka,{className:"h-4 w-4"}),"Video Call"]}),e.jsxs(R,{variant:"outline",size:"sm",onClick:st,className:`flex items-center gap-2 ${E?"text-red-600":""}`,children:[E?e.jsx(nf,{className:"h-4 w-4"}):e.jsx(lf,{className:"h-4 w-4"}),E?"Stop":"Record"]})]})]})}),e.jsxs(X,{className:"p-0",children:[e.jsx(_r,{className:"h-96 p-4",children:e.jsxs("div",{className:"space-y-4",children:[c.map(ke=>e.jsx("div",{className:`flex ${ke.sender==="user"?"justify-end":"justify-start"}`,children:e.jsxs("div",{className:`max-w-xs lg:max-w-md px-4 py-2 rounded-lg ${ke.sender==="user"?"bg-primary text-primary-foreground":"bg-muted text-foreground"}`,children:[ke.sender==="agent"&&e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsxs(fr,{className:"h-6 w-6",children:[e.jsx(Rn,{src:ke.agent?.avatar}),e.jsx(xr,{className:"text-xs",children:ke.agent?.name.split(" ").map(we=>we[0]).join("")})]}),e.jsx("span",{className:"text-xs font-medium",children:ke.agent?.name})]}),e.jsx("p",{className:"text-sm",children:ke.message}),ke.attachment&&e.jsxs("div",{className:"mt-2 p-2 bg-white bg-opacity-20 rounded flex items-center gap-2",children:[e.jsx(Xc,{className:"h-4 w-4"}),e.jsx("span",{className:"text-xs",children:ke.attachment.name})]}),e.jsx("p",{className:"text-xs opacity-70 mt-1",children:ke.timestamp.toLocaleTimeString()})]})},ke.id)),h&&e.jsx("div",{className:"flex justify-start",children:e.jsx("div",{className:"bg-muted px-4 py-2 rounded-lg",children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-2 h-2 bg-muted-foreground rounded-full animate-bounce"}),e.jsx("div",{className:"w-2 h-2 bg-muted-foreground rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),e.jsx("div",{className:"w-2 h-2 bg-muted-foreground rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})})}),e.jsx("div",{ref:ce})]})}),e.jsx("div",{className:"border-t p-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"file",ref:Pe,onChange:Ps,className:"hidden"}),e.jsx(R,{variant:"outline",size:"sm",onClick:()=>Pe.current?.click(),children:e.jsx(Xc,{className:"h-4 w-4"})}),e.jsx(fe,{value:f,onChange:ke=>x(ke.target.value),placeholder:"Type your message...",onKeyPress:ke=>ke.key==="Enter"&&hs(),className:"flex-1"}),e.jsx(R,{onClick:hs,disabled:!f.trim(),children:e.jsx(Ma,{className:"h-4 w-4"})})]})})]})]})]})}),e.jsx(mt,{value:"faq",className:"space-y-6",children:e.jsxs(K,{children:[e.jsxs(pe,{children:[e.jsx(ge,{children:"Frequently Asked Questions"}),e.jsxs("div",{className:"relative",children:[e.jsx(ia,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(fe,{placeholder:"Search FAQs...",value:T,onChange:ke=>_(ke.target.value),className:"pl-10"})]})]}),e.jsx(X,{children:e.jsx("div",{className:"space-y-4",children:ts.map(ke=>e.jsx("div",{className:"border rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-medium text-foreground mb-2",children:ke.question}),e.jsx("p",{className:"text-muted-foreground text-sm mb-3",children:ke.answer}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[e.jsx(_e,{variant:"secondary",children:ke.category}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Ao,{className:"h-4 w-4"}),ke.helpful]}),e.jsxs("span",{children:[ke.views," views"]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(R,{variant:"ghost",size:"sm",onClick:()=>Dt(ke.id,!0),children:e.jsx(Ao,{className:"h-4 w-4"})}),e.jsx(R,{variant:"ghost",size:"sm",onClick:()=>Dt(ke.id,!1),children:e.jsx(US,{className:"h-4 w-4"})})]})]})},ke.id))})})]})}),e.jsxs(mt,{value:"tickets",className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Support Tickets"}),e.jsxs(Ft,{open:M,onOpenChange:q,children:[e.jsx(Na,{asChild:!0,children:e.jsxs(R,{className:"flex items-center gap-2",children:[e.jsx(Hs,{className:"h-4 w-4"}),"Create New Ticket"]})}),e.jsxs(It,{className:"sm:max-w-[500px]",children:[e.jsxs(Lt,{children:[e.jsx(Bt,{children:"Create Support Ticket"}),e.jsx(es,{children:"Describe your issue and we'll get back to you as soon as possible."})]}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(ae,{htmlFor:"ticket-subject",children:"Subject *"}),e.jsx(fe,{id:"ticket-subject",placeholder:"Brief description of your issue",value:L.subject,onChange:ke=>re(we=>({...we,subject:ke.target.value}))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ae,{htmlFor:"ticket-priority",children:"Priority"}),e.jsxs(Ot,{value:L.priority,onValueChange:ke=>re(we=>({...we,priority:ke})),children:[e.jsx(Pt,{children:e.jsx(Rt,{placeholder:"Select priority"})}),e.jsxs(Mt,{children:[e.jsx(Ee,{value:"low",children:"Low"}),e.jsx(Ee,{value:"medium",children:"Medium"}),e.jsx(Ee,{value:"high",children:"High"}),e.jsx(Ee,{value:"urgent",children:"Urgent"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ae,{htmlFor:"ticket-description",children:"Description *"}),e.jsx(Ts,{id:"ticket-description",placeholder:"Provide detailed information about your issue",rows:5,value:L.description,onChange:ke=>re(we=>({...we,description:ke.target.value}))})]})]}),e.jsxs(Rs,{children:[e.jsx(R,{variant:"outline",onClick:()=>q(!1),children:"Cancel"}),e.jsx(R,{onClick:Ct,children:"Create Ticket"})]})]})]})]}),e.jsx("div",{className:"grid gap-4",children:F.map(ke=>e.jsx(K,{children:e.jsx(X,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium",children:ke.subject}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Ticket #",ke.id]})]}),e.jsx(_e,{variant:ke.status==="open"?"destructive":"default",children:ke.status}),e.jsx(_e,{variant:ke.priority==="high"?"destructive":"secondary",children:ke.priority})]}),e.jsxs("div",{className:"text-right text-sm text-muted-foreground",children:[e.jsxs("p",{children:["Assigned to: ",ke.agent]}),e.jsxs("p",{children:["Last update: ",ke.lastUpdate.toLocaleDateString()]})]})]})})},ke.id))})]}),e.jsx(mt,{value:"contact",className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(K,{children:[e.jsx(pe,{children:e.jsx(ge,{children:"Contact Information"})}),e.jsxs(X,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx($s,{className:"h-5 w-5 text-blue-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Phone Support"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"+254 758 175 275"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Available 24/7"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Gs,{className:"h-5 w-5 text-green-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Email Support"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"ominbizsolutions@gmail.com"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Response within 2 hours"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ka,{className:"h-5 w-5 text-purple-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Video Support"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Schedule a call"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Mon-Fri 9AM-6PM EST"})]})]})]})]}),e.jsxs(K,{children:[e.jsxs(pe,{children:[e.jsx(ge,{children:"Quick Contact"}),e.jsx(lt,{children:"Send us a message and we'll create a ticket for you"})]}),e.jsx(X,{children:e.jsxs("form",{onSubmit:Zt,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(ae,{htmlFor:"contact-subject",children:"Subject *"}),e.jsx(fe,{id:"contact-subject",name:"subject",placeholder:"How can we help?",required:!0})]}),e.jsxs("div",{children:[e.jsx(ae,{htmlFor:"contact-message",children:"Message *"}),e.jsx(Ts,{id:"contact-message",name:"message",placeholder:"Describe your issue...",rows:4,required:!0})]}),e.jsxs(R,{type:"submit",className:"w-full",children:[e.jsx(Ma,{className:"h-4 w-4 mr-2"}),"Send Message"]})]})})]})]})})]}),B&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-95 flex items-center justify-center z-50",children:e.jsxs("div",{className:"w-full max-w-6xl mx-4 h-[90vh] flex flex-col",children:[e.jsxs("div",{className:"bg-gray-900 text-white p-4 rounded-t-lg flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"relative",children:[e.jsxs(fr,{className:"h-10 w-10",children:[e.jsx(Rn,{src:N?.avatar}),e.jsx(xr,{children:N?.name.split(" ").map(ke=>ke[0]).join("")})]}),e.jsx("div",{className:"absolute -bottom-1 -right-1 w-3 h-3 rounded-full bg-green-500 border-2 border-gray-900 animate-pulse"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:N?.name}),e.jsx("p",{className:"text-xs text-gray-400",children:"In call"})]})]}),e.jsxs(R,{variant:"destructive",onClick:As,children:[e.jsx(yr,{className:"h-4 w-4 mr-2"}),"End Call"]})]}),e.jsxs("div",{className:"flex-1 relative bg-gray-800 rounded-b-lg overflow-hidden",children:[e.jsx("video",{ref:vt,autoPlay:!0,playsInline:!0,className:"w-full h-full object-cover"}),!I&&e.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center bg-gray-800",children:[e.jsxs(fr,{className:"h-32 w-32 mb-4",children:[e.jsx(Rn,{src:N?.avatar}),e.jsx(xr,{className:"text-4xl",children:N?.name.split(" ").map(ke=>ke[0]).join("")})]}),e.jsxs("p",{className:"text-white text-lg",children:["Connecting to ",N?.name,"..."]}),e.jsxs("div",{className:"flex gap-2 mt-4",children:[e.jsx("div",{className:"w-2 h-2 bg-white rounded-full animate-bounce"}),e.jsx("div",{className:"w-2 h-2 bg-white rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),e.jsx("div",{className:"w-2 h-2 bg-white rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})]}),e.jsxs("div",{className:"absolute bottom-4 right-4 w-64 h-48 bg-gray-900 rounded-lg overflow-hidden border-2 border-gray-600 shadow-2xl",children:[e.jsx("video",{ref:Qe,autoPlay:!0,playsInline:!0,muted:!0,className:"w-full h-full object-cover"}),e.jsx("div",{className:"absolute bottom-2 left-2 bg-black bg-opacity-70 px-2 py-1 rounded text-xs text-white",children:"You"}),!oe&&e.jsx("div",{className:"absolute inset-0 bg-gray-900 flex items-center justify-center",children:e.jsx(ug,{className:"h-12 w-12 text-gray-500"})})]}),e.jsxs("div",{className:"absolute bottom-4 left-1/2 transform -translate-x-1/2 flex items-center gap-3 bg-gray-900 bg-opacity-90 px-6 py-3 rounded-full",children:[e.jsx(R,{variant:Me?"secondary":"destructive",size:"icon",className:"rounded-full w-12 h-12",onClick:sa,children:Me?e.jsx(lf,{className:"h-5 w-5"}):e.jsx(nf,{className:"h-5 w-5"})}),e.jsx(R,{variant:oe?"secondary":"destructive",size:"icon",className:"rounded-full w-12 h-12",onClick:_t,children:oe?e.jsx(ka,{className:"h-5 w-5"}):e.jsx(ug,{className:"h-5 w-5"})}),e.jsx(R,{variant:"destructive",size:"icon",className:"rounded-full w-14 h-14",onClick:As,children:e.jsx($s,{className:"h-6 w-6 rotate-135"})})]}),e.jsxs("div",{className:"absolute top-4 left-4 flex items-center gap-2 bg-black bg-opacity-70 px-3 py-2 rounded-full",children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${a?"bg-green-500 animate-pulse":"bg-red-500"}`}),e.jsx("span",{className:"text-xs text-white",children:a?"Connected":"Connecting..."})]})]})]})})]})},sG=()=>{const[t,s]=v.useState([]),[a,r]=v.useState(!0),[i,o]=v.useState(!1),[c,u]=v.useState(null),{socket:f,connected:x}=da(),[h,p]=v.useState({type:"feedback",category:"general",subject:"",message:"",name:"",email:"",phone:"",priority:"normal",contactMethod:"email"});v.useEffect(()=>{g()},[]),v.useEffect(()=>{if(!(!f||!x))return f.on("feedback_created",T=>{s(_=>[T.feedback,..._]),D.success("New feedback received")}),f.on("feedback_updated",T=>{s(_=>_.map(G=>G._id===T.feedback._id?T.feedback:G)),c?._id===T.feedback._id&&u(T.feedback)}),()=>{f.off("feedback_created"),f.off("feedback_updated")}},[f,x,c]);const g=async()=>{try{r(!0);const T=localStorage.getItem("token"),{data:_}=await ye.get("/feedback",{headers:{Authorization:`Bearer ${T}`}});s(_.feedback||[])}catch(T){console.error("Error fetching feedback:",T),D.error("Failed to load feedback")}finally{r(!1)}},b=async T=>{if(T.preventDefault(),!h.subject||!h.message||!h.email){D.error("Please fill in all required fields");return}try{const _=localStorage.getItem("token"),{data:G}=await ye.post("/feedback",h,{headers:{Authorization:`Bearer ${_}`}});D.success("Feedback submitted successfully!"),s(U=>[G.feedback,...U]),o(!1),y()}catch(_){D.error("Failed to submit feedback"),console.error("Error:",_)}},N=async(T,_)=>{try{const G=localStorage.getItem("token");await ye.post(`/feedback/${T}/response`,{response:_,status:"resolved"},{headers:{Authorization:`Bearer ${G}`}}),D.success("Response sent successfully"),g()}catch{D.error("Failed to send response")}},y=()=>{p({type:"feedback",category:"general",subject:"",message:"",name:"",email:"",phone:"",priority:"normal",contactMethod:"email"})},S=T=>{const _={pending:"bg-yellow-100 text-yellow-800",in_progress:"bg-blue-100 text-blue-800",resolved:"bg-green-100 text-green-800",closed:"bg-gray-100 text-gray-800"};return e.jsx(_e,{className:_[T]||_.pending,children:T})},C=T=>{switch(T){case"complaint":return e.jsx(Cs,{className:"h-5 w-5 text-red-600"});case"feedback":return e.jsx(vi,{className:"h-5 w-5 text-blue-600"});case"suggestion":return e.jsx(Ao,{className:"h-5 w-5 text-green-600"});case"question":return e.jsx(ya,{className:"h-5 w-5 text-purple-600"});default:return e.jsx(vi,{className:"h-5 w-5"})}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Support & Feedback System"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage client feedback, complaints, and support requests"})]}),e.jsxs(R,{onClick:()=>o(!0),children:[e.jsx(Ma,{className:"mr-2 h-4 w-4"}),"New Feedback"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx(K,{children:e.jsx(X,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Total"}),e.jsx("p",{className:"text-2xl font-bold",children:t.length})]}),e.jsx(vi,{className:"h-8 w-8 text-blue-600"})]})})}),e.jsx(K,{children:e.jsx(X,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Pending"}),e.jsx("p",{className:"text-2xl font-bold",children:t.filter(T=>T.status==="pending").length})]}),e.jsx(Qt,{className:"h-8 w-8 text-yellow-600"})]})})}),e.jsx(K,{children:e.jsx(X,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"In Progress"}),e.jsx("p",{className:"text-2xl font-bold",children:t.filter(T=>T.status==="in_progress").length})]}),e.jsx(Cs,{className:"h-8 w-8 text-blue-600"})]})})}),e.jsx(K,{children:e.jsx(X,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Resolved"}),e.jsx("p",{className:"text-2xl font-bold",children:t.filter(T=>T.status==="resolved").length})]}),e.jsx(os,{className:"h-8 w-8 text-green-600"})]})})})]}),e.jsxs(K,{children:[e.jsxs(pe,{children:[e.jsx(ge,{children:"Feedback & Support Requests"}),e.jsxs(lt,{children:["Real-time updates • ",x?"🟢 Connected":"🔴 Disconnected"]})]}),e.jsx(X,{children:e.jsxs(pa,{defaultValue:"all",children:[e.jsxs(ba,{children:[e.jsx(ut,{value:"all",children:"All"}),e.jsx(ut,{value:"feedback",children:"Feedback"}),e.jsx(ut,{value:"complaint",children:"Complaints"}),e.jsx(ut,{value:"suggestion",children:"Suggestions"})]}),e.jsx(mt,{value:"all",className:"space-y-4",children:t.map(T=>e.jsx(K,{className:"cursor-pointer hover:shadow-md transition-shadow",onClick:()=>u(T),children:e.jsx(X,{className:"p-4",children:e.jsxs("div",{className:"flex items-start gap-4",children:[C(T.type),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h3",{className:"font-semibold",children:T.subject}),S(T.status)]}),e.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2 mb-2",children:T.message}),e.jsxs("div",{className:"flex items-center gap-4 text-xs text-muted-foreground",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(na,{className:"h-3 w-3"}),T.name||T.email]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Gs,{className:"h-3 w-3"}),T.email]}),T.phone&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx($s,{className:"h-3 w-3"}),T.phone]}),e.jsx("span",{children:new Date(T.createdAt).toLocaleDateString()})]})]})]})})},T._id))})]})})]}),e.jsx(Ft,{open:i,onOpenChange:o,children:e.jsxs(It,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsx(Lt,{children:e.jsx(Bt,{children:"Submit Feedback"})}),e.jsxs("form",{onSubmit:b,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(ae,{children:"Type *"}),e.jsxs(Ot,{value:h.type,onValueChange:T=>p({...h,type:T}),children:[e.jsx(Pt,{children:e.jsx(Rt,{})}),e.jsxs(Mt,{children:[e.jsx(Ee,{value:"feedback",children:"Feedback"}),e.jsx(Ee,{value:"complaint",children:"Complaint"}),e.jsx(Ee,{value:"suggestion",children:"Suggestion"}),e.jsx(Ee,{value:"question",children:"Question"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ae,{children:"Priority"}),e.jsxs(Ot,{value:h.priority,onValueChange:T=>p({...h,priority:T}),children:[e.jsx(Pt,{children:e.jsx(Rt,{})}),e.jsxs(Mt,{children:[e.jsx(Ee,{value:"low",children:"Low"}),e.jsx(Ee,{value:"normal",children:"Normal"}),e.jsx(Ee,{value:"high",children:"High"}),e.jsx(Ee,{value:"urgent",children:"Urgent"})]})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ae,{children:"Subject *"}),e.jsx(fe,{value:h.subject,onChange:T=>p({...h,subject:T.target.value}),placeholder:"Brief description of your feedback",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ae,{children:"Message *"}),e.jsx(Ts,{value:h.message,onChange:T=>p({...h,message:T.target.value}),placeholder:"Detailed message...",rows:5,required:!0})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(ae,{children:"Name"}),e.jsx(fe,{value:h.name,onChange:T=>p({...h,name:T.target.value}),placeholder:"Your name"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ae,{children:"Email *"}),e.jsx(fe,{type:"email",value:h.email,onChange:T=>p({...h,email:T.target.value}),placeholder:"your@email.com",required:!0})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ae,{children:"Phone (Optional)"}),e.jsx(fe,{type:"tel",value:h.phone,onChange:T=>p({...h,phone:T.target.value}),placeholder:"+254 XXX XXX XXX"})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(R,{type:"button",variant:"outline",onClick:()=>o(!1),children:"Cancel"}),e.jsxs(R,{type:"submit",children:[e.jsx(Ma,{className:"mr-2 h-4 w-4"}),"Submit Feedback"]})]})]})]})}),c&&e.jsx(Ft,{open:!!c,onOpenChange:()=>u(null),children:e.jsxs(It,{className:"max-w-3xl",children:[e.jsx(Lt,{children:e.jsxs(Bt,{className:"flex items-center gap-2",children:[C(c.type),c.subject]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[S(c.status),e.jsxs(_e,{variant:"outline",children:[c.priority," priority"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-semibold",children:"Message:"}),e.jsx("p",{className:"text-muted-foreground",children:c.message})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 p-4 bg-muted rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Contact Information:"}),e.jsx("p",{className:"text-sm",children:c.name}),e.jsx("p",{className:"text-sm",children:c.email}),c.phone&&e.jsx("p",{className:"text-sm",children:c.phone})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Submitted:"}),e.jsx("p",{className:"text-sm",children:new Date(c.createdAt).toLocaleString()})]})]}),c.response&&e.jsxs("div",{className:"p-4 bg-green-50 rounded-lg",children:[e.jsx("h4",{className:"font-semibold text-green-800 mb-2",children:"Response:"}),e.jsx("p",{className:"text-sm text-green-700",children:c.response})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(R,{variant:"outline",onClick:()=>u(null),children:"Close"}),c.status!=="resolved"&&e.jsx(R,{onClick:()=>{const T=prompt("Enter your response:");T&&(N(c._id,T),u(null))},children:"Send Response"})]})]})]})})]})},aG=()=>{const[t,s]=v.useState(""),[a,r]=v.useState("discussions"),i=[{id:1,title:"How to integrate payment gateway?",author:"John Doe",avatar:"JD",replies:12,likes:24,status:"answered",category:"Integration",timestamp:"2 hours ago"},{id:2,title:"Best practices for inventory management",author:"Jane Smith",avatar:"JS",replies:8,likes:15,status:"open",category:"Best Practices",timestamp:"5 hours ago"},{id:3,title:"Video call feature not working",author:"Mike Johnson",avatar:"MJ",replies:5,likes:7,status:"resolved",category:"Technical",timestamp:"1 day ago"}],o=[{name:"Sarah Wilson",posts:145,reputation:2840,avatar:"SW"},{name:"David Brown",posts:128,reputation:2350,avatar:"DB"},{name:"Emma Davis",posts:98,reputation:1920,avatar:"ED"}],c=[{title:"Getting Started Guide",type:"Documentation",icon:hi,link:"#",description:"Complete guide to get started with OmniBiz"},{title:"Video Tutorials",type:"Video",icon:ka,link:"#",description:"Step-by-step video tutorials"},{title:"GitHub Repository",type:"Code",icon:zc,link:"https://github.com/omnibiz",description:"Contribute to our open-source project"},{title:"API Documentation",type:"Technical",icon:hi,link:"#",description:"Complete API reference and examples"}],u=[{name:"GitHub",icon:zc,link:"https://github.com/omnibiz-solutions",color:"text-gray-800"},{name:"Twitter",icon:yv,link:"https://twitter.com/omnibiz_solutions",color:"text-blue-500"},{name:"LinkedIn",icon:jv,link:"https://linkedin.com/company/omnibiz-solutions",color:"text-blue-700"},{name:"Email",icon:Gs,link:"mailto:ominbizsolutions@gmail.com",color:"text-red-600"}],f=x=>{const h={answered:"bg-green-100 text-green-800",open:"bg-blue-100 text-blue-800",resolved:"bg-purple-100 text-purple-800"};return e.jsx(_e,{className:h[x],children:x})};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row items-start md:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold",children:"Community Support"}),e.jsx("p",{className:"text-muted-foreground",children:"Connect with other users, share knowledge, and get help"})]}),e.jsxs(R,{children:[e.jsx(Zs,{className:"mr-2 h-4 w-4"}),"Start Discussion"]})]}),e.jsx(K,{children:e.jsx(X,{className:"pt-6",children:e.jsxs("div",{className:"relative",children:[e.jsx(ia,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),e.jsx(fe,{placeholder:"Search discussions, documentation, and more...",className:"pl-10",value:t,onChange:x=>s(x.target.value)})]})})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx(K,{children:e.jsx(X,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Active Users"}),e.jsx("p",{className:"text-2xl font-bold",children:"1,234"})]}),e.jsx(Xt,{className:"h-8 w-8 text-blue-600"})]})})}),e.jsx(K,{children:e.jsx(X,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Discussions"}),e.jsx("p",{className:"text-2xl font-bold",children:"892"})]}),e.jsx(vi,{className:"h-8 w-8 text-green-600"})]})})}),e.jsx(K,{children:e.jsx(X,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Resources"}),e.jsx("p",{className:"text-2xl font-bold",children:"156"})]}),e.jsx(hi,{className:"h-8 w-8 text-purple-600"})]})})}),e.jsx(K,{children:e.jsx(X,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Contributors"}),e.jsx("p",{className:"text-2xl font-bold",children:"342"})]}),e.jsx(vv,{className:"h-8 w-8 text-orange-600"})]})})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"lg:col-span-2 space-y-6",children:e.jsxs(K,{children:[e.jsxs(pe,{children:[e.jsx(ge,{children:"Community Discussions"}),e.jsx(lt,{children:"Join the conversation and help others"})]}),e.jsx(X,{children:e.jsxs(pa,{value:a,onValueChange:r,children:[e.jsxs(ba,{className:"grid w-full grid-cols-3",children:[e.jsx(ut,{value:"discussions",children:"Discussions"}),e.jsx(ut,{value:"resources",children:"Resources"}),e.jsx(ut,{value:"videos",children:"Videos"})]}),e.jsx(mt,{value:"discussions",className:"space-y-4",children:i.map(x=>e.jsx(K,{className:"hover:shadow-md transition-shadow cursor-pointer",children:e.jsx(X,{className:"p-4",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx(fr,{children:e.jsx(xr,{children:x.avatar})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold hover:text-primary",children:x.title}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["by ",x.author," • ",x.timestamp]})]}),f(x.status)]}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[e.jsx(_e,{variant:"outline",children:x.category}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Zs,{className:"h-3 w-3"}),x.replies," replies"]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Ao,{className:"h-3 w-3"}),x.likes," likes"]})]})]})]})})},x.id))}),e.jsx(mt,{value:"resources",className:"space-y-4",children:c.map((x,h)=>{const p=x.icon;return e.jsx(K,{className:"hover:shadow-md transition-shadow cursor-pointer",children:e.jsx(X,{className:"p-4",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"p-2 bg-primary/10 rounded-lg",children:e.jsx(p,{className:"h-6 w-6 text-primary"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h4",{className:"font-semibold",children:x.title}),e.jsx(Ol,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:x.description}),e.jsx(_e,{variant:"outline",className:"mt-2",children:x.type})]})]})})},h)})}),e.jsx(mt,{value:"videos",className:"space-y-4",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[1,2,3,4].map(x=>e.jsxs(K,{className:"overflow-hidden",children:[e.jsx("div",{className:"aspect-video bg-gradient-to-br from-primary/20 to-secondary/20 flex items-center justify-center",children:e.jsx(ka,{className:"h-12 w-12 text-primary"})}),e.jsxs(X,{className:"p-4",children:[e.jsxs("h4",{className:"font-semibold mb-1",children:["Video Tutorial ",x]}),e.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Learn how to use OmniBiz effectively"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-xs text-muted-foreground",children:"12:34"}),e.jsx(R,{size:"sm",variant:"ghost",children:"Watch"})]})]})]},x))})})]})})]})}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(K,{children:[e.jsx(pe,{children:e.jsx(ge,{className:"text-lg",children:"Top Contributors"})}),e.jsx(X,{className:"space-y-4",children:o.map((x,h)=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(fr,{children:e.jsx(xr,{children:x.avatar})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-sm",children:x.name}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[x.posts," posts • ",x.reputation," rep"]})]}),e.jsx(Ja,{className:"h-4 w-4 text-yellow-500"})]},h))})]}),e.jsxs(K,{children:[e.jsx(pe,{children:e.jsx(ge,{className:"text-lg",children:"Connect With Us"})}),e.jsx(X,{className:"space-y-3",children:u.map((x,h)=>{const p=x.icon;return e.jsxs(R,{variant:"outline",className:"w-full justify-start",onClick:()=>window.open(x.link,"_blank"),children:[e.jsx(p,{className:`mr-2 h-4 w-4 ${x.color}`}),x.name]},h)})})]}),e.jsxs(K,{children:[e.jsx(pe,{children:e.jsx(ge,{className:"text-lg",children:"Quick Actions"})}),e.jsxs(X,{className:"space-y-2",children:[e.jsxs(R,{variant:"outline",className:"w-full justify-start",children:[e.jsx(Zs,{className:"mr-2 h-4 w-4"}),"Ask a Question"]}),e.jsxs(R,{variant:"outline",className:"w-full justify-start",children:[e.jsx(hi,{className:"mr-2 h-4 w-4"}),"Read Documentation"]}),e.jsxs(R,{variant:"outline",className:"w-full justify-start",children:[e.jsx(zc,{className:"mr-2 h-4 w-4"}),"View on GitHub"]})]})]})]})]})]})},rG=()=>{const[t,s]=v.useState(""),[a,r]=v.useState(null),[i,o]=v.useState("all"),c=[{id:"all",name:"All Videos",icon:ka,count:24},{id:"getting-started",name:"Getting Started",icon:va,count:8},{id:"features",name:"Features",icon:Ja,count:12},{id:"integration",name:"Integration",icon:$S,count:4}],u=[{id:1,title:"Getting Started with OmniBiz",description:"Complete walkthrough of OmniBiz platform setup and configuration",thumbnail:"https://via.placeholder.com/640x360?text=Getting+Started",duration:"12:34",views:1234,likes:98,category:"getting-started",level:"Beginner",videoUrl:"https://www.youtube.com/embed/dQw4w9WgXcQ",tags:["setup","basics","tutorial"],publishedAt:"2024-01-15"},{id:2,title:"Inventory Management Tutorial",description:"Learn how to effectively manage your inventory with real-time tracking",thumbnail:"https://via.placeholder.com/640x360?text=Inventory+Management",duration:"18:45",views:2456,likes:156,category:"features",level:"Intermediate",videoUrl:"https://www.youtube.com/embed/dQw4w9WgXcQ",tags:["inventory","products","management"],publishedAt:"2024-01-20"},{id:3,title:"Setting Up Payment Integration",description:"Step-by-step guide to integrate payment gateways",thumbnail:"https://via.placeholder.com/640x360?text=Payment+Setup",duration:"15:20",views:3421,likes:234,category:"integration",level:"Advanced",videoUrl:"https://www.youtube.com/embed/dQw4w9WgXcQ",tags:["payments","integration","api"],publishedAt:"2024-02-01"},{id:4,title:"Client Storefront Customization",description:"Customize your client-facing storefront with themes and branding",thumbnail:"https://via.placeholder.com/640x360?text=Storefront+Custom",duration:"10:15",views:1876,likes:142,category:"features",level:"Intermediate",videoUrl:"https://www.youtube.com/embed/dQw4w9WgXcQ",tags:["storefront","customization","branding"],publishedAt:"2024-02-05"},{id:5,title:"Advanced Analytics Dashboard",description:"Master the analytics dashboard and generate insightful reports",thumbnail:"https://via.placeholder.com/640x360?text=Analytics",duration:"22:10",views:2987,likes:198,category:"features",level:"Advanced",videoUrl:"https://www.youtube.com/embed/dQw4w9WgXcQ",tags:["analytics","reports","insights"],publishedAt:"2024-02-10"},{id:6,title:"Service Booking System",description:"Set up and manage service bookings with calendar integration",thumbnail:"https://via.placeholder.com/640x360?text=Booking+System",duration:"16:30",views:2145,likes:167,category:"features",level:"Intermediate",videoUrl:"https://www.youtube.com/embed/dQw4w9WgXcQ",tags:["services","bookings","appointments"],publishedAt:"2024-02-12"},{id:7,title:"Real-time Notifications Setup",description:"Configure real-time notifications for orders, bookings, and updates",thumbnail:"https://via.placeholder.com/640x360?text=Notifications",duration:"08:45",views:1654,likes:123,category:"features",level:"Beginner",videoUrl:"https://www.youtube.com/embed/dQw4w9WgXcQ",tags:["notifications","realtime","setup"],publishedAt:"2024-02-15"},{id:8,title:"API Integration Guide",description:"Complete guide to integrating external services via API",thumbnail:"https://via.placeholder.com/640x360?text=API+Integration",duration:"25:00",views:4321,likes:289,category:"integration",level:"Advanced",videoUrl:"https://www.youtube.com/embed/dQw4w9WgXcQ",tags:["api","integration","development"],publishedAt:"2024-02-18"}],f=[{id:1,title:"Quick Start Guide",description:"5-minute guide to get started",duration:"5:00",icon:va},{id:2,title:"Security Best Practices",description:"Secure your business data",duration:"12:00",icon:ta},{id:3,title:"Team Collaboration",description:"Work efficiently with your team",duration:"10:00",icon:Xt},{id:4,title:"Sales Optimization",description:"Boost your sales with analytics",duration:"15:00",icon:Is}],x=u.filter(p=>{const g=p.title.toLowerCase().includes(t.toLowerCase())||p.description.toLowerCase().includes(t.toLowerCase()),b=i==="all"||p.category===i;return g&&b}),h=p=>{const g={Beginner:"bg-green-100 text-green-800",Intermediate:"bg-yellow-100 text-yellow-800",Advanced:"bg-red-100 text-red-800"};return e.jsx(_e,{className:g[p],children:p})};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row items-start md:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold",children:"Video Tutorials & Demos"}),e.jsx("p",{className:"text-muted-foreground",children:"Learn OmniBiz with step-by-step video guides"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(R,{variant:"outline",children:[e.jsx(Pa,{className:"mr-2 h-4 w-4"}),"Resources"]}),e.jsxs(R,{children:[e.jsx(hi,{className:"mr-2 h-4 w-4"}),"Documentation"]})]})]}),e.jsx(K,{children:e.jsx(X,{className:"pt-6",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(ia,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),e.jsx(fe,{placeholder:"Search videos...",className:"pl-10",value:t,onChange:p=>s(p.target.value)})]}),e.jsxs(R,{variant:"outline",children:[e.jsx(al,{className:"mr-2 h-4 w-4"}),"Filter"]})]})})}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:c.map(p=>{const g=p.icon;return e.jsx(K,{className:`cursor-pointer transition-all hover:shadow-md ${i===p.id?"ring-2 ring-primary":""}`,onClick:()=>o(p.id),children:e.jsx(X,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-primary/10 rounded-lg",children:e.jsx(g,{className:"h-5 w-5 text-primary"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:p.name}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[p.count," videos"]})]})]})})},p.id)})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsxs(K,{children:[e.jsxs(pe,{children:[e.jsx(ge,{children:"Video Library"}),e.jsxs(lt,{children:[x.length," videos available"]})]}),e.jsx(X,{children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:x.map(p=>e.jsxs(K,{className:"overflow-hidden cursor-pointer hover:shadow-lg transition-shadow",onClick:()=>r(p),children:[e.jsxs("div",{className:"relative aspect-video bg-gradient-to-br from-primary/20 to-secondary/20",children:[e.jsx("div",{className:"absolute inset-0 flex items-center justify-center group",children:e.jsx("div",{className:"bg-black/60 rounded-full p-4 group-hover:scale-110 transition-transform",children:e.jsx(Uc,{className:"h-8 w-8 text-white"})})}),e.jsx("div",{className:"absolute bottom-2 right-2 bg-black/80 text-white px-2 py-1 rounded text-xs",children:p.duration}),h(p.level)]}),e.jsxs(X,{className:"p-4",children:[e.jsx("h4",{className:"font-semibold mb-2 line-clamp-2",children:p.title}),e.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2 mb-3",children:p.description}),e.jsxs("div",{className:"flex items-center gap-4 text-xs text-muted-foreground",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(la,{className:"h-3 w-3"}),p.views]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Ao,{className:"h-3 w-3"}),p.likes]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Qt,{className:"h-3 w-3"}),p.duration]})]}),e.jsx("div",{className:"flex gap-2 mt-3",children:p.tags.slice(0,2).map((g,b)=>e.jsx(_e,{variant:"outline",className:"text-xs",children:g},b))})]})]},p.id))})})]})}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(K,{children:[e.jsx(pe,{children:e.jsx(ge,{className:"text-lg",children:"Quick Tutorials"})}),e.jsx(X,{className:"space-y-3",children:f.map(p=>{const g=p.icon;return e.jsx("div",{className:"p-3 border rounded-lg cursor-pointer hover:bg-muted transition-colors",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(g,{className:"h-5 w-5 text-primary mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h5",{className:"font-medium text-sm",children:p.title}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:p.description}),e.jsx("span",{className:"text-xs text-primary mt-1 inline-block",children:p.duration})]})]})},p.id)})})]}),e.jsxs(K,{children:[e.jsx(pe,{children:e.jsx(ge,{className:"text-lg",children:"Most Popular"})}),e.jsx(X,{className:"space-y-3",children:u.slice(0,3).sort((p,g)=>g.views-p.views).map(p=>e.jsxs("div",{className:"flex gap-3 cursor-pointer hover:bg-muted p-2 rounded transition-colors",onClick:()=>r(p),children:[e.jsx("div",{className:"w-20 h-12 bg-gradient-to-br from-primary/20 to-secondary/20 rounded flex items-center justify-center",children:e.jsx(Uc,{className:"h-4 w-4"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium line-clamp-2",children:p.title}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[p.views," views"]})]})]},p.id))})]})]})]}),a&&e.jsx(Ft,{open:!!a,onOpenChange:()=>r(null),children:e.jsxs(It,{className:"max-w-4xl",children:[e.jsx(Lt,{children:e.jsx(Bt,{children:a.title})}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"aspect-video bg-black rounded-lg overflow-hidden",children:e.jsx("iframe",{className:"w-full h-full",src:a.videoUrl,title:a.title,frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[h(a.level),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[a.views," views • ",a.publishedAt]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(R,{variant:"outline",size:"sm",children:[e.jsx(Ao,{className:"h-4 w-4 mr-1"}),a.likes]}),e.jsx(R,{variant:"outline",size:"sm",children:e.jsx(qc,{className:"h-4 w-4"})})]})]}),e.jsx("p",{className:"text-muted-foreground",children:a.description}),e.jsx("div",{className:"flex gap-2",children:a.tags.map((p,g)=>e.jsx(_e,{variant:"secondary",children:p},g))})]})]})]})})]})},nG=()=>{const[t,s]=v.useState("videos"),a=[{title:"Video Tutorials",value:"24+",icon:ka,color:"text-purple-600",bgColor:"bg-purple-100"},{title:"Community Members",value:"1,234",icon:Xt,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"Resources",value:"156",icon:hi,color:"text-green-600",bgColor:"bg-green-100"},{title:"Feedback Received",value:"89",icon:vi,color:"text-orange-600",bgColor:"bg-orange-100"}];return e.jsxs("div",{className:"space-y-6 p-6 max-w-7xl mx-auto",children:[e.jsxs("div",{className:"flex flex-col md:flex-row items-start md:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[e.jsx(hi,{className:"h-8 w-8 text-primary"}),"Learning & Resources Center"]}),e.jsx("p",{className:"text-muted-foreground mt-2",children:"Explore tutorials, join the community, and share your feedback"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(R,{variant:"outline",children:[e.jsx(zc,{className:"mr-2 h-4 w-4"}),"GitHub"]}),e.jsxs(R,{children:[e.jsx(Ja,{className:"mr-2 h-4 w-4"}),"Rate Us"]})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:a.map((r,i)=>{const o=r.icon;return e.jsx(K,{className:"hover:shadow-md transition-shadow",children:e.jsx(X,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:r.title}),e.jsx("p",{className:"text-2xl font-bold mt-1",children:r.value})]}),e.jsx("div",{className:`p-3 rounded-full ${r.bgColor}`,children:e.jsx(o,{className:`h-6 w-6 ${r.color}`})})]})})},i)})}),e.jsxs(K,{className:"shadow-lg",children:[e.jsxs(pe,{children:[e.jsxs(ge,{className:"flex items-center gap-2",children:[e.jsx(Is,{className:"h-5 w-5"}),"Explore Resources"]}),e.jsx(lt,{children:"Learn, connect, and grow with OmniBiz"})]}),e.jsx(X,{children:e.jsxs(pa,{value:t,onValueChange:s,children:[e.jsxs(ba,{className:"grid w-full grid-cols-3",children:[e.jsxs(ut,{value:"videos",className:"gap-2",children:[e.jsx(ka,{className:"h-4 w-4"}),"Video Tutorials"]}),e.jsxs(ut,{value:"community",className:"gap-2",children:[e.jsx(Xt,{className:"h-4 w-4"}),"Community"]}),e.jsxs(ut,{value:"feedback",className:"gap-2",children:[e.jsx(vi,{className:"h-4 w-4"}),"Feedback"]})]}),e.jsx(mt,{value:"videos",className:"mt-6",children:e.jsx(rG,{})}),e.jsx(mt,{value:"community",className:"mt-6",children:e.jsx(aG,{})}),e.jsx(mt,{value:"feedback",className:"mt-6",children:e.jsx(sG,{})})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(K,{className:"hover:shadow-md transition-shadow cursor-pointer",children:e.jsx(X,{className:"pt-6",children:e.jsxs("div",{className:"text-center space-y-3",children:[e.jsx("div",{className:"mx-auto w-12 h-12 bg-purple-100 rounded-full flex items-center justify-center",children:e.jsx(hi,{className:"h-6 w-6 text-purple-600"})}),e.jsx("h3",{className:"font-semibold",children:"Documentation"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Complete guides and API docs"}),e.jsx(_e,{variant:"outline",children:"Updated Daily"})]})})}),e.jsx(K,{className:"hover:shadow-md transition-shadow cursor-pointer",children:e.jsx(X,{className:"pt-6",children:e.jsxs("div",{className:"text-center space-y-3",children:[e.jsx("div",{className:"mx-auto w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsx(Xt,{className:"h-6 w-6 text-blue-600"})}),e.jsx("h3",{className:"font-semibold",children:"Join Community"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Connect with 1,200+ users"}),e.jsx(_e,{variant:"outline",children:"Active Now"})]})})}),e.jsx(K,{className:"hover:shadow-md transition-shadow cursor-pointer",children:e.jsx(X,{className:"pt-6",children:e.jsxs("div",{className:"text-center space-y-3",children:[e.jsx("div",{className:"mx-auto w-12 h-12 bg-green-100 rounded-full flex items-center justify-center",children:e.jsx(vv,{className:"h-6 w-6 text-green-600"})}),e.jsx("h3",{className:"font-semibold",children:"Contribute"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Help improve OmniBiz"}),e.jsx(_e,{variant:"outline",children:"Open Source"})]})})})]}),e.jsx(K,{children:e.jsx(X,{className:"pt-6",children:e.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Stay Connected"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Follow us on social media for updates and tips"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(R,{variant:"outline",size:"icon",children:e.jsx(zc,{className:"h-4 w-4"})}),e.jsx(R,{variant:"outline",size:"icon",children:e.jsx(yv,{className:"h-4 w-4"})}),e.jsx(R,{variant:"outline",size:"icon",children:e.jsx(jv,{className:"h-4 w-4"})}),e.jsx(R,{variant:"outline",size:"icon",children:e.jsx(Gs,{className:"h-4 w-4"})})]})]})})})]})};function iG(){const[t,s]=v.useState([]),[a,r]=v.useState(!0),[i,o]=v.useState(!1),[c,u]=v.useState(null),[f,x]=v.useState([]),[h,p]=v.useState([]),{socket:g,connected:b}=da(),[N,y]=v.useState({name:"",description:"",type:"percentage",value:"",code:"",isActive:!0,isSeasonalPromotion:!1,seasonalDetails:{seasonName:"",bannerImage:"",bannerText:"",priority:0},applicableTo:"all",applicableProducts:[],applicableServices:[],minPurchaseAmount:0,maxDiscountAmount:"",usageLimit:{total:"",perCustomer:1},validFrom:"",validUntil:"",showOnStorefront:!0,showNewArrivalsBadge:!1,customerSegment:"all"});v.useEffect(()=>{S(),C(),T()},[]);const S=async()=>{try{r(!0);const{data:B}=await ye.get("/discounts");s(B.discounts||[])}catch(B){console.error("Error fetching discounts:",B),D.error("Failed to load discounts")}finally{r(!1)}},C=async()=>{try{const B=localStorage.getItem("token"),{data:H}=await ye.get("/products",{headers:{Authorization:`Bearer ${B}`}});x(H||[])}catch(B){console.error("Error fetching products:",B)}},T=async()=>{try{const B=localStorage.getItem("token"),{data:H}=await ye.get("/services",{headers:{Authorization:`Bearer ${B}`}});p(Array.isArray(H)?H:H?.services||[])}catch(B){console.error("Error fetching services:",B)}};v.useEffect(()=>{if(!(!g||!b))return g.on("discount_created",()=>{S(),D.success("New discount created")}),g.on("discount_sync",B=>{B.type==="update"?s(H=>H.map(M=>M._id===B.discount._id?B.discount:M)):B.type==="delete"&&s(H=>H.filter(M=>M._id!==B.discount._id))}),()=>{g.off("discount_created"),g.off("discount_sync")}},[g,b]);const _=(B,H)=>{if(B.includes(".")){const[M,q]=B.split(".");y(L=>({...L,[M]:{...L[M],[q]:H}}))}else y(M=>({...M,[B]:H}))},G=()=>{y({name:"",description:"",type:"percentage",value:"",code:"",isActive:!0,isSeasonalPromotion:!1,seasonalDetails:{seasonName:"",bannerImage:"",bannerText:"",priority:0},applicableTo:"all",applicableProducts:[],applicableServices:[],minPurchaseAmount:0,maxDiscountAmount:"",usageLimit:{total:"",perCustomer:1},validFrom:"",validUntil:"",showOnStorefront:!0,showNewArrivalsBadge:!1,customerSegment:"all"}),u(null)},U=async()=>{try{if(!N.name||!N.value||!N.validFrom||!N.validUntil){D.error("Please fill in all required fields");return}const B={...N,value:parseFloat(N.value),minPurchaseAmount:parseFloat(N.minPurchaseAmount)||0,maxDiscountAmount:N.maxDiscountAmount?parseFloat(N.maxDiscountAmount):void 0,usageLimit:{total:N.usageLimit.total?parseInt(N.usageLimit.total):void 0,perCustomer:parseInt(N.usageLimit.perCustomer)||1}};c?(await ye.put(`/discounts/${c._id}`,B),D.success("Discount updated successfully")):(await ye.post("/discounts",B),D.success("Discount created successfully")),S(),o(!1),G()}catch(B){console.error("Error saving discount:",B),D.error(B.response?.data?.message||"Failed to save discount")}},F=B=>{u(B),y({name:B.name||"",description:B.description||"",type:B.type||"percentage",value:B.value?.toString()||"",code:B.code||"",isActive:B.isActive??!0,isSeasonalPromotion:B.isSeasonalPromotion||!1,seasonalDetails:B.seasonalDetails||{seasonName:"",bannerImage:"",bannerText:"",priority:0},applicableTo:B.applicableTo||"all",minPurchaseAmount:B.minPurchaseAmount||0,maxDiscountAmount:B.maxDiscountAmount?.toString()||"",usageLimit:{total:B.usageLimit?.total?.toString()||"",perCustomer:B.usageLimit?.perCustomer||1},validFrom:B.validFrom?new Date(B.validFrom).toISOString().split("T")[0]:"",validUntil:B.validUntil?new Date(B.validUntil).toISOString().split("T")[0]:"",showOnStorefront:B.showOnStorefront??!0,showNewArrivalsBadge:B.showNewArrivalsBadge||!1,customerSegment:B.customerSegment||"all"}),o(!0)},k=async(B,H)=>{try{await ye.patch(`/discounts/${B}/toggle`),D.success(`Discount ${H?"deactivated":"activated"}`),S()}catch{D.error("Failed to toggle discount status")}},E=async B=>{if(confirm("Are you sure you want to delete this discount?"))try{await ye.delete(`/discounts/${B}`),D.success("Discount deleted successfully"),S()}catch{D.error("Failed to delete discount")}},A={total:t.length,active:t.filter(B=>B.isActive).length,totalRedemptions:t.reduce((B,H)=>B+(H.stats?.redemptions||0),0),totalRevenue:t.reduce((B,H)=>B+(H.stats?.revenue||0),0)};return a?e.jsx("div",{className:"flex items-center justify-center h-96",children:"Loading..."}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Discounts & Promotions"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage discounts and seasonal campaigns"})]}),e.jsxs(Ft,{open:i,onOpenChange:B=>{o(B),B||G()},children:[e.jsx(Na,{asChild:!0,children:e.jsxs(R,{children:[e.jsx(Hs,{className:"mr-2 h-4 w-4"}),"Create Discount"]})}),e.jsxs(It,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsx(Lt,{children:e.jsx(Bt,{children:c?"Edit Discount":"Create New Discount"})}),e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(ae,{children:"Name *"}),e.jsx(fe,{value:N.name,onChange:B=>_("name",B.target.value),placeholder:"e.g., Summer Sale 2024"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(ae,{children:"Description"}),e.jsx(Ts,{value:N.description,onChange:B=>_("description",B.target.value),placeholder:"Discount description..."})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(ae,{children:"Type *"}),e.jsxs(Ot,{value:N.type,onValueChange:B=>_("type",B),children:[e.jsx(Pt,{children:e.jsx(Rt,{})}),e.jsxs(Mt,{children:[e.jsx(Ee,{value:"percentage",children:"Percentage (%)"}),e.jsx(Ee,{value:"fixed",children:"Fixed Amount (KES)"}),e.jsx(Ee,{value:"buy_x_get_y",children:"Buy X Get Y"}),e.jsx(Ee,{value:"seasonal",children:"Seasonal"})]})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(ae,{children:"Value *"}),e.jsx(fe,{type:"number",value:N.value,onChange:B=>_("value",B.target.value),placeholder:N.type==="percentage"?"20":"500"})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(ae,{children:"Discount Code (Optional)"}),e.jsx(fe,{value:N.code,onChange:B=>_("code",B.target.value.toUpperCase()),placeholder:"SUMMER20"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ns,{checked:N.isSeasonalPromotion,onCheckedChange:B=>_("isSeasonalPromotion",B)}),e.jsx(ae,{children:"Seasonal Promotion"})]}),N.isSeasonalPromotion&&e.jsxs("div",{className:"border p-4 rounded space-y-3",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(ae,{children:"Season Name"}),e.jsx(fe,{value:N.seasonalDetails.seasonName,onChange:B=>_("seasonalDetails.seasonName",B.target.value),placeholder:"Black Friday Sale"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(ae,{children:"Banner Image URL"}),e.jsx(fe,{value:N.seasonalDetails.bannerImage,onChange:B=>_("seasonalDetails.bannerImage",B.target.value),placeholder:"https://..."})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(ae,{children:"Banner Text"}),e.jsx(fe,{value:N.seasonalDetails.bannerText,onChange:B=>_("seasonalDetails.bannerText",B.target.value),placeholder:"Up to 50% OFF on all items!"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(ae,{children:"Valid From *"}),e.jsx(fe,{type:"date",value:N.validFrom,onChange:B=>_("validFrom",B.target.value)})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(ae,{children:"Valid Until *"}),e.jsx(fe,{type:"date",value:N.validUntil,onChange:B=>_("validUntil",B.target.value)})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(ae,{children:"Min Purchase Amount"}),e.jsx(fe,{type:"number",value:N.minPurchaseAmount,onChange:B=>_("minPurchaseAmount",B.target.value),placeholder:"0"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(ae,{children:"Max Discount (Optional)"}),e.jsx(fe,{type:"number",value:N.maxDiscountAmount,onChange:B=>_("maxDiscountAmount",B.target.value),placeholder:"No limit"})]})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ns,{checked:N.showOnStorefront,onCheckedChange:B=>_("showOnStorefront",B)}),e.jsx(ae,{children:"Show on Storefront"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ns,{checked:N.isActive,onCheckedChange:B=>_("isActive",B)}),e.jsx(ae,{children:"Active"})]})]})]}),e.jsxs(Rs,{children:[e.jsx(R,{variant:"outline",onClick:()=>o(!1),children:"Cancel"}),e.jsxs(R,{onClick:U,children:[c?"Update":"Create"," Discount"]})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[e.jsxs(K,{children:[e.jsxs(pe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(ge,{className:"text-sm font-medium",children:"Total Discounts"}),e.jsx(Fl,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(X,{children:[e.jsx("div",{className:"text-2xl font-bold",children:A.total}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"All discount campaigns"})]})]}),e.jsxs(K,{children:[e.jsxs(pe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(ge,{className:"text-sm font-medium",children:"Active"}),e.jsx(Fl,{className:"h-4 w-4 text-green-600"})]}),e.jsxs(X,{children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:A.active}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Currently running"})]})]}),e.jsxs(K,{children:[e.jsxs(pe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(ge,{className:"text-sm font-medium",children:"Redemptions"}),e.jsx(Is,{className:"h-4 w-4 text-blue-600"})]}),e.jsxs(X,{children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:A.totalRedemptions}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Times used"})]})]}),e.jsxs(K,{children:[e.jsxs(pe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(ge,{className:"text-sm font-medium",children:"Revenue Impact"}),e.jsx(ea,{className:"h-4 w-4 text-purple-600"})]}),e.jsxs(X,{children:[e.jsxs("div",{className:"text-2xl font-bold text-purple-600",children:["KES ",A.totalRevenue.toLocaleString()]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Generated"})]})]})]}),e.jsxs(K,{children:[e.jsxs(pe,{children:[e.jsx(ge,{children:"All Discounts"}),e.jsxs(lt,{children:["Manage your discount campaigns ",b&&e.jsx(_e,{variant:"outline",className:"ml-2 bg-green-100 text-green-800",children:"● Live"})]})]}),e.jsx(X,{children:e.jsxs(Zn,{children:[e.jsx(Jn,{children:e.jsxs(ma,{children:[e.jsx(wt,{children:"Name"}),e.jsx(wt,{children:"Type"}),e.jsx(wt,{children:"Value"}),e.jsx(wt,{children:"Code"}),e.jsx(wt,{children:"Valid Period"}),e.jsx(wt,{children:"Status"}),e.jsx(wt,{children:"Stats"}),e.jsx(wt,{children:"Actions"})]})}),e.jsx(ei,{children:t.length===0?e.jsx(ma,{children:e.jsx(Nt,{colSpan:8,className:"text-center py-8",children:e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsx(Fl,{className:"h-12 w-12 text-muted-foreground"}),e.jsx("p",{className:"text-muted-foreground",children:"No discounts yet"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Create your first discount campaign"})]})})}):t.map(B=>e.jsxs(ma,{children:[e.jsx(Nt,{children:e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:B.name}),B.isSeasonalPromotion&&e.jsx(_e,{variant:"secondary",className:"mt-1",children:"Seasonal"})]})}),e.jsx(Nt,{className:"capitalize",children:B.type.replace("_"," ")}),e.jsx(Nt,{className:"font-semibold",children:B.type==="percentage"?`${B.value}%`:`KES ${B.value}`}),e.jsx(Nt,{children:B.code?e.jsx(_e,{variant:"outline",children:B.code}):e.jsx("span",{className:"text-muted-foreground",children:"-"})}),e.jsxs(Nt,{className:"text-sm",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(ms,{className:"h-3 w-3"}),new Date(B.validFrom).toLocaleDateString()]}),e.jsxs("div",{className:"text-muted-foreground",children:["to ",new Date(B.validUntil).toLocaleDateString()]})]}),e.jsx(Nt,{children:e.jsx(ns,{checked:B.isActive,onCheckedChange:()=>k(B._id,B.isActive)})}),e.jsx(Nt,{className:"text-sm",children:e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(la,{className:"h-3 w-3"}),B.stats?.views||0," views"]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Is,{className:"h-3 w-3"}),B.stats?.redemptions||0," used"]})]})}),e.jsx(Nt,{children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(R,{variant:"outline",size:"sm",onClick:()=>F(B),children:e.jsx(Qi,{className:"h-3 w-3"})}),e.jsx(R,{variant:"ghost",size:"sm",className:"text-red-600 hover:text-red-700 hover:bg-red-50",onClick:()=>E(B._id),children:e.jsx(fa,{className:"h-3 w-3"})})]})})]},B._id))})]})})]})]})}const lG=()=>{const{socket:t,connected:s}=da(),{theme:a}=ld(),[r,i]=v.useState([]),[o,c]=v.useState(navigator.onLine),[u,f]=v.useState(0),[x,h]=v.useState(0),[p,g]=v.useState(100),[b,N]=v.useState(!1),[y,S]=v.useState(4),[C,T]=v.useState([75]),[_,G]=v.useState(!1),[U,F]=v.useState(!1),[k,E]=v.useState(""),[A,B]=v.useState(0),[H,M]=v.useState(0),[q,L]=v.useState([1e3]),[re,V]=v.useState([5]),[ee,me]=v.useState(!0),[W,se]=v.useState(!0),[Z,I]=v.useState(!1),[Q,O]=v.useState(!1),[te,oe]=v.useState("downloads"),[je,Me]=v.useState(0),[ve,ce]=v.useState(0),[Pe,Qe]=v.useState(0),[vt,xt]=v.useState("4g"),[ht,bt]=v.useState([]),[ot,hs]=v.useState([]),[fs,Ps]=v.useState(""),[ps,As]=v.useState(""),[cs,_t]=v.useState(0),[sa,Te]=v.useState(0),Ne=v.useRef(null),[he,Ue]=v.useState(new Date().toLocaleTimeString()),[st,Ct]=v.useState("ominbiz_Network"),[Dt,Zt]=v.useState("••••••••"),[ts,ke]=v.useState(0),[we,nt]=v.useState(10240),[Ye,pt]=v.useState([75]),[yt,Kt]=v.useState([]),[Jt,Ut]=v.useState([]),[Ia,La]=v.useState(0),nr=v.useRef(null),ys=v.useRef(new Audio),J=v.useRef(null);v.useEffect(()=>{const xe=()=>c(!0),We=()=>c(!1);if(window.addEventListener("online",xe),window.addEventListener("offline",We),"connection"in navigator){const it=navigator.connection||navigator.mozConnection||navigator.webkitConnection,Tt=()=>{it.effectiveType&&xt(it.effectiveType),it.downlink&&f(it.downlink*1024)};Tt(),it.addEventListener("change",Tt)}"getBattery"in navigator&&navigator.getBattery().then(it=>{const Tt=()=>{g(it.level*100),N(it.charging)};Tt(),it.addEventListener("levelchange",Tt),it.addEventListener("chargingchange",Tt)});const Ce=setInterval(()=>{if(performance.memory){const Ze=performance.memory.usedJSHeapSize/performance.memory.jsHeapSizeLimit*100;ce(Ze)}Me(Ze=>Math.min(100,Math.max(0,Ze+(Math.random()-.5)*10))),Qe(Ze=>Math.min(100,Math.max(20,Ze+(Math.random()-.5)*2))),(!("connection"in navigator)||Math.random()>.7)&&S(Ze=>{const $t=Math.random()>.5?1:-1;return Math.min(4,Math.max(0,Ze+$t))}),h(Ze=>{const $t=u*(.1+Math.random()*.2);return Math.max(0,$t)});const it=u/1024,Tt=x/1024;ke(Ze=>Math.min(we,Ze+it+Tt)),Kt(Ze=>[...Ze.slice(-29),u]),Ut(Ze=>[...Ze.slice(-29),x]),La(Math.floor(10+Math.random()*40))},2e3),et=setInterval(()=>{i(it=>it.map(Tt=>{if(Tt.status==="downloading"&&Tt.progress<100){const Ze=Math.min(100,Tt.progress+Math.random()*3),$t=Math.random()*1e3,br=Tt.size*(1-Ze/100),vn=$t>0?$e(br/$t):"00:00:00";return{...Tt,progress:Ze,speed:$t,eta:vn,...Ze>=100&&{status:"completed"}}}return Tt}))},1e3);return()=>{window.removeEventListener("online",xe),window.removeEventListener("offline",We),clearInterval(Ce),clearInterval(et)}},[]),v.useEffect(()=>{if(t)return t.on("download_update",xe=>{i(We=>We.map(Ce=>Ce.id===xe.id?{...Ce,...xe}:Ce))}),t.on("system_notification",xe=>{Oe(xe)}),()=>{t.off("download_update"),t.off("system_notification")}},[t]),v.useEffect(()=>{const xe=ys.current,We=()=>{xe.duration&&(B(xe.currentTime/xe.duration*100),M(xe.duration))},Ce=()=>{F(!1),B(0)};return xe.addEventListener("timeupdate",We),xe.addEventListener("ended",Ce),xe.addEventListener("loadedmetadata",We),()=>{xe.removeEventListener("timeupdate",We),xe.removeEventListener("ended",Ce),xe.removeEventListener("loadedmetadata",We)}},[]),v.useEffect(()=>{ys.current.volume=_?0:C[0]/100},[C,_]),v.useEffect(()=>{const xe=setInterval(()=>{Ue(new Date().toLocaleTimeString())},1e3);return()=>clearInterval(xe)},[]),v.useEffect(()=>{if(ot.length===0)return;const xe=setInterval(()=>{const We=new Date().getTime();ot.forEach(Ce=>{const it=new Date(Ce.scheduledTime).getTime()-We;if(Ce.status==="scheduled"&&it<=5e3&&it>=-5e3){console.log("⏰ Auto-starting scheduled download:",Ce.filename),De(Ce.url),hs(Ze=>Ze.map($t=>$t.id===Ce.id?{...$t,status:"started"}:$t));const Tt={id:Date.now(),title:"Scheduled Download Started",message:`${Ce.filename} is now downloading`,type:"info"};bt(Ze=>[...Ze,Tt]),D.success(`📥 Starting scheduled download: ${Ce.filename}`),setTimeout(()=>{hs(Ze=>Ze.filter($t=>$t.id!==Ce.id))},3e3)}})},5e3);return()=>clearInterval(xe)},[ot]);const De=async(xe,We=null)=>{try{const Ce={id:Date.now(),url:xe,filename:We||xe.split("/").pop()||`file_${Date.now()}`,progress:0,speed:0,size:0,status:"downloading",protocol:xe.includes("magnet:")?"BitTorrent":"HTTP",eta:"Calculating...",startTime:Date.now()};i(et=>[...et,Ce]),D.success(`Download started: ${Ce.filename}`),t&&s&&t.emit("start_download",Ce);try{const et=await fetch(xe,{mode:"cors"});if(!et.ok)throw new Error(`HTTP ${et.status}`);const it=+et.headers.get("Content-Length"),Tt=et.body.getReader(),Ze=[];let $t=0;for(;;){const{done:zr,value:jn}=await Tt.read();if(zr)break;Ze.push(jn),$t+=jn.length;const wr=it?$t/it*100:0,Wo=(Date.now()-Ce.startTime)/1e3,sn=$t/Wo/1024,Ur=it-$t,hm=sn>0?$e(Ur/sn/1024):"00:00:00";i(lx=>lx.map(Yl=>Yl.id===Ce.id?{...Yl,progress:wr,speed:sn,size:it/(1024*1024),eta:hm}:Yl))}const br=new Blob(Ze),vn=window.URL.createObjectURL(br),Br=document.createElement("a");Br.href=vn,Br.download=Ce.filename,document.body.appendChild(Br),Br.click(),document.body.removeChild(Br),window.URL.revokeObjectURL(vn),i(zr=>zr.map(jn=>jn.id===Ce.id?{...jn,status:"completed",progress:100}:jn)),D.success(`Download completed: ${Ce.filename}`),Oe({title:"Download Complete",message:`${Ce.filename} has been downloaded successfully`,type:"success"})}catch(et){console.error("Download error:",et),i(it=>it.map(Tt=>Tt.id===Ce.id?{...Tt,status:"error",progress:0}:Tt)),D.error(`Download failed: ${et.message}`)}}catch(Ce){console.error("Error starting download:",Ce),D.error("Failed to start download")}},Ge=xe=>{i(We=>We.map(Ce=>Ce.id===xe?{...Ce,status:"paused"}:Ce))},gt=xe=>{i(We=>We.map(Ce=>Ce.id===xe?{...Ce,status:"downloading"}:Ce))},jt=xe=>{i(We=>We.filter(Ce=>Ce.id!==xe)),D.info("Download cancelled")},ss=()=>{switch(y){case 0:return e.jsx(Bc,{className:"h-4 w-4 text-red-500"});case 1:return e.jsx(q_,{className:"h-4 w-4 text-red-500"});case 2:return e.jsx(G_,{className:"h-4 w-4 text-yellow-500"});case 3:return e.jsx(W_,{className:"h-4 w-4 text-green-500"});case 4:return e.jsx(H_,{className:"h-4 w-4 text-green-500"});default:return e.jsx(Bc,{className:"h-4 w-4 text-gray-500"})}},ks=()=>p<20?e.jsx(K_,{className:"h-4 w-4 text-red-500"}):e.jsx(Y_,{className:"h-4 w-4 text-green-500"}),Ns=xe=>xe<1024?`${xe.toFixed(1)} KB/s`:`${(xe/1024).toFixed(1)} MB/s`,Y=xe=>xe<1024?`${xe} MB`:`${(xe/1024).toFixed(1)} GB`,de=xe=>{Array.from(xe.target.files).forEach(Ce=>{const et=URL.createObjectURL(Ce),it={id:Date.now()+Math.random(),url:et,filename:Ce.name,progress:100,speed:0,size:Ce.size/(1024*1024),status:"completed",protocol:"Local",eta:"00:00:00"};i(Tt=>[...Tt,it]),D.success(`Added: ${Ce.name}`)})},le=xe=>{const We=xe.target.files[0];if(We){const Ce=URL.createObjectURL(We);ys.current.src=Ce,E(We.name),B(0),D.success(`Loaded: ${We.name}`)}},P=()=>{const xe=ys.current;U?xe.pause():xe.play(),F(!U)},ie=()=>{ys.current.currentTime=Math.min(ys.current.duration,ys.current.currentTime+10)},ue=()=>{ys.current.currentTime=Math.max(0,ys.current.currentTime-10)},Re=xe=>{ys.current.currentTime=xe/100*ys.current.duration},$e=xe=>{if(!xe||isNaN(xe))return"00:00";const We=Math.floor(xe/60),Ce=Math.floor(xe%60);return`${We.toString().padStart(2,"0")}:${Ce.toString().padStart(2,"0")}`},Oe=xe=>{const We={id:Date.now(),timestamp:new Date,...xe};bt(Ce=>[We,...Ce].slice(0,50))},Fe=(xe,We,Ce)=>{const et={id:Date.now(),url:xe,filename:We,scheduledTime:Ce,status:"scheduled"};hs(it=>[...it,et]),D.success(`Download scheduled for ${new Date(Ce).toLocaleString()}`)},Le=()=>{const xe=JSON.stringify(r,null,2),We=new Blob([xe],{type:"application/json"}),Ce=URL.createObjectURL(We),et=document.createElement("a");et.href=Ce,et.download=`download-history-${Date.now()}.json`,et.click(),URL.revokeObjectURL(Ce),D.success("Download history exported")},rt=xe=>{const We=xe.target.files[0];if(We){const Ce=new FileReader;Ce.onload=et=>{try{const it=JSON.parse(et.target.result);i(Tt=>[...Tt,...it]),D.success(`Imported ${it.length} downloads`)}catch{D.error("Invalid file format")}},Ce.readAsText(We)}};return e.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:"DAS - Data Analytics System"}),e.jsx("p",{className:"text-muted-foreground mt-2",children:"Real-Time Network Monitor & Download Manager with Live System Analytics"})]}),e.jsx(K,{className:"mb-6 bg-gradient-to-r from-blue-50 to-purple-50",children:e.jsxs(X,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsx("div",{className:"flex items-center gap-2 transition-all duration-300",children:o?e.jsxs(e.Fragment,{children:[e.jsx(of,{className:"h-4 w-4 text-green-500 animate-pulse"}),e.jsx("span",{className:"text-sm font-medium text-green-700",children:vt.toUpperCase()})]}):e.jsxs(e.Fragment,{children:[e.jsx(Bc,{className:"h-4 w-4 text-red-500 animate-bounce"}),e.jsx("span",{className:"text-sm font-medium text-red-700",children:"Disconnected"})]})}),e.jsxs("div",{className:"flex items-center gap-2 transition-all duration-500",children:[e.jsx("div",{className:"animate-pulse",children:ss()}),e.jsxs("span",{className:"text-sm font-medium transition-colors duration-300",children:["Signal: ",e.jsxs("span",{className:`font-bold ${y>=3?"text-green-600":y>=2?"text-yellow-600":"text-red-600"}`,children:[y,"/4"]})]})]}),e.jsxs("div",{className:"flex items-center gap-2 transition-all duration-300",children:[ks(),e.jsxs("span",{className:`text-sm font-medium ${b?"text-green-600":p<20?"text-red-600":"text-gray-700"}`,children:[p.toFixed(0),"%",b&&e.jsx(va,{className:"inline h-3 w-3 ml-1 text-yellow-500 animate-pulse"})]})]})]}),e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsxs("div",{className:"flex items-center gap-2 transition-all duration-300",children:[e.jsx(Pa,{className:"h-4 w-4 text-blue-500 animate-bounce",style:{animationDuration:u>500?"0.5s":"1s"}}),e.jsxs("span",{className:"text-sm font-mono font-bold text-blue-600",children:["↓ ",Ns(u)]})]}),e.jsxs("div",{className:"flex items-center gap-2 transition-all duration-300",children:[e.jsx(Hi,{className:"h-4 w-4 text-green-500",style:{animation:x>50?"pulse 1s infinite":"none"}}),e.jsxs("span",{className:"text-sm font-mono font-bold text-green-600",children:["↑ ",Ns(x)]})]}),e.jsxs("div",{className:"flex items-center gap-2 transition-all duration-200",children:[_?e.jsx(Wh,{className:"h-4 w-4 text-red-500"}):e.jsx(mu,{className:"h-4 w-4 text-gray-600"}),e.jsxs("span",{className:"text-sm font-medium",children:[C[0],"%"]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium text-gray-600",children:[e.jsx(Qt,{className:"h-4 w-4 animate-spin",style:{animationDuration:"60s"}}),e.jsx("span",{className:"font-mono tabular-nums",children:he})]})]})]}),e.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[e.jsx(Aa,{className:"h-3 w-3 text-blue-500 animate-pulse"}),e.jsxs("span",{className:"text-xs text-gray-500",children:[s?"WebSocket Connected":"Offline Mode"," •"," ",r.filter(xe=>xe.status==="downloading").length," Active Downloads •"," ","CPU: ",je.toFixed(0),"% •"," ","Memory: ",ve.toFixed(0),"%"]})]})]})}),e.jsxs(pa,{value:te,onValueChange:oe,className:"space-y-6",children:[e.jsxs(ba,{className:"grid w-full grid-cols-6 bg-card",children:[e.jsxs(ut,{value:"downloads",className:"data-[state=active]:bg-primary data-[state=active]:text-primary-foreground",children:[e.jsx(Pa,{className:"h-4 w-4 mr-2"}),"Downloads"]}),e.jsxs(ut,{value:"settings",className:"data-[state=active]:bg-primary data-[state=active]:text-primary-foreground",children:[e.jsx(Ea,{className:"h-4 w-4 mr-2"}),"Settings"]}),e.jsxs(ut,{value:"media",className:"data-[state=active]:bg-primary data-[state=active]:text-primary-foreground",children:[e.jsx(p0,{className:"h-4 w-4 mr-2"}),"Media"]}),e.jsxs(ut,{value:"system",className:"data-[state=active]:bg-primary data-[state=active]:text-primary-foreground",children:[e.jsx(zS,{className:"h-4 w-4 mr-2"}),"System"]}),e.jsxs(ut,{value:"schedule",className:"data-[state=active]:bg-primary data-[state=active]:text-primary-foreground",children:[e.jsx(ms,{className:"h-4 w-4 mr-2"}),"Schedule"]}),e.jsxs(ut,{value:"database",className:"data-[state=active]:bg-primary data-[state=active]:text-primary-foreground",children:[e.jsx(vu,{className:"h-4 w-4 mr-2"}),"Database"]})]}),e.jsx(mt,{value:"downloads",className:"space-y-6",children:e.jsxs(K,{className:"border-primary/20",children:[e.jsx(pe,{className:"bg-gradient-to-r from-blue-50 to-cyan-50 dark:from-blue-950 dark:to-cyan-950",children:e.jsxs(ge,{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(Pa,{className:"h-5 w-5 text-primary"}),"Download Manager"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(_e,{variant:"secondary",children:[r.filter(xe=>xe.status==="downloading").length," Active"]}),e.jsxs(_e,{variant:"outline",children:[r.length," Total"]})]})]})}),e.jsxs(X,{className:"space-y-4 pt-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(_o,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(fe,{placeholder:"Enter URL, magnet link, or paste from clipboard...",className:"pl-10 border-primary/30 focus:border-primary",onKeyPress:xe=>{xe.key==="Enter"&&xe.target.value&&(De(xe.target.value),xe.target.value="")}})]}),e.jsx("input",{type:"file",ref:nr,onChange:de,multiple:!0,className:"hidden"}),e.jsxs(R,{onClick:()=>nr.current?.click(),className:"gap-2",children:[e.jsx(Hi,{className:"h-4 w-4"}),"Add Files"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(R,{variant:"outline",size:"sm",onClick:async()=>{try{const xe=await navigator.clipboard.readText();xe&&(xe.startsWith("http")||xe.startsWith("magnet"))?(De(xe),D.success("URL added from clipboard")):D.error("No valid URL in clipboard")}catch{D.error("Could not read clipboard")}},children:[e.jsx(Xc,{className:"h-3 w-3 mr-1"}),"Paste from Clipboard"]}),e.jsxs(R,{variant:"outline",size:"sm",onClick:()=>{const xe=r.filter(We=>We.status==="downloading");if(xe.length===0){D.info("No active downloads");return}xe.forEach(We=>Ge(We.id)),D.success(`Paused ${xe.length} downloads`)},disabled:r.filter(xe=>xe.status==="downloading").length===0,children:[e.jsx(g0,{className:"h-3 w-3 mr-1"}),"Pause All"]}),e.jsxs(R,{variant:"outline",size:"sm",onClick:()=>{const xe=r.filter(We=>We.status==="paused");if(xe.length===0){D.info("No paused downloads");return}xe.forEach(We=>gt(We.id)),D.success(`Resumed ${xe.length} downloads`)},disabled:r.filter(xe=>xe.status==="paused").length===0,children:[e.jsx(Uc,{className:"h-3 w-3 mr-1"}),"Resume All"]})]})]}),e.jsxs("div",{className:"flex items-center gap-2 border-b pb-2",children:[e.jsxs(R,{variant:r.length===r.length?"default":"ghost",size:"sm",onClick:()=>{},children:["All (",r.length,")"]}),e.jsxs(R,{variant:"ghost",size:"sm",children:["Downloading (",r.filter(xe=>xe.status==="downloading").length,")"]}),e.jsxs(R,{variant:"ghost",size:"sm",children:["Completed (",r.filter(xe=>xe.status==="completed").length,")"]})]}),e.jsx(_r,{className:"h-96",children:e.jsxs("div",{className:"space-y-3",children:[r.map(xe=>e.jsxs(K,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ab,{className:"h-5 w-5 text-blue-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-sm",children:xe.filename}),e.jsx("p",{className:"text-xs text-gray-500",children:xe.url})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(_e,{variant:xe.status==="downloading"?"default":"secondary",children:xe.status}),e.jsx(_e,{variant:"outline",children:xe.protocol})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Tr,{value:xe.progress,className:"h-2"}),e.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[e.jsxs("span",{children:[xe.progress.toFixed(1),"% of ",Y(xe.size)]}),e.jsxs("span",{children:[Ns(xe.speed)," • ETA: ",xe.eta]})]})]}),e.jsxs("div",{className:"flex items-center gap-2 mt-3",children:[xe.status==="downloading"?e.jsx(R,{size:"sm",variant:"outline",onClick:()=>Ge(xe.id),children:e.jsx(g0,{className:"h-3 w-3"})}):e.jsx(R,{size:"sm",variant:"outline",onClick:()=>gt(xe.id),children:e.jsx(Uc,{className:"h-3 w-3"})}),e.jsx(R,{size:"sm",variant:"outline",onClick:()=>jt(xe.id),children:e.jsx(yr,{className:"h-3 w-3"})}),e.jsx(R,{size:"sm",variant:"outline",children:e.jsx(is,{className:"h-3 w-3"})})]})]},xe.id)),r.length===0&&e.jsxs("div",{className:"text-center py-12 text-gray-500",children:[e.jsx(Pa,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"No downloads yet. Add a URL or file to get started."})]})]})})]})]})}),e.jsx(mt,{value:"settings",className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(K,{className:"border-primary/20",children:[e.jsx(pe,{className:"bg-gradient-to-r from-yellow-50 to-orange-50 dark:from-yellow-950 dark:to-orange-950",children:e.jsxs(ge,{className:"flex items-center gap-2",children:[e.jsx(va,{className:"h-5 w-5 text-primary"}),"Speed & Connection Limits"]})}),e.jsxs(X,{className:"space-y-6 pt-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("label",{className:"text-sm font-medium",children:"Max Download Speed"}),e.jsxs(_e,{variant:"secondary",children:[q[0]," KB/s"]})]}),e.jsx(fi,{value:q,onValueChange:xe=>{L(xe),D.info(`Speed limit: ${xe[0]} KB/s`)},max:1e4,min:100,step:100,className:"w-full"}),e.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground",children:[e.jsx("span",{children:"100 KB/s"}),e.jsx("span",{children:"10 MB/s"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("label",{className:"text-sm font-medium",children:"Max Connections"}),e.jsxs(_e,{variant:"secondary",children:[re[0]," connections"]})]}),e.jsx(fi,{value:re,onValueChange:xe=>{V(xe),D.info(`Max connections: ${xe[0]}`)},max:20,min:1,step:1,className:"w-full"}),e.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground",children:[e.jsx("span",{children:"1"}),e.jsx("span",{children:"20"})]})]}),e.jsxs(R,{variant:"outline",size:"sm",className:"w-full",onClick:()=>{L([1e3]),V([5]),D.success("Reset to default values")},children:[e.jsx(dg,{className:"h-4 w-4 mr-2"}),"Reset to Defaults"]})]})]}),e.jsxs(K,{className:"border-primary/20",children:[e.jsx(pe,{className:"bg-gradient-to-r from-purple-50 to-pink-50 dark:from-purple-950 dark:to-pink-950",children:e.jsxs(ge,{className:"flex items-center gap-2",children:[e.jsx(Ea,{className:"h-5 w-5 text-primary"}),"Advanced Features"]})}),e.jsxs(X,{className:"space-y-4 pt-6",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border hover:bg-accent transition-colors",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(is,{className:"h-4 w-4 text-primary"}),e.jsx("p",{className:"font-medium",children:"Auto Retry"})]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Automatically retry failed downloads"})]}),e.jsx(ns,{checked:ee,onCheckedChange:xe=>{me(xe),D.info(`Auto retry ${xe?"enabled":"disabled"}`)}})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border hover:bg-accent transition-colors",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(os,{className:"h-4 w-4 text-primary"}),e.jsx("p",{className:"font-medium",children:"File Validation"})]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Verify file integrity after download"})]}),e.jsx(ns,{checked:W,onCheckedChange:xe=>{se(xe),D.info(`File validation ${xe?"enabled":"disabled"}`)}})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border hover:bg-accent transition-colors",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(z_,{className:"h-4 w-4 text-primary"}),e.jsx("p",{className:"font-medium",children:"Compression"})]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Enable compression for transfers"})]}),e.jsx(ns,{checked:Z,onCheckedChange:xe=>{I(xe),D.info(`Compression ${xe?"enabled":"disabled"}`)}})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border hover:bg-accent transition-colors",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(vr,{className:"h-4 w-4 text-primary"}),e.jsx("p",{className:"font-medium",children:"Encryption"})]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Encrypt downloads for security"})]}),e.jsx(ns,{checked:Q,onCheckedChange:xe=>{O(xe),D.info(`Encryption ${xe?"enabled":"disabled"}`)}})]})]})]})]})}),e.jsx(mt,{value:"media",className:"space-y-6",children:e.jsxs(K,{className:"bg-gradient-to-br from-purple-50 to-pink-50 dark:from-purple-950 dark:to-pink-950 border-primary/20",children:[e.jsx(pe,{children:e.jsxs(ge,{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(p0,{className:"h-5 w-5 text-purple-600"}),"Media Player"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"file",ref:J,onChange:le,accept:"audio/*,video/*",className:"hidden"}),e.jsxs(R,{size:"sm",variant:"outline",onClick:()=>J.current?.click(),children:[e.jsx(Hi,{className:"h-4 w-4 mr-2"}),"Load Media"]})]})]})}),e.jsxs(X,{className:"space-y-4",children:[e.jsxs("div",{className:"text-center py-8 bg-white rounded-lg",children:[e.jsxs("div",{className:"w-32 h-32 bg-gradient-to-br from-purple-100 to-pink-100 rounded-full mx-auto mb-4 flex items-center justify-center relative overflow-hidden",children:[U?e.jsx("div",{className:"absolute inset-0 bg-purple-400 opacity-20 animate-ping"}):null,e.jsx(p0,{className:`h-16 w-16 ${U?"text-purple-600 animate-bounce":"text-purple-400"}`})]}),e.jsx("p",{className:"font-bold text-lg text-primary",children:k||"No media selected"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:k?U?"Now Playing":"Paused":'Click "Load Media" to select a file'}),H>0&&e.jsxs("div",{className:"flex items-center justify-center gap-2 mt-2 text-sm text-muted-foreground",children:[e.jsx(Qt,{className:"h-4 w-4"}),e.jsxs("span",{children:[$e(ys.current.currentTime)," / ",$e(H)]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"relative cursor-pointer group",onClick:xe=>{if(H>0){const We=xe.currentTarget.getBoundingClientRect(),Ce=(xe.clientX-We.left)/We.width*100;Re(Ce)}},children:[e.jsx(Tr,{value:A,className:"h-3 cursor-pointer transition-all group-hover:h-4"}),e.jsxs("div",{className:"absolute -top-1 flex justify-between w-full px-1 text-xs text-muted-foreground",children:[e.jsx("span",{children:$e(ys.current.currentTime)}),e.jsx("span",{children:$e(H)})]})]}),e.jsxs("div",{className:"flex items-center justify-center gap-4",children:[e.jsxs(R,{variant:"outline",size:"sm",onClick:ue,disabled:!k,className:"hover:bg-purple-100",children:[e.jsx(U_,{className:"h-4 w-4"}),e.jsx("span",{className:"ml-1 text-xs",children:"10s"})]}),e.jsx(R,{size:"lg",onClick:P,disabled:!k,className:`w-16 h-16 rounded-full ${U?"bg-purple-600 hover:bg-purple-700":"bg-purple-500 hover:bg-purple-600"}`,children:U?e.jsx(g0,{className:"h-6 w-6"}):e.jsx(Uc,{className:"h-6 w-6 ml-1"})}),e.jsxs(R,{variant:"outline",size:"sm",onClick:ie,disabled:!k,className:"hover:bg-purple-100",children:[e.jsx("span",{className:"mr-1 text-xs",children:"10s"}),e.jsx(V_,{className:"h-4 w-4"})]})]}),e.jsxs("div",{className:"flex items-center gap-4 p-4 bg-white rounded-lg",children:[e.jsx(R,{variant:"ghost",size:"sm",onClick:()=>G(!_),className:"hover:bg-purple-100",children:_?e.jsx(Wh,{className:"h-5 w-5 text-destructive"}):e.jsx(mu,{className:"h-5 w-5 text-primary"})}),e.jsx(fi,{value:C,onValueChange:T,max:100,min:0,step:1,className:"flex-1"}),e.jsxs("span",{className:"text-sm font-bold text-primary w-12",children:[C[0],"%"]})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-white rounded-lg",children:[e.jsxs(R,{variant:"outline",size:"sm",onClick:()=>{ys.current.currentTime>0&&(ys.current.currentTime=0,B(0),D.info("Restarted from beginning"))},disabled:!k,children:[e.jsx(dg,{className:"h-4 w-4 mr-2"}),"Restart"]}),e.jsxs(R,{variant:"outline",size:"sm",onClick:()=>{ys.current.playbackRate=ys.current.playbackRate===1?1.5:ys.current.playbackRate===1.5?2:1,D.info(`Speed: ${ys.current.playbackRate}x`)},disabled:!k,children:[e.jsx(va,{className:"h-4 w-4 mr-2"}),ys.current.playbackRate,"x Speed"]}),e.jsxs(R,{variant:"outline",size:"sm",onClick:()=>{E(""),ys.current.src="",F(!1),B(0),D.success("Media cleared")},disabled:!k,children:[e.jsx(yr,{className:"h-4 w-4 mr-2"}),"Clear"]})]})]})]})]})}),e.jsx(mt,{value:"schedule",className:"space-y-6",children:e.jsxs(K,{className:"bg-gradient-to-br from-cyan-50 to-blue-50 dark:from-cyan-950 dark:to-blue-950 border-primary/20",children:[e.jsx(pe,{children:e.jsxs(ge,{className:"flex items-center gap-2",children:[e.jsx(ms,{className:"h-5 w-5 text-primary"}),"Scheduled Downloads"]})}),e.jsx(X,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"p-4 bg-card rounded-lg border-2 border-primary/30",children:[e.jsx("h3",{className:"text-sm font-semibold mb-3 text-primary",children:"Schedule New Download"}),e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-muted-foreground mb-1 block",children:"Download URL *"}),e.jsx(fe,{placeholder:"https://example.com/file.zip",className:"flex-1",value:fs,onChange:xe=>Ps(xe.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-muted-foreground mb-1 block",children:"Schedule Date & Time *"}),e.jsx(fe,{type:"datetime-local",className:"w-full",value:ps,onChange:xe=>As(xe.target.value),min:new Date().toISOString().slice(0,16)})]}),e.jsxs(R,{className:"w-full",onClick:()=>{if(!fs.trim()){D.error("Please enter a URL");return}if(!ps){D.error("Please select date and time");return}if(new Date(ps)<=new Date){D.error("Please select a future date and time");return}const We=fs.split("/").pop()||`scheduled_${Date.now()}`;Fe(fs,We,ps),Ps(""),As("")},disabled:!fs||!ps,children:[e.jsx(Qt,{className:"h-4 w-4 mr-2"}),"Schedule Download"]})]})]}),ot.length===0?e.jsxs("div",{className:"text-center py-12 text-muted-foreground bg-card rounded-lg",children:[e.jsx(ms,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{className:"font-medium",children:"No scheduled downloads"}),e.jsx("p",{className:"text-xs mt-2",children:"Schedule downloads to start automatically at a specific time"})]}):e.jsxs("div",{className:"space-y-2",children:[e.jsxs("h3",{className:"text-sm font-semibold flex items-center gap-2",children:[e.jsx(Fr,{className:"h-4 w-4"}),"Scheduled (",ot.length,")"]}),ot.map(xe=>e.jsx(K,{className:"p-3 hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ab,{className:"h-4 w-4 text-primary"}),e.jsx("p",{className:"font-medium text-sm",children:xe.filename})]}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1 flex items-center gap-1",children:[e.jsx(Qt,{className:"h-3 w-3"}),new Date(xe.scheduledTime).toLocaleString()]}),e.jsx("p",{className:"text-xs text-primary mt-1",children:xe.url})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(_e,{variant:xe.status==="scheduled"?"secondary":"default",children:xe.status}),e.jsx(R,{variant:"ghost",size:"sm",onClick:()=>{hs(We=>We.filter(Ce=>Ce.id!==xe.id)),D.success("Scheduled download removed")},children:e.jsx(fa,{className:"h-4 w-4 text-destructive"})})]})]})},xe.id))]})]})})]})}),e.jsx(mt,{value:"system",className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(K,{className:"bg-gradient-to-br from-blue-50 to-cyan-50 dark:from-blue-950 dark:to-cyan-950 border-primary/20",children:[e.jsx(pe,{children:e.jsxs(ge,{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(of,{className:`h-5 w-5 ${o?"text-green-500 animate-pulse":"text-red-500"}`}),"WiFi Connection"]}),e.jsx(_e,{variant:o?"default":"destructive",className:"animate-pulse",children:o?"Online":"Offline"})]})}),e.jsx(X,{className:"space-y-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium",children:"Network Name:"}),e.jsx("span",{className:"text-sm font-bold text-blue-600",children:st})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium",children:"Security:"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(vr,{className:"h-4 w-4 text-green-600"}),e.jsx("span",{className:"text-sm",children:"WPA2-PSK"})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium",children:"Signal Strength:"}),e.jsxs("div",{className:"flex items-center gap-2",children:[ss(),e.jsx(Tr,{value:y*25,className:"w-24 h-2"}),e.jsxs("span",{className:"text-sm font-bold",children:[y*25,"%"]})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium",children:"Connection Type:"}),e.jsx(_e,{variant:"secondary",className:"font-bold",children:vt.toUpperCase()})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium",children:"IP Address:"}),e.jsxs("span",{className:"text-sm font-mono",children:["192.168.1.",Math.floor(Math.random()*255)]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium",children:"Ping/Latency:"}),e.jsxs("span",{className:`text-sm font-bold ${Ia<20?"text-green-600":Ia<40?"text-yellow-600":"text-red-600"}`,children:[Ia,"ms"]})]})]})})]}),e.jsxs(K,{className:"bg-gradient-to-br from-purple-50 to-pink-50 dark:from-purple-950 dark:to-pink-950 border-primary/20",children:[e.jsx(pe,{children:e.jsxs(ge,{className:"flex items-center gap-2",children:[e.jsx(mu,{className:"h-5 w-5 text-purple-600"}),"System Volume"]})}),e.jsxs(X,{className:"space-y-6",children:[e.jsx("div",{className:"text-center",children:e.jsxs("div",{className:"relative w-32 h-32 mx-auto mb-4",children:[e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsxs("div",{className:"text-4xl font-bold text-purple-600",children:[Ye[0],"%"]})}),e.jsxs("svg",{className:"w-full h-full transform -rotate-90",children:[e.jsx("circle",{cx:"64",cy:"64",r:"56",fill:"none",stroke:"#e5e7eb",strokeWidth:"8"}),e.jsx("circle",{cx:"64",cy:"64",r:"56",fill:"none",stroke:"#9333ea",strokeWidth:"8",strokeDasharray:`${Ye[0]*3.51} 351`,className:"transition-all duration-300"})]})]})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(fi,{value:Ye,onValueChange:xe=>{pt(xe),D.info(`Volume: ${xe[0]}%`)},max:100,min:0,step:1,className:"w-full"}),e.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-600",children:[e.jsx(Wh,{className:"h-4 w-4"}),e.jsx(mu,{className:"h-4 w-4"})]})]})]})]}),e.jsxs(K,{className:"lg:col-span-2 bg-gradient-to-br from-green-50 to-emerald-50 dark:from-green-950 dark:to-emerald-950 border-primary/20",children:[e.jsx(pe,{children:e.jsxs(ge,{className:"flex items-center gap-2",children:[e.jsx(Aa,{className:"h-5 w-5 text-green-600 animate-pulse"}),"Network Speed Monitor (Real-Time)"]})}),e.jsx(X,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"h-48 relative bg-white rounded-lg p-4 border-2 border-green-200 dark:border-green-800",children:[e.jsxs("div",{className:"absolute top-2 left-4 flex gap-4 text-xs",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-3 h-3 bg-blue-500 rounded-full animate-pulse"}),"Download"]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full animate-pulse"}),"Upload"]})]}),e.jsx("div",{className:"h-full flex items-end justify-between gap-1 pt-6",children:yt.map((xe,We)=>e.jsxs("div",{className:"flex-1 flex flex-col items-center gap-1",children:[e.jsx("div",{className:"w-full bg-blue-500 rounded-t transition-all duration-300 hover:bg-blue-600",style:{height:`${Math.min(100,xe/10)}%`}}),e.jsx("div",{className:"w-full bg-green-500 rounded-t transition-all duration-300 hover:bg-green-600",style:{height:`${Math.min(100,Jt[We]/2)}%`}})]},We))})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"p-4 bg-blue-100 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx(Pa,{className:"h-5 w-5 text-blue-600 animate-bounce"}),e.jsx("span",{className:"text-xs text-blue-600 font-medium",children:"Download"})]}),e.jsx("div",{className:"text-2xl font-bold text-blue-700",children:Ns(u)}),e.jsxs("div",{className:"text-xs text-blue-600 mt-1",children:["Peak: ",Ns(Math.max(...yt))]})]}),e.jsxs("div",{className:"p-4 bg-green-100 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx(Hi,{className:"h-5 w-5 text-green-600 animate-bounce"}),e.jsx("span",{className:"text-xs text-green-600 font-medium",children:"Upload"})]}),e.jsx("div",{className:"text-2xl font-bold text-green-700",children:Ns(x)}),e.jsxs("div",{className:"text-xs text-green-600 mt-1",children:["Peak: ",Ns(Math.max(...Jt))]})]})]})]})})]}),e.jsxs(K,{className:"bg-gradient-to-br from-orange-50 to-amber-50 dark:from-orange-950 dark:to-amber-950 border-primary/20",children:[e.jsx(pe,{children:e.jsxs(ge,{className:"flex items-center gap-2",children:[e.jsx($_,{className:"h-5 w-5 text-orange-600"}),"Data Usage"]})}),e.jsxs(X,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium",children:"Used:"}),e.jsxs("span",{className:"text-sm font-bold text-orange-600",children:[(ts/1024).toFixed(2)," GB"]})]}),e.jsx(Tr,{value:ts/we*100,className:"h-3"}),e.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-600",children:[e.jsx("span",{children:"0 GB"}),e.jsxs("span",{children:[(we/1024).toFixed(0)," GB Total"]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[e.jsxs("div",{className:"p-2 bg-white rounded border",children:[e.jsx("div",{className:"text-xs text-gray-600",children:"Downloaded"}),e.jsxs("div",{className:"font-bold text-blue-600",children:[(ts*.7/1024).toFixed(2)," GB"]})]}),e.jsxs("div",{className:"p-2 bg-white rounded border",children:[e.jsx("div",{className:"text-xs text-gray-600",children:"Uploaded"}),e.jsxs("div",{className:"font-bold text-green-600",children:[(ts*.3/1024).toFixed(2)," GB"]})]})]}),e.jsxs(R,{variant:"outline",size:"sm",className:"w-full",onClick:()=>{ke(0),D.success("Data usage reset")},children:[e.jsx(is,{className:"h-4 w-4 mr-2"}),"Reset Usage"]})]})]}),e.jsxs(K,{className:"bg-gradient-to-br from-indigo-50 to-blue-50 dark:from-indigo-950 dark:to-blue-950 border-primary/20",children:[e.jsx(pe,{children:e.jsxs(ge,{className:"flex items-center gap-2",children:[e.jsx(GS,{className:"h-5 w-5 text-indigo-600"}),"System Resources"]})}),e.jsxs(X,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("span",{className:"text-sm font-medium",children:"CPU Usage"}),e.jsxs("span",{className:`text-sm font-bold ${je>80?"text-red-600":je>50?"text-yellow-600":"text-green-600"}`,children:[je.toFixed(0),"%"]})]}),e.jsx(Tr,{value:je,className:"h-2"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("span",{className:"text-sm font-medium",children:"Memory"}),e.jsxs("span",{className:`text-sm font-bold ${ve>80?"text-red-600":ve>50?"text-yellow-600":"text-green-600"}`,children:[ve.toFixed(0),"%"]})]}),e.jsx(Tr,{value:ve,className:"h-2"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("span",{className:"text-sm font-medium",children:"Disk Space"}),e.jsxs("span",{className:`text-sm font-bold ${Pe>80?"text-red-600":Pe>50?"text-yellow-600":"text-green-600"}`,children:[Pe.toFixed(0),"%"]})]}),e.jsx(Tr,{value:Pe,className:"h-2"})]})]}),e.jsx("div",{className:"pt-3 border-t",children:e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Status:"}),e.jsx(_e,{variant:je<70&&ve<70?"default":"destructive",children:je<70&&ve<70?"Optimal":"High Load"})]})})]})]})]})}),e.jsx(mt,{value:"database",className:"space-y-6",children:e.jsxs(K,{className:"bg-gradient-to-br from-slate-50 to-gray-50 dark:from-slate-950 dark:to-gray-950 border-primary/20",children:[e.jsx(pe,{children:e.jsxs(ge,{className:"flex items-center gap-2",children:[e.jsx(vu,{className:"h-5 w-5 text-slate-600"}),"Download History Database"]})}),e.jsxs(X,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[e.jsxs("div",{className:"text-center p-4 bg-blue-50 dark:bg-blue-950 rounded-lg border-2 border-blue-200 dark:border-blue-800 hover:shadow-md transition-shadow",children:[e.jsx(vu,{className:"h-8 w-8 text-blue-600 dark:text-blue-400 mx-auto mb-2 animate-pulse"}),e.jsx("p",{className:"font-medium text-sm text-muted-foreground",children:"Total Downloads"}),e.jsx("p",{className:"text-3xl font-bold text-blue-600 dark:text-blue-400 mt-1",children:r.length+cs}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"All time"})]}),e.jsxs("div",{className:"text-center p-4 bg-green-50 dark:bg-green-950 rounded-lg border-2 border-green-200 dark:border-green-800 hover:shadow-md transition-shadow",children:[e.jsx(os,{className:"h-8 w-8 text-green-600 dark:text-green-400 mx-auto mb-2"}),e.jsx("p",{className:"font-medium text-sm text-muted-foreground",children:"Completed"}),e.jsx("p",{className:"text-3xl font-bold text-green-600 dark:text-green-400 mt-1",children:r.filter(xe=>xe.status==="completed").length+cs}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[(r.filter(xe=>xe.status==="completed").length/Math.max(r.length,1)*100).toFixed(0),"% success rate"]})]}),e.jsxs("div",{className:"text-center p-4 bg-red-50 dark:bg-red-950 rounded-lg border-2 border-red-200 dark:border-red-800 hover:shadow-md transition-shadow",children:[e.jsx(Cs,{className:"h-8 w-8 text-red-600 dark:text-red-400 mx-auto mb-2"}),e.jsx("p",{className:"font-medium text-sm text-muted-foreground",children:"Failed"}),e.jsx("p",{className:"text-3xl font-bold text-red-600 dark:text-red-400 mt-1",children:r.filter(xe=>xe.status==="error").length+sa}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[(r.filter(xe=>xe.status==="error").length/Math.max(r.length,1)*100).toFixed(0),"% error rate"]})]})]}),r.length>0&&e.jsxs("div",{className:"mb-6 p-4 bg-card rounded-lg border",children:[e.jsxs("h3",{className:"text-sm font-semibold mb-3 flex items-center gap-2",children:[e.jsx(Aa,{className:"h-4 w-4 text-primary"}),"Recent Downloads"]}),e.jsx(_r,{className:"h-32",children:e.jsx("div",{className:"space-y-2",children:r.slice(-5).reverse().map(xe=>e.jsxs("div",{className:"flex items-center justify-between text-xs p-2 hover:bg-accent rounded",children:[e.jsx("span",{className:"font-medium truncate flex-1",children:xe.filename}),e.jsx(_e,{variant:xe.status==="completed"?"default":xe.status==="error"?"destructive":"secondary",className:"text-xs",children:xe.status})]},xe.id))})})]}),e.jsxs("div",{className:"flex flex-wrap gap-3",children:[e.jsx("input",{type:"file",ref:Ne,onChange:rt,accept:".json",className:"hidden"}),e.jsxs(R,{variant:"outline",onClick:Le,className:"hover:bg-blue-50",children:[e.jsx(Pa,{className:"h-4 w-4 mr-2"}),"Export History"]}),e.jsxs(R,{variant:"outline",onClick:()=>Ne.current?.click(),className:"hover:bg-green-50",children:[e.jsx(Hi,{className:"h-4 w-4 mr-2"}),"Import History"]}),e.jsxs(R,{variant:"outline",onClick:()=>{_t(xe=>xe+r.filter(We=>We.status==="completed").length),Te(xe=>xe+r.filter(We=>We.status==="error").length),D.success("Database refreshed")},className:"hover:bg-purple-50",children:[e.jsx(is,{className:"h-4 w-4 mr-2"}),"Refresh Database"]}),e.jsxs(R,{variant:"outline",onClick:()=>{if(r.length===0){D.info("No downloads to clear");return}confirm("Are you sure you want to clear all download history?")&&(i([]),_t(0),Te(0),D.success("Download history cleared"))},className:"hover:bg-red-50",children:[e.jsx(fa,{className:"h-4 w-4 mr-2"}),"Clear History"]})]})]})]})})]})]})},oG="2.0.0",cG={version:oG};class dG{constructor(){this.isInitialized=!1,this.updateCheckInterval=null,this.currentVersion=cG.version,this.updateCheckUrl=null,this.checkInterval=parseInt(void 0)||18e5,this.autoUpdate=!1,this.enableUpdateNotifications=!0}start(){return console.log("Update service started"),this.isInitialized=!0,this}stop(){return console.log("Update service stopped"),this.updateCheckInterval&&(clearInterval(this.updateCheckInterval),this.updateCheckInterval=null),this.isInitialized=!1,this}initialize(){return this.isInitialized?(console.log(" Initializing automatic updates..."),console.log(` Current version: ${this.currentVersion}`),console.log(` Check interval: ${this.checkInterval/1e3/60} minutes`),this.updateCheckInterval=setInterval(()=>{this.checkForUpdates()},this.checkInterval),setTimeout(()=>{this.checkForUpdates()},5e3),this.registerServiceWorkerListener(),this):(console.warn("Update service not started. Call start() first."),this)}async checkForUpdates(){if(!this.enableUpdateNotifications)return console.log(" Update notifications disabled"),this;console.log(" Checking for updates...");try{if(this.updateCheckUrl){const a=await(await fetch(this.updateCheckUrl)).json();a.latestVersion&&this.isNewerVersion(a.latestVersion,this.currentVersion)?this.notifyUpdate(a):console.log(" App is up to date")}else this.checkServiceWorkerUpdate()}catch(s){console.error(" Update check failed:",s)}return this}isNewerVersion(s,a){const r=s.split(".").map(Number),i=a.split(".").map(Number);for(let o=0;o<Math.max(r.length,i.length);o++){const c=r[o]||0,u=i[o]||0;if(c>u)return!0;if(c<u)return!1}return!1}checkServiceWorkerUpdate(){"serviceWorker"in navigator&&navigator.serviceWorker.getRegistration().then(s=>{s&&s.update()})}registerServiceWorkerListener(){"serviceWorker"in navigator&&navigator.serviceWorker.addEventListener("controllerchange",()=>{this.notifyUpdate({latestVersion:"New version",message:"A new version of the app is available.",updateType:"service-worker"})})}showWelcomeMessage(){if(!this.enableUpdateNotifications)return this;console.log(" Checking for welcome message...");const s=localStorage.getItem("app_version");return s?s!==this.currentVersion&&D.info(`Updated to v${this.currentVersion}`,{description:"Check out the new features and improvements!",duration:5e3,action:{label:"See What's New",onClick:()=>this.showChangelogModal()}}):D.success("Welcome to ominbiz!",{description:"Your all-in-one business management platform is ready!",duration:5e3,action:{label:"Get Started",onClick:()=>console.log("Welcome acknowledged")}}),localStorage.setItem("app_version",this.currentVersion),this}showChangelogModal(){const s=this.getChangelog();console.log(" Changelog:",s),D.info("Changelog",{description:s.slice(0,2).join(`
`),duration:8e3})}getChangelog(){return[" Enhanced AI chat with dashboard-specific responses"," Added voice input support"," New settings panel with AI personality options"," Real-time data integration"," Conversation history with search & export"," Improved UI with maximizable interface"]}notifyUpdate(s={}){const{latestVersion:a,message:r,updateType:i}=s;if(console.log(" Update available:",a||"New version"),this.autoUpdate)D.info("Auto-updating...",{description:"The app will refresh in 3 seconds",duration:3e3}),setTimeout(()=>{window.location.reload()},3e3);else{const o=a?`v${a}`:"New version";D.success("Update Available!",{description:r||`${o} is ready. Refresh to update.`,duration:0,action:{label:"Update Now",onClick:()=>window.location.reload()},cancel:{label:"Later",onClick:()=>{console.log("Update postponed"),setTimeout(()=>{this.notifyUpdate(s)},36e5)}}})}return this}triggerUpdate(){return D.loading("Updating app...",{duration:1e3}),setTimeout(()=>{window.location.reload()},1e3),this}checkNetworkStatus(){return navigator.onLine?!0:(D.error("No internet connection",{description:"Updates require an internet connection",duration:5e3}),!1)}forceUpdateCheck(){return this.checkNetworkStatus()?(D.info("Checking for updates...",{duration:2e3}),this.checkForUpdates(),this):this}destroy(){return console.log(" Destroying update service..."),this.stop(),this.isInitialized=!1,this}getStatus(){return{isInitialized:this.isInitialized,hasActiveInterval:!!this.updateCheckInterval,currentVersion:this.currentVersion,checkInterval:this.checkInterval,autoUpdate:this.autoUpdate,notificationsEnabled:this.enableUpdateNotifications,hasUpdateUrl:!!this.updateCheckUrl}}getVersion(){return this.currentVersion}setNotificationsEnabled(s){return this.enableUpdateNotifications=s,console.log(` Update notifications ${s?"enabled":"disabled"}`),this}}const uu=new dG,uG=()=>{const{theme:t,setTheme:s}=sj(),{theme:a,setTheme:r,compactMode:i,highContrast:o,reducedMotion:c,animations:u,customAccentColor:f,fontSize:x,borderRadius:h,soundEnabled:p,availableThemes:g}=ld();return v.useEffect(()=>{a!==t&&s(a)},[a,t,s]),v.useEffect(()=>{const S=document.documentElement,C=document.body;C.className=C.className.replace(/theme-\w+/g,""),C.classList.add(`theme-${a}`);const T=g[a];T&&T.colors&&Object.entries(T.colors).forEach(([U,F])=>{S.style.setProperty(`--color-${U}`,F)}),f&&(S.style.setProperty("--color-accent",f),S.style.setProperty("--color-primary",f)),i?(C.classList.add("compact-mode"),S.style.setProperty("--spacing-scale","0.75")):(C.classList.remove("compact-mode"),S.style.setProperty("--spacing-scale","1")),o?C.classList.add("high-contrast"):C.classList.remove("high-contrast"),c?C.classList.add("reduce-motion"):C.classList.remove("reduce-motion"),u?C.classList.remove("no-animations"):C.classList.add("no-animations");const _={small:"14px",medium:"16px",large:"18px","extra-large":"20px"};S.style.setProperty("--font-size-base",_[x]||"16px");const G={none:"0px",small:"0.25rem",medium:"0.5rem",large:"0.75rem","extra-large":"1rem"};S.style.setProperty("--border-radius-base",G[h]||"0.5rem")},[a,i,o,c,u,f,x,h,p,g]),{resetToDefaults:()=>{r("light"),D.success("Theme settings reset to defaults")},exportSettings:()=>{const S={theme:a,compactMode:i,highContrast:o,reducedMotion:c,animations:u,customAccentColor:f,fontSize:x,borderRadius:h,soundEnabled:p,exportedAt:new Date().toISOString()},C=new Blob([JSON.stringify(S,null,2)],{type:"application/json"}),T=URL.createObjectURL(C),_=document.createElement("a");_.href=T,_.download="ominbiz-theme-settings.json",_.click(),URL.revokeObjectURL(T),D.success("Theme settings exported successfully")},importSettings:S=>{const C=new FileReader;C.onload=T=>{try{const _=JSON.parse(T.target.result);_.theme&&g[_.theme]?(r(_.theme),D.success("Theme settings imported successfully")):D.error("Invalid theme settings file")}catch{D.error("Failed to import theme settings")}},C.readAsText(S)}}},mG=()=>(uG(),null),mA=v.createContext(),hG=()=>{const t=v.useContext(mA);if(!t)throw new Error("usePWA must be used within a PWAProvider");return t},fG=({children:t})=>{const[s,a]=v.useState(navigator.onLine),[r,i]=v.useState(!1),[o,c]=v.useState(!1),[u,f]=v.useState(null);v.useEffect(()=>{const g=()=>{const S=window.matchMedia("(display-mode: standalone)").matches||window.navigator.standalone===!0;i(S)},b=()=>a(!0),N=()=>a(!1),y=async()=>{if("serviceWorker"in navigator)try{const S=await navigator.serviceWorker.register("/sw.js",{type:"module",scope:"/"});f(S),S.addEventListener("updatefound",()=>{const C=S.installing;C&&C.addEventListener("statechange",()=>{C.state==="installed"&&navigator.serviceWorker.controller&&c(!0)})}),navigator.serviceWorker.addEventListener("message",C=>{C.data&&C.data.type==="SKIP_WAITING"&&window.location.reload()})}catch(S){console.error("Service Worker registration failed:",S)}};return window.addEventListener("online",b),window.addEventListener("offline",N),g(),y(),()=>{window.removeEventListener("online",b),window.removeEventListener("offline",N)}},[]);const p={isOnline:s,isInstalled:r,updateAvailable:o,updateApp:()=>{u&&u.waiting&&u.waiting.postMessage({type:"SKIP_WAITING"})},dismissUpdate:()=>{c(!1)},registration:u};return e.jsx(mA.Provider,{value:p,children:t})},xG=({...t})=>{const{theme:s="system"}=sj();return e.jsx(X_,{theme:s,className:"toaster group",position:"top-center",toastOptions:{style:{background:"#000000",color:"#ffffff",border:"1px solid #10b981"},className:"sonner-toast",success:{style:{background:"#000000",color:"#10b981",border:"1px solid #10b981"},iconTheme:{primary:"#10b981",secondary:"#000000"}},error:{style:{background:"#000000",color:"#ef4444",border:"1px solid #ef4444"}},warning:{style:{background:"#000000",color:"#f59e0b",border:"1px solid #f59e0b"}},info:{style:{background:"#000000",color:"#10b981",border:"1px solid #10b981"}}},limit:1,...t})};class pG extends ft.Component{constructor(s){super(s),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(s){return{hasError:!0}}componentDidCatch(s,a){console.error("Error caught by boundary:",s,a),this.setState({error:s,errorInfo:a})}handleReload=()=>{window.location.reload()};handleReset=()=>{this.setState({hasError:!1,error:null,errorInfo:null})};render(){return this.state.hasError?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background p-4",children:e.jsxs(K,{className:"w-full max-w-md",children:[e.jsxs(pe,{className:"text-center",children:[e.jsx("div",{className:"mx-auto mb-4 flex h-12 w-12 items-center justify-center rounded-full bg-red-100 dark:bg-red-900/20",children:e.jsx(Er,{className:"h-6 w-6 text-red-600 dark:text-red-400"})}),e.jsx(ge,{className:"text-xl",children:"Something went wrong"}),e.jsx(lt,{children:"An unexpected error occurred. Please try refreshing the page."})]}),e.jsxs(X,{className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs(R,{onClick:this.handleReload,className:"w-full",children:[e.jsx(is,{className:"mr-2 h-4 w-4"}),"Refresh Page"]}),e.jsx(R,{onClick:this.handleReset,variant:"outline",className:"w-full",children:"Try Again"})]}),!1]})]})}):this.props.children}}const gG=()=>{const[t,s]=v.useState(null),[a,r]=v.useState(!1),[i,o]=v.useState(navigator.onLine),[c,u]=v.useState(!1);v.useEffect(()=>{const h=()=>{(window.matchMedia("(display-mode: standalone)").matches||window.navigator.standalone===!0)&&u(!0)},p=y=>{y.preventDefault(),s(y);const S=localStorage.getItem("pwa-install-dismissed"),C=new Date().getTime(),T=1440*60*1e3;(!S||C-parseInt(S)>T*7)&&r(!0)},g=()=>o(!0),b=()=>o(!1),N=()=>{u(!0),r(!1),s(null)};return window.addEventListener("beforeinstallprompt",p),window.addEventListener("appinstalled",N),window.addEventListener("online",g),window.addEventListener("offline",b),h(),()=>{window.removeEventListener("beforeinstallprompt",p),window.removeEventListener("appinstalled",N),window.removeEventListener("online",g),window.removeEventListener("offline",b)}},[]);const f=async()=>{if(t)try{t.prompt();const{outcome:h}=await t.userChoice;h==="accepted"?console.log("User accepted the install prompt"):(console.log("User dismissed the install prompt"),localStorage.setItem("pwa-install-dismissed",new Date().getTime().toString())),s(null),r(!1)}catch(h){console.error("Error during PWA installation:",h)}},x=()=>{r(!1),localStorage.setItem("pwa-install-dismissed",new Date().getTime().toString())};return c?null:e.jsxs(e.Fragment,{children:[!i&&e.jsx("div",{className:"fixed top-0 left-0 right-0 z-50 bg-yellow-500 text-black px-4 py-2 text-center text-sm font-medium",children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(Bc,{size:16}),e.jsx("span",{children:"You're offline. Some features may be limited."})]})}),a&&t&&e.jsx("div",{className:"fixed bottom-4 left-4 right-4 md:left-auto md:right-4 md:max-w-sm z-40 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg shadow-lg p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"flex-shrink-0 w-10 h-10 bg-black dark:bg-white rounded-lg flex items-center justify-center",children:e.jsx(Pa,{className:"w-5 h-5 text-white dark:text-black"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:"Install ominbiz"}),e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-300 mt-1",children:"Install our app for a better experience with offline access and quick launch."}),e.jsxs("div",{className:"flex gap-2 mt-3",children:[e.jsx("button",{onClick:f,className:"flex-1 bg-black dark:bg-white text-white dark:text-black text-xs font-medium py-2 px-3 rounded-md hover:bg-gray-800 dark:hover:bg-gray-100 transition-colors",children:"Install"}),e.jsx("button",{onClick:x,className:"flex-shrink-0 text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200 p-2",children:e.jsx(yr,{size:14})})]})]})]})}),i&&e.jsx("div",{className:"fixed top-4 right-4 z-30 animate-fade-in",children:e.jsxs("div",{className:"bg-green-500 text-white px-3 py-1 rounded-full text-xs font-medium flex items-center gap-1",children:[e.jsx(of,{size:12}),e.jsx("span",{children:"Online"})]})})]})},vG=()=>{const{updateAvailable:t,updateApp:s,dismissUpdate:a}=hG();return t?e.jsx("div",{className:"fixed top-4 left-4 right-4 md:left-auto md:right-4 md:max-w-sm z-50 bg-blue-600 text-white rounded-lg shadow-lg p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"flex-shrink-0 w-8 h-8 bg-blue-500 rounded-lg flex items-center justify-center",children:e.jsx(is,{className:"w-4 h-4"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"text-sm font-semibold",children:"Update Available"}),e.jsx("p",{className:"text-xs opacity-90 mt-1",children:"A new version of ominbiz is available. Update now for the latest features and improvements."}),e.jsxs("div",{className:"flex gap-2 mt-3",children:[e.jsx("button",{onClick:s,className:"flex-1 bg-white text-blue-600 text-xs font-medium py-2 px-3 rounded-md hover:bg-blue-50 transition-colors",children:"Update Now"}),e.jsx("button",{onClick:a,className:"flex-shrink-0 text-white/80 hover:text-white p-2",children:e.jsx(yr,{size:14})})]})]})]})}):null},jG=()=>{const{inviteCode:t}=sl(),s=Ka(),{register:a,customer:r,isAuthenticated:i,loading:o}=Io(),[c,u]=v.useState(!1),[f,x]=v.useState(!1),[h,p]=v.useState(!0),[g,b]=v.useState({name:"",email:"",phone:"",password:""}),[N,y]=v.useState({businessName:"Premium Beauty Store",ownerName:"Loading..."});v.useEffect(()=>{t?p(!1):(D.error("No invite code provided"),s("/"))},[t,s]),v.useEffect(()=>{const T=setTimeout(()=>{if(!o&&i&&r){console.log("✅ Already logged in, redirecting to storefront");const _=t?`/client/store/${t}`:"/client/store";s(_,{replace:!0})}},100);return()=>clearTimeout(T)},[o,i,r,t,s]);const S=T=>{b({...g,[T.target.name]:T.target.value})},C=async T=>{T.preventDefault(),x(!0);try{(await a({...g,inviteCode:t})).success&&(console.log("✅ Signup component: Registration successful"),D.success(`Welcome! You now have access to ${N.businessName}`),await new Promise(G=>setTimeout(G,400)),console.log("🔄 Navigating to storefront after registration"),s(`/client/store/${t}`,{replace:!0}))}catch(_){console.error("Registration error:",_)}finally{x(!1)}};return h||o?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-primary/5 via-background to-accent/5 flex items-center justify-center p-4",children:e.jsx(K,{className:"w-full max-w-md shadow-lg border-primary/10",children:e.jsxs(X,{className:"pt-6 text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"Loading..."})]})})}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-primary/5 via-background to-accent/5 flex items-center justify-center p-4",children:e.jsxs(K,{className:"w-full max-w-md shadow-lg border-primary/10",children:[e.jsxs(pe,{className:"space-y-4 text-center",children:[e.jsx("div",{className:"mx-auto h-16 w-16 rounded-full bg-primary/10 flex items-center justify-center",children:e.jsx(_b,{className:"h-8 w-8 text-primary"})}),e.jsxs("div",{children:[e.jsx(ge,{className:"text-2xl",children:"You're Invited!"}),e.jsxs(lt,{className:"mt-2",children:[N.ownerName," has invited you to shop at"," ",e.jsx("span",{className:"font-semibold text-foreground",children:N.businessName})]})]})]}),e.jsx(X,{children:e.jsxs("form",{onSubmit:C,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(ae,{htmlFor:"name",children:"Full Name"}),e.jsxs("div",{className:"relative",children:[e.jsx(na,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(fe,{id:"name",name:"name",placeholder:"John Doe",value:g.name,onChange:S,className:"pl-10",required:!0})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ae,{htmlFor:"email",children:"Email"}),e.jsxs("div",{className:"relative",children:[e.jsx(Gs,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(fe,{id:"email",name:"email",type:"email",placeholder:"john@example.com",value:g.email,onChange:S,className:"pl-10",required:!0})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ae,{htmlFor:"phone",children:"Phone Number"}),e.jsxs("div",{className:"relative",children:[e.jsx($s,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(fe,{id:"phone",name:"phone",type:"tel",placeholder:"+254 712 345 678",value:g.phone,onChange:S,className:"pl-10",required:!0})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ae,{htmlFor:"password",children:"Create Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(vr,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(fe,{id:"password",name:"password",type:c?"text":"password",placeholder:"••••••••",value:g.password,onChange:S,className:"pl-10 pr-10",required:!0}),e.jsx("button",{type:"button",onClick:()=>u(!c),className:"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground transition-colors",children:c?e.jsx(Eo,{className:"h-4 w-4"}):e.jsx(la,{className:"h-4 w-4"})})]})]}),e.jsx(R,{type:"submit",className:"w-full gap-2",disabled:f,children:f?"Creating Account...":e.jsxs(e.Fragment,{children:[e.jsx(_b,{className:"h-4 w-4"}),"Join Store"]})}),e.jsxs("p",{className:"text-xs text-center text-muted-foreground",children:["By signing up, you agree to our"," ",e.jsx("a",{href:"#",className:"text-primary hover:underline",children:"Terms"})," ","and"," ",e.jsx("a",{href:"#",className:"text-primary hover:underline",children:"Privacy Policy"})]}),e.jsxs("div",{className:"text-xs text-center text-muted-foreground",children:["Already have an account?"," ",e.jsxs(Ht,{to:`/client/login/${t}`,className:"text-primary hover:underline inline-flex items-center gap-1 ml-1",children:[e.jsx(Nv,{className:"h-3 w-3"}),"Log in"]})]}),e.jsx("div",{className:"pt-4 border-t",children:e.jsxs("p",{className:"text-xs text-center text-muted-foreground",children:[e.jsx(vr,{className:"inline h-4 w-4 mr-1"})," Secure & Private • Only ",N.ownerName," can see your orders"]})})]})})]})})};function rv({...t}){return e.jsx(K5,{"data-slot":"sheet",...t})}function nv({...t}){return e.jsx(Y5,{"data-slot":"sheet-trigger",...t})}function yG({...t}){return e.jsx(e_,{"data-slot":"sheet-portal",...t})}function NG({className:t,...s}){return e.jsx(t_,{"data-slot":"sheet-overlay",className:Je("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",t),...s})}function iv({className:t,children:s,side:a="right",...r}){return e.jsxs(yG,{children:[e.jsx(NG,{}),e.jsxs(X5,{"data-slot":"sheet-content",className:Je("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out fixed z-50 flex flex-col gap-4 shadow-lg transition ease-in-out data-[state=closed]:duration-300 data-[state=open]:duration-500",a==="right"&&"data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right inset-y-0 right-0 h-full w-3/4 border-l sm:max-w-sm",a==="left"&&"data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left inset-y-0 left-0 h-full w-3/4 border-r sm:max-w-sm",a==="top"&&"data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top inset-x-0 top-0 h-auto border-b",a==="bottom"&&"data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom inset-x-0 bottom-0 h-auto border-t",t),...r,children:[s,e.jsxs(Q5,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-secondary absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none",children:[e.jsx(yr,{className:"size-4"}),e.jsx("span",{className:"sr-only",children:"Close"})]})]})]})}function lv({className:t,...s}){return e.jsx("div",{"data-slot":"sheet-header",className:Je("flex flex-col gap-1.5 p-4",t),...s})}function ov({className:t,...s}){return e.jsx(Z5,{"data-slot":"sheet-title",className:Je("text-foreground font-semibold",t),...s})}function cv({className:t,...s}){return e.jsx(J5,{"data-slot":"sheet-description",className:Je("text-muted-foreground text-sm",t),...s})}const bG=({product:t,open:s,onClose:a,onAddToCart:r})=>{const[i,o]=v.useState(1),[c,u]=v.useState(!1);if(!t)return null;const f=t.rating||4.5,x=t.reviews?.length||12;return e.jsx(Ft,{open:s,onOpenChange:a,children:e.jsxs(It,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsx(Lt,{children:e.jsx(Bt,{className:"sr-only",children:t.name})}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"aspect-square bg-gradient-to-br from-secondary/30 to-primary/10 rounded-xl flex items-center justify-center overflow-hidden",children:e.jsx(qt,{className:"h-32 w-32 text-primary/40"})}),e.jsx("div",{className:"grid grid-cols-4 gap-2",children:[1,2,3,4].map(h=>e.jsx("div",{className:"aspect-square bg-muted rounded-lg flex items-center justify-center",children:e.jsx(qt,{className:"h-8 w-8 text-muted-foreground"})},h))})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsx("h2",{className:"text-2xl font-bold text-foreground",children:t.name}),e.jsx(R,{variant:"ghost",size:"icon",onClick:()=>u(!c),className:"text-muted-foreground hover:text-primary",children:e.jsx(Wi,{className:`h-5 w-5 ${c?"fill-primary text-primary":""}`})})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx("div",{className:"flex items-center",children:[...Array(5)].map((h,p)=>e.jsx(Ja,{className:`h-4 w-4 ${p<Math.floor(f)?"fill-warning text-warning":"text-muted-foreground"}`},p))}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[f," (",x," reviews)"]})]}),e.jsxs("p",{className:"text-3xl font-bold text-primary",children:["KES ",(Number(t.price)||0).toFixed(2)]})]}),e.jsx(Fn,{}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-2 text-foreground",children:"Description"}),e.jsx("p",{className:"text-muted-foreground",children:t.description})]}),t.specs&&t.specs.length>0&&e.jsxs(e.Fragment,{children:[e.jsx(Fn,{}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-2 text-foreground",children:"Specifications"}),e.jsx("ul",{className:"space-y-1",children:t.specs.map((h,p)=>e.jsxs("li",{className:"text-sm text-muted-foreground flex items-center gap-2",children:[e.jsx("span",{className:"h-1.5 w-1.5 rounded-full bg-primary"}),h]},p))})]})]}),e.jsx(Fn,{}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(qt,{className:"h-4 w-4 text-success"}),e.jsx("span",{className:(t.stockQuantity||t.stock||0)>10?"text-success":"text-warning",children:(t.stockQuantity||t.stock||0)>10?"In Stock":`Only ${t.stockQuantity||t.stock||0} left`})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[e.jsx(Yc,{className:"h-4 w-4"}),e.jsx("span",{children:"Free delivery on orders over KES 1,000"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[e.jsx(ta,{className:"h-4 w-4"}),e.jsx("span",{children:"Secure payment & 7-day return policy"})]})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsxs("div",{className:"flex items-center border border-border rounded-lg",children:[e.jsx(R,{variant:"ghost",size:"sm",onClick:()=>o(Math.max(1,i-1)),className:"rounded-r-none",children:"-"}),e.jsx("span",{className:"px-4 font-semibold",children:i}),e.jsx(R,{variant:"ghost",size:"sm",onClick:()=>o(Math.min(t.stockQuantity||t.stock||0,i+1)),className:"rounded-l-none",children:"+"})]}),e.jsxs(R,{className:"flex-1 gap-2",onClick:()=>{for(let h=0;h<i;h++)r(t);a()},disabled:(t.stockQuantity||t.stock||0)===0,children:[e.jsx(js,{className:"h-4 w-4"}),"Add to Cart"]})]})]})]}),t.reviews&&t.reviews.length>0&&e.jsxs(e.Fragment,{children:[e.jsx(Fn,{className:"my-6"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold mb-4 text-foreground",children:"Customer Reviews"}),e.jsx("div",{className:"space-y-4",children:t.reviews.slice(0,3).map(h=>e.jsxs("div",{className:"border border-border rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"h-8 w-8 rounded-full bg-primary/10 flex items-center justify-center",children:e.jsx("span",{className:"text-sm font-semibold text-primary",children:h.author.charAt(0)})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-sm text-foreground",children:h.author}),e.jsx("p",{className:"text-xs text-muted-foreground",children:h.date})]})]}),e.jsx("div",{className:"flex items-center",children:[...Array(5)].map((p,g)=>e.jsx(Ja,{className:`h-3 w-3 ${g<h.rating?"fill-warning text-warning":"text-muted-foreground"}`},g))})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:h.comment})]},h.id))})]})]})]})})},wG=1,SG=1e6;let eg=0;function CG(){return eg=(eg+1)%Number.MAX_SAFE_INTEGER,eg.toString()}const tg=new Map,fS=t=>{if(tg.has(t))return;const s=setTimeout(()=>{tg.delete(t),_u({type:"REMOVE_TOAST",toastId:t})},SG);tg.set(t,s)},TG=(t,s)=>{switch(s.type){case"ADD_TOAST":return{...t,toasts:[s.toast,...t.toasts].slice(0,wG)};case"UPDATE_TOAST":return{...t,toasts:t.toasts.map(a=>a.id===s.toast.id?{...a,...s.toast}:a)};case"DISMISS_TOAST":{const{toastId:a}=s;return a?fS(a):t.toasts.forEach(r=>{fS(r.id)}),{...t,toasts:t.toasts.map(r=>r.id===a||a===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return s.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(a=>a.id!==s.toastId)}}},ef=[];let tf={toasts:[]};function _u(t){tf=TG(tf,t),ef.forEach(s=>{s(tf)})}function kG(t){const s=CG(),a=i=>_u({type:"UPDATE_TOAST",toast:{...i,id:s}}),r=()=>_u({type:"DISMISS_TOAST",toastId:s});return _u({type:"ADD_TOAST",toast:{...t,id:s,open:!0,onOpenChange:i=>{i||r()}}}),{id:s,dismiss:r,update:a}}function hA(){const[t,s]=v.useState(tf);return v.useEffect(()=>(ef.push(s),()=>{const a=ef.indexOf(s);a>-1&&ef.splice(a,1)}),[t]),{...t,toast:kG,dismiss:a=>_u({type:"DISMISS_TOAST",toastId:a})}}const EG=({open:t,onClose:s,cartItems:a,cartTotal:r,onClearCart:i})=>{const{toast:o}=hA(),{inviteCode:c}=sl(),[u,f]=v.useState(1),[x,h]=v.useState(""),[p,g]=v.useState(!1),[b,N]=v.useState("cash"),[y,S]=v.useState("mpesa"),[C,T]=v.useState({name:"",email:"",phone:"",address:"",city:""}),_=E=>{T({...C,[E.target.name]:E.target.value})},G=async(E=null)=>{try{const A=`ORD-${Date.now()}-${Math.floor(Math.random()*1e3)}`,B={orderId:A,customer:{name:C.name,email:C.email,phone:C.phone},items:a.map(re=>({product:re._id||re.id,name:re.name,price:re.price,quantity:re.quantity,currency:re.currency||"USD",image:re.image||null})),subtotal:r,total:r,status:b==="cash"||b==="dollar"?"Submitted":"Processing",paymentStatus:E?"Paid":"Pending",deliveryInfo:{address:C.address,city:C.city,method:"delivery",contactPerson:C.name,contactPhone:C.phone},paymentMethod:b,paymentDetails:E||{method:b},orderType:"standard",priority:"medium"},H=localStorage.getItem("customerToken"),M=c||window.location.pathname.split("/").filter(Boolean).pop();if(!M)throw new Error("Store invite code is missing. Please refresh the page and try again.");let q;const L=H?{Authorization:`Bearer ${H}`}:{};return q=await ye.post("/public/orders",{...B,inviteCode:M},{headers:L}),console.log("✅ Order created successfully:",q.data),{success:!0,orderNum:A,order:q.data}}catch(A){return console.error("❌ Error creating order:",A),{success:!1,error:A.response?.data?.message||A.message||"Failed to create order. Please try again."}}},U=async E=>{g(!0);const A=await G(E);g(!1),A.success?(h(A.orderNum),o({title:"Payment & Order Successful!",description:`Your order #${A.orderNum} has been confirmed and saved.`}),i(),f(4)):o({title:"Order Creation Failed",description:A.error,variant:"destructive"})},F=E=>{g(!1),o({title:"Payment Failed",description:E?.message||"Payment could not be processed. Please try again.",variant:"destructive"})},k=()=>{f(1),T({name:"",email:"",phone:"",address:"",city:""}),h(""),g(!1),s()};return e.jsx(Ft,{open:t,onOpenChange:k,children:e.jsxs(It,{className:"max-w-2xl max-h-[90vh] overflow-y-auto glass-panel",children:[e.jsx(Lt,{children:e.jsx(Bt,{children:"Checkout"})}),e.jsx("div",{className:"flex items-center justify-between mb-6",children:["Cart","Details","Payment","Done"].map((E,A)=>e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`h-8 w-8 rounded-full flex items-center justify-center text-sm font-semibold ${u>A+1?"bg-success text-success-foreground":u===A+1?"bg-primary text-primary-foreground":"bg-muted text-muted-foreground"}`,children:u>A+1?"":A+1}),A<3&&e.jsx("div",{className:`h-1 w-12 mx-2 ${u>A+1?"bg-success":"bg-muted"}`})]},E))}),u===1&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"font-semibold text-foreground",children:"Review Your Order"}),e.jsx("div",{className:"space-y-3",children:a.map(E=>e.jsxs("div",{className:"flex justify-between items-center p-3 bg-secondary/20 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-foreground",children:E.name}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Quantity: ",E.quantity]})]}),e.jsxs("p",{className:"font-semibold text-primary",children:["KES ",(E.price*E.quantity).toFixed(2)]})]},E.id))}),e.jsx(Fn,{}),e.jsxs("div",{className:"flex justify-between text-lg font-bold",children:[e.jsx("span",{className:"text-foreground",children:"Total:"}),e.jsxs("span",{className:"text-primary",children:["KES ",r.toFixed(2)]})]}),e.jsx(R,{className:"w-full",onClick:()=>f(2),children:"Continue to Details"})]}),u===2&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"font-semibold text-foreground",children:"Delivery Details"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(ae,{htmlFor:"name",className:"flex items-center gap-2",children:[e.jsx(na,{className:"h-4 w-4"}),"Full Name"]}),e.jsx(fe,{id:"name",name:"name",value:C.name,onChange:_,placeholder:"John Doe",required:!0})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(ae,{htmlFor:"email",className:"flex items-center gap-2",children:[e.jsx(Gs,{className:"h-4 w-4"}),"Email"]}),e.jsx(fe,{id:"email",name:"email",type:"email",value:C.email,onChange:_,placeholder:"john@example.com",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(ae,{htmlFor:"phone",className:"flex items-center gap-2",children:[e.jsx($s,{className:"h-4 w-4"}),"Phone"]}),e.jsx(fe,{id:"phone",name:"phone",value:C.phone,onChange:_,placeholder:"+254 700 000000",required:!0})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(ae,{htmlFor:"address",className:"flex items-center gap-2",children:[e.jsx(Xr,{className:"h-4 w-4"}),"Delivery Address"]}),e.jsx(fe,{id:"address",name:"address",value:C.address,onChange:_,placeholder:"123 Main Street, Apartment 4B",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ae,{htmlFor:"city",children:"City"}),e.jsx(fe,{id:"city",name:"city",value:C.city,onChange:_,placeholder:"Nairobi",required:!0})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(R,{variant:"outline",className:"flex-1",onClick:()=>f(1),children:"Back"}),e.jsx(R,{className:"flex-1",onClick:()=>{if(!C.name||!C.email||!C.phone||!C.address||!C.city){o({title:"Missing Information",description:"Please fill in all required fields before continuing.",variant:"destructive"});return}f(3)},children:"Continue to Payment"})]})]}),u===3&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"font-semibold text-foreground",children:"Complete Payment"}),e.jsxs("div",{className:"bg-secondary/20 p-4 rounded-lg space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Subtotal"}),e.jsxs("span",{className:"text-foreground",children:["KES ",r.toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Delivery Fee"}),e.jsx("span",{className:"text-success",children:"Free"})]}),e.jsx(Fn,{}),e.jsxs("div",{className:"flex justify-between font-bold text-lg",children:[e.jsx("span",{className:"text-foreground",children:"Total"}),e.jsxs("span",{className:"text-primary",children:["KES ",r.toFixed(2)]})]})]}),e.jsxs("div",{className:"bg-muted/50 p-4 rounded-lg space-y-2",children:[e.jsxs("h4",{className:"font-semibold text-sm flex items-center gap-2",children:[e.jsx(na,{className:"h-4 w-4"}),"Delivery Details"]}),e.jsxs("div",{className:"text-sm text-muted-foreground space-y-1",children:[e.jsx("p",{children:C.name}),e.jsx("p",{children:C.email}),e.jsx("p",{children:C.phone}),e.jsxs("p",{children:[C.address,", ",C.city]})]})]}),e.jsxs("div",{className:"flex items-start gap-2 p-3 bg-blue-50 dark:bg-blue-950/20 border border-blue-200 dark:border-blue-900 rounded-lg",children:[e.jsx(Cs,{className:"h-5 w-5 text-blue-600 dark:text-blue-400 mt-0.5"}),e.jsxs("div",{className:"text-sm text-blue-600 dark:text-blue-400",children:[e.jsx("p",{className:"font-semibold",children:"Secure Payment"}),e.jsx("p",{className:"text-xs",children:"Click below to choose your payment method. You can pay via M-Pesa or credit/debit card."})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-semibold",children:"Choose Payment Method"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("button",{onClick:()=>N("cash"),className:`p-4 rounded-xl border-2 transition-all ${b==="cash"?"border-green-600 bg-green-50 dark:bg-green-950/20":"border-border hover:border-green-300"}`,children:[e.jsx(sd,{className:"h-8 w-8 mx-auto mb-2 text-green-600"}),e.jsx("div",{className:"font-semibold",children:"Cash on Delivery"}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Pay when you receive"})]}),e.jsxs("button",{onClick:()=>N("paynow"),className:`p-4 rounded-xl border-2 transition-all ${b==="paynow"?"border-blue-600 bg-blue-50 dark:bg-blue-950/20":"border-border hover:border-blue-300"}`,children:[e.jsx(ha,{className:"h-8 w-8 mx-auto mb-2 text-blue-600"}),e.jsx("div",{className:"font-semibold",children:"Pay Now"}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"M-Pesa or PayPal"})]})]})]}),b==="paynow"&&e.jsxs("div",{className:"space-y-3 animate-in fade-in slide-in-from-top-2",children:[e.jsx("h4",{className:"font-semibold text-sm",children:"Select Payment Gateway"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("button",{onClick:()=>S("mpesa"),className:`p-3 rounded-lg border-2 transition-all ${y==="mpesa"?"border-green-600 bg-green-50 dark:bg-green-950/20":"border-border hover:border-green-300"}`,children:[e.jsx(Kr,{className:"h-6 w-6 mx-auto mb-1 text-green-600"}),e.jsx("div",{className:"font-semibold text-sm",children:"M-Pesa"}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Safaricom STK Push"})]}),e.jsxs("button",{onClick:()=>S("paypal"),className:`p-3 rounded-lg border-2 transition-all ${y==="paypal"?"border-blue-600 bg-blue-50 dark:bg-blue-950/20":"border-border hover:border-blue-300"}`,children:[e.jsx(_o,{className:"h-6 w-6 mx-auto mb-1 text-blue-600"}),e.jsx("div",{className:"font-semibold text-sm",children:"PayPal"}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Cards & PayPal"})]})]})]}),b==="paynow"?e.jsx("div",{className:"flex flex-col items-center justify-center gap-4 py-4",children:e.jsx(uk,{amount:r,description:`Order for ${a.length} items from store`,currency:"KES",onSuccess:U,onError:F,triggerText:"Proceed to Payment",showMpesa:y==="mpesa",showPaypal:y==="paypal",disabled:p||!C.name||!C.email||!C.phone})}):b==="cash"&&e.jsx(R,{className:"w-full h-12 text-lg font-bold",onClick:async()=>{if(!C.name||!C.email||!C.phone||!C.address||!C.city){o({title:"Missing Information",description:"Please go back and fill in all delivery details.",variant:"destructive"});return}g(!0);const E=await G();g(!1),E.success?(h(E.orderNum),o({title:"Order Placed!",description:`Your order #${E.orderNum} has been confirmed. Payment method: Cash on Delivery.`}),i(),f(4)):o({title:"Order Failed",description:E.error,variant:"destructive"})},disabled:p,children:p?"Processing...":"Place Order (Cash on Delivery)"}),e.jsx("div",{className:"flex gap-3",children:e.jsx(R,{variant:"outline",className:"flex-1",onClick:()=>f(2),disabled:p,children:"Back"})})]}),u===4&&e.jsxs("div",{className:"text-center space-y-4 py-8",children:[e.jsx("div",{className:"h-16 w-16 mx-auto bg-success/10 rounded-full flex items-center justify-center",children:e.jsx(ai,{className:"h-10 w-10 text-success"})}),e.jsx("h3",{className:"text-2xl font-bold text-foreground",children:"Order Confirmed!"}),e.jsx("p",{className:"text-muted-foreground",children:"Thank you for your order. We'll send you a confirmation email with tracking details shortly."}),e.jsx(R,{className:"w-full",onClick:k,children:"Continue Shopping"})]})]})})};function AG(t,s,a="long"){return new Intl.DateTimeFormat("en-US",{hour:"numeric",timeZone:t,timeZoneName:a}).format(s).split(/\s/g).slice(2).join(" ")}const _G={},gu={};function No(t,s){try{const r=(_G[t]||=new Intl.DateTimeFormat("en-US",{timeZone:t,timeZoneName:"longOffset"}).format)(s).split("GMT")[1];return r in gu?gu[r]:xS(r,r.split(":"))}catch{if(t in gu)return gu[t];const a=t?.match(DG);return a?xS(t,a.slice(1)):NaN}}const DG=/([+-]\d\d):?(\d\d)?/;function xS(t,s){const a=+(s[0]||0),r=+(s[1]||0),i=+(s[2]||0)/60;return gu[t]=a*60+r>0?a*60+r+i:a*60-r-i}class xi extends Date{constructor(...s){super(),s.length>1&&typeof s[s.length-1]=="string"&&(this.timeZone=s.pop()),this.internal=new Date,isNaN(No(this.timeZone,this))?this.setTime(NaN):s.length?typeof s[0]=="number"&&(s.length===1||s.length===2&&typeof s[1]!="number")?this.setTime(s[0]):typeof s[0]=="string"?this.setTime(+new Date(s[0])):s[0]instanceof Date?this.setTime(+s[0]):(this.setTime(+new Date(...s)),fA(this),dv(this)):this.setTime(Date.now())}static tz(s,...a){return a.length?new xi(...a,s):new xi(Date.now(),s)}withTimeZone(s){return new xi(+this,s)}getTimezoneOffset(){const s=-No(this.timeZone,this);return s>0?Math.floor(s):Math.ceil(s)}setTime(s){return Date.prototype.setTime.apply(this,arguments),dv(this),+this}[Symbol.for("constructDateFrom")](s){return new xi(+new Date(s),this.timeZone)}}const pS=/^(get|set)(?!UTC)/;Object.getOwnPropertyNames(Date.prototype).forEach(t=>{if(!pS.test(t))return;const s=t.replace(pS,"$1UTC");xi.prototype[s]&&(t.startsWith("get")?xi.prototype[t]=function(){return this.internal[s]()}:(xi.prototype[t]=function(){return Date.prototype[s].apply(this.internal,arguments),OG(this),+this},xi.prototype[s]=function(){return Date.prototype[s].apply(this,arguments),dv(this),+this}))});function dv(t){t.internal.setTime(+t),t.internal.setUTCSeconds(t.internal.getUTCSeconds()-Math.round(-No(t.timeZone,t)*60))}function OG(t){Date.prototype.setFullYear.call(t,t.internal.getUTCFullYear(),t.internal.getUTCMonth(),t.internal.getUTCDate()),Date.prototype.setHours.call(t,t.internal.getUTCHours(),t.internal.getUTCMinutes(),t.internal.getUTCSeconds(),t.internal.getUTCMilliseconds()),fA(t)}function fA(t){const s=No(t.timeZone,t),a=s>0?Math.floor(s):Math.ceil(s),r=new Date(+t);r.setUTCHours(r.getUTCHours()-1);const i=-new Date(+t).getTimezoneOffset(),o=-new Date(+r).getTimezoneOffset(),c=i-o,u=Date.prototype.getHours.apply(t)!==t.internal.getUTCHours();c&&u&&t.internal.setUTCMinutes(t.internal.getUTCMinutes()+c);const f=i-a;f&&Date.prototype.setUTCMinutes.call(t,Date.prototype.getUTCMinutes.call(t)+f);const x=new Date(+t);x.setUTCSeconds(0);const h=i>0?x.getSeconds():(x.getSeconds()-60)%60,p=Math.round(-(No(t.timeZone,t)*60))%60;(p||h)&&(t.internal.setUTCSeconds(t.internal.getUTCSeconds()+p),Date.prototype.setUTCSeconds.call(t,Date.prototype.getUTCSeconds.call(t)+p+h));const g=No(t.timeZone,t),b=g>0?Math.floor(g):Math.ceil(g),y=-new Date(+t).getTimezoneOffset()-b,S=b!==a,C=y-f;if(S&&C){Date.prototype.setUTCMinutes.call(t,Date.prototype.getUTCMinutes.call(t)+C);const T=No(t.timeZone,t),_=T>0?Math.floor(T):Math.ceil(T),G=b-_;G&&(t.internal.setUTCMinutes(t.internal.getUTCMinutes()+G),Date.prototype.setUTCMinutes.call(t,Date.prototype.getUTCMinutes.call(t)+G))}}class Sr extends xi{static tz(s,...a){return a.length?new Sr(...a,s):new Sr(Date.now(),s)}toISOString(){const[s,a,r]=this.tzComponents(),i=`${s}${a}:${r}`;return this.internal.toISOString().slice(0,-1)+i}toString(){return`${this.toDateString()} ${this.toTimeString()}`}toDateString(){const[s,a,r,i]=this.internal.toUTCString().split(" ");return`${s?.slice(0,-1)} ${r} ${a} ${i}`}toTimeString(){const s=this.internal.toUTCString().split(" ")[4],[a,r,i]=this.tzComponents();return`${s} GMT${a}${r}${i} (${AG(this.timeZone,this)})`}toLocaleString(s,a){return Date.prototype.toLocaleString.call(this,s,{...a,timeZone:a?.timeZone||this.timeZone})}toLocaleDateString(s,a){return Date.prototype.toLocaleDateString.call(this,s,{...a,timeZone:a?.timeZone||this.timeZone})}toLocaleTimeString(s,a){return Date.prototype.toLocaleTimeString.call(this,s,{...a,timeZone:a?.timeZone||this.timeZone})}tzComponents(){const s=this.getTimezoneOffset(),a=s>0?"-":"+",r=String(Math.floor(Math.abs(s)/60)).padStart(2,"0"),i=String(Math.abs(s)%60).padStart(2,"0");return[a,r,i]}withTimeZone(s){return new Sr(+this,s)}[Symbol.for("constructDateFrom")](s){return new Sr(+new Date(s),this.timeZone)}}const gS=5,RG=4;function PG(t,s){const a=s.startOfMonth(t),r=a.getDay()>0?a.getDay():7,i=s.addDays(t,-r+1),o=s.addDays(i,gS*7-1);return s.getMonth(t)===s.getMonth(o)?gS:RG}function xA(t,s){const a=s.startOfMonth(t),r=a.getDay();return r===1?a:r===0?s.addDays(a,-6):s.addDays(a,-1*(r-1))}function MG(t,s){const a=xA(t,s),r=PG(t,s);return s.addDays(a,r*7-1)}class gn{constructor(s,a){this.Date=Date,this.today=()=>this.overrides?.today?this.overrides.today():this.options.timeZone?Sr.tz(this.options.timeZone):new this.Date,this.newDate=(r,i,o)=>this.overrides?.newDate?this.overrides.newDate(r,i,o):this.options.timeZone?new Sr(r,i,o,this.options.timeZone):new Date(r,i,o),this.addDays=(r,i)=>this.overrides?.addDays?this.overrides.addDays(r,i):Q_(r,i),this.addMonths=(r,i)=>this.overrides?.addMonths?this.overrides.addMonths(r,i):Z_(r,i),this.addWeeks=(r,i)=>this.overrides?.addWeeks?this.overrides.addWeeks(r,i):J_(r,i),this.addYears=(r,i)=>this.overrides?.addYears?this.overrides.addYears(r,i):e6(r,i),this.differenceInCalendarDays=(r,i)=>this.overrides?.differenceInCalendarDays?this.overrides.differenceInCalendarDays(r,i):t6(r,i),this.differenceInCalendarMonths=(r,i)=>this.overrides?.differenceInCalendarMonths?this.overrides.differenceInCalendarMonths(r,i):s6(r,i),this.eachMonthOfInterval=r=>this.overrides?.eachMonthOfInterval?this.overrides.eachMonthOfInterval(r):a6(r),this.eachYearOfInterval=r=>{const i=this.overrides?.eachYearOfInterval?this.overrides.eachYearOfInterval(r):r6(r),o=new Set(i.map(u=>this.getYear(u)));if(o.size===i.length)return i;const c=[];return o.forEach(u=>{c.push(new Date(u,0,1))}),c},this.endOfBroadcastWeek=r=>this.overrides?.endOfBroadcastWeek?this.overrides.endOfBroadcastWeek(r):MG(r,this),this.endOfISOWeek=r=>this.overrides?.endOfISOWeek?this.overrides.endOfISOWeek(r):n6(r),this.endOfMonth=r=>this.overrides?.endOfMonth?this.overrides.endOfMonth(r):i6(r),this.endOfWeek=(r,i)=>this.overrides?.endOfWeek?this.overrides.endOfWeek(r,i):l6(r,this.options),this.endOfYear=r=>this.overrides?.endOfYear?this.overrides.endOfYear(r):o6(r),this.format=(r,i,o)=>{const c=this.overrides?.format?this.overrides.format(r,i,this.options):mg(r,i,this.options);return this.options.numerals&&this.options.numerals!=="latn"?this.replaceDigits(c):c},this.getISOWeek=r=>this.overrides?.getISOWeek?this.overrides.getISOWeek(r):c6(r),this.getMonth=(r,i)=>this.overrides?.getMonth?this.overrides.getMonth(r,this.options):d6(r,this.options),this.getYear=(r,i)=>this.overrides?.getYear?this.overrides.getYear(r,this.options):u6(r,this.options),this.getWeek=(r,i)=>this.overrides?.getWeek?this.overrides.getWeek(r,this.options):m6(r,this.options),this.isAfter=(r,i)=>this.overrides?.isAfter?this.overrides.isAfter(r,i):h6(r,i),this.isBefore=(r,i)=>this.overrides?.isBefore?this.overrides.isBefore(r,i):f6(r,i),this.isDate=r=>this.overrides?.isDate?this.overrides.isDate(r):x6(r),this.isSameDay=(r,i)=>this.overrides?.isSameDay?this.overrides.isSameDay(r,i):p6(r,i),this.isSameMonth=(r,i)=>this.overrides?.isSameMonth?this.overrides.isSameMonth(r,i):g6(r,i),this.isSameYear=(r,i)=>this.overrides?.isSameYear?this.overrides.isSameYear(r,i):v6(r,i),this.max=r=>this.overrides?.max?this.overrides.max(r):j6(r),this.min=r=>this.overrides?.min?this.overrides.min(r):y6(r),this.setMonth=(r,i)=>this.overrides?.setMonth?this.overrides.setMonth(r,i):N6(r,i),this.setYear=(r,i)=>this.overrides?.setYear?this.overrides.setYear(r,i):b6(r,i),this.startOfBroadcastWeek=(r,i)=>this.overrides?.startOfBroadcastWeek?this.overrides.startOfBroadcastWeek(r,this):xA(r,this),this.startOfDay=r=>this.overrides?.startOfDay?this.overrides.startOfDay(r):w6(r),this.startOfISOWeek=r=>this.overrides?.startOfISOWeek?this.overrides.startOfISOWeek(r):S6(r),this.startOfMonth=r=>this.overrides?.startOfMonth?this.overrides.startOfMonth(r):C6(r),this.startOfWeek=(r,i)=>this.overrides?.startOfWeek?this.overrides.startOfWeek(r,this.options):T6(r,this.options),this.startOfYear=r=>this.overrides?.startOfYear?this.overrides.startOfYear(r):k6(r),this.options={locale:qS,...s},this.overrides=a}getDigitMap(){const{numerals:s="latn"}=this.options,a=new Intl.NumberFormat("en-US",{numberingSystem:s}),r={};for(let i=0;i<10;i++)r[i.toString()]=a.format(i);return r}replaceDigits(s){const a=this.getDigitMap();return s.replace(/\d/g,r=>a[r]||r)}formatNumber(s){return this.replaceDigits(s.toString())}getMonthYearOrder(){const s=this.options.locale?.code;return s&&gn.yearFirstLocales.has(s)?"year-first":"month-first"}formatMonthYear(s){const{locale:a,timeZone:r,numerals:i}=this.options,o=a?.code;if(o&&gn.yearFirstLocales.has(o))try{return new Intl.DateTimeFormat(o,{month:"long",year:"numeric",timeZone:r,numberingSystem:i}).format(s)}catch{}const c=this.getMonthYearOrder()==="year-first"?"y LLLL":"LLLL y";return this.format(s,c)}}gn.yearFirstLocales=new Set(["eu","hu","ja","ja-Hira","ja-JP","ko","ko-KR","lt","lt-LT","lv","lv-LV","mn","mn-MN","zh","zh-CN","zh-HK","zh-TW"]);const Si=new gn;class pA{constructor(s,a,r=Si){this.date=s,this.displayMonth=a,this.outside=!!(a&&!r.isSameMonth(s,a)),this.dateLib=r}isEqualTo(s){return this.dateLib.isSameDay(s.date,this.date)&&this.dateLib.isSameMonth(s.displayMonth,this.displayMonth)}}class FG{constructor(s,a){this.date=s,this.weeks=a}}class IG{constructor(s,a){this.days=a,this.weekNumber=s}}function LG(t){return ft.createElement("button",{...t})}function BG(t){return ft.createElement("span",{...t})}function zG(t){const{size:s=24,orientation:a="left",className:r}=t;return ft.createElement("svg",{className:r,width:s,height:s,viewBox:"0 0 24 24"},a==="up"&&ft.createElement("polygon",{points:"6.77 17 12.5 11.43 18.24 17 20 15.28 12.5 8 5 15.28"}),a==="down"&&ft.createElement("polygon",{points:"6.77 8 12.5 13.57 18.24 8 20 9.72 12.5 17 5 9.72"}),a==="left"&&ft.createElement("polygon",{points:"16 18.112 9.81111111 12 16 5.87733333 14.0888889 4 6 12 14.0888889 20"}),a==="right"&&ft.createElement("polygon",{points:"8 18.112 14.18888889 12 8 5.87733333 9.91111111 4 18 12 9.91111111 20"}))}function UG(t){const{day:s,modifiers:a,...r}=t;return ft.createElement("td",{...r})}function VG(t){const{day:s,modifiers:a,...r}=t,i=ft.useRef(null);return ft.useEffect(()=>{a.focused&&i.current?.focus()},[a.focused]),ft.createElement("button",{ref:i,...r})}var zt;(function(t){t.Root="root",t.Chevron="chevron",t.Day="day",t.DayButton="day_button",t.CaptionLabel="caption_label",t.Dropdowns="dropdowns",t.Dropdown="dropdown",t.DropdownRoot="dropdown_root",t.Footer="footer",t.MonthGrid="month_grid",t.MonthCaption="month_caption",t.MonthsDropdown="months_dropdown",t.Month="month",t.Months="months",t.Nav="nav",t.NextMonthButton="button_next",t.PreviousMonthButton="button_previous",t.Week="week",t.Weeks="weeks",t.Weekday="weekday",t.Weekdays="weekdays",t.WeekNumber="week_number",t.WeekNumberHeader="week_number_header",t.YearsDropdown="years_dropdown"})(zt||(zt={}));var ga;(function(t){t.disabled="disabled",t.hidden="hidden",t.outside="outside",t.focused="focused",t.today="today"})(ga||(ga={}));var Qn;(function(t){t.range_end="range_end",t.range_middle="range_middle",t.range_start="range_start",t.selected="selected"})(Qn||(Qn={}));var mn;(function(t){t.weeks_before_enter="weeks_before_enter",t.weeks_before_exit="weeks_before_exit",t.weeks_after_enter="weeks_after_enter",t.weeks_after_exit="weeks_after_exit",t.caption_after_enter="caption_after_enter",t.caption_after_exit="caption_after_exit",t.caption_before_enter="caption_before_enter",t.caption_before_exit="caption_before_exit"})(mn||(mn={}));function $G(t){const{options:s,className:a,components:r,classNames:i,...o}=t,c=[i[zt.Dropdown],a].join(" "),u=s?.find(({value:f})=>f===o.value);return ft.createElement("span",{"data-disabled":o.disabled,className:i[zt.DropdownRoot]},ft.createElement(r.Select,{className:c,...o},s?.map(({value:f,label:x,disabled:h})=>ft.createElement(r.Option,{key:f,value:f,disabled:h},x))),ft.createElement("span",{className:i[zt.CaptionLabel],"aria-hidden":!0},u?.label,ft.createElement(r.Chevron,{orientation:"down",size:18,className:i[zt.Chevron]})))}function HG(t){return ft.createElement("div",{...t})}function WG(t){return ft.createElement("div",{...t})}function GG(t){const{calendarMonth:s,displayIndex:a,...r}=t;return ft.createElement("div",{...r},t.children)}function qG(t){const{calendarMonth:s,displayIndex:a,...r}=t;return ft.createElement("div",{...r})}function KG(t){return ft.createElement("table",{...t})}function YG(t){return ft.createElement("div",{...t})}const gA=v.createContext(void 0);function um(){const t=v.useContext(gA);if(t===void 0)throw new Error("useDayPicker() must be used within a custom component.");return t}function XG(t){const{components:s}=um();return ft.createElement(s.Dropdown,{...t})}function QG(t){const{onPreviousClick:s,onNextClick:a,previousMonth:r,nextMonth:i,...o}=t,{components:c,classNames:u,labels:{labelPrevious:f,labelNext:x}}=um(),h=v.useCallback(g=>{i&&a?.(g)},[i,a]),p=v.useCallback(g=>{r&&s?.(g)},[r,s]);return ft.createElement("nav",{...o},ft.createElement(c.PreviousMonthButton,{type:"button",className:u[zt.PreviousMonthButton],tabIndex:r?void 0:-1,"aria-disabled":r?void 0:!0,"aria-label":f(r),onClick:p},ft.createElement(c.Chevron,{disabled:r?void 0:!0,className:u[zt.Chevron],orientation:"left"})),ft.createElement(c.NextMonthButton,{type:"button",className:u[zt.NextMonthButton],tabIndex:i?void 0:-1,"aria-disabled":i?void 0:!0,"aria-label":x(i),onClick:h},ft.createElement(c.Chevron,{disabled:i?void 0:!0,orientation:"right",className:u[zt.Chevron]})))}function ZG(t){const{components:s}=um();return ft.createElement(s.Button,{...t})}function JG(t){return ft.createElement("option",{...t})}function eq(t){const{components:s}=um();return ft.createElement(s.Button,{...t})}function tq(t){const{rootRef:s,...a}=t;return ft.createElement("div",{...a,ref:s})}function sq(t){return ft.createElement("select",{...t})}function aq(t){const{week:s,...a}=t;return ft.createElement("tr",{...a})}function rq(t){return ft.createElement("th",{...t})}function nq(t){return ft.createElement("thead",{"aria-hidden":!0},ft.createElement("tr",{...t}))}function iq(t){const{week:s,...a}=t;return ft.createElement("th",{...a})}function lq(t){return ft.createElement("th",{...t})}function oq(t){return ft.createElement("tbody",{...t})}function cq(t){const{components:s}=um();return ft.createElement(s.Dropdown,{...t})}const dq=Object.freeze(Object.defineProperty({__proto__:null,Button:LG,CaptionLabel:BG,Chevron:zG,Day:UG,DayButton:VG,Dropdown:$G,DropdownNav:HG,Footer:WG,Month:GG,MonthCaption:qG,MonthGrid:KG,Months:YG,MonthsDropdown:XG,Nav:QG,NextMonthButton:ZG,Option:JG,PreviousMonthButton:eq,Root:tq,Select:sq,Week:aq,WeekNumber:iq,WeekNumberHeader:lq,Weekday:rq,Weekdays:nq,Weeks:oq,YearsDropdown:cq},Symbol.toStringTag,{value:"Module"}));function Gi(t,s,a=!1,r=Si){let{from:i,to:o}=t;const{differenceInCalendarDays:c,isSameDay:u}=r;return i&&o?(c(o,i)<0&&([i,o]=[o,i]),c(s,i)>=(a?1:0)&&c(o,s)>=(a?1:0)):!a&&o?u(o,s):!a&&i?u(i,s):!1}function vA(t){return!!(t&&typeof t=="object"&&"before"in t&&"after"in t)}function Lj(t){return!!(t&&typeof t=="object"&&"from"in t)}function jA(t){return!!(t&&typeof t=="object"&&"after"in t)}function yA(t){return!!(t&&typeof t=="object"&&"before"in t)}function NA(t){return!!(t&&typeof t=="object"&&"dayOfWeek"in t)}function bA(t,s){return Array.isArray(t)&&t.every(s.isDate)}function qi(t,s,a=Si){const r=Array.isArray(s)?s:[s],{isSameDay:i,differenceInCalendarDays:o,isAfter:c}=a;return r.some(u=>{if(typeof u=="boolean")return u;if(a.isDate(u))return i(t,u);if(bA(u,a))return u.includes(t);if(Lj(u))return Gi(u,t,!1,a);if(NA(u))return Array.isArray(u.dayOfWeek)?u.dayOfWeek.includes(t.getDay()):u.dayOfWeek===t.getDay();if(vA(u)){const f=o(u.before,t),x=o(u.after,t),h=f>0,p=x<0;return c(u.before,u.after)?p&&h:h||p}return jA(u)?o(t,u.after)>0:yA(u)?o(u.before,t)>0:typeof u=="function"?u(t):!1})}function uq(t,s,a,r,i){const{disabled:o,hidden:c,modifiers:u,showOutsideDays:f,broadcastCalendar:x,today:h}=s,{isSameDay:p,isSameMonth:g,startOfMonth:b,isBefore:N,endOfMonth:y,isAfter:S}=i,C=a&&b(a),T=r&&y(r),_={[ga.focused]:[],[ga.outside]:[],[ga.disabled]:[],[ga.hidden]:[],[ga.today]:[]},G={};for(const U of t){const{date:F,displayMonth:k}=U,E=!!(k&&!g(F,k)),A=!!(C&&N(F,C)),B=!!(T&&S(F,T)),H=!!(o&&qi(F,o,i)),M=!!(c&&qi(F,c,i))||A||B||!x&&!f&&E||x&&f===!1&&E,q=p(F,h??i.today());E&&_.outside.push(U),H&&_.disabled.push(U),M&&_.hidden.push(U),q&&_.today.push(U),u&&Object.keys(u).forEach(L=>{const re=u?.[L];re&&qi(F,re,i)&&(G[L]?G[L].push(U):G[L]=[U])})}return U=>{const F={[ga.focused]:!1,[ga.disabled]:!1,[ga.hidden]:!1,[ga.outside]:!1,[ga.today]:!1},k={};for(const E in _){const A=_[E];F[E]=A.some(B=>B===U)}for(const E in G)k[E]=G[E].some(A=>A===U);return{...F,...k}}}function mq(t,s,a={}){return Object.entries(t).filter(([,i])=>i===!0).reduce((i,[o])=>(a[o]?i.push(a[o]):s[ga[o]]?i.push(s[ga[o]]):s[Qn[o]]&&i.push(s[Qn[o]]),i),[s[zt.Day]])}function hq(t){return{...dq,...t}}function fq(t){const s={"data-mode":t.mode??void 0,"data-required":"required"in t?t.required:void 0,"data-multiple-months":t.numberOfMonths&&t.numberOfMonths>1||void 0,"data-week-numbers":t.showWeekNumber||void 0,"data-broadcast-calendar":t.broadcastCalendar||void 0,"data-nav-layout":t.navLayout||void 0};return Object.entries(t).forEach(([a,r])=>{a.startsWith("data-")&&(s[a]=r)}),s}function Bj(){const t={};for(const s in zt)t[zt[s]]=`rdp-${zt[s]}`;for(const s in ga)t[ga[s]]=`rdp-${ga[s]}`;for(const s in Qn)t[Qn[s]]=`rdp-${Qn[s]}`;for(const s in mn)t[mn[s]]=`rdp-${mn[s]}`;return t}function wA(t,s,a){return(a??new gn(s)).formatMonthYear(t)}const xq=wA;function pq(t,s,a){return(a??new gn(s)).format(t,"d")}function gq(t,s=Si){return s.format(t,"LLLL")}function vq(t,s,a){return(a??new gn(s)).format(t,"cccccc")}function jq(t,s=Si){return t<10?s.formatNumber(`0${t.toLocaleString()}`):s.formatNumber(`${t.toLocaleString()}`)}function yq(){return""}function SA(t,s=Si){return s.format(t,"yyyy")}const Nq=SA,bq=Object.freeze(Object.defineProperty({__proto__:null,formatCaption:wA,formatDay:pq,formatMonthCaption:xq,formatMonthDropdown:gq,formatWeekNumber:jq,formatWeekNumberHeader:yq,formatWeekdayName:vq,formatYearCaption:Nq,formatYearDropdown:SA},Symbol.toStringTag,{value:"Module"}));function wq(t){return t?.formatMonthCaption&&!t.formatCaption&&(t.formatCaption=t.formatMonthCaption),t?.formatYearCaption&&!t.formatYearDropdown&&(t.formatYearDropdown=t.formatYearCaption),{...bq,...t}}function Sq(t,s,a,r,i){const{startOfMonth:o,startOfYear:c,endOfYear:u,eachMonthOfInterval:f,getMonth:x}=i;return f({start:c(t),end:u(t)}).map(g=>{const b=r.formatMonthDropdown(g,i),N=x(g),y=s&&g<o(s)||a&&g>o(a)||!1;return{value:N,label:b,disabled:y}})}function Cq(t,s={},a={}){let r={...s?.[zt.Day]};return Object.entries(t).filter(([,i])=>i===!0).forEach(([i])=>{r={...r,...a?.[i]}}),r}function Tq(t,s,a){const r=t.today(),i=s?t.startOfISOWeek(r):t.startOfWeek(r),o=[];for(let c=0;c<7;c++){const u=t.addDays(i,c);o.push(u)}return o}function kq(t,s,a,r,i=!1){if(!t||!s)return;const{startOfYear:o,endOfYear:c,eachYearOfInterval:u,getYear:f}=r,x=o(t),h=c(s),p=u({start:x,end:h});return i&&p.reverse(),p.map(g=>{const b=a.formatYearDropdown(g,r);return{value:f(g),label:b,disabled:!1}})}function CA(t,s,a,r){let i=(r??new gn(a)).format(t,"PPPP");return s.today&&(i=`Today, ${i}`),s.selected&&(i=`${i}, selected`),i}const Eq=CA;function TA(t,s,a){return(a??new gn(s)).formatMonthYear(t)}const Aq=TA;function _q(t,s,a,r){let i=(r??new gn(a)).format(t,"PPPP");return s?.today&&(i=`Today, ${i}`),i}function Dq(t){return"Choose the Month"}function Oq(){return""}function Rq(t){return"Go to the Next Month"}function Pq(t){return"Go to the Previous Month"}function Mq(t,s,a){return(a??new gn(s)).format(t,"cccc")}function Fq(t,s){return`Week ${t}`}function Iq(t){return"Week Number"}function Lq(t){return"Choose the Year"}const Bq=Object.freeze(Object.defineProperty({__proto__:null,labelCaption:Aq,labelDay:Eq,labelDayButton:CA,labelGrid:TA,labelGridcell:_q,labelMonthDropdown:Dq,labelNav:Oq,labelNext:Rq,labelPrevious:Pq,labelWeekNumber:Fq,labelWeekNumberHeader:Iq,labelWeekday:Mq,labelYearDropdown:Lq},Symbol.toStringTag,{value:"Module"})),mm=t=>t instanceof HTMLElement?t:null,sg=t=>[...t.querySelectorAll("[data-animated-month]")??[]],zq=t=>mm(t.querySelector("[data-animated-month]")),ag=t=>mm(t.querySelector("[data-animated-caption]")),rg=t=>mm(t.querySelector("[data-animated-weeks]")),Uq=t=>mm(t.querySelector("[data-animated-nav]")),Vq=t=>mm(t.querySelector("[data-animated-weekdays]"));function $q(t,s,{classNames:a,months:r,focused:i,dateLib:o}){const c=v.useRef(null),u=v.useRef(r),f=v.useRef(!1);v.useLayoutEffect(()=>{const x=u.current;if(u.current=r,!s||!t.current||!(t.current instanceof HTMLElement)||r.length===0||x.length===0||r.length!==x.length)return;const h=o.isSameMonth(r[0].date,x[0].date),p=o.isAfter(r[0].date,x[0].date),g=p?a[mn.caption_after_enter]:a[mn.caption_before_enter],b=p?a[mn.weeks_after_enter]:a[mn.weeks_before_enter],N=c.current,y=t.current.cloneNode(!0);if(y instanceof HTMLElement?(sg(y).forEach(_=>{if(!(_ instanceof HTMLElement))return;const G=zq(_);G&&_.contains(G)&&_.removeChild(G);const U=ag(_);U&&U.classList.remove(g);const F=rg(_);F&&F.classList.remove(b)}),c.current=y):c.current=null,f.current||h||i)return;const S=N instanceof HTMLElement?sg(N):[],C=sg(t.current);if(C?.every(T=>T instanceof HTMLElement)&&S&&S.every(T=>T instanceof HTMLElement)){f.current=!0,t.current.style.isolation="isolate";const T=Uq(t.current);T&&(T.style.zIndex="1"),C.forEach((_,G)=>{const U=S[G];if(!U)return;_.style.position="relative",_.style.overflow="hidden";const F=ag(_);F&&F.classList.add(g);const k=rg(_);k&&k.classList.add(b);const E=()=>{f.current=!1,t.current&&(t.current.style.isolation=""),T&&(T.style.zIndex=""),F&&F.classList.remove(g),k&&k.classList.remove(b),_.style.position="",_.style.overflow="",_.contains(U)&&_.removeChild(U)};U.style.pointerEvents="none",U.style.position="absolute",U.style.overflow="hidden",U.setAttribute("aria-hidden","true");const A=Vq(U);A&&(A.style.opacity="0");const B=ag(U);B&&(B.classList.add(p?a[mn.caption_before_exit]:a[mn.caption_after_exit]),B.addEventListener("animationend",E));const H=rg(U);H&&H.classList.add(p?a[mn.weeks_before_exit]:a[mn.weeks_after_exit]),_.insertBefore(U,_.firstChild)})}})}function Hq(t,s,a,r){const i=t[0],o=t[t.length-1],{ISOWeek:c,fixedWeeks:u,broadcastCalendar:f}=a??{},{addDays:x,differenceInCalendarDays:h,differenceInCalendarMonths:p,endOfBroadcastWeek:g,endOfISOWeek:b,endOfMonth:N,endOfWeek:y,isAfter:S,startOfBroadcastWeek:C,startOfISOWeek:T,startOfWeek:_}=r,G=f?C(i,r):c?T(i):_(i),U=f?g(o):c?b(N(o)):y(N(o)),F=h(U,G),k=p(o,i)+1,E=[];for(let H=0;H<=F;H++){const M=x(G,H);if(s&&S(M,s))break;E.push(M)}const B=(f?35:42)*k;if(u&&E.length<B){const H=B-E.length;for(let M=0;M<H;M++){const q=x(E[E.length-1],1);E.push(q)}}return E}function Wq(t){const s=[];return t.reduce((a,r)=>{const i=r.weeks.reduce((o,c)=>o.concat(c.days.slice()),s.slice());return a.concat(i.slice())},s.slice())}function Gq(t,s,a,r){const{numberOfMonths:i=1}=a,o=[];for(let c=0;c<i;c++){const u=r.addMonths(t,c);if(s&&u>s)break;o.push(u)}return o}function vS(t,s,a,r){const{month:i,defaultMonth:o,today:c=r.today(),numberOfMonths:u=1}=t;let f=i||o||c;const{differenceInCalendarMonths:x,addMonths:h,startOfMonth:p}=r;if(a&&x(a,f)<u-1){const g=-1*(u-1);f=h(a,g)}return s&&x(f,s)<0&&(f=s),p(f)}function qq(t,s,a,r){const{addDays:i,endOfBroadcastWeek:o,endOfISOWeek:c,endOfMonth:u,endOfWeek:f,getISOWeek:x,getWeek:h,startOfBroadcastWeek:p,startOfISOWeek:g,startOfWeek:b}=r,N=t.reduce((y,S)=>{const C=a.broadcastCalendar?p(S,r):a.ISOWeek?g(S):b(S),T=a.broadcastCalendar?o(S):a.ISOWeek?c(u(S)):f(u(S)),_=s.filter(k=>k>=C&&k<=T),G=a.broadcastCalendar?35:42;if(a.fixedWeeks&&_.length<G){const k=s.filter(E=>{const A=G-_.length;return E>T&&E<=i(T,A)});_.push(...k)}const U=_.reduce((k,E)=>{const A=a.ISOWeek?x(E):h(E),B=k.find(M=>M.weekNumber===A),H=new pA(E,S,r);return B?B.days.push(H):k.push(new IG(A,[H])),k},[]),F=new FG(S,U);return y.push(F),y},[]);return a.reverseMonths?N.reverse():N}function Kq(t,s){let{startMonth:a,endMonth:r}=t;const{startOfYear:i,startOfDay:o,startOfMonth:c,endOfMonth:u,addYears:f,endOfYear:x,newDate:h,today:p}=s,{fromYear:g,toYear:b,fromMonth:N,toMonth:y}=t;!a&&N&&(a=N),!a&&g&&(a=s.newDate(g,0,1)),!r&&y&&(r=y),!r&&b&&(r=h(b,11,31));const S=t.captionLayout==="dropdown"||t.captionLayout==="dropdown-years";return a?a=c(a):g?a=h(g,0,1):!a&&S&&(a=i(f(t.today??p(),-100))),r?r=u(r):b?r=h(b,11,31):!r&&S&&(r=x(t.today??p())),[a&&o(a),r&&o(r)]}function Yq(t,s,a,r){if(a.disableNavigation)return;const{pagedNavigation:i,numberOfMonths:o=1}=a,{startOfMonth:c,addMonths:u,differenceInCalendarMonths:f}=r,x=i?o:1,h=c(t);if(!s)return u(h,x);if(!(f(s,t)<o))return u(h,x)}function Xq(t,s,a,r){if(a.disableNavigation)return;const{pagedNavigation:i,numberOfMonths:o}=a,{startOfMonth:c,addMonths:u,differenceInCalendarMonths:f}=r,x=i?o??1:1,h=c(t);if(!s)return u(h,-x);if(!(f(h,s)<=0))return u(h,-x)}function Qq(t){const s=[];return t.reduce((a,r)=>a.concat(r.weeks.slice()),s.slice())}function ix(t,s){const[a,r]=v.useState(t);return[s===void 0?a:s,r]}function Zq(t,s){const[a,r]=Kq(t,s),{startOfMonth:i,endOfMonth:o}=s,c=vS(t,a,r,s),[u,f]=ix(c,t.month?c:void 0);v.useEffect(()=>{const F=vS(t,a,r,s);f(F)},[t.timeZone]);const x=Gq(u,r,t,s),h=Hq(x,t.endMonth?o(t.endMonth):void 0,t,s),p=qq(x,h,t,s),g=Qq(p),b=Wq(p),N=Xq(u,a,t,s),y=Yq(u,r,t,s),{disableNavigation:S,onMonthChange:C}=t,T=F=>g.some(k=>k.days.some(E=>E.isEqualTo(F))),_=F=>{if(S)return;let k=i(F);a&&k<i(a)&&(k=i(a)),r&&k>i(r)&&(k=i(r)),f(k),C?.(k)};return{months:p,weeks:g,days:b,navStart:a,navEnd:r,previousMonth:N,nextMonth:y,goToMonth:_,goToDay:F=>{T(F)||_(F.date)}}}var mi;(function(t){t[t.Today=0]="Today",t[t.Selected=1]="Selected",t[t.LastFocused=2]="LastFocused",t[t.FocusedModifier=3]="FocusedModifier"})(mi||(mi={}));function jS(t){return!t[ga.disabled]&&!t[ga.hidden]&&!t[ga.outside]}function Jq(t,s,a,r){let i,o=-1;for(const c of t){const u=s(c);jS(u)&&(u[ga.focused]&&o<mi.FocusedModifier?(i=c,o=mi.FocusedModifier):r?.isEqualTo(c)&&o<mi.LastFocused?(i=c,o=mi.LastFocused):a(c.date)&&o<mi.Selected?(i=c,o=mi.Selected):u[ga.today]&&o<mi.Today&&(i=c,o=mi.Today))}return i||(i=t.find(c=>jS(s(c)))),i}function eK(t,s,a,r,i,o,c){const{ISOWeek:u,broadcastCalendar:f}=o,{addDays:x,addMonths:h,addWeeks:p,addYears:g,endOfBroadcastWeek:b,endOfISOWeek:N,endOfWeek:y,max:S,min:C,startOfBroadcastWeek:T,startOfISOWeek:_,startOfWeek:G}=c;let F={day:x,week:p,month:h,year:g,startOfWeek:k=>f?T(k,c):u?_(k):G(k),endOfWeek:k=>f?b(k):u?N(k):y(k)}[t](a,s==="after"?1:-1);return s==="before"&&r?F=S([r,F]):s==="after"&&i&&(F=C([i,F])),F}function kA(t,s,a,r,i,o,c,u=0){if(u>365)return;const f=eK(t,s,a.date,r,i,o,c),x=!!(o.disabled&&qi(f,o.disabled,c)),h=!!(o.hidden&&qi(f,o.hidden,c)),p=f,g=new pA(f,p,c);return!x&&!h?g:kA(t,s,g,r,i,o,c,u+1)}function tK(t,s,a,r,i){const{autoFocus:o}=t,[c,u]=v.useState(),f=Jq(s.days,a,r||(()=>!1),c),[x,h]=v.useState(o?f:void 0);return{isFocusTarget:y=>!!f?.isEqualTo(y),setFocused:h,focused:x,blur:()=>{u(x),h(void 0)},moveFocus:(y,S)=>{if(!x)return;const C=kA(y,S,x,s.navStart,s.navEnd,t,i);C&&(t.disableNavigation&&!s.days.some(_=>_.isEqualTo(C))||(s.goToDay(C),h(C)))}}}function sK(t,s){const{selected:a,required:r,onSelect:i}=t,[o,c]=ix(a,i?a:void 0),u=i?a:o,{isSameDay:f}=s,x=b=>u?.some(N=>f(N,b))??!1,{min:h,max:p}=t;return{selected:u,select:(b,N,y)=>{let S=[...u??[]];if(x(b)){if(u?.length===h||r&&u?.length===1)return;S=u?.filter(C=>!f(C,b))}else u?.length===p?S=[b]:S=[...S,b];return i||c(S),i?.(S,b,N,y),S},isSelected:x}}function aK(t,s,a=0,r=0,i=!1,o=Si){const{from:c,to:u}=s||{},{isSameDay:f,isAfter:x,isBefore:h}=o;let p;if(!c&&!u)p={from:t,to:a>0?void 0:t};else if(c&&!u)f(c,t)?a===0?p={from:c,to:t}:i?p={from:c,to:void 0}:p=void 0:h(t,c)?p={from:t,to:c}:p={from:c,to:t};else if(c&&u)if(f(c,t)&&f(u,t))i?p={from:c,to:u}:p=void 0;else if(f(c,t))p={from:c,to:a>0?void 0:t};else if(f(u,t))p={from:t,to:a>0?void 0:t};else if(h(t,c))p={from:t,to:u};else if(x(t,c))p={from:c,to:t};else if(x(t,u))p={from:c,to:t};else throw new Error("Invalid range");if(p?.from&&p?.to){const g=o.differenceInCalendarDays(p.to,p.from);r>0&&g>r?p={from:t,to:void 0}:a>1&&g<a&&(p={from:t,to:void 0})}return p}function rK(t,s,a=Si){const r=Array.isArray(s)?s:[s];let i=t.from;const o=a.differenceInCalendarDays(t.to,t.from),c=Math.min(o,6);for(let u=0;u<=c;u++){if(r.includes(i.getDay()))return!0;i=a.addDays(i,1)}return!1}function yS(t,s,a=Si){return Gi(t,s.from,!1,a)||Gi(t,s.to,!1,a)||Gi(s,t.from,!1,a)||Gi(s,t.to,!1,a)}function nK(t,s,a=Si){const r=Array.isArray(s)?s:[s];if(r.filter(u=>typeof u!="function").some(u=>typeof u=="boolean"?u:a.isDate(u)?Gi(t,u,!1,a):bA(u,a)?u.some(f=>Gi(t,f,!1,a)):Lj(u)?u.from&&u.to?yS(t,{from:u.from,to:u.to},a):!1:NA(u)?rK(t,u.dayOfWeek,a):vA(u)?a.isAfter(u.before,u.after)?yS(t,{from:a.addDays(u.after,1),to:a.addDays(u.before,-1)},a):qi(t.from,u,a)||qi(t.to,u,a):jA(u)||yA(u)?qi(t.from,u,a)||qi(t.to,u,a):!1))return!0;const c=r.filter(u=>typeof u=="function");if(c.length){let u=t.from;const f=a.differenceInCalendarDays(t.to,t.from);for(let x=0;x<=f;x++){if(c.some(h=>h(u)))return!0;u=a.addDays(u,1)}}return!1}function iK(t,s){const{disabled:a,excludeDisabled:r,selected:i,required:o,onSelect:c}=t,[u,f]=ix(i,c?i:void 0),x=c?i:u;return{selected:x,select:(g,b,N)=>{const{min:y,max:S}=t,C=g?aK(g,x,y,S,o,s):void 0;return r&&a&&C?.from&&C.to&&nK({from:C.from,to:C.to},a,s)&&(C.from=g,C.to=void 0),c||f(C),c?.(C,g,b,N),C},isSelected:g=>x&&Gi(x,g,!1,s)}}function lK(t,s){const{selected:a,required:r,onSelect:i}=t,[o,c]=ix(a,i?a:void 0),u=i?a:o,{isSameDay:f}=s;return{selected:u,select:(p,g,b)=>{let N=p;return!r&&u&&u&&f(p,u)&&(N=void 0),i||c(N),i?.(N,p,g,b),N},isSelected:p=>u?f(u,p):!1}}function oK(t,s){const a=lK(t,s),r=sK(t,s),i=iK(t,s);switch(t.mode){case"single":return a;case"multiple":return r;case"range":return i;default:return}}function cK(t){let s=t;s.timeZone&&(s={...t},s.today&&(s.today=new Sr(s.today,s.timeZone)),s.month&&(s.month=new Sr(s.month,s.timeZone)),s.defaultMonth&&(s.defaultMonth=new Sr(s.defaultMonth,s.timeZone)),s.startMonth&&(s.startMonth=new Sr(s.startMonth,s.timeZone)),s.endMonth&&(s.endMonth=new Sr(s.endMonth,s.timeZone)),s.mode==="single"&&s.selected?s.selected=new Sr(s.selected,s.timeZone):s.mode==="multiple"&&s.selected?s.selected=s.selected?.map(Ye=>new Sr(Ye,s.timeZone)):s.mode==="range"&&s.selected&&(s.selected={from:s.selected.from?new Sr(s.selected.from,s.timeZone):void 0,to:s.selected.to?new Sr(s.selected.to,s.timeZone):void 0}));const{components:a,formatters:r,labels:i,dateLib:o,locale:c,classNames:u}=v.useMemo(()=>{const Ye={...qS,...s.locale};return{dateLib:new gn({locale:Ye,weekStartsOn:s.broadcastCalendar?1:s.weekStartsOn,firstWeekContainsDate:s.firstWeekContainsDate,useAdditionalWeekYearTokens:s.useAdditionalWeekYearTokens,useAdditionalDayOfYearTokens:s.useAdditionalDayOfYearTokens,timeZone:s.timeZone,numerals:s.numerals},s.dateLib),components:hq(s.components),formatters:wq(s.formatters),labels:{...Bq,...s.labels},locale:Ye,classNames:{...Bj(),...s.classNames}}},[s.locale,s.broadcastCalendar,s.weekStartsOn,s.firstWeekContainsDate,s.useAdditionalWeekYearTokens,s.useAdditionalDayOfYearTokens,s.timeZone,s.numerals,s.dateLib,s.components,s.formatters,s.labels,s.classNames]),{captionLayout:f,mode:x,navLayout:h,numberOfMonths:p=1,onDayBlur:g,onDayClick:b,onDayFocus:N,onDayKeyDown:y,onDayMouseEnter:S,onDayMouseLeave:C,onNextClick:T,onPrevClick:_,showWeekNumber:G,styles:U}=s,{formatCaption:F,formatDay:k,formatMonthDropdown:E,formatWeekNumber:A,formatWeekNumberHeader:B,formatWeekdayName:H,formatYearDropdown:M}=r,q=Zq(s,o),{days:L,months:re,navStart:V,navEnd:ee,previousMonth:me,nextMonth:W,goToMonth:se}=q,Z=uq(L,s,V,ee,o),{isSelected:I,select:Q,selected:O}=oK(s,o)??{},{blur:te,focused:oe,isFocusTarget:je,moveFocus:Me,setFocused:ve}=tK(s,q,Z,I??(()=>!1),o),{labelDayButton:ce,labelGridcell:Pe,labelGrid:Qe,labelMonthDropdown:vt,labelNav:xt,labelPrevious:ht,labelNext:bt,labelWeekday:ot,labelWeekNumber:hs,labelWeekNumberHeader:fs,labelYearDropdown:Ps}=i,ps=v.useMemo(()=>Tq(o,s.ISOWeek),[o,s.ISOWeek]),As=x!==void 0||b!==void 0,cs=v.useCallback(()=>{me&&(se(me),_?.(me))},[me,se,_]),_t=v.useCallback(()=>{W&&(se(W),T?.(W))},[se,W,T]),sa=v.useCallback((Ye,pt)=>yt=>{yt.preventDefault(),yt.stopPropagation(),ve(Ye),Q?.(Ye.date,pt,yt),b?.(Ye.date,pt,yt)},[Q,b,ve]),Te=v.useCallback((Ye,pt)=>yt=>{ve(Ye),N?.(Ye.date,pt,yt)},[N,ve]),Ne=v.useCallback((Ye,pt)=>yt=>{te(),g?.(Ye.date,pt,yt)},[te,g]),he=v.useCallback((Ye,pt)=>yt=>{const Kt={ArrowLeft:[yt.shiftKey?"month":"day",s.dir==="rtl"?"after":"before"],ArrowRight:[yt.shiftKey?"month":"day",s.dir==="rtl"?"before":"after"],ArrowDown:[yt.shiftKey?"year":"week","after"],ArrowUp:[yt.shiftKey?"year":"week","before"],PageUp:[yt.shiftKey?"year":"month","before"],PageDown:[yt.shiftKey?"year":"month","after"],Home:["startOfWeek","before"],End:["endOfWeek","after"]};if(Kt[yt.key]){yt.preventDefault(),yt.stopPropagation();const[Jt,Ut]=Kt[yt.key];Me(Jt,Ut)}y?.(Ye.date,pt,yt)},[Me,y,s.dir]),Ue=v.useCallback((Ye,pt)=>yt=>{S?.(Ye.date,pt,yt)},[S]),st=v.useCallback((Ye,pt)=>yt=>{C?.(Ye.date,pt,yt)},[C]),Ct=v.useCallback(Ye=>pt=>{const yt=Number(pt.target.value),Kt=o.setMonth(o.startOfMonth(Ye),yt);se(Kt)},[o,se]),Dt=v.useCallback(Ye=>pt=>{const yt=Number(pt.target.value),Kt=o.setYear(o.startOfMonth(Ye),yt);se(Kt)},[o,se]),{className:Zt,style:ts}=v.useMemo(()=>({className:[u[zt.Root],s.className].filter(Boolean).join(" "),style:{...U?.[zt.Root],...s.style}}),[u,s.className,s.style,U]),ke=fq(s),we=v.useRef(null);$q(we,!!s.animate,{classNames:u,months:re,focused:oe,dateLib:o});const nt={dayPickerProps:s,selected:O,select:Q,isSelected:I,months:re,nextMonth:W,previousMonth:me,goToMonth:se,getModifiers:Z,components:a,classNames:u,styles:U,labels:i,formatters:r};return ft.createElement(gA.Provider,{value:nt},ft.createElement(a.Root,{rootRef:s.animate?we:void 0,className:Zt,style:ts,dir:s.dir,id:s.id,lang:s.lang,nonce:s.nonce,title:s.title,role:s.role,"aria-label":s["aria-label"],"aria-labelledby":s["aria-labelledby"],...ke},ft.createElement(a.Months,{className:u[zt.Months],style:U?.[zt.Months]},!s.hideNavigation&&!h&&ft.createElement(a.Nav,{"data-animated-nav":s.animate?"true":void 0,className:u[zt.Nav],style:U?.[zt.Nav],"aria-label":xt(),onPreviousClick:cs,onNextClick:_t,previousMonth:me,nextMonth:W}),re.map((Ye,pt)=>ft.createElement(a.Month,{"data-animated-month":s.animate?"true":void 0,className:u[zt.Month],style:U?.[zt.Month],key:pt,displayIndex:pt,calendarMonth:Ye},h==="around"&&!s.hideNavigation&&pt===0&&ft.createElement(a.PreviousMonthButton,{type:"button",className:u[zt.PreviousMonthButton],tabIndex:me?void 0:-1,"aria-disabled":me?void 0:!0,"aria-label":ht(me),onClick:cs,"data-animated-button":s.animate?"true":void 0},ft.createElement(a.Chevron,{disabled:me?void 0:!0,className:u[zt.Chevron],orientation:s.dir==="rtl"?"right":"left"})),ft.createElement(a.MonthCaption,{"data-animated-caption":s.animate?"true":void 0,className:u[zt.MonthCaption],style:U?.[zt.MonthCaption],calendarMonth:Ye,displayIndex:pt},f?.startsWith("dropdown")?ft.createElement(a.DropdownNav,{className:u[zt.Dropdowns],style:U?.[zt.Dropdowns]},(()=>{const yt=f==="dropdown"||f==="dropdown-months"?ft.createElement(a.MonthsDropdown,{key:"month",className:u[zt.MonthsDropdown],"aria-label":vt(),classNames:u,components:a,disabled:!!s.disableNavigation,onChange:Ct(Ye.date),options:Sq(Ye.date,V,ee,r,o),style:U?.[zt.Dropdown],value:o.getMonth(Ye.date)}):ft.createElement("span",{key:"month"},E(Ye.date,o)),Kt=f==="dropdown"||f==="dropdown-years"?ft.createElement(a.YearsDropdown,{key:"year",className:u[zt.YearsDropdown],"aria-label":Ps(o.options),classNames:u,components:a,disabled:!!s.disableNavigation,onChange:Dt(Ye.date),options:kq(V,ee,r,o,!!s.reverseYears),style:U?.[zt.Dropdown],value:o.getYear(Ye.date)}):ft.createElement("span",{key:"year"},M(Ye.date,o));return o.getMonthYearOrder()==="year-first"?[Kt,yt]:[yt,Kt]})(),ft.createElement("span",{role:"status","aria-live":"polite",style:{border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"absolute",width:"1px",whiteSpace:"nowrap",wordWrap:"normal"}},F(Ye.date,o.options,o))):ft.createElement(a.CaptionLabel,{className:u[zt.CaptionLabel],role:"status","aria-live":"polite"},F(Ye.date,o.options,o))),h==="around"&&!s.hideNavigation&&pt===p-1&&ft.createElement(a.NextMonthButton,{type:"button",className:u[zt.NextMonthButton],tabIndex:W?void 0:-1,"aria-disabled":W?void 0:!0,"aria-label":bt(W),onClick:_t,"data-animated-button":s.animate?"true":void 0},ft.createElement(a.Chevron,{disabled:W?void 0:!0,className:u[zt.Chevron],orientation:s.dir==="rtl"?"left":"right"})),pt===p-1&&h==="after"&&!s.hideNavigation&&ft.createElement(a.Nav,{"data-animated-nav":s.animate?"true":void 0,className:u[zt.Nav],style:U?.[zt.Nav],"aria-label":xt(),onPreviousClick:cs,onNextClick:_t,previousMonth:me,nextMonth:W}),ft.createElement(a.MonthGrid,{role:"grid","aria-multiselectable":x==="multiple"||x==="range","aria-label":Qe(Ye.date,o.options,o)||void 0,className:u[zt.MonthGrid],style:U?.[zt.MonthGrid]},!s.hideWeekdays&&ft.createElement(a.Weekdays,{"data-animated-weekdays":s.animate?"true":void 0,className:u[zt.Weekdays],style:U?.[zt.Weekdays]},G&&ft.createElement(a.WeekNumberHeader,{"aria-label":fs(o.options),className:u[zt.WeekNumberHeader],style:U?.[zt.WeekNumberHeader],scope:"col"},B()),ps.map(yt=>ft.createElement(a.Weekday,{"aria-label":ot(yt,o.options,o),className:u[zt.Weekday],key:String(yt),style:U?.[zt.Weekday],scope:"col"},H(yt,o.options,o)))),ft.createElement(a.Weeks,{"data-animated-weeks":s.animate?"true":void 0,className:u[zt.Weeks],style:U?.[zt.Weeks]},Ye.weeks.map(yt=>ft.createElement(a.Week,{className:u[zt.Week],key:yt.weekNumber,style:U?.[zt.Week],week:yt},G&&ft.createElement(a.WeekNumber,{week:yt,style:U?.[zt.WeekNumber],"aria-label":hs(yt.weekNumber,{locale:c}),className:u[zt.WeekNumber],scope:"row",role:"rowheader"},A(yt.weekNumber,o)),yt.days.map(Kt=>{const{date:Jt}=Kt,Ut=Z(Kt);if(Ut[ga.focused]=!Ut.hidden&&!!oe?.isEqualTo(Kt),Ut[Qn.selected]=I?.(Jt)||Ut.selected,Lj(O)){const{from:ys,to:J}=O;Ut[Qn.range_start]=!!(ys&&J&&o.isSameDay(Jt,ys)),Ut[Qn.range_end]=!!(ys&&J&&o.isSameDay(Jt,J)),Ut[Qn.range_middle]=Gi(O,Jt,!0,o)}const Ia=Cq(Ut,U,s.modifiersStyles),La=mq(Ut,u,s.modifiersClassNames),nr=!As&&!Ut.hidden?Pe(Jt,Ut,o.options,o):void 0;return ft.createElement(a.Day,{key:`${o.format(Jt,"yyyy-MM-dd")}_${o.format(Kt.displayMonth,"yyyy-MM")}`,day:Kt,modifiers:Ut,className:La.join(" "),style:Ia,role:"gridcell","aria-selected":Ut.selected||void 0,"aria-label":nr,"data-day":o.format(Jt,"yyyy-MM-dd"),"data-month":Kt.outside?o.format(Jt,"yyyy-MM"):void 0,"data-selected":Ut.selected||void 0,"data-disabled":Ut.disabled||void 0,"data-hidden":Ut.hidden||void 0,"data-outside":Kt.outside||void 0,"data-focused":Ut.focused||void 0,"data-today":Ut.today||void 0},!Ut.hidden&&As?ft.createElement(a.DayButton,{className:u[zt.DayButton],style:U?.[zt.DayButton],type:"button",day:Kt,modifiers:Ut,disabled:Ut.disabled||void 0,tabIndex:je(Kt)?0:-1,"aria-label":ce(Jt,Ut,o.options,o),onClick:sa(Kt,Ut),onBlur:Ne(Kt,Ut),onFocus:Te(Kt,Ut),onKeyDown:he(Kt,Ut),onMouseEnter:Ue(Kt,Ut),onMouseLeave:st(Kt,Ut)},k(Jt,o.options,o)):!Ut.hidden&&k(Kt.date,o.options,o))})))))))),s.footer&&ft.createElement(a.Footer,{className:u[zt.Footer],style:U?.[zt.Footer],role:"status","aria-live":"polite"},s.footer)))}function EA({className:t,classNames:s,showOutsideDays:a=!0,captionLayout:r="label",buttonVariant:i="ghost",formatters:o,components:c,...u}){const f=Bj();return e.jsx(cK,{showOutsideDays:a,className:Je("bg-background group/calendar p-3 [--cell-size:--spacing(8)] [[data-slot=card-content]_&]:bg-transparent [[data-slot=popover-content]_&]:bg-transparent",String.raw`rtl:**:[.rdp-button\_next>svg]:rotate-180`,String.raw`rtl:**:[.rdp-button\_previous>svg]:rotate-180`,t),captionLayout:r,formatters:{formatMonthDropdown:x=>x.toLocaleString("default",{month:"short"}),...o},classNames:{root:Je("w-fit",f.root),months:Je("flex gap-4 flex-col md:flex-row relative",f.months),month:Je("flex flex-col w-full gap-4",f.month),nav:Je("flex items-center gap-1 w-full absolute top-0 inset-x-0 justify-between",f.nav),button_previous:Je(pg({variant:i}),"size-(--cell-size) aria-disabled:opacity-50 p-0 select-none",f.button_previous),button_next:Je(pg({variant:i}),"size-(--cell-size) aria-disabled:opacity-50 p-0 select-none",f.button_next),month_caption:Je("flex items-center justify-center h-(--cell-size) w-full px-(--cell-size)",f.month_caption),dropdowns:Je("w-full flex items-center text-sm font-medium justify-center h-(--cell-size) gap-1.5",f.dropdowns),dropdown_root:Je("relative has-focus:border-ring border border-input shadow-xs has-focus:ring-ring/50 has-focus:ring-[3px] rounded-md",f.dropdown_root),dropdown:Je("absolute bg-popover inset-0 opacity-0",f.dropdown),caption_label:Je("select-none font-medium",r==="label"?"text-sm":"rounded-md pl-2 pr-1 flex items-center gap-1 text-sm h-8 [&>svg]:text-muted-foreground [&>svg]:size-3.5",f.caption_label),table:"w-full border-collapse",weekdays:Je("flex",f.weekdays),weekday:Je("text-muted-foreground rounded-md flex-1 font-normal text-[0.8rem] select-none",f.weekday),week:Je("flex w-full mt-2",f.week),week_number_header:Je("select-none w-(--cell-size)",f.week_number_header),week_number:Je("text-[0.8rem] select-none text-muted-foreground",f.week_number),day:Je("relative w-full h-full p-0 text-center [&:first-child[data-selected=true]_button]:rounded-l-md [&:last-child[data-selected=true]_button]:rounded-r-md group/day aspect-square select-none",f.day),range_start:Je("rounded-l-md bg-accent",f.range_start),range_middle:Je("rounded-none",f.range_middle),range_end:Je("rounded-r-md bg-accent",f.range_end),today:Je("bg-accent text-accent-foreground rounded-md data-[selected=true]:rounded-none",f.today),outside:Je("text-muted-foreground aria-selected:text-muted-foreground",f.outside),disabled:Je("text-muted-foreground opacity-50",f.disabled),hidden:Je("invisible",f.hidden),...s},components:{Root:({className:x,rootRef:h,...p})=>e.jsx("div",{"data-slot":"calendar",ref:h,className:Je(x),...p}),Chevron:({className:x,orientation:h,...p})=>h==="left"?e.jsx(KS,{className:Je("size-4",x),...p}):h==="right"?e.jsx(pv,{className:Je("size-4",x),...p}):e.jsx(Mf,{className:Je("size-4",x),...p}),DayButton:dK,WeekNumber:({children:x,...h})=>e.jsx("td",{...h,children:e.jsx("div",{className:"flex size-(--cell-size) items-center justify-center text-center",children:x})}),...c},...u})}function dK({className:t,day:s,modifiers:a,...r}){const i=Bj(),o=v.useRef(null);return v.useEffect(()=>{a.focused&&o.current?.focus()},[a.focused]),e.jsx(R,{ref:o,variant:"ghost",size:"icon","data-day":s.date.toLocaleDateString(),"data-selected-single":a.selected&&!a.range_start&&!a.range_end&&!a.range_middle,"data-range-start":a.range_start,"data-range-end":a.range_end,"data-range-middle":a.range_middle,className:Je("data-[selected-single=true]:bg-primary data-[selected-single=true]:text-primary-foreground data-[range-middle=true]:bg-accent data-[range-middle=true]:text-accent-foreground data-[range-start=true]:bg-primary data-[range-start=true]:text-primary-foreground data-[range-end=true]:bg-primary data-[range-end=true]:text-primary-foreground group-data-[focused=true]/day:border-ring group-data-[focused=true]/day:ring-ring/50 dark:hover:text-accent-foreground flex aspect-square size-auto w-full min-w-(--cell-size) flex-col gap-1 leading-none font-normal group-data-[focused=true]/day:relative group-data-[focused=true]/day:z-10 group-data-[focused=true]/day:ring-[3px] data-[range-end=true]:rounded-md data-[range-end=true]:rounded-r-md data-[range-middle=true]:rounded-none data-[range-start=true]:rounded-md data-[range-start=true]:rounded-l-md [&>span]:text-xs [&>span]:opacity-70",i.day,t),...r})}const uK=({open:t,onClose:s,service:a})=>{const{toast:r}=hA(),{inviteCode:i}=sl(),[o,c]=v.useState(1),[u,f]=v.useState(""),[x,h]=v.useState(!1),[p,g]=v.useState(null),[b,N]=v.useState(""),[y,S]=v.useState({name:"",email:"",phone:"",notes:""}),C=["09:00 AM","10:00 AM","11:00 AM","12:00 PM","01:00 PM","02:00 PM","03:00 PM","04:00 PM","05:00 PM"],T=F=>{S({...y,[F.target.name]:F.target.value})},_=async()=>{try{if(!p||!b)throw new Error("Please select a date and time");const[F,k]=b.split(" ");let[E,A]=F.split(":").map(Number);k==="PM"&&E!==12&&(E+=12),k==="AM"&&E===12&&(E=0);const B=new Date(p);B.setHours(E,A,0,0);const H=ee=>{if(!ee)return 60;const me=ee.match(/\d+/);if(!me)return 60;const W=parseInt(me[0]);return ee.toLowerCase().includes("hour")?W*60:W},M={inviteCode:i||window.location.pathname.split("/").filter(Boolean).pop(),customerName:y.name,customerEmail:y.email,customerPhone:y.phone,service:a.name,serviceId:a._id||a.id,time:B.toISOString(),durationMinutes:H(a.duration),notes:y.notes,price:a.price},q=localStorage.getItem("customerToken"),L=q?{Authorization:`Bearer ${q}`}:{},re=await ye.post("/public/appointments",M,{headers:L}),V=`BOOK-${Date.now()}`;return f(V),{success:!0,bookingNum:V,data:re.data}}catch(F){return console.error("❌ Booking error:",F),console.error("Error response:",F.response?.data),console.error("Booking data sent:",bookingData),{success:!1,error:F.response?.data?.message||F.message||"Failed to create booking"}}},G=async()=>{if(!y.name||!y.email||!y.phone){r({title:"Missing Information",description:"Please fill in all required fields.",variant:"destructive"});return}if(!p){r({title:"Select Date",description:"Please select a date for your appointment.",variant:"destructive"});return}if(!b){r({title:"Select Time",description:"Please select a time slot for your appointment.",variant:"destructive"});return}h(!0);const F=await _();h(!1),F.success?(r({title:"Booking Confirmed!",description:`Your appointment for ${a.name} has been booked successfully.`}),c(3)):r({title:"Booking Failed",description:F.error,variant:"destructive"})},U=()=>{c(1),g(null),N(""),S({name:"",email:"",phone:"",notes:""}),f(""),h(!1),s()};return a?e.jsx(Ft,{open:t,onOpenChange:U,children:e.jsxs(It,{className:"max-w-2xl max-h-[90vh] overflow-y-auto glass-panel",children:[e.jsx(Lt,{children:e.jsx(Bt,{children:"Book Service"})}),e.jsx("div",{className:"flex items-center justify-between mb-6",children:["Details","Schedule","Confirmed"].map((F,k)=>e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`h-8 w-8 rounded-full flex items-center justify-center text-sm font-semibold ${o>k+1?"bg-success text-success-foreground":o===k+1?"bg-primary text-primary-foreground":"bg-muted text-muted-foreground"}`,children:o>k+1?"✓":k+1}),k<2&&e.jsx("div",{className:`h-1 w-12 mx-2 ${o>k+1?"bg-success":"bg-muted"}`})]},F))}),o===1&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"font-semibold text-foreground",children:"Service Details"}),e.jsxs("div",{className:"bg-secondary/20 p-4 rounded-lg space-y-3",children:[a.image&&e.jsx("img",{src:a.image,alt:a.name,className:"w-full h-32 object-cover rounded-lg"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-lg",children:a.name}),e.jsx("p",{className:"text-sm text-muted-foreground",children:a.description})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(Qt,{className:"h-4 w-4"}),a.duration]}),e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(ea,{className:"h-4 w-4"}),"KES ",a.price?.toLocaleString()]})]})]}),e.jsx(Fn,{}),e.jsx("h3",{className:"font-semibold text-foreground",children:"Your Information"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(ae,{htmlFor:"name",className:"flex items-center gap-2",children:[e.jsx(na,{className:"h-4 w-4"}),"Full Name *"]}),e.jsx(fe,{id:"name",name:"name",value:y.name,onChange:T,placeholder:"John Doe",required:!0})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(ae,{htmlFor:"email",className:"flex items-center gap-2",children:[e.jsx(Gs,{className:"h-4 w-4"}),"Email *"]}),e.jsx(fe,{id:"email",name:"email",type:"email",value:y.email,onChange:T,placeholder:"john@example.com",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(ae,{htmlFor:"phone",className:"flex items-center gap-2",children:[e.jsx($s,{className:"h-4 w-4"}),"Phone *"]}),e.jsx(fe,{id:"phone",name:"phone",value:y.phone,onChange:T,placeholder:"+254 700 000000",required:!0})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ae,{htmlFor:"notes",children:"Special Requests (Optional)"}),e.jsx(Ts,{id:"notes",name:"notes",value:y.notes,onChange:T,placeholder:"Any special requests or preferences...",rows:3})]})]}),e.jsx(R,{className:"w-full",onClick:()=>{if(!y.name||!y.email||!y.phone){r({title:"Missing Information",description:"Please fill in all required fields.",variant:"destructive"});return}c(2)},children:"Continue to Schedule"})]}),o===2&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"font-semibold text-foreground",children:"Choose Date & Time"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(ae,{className:"flex items-center gap-2",children:[e.jsx(ms,{className:"h-4 w-4"}),"Select Date"]}),e.jsx(EA,{mode:"single",selected:p,onSelect:g,disabled:F=>F<new Date||F<new Date().setHours(0,0,0,0),className:"rounded-md border"})]}),p&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs(ae,{className:"flex items-center gap-2",children:[e.jsx(Qt,{className:"h-4 w-4"}),"Select Time Slot"]}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:C.map(F=>e.jsx(R,{variant:b===F?"default":"outline",size:"sm",onClick:()=>N(F),className:"w-full",children:F},F))})]}),p&&b&&e.jsxs("div",{className:"bg-blue-50 dark:bg-blue-950/20 p-4 rounded-lg border border-blue-200 dark:border-blue-900",children:[e.jsx(Cs,{className:"h-5 w-5 text-blue-600 dark:text-blue-400 mb-2"}),e.jsxs("p",{className:"text-sm text-blue-600 dark:text-blue-400",children:[e.jsx("strong",{children:"Appointment Summary:"}),e.jsx("br",{}),a.name,e.jsx("br",{}),p.toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),e.jsx("br",{}),"Time: ",b,e.jsx("br",{}),"Duration: ",a.duration,e.jsx("br",{}),"Price: KES ",a.price?.toLocaleString()]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(R,{variant:"outline",className:"flex-1",onClick:()=>c(1),children:"Back"}),e.jsx(R,{className:"flex-1",onClick:G,disabled:x||!p||!b,children:x?"Processing...":"Confirm Booking"})]})]}),o===3&&e.jsxs("div",{className:"text-center space-y-4 py-8",children:[e.jsx("div",{className:"h-16 w-16 mx-auto bg-success/10 rounded-full flex items-center justify-center",children:e.jsx(ai,{className:"h-10 w-10 text-success"})}),e.jsx("h3",{className:"text-2xl font-bold text-foreground",children:"Booking Confirmed!"}),e.jsxs("p",{className:"text-muted-foreground",children:["Your appointment for ",e.jsx("strong",{children:a.name})," has been successfully booked."]}),p&&b&&e.jsx("div",{className:"bg-secondary/20 p-4 rounded-lg inline-block",children:e.jsxs("p",{className:"text-sm",children:[e.jsx("strong",{children:"Date:"})," ",p.toLocaleDateString(),e.jsx("br",{}),e.jsx("strong",{children:"Time:"})," ",b,e.jsx("br",{}),e.jsx("strong",{children:"Duration:"})," ",a.duration]})}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["A confirmation email has been sent to ",y.email]}),e.jsx(R,{className:"w-full",onClick:U,children:"Done"})]})]})}):null},mK=()=>{const[t,s]=v.useState([]),[a,r]=v.useState(!0),[i,o]=v.useState(null),[c,u]=v.useState(!1),{socket:f}=da(),{inviteCode:x}=sl(),h=Ka();v.useEffect(()=>{localStorage.getItem("customerToken")?p():(r(!1),s([]))},[]),v.useEffect(()=>{if(!f||!localStorage.getItem("customerToken"))return;const y=()=>{localStorage.getItem("customerToken")&&p()};return f.on("order_updated",y),()=>{f.off("order_updated",y)}},[f]);const p=async()=>{r(!0),o(null),u(!1);try{const N=localStorage.getItem("customerToken");if(!N){s([]),r(!1);return}const S=(await ye.get("/customer/orders",{headers:{Authorization:`Bearer ${N}`}})).data,C=Array.isArray(S)?S:S.orders||[];s(C),console.log(`✅ Loaded ${C.length} orders for current customer`)}catch(N){if(console.error("Error fetching orders:",N),N.response?.status===401)o("Please log in to view your orders"),u(!0);else if(N.response?.status===400&&N.response?.data?.requiresRelogin)o("Your session has expired. Please log in again to view your orders."),u(!0),localStorage.removeItem("customerToken");else if(N.response?.status===400){const y=N.response?.data?.message||"Unable to load orders";o(y),(y.toLowerCase().includes("email")||y.toLowerCase().includes("login"))&&u(!0)}else o("Failed to load orders. Please try again.")}finally{r(!1)}},g=N=>{switch(N){case"pending":return e.jsx(Qt,{className:"h-4 w-4"});case"processing":return e.jsx(qt,{className:"h-4 w-4"});case"shipped":return e.jsx(Yc,{className:"h-4 w-4"});case"delivered":return e.jsx(ai,{className:"h-4 w-4"})}},b=N=>{switch(N?.toLowerCase()){case"draft":case"pending":return"secondary";case"submitted":case"processing":case"under_review":return"default";case"approved":case"shipped":return"default";case"delivered":return"outline";case"cancelled":case"rejected":return"destructive";default:return"secondary"}};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-2xl font-bold text-foreground",children:"Order History"}),e.jsx(R,{variant:"outline",size:"sm",onClick:p,disabled:a,children:a?"Refreshing...":"Refresh"})]}),a?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"Loading your orders..."})]}):i?e.jsx(K,{className:"glass-card",children:e.jsxs(X,{className:"p-8 text-center",children:[e.jsx(Cs,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:i}),e.jsx("div",{className:"flex gap-2 justify-center",children:c?e.jsxs(R,{onClick:()=>{h(x?`/client/login/${x}`:"/client/login")},children:[e.jsx(Nv,{className:"h-4 w-4 mr-2"}),"Log In Again"]}):e.jsx(R,{onClick:p,children:"Try Again"})})]})}):t.length===0?e.jsx(K,{className:"glass-card",children:e.jsxs(X,{className:"p-8 text-center",children:[e.jsx(qt,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No orders yet"}),e.jsx("p",{className:"text-muted-foreground",children:"Your order history will appear here"})]})}):t.map(N=>e.jsxs(K,{className:"glass-card",children:[e.jsxs(pe,{className:"pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(ge,{className:"text-base",children:["Order ",N.orderId]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(_e,{variant:b(N.status?.toLowerCase()),className:"gap-1",children:[g(N.status?.toLowerCase()),N.status]}),e.jsx(_e,{variant:N.paymentStatus==="Paid"?"default":"secondary",children:N.paymentStatus})]})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm text-muted-foreground",children:[e.jsx("span",{children:new Date(N.date||N.createdAt).toLocaleDateString()}),e.jsx("span",{children:N.customer?.name})]})]}),e.jsxs(X,{className:"space-y-3",children:[e.jsx("div",{className:"space-y-2",children:N.items&&N.items.length>0?N.items.map((y,S)=>e.jsxs("div",{className:"text-sm flex justify-between",children:[e.jsxs("span",{className:"text-foreground",children:[y.name||"Product"," × ",y.quantity]}),e.jsxs("span",{className:"text-muted-foreground",children:["KES ",(y.price*y.quantity).toLocaleString("en-KE",{minimumFractionDigits:2,maximumFractionDigits:2})]})]},S)):e.jsx("p",{className:"text-sm text-muted-foreground",children:"No items"})}),N.deliveryInfo?.address&&e.jsxs("div",{className:"text-xs text-muted-foreground pt-2 border-t border-border",children:[e.jsx("strong",{children:"Delivery:"})," ",N.deliveryInfo.address,", ",N.deliveryInfo.city]}),e.jsxs("div",{className:"flex items-center justify-between pt-2 border-t border-border",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold text-foreground",children:"Total: "}),e.jsxs("span",{className:"text-lg font-bold text-green-600",children:["KES ",N.total?.toLocaleString("en-KE",{minimumFractionDigits:2,maximumFractionDigits:2})||"0.00"]})]}),e.jsxs("div",{className:"flex gap-2",children:[N.trackingNumber&&e.jsx(R,{variant:"outline",size:"sm",children:"Track"}),e.jsx(R,{variant:"ghost",size:"sm",children:"Details"})]})]})]})]},N._id))]})},hK=()=>{const[t,s]=v.useState([]),[a,r]=v.useState(!0),[i,o]=v.useState(null),[c,u]=v.useState(!1),{socket:f}=da(),{inviteCode:x}=sl(),h=Ka();v.useEffect(()=>{localStorage.getItem("customerToken")?p():(r(!1),s([]))},[]),v.useEffect(()=>{if(!f||!localStorage.getItem("customerToken"))return;const y=()=>{localStorage.getItem("customerToken")&&p()};return f.on("appointment_updated",y),()=>{f.off("appointment_updated",y)}},[f]);const p=async()=>{r(!0),o(null),u(!1);try{const N=localStorage.getItem("customerToken");if(!N){s([]),r(!1);return}try{const S=(await ye.get("/customer/appointments",{headers:{Authorization:`Bearer ${N}`}})).data,C=Array.isArray(S)?S:S.appointments||[];s(C),console.log(`✅ Loaded ${C.length} bookings for current customer`)}catch(y){if(y.response?.status===404)s([]);else throw y}}catch(N){if(console.error("Error fetching bookings:",N),N.response?.status===401)o("Please log in to view your bookings"),u(!0);else if(N.response?.status===400&&N.response?.data?.requiresRelogin)o("Your session has expired. Please log in again to view your bookings."),u(!0),localStorage.removeItem("customerToken");else if(N.response?.status===400){const y=N.response?.data?.message||"Unable to load bookings";o(y),(y.toLowerCase().includes("email")||y.toLowerCase().includes("login"))&&u(!0)}else o("Failed to load bookings. Please try again.")}finally{r(!1)}},g=N=>{switch(N?.toLowerCase()){case"confirmed":case"completed":return"default";case"pending":return"secondary";case"cancelled":case"rejected":return"destructive";default:return"secondary"}},b=N=>{switch(N?.toLowerCase()){case"confirmed":return e.jsx(ai,{className:"h-4 w-4"});case"pending":return e.jsx(Qt,{className:"h-4 w-4"});case"completed":return e.jsx(ai,{className:"h-4 w-4"});case"cancelled":case"rejected":return e.jsx(Cr,{className:"h-4 w-4"});default:return e.jsx(ms,{className:"h-4 w-4"})}};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-2xl font-bold text-foreground",children:"Booking History"}),e.jsx(R,{variant:"outline",size:"sm",onClick:p,disabled:a,children:a?"Refreshing...":"Refresh"})]}),a?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"Loading your bookings..."})]}):i?e.jsx(K,{className:"glass-card",children:e.jsxs(X,{className:"p-8 text-center",children:[e.jsx(Cs,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:i}),e.jsx("div",{className:"flex gap-2 justify-center",children:c?e.jsxs(R,{onClick:()=>{h(x?`/client/login/${x}`:"/client/login")},children:[e.jsx(Nv,{className:"h-4 w-4 mr-2"}),"Log In Again"]}):e.jsx(R,{onClick:p,children:"Try Again"})})]})}):t.length===0?e.jsx(K,{className:"glass-card",children:e.jsxs(X,{className:"p-8 text-center",children:[e.jsx(ms,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No bookings yet"}),e.jsx("p",{className:"text-muted-foreground",children:"Your service bookings will appear here"})]})}):t.map(N=>e.jsxs(K,{className:"glass-card",children:[e.jsxs(pe,{className:"pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(ge,{className:"text-base flex items-center gap-2",children:[e.jsx(ms,{className:"h-4 w-4"}),N.service||"Service Booking"]}),e.jsxs(_e,{variant:g(N.status),className:"gap-1",children:[b(N.status),N.status||"Pending"]})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm text-muted-foreground",children:[e.jsx("span",{children:new Date(N.time||N.createdAt).toLocaleDateString()}),e.jsx("span",{children:new Date(N.time||N.createdAt).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})]}),e.jsxs(X,{className:"space-y-3",children:[e.jsxs("div",{className:"space-y-2",children:[N.customerName&&e.jsxs("div",{className:"text-sm flex items-center gap-2",children:[e.jsx(na,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"text-foreground",children:N.customerName})]}),N.durationMinutes&&e.jsxs("div",{className:"text-sm flex items-center gap-2",children:[e.jsx(Qt,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("span",{className:"text-muted-foreground",children:[N.durationMinutes," minutes"]})]}),N.notes&&e.jsxs("div",{className:"text-xs text-muted-foreground pt-2 border-t border-border",children:[e.jsx("strong",{children:"Notes:"})," ",N.notes]})]}),N.price&&e.jsxs("div",{className:"flex items-center justify-between pt-2 border-t border-border",children:[e.jsx("span",{className:"font-semibold text-foreground",children:"Price:"}),e.jsxs("span",{className:"text-lg font-bold text-green-600",children:["KES ",N.price?.toLocaleString()]})]})]})]},N._id))]})},AA=v.createContext(),_A=()=>{const t=v.useContext(AA);if(!t)throw new Error("useNotifications must be used within a NotificationProvider");return t},fK=({children:t})=>{const{socket:s,connected:a}=da(),{customer:r}=Io(),[i,o]=v.useState([]),[c,u]=v.useState(0),[f,x]=v.useState(0);v.useEffect(()=>{if(!(!s||!r))return s.on("new_message_notification",C=>{const T=new Date,_={id:Date.now(),type:"message",title:"New Message",message:`${C.from}: ${C.preview}`,preview:C.preview,from:C.from,timestamp:T,read:!1,data:C};h(_),x(G=>G+1),D.info(e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Zs,{className:"h-5 w-5 text-blue-500 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:"font-semibold",children:C.from}),e.jsx("span",{className:"text-xs text-muted-foreground",children:T.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"})})]}),e.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2",children:C.preview})]})]}),{duration:5e3})}),s.on("order_updated",C=>{const T={id:Date.now(),type:"order",title:"Order Update",message:`Order #${C.orderNumber||"N/A"} - ${C.status||"Updated"}`,timestamp:new Date,read:!1,data:C};h(T),D.success(e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(js,{className:"h-5 w-5 text-green-500 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:"Order Update"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:T.message})]})]}),{duration:5e3})}),s.on("appointment_updated",C=>{const T={id:Date.now(),type:"appointment",title:"Appointment Update",message:`Your appointment - ${C.status||"Updated"}`,timestamp:new Date,read:!1,data:C};h(T),D.info(e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(ms,{className:"h-5 w-5 text-purple-500 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:"Appointment Update"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:T.message})]})]}),{duration:5e3})}),s.on("notification",C=>{const T={id:Date.now(),type:C.type||"general",title:C.title||"Notification",message:C.message,timestamp:new Date,read:!1,data:C};h(T),D(e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Fr,{className:"h-5 w-5 text-blue-500 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:T.title}),e.jsx("p",{className:"text-sm text-muted-foreground",children:T.message})]})]}),{duration:5e3})}),()=>{s.off("new_message_notification"),s.off("order_updated"),s.off("appointment_updated"),s.off("notification")}},[s,r]);const h=C=>{o(T=>[C,...T].slice(0,50)),u(T=>T+1)},S={notifications:i,unreadCount:c,messageUnreadCount:f,addNotification:h,markAsRead:C=>{o(T=>T.map(_=>_.id===C?{..._,read:!0}:_)),u(T=>Math.max(0,T-1))},markAllAsRead:()=>{o(C=>C.map(T=>({...T,read:!0}))),u(0)},clearNotification:C=>{o(_=>_.filter(G=>G.id!==C));const T=i.find(_=>_.id===C);T&&!T.read&&u(_=>Math.max(0,_-1))},clearAllNotifications:()=>{o([]),u(0)},resetMessageUnreadCount:()=>{x(0)},connected:a};return e.jsx(AA.Provider,{value:S,children:t})},xK=()=>{const{customer:t}=Io(),{socket:s,connected:a}=da(),{resetMessageUnreadCount:r}=_A(),[i,o]=v.useState(null),[c,u]=v.useState([]),[f,x]=v.useState(""),[h,p]=v.useState(!1),[g,b]=v.useState({}),[N,y]=v.useState(!0),[S,C]=v.useState(!1),[T,_]=v.useState("connecting"),G=v.useRef(null),U=v.useRef(null);v.useEffect(()=>{t&&(k(),r())},[t]),v.useEffect(()=>{_(s?a?"connected":"connecting":"disconnected")},[s,a]),v.useEffect(()=>(i?.id&&s&&a&&(s.emit("join_conversation",i.id),F()),()=>{i?.id&&s&&(s.emit("leave_conversation",i.id),s.off("message_received"),s.off("user_typing"),s.off("user_stopped_typing"),s.off("message_sent"))}),[i,s,a]),v.useEffect(()=>{H()},[c]);const F=()=>{s&&(s.on("message_received",L=>{i&&L.conversationId===i.id&&u(re=>re.some(V=>V.id===L.id)?re:[...re,L])}),s.on("user_typing",({conversationId:L,userId:re,userName:V})=>{i?.id===L&&re!==t._id&&b(ee=>({...ee,[re]:V}))}),s.on("user_stopped_typing",({conversationId:L,userId:re})=>{i?.id===L&&b(V=>{const ee={...V};return delete ee[re],ee})}),s.on("message_sent",L=>{u(re=>re.map(V=>V.tempId&&V.content===L.content?{...L,status:"delivered"}:V))}))},k=async()=>{try{y(!0);const L=localStorage.getItem("customerToken");if(!L){o({id:null,name:"Business Owner",isOnline:!1}),y(!1);return}const re=await ye.get("/messages/conversations",{headers:{Authorization:`Bearer ${L}`}});if(re.data.conversations&&re.data.conversations.length>0){const V=re.data.conversations[0];o(V),E(V.id)}else o({id:null,name:"Business Owner",isOnline:!1}),y(!1)}catch(L){console.error("Error loading conversation:",L),o({id:null,name:"Business Owner",isOnline:!1}),y(!1)}},E=async L=>{try{const re=localStorage.getItem("customerToken"),V=await ye.get(`/messages/conversations/${L}`,{headers:{Authorization:`Bearer ${re}`}});u(V.data.messages||[]),y(!1)}catch(re){console.error("Error loading messages:",re),y(!1)}},A=async L=>{if(L.preventDefault(),!f.trim()||!t||S)return;const re=f.trim(),V=`temp_${Date.now()}`,ee={id:V,tempId:V,conversationId:i?.id,senderId:t._id,senderName:t.name,content:re,timestamp:new Date,status:"sending"};u(me=>[...me,ee]),x(""),C(!0);try{const me=localStorage.getItem("customerToken");if(i?.id)s&&a?(s.emit("send_message",{conversationId:i.id,message:re,senderId:t._id,senderName:t.name}),u(W=>W.map(se=>se.tempId===V?{...se,status:"sent"}:se))):(await ye.post("/messages/send",{conversationId:i.id,content:re},{headers:{Authorization:`Bearer ${me}`}}),u(W=>W.map(se=>se.tempId===V?{...se,status:"sent"}:se)));else{const W=await ye.post("/messages/conversations",{},{headers:{Authorization:`Bearer ${me}`}});if(W.data.success){console.log("✅ Conversation created successfully");const se=W.data.conversation;o({id:se.id,name:"Business Owner",isOnline:!1}),await ye.post("/messages/send",{conversationId:se.id,content:re},{headers:{Authorization:`Bearer ${me}`}}),u(Z=>Z.map(I=>I.tempId===V?{...I,status:"sent",conversationId:se.id}:I)),s&&a&&(s.emit("join_conversation",se.id),F())}}}catch(me){console.error("Error sending message:",me);const W=me.response?.data?.message||"Failed to send message";D.error(W),u(se=>se.map(Z=>Z.tempId===V?{...Z,status:"failed"}:Z)),setTimeout(()=>{u(se=>se.filter(Z=>Z.tempId!==V))},3e3)}finally{C(!1)}},B=()=>{!h&&i?.id&&s&&a&&(p(!0),s.emit("typing_start",{conversationId:i.id,userId:t._id,userName:t.name}),setTimeout(()=>{p(!1),s.emit("typing_stop",{conversationId:i.id,userId:t._id})},3e3))},H=()=>{G.current?.scrollIntoView({behavior:"smooth"})},M=L=>{switch(L){case"sent":return e.jsx(wi,{className:"h-3 w-3"});case"delivered":return e.jsx(si,{className:"h-3 w-3"});case"read":return e.jsx(si,{className:"h-3 w-3 text-blue-500"});case"failed":return e.jsx(Cs,{className:"h-3 w-3 text-red-500"});default:return e.jsx(Qt,{className:"h-3 w-3"})}},q=L=>{const re=new Date(L);return new Date-re<864e5?mg(re,"HH:mm"):mg(re,"MMM d, HH:mm")};return t?e.jsxs(K,{className:"h-[600px] flex flex-col",children:[e.jsx(pe,{className:"border-b py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(fr,{className:"h-10 w-10",children:e.jsx(xr,{className:"bg-primary text-primary-foreground",children:i?.name?.[0]||"B"})}),e.jsxs("div",{children:[e.jsx(ge,{className:"text-base",children:i?.name||"Business Owner"}),e.jsx("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:T==="connecting"?e.jsxs(e.Fragment,{children:[e.jsx(Yn,{className:"h-3 w-3 animate-spin"}),e.jsx("span",{children:"Connecting..."})]}):T==="connected"?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"h-2 w-2 bg-green-500 rounded-full animate-pulse"}),e.jsx("span",{children:"Connected"})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"h-2 w-2 bg-red-500 rounded-full"}),e.jsx("span",{children:"Disconnected"})]})})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(R,{variant:"ghost",size:"icon",onClick:()=>D.info("Voice call - Coming soon"),children:e.jsx($s,{className:"h-4 w-4"})}),e.jsx(R,{variant:"ghost",size:"icon",onClick:()=>D.info("Video call - Coming soon"),children:e.jsx(ka,{className:"h-4 w-4"})}),e.jsx(R,{variant:"ghost",size:"icon",children:e.jsx(bv,{className:"h-4 w-4"})})]})]})}),e.jsx(X,{className:"flex-1 p-4 overflow-hidden",children:N?e.jsx("div",{className:"h-full flex items-center justify-center",children:e.jsx(Yn,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):e.jsx(_r,{className:"h-full pr-4",children:e.jsxs("div",{className:"space-y-4",children:[c.length===0?e.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-center py-12",children:[e.jsx(Zs,{className:"h-12 w-12 text-muted-foreground mb-3"}),e.jsx("p",{className:"text-muted-foreground mb-1",children:"No messages yet"}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Start a conversation with ",i?.name]})]}):c.map((L,re)=>{const V=L.senderId===t._id,ee=re===0||new Date(L.timestamp)-new Date(c[re-1].timestamp)>36e5;return e.jsxs("div",{children:[ee&&e.jsx("div",{className:"text-center text-xs text-muted-foreground my-4",children:Yu(new Date(L.timestamp),{addSuffix:!0})}),e.jsx("div",{className:`flex ${V?"justify-end":"justify-start"}`,children:e.jsxs("div",{className:`max-w-[75%] rounded-2xl px-4 py-2 ${V?"bg-primary text-primary-foreground rounded-br-sm":"bg-muted rounded-bl-sm"}`,children:[!V&&e.jsx("p",{className:"text-xs font-semibold mb-1 opacity-70",children:L.senderName}),e.jsx("p",{className:"text-sm break-words",children:L.content}),e.jsxs("div",{className:"flex items-center gap-1 mt-1 justify-end",children:[e.jsx("span",{className:"text-xs opacity-70",children:q(L.timestamp)}),V&&M(L.status)]})]})})]},L.id||L.tempId)}),Object.keys(g).length>0&&e.jsx("div",{className:"flex justify-start",children:e.jsx("div",{className:"bg-muted rounded-2xl rounded-bl-sm px-4 py-3",children:e.jsxs("div",{className:"flex gap-1",children:[e.jsx("div",{className:"w-2 h-2 bg-gray-500 rounded-full animate-bounce"}),e.jsx("div",{className:"w-2 h-2 bg-gray-500 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),e.jsx("div",{className:"w-2 h-2 bg-gray-500 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})})}),e.jsx("div",{ref:G})]})})}),e.jsxs("div",{className:"border-t p-4",children:[e.jsxs("form",{onSubmit:A,className:"flex gap-2",children:[e.jsx(R,{type:"button",variant:"ghost",size:"icon",disabled:!0,children:e.jsx(Xc,{className:"h-5 w-5"})}),e.jsx(fe,{ref:U,value:f,onChange:L=>{x(L.target.value),B()},onKeyPress:L=>{L.key==="Enter"&&!L.shiftKey&&(L.preventDefault(),A(L))},placeholder:"Type a message...",className:"flex-1",disabled:!a||S}),e.jsx(R,{type:"button",variant:"ghost",size:"icon",disabled:!0,children:e.jsx(wv,{className:"h-5 w-5"})}),e.jsx(R,{type:"submit",disabled:!f.trim()||S,children:S?e.jsx(Yn,{className:"h-4 w-4 animate-spin"}):e.jsx(Ma,{className:"h-4 w-4"})})]}),T==="connecting"&&e.jsxs("div",{className:"flex items-center justify-center gap-2 text-xs text-muted-foreground mt-2",children:[e.jsx(Yn,{className:"h-3 w-3 animate-spin"}),e.jsx("span",{children:"Connecting to chat server..."})]}),T==="disconnected"&&e.jsxs("div",{className:"flex items-center justify-center gap-2 text-xs text-red-500 mt-2",children:[e.jsx(Cs,{className:"h-3 w-3"}),e.jsx("span",{children:"Connection lost. Retrying..."})]})]})]}):e.jsx(K,{className:"h-full flex items-center justify-center",children:e.jsxs(X,{className:"p-12 text-center",children:[e.jsx(Zs,{className:"h-16 w-16 text-muted-foreground mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Please Login"}),e.jsx("p",{className:"text-muted-foreground",children:"Sign in to chat with the business owner"})]})})},pK=()=>{const{notifications:t,unreadCount:s,markAsRead:a,markAllAsRead:r,clearNotification:i,clearAllNotifications:o}=_A(),[c,u]=v.useState(!1),f=h=>{switch(h){case"message":return e.jsx(Zs,{className:"h-5 w-5 text-blue-500"});case"order":return e.jsx(js,{className:"h-5 w-5 text-green-500"});case"appointment":return e.jsx(ms,{className:"h-5 w-5 text-purple-500"});default:return e.jsx(Fr,{className:"h-5 w-5 text-gray-500"})}},x=h=>{h.read||a(h.id)};return e.jsxs(rv,{open:c,onOpenChange:u,children:[e.jsx(nv,{asChild:!0,children:e.jsxs(R,{variant:"ghost",size:"icon",className:"relative",children:[e.jsx(Fr,{className:"h-5 w-5"}),s>0&&e.jsx(_e,{className:"absolute -top-1 -right-1 h-5 w-5 flex items-center justify-center p-0 text-xs",variant:"destructive",children:s>9?"9+":s})]})}),e.jsxs(iv,{children:[e.jsxs(lv,{children:[e.jsxs(ov,{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Notifications"}),t.length>0&&e.jsxs("div",{className:"flex gap-2",children:[s>0&&e.jsxs(R,{variant:"ghost",size:"sm",onClick:r,className:"text-xs",children:[e.jsx(si,{className:"h-4 w-4 mr-1"}),"Mark all read"]}),e.jsxs(R,{variant:"ghost",size:"sm",onClick:o,className:"text-xs",children:[e.jsx(fa,{className:"h-4 w-4 mr-1"}),"Clear all"]})]})]}),e.jsx(cv,{children:s>0?`You have ${s} unread notification${s>1?"s":""}`:"All caught up!"})]}),e.jsx("div",{className:"mt-6",children:t.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[e.jsx(Fr,{className:"h-12 w-12 text-muted-foreground mb-3"}),e.jsx("p",{className:"text-muted-foreground mb-1",children:"No notifications"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"You're all caught up!"})]}):e.jsx(_r,{className:"h-[calc(100vh-12rem)]",children:e.jsx("div",{className:"space-y-2",children:t.map(h=>e.jsxs("div",{onClick:()=>x(h),className:`p-4 rounded-lg border cursor-pointer transition-colors ${h.read?"bg-background hover:bg-accent":"bg-primary/5 border-primary/20 hover:bg-primary/10"}`,children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"mt-0.5",children:f(h.type)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-semibold text-sm",children:h.title}),h.from&&e.jsx("p",{className:"text-xs text-muted-foreground",children:h.from})]}),e.jsx(R,{variant:"ghost",size:"icon",className:"h-6 w-6 -mr-2",onClick:p=>{p.stopPropagation(),i(h.id)},children:e.jsx(fa,{className:"h-3 w-3"})})]}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1 line-clamp-2",children:h.preview||h.message}),e.jsxs("div",{className:"flex items-center justify-between mt-2",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:Yu(new Date(h.timestamp),{addSuffix:!0})}),!h.read&&e.jsx(_e,{variant:"secondary",className:"text-xs",children:"New"})]})]})]}),!h.read&&e.jsx("div",{className:"absolute right-2 top-2 h-2 w-2 bg-primary rounded-full"})]},h.id))})})})]})]})},gK=({discounts:t=[]})=>{const[s,a]=v.useState(0),[r,i]=v.useState(!1);if(v.useEffect(()=>{if(t.length<=1||r)return;const h=setInterval(()=>{a(p=>(p+1)%t.length)},5e3);return()=>clearInterval(h)},[t.length,r]),!t||t.length===0)return null;const o=t[s],c=()=>{a(h=>(h+1)%t.length)},u=()=>{a(h=>(h-1+t.length)%t.length)},f=h=>h.type==="percentage"?`${h.value}% OFF`:h.type==="fixed"?`KSH ${h.value} OFF`:h.type==="buy_x_get_y"?"SPECIAL OFFER":"DISCOUNT",x=h=>new Date(h).toLocaleDateString("en-US",{month:"short",day:"numeric"});return e.jsxs("div",{className:"relative w-full overflow-hidden rounded-xl shadow-lg mb-6",children:[e.jsx(SE,{mode:"wait",children:e.jsxs(Ha.div,{initial:{opacity:0,x:100},animate:{opacity:1,x:0},exit:{opacity:0,x:-100},transition:{duration:.5},className:"relative w-full h-48 sm:h-56 md:h-64 lg:h-72",onMouseEnter:()=>i(!0),onMouseLeave:()=>i(!1),children:[e.jsxs("div",{className:"absolute inset-0 bg-cover bg-center transform scale-105",style:{backgroundImage:o.seasonalDetails?.bannerImage?`url(${o.seasonalDetails.bannerImage})`:o.products?.[0]?.image?`url(${o.products[0].image})`:o.services?.[0]?.image?`url(${o.services[0].image})`:"linear-gradient(135deg, #667eea 0%, #764ba2 50%, #f093fb 100%)",filter:"brightness(0.9) contrast(1.1)",transition:"transform 0.5s ease-out"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-purple-900/80 via-blue-900/60 to-pink-900/40"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-transparent via-black/30 to-black/70"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-tr from-orange-500/20 via-transparent to-cyan-500/20"})]}),e.jsx("div",{className:"relative h-full flex items-center px-6 md:px-12",children:e.jsxs("div",{className:"max-w-2xl space-y-4",children:[o.isSeasonalPromotion&&o.seasonalDetails?.seasonName&&e.jsx(Ha.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.2},children:e.jsxs(_e,{className:"bg-yellow-500 text-black font-bold px-4 py-1 text-sm",children:[e.jsx(Mn,{className:"h-4 w-4 mr-1 inline"}),o.seasonalDetails.seasonName]})}),e.jsx(Ha.div,{initial:{y:20,opacity:0,scale:.8},animate:{y:0,opacity:1,scale:1},transition:{delay:.3,type:"spring",stiffness:200},className:"flex items-center gap-4",children:e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-red-500 to-orange-500 rounded-lg blur-xl opacity-50 animate-pulse"}),e.jsx("div",{className:"relative bg-gradient-to-br from-red-600 via-red-500 to-orange-600 text-white px-6 py-3 rounded-lg shadow-2xl transform -rotate-2 border-2 border-white/20",children:e.jsx("p",{className:"text-4xl md:text-6xl font-black bg-clip-text text-transparent bg-gradient-to-r from-white to-yellow-200",children:f(o)})})]})}),e.jsxs(Ha.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.4},className:"space-y-2",children:[e.jsx("h2",{className:"text-3xl md:text-5xl font-black text-white drop-shadow-2xl",style:{textShadow:"0 0 20px rgba(255,255,255,0.3), 0 0 40px rgba(255,255,255,0.2), 2px 2px 8px rgba(0,0,0,0.8)"},children:o.seasonalDetails?.bannerText||o.name}),o.description&&e.jsx("p",{className:"text-lg md:text-xl text-white/95 max-w-xl drop-shadow-lg font-medium",children:o.description})]}),e.jsxs(Ha.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.5},className:"flex flex-wrap items-center gap-4 text-white",children:[o.code&&e.jsxs("div",{className:"flex items-center gap-2 bg-white/20 backdrop-blur-sm px-4 py-2 rounded-full",children:[e.jsx(Fl,{className:"h-4 w-4"}),e.jsx("span",{className:"font-mono font-bold",children:o.code})]}),e.jsxs("div",{className:"flex items-center gap-2 bg-white/20 backdrop-blur-sm px-4 py-2 rounded-full",children:[e.jsx(Qt,{className:"h-4 w-4"}),e.jsxs("span",{className:"text-sm",children:["Valid until ",x(o.validUntil)]})]}),o.minPurchaseAmount>0&&e.jsxs("div",{className:"flex items-center gap-2 bg-white/20 backdrop-blur-sm px-4 py-2 rounded-full",children:[e.jsx(E6,{className:"h-4 w-4"}),e.jsxs("span",{className:"text-sm",children:["Min. KSH ",o.minPurchaseAmount]})]})]}),(o.products?.length>0||o.services?.length>0)&&e.jsxs(Ha.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.6},className:"flex gap-3 mt-4",children:[o.products?.slice(0,3).map((h,p)=>e.jsxs(Ha.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.7+p*.1,type:"spring"},className:"relative group",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-400 to-purple-500 rounded-xl blur-md opacity-0 group-hover:opacity-75 transition-opacity duration-300"}),e.jsxs("div",{className:"relative w-20 h-20 rounded-xl overflow-hidden border-3 border-white shadow-2xl transform group-hover:scale-110 transition-transform duration-300",children:[e.jsx("img",{src:h.image||"https://images.unsplash.com/photo-1505740420928-5e560c06d30e?w=200",alt:h.name,className:"w-full h-full object-cover"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/50 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"})]})]},p)),o.services?.slice(0,3).map((h,p)=>e.jsxs(Ha.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.7+p*.1,type:"spring"},className:"relative group",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-pink-400 to-red-500 rounded-xl blur-md opacity-0 group-hover:opacity-75 transition-opacity duration-300"}),e.jsxs("div",{className:"relative w-20 h-20 rounded-xl overflow-hidden border-3 border-white shadow-2xl transform group-hover:scale-110 transition-transform duration-300",children:[e.jsx("img",{src:h.image||"https://images.unsplash.com/photo-1540555700478-4be289fbecef?w=200",alt:h.name,className:"w-full h-full object-cover"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/50 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"})]})]},p))]})]})}),t.length>1&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:u,className:"absolute left-4 top-1/2 -translate-y-1/2 bg-white/20 hover:bg-white/30 backdrop-blur-sm text-white p-2 rounded-full transition-all","aria-label":"Previous banner",children:e.jsx(KS,{className:"h-6 w-6"})}),e.jsx("button",{onClick:c,className:"absolute right-4 top-1/2 -translate-y-1/2 bg-white/20 hover:bg-white/30 backdrop-blur-sm text-white p-2 rounded-full transition-all","aria-label":"Next banner",children:e.jsx(pv,{className:"h-6 w-6"})})]}),t.length>1&&e.jsx("div",{className:"absolute bottom-4 left-1/2 -translate-x-1/2 flex gap-2",children:t.map((h,p)=>e.jsx("button",{onClick:()=>a(p),className:`w-2 h-2 rounded-full transition-all ${p===s?"bg-white w-8":"bg-white/50 hover:bg-white/75"}`,"aria-label":`Go to banner ${p+1}`},p))})]},s)}),e.jsx(Ha.div,{className:"absolute top-10 right-10",animate:{y:[0,-15,0],rotate:[0,15,0],scale:[1,1.2,1]},transition:{duration:3,repeat:1/0,ease:"easeInOut"},children:e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 bg-yellow-300 rounded-full blur-xl opacity-50"}),e.jsx(Mn,{className:"relative h-10 w-10 text-yellow-300 drop-shadow-lg"})]})}),e.jsx(Ha.div,{className:"absolute bottom-20 right-20",animate:{y:[0,-20,0],rotate:[0,-15,0],scale:[1,1.3,1]},transition:{duration:4,repeat:1/0,ease:"easeInOut",delay:1},children:e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 bg-pink-300 rounded-full blur-lg opacity-50"}),e.jsx(Mn,{className:"relative h-7 w-7 text-pink-300 drop-shadow-lg"})]})}),e.jsx(Ha.div,{className:"absolute top-1/2 left-10",animate:{y:[0,-10,0],x:[0,5,0],rotate:[0,10,0],scale:[1,1.1,1]},transition:{duration:5,repeat:1/0,ease:"easeInOut",delay:2},children:e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 bg-blue-300 rounded-full blur-lg opacity-40"}),e.jsx(Mn,{className:"relative h-6 w-6 text-blue-300 drop-shadow-lg"})]})})]})},vK=({onThemeChange:t,currentTheme:s})=>{const[a,r]=v.useState("all");Object.entries(Pn).reduce((u,[f,x])=>{const h=x.category||"other";return u[h]||(u[h]=[]),u[h].push({key:f,...x}),u},{});const i=Object.entries(Pn).map(([u,f])=>({key:u,...f})),o=u=>u==="all"?i:i.filter(f=>f.category===u),c=[{key:"all",name:"All Themes",icon:Lc},{key:"default",name:"Default",icon:null},{key:"color",name:"Colors",icon:null},{key:"neutral",name:"Neutral",icon:null},{key:"special",name:"Special",icon:Mn},{key:"auto",name:"Auto",icon:null}];return e.jsxs("div",{className:"space-y-4",children:[e.jsxs(pa,{value:a,onValueChange:r,className:"w-full",children:[e.jsx(ba,{className:"grid w-full grid-cols-3 lg:grid-cols-6",children:c.map(u=>e.jsxs(ut,{value:u.key,className:"text-xs",children:[u.icon&&e.jsx(u.icon,{className:"h-3 w-3 mr-1"}),u.name]},u.key))}),e.jsx(mt,{value:a,className:"mt-4",children:e.jsx(_r,{className:"h-[400px] w-full pr-4",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:o(a).map(u=>e.jsxs(K,{className:`cursor-pointer transition-all hover:shadow-lg ${s===u.key?"ring-2 ring-primary shadow-lg":"hover:ring-1 hover:ring-primary/50"}`,onClick:()=>t(u.key),children:[e.jsx(pe,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(ge,{className:"text-sm font-medium",children:u.name}),e.jsx(lt,{className:"text-xs mt-1",children:u.description})]}),s===u.key&&e.jsxs(_e,{variant:"default",className:"gap-1",children:[e.jsx(wi,{className:"h-3 w-3"}),"Active"]})]})}),e.jsxs(X,{className:"p-4 pt-0",children:[e.jsx("div",{className:`h-16 rounded-md ${u.preview} p-3 flex items-center justify-center`,children:e.jsx("div",{className:"text-xs font-medium opacity-90",children:"Preview"})}),u.category&&e.jsx(_e,{variant:"outline",className:"mt-2 text-xs",children:u.category})]})]},u.key))})})})]}),e.jsxs(K,{children:[e.jsx(pe,{children:e.jsx(ge,{className:"text-sm",children:"Current Theme"})}),e.jsx(X,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:Pn[s]?.name||"Light"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:Pn[s]?.description||"Default theme"})]}),e.jsx("div",{className:`h-10 w-10 rounded-full ${Pn[s]?.preview||"bg-white"}`})]})})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx(R,{size:"sm",variant:s==="light"?"default":"outline",onClick:()=>t("light"),children:"Light"}),e.jsx(R,{size:"sm",variant:s==="dark"?"default":"outline",onClick:()=>t("dark"),children:"Dark"}),e.jsx(R,{size:"sm",variant:s==="blue"?"default":"outline",onClick:()=>t("blue"),children:"Blue"}),e.jsx(R,{size:"sm",variant:s==="purple"?"default":"outline",onClick:()=>t("purple"),children:"Purple"}),e.jsx(R,{size:"sm",variant:s==="cyberpunk"?"default":"outline",onClick:()=>t("cyberpunk"),children:"Cyberpunk"}),e.jsx(R,{size:"sm",variant:s==="matrix"?"default":"outline",onClick:()=>t("matrix"),children:"Matrix"})]})]})},$h=[{id:"sample-1",name:"Professional Haircut & Styling",description:"Expert haircut and styling service tailored to your preferences. Includes wash, cut, and blow-dry.",price:1500,duration:"45 min",category:"Hair & Beauty",bookings:156,rating:4.9,staff:3,image:"https://images.unsplash.com/photo-1562322140-8baeececf3df?w=500"},{id:"sample-2",name:"Full Body Massage",description:"Relaxing full body massage to relieve stress and tension. Perfect for unwinding after a long day.",price:3500,duration:"90 min",category:"Wellness & Spa",bookings:89,rating:5,staff:2,image:"https://images.unsplash.com/photo-1544367567-0f2fcb009e0b?w=500"},{id:"sample-3",name:"Manicure & Pedicure",description:"Complete nail care service including filing, buffing, cuticle care, and polish application.",price:2e3,duration:"60 min",category:"Hair & Beauty",bookings:234,rating:4.8,staff:4,image:"https://images.unsplash.com/photo-1604654894610-df63bc536371?w=500"},{id:"sample-4",name:"Personal Training Session",description:"One-on-one fitness training with certified personal trainer. Customized workout plan included.",price:2500,duration:"60 min",category:"Fitness & Health",bookings:67,rating:4.9,staff:5,image:"https://images.unsplash.com/photo-1571019614242-c5c5dee9f50b?w=500"},{id:"sample-5",name:"Deep Tissue Massage",description:"Therapeutic massage targeting deep muscle layers to relieve chronic pain and muscle tension.",price:4e3,duration:"75 min",category:"Wellness & Spa",bookings:112,rating:5,staff:2,image:"https://images.unsplash.com/photo-1519823551278-64ac92734fb1?w=500"},{id:"sample-6",name:"Facial Treatment",description:"Rejuvenating facial treatment with deep cleansing, exfoliation, and hydration for glowing skin.",price:3e3,duration:"60 min",category:"Hair & Beauty",bookings:145,rating:4.8,staff:3,image:"https://images.unsplash.com/photo-1570172619644-dfd03ed5d881?w=500"},{id:"sample-7",name:"Yoga Class",description:"Group or private yoga session for flexibility, strength, and mindfulness. All levels welcome.",price:1200,duration:"60 min",category:"Fitness & Health",bookings:198,rating:4.9,staff:2,image:"https://images.unsplash.com/photo-1588286840104-8957b019727f?w=500"},{id:"sample-8",name:"Hair Coloring Service",description:"Professional hair coloring with premium products. Includes consultation, application, and styling.",price:4500,duration:"120 min",category:"Hair & Beauty",bookings:78,rating:4.7,staff:3,image:"https://images.unsplash.com/photo-1522337360788-8b13dee7a37e?w=500"},{id:"sample-9",name:"Nutritional Consultation",description:"Personalized nutrition plan and dietary guidance from certified nutritionist.",price:2800,duration:"45 min",category:"Fitness & Health",bookings:45,rating:4.8,staff:1,image:"https://images.unsplash.com/photo-1490645935967-10de6ba17061?w=500"},{id:"sample-10",name:"Hot Stone Massage",description:"Luxurious massage using heated stones to melt away tension and promote deep relaxation.",price:4500,duration:"90 min",category:"Wellness & Spa",bookings:91,rating:5,staff:2,image:"https://images.unsplash.com/photo-1583416750470-965b2707b355?w=500"},{id:"sample-11",name:"Makeup Application",description:"Professional makeup for events, photoshoots, or special occasions. Includes consultation.",price:3500,duration:"60 min",category:"Hair & Beauty",bookings:123,rating:4.9,staff:2,image:"https://images.unsplash.com/photo-1487412947147-5cebf100ffc2?w=500"},{id:"sample-12",name:"Aromatherapy Session",description:"Therapeutic treatment using essential oils to enhance physical and emotional well-being.",price:3200,duration:"60 min",category:"Wellness & Spa",bookings:67,rating:4.8,staff:2,image:"https://images.unsplash.com/photo-1600334089648-b0d9d3028eb2?w=500"},{id:"sample-13",name:"Group Fitness Class",description:"High-energy group workout including cardio, strength training, and flexibility exercises.",price:800,duration:"45 min",category:"Fitness & Health",bookings:312,rating:4.7,staff:3,image:"https://images.unsplash.com/photo-1571902943202-507ec2618e8f?w=500"},{id:"sample-14",name:"Reflexology Treatment",description:"Foot reflexology targeting pressure points to promote healing and relaxation throughout the body.",price:2500,duration:"60 min",category:"Wellness & Spa",bookings:89,rating:4.9,staff:2,image:"https://images.unsplash.com/photo-1544367567-0f2fcb009e0b?w=500"},{id:"sample-15",name:"Bridal Hair & Makeup",description:"Complete bridal beauty package including hair styling, makeup, and trial session.",price:8500,duration:"150 min",category:"Hair & Beauty",bookings:34,rating:5,staff:2,image:"https://images.unsplash.com/photo-1519699047748-de8e457a634e?w=500"}],jK=()=>{const{inviteCode:t}=sl(),s=Ka(),{customer:a,isAuthenticated:r,logout:i,loading:o}=Io(),{socket:c,connected:u}=da(),[f,x]=v.useState(!1),[h,p]=v.useState(!1),[g,b]=v.useState(()=>localStorage.getItem("storefront-theme")||"light"),[N,y]=v.useState(""),[S,C]=v.useState("all"),{items:T,add:_,update:G,remove:U,clear:F,total:k,count:E}=aj(),[A,B]=v.useState(null),[H,M]=v.useState(null),[q,L]=v.useState(!1),[re,V]=v.useState(!1),[ee,me]=v.useState("shop"),[W,se]=v.useState([]),[Z,I]=v.useState([]),[Q,O]=v.useState([]),[te,oe]=v.useState(null),[je,Me]=v.useState([]),[ve,ce]=v.useState(null),[Pe,Qe]=v.useState([]),[vt,xt]=v.useState([]),[ht,bt]=v.useState([]),[ot,hs]=v.useState(!1),[fs,Ps]=v.useState([]),[ps,As]=v.useState(!1),[cs,_t]=v.useState({name:"",phone:""}),[sa,Te]=v.useState(!1),[Ne,he]=v.useState([]),[Ue,st]=v.useState(!0),[Ct,Dt]=v.useState({businessName:"ominbiz Store",ownerName:"Store Owner"});v.useEffect(()=>{(async()=>{if(t)try{const De=await ye.get(`/public/store-owner/${t}`);Dt({businessName:De.data.businessName||De.data.name,ownerName:De.data.name,email:De.data.businessEmail,phone:De.data.businessPhone,address:De.data.businessAddress})}catch(De){console.error("Error fetching store owner:",De),D.error("Could not load store information")}})()},[t]),v.useEffect(()=>{const J=async()=>{st(!0);try{const Ge=localStorage.getItem("customerToken"),gt=Ge?{Authorization:`Bearer ${Ge}`}:{},[jt,ss,ks,Ns,Y]=await Promise.allSettled([ye.get("/products",{headers:gt,params:{inviteCode:t}}),ye.get("/locations",{headers:gt}),ye.get("/team",{headers:gt}),ye.get("/public/services",{params:{inviteCode:t}}),ye.get("/public/discounts",{params:{inviteCode:t,active:!0}})]);if(jt.status==="fulfilled"&&jt.value.data?.length>0?(he(jt.value.data),console.log("✅ Loaded",jt.value.data.length,"products from store")):t?(he([]),console.log("ℹ️ Store has no products yet")):(he(Ye),console.warn("⚠️ No invite code - showing sample products")),ss.status==="fulfilled"&&(se(ss.value.data||[]),ss.value.data?.length>0&&ce(ss.value.data[0])),ks.status==="fulfilled"&&I(ks.value.data||[]),Y.status==="fulfilled"&&Y.value.data?.length>0){Qe(Y.value.data);const de=Y.value.data.filter(P=>P.active&&P.applicableProducts?.length>0).flatMap(P=>P.applicableProducts.map(ie=>({productId:ie,discount:P})));xt(de);const le=Y.value.data.filter(P=>P.active&&P.applicableServices?.length>0).flatMap(P=>P.applicableServices.map(ie=>({serviceId:ie,discount:P})));bt(le)}if(Ns.status==="fulfilled"&&Ns.value.data?.length>0){const de=Ns.value.data.map(le=>({_id:le._id,id:le._id,name:le.name,description:le.description||"Professional service",price:le.price||0,duration:le.duration||"60 min",category:le.category||"General",bookings:le.bookings||0,rating:le.rating||5,staff:le.availableTeamMembers?.length||Z.length||1,image:le.image}));O(de),console.log("✅ Loaded",de.length,"services from database")}else t?(O($h),console.log("📋 No services in database, showing",$h.length,"sample services")):(O($h),console.log("📋 Showing",$h.length,"sample services (demo mode)"))}catch(Ge){console.error("Error fetching data:",Ge),D.error("Could not load some information. Please refresh."),he(Ye)}finally{st(!1)}};J();const De=setInterval(J,3e4);return()=>clearInterval(De)},[t,Z.length]);const Zt=J=>ht.find(Ge=>Ge.serviceId===J||Ge.serviceId===J.toString())?.discount||null,ts=(J,De)=>{const Ge=Number(J)||0;if(!De||!De.value)return Ge;const gt=Number(De.value)||0;let jt=Ge;if(De.type==="percentage"){const ss=Ge*gt/100;jt=Ge-ss}else De.type==="fixed"&&(jt=Math.max(0,Ge-gt));return isNaN(jt)?Ge:jt};v.useEffect(()=>{if(!(!c||!u||!t))return c.emit("join_storefront",t),c.on("product_sync",J=>{console.log("Product sync:",J),J.type==="insert"?(he(De=>[J.product,...De]),D.success(`New product: ${J.product.name}`)):J.type==="update"?(he(De=>De.map(Ge=>Ge._id===J.product._id?J.product:Ge)),D.info(`Product updated: ${J.product.name}`)):J.type==="delete"&&(he(De=>De.filter(Ge=>Ge._id!==J.product._id)),D.info("Product removed"))}),c.on("service_sync",J=>{console.log("Service sync:",J),J.type==="insert"?(O(De=>[J.service,...De]),D.success(`New service: ${J.service.name}`)):J.type==="update"?(O(De=>De.map(Ge=>Ge._id===J.service._id?J.service:Ge)),D.info(`Service updated: ${J.service.name}`)):J.type==="delete"&&(O(De=>De.filter(Ge=>Ge._id!==J.service._id)),D.info("Service removed"))}),c.on("location_sync",J=>{console.log("Location sync:",J),J.type==="insert"?(se(De=>[J.location,...De]),D.success(`New location: ${J.location.name}`)):J.type==="update"?(se(De=>De.map(Ge=>Ge._id===J.location._id?J.location:Ge)),D.info(`Location updated: ${J.location.name}`)):J.type==="delete"&&(se(De=>De.filter(Ge=>Ge._id!==J.location._id)),D.info("Location removed"))}),c.on("team_sync",J=>{console.log("Team sync:",J),J.type==="insert"?(I(De=>[J.team,...De]),D.success(`New team member: ${J.team.name}`)):J.type==="update"?(I(De=>De.map(Ge=>Ge._id===J.team._id?J.team:Ge)),D.info(`Team member updated: ${J.team.name}`)):J.type==="delete"&&(I(De=>De.filter(Ge=>Ge._id!==J.team._id)),D.info("Team member removed"))}),c.on("stock_alert",J=>{J.alertType==="out_of_stock"&&D.error(`Out of Stock: ${J.product.name} is currently unavailable`)}),c.on("order_updated",J=>{J.order.customer?.email===a?.email&&D.info(`Order Update: Your order status is ${J.order.status}`)}),()=>{c&&u&&(c.emit("leave_storefront",t),c.off("product_sync"),c.off("service_sync"),c.off("location_sync"),c.off("team_sync"),c.off("stock_alert"),c.off("order_updated"))}},[c,u,t,a]);const ke=()=>{a?(me("account"),D.success(`Welcome ${a.name}!`)):(console.log("🔒 Storefront: No customer yet, just setting tab"),me("account"))},we=()=>{a?(i(),F(),Me([]),D.success("You have been successfully logged out"),s(`/client/login/${t}`)):D.info("You are not currently logged in")},nt=J=>{b(J),localStorage.setItem("storefront-theme",J),hs(!1),D.success(`Storefront theme: ${J}`)};v.useEffect(()=>{(()=>{try{const De=Pn[g];if(!De||!De.colors){console.warn("Theme not found:",g);return}const Ge=jt=>{try{jt=jt.replace("#","");const ss=parseInt(jt.substring(0,2),16)/255,ks=parseInt(jt.substring(2,4),16)/255,Ns=parseInt(jt.substring(4,6),16)/255,Y=Math.max(ss,ks,Ns),de=Math.min(ss,ks,Ns);let le,P,ie=(Y+de)/2;if(Y===de)le=P=0;else{const ue=Y-de;switch(P=ie>.5?ue/(2-Y-de):ue/(Y+de),Y){case ss:le=((ks-Ns)/ue+(ks<Ns?6:0))/6;break;case ks:le=((Ns-ss)/ue+2)/6;break;case Ns:le=((ss-ks)/ue+4)/6;break}}return`${Math.round(le*360)} ${Math.round(P*100)}% ${Math.round(ie*100)}%`}catch(ss){return console.error("Error converting hex to HSL:",jt,ss),"0 0% 50%"}},gt=()=>{const jt=document.querySelector(".storefront-container");if(!jt){console.warn("Storefront container not found, retrying..."),setTimeout(gt,100);return}const ss=Ge(De.colors.primary),ks=Ge(De.colors.secondary),Ns=Ge(De.colors.accent),Y=De.colors.background.startsWith("#")?Ge(De.colors.background):"0 0% 100%",de=Ge(De.colors.foreground);jt.style.setProperty("--primary",ss),jt.style.setProperty("--primary-foreground","0 0% 100%"),jt.style.setProperty("--secondary",ks),jt.style.setProperty("--secondary-foreground",de),jt.style.setProperty("--accent",Ns),jt.style.setProperty("--accent-foreground",de),jt.style.setProperty("--background",Y),jt.style.setProperty("--foreground",de),jt.style.setProperty("--card",Y),jt.style.setProperty("--card-foreground",de),jt.style.setProperty("--popover",Y),jt.style.setProperty("--popover-foreground",de),jt.style.setProperty("--muted",ks),jt.style.setProperty("--muted-foreground","0 0% 45%"),jt.style.setProperty("--border",`${ss.split(" ")[0]} 30% 80%`),jt.style.setProperty("--input",`${ss.split(" ")[0]} 30% 80%`),jt.style.setProperty("--ring",ss),console.log("✅ Storefront theme applied:",g)};gt()}catch(De){console.error("Error applying storefront theme:",De)}})()},[g]);const Ye=[{id:"1",name:"Premium Hair Shampoo",description:"Nourishing shampoo for all hair types with natural ingredients",price:30,category:"Hair Care",stock:25,image:"/placeholder.svg",rating:4.8,specs:["250ml bottle","Sulfate-free","pH balanced","Natural ingredients"],reviews:[{id:"r1",author:"Jane Doe",rating:5,comment:"Best shampoo I've ever used!",date:"2025-10-10"},{id:"r2",author:"John Smith",rating:4,comment:"Great product, will buy again",date:"2025-10-08"}]},{id:"2",name:"Hair Styling Gel",description:"Strong hold gel with natural finish and no residue",price:16,category:"Hair Care",stock:40,image:"/placeholder.svg",rating:4.5,specs:["150ml","Water-based","Easy wash out","Long-lasting hold"],reviews:[{id:"r3",author:"Mike Johnson",rating:5,comment:"Perfect hold without being sticky",date:"2025-10-12"}]},{id:"3",name:"Organic Face Mask",description:"Deep cleansing and hydrating mask with organic ingredients",price:45,category:"Skincare",stock:15,image:"/placeholder.svg",rating:4.9,specs:["100ml","Organic certified","Vegan","Cruelty-free"],reviews:[{id:"r4",author:"Sarah Lee",rating:5,comment:"My skin feels amazing!",date:"2025-10-11"}]},{id:"4",name:"Professional Hair Dryer",description:"Fast drying with heat protection and ionic technology",price:200,category:"Tools",stock:8,image:"/placeholder.svg",rating:4.7,specs:["2200W","Ionic technology","3 heat settings","Cool shot button"],reviews:[{id:"r5",author:"Emily White",rating:5,comment:"Salon quality at home!",date:"2025-10-09"}]},{id:"5",name:"Moisturizing Cream",description:"24-hour hydration with SPF 15 protection",price:35,category:"Skincare",stock:30,image:"/placeholder.svg",rating:4.6,specs:["50ml","SPF 15","Non-greasy","Suitable for all skin types"],reviews:[]},{id:"6",name:"Hair Brush Set",description:"Professional quality brushes for all hair types",price:28,category:"Tools",stock:20,image:"/placeholder.svg",rating:4.4,specs:["3-piece set","Bamboo handle","Anti-static bristles","Ergonomic design"],reviews:[]}],pt=["all",...Array.from(new Set(Ne.map(J=>J.category)))],yt=Ne.filter(J=>{const De=J.name.toLowerCase().includes(N.toLowerCase())||J.description.toLowerCase().includes(N.toLowerCase()),Ge=S==="all"||J.category===S;return De&&Ge}),Kt=J=>{const De=J._id||J.id,Ge=J.stockQuantity||J.stock||0,gt=T.find(jt=>(jt._id||jt.id)===De);gt?gt.quantity<Ge?(G(De,gt.quantity+1),D.success(`${J.name} quantity increased`)):D.error(`Stock limit reached: Only ${Ge} available`):(_({...J,_id:De,id:De,stock:Ge,stockQuantity:Ge},1),D.success(`🛍️ ${J.name} added to cart!`))},Jt=(J,De)=>{const Ge=T.find(ss=>(ss._id||ss.id)===J);if(!Ge)return;const gt=Ge.stockQuantity||Ge.stock||0,jt=Ge.quantity+De;if(jt===0){Ut(J);return}if(jt>gt){D.error(`Stock limit reached: Only ${gt} available`);return}G(J,jt)},Ut=J=>{const De=T.find(Ge=>(Ge._id||Ge.id)===J);U(J),De&&D.info(`${De.name} removed from cart`)},Ia=J=>{const De=J._id||J.id;je.some(gt=>(gt._id||gt.id)===De)?(Me(je.filter(gt=>(gt._id||gt.id)!==De)),D.info(`${J.name} removed from wishlist`)):(Me([...je,J]),D.success(`❤️ ${J.name} added to wishlist`))},La=J=>je.some(De=>(De._id||De.id)===J),nr=()=>{L(!0)},ys=async()=>{if(!cs.name||!cs.phone){D.error("Please fill in all fields");return}try{await Yh.updateProfile(cs),D.success("Profile updated successfully!"),As(!1);const J={...a,...cs};localStorage.setItem("customerData",JSON.stringify(J)),setTimeout(()=>window.location.reload(),500)}catch(J){console.error("Profile update error:",J),D.error(J.response?.data?.message||"Failed to update profile")}};return v.useEffect(()=>(console.log("🚀 ClientStorefront: Mounting..."),p(!0),()=>{console.log("💥 ClientStorefront: Unmounting..."),p(!1)}),[]),v.useEffect(()=>{console.log("🔍 Storefront: Auth check running...",{mounted:h,authLoading:o,hasCheckedAuth:f,isAuthenticated:r,hasCustomer:!!a}),h&&!o&&!f&&(console.log("✅ Storefront: Auth check complete",{isAuthenticated:r,hasCustomer:!!a}),x(!0))},[h,o,r,a,f]),!h||o||!f?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-background via-secondary/10 to-background flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-primary mx-auto mb-4"}),e.jsx("p",{className:"text-lg text-muted-foreground",children:"Loading storefront..."}),o&&e.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:"Verifying authentication..."})]})}):e.jsx(fK,{children:e.jsxs("div",{className:"storefront-container min-h-screen bg-gradient-to-br from-background via-secondary/10 to-background smooth-scroll",children:[e.jsx("header",{className:"sticky top-0 z-40 glass-panel",children:e.jsx("div",{className:"container mx-auto px-4 py-4",children:e.jsxs("div",{className:"flex items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"h-10 w-10 rounded-full bg-gradient-to-br from-primary to-primary/60 flex items-center justify-center shadow-md",children:e.jsx(qt,{className:"h-5 w-5 text-primary-foreground"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-lg font-bold text-foreground",children:Ct.businessName}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["by ",Ct.ownerName]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(R,{variant:ee==="chats"?"default":"ghost",size:"icon",onClick:()=>me("chats"),className:"hidden sm:flex",title:"Messages",children:e.jsx(Zs,{className:"h-5 w-5"})}),e.jsx(pK,{}),e.jsx(R,{variant:ee==="orders"?"default":"ghost",size:"icon",onClick:()=>me("orders"),className:"hidden sm:flex",children:e.jsx(Dl,{className:"h-5 w-5"})}),e.jsx(R,{variant:"ghost",size:"icon",onClick:ke,title:"My Account",children:e.jsx(na,{className:"h-5 w-5"})}),e.jsxs(rv,{open:ot,onOpenChange:hs,children:[e.jsx(nv,{asChild:!0,children:e.jsx(R,{variant:"ghost",size:"icon",title:"Change Theme",children:e.jsx(Ea,{className:"h-5 w-5"})})}),e.jsxs(iv,{children:[e.jsxs(lv,{children:[e.jsx(ov,{children:"Theme Settings"}),e.jsx(cv,{children:"Choose your preferred theme"})]}),e.jsx("div",{className:"mt-6 space-y-4",children:e.jsx(vK,{onThemeChange:nt,currentTheme:g})})]})]}),e.jsx(R,{variant:"ghost",size:"icon",onClick:we,title:a?"Logout":"Login",children:e.jsx(rf,{className:"h-5 w-5"})})]})]})})}),e.jsx("div",{className:"container mx-auto px-4 py-6",children:e.jsxs(pa,{value:ee,onValueChange:me,className:"space-y-6",children:[e.jsxs(ba,{className:"grid w-full max-w-3xl mx-auto grid-cols-5",children:[e.jsxs(ut,{value:"shop",className:"gap-1",children:[e.jsx(js,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Shop"})]}),e.jsxs(ut,{value:"services",className:"gap-1",children:[e.jsx(ms,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Services"})]}),e.jsxs(ut,{value:"chats",className:"gap-1 relative",children:[e.jsx(Zs,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Chats"})]}),e.jsxs(ut,{value:"orders",className:"gap-1",children:[e.jsx(Dl,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Orders"})]}),e.jsxs(ut,{value:"account",className:"gap-1",children:[e.jsx(na,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Account"})]})]}),e.jsxs(mt,{value:"shop",className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-wrap items-center justify-center gap-4 py-4",children:[e.jsxs(_e,{variant:"outline",className:"gap-2 px-4 py-2",children:[e.jsx(af,{className:"h-4 w-4 text-success"}),"Secure Payment"]}),e.jsxs(_e,{variant:"outline",className:"gap-2 px-4 py-2",children:[e.jsx(qt,{className:"h-4 w-4 text-primary"}),"Fast Delivery"]}),e.jsxs(_e,{variant:"outline",className:"gap-2 px-4 py-2",children:[e.jsx(af,{className:"h-4 w-4 text-warning"}),"7-Day Returns"]})]}),e.jsx("div",{className:"mb-6",children:e.jsx(gK,{discounts:Pe})}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(ia,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(fe,{placeholder:"Search products...",value:N,onChange:J=>y(J.target.value),className:"pl-10 glass-panel"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(Ot,{value:S,onValueChange:C,children:[e.jsxs(Pt,{className:"w-[180px] glass-panel",children:[e.jsx(al,{className:"h-4 w-4 mr-2"}),e.jsx(Rt,{placeholder:"Category"})]}),e.jsx(Mt,{className:"bg-background/95 backdrop-blur-lg border-white/20",children:pt.map(J=>e.jsx(Ee,{value:J,children:J==="all"?"All Categories":J},J))})]}),e.jsxs(rv,{children:[e.jsx(nv,{asChild:!0,children:e.jsxs(R,{className:"gap-2 relative",children:[e.jsx(js,{className:"h-4 w-4"}),"Cart",E>0&&e.jsx(_e,{className:"absolute -top-2 -right-2 h-5 w-5 p-0 flex items-center justify-center badge-pulse",children:E})]})}),e.jsxs(iv,{className:"w-full sm:max-w-md overflow-y-auto glass-panel",children:[e.jsxs(lv,{children:[e.jsx(ov,{children:"Shopping Cart"}),e.jsxs(cv,{children:[E," ",E===1?"item":"items"," in your cart"]})]}),e.jsx("div",{className:"mt-6 space-y-4",children:T.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(js,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"Your cart is empty"})]}):e.jsxs(e.Fragment,{children:[T.map(J=>e.jsx(K,{className:"glass-card",children:e.jsx(X,{className:"p-4",children:e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:"h-16 w-16 rounded bg-muted flex items-center justify-center",children:e.jsx(qt,{className:"h-8 w-8 text-muted-foreground"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-semibold text-sm",children:J.name}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["KES ",J.price.toFixed(2)]}),e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsx(R,{size:"icon",variant:"outline",className:"h-7 w-7",onClick:()=>Jt(J.id,-1),children:e.jsx(Ru,{className:"h-3 w-3"})}),e.jsx("span",{className:"text-sm font-medium w-8 text-center",children:J.quantity}),e.jsx(R,{size:"icon",variant:"outline",className:"h-7 w-7",onClick:()=>Jt(J.id,1),children:e.jsx(Hs,{className:"h-3 w-3"})}),e.jsx(R,{size:"icon",variant:"ghost",className:"h-7 w-7 ml-auto",onClick:()=>Ut(J.id),children:e.jsx(fa,{className:"h-3 w-3"})})]})]})]})})},J._id||J.id)),e.jsxs("div",{className:"border-t pt-4",children:[e.jsxs("div",{className:"flex justify-between text-lg font-bold mb-4",children:[e.jsx("span",{children:"Total:"}),e.jsxs("span",{children:["KES ",k.toFixed(2)]})]}),e.jsx(R,{className:"w-full",size:"lg",onClick:nr,children:"Proceed to Checkout"})]})]})})]})]})]})]}),Ue?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-primary mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"Loading products..."})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:yt.map(J=>e.jsxs(K,{className:"group glass-card cursor-pointer relative overflow-hidden hover:shadow-xl transition-all duration-300",onClick:()=>B(J),children:[e.jsx(R,{size:"icon",variant:"ghost",className:"absolute top-2 right-2 z-10 h-8 w-8 rounded-full bg-background/80 backdrop-blur-sm hover:bg-background",onClick:De=>{De.stopPropagation(),Ia(J)},children:e.jsx(Wi,{className:`h-4 w-4 transition-all ${La(J._id||J.id)?"fill-red-500 text-red-500":"text-muted-foreground"}`})}),e.jsx(pe,{className:"p-0",children:e.jsxs("div",{className:"aspect-square bg-gradient-to-br from-secondary/30 to-primary/10 rounded-t-lg flex items-center justify-center overflow-hidden relative group-hover:scale-105 transition-transform duration-300",children:[J.image?e.jsx("img",{src:J.image,alt:J.name,className:"w-full h-full object-cover"}):e.jsx(qt,{className:"h-20 w-20 text-primary/40 product-card-image"}),e.jsx("div",{className:"absolute bottom-2 left-2",children:e.jsx(_e,{variant:(J.stockQuantity||J.stock)>10?"default":(J.stockQuantity||J.stock)===0?"destructive":"secondary",className:"shadow-lg",children:(J.stockQuantity||J.stock)===0?"Out of Stock":`${J.stockQuantity||J.stock} left`})})]})}),e.jsxs(X,{className:"p-4",children:[e.jsxs("div",{className:"mb-2",children:[e.jsx("div",{className:"flex items-center justify-between mb-1",children:e.jsx(ge,{className:"text-base line-clamp-1 flex-1",children:J.name})}),e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("div",{className:"flex items-center gap-0.5",children:[...Array(5)].map((De,Ge)=>e.jsx(Ja,{className:`h-3 w-3 ${Ge<Math.floor(J.rating||4.5)?"fill-yellow-500 text-yellow-500":"text-muted-foreground"}`},Ge))}),e.jsx("span",{className:"text-xs text-muted-foreground",children:J.rating||4.5})]})]}),e.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2 mb-3",children:J.description}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{children:(()=>{const De=vt.find(Ge=>Ge.productId===(J._id||J.id));if(De){const Ge=De.discount,gt=Ge.discountType==="percentage"?J.price*Ge.discountValue/100:Ge.discountValue,jt=J.price-gt;return e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-lg font-bold text-primary",children:["KES ",jt.toFixed(2)]}),e.jsxs(_e,{variant:"destructive",className:"text-xs animate-pulse",children:["-",Ge.discountType==="percentage"?`${Ge.discountValue}%`:`KES ${Ge.discountValue}`]})]}),e.jsxs("span",{className:"text-xs text-muted-foreground line-through",children:["KES ",J.price.toFixed(2)]})]})}return e.jsxs("span",{className:"text-lg font-bold text-primary",children:["KES ",(J.price||0).toFixed(2)]})})()}),e.jsx(_e,{variant:"outline",className:"text-xs",children:J.category||"General"})]})]}),e.jsxs(wo,{className:"p-4 pt-0 gap-2",children:[e.jsxs(R,{className:"flex-1 gap-2",onClick:De=>{De.stopPropagation(),Kt(J)},disabled:(J.stockQuantity||J.stock)===0,children:[e.jsx(js,{className:"h-4 w-4"}),(J.stockQuantity||J.stock)===0?"Out of Stock":"Add to Cart"]}),e.jsx(R,{variant:"outline",size:"icon",onClick:De=>{De.stopPropagation(),B(J)},children:e.jsx(la,{className:"h-4 w-4"})})]})]},J._id||J.id))}),yt.length===0&&!Ue&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(qt,{className:"h-16 w-16 mx-auto text-muted-foreground mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No products found"}),e.jsx("p",{className:"text-muted-foreground",children:"Try adjusting your search or filters"})]})]})]}),e.jsx(mt,{value:"services",className:"space-y-6",children:e.jsxs("div",{className:"space-y-4",children:[W.length>0&&e.jsx(K,{className:"glass-card",children:e.jsxs(X,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Xr,{className:"h-5 w-5 text-primary"}),e.jsxs("div",{className:"flex-1",children:[e.jsx(ae,{children:"Select Location"}),e.jsxs(Ot,{value:ve?._id||ve?.id,onValueChange:J=>{const De=W.find(Ge=>(Ge._id||Ge.id)===J);ce(De)},children:[e.jsx(Pt,{className:"mt-1",children:e.jsx(Rt,{placeholder:"Choose a location"})}),e.jsx(Mt,{children:W.map(J=>e.jsx(Ee,{value:J._id||J.id,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Kc,{className:"h-4 w-4"}),J.name," - ",J.city]})},J._id||J.id))})]})]})]}),ve&&e.jsxs("div",{className:"mt-3 p-3 bg-accent/20 rounded-lg",children:[e.jsx("p",{className:"text-sm font-medium",children:ve.name}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[ve.address,", ",ve.city]}),ve.phone&&e.jsxs("p",{className:"text-xs text-muted-foreground flex items-center gap-1 mt-1",children:[e.jsx($s,{className:"h-3 w-3"})," ",ve.phone]}),ve.operatingHours&&e.jsxs("p",{className:"text-xs text-muted-foreground flex items-center gap-1",children:[e.jsx(Qt,{className:"h-3 w-3"})," ",ve.operatingHours]})]})]})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold text-foreground",children:"Our Services"}),e.jsxs("p",{className:"text-muted-foreground mt-1",children:["Professional services delivered by our expert team ",Q.length>0&&`• ${Q.length} available`]})]}),Q.length>0&&e.jsxs(_e,{variant:"default",className:"text-sm px-4 py-2 animate-pulse",children:[e.jsx(ms,{className:"h-4 w-4 mr-1"}),Q.length," Live Services"]})]}),Ue?e.jsx(K,{className:"glass-card",children:e.jsxs(X,{className:"p-12 text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"Loading services..."})]})}):Q.length===0?e.jsx(K,{className:"glass-card",children:e.jsxs(X,{className:"p-12 text-center",children:[e.jsx(ms,{className:"h-16 w-16 mx-auto mb-4 text-muted-foreground"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No Services Available Yet"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"Services will appear here once the store owner adds them."}),e.jsx(R,{variant:"outline",onClick:()=>{window.location.reload()},children:"Refresh Page"})]})}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Q.map(J=>e.jsxs(K,{className:"glass-card hover:shadow-xl transition-all duration-300 group overflow-hidden",children:[e.jsxs("div",{className:"aspect-video bg-gradient-to-br from-primary/20 to-secondary/20 relative overflow-hidden",children:[J.image?e.jsx("img",{src:J.image,alt:J.name,className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-300"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx(ms,{className:"h-16 w-16 text-primary/40"})}),J.category&&e.jsx("div",{className:"absolute top-3 right-3",children:e.jsx(_e,{className:"bg-white/90 text-foreground backdrop-blur-sm",children:J.category})})]}),e.jsxs(pe,{className:"pb-3",children:[e.jsx(ge,{className:"text-xl mb-2 group-hover:text-primary transition-colors",children:J.name}),e.jsxs(lt,{className:"flex items-center gap-2 justify-between",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Qt,{className:"h-4 w-4"}),J.duration]}),e.jsxs(_e,{variant:"secondary",className:"gap-1",children:[e.jsx(Xt,{className:"h-3 w-3"}),J.staff," staff"]})]})]}),e.jsxs(X,{children:[J.description&&e.jsx("p",{className:"text-sm text-muted-foreground mb-3 line-clamp-2",children:J.description}),e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[(()=>{const De=Zt(J._id||J.id),Ge=Number(J.price)||0,gt=De?ts(Ge,De):null,jt=gt!==null?gt:Ge,ss=isNaN(Ge)?0:Ge,ks=isNaN(jt)?0:jt;return e.jsxs("div",{className:"flex flex-col gap-1",children:[De&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-sm text-muted-foreground line-through",children:["KES ",ss.toLocaleString()]}),e.jsxs(_e,{variant:"destructive",className:"text-xs",children:["-",Number(De.value)||0,De.type==="percentage"?"%":" KES"," OFF"]})]}),e.jsxs("span",{className:`text-2xl font-bold ${De?"text-green-600":"text-primary"}`,children:["KES ",ks.toLocaleString()]})]})})(),e.jsx("div",{className:"flex items-center gap-1 text-yellow-500",children:[...Array(5)].map((De,Ge)=>e.jsx(Ja,{className:`h-4 w-4 ${Ge<Math.floor(J.rating||5)?"fill-current":"text-muted-foreground"}`},Ge))})]}),J.bookings>0&&e.jsxs("p",{className:"text-xs text-muted-foreground mb-3",children:[J.bookings," bookings completed"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs(R,{variant:"outline",onClick:()=>{M(J),D.info("Service details opened")},children:[e.jsx(la,{className:"h-4 w-4 mr-2"}),"Details"]}),e.jsxs(R,{onClick:()=>{M(J),V(!0)},children:[e.jsx(ms,{className:"h-4 w-4 mr-2"}),"Book Now"]})]})]})]},J._id||J.id))})]}),Z.length>0&&e.jsxs("div",{children:[e.jsxs("h3",{className:"text-xl font-semibold mb-4 flex items-center gap-2",children:[e.jsx(Xt,{className:"h-5 w-5"}),"Our Team"]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:Z.slice(0,8).map(J=>e.jsx(K,{className:"text-center glass-card",children:e.jsxs(X,{className:"p-4",children:[e.jsx("div",{className:"h-16 w-16 rounded-full bg-gradient-to-br from-primary to-accent mx-auto mb-3 flex items-center justify-center",children:e.jsx(na,{className:"h-8 w-8 text-primary-foreground"})}),e.jsx("p",{className:"font-medium text-sm",children:J.name}),e.jsx("p",{className:"text-xs text-muted-foreground",children:J.role})]})},J._id||J.id))})]})]})}),e.jsx(mt,{value:"chats",className:"space-y-6",children:a?e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Messages"}),e.jsxs("p",{className:"text-muted-foreground",children:["Chat with ",Ct.businessName]})]}),e.jsx(xK,{})]}):e.jsx(K,{className:"glass-card max-w-md mx-auto",children:e.jsxs(X,{className:"p-12 text-center",children:[e.jsx(Zs,{className:"h-16 w-16 mx-auto mb-4 text-muted-foreground"}),e.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Login Required"}),e.jsxs("p",{className:"text-muted-foreground mb-6",children:["Please sign in to chat with ",Ct.businessName]}),e.jsxs(R,{onClick:()=>s("/client/login"),className:"gap-2",children:[e.jsx(na,{className:"h-4 w-4"}),"Sign In"]})]})})}),e.jsx(mt,{value:"orders",children:e.jsx(mK,{})}),e.jsx(mt,{value:"account",className:"space-y-6",children:a?e.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[e.jsxs(K,{className:"glass-card",children:[e.jsxs(pe,{children:[e.jsxs(ge,{className:"flex items-center gap-2",children:[e.jsx(na,{className:"h-5 w-5"}),"My Account"]}),e.jsx(lt,{children:"Manage your profile and preferences"})]}),e.jsx(X,{className:"space-y-4",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"h-20 w-20 rounded-full bg-gradient-to-br from-primary to-accent flex items-center justify-center",children:e.jsx(na,{className:"h-10 w-10 text-primary-foreground"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-xl font-bold",children:a?.name||"Guest User"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:a?.email||"Not logged in"}),e.jsx(_e,{className:"mt-1",children:a?"Premium Member":"Guest"})]}),e.jsxs(R,{variant:"outline",size:"sm",onClick:()=>{a?(_t({name:a.name||"",phone:a.phone||""}),As(!0)):console.log("No customer to edit, just showing account tab")},children:[e.jsx(Db,{className:"h-4 w-4 mr-2"}),"Edit"]})]})})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsx(K,{className:"glass-card",children:e.jsxs(X,{className:"p-4 text-center",children:[e.jsx(js,{className:"h-8 w-8 mx-auto mb-2 text-primary"}),e.jsx("p",{className:"text-2xl font-bold",children:T.length}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Cart Items"})]})}),e.jsx(K,{className:"glass-card",children:e.jsxs(X,{className:"p-4 text-center",children:[e.jsx(Wi,{className:"h-8 w-8 mx-auto mb-2 text-red-500"}),e.jsx("p",{className:"text-2xl font-bold",children:je.length}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Wishlist"})]})}),e.jsx(K,{className:"glass-card",children:e.jsxs(X,{className:"p-4 text-center",children:[e.jsx(Dl,{className:"h-8 w-8 mx-auto mb-2 text-accent"}),e.jsx("p",{className:"text-2xl font-bold",children:"0"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Orders"})]})}),e.jsx(K,{className:"glass-card",children:e.jsxs(X,{className:"p-4 text-center",children:[e.jsx(Ja,{className:"h-8 w-8 mx-auto mb-2 text-yellow-500"}),e.jsx("p",{className:"text-2xl font-bold",children:"100"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Reward Points"})]})})]}),e.jsxs(K,{className:"glass-card",children:[e.jsx(pe,{children:e.jsx(ge,{className:"text-lg",children:"Quick Actions"})}),e.jsx(X,{children:e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[e.jsxs(R,{variant:"outline",className:"h-auto flex-col gap-2 py-4",onClick:()=>me("orders"),children:[e.jsx(js,{className:"h-6 w-6"}),e.jsx("span",{className:"text-sm",children:"View Orders"})]}),e.jsxs(R,{variant:"outline",className:"h-auto flex-col gap-2 py-4",onClick:()=>me("shop"),children:[e.jsx(qt,{className:"h-6 w-6"}),e.jsx("span",{className:"text-sm",children:"Shop Products"})]}),e.jsxs(R,{variant:"outline",className:"h-auto flex-col gap-2 py-4",onClick:()=>me("services"),children:[e.jsx(ms,{className:"h-6 w-6"}),e.jsx("span",{className:"text-sm",children:"Book Service"})]}),e.jsxs(R,{variant:"outline",className:"h-auto flex-col gap-2 py-4",onClick:()=>s("/client/messages"),children:[e.jsx(Zs,{className:"h-6 w-6"}),e.jsx("span",{className:"text-sm",children:"Messages"})]}),e.jsxs(R,{variant:"outline",className:"h-auto flex-col gap-2 py-4",onClick:()=>{As(!0)},children:[e.jsx(Ea,{className:"h-6 w-6"}),e.jsx("span",{className:"text-sm",children:"Settings"})]})]})})]}),je.length>0&&e.jsxs(K,{className:"glass-card",children:[e.jsx(pe,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(ge,{className:"flex items-center gap-2",children:[e.jsx(Wi,{className:"h-5 w-5 text-red-500"}),"My Wishlist"]}),e.jsxs(_e,{children:[je.length," items"]})]})}),e.jsxs(X,{children:[e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:je.slice(0,4).map(J=>e.jsx(K,{className:"group cursor-pointer",onClick:()=>B(J),children:e.jsxs(X,{className:"p-3",children:[e.jsx("div",{className:"aspect-square bg-gradient-to-br from-secondary/30 to-primary/10 rounded-lg flex items-center justify-center mb-2 group-hover:scale-105 transition-transform",children:e.jsx(qt,{className:"h-8 w-8 text-primary/40"})}),e.jsx("p",{className:"text-sm font-medium line-clamp-1",children:J.name}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["KES ",(J.price||0).toLocaleString()]})]})},J._id||J.id))}),je.length>4&&e.jsxs(R,{variant:"outline",className:"w-full mt-4",onClick:()=>me("shop"),children:["View All ",je.length," Items"]})]})]}),e.jsxs(K,{className:"glass-card bg-gradient-to-br from-primary/5 to-accent/5",children:[e.jsx(pe,{children:e.jsxs(ge,{className:"flex items-center gap-2",children:[e.jsx(Ja,{className:"h-5 w-5 text-yellow-500"}),"Rewards & Loyalty"]})}),e.jsxs(X,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Current Points"}),e.jsx("span",{className:"text-2xl font-bold text-primary",children:"100"})]}),e.jsx("div",{className:"w-full bg-secondary rounded-full h-2",children:e.jsx("div",{className:"bg-primary h-2 rounded-full",style:{width:"20%"}})}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"400 more points to next reward"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"p-3 bg-card rounded-lg border",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Lifetime Points"}),e.jsx("p",{className:"text-lg font-bold",children:"100"})]}),e.jsxs("div",{className:"p-3 bg-card rounded-lg border",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Member Since"}),e.jsx("p",{className:"text-lg font-bold",children:"2025"})]})]})]})]}),e.jsxs(K,{className:"glass-card",children:[e.jsx(pe,{children:e.jsxs(ge,{className:"flex items-center gap-2",children:[e.jsx(Qt,{className:"h-5 w-5"}),"Recent Activity"]})}),e.jsx(X,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-accent/10 rounded-lg",children:[e.jsx(js,{className:"h-5 w-5 text-primary"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium",children:"Cart updated"}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[T.length," items in cart"]})]}),e.jsx(_e,{variant:"secondary",children:"Now"})]}),je.length>0&&e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-accent/10 rounded-lg",children:[e.jsx(Wi,{className:"h-5 w-5 text-red-500"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium",children:"Wishlist updated"}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[je.length," items saved"]})]}),e.jsx(_e,{variant:"secondary",children:"Recent"})]})]})})]}),e.jsx(hK,{}),e.jsxs(K,{className:"glass-card",children:[e.jsx(pe,{children:e.jsx(ge,{className:"text-lg",children:"Account Settings"})}),e.jsxs(X,{className:"space-y-3",children:[e.jsxs(R,{variant:"outline",className:"w-full justify-between",onClick:()=>As(!0),children:[e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(na,{className:"h-4 w-4"}),"Edit Profile"]}),e.jsx(Db,{className:"h-4 w-4"})]}),e.jsxs(R,{variant:"outline",className:"w-full justify-between",onClick:()=>me("orders"),children:[e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(Dl,{className:"h-4 w-4"}),"Order History"]}),e.jsx(la,{className:"h-4 w-4"})]}),e.jsxs(R,{variant:"outline",className:"w-full justify-between",onClick:()=>hs(!0),children:[e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(Ea,{className:"h-4 w-4"}),"Theme Preferences"]}),e.jsx(Ea,{className:"h-4 w-4"})]}),e.jsx(R,{variant:"destructive",className:"w-full justify-between",onClick:we,children:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(rf,{className:"h-4 w-4"}),"Logout"]})})]})]})]}):e.jsx(K,{className:"glass-card",children:e.jsxs(X,{className:"p-12 text-center",children:[e.jsx(na,{className:"h-16 w-16 mx-auto mb-4 text-muted-foreground"}),e.jsx("h3",{className:"text-xl font-bold mb-2",children:"Sign In Required"}),e.jsx("p",{className:"text-muted-foreground mb-6",children:"Please log in to access your account, orders, and personalized features"}),e.jsxs("div",{className:"flex gap-3 justify-center",children:[e.jsx(R,{onClick:()=>me("account"),children:"Sign In"}),e.jsx(R,{variant:"outline",onClick:()=>s(`/client/register/${t}`),children:"Create Account"})]})]})})})]})}),e.jsx(bG,{product:A,open:!!A,onClose:()=>B(null),onAddToCart:Kt}),H&&e.jsx(Ft,{open:!!H,onOpenChange:()=>M(null),children:e.jsxs(It,{className:"max-w-2xl",children:[e.jsxs(Lt,{children:[e.jsx(Bt,{className:"text-2xl",children:H.name}),e.jsx(es,{children:"Complete service details and booking information"})]}),e.jsxs("div",{className:"space-y-4",children:[H.image&&e.jsx("div",{className:"aspect-video rounded-lg overflow-hidden",children:e.jsx("img",{src:H.image,alt:H.name,className:"w-full h-full object-cover"})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(K,{children:e.jsxs(X,{className:"p-4 flex items-center gap-3",children:[e.jsx(ea,{className:"h-8 w-8 text-green-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Price"}),e.jsxs("p",{className:"text-xl font-bold",children:["KES ",(H.price||0).toLocaleString()]})]})]})}),e.jsx(K,{children:e.jsxs(X,{className:"p-4 flex items-center gap-3",children:[e.jsx(Qt,{className:"h-8 w-8 text-blue-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Duration"}),e.jsx("p",{className:"text-xl font-bold",children:H.duration})]})]})})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-2",children:"Description"}),e.jsx("p",{className:"text-muted-foreground",children:H.description||"Professional service provided by our expert team."})]}),e.jsxs("div",{className:"flex items-center gap-6 pt-2 border-t",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ja,{className:"h-5 w-5 text-yellow-500 fill-yellow-500"}),e.jsxs("span",{className:"font-semibold",children:[H.rating||5,"/5"]})]}),H.bookings>0&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ms,{className:"h-5 w-5 text-primary"}),e.jsxs("span",{className:"font-semibold",children:[H.bookings," bookings"]})]})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx(R,{variant:"outline",className:"flex-1",onClick:()=>M(null),children:"Close"}),e.jsxs(R,{className:"flex-1",onClick:()=>{me("services"),D.success(`Selected: ${H.name}`),M(null)},children:[e.jsx(ms,{className:"h-4 w-4 mr-2"}),"Book Service"]})]})]})]})}),e.jsx(Ft,{open:ps,onOpenChange:As,children:e.jsxs(It,{className:"sm:max-w-md",children:[e.jsxs(Lt,{children:[e.jsx(Bt,{children:"Edit Profile"}),e.jsx(es,{children:"Update your personal information"})]}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(ae,{htmlFor:"edit-name",children:"Full Name"}),e.jsxs("div",{className:"relative",children:[e.jsx(na,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(fe,{id:"edit-name",value:cs.name,onChange:J=>_t({...cs,name:J.target.value}),className:"pl-10",placeholder:"Your full name"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ae,{htmlFor:"edit-phone",children:"Phone Number"}),e.jsxs("div",{className:"relative",children:[e.jsx($s,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(fe,{id:"edit-phone",value:cs.phone,onChange:J=>_t({...cs,phone:J.target.value}),className:"pl-10",placeholder:"+254 700 000 000"})]})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx(R,{variant:"outline",className:"flex-1",onClick:()=>As(!1),children:"Cancel"}),e.jsxs(R,{className:"flex-1 gap-2",onClick:ys,children:[e.jsx($i,{className:"h-4 w-4"}),"Save Changes"]})]})]})]})}),e.jsx(EG,{open:q,onClose:()=>L(!1),cartItems:T,cartTotal:k,onClearCart:F}),e.jsx(uK,{open:re,onClose:()=>{V(!1),M(null)},service:H}),e.jsx(Y4,{})]})})},yK=({product:t,isOpen:s,onClose:a})=>{const[r,i]=v.useState(1),[o,c]=v.useState(!1);if(!t)return null;const f=(C=>C>20?{label:"In Stock",variant:"default",color:"text-green-600",icon:ai}:C>0?{label:"Low Stock",variant:"secondary",color:"text-orange-600",icon:Cs}:{label:"Out of Stock",variant:"destructive",color:"text-red-600",icon:Cs})(t.stockQuantity||0),x=f.icon,p=(t.currency||"USD")==="KES"?"KES":"$",g=(t.price*r).toFixed(2),b=Math.min(t.stockQuantity||0,99),N=()=>{D.success(`Added ${r} ${t.name} to cart`,{description:`Total: $${g}`,icon:"🛒"}),a()},y=()=>{navigator.share?navigator.share({title:t.name,text:`Check out ${t.name} - $${t.price}`,url:window.location.href}).catch(()=>{navigator.clipboard.writeText(window.location.href),D.success("Link copied to clipboard!")}):(navigator.clipboard.writeText(window.location.href),D.success("Link copied to clipboard!"))},S=()=>{c(!o),D.success(o?"Removed from favorites":"Added to favorites",{icon:o?"💔":"❤️"})};return e.jsx(Ft,{open:s,onOpenChange:a,children:e.jsxs(It,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(Lt,{children:[e.jsxs(Bt,{className:"text-2xl font-bold flex items-center gap-2",children:[e.jsx(qt,{className:"h-6 w-6 text-primary"}),"Product Details"]}),e.jsx(es,{children:"Complete information about this product"})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6 py-4",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"aspect-square relative overflow-hidden rounded-xl border-2 border-primary/20 bg-primary/10 shadow-2xl",children:[e.jsx("img",{src:t.image||`https://via.placeholder.com/500x500?text=${encodeURIComponent(t.name)}`,alt:t.name,className:"object-cover w-full h-full hover:scale-110 transition-all duration-500"}),e.jsx("div",{className:"absolute inset-0 bg-black/10 opacity-0 hover:opacity-100 transition-opacity duration-300"}),t.featured&&e.jsxs(_e,{className:"absolute top-4 right-4 bg-yellow-500 text-white border-0 shadow-lg animate-pulse",children:[e.jsx(va,{className:"h-3 w-3 mr-1"}),"Featured"]}),t.stockQuantity>0&&t.stockQuantity<=5&&e.jsxs(_e,{className:"absolute top-4 left-4 bg-red-500 text-white border-0 shadow-lg",children:[e.jsx(Cs,{className:"h-3 w-3 mr-1"}),"Only ",t.stockQuantity," left!"]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(R,{variant:"outline",className:"flex-1",onClick:S,children:[e.jsx(Wi,{className:Je("h-4 w-4 mr-2",o&&"fill-red-500 text-red-500")}),o?"Favorited":"Add to Favorites"]}),e.jsx(R,{variant:"outline",onClick:y,children:e.jsx(qc,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx("h3",{className:"text-4xl font-bold text-foreground leading-tight",children:t.name}),e.jsxs("div",{className:"flex items-center gap-4 flex-wrap",children:[e.jsxs("div",{className:"bg-green-600 text-white px-6 py-3 rounded-xl shadow-lg",children:[e.jsx("span",{className:"text-sm font-medium opacity-90",children:"Price"}),e.jsxs("div",{className:"text-3xl font-bold",children:[p," ",t.price?.toFixed(2)||"0.00"]})]}),e.jsxs(_e,{variant:f.variant,className:"gap-2 px-4 py-2 text-base",children:[e.jsx(x,{className:"h-4 w-4"}),f.label]})]}),t.description&&e.jsx("p",{className:"text-lg text-muted-foreground leading-relaxed",children:t.description})]}),e.jsx(Fn,{}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"flex items-start gap-3 p-4 rounded-xl bg-primary/10 border border-primary/20 hover:shadow-md transition-shadow",children:[e.jsx(Fl,{className:"h-5 w-5 text-primary mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Category"}),e.jsx("p",{className:"font-semibold",children:t.category||"Uncategorized"})]})]}),e.jsxs("div",{className:"flex items-start gap-3 p-4 rounded-xl bg-primary/10 border border-primary/20 hover:shadow-md transition-shadow",children:[e.jsx(qt,{className:"h-5 w-5 text-primary mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"SKU"}),e.jsx("p",{className:"font-semibold font-mono",children:t.sku||"N/A"})]})]}),e.jsxs("div",{className:"flex items-start gap-3 p-4 rounded-xl bg-primary/10 border border-primary/20 hover:shadow-md transition-shadow",children:[e.jsx(HS,{className:"h-5 w-5 text-primary mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Available Stock"}),e.jsxs("p",{className:Je("font-semibold text-lg",f.color),children:[t.stockQuantity||0," units"]})]})]}),e.jsxs("div",{className:"flex items-start gap-3 p-4 rounded-xl bg-primary/10 border border-primary/20 hover:shadow-md transition-shadow",children:[e.jsx(Cs,{className:"h-5 w-5 text-primary mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Reorder Level"}),e.jsxs("p",{className:"font-semibold",children:[t.reorderLevel||5," units"]})]})]})]}),t.supplierName&&e.jsxs("div",{className:"flex items-start gap-3 p-4 rounded-lg border bg-card",children:[e.jsx(Yc,{className:"h-5 w-5 text-primary mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Supplier"}),e.jsx("p",{className:"font-semibold",children:t.supplierName})]})]}),e.jsx(Fn,{}),t.stockQuantity>0&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("label",{className:"text-sm font-medium",children:"Quantity:"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(R,{variant:"outline",size:"sm",onClick:()=>i(Math.max(1,r-1)),disabled:r<=1,children:"-"}),e.jsx("span",{className:"w-12 text-center font-semibold",children:r}),e.jsx(R,{variant:"outline",size:"sm",onClick:()=>i(Math.min(b,r+1)),disabled:r>=b,children:"+"})]}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:["(Max: ",b,")"]})]}),e.jsxs("div",{className:"flex items-center justify-between p-5 bg-primary/15 rounded-xl border-2 border-primary/30 shadow-inner",children:[e.jsx("span",{className:"text-lg font-semibold",children:"Total Price:"}),e.jsxs("span",{className:"text-3xl font-bold text-green-600",children:[p," ",g]})]}),e.jsxs(R,{className:"w-full gap-2 h-14 text-lg font-bold bg-green-600 hover:bg-green-700 shadow-lg hover:shadow-xl transition-all duration-300",onClick:N,children:[e.jsx(js,{className:"h-5 w-5"}),"Add to Cart"]})]}),t.stockQuantity===0&&e.jsxs("div",{className:"p-4 bg-red-50 dark:bg-red-950/20 border border-red-200 dark:border-red-900 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 text-red-600 dark:text-red-400",children:[e.jsx(Cs,{className:"h-5 w-5"}),e.jsx("p",{className:"font-semibold",children:"This product is currently out of stock"})]}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Please check back later or contact us for availability."})]}),t.createdAt&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground pt-2",children:[e.jsx(ms,{className:"h-4 w-4"}),e.jsxs("span",{children:["Added on ",new Date(t.createdAt).toLocaleDateString()]})]})]})]}),e.jsx(Rs,{children:e.jsx(R,{variant:"outline",onClick:a,children:"Close"})})]})})},NK=()=>{const t=Ka(),{isAuthenticated:s}=Es(),{add:a,count:r}=aj(),[i,o]=v.useState([]),[c,u]=v.useState(!0),[f,x]=v.useState(""),[h,p]=v.useState("all"),[g,b]=v.useState("grid"),[N,y]=v.useState(null),[S,C]=v.useState(!1),[T,_]=v.useState(null);v.useEffect(()=>{G()},[]);const G=async()=>{u(!0);try{const M=localStorage.getItem("token"),q=await ye.get("/products",{headers:M?{Authorization:`Bearer ${M}`}:{}});o(q.data||[]),(!q.data||q.data.length===0)&&D.info("No products found. Add products to get started!")}catch(M){console.error("Error fetching products:",M),D.error("Failed to load products. Please check your connection."),o([])}finally{u(!1)}},U=["all",...new Set(i.map(M=>M.category))],F=i.filter(M=>{const q=M.name?.toLowerCase().includes(f.toLowerCase())||M.description?.toLowerCase().includes(f.toLowerCase()),L=h==="all"||M.category===h;return q&&L}),k=M=>M>20?{label:"In Stock",variant:"default"}:M>0?{label:"Low Stock",variant:"secondary"}:{label:"Out of Stock",variant:"destructive"},E=M=>{y(M),C(!0)},A=()=>{C(!1),setTimeout(()=>y(null),300)},B=M=>{_(M._id||M.id),a(M,1),D.success(e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ai,{className:"h-4 w-4 text-green-500"}),e.jsxs("span",{children:[M.name," added to cart"]})]})),setTimeout(()=>_(null),1e3)},H=()=>{t("/dashboard/checkout")};return e.jsxs("div",{className:"space-y-6 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(R,{variant:"outline",size:"sm",onClick:()=>t(-1),children:[e.jsx(WS,{className:"h-4 w-4 mr-2"}),"Back"]}),e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold text-foreground flex items-center gap-2",children:[e.jsx(qt,{className:"h-8 w-8 text-green-600"}),"Product Store"]}),e.jsx("p",{className:"text-muted-foreground",children:"Browse and manage all available products"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(R,{variant:"outline",onClick:H,className:"relative",children:[e.jsx(js,{className:"h-4 w-4 mr-2"}),"Cart",r>0&&e.jsx("span",{className:"absolute -top-2 -right-2 bg-green-600 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:r})]}),e.jsx(R,{variant:g==="grid"?"default":"outline",size:"sm",onClick:()=>b("grid"),children:e.jsx(A6,{className:"h-4 w-4"})}),e.jsx(R,{variant:g==="list"?"default":"outline",size:"sm",onClick:()=>b("list"),children:e.jsx(_6,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{className:"grid gap-6 md:grid-cols-4",children:[e.jsxs(K,{children:[e.jsxs(pe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(ge,{className:"text-sm font-medium",children:"Total Products"}),e.jsx(qt,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(X,{children:[e.jsx("div",{className:"text-2xl font-bold",children:i.length}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[F.length," shown"]})]})]}),e.jsxs(K,{children:[e.jsxs(pe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(ge,{className:"text-sm font-medium",children:"Total Value"}),e.jsx(ea,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(X,{children:[e.jsxs("div",{className:"text-2xl font-bold",children:["KES ",i.reduce((M,q)=>M+(q.price*q.stockQuantity||0),0).toLocaleString()]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Inventory value"})]})]}),e.jsxs(K,{children:[e.jsxs(pe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(ge,{className:"text-sm font-medium",children:"Categories"}),e.jsx(al,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(X,{children:[e.jsx("div",{className:"text-2xl font-bold",children:U.length-1}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Product categories"})]})]}),e.jsxs(K,{children:[e.jsxs(pe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(ge,{className:"text-sm font-medium",children:"Low Stock Items"}),e.jsx(qt,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(X,{children:[e.jsx("div",{className:"text-2xl font-bold text-orange-600",children:i.filter(M=>M.stockQuantity<20&&M.stockQuantity>0).length}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Need restocking"})]})]})]}),e.jsx(K,{children:e.jsx(X,{className:"pt-6",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(ia,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(fe,{placeholder:"Search products by name or description...",value:f,onChange:M=>x(M.target.value),className:"pl-10"})]}),e.jsxs(Ot,{value:h,onValueChange:p,children:[e.jsx(Pt,{className:"w-full md:w-[200px]",children:e.jsx(Rt,{placeholder:"Filter by category"})}),e.jsx(Mt,{children:U.map(M=>e.jsx(Ee,{value:M,children:M==="all"?"All Categories":M},M))})]})]})})}),c?e.jsx(K,{children:e.jsxs(X,{className:"p-8 text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"Loading products..."})]})}):F.length===0?e.jsx(K,{children:e.jsxs(X,{className:"p-8 text-center",children:[e.jsx(qt,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No products found"}),e.jsx("p",{className:"text-muted-foreground",children:f||h!=="all"?"Try adjusting your search or filters":"No products available in the store"})]})}):e.jsx("div",{className:g==="grid"?"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6":"space-y-4",children:F.map(M=>{const q=k(M.stockQuantity||0);return g==="grid"?e.jsxs(K,{className:"hover:shadow-lg transition-shadow",children:[e.jsxs(pe,{children:[e.jsx("div",{className:"aspect-square relative overflow-hidden rounded-md bg-muted mb-4",children:e.jsx("img",{src:M.image||`https://via.placeholder.com/300x300?text=${encodeURIComponent(M.name)}`,alt:M.name,className:"object-cover w-full h-full"})}),e.jsx(ge,{className:"line-clamp-1",children:M.name}),e.jsx(lt,{className:"line-clamp-2",children:M.description||"No description available"})]}),e.jsx(X,{children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"text-2xl font-bold text-green-600",children:["KES ",M.price?.toLocaleString()||"0"]}),e.jsx(_e,{variant:q.variant,children:q.label})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm text-muted-foreground",children:[e.jsx("span",{children:M.category||"Uncategorized"}),e.jsxs("span",{children:["Stock: ",M.stockQuantity||0]})]})]})}),e.jsxs(wo,{className:"flex gap-2",children:[e.jsxs(R,{className:"flex-1",variant:"outline",onClick:()=>E(M),children:[e.jsx(la,{className:"h-4 w-4 mr-2"}),"Details"]}),e.jsx(R,{className:"flex-1",onClick:()=>B(M),disabled:M.stockQuantity<=0||T===(M._id||M.id),children:T===(M._id||M.id)?e.jsxs(e.Fragment,{children:[e.jsx(ai,{className:"h-4 w-4 mr-2"}),"Added!"]}):e.jsxs(e.Fragment,{children:[e.jsx(js,{className:"h-4 w-4 mr-2"}),"Add to Cart"]})})]})]},M._id||M.id):e.jsx(K,{className:"hover:shadow-md transition-shadow",children:e.jsx(X,{className:"p-6",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-24 h-24 relative overflow-hidden rounded-md bg-muted flex-shrink-0",children:e.jsx("img",{src:M.image||`https://via.placeholder.com/100x100?text=${encodeURIComponent(M.name)}`,alt:M.name,className:"object-cover w-full h-full"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-lg mb-1",children:M.name}),e.jsx("p",{className:"text-sm text-muted-foreground mb-2 line-clamp-1",children:M.description||"No description available"}),e.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[e.jsx(_e,{variant:"outline",children:M.category||"Uncategorized"}),e.jsxs("span",{className:"text-muted-foreground",children:["Stock: ",M.stockQuantity||0]}),e.jsx(_e,{variant:q.variant,children:q.label})]})]}),e.jsxs("div",{className:"flex flex-col items-end gap-2",children:[e.jsxs("span",{className:"text-2xl font-bold text-green-600",children:["KES ",M.price?.toLocaleString()||"0"]}),e.jsxs(R,{variant:"outline",size:"sm",onClick:()=>E(M),children:[e.jsx(la,{className:"h-4 w-4 mr-2"}),"View"]})]})]})})},M._id||M.id)})}),e.jsx(yK,{product:N,isOpen:S,onClose:A})]})},bK=[{id:1,name:"Premium Hair Treatment",category:"Services",price:2500,image:"💇",description:"Professional hair treatment with organic products",stock:"Available"},{id:2,name:"Manicure & Pedicure",category:"Services",price:1500,image:"💅",description:"Complete nail care service",stock:"Available"},{id:3,name:"Organic Shampoo",category:"Products",price:800,image:"🧴",description:"Natural ingredients for healthy hair",stock:"In Stock"},{id:4,name:"Face Massage",category:"Services",price:2e3,image:"💆",description:"Relaxing facial massage therapy",stock:"Available"},{id:5,name:"Hair Dryer Pro",category:"Products",price:3500,image:"🔌",description:"Professional grade hair dryer",stock:"In Stock"},{id:6,name:"Spa Package",category:"Services",price:5e3,image:"🌸",description:"Full day spa experience",stock:"Available"}],wK=()=>{const[t,s]=v.useState(""),[a,r]=v.useState("all"),[i,o]=v.useState([]),c=bK.filter(p=>{const g=p.name.toLowerCase().includes(t.toLowerCase()),b=a==="all"||p.category===a;return g&&b}),u=p=>{o(g=>g.find(N=>N.id===p.id)?g.map(N=>N.id===p.id?{...N,quantity:N.quantity+1}:N):[...g,{id:p.id,name:p.name,price:p.price,quantity:1}]),D.success(`${p.name} added to cart`)},f=(p,g)=>{o(b=>b.map(N=>N.id===p?{...N,quantity:Math.max(0,N.quantity+g)}:N).filter(N=>N.quantity>0))},x=i.reduce((p,g)=>p+g.price*g.quantity,0),h=i.reduce((p,g)=>p+g.quantity,0);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Product Catalog"}),e.jsx("p",{className:"text-muted-foreground",children:"Browse our products and services"})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs(_e,{variant:"secondary",className:"text-lg py-2 px-4",children:[e.jsx(js,{className:"h-4 w-4 mr-2"}),h," items"]})})]}),e.jsx(K,{children:e.jsx(X,{className:"p-4",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(ia,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),e.jsx(fe,{placeholder:"Search products or services...",value:t,onChange:p=>s(p.target.value),className:"pl-10"})]}),e.jsxs(Ot,{value:a,onValueChange:r,children:[e.jsxs(Pt,{className:"w-full sm:w-48",children:[e.jsx(al,{className:"h-4 w-4 mr-2"}),e.jsx(Rt,{placeholder:"Category"})]}),e.jsxs(Mt,{children:[e.jsx(Ee,{value:"all",children:"All Categories"}),e.jsx(Ee,{value:"Services",children:"Services"}),e.jsx(Ee,{value:"Products",children:"Products"})]})]})]})})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:c.map(p=>e.jsxs(K,{className:"card-hover",children:[e.jsxs(pe,{children:[e.jsx("div",{className:"text-5xl mb-4 text-center",children:p.image}),e.jsx(ge,{children:p.name}),e.jsx(lt,{children:p.description})]}),e.jsxs(X,{children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"text-2xl font-bold text-primary",children:["KES ",p.price.toLocaleString()]}),e.jsx(_e,{variant:"outline",children:p.stock})]}),e.jsx(_e,{className:"mt-2",children:p.category})]}),e.jsx(wo,{children:e.jsxs(R,{onClick:()=>u(p),className:"w-full",children:[e.jsx(js,{className:"h-4 w-4 mr-2"}),"Add to Cart"]})})]},p.id))}),i.length>0&&e.jsxs(K,{className:"border-primary",children:[e.jsx(pe,{children:e.jsxs(ge,{children:["Shopping Cart (",h," items)"]})}),e.jsx(X,{className:"space-y-4",children:i.map(p=>e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium",children:p.name}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["KES ",p.price.toLocaleString()," each"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(R,{variant:"outline",size:"icon",onClick:()=>f(p.id,-1),children:e.jsx(Ru,{className:"h-4 w-4"})}),e.jsx("span",{className:"w-8 text-center font-medium",children:p.quantity}),e.jsx(R,{variant:"outline",size:"icon",onClick:()=>f(p.id,1),children:e.jsx(Hs,{className:"h-4 w-4"})}),e.jsxs("div",{className:"w-32 text-right font-bold",children:["KES ",(p.price*p.quantity).toLocaleString()]})]})]},p.id))}),e.jsxs(wo,{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"w-full flex justify-between items-center text-xl font-bold",children:[e.jsx("span",{children:"Total:"}),e.jsxs("span",{className:"text-primary",children:["KES ",x.toLocaleString()]})]}),e.jsx(R,{className:"w-full",size:"lg",children:"Proceed to Checkout"})]})]})]})},Hh=[{id:1,name:"Premium Hair Treatment",duration:"1 hour",price:2500},{id:2,name:"Manicure & Pedicure",duration:"45 min",price:1500},{id:3,name:"Face Massage",duration:"30 min",price:2e3},{id:4,name:"Spa Package",duration:"2 hours",price:5e3}],SK=["09:00 AM","10:00 AM","11:00 AM","12:00 PM","01:00 PM","02:00 PM","03:00 PM","04:00 PM","05:00 PM"],CK=()=>{const[t,s]=v.useState(),[a,r]=v.useState(""),[i,o]=v.useState(""),[c,u]=v.useState({name:"",phone:"",email:"",notes:""}),[f,x]=v.useState(1),h=async g=>{if(g.preventDefault(),!a||!t||!i){D.error("Please complete all required fields");return}try{const b={customerName:c.name,service:Hh.find(S=>S.id.toString()===a)?.name||a,time:new Date(`${t?.toISOString().split("T")[0]}T${i.replace(" ","")}`),durationMinutes:parseInt((Hh.find(S=>S.id.toString()===a)?.duration||"0").replace(/[^0-9]/g,""),10)||60,notes:c.notes,email:c.email},N=localStorage.getItem("token"),y=window.location.pathname.split("/").pop();N?await ye.post("/appointments",b):await ye.post("/public/appointments",{...b,inviteCode:y}),D.success("Appointment booked successfully! We'll send you a confirmation shortly.",{icon:e.jsx(os,{className:"h-5 w-5"})}),x(1),s(void 0),r(""),o(""),u({name:"",phone:"",email:"",notes:""})}catch(b){console.error("Failed to book appointment",b),D.error("Failed to book appointment. Please try again.")}},p=Hh.find(g=>g.id.toString()===a);return e.jsxs("div",{className:"space-y-6 max-w-4xl mx-auto",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Book an Appointment"}),e.jsx("p",{className:"text-muted-foreground",children:"Schedule your service in 3 easy steps"})]}),e.jsx("div",{className:"flex justify-between items-center mb-8",children:[1,2,3].map(g=>e.jsxs("div",{className:"flex items-center flex-1",children:[e.jsx("div",{className:`flex items-center justify-center w-10 h-10 rounded-full font-bold ${f>=g?"bg-primary text-primary-foreground":"bg-muted text-muted-foreground"}`,children:g}),g<3&&e.jsx("div",{className:`flex-1 h-1 mx-2 ${f>g?"bg-primary":"bg-muted"}`})]},g))}),e.jsxs("form",{onSubmit:h,className:"space-y-6",children:[f===1&&e.jsxs(K,{children:[e.jsxs(pe,{children:[e.jsxs(ge,{className:"flex items-center gap-2",children:[e.jsx(na,{className:"h-5 w-5"}),"Choose Your Service"]}),e.jsx(lt,{children:"Select the service you'd like to book"})]}),e.jsx(X,{className:"space-y-4",children:e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:Hh.map(g=>e.jsx(K,{className:`cursor-pointer transition-all ${a===g.id.toString()?"border-primary ring-2 ring-primary":"hover:border-primary/50"}`,onClick:()=>r(g.id.toString()),children:e.jsxs(pe,{children:[e.jsx(ge,{className:"text-lg",children:g.name}),e.jsxs(lt,{className:"flex justify-between",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Qt,{className:"h-4 w-4"}),g.duration]}),e.jsxs("span",{className:"font-bold text-primary",children:["KES ",g.price.toLocaleString()]})]})]})},g.id))})}),e.jsx(wo,{children:e.jsx(R,{type:"button",onClick:()=>x(2),disabled:!a,className:"w-full",children:"Continue to Date & Time"})})]}),f===2&&e.jsxs(K,{children:[e.jsxs(pe,{children:[e.jsxs(ge,{className:"flex items-center gap-2",children:[e.jsx(ms,{className:"h-5 w-5"}),"Select Date & Time"]}),e.jsx(lt,{children:"Choose your preferred appointment slot"})]}),e.jsx(X,{className:"space-y-6",children:e.jsxs("div",{className:"flex flex-col lg:flex-row gap-6",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx(ae,{children:"Select Date"}),e.jsx(EA,{mode:"single",selected:t,onSelect:s,disabled:g=>g<new Date,className:"rounded-md border mt-2"})]}),e.jsxs("div",{className:"flex-1 space-y-4",children:[e.jsxs("div",{children:[e.jsx(ae,{children:"Select Time"}),e.jsxs(Ot,{value:i,onValueChange:o,children:[e.jsx(Pt,{className:"mt-2",children:e.jsx(Rt,{placeholder:"Choose a time slot"})}),e.jsx(Mt,{children:SK.map(g=>e.jsx(Ee,{value:g,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Qt,{className:"h-4 w-4"}),g]})},g))})]})]}),p&&t&&i&&e.jsxs(K,{className:"bg-accent",children:[e.jsx(pe,{children:e.jsx(ge,{className:"text-base",children:"Booking Summary"})}),e.jsxs(X,{className:"space-y-2 text-sm",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Service:"})," ",p.name]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Date:"})," ",t.toLocaleDateString()]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Time:"})," ",i]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Duration:"})," ",p.duration]}),e.jsxs("p",{className:"text-lg font-bold text-primary mt-2",children:["Total: KES ",p.price.toLocaleString()]})]})]})]})]})}),e.jsxs(wo,{className:"flex gap-4",children:[e.jsx(R,{type:"button",variant:"outline",onClick:()=>x(1),className:"flex-1",children:"Back"}),e.jsx(R,{type:"button",onClick:()=>x(3),disabled:!t||!i,className:"flex-1",children:"Continue to Contact Info"})]})]}),f===3&&e.jsxs(K,{children:[e.jsxs(pe,{children:[e.jsxs(ge,{className:"flex items-center gap-2",children:[e.jsx(na,{className:"h-5 w-5"}),"Your Contact Information"]}),e.jsx(lt,{children:"We'll use this to confirm your appointment"})]}),e.jsxs(X,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(ae,{htmlFor:"name",children:"Full Name *"}),e.jsx(fe,{id:"name",placeholder:"John Doe",value:c.name,onChange:g=>u({...c,name:g.target.value}),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ae,{htmlFor:"phone",children:"Phone Number *"}),e.jsxs("div",{className:"relative",children:[e.jsx($s,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),e.jsx(fe,{id:"phone",placeholder:"0712345678",className:"pl-10",value:c.phone,onChange:g=>u({...c,phone:g.target.value}),required:!0})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ae,{htmlFor:"email",children:"Email Address *"}),e.jsxs("div",{className:"relative",children:[e.jsx(Gs,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),e.jsx(fe,{id:"email",type:"email",placeholder:"john@example.com",className:"pl-10",value:c.email,onChange:g=>u({...c,email:g.target.value}),required:!0})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ae,{htmlFor:"notes",children:"Additional Notes (Optional)"}),e.jsx(Ts,{id:"notes",placeholder:"Any special requests or requirements...",value:c.notes,onChange:g=>u({...c,notes:g.target.value}),rows:4})]})]}),e.jsxs(wo,{className:"flex gap-4",children:[e.jsx(R,{type:"button",variant:"outline",onClick:()=>x(2),className:"flex-1",children:"Back"}),e.jsxs(R,{type:"submit",className:"flex-1",children:[e.jsx(os,{className:"h-4 w-4 mr-2"}),"Confirm Booking"]})]})]})]})]})},NS=[{id:1,service:"Premium Hair Treatment",date:"2025-10-15",time:"10:00 AM",duration:"1 hour",status:"confirmed",price:2500,location:"Main Branch",staff:"Sarah Johnson"},{id:2,service:"Spa Package",date:"2025-10-20",time:"02:00 PM",duration:"2 hours",status:"pending",price:5e3,location:"Downtown Branch",staff:"Michael Chen"},{id:3,service:"Manicure & Pedicure",date:"2025-09-28",time:"11:00 AM",duration:"45 min",status:"completed",price:1500,location:"Main Branch",staff:"Emily Davis"}],TK=()=>{const t=o=>{switch(o){case"confirmed":return e.jsxs(_e,{className:"bg-success",children:[e.jsx(os,{className:"h-3 w-3 mr-1"}),"Confirmed"]});case"pending":return e.jsxs(_e,{variant:"secondary",children:[e.jsx(Cs,{className:"h-3 w-3 mr-1"}),"Pending"]});case"completed":return e.jsxs(_e,{variant:"outline",children:[e.jsx(os,{className:"h-3 w-3 mr-1"}),"Completed"]});case"cancelled":return e.jsxs(_e,{variant:"destructive",children:[e.jsx(Cr,{className:"h-3 w-3 mr-1"}),"Cancelled"]});default:return e.jsx(_e,{children:o})}},s=o=>{D.success("Booking cancelled successfully")},a=o=>{D.info("Reschedule feature coming soon!")},r=NS.filter(o=>o.status!=="completed"&&o.status!=="cancelled"),i=NS.filter(o=>o.status==="completed"||o.status==="cancelled");return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"My Bookings"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage your appointments and view history"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h2",{className:"text-xl font-semibold text-foreground",children:"Upcoming Appointments"}),r.length>0?e.jsx("div",{className:"grid grid-cols-1 gap-4",children:r.map(o=>e.jsxs(K,{className:"card-hover",children:[e.jsx(pe,{children:e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsxs("div",{children:[e.jsx(ge,{className:"text-xl",children:o.service}),e.jsxs(lt,{className:"mt-1",children:["Booking ID: #",o.id.toString().padStart(4,"0")]})]}),t(o.status)]})}),e.jsxs(X,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[e.jsx(ms,{className:"h-4 w-4"}),e.jsx("span",{children:new Date(o.date).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]}),e.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[e.jsx(Qt,{className:"h-4 w-4"}),e.jsxs("span",{children:[o.time," (",o.duration,")"]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[e.jsx(Xr,{className:"h-4 w-4"}),e.jsx("span",{children:o.location})]}),e.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[e.jsx($s,{className:"h-4 w-4"}),e.jsxs("span",{children:["Staff: ",o.staff]})]})]}),e.jsx(Fn,{}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsxs("div",{className:"text-xl font-bold text-primary",children:["Total: KES ",o.price.toLocaleString()]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(R,{variant:"outline",onClick:()=>a(o.id),children:"Reschedule"}),o.status!=="completed"&&e.jsx(R,{variant:"destructive",onClick:()=>s(o.id),children:"Cancel"})]})]})]})]},o.id))}):e.jsx(K,{children:e.jsxs(X,{className:"py-12 text-center",children:[e.jsx(ms,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"No upcoming bookings"}),e.jsx(R,{className:"mt-4",children:"Book an Appointment"})]})})]}),i.length>0&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("h2",{className:"text-xl font-semibold text-foreground",children:"Past Appointments"}),e.jsx("div",{className:"grid grid-cols-1 gap-4",children:i.map(o=>e.jsxs(K,{className:"opacity-75",children:[e.jsx(pe,{children:e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsxs("div",{children:[e.jsx(ge,{className:"text-lg",children:o.service}),e.jsxs(lt,{children:[new Date(o.date).toLocaleDateString()," at ",o.time]})]}),t(o.status)]})}),e.jsx(X,{children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:o.location}),e.jsxs("span",{className:"font-semibold",children:["KES ",o.price.toLocaleString()]})]})})]},o.id))})]})]})},kK=()=>{const t=Ka(),{inviteCode:s}=sl(),{login:a,customer:r,isAuthenticated:i,loading:o}=Io(),c=v.useRef(!1),[u,f]=v.useState(!1),[x,h]=v.useState(!1),[p,g]=v.useState({email:"",password:""});v.useEffect(()=>{if(!c.current&&!o&&i&&r){c.current=!0,console.log("✅ Already logged in, redirecting to storefront");const y=s?`/client/store/${s}`:"/client/store";t(y,{replace:!0})}},[o,i,r,s,t]);const b=y=>{g({...p,[y.target.name]:y.target.value})},N=async y=>{y.preventDefault(),h(!0);try{console.log("🔐 Attempting login...");const S=await a(p);if(S.success){console.log("✅ Login component: Login successful"),D.success(`Welcome Back ${S.customer?.name||""}!`),await new Promise(T=>setTimeout(T,400));const C=s?`/client/store/${s}`:"/client/store";console.log("🔄 Navigating to:",C),t(C,{replace:!0})}else D.error(S.error||"Login failed")}catch(S){console.error("❌ Login error:",S),D.error("Login failed. Please try again.")}finally{h(!1)}};return o?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-primary/5 via-background to-accent/5 flex items-center justify-center p-4",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"Loading..."})]})}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-primary/5 via-background to-accent/5 flex items-center justify-center p-4",children:e.jsxs(K,{className:"w-full max-w-md shadow-lg border-primary/10",children:[e.jsxs(pe,{className:"space-y-4 text-center",children:[e.jsx("div",{className:"mx-auto h-16 w-16 rounded-full bg-primary/10 flex items-center justify-center",children:e.jsx(vr,{className:"h-8 w-8 text-primary"})}),e.jsxs("div",{children:[e.jsx(ge,{className:"text-2xl",children:"Welcome Back! 🔒"}),e.jsx(lt,{className:"mt-2",children:"Log in to continue shopping"})]})]}),e.jsx(X,{children:e.jsxs("form",{onSubmit:N,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(ae,{htmlFor:"email",children:"Email"}),e.jsxs("div",{className:"relative",children:[e.jsx(Gs,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-500"}),e.jsx(fe,{id:"email",name:"email",type:"email",placeholder:"john@example.com",value:p.email,onChange:b,className:"pl-10",required:!0})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ae,{htmlFor:"password",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(vr,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-500"}),e.jsx(fe,{id:"password",name:"password",type:u?"text":"password",placeholder:"••••••••",value:p.password,onChange:b,className:"pl-10 pr-10",required:!0}),e.jsx("button",{type:"button",onClick:()=>f(!u),className:"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground transition-colors",children:u?e.jsx(Eo,{className:"h-4 w-4"}):e.jsx(la,{className:"h-4 w-4"})})]})]}),e.jsx(R,{type:"submit",className:"w-full gap-2",disabled:x,children:x?"Logging In...":e.jsxs(e.Fragment,{children:[e.jsx(vr,{className:"h-4 w-4"}),"Log In"]})}),e.jsxs("div",{className:"text-xs text-center text-muted-foreground",children:["Don't have an account?"," ",e.jsxs(Ht,{to:`/client/signup/${s}`,className:"text-primary hover:underline inline-flex items-center gap-1 ml-1",children:[e.jsx(bo,{className:"h-3 w-3"}),"Sign Up"]})]}),e.jsx("div",{className:"pt-4 border-t",children:e.jsxs("p",{className:"text-xs text-center text-muted-foreground",children:[e.jsx(vr,{className:"inline h-3 w-3 mr-1"})," Secure Login • Your data is protected"]})})]})})]})})},EK=()=>{const{customer:t}=Io(),{socket:s,connected:a}=da(),[r,i]=v.useState(null),[o,c]=v.useState([]),[u,f]=v.useState(""),[x,h]=v.useState(!1),[p,g]=v.useState({}),b=v.useRef(null);v.useEffect(()=>{t&&y()},[t]),v.useEffect(()=>(r&&s&&a&&(s.emit("join_conversation",r.id),N()),()=>{r&&s&&(s.emit("leave_conversation",r.id),s.off("message_received"),s.off("user_typing"),s.off("user_stopped_typing"))}),[r,s,a]),v.useEffect(()=>{_()},[o]);const N=()=>{s&&(s.on("message_received",U=>{r&&U.conversationId===r.id&&c(F=>[...F,U])}),s.on("user_typing",({conversationId:U,userId:F,userName:k})=>{r?.id===U&&F!==t._id&&g(E=>({...E,[F]:k}))}),s.on("user_stopped_typing",({conversationId:U,userId:F})=>{r?.id===U&&g(k=>{const E={...k};return delete E[F],E})}))},y=async()=>{try{const U=localStorage.getItem("customerToken");if(!U){console.log("No customer token found");return}const F=await ye.get("/messages/conversations",{headers:{Authorization:`Bearer ${U}`}});if(F.data.conversations&&F.data.conversations.length>0){const k=F.data.conversations[0];i(k),S(k.id)}else i({id:null,name:"Business Owner",isOnline:!1})}catch(U){console.error("Error loading conversation:",U),i({id:null,name:"Business Owner",isOnline:!1})}},S=async U=>{try{const F=localStorage.getItem("customerToken"),k=await ye.get(`/messages/conversations/${U}`,{headers:{Authorization:`Bearer ${F}`}});c(k.data.messages||[])}catch(F){console.error("Error loading messages:",F)}},C=async U=>{if(U.preventDefault(),!u.trim()||!t)return;const F=u.trim(),k=Date.now(),E={id:k,conversationId:r?.id,senderId:t._id,senderName:t.name,content:F,timestamp:new Date,status:"sending"};c(A=>[...A,E]),f("");try{const A=localStorage.getItem("customerToken");if(r?.id)s&&a?s.emit("send_message",{conversationId:r.id,message:F,senderId:t._id,senderName:t.name}):await ye.post("/messages/send",{conversationId:r.id,content:F},{headers:{Authorization:`Bearer ${A}`}}),c(B=>B.map(H=>H.id===k?{...H,status:"sent"}:H));else{const B=await ye.post("/messages/conversations",{businessOwnerId:t.invitedBy,customerName:t.name,customerEmail:t.email,customerPhone:t.phone},{headers:{Authorization:`Bearer ${A}`}});if(B.data.success){const H=B.data.conversation;i({id:H.id,name:"Business Owner",isOnline:!1}),await ye.post("/messages/send",{conversationId:H.id,content:F},{headers:{Authorization:`Bearer ${A}`}}),c(M=>M.map(q=>q.id===k?{...q,status:"sent",conversationId:H.id}:q)),s&&a&&s.emit("join_conversation",H.id)}}}catch(A){console.error("Error sending message:",A),D.error("Failed to send message"),c(B=>B.map(H=>H.id===k?{...H,status:"failed"}:H))}},T=()=>{!x&&r&&s&&(h(!0),s.emit("typing_start",{conversationId:r.id,userId:t._id,userName:t.name}),setTimeout(()=>{h(!1),s.emit("typing_stop",{conversationId:r.id,userId:t._id})},3e3))},_=()=>{b.current?.scrollIntoView({behavior:"smooth"})},G=U=>{switch(U){case"sent":return e.jsx(wi,{className:"h-3 w-3"});case"delivered":return e.jsx(si,{className:"h-3 w-3"});case"read":return e.jsx(si,{className:"h-3 w-3 text-blue-500"});default:return e.jsx(Qt,{className:"h-3 w-3"})}};return t?e.jsxs("div",{className:"h-screen p-4 md:p-6",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("h1",{className:"text-2xl md:text-3xl font-bold",children:"Messages"}),e.jsxs("p",{className:"text-muted-foreground",children:["Chat with ",r?.name||"Business Owner"," • ",a?"🟢 Connected":"🔴 Offline"]})]}),e.jsx(K,{className:"h-[calc(100vh-12rem)] flex flex-col",children:r?e.jsxs(e.Fragment,{children:[e.jsx(pe,{className:"border-b py-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(fr,{className:"h-10 w-10",children:e.jsx(xr,{children:r.name[0]})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:r.name}),e.jsx("p",{className:"text-xs text-muted-foreground",children:r.isOnline?"Active now":"Offline"})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(R,{variant:"ghost",size:"icon",onClick:()=>D.info("Voice call - Coming soon"),children:e.jsx($s,{className:"h-4 w-4"})}),e.jsx(R,{variant:"ghost",size:"icon",onClick:()=>D.info("Video call - Coming soon"),children:e.jsx(ka,{className:"h-4 w-4"})}),e.jsx(R,{variant:"ghost",size:"icon",children:e.jsx(bv,{className:"h-4 w-4"})})]})]})}),e.jsx(X,{className:"flex-1 p-4 overflow-hidden",children:e.jsx(_r,{className:"h-full pr-4",children:e.jsxs("div",{className:"space-y-4",children:[o.map(U=>{const F=U.senderId===t._id;return e.jsx("div",{className:`flex ${F?"justify-end":"justify-start"}`,children:e.jsxs("div",{className:`max-w-[70%] rounded-lg p-3 ${F?"bg-primary text-primary-foreground":"bg-muted"}`,children:[!F&&e.jsx("p",{className:"text-xs font-semibold mb-1",children:U.senderName}),e.jsx("p",{className:"text-sm",children:U.content}),e.jsxs("div",{className:"flex items-center gap-1 mt-1 justify-end",children:[e.jsx("span",{className:"text-xs opacity-70",children:new Date(U.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}),F&&G(U.status)]})]})},U.id)}),Object.keys(p).length>0&&e.jsx("div",{className:"flex justify-start",children:e.jsx("div",{className:"bg-muted rounded-lg p-3",children:e.jsxs("div",{className:"flex gap-1",children:[e.jsx("div",{className:"w-2 h-2 bg-gray-500 rounded-full animate-bounce"}),e.jsx("div",{className:"w-2 h-2 bg-gray-500 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),e.jsx("div",{className:"w-2 h-2 bg-gray-500 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})})}),e.jsx("div",{ref:b})]})})}),e.jsx("div",{className:"border-t p-4",children:e.jsxs("form",{onSubmit:C,className:"flex gap-2",children:[e.jsx(R,{type:"button",variant:"ghost",size:"icon",children:e.jsx(Xc,{className:"h-5 w-5"})}),e.jsx(fe,{value:u,onChange:U=>{f(U.target.value),T()},placeholder:"Type a message...",className:"flex-1"}),e.jsx(R,{type:"button",variant:"ghost",size:"icon",children:e.jsx(wv,{className:"h-5 w-5"})}),e.jsx(R,{type:"submit",disabled:!u.trim(),children:e.jsx(Ma,{className:"h-4 w-4"})})]})})]}):e.jsx("div",{className:"flex-1 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Zs,{className:"h-16 w-16 text-muted-foreground mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No Conversation"}),e.jsx("p",{className:"text-muted-foreground",children:"Start a conversation with the business owner"})]})})})]}):e.jsx("div",{className:"flex items-center justify-center h-screen",children:e.jsx(K,{className:"p-6",children:e.jsx("p",{className:"text-muted-foreground",children:"Please log in to access messages"})})})},AK=()=>{const{socket:t}=da(),[s,a]=v.useState([]),[r,i]=v.useState(!0),[o,c]=v.useState(!1),[u,f]=v.useState(null),[x,h]=v.useState({title:"",description:"",sessionType:"meeting",scheduledStartTime:"",scheduledEndTime:"",participants:[],maxParticipants:100,enableRecording:!1,waitingRoomEnabled:!1}),[p,g]=v.useState({email:"",name:""});v.useEffect(()=>{b()},[]),v.useEffect(()=>{if(t)return t.on("session_started",U),t.on("session_ended",F),t.on("participant_joined",k),()=>{t.off("session_started"),t.off("session_ended"),t.off("participant_joined")}},[t]);const b=async()=>{try{const M=localStorage.getItem("token"),q=await ye.get("/sessions",{headers:{Authorization:`Bearer ${M}`}});a(q.data)}catch(M){console.error("Fetch sessions error:",M),D.error("Failed to load sessions")}finally{i(!1)}},N=async()=>{try{if(!x.title||!x.scheduledStartTime||!x.scheduledEndTime){D.error("Title, start time, and end time are required");return}const M=new Date(x.scheduledStartTime),q=new Date(x.scheduledEndTime);if(isNaN(M.getTime())||isNaN(q.getTime())){D.error("Invalid date format for start or end time");return}if(q<=M){D.error("End time must be after start time");return}const L=localStorage.getItem("token"),re={...x,maxParticipants:parseInt(x.maxParticipants,10)||100,scheduledStartTime:M.toISOString(),scheduledEndTime:q.toISOString()},V=await ye.post("/sessions",re,{headers:{Authorization:`Bearer ${L}`}});a([V.data,...s]),c(!1),G(),D.success("Session created and invitations sent!")}catch(M){console.error("Create session error:",M),D.error(M.response?.data?.error||"Failed to create session")}},y=async M=>{try{const q=localStorage.getItem("token"),L=await ye.post(`/sessions/${M}/start`,{},{headers:{Authorization:`Bearer ${q}`}});a(s.map(re=>re._id===M?L.data:re)),D.success("Session started! Participants have been notified.")}catch(q){D.error(q.response?.data?.error||"Failed to start session")}},S=async M=>{try{const q=localStorage.getItem("token"),L=await ye.post(`/sessions/${M}/end`,{},{headers:{Authorization:`Bearer ${q}`}});a(s.map(re=>re._id===M?L.data:re)),D.success("Session ended")}catch(q){D.error(q.response?.data?.error||"Failed to end session")}},C=M=>{const L=`${window.location.origin}/session/join/${M.accessLink}`;navigator.clipboard.writeText(L),f(M._id),D.success("Link copied to clipboard!"),setTimeout(()=>f(null),2e3)},T=()=>{if(!p.email||!p.name){D.error("Email and name are required");return}h({...x,participants:[...x.participants,p]}),g({email:"",name:""})},_=M=>{h({...x,participants:x.participants.filter((q,L)=>L!==M)})},G=()=>{h({title:"",description:"",sessionType:"meeting",scheduledStartTime:"",scheduledEndTime:"",participants:[],maxParticipants:100,enableRecording:!1,waitingRoomEnabled:!1})},U=M=>{D.success(`Session "${M.title}" has started!`),b()},F=M=>{D.info("Session has ended"),b()},k=M=>{D.info(`${M.participant.name} joined the session`)},E=M=>{const q={scheduled:"default",live:"destructive",ended:"secondary",cancelled:"outline"};return e.jsx(_e,{variant:q[M],children:M.toUpperCase()})},A=s.filter(M=>M.status==="scheduled"&&new Date(M.scheduledStartTime)>new Date),B=s.filter(M=>M.status==="live"),H=s.filter(M=>M.status==="ended");return e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Live Sessions & Webinars"}),e.jsx("p",{className:"text-muted-foreground",children:"Schedule and manage video sessions with clients"})]}),e.jsxs(R,{onClick:()=>c(!0),children:[e.jsx(ka,{className:"w-4 h-4 mr-2"}),"Schedule Session"]})]}),e.jsx("div",{className:"mb-4",children:e.jsxs(Ht,{to:"/dashboard/security-dashboard",className:"inline-flex items-center px-4 py-2 bg-blue-100 text-blue-700 rounded hover:bg-blue-200 font-medium",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2 text-blue-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 2l7 4v6c0 5.25-3.5 10-7 10s-7-4.75-7-10V6l7-4z"})}),"Security Dashboard"]})}),e.jsxs(pa,{defaultValue:"upcoming",children:[e.jsxs(ba,{children:[e.jsxs(ut,{value:"upcoming",children:["Upcoming (",A.length,")"]}),e.jsxs(ut,{value:"live",children:["Live (",B.length,")"]}),e.jsxs(ut,{value:"past",children:["Past (",H.length,")"]})]}),e.jsxs(mt,{value:"upcoming",className:"space-y-4",children:[A.map(M=>e.jsxs(K,{children:[e.jsx(pe,{children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx(ge,{children:M.title}),e.jsx(lt,{children:M.description})]}),E(M.status)]})}),e.jsxs(X,{children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ms,{className:"w-4 h-4"}),e.jsx("span",{children:new Date(M.scheduledStartTime).toLocaleDateString()})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Qt,{className:"w-4 h-4"}),e.jsx("span",{children:new Date(M.scheduledStartTime).toLocaleTimeString()})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Xt,{className:"w-4 h-4"}),e.jsxs("span",{children:[M.participants.length," participants"]})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx(_e,{variant:"outline",children:M.sessionType})})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(R,{variant:"default",onClick:()=>y(M._id),disabled:!_K(M),children:[e.jsx(Uc,{className:"w-4 h-4 mr-2"}),"Start Session"]}),e.jsxs(R,{variant:"outline",onClick:()=>C(M),children:[u===M._id?e.jsx(wi,{className:"w-4 h-4 mr-2"}):e.jsx(lg,{className:"w-4 h-4 mr-2"}),"Copy Link"]})]})]})]},M._id)),A.length===0&&e.jsx(K,{children:e.jsxs(X,{className:"text-center py-12",children:[e.jsx(ms,{className:"w-12 h-12 mx-auto text-muted-foreground mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"No upcoming sessions"})]})})]}),e.jsxs(mt,{value:"live",className:"space-y-4",children:[B.map(M=>e.jsxs(K,{className:"border-green-500",children:[e.jsx(pe,{children:e.jsx("div",{className:"flex justify-between items-start",children:e.jsx("div",{children:e.jsxs(ge,{className:"flex items-center gap-2",children:[M.title,e.jsx(_e,{variant:"destructive",className:"animate-pulse",children:"LIVE"})]})})})}),e.jsx(X,{children:e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(R,{variant:"default",onClick:()=>window.open(`/session/join/${M.accessLink}`,"_blank"),children:[e.jsx(ka,{className:"w-4 h-4 mr-2"}),"Join Session"]}),e.jsxs(R,{variant:"destructive",onClick:()=>S(M._id),children:[e.jsx(D6,{className:"w-4 h-4 mr-2"}),"End Session"]}),e.jsxs(R,{variant:"outline",onClick:()=>C(M),children:[e.jsx(qc,{className:"w-4 h-4 mr-2"}),"Share"]})]})})]},M._id)),B.length===0&&e.jsx(K,{children:e.jsxs(X,{className:"text-center py-12",children:[e.jsx(ka,{className:"w-12 h-12 mx-auto text-muted-foreground mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"No live sessions"})]})})]}),e.jsx(mt,{value:"past",className:"space-y-4",children:H.slice(0,10).map(M=>e.jsxs(K,{children:[e.jsxs(pe,{children:[e.jsx(ge,{children:M.title}),e.jsxs(lt,{children:[new Date(M.actualStartTime).toLocaleString()," - ",M.totalDuration?`${Math.floor(M.totalDuration/60)} min`:"N/A"]})]}),e.jsx(X,{children:e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Peak participants: ",M.peakParticipants]})})]},M._id))})]}),e.jsx(Ft,{open:o,onOpenChange:c,children:e.jsxs(It,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(Lt,{children:[e.jsx(Bt,{children:"Schedule a Live Session"}),e.jsx(es,{children:"Create a video session or webinar with clients"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(ae,{children:"Title *"}),e.jsx(fe,{value:x.title,onChange:M=>h({...x,title:M.target.value}),placeholder:"e.g., Product Demo, Support Call, Training"})]}),e.jsxs("div",{children:[e.jsx(ae,{children:"Description"}),e.jsx(Ts,{value:x.description,onChange:M=>h({...x,description:M.target.value}),placeholder:"What is this session about?",rows:3})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(ae,{children:"Session Type"}),e.jsxs(Ot,{value:x.sessionType,onValueChange:M=>h({...x,sessionType:M}),children:[e.jsx(Pt,{children:e.jsx(Rt,{})}),e.jsxs(Mt,{children:[e.jsx(Ee,{value:"meeting",children:"Meeting"}),e.jsx(Ee,{value:"webinar",children:"Webinar"}),e.jsx(Ee,{value:"support_call",children:"Support Call"}),e.jsx(Ee,{value:"training",children:"Training"}),e.jsx(Ee,{value:"demo",children:"Demo"}),e.jsx(Ee,{value:"consultation",children:"Consultation"})]})]})]}),e.jsxs("div",{children:[e.jsx(ae,{children:"Max Participants"}),e.jsx(fe,{type:"number",min:"1",value:x.maxParticipants||"",onChange:M=>h({...x,maxParticipants:M.target.value?parseInt(M.target.value,10):100})})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(ae,{children:"Start Time *"}),e.jsx(fe,{type:"datetime-local",value:x.scheduledStartTime,onChange:M=>h({...x,scheduledStartTime:M.target.value})})]}),e.jsxs("div",{children:[e.jsx(ae,{children:"End Time *"}),e.jsx(fe,{type:"datetime-local",value:x.scheduledEndTime,onChange:M=>h({...x,scheduledEndTime:M.target.value})})]})]}),e.jsxs("div",{children:[e.jsx(ae,{children:"Add Participants"}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsx(fe,{placeholder:"Email",value:p.email,onChange:M=>g({...p,email:M.target.value})}),e.jsx(fe,{placeholder:"Name",value:p.name,onChange:M=>g({...p,name:M.target.value})}),e.jsx(R,{onClick:T,children:e.jsx(bo,{className:"w-4 h-4"})})]}),x.participants.length>0&&e.jsx("div",{className:"space-y-2",children:x.participants.map((M,q)=>e.jsxs("div",{className:"flex justify-between items-center p-2 bg-secondary rounded",children:[e.jsxs("span",{children:[M.name," (",M.email,")"]}),e.jsx(R,{variant:"ghost",size:"sm",onClick:()=>_(q),children:"×"})]},q))})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs(R,{onClick:N,className:"flex-1",children:[e.jsx(Gs,{className:"w-4 h-4 mr-2"}),"Create & Send Invites"]}),e.jsx(R,{variant:"outline",onClick:()=>c(!1),children:"Cancel"})]})]})]})})]})},_K=t=>{const s=new Date,a=new Date(t.scheduledStartTime),r=new Date(a.getTime()-900*1e3);return s>=r&&t.status==="scheduled"},DK=()=>{const{accessLink:t}=sl(),s=Ka(),{socket:a}=da(),[r,i]=v.useState(null),[o,c]=v.useState(!0),[u,f]=v.useState(!1),[x,h]=v.useState(!1),[p,g]=v.useState({email:"",name:"",password:""}),[b,N]=v.useState({videoEnabled:!0,audioEnabled:!0}),y=v.useRef(null),S=v.useRef({}),C=v.useRef({}),T=v.useRef(null);v.useEffect(()=>{_()},[t]),v.useEffect(()=>(x&&a&&(U(),F()),()=>{me()}),[x,a]);const _=async()=>{try{const W=await ye.get(`/sessions/join/${t}`);i(W.data),c(!1)}catch(W){console.error("Fetch session error:",W),D.error("Session not found"),c(!1)}},G=async()=>{if(!p.email||!p.name){D.error("Email and name are required");return}f(!0);try{const W=await ye.post(`/sessions/${t}/join`,p);if(W.data.status==="waiting"){D.info(W.data.message),f(!1);return}W.data.status==="joined"&&(h(!0),i(se=>({...se,...W.data.session})),D.success("Joined session successfully!"))}catch(W){console.error("Join session error:",W),D.error(W.response?.data?.error||"Failed to join session")}finally{f(!1)}},U=async()=>{try{const W=await navigator.mediaDevices.getUserMedia({video:b.videoEnabled,audio:b.audioEnabled});T.current=W,y.current&&(y.current.srcObject=W),a.emit("webrtc:join-room",{roomId:r.webrtcRoomId,userId:p.email,userName:p.name,callType:"video"})}catch(W){console.error("Media access error:",W),D.error("Failed to access camera/microphone")}},F=()=>{a.on("webrtc:joined-room",k),a.on("webrtc:user-joined",E),a.on("webrtc:offer",B),a.on("webrtc:answer",H),a.on("webrtc:ice-candidate",M),a.on("webrtc:user-left",q),a.on("session_ended",L)},k=W=>{console.log("Joined room:",W),W.participants.forEach(se=>{A(se.socketId,!0)})},E=W=>{console.log("User joined:",W),D.info(`${W.userName} joined`),A(W.socketId,!1)},A=async(W,se)=>{const Z=new RTCPeerConnection({iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:"stun:stun1.l.google.com:19302"}]});if(C.current[W]=Z,T.current&&T.current.getTracks().forEach(I=>{Z.addTrack(I,T.current)}),Z.ontrack=I=>{const[Q]=I.streams;if(!S.current[W]){const O=document.createElement("video");O.autoplay=!0,O.srcObject=Q,O.className="w-full h-full object-cover rounded",document.getElementById("remote-videos")?.appendChild(O),S.current[W]=O}},Z.onicecandidate=I=>{I.candidate&&a.emit("webrtc:ice-candidate",{to:W,candidate:I.candidate,roomId:r.webrtcRoomId})},se){const I=await Z.createOffer();await Z.setLocalDescription(I),a.emit("webrtc:offer",{to:W,offer:I,roomId:r.webrtcRoomId})}},B=async W=>{const se=C.current[W.from];if(se){await se.setRemoteDescription(new RTCSessionDescription(W.offer));const Z=await se.createAnswer();await se.setLocalDescription(Z),a.emit("webrtc:answer",{to:W.from,answer:Z,roomId:r.webrtcRoomId})}},H=async W=>{const se=C.current[W.from];se&&await se.setRemoteDescription(new RTCSessionDescription(W.answer))},M=async W=>{const se=C.current[W.from];se&&W.candidate&&await se.addIceCandidate(new RTCIceCandidate(W.candidate))},q=W=>{console.log("User left:",W),C.current[W.socketId]&&(C.current[W.socketId].close(),delete C.current[W.socketId]),S.current[W.socketId]&&(S.current[W.socketId].remove(),delete S.current[W.socketId])},L=()=>{D.info("Session has ended"),me(),s("/")},re=()=>{if(T.current){const W=T.current.getVideoTracks()[0];W&&(W.enabled=!W.enabled,N(se=>({...se,videoEnabled:W.enabled})),a.emit("webrtc:toggle-video",{enabled:W.enabled}))}},V=()=>{if(T.current){const W=T.current.getAudioTracks()[0];W&&(W.enabled=!W.enabled,N(se=>({...se,audioEnabled:W.enabled})),a.emit("webrtc:toggle-audio",{enabled:W.enabled}))}},ee=()=>{a.emit("webrtc:end-call"),me(),s("/")},me=()=>{T.current&&(T.current.getTracks().forEach(W=>W.stop()),T.current=null),Object.values(C.current).forEach(W=>W.close()),C.current={},Object.values(S.current).forEach(W=>W.remove()),S.current={}};return o?e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsx(Yn,{className:"w-8 h-8 animate-spin"})}):r?x?e.jsxs("div",{className:"h-screen bg-black flex flex-col",children:[e.jsxs("div",{className:"flex-1 grid grid-cols-2 gap-2 p-4",children:[e.jsxs("div",{className:"relative bg-gray-900 rounded-lg overflow-hidden",children:[e.jsx("video",{ref:y,autoPlay:!0,muted:!0,playsInline:!0,className:"w-full h-full object-cover"}),e.jsx("div",{className:"absolute bottom-2 left-2 bg-black/50 px-2 py-1 rounded text-white text-sm",children:"You"})]}),e.jsx("div",{id:"remote-videos",className:"grid grid-cols-2 gap-2"})]}),e.jsxs("div",{className:"bg-gray-900 p-4 flex items-center justify-between",children:[e.jsxs("div",{className:"text-white",children:[e.jsx("h3",{className:"font-semibold",children:r.title}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Hosted by ",r.host?.name]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(R,{variant:b.audioEnabled?"default":"destructive",size:"icon",onClick:V,children:b.audioEnabled?e.jsx(lf,{className:"w-4 h-4"}):e.jsx(nf,{className:"w-4 h-4"})}),e.jsx(R,{variant:b.videoEnabled?"default":"destructive",size:"icon",onClick:re,children:b.videoEnabled?e.jsx(ka,{className:"w-4 h-4"}):e.jsx(ug,{className:"w-4 h-4"})}),e.jsxs(R,{variant:"destructive",onClick:ee,children:[e.jsx($s,{className:"w-4 h-4 mr-2"}),"Leave"]})]})]})]}):e.jsx("div",{className:"flex items-center justify-center min-h-screen p-4",children:e.jsxs(K,{className:"max-w-md w-full",children:[e.jsxs(pe,{children:[e.jsx(ge,{children:r.title}),e.jsx(lt,{children:r.description})]}),e.jsxs(X,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(Qt,{className:"w-4 h-4"}),e.jsx("span",{children:new Date(r.scheduledStartTime).toLocaleString()})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(Xt,{className:"w-4 h-4"}),e.jsxs("span",{children:[r.currentParticipants," / ",r.maxParticipants," participants"]})]}),e.jsx(_e,{children:r.sessionType}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx(ae,{children:"Your Name *"}),e.jsx(fe,{value:p.name,onChange:W=>g({...p,name:W.target.value}),placeholder:"Enter your name"})]}),e.jsxs("div",{children:[e.jsx(ae,{children:"Your Email *"}),e.jsx(fe,{type:"email",value:p.email,onChange:W=>g({...p,email:W.target.value}),placeholder:"your@email.com"})]}),r.requiresPassword&&e.jsxs("div",{children:[e.jsx(ae,{children:"Session Password"}),e.jsx(fe,{type:"password",value:p.password,onChange:W=>g({...p,password:W.target.value}),placeholder:"Enter password"})]}),e.jsxs(R,{onClick:G,disabled:u,className:"w-full",children:[u?e.jsx(Yn,{className:"w-4 h-4 mr-2 animate-spin"}):e.jsx(ka,{className:"w-4 h-4 mr-2"}),"Join Session"]})]})]})]})}):e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsx(K,{className:"max-w-md",children:e.jsxs(pe,{children:[e.jsx(Cs,{className:"w-12 h-12 mx-auto text-destructive mb-4"}),e.jsx(ge,{children:"Session Not Found"}),e.jsx(lt,{children:"This session link is invalid or has expired"})]})})})},OK=()=>{const{socket:t,connected:s}=da(),{user:a}=Es(),[r,i]=v.useState([]),[o,c]=v.useState(0),[u,f]=v.useState(!1);v.useEffect(()=>{if(!(!t||!a))return t.on("new_message_notification",S=>{const C={id:Date.now(),type:"message",title:"New Message",message:`${S.from}: ${S.preview}`,timestamp:new Date,read:!1,data:S};x(C),D.info(e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Zs,{className:"h-5 w-5 text-blue-500 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:S.from}),e.jsx("p",{className:"text-sm text-muted-foreground",children:S.preview})]})]}),{duration:5e3})}),t.on("message_received",S=>{if(S.senderId!==a._id){const C={id:Date.now(),type:"message",title:"Message Reply",message:`${S.senderName}: ${S.content.substring(0,50)}${S.content.length>50?"...":""}`,timestamp:new Date(S.timestamp),read:!1,data:{conversationId:S.conversationId,messageId:S.id}};x(C),D.info(e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Zs,{className:"h-5 w-5 text-blue-500 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:S.senderName}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[S.content.substring(0,50),S.content.length>50?"...":""]})]})]}),{duration:5e3})}}),t.on("order_notification",S=>{const C={id:Date.now(),type:"order",title:"Order Update",message:`Order #${S.orderNumber||"N/A"} - ${S.status||"Updated"}`,timestamp:new Date,read:!1,data:S};x(C),D.success(e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(js,{className:"h-5 w-5 text-green-500 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:"Order Update"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:C.message})]})]}),{duration:5e3})}),t.on("system_notification",S=>{const C={id:Date.now(),type:"system",title:S.title||"System Alert",message:S.message,timestamp:new Date,read:!1,data:S};x(C),D(e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Fr,{className:"h-5 w-5 text-orange-500 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:C.title}),e.jsx("p",{className:"text-sm text-muted-foreground",children:C.message})]})]}),{duration:5e3})}),()=>{t.off("new_message_notification"),t.off("message_received"),t.off("order_notification"),t.off("system_notification")}},[t,a]);const x=S=>{i(C=>[S,...C].slice(0,50)),c(C=>C+1)},h=S=>{i(C=>C.map(T=>T.id===S?{...T,read:!0}:T)),c(C=>Math.max(0,C-1))},p=()=>{i(S=>S.map(C=>({...C,read:!0}))),c(0)},g=S=>{const C=r.find(T=>T.id===S);i(T=>T.filter(_=>_.id!==S)),C&&!C.read&&c(T=>Math.max(0,T-1))},b=()=>{i([]),c(0)},N=S=>{switch(S){case"message":return e.jsx(Zs,{className:"h-5 w-5 text-blue-500"});case"order":return e.jsx(js,{className:"h-5 w-5 text-green-500"});case"appointment":return e.jsx(ms,{className:"h-5 w-5 text-purple-500"});default:return e.jsx(Fr,{className:"h-5 w-5 text-orange-500"})}},y=S=>{S.read||h(S.id)};return e.jsxs(H4,{open:u,onOpenChange:f,children:[e.jsx(W4,{asChild:!0,children:e.jsxs(R,{variant:"ghost",size:"icon",className:"relative",children:[e.jsx(Fr,{className:"h-5 w-5"}),o>0&&e.jsx(_e,{className:"absolute -top-1 -right-1 h-5 w-5 flex items-center justify-center p-0 text-xs",variant:"destructive",children:o>9?"9+":o})]})}),e.jsxs(_v,{className:"w-[380px] p-0",align:"end",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:"Notifications"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:o>0?`${o} unread`:"All caught up!"})]}),e.jsxs("div",{className:"flex gap-1",children:[o>0&&e.jsx(R,{variant:"ghost",size:"sm",onClick:p,className:"h-8 px-2 text-xs",children:e.jsx(si,{className:"h-3 w-3"})}),r.length>0&&e.jsx(R,{variant:"ghost",size:"sm",onClick:b,className:"h-8 px-2 text-xs",children:e.jsx(fa,{className:"h-3 w-3"})}),e.jsx(R,{variant:"ghost",size:"sm",onClick:()=>f(!1),className:"h-8 px-2",children:e.jsx(yr,{className:"h-4 w-4"})})]})]}),r.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[e.jsx(Fr,{className:"h-12 w-12 text-muted-foreground mb-3 opacity-50"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"No notifications"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"You're all caught up!"})]}):e.jsx(_r,{className:"h-[400px]",children:e.jsx("div",{className:"p-2",children:r.map(S=>e.jsxs("div",{onClick:()=>y(S),className:`relative p-3 rounded-lg mb-2 cursor-pointer transition-colors ${S.read?"bg-background hover:bg-accent":"bg-primary/5 hover:bg-primary/10"}`,children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"mt-0.5",children:N(S.type)}),e.jsxs("div",{className:"flex-1 min-w-0 pr-6",children:[e.jsx("p",{className:"font-semibold text-sm",children:S.title}),e.jsx("p",{className:"text-sm text-muted-foreground mt-0.5 line-clamp-2",children:S.message}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:Yu(new Date(S.timestamp),{addSuffix:!0})})]}),e.jsx(R,{variant:"ghost",size:"icon",className:"absolute top-2 right-2 h-6 w-6",onClick:C=>{C.stopPropagation(),g(S.id)},children:e.jsx(yr,{className:"h-3 w-3"})})]}),!S.read&&e.jsx("div",{className:"absolute right-2 top-2 h-2 w-2 bg-primary rounded-full"})]},S.id))})})]})]})},RK=()=>{const{user:t}=Es(),{socket:s,connected:a}=da(),[r,i]=v.useState([]),[o,c]=v.useState([]),[u,f]=v.useState(null),[x,h]=v.useState([]),[p,g]=v.useState(""),[b,N]=v.useState(""),[y,S]=v.useState(!1),[C,T]=v.useState({}),[_,G]=v.useState("conversations"),[U,F]=v.useState(!1),k=v.useRef(null),E=v.useRef(null);v.useEffect(()=>(H(),B(),A(),()=>{s&&(s.off("message_received"),s.off("user_typing"),s.off("user_stopped_typing"),s.off("message_sent"),s.off("new_message_notification"))}),[s]),v.useEffect(()=>(u&&(M(u.id),s&&a&&s.emit("join_conversation",u.id)),()=>{u&&s&&s.emit("leave_conversation",u.id)}),[u,s,a]),v.useEffect(()=>{ee()},[x]);const A=()=>{s&&(s.on("message_received",I=>{u&&I.conversationId===u.id&&(h(Q=>[...Q,I]),re(I.id)),V(I)}),s.on("user_typing",({conversationId:I,userId:Q,userName:O})=>{u?.id===I&&T(te=>({...te,[Q]:O}))}),s.on("user_stopped_typing",({conversationId:I,userId:Q})=>{u?.id===I&&T(O=>{const te={...O};return delete te[Q],te})}),s.on("message_sent",I=>{h(Q=>Q.map(O=>O.id===I.id?{...O,status:"delivered"}:O))}),s.on("new_message_notification",I=>{D.info(`New message from ${I.from}`),H()}))},B=async()=>{try{const I=localStorage.getItem("token"),Q=await ye.get("/messages/customers",{headers:{Authorization:`Bearer ${I}`}});c(Q.data.customers||[])}catch(I){console.error("Error fetching customers:",I),D.error("Failed to load customers")}},H=async()=>{try{const I=localStorage.getItem("token"),Q=[{id:1,name:"Support Team",avatar:"",lastMessage:"How can we help you today?",lastMessageTime:new Date,unreadCount:0,isOnline:!0,type:"support"},{id:2,name:"Sales Department",avatar:"",lastMessage:"Your order has been processed",lastMessageTime:new Date(Date.now()-36e5),unreadCount:2,isOnline:!0,type:"team"},{id:3,name:"Team Chat",avatar:"",lastMessage:"Meeting at 3 PM",lastMessageTime:new Date(Date.now()-72e5),unreadCount:5,isOnline:!1,type:"group"}];try{const O=await ye.get("/messages/conversations",{headers:{Authorization:`Bearer ${I}`}});i(O.data.conversations||[])}catch(O){console.error("Error loading conversations:",O),i([])}}catch(I){console.error("Error fetching conversations:",I),D.error("Failed to load conversations")}},M=async I=>{try{const Q=localStorage.getItem("token"),O=[{id:1,conversationId:I,senderId:"other",senderName:r.find(te=>te.id===I)?.name||"Support",content:"Hello! How can I help you today?",timestamp:new Date(Date.now()-36e5),status:"read"},{id:2,conversationId:I,senderId:t._id,senderName:t.name,content:"Hi! I need some assistance.",timestamp:new Date(Date.now()-3e6),status:"read"},{id:3,conversationId:I,senderId:"other",senderName:r.find(te=>te.id===I)?.name||"Support",content:"Of course! What do you need help with?",timestamp:new Date(Date.now()-24e5),status:"delivered"}];try{const te=await ye.get(`/messages/conversations/${I}`,{headers:{Authorization:`Bearer ${Q}`}});h(te.data.messages||O)}catch{console.log("Using demo messages"),h(O)}}catch(Q){console.error("Error fetching messages:",Q),D.error("Failed to load messages")}},q=async I=>{if(I.preventDefault(),!p.trim()||!u)return;const Q={id:Date.now(),conversationId:u.id,senderId:t._id,senderName:t.name,content:p,timestamp:new Date,status:"sending"};h(O=>[...O,Q]),g("");try{const O=localStorage.getItem("token");s&&a?s.emit("send_message",{conversationId:u.id,message:p,senderId:t._id,senderName:t.name}):await ye.post("/messages/send",{conversationId:u.id,content:p},{headers:{Authorization:`Bearer ${O}`}}),h(te=>te.map(oe=>oe.id===Q.id?{...oe,status:"sent"}:oe))}catch(O){console.error("Error sending message:",O),D.error("Failed to send message"),h(te=>te.map(oe=>oe.id===Q.id?{...oe,status:"failed"}:oe))}},L=()=>{!y&&u&&s&&(S(!0),s.emit("typing_start",{conversationId:u.id,userId:t._id,userName:t.name}),setTimeout(()=>{S(!1),s.emit("typing_stop",{conversationId:u.id,userId:t._id})},3e3))},re=async I=>{try{const Q=localStorage.getItem("token");await ye.post(`/messages/${I}/read`,{},{headers:{Authorization:`Bearer ${Q}`}})}catch(Q){console.error("Error marking message as read:",Q)}},V=I=>{i(Q=>Q.map(O=>O.id===I.conversationId?{...O,lastMessage:I.content,lastMessageTime:I.timestamp,unreadCount:O.id===u?.id?0:O.unreadCount+1}:O))},ee=()=>{k.current?.scrollIntoView({behavior:"smooth"})},me=I=>{switch(I){case"sent":return e.jsx(wi,{className:"h-3 w-3"});case"delivered":return e.jsx(si,{className:"h-3 w-3"});case"read":return e.jsx(si,{className:"h-3 w-3 text-blue-500"});default:return e.jsx(Qt,{className:"h-3 w-3"})}},W=async I=>{try{F(!0);const Q=localStorage.getItem("token");if(I.hasConversation&&I.conversationId){const te=r.find(oe=>oe.id===I.conversationId);if(te){f(te),G("conversations");return}}const O=await ye.post("/messages/conversations",{customerId:I.id,customerName:I.name,customerEmail:I.email,customerPhone:I.phone},{headers:{Authorization:`Bearer ${Q}`}});if(O.data.success){D.success(`Started conversation with ${I.name}`),await H(),G("conversations");const te={id:O.data.conversation.id,name:I.name,email:I.email,phone:I.phone,lastMessage:"",lastMessageTime:new Date,unreadCount:0,isOnline:!1,type:"direct"};f(te)}}catch(Q){console.error("Error starting conversation:",Q),D.error("Failed to start conversation")}finally{F(!1)}},se=r.filter(I=>I.name.toLowerCase().includes(b.toLowerCase())),Z=o.filter(I=>I.name.toLowerCase().includes(b.toLowerCase())||I.email.toLowerCase().includes(b.toLowerCase()));return e.jsxs("div",{className:"h-[calc(100vh-4rem)] p-6",children:[e.jsxs("div",{className:"mb-6 flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Messages"}),e.jsxs("p",{className:"text-muted-foreground",children:["Chat with your customers and support • ",a?"🟢 Connected":"🔴 Offline"]})]}),e.jsx(OK,{})]}),e.jsxs("div",{className:"grid grid-cols-12 gap-6 h-[calc(100%-5rem)]",children:[e.jsxs(K,{className:"col-span-12 lg:col-span-4 h-full flex flex-col",children:[e.jsxs(pe,{className:"pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs(ge,{className:"flex items-center gap-2",children:[e.jsx(Zs,{className:"h-5 w-5"}),"Messages"]}),e.jsxs(_e,{variant:"secondary",children:[o.length," customers"]})]}),e.jsxs("div",{className:"relative",children:[e.jsx(ia,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(fe,{placeholder:"Search...",value:b,onChange:I=>N(I.target.value),className:"pl-9"})]})]}),e.jsxs(pa,{value:_,onValueChange:G,className:"flex-1 flex flex-col",children:[e.jsxs(ba,{className:"grid w-full grid-cols-2 mx-4",children:[e.jsxs(ut,{value:"conversations",className:"gap-2",children:[e.jsx(Zs,{className:"h-4 w-4"}),"Chats (",r.length,")"]}),e.jsxs(ut,{value:"customers",className:"gap-2",children:[e.jsx(Xt,{className:"h-4 w-4"}),"Customers (",o.length,")"]})]}),e.jsx(mt,{value:"conversations",className:"flex-1 mt-0 overflow-hidden",children:e.jsx(_r,{className:"h-full",children:se.length===0?e.jsxs("div",{className:"p-8 text-center text-muted-foreground",children:[e.jsx(Zs,{className:"h-12 w-12 mx-auto mb-3 opacity-50"}),e.jsx("p",{children:"No conversations yet"}),e.jsx("p",{className:"text-sm mt-1",children:"Start a chat with a customer"})]}):se.map(I=>e.jsx("div",{onClick:()=>f(I),className:`p-4 cursor-pointer hover:bg-accent transition-colors border-b ${u?.id===I.id?"bg-accent":""}`,children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsxs("div",{className:"relative",children:[e.jsxs(fr,{className:"h-12 w-12",children:[e.jsx(Rn,{src:I.avatar}),e.jsx(xr,{children:I.type==="group"?e.jsx(Xt,{className:"h-6 w-6"}):I.name[0]})]}),I.isOnline&&e.jsx("div",{className:"absolute bottom-0 right-0 h-3 w-3 bg-green-500 border-2 border-white rounded-full"})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"font-semibold truncate",children:I.name}),e.jsx("span",{className:"text-xs text-muted-foreground",children:Yu(new Date(I.lastMessageTime),{addSuffix:!0})})]}),e.jsx("p",{className:"text-sm text-muted-foreground truncate",children:I.lastMessage}),I.unreadCount>0&&e.jsx(_e,{className:"mt-1 bg-primary text-primary-foreground",children:I.unreadCount})]})]})},I.id))})}),e.jsx(mt,{value:"customers",className:"flex-1 mt-0 overflow-hidden",children:e.jsx(_r,{className:"h-full",children:Z.length===0?e.jsxs("div",{className:"p-8 text-center text-muted-foreground",children:[e.jsx(Xt,{className:"h-12 w-12 mx-auto mb-3 opacity-50"}),e.jsx("p",{children:"No customers found"})]}):Z.map(I=>e.jsx("div",{className:"p-4 hover:bg-accent transition-colors border-b",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(fr,{className:"h-12 w-12",children:e.jsx(xr,{className:"bg-primary/10 text-primary",children:I.name[0]})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("h3",{className:"font-semibold truncate",children:I.name}),I.unreadCount>0&&e.jsx(_e,{className:"bg-primary text-primary-foreground",children:I.unreadCount})]}),e.jsx("p",{className:"text-sm text-muted-foreground truncate",children:I.email}),I.phone&&e.jsx("p",{className:"text-xs text-muted-foreground",children:I.phone}),e.jsxs("div",{className:"flex items-center gap-3 mt-2 text-xs text-muted-foreground",children:[e.jsxs("span",{children:[I.totalOrders||0," orders"]}),e.jsx("span",{children:"•"}),e.jsxs("span",{children:["KES ",(I.totalSpent||0).toLocaleString()]})]})]}),e.jsx(R,{size:"sm",variant:I.hasConversation?"outline":"default",onClick:()=>W(I),disabled:U,className:"gap-2",children:I.hasConversation?e.jsxs(e.Fragment,{children:[e.jsx(Zs,{className:"h-4 w-4"}),"Open"]}):e.jsxs(e.Fragment,{children:[e.jsx(bo,{className:"h-4 w-4"}),"Chat"]})})]})},I.id))})})]})]}),e.jsx(K,{className:"col-span-12 lg:col-span-8 h-full flex flex-col",children:u?e.jsxs(e.Fragment,{children:[e.jsx(pe,{className:"border-b",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(fr,{className:"h-10 w-10",children:[e.jsx(Rn,{src:u.avatar}),e.jsx(xr,{children:u.type==="group"?e.jsx(Xt,{className:"h-5 w-5"}):u.name[0]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:u.name}),e.jsx("p",{className:"text-xs text-muted-foreground",children:u.isOnline?"Active now":"Offline"})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(R,{variant:"ghost",size:"icon",onClick:()=>D.info("Voice call - Coming soon"),children:e.jsx($s,{className:"h-4 w-4"})}),e.jsx(R,{variant:"ghost",size:"icon",onClick:()=>window.open("/dashboard/sessions","_blank"),children:e.jsx(ka,{className:"h-4 w-4"})}),e.jsx(R,{variant:"ghost",size:"icon",children:e.jsx(bv,{className:"h-4 w-4"})})]})]})}),e.jsx(X,{className:"flex-1 p-4 overflow-hidden",children:e.jsx(_r,{className:"h-full pr-4",children:e.jsxs("div",{className:"space-y-4",children:[x.map(I=>{const Q=I.senderId===t._id;return e.jsx("div",{className:`flex ${Q?"justify-end":"justify-start"}`,children:e.jsxs("div",{className:`max-w-[70%] rounded-lg p-3 ${Q?"bg-primary text-primary-foreground":"bg-muted"}`,children:[!Q&&e.jsx("p",{className:"text-xs font-semibold mb-1",children:I.senderName}),e.jsx("p",{className:"text-sm",children:I.content}),e.jsxs("div",{className:"flex items-center gap-1 mt-1 justify-end",children:[e.jsx("span",{className:"text-xs opacity-70",children:new Date(I.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}),Q&&me(I.status)]})]})},I.id)}),Object.keys(C).length>0&&e.jsx("div",{className:"flex justify-start",children:e.jsx("div",{className:"bg-muted rounded-lg p-3",children:e.jsxs("div",{className:"flex gap-1",children:[e.jsx("div",{className:"w-2 h-2 bg-gray-500 rounded-full animate-bounce"}),e.jsx("div",{className:"w-2 h-2 bg-gray-500 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),e.jsx("div",{className:"w-2 h-2 bg-gray-500 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})})}),e.jsx("div",{ref:k})]})})}),e.jsx("div",{className:"border-t p-4",children:e.jsxs("form",{onSubmit:q,className:"flex gap-2",children:[e.jsx(R,{type:"button",variant:"ghost",size:"icon",children:e.jsx(Hs,{className:"h-5 w-5"})}),e.jsx(R,{type:"button",variant:"ghost",size:"icon",onClick:()=>E.current?.click(),children:e.jsx(Xc,{className:"h-5 w-5"})}),e.jsx("input",{type:"file",ref:E,className:"hidden"}),e.jsx(fe,{value:p,onChange:I=>{g(I.target.value),L()},placeholder:"Type a message...",className:"flex-1"}),e.jsx(R,{type:"button",variant:"ghost",size:"icon",children:e.jsx(wv,{className:"h-5 w-5"})}),e.jsx(R,{type:"submit",disabled:!p.trim(),children:e.jsx(Ma,{className:"h-4 w-4"})})]})})]}):e.jsx("div",{className:"flex-1 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Zs,{className:"h-16 w-16 text-muted-foreground mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No Conversation Selected"}),e.jsx("p",{className:"text-muted-foreground",children:"Choose a conversation to start messaging"})]})})})]})]})},PK=()=>{const{socket:t,connected:s}=da(),[a,r]=v.useState([]),[i,o]=v.useState([]),[c,u]=v.useState(null),[f,x]=v.useState(!0),[h,p]=v.useState("all"),[g,b]=v.useState(""),[N,y]=v.useState({autoFix:!0,aiAnalysis:!0,realTimeMonitoring:!0,threatPrediction:!0,behavioralLearning:!0,anomalyThreshold:"medium"}),[S,C]=v.useState(null),[T,_]=v.useState("low");v.useEffect(()=>{k(),G()},[]),v.useEffect(()=>{if(!(!t||!s))return t.on("security_alert",U),t.on("new_security_event",F),()=>{t.off("security_alert"),t.off("new_security_event")}},[t,s]);const G=()=>{t&&s&&t.emit("join_security_dashboard")},U=M=>{o(L=>{const re=Array.isArray(L)?L:[];return[M,...re]}),(M.severity==="critical"?D.error:M.severity==="high"?D.warning:D.info)(e.jsxs("div",{children:[e.jsx("strong",{children:M.title}),e.jsx("p",{className:"text-sm",children:M.message}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["IP: ",M.ipAddress," | User: ",M.user]})]}))},F=M=>{r(q=>{const L=Array.isArray(q)?q:[];return[M.securityLog,...L].slice(0,100)})},k=async()=>{x(!0);try{const M=localStorage.getItem("token"),[q,L,re]=await Promise.all([ye.get("/security/logs",{headers:{Authorization:`Bearer ${M}`}}),ye.get("/security/stats",{headers:{Authorization:`Bearer ${M}`}}),ye.get("/security/alerts",{headers:{Authorization:`Bearer ${M}`}})]);r(q.data.logs||[]),u(L.data||{}),o(re.data||[])}catch(M){console.error("Error fetching security data:",M),D.error("Failed to load security data")}finally{x(!1)}},E=async M=>{try{const q=localStorage.getItem("token");await ye.patch(`/security/logs/${M}/resolve`,{},{headers:{Authorization:`Bearer ${q}`}}),D.success("Alert marked as resolved"),k()}catch(q){console.error("Error resolving alert:",q),D.error("Failed to resolve alert")}},A=M=>{switch(M){case"critical":return"bg-red-100 text-red-800 border-red-300";case"high":return"bg-orange-100 text-orange-800 border-orange-300";case"medium":return"bg-yellow-100 text-yellow-800 border-yellow-300";case"low":return"bg-green-100 text-green-800 border-green-300";default:return"bg-gray-100 text-gray-800 border-gray-300"}},B=M=>{switch(M){case"critical":case"high":return e.jsx(Er,{className:"h-4 w-4"});case"medium":return e.jsx(Aa,{className:"h-4 w-4"});case"low":return e.jsx(os,{className:"h-4 w-4"});default:return e.jsx(ta,{className:"h-4 w-4"})}},H=(Array.isArray(a)?a:[]).filter(M=>{if(h!=="all"&&M.severity!==h)return!1;if(g){const q=g.toLowerCase();return M.description?.toLowerCase().includes(q)||M.userEmail?.toLowerCase().includes(q)||M.ipAddress?.toLowerCase().includes(q)}return!0});return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold text-foreground flex items-center gap-2",children:[e.jsx(ta,{className:"h-8 w-8 text-green-600"}),"AI Security Monitoring"]}),e.jsxs("p",{className:"text-muted-foreground",children:["Real-time threat detection and automated response •",s?e.jsx("span",{className:"text-green-600",children:" 🟢 Live Monitoring"}):e.jsx("span",{className:"text-red-600",children:" 🔴 Offline"})]})]}),e.jsxs(R,{onClick:k,disabled:f,children:[e.jsx(is,{className:`h-4 w-4 mr-2 ${f?"animate-spin":""}`}),"Refresh"]})]}),e.jsxs("div",{className:"grid gap-6 md:grid-cols-4",children:[e.jsx(K,{children:e.jsx(X,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Total Events (24h)"}),e.jsx("p",{className:"text-2xl font-bold",children:c?.totalEvents||0})]}),e.jsx(Aa,{className:"h-8 w-8 text-blue-600"})]})})}),e.jsx(K,{children:e.jsx(X,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Critical Alerts"}),e.jsx("p",{className:"text-2xl font-bold text-red-600",children:c?.bySeverity?.critical||0})]}),e.jsx(Er,{className:"h-8 w-8 text-red-600"})]})})}),e.jsx(K,{children:e.jsx(X,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Blocked IPs"}),e.jsx("p",{className:"text-2xl font-bold",children:c?.blockedIPs||0})]}),e.jsx(O6,{className:"h-8 w-8 text-orange-600"})]})})}),e.jsx(K,{children:e.jsx(X,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Auto-Fixed"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:c?.autoFixed||0})]}),e.jsx(va,{className:"h-8 w-8 text-green-600"})]})})})]}),e.jsxs(pa,{defaultValue:"alerts",className:"space-y-6",children:[e.jsxs(ba,{children:[e.jsxs(ut,{value:"alerts",children:[e.jsx(Er,{className:"h-4 w-4 mr-2"}),"Active Alerts (",i.length,")"]}),e.jsxs(ut,{value:"logs",children:[e.jsx(Aa,{className:"h-4 w-4 mr-2"}),"Security Logs"]}),e.jsxs(ut,{value:"suggestions",children:[e.jsx(va,{className:"h-4 w-4 mr-2"}),"AI Suggestions"]}),e.jsxs(ut,{value:"config",children:[e.jsx(Ea,{className:"h-4 w-4 mr-2"}),"Configuration"]}),e.jsxs(ut,{value:"intelligence",children:[e.jsx(pi,{className:"h-4 w-4 mr-2"}),"AI Intelligence"]})]}),e.jsx(mt,{value:"alerts",className:"space-y-4",children:e.jsxs(K,{children:[e.jsxs(pe,{children:[e.jsx(ge,{children:"Active Security Alerts"}),e.jsx(lt,{children:"Real-time security threats detected by AI"})]}),e.jsx(X,{children:i.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(ta,{className:"h-12 w-12 text-green-600 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"All Clear!"}),e.jsx("p",{className:"text-muted-foreground",children:"No active security alerts"})]}):e.jsx("div",{className:"space-y-4",children:i.map((M,q)=>e.jsx("div",{className:"border rounded-lg p-4 hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs(_e,{className:A(M.severity),children:[B(M.severity),M.severity]}),e.jsx("span",{className:"text-xs text-muted-foreground",children:new Date(M.timestamp).toLocaleString()})]}),e.jsx("h4",{className:"font-semibold text-lg mb-2",children:M.title}),e.jsx("p",{className:"text-sm text-foreground mb-2",children:M.message}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Xt,{className:"h-4 w-4"}),M.user]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(_o,{className:"h-4 w-4"}),M.ipAddress]})]}),M.suggestion&&e.jsxs("div",{className:"mt-3 p-3 bg-blue-50 rounded-lg",children:[e.jsxs("p",{className:"text-sm font-medium text-blue-900 flex items-center gap-2",children:[e.jsx(va,{className:"h-4 w-4"}),"AI Suggestion:"]}),e.jsx("p",{className:"text-sm text-blue-800 mt-1",children:M.suggestion})]})]}),e.jsx("div",{className:"flex gap-2 ml-4",children:M.logId&&e.jsxs(R,{size:"sm",variant:"outline",onClick:()=>E(M.logId),children:[e.jsx(os,{className:"h-4 w-4 mr-1"}),"Resolve"]})})]})},q))})})]})}),e.jsx(mt,{value:"logs",children:e.jsxs(K,{children:[e.jsx(pe,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(ge,{children:"Security Event Logs"}),e.jsx(lt,{children:"Comprehensive activity tracking"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(fe,{placeholder:"Search logs...",value:g,onChange:M=>b(M.target.value),className:"w-64"}),e.jsxs("select",{value:h,onChange:M=>p(M.target.value),className:"border rounded-md px-3 py-2",children:[e.jsx("option",{value:"all",children:"All Severity"}),e.jsx("option",{value:"critical",children:"Critical"}),e.jsx("option",{value:"high",children:"High"}),e.jsx("option",{value:"medium",children:"Medium"}),e.jsx("option",{value:"low",children:"Low"})]})]})]})}),e.jsx(X,{children:e.jsxs(Zn,{children:[e.jsx(Jn,{children:e.jsxs(ma,{children:[e.jsx(wt,{children:"Time"}),e.jsx(wt,{children:"Severity"}),e.jsx(wt,{children:"Event Type"}),e.jsx(wt,{children:"Description"}),e.jsx(wt,{children:"User/IP"}),e.jsx(wt,{children:"Status"})]})}),e.jsx(ei,{children:H.slice(0,50).map(M=>e.jsxs(ma,{children:[e.jsx(Nt,{className:"text-xs",children:new Date(M.timestamp).toLocaleString()}),e.jsx(Nt,{children:e.jsx(_e,{className:A(M.severity),variant:"outline",children:M.severity})}),e.jsx(Nt,{className:"text-sm",children:M.eventType}),e.jsx(Nt,{className:"text-sm max-w-xs truncate",children:M.description}),e.jsxs(Nt,{className:"text-xs",children:[e.jsx("div",{children:M.userEmail||"Unknown"}),e.jsx("div",{className:"text-muted-foreground",children:M.ipAddress})]}),e.jsx(Nt,{children:M.resolved?e.jsxs(_e,{variant:"outline",className:"bg-green-100 text-green-800",children:[e.jsx(os,{className:"h-3 w-3 mr-1"}),"Resolved"]}):e.jsxs(_e,{variant:"outline",className:"bg-yellow-100 text-yellow-800",children:[e.jsx(Qt,{className:"h-3 w-3 mr-1"}),"Open"]})})]},M._id))})]})})]})}),e.jsx(mt,{value:"suggestions",children:e.jsxs(K,{children:[e.jsxs(pe,{children:[e.jsx(ge,{children:"AI Security Recommendations"}),e.jsx(lt,{children:"Automated security improvements and best practices"})]}),e.jsx(X,{children:e.jsxs("div",{className:"space-y-4",children:[i.filter(M=>M.suggestion).map((M,q)=>e.jsx("div",{className:"border-l-4 border-blue-500 bg-blue-50 p-4 rounded-r-lg",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(va,{className:"h-5 w-5 text-blue-600 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-semibold text-blue-900 mb-1",children:M.title}),e.jsx("p",{className:"text-sm text-blue-800 mb-2",children:M.suggestion}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-blue-700",children:[e.jsxs(_e,{variant:"outline",className:"bg-white",children:["Priority: ",M.severity]}),e.jsx("span",{children:new Date(M.timestamp).toLocaleString()})]})]})]})},q)),i.filter(M=>M.suggestion).length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(os,{className:"h-12 w-12 text-green-600 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No Recommendations"}),e.jsx("p",{className:"text-muted-foreground",children:"Your security posture is excellent!"})]})]})})]})}),e.jsx(mt,{value:"config",children:e.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[e.jsxs(K,{children:[e.jsxs(pe,{children:[e.jsxs(ge,{className:"flex items-center gap-2",children:[e.jsx(Ea,{className:"h-5 w-5"}),"AI Security Settings"]}),e.jsx(lt,{children:"Configure automated security responses"})]}),e.jsxs(X,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsxs("h4",{className:"font-medium flex items-center gap-2",children:[e.jsx(va,{className:"h-4 w-4 text-yellow-600"}),"Auto-Fix Enabled"]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Automatically fix detected threats"})]}),e.jsx("input",{type:"checkbox",checked:N.autoFix,onChange:M=>y({...N,autoFix:M.target.checked}),className:"h-5 w-5 rounded"})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsxs("h4",{className:"font-medium flex items-center gap-2",children:[e.jsx(pi,{className:"h-4 w-4 text-purple-600"}),"AI Analysis"]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Use AI for threat pattern recognition"})]}),e.jsx("input",{type:"checkbox",checked:N.aiAnalysis,onChange:M=>y({...N,aiAnalysis:M.target.checked}),className:"h-5 w-5 rounded"})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsxs("h4",{className:"font-medium flex items-center gap-2",children:[e.jsx(Aa,{className:"h-4 w-4 text-green-600"}),"Real-Time Monitoring"]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Continuous threat monitoring"})]}),e.jsx("input",{type:"checkbox",checked:N.realTimeMonitoring,onChange:M=>y({...N,realTimeMonitoring:M.target.checked}),className:"h-5 w-5 rounded"})]}),e.jsxs("div",{className:"p-4 border rounded-lg space-y-3",children:[e.jsx("h4",{className:"font-medium",children:"Anomaly Detection Threshold"}),e.jsxs("select",{value:N.anomalyThreshold,onChange:M=>y({...N,anomalyThreshold:M.target.value}),className:"w-full p-2 border rounded-md",children:[e.jsx("option",{value:"low",children:"Low (More Alerts)"}),e.jsx("option",{value:"medium",children:"Medium (Balanced)"}),e.jsx("option",{value:"high",children:"High (Critical Only)"})]})]}),e.jsx(R,{onClick:()=>D.success("AI Configuration saved"),className:"w-full",children:"Save Configuration"})]})]}),e.jsxs(K,{children:[e.jsxs(pe,{children:[e.jsx(ge,{children:"Threat Detection Rules"}),e.jsx(lt,{children:"Configure detection thresholds"})]}),e.jsxs(X,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Failed Login Attempts"}),e.jsx(fe,{type:"number",defaultValue:"5",min:"1",max:"10"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Current: 5 attempts in 5 minutes"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"API Rate Limit (requests/minute)"}),e.jsx(fe,{type:"number",defaultValue:"100",min:"10",max:"1000"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Account Lock Duration (minutes)"}),e.jsx(fe,{type:"number",defaultValue:"30",min:"5",max:"120"})]}),e.jsx(R,{onClick:()=>D.success("Thresholds updated"),className:"w-full",variant:"outline",children:"Update Thresholds"})]})]})]})}),e.jsx(mt,{value:"intelligence",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs(K,{children:[e.jsx(pe,{children:e.jsxs(ge,{className:"flex items-center gap-2",children:[e.jsx(GS,{className:"h-5 w-5 text-blue-600"}),"AI Intelligence System Status"]})}),e.jsx(X,{children:e.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsx("span",{className:"text-sm font-medium",children:"AI Model Status"}),e.jsx(_e,{className:"bg-green-100 text-green-800 ml-2",children:"Active"}),e.jsx("p",{className:"text-2xl font-bold mt-2",children:"99.8%"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Uptime"})]}),e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsx("span",{className:"text-sm font-medium",children:"Detection Accuracy"}),e.jsx("p",{className:"text-2xl font-bold mt-2",children:"96.5%"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Last 24h"})]}),e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsx("span",{className:"text-sm font-medium",children:"Response Time"}),e.jsx("p",{className:"text-2xl font-bold mt-2",children:"342ms"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Average"})]})]})})]}),e.jsxs(K,{children:[e.jsx(pe,{children:e.jsxs(ge,{className:"flex items-center gap-2",children:[e.jsx(ta,{className:"h-5 w-5 text-red-600"}),"Threat Intelligence Feed"]})}),e.jsx(X,{children:e.jsx("div",{className:"space-y-3",children:[{type:"SQL Injection",detected:142,severity:"critical"},{type:"XSS Attempts",detected:89,severity:"high"},{type:"Brute Force",detected:67,severity:"high"},{type:"API Abuse",detected:234,severity:"medium"}].map((M,q)=>e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Er,{className:`h-4 w-4 ${M.severity==="critical"?"text-red-600":M.severity==="high"?"text-orange-600":"text-yellow-600"}`}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-sm",children:M.type}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Detected: ",M.detected]})]})]}),e.jsx(_e,{className:M.severity==="critical"?"bg-red-100 text-red-800":"bg-orange-100 text-orange-800",children:M.severity})]},q))})})]}),e.jsxs(K,{children:[e.jsx(pe,{children:e.jsxs(ge,{className:"flex items-center gap-2",children:[e.jsx(pi,{className:"h-5 w-5 text-purple-600"}),"AI Pattern Recognition"]})}),e.jsx(X,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"p-4 bg-blue-50 border-l-4 border-blue-500 rounded-r-lg",children:[e.jsx("h4",{className:"font-semibold text-blue-900 mb-2",children:"Normal User Behavior"}),e.jsxs("ul",{className:"text-sm text-blue-800 space-y-1",children:[e.jsx("li",{children:"• Session duration: 15-25 minutes"}),e.jsx("li",{children:"• Peak activity: 9 AM - 6 PM"}),e.jsx("li",{children:"• API calls: 20-40 per session"})]})]}),e.jsxs("div",{className:"p-4 bg-green-50 border-l-4 border-green-500 rounded-r-lg",children:[e.jsx("h4",{className:"font-semibold text-green-900 mb-2",children:"AI Learning Progress"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[e.jsx("span",{children:"User Behavior Models"}),e.jsx("span",{children:"87%"})]}),e.jsx("div",{className:"w-full bg-green-200 rounded-full h-2",children:e.jsx("div",{className:"bg-green-600 h-2 rounded-full",style:{width:"87%"}})})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[e.jsx("span",{children:"Attack Pattern Database"}),e.jsx("span",{children:"94%"})]}),e.jsx("div",{className:"w-full bg-green-200 rounded-full h-2",children:e.jsx("div",{className:"bg-green-600 h-2 rounded-full",style:{width:"94%"}})})]})]})]})]})})]})]})})]})]})};function MK(){const[t,s]=v.useState(!0),[a,r]=v.useState(!1);v.useEffect(()=>{const o=setTimeout(()=>{s(!1),r(!0),uu.start()},3e3);return()=>{clearTimeout(o),uu.stop()}},[]),v.useEffect(()=>{if(a)return uu.initialize(),uu.showWelcomeMessage(),()=>{uu.destroy()}},[a]);const i=()=>{s(!1),r(!0)};return t||!a?e.jsx(lw,{children:e.jsx(IW,{onComplete:i})}):e.jsx(pG,{children:e.jsx(lw,{children:e.jsx(fG,{children:e.jsx(iR,{children:e.jsx(AR,{children:e.jsx(_R,{children:e.jsx(L9,{children:e.jsx(tU,{children:e.jsxs(i_,{children:[e.jsx(mG,{}),e.jsxs(l_,{children:[e.jsx(Gt,{path:"/",element:e.jsx(M9,{})}),e.jsx(Gt,{path:"/features",element:e.jsx(LW,{})}),e.jsx(Gt,{path:"/pricing",element:e.jsx(BW,{})}),e.jsx(Gt,{path:"/contact",element:e.jsx(zW,{})}),e.jsx(Gt,{path:"/about",element:e.jsx($W,{})}),e.jsx(Gt,{path:"/privacy",element:e.jsx(HW,{})}),e.jsx(Gt,{path:"/terms",element:e.jsx(WW,{})}),e.jsx(Gt,{path:"/loginpage",element:e.jsx(oR,{})}),e.jsx(Gt,{path:"/signup",element:e.jsx(dR,{})}),e.jsx(Gt,{path:"/client/signup/:inviteCode",element:e.jsx(jG,{})}),e.jsx(Gt,{path:"/client/login/:inviteCode",element:e.jsx(kK,{})}),e.jsx(Gt,{path:"/client/store/:inviteCode",element:e.jsx(jK,{})}),e.jsx(Gt,{path:"/client/catalog",element:e.jsx(wK,{})}),e.jsx(Gt,{path:"/store",element:e.jsx(NK,{})}),e.jsx(Gt,{path:"/client/book",element:e.jsx(CK,{})}),e.jsx(Gt,{path:"/client/my-bookings",element:e.jsx(TK,{})}),e.jsx(Gt,{path:"/client/messages",element:e.jsx(EK,{})}),e.jsx(Gt,{path:"/session/join/:accessLink",element:e.jsx(DK,{})}),e.jsxs(Gt,{path:"/dashboard",element:e.jsx(VR,{}),children:[e.jsx(Gt,{index:!0,element:e.jsx(y9,{})}),e.jsx(Gt,{path:"inventory",element:e.jsx(EP,{})}),e.jsx(Gt,{path:"ecommerce",element:e.jsx(ez,{})}),e.jsx(Gt,{path:"discounts",element:e.jsx(iG,{})}),e.jsx(Gt,{path:"services",element:e.jsx(sz,{})}),e.jsx(Gt,{path:"appointments",element:e.jsx(tz,{})}),e.jsx(Gt,{path:"finances",element:e.jsx(pz,{})}),e.jsx(Gt,{path:"subscriptions",element:e.jsx(gz,{})}),e.jsx(Gt,{path:"team",element:e.jsx(cz,{})}),e.jsx(Gt,{path:"ai-insights",element:e.jsx(jz,{})}),e.jsx(Gt,{path:"locations",element:e.jsx(yz,{})}),e.jsx(Gt,{path:"settings",element:e.jsx($z,{})}),e.jsx(Gt,{path:"profile",element:e.jsx(Kz,{})}),e.jsx(Gt,{path:"wallet",element:e.jsx(Yz,{})}),e.jsx(Gt,{path:"products",element:e.jsx(eU,{})}),e.jsx(Gt,{path:"checkout",element:e.jsx(sU,{})}),e.jsx(Gt,{path:"help",element:e.jsx(GW,{})}),e.jsx(Gt,{path:"support",element:e.jsx(tG,{})}),e.jsx(Gt,{path:"resources",element:e.jsx(nG,{})}),e.jsx(Gt,{path:"analytics",element:e.jsx(qW,{})}),e.jsx(Gt,{path:"maps",element:e.jsx(KW,{})}),e.jsx(Gt,{path:"purchasing",element:e.jsx(YW,{})}),e.jsx(Gt,{path:"history",element:e.jsx(XW,{})}),e.jsx(Gt,{path:"search",element:e.jsx(QW,{})}),e.jsx(Gt,{path:"graphs",element:e.jsx(ZW,{})}),e.jsx(Gt,{path:"reports",element:e.jsx(eG,{})}),e.jsx(Gt,{path:"gui",element:e.jsx(lG,{})}),e.jsx(Gt,{path:"sessions",element:e.jsx(AK,{})}),e.jsx(Gt,{path:"messages",element:e.jsx(RK,{})}),e.jsx(Gt,{path:"security-dashboard",element:e.jsx(PK,{})})]}),e.jsx(Gt,{path:"*",element:e.jsx(uR,{})})]}),e.jsx(gG,{}),e.jsx(vG,{}),e.jsx(xG,{position:"top-center",expand:!0,toastOptions:{classNames:{toast:"group-[.toaster]:bg-white group-[.toaster]:text-slate-900 group-[.toaster]:border-green-200 group-[.toaster]:shadow-xl group-[.toaster]:backdrop-blur-sm",description:"group-[.toast]:text-slate-600",actionButton:"group-[.toast]:bg-green-600 group-[.toast]:text-white group-[.toast]:hover:bg-green-700",cancelButton:"group-[.toast]:bg-slate-100 group-[.toast]:text-slate-700 group-[.toast]:hover:bg-slate-200",error:"group-[.toaster]:bg-white group-[.toaster]:text-red-900 group-[.toaster]:border-red-200",success:"group-[.toaster]:bg-white group-[.toaster]:text-green-900 group-[.toaster]:border-green-300",warning:"group-[.toaster]:bg-white group-[.toaster]:text-amber-900 group-[.toaster]:border-amber-200",info:"group-[.toaster]:bg-white group-[.toaster]:text-blue-900 group-[.toaster]:border-blue-200"},style:{borderWidth:"2px"},duration:4e3}})]})})})})})})})})})}q6.createRoot(document.getElementById("root")).render(e.jsx(v.StrictMode,{children:e.jsx(MK,{})}));const FK=Object.freeze(Object.defineProperty({__proto__:null,default:_k},Symbol.toStringTag,{value:"Module"}));export{Ts as A,R as B,K as C,bg as D,Rs as E,da as F,Je as G,fe as I,ae as L,_r as S,Zn as T,pe as a,ge as b,lt as c,X as d,wg as e,Sg as f,fR as g,iw as h,qn as i,Jn as j,ma as k,wt as l,ei as m,Nt as n,_e as o,Ft as p,It as q,Lt as r,Bt as s,es as t,Fn as u,Ot as v,Pt as w,Rt as x,Mt as y,Ee as z};
