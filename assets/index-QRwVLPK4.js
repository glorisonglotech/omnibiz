const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/ProductCatalog-CJOseC2R.js","assets/radix-vendor-B3KJ3-F4.js","assets/react-vendor-DyCm8Hca.js","assets/ui-vendor-7Lw9ZtLE.js","assets/socket-vendor-CA1CrNgP.js","assets/chart-vendor-DSBLL5zb.js","assets/SalesAnalytics-DbA8QVr9.js","assets/OrderTimeline-L8H_wEm2.js","assets/QuickActions-CINXzf0a.js","assets/EnhancedOrderForm-DAzYu6Tf.js","assets/RealTimeSync-yoGY_FwC.js","assets/ModernOrderCard-BwodiTkE.js"])))=>i.map(i=>d[i]);
import{j as e,S as qy,P as Ma,R as q3,T as K3,a as Y3,C as Z3,L as X3,b as Q3,I as J3,c as p_,V as e5,d as t5,e as g_,f as s5,g as Pp,h as v_,i as y_,k as Op,u as Sn,l as j_,m as N_,n as w_,o as ua,p as b_,F as S_,D as __,q as C_,r as _m,s as T_,t as Mp,A as Ky,v as k_,w as E_,x as A_,y as sc,z as a5,B as rp,E as D_,G as n5,H as r5,J as i5,K as o5,M as l5,N as c5,O as d5,Q as u5}from"./radix-vendor-B3KJ3-F4.js";import{b as h5,e as m5,r as N,R as At,u as _n,L as is,f as Yy,h as ol,O as f5,c as P_,g as x5,i as p5,B as g5,j as v5,k as ls}from"./react-vendor-DyCm8Hca.js";import{X as nr,t as R,A as wi,G as ip,M as fa,L as sr,H as od,a as Pa,I as Zy,J as td,u as Aa,v as ia,K as ec,N as y5,f as Mn,d as aa,O as O_,Q as j5,P as cs,e as Bs,V as tc,g as Ms,D as Sa,Y as Ba,Z as za,_ as ja,$ as Rp,U as fs,a0 as jo,w as Fr,a1 as _a,r as Ka,a2 as Zl,S as Da,a3 as go,a4 as N5,s as Ya,a5 as Uu,a6 as Xy,a7 as op,B as ur,a8 as Zi,T as Ua,a9 as Wm,j as Ws,p as Yo,aa as Hi,y as To,ab as Hv,ac as w5,ad as bu,ae as M_,af as Qy,ag as R_,ah as L_,ai as Cm,aj as Tm,ak as lp,al as b5,am as Q0,R as Cs,q as hn,an as S5,ao as Jy,ap as ld,aq as I_,ar as Ga,as as Dn,at as km,au as mn,av as Lp,aw as _5,ax as $v,o as ha,c as mr,F as ll,ay as Xl,h as No,az as Lr,i as ps,aA as C5,aB as T5,aC as k5,aD as Wv,aE as Pu,C as ks,k as cr,b as sl,x as wo,aF as rn,aG as E5,aH as A5,aI as D5,aJ as Gv,aK as _o,aL as qv,aM as Ou,aN as P5,aO as Kv,aP as O5,aQ as Ko,aR as rm,aS as Kx,aT as g1,aU as hm,aV as J0,aW as Su,W as cp,aX as M5,aY as pu,aZ as ej,a_ as v1,a$ as cd,b0 as tj,b1 as _u,b2 as sj,b3 as Xh,b4 as R5,b5 as L5,b6 as I5,b7 as F_,b8 as F5,b9 as B_,ba as B5,bb as Em,bc as z5,bd as U5,z as Xi,be as V5,bf as y1,bg as j1,bh as H5,bi as z_,bj as $5,bk as Zo,bl as U_,l as Mu,bm as W5,bn as G5,bo as q5,bp as N1,bq as K5,br as Y5,bs as Ru,bt as Cu,bu as ev,bv as tv,bw as w1,bx as Z5,by as X5,bz as Q5,bA as J5,bB as V_,bC as eD,bD as tD,bE as sD,bF as aD,bG as nD,bH as rD,bI as iD,m as b1,bJ as aj,bK as oD,bL as lD,bM as cD,bN as dD,bO as uD,bP as hD,bQ as mD,bR as fD,bS as xD,bT as pD,bU as gD,bV as vD,bW as Yv,bX as yD,bY as jD,bZ as ND,b_ as wD,b$ as bD,c0 as SD,c1 as _D,c2 as CD,c3 as TD,c4 as kD,c5 as ED,c6 as AD,c7 as DD,c8 as PD,c9 as OD,ca as MD,cb as RD,cc as LD,cd as ID,ce as H_,cf as $_,E as nj,cg as rj,ch as FD,ci as S1,cj as BD,ck as zD,cl as UD,cm as VD}from"./ui-vendor-7Lw9ZtLE.js";import{l as W_}from"./socket-vendor-CA1CrNgP.js";import{c as G_,R as HD,C as $D,a as Tx,X as kx,Y as Ex,T as Qh,L as Ax,B as _1,b as C1,P as WD,d as GD,e as qD,f as KD,A as YD,g as ZD,h as XD}from"./chart-vendor-DSBLL5zb.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const c of i)if(c.type==="childList")for(const d of c.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&n(d)}).observe(document,{childList:!0,subtree:!0});function a(i){const c={};return i.integrity&&(c.integrity=i.integrity),i.referrerPolicy&&(c.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?c.credentials="include":i.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function n(i){if(i.ep)return;i.ep=!0;const c=a(i);fetch(i.href,c)}})();var sv={exports:{}},Jh={},av={exports:{}},nv={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var T1;function QD(){return T1||(T1=1,(function(t){function s(V,ae){var ge=V.length;V.push(ae);e:for(;0<ge;){var Z=ge-1>>>1,ee=V[Z];if(0<i(ee,ae))V[Z]=ae,V[ge]=ee,ge=Z;else break e}}function a(V){return V.length===0?null:V[0]}function n(V){if(V.length===0)return null;var ae=V[0],ge=V.pop();if(ge!==ae){V[0]=ge;e:for(var Z=0,ee=V.length,te=ee>>>1;Z<te;){var X=2*(Z+1)-1,ce=V[X],F=X+1,re=V[F];if(0>i(ce,ge))F<ee&&0>i(re,ce)?(V[Z]=re,V[F]=ge,Z=F):(V[Z]=ce,V[X]=ge,Z=X);else if(F<ee&&0>i(re,ge))V[Z]=re,V[F]=ge,Z=F;else break e}}return ae}function i(V,ae){var ge=V.sortIndex-ae.sortIndex;return ge!==0?ge:V.id-ae.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;t.unstable_now=function(){return c.now()}}else{var d=Date,h=d.now();t.unstable_now=function(){return d.now()-h}}var f=[],g=[],p=1,v=null,y=3,_=!1,S=!1,b=!1,T=!1,E=typeof setTimeout=="function"?setTimeout:null,A=typeof clearTimeout=="function"?clearTimeout:null,O=typeof setImmediate<"u"?setImmediate:null;function Q(V){for(var ae=a(g);ae!==null;){if(ae.callback===null)n(g);else if(ae.startTime<=V)n(g),ae.sortIndex=ae.expirationTime,s(f,ae);else break;ae=a(g)}}function q(V){if(b=!1,Q(V),!S)if(a(f)!==null)S=!0,U||(U=!0,z());else{var ae=a(g);ae!==null&&he(q,ae.startTime-V)}}var U=!1,D=-1,M=5,P=-1;function G(){return T?!0:!(t.unstable_now()-P<M)}function K(){if(T=!1,U){var V=t.unstable_now();P=V;var ae=!0;try{e:{S=!1,b&&(b=!1,A(D),D=-1),_=!0;var ge=y;try{t:{for(Q(V),v=a(f);v!==null&&!(v.expirationTime>V&&G());){var Z=v.callback;if(typeof Z=="function"){v.callback=null,y=v.priorityLevel;var ee=Z(v.expirationTime<=V);if(V=t.unstable_now(),typeof ee=="function"){v.callback=ee,Q(V),ae=!0;break t}v===a(f)&&n(f),Q(V)}else n(f);v=a(f)}if(v!==null)ae=!0;else{var te=a(g);te!==null&&he(q,te.startTime-V),ae=!1}}break e}finally{v=null,y=ge,_=!1}ae=void 0}}finally{ae?z():U=!1}}}var z;if(typeof O=="function")z=function(){O(K)};else if(typeof MessageChannel<"u"){var J=new MessageChannel,W=J.port2;J.port1.onmessage=K,z=function(){W.postMessage(null)}}else z=function(){E(K,0)};function he(V,ae){D=E(function(){V(t.unstable_now())},ae)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(V){V.callback=null},t.unstable_forceFrameRate=function(V){0>V||125<V?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<V?Math.floor(1e3/V):5},t.unstable_getCurrentPriorityLevel=function(){return y},t.unstable_next=function(V){switch(y){case 1:case 2:case 3:var ae=3;break;default:ae=y}var ge=y;y=ae;try{return V()}finally{y=ge}},t.unstable_requestPaint=function(){T=!0},t.unstable_runWithPriority=function(V,ae){switch(V){case 1:case 2:case 3:case 4:case 5:break;default:V=3}var ge=y;y=V;try{return ae()}finally{y=ge}},t.unstable_scheduleCallback=function(V,ae,ge){var Z=t.unstable_now();switch(typeof ge=="object"&&ge!==null?(ge=ge.delay,ge=typeof ge=="number"&&0<ge?Z+ge:Z):ge=Z,V){case 1:var ee=-1;break;case 2:ee=250;break;case 5:ee=1073741823;break;case 4:ee=1e4;break;default:ee=5e3}return ee=ge+ee,V={id:p++,callback:ae,priorityLevel:V,startTime:ge,expirationTime:ee,sortIndex:-1},ge>Z?(V.sortIndex=ge,s(g,V),a(f)===null&&V===a(g)&&(b?(A(D),D=-1):b=!0,he(q,ge-Z))):(V.sortIndex=ee,s(f,V),S||_||(S=!0,U||(U=!0,z()))),V},t.unstable_shouldYield=G,t.unstable_wrapCallback=function(V){var ae=y;return function(){var ge=y;y=ae;try{return V.apply(this,arguments)}finally{y=ge}}}})(nv)),nv}var k1;function JD(){return k1||(k1=1,av.exports=QD()),av.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var E1;function eP(){if(E1)return Jh;E1=1;var t=JD(),s=h5(),a=m5();function n(r){var o="https://react.dev/errors/"+r;if(1<arguments.length){o+="?args[]="+encodeURIComponent(arguments[1]);for(var u=2;u<arguments.length;u++)o+="&args[]="+encodeURIComponent(arguments[u])}return"Minified React error #"+r+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function c(r){var o=r,u=r;if(r.alternate)for(;o.return;)o=o.return;else{r=o;do o=r,(o.flags&4098)!==0&&(u=o.return),r=o.return;while(r)}return o.tag===3?u:null}function d(r){if(r.tag===13){var o=r.memoizedState;if(o===null&&(r=r.alternate,r!==null&&(o=r.memoizedState)),o!==null)return o.dehydrated}return null}function h(r){if(r.tag===31){var o=r.memoizedState;if(o===null&&(r=r.alternate,r!==null&&(o=r.memoizedState)),o!==null)return o.dehydrated}return null}function f(r){if(c(r)!==r)throw Error(n(188))}function g(r){var o=r.alternate;if(!o){if(o=c(r),o===null)throw Error(n(188));return o!==r?null:r}for(var u=r,x=o;;){var w=u.return;if(w===null)break;var C=w.alternate;if(C===null){if(x=w.return,x!==null){u=x;continue}break}if(w.child===C.child){for(C=w.child;C;){if(C===u)return f(w),r;if(C===x)return f(w),o;C=C.sibling}throw Error(n(188))}if(u.return!==x.return)u=w,x=C;else{for(var Y=!1,xe=w.child;xe;){if(xe===u){Y=!0,u=w,x=C;break}if(xe===x){Y=!0,x=w,u=C;break}xe=xe.sibling}if(!Y){for(xe=C.child;xe;){if(xe===u){Y=!0,u=C,x=w;break}if(xe===x){Y=!0,x=C,u=w;break}xe=xe.sibling}if(!Y)throw Error(n(189))}}if(u.alternate!==x)throw Error(n(190))}if(u.tag!==3)throw Error(n(188));return u.stateNode.current===u?r:o}function p(r){var o=r.tag;if(o===5||o===26||o===27||o===6)return r;for(r=r.child;r!==null;){if(o=p(r),o!==null)return o;r=r.sibling}return null}var v=Object.assign,y=Symbol.for("react.element"),_=Symbol.for("react.transitional.element"),S=Symbol.for("react.portal"),b=Symbol.for("react.fragment"),T=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),A=Symbol.for("react.consumer"),O=Symbol.for("react.context"),Q=Symbol.for("react.forward_ref"),q=Symbol.for("react.suspense"),U=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),M=Symbol.for("react.lazy"),P=Symbol.for("react.activity"),G=Symbol.for("react.memo_cache_sentinel"),K=Symbol.iterator;function z(r){return r===null||typeof r!="object"?null:(r=K&&r[K]||r["@@iterator"],typeof r=="function"?r:null)}var J=Symbol.for("react.client.reference");function W(r){if(r==null)return null;if(typeof r=="function")return r.$$typeof===J?null:r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case b:return"Fragment";case E:return"Profiler";case T:return"StrictMode";case q:return"Suspense";case U:return"SuspenseList";case P:return"Activity"}if(typeof r=="object")switch(r.$$typeof){case S:return"Portal";case O:return r.displayName||"Context";case A:return(r._context.displayName||"Context")+".Consumer";case Q:var o=r.render;return r=r.displayName,r||(r=o.displayName||o.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case D:return o=r.displayName||null,o!==null?o:W(r.type)||"Memo";case M:o=r._payload,r=r._init;try{return W(r(o))}catch{}}return null}var he=Array.isArray,V=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ae=a.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ge={pending:!1,data:null,method:null,action:null},Z=[],ee=-1;function te(r){return{current:r}}function X(r){0>ee||(r.current=Z[ee],Z[ee]=null,ee--)}function ce(r,o){ee++,Z[ee]=r.current,r.current=o}var F=te(null),re=te(null),de=te(null),me=te(null);function De(r,o){switch(ce(de,o),ce(re,r),ce(F,null),o.nodeType){case 9:case 11:r=(r=o.documentElement)&&(r=r.namespaceURI)?zb(r):0;break;default:if(r=o.tagName,o=o.namespaceURI)o=zb(o),r=Ub(o,r);else switch(r){case"svg":r=1;break;case"math":r=2;break;default:r=0}}X(F),ce(F,r)}function Ne(){X(F),X(re),X(de)}function pe(r){r.memoizedState!==null&&ce(me,r);var o=F.current,u=Ub(o,r.type);o!==u&&(ce(re,r),ce(F,u))}function Le(r){re.current===r&&(X(F),X(re)),me.current===r&&(X(me),qh._currentValue=ge)}var ot,Pt;function Dt(r){if(ot===void 0)try{throw Error()}catch(u){var o=u.stack.trim().match(/\n( *(at )?)/);ot=o&&o[1]||"",Pt=-1<u.stack.indexOf(`
    at`)?" (<anonymous>)":-1<u.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ot+r+Pt}var Ct=!1;function Lt(r,o){if(!r||Ct)return"";Ct=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var x={DetermineComponentFrameRoot:function(){try{if(o){var ft=function(){throw Error()};if(Object.defineProperty(ft.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ft,[])}catch(at){var Ye=at}Reflect.construct(r,[],ft)}else{try{ft.call()}catch(at){Ye=at}r.call(ft.prototype)}}else{try{throw Error()}catch(at){Ye=at}(ft=r())&&typeof ft.catch=="function"&&ft.catch(function(){})}}catch(at){if(at&&Ye&&typeof at.stack=="string")return[at.stack,Ye.stack]}return[null,null]}};x.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var w=Object.getOwnPropertyDescriptor(x.DetermineComponentFrameRoot,"name");w&&w.configurable&&Object.defineProperty(x.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var C=x.DetermineComponentFrameRoot(),Y=C[0],xe=C[1];if(Y&&xe){var Ae=Y.split(`
`),qe=xe.split(`
`);for(w=x=0;x<Ae.length&&!Ae[x].includes("DetermineComponentFrameRoot");)x++;for(;w<qe.length&&!qe[w].includes("DetermineComponentFrameRoot");)w++;if(x===Ae.length||w===qe.length)for(x=Ae.length-1,w=qe.length-1;1<=x&&0<=w&&Ae[x]!==qe[w];)w--;for(;1<=x&&0<=w;x--,w--)if(Ae[x]!==qe[w]){if(x!==1||w!==1)do if(x--,w--,0>w||Ae[x]!==qe[w]){var it=`
`+Ae[x].replace(" at new "," at ");return r.displayName&&it.includes("<anonymous>")&&(it=it.replace("<anonymous>",r.displayName)),it}while(1<=x&&0<=w);break}}}finally{Ct=!1,Error.prepareStackTrace=u}return(u=r?r.displayName||r.name:"")?Dt(u):""}function yt(r,o){switch(r.tag){case 26:case 27:case 5:return Dt(r.type);case 16:return Dt("Lazy");case 13:return r.child!==o&&o!==null?Dt("Suspense Fallback"):Dt("Suspense");case 19:return Dt("SuspenseList");case 0:case 15:return Lt(r.type,!1);case 11:return Lt(r.type.render,!1);case 1:return Lt(r.type,!0);case 31:return Dt("Activity");default:return""}}function ys(r){try{var o="",u=null;do o+=yt(r,u),u=r,r=r.return;while(r);return o}catch(x){return`
Error generating stack: `+x.message+`
`+x.stack}}var Es=Object.prototype.hasOwnProperty,Hs=t.unstable_scheduleCallback,bs=t.unstable_cancelCallback,$s=t.unstable_shouldYield,ws=t.unstable_requestPaint,$t=t.unstable_now,Na=t.unstable_getCurrentPriorityLevel,Me=t.unstable_ImmediatePriority,ht=t.unstable_UserBlockingPriority,He=t.unstable_NormalPriority,Mt=t.unstable_LowPriority,Rt=t.unstable_IdlePriority,xs=t.log,Ks=t.unstable_setDisableYieldValue,Ze=null,Xe=null;function Se(r){if(typeof xs=="function"&&Ks(r),Xe&&typeof Xe.setStrictMode=="function")try{Xe.setStrictMode(Ze,r)}catch{}}var Ce=Math.clz32?Math.clz32:jt,rt=Math.log,Qe=Math.LN2;function jt(r){return r>>>=0,r===0?32:31-(rt(r)/Qe|0)|0}var Ot=256,ts=262144,js=4194304;function Zt(r){var o=r&42;if(o!==0)return o;switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return r&261888;case 262144:case 524288:case 1048576:case 2097152:return r&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return r&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return r}}function Ca(r,o,u){var x=r.pendingLanes;if(x===0)return 0;var w=0,C=r.suspendedLanes,Y=r.pingedLanes;r=r.warmLanes;var xe=x&134217727;return xe!==0?(x=xe&~C,x!==0?w=Zt(x):(Y&=xe,Y!==0?w=Zt(Y):u||(u=xe&~r,u!==0&&(w=Zt(u))))):(xe=x&~C,xe!==0?w=Zt(xe):Y!==0?w=Zt(Y):u||(u=x&~r,u!==0&&(w=Zt(u)))),w===0?0:o!==0&&o!==w&&(o&C)===0&&(C=w&-w,u=o&-o,C>=u||C===32&&(u&4194048)!==0)?o:w}function Ta(r,o){return(r.pendingLanes&~(r.suspendedLanes&~r.pingedLanes)&o)===0}function Qa(r,o){switch(r){case 1:case 2:case 4:case 8:case 64:return o+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ps(){var r=js;return js<<=1,(js&62914560)===0&&(js=4194304),r}function ie(r){for(var o=[],u=0;31>u;u++)o.push(r);return o}function Re(r,o){r.pendingLanes|=o,o!==268435456&&(r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0)}function tt(r,o,u,x,w,C){var Y=r.pendingLanes;r.pendingLanes=u,r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0,r.expiredLanes&=u,r.entangledLanes&=u,r.errorRecoveryDisabledLanes&=u,r.shellSuspendCounter=0;var xe=r.entanglements,Ae=r.expirationTimes,qe=r.hiddenUpdates;for(u=Y&~u;0<u;){var it=31-Ce(u),ft=1<<it;xe[it]=0,Ae[it]=-1;var Ye=qe[it];if(Ye!==null)for(qe[it]=null,it=0;it<Ye.length;it++){var at=Ye[it];at!==null&&(at.lane&=-536870913)}u&=~ft}x!==0&&wt(r,x,0),C!==0&&w===0&&r.tag!==0&&(r.suspendedLanes|=C&~(Y&~o))}function wt(r,o,u){r.pendingLanes|=o,r.suspendedLanes&=~o;var x=31-Ce(o);r.entangledLanes|=o,r.entanglements[x]=r.entanglements[x]|1073741824|u&261930}function bt(r,o){var u=r.entangledLanes|=o;for(r=r.entanglements;u;){var x=31-Ce(u),w=1<<x;w&o|r[x]&o&&(r[x]|=o),u&=~w}}function rs(r,o){var u=o&-o;return u=(u&42)!==0?1:gs(u),(u&(r.suspendedLanes|o))!==0?0:u}function gs(r){switch(r){case 2:r=1;break;case 8:r=4;break;case 32:r=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:r=128;break;case 268435456:r=134217728;break;default:r=0}return r}function Nt(r){return r&=-r,2<r?8<r?(r&134217727)!==0?32:268435456:8:2}function ne(){var r=ae.p;return r!==0?r:(r=window.event,r===void 0?32:d1(r.type))}function ye(r,o){var u=ae.p;try{return ae.p=r,o()}finally{ae.p=u}}var ve=Math.random().toString(36).slice(2),B="__reactFiber$"+ve,fe="__reactProps$"+ve,je="__reactContainer$"+ve,Ue="__reactEvents$"+ve,Je="__reactListeners$"+ve,Ve="__reactHandles$"+ve,$e="__reactResources$"+ve,We="__reactMarker$"+ve;function pt(r){delete r[B],delete r[fe],delete r[Ue],delete r[Je],delete r[Ve]}function be(r){var o=r[B];if(o)return o;for(var u=r.parentNode;u;){if(o=u[je]||u[B]){if(u=o.alternate,o.child!==null||u!==null&&u.child!==null)for(r=Kb(r);r!==null;){if(u=r[B])return u;r=Kb(r)}return o}r=u,u=r.parentNode}return null}function st(r){if(r=r[B]||r[je]){var o=r.tag;if(o===5||o===6||o===13||o===31||o===26||o===27||o===3)return r}return null}function Pe(r){var o=r.tag;if(o===5||o===26||o===27||o===6)return r.stateNode;throw Error(n(33))}function dt(r){var o=r[$e];return o||(o=r[$e]={hoistableStyles:new Map,hoistableScripts:new Map}),o}function gt(r){r[We]=!0}var Ft=new Set,lt={};function ss(r,o){xn(r,o),xn(r+"Capture",o)}function xn(r,o){for(lt[r]=o,r=0;r<o.length;r++)Ft.add(o[r])}var Rn=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),$n={},Wn={};function Ln(r){return Es.call(Wn,r)?!0:Es.call($n,r)?!1:Rn.test(r)?Wn[r]=!0:($n[r]=!0,!1)}function ds(r,o,u){if(Ln(o))if(u===null)r.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":r.removeAttribute(o);return;case"boolean":var x=o.toLowerCase().slice(0,5);if(x!=="data-"&&x!=="aria-"){r.removeAttribute(o);return}}r.setAttribute(o,""+u)}}function na(r,o,u){if(u===null)r.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(o);return}r.setAttribute(o,""+u)}}function In(r,o,u,x){if(x===null)r.removeAttribute(u);else{switch(typeof x){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(u);return}r.setAttributeNS(o,u,""+x)}}function ln(r){switch(typeof r){case"bigint":case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function Ti(r){var o=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function mc(r,o,u){var x=Object.getOwnPropertyDescriptor(r.constructor.prototype,o);if(!r.hasOwnProperty(o)&&typeof x<"u"&&typeof x.get=="function"&&typeof x.set=="function"){var w=x.get,C=x.set;return Object.defineProperty(r,o,{configurable:!0,get:function(){return w.call(this)},set:function(Y){u=""+Y,C.call(this,Y)}}),Object.defineProperty(r,o,{enumerable:x.enumerable}),{getValue:function(){return u},setValue:function(Y){u=""+Y},stopTracking:function(){r._valueTracker=null,delete r[o]}}}}function hs(r){if(!r._valueTracker){var o=Ti(r)?"checked":"value";r._valueTracker=mc(r,o,""+r[o])}}function La(r){if(!r)return!1;var o=r._valueTracker;if(!o)return!0;var u=o.getValue(),x="";return r&&(x=Ti(r)?r.checked?"true":"false":r.value),r=x,r!==u?(o.setValue(r),!0):!1}function ul(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}var Sd=/[\n"\\]/g;function ka(r){return r.replace(Sd,function(o){return"\\"+o.charCodeAt(0).toString(16)+" "})}function sh(r,o,u,x,w,C,Y,xe){r.name="",Y!=null&&typeof Y!="function"&&typeof Y!="symbol"&&typeof Y!="boolean"?r.type=Y:r.removeAttribute("type"),o!=null?Y==="number"?(o===0&&r.value===""||r.value!=o)&&(r.value=""+ln(o)):r.value!==""+ln(o)&&(r.value=""+ln(o)):Y!=="submit"&&Y!=="reset"||r.removeAttribute("value"),o!=null?ki(r,Y,ln(o)):u!=null?ki(r,Y,ln(u)):x!=null&&r.removeAttribute("value"),w==null&&C!=null&&(r.defaultChecked=!!C),w!=null&&(r.checked=w&&typeof w!="function"&&typeof w!="symbol"),xe!=null&&typeof xe!="function"&&typeof xe!="symbol"&&typeof xe!="boolean"?r.name=""+ln(xe):r.removeAttribute("name")}function fc(r,o,u,x,w,C,Y,xe){if(C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"&&(r.type=C),o!=null||u!=null){if(!(C!=="submit"&&C!=="reset"||o!=null)){hs(r);return}u=u!=null?""+ln(u):"",o=o!=null?""+ln(o):u,xe||o===r.value||(r.value=o),r.defaultValue=o}x=x??w,x=typeof x!="function"&&typeof x!="symbol"&&!!x,r.checked=xe?r.checked:!!x,r.defaultChecked=!!x,Y!=null&&typeof Y!="function"&&typeof Y!="symbol"&&typeof Y!="boolean"&&(r.name=Y),hs(r)}function ki(r,o,u){o==="number"&&ul(r.ownerDocument)===r||r.defaultValue===""+u||(r.defaultValue=""+u)}function wa(r,o,u,x){if(r=r.options,o){o={};for(var w=0;w<u.length;w++)o["$"+u[w]]=!0;for(u=0;u<r.length;u++)w=o.hasOwnProperty("$"+r[u].value),r[u].selected!==w&&(r[u].selected=w),w&&x&&(r[u].defaultSelected=!0)}else{for(u=""+ln(u),o=null,w=0;w<r.length;w++){if(r[w].value===u){r[w].selected=!0,x&&(r[w].defaultSelected=!0);return}o!==null||r[w].disabled||(o=r[w])}o!==null&&(o.selected=!0)}}function Ji(r,o,u){if(o!=null&&(o=""+ln(o),o!==r.value&&(r.value=o),u==null)){r.defaultValue!==o&&(r.defaultValue=o);return}r.defaultValue=u!=null?""+ln(u):""}function hl(r,o,u,x){if(o==null){if(x!=null){if(u!=null)throw Error(n(92));if(he(x)){if(1<x.length)throw Error(n(93));x=x[0]}u=x}u==null&&(u=""),o=u}u=ln(o),r.defaultValue=u,x=r.textContent,x===u&&x!==""&&x!==null&&(r.value=x),hs(r)}function ii(r,o){if(o){var u=r.firstChild;if(u&&u===r.lastChild&&u.nodeType===3){u.nodeValue=o;return}}r.textContent=o}var ah=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function ml(r,o,u){var x=o.indexOf("--")===0;u==null||typeof u=="boolean"||u===""?x?r.setProperty(o,""):o==="float"?r.cssFloat="":r[o]="":x?r.setProperty(o,u):typeof u!="number"||u===0||ah.has(o)?o==="float"?r.cssFloat=u:r[o]=(""+u).trim():r[o]=u+"px"}function _d(r,o,u){if(o!=null&&typeof o!="object")throw Error(n(62));if(r=r.style,u!=null){for(var x in u)!u.hasOwnProperty(x)||o!=null&&o.hasOwnProperty(x)||(x.indexOf("--")===0?r.setProperty(x,""):x==="float"?r.cssFloat="":r[x]="");for(var w in o)x=o[w],o.hasOwnProperty(w)&&u[w]!==x&&ml(r,w,x)}else for(var C in o)o.hasOwnProperty(C)&&ml(r,C,o[C])}function xc(r){if(r.indexOf("-")===-1)return!1;switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Cd=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),nh=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function fl(r){return nh.test(""+r)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":r}function _r(){}var Td=null;function pc(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var xl=null,us=null;function $r(r){var o=st(r);if(o&&(r=o.stateNode)){var u=r[fe]||null;e:switch(r=o.stateNode,o.type){case"input":if(sh(r,u.value,u.defaultValue,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name),o=u.name,u.type==="radio"&&o!=null){for(u=r;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll('input[name="'+ka(""+o)+'"][type="radio"]'),o=0;o<u.length;o++){var x=u[o];if(x!==r&&x.form===r.form){var w=x[fe]||null;if(!w)throw Error(n(90));sh(x,w.value,w.defaultValue,w.defaultValue,w.checked,w.defaultChecked,w.type,w.name)}}for(o=0;o<u.length;o++)x=u[o],x.form===r.form&&La(x)}break e;case"textarea":Ji(r,u.value,u.defaultValue);break e;case"select":o=u.value,o!=null&&wa(r,!!u.multiple,o,!1)}}}var ra=!1;function rh(r,o,u){if(ra)return r(o,u);ra=!0;try{var x=r(o);return x}finally{if(ra=!1,(xl!==null||us!==null)&&(rx(),xl&&(o=xl,r=us,us=xl=null,$r(o),r)))for(o=0;o<r.length;o++)$r(r[o])}}function Eo(r,o){var u=r.stateNode;if(u===null)return null;var x=u[fe]||null;if(x===null)return null;u=x[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(x=!x.disabled)||(r=r.type,x=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!x;break e;default:r=!1}if(r)return null;if(u&&typeof u!="function")throw Error(n(231,o,typeof u));return u}var Wr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),gc=!1;if(Wr)try{var Gr={};Object.defineProperty(Gr,"passive",{get:function(){gc=!0}}),window.addEventListener("test",Gr,Gr),window.removeEventListener("test",Gr,Gr)}catch{gc=!1}var oi=null,Ao=null,Ja=null;function eo(){if(Ja)return Ja;var r,o=Ao,u=o.length,x,w="value"in oi?oi.value:oi.textContent,C=w.length;for(r=0;r<u&&o[r]===w[r];r++);var Y=u-r;for(x=1;x<=Y&&o[u-x]===w[C-x];x++);return Ja=w.slice(r,1<x?1-x:void 0)}function vc(r){var o=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&o===13&&(r=13)):r=o,r===10&&(r=13),32<=r||r===13?r:0}function yc(){return!0}function df(){return!1}function Gn(r){function o(u,x,w,C,Y){this._reactName=u,this._targetInst=w,this.type=x,this.nativeEvent=C,this.target=Y,this.currentTarget=null;for(var xe in r)r.hasOwnProperty(xe)&&(u=r[xe],this[xe]=u?u(C):C[xe]);return this.isDefaultPrevented=(C.defaultPrevented!=null?C.defaultPrevented:C.returnValue===!1)?yc:df,this.isPropagationStopped=df,this}return v(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=yc)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=yc)},persist:function(){},isPersistent:yc}),o}var Ei={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},kd=Gn(Ei),pl=v({},Ei,{view:0,detail:0}),zs=Gn(pl),ih,vr,Ai,jc=v({},pl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:hh,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==Ai&&(Ai&&r.type==="mousemove"?(ih=r.screenX-Ai.screenX,vr=r.screenY-Ai.screenY):vr=ih=0,Ai=r),ih)},movementY:function(r){return"movementY"in r?r.movementY:vr}}),uf=Gn(jc),oh=v({},jc,{dataTransfer:0}),lg=Gn(oh),hf=v({},pl,{relatedTarget:0}),lh=Gn(hf),cg=v({},Ei,{animationName:0,elapsedTime:0,pseudoElement:0}),ch=Gn(cg),dg=v({},Ei,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),li=Gn(dg),ug=v({},Ei,{data:0}),dh=Gn(ug),to={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},mf={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ff={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function uh(r){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(r):(r=ff[r])?!!o[r]:!1}function hh(){return uh}var xf=v({},pl,{key:function(r){if(r.key){var o=to[r.key]||r.key;if(o!=="Unidentified")return o}return r.type==="keypress"?(r=vc(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?mf[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:hh,charCode:function(r){return r.type==="keypress"?vc(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?vc(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),pf=Gn(xf),hg=v({},jc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),gf=Gn(hg),mh=v({},pl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:hh}),mg=Gn(mh),vf=v({},Ei,{propertyName:0,elapsedTime:0,pseudoElement:0}),yf=Gn(vf),Ed=v({},jc,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),Do=Gn(Ed),fg=v({},Ei,{newState:0,oldState:0}),Nc=Gn(fg),Cr=[9,13,27,32],Ad=Wr&&"CompositionEvent"in window,gl=null;Wr&&"documentMode"in document&&(gl=document.documentMode);var xg=Wr&&"TextEvent"in window&&!gl,Dd=Wr&&(!Ad||gl&&8<gl&&11>=gl),Pd=" ",jf=!1;function Nf(r,o){switch(r){case"keyup":return Cr.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function fh(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var vl=!1;function qr(r,o){switch(r){case"compositionend":return fh(o);case"keypress":return o.which!==32?null:(jf=!0,Pd);case"textInput":return r=o.data,r===Pd&&jf?null:r;default:return null}}function yl(r,o){if(vl)return r==="compositionend"||!Ad&&Nf(r,o)?(r=eo(),Ja=Ao=oi=null,vl=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return Dd&&o.locale!=="ko"?null:o.data;default:return null}}var pg={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ci(r){var o=r&&r.nodeName&&r.nodeName.toLowerCase();return o==="input"?!!pg[r.type]:o==="textarea"}function wf(r,o,u,x){xl?us?us.push(x):us=[x]:xl=x,o=hx(o,"onChange"),0<o.length&&(u=new kd("onChange","change",null,u,x),r.push({event:u,listeners:o}))}var di=null,wc=null;function bc(r){Mb(r,0)}function Sc(r){var o=Pe(r);if(La(o))return r}function _c(r,o){if(r==="change")return o}var bf=!1;if(Wr){var ui;if(Wr){var jl="oninput"in document;if(!jl){var Sf=document.createElement("div");Sf.setAttribute("oninput","return;"),jl=typeof Sf.oninput=="function"}ui=jl}else ui=!1;bf=ui&&(!document.documentMode||9<document.documentMode)}function Od(){di&&(di.detachEvent("onpropertychange",_f),wc=di=null)}function _f(r){if(r.propertyName==="value"&&Sc(wc)){var o=[];wf(o,wc,r,pc(r)),rh(bc,o)}}function Di(r,o,u){r==="focusin"?(Od(),di=o,wc=u,di.attachEvent("onpropertychange",_f)):r==="focusout"&&Od()}function gg(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return Sc(wc)}function Nl(r,o){if(r==="click")return Sc(o)}function vg(r,o){if(r==="input"||r==="change")return Sc(o)}function Pi(r,o){return r===o&&(r!==0||1/r===1/o)||r!==r&&o!==o}var Fn=typeof Object.is=="function"?Object.is:Pi;function wl(r,o){if(Fn(r,o))return!0;if(typeof r!="object"||r===null||typeof o!="object"||o===null)return!1;var u=Object.keys(r),x=Object.keys(o);if(u.length!==x.length)return!1;for(x=0;x<u.length;x++){var w=u[x];if(!Es.call(o,w)||!Fn(r[w],o[w]))return!1}return!0}function Md(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function Cc(r,o){var u=Md(r);r=0;for(var x;u;){if(u.nodeType===3){if(x=r+u.textContent.length,r<=o&&x>=o)return{node:u,offset:o-r};r=x}e:{for(;u;){if(u.nextSibling){u=u.nextSibling;break e}u=u.parentNode}u=void 0}u=Md(u)}}function Rd(r,o){return r&&o?r===o?!0:r&&r.nodeType===3?!1:o&&o.nodeType===3?Rd(r,o.parentNode):"contains"in r?r.contains(o):r.compareDocumentPosition?!!(r.compareDocumentPosition(o)&16):!1:!1}function Tc(r){r=r!=null&&r.ownerDocument!=null&&r.ownerDocument.defaultView!=null?r.ownerDocument.defaultView:window;for(var o=ul(r.document);o instanceof r.HTMLIFrameElement;){try{var u=typeof o.contentWindow.location.href=="string"}catch{u=!1}if(u)r=o.contentWindow;else break;o=ul(r.document)}return o}function so(r){var o=r&&r.nodeName&&r.nodeName.toLowerCase();return o&&(o==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||o==="textarea"||r.contentEditable==="true")}var Ld=Wr&&"documentMode"in document&&11>=document.documentMode,ao=null,Id=null,kc=null,bl=!1;function Cf(r,o,u){var x=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;bl||ao==null||ao!==ul(x)||(x=ao,"selectionStart"in x&&so(x)?x={start:x.selectionStart,end:x.selectionEnd}:(x=(x.ownerDocument&&x.ownerDocument.defaultView||window).getSelection(),x={anchorNode:x.anchorNode,anchorOffset:x.anchorOffset,focusNode:x.focusNode,focusOffset:x.focusOffset}),kc&&wl(kc,x)||(kc=x,x=hx(Id,"onSelect"),0<x.length&&(o=new kd("onSelect","select",null,o,u),r.push({event:o,listeners:x}),o.target=ao)))}function no(r,o){var u={};return u[r.toLowerCase()]=o.toLowerCase(),u["Webkit"+r]="webkit"+o,u["Moz"+r]="moz"+o,u}var Sl={animationend:no("Animation","AnimationEnd"),animationiteration:no("Animation","AnimationIteration"),animationstart:no("Animation","AnimationStart"),transitionrun:no("Transition","TransitionRun"),transitionstart:no("Transition","TransitionStart"),transitioncancel:no("Transition","TransitionCancel"),transitionend:no("Transition","TransitionEnd")},Fd={},Tf={};Wr&&(Tf=document.createElement("div").style,"AnimationEvent"in window||(delete Sl.animationend.animation,delete Sl.animationiteration.animation,delete Sl.animationstart.animation),"TransitionEvent"in window||delete Sl.transitionend.transition);function Bn(r){if(Fd[r])return Fd[r];if(!Sl[r])return r;var o=Sl[r],u;for(u in o)if(o.hasOwnProperty(u)&&u in Tf)return Fd[r]=o[u];return r}var Ec=Bn("animationend"),kf=Bn("animationiteration"),Ac=Bn("animationstart"),yg=Bn("transitionrun"),Ef=Bn("transitionstart"),jg=Bn("transitioncancel"),_l=Bn("transitionend"),Af=new Map,ro="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");ro.push("scrollEnd");function Tr(r,o){Af.set(r,o),ss(o,[r])}var Dc=typeof reportError=="function"?reportError:function(r){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var o=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof r=="object"&&r!==null&&typeof r.message=="string"?String(r.message):String(r),error:r});if(!window.dispatchEvent(o))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",r);return}console.error(r)},kr=[],ir=0,Bd=0;function Pc(){for(var r=ir,o=Bd=ir=0;o<r;){var u=kr[o];kr[o++]=null;var x=kr[o];kr[o++]=null;var w=kr[o];kr[o++]=null;var C=kr[o];if(kr[o++]=null,x!==null&&w!==null){var Y=x.pending;Y===null?w.next=w:(w.next=Y.next,Y.next=w),x.pending=w}C!==0&&Cl(u,w,C)}}function io(r,o,u,x){kr[ir++]=r,kr[ir++]=o,kr[ir++]=u,kr[ir++]=x,Bd|=x,r.lanes|=x,r=r.alternate,r!==null&&(r.lanes|=x)}function xh(r,o,u,x){return io(r,o,u,x),Oc(r)}function hi(r,o){return io(r,null,null,o),Oc(r)}function Cl(r,o,u){r.lanes|=u;var x=r.alternate;x!==null&&(x.lanes|=u);for(var w=!1,C=r.return;C!==null;)C.childLanes|=u,x=C.alternate,x!==null&&(x.childLanes|=u),C.tag===22&&(r=C.stateNode,r===null||r._visibility&1||(w=!0)),r=C,C=C.return;return r.tag===3?(C=r.stateNode,w&&o!==null&&(w=31-Ce(u),r=C.hiddenUpdates,x=r[w],x===null?r[w]=[o]:x.push(o),o.lane=u|536870912),C):null}function Oc(r){if(50<zh)throw zh=0,w0=null,Error(n(185));for(var o=r.return;o!==null;)r=o,o=r.return;return r.tag===3?r.stateNode:null}var Po={};function Ng(r,o,u,x){this.tag=r,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=x,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function or(r,o,u,x){return new Ng(r,o,u,x)}function zd(r){return r=r.prototype,!(!r||!r.isReactComponent)}function mi(r,o){var u=r.alternate;return u===null?(u=or(r.tag,o,r.key,r.mode),u.elementType=r.elementType,u.type=r.type,u.stateNode=r.stateNode,u.alternate=r,r.alternate=u):(u.pendingProps=o,u.type=r.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=r.flags&65011712,u.childLanes=r.childLanes,u.lanes=r.lanes,u.child=r.child,u.memoizedProps=r.memoizedProps,u.memoizedState=r.memoizedState,u.updateQueue=r.updateQueue,o=r.dependencies,u.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},u.sibling=r.sibling,u.index=r.index,u.ref=r.ref,u.refCleanup=r.refCleanup,u}function ph(r,o){r.flags&=65011714;var u=r.alternate;return u===null?(r.childLanes=0,r.lanes=o,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=u.childLanes,r.lanes=u.lanes,r.child=u.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=u.memoizedProps,r.memoizedState=u.memoizedState,r.updateQueue=u.updateQueue,r.type=u.type,o=u.dependencies,r.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),r}function Mc(r,o,u,x,w,C){var Y=0;if(x=r,typeof r=="function")zd(r)&&(Y=1);else if(typeof r=="string")Y=R3(r,u,F.current)?26:r==="html"||r==="head"||r==="body"?27:5;else e:switch(r){case P:return r=or(31,u,o,w),r.elementType=P,r.lanes=C,r;case b:return Oo(u.children,w,C,o);case T:Y=8,w|=24;break;case E:return r=or(12,u,o,w|2),r.elementType=E,r.lanes=C,r;case q:return r=or(13,u,o,w),r.elementType=q,r.lanes=C,r;case U:return r=or(19,u,o,w),r.elementType=U,r.lanes=C,r;default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case O:Y=10;break e;case A:Y=9;break e;case Q:Y=11;break e;case D:Y=14;break e;case M:Y=16,x=null;break e}Y=29,u=Error(n(130,r===null?"null":typeof r,"")),x=null}return o=or(Y,u,o,w),o.elementType=r,o.type=x,o.lanes=C,o}function Oo(r,o,u,x){return r=or(7,r,x,o),r.lanes=u,r}function Ud(r,o,u){return r=or(6,r,null,o),r.lanes=u,r}function gh(r){var o=or(18,null,null,0);return o.stateNode=r,o}function vh(r,o,u){return o=or(4,r.children!==null?r.children:[],r.key,o),o.lanes=u,o.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},o}var l=new WeakMap;function m(r,o){if(typeof r=="object"&&r!==null){var u=l.get(r);return u!==void 0?u:(o={value:r,source:o,stack:ys(o)},l.set(r,o),o)}return{value:r,source:o,stack:ys(o)}}var j=[],k=0,H=null,le=0,Ee=[],Be=0,Ke=null,mt=1,Et="";function Wt(r,o){j[k++]=le,j[k++]=H,H=r,le=o}function As(r,o,u){Ee[Be++]=mt,Ee[Be++]=Et,Ee[Be++]=Ke,Ke=r;var x=mt;r=Et;var w=32-Ce(x)-1;x&=~(1<<w),u+=1;var C=32-Ce(o)+w;if(30<C){var Y=w-w%5;C=(x&(1<<Y)-1).toString(32),x>>=Y,w-=Y,mt=1<<32-Ce(o)+w|u<<w|x,Et=C+r}else mt=1<<C|u<<w|x,Et=r}function Tn(r){r.return!==null&&(Wt(r,1),As(r,1,0))}function en(r){for(;r===H;)H=j[--k],j[k]=null,le=j[--k],j[k]=null;for(;r===Ke;)Ke=Ee[--Be],Ee[Be]=null,Et=Ee[--Be],Ee[Be]=null,mt=Ee[--Be],Ee[Be]=null}function yr(r,o){Ee[Be++]=mt,Ee[Be++]=Et,Ee[Be++]=Ke,mt=o.id,Et=o.overflow,Ke=r}var Ys=null,Zs=null,Ls=!1,oo=null,Er=!1,Vd=Error(n(519));function lo(r){var o=Error(n(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Rc(m(o,r)),Vd}function yh(r){var o=r.stateNode,u=r.type,x=r.memoizedProps;switch(o[B]=r,o[fe]=x,u){case"dialog":Fs("cancel",o),Fs("close",o);break;case"iframe":case"object":case"embed":Fs("load",o);break;case"video":case"audio":for(u=0;u<Vh.length;u++)Fs(Vh[u],o);break;case"source":Fs("error",o);break;case"img":case"image":case"link":Fs("error",o),Fs("load",o);break;case"details":Fs("toggle",o);break;case"input":Fs("invalid",o),fc(o,x.value,x.defaultValue,x.checked,x.defaultChecked,x.type,x.name,!0);break;case"select":Fs("invalid",o);break;case"textarea":Fs("invalid",o),hl(o,x.value,x.defaultValue,x.children)}u=x.children,typeof u!="string"&&typeof u!="number"&&typeof u!="bigint"||o.textContent===""+u||x.suppressHydrationWarning===!0||Fb(o.textContent,u)?(x.popover!=null&&(Fs("beforetoggle",o),Fs("toggle",o)),x.onScroll!=null&&Fs("scroll",o),x.onScrollEnd!=null&&Fs("scrollend",o),x.onClick!=null&&(o.onclick=_r),o=!0):o=!1,o||lo(r,!0)}function $a(r){for(Ys=r.return;Ys;)switch(Ys.tag){case 5:case 31:case 13:Er=!1;return;case 27:case 3:Er=!0;return;default:Ys=Ys.return}}function Oi(r){if(r!==Ys)return!1;if(!Ls)return $a(r),Ls=!0,!1;var o=r.tag,u;if((u=o!==3&&o!==27)&&((u=o===5)&&(u=r.type,u=!(u!=="form"&&u!=="button")||I0(r.type,r.memoizedProps)),u=!u),u&&Zs&&lo(r),$a(r),o===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(n(317));Zs=qb(r)}else if(o===31){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(n(317));Zs=qb(r)}else o===27?(o=Zs,zl(r.type)?(r=V0,V0=null,Zs=r):Zs=o):Zs=Ys?xi(r.stateNode.nextSibling):null;return!0}function Mo(){Zs=Ys=null,Ls=!1}function jh(){var r=oo;return r!==null&&(Or===null?Or=r:Or.push.apply(Or,r),oo=null),r}function Rc(r){oo===null?oo=[r]:oo.push(r)}var Lc=te(null),co=null,Mi=null;function Tl(r,o,u){ce(Lc,o._currentValue),o._currentValue=u}function Ro(r){r._currentValue=Lc.current,X(Lc)}function wg(r,o,u){for(;r!==null;){var x=r.alternate;if((r.childLanes&o)!==o?(r.childLanes|=o,x!==null&&(x.childLanes|=o)):x!==null&&(x.childLanes&o)!==o&&(x.childLanes|=o),r===u)break;r=r.return}}function bg(r,o,u,x){var w=r.child;for(w!==null&&(w.return=r);w!==null;){var C=w.dependencies;if(C!==null){var Y=w.child;C=C.firstContext;e:for(;C!==null;){var xe=C;C=w;for(var Ae=0;Ae<o.length;Ae++)if(xe.context===o[Ae]){C.lanes|=u,xe=C.alternate,xe!==null&&(xe.lanes|=u),wg(C.return,u,r),x||(Y=null);break e}C=xe.next}}else if(w.tag===18){if(Y=w.return,Y===null)throw Error(n(341));Y.lanes|=u,C=Y.alternate,C!==null&&(C.lanes|=u),wg(Y,u,r),Y=null}else Y=w.child;if(Y!==null)Y.return=w;else for(Y=w;Y!==null;){if(Y===r){Y=null;break}if(w=Y.sibling,w!==null){w.return=Y.return,Y=w;break}Y=Y.return}w=Y}}function Hd(r,o,u,x){r=null;for(var w=o,C=!1;w!==null;){if(!C){if((w.flags&524288)!==0)C=!0;else if((w.flags&262144)!==0)break}if(w.tag===10){var Y=w.alternate;if(Y===null)throw Error(n(387));if(Y=Y.memoizedProps,Y!==null){var xe=w.type;Fn(w.pendingProps.value,Y.value)||(r!==null?r.push(xe):r=[xe])}}else if(w===me.current){if(Y=w.alternate,Y===null)throw Error(n(387));Y.memoizedState.memoizedState!==w.memoizedState.memoizedState&&(r!==null?r.push(qh):r=[qh])}w=w.return}r!==null&&bg(o,r,u,x),o.flags|=262144}function Df(r){for(r=r.firstContext;r!==null;){if(!Fn(r.context._currentValue,r.memoizedValue))return!0;r=r.next}return!1}function Ic(r){co=r,Mi=null,r=r.dependencies,r!==null&&(r.firstContext=null)}function qn(r){return bN(co,r)}function Pf(r,o){return co===null&&Ic(r),bN(r,o)}function bN(r,o){var u=o._currentValue;if(o={context:o,memoizedValue:u,next:null},Mi===null){if(r===null)throw Error(n(308));Mi=o,r.dependencies={lanes:0,firstContext:o},r.flags|=524288}else Mi=Mi.next=o;return u}var DA=typeof AbortController<"u"?AbortController:function(){var r=[],o=this.signal={aborted:!1,addEventListener:function(u,x){r.push(x)}};this.abort=function(){o.aborted=!0,r.forEach(function(u){return u()})}},PA=t.unstable_scheduleCallback,OA=t.unstable_NormalPriority,pn={$$typeof:O,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Sg(){return{controller:new DA,data:new Map,refCount:0}}function Nh(r){r.refCount--,r.refCount===0&&PA(OA,function(){r.controller.abort()})}var wh=null,_g=0,$d=0,Wd=null;function MA(r,o){if(wh===null){var u=wh=[];_g=0,$d=k0(),Wd={status:"pending",value:void 0,then:function(x){u.push(x)}}}return _g++,o.then(SN,SN),o}function SN(){if(--_g===0&&wh!==null){Wd!==null&&(Wd.status="fulfilled");var r=wh;wh=null,$d=0,Wd=null;for(var o=0;o<r.length;o++)(0,r[o])()}}function RA(r,o){var u=[],x={status:"pending",value:null,reason:null,then:function(w){u.push(w)}};return r.then(function(){x.status="fulfilled",x.value=o;for(var w=0;w<u.length;w++)(0,u[w])(o)},function(w){for(x.status="rejected",x.reason=w,w=0;w<u.length;w++)(0,u[w])(void 0)}),x}var _N=V.S;V.S=function(r,o){lb=$t(),typeof o=="object"&&o!==null&&typeof o.then=="function"&&MA(r,o),_N!==null&&_N(r,o)};var Fc=te(null);function Cg(){var r=Fc.current;return r!==null?r:ba.pooledCache}function Of(r,o){o===null?ce(Fc,Fc.current):ce(Fc,o.pool)}function CN(){var r=Cg();return r===null?null:{parent:pn._currentValue,pool:r}}var Gd=Error(n(460)),Tg=Error(n(474)),Mf=Error(n(542)),Rf={then:function(){}};function TN(r){return r=r.status,r==="fulfilled"||r==="rejected"}function kN(r,o,u){switch(u=r[u],u===void 0?r.push(o):u!==o&&(o.then(_r,_r),o=u),o.status){case"fulfilled":return o.value;case"rejected":throw r=o.reason,AN(r),r;default:if(typeof o.status=="string")o.then(_r,_r);else{if(r=ba,r!==null&&100<r.shellSuspendCounter)throw Error(n(482));r=o,r.status="pending",r.then(function(x){if(o.status==="pending"){var w=o;w.status="fulfilled",w.value=x}},function(x){if(o.status==="pending"){var w=o;w.status="rejected",w.reason=x}})}switch(o.status){case"fulfilled":return o.value;case"rejected":throw r=o.reason,AN(r),r}throw zc=o,Gd}}function Bc(r){try{var o=r._init;return o(r._payload)}catch(u){throw u!==null&&typeof u=="object"&&typeof u.then=="function"?(zc=u,Gd):u}}var zc=null;function EN(){if(zc===null)throw Error(n(459));var r=zc;return zc=null,r}function AN(r){if(r===Gd||r===Mf)throw Error(n(483))}var qd=null,bh=0;function Lf(r){var o=bh;return bh+=1,qd===null&&(qd=[]),kN(qd,r,o)}function Sh(r,o){o=o.props.ref,r.ref=o!==void 0?o:null}function If(r,o){throw o.$$typeof===y?Error(n(525)):(r=Object.prototype.toString.call(o),Error(n(31,r==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":r)))}function DN(r){function o(Fe,Oe){if(r){var Ge=Fe.deletions;Ge===null?(Fe.deletions=[Oe],Fe.flags|=16):Ge.push(Oe)}}function u(Fe,Oe){if(!r)return null;for(;Oe!==null;)o(Fe,Oe),Oe=Oe.sibling;return null}function x(Fe){for(var Oe=new Map;Fe!==null;)Fe.key!==null?Oe.set(Fe.key,Fe):Oe.set(Fe.index,Fe),Fe=Fe.sibling;return Oe}function w(Fe,Oe){return Fe=mi(Fe,Oe),Fe.index=0,Fe.sibling=null,Fe}function C(Fe,Oe,Ge){return Fe.index=Ge,r?(Ge=Fe.alternate,Ge!==null?(Ge=Ge.index,Ge<Oe?(Fe.flags|=67108866,Oe):Ge):(Fe.flags|=67108866,Oe)):(Fe.flags|=1048576,Oe)}function Y(Fe){return r&&Fe.alternate===null&&(Fe.flags|=67108866),Fe}function xe(Fe,Oe,Ge,ct){return Oe===null||Oe.tag!==6?(Oe=Ud(Ge,Fe.mode,ct),Oe.return=Fe,Oe):(Oe=w(Oe,Ge),Oe.return=Fe,Oe)}function Ae(Fe,Oe,Ge,ct){var ns=Ge.type;return ns===b?it(Fe,Oe,Ge.props.children,ct,Ge.key):Oe!==null&&(Oe.elementType===ns||typeof ns=="object"&&ns!==null&&ns.$$typeof===M&&Bc(ns)===Oe.type)?(Oe=w(Oe,Ge.props),Sh(Oe,Ge),Oe.return=Fe,Oe):(Oe=Mc(Ge.type,Ge.key,Ge.props,null,Fe.mode,ct),Sh(Oe,Ge),Oe.return=Fe,Oe)}function qe(Fe,Oe,Ge,ct){return Oe===null||Oe.tag!==4||Oe.stateNode.containerInfo!==Ge.containerInfo||Oe.stateNode.implementation!==Ge.implementation?(Oe=vh(Ge,Fe.mode,ct),Oe.return=Fe,Oe):(Oe=w(Oe,Ge.children||[]),Oe.return=Fe,Oe)}function it(Fe,Oe,Ge,ct,ns){return Oe===null||Oe.tag!==7?(Oe=Oo(Ge,Fe.mode,ct,ns),Oe.return=Fe,Oe):(Oe=w(Oe,Ge),Oe.return=Fe,Oe)}function ft(Fe,Oe,Ge){if(typeof Oe=="string"&&Oe!==""||typeof Oe=="number"||typeof Oe=="bigint")return Oe=Ud(""+Oe,Fe.mode,Ge),Oe.return=Fe,Oe;if(typeof Oe=="object"&&Oe!==null){switch(Oe.$$typeof){case _:return Ge=Mc(Oe.type,Oe.key,Oe.props,null,Fe.mode,Ge),Sh(Ge,Oe),Ge.return=Fe,Ge;case S:return Oe=vh(Oe,Fe.mode,Ge),Oe.return=Fe,Oe;case M:return Oe=Bc(Oe),ft(Fe,Oe,Ge)}if(he(Oe)||z(Oe))return Oe=Oo(Oe,Fe.mode,Ge,null),Oe.return=Fe,Oe;if(typeof Oe.then=="function")return ft(Fe,Lf(Oe),Ge);if(Oe.$$typeof===O)return ft(Fe,Pf(Fe,Oe),Ge);If(Fe,Oe)}return null}function Ye(Fe,Oe,Ge,ct){var ns=Oe!==null?Oe.key:null;if(typeof Ge=="string"&&Ge!==""||typeof Ge=="number"||typeof Ge=="bigint")return ns!==null?null:xe(Fe,Oe,""+Ge,ct);if(typeof Ge=="object"&&Ge!==null){switch(Ge.$$typeof){case _:return Ge.key===ns?Ae(Fe,Oe,Ge,ct):null;case S:return Ge.key===ns?qe(Fe,Oe,Ge,ct):null;case M:return Ge=Bc(Ge),Ye(Fe,Oe,Ge,ct)}if(he(Ge)||z(Ge))return ns!==null?null:it(Fe,Oe,Ge,ct,null);if(typeof Ge.then=="function")return Ye(Fe,Oe,Lf(Ge),ct);if(Ge.$$typeof===O)return Ye(Fe,Oe,Pf(Fe,Ge),ct);If(Fe,Ge)}return null}function at(Fe,Oe,Ge,ct,ns){if(typeof ct=="string"&&ct!==""||typeof ct=="number"||typeof ct=="bigint")return Fe=Fe.get(Ge)||null,xe(Oe,Fe,""+ct,ns);if(typeof ct=="object"&&ct!==null){switch(ct.$$typeof){case _:return Fe=Fe.get(ct.key===null?Ge:ct.key)||null,Ae(Oe,Fe,ct,ns);case S:return Fe=Fe.get(ct.key===null?Ge:ct.key)||null,qe(Oe,Fe,ct,ns);case M:return ct=Bc(ct),at(Fe,Oe,Ge,ct,ns)}if(he(ct)||z(ct))return Fe=Fe.get(Ge)||null,it(Oe,Fe,ct,ns,null);if(typeof ct.then=="function")return at(Fe,Oe,Ge,Lf(ct),ns);if(ct.$$typeof===O)return at(Fe,Oe,Ge,Pf(Oe,ct),ns);If(Oe,ct)}return null}function zt(Fe,Oe,Ge,ct){for(var ns=null,Xs=null,Ht=Oe,Ds=Oe=0,Vs=null;Ht!==null&&Ds<Ge.length;Ds++){Ht.index>Ds?(Vs=Ht,Ht=null):Vs=Ht.sibling;var Qs=Ye(Fe,Ht,Ge[Ds],ct);if(Qs===null){Ht===null&&(Ht=Vs);break}r&&Ht&&Qs.alternate===null&&o(Fe,Ht),Oe=C(Qs,Oe,Ds),Xs===null?ns=Qs:Xs.sibling=Qs,Xs=Qs,Ht=Vs}if(Ds===Ge.length)return u(Fe,Ht),Ls&&Wt(Fe,Ds),ns;if(Ht===null){for(;Ds<Ge.length;Ds++)Ht=ft(Fe,Ge[Ds],ct),Ht!==null&&(Oe=C(Ht,Oe,Ds),Xs===null?ns=Ht:Xs.sibling=Ht,Xs=Ht);return Ls&&Wt(Fe,Ds),ns}for(Ht=x(Ht);Ds<Ge.length;Ds++)Vs=at(Ht,Fe,Ds,Ge[Ds],ct),Vs!==null&&(r&&Vs.alternate!==null&&Ht.delete(Vs.key===null?Ds:Vs.key),Oe=C(Vs,Oe,Ds),Xs===null?ns=Vs:Xs.sibling=Vs,Xs=Vs);return r&&Ht.forEach(function(Wl){return o(Fe,Wl)}),Ls&&Wt(Fe,Ds),ns}function os(Fe,Oe,Ge,ct){if(Ge==null)throw Error(n(151));for(var ns=null,Xs=null,Ht=Oe,Ds=Oe=0,Vs=null,Qs=Ge.next();Ht!==null&&!Qs.done;Ds++,Qs=Ge.next()){Ht.index>Ds?(Vs=Ht,Ht=null):Vs=Ht.sibling;var Wl=Ye(Fe,Ht,Qs.value,ct);if(Wl===null){Ht===null&&(Ht=Vs);break}r&&Ht&&Wl.alternate===null&&o(Fe,Ht),Oe=C(Wl,Oe,Ds),Xs===null?ns=Wl:Xs.sibling=Wl,Xs=Wl,Ht=Vs}if(Qs.done)return u(Fe,Ht),Ls&&Wt(Fe,Ds),ns;if(Ht===null){for(;!Qs.done;Ds++,Qs=Ge.next())Qs=ft(Fe,Qs.value,ct),Qs!==null&&(Oe=C(Qs,Oe,Ds),Xs===null?ns=Qs:Xs.sibling=Qs,Xs=Qs);return Ls&&Wt(Fe,Ds),ns}for(Ht=x(Ht);!Qs.done;Ds++,Qs=Ge.next())Qs=at(Ht,Fe,Ds,Qs.value,ct),Qs!==null&&(r&&Qs.alternate!==null&&Ht.delete(Qs.key===null?Ds:Qs.key),Oe=C(Qs,Oe,Ds),Xs===null?ns=Qs:Xs.sibling=Qs,Xs=Qs);return r&&Ht.forEach(function(G3){return o(Fe,G3)}),Ls&&Wt(Fe,Ds),ns}function va(Fe,Oe,Ge,ct){if(typeof Ge=="object"&&Ge!==null&&Ge.type===b&&Ge.key===null&&(Ge=Ge.props.children),typeof Ge=="object"&&Ge!==null){switch(Ge.$$typeof){case _:e:{for(var ns=Ge.key;Oe!==null;){if(Oe.key===ns){if(ns=Ge.type,ns===b){if(Oe.tag===7){u(Fe,Oe.sibling),ct=w(Oe,Ge.props.children),ct.return=Fe,Fe=ct;break e}}else if(Oe.elementType===ns||typeof ns=="object"&&ns!==null&&ns.$$typeof===M&&Bc(ns)===Oe.type){u(Fe,Oe.sibling),ct=w(Oe,Ge.props),Sh(ct,Ge),ct.return=Fe,Fe=ct;break e}u(Fe,Oe);break}else o(Fe,Oe);Oe=Oe.sibling}Ge.type===b?(ct=Oo(Ge.props.children,Fe.mode,ct,Ge.key),ct.return=Fe,Fe=ct):(ct=Mc(Ge.type,Ge.key,Ge.props,null,Fe.mode,ct),Sh(ct,Ge),ct.return=Fe,Fe=ct)}return Y(Fe);case S:e:{for(ns=Ge.key;Oe!==null;){if(Oe.key===ns)if(Oe.tag===4&&Oe.stateNode.containerInfo===Ge.containerInfo&&Oe.stateNode.implementation===Ge.implementation){u(Fe,Oe.sibling),ct=w(Oe,Ge.children||[]),ct.return=Fe,Fe=ct;break e}else{u(Fe,Oe);break}else o(Fe,Oe);Oe=Oe.sibling}ct=vh(Ge,Fe.mode,ct),ct.return=Fe,Fe=ct}return Y(Fe);case M:return Ge=Bc(Ge),va(Fe,Oe,Ge,ct)}if(he(Ge))return zt(Fe,Oe,Ge,ct);if(z(Ge)){if(ns=z(Ge),typeof ns!="function")throw Error(n(150));return Ge=ns.call(Ge),os(Fe,Oe,Ge,ct)}if(typeof Ge.then=="function")return va(Fe,Oe,Lf(Ge),ct);if(Ge.$$typeof===O)return va(Fe,Oe,Pf(Fe,Ge),ct);If(Fe,Ge)}return typeof Ge=="string"&&Ge!==""||typeof Ge=="number"||typeof Ge=="bigint"?(Ge=""+Ge,Oe!==null&&Oe.tag===6?(u(Fe,Oe.sibling),ct=w(Oe,Ge),ct.return=Fe,Fe=ct):(u(Fe,Oe),ct=Ud(Ge,Fe.mode,ct),ct.return=Fe,Fe=ct),Y(Fe)):u(Fe,Oe)}return function(Fe,Oe,Ge,ct){try{bh=0;var ns=va(Fe,Oe,Ge,ct);return qd=null,ns}catch(Ht){if(Ht===Gd||Ht===Mf)throw Ht;var Xs=or(29,Ht,null,Fe.mode);return Xs.lanes=ct,Xs.return=Fe,Xs}finally{}}}var Uc=DN(!0),PN=DN(!1),kl=!1;function kg(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Eg(r,o){r=r.updateQueue,o.updateQueue===r&&(o.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,callbacks:null})}function El(r){return{lane:r,tag:0,payload:null,callback:null,next:null}}function Al(r,o,u){var x=r.updateQueue;if(x===null)return null;if(x=x.shared,(ta&2)!==0){var w=x.pending;return w===null?o.next=o:(o.next=w.next,w.next=o),x.pending=o,o=Oc(r),Cl(r,null,u),o}return io(r,x,o,u),Oc(r)}function _h(r,o,u){if(o=o.updateQueue,o!==null&&(o=o.shared,(u&4194048)!==0)){var x=o.lanes;x&=r.pendingLanes,u|=x,o.lanes=u,bt(r,u)}}function Ag(r,o){var u=r.updateQueue,x=r.alternate;if(x!==null&&(x=x.updateQueue,u===x)){var w=null,C=null;if(u=u.firstBaseUpdate,u!==null){do{var Y={lane:u.lane,tag:u.tag,payload:u.payload,callback:null,next:null};C===null?w=C=Y:C=C.next=Y,u=u.next}while(u!==null);C===null?w=C=o:C=C.next=o}else w=C=o;u={baseState:x.baseState,firstBaseUpdate:w,lastBaseUpdate:C,shared:x.shared,callbacks:x.callbacks},r.updateQueue=u;return}r=u.lastBaseUpdate,r===null?u.firstBaseUpdate=o:r.next=o,u.lastBaseUpdate=o}var Dg=!1;function Ch(){if(Dg){var r=Wd;if(r!==null)throw r}}function Th(r,o,u,x){Dg=!1;var w=r.updateQueue;kl=!1;var C=w.firstBaseUpdate,Y=w.lastBaseUpdate,xe=w.shared.pending;if(xe!==null){w.shared.pending=null;var Ae=xe,qe=Ae.next;Ae.next=null,Y===null?C=qe:Y.next=qe,Y=Ae;var it=r.alternate;it!==null&&(it=it.updateQueue,xe=it.lastBaseUpdate,xe!==Y&&(xe===null?it.firstBaseUpdate=qe:xe.next=qe,it.lastBaseUpdate=Ae))}if(C!==null){var ft=w.baseState;Y=0,it=qe=Ae=null,xe=C;do{var Ye=xe.lane&-536870913,at=Ye!==xe.lane;if(at?(Us&Ye)===Ye:(x&Ye)===Ye){Ye!==0&&Ye===$d&&(Dg=!0),it!==null&&(it=it.next={lane:0,tag:xe.tag,payload:xe.payload,callback:null,next:null});e:{var zt=r,os=xe;Ye=o;var va=u;switch(os.tag){case 1:if(zt=os.payload,typeof zt=="function"){ft=zt.call(va,ft,Ye);break e}ft=zt;break e;case 3:zt.flags=zt.flags&-65537|128;case 0:if(zt=os.payload,Ye=typeof zt=="function"?zt.call(va,ft,Ye):zt,Ye==null)break e;ft=v({},ft,Ye);break e;case 2:kl=!0}}Ye=xe.callback,Ye!==null&&(r.flags|=64,at&&(r.flags|=8192),at=w.callbacks,at===null?w.callbacks=[Ye]:at.push(Ye))}else at={lane:Ye,tag:xe.tag,payload:xe.payload,callback:xe.callback,next:null},it===null?(qe=it=at,Ae=ft):it=it.next=at,Y|=Ye;if(xe=xe.next,xe===null){if(xe=w.shared.pending,xe===null)break;at=xe,xe=at.next,at.next=null,w.lastBaseUpdate=at,w.shared.pending=null}}while(!0);it===null&&(Ae=ft),w.baseState=Ae,w.firstBaseUpdate=qe,w.lastBaseUpdate=it,C===null&&(w.shared.lanes=0),Rl|=Y,r.lanes=Y,r.memoizedState=ft}}function ON(r,o){if(typeof r!="function")throw Error(n(191,r));r.call(o)}function MN(r,o){var u=r.callbacks;if(u!==null)for(r.callbacks=null,r=0;r<u.length;r++)ON(u[r],o)}var Kd=te(null),Ff=te(0);function RN(r,o){r=$o,ce(Ff,r),ce(Kd,o),$o=r|o.baseLanes}function Pg(){ce(Ff,$o),ce(Kd,Kd.current)}function Og(){$o=Ff.current,X(Kd),X(Ff)}var Kr=te(null),fi=null;function Dl(r){var o=r.alternate;ce(cn,cn.current&1),ce(Kr,r),fi===null&&(o===null||Kd.current!==null||o.memoizedState!==null)&&(fi=r)}function Mg(r){ce(cn,cn.current),ce(Kr,r),fi===null&&(fi=r)}function LN(r){r.tag===22?(ce(cn,cn.current),ce(Kr,r),fi===null&&(fi=r)):Pl()}function Pl(){ce(cn,cn.current),ce(Kr,Kr.current)}function Yr(r){X(Kr),fi===r&&(fi=null),X(cn)}var cn=te(0);function Bf(r){for(var o=r;o!==null;){if(o.tag===13){var u=o.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||z0(u)||U0(u)))return o}else if(o.tag===19&&(o.memoizedProps.revealOrder==="forwards"||o.memoizedProps.revealOrder==="backwards"||o.memoizedProps.revealOrder==="unstable_legacy-backwards"||o.memoizedProps.revealOrder==="together")){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===r)break;for(;o.sibling===null;){if(o.return===null||o.return===r)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var Lo=0,Ss=null,pa=null,gn=null,zf=!1,Yd=!1,Vc=!1,Uf=0,kh=0,Zd=null,LA=0;function tn(){throw Error(n(321))}function Rg(r,o){if(o===null)return!1;for(var u=0;u<o.length&&u<r.length;u++)if(!Fn(r[u],o[u]))return!1;return!0}function Lg(r,o,u,x,w,C){return Lo=C,Ss=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,V.H=r===null||r.memoizedState===null?yw:Xg,Vc=!1,C=u(x,w),Vc=!1,Yd&&(C=FN(o,u,x,w)),IN(r),C}function IN(r){V.H=Dh;var o=pa!==null&&pa.next!==null;if(Lo=0,gn=pa=Ss=null,zf=!1,kh=0,Zd=null,o)throw Error(n(300));r===null||vn||(r=r.dependencies,r!==null&&Df(r)&&(vn=!0))}function FN(r,o,u,x){Ss=r;var w=0;do{if(Yd&&(Zd=null),kh=0,Yd=!1,25<=w)throw Error(n(301));if(w+=1,gn=pa=null,r.updateQueue!=null){var C=r.updateQueue;C.lastEffect=null,C.events=null,C.stores=null,C.memoCache!=null&&(C.memoCache.index=0)}V.H=jw,C=o(u,x)}while(Yd);return C}function IA(){var r=V.H,o=r.useState()[0];return o=typeof o.then=="function"?Eh(o):o,r=r.useState()[0],(pa!==null?pa.memoizedState:null)!==r&&(Ss.flags|=1024),o}function Ig(){var r=Uf!==0;return Uf=0,r}function Fg(r,o,u){o.updateQueue=r.updateQueue,o.flags&=-2053,r.lanes&=~u}function Bg(r){if(zf){for(r=r.memoizedState;r!==null;){var o=r.queue;o!==null&&(o.pending=null),r=r.next}zf=!1}Lo=0,gn=pa=Ss=null,Yd=!1,kh=Uf=0,Zd=null}function jr(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return gn===null?Ss.memoizedState=gn=r:gn=gn.next=r,gn}function dn(){if(pa===null){var r=Ss.alternate;r=r!==null?r.memoizedState:null}else r=pa.next;var o=gn===null?Ss.memoizedState:gn.next;if(o!==null)gn=o,pa=r;else{if(r===null)throw Ss.alternate===null?Error(n(467)):Error(n(310));pa=r,r={memoizedState:pa.memoizedState,baseState:pa.baseState,baseQueue:pa.baseQueue,queue:pa.queue,next:null},gn===null?Ss.memoizedState=gn=r:gn=gn.next=r}return gn}function Vf(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Eh(r){var o=kh;return kh+=1,Zd===null&&(Zd=[]),r=kN(Zd,r,o),o=Ss,(gn===null?o.memoizedState:gn.next)===null&&(o=o.alternate,V.H=o===null||o.memoizedState===null?yw:Xg),r}function Hf(r){if(r!==null&&typeof r=="object"){if(typeof r.then=="function")return Eh(r);if(r.$$typeof===O)return qn(r)}throw Error(n(438,String(r)))}function zg(r){var o=null,u=Ss.updateQueue;if(u!==null&&(o=u.memoCache),o==null){var x=Ss.alternate;x!==null&&(x=x.updateQueue,x!==null&&(x=x.memoCache,x!=null&&(o={data:x.data.map(function(w){return w.slice()}),index:0})))}if(o==null&&(o={data:[],index:0}),u===null&&(u=Vf(),Ss.updateQueue=u),u.memoCache=o,u=o.data[o.index],u===void 0)for(u=o.data[o.index]=Array(r),x=0;x<r;x++)u[x]=G;return o.index++,u}function Io(r,o){return typeof o=="function"?o(r):o}function $f(r){var o=dn();return Ug(o,pa,r)}function Ug(r,o,u){var x=r.queue;if(x===null)throw Error(n(311));x.lastRenderedReducer=u;var w=r.baseQueue,C=x.pending;if(C!==null){if(w!==null){var Y=w.next;w.next=C.next,C.next=Y}o.baseQueue=w=C,x.pending=null}if(C=r.baseState,w===null)r.memoizedState=C;else{o=w.next;var xe=Y=null,Ae=null,qe=o,it=!1;do{var ft=qe.lane&-536870913;if(ft!==qe.lane?(Us&ft)===ft:(Lo&ft)===ft){var Ye=qe.revertLane;if(Ye===0)Ae!==null&&(Ae=Ae.next={lane:0,revertLane:0,gesture:null,action:qe.action,hasEagerState:qe.hasEagerState,eagerState:qe.eagerState,next:null}),ft===$d&&(it=!0);else if((Lo&Ye)===Ye){qe=qe.next,Ye===$d&&(it=!0);continue}else ft={lane:0,revertLane:qe.revertLane,gesture:null,action:qe.action,hasEagerState:qe.hasEagerState,eagerState:qe.eagerState,next:null},Ae===null?(xe=Ae=ft,Y=C):Ae=Ae.next=ft,Ss.lanes|=Ye,Rl|=Ye;ft=qe.action,Vc&&u(C,ft),C=qe.hasEagerState?qe.eagerState:u(C,ft)}else Ye={lane:ft,revertLane:qe.revertLane,gesture:qe.gesture,action:qe.action,hasEagerState:qe.hasEagerState,eagerState:qe.eagerState,next:null},Ae===null?(xe=Ae=Ye,Y=C):Ae=Ae.next=Ye,Ss.lanes|=ft,Rl|=ft;qe=qe.next}while(qe!==null&&qe!==o);if(Ae===null?Y=C:Ae.next=xe,!Fn(C,r.memoizedState)&&(vn=!0,it&&(u=Wd,u!==null)))throw u;r.memoizedState=C,r.baseState=Y,r.baseQueue=Ae,x.lastRenderedState=C}return w===null&&(x.lanes=0),[r.memoizedState,x.dispatch]}function Vg(r){var o=dn(),u=o.queue;if(u===null)throw Error(n(311));u.lastRenderedReducer=r;var x=u.dispatch,w=u.pending,C=o.memoizedState;if(w!==null){u.pending=null;var Y=w=w.next;do C=r(C,Y.action),Y=Y.next;while(Y!==w);Fn(C,o.memoizedState)||(vn=!0),o.memoizedState=C,o.baseQueue===null&&(o.baseState=C),u.lastRenderedState=C}return[C,x]}function BN(r,o,u){var x=Ss,w=dn(),C=Ls;if(C){if(u===void 0)throw Error(n(407));u=u()}else u=o();var Y=!Fn((pa||w).memoizedState,u);if(Y&&(w.memoizedState=u,vn=!0),w=w.queue,Wg(VN.bind(null,x,w,r),[r]),w.getSnapshot!==o||Y||gn!==null&&gn.memoizedState.tag&1){if(x.flags|=2048,Xd(9,{destroy:void 0},UN.bind(null,x,w,u,o),null),ba===null)throw Error(n(349));C||(Lo&127)!==0||zN(x,o,u)}return u}function zN(r,o,u){r.flags|=16384,r={getSnapshot:o,value:u},o=Ss.updateQueue,o===null?(o=Vf(),Ss.updateQueue=o,o.stores=[r]):(u=o.stores,u===null?o.stores=[r]:u.push(r))}function UN(r,o,u,x){o.value=u,o.getSnapshot=x,HN(o)&&$N(r)}function VN(r,o,u){return u(function(){HN(o)&&$N(r)})}function HN(r){var o=r.getSnapshot;r=r.value;try{var u=o();return!Fn(r,u)}catch{return!0}}function $N(r){var o=hi(r,2);o!==null&&Mr(o,r,2)}function Hg(r){var o=jr();if(typeof r=="function"){var u=r;if(r=u(),Vc){Se(!0);try{u()}finally{Se(!1)}}}return o.memoizedState=o.baseState=r,o.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Io,lastRenderedState:r},o}function WN(r,o,u,x){return r.baseState=u,Ug(r,pa,typeof x=="function"?x:Io)}function FA(r,o,u,x,w){if(qf(r))throw Error(n(485));if(r=o.action,r!==null){var C={payload:w,action:r,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(Y){C.listeners.push(Y)}};V.T!==null?u(!0):C.isTransition=!1,x(C),u=o.pending,u===null?(C.next=o.pending=C,GN(o,C)):(C.next=u.next,o.pending=u.next=C)}}function GN(r,o){var u=o.action,x=o.payload,w=r.state;if(o.isTransition){var C=V.T,Y={};V.T=Y;try{var xe=u(w,x),Ae=V.S;Ae!==null&&Ae(Y,xe),qN(r,o,xe)}catch(qe){$g(r,o,qe)}finally{C!==null&&Y.types!==null&&(C.types=Y.types),V.T=C}}else try{C=u(w,x),qN(r,o,C)}catch(qe){$g(r,o,qe)}}function qN(r,o,u){u!==null&&typeof u=="object"&&typeof u.then=="function"?u.then(function(x){KN(r,o,x)},function(x){return $g(r,o,x)}):KN(r,o,u)}function KN(r,o,u){o.status="fulfilled",o.value=u,YN(o),r.state=u,o=r.pending,o!==null&&(u=o.next,u===o?r.pending=null:(u=u.next,o.next=u,GN(r,u)))}function $g(r,o,u){var x=r.pending;if(r.pending=null,x!==null){x=x.next;do o.status="rejected",o.reason=u,YN(o),o=o.next;while(o!==x)}r.action=null}function YN(r){r=r.listeners;for(var o=0;o<r.length;o++)(0,r[o])()}function ZN(r,o){return o}function XN(r,o){if(Ls){var u=ba.formState;if(u!==null){e:{var x=Ss;if(Ls){if(Zs){t:{for(var w=Zs,C=Er;w.nodeType!==8;){if(!C){w=null;break t}if(w=xi(w.nextSibling),w===null){w=null;break t}}C=w.data,w=C==="F!"||C==="F"?w:null}if(w){Zs=xi(w.nextSibling),x=w.data==="F!";break e}}lo(x)}x=!1}x&&(o=u[0])}}return u=jr(),u.memoizedState=u.baseState=o,x={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ZN,lastRenderedState:o},u.queue=x,u=pw.bind(null,Ss,x),x.dispatch=u,x=Hg(!1),C=Zg.bind(null,Ss,!1,x.queue),x=jr(),w={state:o,dispatch:null,action:r,pending:null},x.queue=w,u=FA.bind(null,Ss,w,C,u),w.dispatch=u,x.memoizedState=r,[o,u,!1]}function QN(r){var o=dn();return JN(o,pa,r)}function JN(r,o,u){if(o=Ug(r,o,ZN)[0],r=$f(Io)[0],typeof o=="object"&&o!==null&&typeof o.then=="function")try{var x=Eh(o)}catch(Y){throw Y===Gd?Mf:Y}else x=o;o=dn();var w=o.queue,C=w.dispatch;return u!==o.memoizedState&&(Ss.flags|=2048,Xd(9,{destroy:void 0},BA.bind(null,w,u),null)),[x,C,r]}function BA(r,o){r.action=o}function ew(r){var o=dn(),u=pa;if(u!==null)return JN(o,u,r);dn(),o=o.memoizedState,u=dn();var x=u.queue.dispatch;return u.memoizedState=r,[o,x,!1]}function Xd(r,o,u,x){return r={tag:r,create:u,deps:x,inst:o,next:null},o=Ss.updateQueue,o===null&&(o=Vf(),Ss.updateQueue=o),u=o.lastEffect,u===null?o.lastEffect=r.next=r:(x=u.next,u.next=r,r.next=x,o.lastEffect=r),r}function tw(){return dn().memoizedState}function Wf(r,o,u,x){var w=jr();Ss.flags|=r,w.memoizedState=Xd(1|o,{destroy:void 0},u,x===void 0?null:x)}function Gf(r,o,u,x){var w=dn();x=x===void 0?null:x;var C=w.memoizedState.inst;pa!==null&&x!==null&&Rg(x,pa.memoizedState.deps)?w.memoizedState=Xd(o,C,u,x):(Ss.flags|=r,w.memoizedState=Xd(1|o,C,u,x))}function sw(r,o){Wf(8390656,8,r,o)}function Wg(r,o){Gf(2048,8,r,o)}function zA(r){Ss.flags|=4;var o=Ss.updateQueue;if(o===null)o=Vf(),Ss.updateQueue=o,o.events=[r];else{var u=o.events;u===null?o.events=[r]:u.push(r)}}function aw(r){var o=dn().memoizedState;return zA({ref:o,nextImpl:r}),function(){if((ta&2)!==0)throw Error(n(440));return o.impl.apply(void 0,arguments)}}function nw(r,o){return Gf(4,2,r,o)}function rw(r,o){return Gf(4,4,r,o)}function iw(r,o){if(typeof o=="function"){r=r();var u=o(r);return function(){typeof u=="function"?u():o(null)}}if(o!=null)return r=r(),o.current=r,function(){o.current=null}}function ow(r,o,u){u=u!=null?u.concat([r]):null,Gf(4,4,iw.bind(null,o,r),u)}function Gg(){}function lw(r,o){var u=dn();o=o===void 0?null:o;var x=u.memoizedState;return o!==null&&Rg(o,x[1])?x[0]:(u.memoizedState=[r,o],r)}function cw(r,o){var u=dn();o=o===void 0?null:o;var x=u.memoizedState;if(o!==null&&Rg(o,x[1]))return x[0];if(x=r(),Vc){Se(!0);try{r()}finally{Se(!1)}}return u.memoizedState=[x,o],x}function qg(r,o,u){return u===void 0||(Lo&1073741824)!==0&&(Us&261930)===0?r.memoizedState=o:(r.memoizedState=u,r=db(),Ss.lanes|=r,Rl|=r,u)}function dw(r,o,u,x){return Fn(u,o)?u:Kd.current!==null?(r=qg(r,u,x),Fn(r,o)||(vn=!0),r):(Lo&42)===0||(Lo&1073741824)!==0&&(Us&261930)===0?(vn=!0,r.memoizedState=u):(r=db(),Ss.lanes|=r,Rl|=r,o)}function uw(r,o,u,x,w){var C=ae.p;ae.p=C!==0&&8>C?C:8;var Y=V.T,xe={};V.T=xe,Zg(r,!1,o,u);try{var Ae=w(),qe=V.S;if(qe!==null&&qe(xe,Ae),Ae!==null&&typeof Ae=="object"&&typeof Ae.then=="function"){var it=RA(Ae,x);Ah(r,o,it,Qr(r))}else Ah(r,o,x,Qr(r))}catch(ft){Ah(r,o,{then:function(){},status:"rejected",reason:ft},Qr())}finally{ae.p=C,Y!==null&&xe.types!==null&&(Y.types=xe.types),V.T=Y}}function UA(){}function Kg(r,o,u,x){if(r.tag!==5)throw Error(n(476));var w=hw(r).queue;uw(r,w,o,ge,u===null?UA:function(){return mw(r),u(x)})}function hw(r){var o=r.memoizedState;if(o!==null)return o;o={memoizedState:ge,baseState:ge,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Io,lastRenderedState:ge},next:null};var u={};return o.next={memoizedState:u,baseState:u,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Io,lastRenderedState:u},next:null},r.memoizedState=o,r=r.alternate,r!==null&&(r.memoizedState=o),o}function mw(r){var o=hw(r);o.next===null&&(o=r.alternate.memoizedState),Ah(r,o.next.queue,{},Qr())}function Yg(){return qn(qh)}function fw(){return dn().memoizedState}function xw(){return dn().memoizedState}function VA(r){for(var o=r.return;o!==null;){switch(o.tag){case 24:case 3:var u=Qr();r=El(u);var x=Al(o,r,u);x!==null&&(Mr(x,o,u),_h(x,o,u)),o={cache:Sg()},r.payload=o;return}o=o.return}}function HA(r,o,u){var x=Qr();u={lane:x,revertLane:0,gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},qf(r)?gw(o,u):(u=xh(r,o,u,x),u!==null&&(Mr(u,r,x),vw(u,o,x)))}function pw(r,o,u){var x=Qr();Ah(r,o,u,x)}function Ah(r,o,u,x){var w={lane:x,revertLane:0,gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null};if(qf(r))gw(o,w);else{var C=r.alternate;if(r.lanes===0&&(C===null||C.lanes===0)&&(C=o.lastRenderedReducer,C!==null))try{var Y=o.lastRenderedState,xe=C(Y,u);if(w.hasEagerState=!0,w.eagerState=xe,Fn(xe,Y))return io(r,o,w,0),ba===null&&Pc(),!1}catch{}finally{}if(u=xh(r,o,w,x),u!==null)return Mr(u,r,x),vw(u,o,x),!0}return!1}function Zg(r,o,u,x){if(x={lane:2,revertLane:k0(),gesture:null,action:x,hasEagerState:!1,eagerState:null,next:null},qf(r)){if(o)throw Error(n(479))}else o=xh(r,u,x,2),o!==null&&Mr(o,r,2)}function qf(r){var o=r.alternate;return r===Ss||o!==null&&o===Ss}function gw(r,o){Yd=zf=!0;var u=r.pending;u===null?o.next=o:(o.next=u.next,u.next=o),r.pending=o}function vw(r,o,u){if((u&4194048)!==0){var x=o.lanes;x&=r.pendingLanes,u|=x,o.lanes=u,bt(r,u)}}var Dh={readContext:qn,use:Hf,useCallback:tn,useContext:tn,useEffect:tn,useImperativeHandle:tn,useLayoutEffect:tn,useInsertionEffect:tn,useMemo:tn,useReducer:tn,useRef:tn,useState:tn,useDebugValue:tn,useDeferredValue:tn,useTransition:tn,useSyncExternalStore:tn,useId:tn,useHostTransitionStatus:tn,useFormState:tn,useActionState:tn,useOptimistic:tn,useMemoCache:tn,useCacheRefresh:tn};Dh.useEffectEvent=tn;var yw={readContext:qn,use:Hf,useCallback:function(r,o){return jr().memoizedState=[r,o===void 0?null:o],r},useContext:qn,useEffect:sw,useImperativeHandle:function(r,o,u){u=u!=null?u.concat([r]):null,Wf(4194308,4,iw.bind(null,o,r),u)},useLayoutEffect:function(r,o){return Wf(4194308,4,r,o)},useInsertionEffect:function(r,o){Wf(4,2,r,o)},useMemo:function(r,o){var u=jr();o=o===void 0?null:o;var x=r();if(Vc){Se(!0);try{r()}finally{Se(!1)}}return u.memoizedState=[x,o],x},useReducer:function(r,o,u){var x=jr();if(u!==void 0){var w=u(o);if(Vc){Se(!0);try{u(o)}finally{Se(!1)}}}else w=o;return x.memoizedState=x.baseState=w,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:w},x.queue=r,r=r.dispatch=HA.bind(null,Ss,r),[x.memoizedState,r]},useRef:function(r){var o=jr();return r={current:r},o.memoizedState=r},useState:function(r){r=Hg(r);var o=r.queue,u=pw.bind(null,Ss,o);return o.dispatch=u,[r.memoizedState,u]},useDebugValue:Gg,useDeferredValue:function(r,o){var u=jr();return qg(u,r,o)},useTransition:function(){var r=Hg(!1);return r=uw.bind(null,Ss,r.queue,!0,!1),jr().memoizedState=r,[!1,r]},useSyncExternalStore:function(r,o,u){var x=Ss,w=jr();if(Ls){if(u===void 0)throw Error(n(407));u=u()}else{if(u=o(),ba===null)throw Error(n(349));(Us&127)!==0||zN(x,o,u)}w.memoizedState=u;var C={value:u,getSnapshot:o};return w.queue=C,sw(VN.bind(null,x,C,r),[r]),x.flags|=2048,Xd(9,{destroy:void 0},UN.bind(null,x,C,u,o),null),u},useId:function(){var r=jr(),o=ba.identifierPrefix;if(Ls){var u=Et,x=mt;u=(x&~(1<<32-Ce(x)-1)).toString(32)+u,o="_"+o+"R_"+u,u=Uf++,0<u&&(o+="H"+u.toString(32)),o+="_"}else u=LA++,o="_"+o+"r_"+u.toString(32)+"_";return r.memoizedState=o},useHostTransitionStatus:Yg,useFormState:XN,useActionState:XN,useOptimistic:function(r){var o=jr();o.memoizedState=o.baseState=r;var u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return o.queue=u,o=Zg.bind(null,Ss,!0,u),u.dispatch=o,[r,o]},useMemoCache:zg,useCacheRefresh:function(){return jr().memoizedState=VA.bind(null,Ss)},useEffectEvent:function(r){var o=jr(),u={impl:r};return o.memoizedState=u,function(){if((ta&2)!==0)throw Error(n(440));return u.impl.apply(void 0,arguments)}}},Xg={readContext:qn,use:Hf,useCallback:lw,useContext:qn,useEffect:Wg,useImperativeHandle:ow,useInsertionEffect:nw,useLayoutEffect:rw,useMemo:cw,useReducer:$f,useRef:tw,useState:function(){return $f(Io)},useDebugValue:Gg,useDeferredValue:function(r,o){var u=dn();return dw(u,pa.memoizedState,r,o)},useTransition:function(){var r=$f(Io)[0],o=dn().memoizedState;return[typeof r=="boolean"?r:Eh(r),o]},useSyncExternalStore:BN,useId:fw,useHostTransitionStatus:Yg,useFormState:QN,useActionState:QN,useOptimistic:function(r,o){var u=dn();return WN(u,pa,r,o)},useMemoCache:zg,useCacheRefresh:xw};Xg.useEffectEvent=aw;var jw={readContext:qn,use:Hf,useCallback:lw,useContext:qn,useEffect:Wg,useImperativeHandle:ow,useInsertionEffect:nw,useLayoutEffect:rw,useMemo:cw,useReducer:Vg,useRef:tw,useState:function(){return Vg(Io)},useDebugValue:Gg,useDeferredValue:function(r,o){var u=dn();return pa===null?qg(u,r,o):dw(u,pa.memoizedState,r,o)},useTransition:function(){var r=Vg(Io)[0],o=dn().memoizedState;return[typeof r=="boolean"?r:Eh(r),o]},useSyncExternalStore:BN,useId:fw,useHostTransitionStatus:Yg,useFormState:ew,useActionState:ew,useOptimistic:function(r,o){var u=dn();return pa!==null?WN(u,pa,r,o):(u.baseState=r,[r,u.queue.dispatch])},useMemoCache:zg,useCacheRefresh:xw};jw.useEffectEvent=aw;function Qg(r,o,u,x){o=r.memoizedState,u=u(x,o),u=u==null?o:v({},o,u),r.memoizedState=u,r.lanes===0&&(r.updateQueue.baseState=u)}var Jg={enqueueSetState:function(r,o,u){r=r._reactInternals;var x=Qr(),w=El(x);w.payload=o,u!=null&&(w.callback=u),o=Al(r,w,x),o!==null&&(Mr(o,r,x),_h(o,r,x))},enqueueReplaceState:function(r,o,u){r=r._reactInternals;var x=Qr(),w=El(x);w.tag=1,w.payload=o,u!=null&&(w.callback=u),o=Al(r,w,x),o!==null&&(Mr(o,r,x),_h(o,r,x))},enqueueForceUpdate:function(r,o){r=r._reactInternals;var u=Qr(),x=El(u);x.tag=2,o!=null&&(x.callback=o),o=Al(r,x,u),o!==null&&(Mr(o,r,u),_h(o,r,u))}};function Nw(r,o,u,x,w,C,Y){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(x,C,Y):o.prototype&&o.prototype.isPureReactComponent?!wl(u,x)||!wl(w,C):!0}function ww(r,o,u,x){r=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(u,x),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(u,x),o.state!==r&&Jg.enqueueReplaceState(o,o.state,null)}function Hc(r,o){var u=o;if("ref"in o){u={};for(var x in o)x!=="ref"&&(u[x]=o[x])}if(r=r.defaultProps){u===o&&(u=v({},u));for(var w in r)u[w]===void 0&&(u[w]=r[w])}return u}function bw(r){Dc(r)}function Sw(r){console.error(r)}function _w(r){Dc(r)}function Kf(r,o){try{var u=r.onUncaughtError;u(o.value,{componentStack:o.stack})}catch(x){setTimeout(function(){throw x})}}function Cw(r,o,u){try{var x=r.onCaughtError;x(u.value,{componentStack:u.stack,errorBoundary:o.tag===1?o.stateNode:null})}catch(w){setTimeout(function(){throw w})}}function e0(r,o,u){return u=El(u),u.tag=3,u.payload={element:null},u.callback=function(){Kf(r,o)},u}function Tw(r){return r=El(r),r.tag=3,r}function kw(r,o,u,x){var w=u.type.getDerivedStateFromError;if(typeof w=="function"){var C=x.value;r.payload=function(){return w(C)},r.callback=function(){Cw(o,u,x)}}var Y=u.stateNode;Y!==null&&typeof Y.componentDidCatch=="function"&&(r.callback=function(){Cw(o,u,x),typeof w!="function"&&(Ll===null?Ll=new Set([this]):Ll.add(this));var xe=x.stack;this.componentDidCatch(x.value,{componentStack:xe!==null?xe:""})})}function $A(r,o,u,x,w){if(u.flags|=32768,x!==null&&typeof x=="object"&&typeof x.then=="function"){if(o=u.alternate,o!==null&&Hd(o,u,w,!0),u=Kr.current,u!==null){switch(u.tag){case 31:case 13:return fi===null?ix():u.alternate===null&&sn===0&&(sn=3),u.flags&=-257,u.flags|=65536,u.lanes=w,x===Rf?u.flags|=16384:(o=u.updateQueue,o===null?u.updateQueue=new Set([x]):o.add(x),_0(r,x,w)),!1;case 22:return u.flags|=65536,x===Rf?u.flags|=16384:(o=u.updateQueue,o===null?(o={transitions:null,markerInstances:null,retryQueue:new Set([x])},u.updateQueue=o):(u=o.retryQueue,u===null?o.retryQueue=new Set([x]):u.add(x)),_0(r,x,w)),!1}throw Error(n(435,u.tag))}return _0(r,x,w),ix(),!1}if(Ls)return o=Kr.current,o!==null?((o.flags&65536)===0&&(o.flags|=256),o.flags|=65536,o.lanes=w,x!==Vd&&(r=Error(n(422),{cause:x}),Rc(m(r,u)))):(x!==Vd&&(o=Error(n(423),{cause:x}),Rc(m(o,u))),r=r.current.alternate,r.flags|=65536,w&=-w,r.lanes|=w,x=m(x,u),w=e0(r.stateNode,x,w),Ag(r,w),sn!==4&&(sn=2)),!1;var C=Error(n(520),{cause:x});if(C=m(C,u),Bh===null?Bh=[C]:Bh.push(C),sn!==4&&(sn=2),o===null)return!0;x=m(x,u),u=o;do{switch(u.tag){case 3:return u.flags|=65536,r=w&-w,u.lanes|=r,r=e0(u.stateNode,x,r),Ag(u,r),!1;case 1:if(o=u.type,C=u.stateNode,(u.flags&128)===0&&(typeof o.getDerivedStateFromError=="function"||C!==null&&typeof C.componentDidCatch=="function"&&(Ll===null||!Ll.has(C))))return u.flags|=65536,w&=-w,u.lanes|=w,w=Tw(w),kw(w,r,u,x),Ag(u,w),!1}u=u.return}while(u!==null);return!1}var t0=Error(n(461)),vn=!1;function Kn(r,o,u,x){o.child=r===null?PN(o,null,u,x):Uc(o,r.child,u,x)}function Ew(r,o,u,x,w){u=u.render;var C=o.ref;if("ref"in x){var Y={};for(var xe in x)xe!=="ref"&&(Y[xe]=x[xe])}else Y=x;return Ic(o),x=Lg(r,o,u,Y,C,w),xe=Ig(),r!==null&&!vn?(Fg(r,o,w),Fo(r,o,w)):(Ls&&xe&&Tn(o),o.flags|=1,Kn(r,o,x,w),o.child)}function Aw(r,o,u,x,w){if(r===null){var C=u.type;return typeof C=="function"&&!zd(C)&&C.defaultProps===void 0&&u.compare===null?(o.tag=15,o.type=C,Dw(r,o,C,x,w)):(r=Mc(u.type,null,x,o,o.mode,w),r.ref=o.ref,r.return=o,o.child=r)}if(C=r.child,!c0(r,w)){var Y=C.memoizedProps;if(u=u.compare,u=u!==null?u:wl,u(Y,x)&&r.ref===o.ref)return Fo(r,o,w)}return o.flags|=1,r=mi(C,x),r.ref=o.ref,r.return=o,o.child=r}function Dw(r,o,u,x,w){if(r!==null){var C=r.memoizedProps;if(wl(C,x)&&r.ref===o.ref)if(vn=!1,o.pendingProps=x=C,c0(r,w))(r.flags&131072)!==0&&(vn=!0);else return o.lanes=r.lanes,Fo(r,o,w)}return s0(r,o,u,x,w)}function Pw(r,o,u,x){var w=x.children,C=r!==null?r.memoizedState:null;if(r===null&&o.stateNode===null&&(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),x.mode==="hidden"){if((o.flags&128)!==0){if(C=C!==null?C.baseLanes|u:u,r!==null){for(x=o.child=r.child,w=0;x!==null;)w=w|x.lanes|x.childLanes,x=x.sibling;x=w&~C}else x=0,o.child=null;return Ow(r,o,C,u,x)}if((u&536870912)!==0)o.memoizedState={baseLanes:0,cachePool:null},r!==null&&Of(o,C!==null?C.cachePool:null),C!==null?RN(o,C):Pg(),LN(o);else return x=o.lanes=536870912,Ow(r,o,C!==null?C.baseLanes|u:u,u,x)}else C!==null?(Of(o,C.cachePool),RN(o,C),Pl(),o.memoizedState=null):(r!==null&&Of(o,null),Pg(),Pl());return Kn(r,o,w,u),o.child}function Ph(r,o){return r!==null&&r.tag===22||o.stateNode!==null||(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.sibling}function Ow(r,o,u,x,w){var C=Cg();return C=C===null?null:{parent:pn._currentValue,pool:C},o.memoizedState={baseLanes:u,cachePool:C},r!==null&&Of(o,null),Pg(),LN(o),r!==null&&Hd(r,o,x,!0),o.childLanes=w,null}function Yf(r,o){return o=Xf({mode:o.mode,children:o.children},r.mode),o.ref=r.ref,r.child=o,o.return=r,o}function Mw(r,o,u){return Uc(o,r.child,null,u),r=Yf(o,o.pendingProps),r.flags|=2,Yr(o),o.memoizedState=null,r}function WA(r,o,u){var x=o.pendingProps,w=(o.flags&128)!==0;if(o.flags&=-129,r===null){if(Ls){if(x.mode==="hidden")return r=Yf(o,x),o.lanes=536870912,Ph(null,r);if(Mg(o),(r=Zs)?(r=Gb(r,Er),r=r!==null&&r.data==="&"?r:null,r!==null&&(o.memoizedState={dehydrated:r,treeContext:Ke!==null?{id:mt,overflow:Et}:null,retryLane:536870912,hydrationErrors:null},u=gh(r),u.return=o,o.child=u,Ys=o,Zs=null)):r=null,r===null)throw lo(o);return o.lanes=536870912,null}return Yf(o,x)}var C=r.memoizedState;if(C!==null){var Y=C.dehydrated;if(Mg(o),w)if(o.flags&256)o.flags&=-257,o=Mw(r,o,u);else if(o.memoizedState!==null)o.child=r.child,o.flags|=128,o=null;else throw Error(n(558));else if(vn||Hd(r,o,u,!1),w=(u&r.childLanes)!==0,vn||w){if(x=ba,x!==null&&(Y=rs(x,u),Y!==0&&Y!==C.retryLane))throw C.retryLane=Y,hi(r,Y),Mr(x,r,Y),t0;ix(),o=Mw(r,o,u)}else r=C.treeContext,Zs=xi(Y.nextSibling),Ys=o,Ls=!0,oo=null,Er=!1,r!==null&&yr(o,r),o=Yf(o,x),o.flags|=4096;return o}return r=mi(r.child,{mode:x.mode,children:x.children}),r.ref=o.ref,o.child=r,r.return=o,r}function Zf(r,o){var u=o.ref;if(u===null)r!==null&&r.ref!==null&&(o.flags|=4194816);else{if(typeof u!="function"&&typeof u!="object")throw Error(n(284));(r===null||r.ref!==u)&&(o.flags|=4194816)}}function s0(r,o,u,x,w){return Ic(o),u=Lg(r,o,u,x,void 0,w),x=Ig(),r!==null&&!vn?(Fg(r,o,w),Fo(r,o,w)):(Ls&&x&&Tn(o),o.flags|=1,Kn(r,o,u,w),o.child)}function Rw(r,o,u,x,w,C){return Ic(o),o.updateQueue=null,u=FN(o,x,u,w),IN(r),x=Ig(),r!==null&&!vn?(Fg(r,o,C),Fo(r,o,C)):(Ls&&x&&Tn(o),o.flags|=1,Kn(r,o,u,C),o.child)}function Lw(r,o,u,x,w){if(Ic(o),o.stateNode===null){var C=Po,Y=u.contextType;typeof Y=="object"&&Y!==null&&(C=qn(Y)),C=new u(x,C),o.memoizedState=C.state!==null&&C.state!==void 0?C.state:null,C.updater=Jg,o.stateNode=C,C._reactInternals=o,C=o.stateNode,C.props=x,C.state=o.memoizedState,C.refs={},kg(o),Y=u.contextType,C.context=typeof Y=="object"&&Y!==null?qn(Y):Po,C.state=o.memoizedState,Y=u.getDerivedStateFromProps,typeof Y=="function"&&(Qg(o,u,Y,x),C.state=o.memoizedState),typeof u.getDerivedStateFromProps=="function"||typeof C.getSnapshotBeforeUpdate=="function"||typeof C.UNSAFE_componentWillMount!="function"&&typeof C.componentWillMount!="function"||(Y=C.state,typeof C.componentWillMount=="function"&&C.componentWillMount(),typeof C.UNSAFE_componentWillMount=="function"&&C.UNSAFE_componentWillMount(),Y!==C.state&&Jg.enqueueReplaceState(C,C.state,null),Th(o,x,C,w),Ch(),C.state=o.memoizedState),typeof C.componentDidMount=="function"&&(o.flags|=4194308),x=!0}else if(r===null){C=o.stateNode;var xe=o.memoizedProps,Ae=Hc(u,xe);C.props=Ae;var qe=C.context,it=u.contextType;Y=Po,typeof it=="object"&&it!==null&&(Y=qn(it));var ft=u.getDerivedStateFromProps;it=typeof ft=="function"||typeof C.getSnapshotBeforeUpdate=="function",xe=o.pendingProps!==xe,it||typeof C.UNSAFE_componentWillReceiveProps!="function"&&typeof C.componentWillReceiveProps!="function"||(xe||qe!==Y)&&ww(o,C,x,Y),kl=!1;var Ye=o.memoizedState;C.state=Ye,Th(o,x,C,w),Ch(),qe=o.memoizedState,xe||Ye!==qe||kl?(typeof ft=="function"&&(Qg(o,u,ft,x),qe=o.memoizedState),(Ae=kl||Nw(o,u,Ae,x,Ye,qe,Y))?(it||typeof C.UNSAFE_componentWillMount!="function"&&typeof C.componentWillMount!="function"||(typeof C.componentWillMount=="function"&&C.componentWillMount(),typeof C.UNSAFE_componentWillMount=="function"&&C.UNSAFE_componentWillMount()),typeof C.componentDidMount=="function"&&(o.flags|=4194308)):(typeof C.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=x,o.memoizedState=qe),C.props=x,C.state=qe,C.context=Y,x=Ae):(typeof C.componentDidMount=="function"&&(o.flags|=4194308),x=!1)}else{C=o.stateNode,Eg(r,o),Y=o.memoizedProps,it=Hc(u,Y),C.props=it,ft=o.pendingProps,Ye=C.context,qe=u.contextType,Ae=Po,typeof qe=="object"&&qe!==null&&(Ae=qn(qe)),xe=u.getDerivedStateFromProps,(qe=typeof xe=="function"||typeof C.getSnapshotBeforeUpdate=="function")||typeof C.UNSAFE_componentWillReceiveProps!="function"&&typeof C.componentWillReceiveProps!="function"||(Y!==ft||Ye!==Ae)&&ww(o,C,x,Ae),kl=!1,Ye=o.memoizedState,C.state=Ye,Th(o,x,C,w),Ch();var at=o.memoizedState;Y!==ft||Ye!==at||kl||r!==null&&r.dependencies!==null&&Df(r.dependencies)?(typeof xe=="function"&&(Qg(o,u,xe,x),at=o.memoizedState),(it=kl||Nw(o,u,it,x,Ye,at,Ae)||r!==null&&r.dependencies!==null&&Df(r.dependencies))?(qe||typeof C.UNSAFE_componentWillUpdate!="function"&&typeof C.componentWillUpdate!="function"||(typeof C.componentWillUpdate=="function"&&C.componentWillUpdate(x,at,Ae),typeof C.UNSAFE_componentWillUpdate=="function"&&C.UNSAFE_componentWillUpdate(x,at,Ae)),typeof C.componentDidUpdate=="function"&&(o.flags|=4),typeof C.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof C.componentDidUpdate!="function"||Y===r.memoizedProps&&Ye===r.memoizedState||(o.flags|=4),typeof C.getSnapshotBeforeUpdate!="function"||Y===r.memoizedProps&&Ye===r.memoizedState||(o.flags|=1024),o.memoizedProps=x,o.memoizedState=at),C.props=x,C.state=at,C.context=Ae,x=it):(typeof C.componentDidUpdate!="function"||Y===r.memoizedProps&&Ye===r.memoizedState||(o.flags|=4),typeof C.getSnapshotBeforeUpdate!="function"||Y===r.memoizedProps&&Ye===r.memoizedState||(o.flags|=1024),x=!1)}return C=x,Zf(r,o),x=(o.flags&128)!==0,C||x?(C=o.stateNode,u=x&&typeof u.getDerivedStateFromError!="function"?null:C.render(),o.flags|=1,r!==null&&x?(o.child=Uc(o,r.child,null,w),o.child=Uc(o,null,u,w)):Kn(r,o,u,w),o.memoizedState=C.state,r=o.child):r=Fo(r,o,w),r}function Iw(r,o,u,x){return Mo(),o.flags|=256,Kn(r,o,u,x),o.child}var a0={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function n0(r){return{baseLanes:r,cachePool:CN()}}function r0(r,o,u){return r=r!==null?r.childLanes&~u:0,o&&(r|=Xr),r}function Fw(r,o,u){var x=o.pendingProps,w=!1,C=(o.flags&128)!==0,Y;if((Y=C)||(Y=r!==null&&r.memoizedState===null?!1:(cn.current&2)!==0),Y&&(w=!0,o.flags&=-129),Y=(o.flags&32)!==0,o.flags&=-33,r===null){if(Ls){if(w?Dl(o):Pl(),(r=Zs)?(r=Gb(r,Er),r=r!==null&&r.data!=="&"?r:null,r!==null&&(o.memoizedState={dehydrated:r,treeContext:Ke!==null?{id:mt,overflow:Et}:null,retryLane:536870912,hydrationErrors:null},u=gh(r),u.return=o,o.child=u,Ys=o,Zs=null)):r=null,r===null)throw lo(o);return U0(r)?o.lanes=32:o.lanes=536870912,null}var xe=x.children;return x=x.fallback,w?(Pl(),w=o.mode,xe=Xf({mode:"hidden",children:xe},w),x=Oo(x,w,u,null),xe.return=o,x.return=o,xe.sibling=x,o.child=xe,x=o.child,x.memoizedState=n0(u),x.childLanes=r0(r,Y,u),o.memoizedState=a0,Ph(null,x)):(Dl(o),i0(o,xe))}var Ae=r.memoizedState;if(Ae!==null&&(xe=Ae.dehydrated,xe!==null)){if(C)o.flags&256?(Dl(o),o.flags&=-257,o=o0(r,o,u)):o.memoizedState!==null?(Pl(),o.child=r.child,o.flags|=128,o=null):(Pl(),xe=x.fallback,w=o.mode,x=Xf({mode:"visible",children:x.children},w),xe=Oo(xe,w,u,null),xe.flags|=2,x.return=o,xe.return=o,x.sibling=xe,o.child=x,Uc(o,r.child,null,u),x=o.child,x.memoizedState=n0(u),x.childLanes=r0(r,Y,u),o.memoizedState=a0,o=Ph(null,x));else if(Dl(o),U0(xe)){if(Y=xe.nextSibling&&xe.nextSibling.dataset,Y)var qe=Y.dgst;Y=qe,x=Error(n(419)),x.stack="",x.digest=Y,Rc({value:x,source:null,stack:null}),o=o0(r,o,u)}else if(vn||Hd(r,o,u,!1),Y=(u&r.childLanes)!==0,vn||Y){if(Y=ba,Y!==null&&(x=rs(Y,u),x!==0&&x!==Ae.retryLane))throw Ae.retryLane=x,hi(r,x),Mr(Y,r,x),t0;z0(xe)||ix(),o=o0(r,o,u)}else z0(xe)?(o.flags|=192,o.child=r.child,o=null):(r=Ae.treeContext,Zs=xi(xe.nextSibling),Ys=o,Ls=!0,oo=null,Er=!1,r!==null&&yr(o,r),o=i0(o,x.children),o.flags|=4096);return o}return w?(Pl(),xe=x.fallback,w=o.mode,Ae=r.child,qe=Ae.sibling,x=mi(Ae,{mode:"hidden",children:x.children}),x.subtreeFlags=Ae.subtreeFlags&65011712,qe!==null?xe=mi(qe,xe):(xe=Oo(xe,w,u,null),xe.flags|=2),xe.return=o,x.return=o,x.sibling=xe,o.child=x,Ph(null,x),x=o.child,xe=r.child.memoizedState,xe===null?xe=n0(u):(w=xe.cachePool,w!==null?(Ae=pn._currentValue,w=w.parent!==Ae?{parent:Ae,pool:Ae}:w):w=CN(),xe={baseLanes:xe.baseLanes|u,cachePool:w}),x.memoizedState=xe,x.childLanes=r0(r,Y,u),o.memoizedState=a0,Ph(r.child,x)):(Dl(o),u=r.child,r=u.sibling,u=mi(u,{mode:"visible",children:x.children}),u.return=o,u.sibling=null,r!==null&&(Y=o.deletions,Y===null?(o.deletions=[r],o.flags|=16):Y.push(r)),o.child=u,o.memoizedState=null,u)}function i0(r,o){return o=Xf({mode:"visible",children:o},r.mode),o.return=r,r.child=o}function Xf(r,o){return r=or(22,r,null,o),r.lanes=0,r}function o0(r,o,u){return Uc(o,r.child,null,u),r=i0(o,o.pendingProps.children),r.flags|=2,o.memoizedState=null,r}function Bw(r,o,u){r.lanes|=o;var x=r.alternate;x!==null&&(x.lanes|=o),wg(r.return,o,u)}function l0(r,o,u,x,w,C){var Y=r.memoizedState;Y===null?r.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:x,tail:u,tailMode:w,treeForkCount:C}:(Y.isBackwards=o,Y.rendering=null,Y.renderingStartTime=0,Y.last=x,Y.tail=u,Y.tailMode=w,Y.treeForkCount=C)}function zw(r,o,u){var x=o.pendingProps,w=x.revealOrder,C=x.tail;x=x.children;var Y=cn.current,xe=(Y&2)!==0;if(xe?(Y=Y&1|2,o.flags|=128):Y&=1,ce(cn,Y),Kn(r,o,x,u),x=Ls?le:0,!xe&&r!==null&&(r.flags&128)!==0)e:for(r=o.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&Bw(r,u,o);else if(r.tag===19)Bw(r,u,o);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===o)break e;for(;r.sibling===null;){if(r.return===null||r.return===o)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}switch(w){case"forwards":for(u=o.child,w=null;u!==null;)r=u.alternate,r!==null&&Bf(r)===null&&(w=u),u=u.sibling;u=w,u===null?(w=o.child,o.child=null):(w=u.sibling,u.sibling=null),l0(o,!1,w,u,C,x);break;case"backwards":case"unstable_legacy-backwards":for(u=null,w=o.child,o.child=null;w!==null;){if(r=w.alternate,r!==null&&Bf(r)===null){o.child=w;break}r=w.sibling,w.sibling=u,u=w,w=r}l0(o,!0,u,null,C,x);break;case"together":l0(o,!1,null,null,void 0,x);break;default:o.memoizedState=null}return o.child}function Fo(r,o,u){if(r!==null&&(o.dependencies=r.dependencies),Rl|=o.lanes,(u&o.childLanes)===0)if(r!==null){if(Hd(r,o,u,!1),(u&o.childLanes)===0)return null}else return null;if(r!==null&&o.child!==r.child)throw Error(n(153));if(o.child!==null){for(r=o.child,u=mi(r,r.pendingProps),o.child=u,u.return=o;r.sibling!==null;)r=r.sibling,u=u.sibling=mi(r,r.pendingProps),u.return=o;u.sibling=null}return o.child}function c0(r,o){return(r.lanes&o)!==0?!0:(r=r.dependencies,!!(r!==null&&Df(r)))}function GA(r,o,u){switch(o.tag){case 3:De(o,o.stateNode.containerInfo),Tl(o,pn,r.memoizedState.cache),Mo();break;case 27:case 5:pe(o);break;case 4:De(o,o.stateNode.containerInfo);break;case 10:Tl(o,o.type,o.memoizedProps.value);break;case 31:if(o.memoizedState!==null)return o.flags|=128,Mg(o),null;break;case 13:var x=o.memoizedState;if(x!==null)return x.dehydrated!==null?(Dl(o),o.flags|=128,null):(u&o.child.childLanes)!==0?Fw(r,o,u):(Dl(o),r=Fo(r,o,u),r!==null?r.sibling:null);Dl(o);break;case 19:var w=(r.flags&128)!==0;if(x=(u&o.childLanes)!==0,x||(Hd(r,o,u,!1),x=(u&o.childLanes)!==0),w){if(x)return zw(r,o,u);o.flags|=128}if(w=o.memoizedState,w!==null&&(w.rendering=null,w.tail=null,w.lastEffect=null),ce(cn,cn.current),x)break;return null;case 22:return o.lanes=0,Pw(r,o,u,o.pendingProps);case 24:Tl(o,pn,r.memoizedState.cache)}return Fo(r,o,u)}function Uw(r,o,u){if(r!==null)if(r.memoizedProps!==o.pendingProps)vn=!0;else{if(!c0(r,u)&&(o.flags&128)===0)return vn=!1,GA(r,o,u);vn=(r.flags&131072)!==0}else vn=!1,Ls&&(o.flags&1048576)!==0&&As(o,le,o.index);switch(o.lanes=0,o.tag){case 16:e:{var x=o.pendingProps;if(r=Bc(o.elementType),o.type=r,typeof r=="function")zd(r)?(x=Hc(r,x),o.tag=1,o=Lw(null,o,r,x,u)):(o.tag=0,o=s0(null,o,r,x,u));else{if(r!=null){var w=r.$$typeof;if(w===Q){o.tag=11,o=Ew(null,o,r,x,u);break e}else if(w===D){o.tag=14,o=Aw(null,o,r,x,u);break e}}throw o=W(r)||r,Error(n(306,o,""))}}return o;case 0:return s0(r,o,o.type,o.pendingProps,u);case 1:return x=o.type,w=Hc(x,o.pendingProps),Lw(r,o,x,w,u);case 3:e:{if(De(o,o.stateNode.containerInfo),r===null)throw Error(n(387));x=o.pendingProps;var C=o.memoizedState;w=C.element,Eg(r,o),Th(o,x,null,u);var Y=o.memoizedState;if(x=Y.cache,Tl(o,pn,x),x!==C.cache&&bg(o,[pn],u,!0),Ch(),x=Y.element,C.isDehydrated)if(C={element:x,isDehydrated:!1,cache:Y.cache},o.updateQueue.baseState=C,o.memoizedState=C,o.flags&256){o=Iw(r,o,x,u);break e}else if(x!==w){w=m(Error(n(424)),o),Rc(w),o=Iw(r,o,x,u);break e}else{switch(r=o.stateNode.containerInfo,r.nodeType){case 9:r=r.body;break;default:r=r.nodeName==="HTML"?r.ownerDocument.body:r}for(Zs=xi(r.firstChild),Ys=o,Ls=!0,oo=null,Er=!0,u=PN(o,null,x,u),o.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling}else{if(Mo(),x===w){o=Fo(r,o,u);break e}Kn(r,o,x,u)}o=o.child}return o;case 26:return Zf(r,o),r===null?(u=Qb(o.type,null,o.pendingProps,null))?o.memoizedState=u:Ls||(u=o.type,r=o.pendingProps,x=mx(de.current).createElement(u),x[B]=o,x[fe]=r,Yn(x,u,r),gt(x),o.stateNode=x):o.memoizedState=Qb(o.type,r.memoizedProps,o.pendingProps,r.memoizedState),null;case 27:return pe(o),r===null&&Ls&&(x=o.stateNode=Yb(o.type,o.pendingProps,de.current),Ys=o,Er=!0,w=Zs,zl(o.type)?(V0=w,Zs=xi(x.firstChild)):Zs=w),Kn(r,o,o.pendingProps.children,u),Zf(r,o),r===null&&(o.flags|=4194304),o.child;case 5:return r===null&&Ls&&((w=x=Zs)&&(x=w3(x,o.type,o.pendingProps,Er),x!==null?(o.stateNode=x,Ys=o,Zs=xi(x.firstChild),Er=!1,w=!0):w=!1),w||lo(o)),pe(o),w=o.type,C=o.pendingProps,Y=r!==null?r.memoizedProps:null,x=C.children,I0(w,C)?x=null:Y!==null&&I0(w,Y)&&(o.flags|=32),o.memoizedState!==null&&(w=Lg(r,o,IA,null,null,u),qh._currentValue=w),Zf(r,o),Kn(r,o,x,u),o.child;case 6:return r===null&&Ls&&((r=u=Zs)&&(u=b3(u,o.pendingProps,Er),u!==null?(o.stateNode=u,Ys=o,Zs=null,r=!0):r=!1),r||lo(o)),null;case 13:return Fw(r,o,u);case 4:return De(o,o.stateNode.containerInfo),x=o.pendingProps,r===null?o.child=Uc(o,null,x,u):Kn(r,o,x,u),o.child;case 11:return Ew(r,o,o.type,o.pendingProps,u);case 7:return Kn(r,o,o.pendingProps,u),o.child;case 8:return Kn(r,o,o.pendingProps.children,u),o.child;case 12:return Kn(r,o,o.pendingProps.children,u),o.child;case 10:return x=o.pendingProps,Tl(o,o.type,x.value),Kn(r,o,x.children,u),o.child;case 9:return w=o.type._context,x=o.pendingProps.children,Ic(o),w=qn(w),x=x(w),o.flags|=1,Kn(r,o,x,u),o.child;case 14:return Aw(r,o,o.type,o.pendingProps,u);case 15:return Dw(r,o,o.type,o.pendingProps,u);case 19:return zw(r,o,u);case 31:return WA(r,o,u);case 22:return Pw(r,o,u,o.pendingProps);case 24:return Ic(o),x=qn(pn),r===null?(w=Cg(),w===null&&(w=ba,C=Sg(),w.pooledCache=C,C.refCount++,C!==null&&(w.pooledCacheLanes|=u),w=C),o.memoizedState={parent:x,cache:w},kg(o),Tl(o,pn,w)):((r.lanes&u)!==0&&(Eg(r,o),Th(o,null,null,u),Ch()),w=r.memoizedState,C=o.memoizedState,w.parent!==x?(w={parent:x,cache:x},o.memoizedState=w,o.lanes===0&&(o.memoizedState=o.updateQueue.baseState=w),Tl(o,pn,x)):(x=C.cache,Tl(o,pn,x),x!==w.cache&&bg(o,[pn],u,!0))),Kn(r,o,o.pendingProps.children,u),o.child;case 29:throw o.pendingProps}throw Error(n(156,o.tag))}function Bo(r){r.flags|=4}function d0(r,o,u,x,w){if((o=(r.mode&32)!==0)&&(o=!1),o){if(r.flags|=16777216,(w&335544128)===w)if(r.stateNode.complete)r.flags|=8192;else if(fb())r.flags|=8192;else throw zc=Rf,Tg}else r.flags&=-16777217}function Vw(r,o){if(o.type!=="stylesheet"||(o.state.loading&4)!==0)r.flags&=-16777217;else if(r.flags|=16777216,!a1(o))if(fb())r.flags|=8192;else throw zc=Rf,Tg}function Qf(r,o){o!==null&&(r.flags|=4),r.flags&16384&&(o=r.tag!==22?Ps():536870912,r.lanes|=o,tu|=o)}function Oh(r,o){if(!Ls)switch(r.tailMode){case"hidden":o=r.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?r.tail=null:u.sibling=null;break;case"collapsed":u=r.tail;for(var x=null;u!==null;)u.alternate!==null&&(x=u),u=u.sibling;x===null?o||r.tail===null?r.tail=null:r.tail.sibling=null:x.sibling=null}}function Ea(r){var o=r.alternate!==null&&r.alternate.child===r.child,u=0,x=0;if(o)for(var w=r.child;w!==null;)u|=w.lanes|w.childLanes,x|=w.subtreeFlags&65011712,x|=w.flags&65011712,w.return=r,w=w.sibling;else for(w=r.child;w!==null;)u|=w.lanes|w.childLanes,x|=w.subtreeFlags,x|=w.flags,w.return=r,w=w.sibling;return r.subtreeFlags|=x,r.childLanes=u,o}function qA(r,o,u){var x=o.pendingProps;switch(en(o),o.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ea(o),null;case 1:return Ea(o),null;case 3:return u=o.stateNode,x=null,r!==null&&(x=r.memoizedState.cache),o.memoizedState.cache!==x&&(o.flags|=2048),Ro(pn),Ne(),u.pendingContext&&(u.context=u.pendingContext,u.pendingContext=null),(r===null||r.child===null)&&(Oi(o)?Bo(o):r===null||r.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,jh())),Ea(o),null;case 26:var w=o.type,C=o.memoizedState;return r===null?(Bo(o),C!==null?(Ea(o),Vw(o,C)):(Ea(o),d0(o,w,null,x,u))):C?C!==r.memoizedState?(Bo(o),Ea(o),Vw(o,C)):(Ea(o),o.flags&=-16777217):(r=r.memoizedProps,r!==x&&Bo(o),Ea(o),d0(o,w,r,x,u)),null;case 27:if(Le(o),u=de.current,w=o.type,r!==null&&o.stateNode!=null)r.memoizedProps!==x&&Bo(o);else{if(!x){if(o.stateNode===null)throw Error(n(166));return Ea(o),null}r=F.current,Oi(o)?yh(o):(r=Yb(w,x,u),o.stateNode=r,Bo(o))}return Ea(o),null;case 5:if(Le(o),w=o.type,r!==null&&o.stateNode!=null)r.memoizedProps!==x&&Bo(o);else{if(!x){if(o.stateNode===null)throw Error(n(166));return Ea(o),null}if(C=F.current,Oi(o))yh(o);else{var Y=mx(de.current);switch(C){case 1:C=Y.createElementNS("http://www.w3.org/2000/svg",w);break;case 2:C=Y.createElementNS("http://www.w3.org/1998/Math/MathML",w);break;default:switch(w){case"svg":C=Y.createElementNS("http://www.w3.org/2000/svg",w);break;case"math":C=Y.createElementNS("http://www.w3.org/1998/Math/MathML",w);break;case"script":C=Y.createElement("div"),C.innerHTML="<script><\/script>",C=C.removeChild(C.firstChild);break;case"select":C=typeof x.is=="string"?Y.createElement("select",{is:x.is}):Y.createElement("select"),x.multiple?C.multiple=!0:x.size&&(C.size=x.size);break;default:C=typeof x.is=="string"?Y.createElement(w,{is:x.is}):Y.createElement(w)}}C[B]=o,C[fe]=x;e:for(Y=o.child;Y!==null;){if(Y.tag===5||Y.tag===6)C.appendChild(Y.stateNode);else if(Y.tag!==4&&Y.tag!==27&&Y.child!==null){Y.child.return=Y,Y=Y.child;continue}if(Y===o)break e;for(;Y.sibling===null;){if(Y.return===null||Y.return===o)break e;Y=Y.return}Y.sibling.return=Y.return,Y=Y.sibling}o.stateNode=C;e:switch(Yn(C,w,x),w){case"button":case"input":case"select":case"textarea":x=!!x.autoFocus;break e;case"img":x=!0;break e;default:x=!1}x&&Bo(o)}}return Ea(o),d0(o,o.type,r===null?null:r.memoizedProps,o.pendingProps,u),null;case 6:if(r&&o.stateNode!=null)r.memoizedProps!==x&&Bo(o);else{if(typeof x!="string"&&o.stateNode===null)throw Error(n(166));if(r=de.current,Oi(o)){if(r=o.stateNode,u=o.memoizedProps,x=null,w=Ys,w!==null)switch(w.tag){case 27:case 5:x=w.memoizedProps}r[B]=o,r=!!(r.nodeValue===u||x!==null&&x.suppressHydrationWarning===!0||Fb(r.nodeValue,u)),r||lo(o,!0)}else r=mx(r).createTextNode(x),r[B]=o,o.stateNode=r}return Ea(o),null;case 31:if(u=o.memoizedState,r===null||r.memoizedState!==null){if(x=Oi(o),u!==null){if(r===null){if(!x)throw Error(n(318));if(r=o.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(n(557));r[B]=o}else Mo(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;Ea(o),r=!1}else u=jh(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=u),r=!0;if(!r)return o.flags&256?(Yr(o),o):(Yr(o),null);if((o.flags&128)!==0)throw Error(n(558))}return Ea(o),null;case 13:if(x=o.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(w=Oi(o),x!==null&&x.dehydrated!==null){if(r===null){if(!w)throw Error(n(318));if(w=o.memoizedState,w=w!==null?w.dehydrated:null,!w)throw Error(n(317));w[B]=o}else Mo(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;Ea(o),w=!1}else w=jh(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=w),w=!0;if(!w)return o.flags&256?(Yr(o),o):(Yr(o),null)}return Yr(o),(o.flags&128)!==0?(o.lanes=u,o):(u=x!==null,r=r!==null&&r.memoizedState!==null,u&&(x=o.child,w=null,x.alternate!==null&&x.alternate.memoizedState!==null&&x.alternate.memoizedState.cachePool!==null&&(w=x.alternate.memoizedState.cachePool.pool),C=null,x.memoizedState!==null&&x.memoizedState.cachePool!==null&&(C=x.memoizedState.cachePool.pool),C!==w&&(x.flags|=2048)),u!==r&&u&&(o.child.flags|=8192),Qf(o,o.updateQueue),Ea(o),null);case 4:return Ne(),r===null&&P0(o.stateNode.containerInfo),Ea(o),null;case 10:return Ro(o.type),Ea(o),null;case 19:if(X(cn),x=o.memoizedState,x===null)return Ea(o),null;if(w=(o.flags&128)!==0,C=x.rendering,C===null)if(w)Oh(x,!1);else{if(sn!==0||r!==null&&(r.flags&128)!==0)for(r=o.child;r!==null;){if(C=Bf(r),C!==null){for(o.flags|=128,Oh(x,!1),r=C.updateQueue,o.updateQueue=r,Qf(o,r),o.subtreeFlags=0,r=u,u=o.child;u!==null;)ph(u,r),u=u.sibling;return ce(cn,cn.current&1|2),Ls&&Wt(o,x.treeForkCount),o.child}r=r.sibling}x.tail!==null&&$t()>ax&&(o.flags|=128,w=!0,Oh(x,!1),o.lanes=4194304)}else{if(!w)if(r=Bf(C),r!==null){if(o.flags|=128,w=!0,r=r.updateQueue,o.updateQueue=r,Qf(o,r),Oh(x,!0),x.tail===null&&x.tailMode==="hidden"&&!C.alternate&&!Ls)return Ea(o),null}else 2*$t()-x.renderingStartTime>ax&&u!==536870912&&(o.flags|=128,w=!0,Oh(x,!1),o.lanes=4194304);x.isBackwards?(C.sibling=o.child,o.child=C):(r=x.last,r!==null?r.sibling=C:o.child=C,x.last=C)}return x.tail!==null?(r=x.tail,x.rendering=r,x.tail=r.sibling,x.renderingStartTime=$t(),r.sibling=null,u=cn.current,ce(cn,w?u&1|2:u&1),Ls&&Wt(o,x.treeForkCount),r):(Ea(o),null);case 22:case 23:return Yr(o),Og(),x=o.memoizedState!==null,r!==null?r.memoizedState!==null!==x&&(o.flags|=8192):x&&(o.flags|=8192),x?(u&536870912)!==0&&(o.flags&128)===0&&(Ea(o),o.subtreeFlags&6&&(o.flags|=8192)):Ea(o),u=o.updateQueue,u!==null&&Qf(o,u.retryQueue),u=null,r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(u=r.memoizedState.cachePool.pool),x=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(x=o.memoizedState.cachePool.pool),x!==u&&(o.flags|=2048),r!==null&&X(Fc),null;case 24:return u=null,r!==null&&(u=r.memoizedState.cache),o.memoizedState.cache!==u&&(o.flags|=2048),Ro(pn),Ea(o),null;case 25:return null;case 30:return null}throw Error(n(156,o.tag))}function KA(r,o){switch(en(o),o.tag){case 1:return r=o.flags,r&65536?(o.flags=r&-65537|128,o):null;case 3:return Ro(pn),Ne(),r=o.flags,(r&65536)!==0&&(r&128)===0?(o.flags=r&-65537|128,o):null;case 26:case 27:case 5:return Le(o),null;case 31:if(o.memoizedState!==null){if(Yr(o),o.alternate===null)throw Error(n(340));Mo()}return r=o.flags,r&65536?(o.flags=r&-65537|128,o):null;case 13:if(Yr(o),r=o.memoizedState,r!==null&&r.dehydrated!==null){if(o.alternate===null)throw Error(n(340));Mo()}return r=o.flags,r&65536?(o.flags=r&-65537|128,o):null;case 19:return X(cn),null;case 4:return Ne(),null;case 10:return Ro(o.type),null;case 22:case 23:return Yr(o),Og(),r!==null&&X(Fc),r=o.flags,r&65536?(o.flags=r&-65537|128,o):null;case 24:return Ro(pn),null;case 25:return null;default:return null}}function Hw(r,o){switch(en(o),o.tag){case 3:Ro(pn),Ne();break;case 26:case 27:case 5:Le(o);break;case 4:Ne();break;case 31:o.memoizedState!==null&&Yr(o);break;case 13:Yr(o);break;case 19:X(cn);break;case 10:Ro(o.type);break;case 22:case 23:Yr(o),Og(),r!==null&&X(Fc);break;case 24:Ro(pn)}}function Mh(r,o){try{var u=o.updateQueue,x=u!==null?u.lastEffect:null;if(x!==null){var w=x.next;u=w;do{if((u.tag&r)===r){x=void 0;var C=u.create,Y=u.inst;x=C(),Y.destroy=x}u=u.next}while(u!==w)}}catch(xe){la(o,o.return,xe)}}function Ol(r,o,u){try{var x=o.updateQueue,w=x!==null?x.lastEffect:null;if(w!==null){var C=w.next;x=C;do{if((x.tag&r)===r){var Y=x.inst,xe=Y.destroy;if(xe!==void 0){Y.destroy=void 0,w=o;var Ae=u,qe=xe;try{qe()}catch(it){la(w,Ae,it)}}}x=x.next}while(x!==C)}}catch(it){la(o,o.return,it)}}function $w(r){var o=r.updateQueue;if(o!==null){var u=r.stateNode;try{MN(o,u)}catch(x){la(r,r.return,x)}}}function Ww(r,o,u){u.props=Hc(r.type,r.memoizedProps),u.state=r.memoizedState;try{u.componentWillUnmount()}catch(x){la(r,o,x)}}function Rh(r,o){try{var u=r.ref;if(u!==null){switch(r.tag){case 26:case 27:case 5:var x=r.stateNode;break;case 30:x=r.stateNode;break;default:x=r.stateNode}typeof u=="function"?r.refCleanup=u(x):u.current=x}}catch(w){la(r,o,w)}}function uo(r,o){var u=r.ref,x=r.refCleanup;if(u!==null)if(typeof x=="function")try{x()}catch(w){la(r,o,w)}finally{r.refCleanup=null,r=r.alternate,r!=null&&(r.refCleanup=null)}else if(typeof u=="function")try{u(null)}catch(w){la(r,o,w)}else u.current=null}function Gw(r){var o=r.type,u=r.memoizedProps,x=r.stateNode;try{e:switch(o){case"button":case"input":case"select":case"textarea":u.autoFocus&&x.focus();break e;case"img":u.src?x.src=u.src:u.srcSet&&(x.srcset=u.srcSet)}}catch(w){la(r,r.return,w)}}function u0(r,o,u){try{var x=r.stateNode;p3(x,r.type,u,o),x[fe]=o}catch(w){la(r,r.return,w)}}function qw(r){return r.tag===5||r.tag===3||r.tag===26||r.tag===27&&zl(r.type)||r.tag===4}function h0(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||qw(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.tag===27&&zl(r.type)||r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function m0(r,o,u){var x=r.tag;if(x===5||x===6)r=r.stateNode,o?(u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u).insertBefore(r,o):(o=u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u,o.appendChild(r),u=u._reactRootContainer,u!=null||o.onclick!==null||(o.onclick=_r));else if(x!==4&&(x===27&&zl(r.type)&&(u=r.stateNode,o=null),r=r.child,r!==null))for(m0(r,o,u),r=r.sibling;r!==null;)m0(r,o,u),r=r.sibling}function Jf(r,o,u){var x=r.tag;if(x===5||x===6)r=r.stateNode,o?u.insertBefore(r,o):u.appendChild(r);else if(x!==4&&(x===27&&zl(r.type)&&(u=r.stateNode),r=r.child,r!==null))for(Jf(r,o,u),r=r.sibling;r!==null;)Jf(r,o,u),r=r.sibling}function Kw(r){var o=r.stateNode,u=r.memoizedProps;try{for(var x=r.type,w=o.attributes;w.length;)o.removeAttributeNode(w[0]);Yn(o,x,u),o[B]=r,o[fe]=u}catch(C){la(r,r.return,C)}}var zo=!1,yn=!1,f0=!1,Yw=typeof WeakSet=="function"?WeakSet:Set,zn=null;function YA(r,o){if(r=r.containerInfo,R0=jx,r=Tc(r),so(r)){if("selectionStart"in r)var u={start:r.selectionStart,end:r.selectionEnd};else e:{u=(u=r.ownerDocument)&&u.defaultView||window;var x=u.getSelection&&u.getSelection();if(x&&x.rangeCount!==0){u=x.anchorNode;var w=x.anchorOffset,C=x.focusNode;x=x.focusOffset;try{u.nodeType,C.nodeType}catch{u=null;break e}var Y=0,xe=-1,Ae=-1,qe=0,it=0,ft=r,Ye=null;t:for(;;){for(var at;ft!==u||w!==0&&ft.nodeType!==3||(xe=Y+w),ft!==C||x!==0&&ft.nodeType!==3||(Ae=Y+x),ft.nodeType===3&&(Y+=ft.nodeValue.length),(at=ft.firstChild)!==null;)Ye=ft,ft=at;for(;;){if(ft===r)break t;if(Ye===u&&++qe===w&&(xe=Y),Ye===C&&++it===x&&(Ae=Y),(at=ft.nextSibling)!==null)break;ft=Ye,Ye=ft.parentNode}ft=at}u=xe===-1||Ae===-1?null:{start:xe,end:Ae}}else u=null}u=u||{start:0,end:0}}else u=null;for(L0={focusedElem:r,selectionRange:u},jx=!1,zn=o;zn!==null;)if(o=zn,r=o.child,(o.subtreeFlags&1028)!==0&&r!==null)r.return=o,zn=r;else for(;zn!==null;){switch(o=zn,C=o.alternate,r=o.flags,o.tag){case 0:if((r&4)!==0&&(r=o.updateQueue,r=r!==null?r.events:null,r!==null))for(u=0;u<r.length;u++)w=r[u],w.ref.impl=w.nextImpl;break;case 11:case 15:break;case 1:if((r&1024)!==0&&C!==null){r=void 0,u=o,w=C.memoizedProps,C=C.memoizedState,x=u.stateNode;try{var zt=Hc(u.type,w);r=x.getSnapshotBeforeUpdate(zt,C),x.__reactInternalSnapshotBeforeUpdate=r}catch(os){la(u,u.return,os)}}break;case 3:if((r&1024)!==0){if(r=o.stateNode.containerInfo,u=r.nodeType,u===9)B0(r);else if(u===1)switch(r.nodeName){case"HEAD":case"HTML":case"BODY":B0(r);break;default:r.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((r&1024)!==0)throw Error(n(163))}if(r=o.sibling,r!==null){r.return=o.return,zn=r;break}zn=o.return}}function Zw(r,o,u){var x=u.flags;switch(u.tag){case 0:case 11:case 15:Vo(r,u),x&4&&Mh(5,u);break;case 1:if(Vo(r,u),x&4)if(r=u.stateNode,o===null)try{r.componentDidMount()}catch(Y){la(u,u.return,Y)}else{var w=Hc(u.type,o.memoizedProps);o=o.memoizedState;try{r.componentDidUpdate(w,o,r.__reactInternalSnapshotBeforeUpdate)}catch(Y){la(u,u.return,Y)}}x&64&&$w(u),x&512&&Rh(u,u.return);break;case 3:if(Vo(r,u),x&64&&(r=u.updateQueue,r!==null)){if(o=null,u.child!==null)switch(u.child.tag){case 27:case 5:o=u.child.stateNode;break;case 1:o=u.child.stateNode}try{MN(r,o)}catch(Y){la(u,u.return,Y)}}break;case 27:o===null&&x&4&&Kw(u);case 26:case 5:Vo(r,u),o===null&&x&4&&Gw(u),x&512&&Rh(u,u.return);break;case 12:Vo(r,u);break;case 31:Vo(r,u),x&4&&Jw(r,u);break;case 13:Vo(r,u),x&4&&eb(r,u),x&64&&(r=u.memoizedState,r!==null&&(r=r.dehydrated,r!==null&&(u=n3.bind(null,u),S3(r,u))));break;case 22:if(x=u.memoizedState!==null||zo,!x){o=o!==null&&o.memoizedState!==null||yn,w=zo;var C=yn;zo=x,(yn=o)&&!C?Ho(r,u,(u.subtreeFlags&8772)!==0):Vo(r,u),zo=w,yn=C}break;case 30:break;default:Vo(r,u)}}function Xw(r){var o=r.alternate;o!==null&&(r.alternate=null,Xw(o)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(o=r.stateNode,o!==null&&pt(o)),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}var Ia=null,Ar=!1;function Uo(r,o,u){for(u=u.child;u!==null;)Qw(r,o,u),u=u.sibling}function Qw(r,o,u){if(Xe&&typeof Xe.onCommitFiberUnmount=="function")try{Xe.onCommitFiberUnmount(Ze,u)}catch{}switch(u.tag){case 26:yn||uo(u,o),Uo(r,o,u),u.memoizedState?u.memoizedState.count--:u.stateNode&&(u=u.stateNode,u.parentNode.removeChild(u));break;case 27:yn||uo(u,o);var x=Ia,w=Ar;zl(u.type)&&(Ia=u.stateNode,Ar=!1),Uo(r,o,u),$h(u.stateNode),Ia=x,Ar=w;break;case 5:yn||uo(u,o);case 6:if(x=Ia,w=Ar,Ia=null,Uo(r,o,u),Ia=x,Ar=w,Ia!==null)if(Ar)try{(Ia.nodeType===9?Ia.body:Ia.nodeName==="HTML"?Ia.ownerDocument.body:Ia).removeChild(u.stateNode)}catch(C){la(u,o,C)}else try{Ia.removeChild(u.stateNode)}catch(C){la(u,o,C)}break;case 18:Ia!==null&&(Ar?(r=Ia,$b(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,u.stateNode),cu(r)):$b(Ia,u.stateNode));break;case 4:x=Ia,w=Ar,Ia=u.stateNode.containerInfo,Ar=!0,Uo(r,o,u),Ia=x,Ar=w;break;case 0:case 11:case 14:case 15:Ol(2,u,o),yn||Ol(4,u,o),Uo(r,o,u);break;case 1:yn||(uo(u,o),x=u.stateNode,typeof x.componentWillUnmount=="function"&&Ww(u,o,x)),Uo(r,o,u);break;case 21:Uo(r,o,u);break;case 22:yn=(x=yn)||u.memoizedState!==null,Uo(r,o,u),yn=x;break;default:Uo(r,o,u)}}function Jw(r,o){if(o.memoizedState===null&&(r=o.alternate,r!==null&&(r=r.memoizedState,r!==null))){r=r.dehydrated;try{cu(r)}catch(u){la(o,o.return,u)}}}function eb(r,o){if(o.memoizedState===null&&(r=o.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null))))try{cu(r)}catch(u){la(o,o.return,u)}}function ZA(r){switch(r.tag){case 31:case 13:case 19:var o=r.stateNode;return o===null&&(o=r.stateNode=new Yw),o;case 22:return r=r.stateNode,o=r._retryCache,o===null&&(o=r._retryCache=new Yw),o;default:throw Error(n(435,r.tag))}}function ex(r,o){var u=ZA(r);o.forEach(function(x){if(!u.has(x)){u.add(x);var w=r3.bind(null,r,x);x.then(w,w)}})}function Dr(r,o){var u=o.deletions;if(u!==null)for(var x=0;x<u.length;x++){var w=u[x],C=r,Y=o,xe=Y;e:for(;xe!==null;){switch(xe.tag){case 27:if(zl(xe.type)){Ia=xe.stateNode,Ar=!1;break e}break;case 5:Ia=xe.stateNode,Ar=!1;break e;case 3:case 4:Ia=xe.stateNode.containerInfo,Ar=!0;break e}xe=xe.return}if(Ia===null)throw Error(n(160));Qw(C,Y,w),Ia=null,Ar=!1,C=w.alternate,C!==null&&(C.return=null),w.return=null}if(o.subtreeFlags&13886)for(o=o.child;o!==null;)tb(o,r),o=o.sibling}var Ri=null;function tb(r,o){var u=r.alternate,x=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:Dr(o,r),Pr(r),x&4&&(Ol(3,r,r.return),Mh(3,r),Ol(5,r,r.return));break;case 1:Dr(o,r),Pr(r),x&512&&(yn||u===null||uo(u,u.return)),x&64&&zo&&(r=r.updateQueue,r!==null&&(x=r.callbacks,x!==null&&(u=r.shared.hiddenCallbacks,r.shared.hiddenCallbacks=u===null?x:u.concat(x))));break;case 26:var w=Ri;if(Dr(o,r),Pr(r),x&512&&(yn||u===null||uo(u,u.return)),x&4){var C=u!==null?u.memoizedState:null;if(x=r.memoizedState,u===null)if(x===null)if(r.stateNode===null){e:{x=r.type,u=r.memoizedProps,w=w.ownerDocument||w;t:switch(x){case"title":C=w.getElementsByTagName("title")[0],(!C||C[We]||C[B]||C.namespaceURI==="http://www.w3.org/2000/svg"||C.hasAttribute("itemprop"))&&(C=w.createElement(x),w.head.insertBefore(C,w.querySelector("head > title"))),Yn(C,x,u),C[B]=r,gt(C),x=C;break e;case"link":var Y=t1("link","href",w).get(x+(u.href||""));if(Y){for(var xe=0;xe<Y.length;xe++)if(C=Y[xe],C.getAttribute("href")===(u.href==null||u.href===""?null:u.href)&&C.getAttribute("rel")===(u.rel==null?null:u.rel)&&C.getAttribute("title")===(u.title==null?null:u.title)&&C.getAttribute("crossorigin")===(u.crossOrigin==null?null:u.crossOrigin)){Y.splice(xe,1);break t}}C=w.createElement(x),Yn(C,x,u),w.head.appendChild(C);break;case"meta":if(Y=t1("meta","content",w).get(x+(u.content||""))){for(xe=0;xe<Y.length;xe++)if(C=Y[xe],C.getAttribute("content")===(u.content==null?null:""+u.content)&&C.getAttribute("name")===(u.name==null?null:u.name)&&C.getAttribute("property")===(u.property==null?null:u.property)&&C.getAttribute("http-equiv")===(u.httpEquiv==null?null:u.httpEquiv)&&C.getAttribute("charset")===(u.charSet==null?null:u.charSet)){Y.splice(xe,1);break t}}C=w.createElement(x),Yn(C,x,u),w.head.appendChild(C);break;default:throw Error(n(468,x))}C[B]=r,gt(C),x=C}r.stateNode=x}else s1(w,r.type,r.stateNode);else r.stateNode=e1(w,x,r.memoizedProps);else C!==x?(C===null?u.stateNode!==null&&(u=u.stateNode,u.parentNode.removeChild(u)):C.count--,x===null?s1(w,r.type,r.stateNode):e1(w,x,r.memoizedProps)):x===null&&r.stateNode!==null&&u0(r,r.memoizedProps,u.memoizedProps)}break;case 27:Dr(o,r),Pr(r),x&512&&(yn||u===null||uo(u,u.return)),u!==null&&x&4&&u0(r,r.memoizedProps,u.memoizedProps);break;case 5:if(Dr(o,r),Pr(r),x&512&&(yn||u===null||uo(u,u.return)),r.flags&32){w=r.stateNode;try{ii(w,"")}catch(zt){la(r,r.return,zt)}}x&4&&r.stateNode!=null&&(w=r.memoizedProps,u0(r,w,u!==null?u.memoizedProps:w)),x&1024&&(f0=!0);break;case 6:if(Dr(o,r),Pr(r),x&4){if(r.stateNode===null)throw Error(n(162));x=r.memoizedProps,u=r.stateNode;try{u.nodeValue=x}catch(zt){la(r,r.return,zt)}}break;case 3:if(px=null,w=Ri,Ri=fx(o.containerInfo),Dr(o,r),Ri=w,Pr(r),x&4&&u!==null&&u.memoizedState.isDehydrated)try{cu(o.containerInfo)}catch(zt){la(r,r.return,zt)}f0&&(f0=!1,sb(r));break;case 4:x=Ri,Ri=fx(r.stateNode.containerInfo),Dr(o,r),Pr(r),Ri=x;break;case 12:Dr(o,r),Pr(r);break;case 31:Dr(o,r),Pr(r),x&4&&(x=r.updateQueue,x!==null&&(r.updateQueue=null,ex(r,x)));break;case 13:Dr(o,r),Pr(r),r.child.flags&8192&&r.memoizedState!==null!=(u!==null&&u.memoizedState!==null)&&(sx=$t()),x&4&&(x=r.updateQueue,x!==null&&(r.updateQueue=null,ex(r,x)));break;case 22:w=r.memoizedState!==null;var Ae=u!==null&&u.memoizedState!==null,qe=zo,it=yn;if(zo=qe||w,yn=it||Ae,Dr(o,r),yn=it,zo=qe,Pr(r),x&8192)e:for(o=r.stateNode,o._visibility=w?o._visibility&-2:o._visibility|1,w&&(u===null||Ae||zo||yn||$c(r)),u=null,o=r;;){if(o.tag===5||o.tag===26){if(u===null){Ae=u=o;try{if(C=Ae.stateNode,w)Y=C.style,typeof Y.setProperty=="function"?Y.setProperty("display","none","important"):Y.display="none";else{xe=Ae.stateNode;var ft=Ae.memoizedProps.style,Ye=ft!=null&&ft.hasOwnProperty("display")?ft.display:null;xe.style.display=Ye==null||typeof Ye=="boolean"?"":(""+Ye).trim()}}catch(zt){la(Ae,Ae.return,zt)}}}else if(o.tag===6){if(u===null){Ae=o;try{Ae.stateNode.nodeValue=w?"":Ae.memoizedProps}catch(zt){la(Ae,Ae.return,zt)}}}else if(o.tag===18){if(u===null){Ae=o;try{var at=Ae.stateNode;w?Wb(at,!0):Wb(Ae.stateNode,!1)}catch(zt){la(Ae,Ae.return,zt)}}}else if((o.tag!==22&&o.tag!==23||o.memoizedState===null||o===r)&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===r)break e;for(;o.sibling===null;){if(o.return===null||o.return===r)break e;u===o&&(u=null),o=o.return}u===o&&(u=null),o.sibling.return=o.return,o=o.sibling}x&4&&(x=r.updateQueue,x!==null&&(u=x.retryQueue,u!==null&&(x.retryQueue=null,ex(r,u))));break;case 19:Dr(o,r),Pr(r),x&4&&(x=r.updateQueue,x!==null&&(r.updateQueue=null,ex(r,x)));break;case 30:break;case 21:break;default:Dr(o,r),Pr(r)}}function Pr(r){var o=r.flags;if(o&2){try{for(var u,x=r.return;x!==null;){if(qw(x)){u=x;break}x=x.return}if(u==null)throw Error(n(160));switch(u.tag){case 27:var w=u.stateNode,C=h0(r);Jf(r,C,w);break;case 5:var Y=u.stateNode;u.flags&32&&(ii(Y,""),u.flags&=-33);var xe=h0(r);Jf(r,xe,Y);break;case 3:case 4:var Ae=u.stateNode.containerInfo,qe=h0(r);m0(r,qe,Ae);break;default:throw Error(n(161))}}catch(it){la(r,r.return,it)}r.flags&=-3}o&4096&&(r.flags&=-4097)}function sb(r){if(r.subtreeFlags&1024)for(r=r.child;r!==null;){var o=r;sb(o),o.tag===5&&o.flags&1024&&o.stateNode.reset(),r=r.sibling}}function Vo(r,o){if(o.subtreeFlags&8772)for(o=o.child;o!==null;)Zw(r,o.alternate,o),o=o.sibling}function $c(r){for(r=r.child;r!==null;){var o=r;switch(o.tag){case 0:case 11:case 14:case 15:Ol(4,o,o.return),$c(o);break;case 1:uo(o,o.return);var u=o.stateNode;typeof u.componentWillUnmount=="function"&&Ww(o,o.return,u),$c(o);break;case 27:$h(o.stateNode);case 26:case 5:uo(o,o.return),$c(o);break;case 22:o.memoizedState===null&&$c(o);break;case 30:$c(o);break;default:$c(o)}r=r.sibling}}function Ho(r,o,u){for(u=u&&(o.subtreeFlags&8772)!==0,o=o.child;o!==null;){var x=o.alternate,w=r,C=o,Y=C.flags;switch(C.tag){case 0:case 11:case 15:Ho(w,C,u),Mh(4,C);break;case 1:if(Ho(w,C,u),x=C,w=x.stateNode,typeof w.componentDidMount=="function")try{w.componentDidMount()}catch(qe){la(x,x.return,qe)}if(x=C,w=x.updateQueue,w!==null){var xe=x.stateNode;try{var Ae=w.shared.hiddenCallbacks;if(Ae!==null)for(w.shared.hiddenCallbacks=null,w=0;w<Ae.length;w++)ON(Ae[w],xe)}catch(qe){la(x,x.return,qe)}}u&&Y&64&&$w(C),Rh(C,C.return);break;case 27:Kw(C);case 26:case 5:Ho(w,C,u),u&&x===null&&Y&4&&Gw(C),Rh(C,C.return);break;case 12:Ho(w,C,u);break;case 31:Ho(w,C,u),u&&Y&4&&Jw(w,C);break;case 13:Ho(w,C,u),u&&Y&4&&eb(w,C);break;case 22:C.memoizedState===null&&Ho(w,C,u),Rh(C,C.return);break;case 30:break;default:Ho(w,C,u)}o=o.sibling}}function x0(r,o){var u=null;r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(u=r.memoizedState.cachePool.pool),r=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(r=o.memoizedState.cachePool.pool),r!==u&&(r!=null&&r.refCount++,u!=null&&Nh(u))}function p0(r,o){r=null,o.alternate!==null&&(r=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==r&&(o.refCount++,r!=null&&Nh(r))}function Li(r,o,u,x){if(o.subtreeFlags&10256)for(o=o.child;o!==null;)ab(r,o,u,x),o=o.sibling}function ab(r,o,u,x){var w=o.flags;switch(o.tag){case 0:case 11:case 15:Li(r,o,u,x),w&2048&&Mh(9,o);break;case 1:Li(r,o,u,x);break;case 3:Li(r,o,u,x),w&2048&&(r=null,o.alternate!==null&&(r=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==r&&(o.refCount++,r!=null&&Nh(r)));break;case 12:if(w&2048){Li(r,o,u,x),r=o.stateNode;try{var C=o.memoizedProps,Y=C.id,xe=C.onPostCommit;typeof xe=="function"&&xe(Y,o.alternate===null?"mount":"update",r.passiveEffectDuration,-0)}catch(Ae){la(o,o.return,Ae)}}else Li(r,o,u,x);break;case 31:Li(r,o,u,x);break;case 13:Li(r,o,u,x);break;case 23:break;case 22:C=o.stateNode,Y=o.alternate,o.memoizedState!==null?C._visibility&2?Li(r,o,u,x):Lh(r,o):C._visibility&2?Li(r,o,u,x):(C._visibility|=2,Qd(r,o,u,x,(o.subtreeFlags&10256)!==0||!1)),w&2048&&x0(Y,o);break;case 24:Li(r,o,u,x),w&2048&&p0(o.alternate,o);break;default:Li(r,o,u,x)}}function Qd(r,o,u,x,w){for(w=w&&((o.subtreeFlags&10256)!==0||!1),o=o.child;o!==null;){var C=r,Y=o,xe=u,Ae=x,qe=Y.flags;switch(Y.tag){case 0:case 11:case 15:Qd(C,Y,xe,Ae,w),Mh(8,Y);break;case 23:break;case 22:var it=Y.stateNode;Y.memoizedState!==null?it._visibility&2?Qd(C,Y,xe,Ae,w):Lh(C,Y):(it._visibility|=2,Qd(C,Y,xe,Ae,w)),w&&qe&2048&&x0(Y.alternate,Y);break;case 24:Qd(C,Y,xe,Ae,w),w&&qe&2048&&p0(Y.alternate,Y);break;default:Qd(C,Y,xe,Ae,w)}o=o.sibling}}function Lh(r,o){if(o.subtreeFlags&10256)for(o=o.child;o!==null;){var u=r,x=o,w=x.flags;switch(x.tag){case 22:Lh(u,x),w&2048&&x0(x.alternate,x);break;case 24:Lh(u,x),w&2048&&p0(x.alternate,x);break;default:Lh(u,x)}o=o.sibling}}var Ih=8192;function Jd(r,o,u){if(r.subtreeFlags&Ih)for(r=r.child;r!==null;)nb(r,o,u),r=r.sibling}function nb(r,o,u){switch(r.tag){case 26:Jd(r,o,u),r.flags&Ih&&r.memoizedState!==null&&L3(u,Ri,r.memoizedState,r.memoizedProps);break;case 5:Jd(r,o,u);break;case 3:case 4:var x=Ri;Ri=fx(r.stateNode.containerInfo),Jd(r,o,u),Ri=x;break;case 22:r.memoizedState===null&&(x=r.alternate,x!==null&&x.memoizedState!==null?(x=Ih,Ih=16777216,Jd(r,o,u),Ih=x):Jd(r,o,u));break;default:Jd(r,o,u)}}function rb(r){var o=r.alternate;if(o!==null&&(r=o.child,r!==null)){o.child=null;do o=r.sibling,r.sibling=null,r=o;while(r!==null)}}function Fh(r){var o=r.deletions;if((r.flags&16)!==0){if(o!==null)for(var u=0;u<o.length;u++){var x=o[u];zn=x,ob(x,r)}rb(r)}if(r.subtreeFlags&10256)for(r=r.child;r!==null;)ib(r),r=r.sibling}function ib(r){switch(r.tag){case 0:case 11:case 15:Fh(r),r.flags&2048&&Ol(9,r,r.return);break;case 3:Fh(r);break;case 12:Fh(r);break;case 22:var o=r.stateNode;r.memoizedState!==null&&o._visibility&2&&(r.return===null||r.return.tag!==13)?(o._visibility&=-3,tx(r)):Fh(r);break;default:Fh(r)}}function tx(r){var o=r.deletions;if((r.flags&16)!==0){if(o!==null)for(var u=0;u<o.length;u++){var x=o[u];zn=x,ob(x,r)}rb(r)}for(r=r.child;r!==null;){switch(o=r,o.tag){case 0:case 11:case 15:Ol(8,o,o.return),tx(o);break;case 22:u=o.stateNode,u._visibility&2&&(u._visibility&=-3,tx(o));break;default:tx(o)}r=r.sibling}}function ob(r,o){for(;zn!==null;){var u=zn;switch(u.tag){case 0:case 11:case 15:Ol(8,u,o);break;case 23:case 22:if(u.memoizedState!==null&&u.memoizedState.cachePool!==null){var x=u.memoizedState.cachePool.pool;x!=null&&x.refCount++}break;case 24:Nh(u.memoizedState.cache)}if(x=u.child,x!==null)x.return=u,zn=x;else e:for(u=r;zn!==null;){x=zn;var w=x.sibling,C=x.return;if(Xw(x),x===u){zn=null;break e}if(w!==null){w.return=C,zn=w;break e}zn=C}}}var XA={getCacheForType:function(r){var o=qn(pn),u=o.data.get(r);return u===void 0&&(u=r(),o.data.set(r,u)),u},cacheSignal:function(){return qn(pn).controller.signal}},QA=typeof WeakMap=="function"?WeakMap:Map,ta=0,ba=null,Is=null,Us=0,oa=0,Zr=null,Ml=!1,eu=!1,g0=!1,$o=0,sn=0,Rl=0,Wc=0,v0=0,Xr=0,tu=0,Bh=null,Or=null,y0=!1,sx=0,lb=0,ax=1/0,nx=null,Ll=null,kn=0,Il=null,su=null,Wo=0,j0=0,N0=null,cb=null,zh=0,w0=null;function Qr(){return(ta&2)!==0&&Us!==0?Us&-Us:V.T!==null?k0():ne()}function db(){if(Xr===0)if((Us&536870912)===0||Ls){var r=ts;ts<<=1,(ts&3932160)===0&&(ts=262144),Xr=r}else Xr=536870912;return r=Kr.current,r!==null&&(r.flags|=32),Xr}function Mr(r,o,u){(r===ba&&(oa===2||oa===9)||r.cancelPendingCommit!==null)&&(au(r,0),Fl(r,Us,Xr,!1)),Re(r,u),((ta&2)===0||r!==ba)&&(r===ba&&((ta&2)===0&&(Wc|=u),sn===4&&Fl(r,Us,Xr,!1)),ho(r))}function ub(r,o,u){if((ta&6)!==0)throw Error(n(327));var x=!u&&(o&127)===0&&(o&r.expiredLanes)===0||Ta(r,o),w=x?t3(r,o):S0(r,o,!0),C=x;do{if(w===0){eu&&!x&&Fl(r,o,0,!1);break}else{if(u=r.current.alternate,C&&!JA(u)){w=S0(r,o,!1),C=!1;continue}if(w===2){if(C=o,r.errorRecoveryDisabledLanes&C)var Y=0;else Y=r.pendingLanes&-536870913,Y=Y!==0?Y:Y&536870912?536870912:0;if(Y!==0){o=Y;e:{var xe=r;w=Bh;var Ae=xe.current.memoizedState.isDehydrated;if(Ae&&(au(xe,Y).flags|=256),Y=S0(xe,Y,!1),Y!==2){if(g0&&!Ae){xe.errorRecoveryDisabledLanes|=C,Wc|=C,w=4;break e}C=Or,Or=w,C!==null&&(Or===null?Or=C:Or.push.apply(Or,C))}w=Y}if(C=!1,w!==2)continue}}if(w===1){au(r,0),Fl(r,o,0,!0);break}e:{switch(x=r,C=w,C){case 0:case 1:throw Error(n(345));case 4:if((o&4194048)!==o)break;case 6:Fl(x,o,Xr,!Ml);break e;case 2:Or=null;break;case 3:case 5:break;default:throw Error(n(329))}if((o&62914560)===o&&(w=sx+300-$t(),10<w)){if(Fl(x,o,Xr,!Ml),Ca(x,0,!0)!==0)break e;Wo=o,x.timeoutHandle=Vb(hb.bind(null,x,u,Or,nx,y0,o,Xr,Wc,tu,Ml,C,"Throttled",-0,0),w);break e}hb(x,u,Or,nx,y0,o,Xr,Wc,tu,Ml,C,null,-0,0)}}break}while(!0);ho(r)}function hb(r,o,u,x,w,C,Y,xe,Ae,qe,it,ft,Ye,at){if(r.timeoutHandle=-1,ft=o.subtreeFlags,ft&8192||(ft&16785408)===16785408){ft={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:_r},nb(o,C,ft);var zt=(C&62914560)===C?sx-$t():(C&4194048)===C?lb-$t():0;if(zt=I3(ft,zt),zt!==null){Wo=C,r.cancelPendingCommit=zt(jb.bind(null,r,o,C,u,x,w,Y,xe,Ae,it,ft,null,Ye,at)),Fl(r,C,Y,!qe);return}}jb(r,o,C,u,x,w,Y,xe,Ae)}function JA(r){for(var o=r;;){var u=o.tag;if((u===0||u===11||u===15)&&o.flags&16384&&(u=o.updateQueue,u!==null&&(u=u.stores,u!==null)))for(var x=0;x<u.length;x++){var w=u[x],C=w.getSnapshot;w=w.value;try{if(!Fn(C(),w))return!1}catch{return!1}}if(u=o.child,o.subtreeFlags&16384&&u!==null)u.return=o,o=u;else{if(o===r)break;for(;o.sibling===null;){if(o.return===null||o.return===r)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function Fl(r,o,u,x){o&=~v0,o&=~Wc,r.suspendedLanes|=o,r.pingedLanes&=~o,x&&(r.warmLanes|=o),x=r.expirationTimes;for(var w=o;0<w;){var C=31-Ce(w),Y=1<<C;x[C]=-1,w&=~Y}u!==0&&wt(r,u,o)}function rx(){return(ta&6)===0?(Uh(0),!1):!0}function b0(){if(Is!==null){if(oa===0)var r=Is.return;else r=Is,Mi=co=null,Bg(r),qd=null,bh=0,r=Is;for(;r!==null;)Hw(r.alternate,r),r=r.return;Is=null}}function au(r,o){var u=r.timeoutHandle;u!==-1&&(r.timeoutHandle=-1,y3(u)),u=r.cancelPendingCommit,u!==null&&(r.cancelPendingCommit=null,u()),Wo=0,b0(),ba=r,Is=u=mi(r.current,null),Us=o,oa=0,Zr=null,Ml=!1,eu=Ta(r,o),g0=!1,tu=Xr=v0=Wc=Rl=sn=0,Or=Bh=null,y0=!1,(o&8)!==0&&(o|=o&32);var x=r.entangledLanes;if(x!==0)for(r=r.entanglements,x&=o;0<x;){var w=31-Ce(x),C=1<<w;o|=r[w],x&=~C}return $o=o,Pc(),u}function mb(r,o){Ss=null,V.H=Dh,o===Gd||o===Mf?(o=EN(),oa=3):o===Tg?(o=EN(),oa=4):oa=o===t0?8:o!==null&&typeof o=="object"&&typeof o.then=="function"?6:1,Zr=o,Is===null&&(sn=1,Kf(r,m(o,r.current)))}function fb(){var r=Kr.current;return r===null?!0:(Us&4194048)===Us?fi===null:(Us&62914560)===Us||(Us&536870912)!==0?r===fi:!1}function xb(){var r=V.H;return V.H=Dh,r===null?Dh:r}function pb(){var r=V.A;return V.A=XA,r}function ix(){sn=4,Ml||(Us&4194048)!==Us&&Kr.current!==null||(eu=!0),(Rl&134217727)===0&&(Wc&134217727)===0||ba===null||Fl(ba,Us,Xr,!1)}function S0(r,o,u){var x=ta;ta|=2;var w=xb(),C=pb();(ba!==r||Us!==o)&&(nx=null,au(r,o)),o=!1;var Y=sn;e:do try{if(oa!==0&&Is!==null){var xe=Is,Ae=Zr;switch(oa){case 8:b0(),Y=6;break e;case 3:case 2:case 9:case 6:Kr.current===null&&(o=!0);var qe=oa;if(oa=0,Zr=null,nu(r,xe,Ae,qe),u&&eu){Y=0;break e}break;default:qe=oa,oa=0,Zr=null,nu(r,xe,Ae,qe)}}e3(),Y=sn;break}catch(it){mb(r,it)}while(!0);return o&&r.shellSuspendCounter++,Mi=co=null,ta=x,V.H=w,V.A=C,Is===null&&(ba=null,Us=0,Pc()),Y}function e3(){for(;Is!==null;)gb(Is)}function t3(r,o){var u=ta;ta|=2;var x=xb(),w=pb();ba!==r||Us!==o?(nx=null,ax=$t()+500,au(r,o)):eu=Ta(r,o);e:do try{if(oa!==0&&Is!==null){o=Is;var C=Zr;t:switch(oa){case 1:oa=0,Zr=null,nu(r,o,C,1);break;case 2:case 9:if(TN(C)){oa=0,Zr=null,vb(o);break}o=function(){oa!==2&&oa!==9||ba!==r||(oa=7),ho(r)},C.then(o,o);break e;case 3:oa=7;break e;case 4:oa=5;break e;case 7:TN(C)?(oa=0,Zr=null,vb(o)):(oa=0,Zr=null,nu(r,o,C,7));break;case 5:var Y=null;switch(Is.tag){case 26:Y=Is.memoizedState;case 5:case 27:var xe=Is;if(Y?a1(Y):xe.stateNode.complete){oa=0,Zr=null;var Ae=xe.sibling;if(Ae!==null)Is=Ae;else{var qe=xe.return;qe!==null?(Is=qe,ox(qe)):Is=null}break t}}oa=0,Zr=null,nu(r,o,C,5);break;case 6:oa=0,Zr=null,nu(r,o,C,6);break;case 8:b0(),sn=6;break e;default:throw Error(n(462))}}s3();break}catch(it){mb(r,it)}while(!0);return Mi=co=null,V.H=x,V.A=w,ta=u,Is!==null?0:(ba=null,Us=0,Pc(),sn)}function s3(){for(;Is!==null&&!$s();)gb(Is)}function gb(r){var o=Uw(r.alternate,r,$o);r.memoizedProps=r.pendingProps,o===null?ox(r):Is=o}function vb(r){var o=r,u=o.alternate;switch(o.tag){case 15:case 0:o=Rw(u,o,o.pendingProps,o.type,void 0,Us);break;case 11:o=Rw(u,o,o.pendingProps,o.type.render,o.ref,Us);break;case 5:Bg(o);default:Hw(u,o),o=Is=ph(o,$o),o=Uw(u,o,$o)}r.memoizedProps=r.pendingProps,o===null?ox(r):Is=o}function nu(r,o,u,x){Mi=co=null,Bg(o),qd=null,bh=0;var w=o.return;try{if($A(r,w,o,u,Us)){sn=1,Kf(r,m(u,r.current)),Is=null;return}}catch(C){if(w!==null)throw Is=w,C;sn=1,Kf(r,m(u,r.current)),Is=null;return}o.flags&32768?(Ls||x===1?r=!0:eu||(Us&536870912)!==0?r=!1:(Ml=r=!0,(x===2||x===9||x===3||x===6)&&(x=Kr.current,x!==null&&x.tag===13&&(x.flags|=16384))),yb(o,r)):ox(o)}function ox(r){var o=r;do{if((o.flags&32768)!==0){yb(o,Ml);return}r=o.return;var u=qA(o.alternate,o,$o);if(u!==null){Is=u;return}if(o=o.sibling,o!==null){Is=o;return}Is=o=r}while(o!==null);sn===0&&(sn=5)}function yb(r,o){do{var u=KA(r.alternate,r);if(u!==null){u.flags&=32767,Is=u;return}if(u=r.return,u!==null&&(u.flags|=32768,u.subtreeFlags=0,u.deletions=null),!o&&(r=r.sibling,r!==null)){Is=r;return}Is=r=u}while(r!==null);sn=6,Is=null}function jb(r,o,u,x,w,C,Y,xe,Ae){r.cancelPendingCommit=null;do lx();while(kn!==0);if((ta&6)!==0)throw Error(n(327));if(o!==null){if(o===r.current)throw Error(n(177));if(C=o.lanes|o.childLanes,C|=Bd,tt(r,u,C,Y,xe,Ae),r===ba&&(Is=ba=null,Us=0),su=o,Il=r,Wo=u,j0=C,N0=w,cb=x,(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?(r.callbackNode=null,r.callbackPriority=0,i3(He,function(){return _b(),null})):(r.callbackNode=null,r.callbackPriority=0),x=(o.flags&13878)!==0,(o.subtreeFlags&13878)!==0||x){x=V.T,V.T=null,w=ae.p,ae.p=2,Y=ta,ta|=4;try{YA(r,o,u)}finally{ta=Y,ae.p=w,V.T=x}}kn=1,Nb(),wb(),bb()}}function Nb(){if(kn===1){kn=0;var r=Il,o=su,u=(o.flags&13878)!==0;if((o.subtreeFlags&13878)!==0||u){u=V.T,V.T=null;var x=ae.p;ae.p=2;var w=ta;ta|=4;try{tb(o,r);var C=L0,Y=Tc(r.containerInfo),xe=C.focusedElem,Ae=C.selectionRange;if(Y!==xe&&xe&&xe.ownerDocument&&Rd(xe.ownerDocument.documentElement,xe)){if(Ae!==null&&so(xe)){var qe=Ae.start,it=Ae.end;if(it===void 0&&(it=qe),"selectionStart"in xe)xe.selectionStart=qe,xe.selectionEnd=Math.min(it,xe.value.length);else{var ft=xe.ownerDocument||document,Ye=ft&&ft.defaultView||window;if(Ye.getSelection){var at=Ye.getSelection(),zt=xe.textContent.length,os=Math.min(Ae.start,zt),va=Ae.end===void 0?os:Math.min(Ae.end,zt);!at.extend&&os>va&&(Y=va,va=os,os=Y);var Fe=Cc(xe,os),Oe=Cc(xe,va);if(Fe&&Oe&&(at.rangeCount!==1||at.anchorNode!==Fe.node||at.anchorOffset!==Fe.offset||at.focusNode!==Oe.node||at.focusOffset!==Oe.offset)){var Ge=ft.createRange();Ge.setStart(Fe.node,Fe.offset),at.removeAllRanges(),os>va?(at.addRange(Ge),at.extend(Oe.node,Oe.offset)):(Ge.setEnd(Oe.node,Oe.offset),at.addRange(Ge))}}}}for(ft=[],at=xe;at=at.parentNode;)at.nodeType===1&&ft.push({element:at,left:at.scrollLeft,top:at.scrollTop});for(typeof xe.focus=="function"&&xe.focus(),xe=0;xe<ft.length;xe++){var ct=ft[xe];ct.element.scrollLeft=ct.left,ct.element.scrollTop=ct.top}}jx=!!R0,L0=R0=null}finally{ta=w,ae.p=x,V.T=u}}r.current=o,kn=2}}function wb(){if(kn===2){kn=0;var r=Il,o=su,u=(o.flags&8772)!==0;if((o.subtreeFlags&8772)!==0||u){u=V.T,V.T=null;var x=ae.p;ae.p=2;var w=ta;ta|=4;try{Zw(r,o.alternate,o)}finally{ta=w,ae.p=x,V.T=u}}kn=3}}function bb(){if(kn===4||kn===3){kn=0,ws();var r=Il,o=su,u=Wo,x=cb;(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?kn=5:(kn=0,su=Il=null,Sb(r,r.pendingLanes));var w=r.pendingLanes;if(w===0&&(Ll=null),Nt(u),o=o.stateNode,Xe&&typeof Xe.onCommitFiberRoot=="function")try{Xe.onCommitFiberRoot(Ze,o,void 0,(o.current.flags&128)===128)}catch{}if(x!==null){o=V.T,w=ae.p,ae.p=2,V.T=null;try{for(var C=r.onRecoverableError,Y=0;Y<x.length;Y++){var xe=x[Y];C(xe.value,{componentStack:xe.stack})}}finally{V.T=o,ae.p=w}}(Wo&3)!==0&&lx(),ho(r),w=r.pendingLanes,(u&261930)!==0&&(w&42)!==0?r===w0?zh++:(zh=0,w0=r):zh=0,Uh(0)}}function Sb(r,o){(r.pooledCacheLanes&=o)===0&&(o=r.pooledCache,o!=null&&(r.pooledCache=null,Nh(o)))}function lx(){return Nb(),wb(),bb(),_b()}function _b(){if(kn!==5)return!1;var r=Il,o=j0;j0=0;var u=Nt(Wo),x=V.T,w=ae.p;try{ae.p=32>u?32:u,V.T=null,u=N0,N0=null;var C=Il,Y=Wo;if(kn=0,su=Il=null,Wo=0,(ta&6)!==0)throw Error(n(331));var xe=ta;if(ta|=4,ib(C.current),ab(C,C.current,Y,u),ta=xe,Uh(0,!1),Xe&&typeof Xe.onPostCommitFiberRoot=="function")try{Xe.onPostCommitFiberRoot(Ze,C)}catch{}return!0}finally{ae.p=w,V.T=x,Sb(r,o)}}function Cb(r,o,u){o=m(u,o),o=e0(r.stateNode,o,2),r=Al(r,o,2),r!==null&&(Re(r,2),ho(r))}function la(r,o,u){if(r.tag===3)Cb(r,r,u);else for(;o!==null;){if(o.tag===3){Cb(o,r,u);break}else if(o.tag===1){var x=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof x.componentDidCatch=="function"&&(Ll===null||!Ll.has(x))){r=m(u,r),u=Tw(2),x=Al(o,u,2),x!==null&&(kw(u,x,o,r),Re(x,2),ho(x));break}}o=o.return}}function _0(r,o,u){var x=r.pingCache;if(x===null){x=r.pingCache=new QA;var w=new Set;x.set(o,w)}else w=x.get(o),w===void 0&&(w=new Set,x.set(o,w));w.has(u)||(g0=!0,w.add(u),r=a3.bind(null,r,o,u),o.then(r,r))}function a3(r,o,u){var x=r.pingCache;x!==null&&x.delete(o),r.pingedLanes|=r.suspendedLanes&u,r.warmLanes&=~u,ba===r&&(Us&u)===u&&(sn===4||sn===3&&(Us&62914560)===Us&&300>$t()-sx?(ta&2)===0&&au(r,0):v0|=u,tu===Us&&(tu=0)),ho(r)}function Tb(r,o){o===0&&(o=Ps()),r=hi(r,o),r!==null&&(Re(r,o),ho(r))}function n3(r){var o=r.memoizedState,u=0;o!==null&&(u=o.retryLane),Tb(r,u)}function r3(r,o){var u=0;switch(r.tag){case 31:case 13:var x=r.stateNode,w=r.memoizedState;w!==null&&(u=w.retryLane);break;case 19:x=r.stateNode;break;case 22:x=r.stateNode._retryCache;break;default:throw Error(n(314))}x!==null&&x.delete(o),Tb(r,u)}function i3(r,o){return Hs(r,o)}var cx=null,ru=null,C0=!1,dx=!1,T0=!1,Bl=0;function ho(r){r!==ru&&r.next===null&&(ru===null?cx=ru=r:ru=ru.next=r),dx=!0,C0||(C0=!0,l3())}function Uh(r,o){if(!T0&&dx){T0=!0;do for(var u=!1,x=cx;x!==null;){if(r!==0){var w=x.pendingLanes;if(w===0)var C=0;else{var Y=x.suspendedLanes,xe=x.pingedLanes;C=(1<<31-Ce(42|r)+1)-1,C&=w&~(Y&~xe),C=C&201326741?C&201326741|1:C?C|2:0}C!==0&&(u=!0,Db(x,C))}else C=Us,C=Ca(x,x===ba?C:0,x.cancelPendingCommit!==null||x.timeoutHandle!==-1),(C&3)===0||Ta(x,C)||(u=!0,Db(x,C));x=x.next}while(u);T0=!1}}function o3(){kb()}function kb(){dx=C0=!1;var r=0;Bl!==0&&v3()&&(r=Bl);for(var o=$t(),u=null,x=cx;x!==null;){var w=x.next,C=Eb(x,o);C===0?(x.next=null,u===null?cx=w:u.next=w,w===null&&(ru=u)):(u=x,(r!==0||(C&3)!==0)&&(dx=!0)),x=w}kn!==0&&kn!==5||Uh(r),Bl!==0&&(Bl=0)}function Eb(r,o){for(var u=r.suspendedLanes,x=r.pingedLanes,w=r.expirationTimes,C=r.pendingLanes&-62914561;0<C;){var Y=31-Ce(C),xe=1<<Y,Ae=w[Y];Ae===-1?((xe&u)===0||(xe&x)!==0)&&(w[Y]=Qa(xe,o)):Ae<=o&&(r.expiredLanes|=xe),C&=~xe}if(o=ba,u=Us,u=Ca(r,r===o?u:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),x=r.callbackNode,u===0||r===o&&(oa===2||oa===9)||r.cancelPendingCommit!==null)return x!==null&&x!==null&&bs(x),r.callbackNode=null,r.callbackPriority=0;if((u&3)===0||Ta(r,u)){if(o=u&-u,o===r.callbackPriority)return o;switch(x!==null&&bs(x),Nt(u)){case 2:case 8:u=ht;break;case 32:u=He;break;case 268435456:u=Rt;break;default:u=He}return x=Ab.bind(null,r),u=Hs(u,x),r.callbackPriority=o,r.callbackNode=u,o}return x!==null&&x!==null&&bs(x),r.callbackPriority=2,r.callbackNode=null,2}function Ab(r,o){if(kn!==0&&kn!==5)return r.callbackNode=null,r.callbackPriority=0,null;var u=r.callbackNode;if(lx()&&r.callbackNode!==u)return null;var x=Us;return x=Ca(r,r===ba?x:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),x===0?null:(ub(r,x,o),Eb(r,$t()),r.callbackNode!=null&&r.callbackNode===u?Ab.bind(null,r):null)}function Db(r,o){if(lx())return null;ub(r,o,!0)}function l3(){j3(function(){(ta&6)!==0?Hs(Me,o3):kb()})}function k0(){if(Bl===0){var r=$d;r===0&&(r=Ot,Ot<<=1,(Ot&261888)===0&&(Ot=256)),Bl=r}return Bl}function Pb(r){return r==null||typeof r=="symbol"||typeof r=="boolean"?null:typeof r=="function"?r:fl(""+r)}function Ob(r,o){var u=o.ownerDocument.createElement("input");return u.name=o.name,u.value=o.value,r.id&&u.setAttribute("form",r.id),o.parentNode.insertBefore(u,o),r=new FormData(r),u.parentNode.removeChild(u),r}function c3(r,o,u,x,w){if(o==="submit"&&u&&u.stateNode===w){var C=Pb((w[fe]||null).action),Y=x.submitter;Y&&(o=(o=Y[fe]||null)?Pb(o.formAction):Y.getAttribute("formAction"),o!==null&&(C=o,Y=null));var xe=new kd("action","action",null,x,w);r.push({event:xe,listeners:[{instance:null,listener:function(){if(x.defaultPrevented){if(Bl!==0){var Ae=Y?Ob(w,Y):new FormData(w);Kg(u,{pending:!0,data:Ae,method:w.method,action:C},null,Ae)}}else typeof C=="function"&&(xe.preventDefault(),Ae=Y?Ob(w,Y):new FormData(w),Kg(u,{pending:!0,data:Ae,method:w.method,action:C},C,Ae))},currentTarget:w}]})}}for(var E0=0;E0<ro.length;E0++){var A0=ro[E0],d3=A0.toLowerCase(),u3=A0[0].toUpperCase()+A0.slice(1);Tr(d3,"on"+u3)}Tr(Ec,"onAnimationEnd"),Tr(kf,"onAnimationIteration"),Tr(Ac,"onAnimationStart"),Tr("dblclick","onDoubleClick"),Tr("focusin","onFocus"),Tr("focusout","onBlur"),Tr(yg,"onTransitionRun"),Tr(Ef,"onTransitionStart"),Tr(jg,"onTransitionCancel"),Tr(_l,"onTransitionEnd"),xn("onMouseEnter",["mouseout","mouseover"]),xn("onMouseLeave",["mouseout","mouseover"]),xn("onPointerEnter",["pointerout","pointerover"]),xn("onPointerLeave",["pointerout","pointerover"]),ss("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ss("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ss("onBeforeInput",["compositionend","keypress","textInput","paste"]),ss("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ss("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ss("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Vh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),h3=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Vh));function Mb(r,o){o=(o&4)!==0;for(var u=0;u<r.length;u++){var x=r[u],w=x.event;x=x.listeners;e:{var C=void 0;if(o)for(var Y=x.length-1;0<=Y;Y--){var xe=x[Y],Ae=xe.instance,qe=xe.currentTarget;if(xe=xe.listener,Ae!==C&&w.isPropagationStopped())break e;C=xe,w.currentTarget=qe;try{C(w)}catch(it){Dc(it)}w.currentTarget=null,C=Ae}else for(Y=0;Y<x.length;Y++){if(xe=x[Y],Ae=xe.instance,qe=xe.currentTarget,xe=xe.listener,Ae!==C&&w.isPropagationStopped())break e;C=xe,w.currentTarget=qe;try{C(w)}catch(it){Dc(it)}w.currentTarget=null,C=Ae}}}}function Fs(r,o){var u=o[Ue];u===void 0&&(u=o[Ue]=new Set);var x=r+"__bubble";u.has(x)||(Rb(o,r,2,!1),u.add(x))}function D0(r,o,u){var x=0;o&&(x|=4),Rb(u,r,x,o)}var ux="_reactListening"+Math.random().toString(36).slice(2);function P0(r){if(!r[ux]){r[ux]=!0,Ft.forEach(function(u){u!=="selectionchange"&&(h3.has(u)||D0(u,!1,r),D0(u,!0,r))});var o=r.nodeType===9?r:r.ownerDocument;o===null||o[ux]||(o[ux]=!0,D0("selectionchange",!1,o))}}function Rb(r,o,u,x){switch(d1(o)){case 2:var w=z3;break;case 8:w=U3;break;default:w=q0}u=w.bind(null,o,u,r),w=void 0,!gc||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(w=!0),x?w!==void 0?r.addEventListener(o,u,{capture:!0,passive:w}):r.addEventListener(o,u,!0):w!==void 0?r.addEventListener(o,u,{passive:w}):r.addEventListener(o,u,!1)}function O0(r,o,u,x,w){var C=x;if((o&1)===0&&(o&2)===0&&x!==null)e:for(;;){if(x===null)return;var Y=x.tag;if(Y===3||Y===4){var xe=x.stateNode.containerInfo;if(xe===w)break;if(Y===4)for(Y=x.return;Y!==null;){var Ae=Y.tag;if((Ae===3||Ae===4)&&Y.stateNode.containerInfo===w)return;Y=Y.return}for(;xe!==null;){if(Y=be(xe),Y===null)return;if(Ae=Y.tag,Ae===5||Ae===6||Ae===26||Ae===27){x=C=Y;continue e}xe=xe.parentNode}}x=x.return}rh(function(){var qe=C,it=pc(u),ft=[];e:{var Ye=Af.get(r);if(Ye!==void 0){var at=kd,zt=r;switch(r){case"keypress":if(vc(u)===0)break e;case"keydown":case"keyup":at=pf;break;case"focusin":zt="focus",at=lh;break;case"focusout":zt="blur",at=lh;break;case"beforeblur":case"afterblur":at=lh;break;case"click":if(u.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":at=uf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":at=lg;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":at=mg;break;case Ec:case kf:case Ac:at=ch;break;case _l:at=yf;break;case"scroll":case"scrollend":at=zs;break;case"wheel":at=Do;break;case"copy":case"cut":case"paste":at=li;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":at=gf;break;case"toggle":case"beforetoggle":at=Nc}var os=(o&4)!==0,va=!os&&(r==="scroll"||r==="scrollend"),Fe=os?Ye!==null?Ye+"Capture":null:Ye;os=[];for(var Oe=qe,Ge;Oe!==null;){var ct=Oe;if(Ge=ct.stateNode,ct=ct.tag,ct!==5&&ct!==26&&ct!==27||Ge===null||Fe===null||(ct=Eo(Oe,Fe),ct!=null&&os.push(Hh(Oe,ct,Ge))),va)break;Oe=Oe.return}0<os.length&&(Ye=new at(Ye,zt,null,u,it),ft.push({event:Ye,listeners:os}))}}if((o&7)===0){e:{if(Ye=r==="mouseover"||r==="pointerover",at=r==="mouseout"||r==="pointerout",Ye&&u!==Td&&(zt=u.relatedTarget||u.fromElement)&&(be(zt)||zt[je]))break e;if((at||Ye)&&(Ye=it.window===it?it:(Ye=it.ownerDocument)?Ye.defaultView||Ye.parentWindow:window,at?(zt=u.relatedTarget||u.toElement,at=qe,zt=zt?be(zt):null,zt!==null&&(va=c(zt),os=zt.tag,zt!==va||os!==5&&os!==27&&os!==6)&&(zt=null)):(at=null,zt=qe),at!==zt)){if(os=uf,ct="onMouseLeave",Fe="onMouseEnter",Oe="mouse",(r==="pointerout"||r==="pointerover")&&(os=gf,ct="onPointerLeave",Fe="onPointerEnter",Oe="pointer"),va=at==null?Ye:Pe(at),Ge=zt==null?Ye:Pe(zt),Ye=new os(ct,Oe+"leave",at,u,it),Ye.target=va,Ye.relatedTarget=Ge,ct=null,be(it)===qe&&(os=new os(Fe,Oe+"enter",zt,u,it),os.target=Ge,os.relatedTarget=va,ct=os),va=ct,at&&zt)t:{for(os=m3,Fe=at,Oe=zt,Ge=0,ct=Fe;ct;ct=os(ct))Ge++;ct=0;for(var ns=Oe;ns;ns=os(ns))ct++;for(;0<Ge-ct;)Fe=os(Fe),Ge--;for(;0<ct-Ge;)Oe=os(Oe),ct--;for(;Ge--;){if(Fe===Oe||Oe!==null&&Fe===Oe.alternate){os=Fe;break t}Fe=os(Fe),Oe=os(Oe)}os=null}else os=null;at!==null&&Lb(ft,Ye,at,os,!1),zt!==null&&va!==null&&Lb(ft,va,zt,os,!0)}}e:{if(Ye=qe?Pe(qe):window,at=Ye.nodeName&&Ye.nodeName.toLowerCase(),at==="select"||at==="input"&&Ye.type==="file")var Xs=_c;else if(ci(Ye))if(bf)Xs=vg;else{Xs=gg;var Ht=Di}else at=Ye.nodeName,!at||at.toLowerCase()!=="input"||Ye.type!=="checkbox"&&Ye.type!=="radio"?qe&&xc(qe.elementType)&&(Xs=_c):Xs=Nl;if(Xs&&(Xs=Xs(r,qe))){wf(ft,Xs,u,it);break e}Ht&&Ht(r,Ye,qe),r==="focusout"&&qe&&Ye.type==="number"&&qe.memoizedProps.value!=null&&ki(Ye,"number",Ye.value)}switch(Ht=qe?Pe(qe):window,r){case"focusin":(ci(Ht)||Ht.contentEditable==="true")&&(ao=Ht,Id=qe,kc=null);break;case"focusout":kc=Id=ao=null;break;case"mousedown":bl=!0;break;case"contextmenu":case"mouseup":case"dragend":bl=!1,Cf(ft,u,it);break;case"selectionchange":if(Ld)break;case"keydown":case"keyup":Cf(ft,u,it)}var Ds;if(Ad)e:{switch(r){case"compositionstart":var Vs="onCompositionStart";break e;case"compositionend":Vs="onCompositionEnd";break e;case"compositionupdate":Vs="onCompositionUpdate";break e}Vs=void 0}else vl?Nf(r,u)&&(Vs="onCompositionEnd"):r==="keydown"&&u.keyCode===229&&(Vs="onCompositionStart");Vs&&(Dd&&u.locale!=="ko"&&(vl||Vs!=="onCompositionStart"?Vs==="onCompositionEnd"&&vl&&(Ds=eo()):(oi=it,Ao="value"in oi?oi.value:oi.textContent,vl=!0)),Ht=hx(qe,Vs),0<Ht.length&&(Vs=new dh(Vs,r,null,u,it),ft.push({event:Vs,listeners:Ht}),Ds?Vs.data=Ds:(Ds=fh(u),Ds!==null&&(Vs.data=Ds)))),(Ds=xg?qr(r,u):yl(r,u))&&(Vs=hx(qe,"onBeforeInput"),0<Vs.length&&(Ht=new dh("onBeforeInput","beforeinput",null,u,it),ft.push({event:Ht,listeners:Vs}),Ht.data=Ds)),c3(ft,r,qe,u,it)}Mb(ft,o)})}function Hh(r,o,u){return{instance:r,listener:o,currentTarget:u}}function hx(r,o){for(var u=o+"Capture",x=[];r!==null;){var w=r,C=w.stateNode;if(w=w.tag,w!==5&&w!==26&&w!==27||C===null||(w=Eo(r,u),w!=null&&x.unshift(Hh(r,w,C)),w=Eo(r,o),w!=null&&x.push(Hh(r,w,C))),r.tag===3)return x;r=r.return}return[]}function m3(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5&&r.tag!==27);return r||null}function Lb(r,o,u,x,w){for(var C=o._reactName,Y=[];u!==null&&u!==x;){var xe=u,Ae=xe.alternate,qe=xe.stateNode;if(xe=xe.tag,Ae!==null&&Ae===x)break;xe!==5&&xe!==26&&xe!==27||qe===null||(Ae=qe,w?(qe=Eo(u,C),qe!=null&&Y.unshift(Hh(u,qe,Ae))):w||(qe=Eo(u,C),qe!=null&&Y.push(Hh(u,qe,Ae)))),u=u.return}Y.length!==0&&r.push({event:o,listeners:Y})}var f3=/\r\n?/g,x3=/\u0000|\uFFFD/g;function Ib(r){return(typeof r=="string"?r:""+r).replace(f3,`
`).replace(x3,"")}function Fb(r,o){return o=Ib(o),Ib(r)===o}function ga(r,o,u,x,w,C){switch(u){case"children":typeof x=="string"?o==="body"||o==="textarea"&&x===""||ii(r,x):(typeof x=="number"||typeof x=="bigint")&&o!=="body"&&ii(r,""+x);break;case"className":na(r,"class",x);break;case"tabIndex":na(r,"tabindex",x);break;case"dir":case"role":case"viewBox":case"width":case"height":na(r,u,x);break;case"style":_d(r,x,C);break;case"data":if(o!=="object"){na(r,"data",x);break}case"src":case"href":if(x===""&&(o!=="a"||u!=="href")){r.removeAttribute(u);break}if(x==null||typeof x=="function"||typeof x=="symbol"||typeof x=="boolean"){r.removeAttribute(u);break}x=fl(""+x),r.setAttribute(u,x);break;case"action":case"formAction":if(typeof x=="function"){r.setAttribute(u,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof C=="function"&&(u==="formAction"?(o!=="input"&&ga(r,o,"name",w.name,w,null),ga(r,o,"formEncType",w.formEncType,w,null),ga(r,o,"formMethod",w.formMethod,w,null),ga(r,o,"formTarget",w.formTarget,w,null)):(ga(r,o,"encType",w.encType,w,null),ga(r,o,"method",w.method,w,null),ga(r,o,"target",w.target,w,null)));if(x==null||typeof x=="symbol"||typeof x=="boolean"){r.removeAttribute(u);break}x=fl(""+x),r.setAttribute(u,x);break;case"onClick":x!=null&&(r.onclick=_r);break;case"onScroll":x!=null&&Fs("scroll",r);break;case"onScrollEnd":x!=null&&Fs("scrollend",r);break;case"dangerouslySetInnerHTML":if(x!=null){if(typeof x!="object"||!("__html"in x))throw Error(n(61));if(u=x.__html,u!=null){if(w.children!=null)throw Error(n(60));r.innerHTML=u}}break;case"multiple":r.multiple=x&&typeof x!="function"&&typeof x!="symbol";break;case"muted":r.muted=x&&typeof x!="function"&&typeof x!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(x==null||typeof x=="function"||typeof x=="boolean"||typeof x=="symbol"){r.removeAttribute("xlink:href");break}u=fl(""+x),r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",u);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":x!=null&&typeof x!="function"&&typeof x!="symbol"?r.setAttribute(u,""+x):r.removeAttribute(u);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":x&&typeof x!="function"&&typeof x!="symbol"?r.setAttribute(u,""):r.removeAttribute(u);break;case"capture":case"download":x===!0?r.setAttribute(u,""):x!==!1&&x!=null&&typeof x!="function"&&typeof x!="symbol"?r.setAttribute(u,x):r.removeAttribute(u);break;case"cols":case"rows":case"size":case"span":x!=null&&typeof x!="function"&&typeof x!="symbol"&&!isNaN(x)&&1<=x?r.setAttribute(u,x):r.removeAttribute(u);break;case"rowSpan":case"start":x==null||typeof x=="function"||typeof x=="symbol"||isNaN(x)?r.removeAttribute(u):r.setAttribute(u,x);break;case"popover":Fs("beforetoggle",r),Fs("toggle",r),ds(r,"popover",x);break;case"xlinkActuate":In(r,"http://www.w3.org/1999/xlink","xlink:actuate",x);break;case"xlinkArcrole":In(r,"http://www.w3.org/1999/xlink","xlink:arcrole",x);break;case"xlinkRole":In(r,"http://www.w3.org/1999/xlink","xlink:role",x);break;case"xlinkShow":In(r,"http://www.w3.org/1999/xlink","xlink:show",x);break;case"xlinkTitle":In(r,"http://www.w3.org/1999/xlink","xlink:title",x);break;case"xlinkType":In(r,"http://www.w3.org/1999/xlink","xlink:type",x);break;case"xmlBase":In(r,"http://www.w3.org/XML/1998/namespace","xml:base",x);break;case"xmlLang":In(r,"http://www.w3.org/XML/1998/namespace","xml:lang",x);break;case"xmlSpace":In(r,"http://www.w3.org/XML/1998/namespace","xml:space",x);break;case"is":ds(r,"is",x);break;case"innerText":case"textContent":break;default:(!(2<u.length)||u[0]!=="o"&&u[0]!=="O"||u[1]!=="n"&&u[1]!=="N")&&(u=Cd.get(u)||u,ds(r,u,x))}}function M0(r,o,u,x,w,C){switch(u){case"style":_d(r,x,C);break;case"dangerouslySetInnerHTML":if(x!=null){if(typeof x!="object"||!("__html"in x))throw Error(n(61));if(u=x.__html,u!=null){if(w.children!=null)throw Error(n(60));r.innerHTML=u}}break;case"children":typeof x=="string"?ii(r,x):(typeof x=="number"||typeof x=="bigint")&&ii(r,""+x);break;case"onScroll":x!=null&&Fs("scroll",r);break;case"onScrollEnd":x!=null&&Fs("scrollend",r);break;case"onClick":x!=null&&(r.onclick=_r);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!lt.hasOwnProperty(u))e:{if(u[0]==="o"&&u[1]==="n"&&(w=u.endsWith("Capture"),o=u.slice(2,w?u.length-7:void 0),C=r[fe]||null,C=C!=null?C[u]:null,typeof C=="function"&&r.removeEventListener(o,C,w),typeof x=="function")){typeof C!="function"&&C!==null&&(u in r?r[u]=null:r.hasAttribute(u)&&r.removeAttribute(u)),r.addEventListener(o,x,w);break e}u in r?r[u]=x:x===!0?r.setAttribute(u,""):ds(r,u,x)}}}function Yn(r,o,u){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Fs("error",r),Fs("load",r);var x=!1,w=!1,C;for(C in u)if(u.hasOwnProperty(C)){var Y=u[C];if(Y!=null)switch(C){case"src":x=!0;break;case"srcSet":w=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,o));default:ga(r,o,C,Y,u,null)}}w&&ga(r,o,"srcSet",u.srcSet,u,null),x&&ga(r,o,"src",u.src,u,null);return;case"input":Fs("invalid",r);var xe=C=Y=w=null,Ae=null,qe=null;for(x in u)if(u.hasOwnProperty(x)){var it=u[x];if(it!=null)switch(x){case"name":w=it;break;case"type":Y=it;break;case"checked":Ae=it;break;case"defaultChecked":qe=it;break;case"value":C=it;break;case"defaultValue":xe=it;break;case"children":case"dangerouslySetInnerHTML":if(it!=null)throw Error(n(137,o));break;default:ga(r,o,x,it,u,null)}}fc(r,C,xe,Ae,qe,Y,w,!1);return;case"select":Fs("invalid",r),x=Y=C=null;for(w in u)if(u.hasOwnProperty(w)&&(xe=u[w],xe!=null))switch(w){case"value":C=xe;break;case"defaultValue":Y=xe;break;case"multiple":x=xe;default:ga(r,o,w,xe,u,null)}o=C,u=Y,r.multiple=!!x,o!=null?wa(r,!!x,o,!1):u!=null&&wa(r,!!x,u,!0);return;case"textarea":Fs("invalid",r),C=w=x=null;for(Y in u)if(u.hasOwnProperty(Y)&&(xe=u[Y],xe!=null))switch(Y){case"value":x=xe;break;case"defaultValue":w=xe;break;case"children":C=xe;break;case"dangerouslySetInnerHTML":if(xe!=null)throw Error(n(91));break;default:ga(r,o,Y,xe,u,null)}hl(r,x,w,C);return;case"option":for(Ae in u)if(u.hasOwnProperty(Ae)&&(x=u[Ae],x!=null))switch(Ae){case"selected":r.selected=x&&typeof x!="function"&&typeof x!="symbol";break;default:ga(r,o,Ae,x,u,null)}return;case"dialog":Fs("beforetoggle",r),Fs("toggle",r),Fs("cancel",r),Fs("close",r);break;case"iframe":case"object":Fs("load",r);break;case"video":case"audio":for(x=0;x<Vh.length;x++)Fs(Vh[x],r);break;case"image":Fs("error",r),Fs("load",r);break;case"details":Fs("toggle",r);break;case"embed":case"source":case"link":Fs("error",r),Fs("load",r);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(qe in u)if(u.hasOwnProperty(qe)&&(x=u[qe],x!=null))switch(qe){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,o));default:ga(r,o,qe,x,u,null)}return;default:if(xc(o)){for(it in u)u.hasOwnProperty(it)&&(x=u[it],x!==void 0&&M0(r,o,it,x,u,void 0));return}}for(xe in u)u.hasOwnProperty(xe)&&(x=u[xe],x!=null&&ga(r,o,xe,x,u,null))}function p3(r,o,u,x){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var w=null,C=null,Y=null,xe=null,Ae=null,qe=null,it=null;for(at in u){var ft=u[at];if(u.hasOwnProperty(at)&&ft!=null)switch(at){case"checked":break;case"value":break;case"defaultValue":Ae=ft;default:x.hasOwnProperty(at)||ga(r,o,at,null,x,ft)}}for(var Ye in x){var at=x[Ye];if(ft=u[Ye],x.hasOwnProperty(Ye)&&(at!=null||ft!=null))switch(Ye){case"type":C=at;break;case"name":w=at;break;case"checked":qe=at;break;case"defaultChecked":it=at;break;case"value":Y=at;break;case"defaultValue":xe=at;break;case"children":case"dangerouslySetInnerHTML":if(at!=null)throw Error(n(137,o));break;default:at!==ft&&ga(r,o,Ye,at,x,ft)}}sh(r,Y,xe,Ae,qe,it,C,w);return;case"select":at=Y=xe=Ye=null;for(C in u)if(Ae=u[C],u.hasOwnProperty(C)&&Ae!=null)switch(C){case"value":break;case"multiple":at=Ae;default:x.hasOwnProperty(C)||ga(r,o,C,null,x,Ae)}for(w in x)if(C=x[w],Ae=u[w],x.hasOwnProperty(w)&&(C!=null||Ae!=null))switch(w){case"value":Ye=C;break;case"defaultValue":xe=C;break;case"multiple":Y=C;default:C!==Ae&&ga(r,o,w,C,x,Ae)}o=xe,u=Y,x=at,Ye!=null?wa(r,!!u,Ye,!1):!!x!=!!u&&(o!=null?wa(r,!!u,o,!0):wa(r,!!u,u?[]:"",!1));return;case"textarea":at=Ye=null;for(xe in u)if(w=u[xe],u.hasOwnProperty(xe)&&w!=null&&!x.hasOwnProperty(xe))switch(xe){case"value":break;case"children":break;default:ga(r,o,xe,null,x,w)}for(Y in x)if(w=x[Y],C=u[Y],x.hasOwnProperty(Y)&&(w!=null||C!=null))switch(Y){case"value":Ye=w;break;case"defaultValue":at=w;break;case"children":break;case"dangerouslySetInnerHTML":if(w!=null)throw Error(n(91));break;default:w!==C&&ga(r,o,Y,w,x,C)}Ji(r,Ye,at);return;case"option":for(var zt in u)if(Ye=u[zt],u.hasOwnProperty(zt)&&Ye!=null&&!x.hasOwnProperty(zt))switch(zt){case"selected":r.selected=!1;break;default:ga(r,o,zt,null,x,Ye)}for(Ae in x)if(Ye=x[Ae],at=u[Ae],x.hasOwnProperty(Ae)&&Ye!==at&&(Ye!=null||at!=null))switch(Ae){case"selected":r.selected=Ye&&typeof Ye!="function"&&typeof Ye!="symbol";break;default:ga(r,o,Ae,Ye,x,at)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var os in u)Ye=u[os],u.hasOwnProperty(os)&&Ye!=null&&!x.hasOwnProperty(os)&&ga(r,o,os,null,x,Ye);for(qe in x)if(Ye=x[qe],at=u[qe],x.hasOwnProperty(qe)&&Ye!==at&&(Ye!=null||at!=null))switch(qe){case"children":case"dangerouslySetInnerHTML":if(Ye!=null)throw Error(n(137,o));break;default:ga(r,o,qe,Ye,x,at)}return;default:if(xc(o)){for(var va in u)Ye=u[va],u.hasOwnProperty(va)&&Ye!==void 0&&!x.hasOwnProperty(va)&&M0(r,o,va,void 0,x,Ye);for(it in x)Ye=x[it],at=u[it],!x.hasOwnProperty(it)||Ye===at||Ye===void 0&&at===void 0||M0(r,o,it,Ye,x,at);return}}for(var Fe in u)Ye=u[Fe],u.hasOwnProperty(Fe)&&Ye!=null&&!x.hasOwnProperty(Fe)&&ga(r,o,Fe,null,x,Ye);for(ft in x)Ye=x[ft],at=u[ft],!x.hasOwnProperty(ft)||Ye===at||Ye==null&&at==null||ga(r,o,ft,Ye,x,at)}function Bb(r){switch(r){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function g3(){if(typeof performance.getEntriesByType=="function"){for(var r=0,o=0,u=performance.getEntriesByType("resource"),x=0;x<u.length;x++){var w=u[x],C=w.transferSize,Y=w.initiatorType,xe=w.duration;if(C&&xe&&Bb(Y)){for(Y=0,xe=w.responseEnd,x+=1;x<u.length;x++){var Ae=u[x],qe=Ae.startTime;if(qe>xe)break;var it=Ae.transferSize,ft=Ae.initiatorType;it&&Bb(ft)&&(Ae=Ae.responseEnd,Y+=it*(Ae<xe?1:(xe-qe)/(Ae-qe)))}if(--x,o+=8*(C+Y)/(w.duration/1e3),r++,10<r)break}}if(0<r)return o/r/1e6}return navigator.connection&&(r=navigator.connection.downlink,typeof r=="number")?r:5}var R0=null,L0=null;function mx(r){return r.nodeType===9?r:r.ownerDocument}function zb(r){switch(r){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Ub(r,o){if(r===0)switch(o){case"svg":return 1;case"math":return 2;default:return 0}return r===1&&o==="foreignObject"?0:r}function I0(r,o){return r==="textarea"||r==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.children=="bigint"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var F0=null;function v3(){var r=window.event;return r&&r.type==="popstate"?r===F0?!1:(F0=r,!0):(F0=null,!1)}var Vb=typeof setTimeout=="function"?setTimeout:void 0,y3=typeof clearTimeout=="function"?clearTimeout:void 0,Hb=typeof Promise=="function"?Promise:void 0,j3=typeof queueMicrotask=="function"?queueMicrotask:typeof Hb<"u"?function(r){return Hb.resolve(null).then(r).catch(N3)}:Vb;function N3(r){setTimeout(function(){throw r})}function zl(r){return r==="head"}function $b(r,o){var u=o,x=0;do{var w=u.nextSibling;if(r.removeChild(u),w&&w.nodeType===8)if(u=w.data,u==="/$"||u==="/&"){if(x===0){r.removeChild(w),cu(o);return}x--}else if(u==="$"||u==="$?"||u==="$~"||u==="$!"||u==="&")x++;else if(u==="html")$h(r.ownerDocument.documentElement);else if(u==="head"){u=r.ownerDocument.head,$h(u);for(var C=u.firstChild;C;){var Y=C.nextSibling,xe=C.nodeName;C[We]||xe==="SCRIPT"||xe==="STYLE"||xe==="LINK"&&C.rel.toLowerCase()==="stylesheet"||u.removeChild(C),C=Y}}else u==="body"&&$h(r.ownerDocument.body);u=w}while(u);cu(o)}function Wb(r,o){var u=r;r=0;do{var x=u.nextSibling;if(u.nodeType===1?o?(u._stashedDisplay=u.style.display,u.style.display="none"):(u.style.display=u._stashedDisplay||"",u.getAttribute("style")===""&&u.removeAttribute("style")):u.nodeType===3&&(o?(u._stashedText=u.nodeValue,u.nodeValue=""):u.nodeValue=u._stashedText||""),x&&x.nodeType===8)if(u=x.data,u==="/$"){if(r===0)break;r--}else u!=="$"&&u!=="$?"&&u!=="$~"&&u!=="$!"||r++;u=x}while(u)}function B0(r){var o=r.firstChild;for(o&&o.nodeType===10&&(o=o.nextSibling);o;){var u=o;switch(o=o.nextSibling,u.nodeName){case"HTML":case"HEAD":case"BODY":B0(u),pt(u);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(u.rel.toLowerCase()==="stylesheet")continue}r.removeChild(u)}}function w3(r,o,u,x){for(;r.nodeType===1;){var w=u;if(r.nodeName.toLowerCase()!==o.toLowerCase()){if(!x&&(r.nodeName!=="INPUT"||r.type!=="hidden"))break}else if(x){if(!r[We])switch(o){case"meta":if(!r.hasAttribute("itemprop"))break;return r;case"link":if(C=r.getAttribute("rel"),C==="stylesheet"&&r.hasAttribute("data-precedence"))break;if(C!==w.rel||r.getAttribute("href")!==(w.href==null||w.href===""?null:w.href)||r.getAttribute("crossorigin")!==(w.crossOrigin==null?null:w.crossOrigin)||r.getAttribute("title")!==(w.title==null?null:w.title))break;return r;case"style":if(r.hasAttribute("data-precedence"))break;return r;case"script":if(C=r.getAttribute("src"),(C!==(w.src==null?null:w.src)||r.getAttribute("type")!==(w.type==null?null:w.type)||r.getAttribute("crossorigin")!==(w.crossOrigin==null?null:w.crossOrigin))&&C&&r.hasAttribute("async")&&!r.hasAttribute("itemprop"))break;return r;default:return r}}else if(o==="input"&&r.type==="hidden"){var C=w.name==null?null:""+w.name;if(w.type==="hidden"&&r.getAttribute("name")===C)return r}else return r;if(r=xi(r.nextSibling),r===null)break}return null}function b3(r,o,u){if(o==="")return null;for(;r.nodeType!==3;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!u||(r=xi(r.nextSibling),r===null))return null;return r}function Gb(r,o){for(;r.nodeType!==8;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!o||(r=xi(r.nextSibling),r===null))return null;return r}function z0(r){return r.data==="$?"||r.data==="$~"}function U0(r){return r.data==="$!"||r.data==="$?"&&r.ownerDocument.readyState!=="loading"}function S3(r,o){var u=r.ownerDocument;if(r.data==="$~")r._reactRetry=o;else if(r.data!=="$?"||u.readyState!=="loading")o();else{var x=function(){o(),u.removeEventListener("DOMContentLoaded",x)};u.addEventListener("DOMContentLoaded",x),r._reactRetry=x}}function xi(r){for(;r!=null;r=r.nextSibling){var o=r.nodeType;if(o===1||o===3)break;if(o===8){if(o=r.data,o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"||o==="F!"||o==="F")break;if(o==="/$"||o==="/&")return null}}return r}var V0=null;function qb(r){r=r.nextSibling;for(var o=0;r;){if(r.nodeType===8){var u=r.data;if(u==="/$"||u==="/&"){if(o===0)return xi(r.nextSibling);o--}else u!=="$"&&u!=="$!"&&u!=="$?"&&u!=="$~"&&u!=="&"||o++}r=r.nextSibling}return null}function Kb(r){r=r.previousSibling;for(var o=0;r;){if(r.nodeType===8){var u=r.data;if(u==="$"||u==="$!"||u==="$?"||u==="$~"||u==="&"){if(o===0)return r;o--}else u!=="/$"&&u!=="/&"||o++}r=r.previousSibling}return null}function Yb(r,o,u){switch(o=mx(u),r){case"html":if(r=o.documentElement,!r)throw Error(n(452));return r;case"head":if(r=o.head,!r)throw Error(n(453));return r;case"body":if(r=o.body,!r)throw Error(n(454));return r;default:throw Error(n(451))}}function $h(r){for(var o=r.attributes;o.length;)r.removeAttributeNode(o[0]);pt(r)}var pi=new Map,Zb=new Set;function fx(r){return typeof r.getRootNode=="function"?r.getRootNode():r.nodeType===9?r:r.ownerDocument}var Go=ae.d;ae.d={f:_3,r:C3,D:T3,C:k3,L:E3,m:A3,X:P3,S:D3,M:O3};function _3(){var r=Go.f(),o=rx();return r||o}function C3(r){var o=st(r);o!==null&&o.tag===5&&o.type==="form"?mw(o):Go.r(r)}var iu=typeof document>"u"?null:document;function Xb(r,o,u){var x=iu;if(x&&typeof o=="string"&&o){var w=ka(o);w='link[rel="'+r+'"][href="'+w+'"]',typeof u=="string"&&(w+='[crossorigin="'+u+'"]'),Zb.has(w)||(Zb.add(w),r={rel:r,crossOrigin:u,href:o},x.querySelector(w)===null&&(o=x.createElement("link"),Yn(o,"link",r),gt(o),x.head.appendChild(o)))}}function T3(r){Go.D(r),Xb("dns-prefetch",r,null)}function k3(r,o){Go.C(r,o),Xb("preconnect",r,o)}function E3(r,o,u){Go.L(r,o,u);var x=iu;if(x&&r&&o){var w='link[rel="preload"][as="'+ka(o)+'"]';o==="image"&&u&&u.imageSrcSet?(w+='[imagesrcset="'+ka(u.imageSrcSet)+'"]',typeof u.imageSizes=="string"&&(w+='[imagesizes="'+ka(u.imageSizes)+'"]')):w+='[href="'+ka(r)+'"]';var C=w;switch(o){case"style":C=ou(r);break;case"script":C=lu(r)}pi.has(C)||(r=v({rel:"preload",href:o==="image"&&u&&u.imageSrcSet?void 0:r,as:o},u),pi.set(C,r),x.querySelector(w)!==null||o==="style"&&x.querySelector(Wh(C))||o==="script"&&x.querySelector(Gh(C))||(o=x.createElement("link"),Yn(o,"link",r),gt(o),x.head.appendChild(o)))}}function A3(r,o){Go.m(r,o);var u=iu;if(u&&r){var x=o&&typeof o.as=="string"?o.as:"script",w='link[rel="modulepreload"][as="'+ka(x)+'"][href="'+ka(r)+'"]',C=w;switch(x){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":C=lu(r)}if(!pi.has(C)&&(r=v({rel:"modulepreload",href:r},o),pi.set(C,r),u.querySelector(w)===null)){switch(x){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(u.querySelector(Gh(C)))return}x=u.createElement("link"),Yn(x,"link",r),gt(x),u.head.appendChild(x)}}}function D3(r,o,u){Go.S(r,o,u);var x=iu;if(x&&r){var w=dt(x).hoistableStyles,C=ou(r);o=o||"default";var Y=w.get(C);if(!Y){var xe={loading:0,preload:null};if(Y=x.querySelector(Wh(C)))xe.loading=5;else{r=v({rel:"stylesheet",href:r,"data-precedence":o},u),(u=pi.get(C))&&H0(r,u);var Ae=Y=x.createElement("link");gt(Ae),Yn(Ae,"link",r),Ae._p=new Promise(function(qe,it){Ae.onload=qe,Ae.onerror=it}),Ae.addEventListener("load",function(){xe.loading|=1}),Ae.addEventListener("error",function(){xe.loading|=2}),xe.loading|=4,xx(Y,o,x)}Y={type:"stylesheet",instance:Y,count:1,state:xe},w.set(C,Y)}}}function P3(r,o){Go.X(r,o);var u=iu;if(u&&r){var x=dt(u).hoistableScripts,w=lu(r),C=x.get(w);C||(C=u.querySelector(Gh(w)),C||(r=v({src:r,async:!0},o),(o=pi.get(w))&&$0(r,o),C=u.createElement("script"),gt(C),Yn(C,"link",r),u.head.appendChild(C)),C={type:"script",instance:C,count:1,state:null},x.set(w,C))}}function O3(r,o){Go.M(r,o);var u=iu;if(u&&r){var x=dt(u).hoistableScripts,w=lu(r),C=x.get(w);C||(C=u.querySelector(Gh(w)),C||(r=v({src:r,async:!0,type:"module"},o),(o=pi.get(w))&&$0(r,o),C=u.createElement("script"),gt(C),Yn(C,"link",r),u.head.appendChild(C)),C={type:"script",instance:C,count:1,state:null},x.set(w,C))}}function Qb(r,o,u,x){var w=(w=de.current)?fx(w):null;if(!w)throw Error(n(446));switch(r){case"meta":case"title":return null;case"style":return typeof u.precedence=="string"&&typeof u.href=="string"?(o=ou(u.href),u=dt(w).hoistableStyles,x=u.get(o),x||(x={type:"style",instance:null,count:0,state:null},u.set(o,x)),x):{type:"void",instance:null,count:0,state:null};case"link":if(u.rel==="stylesheet"&&typeof u.href=="string"&&typeof u.precedence=="string"){r=ou(u.href);var C=dt(w).hoistableStyles,Y=C.get(r);if(Y||(w=w.ownerDocument||w,Y={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},C.set(r,Y),(C=w.querySelector(Wh(r)))&&!C._p&&(Y.instance=C,Y.state.loading=5),pi.has(r)||(u={rel:"preload",as:"style",href:u.href,crossOrigin:u.crossOrigin,integrity:u.integrity,media:u.media,hrefLang:u.hrefLang,referrerPolicy:u.referrerPolicy},pi.set(r,u),C||M3(w,r,u,Y.state))),o&&x===null)throw Error(n(528,""));return Y}if(o&&x!==null)throw Error(n(529,""));return null;case"script":return o=u.async,u=u.src,typeof u=="string"&&o&&typeof o!="function"&&typeof o!="symbol"?(o=lu(u),u=dt(w).hoistableScripts,x=u.get(o),x||(x={type:"script",instance:null,count:0,state:null},u.set(o,x)),x):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,r))}}function ou(r){return'href="'+ka(r)+'"'}function Wh(r){return'link[rel="stylesheet"]['+r+"]"}function Jb(r){return v({},r,{"data-precedence":r.precedence,precedence:null})}function M3(r,o,u,x){r.querySelector('link[rel="preload"][as="style"]['+o+"]")?x.loading=1:(o=r.createElement("link"),x.preload=o,o.addEventListener("load",function(){return x.loading|=1}),o.addEventListener("error",function(){return x.loading|=2}),Yn(o,"link",u),gt(o),r.head.appendChild(o))}function lu(r){return'[src="'+ka(r)+'"]'}function Gh(r){return"script[async]"+r}function e1(r,o,u){if(o.count++,o.instance===null)switch(o.type){case"style":var x=r.querySelector('style[data-href~="'+ka(u.href)+'"]');if(x)return o.instance=x,gt(x),x;var w=v({},u,{"data-href":u.href,"data-precedence":u.precedence,href:null,precedence:null});return x=(r.ownerDocument||r).createElement("style"),gt(x),Yn(x,"style",w),xx(x,u.precedence,r),o.instance=x;case"stylesheet":w=ou(u.href);var C=r.querySelector(Wh(w));if(C)return o.state.loading|=4,o.instance=C,gt(C),C;x=Jb(u),(w=pi.get(w))&&H0(x,w),C=(r.ownerDocument||r).createElement("link"),gt(C);var Y=C;return Y._p=new Promise(function(xe,Ae){Y.onload=xe,Y.onerror=Ae}),Yn(C,"link",x),o.state.loading|=4,xx(C,u.precedence,r),o.instance=C;case"script":return C=lu(u.src),(w=r.querySelector(Gh(C)))?(o.instance=w,gt(w),w):(x=u,(w=pi.get(C))&&(x=v({},u),$0(x,w)),r=r.ownerDocument||r,w=r.createElement("script"),gt(w),Yn(w,"link",x),r.head.appendChild(w),o.instance=w);case"void":return null;default:throw Error(n(443,o.type))}else o.type==="stylesheet"&&(o.state.loading&4)===0&&(x=o.instance,o.state.loading|=4,xx(x,u.precedence,r));return o.instance}function xx(r,o,u){for(var x=u.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),w=x.length?x[x.length-1]:null,C=w,Y=0;Y<x.length;Y++){var xe=x[Y];if(xe.dataset.precedence===o)C=xe;else if(C!==w)break}C?C.parentNode.insertBefore(r,C.nextSibling):(o=u.nodeType===9?u.head:u,o.insertBefore(r,o.firstChild))}function H0(r,o){r.crossOrigin==null&&(r.crossOrigin=o.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=o.referrerPolicy),r.title==null&&(r.title=o.title)}function $0(r,o){r.crossOrigin==null&&(r.crossOrigin=o.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=o.referrerPolicy),r.integrity==null&&(r.integrity=o.integrity)}var px=null;function t1(r,o,u){if(px===null){var x=new Map,w=px=new Map;w.set(u,x)}else w=px,x=w.get(u),x||(x=new Map,w.set(u,x));if(x.has(r))return x;for(x.set(r,null),u=u.getElementsByTagName(r),w=0;w<u.length;w++){var C=u[w];if(!(C[We]||C[B]||r==="link"&&C.getAttribute("rel")==="stylesheet")&&C.namespaceURI!=="http://www.w3.org/2000/svg"){var Y=C.getAttribute(o)||"";Y=r+Y;var xe=x.get(Y);xe?xe.push(C):x.set(Y,[C])}}return x}function s1(r,o,u){r=r.ownerDocument||r,r.head.insertBefore(u,o==="title"?r.querySelector("head > title"):null)}function R3(r,o,u){if(u===1||o.itemProp!=null)return!1;switch(r){case"meta":case"title":return!0;case"style":if(typeof o.precedence!="string"||typeof o.href!="string"||o.href==="")break;return!0;case"link":if(typeof o.rel!="string"||typeof o.href!="string"||o.href===""||o.onLoad||o.onError)break;switch(o.rel){case"stylesheet":return r=o.disabled,typeof o.precedence=="string"&&r==null;default:return!0}case"script":if(o.async&&typeof o.async!="function"&&typeof o.async!="symbol"&&!o.onLoad&&!o.onError&&o.src&&typeof o.src=="string")return!0}return!1}function a1(r){return!(r.type==="stylesheet"&&(r.state.loading&3)===0)}function L3(r,o,u,x){if(u.type==="stylesheet"&&(typeof x.media!="string"||matchMedia(x.media).matches!==!1)&&(u.state.loading&4)===0){if(u.instance===null){var w=ou(x.href),C=o.querySelector(Wh(w));if(C){o=C._p,o!==null&&typeof o=="object"&&typeof o.then=="function"&&(r.count++,r=gx.bind(r),o.then(r,r)),u.state.loading|=4,u.instance=C,gt(C);return}C=o.ownerDocument||o,x=Jb(x),(w=pi.get(w))&&H0(x,w),C=C.createElement("link"),gt(C);var Y=C;Y._p=new Promise(function(xe,Ae){Y.onload=xe,Y.onerror=Ae}),Yn(C,"link",x),u.instance=C}r.stylesheets===null&&(r.stylesheets=new Map),r.stylesheets.set(u,o),(o=u.state.preload)&&(u.state.loading&3)===0&&(r.count++,u=gx.bind(r),o.addEventListener("load",u),o.addEventListener("error",u))}}var W0=0;function I3(r,o){return r.stylesheets&&r.count===0&&yx(r,r.stylesheets),0<r.count||0<r.imgCount?function(u){var x=setTimeout(function(){if(r.stylesheets&&yx(r,r.stylesheets),r.unsuspend){var C=r.unsuspend;r.unsuspend=null,C()}},6e4+o);0<r.imgBytes&&W0===0&&(W0=62500*g3());var w=setTimeout(function(){if(r.waitingForImages=!1,r.count===0&&(r.stylesheets&&yx(r,r.stylesheets),r.unsuspend)){var C=r.unsuspend;r.unsuspend=null,C()}},(r.imgBytes>W0?50:800)+o);return r.unsuspend=u,function(){r.unsuspend=null,clearTimeout(x),clearTimeout(w)}}:null}function gx(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)yx(this,this.stylesheets);else if(this.unsuspend){var r=this.unsuspend;this.unsuspend=null,r()}}}var vx=null;function yx(r,o){r.stylesheets=null,r.unsuspend!==null&&(r.count++,vx=new Map,o.forEach(F3,r),vx=null,gx.call(r))}function F3(r,o){if(!(o.state.loading&4)){var u=vx.get(r);if(u)var x=u.get(null);else{u=new Map,vx.set(r,u);for(var w=r.querySelectorAll("link[data-precedence],style[data-precedence]"),C=0;C<w.length;C++){var Y=w[C];(Y.nodeName==="LINK"||Y.getAttribute("media")!=="not all")&&(u.set(Y.dataset.precedence,Y),x=Y)}x&&u.set(null,x)}w=o.instance,Y=w.getAttribute("data-precedence"),C=u.get(Y)||x,C===x&&u.set(null,w),u.set(Y,w),this.count++,x=gx.bind(this),w.addEventListener("load",x),w.addEventListener("error",x),C?C.parentNode.insertBefore(w,C.nextSibling):(r=r.nodeType===9?r.head:r,r.insertBefore(w,r.firstChild)),o.state.loading|=4}}var qh={$$typeof:O,Provider:null,Consumer:null,_currentValue:ge,_currentValue2:ge,_threadCount:0};function B3(r,o,u,x,w,C,Y,xe,Ae){this.tag=1,this.containerInfo=r,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ie(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ie(0),this.hiddenUpdates=ie(null),this.identifierPrefix=x,this.onUncaughtError=w,this.onCaughtError=C,this.onRecoverableError=Y,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=Ae,this.incompleteTransitions=new Map}function n1(r,o,u,x,w,C,Y,xe,Ae,qe,it,ft){return r=new B3(r,o,u,Y,Ae,qe,it,ft,xe),o=1,C===!0&&(o|=24),C=or(3,null,null,o),r.current=C,C.stateNode=r,o=Sg(),o.refCount++,r.pooledCache=o,o.refCount++,C.memoizedState={element:x,isDehydrated:u,cache:o},kg(C),r}function r1(r){return r?(r=Po,r):Po}function i1(r,o,u,x,w,C){w=r1(w),x.context===null?x.context=w:x.pendingContext=w,x=El(o),x.payload={element:u},C=C===void 0?null:C,C!==null&&(x.callback=C),u=Al(r,x,o),u!==null&&(Mr(u,r,o),_h(u,r,o))}function o1(r,o){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var u=r.retryLane;r.retryLane=u!==0&&u<o?u:o}}function G0(r,o){o1(r,o),(r=r.alternate)&&o1(r,o)}function l1(r){if(r.tag===13||r.tag===31){var o=hi(r,67108864);o!==null&&Mr(o,r,67108864),G0(r,67108864)}}function c1(r){if(r.tag===13||r.tag===31){var o=Qr();o=gs(o);var u=hi(r,o);u!==null&&Mr(u,r,o),G0(r,o)}}var jx=!0;function z3(r,o,u,x){var w=V.T;V.T=null;var C=ae.p;try{ae.p=2,q0(r,o,u,x)}finally{ae.p=C,V.T=w}}function U3(r,o,u,x){var w=V.T;V.T=null;var C=ae.p;try{ae.p=8,q0(r,o,u,x)}finally{ae.p=C,V.T=w}}function q0(r,o,u,x){if(jx){var w=K0(x);if(w===null)O0(r,o,x,Nx,u),u1(r,x);else if(H3(w,r,o,u,x))x.stopPropagation();else if(u1(r,x),o&4&&-1<V3.indexOf(r)){for(;w!==null;){var C=st(w);if(C!==null)switch(C.tag){case 3:if(C=C.stateNode,C.current.memoizedState.isDehydrated){var Y=Zt(C.pendingLanes);if(Y!==0){var xe=C;for(xe.pendingLanes|=2,xe.entangledLanes|=2;Y;){var Ae=1<<31-Ce(Y);xe.entanglements[1]|=Ae,Y&=~Ae}ho(C),(ta&6)===0&&(ax=$t()+500,Uh(0))}}break;case 31:case 13:xe=hi(C,2),xe!==null&&Mr(xe,C,2),rx(),G0(C,2)}if(C=K0(x),C===null&&O0(r,o,x,Nx,u),C===w)break;w=C}w!==null&&x.stopPropagation()}else O0(r,o,x,null,u)}}function K0(r){return r=pc(r),Y0(r)}var Nx=null;function Y0(r){if(Nx=null,r=be(r),r!==null){var o=c(r);if(o===null)r=null;else{var u=o.tag;if(u===13){if(r=d(o),r!==null)return r;r=null}else if(u===31){if(r=h(o),r!==null)return r;r=null}else if(u===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;r=null}else o!==r&&(r=null)}}return Nx=r,null}function d1(r){switch(r){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Na()){case Me:return 2;case ht:return 8;case He:case Mt:return 32;case Rt:return 268435456;default:return 32}default:return 32}}var Z0=!1,Ul=null,Vl=null,Hl=null,Kh=new Map,Yh=new Map,$l=[],V3="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function u1(r,o){switch(r){case"focusin":case"focusout":Ul=null;break;case"dragenter":case"dragleave":Vl=null;break;case"mouseover":case"mouseout":Hl=null;break;case"pointerover":case"pointerout":Kh.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":Yh.delete(o.pointerId)}}function Zh(r,o,u,x,w,C){return r===null||r.nativeEvent!==C?(r={blockedOn:o,domEventName:u,eventSystemFlags:x,nativeEvent:C,targetContainers:[w]},o!==null&&(o=st(o),o!==null&&l1(o)),r):(r.eventSystemFlags|=x,o=r.targetContainers,w!==null&&o.indexOf(w)===-1&&o.push(w),r)}function H3(r,o,u,x,w){switch(o){case"focusin":return Ul=Zh(Ul,r,o,u,x,w),!0;case"dragenter":return Vl=Zh(Vl,r,o,u,x,w),!0;case"mouseover":return Hl=Zh(Hl,r,o,u,x,w),!0;case"pointerover":var C=w.pointerId;return Kh.set(C,Zh(Kh.get(C)||null,r,o,u,x,w)),!0;case"gotpointercapture":return C=w.pointerId,Yh.set(C,Zh(Yh.get(C)||null,r,o,u,x,w)),!0}return!1}function h1(r){var o=be(r.target);if(o!==null){var u=c(o);if(u!==null){if(o=u.tag,o===13){if(o=d(u),o!==null){r.blockedOn=o,ye(r.priority,function(){c1(u)});return}}else if(o===31){if(o=h(u),o!==null){r.blockedOn=o,ye(r.priority,function(){c1(u)});return}}else if(o===3&&u.stateNode.current.memoizedState.isDehydrated){r.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}r.blockedOn=null}function wx(r){if(r.blockedOn!==null)return!1;for(var o=r.targetContainers;0<o.length;){var u=K0(r.nativeEvent);if(u===null){u=r.nativeEvent;var x=new u.constructor(u.type,u);Td=x,u.target.dispatchEvent(x),Td=null}else return o=st(u),o!==null&&l1(o),r.blockedOn=u,!1;o.shift()}return!0}function m1(r,o,u){wx(r)&&u.delete(o)}function $3(){Z0=!1,Ul!==null&&wx(Ul)&&(Ul=null),Vl!==null&&wx(Vl)&&(Vl=null),Hl!==null&&wx(Hl)&&(Hl=null),Kh.forEach(m1),Yh.forEach(m1)}function bx(r,o){r.blockedOn===o&&(r.blockedOn=null,Z0||(Z0=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,$3)))}var Sx=null;function f1(r){Sx!==r&&(Sx=r,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){Sx===r&&(Sx=null);for(var o=0;o<r.length;o+=3){var u=r[o],x=r[o+1],w=r[o+2];if(typeof x!="function"){if(Y0(x||u)===null)continue;break}var C=st(u);C!==null&&(r.splice(o,3),o-=3,Kg(C,{pending:!0,data:w,method:u.method,action:x},x,w))}}))}function cu(r){function o(Ae){return bx(Ae,r)}Ul!==null&&bx(Ul,r),Vl!==null&&bx(Vl,r),Hl!==null&&bx(Hl,r),Kh.forEach(o),Yh.forEach(o);for(var u=0;u<$l.length;u++){var x=$l[u];x.blockedOn===r&&(x.blockedOn=null)}for(;0<$l.length&&(u=$l[0],u.blockedOn===null);)h1(u),u.blockedOn===null&&$l.shift();if(u=(r.ownerDocument||r).$$reactFormReplay,u!=null)for(x=0;x<u.length;x+=3){var w=u[x],C=u[x+1],Y=w[fe]||null;if(typeof C=="function")Y||f1(u);else if(Y){var xe=null;if(C&&C.hasAttribute("formAction")){if(w=C,Y=C[fe]||null)xe=Y.formAction;else if(Y0(w)!==null)continue}else xe=Y.action;typeof xe=="function"?u[x+1]=xe:(u.splice(x,3),x-=3),f1(u)}}}function x1(){function r(C){C.canIntercept&&C.info==="react-transition"&&C.intercept({handler:function(){return new Promise(function(Y){return w=Y})},focusReset:"manual",scroll:"manual"})}function o(){w!==null&&(w(),w=null),x||setTimeout(u,20)}function u(){if(!x&&!navigation.transition){var C=navigation.currentEntry;C&&C.url!=null&&navigation.navigate(C.url,{state:C.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var x=!1,w=null;return navigation.addEventListener("navigate",r),navigation.addEventListener("navigatesuccess",o),navigation.addEventListener("navigateerror",o),setTimeout(u,100),function(){x=!0,navigation.removeEventListener("navigate",r),navigation.removeEventListener("navigatesuccess",o),navigation.removeEventListener("navigateerror",o),w!==null&&(w(),w=null)}}}function X0(r){this._internalRoot=r}_x.prototype.render=X0.prototype.render=function(r){var o=this._internalRoot;if(o===null)throw Error(n(409));var u=o.current,x=Qr();i1(u,x,r,o,null,null)},_x.prototype.unmount=X0.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var o=r.containerInfo;i1(r.current,2,null,r,null,null),rx(),o[je]=null}};function _x(r){this._internalRoot=r}_x.prototype.unstable_scheduleHydration=function(r){if(r){var o=ne();r={blockedOn:null,target:r,priority:o};for(var u=0;u<$l.length&&o!==0&&o<$l[u].priority;u++);$l.splice(u,0,r),u===0&&h1(r)}};var p1=s.version;if(p1!=="19.2.0")throw Error(n(527,p1,"19.2.0"));ae.findDOMNode=function(r){var o=r._reactInternals;if(o===void 0)throw typeof r.render=="function"?Error(n(188)):(r=Object.keys(r).join(","),Error(n(268,r)));return r=g(o),r=r!==null?p(r):null,r=r===null?null:r.stateNode,r};var W3={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:V,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Cx=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Cx.isDisabled&&Cx.supportsFiber)try{Ze=Cx.inject(W3),Xe=Cx}catch{}}return Jh.createRoot=function(r,o){if(!i(r))throw Error(n(299));var u=!1,x="",w=bw,C=Sw,Y=_w;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(x=o.identifierPrefix),o.onUncaughtError!==void 0&&(w=o.onUncaughtError),o.onCaughtError!==void 0&&(C=o.onCaughtError),o.onRecoverableError!==void 0&&(Y=o.onRecoverableError)),o=n1(r,1,!1,null,null,u,x,null,w,C,Y,x1),r[je]=o.current,P0(r),new X0(o)},Jh.hydrateRoot=function(r,o,u){if(!i(r))throw Error(n(299));var x=!1,w="",C=bw,Y=Sw,xe=_w,Ae=null;return u!=null&&(u.unstable_strictMode===!0&&(x=!0),u.identifierPrefix!==void 0&&(w=u.identifierPrefix),u.onUncaughtError!==void 0&&(C=u.onUncaughtError),u.onCaughtError!==void 0&&(Y=u.onCaughtError),u.onRecoverableError!==void 0&&(xe=u.onRecoverableError),u.formState!==void 0&&(Ae=u.formState)),o=n1(r,1,!0,o,u??null,x,w,Ae,C,Y,xe,x1),o.context=r1(null),u=o.current,x=Qr(),x=gs(x),w=El(x),w.callback=null,Al(u,w,x),u=x,o.current.lanes=u,Re(o,u),ho(o),r[je]=o.current,P0(r),new _x(o)},Jh.version="19.2.0",Jh}var A1;function tP(){if(A1)return sv.exports;A1=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(s){console.error(s)}}return t(),sv.exports=eP(),sv.exports}var sP=tP();const ij="-",aP=t=>{const s=rP(t),{conflictingClassGroups:a,conflictingClassGroupModifiers:n}=t;return{getClassGroupId:d=>{const h=d.split(ij);return h[0]===""&&h.length!==1&&h.shift(),q_(h,s)||nP(d)},getConflictingClassGroupIds:(d,h)=>{const f=a[d]||[];return h&&n[d]?[...f,...n[d]]:f}}},q_=(t,s)=>{if(t.length===0)return s.classGroupId;const a=t[0],n=s.nextPart.get(a),i=n?q_(t.slice(1),n):void 0;if(i)return i;if(s.validators.length===0)return;const c=t.join(ij);return s.validators.find(({validator:d})=>d(c))?.classGroupId},D1=/^\[(.+)\]$/,nP=t=>{if(D1.test(t)){const s=D1.exec(t)[1],a=s?.substring(0,s.indexOf(":"));if(a)return"arbitrary.."+a}},rP=t=>{const{theme:s,classGroups:a}=t,n={nextPart:new Map,validators:[]};for(const i in a)Zv(a[i],n,i,s);return n},Zv=(t,s,a,n)=>{t.forEach(i=>{if(typeof i=="string"){const c=i===""?s:P1(s,i);c.classGroupId=a;return}if(typeof i=="function"){if(iP(i)){Zv(i(n),s,a,n);return}s.validators.push({validator:i,classGroupId:a});return}Object.entries(i).forEach(([c,d])=>{Zv(d,P1(s,c),a,n)})})},P1=(t,s)=>{let a=t;return s.split(ij).forEach(n=>{a.nextPart.has(n)||a.nextPart.set(n,{nextPart:new Map,validators:[]}),a=a.nextPart.get(n)}),a},iP=t=>t.isThemeGetter,oP=t=>{if(t<1)return{get:()=>{},set:()=>{}};let s=0,a=new Map,n=new Map;const i=(c,d)=>{a.set(c,d),s++,s>t&&(s=0,n=a,a=new Map)};return{get(c){let d=a.get(c);if(d!==void 0)return d;if((d=n.get(c))!==void 0)return i(c,d),d},set(c,d){a.has(c)?a.set(c,d):i(c,d)}}},Xv="!",Qv=":",lP=Qv.length,cP=t=>{const{prefix:s,experimentalParseClassName:a}=t;let n=i=>{const c=[];let d=0,h=0,f=0,g;for(let S=0;S<i.length;S++){let b=i[S];if(d===0&&h===0){if(b===Qv){c.push(i.slice(f,S)),f=S+lP;continue}if(b==="/"){g=S;continue}}b==="["?d++:b==="]"?d--:b==="("?h++:b===")"&&h--}const p=c.length===0?i:i.substring(f),v=dP(p),y=v!==p,_=g&&g>f?g-f:void 0;return{modifiers:c,hasImportantModifier:y,baseClassName:v,maybePostfixModifierPosition:_}};if(s){const i=s+Qv,c=n;n=d=>d.startsWith(i)?c(d.substring(i.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:d,maybePostfixModifierPosition:void 0}}if(a){const i=n;n=c=>a({className:c,parseClassName:i})}return n},dP=t=>t.endsWith(Xv)?t.substring(0,t.length-1):t.startsWith(Xv)?t.substring(1):t,uP=t=>{const s=Object.fromEntries(t.orderSensitiveModifiers.map(n=>[n,!0]));return n=>{if(n.length<=1)return n;const i=[];let c=[];return n.forEach(d=>{d[0]==="["||s[d]?(i.push(...c.sort(),d),c=[]):c.push(d)}),i.push(...c.sort()),i}},hP=t=>({cache:oP(t.cacheSize),parseClassName:cP(t),sortModifiers:uP(t),...aP(t)}),mP=/\s+/,fP=(t,s)=>{const{parseClassName:a,getClassGroupId:n,getConflictingClassGroupIds:i,sortModifiers:c}=s,d=[],h=t.trim().split(mP);let f="";for(let g=h.length-1;g>=0;g-=1){const p=h[g],{isExternal:v,modifiers:y,hasImportantModifier:_,baseClassName:S,maybePostfixModifierPosition:b}=a(p);if(v){f=p+(f.length>0?" "+f:f);continue}let T=!!b,E=n(T?S.substring(0,b):S);if(!E){if(!T){f=p+(f.length>0?" "+f:f);continue}if(E=n(S),!E){f=p+(f.length>0?" "+f:f);continue}T=!1}const A=c(y).join(":"),O=_?A+Xv:A,Q=O+E;if(d.includes(Q))continue;d.push(Q);const q=i(E,T);for(let U=0;U<q.length;++U){const D=q[U];d.push(O+D)}f=p+(f.length>0?" "+f:f)}return f};function xP(){let t=0,s,a,n="";for(;t<arguments.length;)(s=arguments[t++])&&(a=K_(s))&&(n&&(n+=" "),n+=a);return n}const K_=t=>{if(typeof t=="string")return t;let s,a="";for(let n=0;n<t.length;n++)t[n]&&(s=K_(t[n]))&&(a&&(a+=" "),a+=s);return a};function pP(t,...s){let a,n,i,c=d;function d(f){const g=s.reduce((p,v)=>v(p),t());return a=hP(g),n=a.cache.get,i=a.cache.set,c=h,h(f)}function h(f){const g=n(f);if(g)return g;const p=fP(f,a);return i(f,p),p}return function(){return c(xP.apply(null,arguments))}}const En=t=>{const s=a=>a[t]||[];return s.isThemeGetter=!0,s},Y_=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,Z_=/^\((?:(\w[\w-]*):)?(.+)\)$/i,gP=/^\d+\/\d+$/,vP=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,yP=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,jP=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,NP=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,wP=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,du=t=>gP.test(t),Rs=t=>!!t&&!Number.isNaN(Number(t)),Gl=t=>!!t&&Number.isInteger(Number(t)),rv=t=>t.endsWith("%")&&Rs(t.slice(0,-1)),qo=t=>vP.test(t),bP=()=>!0,SP=t=>yP.test(t)&&!jP.test(t),X_=()=>!1,_P=t=>NP.test(t),CP=t=>wP.test(t),TP=t=>!Ut(t)&&!Vt(t),kP=t=>Vu(t,e4,X_),Ut=t=>Y_.test(t),Gc=t=>Vu(t,t4,SP),iv=t=>Vu(t,OP,Rs),O1=t=>Vu(t,Q_,X_),EP=t=>Vu(t,J_,CP),Dx=t=>Vu(t,s4,_P),Vt=t=>Z_.test(t),em=t=>Hu(t,t4),AP=t=>Hu(t,MP),M1=t=>Hu(t,Q_),DP=t=>Hu(t,e4),PP=t=>Hu(t,J_),Px=t=>Hu(t,s4,!0),Vu=(t,s,a)=>{const n=Y_.exec(t);return n?n[1]?s(n[1]):a(n[2]):!1},Hu=(t,s,a=!1)=>{const n=Z_.exec(t);return n?n[1]?s(n[1]):a:!1},Q_=t=>t==="position"||t==="percentage",J_=t=>t==="image"||t==="url",e4=t=>t==="length"||t==="size"||t==="bg-size",t4=t=>t==="length",OP=t=>t==="number",MP=t=>t==="family-name",s4=t=>t==="shadow",RP=()=>{const t=En("color"),s=En("font"),a=En("text"),n=En("font-weight"),i=En("tracking"),c=En("leading"),d=En("breakpoint"),h=En("container"),f=En("spacing"),g=En("radius"),p=En("shadow"),v=En("inset-shadow"),y=En("text-shadow"),_=En("drop-shadow"),S=En("blur"),b=En("perspective"),T=En("aspect"),E=En("ease"),A=En("animate"),O=()=>["auto","avoid","all","avoid-page","page","left","right","column"],Q=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],q=()=>[...Q(),Vt,Ut],U=()=>["auto","hidden","clip","visible","scroll"],D=()=>["auto","contain","none"],M=()=>[Vt,Ut,f],P=()=>[du,"full","auto",...M()],G=()=>[Gl,"none","subgrid",Vt,Ut],K=()=>["auto",{span:["full",Gl,Vt,Ut]},Gl,Vt,Ut],z=()=>[Gl,"auto",Vt,Ut],J=()=>["auto","min","max","fr",Vt,Ut],W=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],he=()=>["start","end","center","stretch","center-safe","end-safe"],V=()=>["auto",...M()],ae=()=>[du,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...M()],ge=()=>[t,Vt,Ut],Z=()=>[...Q(),M1,O1,{position:[Vt,Ut]}],ee=()=>["no-repeat",{repeat:["","x","y","space","round"]}],te=()=>["auto","cover","contain",DP,kP,{size:[Vt,Ut]}],X=()=>[rv,em,Gc],ce=()=>["","none","full",g,Vt,Ut],F=()=>["",Rs,em,Gc],re=()=>["solid","dashed","dotted","double"],de=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],me=()=>[Rs,rv,M1,O1],De=()=>["","none",S,Vt,Ut],Ne=()=>["none",Rs,Vt,Ut],pe=()=>["none",Rs,Vt,Ut],Le=()=>[Rs,Vt,Ut],ot=()=>[du,"full",...M()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[qo],breakpoint:[qo],color:[bP],container:[qo],"drop-shadow":[qo],ease:["in","out","in-out"],font:[TP],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[qo],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[qo],shadow:[qo],spacing:["px",Rs],text:[qo],"text-shadow":[qo],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",du,Ut,Vt,T]}],container:["container"],columns:[{columns:[Rs,Ut,Vt,h]}],"break-after":[{"break-after":O()}],"break-before":[{"break-before":O()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:q()}],overflow:[{overflow:U()}],"overflow-x":[{"overflow-x":U()}],"overflow-y":[{"overflow-y":U()}],overscroll:[{overscroll:D()}],"overscroll-x":[{"overscroll-x":D()}],"overscroll-y":[{"overscroll-y":D()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:P()}],"inset-x":[{"inset-x":P()}],"inset-y":[{"inset-y":P()}],start:[{start:P()}],end:[{end:P()}],top:[{top:P()}],right:[{right:P()}],bottom:[{bottom:P()}],left:[{left:P()}],visibility:["visible","invisible","collapse"],z:[{z:[Gl,"auto",Vt,Ut]}],basis:[{basis:[du,"full","auto",h,...M()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[Rs,du,"auto","initial","none",Ut]}],grow:[{grow:["",Rs,Vt,Ut]}],shrink:[{shrink:["",Rs,Vt,Ut]}],order:[{order:[Gl,"first","last","none",Vt,Ut]}],"grid-cols":[{"grid-cols":G()}],"col-start-end":[{col:K()}],"col-start":[{"col-start":z()}],"col-end":[{"col-end":z()}],"grid-rows":[{"grid-rows":G()}],"row-start-end":[{row:K()}],"row-start":[{"row-start":z()}],"row-end":[{"row-end":z()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":J()}],"auto-rows":[{"auto-rows":J()}],gap:[{gap:M()}],"gap-x":[{"gap-x":M()}],"gap-y":[{"gap-y":M()}],"justify-content":[{justify:[...W(),"normal"]}],"justify-items":[{"justify-items":[...he(),"normal"]}],"justify-self":[{"justify-self":["auto",...he()]}],"align-content":[{content:["normal",...W()]}],"align-items":[{items:[...he(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...he(),{baseline:["","last"]}]}],"place-content":[{"place-content":W()}],"place-items":[{"place-items":[...he(),"baseline"]}],"place-self":[{"place-self":["auto",...he()]}],p:[{p:M()}],px:[{px:M()}],py:[{py:M()}],ps:[{ps:M()}],pe:[{pe:M()}],pt:[{pt:M()}],pr:[{pr:M()}],pb:[{pb:M()}],pl:[{pl:M()}],m:[{m:V()}],mx:[{mx:V()}],my:[{my:V()}],ms:[{ms:V()}],me:[{me:V()}],mt:[{mt:V()}],mr:[{mr:V()}],mb:[{mb:V()}],ml:[{ml:V()}],"space-x":[{"space-x":M()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":M()}],"space-y-reverse":["space-y-reverse"],size:[{size:ae()}],w:[{w:[h,"screen",...ae()]}],"min-w":[{"min-w":[h,"screen","none",...ae()]}],"max-w":[{"max-w":[h,"screen","none","prose",{screen:[d]},...ae()]}],h:[{h:["screen","lh",...ae()]}],"min-h":[{"min-h":["screen","lh","none",...ae()]}],"max-h":[{"max-h":["screen","lh",...ae()]}],"font-size":[{text:["base",a,em,Gc]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[n,Vt,iv]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",rv,Ut]}],"font-family":[{font:[AP,Ut,s]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[i,Vt,Ut]}],"line-clamp":[{"line-clamp":[Rs,"none",Vt,iv]}],leading:[{leading:[c,...M()]}],"list-image":[{"list-image":["none",Vt,Ut]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",Vt,Ut]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:ge()}],"text-color":[{text:ge()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...re(),"wavy"]}],"text-decoration-thickness":[{decoration:[Rs,"from-font","auto",Vt,Gc]}],"text-decoration-color":[{decoration:ge()}],"underline-offset":[{"underline-offset":[Rs,"auto",Vt,Ut]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:M()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Vt,Ut]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Vt,Ut]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:Z()}],"bg-repeat":[{bg:ee()}],"bg-size":[{bg:te()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},Gl,Vt,Ut],radial:["",Vt,Ut],conic:[Gl,Vt,Ut]},PP,EP]}],"bg-color":[{bg:ge()}],"gradient-from-pos":[{from:X()}],"gradient-via-pos":[{via:X()}],"gradient-to-pos":[{to:X()}],"gradient-from":[{from:ge()}],"gradient-via":[{via:ge()}],"gradient-to":[{to:ge()}],rounded:[{rounded:ce()}],"rounded-s":[{"rounded-s":ce()}],"rounded-e":[{"rounded-e":ce()}],"rounded-t":[{"rounded-t":ce()}],"rounded-r":[{"rounded-r":ce()}],"rounded-b":[{"rounded-b":ce()}],"rounded-l":[{"rounded-l":ce()}],"rounded-ss":[{"rounded-ss":ce()}],"rounded-se":[{"rounded-se":ce()}],"rounded-ee":[{"rounded-ee":ce()}],"rounded-es":[{"rounded-es":ce()}],"rounded-tl":[{"rounded-tl":ce()}],"rounded-tr":[{"rounded-tr":ce()}],"rounded-br":[{"rounded-br":ce()}],"rounded-bl":[{"rounded-bl":ce()}],"border-w":[{border:F()}],"border-w-x":[{"border-x":F()}],"border-w-y":[{"border-y":F()}],"border-w-s":[{"border-s":F()}],"border-w-e":[{"border-e":F()}],"border-w-t":[{"border-t":F()}],"border-w-r":[{"border-r":F()}],"border-w-b":[{"border-b":F()}],"border-w-l":[{"border-l":F()}],"divide-x":[{"divide-x":F()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":F()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...re(),"hidden","none"]}],"divide-style":[{divide:[...re(),"hidden","none"]}],"border-color":[{border:ge()}],"border-color-x":[{"border-x":ge()}],"border-color-y":[{"border-y":ge()}],"border-color-s":[{"border-s":ge()}],"border-color-e":[{"border-e":ge()}],"border-color-t":[{"border-t":ge()}],"border-color-r":[{"border-r":ge()}],"border-color-b":[{"border-b":ge()}],"border-color-l":[{"border-l":ge()}],"divide-color":[{divide:ge()}],"outline-style":[{outline:[...re(),"none","hidden"]}],"outline-offset":[{"outline-offset":[Rs,Vt,Ut]}],"outline-w":[{outline:["",Rs,em,Gc]}],"outline-color":[{outline:ge()}],shadow:[{shadow:["","none",p,Px,Dx]}],"shadow-color":[{shadow:ge()}],"inset-shadow":[{"inset-shadow":["none",v,Px,Dx]}],"inset-shadow-color":[{"inset-shadow":ge()}],"ring-w":[{ring:F()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:ge()}],"ring-offset-w":[{"ring-offset":[Rs,Gc]}],"ring-offset-color":[{"ring-offset":ge()}],"inset-ring-w":[{"inset-ring":F()}],"inset-ring-color":[{"inset-ring":ge()}],"text-shadow":[{"text-shadow":["none",y,Px,Dx]}],"text-shadow-color":[{"text-shadow":ge()}],opacity:[{opacity:[Rs,Vt,Ut]}],"mix-blend":[{"mix-blend":[...de(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":de()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[Rs]}],"mask-image-linear-from-pos":[{"mask-linear-from":me()}],"mask-image-linear-to-pos":[{"mask-linear-to":me()}],"mask-image-linear-from-color":[{"mask-linear-from":ge()}],"mask-image-linear-to-color":[{"mask-linear-to":ge()}],"mask-image-t-from-pos":[{"mask-t-from":me()}],"mask-image-t-to-pos":[{"mask-t-to":me()}],"mask-image-t-from-color":[{"mask-t-from":ge()}],"mask-image-t-to-color":[{"mask-t-to":ge()}],"mask-image-r-from-pos":[{"mask-r-from":me()}],"mask-image-r-to-pos":[{"mask-r-to":me()}],"mask-image-r-from-color":[{"mask-r-from":ge()}],"mask-image-r-to-color":[{"mask-r-to":ge()}],"mask-image-b-from-pos":[{"mask-b-from":me()}],"mask-image-b-to-pos":[{"mask-b-to":me()}],"mask-image-b-from-color":[{"mask-b-from":ge()}],"mask-image-b-to-color":[{"mask-b-to":ge()}],"mask-image-l-from-pos":[{"mask-l-from":me()}],"mask-image-l-to-pos":[{"mask-l-to":me()}],"mask-image-l-from-color":[{"mask-l-from":ge()}],"mask-image-l-to-color":[{"mask-l-to":ge()}],"mask-image-x-from-pos":[{"mask-x-from":me()}],"mask-image-x-to-pos":[{"mask-x-to":me()}],"mask-image-x-from-color":[{"mask-x-from":ge()}],"mask-image-x-to-color":[{"mask-x-to":ge()}],"mask-image-y-from-pos":[{"mask-y-from":me()}],"mask-image-y-to-pos":[{"mask-y-to":me()}],"mask-image-y-from-color":[{"mask-y-from":ge()}],"mask-image-y-to-color":[{"mask-y-to":ge()}],"mask-image-radial":[{"mask-radial":[Vt,Ut]}],"mask-image-radial-from-pos":[{"mask-radial-from":me()}],"mask-image-radial-to-pos":[{"mask-radial-to":me()}],"mask-image-radial-from-color":[{"mask-radial-from":ge()}],"mask-image-radial-to-color":[{"mask-radial-to":ge()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":Q()}],"mask-image-conic-pos":[{"mask-conic":[Rs]}],"mask-image-conic-from-pos":[{"mask-conic-from":me()}],"mask-image-conic-to-pos":[{"mask-conic-to":me()}],"mask-image-conic-from-color":[{"mask-conic-from":ge()}],"mask-image-conic-to-color":[{"mask-conic-to":ge()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:Z()}],"mask-repeat":[{mask:ee()}],"mask-size":[{mask:te()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",Vt,Ut]}],filter:[{filter:["","none",Vt,Ut]}],blur:[{blur:De()}],brightness:[{brightness:[Rs,Vt,Ut]}],contrast:[{contrast:[Rs,Vt,Ut]}],"drop-shadow":[{"drop-shadow":["","none",_,Px,Dx]}],"drop-shadow-color":[{"drop-shadow":ge()}],grayscale:[{grayscale:["",Rs,Vt,Ut]}],"hue-rotate":[{"hue-rotate":[Rs,Vt,Ut]}],invert:[{invert:["",Rs,Vt,Ut]}],saturate:[{saturate:[Rs,Vt,Ut]}],sepia:[{sepia:["",Rs,Vt,Ut]}],"backdrop-filter":[{"backdrop-filter":["","none",Vt,Ut]}],"backdrop-blur":[{"backdrop-blur":De()}],"backdrop-brightness":[{"backdrop-brightness":[Rs,Vt,Ut]}],"backdrop-contrast":[{"backdrop-contrast":[Rs,Vt,Ut]}],"backdrop-grayscale":[{"backdrop-grayscale":["",Rs,Vt,Ut]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[Rs,Vt,Ut]}],"backdrop-invert":[{"backdrop-invert":["",Rs,Vt,Ut]}],"backdrop-opacity":[{"backdrop-opacity":[Rs,Vt,Ut]}],"backdrop-saturate":[{"backdrop-saturate":[Rs,Vt,Ut]}],"backdrop-sepia":[{"backdrop-sepia":["",Rs,Vt,Ut]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":M()}],"border-spacing-x":[{"border-spacing-x":M()}],"border-spacing-y":[{"border-spacing-y":M()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",Vt,Ut]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[Rs,"initial",Vt,Ut]}],ease:[{ease:["linear","initial",E,Vt,Ut]}],delay:[{delay:[Rs,Vt,Ut]}],animate:[{animate:["none",A,Vt,Ut]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[b,Vt,Ut]}],"perspective-origin":[{"perspective-origin":q()}],rotate:[{rotate:Ne()}],"rotate-x":[{"rotate-x":Ne()}],"rotate-y":[{"rotate-y":Ne()}],"rotate-z":[{"rotate-z":Ne()}],scale:[{scale:pe()}],"scale-x":[{"scale-x":pe()}],"scale-y":[{"scale-y":pe()}],"scale-z":[{"scale-z":pe()}],"scale-3d":["scale-3d"],skew:[{skew:Le()}],"skew-x":[{"skew-x":Le()}],"skew-y":[{"skew-y":Le()}],transform:[{transform:[Vt,Ut,"","none","gpu","cpu"]}],"transform-origin":[{origin:q()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:ot()}],"translate-x":[{"translate-x":ot()}],"translate-y":[{"translate-y":ot()}],"translate-z":[{"translate-z":ot()}],"translate-none":["translate-none"],accent:[{accent:ge()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:ge()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Vt,Ut]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":M()}],"scroll-mx":[{"scroll-mx":M()}],"scroll-my":[{"scroll-my":M()}],"scroll-ms":[{"scroll-ms":M()}],"scroll-me":[{"scroll-me":M()}],"scroll-mt":[{"scroll-mt":M()}],"scroll-mr":[{"scroll-mr":M()}],"scroll-mb":[{"scroll-mb":M()}],"scroll-ml":[{"scroll-ml":M()}],"scroll-p":[{"scroll-p":M()}],"scroll-px":[{"scroll-px":M()}],"scroll-py":[{"scroll-py":M()}],"scroll-ps":[{"scroll-ps":M()}],"scroll-pe":[{"scroll-pe":M()}],"scroll-pt":[{"scroll-pt":M()}],"scroll-pr":[{"scroll-pr":M()}],"scroll-pb":[{"scroll-pb":M()}],"scroll-pl":[{"scroll-pl":M()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Vt,Ut]}],fill:[{fill:["none",...ge()]}],"stroke-w":[{stroke:[Rs,em,Gc,iv]}],stroke:[{stroke:["none",...ge()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},LP=pP(RP);function ut(...t){return LP(G_(t))}const R1=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,L1=G_,oj=(t,s)=>a=>{var n;if(s?.variants==null)return L1(t,a?.class,a?.className);const{variants:i,defaultVariants:c}=s,d=Object.keys(i).map(g=>{const p=a?.[g],v=c?.[g];if(p===null)return null;const y=R1(p)||R1(v);return i[g][y]}),h=a&&Object.entries(a).reduce((g,p)=>{let[v,y]=p;return y===void 0||(g[v]=y),g},{}),f=s==null||(n=s.compoundVariants)===null||n===void 0?void 0:n.reduce((g,p)=>{let{class:v,className:y,..._}=p;return Object.entries(_).every(S=>{let[b,T]=S;return Array.isArray(T)?T.includes({...c,...h}[b]):{...c,...h}[b]===T})?[...g,v,y]:g},[]);return L1(t,d,f,a?.class,a?.className)},Jv=oj("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function I({className:t,variant:s,size:a,asChild:n=!1,...i}){const c=n?qy:"button";return e.jsx(c,{"data-slot":"button",className:ut(Jv({variant:s,size:a,className:t})),...i})}function se({className:t,...s}){return e.jsx("div",{"data-slot":"card",className:ut("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",t),...s})}function _e({className:t,...s}){return e.jsx("div",{"data-slot":"card-header",className:ut("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",t),...s})}function Te({className:t,...s}){return e.jsx("div",{"data-slot":"card-title",className:ut("leading-none font-semibold",t),...s})}function vt({className:t,...s}){return e.jsx("div",{"data-slot":"card-description",className:ut("text-muted-foreground text-sm",t),...s})}function oe({className:t,...s}){return e.jsx("div",{"data-slot":"card-content",className:ut("px-6",t),...s})}function sd({className:t,...s}){return e.jsx("div",{"data-slot":"card-footer",className:ut("flex items-center px-6 [.border-t]:pt-6",t),...s})}function we({className:t,type:s,...a}){return e.jsx("input",{type:s,"data-slot":"input",className:ut("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",t),...a})}var IP="Label",a4=N.forwardRef((t,s)=>e.jsx(Ma.label,{...t,ref:s,onMouseDown:a=>{a.target.closest("button, input, select, textarea")||(t.onMouseDown?.(a),!a.defaultPrevented&&a.detail>1&&a.preventDefault())}}));a4.displayName=IP;var FP=a4;function ue({className:t,...s}){return e.jsx(FP,{"data-slot":"label",className:ut("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",t),...s})}const Ip=At.createContext();function Gt({open:t,onOpenChange:s,children:a,...n}){const[i,c]=N.useState(t||!1);N.useEffect(()=>{t!==void 0&&c(t)},[t]);const d=h=>{c(h),s?.(h)};return e.jsx(Ip.Provider,{value:{isOpen:i,onOpenChange:d},children:a})}function Za({children:t,asChild:s,...a}){const{onOpenChange:n}=At.useContext(Ip),i=()=>{n?.(!0)};return s&&At.isValidElement(t)?At.cloneElement(t,{onClick:i,...a}):e.jsx("button",{onClick:i,...a,children:t})}function BP({children:t}){return t}function zP({className:t,...s}){const{isOpen:a,onOpenChange:n}=At.useContext(Ip);return a?e.jsx("div",{className:ut("fixed inset-0 z-50 bg-black/50 backdrop-blur-sm",t),onClick:()=>n?.(!1),...s}):null}function qt({className:t,children:s,showCloseButton:a=!0,...n}){const{isOpen:i,onOpenChange:c}=At.useContext(Ip);return i?e.jsxs(BP,{children:[e.jsx(zP,{}),e.jsxs("div",{className:ut("fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border bg-white p-6 shadow-lg duration-200 sm:max-w-lg dark:bg-gray-800",t),onClick:d=>d.stopPropagation(),...n,children:[s,a&&e.jsxs("button",{className:"absolute top-4 right-4 rounded-sm opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-none disabled:pointer-events-none",onClick:()=>c?.(!1),children:[e.jsx(nr,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Close"})]})]})]}):null}function Kt({className:t,...s}){return e.jsx("div",{className:ut("flex flex-col gap-2 text-center sm:text-left",t),...s})}function ea({className:t,...s}){return e.jsx("div",{className:ut("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",t),...s})}function Yt({className:t,...s}){return e.jsx("h2",{className:ut("text-lg leading-none font-semibold",t),...s})}function vs({className:t,...s}){return e.jsx("p",{className:ut("text-gray-600 dark:text-gray-400 text-sm",t),...s})}function n4(t,s){return function(){return t.apply(s,arguments)}}const{toString:UP}=Object.prototype,{getPrototypeOf:lj}=Object,{iterator:Fp,toStringTag:r4}=Symbol,Bp=(t=>s=>{const a=UP.call(s);return t[a]||(t[a]=a.slice(8,-1).toLowerCase())})(Object.create(null)),Qi=t=>(t=t.toLowerCase(),s=>Bp(s)===t),zp=t=>s=>typeof s===t,{isArray:$u}=Array,Lu=zp("undefined");function Gm(t){return t!==null&&!Lu(t)&&t.constructor!==null&&!Lu(t.constructor)&&Br(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const i4=Qi("ArrayBuffer");function VP(t){let s;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?s=ArrayBuffer.isView(t):s=t&&t.buffer&&i4(t.buffer),s}const HP=zp("string"),Br=zp("function"),o4=zp("number"),qm=t=>t!==null&&typeof t=="object",$P=t=>t===!0||t===!1,Yx=t=>{if(Bp(t)!=="object")return!1;const s=lj(t);return(s===null||s===Object.prototype||Object.getPrototypeOf(s)===null)&&!(r4 in t)&&!(Fp in t)},WP=t=>{if(!qm(t)||Gm(t))return!1;try{return Object.keys(t).length===0&&Object.getPrototypeOf(t)===Object.prototype}catch{return!1}},GP=Qi("Date"),qP=Qi("File"),KP=Qi("Blob"),YP=Qi("FileList"),ZP=t=>qm(t)&&Br(t.pipe),XP=t=>{let s;return t&&(typeof FormData=="function"&&t instanceof FormData||Br(t.append)&&((s=Bp(t))==="formdata"||s==="object"&&Br(t.toString)&&t.toString()==="[object FormData]"))},QP=Qi("URLSearchParams"),[JP,e6,t6,s6]=["ReadableStream","Request","Response","Headers"].map(Qi),a6=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Km(t,s,{allOwnKeys:a=!1}={}){if(t===null||typeof t>"u")return;let n,i;if(typeof t!="object"&&(t=[t]),$u(t))for(n=0,i=t.length;n<i;n++)s.call(null,t[n],n,t);else{if(Gm(t))return;const c=a?Object.getOwnPropertyNames(t):Object.keys(t),d=c.length;let h;for(n=0;n<d;n++)h=c[n],s.call(null,t[h],h,t)}}function l4(t,s){if(Gm(t))return null;s=s.toLowerCase();const a=Object.keys(t);let n=a.length,i;for(;n-- >0;)if(i=a[n],s===i.toLowerCase())return i;return null}const Xc=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,c4=t=>!Lu(t)&&t!==Xc;function ey(){const{caseless:t,skipUndefined:s}=c4(this)&&this||{},a={},n=(i,c)=>{const d=t&&l4(a,c)||c;Yx(a[d])&&Yx(i)?a[d]=ey(a[d],i):Yx(i)?a[d]=ey({},i):$u(i)?a[d]=i.slice():(!s||!Lu(i))&&(a[d]=i)};for(let i=0,c=arguments.length;i<c;i++)arguments[i]&&Km(arguments[i],n);return a}const n6=(t,s,a,{allOwnKeys:n}={})=>(Km(s,(i,c)=>{a&&Br(i)?t[c]=n4(i,a):t[c]=i},{allOwnKeys:n}),t),r6=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),i6=(t,s,a,n)=>{t.prototype=Object.create(s.prototype,n),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:s.prototype}),a&&Object.assign(t.prototype,a)},o6=(t,s,a,n)=>{let i,c,d;const h={};if(s=s||{},t==null)return s;do{for(i=Object.getOwnPropertyNames(t),c=i.length;c-- >0;)d=i[c],(!n||n(d,t,s))&&!h[d]&&(s[d]=t[d],h[d]=!0);t=a!==!1&&lj(t)}while(t&&(!a||a(t,s))&&t!==Object.prototype);return s},l6=(t,s,a)=>{t=String(t),(a===void 0||a>t.length)&&(a=t.length),a-=s.length;const n=t.indexOf(s,a);return n!==-1&&n===a},c6=t=>{if(!t)return null;if($u(t))return t;let s=t.length;if(!o4(s))return null;const a=new Array(s);for(;s-- >0;)a[s]=t[s];return a},d6=(t=>s=>t&&s instanceof t)(typeof Uint8Array<"u"&&lj(Uint8Array)),u6=(t,s)=>{const n=(t&&t[Fp]).call(t);let i;for(;(i=n.next())&&!i.done;){const c=i.value;s.call(t,c[0],c[1])}},h6=(t,s)=>{let a;const n=[];for(;(a=t.exec(s))!==null;)n.push(a);return n},m6=Qi("HTMLFormElement"),f6=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(a,n,i){return n.toUpperCase()+i}),I1=(({hasOwnProperty:t})=>(s,a)=>t.call(s,a))(Object.prototype),x6=Qi("RegExp"),d4=(t,s)=>{const a=Object.getOwnPropertyDescriptors(t),n={};Km(a,(i,c)=>{let d;(d=s(i,c,t))!==!1&&(n[c]=d||i)}),Object.defineProperties(t,n)},p6=t=>{d4(t,(s,a)=>{if(Br(t)&&["arguments","caller","callee"].indexOf(a)!==-1)return!1;const n=t[a];if(Br(n)){if(s.enumerable=!1,"writable"in s){s.writable=!1;return}s.set||(s.set=()=>{throw Error("Can not rewrite read-only method '"+a+"'")})}})},g6=(t,s)=>{const a={},n=i=>{i.forEach(c=>{a[c]=!0})};return $u(t)?n(t):n(String(t).split(s)),a},v6=()=>{},y6=(t,s)=>t!=null&&Number.isFinite(t=+t)?t:s;function j6(t){return!!(t&&Br(t.append)&&t[r4]==="FormData"&&t[Fp])}const N6=t=>{const s=new Array(10),a=(n,i)=>{if(qm(n)){if(s.indexOf(n)>=0)return;if(Gm(n))return n;if(!("toJSON"in n)){s[i]=n;const c=$u(n)?[]:{};return Km(n,(d,h)=>{const f=a(d,i+1);!Lu(f)&&(c[h]=f)}),s[i]=void 0,c}}return n};return a(t,0)},w6=Qi("AsyncFunction"),b6=t=>t&&(qm(t)||Br(t))&&Br(t.then)&&Br(t.catch),u4=((t,s)=>t?setImmediate:s?((a,n)=>(Xc.addEventListener("message",({source:i,data:c})=>{i===Xc&&c===a&&n.length&&n.shift()()},!1),i=>{n.push(i),Xc.postMessage(a,"*")}))(`axios@${Math.random()}`,[]):a=>setTimeout(a))(typeof setImmediate=="function",Br(Xc.postMessage)),S6=typeof queueMicrotask<"u"?queueMicrotask.bind(Xc):typeof process<"u"&&process.nextTick||u4,_6=t=>t!=null&&Br(t[Fp]),et={isArray:$u,isArrayBuffer:i4,isBuffer:Gm,isFormData:XP,isArrayBufferView:VP,isString:HP,isNumber:o4,isBoolean:$P,isObject:qm,isPlainObject:Yx,isEmptyObject:WP,isReadableStream:JP,isRequest:e6,isResponse:t6,isHeaders:s6,isUndefined:Lu,isDate:GP,isFile:qP,isBlob:KP,isRegExp:x6,isFunction:Br,isStream:ZP,isURLSearchParams:QP,isTypedArray:d6,isFileList:YP,forEach:Km,merge:ey,extend:n6,trim:a6,stripBOM:r6,inherits:i6,toFlatObject:o6,kindOf:Bp,kindOfTest:Qi,endsWith:l6,toArray:c6,forEachEntry:u6,matchAll:h6,isHTMLForm:m6,hasOwnProperty:I1,hasOwnProp:I1,reduceDescriptors:d4,freezeMethods:p6,toObjectSet:g6,toCamelCase:f6,noop:v6,toFiniteNumber:y6,findKey:l4,global:Xc,isContextDefined:c4,isSpecCompliantForm:j6,toJSONObject:N6,isAsyncFn:w6,isThenable:b6,setImmediate:u4,asap:S6,isIterable:_6};function Ts(t,s,a,n,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",s&&(this.code=s),a&&(this.config=a),n&&(this.request=n),i&&(this.response=i,this.status=i.status?i.status:null)}et.inherits(Ts,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:et.toJSONObject(this.config),code:this.code,status:this.status}}});const h4=Ts.prototype,m4={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{m4[t]={value:t}});Object.defineProperties(Ts,m4);Object.defineProperty(h4,"isAxiosError",{value:!0});Ts.from=(t,s,a,n,i,c)=>{const d=Object.create(h4);et.toFlatObject(t,d,function(p){return p!==Error.prototype},g=>g!=="isAxiosError");const h=t&&t.message?t.message:"Error",f=s==null&&t?t.code:s;return Ts.call(d,h,f,a,n,i),t&&d.cause==null&&Object.defineProperty(d,"cause",{value:t,configurable:!0}),d.name=t&&t.name||"Error",c&&Object.assign(d,c),d};const C6=null;function ty(t){return et.isPlainObject(t)||et.isArray(t)}function f4(t){return et.endsWith(t,"[]")?t.slice(0,-2):t}function F1(t,s,a){return t?t.concat(s).map(function(i,c){return i=f4(i),!a&&c?"["+i+"]":i}).join(a?".":""):s}function T6(t){return et.isArray(t)&&!t.some(ty)}const k6=et.toFlatObject(et,{},null,function(s){return/^is[A-Z]/.test(s)});function Up(t,s,a){if(!et.isObject(t))throw new TypeError("target must be an object");s=s||new FormData,a=et.toFlatObject(a,{metaTokens:!0,dots:!1,indexes:!1},!1,function(b,T){return!et.isUndefined(T[b])});const n=a.metaTokens,i=a.visitor||p,c=a.dots,d=a.indexes,f=(a.Blob||typeof Blob<"u"&&Blob)&&et.isSpecCompliantForm(s);if(!et.isFunction(i))throw new TypeError("visitor must be a function");function g(S){if(S===null)return"";if(et.isDate(S))return S.toISOString();if(et.isBoolean(S))return S.toString();if(!f&&et.isBlob(S))throw new Ts("Blob is not supported. Use a Buffer instead.");return et.isArrayBuffer(S)||et.isTypedArray(S)?f&&typeof Blob=="function"?new Blob([S]):Buffer.from(S):S}function p(S,b,T){let E=S;if(S&&!T&&typeof S=="object"){if(et.endsWith(b,"{}"))b=n?b:b.slice(0,-2),S=JSON.stringify(S);else if(et.isArray(S)&&T6(S)||(et.isFileList(S)||et.endsWith(b,"[]"))&&(E=et.toArray(S)))return b=f4(b),E.forEach(function(O,Q){!(et.isUndefined(O)||O===null)&&s.append(d===!0?F1([b],Q,c):d===null?b:b+"[]",g(O))}),!1}return ty(S)?!0:(s.append(F1(T,b,c),g(S)),!1)}const v=[],y=Object.assign(k6,{defaultVisitor:p,convertValue:g,isVisitable:ty});function _(S,b){if(!et.isUndefined(S)){if(v.indexOf(S)!==-1)throw Error("Circular reference detected in "+b.join("."));v.push(S),et.forEach(S,function(E,A){(!(et.isUndefined(E)||E===null)&&i.call(s,E,et.isString(A)?A.trim():A,b,y))===!0&&_(E,b?b.concat(A):[A])}),v.pop()}}if(!et.isObject(t))throw new TypeError("data must be an object");return _(t),s}function B1(t){const s={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(n){return s[n]})}function cj(t,s){this._pairs=[],t&&Up(t,this,s)}const x4=cj.prototype;x4.append=function(s,a){this._pairs.push([s,a])};x4.toString=function(s){const a=s?function(n){return s.call(this,n,B1)}:B1;return this._pairs.map(function(i){return a(i[0])+"="+a(i[1])},"").join("&")};function E6(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function p4(t,s,a){if(!s)return t;const n=a&&a.encode||E6;et.isFunction(a)&&(a={serialize:a});const i=a&&a.serialize;let c;if(i?c=i(s,a):c=et.isURLSearchParams(s)?s.toString():new cj(s,a).toString(n),c){const d=t.indexOf("#");d!==-1&&(t=t.slice(0,d)),t+=(t.indexOf("?")===-1?"?":"&")+c}return t}class z1{constructor(){this.handlers=[]}use(s,a,n){return this.handlers.push({fulfilled:s,rejected:a,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(s){this.handlers[s]&&(this.handlers[s]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(s){et.forEach(this.handlers,function(n){n!==null&&s(n)})}}const g4={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},A6=typeof URLSearchParams<"u"?URLSearchParams:cj,D6=typeof FormData<"u"?FormData:null,P6=typeof Blob<"u"?Blob:null,O6={isBrowser:!0,classes:{URLSearchParams:A6,FormData:D6,Blob:P6},protocols:["http","https","file","blob","url","data"]},dj=typeof window<"u"&&typeof document<"u",sy=typeof navigator=="object"&&navigator||void 0,M6=dj&&(!sy||["ReactNative","NativeScript","NS"].indexOf(sy.product)<0),R6=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",L6=dj&&window.location.href||"http://localhost",I6=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:dj,hasStandardBrowserEnv:M6,hasStandardBrowserWebWorkerEnv:R6,navigator:sy,origin:L6},Symbol.toStringTag,{value:"Module"})),hr={...I6,...O6};function F6(t,s){return Up(t,new hr.classes.URLSearchParams,{visitor:function(a,n,i,c){return hr.isNode&&et.isBuffer(a)?(this.append(n,a.toString("base64")),!1):c.defaultVisitor.apply(this,arguments)},...s})}function B6(t){return et.matchAll(/\w+|\[(\w*)]/g,t).map(s=>s[0]==="[]"?"":s[1]||s[0])}function z6(t){const s={},a=Object.keys(t);let n;const i=a.length;let c;for(n=0;n<i;n++)c=a[n],s[c]=t[c];return s}function v4(t){function s(a,n,i,c){let d=a[c++];if(d==="__proto__")return!0;const h=Number.isFinite(+d),f=c>=a.length;return d=!d&&et.isArray(i)?i.length:d,f?(et.hasOwnProp(i,d)?i[d]=[i[d],n]:i[d]=n,!h):((!i[d]||!et.isObject(i[d]))&&(i[d]=[]),s(a,n,i[d],c)&&et.isArray(i[d])&&(i[d]=z6(i[d])),!h)}if(et.isFormData(t)&&et.isFunction(t.entries)){const a={};return et.forEachEntry(t,(n,i)=>{s(B6(n),i,a,0)}),a}return null}function U6(t,s,a){if(et.isString(t))try{return(s||JSON.parse)(t),et.trim(t)}catch(n){if(n.name!=="SyntaxError")throw n}return(a||JSON.stringify)(t)}const Ym={transitional:g4,adapter:["xhr","http","fetch"],transformRequest:[function(s,a){const n=a.getContentType()||"",i=n.indexOf("application/json")>-1,c=et.isObject(s);if(c&&et.isHTMLForm(s)&&(s=new FormData(s)),et.isFormData(s))return i?JSON.stringify(v4(s)):s;if(et.isArrayBuffer(s)||et.isBuffer(s)||et.isStream(s)||et.isFile(s)||et.isBlob(s)||et.isReadableStream(s))return s;if(et.isArrayBufferView(s))return s.buffer;if(et.isURLSearchParams(s))return a.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),s.toString();let h;if(c){if(n.indexOf("application/x-www-form-urlencoded")>-1)return F6(s,this.formSerializer).toString();if((h=et.isFileList(s))||n.indexOf("multipart/form-data")>-1){const f=this.env&&this.env.FormData;return Up(h?{"files[]":s}:s,f&&new f,this.formSerializer)}}return c||i?(a.setContentType("application/json",!1),U6(s)):s}],transformResponse:[function(s){const a=this.transitional||Ym.transitional,n=a&&a.forcedJSONParsing,i=this.responseType==="json";if(et.isResponse(s)||et.isReadableStream(s))return s;if(s&&et.isString(s)&&(n&&!this.responseType||i)){const d=!(a&&a.silentJSONParsing)&&i;try{return JSON.parse(s,this.parseReviver)}catch(h){if(d)throw h.name==="SyntaxError"?Ts.from(h,Ts.ERR_BAD_RESPONSE,this,null,this.response):h}}return s}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:hr.classes.FormData,Blob:hr.classes.Blob},validateStatus:function(s){return s>=200&&s<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};et.forEach(["delete","get","head","post","put","patch"],t=>{Ym.headers[t]={}});const V6=et.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),H6=t=>{const s={};let a,n,i;return t&&t.split(`
`).forEach(function(d){i=d.indexOf(":"),a=d.substring(0,i).trim().toLowerCase(),n=d.substring(i+1).trim(),!(!a||s[a]&&V6[a])&&(a==="set-cookie"?s[a]?s[a].push(n):s[a]=[n]:s[a]=s[a]?s[a]+", "+n:n)}),s},U1=Symbol("internals");function tm(t){return t&&String(t).trim().toLowerCase()}function Zx(t){return t===!1||t==null?t:et.isArray(t)?t.map(Zx):String(t)}function $6(t){const s=Object.create(null),a=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=a.exec(t);)s[n[1]]=n[2];return s}const W6=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function ov(t,s,a,n,i){if(et.isFunction(n))return n.call(this,s,a);if(i&&(s=a),!!et.isString(s)){if(et.isString(n))return s.indexOf(n)!==-1;if(et.isRegExp(n))return n.test(s)}}function G6(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(s,a,n)=>a.toUpperCase()+n)}function q6(t,s){const a=et.toCamelCase(" "+s);["get","set","has"].forEach(n=>{Object.defineProperty(t,n+a,{value:function(i,c,d){return this[n].call(this,s,i,c,d)},configurable:!0})})}let zr=class{constructor(s){s&&this.set(s)}set(s,a,n){const i=this;function c(h,f,g){const p=tm(f);if(!p)throw new Error("header name must be a non-empty string");const v=et.findKey(i,p);(!v||i[v]===void 0||g===!0||g===void 0&&i[v]!==!1)&&(i[v||f]=Zx(h))}const d=(h,f)=>et.forEach(h,(g,p)=>c(g,p,f));if(et.isPlainObject(s)||s instanceof this.constructor)d(s,a);else if(et.isString(s)&&(s=s.trim())&&!W6(s))d(H6(s),a);else if(et.isObject(s)&&et.isIterable(s)){let h={},f,g;for(const p of s){if(!et.isArray(p))throw TypeError("Object iterator must return a key-value pair");h[g=p[0]]=(f=h[g])?et.isArray(f)?[...f,p[1]]:[f,p[1]]:p[1]}d(h,a)}else s!=null&&c(a,s,n);return this}get(s,a){if(s=tm(s),s){const n=et.findKey(this,s);if(n){const i=this[n];if(!a)return i;if(a===!0)return $6(i);if(et.isFunction(a))return a.call(this,i,n);if(et.isRegExp(a))return a.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(s,a){if(s=tm(s),s){const n=et.findKey(this,s);return!!(n&&this[n]!==void 0&&(!a||ov(this,this[n],n,a)))}return!1}delete(s,a){const n=this;let i=!1;function c(d){if(d=tm(d),d){const h=et.findKey(n,d);h&&(!a||ov(n,n[h],h,a))&&(delete n[h],i=!0)}}return et.isArray(s)?s.forEach(c):c(s),i}clear(s){const a=Object.keys(this);let n=a.length,i=!1;for(;n--;){const c=a[n];(!s||ov(this,this[c],c,s,!0))&&(delete this[c],i=!0)}return i}normalize(s){const a=this,n={};return et.forEach(this,(i,c)=>{const d=et.findKey(n,c);if(d){a[d]=Zx(i),delete a[c];return}const h=s?G6(c):String(c).trim();h!==c&&delete a[c],a[h]=Zx(i),n[h]=!0}),this}concat(...s){return this.constructor.concat(this,...s)}toJSON(s){const a=Object.create(null);return et.forEach(this,(n,i)=>{n!=null&&n!==!1&&(a[i]=s&&et.isArray(n)?n.join(", "):n)}),a}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([s,a])=>s+": "+a).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(s){return s instanceof this?s:new this(s)}static concat(s,...a){const n=new this(s);return a.forEach(i=>n.set(i)),n}static accessor(s){const n=(this[U1]=this[U1]={accessors:{}}).accessors,i=this.prototype;function c(d){const h=tm(d);n[h]||(q6(i,d),n[h]=!0)}return et.isArray(s)?s.forEach(c):c(s),this}};zr.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);et.reduceDescriptors(zr.prototype,({value:t},s)=>{let a=s[0].toUpperCase()+s.slice(1);return{get:()=>t,set(n){this[a]=n}}});et.freezeMethods(zr);function lv(t,s){const a=this||Ym,n=s||a,i=zr.from(n.headers);let c=n.data;return et.forEach(t,function(h){c=h.call(a,c,i.normalize(),s?s.status:void 0)}),i.normalize(),c}function y4(t){return!!(t&&t.__CANCEL__)}function Wu(t,s,a){Ts.call(this,t??"canceled",Ts.ERR_CANCELED,s,a),this.name="CanceledError"}et.inherits(Wu,Ts,{__CANCEL__:!0});function j4(t,s,a){const n=a.config.validateStatus;!a.status||!n||n(a.status)?t(a):s(new Ts("Request failed with status code "+a.status,[Ts.ERR_BAD_REQUEST,Ts.ERR_BAD_RESPONSE][Math.floor(a.status/100)-4],a.config,a.request,a))}function K6(t){const s=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return s&&s[1]||""}function Y6(t,s){t=t||10;const a=new Array(t),n=new Array(t);let i=0,c=0,d;return s=s!==void 0?s:1e3,function(f){const g=Date.now(),p=n[c];d||(d=g),a[i]=f,n[i]=g;let v=c,y=0;for(;v!==i;)y+=a[v++],v=v%t;if(i=(i+1)%t,i===c&&(c=(c+1)%t),g-d<s)return;const _=p&&g-p;return _?Math.round(y*1e3/_):void 0}}function Z6(t,s){let a=0,n=1e3/s,i,c;const d=(g,p=Date.now())=>{a=p,i=null,c&&(clearTimeout(c),c=null),t(...g)};return[(...g)=>{const p=Date.now(),v=p-a;v>=n?d(g,p):(i=g,c||(c=setTimeout(()=>{c=null,d(i)},n-v)))},()=>i&&d(i)]}const dp=(t,s,a=3)=>{let n=0;const i=Y6(50,250);return Z6(c=>{const d=c.loaded,h=c.lengthComputable?c.total:void 0,f=d-n,g=i(f),p=d<=h;n=d;const v={loaded:d,total:h,progress:h?d/h:void 0,bytes:f,rate:g||void 0,estimated:g&&h&&p?(h-d)/g:void 0,event:c,lengthComputable:h!=null,[s?"download":"upload"]:!0};t(v)},a)},V1=(t,s)=>{const a=t!=null;return[n=>s[0]({lengthComputable:a,total:t,loaded:n}),s[1]]},H1=t=>(...s)=>et.asap(()=>t(...s)),X6=hr.hasStandardBrowserEnv?((t,s)=>a=>(a=new URL(a,hr.origin),t.protocol===a.protocol&&t.host===a.host&&(s||t.port===a.port)))(new URL(hr.origin),hr.navigator&&/(msie|trident)/i.test(hr.navigator.userAgent)):()=>!0,Q6=hr.hasStandardBrowserEnv?{write(t,s,a,n,i,c,d){if(typeof document>"u")return;const h=[`${t}=${encodeURIComponent(s)}`];et.isNumber(a)&&h.push(`expires=${new Date(a).toUTCString()}`),et.isString(n)&&h.push(`path=${n}`),et.isString(i)&&h.push(`domain=${i}`),c===!0&&h.push("secure"),et.isString(d)&&h.push(`SameSite=${d}`),document.cookie=h.join("; ")},read(t){if(typeof document>"u")return null;const s=document.cookie.match(new RegExp("(?:^|; )"+t+"=([^;]*)"));return s?decodeURIComponent(s[1]):null},remove(t){this.write(t,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function J6(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function eO(t,s){return s?t.replace(/\/?\/$/,"")+"/"+s.replace(/^\/+/,""):t}function N4(t,s,a){let n=!J6(s);return t&&(n||a==!1)?eO(t,s):s}const $1=t=>t instanceof zr?{...t}:t;function dd(t,s){s=s||{};const a={};function n(g,p,v,y){return et.isPlainObject(g)&&et.isPlainObject(p)?et.merge.call({caseless:y},g,p):et.isPlainObject(p)?et.merge({},p):et.isArray(p)?p.slice():p}function i(g,p,v,y){if(et.isUndefined(p)){if(!et.isUndefined(g))return n(void 0,g,v,y)}else return n(g,p,v,y)}function c(g,p){if(!et.isUndefined(p))return n(void 0,p)}function d(g,p){if(et.isUndefined(p)){if(!et.isUndefined(g))return n(void 0,g)}else return n(void 0,p)}function h(g,p,v){if(v in s)return n(g,p);if(v in t)return n(void 0,g)}const f={url:c,method:c,data:c,baseURL:d,transformRequest:d,transformResponse:d,paramsSerializer:d,timeout:d,timeoutMessage:d,withCredentials:d,withXSRFToken:d,adapter:d,responseType:d,xsrfCookieName:d,xsrfHeaderName:d,onUploadProgress:d,onDownloadProgress:d,decompress:d,maxContentLength:d,maxBodyLength:d,beforeRedirect:d,transport:d,httpAgent:d,httpsAgent:d,cancelToken:d,socketPath:d,responseEncoding:d,validateStatus:h,headers:(g,p,v)=>i($1(g),$1(p),v,!0)};return et.forEach(Object.keys({...t,...s}),function(p){const v=f[p]||i,y=v(t[p],s[p],p);et.isUndefined(y)&&v!==h||(a[p]=y)}),a}const w4=t=>{const s=dd({},t);let{data:a,withXSRFToken:n,xsrfHeaderName:i,xsrfCookieName:c,headers:d,auth:h}=s;if(s.headers=d=zr.from(d),s.url=p4(N4(s.baseURL,s.url,s.allowAbsoluteUrls),t.params,t.paramsSerializer),h&&d.set("Authorization","Basic "+btoa((h.username||"")+":"+(h.password?unescape(encodeURIComponent(h.password)):""))),et.isFormData(a)){if(hr.hasStandardBrowserEnv||hr.hasStandardBrowserWebWorkerEnv)d.setContentType(void 0);else if(et.isFunction(a.getHeaders)){const f=a.getHeaders(),g=["content-type","content-length"];Object.entries(f).forEach(([p,v])=>{g.includes(p.toLowerCase())&&d.set(p,v)})}}if(hr.hasStandardBrowserEnv&&(n&&et.isFunction(n)&&(n=n(s)),n||n!==!1&&X6(s.url))){const f=i&&c&&Q6.read(c);f&&d.set(i,f)}return s},tO=typeof XMLHttpRequest<"u",sO=tO&&function(t){return new Promise(function(a,n){const i=w4(t);let c=i.data;const d=zr.from(i.headers).normalize();let{responseType:h,onUploadProgress:f,onDownloadProgress:g}=i,p,v,y,_,S;function b(){_&&_(),S&&S(),i.cancelToken&&i.cancelToken.unsubscribe(p),i.signal&&i.signal.removeEventListener("abort",p)}let T=new XMLHttpRequest;T.open(i.method.toUpperCase(),i.url,!0),T.timeout=i.timeout;function E(){if(!T)return;const O=zr.from("getAllResponseHeaders"in T&&T.getAllResponseHeaders()),q={data:!h||h==="text"||h==="json"?T.responseText:T.response,status:T.status,statusText:T.statusText,headers:O,config:t,request:T};j4(function(D){a(D),b()},function(D){n(D),b()},q),T=null}"onloadend"in T?T.onloadend=E:T.onreadystatechange=function(){!T||T.readyState!==4||T.status===0&&!(T.responseURL&&T.responseURL.indexOf("file:")===0)||setTimeout(E)},T.onabort=function(){T&&(n(new Ts("Request aborted",Ts.ECONNABORTED,t,T)),T=null)},T.onerror=function(Q){const q=Q&&Q.message?Q.message:"Network Error",U=new Ts(q,Ts.ERR_NETWORK,t,T);U.event=Q||null,n(U),T=null},T.ontimeout=function(){let Q=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const q=i.transitional||g4;i.timeoutErrorMessage&&(Q=i.timeoutErrorMessage),n(new Ts(Q,q.clarifyTimeoutError?Ts.ETIMEDOUT:Ts.ECONNABORTED,t,T)),T=null},c===void 0&&d.setContentType(null),"setRequestHeader"in T&&et.forEach(d.toJSON(),function(Q,q){T.setRequestHeader(q,Q)}),et.isUndefined(i.withCredentials)||(T.withCredentials=!!i.withCredentials),h&&h!=="json"&&(T.responseType=i.responseType),g&&([y,S]=dp(g,!0),T.addEventListener("progress",y)),f&&T.upload&&([v,_]=dp(f),T.upload.addEventListener("progress",v),T.upload.addEventListener("loadend",_)),(i.cancelToken||i.signal)&&(p=O=>{T&&(n(!O||O.type?new Wu(null,t,T):O),T.abort(),T=null)},i.cancelToken&&i.cancelToken.subscribe(p),i.signal&&(i.signal.aborted?p():i.signal.addEventListener("abort",p)));const A=K6(i.url);if(A&&hr.protocols.indexOf(A)===-1){n(new Ts("Unsupported protocol "+A+":",Ts.ERR_BAD_REQUEST,t));return}T.send(c||null)})},aO=(t,s)=>{const{length:a}=t=t?t.filter(Boolean):[];if(s||a){let n=new AbortController,i;const c=function(g){if(!i){i=!0,h();const p=g instanceof Error?g:this.reason;n.abort(p instanceof Ts?p:new Wu(p instanceof Error?p.message:p))}};let d=s&&setTimeout(()=>{d=null,c(new Ts(`timeout ${s} of ms exceeded`,Ts.ETIMEDOUT))},s);const h=()=>{t&&(d&&clearTimeout(d),d=null,t.forEach(g=>{g.unsubscribe?g.unsubscribe(c):g.removeEventListener("abort",c)}),t=null)};t.forEach(g=>g.addEventListener("abort",c));const{signal:f}=n;return f.unsubscribe=()=>et.asap(h),f}},nO=function*(t,s){let a=t.byteLength;if(a<s){yield t;return}let n=0,i;for(;n<a;)i=n+s,yield t.slice(n,i),n=i},rO=async function*(t,s){for await(const a of iO(t))yield*nO(a,s)},iO=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const s=t.getReader();try{for(;;){const{done:a,value:n}=await s.read();if(a)break;yield n}}finally{await s.cancel()}},W1=(t,s,a,n)=>{const i=rO(t,s);let c=0,d,h=f=>{d||(d=!0,n&&n(f))};return new ReadableStream({async pull(f){try{const{done:g,value:p}=await i.next();if(g){h(),f.close();return}let v=p.byteLength;if(a){let y=c+=v;a(y)}f.enqueue(new Uint8Array(p))}catch(g){throw h(g),g}},cancel(f){return h(f),i.return()}},{highWaterMark:2})},G1=64*1024,{isFunction:Ox}=et,oO=(({Request:t,Response:s})=>({Request:t,Response:s}))(et.global),{ReadableStream:q1,TextEncoder:K1}=et.global,Y1=(t,...s)=>{try{return!!t(...s)}catch{return!1}},lO=t=>{t=et.merge.call({skipUndefined:!0},oO,t);const{fetch:s,Request:a,Response:n}=t,i=s?Ox(s):typeof fetch=="function",c=Ox(a),d=Ox(n);if(!i)return!1;const h=i&&Ox(q1),f=i&&(typeof K1=="function"?(S=>b=>S.encode(b))(new K1):async S=>new Uint8Array(await new a(S).arrayBuffer())),g=c&&h&&Y1(()=>{let S=!1;const b=new a(hr.origin,{body:new q1,method:"POST",get duplex(){return S=!0,"half"}}).headers.has("Content-Type");return S&&!b}),p=d&&h&&Y1(()=>et.isReadableStream(new n("").body)),v={stream:p&&(S=>S.body)};i&&["text","arrayBuffer","blob","formData","stream"].forEach(S=>{!v[S]&&(v[S]=(b,T)=>{let E=b&&b[S];if(E)return E.call(b);throw new Ts(`Response type '${S}' is not supported`,Ts.ERR_NOT_SUPPORT,T)})});const y=async S=>{if(S==null)return 0;if(et.isBlob(S))return S.size;if(et.isSpecCompliantForm(S))return(await new a(hr.origin,{method:"POST",body:S}).arrayBuffer()).byteLength;if(et.isArrayBufferView(S)||et.isArrayBuffer(S))return S.byteLength;if(et.isURLSearchParams(S)&&(S=S+""),et.isString(S))return(await f(S)).byteLength},_=async(S,b)=>{const T=et.toFiniteNumber(S.getContentLength());return T??y(b)};return async S=>{let{url:b,method:T,data:E,signal:A,cancelToken:O,timeout:Q,onDownloadProgress:q,onUploadProgress:U,responseType:D,headers:M,withCredentials:P="same-origin",fetchOptions:G}=w4(S),K=s||fetch;D=D?(D+"").toLowerCase():"text";let z=aO([A,O&&O.toAbortSignal()],Q),J=null;const W=z&&z.unsubscribe&&(()=>{z.unsubscribe()});let he;try{if(U&&g&&T!=="get"&&T!=="head"&&(he=await _(M,E))!==0){let te=new a(b,{method:"POST",body:E,duplex:"half"}),X;if(et.isFormData(E)&&(X=te.headers.get("content-type"))&&M.setContentType(X),te.body){const[ce,F]=V1(he,dp(H1(U)));E=W1(te.body,G1,ce,F)}}et.isString(P)||(P=P?"include":"omit");const V=c&&"credentials"in a.prototype,ae={...G,signal:z,method:T.toUpperCase(),headers:M.normalize().toJSON(),body:E,duplex:"half",credentials:V?P:void 0};J=c&&new a(b,ae);let ge=await(c?K(J,G):K(b,ae));const Z=p&&(D==="stream"||D==="response");if(p&&(q||Z&&W)){const te={};["status","statusText","headers"].forEach(re=>{te[re]=ge[re]});const X=et.toFiniteNumber(ge.headers.get("content-length")),[ce,F]=q&&V1(X,dp(H1(q),!0))||[];ge=new n(W1(ge.body,G1,ce,()=>{F&&F(),W&&W()}),te)}D=D||"text";let ee=await v[et.findKey(v,D)||"text"](ge,S);return!Z&&W&&W(),await new Promise((te,X)=>{j4(te,X,{data:ee,headers:zr.from(ge.headers),status:ge.status,statusText:ge.statusText,config:S,request:J})})}catch(V){throw W&&W(),V&&V.name==="TypeError"&&/Load failed|fetch/i.test(V.message)?Object.assign(new Ts("Network Error",Ts.ERR_NETWORK,S,J),{cause:V.cause||V}):Ts.from(V,V&&V.code,S,J)}}},cO=new Map,b4=t=>{let s=t&&t.env||{};const{fetch:a,Request:n,Response:i}=s,c=[n,i,a];let d=c.length,h=d,f,g,p=cO;for(;h--;)f=c[h],g=p.get(f),g===void 0&&p.set(f,g=h?new Map:lO(s)),p=g;return g};b4();const uj={http:C6,xhr:sO,fetch:{get:b4}};et.forEach(uj,(t,s)=>{if(t){try{Object.defineProperty(t,"name",{value:s})}catch{}Object.defineProperty(t,"adapterName",{value:s})}});const Z1=t=>`- ${t}`,dO=t=>et.isFunction(t)||t===null||t===!1;function uO(t,s){t=et.isArray(t)?t:[t];const{length:a}=t;let n,i;const c={};for(let d=0;d<a;d++){n=t[d];let h;if(i=n,!dO(n)&&(i=uj[(h=String(n)).toLowerCase()],i===void 0))throw new Ts(`Unknown adapter '${h}'`);if(i&&(et.isFunction(i)||(i=i.get(s))))break;c[h||"#"+d]=i}if(!i){const d=Object.entries(c).map(([f,g])=>`adapter ${f} `+(g===!1?"is not supported by the environment":"is not available in the build"));let h=a?d.length>1?`since :
`+d.map(Z1).join(`
`):" "+Z1(d[0]):"as no adapter specified";throw new Ts("There is no suitable adapter to dispatch the request "+h,"ERR_NOT_SUPPORT")}return i}const S4={getAdapter:uO,adapters:uj};function cv(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Wu(null,t)}function X1(t){return cv(t),t.headers=zr.from(t.headers),t.data=lv.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),S4.getAdapter(t.adapter||Ym.adapter,t)(t).then(function(n){return cv(t),n.data=lv.call(t,t.transformResponse,n),n.headers=zr.from(n.headers),n},function(n){return y4(n)||(cv(t),n&&n.response&&(n.response.data=lv.call(t,t.transformResponse,n.response),n.response.headers=zr.from(n.response.headers))),Promise.reject(n)})}const _4="1.13.1",Vp={};["object","boolean","number","function","string","symbol"].forEach((t,s)=>{Vp[t]=function(n){return typeof n===t||"a"+(s<1?"n ":" ")+t}});const Q1={};Vp.transitional=function(s,a,n){function i(c,d){return"[Axios v"+_4+"] Transitional option '"+c+"'"+d+(n?". "+n:"")}return(c,d,h)=>{if(s===!1)throw new Ts(i(d," has been removed"+(a?" in "+a:"")),Ts.ERR_DEPRECATED);return a&&!Q1[d]&&(Q1[d]=!0,console.warn(i(d," has been deprecated since v"+a+" and will be removed in the near future"))),s?s(c,d,h):!0}};Vp.spelling=function(s){return(a,n)=>(console.warn(`${n} is likely a misspelling of ${s}`),!0)};function hO(t,s,a){if(typeof t!="object")throw new Ts("options must be an object",Ts.ERR_BAD_OPTION_VALUE);const n=Object.keys(t);let i=n.length;for(;i-- >0;){const c=n[i],d=s[c];if(d){const h=t[c],f=h===void 0||d(h,c,t);if(f!==!0)throw new Ts("option "+c+" must be "+f,Ts.ERR_BAD_OPTION_VALUE);continue}if(a!==!0)throw new Ts("Unknown option "+c,Ts.ERR_BAD_OPTION)}}const Xx={assertOptions:hO,validators:Vp},mo=Xx.validators;let ad=class{constructor(s){this.defaults=s||{},this.interceptors={request:new z1,response:new z1}}async request(s,a){try{return await this._request(s,a)}catch(n){if(n instanceof Error){let i={};Error.captureStackTrace?Error.captureStackTrace(i):i=new Error;const c=i.stack?i.stack.replace(/^.+\n/,""):"";try{n.stack?c&&!String(n.stack).endsWith(c.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+c):n.stack=c}catch{}}throw n}}_request(s,a){typeof s=="string"?(a=a||{},a.url=s):a=s||{},a=dd(this.defaults,a);const{transitional:n,paramsSerializer:i,headers:c}=a;n!==void 0&&Xx.assertOptions(n,{silentJSONParsing:mo.transitional(mo.boolean),forcedJSONParsing:mo.transitional(mo.boolean),clarifyTimeoutError:mo.transitional(mo.boolean)},!1),i!=null&&(et.isFunction(i)?a.paramsSerializer={serialize:i}:Xx.assertOptions(i,{encode:mo.function,serialize:mo.function},!0)),a.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?a.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:a.allowAbsoluteUrls=!0),Xx.assertOptions(a,{baseUrl:mo.spelling("baseURL"),withXsrfToken:mo.spelling("withXSRFToken")},!0),a.method=(a.method||this.defaults.method||"get").toLowerCase();let d=c&&et.merge(c.common,c[a.method]);c&&et.forEach(["delete","get","head","post","put","patch","common"],S=>{delete c[S]}),a.headers=zr.concat(d,c);const h=[];let f=!0;this.interceptors.request.forEach(function(b){typeof b.runWhen=="function"&&b.runWhen(a)===!1||(f=f&&b.synchronous,h.unshift(b.fulfilled,b.rejected))});const g=[];this.interceptors.response.forEach(function(b){g.push(b.fulfilled,b.rejected)});let p,v=0,y;if(!f){const S=[X1.bind(this),void 0];for(S.unshift(...h),S.push(...g),y=S.length,p=Promise.resolve(a);v<y;)p=p.then(S[v++],S[v++]);return p}y=h.length;let _=a;for(;v<y;){const S=h[v++],b=h[v++];try{_=S(_)}catch(T){b.call(this,T);break}}try{p=X1.call(this,_)}catch(S){return Promise.reject(S)}for(v=0,y=g.length;v<y;)p=p.then(g[v++],g[v++]);return p}getUri(s){s=dd(this.defaults,s);const a=N4(s.baseURL,s.url,s.allowAbsoluteUrls);return p4(a,s.params,s.paramsSerializer)}};et.forEach(["delete","get","head","options"],function(s){ad.prototype[s]=function(a,n){return this.request(dd(n||{},{method:s,url:a,data:(n||{}).data}))}});et.forEach(["post","put","patch"],function(s){function a(n){return function(c,d,h){return this.request(dd(h||{},{method:s,headers:n?{"Content-Type":"multipart/form-data"}:{},url:c,data:d}))}}ad.prototype[s]=a(),ad.prototype[s+"Form"]=a(!0)});let mO=class C4{constructor(s){if(typeof s!="function")throw new TypeError("executor must be a function.");let a;this.promise=new Promise(function(c){a=c});const n=this;this.promise.then(i=>{if(!n._listeners)return;let c=n._listeners.length;for(;c-- >0;)n._listeners[c](i);n._listeners=null}),this.promise.then=i=>{let c;const d=new Promise(h=>{n.subscribe(h),c=h}).then(i);return d.cancel=function(){n.unsubscribe(c)},d},s(function(c,d,h){n.reason||(n.reason=new Wu(c,d,h),a(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(s){if(this.reason){s(this.reason);return}this._listeners?this._listeners.push(s):this._listeners=[s]}unsubscribe(s){if(!this._listeners)return;const a=this._listeners.indexOf(s);a!==-1&&this._listeners.splice(a,1)}toAbortSignal(){const s=new AbortController,a=n=>{s.abort(n)};return this.subscribe(a),s.signal.unsubscribe=()=>this.unsubscribe(a),s.signal}static source(){let s;return{token:new C4(function(i){s=i}),cancel:s}}};function fO(t){return function(a){return t.apply(null,a)}}function xO(t){return et.isObject(t)&&t.isAxiosError===!0}const ay={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(ay).forEach(([t,s])=>{ay[s]=t});function T4(t){const s=new ad(t),a=n4(ad.prototype.request,s);return et.extend(a,ad.prototype,s,{allOwnKeys:!0}),et.extend(a,s,null,{allOwnKeys:!0}),a.create=function(i){return T4(dd(t,i))},a}const fn=T4(Ym);fn.Axios=ad;fn.CanceledError=Wu;fn.CancelToken=mO;fn.isCancel=y4;fn.VERSION=_4;fn.toFormData=Up;fn.AxiosError=Ts;fn.Cancel=fn.CanceledError;fn.all=function(s){return Promise.all(s)};fn.spread=fO;fn.isAxiosError=xO;fn.mergeConfig=dd;fn.AxiosHeaders=zr;fn.formToJSON=t=>v4(et.isHTMLForm(t)?new FormData(t):t);fn.getAdapter=S4.getAdapter;fn.HttpStatusCode=ay;fn.default=fn;const{Axios:nY,AxiosError:rY,CanceledError:iY,isCancel:oY,CancelToken:lY,VERSION:cY,all:dY,Cancel:uY,isAxiosError:hY,spread:mY,toFormData:fY,AxiosHeaders:xY,HttpStatusCode:pY,formToJSON:gY,getAdapter:vY,mergeConfig:yY}=fn,ke=fn.create({baseURL:"http://localhost:5000/api",headers:{"Content-Type":"application/json"},timeout:1e4});ke.interceptors.request.use(t=>{const a=t.url?.includes("/customers/")||t.url?.includes("/customer/")||t.url?.includes("/public/orders")||t.url?.includes("/public/appointments")?localStorage.getItem("customerToken"):localStorage.getItem("token");return a&&(t.headers.Authorization=`Bearer ${a}`),t},t=>Promise.reject(t));ke.interceptors.response.use(t=>t,t=>{if(t.code==="ECONNABORTED"||t.message.includes("timeout"))R.error("Request timeout. Please check your connection.");else if(t.code==="ERR_NETWORK"||t.message.includes("Network Error"))R.error("Network error. Please check if the server is running.");else if(t.response){const s=t.response.status,a=t.config?.url?.includes("/customers/")||t.config?.url?.includes("/customer/");if(s===401)if(a){const n=t.response?.data?.requiresLogin,i=t.response?.data?.expired;(n||i)&&(localStorage.removeItem("customerToken"),localStorage.removeItem("customerData"),i&&R.error("Session expired. Please log in again."),console.log("Customer auth error - let component handle redirect"))}else localStorage.removeItem("token"),window.location.pathname!=="/loginpage"&&(window.location.href="/loginpage");else s===403?R.error("Access denied."):s===404?console.log("Resource not found:",t.config?.url):s>=500&&R.error("Server error. Please try again later.")}return Promise.reject(t)});const Qx={register:t=>ke.post("/customers/auth/register",t),login:t=>ke.post("/customers/auth/login",t),getProfile:()=>ke.get("/customers/auth/profile"),updateProfile:t=>ke.put("/customers/auth/profile",t),changePassword:t=>ke.put("/customers/auth/change-password",t),forgotPassword:t=>ke.post("/customers/auth/forgot-password",{email:t}),resetPassword:t=>ke.post("/customers/auth/reset-password",t),verifyEmail:t=>ke.get(`/customers/auth/verify-email/${t}`),getMyOrders:t=>ke.get("/customers/orders",{params:t}),getOrderDetails:t=>ke.get(`/customers/orders/${t}`),getMyBookings:t=>ke.get("/customers/bookings",{params:t}),getBookingDetails:t=>ke.get(`/customers/bookings/${t}`),cancelBooking:(t,s)=>ke.put(`/customers/bookings/${t}/cancel`,{reason:s}),getMessages:t=>ke.get("/customers/messages",{params:t}),sendMessage:t=>ke.post("/customers/messages",t),markAsRead:t=>ke.put(`/customers/messages/${t}/read`)},k4=N.createContext({}),pd=()=>{const t=N.useContext(k4);if(!t)throw new Error("useCustomerAuth must be used within CustomerAuthProvider");return t},pO=({children:t})=>{const[s,a]=N.useState(()=>{const _=localStorage.getItem("customerData");return _?JSON.parse(_):null}),[n,i]=N.useState(!0),[c,d]=N.useState(()=>!!localStorage.getItem("customerToken"));N.useEffect(()=>{h()},[]);const h=async()=>{const _=localStorage.getItem("customerToken"),S=localStorage.getItem("customerData");if(!_){a(null),d(!1),i(!1);return}try{const b=JSON.parse(atob(_.split(".")[1])),T=Date.now()/1e3;if(b.exp&&b.exp<T){console.log(" Token expired, clearing session"),localStorage.removeItem("customerToken"),localStorage.removeItem("customerData"),a(null),d(!1),i(!1),R.error("Session expired. Please log in again.");return}}catch(b){console.error("Error checking token expiry:",b)}if(S)try{a(JSON.parse(S)),d(!0)}catch(b){console.error("Error parsing saved customer:",b)}try{console.log(" Customer authenticated from localStorage")}catch(b){console.error(" Error loading customer data:",b)}finally{i(!1)}},y={customer:s,loading:n,isAuthenticated:c,login:async _=>{try{const S=await Qx.login(_),{customer:b,token:T,storeOwner:E}=S.data;return console.log(" Auth Context: Login response received",b.email),localStorage.setItem("customerToken",T),localStorage.setItem("customerData",JSON.stringify(b)),console.log(" Auth Context: Token saved to localStorage"),a(b),d(!0),console.log(" Auth Context: State updated",{hasCustomer:!!b}),await new Promise(A=>setTimeout(A,100)),console.log(" Customer logged in:",b.email),{success:!0,customer:b,storeOwner:E}}catch(S){const b=S.response?.data?.message||"Login failed";return console.error(" Login error:",b),R.error(b),{success:!1,error:b}}},register:async _=>{try{const S=await Qx.register(_),{customer:b,token:T,storeOwner:E}=S.data;return console.log(" Auth Context: Registration response received",b.email),localStorage.setItem("customerToken",T),localStorage.setItem("customerData",JSON.stringify(b)),console.log(" Auth Context: Token saved to localStorage"),a(b),d(!0),console.log(" Auth Context: State updated",{hasCustomer:!!b}),await new Promise(A=>setTimeout(A,100)),console.log(" Customer registered:",b.email),{success:!0,customer:b,storeOwner:E}}catch(S){const b=S.response?.data?.message||"Registration failed";return console.error(" Registration error:",b),R.error(b),{success:!1,error:b}}},logout:()=>{const _=localStorage.getItem("customerToken");if(_)try{const S=JSON.parse(atob(_.split(".")[1])),b=`cart_items_${S.id||S.email||"guest"}`;localStorage.removeItem(b)}catch(S){console.error("Error clearing cart:",S)}localStorage.removeItem("customerToken"),localStorage.removeItem("customerData"),a(null),d(!1),console.log(" Customer logged out"),R.info("Logged out successfully")},updateProfile:async _=>{try{const b=(await Qx.updateProfile(_)).data.customer;return a(b),localStorage.setItem("customerData",JSON.stringify(b)),R.success("Profile updated successfully"),{success:!0}}catch(S){const b=S.response?.data?.message||"Update failed";return R.error(b),{success:!1,error:b}}},checkAuth:h};return e.jsx(k4.Provider,{value:y,children:t})},E4=N.createContext(),Ra=()=>{const t=N.useContext(E4);return t||(console.warn("useSocket called outside SocketProvider, returning defaults"),{socket:null,connected:!1,notifications:[],unreadCount:0,markAsRead:()=>{},markAllAsRead:()=>{},clearNotifications:()=>{},removeNotification:()=>{},joinRoom:()=>{},leaveRoom:()=>{},startTyping:()=>{},stopTyping:()=>{},emit:()=>{}})},gO=({children:t})=>{const[s,a]=N.useState(null),[n,i]=N.useState(!1),[c,d]=N.useState([]);let h,f,g;try{({user:h,token:f}=qs())}catch{h=null,f=null}try{({customer:g}=pd())}catch{g=null}const p=f||localStorage.getItem("customerToken"),v=!!(h||g);N.useEffect(()=>{if(v&&p){const M=W_("http://localhost:5000",{auth:{token:p},autoConnect:!0});return M.on("connect",()=>{console.log("Socket connected:",M.id),i(!0),R.success("Connected to real-time notifications")}),M.on("disconnect",()=>{console.log("Socket disconnected"),i(!1),R.info("Disconnected from real-time notifications")}),M.on("connect_error",P=>{console.error("Socket connection error:",P),i(!1),R.error("Failed to connect to real-time notifications")}),M.on("order_updated",P=>{console.log("Order updated:",P),y({id:Date.now(),type:"order_update",title:"Order Updated",message:P.data.message||`Order ${P.data.orderNumber} has been updated`,data:P.data,timestamp:new Date(P.timestamp),read:!1}),R.success(`Order ${P.data.orderNumber}: ${P.data.message}`)}),M.on("new_order",P=>{console.log("New order:",P),y({id:Date.now(),type:"new_order",title:"New Order Received",message:`New order from ${P.data.clientName} - $${P.data.total}`,data:P.data,timestamp:new Date(P.timestamp),read:!1}),R.info(`New order: ${P.data.orderNumber} from ${P.data.clientName}`)}),M.on("service_request_updated",P=>{console.log("Service request updated:",P),y({id:Date.now(),type:"service_request_update",title:"Service Request Updated",message:P.data.message||`Service request ${P.data.requestNumber} has been updated`,data:P.data,timestamp:new Date(P.timestamp),read:!1}),R.success(`Service Request ${P.data.requestNumber}: ${P.data.message}`)}),M.on("new_service_request",P=>{console.log("New service request:",P),y({id:Date.now(),type:"new_service_request",title:"New Service Request",message:`New ${P.data.serviceType} request from ${P.data.clientName}`,data:P.data,timestamp:new Date(P.timestamp),read:!1}),R.info(`New service request: ${P.data.title} from ${P.data.clientName}`)}),M.on("notification",P=>{console.log("General notification:",P),y({id:Date.now(),type:P.type||"general",title:P.title||"Notification",message:P.message,data:P.data,timestamp:new Date(P.timestamp),read:!1}),P.showToast!==!1&&R.info(P.message)}),M.on("user_typing",P=>{console.log("User typing:",P)}),M.on("user_stopped_typing",P=>{console.log("User stopped typing:",P)}),a(M),()=>{M.close(),a(null),i(!1)}}},[v,p,h,g]);const y=M=>{d(P=>[M,...P].slice(0,50))},_=M=>{d(P=>P.map(G=>G.id===M?{...G,read:!0}:G))},S=()=>{d(M=>M.map(P=>({...P,read:!0})))},b=()=>{d([])},T=M=>{d(P=>P.filter(G=>G.id!==M))},E=M=>{s&&s.emit("join_room",M)},A=M=>{s&&s.emit("leave_room",M)},O=M=>{s&&s.emit("typing_start",{room:M})},Q=M=>{s&&s.emit("typing_stop",{room:M})},q=(M,P)=>{s&&s.emit(M,P)},U=c.filter(M=>!M.read).length,D={socket:s,connected:n,notifications:c,unreadCount:U,markAsRead:_,markAllAsRead:S,clearNotifications:b,removeNotification:T,joinRoom:E,leaveRoom:A,startTyping:O,stopTyping:Q,emit:q};return e.jsx(E4.Provider,{value:D,children:t})},A4=N.createContext(),qs=()=>N.useContext(A4),D4=({children:t})=>{const[s,a]=N.useState(null),[n,i]=N.useState(!1),[c,d]=N.useState(!0),h=async()=>{const v=localStorage.getItem("token");if(v)try{const y=await ke.get("/auth/profile",{headers:{Authorization:`Bearer ${v}`}});return console.log(" User profile refreshed:",y.data),a(y.data),i(!0),y.data}catch(y){throw console.error("Error refreshing user profile:",y),y.response&&y.response.status===401&&(localStorage.removeItem("token"),i(!1),a(null)),y}};N.useEffect(()=>{localStorage.getItem("token")?h().catch(y=>{console.error("Error checking authentication:",y)}).finally(()=>{d(!1)}):d(!1)},[]);const p={user:s,isAuthenticated:n,loading:c,login:async(v,y)=>{try{const _=await ke.post("/auth/login",{email:v,password:y}),{token:S,user:b}=_.data;return localStorage.setItem("token",S),a(b),i(!0),window.dispatchEvent(new CustomEvent("userLoggedIn",{detail:{user:b}})),{success:!0}}catch(_){return console.error("Login failed",_),{success:!1,error:_.response?.data?.message||"Login failed. Please try again."}}},logout:()=>{localStorage.removeItem("token"),a(null),i(!1)},refreshUserProfile:h,setUser:a};return c?e.jsx("div",{children:"Loading..."}):e.jsx(A4.Provider,{value:p,children:t})},vO=Object.freeze(Object.defineProperty({__proto__:null,AuthProvider:D4,useAuth:qs},Symbol.toStringTag,{value:"Module"}));function yO({className:t,...s}){const{login:a}=qs(),[n,i]=N.useState(""),[c,d]=N.useState(""),[h,f]=N.useState(!1),[g,p]=N.useState(!1),[v,y]=N.useState(!1),[_,S]=N.useState(""),[b,T]=N.useState(!1),[E,A]=N.useState(null),O=_n(),Q=async M=>{if(M.preventDefault(),p(!0),!n||!c){R.error("Please enter both email and password."),p(!1);return}try{const P=await a(n,c);P.success?(R.success("Login successful! Welcome to ominbiz Pro."),O("/dashboard"),window.location.reload()):R.error(P.error||"Login failed. Please try again.")}finally{p(!1)}},q=async M=>{if(M.preventDefault(),!_){R.error("Please enter your email address.");return}T(!0);try{await ke.post("/auth/forgot-password",{email:_}),R.success("Password reset link sent! Check your email."),y(!1),S("")}catch(P){R.error(P.response?.data?.message||"Failed to send reset link. Please try again.")}finally{T(!1)}},U=async()=>{A("google");try{const M=`${window.location.origin}/auth/google/callback`,P="YOUR_GOOGLE_CLIENT_ID";window.location.href="http://localhost:5000/api/auth/google"}catch{R.error("Google login failed. Please try again."),A(null)}},D=async()=>{A("github");try{const M=`${window.location.origin}/auth/github/callback`,P="YOUR_GITHUB_CLIENT_ID";window.location.href="http://localhost:5000/api/auth/github"}catch{R.error("GitHub login failed. Please try again."),A(null)}};return e.jsxs("div",{className:ut("flex flex-col gap-6 relative",t),...s,children:[e.jsxs("div",{className:"absolute inset-0 -z-10 overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 left-0 w-64 h-64 bg-primary/10 rounded-full blur-3xl animate-pulse"}),e.jsx("div",{className:"absolute bottom-0 right-0 w-96 h-96 bg-accent/10 rounded-full blur-3xl animate-pulse",style:{animationDelay:"1s"}})]}),e.jsxs("div",{className:"text-center mb-4 animate-in fade-in slide-in-from-top-4 duration-700",children:[e.jsxs("div",{className:"inline-flex items-center gap-2 mb-2",children:[e.jsx(wi,{className:"h-8 w-8 text-primary animate-pulse"}),e.jsx("h1",{className:"text-4xl font-bold text-primary",children:"ominbiz"})]}),e.jsx("p",{className:"text-muted-foreground text-sm",children:"Business Management Platform"})]}),e.jsxs(se,{className:"border-2 shadow-2xl backdrop-blur-sm bg-card/95 animate-in fade-in slide-in-from-bottom-4 duration-700",children:[e.jsxs(_e,{className:"space-y-2",children:[e.jsxs(Te,{className:"text-2xl font-bold flex items-center gap-2",children:[e.jsx(ip,{className:"h-6 w-6 text-primary"}),"Welcome Back"]}),e.jsx(vt,{className:"text-base",children:"Enter your credentials to access your account"})]}),e.jsx(oe,{children:e.jsxs("form",{onSubmit:Q,children:[e.jsxs("div",{className:"flex flex-col gap-5",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(ue,{htmlFor:"email",className:"text-sm font-medium",children:"Email Address"}),e.jsxs("div",{className:"relative",children:[e.jsx(fa,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(we,{id:"email",type:"email",value:n,onChange:M=>i(M.target.value),placeholder:"you@example.com",required:!0,className:"pl-10 h-11 transition-all allow-select"})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(ue,{htmlFor:"password",className:"text-sm font-medium",children:"Password"}),e.jsx(I,{type:"button",variant:"link",onClick:()=>y(!0),className:"text-xs text-primary hover:text-primary/80 p-0 h-auto",children:"Forgot password?"})]}),e.jsxs("div",{className:"relative",children:[e.jsx(sr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(we,{id:"password",type:h?"text":"password",value:c,onChange:M=>d(M.target.value),required:!0,className:"pl-10 pr-10 h-11 transition-all allow-select"}),e.jsx(I,{type:"button",variant:"ghost",size:"icon",className:"absolute right-1 top-1/2 transform -translate-y-1/2 h-8 w-8",onClick:()=>f(!h),children:h?e.jsx(od,{className:"h-4 w-4"}):e.jsx(Pa,{className:"h-4 w-4"})})]})]}),e.jsx(I,{type:"submit",className:"w-full h-11 bg-primary hover:bg-primary/90 transition-all shadow-lg hover:shadow-xl group",disabled:g,children:g?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"h-4 w-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Signing in..."]}):e.jsxs(e.Fragment,{children:["Sign in",e.jsx(Zy,{className:"ml-2 h-4 w-4 group-hover:translate-x-1 transition-transform"})]})})]}),e.jsxs("div",{className:"relative my-6",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("span",{className:"w-full border-t"})}),e.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:e.jsx("span",{className:"bg-card px-2 text-muted-foreground",children:"Or continue with"})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs(I,{variant:"outline",type:"button",className:"h-10",onClick:U,disabled:g||E!==null,children:[E==="google"?e.jsx("div",{className:"h-4 w-4 border-2 border-current border-t-transparent rounded-full animate-spin mr-2"}):e.jsxs("svg",{className:"mr-2 h-4 w-4",viewBox:"0 0 24 24",children:[e.jsx("path",{d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z",fill:"#4285F4"}),e.jsx("path",{d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z",fill:"#34A853"}),e.jsx("path",{d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z",fill:"#FBBC05"}),e.jsx("path",{d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z",fill:"#EA4335"})]}),"Google"]}),e.jsxs(I,{variant:"outline",type:"button",className:"h-10",onClick:D,disabled:g||E!==null,children:[E==="github"?e.jsx("div",{className:"h-4 w-4 border-2 border-current border-t-transparent rounded-full animate-spin mr-2"}):e.jsx("svg",{className:"mr-2 h-4 w-4",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 0C4.477 0 0 4.484 0 10.017c0 4.425 2.865 8.18 6.839 9.504.5.092.682-.217.682-.483 0-.237-.008-.868-.013-1.703-2.782.605-3.369-1.343-3.369-1.343-.454-1.158-1.11-1.466-1.11-1.466-.908-.62.069-.608.069-.608 1.003.07 1.531 1.032 1.531 1.032.892 1.53 2.341 1.088 2.91.832.092-.647.35-1.088.636-1.338-2.22-.253-4.555-1.113-4.555-4.951 0-1.093.39-1.988 1.029-2.688-.103-.253-.446-1.272.098-2.65 0 0 .84-.27 2.75 1.026A9.564 9.564 0 0110 4.844c.85.004 1.705.115 2.504.337 1.909-1.296 2.747-1.027 2.747-1.027.546 1.379.203 2.398.1 2.651.64.7 1.028 1.595 1.028 2.688 0 3.848-2.339 4.695-4.566 4.942.359.31.678.921.678 1.856 0 1.338-.012 2.419-.012 2.747 0 .268.18.58.688.482A10.019 10.019 0 0020 10.017C20 4.484 15.522 0 10 0z",clipRule:"evenodd"})}),"GitHub"]})]}),e.jsxs("div",{className:"mt-6 text-center text-sm",children:["Don't have an account?"," ",e.jsx(is,{to:"/signup",className:"font-medium text-primary hover:underline",children:"Create account"})]})]})})]}),e.jsx(Gt,{open:v,onOpenChange:y,children:e.jsxs(qt,{className:"sm:max-w-md",children:[e.jsxs(Kt,{children:[e.jsxs(Yt,{className:"flex items-center gap-2",children:[e.jsx(fa,{className:"h-5 w-5 text-primary"}),"Reset Password"]}),e.jsx(vs,{children:"Enter your email address and we'll send you a link to reset your password."})]}),e.jsxs("form",{onSubmit:q,children:[e.jsx("div",{className:"grid gap-4 py-4",children:e.jsxs("div",{className:"grid gap-2",children:[e.jsx(ue,{htmlFor:"reset-email",children:"Email Address"}),e.jsx(we,{id:"reset-email",type:"email",placeholder:"you@example.com",value:_,onChange:M=>S(M.target.value),required:!0,className:"allow-select"})]})}),e.jsxs(ea,{children:[e.jsx(I,{type:"button",variant:"outline",onClick:()=>y(!1),children:"Cancel"}),e.jsx(I,{type:"submit",disabled:b,children:b?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"h-4 w-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Sending..."]}):"Send Reset Link"})]})]})]})})]})}function jO(){return e.jsx("main",{className:"min-h-screen bg-background flex items-center justify-center px-4 py-12",children:e.jsx("div",{className:"w-full max-w-md",children:e.jsx(yO,{})})})}function NO({className:t,...s}){const[a,n]=N.useState({name:"",email:"",password:"",confirmPassword:"",phone:"",businessName:""}),[i,c]=N.useState(""),[d,h]=N.useState(!1),[f,g]=N.useState(!1),[p,v]=N.useState(!1),y=_n(),_=b=>{const{id:T,value:E}=b.target;n(A=>({...A,[T]:E}))},S=async b=>{b.preventDefault(),h(!0),c("");const{name:T,email:E,password:A,confirmPassword:O,phone:Q,businessName:q}=a;if(!T||!E||!A||!O||!Q||!q){c("All fields are required."),R.error("All fields are required."),h(!1);return}if(A!==O){c("Passwords do not match."),R.error("Passwords do not match."),h(!1);return}try{const U=await ke.post("/auth/register",{name:T,email:E,password:A,phone:Q,businessName:q});localStorage.setItem("token",U.data.token),localStorage.setItem("user",JSON.stringify(U.data.user)),R.success("Signup successful! Redirecting..."),y("/dashboard"),window.location.reload()}catch(U){const D=U.response?.data?.message||"Signup failed. Try again.";c(D),R.error(D)}finally{h(!1)}};return e.jsxs("div",{className:ut("flex flex-col gap-6 relative",t),...s,children:[e.jsxs("div",{className:"absolute inset-0 -z-10 overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 left-0 w-64 h-64 bg-primary/10 rounded-full blur-3xl animate-pulse"}),e.jsx("div",{className:"absolute bottom-0 right-0 w-96 h-96 bg-accent/10 rounded-full blur-3xl animate-pulse",style:{animationDelay:"1s"}})]}),e.jsxs("div",{className:"text-center mb-4 animate-in fade-in slide-in-from-top-4 duration-700",children:[e.jsxs("div",{className:"inline-flex items-center gap-2 mb-2",children:[e.jsx(wi,{className:"h-8 w-8 text-primary animate-pulse"}),e.jsx("h1",{className:"text-4xl font-bold text-primary",children:"ominbiz"})]}),e.jsx("p",{className:"text-muted-foreground text-sm",children:"Business Management Platform"})]}),e.jsxs(se,{className:"border-2 shadow-2xl backdrop-blur-sm bg-card/95 animate-in fade-in slide-in-from-bottom-4 duration-700",children:[e.jsxs(_e,{className:"space-y-2",children:[e.jsxs(Te,{className:"text-2xl font-bold flex items-center gap-2",children:[e.jsx(td,{className:"h-6 w-6 text-primary"}),"Create Your Account"]}),e.jsx(vt,{className:"text-base",children:"Enter your details below to get started"})]}),e.jsx(oe,{children:e.jsxs("form",{onSubmit:S,children:[e.jsxs("div",{className:"flex flex-col gap-5",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(ue,{htmlFor:"name",className:"text-sm font-medium",children:"Full Name"}),e.jsxs("div",{className:"relative",children:[e.jsx(Aa,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(we,{id:"name",type:"text",value:a.name,onChange:_,placeholder:"John Doe",required:!0,className:"pl-10 h-11 transition-all allow-select"})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(ue,{htmlFor:"email",className:"text-sm font-medium",children:"Email Address"}),e.jsxs("div",{className:"relative",children:[e.jsx(fa,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(we,{id:"email",type:"email",value:a.email,onChange:_,placeholder:"you@example.com",required:!0,className:"pl-10 h-11 transition-all allow-select"})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(ue,{htmlFor:"phone",className:"text-sm font-medium",children:"Phone Number"}),e.jsxs("div",{className:"relative",children:[e.jsx(ia,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(we,{id:"phone",type:"tel",value:a.phone,onChange:_,placeholder:"+1 (555) 000-0000",required:!0,className:"pl-10 h-11 transition-all allow-select"})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(ue,{htmlFor:"businessName",className:"text-sm font-medium",children:"Business Name"}),e.jsxs("div",{className:"relative",children:[e.jsx(ec,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(we,{id:"businessName",type:"text",value:a.businessName,onChange:_,placeholder:"Your Business",required:!0,className:"pl-10 h-11 transition-all allow-select"})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(ue,{htmlFor:"password",className:"text-sm font-medium",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(sr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(we,{id:"password",type:f?"text":"password",value:a.password,onChange:_,required:!0,className:"pl-10 pr-10 h-11 transition-all allow-select"}),e.jsx(I,{type:"button",variant:"ghost",size:"icon",className:"absolute right-1 top-1/2 transform -translate-y-1/2 h-8 w-8",onClick:()=>g(!f),children:f?e.jsx(od,{className:"h-4 w-4"}):e.jsx(Pa,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(ue,{htmlFor:"confirmPassword",className:"text-sm font-medium",children:"Confirm Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(sr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(we,{id:"confirmPassword",type:p?"text":"password",value:a.confirmPassword,onChange:_,required:!0,className:"pl-10 pr-10 h-11 transition-all allow-select"}),e.jsx(I,{type:"button",variant:"ghost",size:"icon",className:"absolute right-1 top-1/2 transform -translate-y-1/2 h-8 w-8",onClick:()=>v(!p),children:p?e.jsx(od,{className:"h-4 w-4"}):e.jsx(Pa,{className:"h-4 w-4"})})]})]}),e.jsx(I,{type:"submit",className:"w-full h-11 bg-primary hover:bg-primary/90 transition-all shadow-lg hover:shadow-xl group",disabled:d,children:d?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"h-4 w-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Creating account..."]}):e.jsxs(e.Fragment,{children:["Sign up",e.jsx(Zy,{className:"ml-2 h-4 w-4 group-hover:translate-x-1 transition-transform"})]})})]}),e.jsxs("div",{className:"mt-6 text-center text-sm",children:["Already have an account?"," ",e.jsx(is,{to:"/loginpage",className:"font-medium text-primary hover:underline",children:"Log in"})]})]})})]})]})}function wO(){return e.jsx("main",{className:"min-h-screen bg-background flex items-center justify-center px-4 py-12",children:e.jsx("div",{className:"w-full max-w-md",children:e.jsx(NO,{})})})}function bO(){return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-white px-4",children:e.jsxs("div",{className:"text-center border border-green-100 rounded-lg p-8 shadow-md max-w-md w-full",children:[e.jsx("h1",{className:"text-6xl font-bold text-green-600 mb-4",children:"404"}),e.jsx("p",{className:"text-lg text-green-700 mb-6",children:"Oops! Page not found."}),e.jsx(is,{to:"/",className:"inline-block bg-green-600 text-white px-4 py-2 rounded hover:bg-green-500 transition",children:"Go back home"})]})})}const SO=[{name:"Overview",href:"/dashboard",icon:Mn,section:"main"},{name:"Analytics",href:"/dashboard/analytics",icon:aa,section:"main"},{name:"Graphs",href:"/dashboard/graphs",icon:O_,section:"main"},{name:"Maps",href:"/dashboard/maps",icon:j5,section:"main"},{name:"Inventory",href:"/dashboard/inventory",icon:cs,section:"business"},{name:"Products",href:"/dashboard/products",icon:cs,section:"business"},{name:"E-Commerce",href:"/dashboard/ecommerce",icon:Bs,section:"business"},{name:"Discounts",href:"/dashboard/discounts",icon:tc,section:"business"},{name:"Services",href:"/dashboard/services",icon:ec,section:"business"},{name:"Appointments",href:"/dashboard/appointments",icon:Ms,section:"business"},{name:"Finances",href:"/dashboard/finances",icon:Sa,section:"business"},{name:"Purchasing",href:"/dashboard/purchasing",icon:Bs,section:"business"},{name:"Subscriptions",href:"/dashboard/subscriptions",icon:Ba,section:"business"},{name:"Live Sessions",href:"/dashboard/sessions",icon:za,section:"communication",badge:"New"},{name:"Messages",href:"/dashboard/messages",icon:ja,section:"communication"},{name:"Live Support",href:"/dashboard/support",icon:Rp,section:"communication"},{name:"Team",href:"/dashboard/team",icon:fs,section:"team"},{name:"AI Insights",href:"/dashboard/ai-insights",icon:jo,section:"team"},{name:"Locations",href:"/dashboard/locations",icon:Fr,section:"team"},{name:"Security",href:"/dashboard/security-dashboard",icon:_a,section:"security",badge:"AI"},{name:"Reports",href:"/dashboard/reports",icon:Ka,section:"tools"},{name:"History",href:"/dashboard/history",icon:Zl,section:"tools"},{name:"Search",href:"/dashboard/search",icon:Da,section:"tools"},{name:"Learning Center",href:"/dashboard/resources",icon:go,section:"tools"},{name:"UI Components",href:"/dashboard/gui",icon:N5,section:"tools"}];function _O(){const{user:t,isAuthenticated:s,logout:a}=qs(),n=Yy(),i=_n(),[c,d]=N.useState(!1),h=s?t?.name:"Guest",f=s?t?.name.split(" ").map(p=>p[0]).join(""):"G",g=()=>{a(),i("/")};return e.jsx("div",{className:ut("bg-card border-r border-border transition-all duration-300 shadow-sm",c?"w-16":"w-64"),children:e.jsxs("div",{className:"flex h-full flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-border",children:[!c&&e.jsxs(is,{to:"/dashboard",className:"flex items-center space-x-2",children:[e.jsx("img",{src:"https://2aa832b0f010801d3551c6c63b116063.cdn.bubble.io/cdn-cgi/image/w=48,h=48,f=auto,dpr=1,fit=contain/f1758225569468x933635082935872100/logo.webp",alt:""}),e.jsxs("span",{className:"text-xl font-bold text-primary",children:["Omin",e.jsx("span",{className:"text-accent",children:"Biz"})]})]}),e.jsx(I,{variant:"ghost",size:"icon",onClick:()=>d(!c),className:"h-8 w-8 text-primary hover:text-primary/80",children:c?e.jsx(y5,{className:"h-4 w-4"}):e.jsx(nr,{className:"h-4 w-4"})})]}),e.jsx("nav",{className:"flex-1 overflow-y-auto p-2 space-y-1",children:SO.map(p=>{if(p.adminOnly&&t?.role!=="admin"&&t?.role!=="super_admin")return null;const v=n.pathname===p.href;return e.jsxs(is,{to:p.href,className:ut("flex items-center px-3 py-2 rounded-lg text-sm font-medium transition-colors relative group",v?"bg-primary text-primary-foreground shadow-sm":"text-foreground hover:bg-accent hover:text-accent-foreground"),children:[e.jsx(p.icon,{className:ut("h-5 w-5 flex-shrink-0",c?"mx-auto":"mr-3")}),!c&&e.jsxs("div",{className:"flex items-center justify-between flex-1 min-w-0",children:[e.jsx("span",{className:"truncate",children:p.name}),p.badge&&e.jsx("span",{className:ut("ml-2 px-1.5 py-0.5 text-[10px] font-semibold rounded-full",v?"bg-primary-foreground text-primary":p.badge==="AI"?"bg-gradient-to-r from-purple-500 to-blue-500 text-white":"bg-green-500 text-white"),children:p.badge})]}),c&&p.badge&&e.jsx("span",{className:ut("absolute top-1 right-1 h-2 w-2 rounded-full",p.badge==="AI"?"bg-purple-500":"bg-green-500")})]},p.name)})}),e.jsxs("div",{className:"border-t border-border",children:[e.jsxs("div",{className:"p-2 space-y-1",children:[e.jsxs(is,{to:"/dashboard/settings",className:ut("flex items-center px-3 py-2 rounded-lg text-sm font-medium transition-colors",n.pathname==="/dashboard/settings"?"bg-primary text-primary-foreground shadow-sm":"text-foreground hover:bg-accent hover:text-accent-foreground"),children:[e.jsx(Ya,{className:ut("h-5 w-5",c?"mx-auto":"mr-3")}),!c&&e.jsx("span",{children:"Settings"})]}),e.jsxs(is,{to:"/dashboard/profile",className:ut("flex items-center px-3 py-2 rounded-lg text-sm font-medium transition-colors",n.pathname==="/dashboard/profile"?"bg-primary text-primary-foreground shadow-sm":"text-foreground hover:bg-accent hover:text-accent-foreground"),children:[e.jsx(Aa,{className:ut("h-5 w-5",c?"mx-auto":"mr-3")}),!c&&e.jsx("span",{children:"Profile"})]}),e.jsxs(is,{to:"/dashboard/wallet",className:ut("flex items-center px-3 py-2 rounded-lg text-sm font-medium transition-colors",n.pathname==="/dashboard/wallet"?"bg-primary text-primary-foreground shadow-sm":"text-foreground hover:bg-accent hover:text-accent-foreground"),children:[e.jsx(Uu,{className:ut("h-5 w-5",c?"mx-auto":"mr-3")}),!c&&e.jsx("span",{children:"Wallet"})]}),e.jsxs(is,{to:"/dashboard/help",className:ut("flex items-center px-3 py-2 rounded-lg text-sm font-medium transition-colors",n.pathname==="/dashboard/help"?"bg-primary text-primary-foreground shadow-sm":"text-foreground hover:bg-accent hover:text-accent-foreground"),children:[e.jsx(Xy,{className:ut("h-5 w-5",c?"mx-auto":"mr-3")}),!c&&e.jsx("span",{children:"Help & Support"})]}),e.jsxs(I,{onClick:g,variant:"ghost",className:ut("flex items-center px-3 py-2 rounded-lg text-sm font-medium transition-colors w-full justify-start","text-destructive hover:bg-destructive/10 hover:text-destructive"),children:[e.jsx(op,{className:ut("h-5 w-5",c?"mx-auto":"mr-3")}),!c&&e.jsx("span",{children:"Logout"})]})]}),!c&&e.jsx("div",{className:"p-4 border-t border-border bg-muted/30",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("div",{className:"h-8 w-8 rounded-full bg-primary flex items-center justify-center shadow-sm",children:[e.jsx("span",{className:"text-sm font-medium text-primary-foreground",children:f})," "]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("p",{className:"text-sm font-medium text-foreground truncate",children:[h," "]}),e.jsx("p",{className:"text-xs text-muted-foreground truncate",children:t?.role||"User"})]})]})})]})]})})}function ny({...t}){return e.jsx(q3,{"data-slot":"dropdown-menu",...t})}function ry({...t}){return e.jsx(K3,{"data-slot":"dropdown-menu-trigger",...t})}function iy({className:t,sideOffset:s=4,...a}){return e.jsx(Y3,{children:e.jsx(Z3,{"data-slot":"dropdown-menu-content",sideOffset:s,className:ut("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 max-h-(--radix-dropdown-menu-content-available-height) min-w-[8rem] origin-(--radix-dropdown-menu-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border p-1 shadow-md",t),...a})})}function Ui({className:t,inset:s,variant:a="default",...n}){return e.jsx(J3,{"data-slot":"dropdown-menu-item","data-inset":s,"data-variant":a,className:ut("focus:bg-accent focus:text-accent-foreground data-[variant=destructive]:text-destructive data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/20 data-[variant=destructive]:focus:text-destructive data-[variant=destructive]:*:[svg]:!text-destructive [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...n})}function CO({className:t,inset:s,...a}){return e.jsx(X3,{"data-slot":"dropdown-menu-label","data-inset":s,className:ut("px-2 py-1.5 text-sm font-medium data-[inset]:pl-8",t),...a})}function J1({className:t,...s}){return e.jsx(Q3,{"data-slot":"dropdown-menu-separator",className:ut("bg-border -mx-1 my-1 h-px",t),...s})}const TO=oj("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function ze({className:t,variant:s,asChild:a=!1,...n}){const i=a?qy:"span";return e.jsx(i,{"data-slot":"badge",className:ut(TO({variant:s}),t),...n})}const xr=N.forwardRef(({className:t,children:s,...a},n)=>e.jsxs(p_,{ref:n,className:ut("relative overflow-hidden",t),...a,children:[e.jsx(e5,{className:"h-full w-full rounded-[inherit]",children:s}),e.jsx(P4,{}),e.jsx(t5,{})]}));xr.displayName=p_.displayName;const P4=N.forwardRef(({className:t,orientation:s="vertical",...a},n)=>e.jsx(g_,{ref:n,orientation:s,className:ut("flex touch-none select-none transition-colors",s==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",s==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",t),...a,children:e.jsx(s5,{className:"relative flex-1 rounded-full bg-border"})}));P4.displayName=g_.displayName;var Hp="Popover",[O4]=Pp(Hp,[Op]),Zm=Op(),[kO,lc]=O4(Hp),M4=t=>{const{__scopePopover:s,children:a,open:n,defaultOpen:i,onOpenChange:c,modal:d=!1}=t,h=Zm(s),f=N.useRef(null),[g,p]=N.useState(!1),[v,y]=_m({prop:n,defaultProp:i??!1,onChange:c,caller:Hp});return e.jsx(T_,{...h,children:e.jsx(kO,{scope:s,contentId:Mp(),triggerRef:f,open:v,onOpenChange:y,onOpenToggle:N.useCallback(()=>y(_=>!_),[y]),hasCustomAnchor:g,onCustomAnchorAdd:N.useCallback(()=>p(!0),[]),onCustomAnchorRemove:N.useCallback(()=>p(!1),[]),modal:d,children:a})})};M4.displayName=Hp;var R4="PopoverAnchor",EO=N.forwardRef((t,s)=>{const{__scopePopover:a,...n}=t,i=lc(R4,a),c=Zm(a),{onCustomAnchorAdd:d,onCustomAnchorRemove:h}=i;return N.useEffect(()=>(d(),()=>h()),[d,h]),e.jsx(Ky,{...c,...n,ref:s})});EO.displayName=R4;var L4="PopoverTrigger",I4=N.forwardRef((t,s)=>{const{__scopePopover:a,...n}=t,i=lc(L4,a),c=Zm(a),d=Sn(s,i.triggerRef),h=e.jsx(Ma.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":V4(i.open),...n,ref:d,onClick:ua(t.onClick,i.onOpenToggle)});return i.hasCustomAnchor?h:e.jsx(Ky,{asChild:!0,...c,children:h})});I4.displayName=L4;var hj="PopoverPortal",[AO,DO]=O4(hj,{forceMount:void 0}),F4=t=>{const{__scopePopover:s,forceMount:a,children:n,container:i}=t,c=lc(hj,s);return e.jsx(AO,{scope:s,forceMount:a,children:e.jsx(v_,{present:a||c.open,children:e.jsx(y_,{asChild:!0,container:i,children:n})})})};F4.displayName=hj;var Iu="PopoverContent",B4=N.forwardRef((t,s)=>{const a=DO(Iu,t.__scopePopover),{forceMount:n=a.forceMount,...i}=t,c=lc(Iu,t.__scopePopover);return e.jsx(v_,{present:n||c.open,children:c.modal?e.jsx(OO,{...i,ref:s}):e.jsx(MO,{...i,ref:s})})});B4.displayName=Iu;var PO=w_("PopoverContent.RemoveScroll"),OO=N.forwardRef((t,s)=>{const a=lc(Iu,t.__scopePopover),n=N.useRef(null),i=Sn(s,n),c=N.useRef(!1);return N.useEffect(()=>{const d=n.current;if(d)return j_(d)},[]),e.jsx(N_,{as:PO,allowPinchZoom:!0,children:e.jsx(z4,{...t,ref:i,trapFocus:a.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:ua(t.onCloseAutoFocus,d=>{d.preventDefault(),c.current||a.triggerRef.current?.focus()}),onPointerDownOutside:ua(t.onPointerDownOutside,d=>{const h=d.detail.originalEvent,f=h.button===0&&h.ctrlKey===!0,g=h.button===2||f;c.current=g},{checkForDefaultPrevented:!1}),onFocusOutside:ua(t.onFocusOutside,d=>d.preventDefault(),{checkForDefaultPrevented:!1})})})}),MO=N.forwardRef((t,s)=>{const a=lc(Iu,t.__scopePopover),n=N.useRef(!1),i=N.useRef(!1);return e.jsx(z4,{...t,ref:s,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:c=>{t.onCloseAutoFocus?.(c),c.defaultPrevented||(n.current||a.triggerRef.current?.focus(),c.preventDefault()),n.current=!1,i.current=!1},onInteractOutside:c=>{t.onInteractOutside?.(c),c.defaultPrevented||(n.current=!0,c.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const d=c.target;a.triggerRef.current?.contains(d)&&c.preventDefault(),c.detail.originalEvent.type==="focusin"&&i.current&&c.preventDefault()}})}),z4=N.forwardRef((t,s)=>{const{__scopePopover:a,trapFocus:n,onOpenAutoFocus:i,onCloseAutoFocus:c,disableOutsidePointerEvents:d,onEscapeKeyDown:h,onPointerDownOutside:f,onFocusOutside:g,onInteractOutside:p,...v}=t,y=lc(Iu,a),_=Zm(a);return b_(),e.jsx(S_,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:i,onUnmountAutoFocus:c,children:e.jsx(__,{asChild:!0,disableOutsidePointerEvents:d,onInteractOutside:p,onEscapeKeyDown:h,onPointerDownOutside:f,onFocusOutside:g,onDismiss:()=>y.onOpenChange(!1),children:e.jsx(C_,{"data-state":V4(y.open),role:"dialog",id:y.contentId,..._,...v,ref:s,style:{...v.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),U4="PopoverClose",RO=N.forwardRef((t,s)=>{const{__scopePopover:a,...n}=t,i=lc(U4,a);return e.jsx(Ma.button,{type:"button",...n,ref:s,onClick:ua(t.onClick,()=>i.onOpenChange(!1))})});RO.displayName=U4;var LO="PopoverArrow",IO=N.forwardRef((t,s)=>{const{__scopePopover:a,...n}=t,i=Zm(a);return e.jsx(k_,{...i,...n,ref:s})});IO.displayName=LO;function V4(t){return t?"open":"closed"}var FO=M4,BO=I4,zO=F4,H4=B4;const $4=FO,W4=BO,mj=N.forwardRef(({className:t,align:s="center",sideOffset:a=4,...n},i)=>e.jsx(zO,{children:e.jsx(H4,{ref:i,align:s,sideOffset:a,className:ut("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...n})}));mj.displayName=H4.displayName;const UO=()=>{const[t,s]=N.useState(!1),{notifications:a,unreadCount:n,markAsRead:i,markAllAsRead:c,clearNotifications:d,removeNotification:h,connected:f}=Ra(),g=y=>{switch(y){case"order_update":case"new_order":return e.jsx(cs,{className:"h-4 w-4"});case"service_request_update":case"new_service_request":return e.jsx(Ya,{className:"h-4 w-4"});default:return e.jsx(Ws,{className:"h-4 w-4"})}},p=y=>{switch(y){case"order_update":case"new_order":return"text-blue-600 bg-blue-100";case"service_request_update":case"new_service_request":return"text-green-600 bg-green-100";default:return"text-gray-600 bg-gray-100"}},v=y=>{y.read||i(y.id),console.log("Navigate to:",y.type,y.data)};return e.jsxs($4,{open:t,onOpenChange:s,children:[e.jsx(W4,{asChild:!0,children:e.jsxs(I,{variant:"ghost",size:"sm",className:"relative",onClick:()=>s(!t),children:[e.jsx(ur,{className:`h-5 w-5 ${f?"text-gray-700":"text-gray-400"}`}),n>0&&e.jsx(ze,{variant:"destructive",className:"absolute -top-1 -right-1 h-5 w-5 rounded-full p-0 flex items-center justify-center text-xs",children:n>99?"99+":n})]})}),e.jsxs(mj,{className:"w-80 p-0",align:"end",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("h3",{className:"font-semibold",children:"Notifications"}),e.jsx("div",{className:`h-2 w-2 rounded-full ${f?"bg-green-500":"bg-red-500"}`})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[n>0&&e.jsxs(I,{variant:"ghost",size:"sm",onClick:c,className:"text-xs",children:[e.jsx(Zi,{className:"h-3 w-3 mr-1"}),"Mark all read"]}),a.length>0&&e.jsx(I,{variant:"ghost",size:"sm",onClick:d,className:"text-xs text-red-600 hover:text-red-700",children:e.jsx(Ua,{className:"h-3 w-3"})})]})]}),e.jsx(xr,{className:"h-96",children:a.length===0?e.jsxs("div",{className:"p-8 text-center text-gray-500",children:[e.jsx(ur,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),e.jsx("p",{className:"text-sm",children:"No notifications yet"}),e.jsx("p",{className:"text-xs mt-1",children:f?"You're connected to real-time updates":"Connecting..."})]}):e.jsx("div",{className:"p-2",children:a.map(y=>e.jsx(se,{className:`mb-2 p-3 cursor-pointer transition-colors hover:bg-gray-50 ${y.read?"":"border-l-4 border-l-blue-500 bg-blue-50/30"}`,onClick:()=>v(y),children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:`p-1 rounded-full ${p(y.type)}`,children:g(y.type)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:y.title}),e.jsxs("div",{className:"flex items-center space-x-1",children:[!y.read&&e.jsx("div",{className:"h-2 w-2 bg-blue-500 rounded-full"}),e.jsx(I,{variant:"ghost",size:"sm",onClick:_=>{_.stopPropagation(),h(y.id)},className:"h-6 w-6 p-0 opacity-0 group-hover:opacity-100",children:e.jsx(nr,{className:"h-3 w-3"})})]})]}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:y.message}),e.jsx("p",{className:"text-xs text-gray-400 mt-2",children:y.timestamp?Wm(new Date(y.timestamp),{addSuffix:!0}):"Just now"})]})]})},y.id))})}),!f&&e.jsx("div",{className:"p-3 bg-yellow-50 border-t border-yellow-200",children:e.jsxs("div",{className:"flex items-center space-x-2 text-yellow-800",children:[e.jsx(Ws,{className:"h-4 w-4"}),e.jsx("span",{className:"text-xs",children:"Reconnecting to notifications..."})]})})]})]})},Pn=At.forwardRef(({className:t,...s},a)=>e.jsx("div",{ref:a,className:ut("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",t),...s}));Pn.displayName="Avatar";const Rr=At.forwardRef(({className:t,src:s,alt:a,...n},i)=>{const[c,d]=N.useState(!1),[h,f]=N.useState(!1),g=()=>{d(!0),f(!1)},p=()=>{f(!0),d(!1)};return!s||h?null:e.jsx("img",{ref:i,className:ut("aspect-square h-full w-full object-cover",c?"opacity-100":"opacity-0",t),src:s,alt:a,onLoad:g,onError:p,...n})});Rr.displayName="AvatarImage";const On=At.forwardRef(({className:t,...s},a)=>e.jsx("div",{ref:a,className:ut("flex h-full w-full items-center justify-center rounded-full bg-muted text-sm font-medium",t),...s}));On.displayName="AvatarFallback";const VO=({user:t,size:s="md",editable:a=!1,onUpdate:n=null,className:i=""})=>{const[c,d]=N.useState(!1),[h,f]=N.useState(null),[g,p]=N.useState(!1),v=N.useRef(null),y={xs:"w-6 h-6",sm:"w-8 h-8",md:"w-12 h-12",lg:"w-16 h-16",xl:"w-24 h-24","2xl":"w-32 h-32"},_=Q=>Q?Q.split(" ").map(q=>q.charAt(0)).join("").toUpperCase().slice(0,2):"U",S=()=>h||(t?.profilePicture?t.profilePicture:t?.avatar?t.avatar:null),b=Q=>{const q=Q.target.files[0];if(!q)return;if(!q.type.startsWith("image/")){R.error("Please select a valid image file");return}if(q.size>5*1024*1024){R.error("Image size must be less than 5MB");return}const U=new FileReader;U.onload=D=>{f(D.target.result)},U.readAsDataURL(q)},T=async()=>{if(v.current?.files[0])try{d(!0);const Q=v.current.files[0],q=new FormData;q.append("profilePicture",Q),q.append("userId",t.id);const U=await ke.post("/upload/profile-picture",q,{headers:{"Content-Type":"multipart/form-data"}});U.data.success&&(R.success("Profile picture updated successfully"),n?.(U.data.profilePictureUrl),p(!1),f(null))}catch(Q){console.error("Error uploading profile picture:",Q),R.error("Failed to upload profile picture")}finally{d(!1)}},E=async()=>{try{d(!0),await ke.delete("/upload/profile-picture"),R.success("Profile picture removed"),n?.(null),p(!1),f(null)}catch(Q){console.error("Error removing profile picture:",Q),R.error("Failed to remove profile picture")}finally{d(!1)}},A=()=>{f(null),p(!1),v.current&&(v.current.value="")},O=({showEditButton:Q=!1})=>e.jsxs("div",{className:`relative ${i}`,children:[e.jsxs(Pn,{className:`${y[s]} border-2 border-gray-200 dark:border-gray-700`,children:[e.jsx(Rr,{src:S(),alt:t?.name||"User",className:"object-cover"}),e.jsx(On,{className:"bg-gradient-to-br from-green-400 to-green-600 text-white font-semibold",children:_(t?.name)})]}),Q&&a&&e.jsx("button",{onClick:()=>p(!0),className:"absolute -bottom-1 -right-1 p-1 bg-green-600 text-white rounded-full shadow-lg hover:bg-green-700 transition-colors",children:e.jsx(Hv,{className:"w-3 h-3"})})]});return a?e.jsxs(e.Fragment,{children:[e.jsx(O,{showEditButton:!0}),e.jsx(Gt,{open:g,onOpenChange:p,children:e.jsxs(qt,{className:"sm:max-w-md",children:[e.jsx(Kt,{children:e.jsx(Yt,{children:"Update Profile Picture"})}),e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex justify-center",children:e.jsxs("div",{className:"relative",children:[e.jsxs(Pn,{className:"w-32 h-32 border-4 border-gray-200 dark:border-gray-700",children:[e.jsx(Rr,{src:S(),alt:t?.name||"User",className:"object-cover"}),e.jsx(On,{className:"bg-gradient-to-br from-green-400 to-green-600 text-white text-2xl font-semibold",children:_(t?.name)})]}),h&&e.jsx("div",{className:"absolute inset-0 bg-black/50 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-white text-xs font-medium",children:"Preview"})})]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("input",{ref:v,type:"file",accept:"image/*",onChange:b,className:"hidden"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs(I,{variant:"outline",onClick:()=>v.current?.click(),disabled:c,className:"w-full",children:[e.jsx(Yo,{className:"w-4 h-4 mr-2"}),"Choose Image"]}),(t?.profilePicture||t?.avatar)&&e.jsxs(I,{variant:"outline",onClick:E,disabled:c,className:"w-full text-red-600 hover:text-red-700",children:[e.jsx(nr,{className:"w-4 h-4 mr-2"}),"Remove"]})]}),h&&e.jsxs("div",{className:"flex space-x-3",children:[e.jsxs(I,{onClick:T,disabled:c,className:"flex-1 bg-green-600 hover:bg-green-700",children:[c?e.jsx(Hi,{className:"w-4 h-4 mr-2 animate-spin"}):e.jsx(To,{className:"w-4 h-4 mr-2"}),c?"Uploading...":"Save"]}),e.jsx(I,{variant:"outline",onClick:A,disabled:c,children:"Cancel"})]})]}),e.jsxs("div",{className:"text-sm text-gray-500 space-y-1",children:[e.jsx("p",{className:"font-medium",children:"Guidelines:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-1 text-xs",children:[e.jsx("li",{children:"Use a clear, professional photo"}),e.jsx("li",{children:"Square images work best"}),e.jsx("li",{children:"Maximum file size: 5MB"}),e.jsx("li",{children:"Supported formats: JPG, PNG, GIF"})]})]})]})]})})]}):e.jsx(O,{})},HO=({size:t="md",variant:s="full",className:a="",showText:n=!0,animated:i=!1})=>{const c={xs:"w-6 h-6",sm:"w-8 h-8",md:"w-12 h-12",lg:"w-16 h-16",xl:"w-24 h-24","2xl":"w-32 h-32"},d={xs:"text-sm",sm:"text-base",md:"text-xl",lg:"text-2xl",xl:"text-3xl","2xl":"text-4xl"},h=({className:f=""})=>e.jsxs("div",{className:`relative ${f} ${i?"animate-pulse":""}`,children:[e.jsx("div",{className:"absolute inset-0 bg-green-500 rounded-full shadow-lg",children:e.jsx("div",{className:"absolute top-1 left-1 w-3 h-3 bg-white/30 rounded-full blur-sm"})}),e.jsx("div",{className:"relative flex items-center justify-center w-full h-full text-white",children:e.jsxs("svg",{viewBox:"0 0 24 24",fill:"currentColor",className:"w-2/3 h-2/3",children:[e.jsx("path",{d:"M12 2L2 7v10c0 5.55 3.84 10 9 11 1.16-.21 2.31-.48 3.38-.84C16.5 26.32 18.74 25.5 21 24.5V7L12 2z"}),e.jsx("path",{d:"M12 2v20c5.16-1 9-5.45 9-11V7L12 2z",opacity:"0.7"}),e.jsx("rect",{x:"6",y:"9",width:"2",height:"2",fill:"currentColor",opacity:"0.8"}),e.jsx("rect",{x:"10",y:"9",width:"2",height:"2",fill:"currentColor",opacity:"0.8"}),e.jsx("rect",{x:"14",y:"9",width:"2",height:"2",fill:"currentColor",opacity:"0.8"}),e.jsx("rect",{x:"6",y:"13",width:"2",height:"2",fill:"currentColor",opacity:"0.8"}),e.jsx("rect",{x:"10",y:"13",width:"2",height:"2",fill:"currentColor",opacity:"0.8"}),e.jsx("rect",{x:"14",y:"13",width:"2",height:"2",fill:"currentColor",opacity:"0.8"})]})}),i&&e.jsx("div",{className:"absolute -inset-1 bg-green-500 rounded-full opacity-20 animate-ping"})]});return s==="icon"?e.jsx(h,{className:`${c[t]} ${a}`}):e.jsxs("div",{className:`flex items-center space-x-3 ${a}`,children:[e.jsx(h,{className:c[t]}),n&&e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:`font-bold text-gray-900 dark:text-white ${d[t]} leading-tight`,children:"ominbiz"}),e.jsx("span",{className:`text-green-600 font-medium ${t==="xs"||t==="sm"?"text-xs":"text-sm"} leading-tight`,children:"Business Pro"})]})]})},G4=N.createContext(),Gu=()=>{const t=N.useContext(G4);if(!t)throw new Error("useAppTheme must be used within a ThemeProvider");return t},Ni={light:{name:"Light",description:"Clean and bright interface",preview:"bg-white text-gray-900",category:"default",colors:{primary:"#3b82f6",secondary:"#64748b",accent:"#10b981",background:"#ffffff",foreground:"#1f2937"}},dark:{name:"Dark",description:"Easy on the eyes",preview:"bg-gray-900 text-white",category:"default",colors:{primary:"#60a5fa",secondary:"#94a3b8",accent:"#34d399",background:"#111827",foreground:"#f9fafb"}},blue:{name:"Ocean Blue",description:"Professional blue theme",preview:"bg-blue-600 text-white",category:"color",colors:{primary:"#2563eb",secondary:"#1e40af",accent:"#3b82f6",background:"#eff6ff",foreground:"#1e3a8a"}},green:{name:"Forest Green",description:"Nature-inspired green",preview:"bg-green-600 text-white",category:"color",colors:{primary:"#16a34a",secondary:"#15803d",accent:"#22c55e",background:"#f0fdf4",foreground:"#14532d"}},purple:{name:"Royal Purple",description:"Elegant purple theme",preview:"bg-purple-600 text-white",category:"color",colors:{primary:"#9333ea",secondary:"#7c3aed",accent:"#a855f7",background:"#faf5ff",foreground:"#581c87"}},orange:{name:"Sunset Orange",description:"Warm and energetic",preview:"bg-orange-600 text-white",category:"color",colors:{primary:"#ea580c",secondary:"#dc2626",accent:"#f97316",background:"#fff7ed",foreground:"#9a3412"}},rose:{name:"Rose Pink",description:"Soft and modern",preview:"bg-rose-600 text-white",category:"color",colors:{primary:"#e11d48",secondary:"#be185d",accent:"#f43f5e",background:"#fff1f2",foreground:"#881337"}},slate:{name:"Slate Gray",description:"Professional and minimal",preview:"bg-slate-600 text-white",category:"neutral",colors:{primary:"#475569",secondary:"#334155",accent:"#64748b",background:"#f8fafc",foreground:"#0f172a"}},emerald:{name:"Emerald",description:"Fresh and vibrant",preview:"bg-emerald-600 text-white",category:"color",colors:{primary:"#059669",secondary:"#047857",accent:"#10b981",background:"#ecfdf5",foreground:"#064e3b"}},fresh:{name:"Fresh White",description:"Clean white with green accents",preview:"bg-white text-gray-900 border border-green-500",category:"color",colors:{primary:"#10b981",secondary:"#059669",accent:"#34d399",background:"#ffffff",foreground:"#1f2937"}},indigo:{name:"Deep Indigo",description:"Rich and sophisticated",preview:"bg-indigo-600 text-white",category:"color",colors:{primary:"#4f46e5",secondary:"#4338ca",accent:"#6366f1",background:"#f0f9ff",foreground:"#312e81"}},cyberpunk:{name:"Cyberpunk",description:"Neon and futuristic",preview:"bg-black text-cyan-400 border border-pink-500",category:"special",colors:{primary:"#06b6d4",secondary:"#ec4899",accent:"#10b981",background:"#000000",foreground:"#22d3ee"}},sunset:{name:"Sunset",description:"Warm orange theme",preview:"bg-orange-500 text-white",category:"special",colors:{primary:"#f97316",secondary:"#ec4899",accent:"#fbbf24",background:"#fff7ed",foreground:"#9a3412"}},ocean:{name:"Ocean Depths",description:"Deep blue theme",preview:"bg-blue-800 text-white",category:"special",colors:{primary:"#1e40af",secondary:"#312e81",accent:"#3b82f6",background:"#eff6ff",foreground:"#1e3a8a"}},system:{name:"System",description:"Follow system preference",preview:"bg-gray-500 text-white",category:"auto",colors:{primary:"#3b82f6",secondary:"#64748b",accent:"#10b981",background:"var(--background)",foreground:"var(--foreground)"}},dracula:{name:"Dracula",description:"Popular dark theme",preview:"bg-[#282a36] text-[#f8f8f2] border border-[#bd93f9]",category:"special",colors:{primary:"#bd93f9",secondary:"#ff79c6",accent:"#50fa7b",background:"#282a36",foreground:"#f8f8f2"}},nord:{name:"Nord",description:"Arctic nordic theme",preview:"bg-[#2e3440] text-[#eceff4] border border-[#88c0d0]",category:"special",colors:{primary:"#88c0d0",secondary:"#81a1c1",accent:"#a3be8c",background:"#2e3440",foreground:"#eceff4"}},tokyonight:{name:"Tokyo Night",description:"Neon city nights",preview:"bg-[#1a1b26] text-[#c0caf5] border border-[#7aa2f7]",category:"special",colors:{primary:"#7aa2f7",secondary:"#bb9af7",accent:"#9ece6a",background:"#1a1b26",foreground:"#c0caf5"}},corporate:{name:"Corporate Blue",description:"Professional business theme",preview:"bg-blue-700 text-white",category:"business",colors:{primary:"#1e40af",secondary:"#1e3a8a",accent:"#3b82f6",background:"#ffffff",foreground:"#1e293b"}},forest:{name:"Forest Green",description:"Calm forest vibes",preview:"bg-green-700 text-white",category:"nature",colors:{primary:"#047857",secondary:"#065f46",accent:"#10b981",background:"#f0fdf4",foreground:"#064e3b"}},lavender:{name:"Lavender Dreams",description:"Soft lavender theme",preview:"bg-purple-400 text-white",category:"nature",colors:{primary:"#a855f7",secondary:"#ec4899",accent:"#d946ef",background:"#faf5ff",foreground:"#581c87"}},neon:{name:"Neon Lights",description:"Vibrant neon colors",preview:"bg-gradient-to-r from-pink-500 to-purple-500 text-white",category:"modern",colors:{primary:"#ec4899",secondary:"#a855f7",accent:"#06b6d4",background:"#18181b",foreground:"#fafafa"}},minimal:{name:"Minimal Black",description:"Ultra minimal design",preview:"bg-black text-white",category:"modern",colors:{primary:"#18181b",secondary:"#27272a",accent:"#3f3f46",background:"#ffffff",foreground:"#09090b"}},spring:{name:"Spring Bloom",description:"Fresh spring colors",preview:"bg-gradient-to-r from-green-400 to-pink-400 text-white",category:"seasonal",colors:{primary:"#22c55e",secondary:"#f472b6",accent:"#a3e635",background:"#f0fdf4",foreground:"#14532d"}},autumn:{name:"Autumn Leaves",description:"Warm autumn colors",preview:"bg-gradient-to-r from-orange-600 to-red-700 text-white",category:"seasonal",colors:{primary:"#ea580c",secondary:"#dc2626",accent:"#f59e0b",background:"#fffbeb",foreground:"#78350f"}},midnight:{name:"Midnight Blue",description:"Deep midnight theme",preview:"bg-blue-950 text-blue-100",category:"dark",colors:{primary:"#1e3a8a",secondary:"#1e40af",accent:"#3b82f6",background:"#0c1629",foreground:"#dbeafe"}},monokai:{name:"Monokai",description:"Classic code theme",preview:"bg-[#272822] text-[#f8f8f2] border border-[#66d9ef]",category:"special",colors:{primary:"#66d9ef",secondary:"#f92672",accent:"#a6e22e",background:"#272822",foreground:"#f8f8f2"}},matrix:{name:"Matrix",description:"Enter the matrix",preview:"bg-black text-[#00ff00] border border-[#00ff00]",category:"special",colors:{primary:"#00ff00",secondary:"#00cc00",accent:"#00ff41",background:"#000000",foreground:"#00ff00"}},coral:{name:"Coral Reef",description:"Warm coral colors",preview:"bg-[#fff5f5] text-[#c53030]",category:"color",colors:{primary:"#f56565",secondary:"#fc8181",accent:"#feb2b2",background:"#fff5f5",foreground:"#c53030"}},mint:{name:"Fresh Mint",description:"Cool mint theme",preview:"bg-[#f0fdf4] text-[#065f46]",category:"color",colors:{primary:"#10b981",secondary:"#34d399",accent:"#6ee7b7",background:"#f0fdf4",foreground:"#065f46"}},amber:{name:"Amber Glow",description:"Warm amber tones",preview:"bg-[#fffbeb] text-[#78350f]",category:"color",colors:{primary:"#f59e0b",secondary:"#fbbf24",accent:"#fcd34d",background:"#fffbeb",foreground:"#78350f"}},deepForest:{name:"Deep Forest",description:"Dark forest theme",preview:"bg-[#064e3b] text-[#d1fae5]",category:"special",colors:{primary:"#10b981",secondary:"#34d399",accent:"#6ee7b7",background:"#064e3b",foreground:"#d1fae5"}},sakura:{name:"Cherry Blossom",description:"Soft pink sakura",preview:"bg-[#fdf2f8] text-[#831843]",category:"color",colors:{primary:"#ec4899",secondary:"#f472b6",accent:"#f9a8d4",background:"#fdf2f8",foreground:"#831843"}},arctic:{name:"Arctic Ice",description:"Cool icy blue",preview:"bg-[#f0f9ff] text-[#075985]",category:"color",colors:{primary:"#0ea5e9",secondary:"#38bdf8",accent:"#7dd3fc",background:"#f0f9ff",foreground:"#075985"}},volcano:{name:"Volcano",description:"Fiery red theme",preview:"bg-[#450a0a] text-[#fecaca]",category:"special",colors:{primary:"#dc2626",secondary:"#ef4444",accent:"#f87171",background:"#450a0a",foreground:"#fecaca"}}},e2=({children:t})=>{const[s,a]=N.useState("light"),[n,i]=N.useState(!1),[c,d]=N.useState(!0),[h,f]=N.useState(!1),[g,p]=N.useState("medium"),[v,y]=N.useState("medium"),[_,S]=N.useState(!1),[b,T]=N.useState(!1),[E,A]=N.useState("#3b82f6"),[O,Q]=N.useState(!0),[q,U]=N.useState(!0),[D,M]=N.useState(!1),P={small:{name:"Small",class:"text-sm",value:"14px"},medium:{name:"Medium",class:"text-base",value:"16px"},large:{name:"Large",class:"text-lg",value:"18px"},xlarge:{name:"Extra Large",class:"text-xl",value:"20px"}},G={none:{name:"None",value:"0px"},small:{name:"Small",value:"4px"},medium:{name:"Medium",value:"8px"},large:{name:"Large",value:"12px"},xlarge:{name:"Extra Large",value:"16px"}};N.useEffect(()=>{const J=document.documentElement;J.setAttribute("data-theme",s),s==="dark"?J.classList.add("dark"):J.classList.remove("dark"),J.style.setProperty("--font-size-base",P[g].value),J.style.setProperty("--radius",G[v].value),!c||h?(J.style.setProperty("--animation-duration","0s"),J.style.setProperty("--transition-duration","0s")):(J.style.setProperty("--animation-duration","0.3s"),J.style.setProperty("--transition-duration","0.2s"))},[s,g,v,c,h]),N.useEffect(()=>{const J=window.matchMedia("(prefers-reduced-motion: reduce)");f(J.matches);const W=he=>f(he.matches);return J.addEventListener("change",W),()=>J.removeEventListener("change",W)},[]);const K=J=>{J=J.replace("#","");const W=parseInt(J.substring(0,2),16)/255,he=parseInt(J.substring(2,4),16)/255,V=parseInt(J.substring(4,6),16)/255,ae=Math.max(W,he,V),ge=Math.min(W,he,V);let Z,ee,te=(ae+ge)/2;if(ae===ge)Z=ee=0;else{const X=ae-ge;switch(ee=te>.5?X/(2-ae-ge):X/(ae+ge),ae){case W:Z=((he-V)/X+(he<V?6:0))/6;break;case he:Z=((V-W)/X+2)/6;break;case V:Z=((W-he)/X+4)/6;break}}return Z=Math.round(Z*360),ee=Math.round(ee*100),te=Math.round(te*100),`${Z} ${ee}% ${te}%`};N.useEffect(()=>{const J=document.documentElement,W=Ni[s];if(W&&W.colors){const ae=K(W.colors.primary),ge=K(W.colors.secondary),Z=K(W.colors.accent),ee=W.colors.background.startsWith("#")?K(W.colors.background):"0 0% 100%",te=K(W.colors.foreground);J.style.setProperty("--primary",ae),J.style.setProperty("--primary-foreground","0 0% 100%"),J.style.setProperty("--secondary",ge),J.style.setProperty("--secondary-foreground",te),J.style.setProperty("--accent",Z),J.style.setProperty("--accent-foreground",te),J.style.setProperty("--background",ee),J.style.setProperty("--foreground",te),J.style.setProperty("--card",ee),J.style.setProperty("--card-foreground",te),J.style.setProperty("--popover",ee),J.style.setProperty("--popover-foreground",te),J.style.setProperty("--muted",ge),J.style.setProperty("--muted-foreground","0 0% 45%"),J.style.setProperty("--border",`${ae.split(" ")[0]} 30% 80%`),J.style.setProperty("--input",`${ae.split(" ")[0]} 30% 80%`),J.style.setProperty("--ring",ae),J.style.setProperty("--color-primary",W.colors.primary),J.style.setProperty("--color-secondary",W.colors.secondary),J.style.setProperty("--color-accent",W.colors.accent),J.style.setProperty("--color-background",W.colors.background),J.style.setProperty("--color-foreground",W.colors.foreground),document.body.style.backgroundColor=W.colors.background,document.body.style.color=W.colors.foreground}if(E){const ae=K(E);J.style.setProperty("--accent",ae),J.style.setProperty("--color-accent",E)}const he=P[g]?.value||"16px";J.style.setProperty("--font-size-base",he);const V=G[v]?.value||"0.5rem";J.style.setProperty("--border-radius-base",V),J.style.setProperty("--spacing-scale",_?"0.75":"1"),b?J.classList.add("high-contrast"):J.classList.remove("high-contrast"),h?J.classList.add("reduce-motion"):J.classList.remove("reduce-motion"),c?J.classList.remove("no-animations"):J.classList.add("no-animations")},[s,E,g,v,_,b,h,c]),N.useEffect(()=>{(()=>{try{const W=localStorage.getItem("app-theme"),he=localStorage.getItem("app-theme-settings");if(W&&a(W),he){const V=JSON.parse(he);V.sidebarCollapsed!==void 0&&i(V.sidebarCollapsed),V.compactMode!==void 0&&S(V.compactMode),V.highContrast!==void 0&&T(V.highContrast),V.reducedMotion!==void 0&&f(V.reducedMotion),V.customAccentColor&&A(V.customAccentColor),V.animations!==void 0&&d(V.animations),V.fontSize&&p(V.fontSize),V.borderRadius&&y(V.borderRadius),V.soundEnabled!==void 0&&Q(V.soundEnabled),V.autoSave!==void 0&&U(V.autoSave)}}catch(W){console.error("Error loading theme from localStorage:",W)}})()},[]),N.useEffect(()=>{const J=async()=>{try{const he=localStorage.getItem("token");if(he){const ae=(await ke.get("/user/profile",{headers:{Authorization:`Bearer ${he}`}})).data.themePreferences;ae&&(ae.theme&&a(ae.theme),ae.sidebarCollapsed!==void 0&&i(ae.sidebarCollapsed),ae.compactMode!==void 0&&S(ae.compactMode),ae.highContrast!==void 0&&T(ae.highContrast),ae.reducedMotion!==void 0&&f(ae.reducedMotion),ae.customAccentColor&&A(ae.customAccentColor),ae.animations!==void 0&&d(ae.animations),ae.fontSize&&p(ae.fontSize),ae.borderRadius&&y(ae.borderRadius),ae.soundEnabled!==void 0&&Q(ae.soundEnabled),ae.autoSave!==void 0&&U(ae.autoSave),localStorage.setItem("app-theme",ae.theme||"light"),localStorage.setItem("app-theme-settings",JSON.stringify(ae)))}}catch(he){console.log("Could not load user theme preferences from server:",he.message)}finally{M(!0)}},W=setTimeout(()=>{J()},100);return()=>clearTimeout(W)},[]),N.useEffect(()=>{if(D)try{localStorage.setItem("app-theme",s),localStorage.setItem("app-theme-settings",JSON.stringify({theme:s,sidebarCollapsed:n,compactMode:_,highContrast:b,reducedMotion:h,customAccentColor:E,animations:c,fontSize:g,borderRadius:v,soundEnabled:O,autoSave:q}))}catch(J){console.error("Error saving theme to localStorage:",J)}},[s,n,_,b,h,E,c,g,v,O,q,D]),N.useEffect(()=>{if(!D)return;const J=setTimeout(async()=>{try{const W=localStorage.getItem("token");W&&await ke.put("/user/settings",{section:"appearance",settings:{theme:s,sidebarCollapsed:n,compactMode:_,highContrast:b,reducedMotion:h,customAccentColor:E,animations:c,fontSize:g,borderRadius:v,soundEnabled:O,autoSave:q}},{headers:{Authorization:`Bearer ${W}`}})}catch(W){console.log("Could not sync theme preferences:",W.message)}},1e3);return()=>clearTimeout(J)},[D,s,n,_,b,h,E,c,g,v,O,q]);const z={theme:s,setTheme:a,themes:Object.keys(Ni),availableThemes:Ni,sidebarCollapsed:n,setSidebarCollapsed:i,compactMode:_,setCompactMode:S,animations:c,setAnimations:d,reducedMotion:h,setReducedMotion:f,highContrast:b,setHighContrast:T,fontSize:g,setFontSize:p,fontSizes:P,borderRadius:v,setBorderRadius:y,borderRadiusOptions:G,customAccentColor:E,setCustomAccentColor:A,soundEnabled:O,setSoundEnabled:Q,autoSave:q,setAutoSave:U};return e.jsx(G4.Provider,{value:z,children:t})},fj=N.createContext();function Ha({defaultValue:t,value:s,onValueChange:a,className:n,children:i,...c}){const[d,h]=N.useState(s||t),f=p=>{s===void 0&&h(p),a?.(p)},g=s!==void 0?s:d;return e.jsx(fj.Provider,{value:{value:g,onValueChange:f},children:e.jsx("div",{className:ut("flex flex-col gap-2",n),...c,children:i})})}function Xa({className:t,children:s,...a}){return e.jsx("div",{className:ut("inline-flex h-9 w-fit items-center justify-center rounded-lg bg-gray-100 p-1 text-gray-500 dark:bg-gray-800 dark:text-gray-400",t),...a,children:s})}function Tt({value:t,className:s,children:a,...n}){const{value:i,onValueChange:c}=N.useContext(fj),d=i===t;return e.jsx("button",{className:ut("inline-flex h-7 flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-3 py-1 text-sm font-medium whitespace-nowrap transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",d?"bg-white text-gray-900 shadow-sm dark:bg-gray-700 dark:text-gray-100":"hover:bg-white/50 hover:text-gray-700 dark:hover:bg-gray-700/50 dark:hover:text-gray-300",s),onClick:()=>c(t),...n,children:a})}function kt({value:t,className:s,children:a,...n}){const{value:i}=N.useContext(fj);return i!==t?null:e.jsx("div",{className:ut("flex-1 outline-none",s),...n,children:a})}const $O=()=>{const{theme:t,setTheme:s}=Gu(),[a,n]=N.useState(!1),i={default:{name:"Default",icon:M_,themes:[]},color:{name:"Colors",icon:bu,themes:[]},neutral:{name:"Neutral",icon:w5,themes:[]},special:{name:"Special",icon:wi,themes:[]}};Object.entries(Ni).forEach(([h,f])=>{const g=f.category||"default";i[g]&&i[g].themes.push({key:h,...f})});const c=h=>{s(h),R.success(`Theme changed to ${Ni[h]?.name||h}`)},d=({themeKey:h,themeData:f,isSelected:g})=>e.jsxs(se,{className:`cursor-pointer transition-all duration-200 hover:shadow-md ${g?"ring-2 ring-primary shadow-md":""}`,onClick:()=>c(h),children:[e.jsxs(_e,{className:"pb-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(Te,{className:"text-sm font-medium",children:f.name}),g&&e.jsx(To,{className:"h-4 w-4 text-primary"})]}),e.jsx(vt,{className:"text-xs",children:f.description})]}),e.jsx(oe,{className:"pt-0",children:e.jsx("div",{className:`h-16 rounded-md border-2 ${f.preview} flex items-center justify-center text-xs font-medium`,style:{backgroundColor:f.colors?.background,color:f.colors?.foreground,borderColor:f.colors?.primary},children:e.jsxs("div",{className:"flex gap-1",children:[e.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:f.colors?.primary}}),e.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:f.colors?.secondary}}),e.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:f.colors?.accent}})]})})})]});return e.jsxs(Gt,{open:a,onOpenChange:n,children:[e.jsx(Za,{asChild:!0,children:e.jsxs(I,{variant:"outline",size:"sm",className:"theme-toggle",children:[e.jsx(bu,{className:"h-4 w-4 mr-2"}),"Theme"]})}),e.jsxs(qt,{className:"max-w-4xl max-h-[80vh] overflow-y-auto",children:[e.jsxs(Kt,{children:[e.jsxs(Yt,{className:"flex items-center gap-2",children:[e.jsx(bu,{className:"h-5 w-5"}),"Choose Your Theme"]}),e.jsx(vs,{children:"Customize your ominbiz experience with beautiful themes"})]}),e.jsxs(Ha,{defaultValue:"default",className:"w-full",children:[e.jsx(Xa,{className:"grid w-full grid-cols-4",children:Object.entries(i).map(([h,f])=>{const g=f.icon;return e.jsxs(Tt,{value:h,className:"flex items-center gap-2",children:[e.jsx(g,{className:"h-4 w-4"}),f.name]},h)})}),Object.entries(i).map(([h,f])=>e.jsx(kt,{value:h,className:"mt-4",children:e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:f.themes.map(({key:g,...p})=>e.jsx(d,{themeKey:g,themeData:p,isSelected:t===g},g))})},h))]}),e.jsxs("div",{className:"flex items-center justify-between pt-4 border-t",children:[e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs(ze,{variant:"secondary",children:["Current: ",Ni[t]?.name]})}),e.jsx(I,{variant:"outline",onClick:()=>n(!1),children:"Done"})]})]})]})};function WO({...t}){return e.jsx("nav",{"aria-label":"breadcrumb",...t})}function GO({className:t,...s}){return e.jsx("ol",{className:ut("flex flex-wrap items-center gap-1.5 break-words text-sm text-muted-foreground sm:gap-2.5",t),...s})}function qO({className:t,...s}){return e.jsx("li",{className:ut("inline-flex items-center gap-1.5",t),...s})}function KO({asChild:t,className:s,...a}){const n=t?qy:"a";return e.jsx(n,{className:ut("transition-colors hover:text-foreground",s),...a})}function YO({className:t,...s}){return e.jsx("span",{role:"link","aria-disabled":"true","aria-current":"page",className:ut("font-normal text-foreground",t),...s})}function ZO({children:t,className:s,...a}){return e.jsx("li",{role:"presentation","aria-hidden":"true",className:ut("[&>svg]:size-3.5",s),...a,children:t??e.jsx(Qy,{})})}const XO=()=>{const{logout:t,user:s}=qs(),a=_n(),n=Yy(),[i,c]=N.useState(""),d=()=>{t(),a("/")},h=v=>{v.preventDefault(),i.trim()&&(a(`/dashboard/search?q=${encodeURIComponent(i.trim())}`),R.info(`Searching for: "${i.trim()}"`))},g=(()=>{const v=n.pathname.split("/").filter(Boolean),y=[];if(v.length>0&&v[0]==="dashboard"&&(y.push({name:"Dashboard",path:"/dashboard"}),v.length>1)){const _=v[1],S={inventory:"Inventory",ecommerce:"E-Commerce",appointments:"Appointments",finances:"Finances",team:"Team","ai-insights":"AI Insights",locations:"Locations",settings:"Settings",profile:"Profile",products:"Products",help:"Help & Support",analytics:"Analytics",maps:"Maps",purchasing:"Purchasing"};y.push({name:S[_]||_.charAt(0).toUpperCase()+_.slice(1),path:`/dashboard/${_}`,current:!0})}return y})(),p=s?.name||s?.fullName||"Admin";return p.split(" ").map(v=>v[0]).join("").toUpperCase(),e.jsxs("header",{className:"bg-card border-b border-border px-6 py-4 shadow-sm",children:[g.length>0&&e.jsx("div",{className:"mb-4",children:e.jsx(WO,{children:e.jsx(GO,{children:g.map((v,y)=>e.jsxs(At.Fragment,{children:[e.jsx(qO,{children:v.current?e.jsx(YO,{className:"text-primary font-medium",children:v.name}):e.jsx(KO,{href:v.path,className:"text-foreground hover:text-primary transition-colors",children:v.name})}),y<g.length-1&&e.jsx(ZO,{})]},v.path))})})}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center space-x-4 flex-1 max-w-md",children:e.jsxs("form",{onSubmit:h,className:"relative flex-1",children:[e.jsx(Da,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(we,{value:i,onChange:v=>c(v.target.value),placeholder:"Search across modules...",className:"pl-10 bg-accent/50 border-input focus-visible:ring-primary"})]})}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx($O,{}),e.jsx(UO,{}),e.jsxs(ny,{children:[e.jsx(ry,{asChild:!0,children:e.jsxs(I,{variant:"ghost",className:"flex items-center space-x-2 hover:bg-accent",children:[e.jsx(VO,{user:s,size:"sm",editable:!1}),e.jsxs("div",{className:"hidden md:block text-left",children:[e.jsx("p",{className:"text-sm font-medium text-foreground",children:p}),e.jsx("p",{className:"text-xs text-muted-foreground",children:s?.role||"User"})]})]})}),e.jsxs(iy,{align:"end",className:"border-border",children:[e.jsx(CO,{className:"text-foreground font-medium",children:"My Account"}),e.jsx(J1,{}),e.jsxs(Ui,{className:"text-foreground hover:bg-accent focus:bg-accent cursor-pointer",onClick:()=>a("/dashboard/profile"),children:[e.jsx(Aa,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"Profile"})]}),e.jsxs(Ui,{className:"text-foreground hover:bg-accent focus:bg-accent cursor-pointer",onClick:()=>a("/dashboard/wallet"),children:[e.jsx(Uu,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"Wallet"})]}),e.jsxs(Ui,{className:"text-foreground hover:bg-accent focus:bg-accent cursor-pointer",onClick:()=>a("/dashboard/settings"),children:[e.jsx(Ya,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"Settings"})]}),e.jsx(J1,{}),e.jsxs(Ui,{className:"text-destructive hover:bg-destructive/10 focus:bg-destructive/10 cursor-pointer",onClick:d,children:[e.jsx(op,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"Log out"})]})]})]})]})]})]})};function Gs({className:t,...s}){return e.jsx("textarea",{"data-slot":"textarea",className:ut("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),...s})}class QO{constructor(){this.socket=null,this.peerConnection=null,this.localStream=null,this.remoteStreams=new Map,this.roomId=null,this.userId=null,this.userName=null,this.onRemoteStreamCallback=null,this.onRemoteStreamRemovedCallback=null,this.onCallEndedCallback=null,this.config={iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:"stun:stun1.l.google.com:19302"},{urls:"stun:stun2.l.google.com:19302"}]}}initializeSocket(s){if(this.socket)return;const a="http://localhost:5000";this.socket=W_(a,{auth:{token:s},autoConnect:!0}),this.setupSocketListeners()}setupSocketListeners(){this.socket.on("webrtc:joined-room",s=>{console.log(" Joined room:",s),s.participants.forEach(a=>{this.createOffer(a.socketId)})}),this.socket.on("webrtc:user-joined",s=>{console.log(" User joined:",s)}),this.socket.on("webrtc:offer",async s=>{console.log(" Received offer from:",s.from),await this.handleOffer(s.from,s.offer)}),this.socket.on("webrtc:answer",async s=>{console.log(" Received answer from:",s.from),await this.handleAnswer(s.from,s.answer)}),this.socket.on("webrtc:ice-candidate",async s=>{if(s.candidate){const a=this.getPeerConnection(s.from);a&&await a.addIceCandidate(new RTCIceCandidate(s.candidate))}}),this.socket.on("webrtc:user-left",s=>{console.log(" User left:",s),this.handleUserLeft(s.socketId)}),this.socket.on("webrtc:call-ended",s=>{console.log(" Call ended by:",s.userId),this.handleUserLeft(s.socketId)}),this.socket.on("webrtc:audio-toggled",s=>{console.log(" Audio toggled:",s)}),this.socket.on("webrtc:video-toggled",s=>{console.log(" Video toggled:",s)}),this.socket.on("webrtc:error",s=>{console.error(" WebRTC error:",s)})}async startCall(s,a,n,i="video"){try{return this.roomId=s,this.userId=a,this.userName=n,this.localStream=await navigator.mediaDevices.getUserMedia({video:i==="video",audio:!0}),console.log(" Local stream acquired"),this.socket.emit("webrtc:join-room",{roomId:s,userId:a,userName:n,callType:i}),this.localStream}catch(c){throw console.error(" Error starting call:",c),c}}getPeerConnection(s){if(this.peerConnection||(this.peerConnection=new Map),!this.peerConnection.has(s)){const a=new RTCPeerConnection(this.config);this.localStream&&this.localStream.getTracks().forEach(n=>{a.addTrack(n,this.localStream)}),a.ontrack=n=>{console.log(" Received remote track from:",s);const[i]=n.streams;this.remoteStreams.set(s,i),this.onRemoteStreamCallback&&this.onRemoteStreamCallback(s,i)},a.onicecandidate=n=>{n.candidate&&this.socket.emit("webrtc:ice-candidate",{to:s,candidate:n.candidate,roomId:this.roomId})},a.onconnectionstatechange=()=>{console.log("Connection state:",a.connectionState),(a.connectionState==="disconnected"||a.connectionState==="failed")&&this.handleUserLeft(s)},this.peerConnection.set(s,a)}return this.peerConnection.get(s)}async createOffer(s){try{const a=this.getPeerConnection(s),n=await a.createOffer();await a.setLocalDescription(n),this.socket.emit("webrtc:offer",{to:s,offer:a.localDescription,roomId:this.roomId}),console.log(" Sent offer to:",s)}catch(a){console.error(" Error creating offer:",a)}}async handleOffer(s,a){try{const n=this.getPeerConnection(s);await n.setRemoteDescription(new RTCSessionDescription(a));const i=await n.createAnswer();await n.setLocalDescription(i),this.socket.emit("webrtc:answer",{to:s,answer:n.localDescription,roomId:this.roomId}),console.log(" Sent answer to:",s)}catch(n){console.error(" Error handling offer:",n)}}async handleAnswer(s,a){try{await this.getPeerConnection(s).setRemoteDescription(new RTCSessionDescription(a))}catch(n){console.error(" Error handling answer:",n)}}handleUserLeft(s){this.peerConnection&&this.peerConnection.has(s)&&(this.peerConnection.get(s).close(),this.peerConnection.delete(s)),this.remoteStreams.has(s)&&(this.remoteStreams.delete(s),this.onRemoteStreamRemovedCallback&&this.onRemoteStreamRemovedCallback(s))}toggleAudio(s){this.localStream&&(this.localStream.getAudioTracks().forEach(a=>{a.enabled=s}),this.socket.emit("webrtc:toggle-audio",{enabled:s,roomId:this.roomId}))}toggleVideo(s){this.localStream&&(this.localStream.getVideoTracks().forEach(a=>{a.enabled=s}),this.socket.emit("webrtc:toggle-video",{enabled:s,roomId:this.roomId}))}endCall(){this.socket&&this.socket.emit("webrtc:end-call",{roomId:this.roomId}),this.localStream&&(this.localStream.getTracks().forEach(s=>s.stop()),this.localStream=null),this.peerConnection&&(this.peerConnection.forEach(s=>s.close()),this.peerConnection.clear()),this.remoteStreams.clear(),this.socket&&this.roomId&&this.socket.emit("webrtc:leave-room",{roomId:this.roomId}),this.onCallEndedCallback&&this.onCallEndedCallback(),console.log(" Call ended")}onRemoteStream(s){this.onRemoteStreamCallback=s}onRemoteStreamRemoved(s){this.onRemoteStreamRemovedCallback=s}onCallEnded(s){this.onCallEndedCallback=s}disconnect(){this.socket&&(this.socket.disconnect(),this.socket=null)}}const ql=new QO;function q4({isOpen:t,onClose:s,callType:a="video",participant:n,user:i,token:c}){const[d,h]=N.useState(null),[f,g]=N.useState(new Map),[p,v]=N.useState(!0),[y,_]=N.useState(a==="video"),[S,b]=N.useState(!1),[T,E]=N.useState(0),[A,O]=N.useState(!1),[Q,q]=N.useState(!0),U=N.useRef(null),D=N.useRef(new Map),M=N.useRef(null),P=N.useRef(null),G=[i?.id||i?._id,n?.id||n?._id].sort().join("_");N.useEffect(()=>t?((async()=>{try{q(!0),ql.initializeSocket(c),ql.onRemoteStream((ge,Z)=>{console.log(" Remote stream received:",ge),g(te=>new Map(te).set(ge,Z)),q(!1);const ee=D.current.get(ge);ee&&(ee.srcObject=Z)}),ql.onRemoteStreamRemoved(ge=>{console.log(" Remote stream removed:",ge),g(Z=>{const ee=new Map(Z);return ee.delete(ge),ee})}),ql.onCallEnded(()=>{console.log(" Call ended by remote peer"),J()});const ae=await ql.startCall(G,i?.id||i?._id,i?.name||i?.email,a);h(ae),b(!0),M.current=Date.now(),U.current&&(U.current.srcObject=ae),P.current=setInterval(()=>{M.current&&E(Math.floor((Date.now()-M.current)/1e3))},1e3),R.success(`${a==="video"?"Video":"Voice"} call started`),q(!1)}catch(ae){console.error("Failed to start call:",ae),R.error("Failed to start call. Please check your camera/microphone permissions."),q(!1),s()}})(),()=>{P.current&&clearInterval(P.current)}):void 0,[t,G,c,i,a]);const K=()=>{if(d){const V=d.getAudioTracks()[0];V&&(V.enabled=!V.enabled,v(V.enabled),ql.toggleAudio(V.enabled),R.info(V.enabled?"Microphone on":"Microphone off"))}},z=()=>{if(d){const V=d.getVideoTracks()[0];V&&(V.enabled=!V.enabled,_(V.enabled),ql.toggleVideo(V.enabled),R.info(V.enabled?"Camera on":"Camera off"))}},J=()=>{d&&d.getTracks().forEach(V=>V.stop()),ql.endCall(),P.current&&clearInterval(P.current),h(null),g(new Map),b(!1),E(0),M.current=null,R.info("Call ended"),s()},W=V=>{const ae=Math.floor(V/60),ge=V%60;return`${ae.toString().padStart(2,"0")}:${ge.toString().padStart(2,"0")}`},he=()=>{O(!A)};return e.jsx(Gt,{open:t,onOpenChange:s,children:e.jsx(qt,{className:`${A?"max-w-full h-screen":"max-w-4xl"} p-0`,children:e.jsxs("div",{className:"flex flex-col h-full bg-gray-900 text-white rounded-lg overflow-hidden",children:[e.jsx(Kt,{className:"p-4 border-b border-gray-700",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(Pn,{className:"h-10 w-10",children:[e.jsx(Rr,{src:n?.avatar}),e.jsx(On,{children:n?.name?.[0]||n?.email?.[0]||"U"})]}),e.jsxs("div",{children:[e.jsx(Yt,{className:"text-white",children:n?.name||n?.email||"Unknown"}),e.jsx("div",{className:"flex items-center gap-2 text-xs text-gray-400",children:Q?e.jsx(ze,{variant:"secondary",className:"text-xs",children:"Connecting..."}):S?e.jsxs(e.Fragment,{children:[e.jsx(ze,{variant:"default",className:"bg-green-500 text-xs",children:"Connected"}),e.jsx("span",{children:W(T)})]}):e.jsx(ze,{variant:"secondary",className:"text-xs",children:"Waiting..."})})]})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx(I,{variant:"ghost",size:"icon",onClick:he,className:"text-white hover:bg-gray-800",children:A?e.jsx(R_,{className:"h-4 w-4"}):e.jsx(L_,{className:"h-4 w-4"})})})]})}),e.jsx("div",{className:"flex-1 relative bg-gray-800 overflow-hidden",children:a==="video"?e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2 p-2 h-full",children:[Array.from(f.entries()).map(([V,ae])=>e.jsxs("div",{className:"relative aspect-video bg-gray-900 rounded-lg overflow-hidden",children:[e.jsx("video",{ref:ge=>{ge&&(D.current.set(V,ge),ge.srcObject=ae)},autoPlay:!0,playsInline:!0,className:"w-full h-full object-cover"}),e.jsx("div",{className:"absolute bottom-2 left-2 bg-black/50 text-white px-2 py-1 rounded text-sm",children:n?.name||"Participant"})]},V)),e.jsxs("div",{className:"relative aspect-video bg-gray-900 rounded-lg overflow-hidden",children:[e.jsx("video",{ref:U,autoPlay:!0,muted:!0,playsInline:!0,className:"w-full h-full object-cover"}),e.jsxs("div",{className:"absolute bottom-2 left-2 bg-black/50 text-white px-2 py-1 rounded text-sm",children:["You ",!y&&"(Video Off)"]})]})]}):e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsxs("div",{className:"text-center space-y-8",children:[e.jsxs(Pn,{className:"h-32 w-32 mx-auto",children:[e.jsx(Rr,{src:n?.avatar}),e.jsx(On,{className:"text-4xl",children:n?.name?.[0]||n?.email?.[0]||"U"})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-2xl font-semibold",children:n?.name||n?.email}),e.jsx("p",{className:"text-gray-400 mt-2",children:W(T)})]})]})})}),e.jsx("div",{className:"p-4 bg-gray-900 border-t border-gray-700",children:e.jsxs("div",{className:"flex items-center justify-center gap-4",children:[e.jsx(I,{variant:p?"secondary":"destructive",size:"icon",className:"h-12 w-12 rounded-full",onClick:K,children:p?e.jsx(Cm,{className:"h-5 w-5"}):e.jsx(Tm,{className:"h-5 w-5"})}),a==="video"&&e.jsx(I,{variant:y?"secondary":"destructive",size:"icon",className:"h-12 w-12 rounded-full",onClick:z,children:y?e.jsx(za,{className:"h-5 w-5"}):e.jsx(lp,{className:"h-5 w-5"})}),e.jsx(I,{variant:"destructive",size:"icon",className:"h-14 w-14 rounded-full bg-red-600 hover:bg-red-700",onClick:J,children:e.jsx(b5,{className:"h-6 w-6"})}),e.jsx(I,{variant:"ghost",size:"icon",className:"h-12 w-12 rounded-full text-white hover:bg-gray-800",onClick:()=>R.info("Settings - Coming soon"),children:e.jsx(Ya,{className:"h-5 w-5"})})]})})]})})})}const K4=()=>{const t=Yy(),{inviteCode:s}=ol(),{user:a}=qs(),[n,i]=N.useState(!1),[c,d]=N.useState(!1),[h,f]=N.useState("admin"),[g,p]=N.useState([]),[v,y]=N.useState(""),[_,S]=N.useState(!1),[b,T]=N.useState(!1),[E,A]=N.useState([]),[O,Q]=N.useState({}),[q,U]=N.useState(!1),[D,M]=N.useState(!1),[P,G]=N.useState(""),[K,z]=N.useState([]),[J,W]=N.useState(!1),[he,V]=N.useState("professional"),[ae,ge]=N.useState(!0),[Z,ee]=N.useState({}),[te,X]=N.useState(!1),[ce,F]=N.useState("video"),[re,de]=N.useState(null),me=N.useRef(null);N.useRef(null);const De=N.useRef([]),Ne=()=>{me.current?.scrollIntoView({behavior:"smooth"})};N.useEffect(()=>{Ne()},[g]),N.useEffect(()=>{const Ze=t.pathname.toLowerCase();Ze.includes("storefront")||Ze.includes("client")?f("storefront"):f("admin")},[t.pathname]),N.useEffect(()=>{const Ze=()=>h==="storefront"?{id:"1",text:"Welcome to our store!  I'm your shopping assistant. I can help you find products, track your orders, book appointments, and answer any questions about our services. How can I assist you today?",sender:"support",timestamp:new Date}:{id:"1",text:`Hello ${a?.name||"there"}!  I'm your ominbiz AI Assistant, powered by advanced machine learning. I can help with analytics, inventory insights, sales trends, financial data, and much more. What would you like to explore?`,sender:"support",timestamp:new Date};g.length===0&&p([Ze()])},[h,a,g.length]),N.useEffect(()=>{const Ze=async()=>{try{const Se=t.pathname.split("/").pop()||"dashboard",Ce=localStorage.getItem("token"),rt=localStorage.getItem("customerToken"),Qe={currentPage:Se,userName:a?.name||"User",userRole:a?.role||(h==="storefront"?"Customer":"Admin"),dashboardType:h,timestamp:new Date().toISOString(),recentActions:JSON.parse(localStorage.getItem("recentActions")||"[]"),aiPersonality:he};if(Ce&&h==="admin"){const jt={Authorization:`Bearer ${Ce}`};try{const[Ot,ts,js,Zt]=await Promise.allSettled([ke.get("/orders",{headers:jt}),ke.get("/products",{headers:jt}),ke.get("/transactions",{headers:jt}),ke.get("/appointments",{headers:jt})]),Ca=Ot.status==="fulfilled"?Ot.value?.data||[]:[],Ta=ts.status==="fulfilled"?ts.value?.data||[]:[],Qa=js.status==="fulfilled"?js.value?.data||[]:[],Ps=Zt.status==="fulfilled"?Zt.value?.data||[]:[];Qe.totalOrders=Ca.length,Qe.totalProducts=Ta.length,Qe.totalRevenue=Array.isArray(Qa)?Qa.reduce((ie,Re)=>ie+(Re.amount||0),0):0,Qe.pendingOrders=Ca.filter(ie=>ie.status==="pending").length,Qe.lowStockItems=Ta.filter(ie=>ie.stock<10).length,Qe.upcomingAppointments=Ps.filter(ie=>new Date(ie.date)>new Date).length,ee(Qe)}catch(Ot){console.error("Error fetching admin data:",Ot)}}else if(h==="storefront"&&s)try{const jt=rt?{Authorization:`Bearer ${rt}`}:{},[Ot,ts]=await Promise.allSettled([ke.get("/public/products",{params:{inviteCode:s}}),rt?ke.get("/customer/orders",{headers:jt}):Promise.resolve({status:"rejected"})]);Qe.availableProducts=Ot.status==="fulfilled"&&Ot.value?.data?.length||0,Qe.myOrders=ts.status==="fulfilled"&&ts.value?.data?.orders?.length||0}catch(jt){console.error("Error fetching storefront data:",jt)}Q(Qe),pe(Qe),ae&&Dt(Qe)}catch(Se){console.error("Error gathering context:",Se)}};Ze();const Xe=setInterval(Ze,3e4);return()=>clearInterval(Xe)},[t.pathname,a,h,he,ae,s]);const pe=Ze=>{const Xe=[];Ze.dashboardType==="storefront"?Ze.currentPage==="storefront"||Ze.currentPage==="products"?Xe.push("Show me popular products","What's on sale today?","Help me find a specific item"):Ze.currentPage==="appointments"||Ze.currentPage==="book"?Xe.push("Book an appointment","Check my booking status","What services are available?"):Ze.currentPage.includes("order")?Xe.push("Track my order","View my order history","What's my delivery status?"):Xe.push("Browse products","Check store hours","How can I contact support?"):Ze.currentPage==="dashboard"?Xe.push("Show today's sales summary","Top performing products?",Ze.lowStockItems>0?`${Ze.lowStockItems} items need restocking`:"Check inventory status"):Ze.currentPage==="analytics"?Xe.push("Analyze sales trends","Compare monthly performance","Predict next month's revenue"):Ze.currentPage==="inventory"||Ze.currentPage==="products"?Xe.push("Show low stock alerts","Suggest reorder quantities","Analyze inventory turnover"):Ze.currentPage==="wallet"||Ze.currentPage==="finances"?Xe.push("Show spending patterns","Revenue breakdown","Cost optimization tips"):Ze.currentPage==="team"?Xe.push("Team performance metrics","Schedule management","Add new team member"):Xe.push("Navigate dashboard","Show key metrics","Business insights"),A(Xe)},Le=async(Ze=null)=>{const Xe=Ze||v;if(!Xe.trim())return;const Se={id:Date.now().toString(),text:Xe,sender:"user",timestamp:new Date};p(rt=>[...rt,Se]),y(""),S(!0),De.current.push({role:"user",content:Xe,context:O,timestamp:new Date});const Ce=JSON.parse(localStorage.getItem("recentActions")||"[]");Ce.unshift({action:"ai_query",query:Xe,timestamp:new Date}),localStorage.setItem("recentActions",JSON.stringify(Ce.slice(0,10)));try{const rt=await ot(Xe,O,De.current);S(!1);const Qe={id:(Date.now()+1).toString(),text:rt,sender:"support",timestamp:new Date};p(jt=>[...jt,Qe]),De.current.push({role:"assistant",content:rt,timestamp:new Date}),n||T(!0)}catch(rt){console.error("AI Response Error:",rt),S(!1);const Qe={id:(Date.now()+1).toString(),text:"I apologize, but I encountered an issue processing your request. However, based on your context, I can suggest: "+E[0],sender:"support",timestamp:new Date};p(jt=>[...jt,Qe])}},ot=async(Ze,Xe,Se)=>{try{const Ce=localStorage.getItem("token")||localStorage.getItem("customerToken"),rt=Pt(Xe,Se),Qe={...Xe,...Z,conversationCount:Se.length,personality:he,previousQueries:Lt(5)},jt=await ke.post("/ai/chat",{message:Ze,context:Qe,history:Se.slice(-10),systemPrompt:rt,dashboardType:h},{headers:Ce?{Authorization:`Bearer ${Ce}`}:{},timeout:3e4});return ae&&jt.data.response&&Ct(Ze,jt.data.response,Xe),jt.data.response}catch(Ce){return console.error("AI API Error:",Ce),(Ce.response?.status===503||Ce.response?.status===500)&&console.log("AI service unavailable, using intelligent fallback"),yt(Ze,Xe)}},Pt=(Ze,Xe)=>{const Se="You are an intelligent AI assistant for ominbiz, powered by Google Gemini AI.";return Ze.dashboardType==="storefront"?`${Se}

You are assisting a CUSTOMER on the storefront:
- User: ${Ze.userName}
- Role: Customer/Shopper
- Current Page: ${Ze.currentPage}
- Available Products: ${Ze.availableProducts||"N/A"}
- Their Orders: ${Ze.myOrders||0}

Your capabilities:
- Help find and recommend products
- Track orders and deliveries
- Book appointments/services
- Answer questions about products and services
- Provide shopping assistance

Tone: ${he==="friendly"?"Warm, friendly, and helpful":he==="professional"?"Professional but approachable":"Clear and informative"}
- Be customer-focused and sales-oriented
- Recommend products when relevant
- Make shopping easy and enjoyable
- Use emojis sparingly for a friendly touch

This is interaction #${Xe.length+1}.`:`${Se}

You are assisting a BUSINESS ADMIN/MANAGER:
- User: ${Ze.userName} (${Ze.userRole})
- Dashboard: Admin/Business Management
- Current Page: ${Ze.currentPage}

Real-time Business Metrics:
- Total Orders: ${Ze.totalOrders||0}
- Total Products: ${Ze.totalProducts||0}
- Total Revenue: $${Ze.totalRevenue||0}
- Pending Orders: ${Ze.pendingOrders||0}
- Low Stock Items: ${Ze.lowStockItems||0}
- Upcoming Appointments: ${Ze.upcomingAppointments||0}

You have access to:
- Analytics & Sales Reports
- Inventory Management
- Order Processing
- Financial Data & Wallet
- Team Management
- AI-powered Insights
- Customer Management

Tone: ${he==="technical"?"Technical and data-focused":he==="professional"?"Professional and analytical":"Clear and actionable"}
- Provide data-driven insights
- Offer actionable business recommendations
- Focus on efficiency and growth
- Be concise but comprehensive
- Use business terminology

This is interaction #${Xe.length+1} with this user.`},Dt=N.useCallback(Ze=>{try{const Xe=JSON.parse(localStorage.getItem("aiTrainingContexts")||"[]");Xe.push({...Ze,timestamp:new Date().toISOString(),sessionId:localStorage.getItem("sessionId")||Date.now().toString()}),localStorage.setItem("aiTrainingContexts",JSON.stringify(Xe.slice(-200)))}catch(Xe){console.error("Context storage error:",Xe)}},[]),Ct=(Ze,Xe,Se)=>{try{const Ce=JSON.parse(localStorage.getItem("aiSuccessfulInteractions")||"[]");Ce.push({question:Ze,answer:Xe,context:{page:Se.currentPage,dashboardType:Se.dashboardType,userRole:Se.userRole},timestamp:new Date().toISOString(),rating:null}),localStorage.setItem("aiSuccessfulInteractions",JSON.stringify(Ce.slice(-500)))}catch(Ce){console.error("Interaction storage error:",Ce)}},Lt=(Ze=5)=>{try{return JSON.parse(localStorage.getItem("aiTrainingData")||"[]").slice(-Ze).map(Se=>Se.query)}catch{return[]}},yt=(Ze,Xe)=>{const Se=Ze.toLowerCase(),Ce=Xe.dashboardType==="storefront";if(bs(Ze,Xe),Se.match(/^(hi|hello|hey|good morning|good afternoon|good evening|greetings)/))if(Ce){const Qe=["Hello! Welcome to our store. How can I help you find what you're looking for today?","Hi there! I'm here to make your shopping experience amazing. What can I help you with?","Hey! Thanks for visiting. Need help finding products or tracking an order?","Good day! I'm your shopping assistant. How may I assist you?"];return Qe[Math.floor(Math.random()*Qe.length)]}else{const Qe=[`Hello ${Xe.userName}! Ready to dive into your business metrics. What would you like to explore?`,`Hi ${Xe.userName}! Your dashboard shows ${Xe.totalOrders||0} orders and ${Xe.totalProducts||0} products. How can I help?`,`Good to see you ${Xe.userName}! I can help with analytics, inventory, or any business insights you need.`,`Hey ${Xe.userName}! Your business intelligence assistant is ready. What shall we analyze today?`];return Qe[Math.floor(Math.random()*Qe.length)]}if(Se.includes("how are you")||Se.includes("how do you do"))return Ce?"I'm doing great, thanks for asking! I'm here to help you find the perfect products. What are you shopping for today?":"I'm functioning optimally! All systems ready to assist with your business operations. What can I help you analyze today?";if(Se.includes("what is your name")||Se.includes("who are you"))return Ce?"I'm your ominbiz Shopping Assistant, powered by AI! I can help you browse products, track orders, and answer any questions about our store.":`I'm ominbiz Business AI, powered by Google Gemini. I analyze your business data, provide insights, and help optimize operations. I've learned from ${De.current.length} interactions with you!`;if(Se.includes("thank you")||Se.includes("thanks"))return"You're welcome! I'm always here to help. Feel free to ask if you need anything else.";if(Ce){if(Se.includes("product")||Se.includes("buy")||Se.includes("shop"))return`We have ${Xe.availableProducts||"many"} products available! I can help you find exactly what you need. Are you looking for something specific, or would you like to browse our categories?`;if(Se.includes("order")||Se.includes("delivery")||Se.includes("track"))return Xe.myOrders>0?`You have ${Xe.myOrders} order${Xe.myOrders!==1?"s":""} with us. Would you like me to help you track your latest order or view your order history?`:"You haven't placed any orders yet. Would you like to browse our products? I can help you find what you're looking for!";if(Se.includes("appointment")||Se.includes("book"))return"I can help you book an appointment! What type of service are you interested in? Let me show you available time slots."}else{if(Se.includes("sales")||Se.includes("revenue"))return`Your current revenue is $${Xe.totalRevenue?.toFixed(2)||0} from ${Xe.totalOrders||0} orders. ${Xe.pendingOrders>0?`You have ${Xe.pendingOrders} pending orders to process. `:""}Navigate to Analytics for detailed sales trends and insights. Shall I guide you there?`;if(Se.includes("inventory")||Se.includes("stock"))return`You have ${Xe.totalProducts||0} products in inventory. ${Xe.lowStockItems>0?` Alert: ${Xe.lowStockItems} items are running low on stock!`:"Stock levels look good!"} Check the Inventory page for detailed stock management. Need help?`;if(Se.includes("appointment"))return`You have ${Xe.upcomingAppointments||0} upcoming appointments. Navigate to the Appointments page to view the schedule, manage bookings, and set availability. Would you like help with appointment management?`}if(Se.includes("navigate")||Se.includes("go to")||Se.includes("show me"))return`I can help you navigate! Here are the main sections:

Dashboard - Overview & KPIs
Analytics - Sales & Performance
Inventory - Stock Management
Wallet - Financial Transactions
Team - Staff Management
AI Insights - Intelligent Analysis

Which section would you like to visit?`;if(Se.includes("insight")||Se.includes("suggest")||Se.includes("recommend")){const Qe=Xe.currentPage,jt=$s();return Qe==="dashboard"?`Here are some insights for your dashboard:

- Check your Analytics page for trend analysis
- Review inventory for low stock items
- Monitor your wallet for expense patterns
- Use AI Insights for predictive analytics${jt?`

Based on your previous interactions, you frequently ask about `+jt.topQuery:""}

Would you like me to elaborate on any of these?`:`Based on your activity on the ${Qe} page and ${De.current.length} previous interactions, I suggest exploring related features and checking the AI Insights section for personalized recommendations.`}if(Se.includes("help")||Se.includes("how")||Se.includes("what can you"))return`I'm here to help! I can:

- Answer questions about your business data
- Provide analytics insights
- Help navigate the dashboard
- Suggest optimizations
- Analyze trends
- Track finances
- Learn from our interactions

You're currently on the ${Xe.currentPage} page with ${Xe.totalOrders||0} orders. What specific information would you like?`;if(Se.includes("what can you do")||Se.includes("your capabilities"))return`I can assist you with:

1. Data Analysis - Review sales, inventory, and financial data
2. Navigation - Guide you through the platform
3. Insights - Provide business intelligence
4. Recommendations - Suggest optimizations
5. Learning - I adapt to your preferences over time

I've learned from ${De.current.length} interactions with you. How can I help today?`;const rt=ws(Se);return rt?`${rt} ${Ce?"How can I help you shop today?":`You're on the ${Xe.currentPage} page. ${E[0]?`Try: "${E[0]}"`:""}`}`:Ce?`I understand you're asking about "${Ze}". While I process that, you have ${Xe.availableProducts||"many"} products to browse and ${Xe.myOrders||0} order${Xe.myOrders!==1?"s":""}. ${E[0]?`You might want to: "${E[0]}"`:"How else can I help?"}`:`I understand your query about "${Ze}". Currently on ${Xe.currentPage} page - you have ${Xe.totalOrders||0} orders, $${Xe.totalRevenue?.toFixed(2)||0} revenue, and ${Xe.totalProducts||0} products. ${E[0]?`Try: "${E[0]}"`:"What would you like to explore?"}`},ys=N.useCallback(()=>{if(!("webkitSpeechRecognition"in window)&&!("SpeechRecognition"in window)){alert("Voice input is not supported in your browser. Please use Chrome or Edge.");return}const Ze=window.SpeechRecognition||window.webkitSpeechRecognition,Xe=new Ze;Xe.continuous=!1,Xe.interimResults=!1,Xe.lang="en-US",Xe.onstart=()=>{W(!0)},Xe.onresult=Se=>{const Ce=Se.results[0][0].transcript;y(Ce),W(!1)},Xe.onerror=Se=>{console.error("Speech recognition error:",Se.error),W(!1),Se.error==="no-speech"&&alert("No speech detected. Please try again.")},Xe.onend=()=>{W(!1)},J?Xe.stop():Xe.start()},[J]),Es=N.useCallback(Ze=>{navigator.clipboard.writeText(Ze).then(()=>{})},[]),Hs=N.useCallback((Ze,Xe)=>{try{const Se=JSON.parse(localStorage.getItem("aiResponseRatings")||"[]");Se.push({messageId:Ze,isPositive:Xe,timestamp:new Date().toISOString()}),localStorage.setItem("aiResponseRatings",JSON.stringify(Se))}catch(Se){console.error("Rating storage error:",Se)}},[]),bs=(Ze,Xe)=>{try{const Se=JSON.parse(localStorage.getItem("aiTrainingData")||"[]");Se.push({query:Ze.toLowerCase(),context:{page:Xe.currentPage,timestamp:new Date().toISOString(),userRole:Xe.userRole},sessionId:localStorage.getItem("sessionId")||Date.now().toString()}),localStorage.setItem("aiTrainingData",JSON.stringify(Se.slice(-100)));const Ce=JSON.parse(localStorage.getItem("aiQueryFrequency")||"{}"),rt=Ze.toLowerCase().substring(0,50);Ce[rt]=(Ce[rt]||0)+1,localStorage.setItem("aiQueryFrequency",JSON.stringify(Ce))}catch(Se){console.error("Learning storage error:",Se)}},$s=()=>{try{const Ze=JSON.parse(localStorage.getItem("aiQueryFrequency")||"{}"),Xe=Object.entries(Ze);if(Xe.length===0)return null;const Se=Xe.reduce((Ce,rt)=>Ce[1]>rt[1]?Ce:rt);return{topQuery:Se[0],count:Se[1]}}catch{return null}},ws=Ze=>{try{const Se=JSON.parse(localStorage.getItem("aiTrainingData")||"[]").filter(Ce=>Ce.query.includes(Ze.substring(0,10))||Ze.includes(Ce.query.substring(0,10)));return Se.length>0?`Based on ${Se.length} similar previous queries, I can help you with that.`:null}catch{return null}};N.useEffect(()=>{const Ze=localStorage.getItem("ai_conversation_history");if(Ze)try{const Xe=JSON.parse(Ze);z(Xe)}catch(Xe){console.error("Error loading history:",Xe)}},[]);const $t=()=>{const Xe=[{id:Date.now().toString(),date:new Date().toISOString(),messages:g,context:O,summary:g.length>1?g[1].text.substring(0,50)+"...":"New conversation"},...K].slice(0,50);z(Xe),localStorage.setItem("ai_conversation_history",JSON.stringify(Xe))},Na=()=>{const Ze=JSON.stringify(g,null,2),Xe=new Blob([Ze],{type:"application/json"}),Se=URL.createObjectURL(Xe),Ce=document.createElement("a");Ce.href=Se,Ce.download=`ominbiz-ai-chat-${new Date().toISOString()}.json`,Ce.click(),URL.revokeObjectURL(Se)},Me=()=>{window.confirm("Are you sure you want to clear this conversation?")&&p([{id:"1",text:"Hello! I'm your AI assistant. How can I help you today?",sender:"support",timestamp:new Date}])},ht=Ze=>{const Xe=K.filter(Se=>Se.id!==Ze);z(Xe),localStorage.setItem("ai_conversation_history",JSON.stringify(Xe))},He=Ze=>{p(Ze.messages),U(!1)},Mt=K.filter(Ze=>Ze.summary.toLowerCase().includes(P.toLowerCase())||Ze.messages.some(Xe=>Xe.text.toLowerCase().includes(P.toLowerCase()))),Rt=()=>{i(!0),T(!1)},xs=()=>{d(!c)},Ks=N.useCallback(async()=>{Q(Ze=>({...Ze,timestamp:new Date().toISOString()}))},[]);return e.jsxs(e.Fragment,{children:[!n&&e.jsx("div",{className:"fixed bottom-6 right-6 z-50",children:e.jsxs(I,{onClick:Rt,className:ut("h-16 w-16 rounded-full shadow-2xl hover:shadow-primary/50 transition-all duration-300 hover:scale-110","bg-gradient-to-r from-primary to-accent animate-pulse-slow relative"),size:"icon",children:[b&&e.jsx(ze,{className:"absolute -top-1 -right-1 h-5 w-5 rounded-full bg-red-500 text-white text-xs p-0 flex items-center justify-center animate-bounce",children:"1"}),e.jsx("div",{className:"absolute inset-0 rounded-full bg-gradient-to-r from-primary/20 to-accent/20 animate-ping"}),e.jsx(ja,{className:"h-7 w-7 relative z-10"})]})}),n&&e.jsxs("div",{className:"fixed bottom-6 right-6 z-50",children:[e.jsx("div",{className:"fixed inset-0 bg-black/20 backdrop-blur-sm -z-10",onClick:()=>i(!1)}),e.jsxs(se,{className:ut("shadow-2xl border-2 border-primary/30 flex flex-col overflow-hidden backdrop-blur-md bg-card/95 animate-in slide-in-from-bottom-5 duration-300 transition-all",c?"w-full h-full m-0 rounded-none":"w-96 sm:w-[480px] h-[650px] rounded-2xl"),children:[e.jsxs("div",{className:"relative bg-gradient-to-r from-primary via-accent to-primary text-primary-foreground p-4 shadow-lg",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/10 to-transparent animate-shimmer"}),e.jsxs("div",{className:"relative flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"h-10 w-10 rounded-full bg-primary-foreground/20 flex items-center justify-center backdrop-blur-sm",children:e.jsx(Q0,{className:"h-6 w-6"})}),e.jsx("div",{className:"absolute bottom-0 right-0 h-3 w-3 bg-green-500 rounded-full border-2 border-primary animate-pulse"})]}),e.jsxs("div",{children:[e.jsxs("p",{className:"font-bold text-lg flex items-center gap-2",children:["AI Assistant",e.jsx(wi,{className:"h-4 w-4 animate-spin-slow"})]}),e.jsx("p",{className:"text-xs opacity-90",children:_?"Typing...":"Online  Ready to help"})]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(I,{variant:"ghost",size:"icon",onClick:Ks,className:"text-primary-foreground hover:bg-primary-foreground/20 transition-all duration-300",title:"Refresh Data",children:e.jsx(Cs,{className:"h-4 w-4"})}),e.jsx(I,{variant:"ghost",size:"icon",onClick:()=>U(!q),className:"text-primary-foreground hover:bg-primary-foreground/20 transition-all duration-300",title:"Conversation History",children:e.jsx(Zl,{className:"h-4 w-4"})}),e.jsx(I,{variant:"ghost",size:"icon",onClick:()=>M(!D),className:"text-primary-foreground hover:bg-primary-foreground/20 transition-all duration-300",title:"Settings",children:e.jsx(Ya,{className:"h-4 w-4"})}),e.jsx(I,{variant:"ghost",size:"icon",onClick:()=>{F("video"),X(!0)},className:"text-primary-foreground hover:bg-primary-foreground/20 transition-all duration-300",title:"Start Video Call",children:e.jsx(za,{className:"h-4 w-4"})}),e.jsx(I,{variant:"ghost",size:"icon",onClick:()=>{F("audio"),X(!0)},className:"text-primary-foreground hover:bg-primary-foreground/20 transition-all duration-300",title:"Start Audio Call",children:e.jsx(ia,{className:"h-4 w-4"})}),e.jsx(I,{variant:"ghost",size:"icon",onClick:xs,className:"text-primary-foreground hover:bg-primary-foreground/20 transition-all duration-300",title:c?"Minimize":"Maximize",children:c?e.jsx(R_,{className:"h-4 w-4"}):e.jsx(L_,{className:"h-4 w-4"})}),e.jsx(I,{variant:"ghost",size:"icon",onClick:Na,className:"text-primary-foreground hover:bg-primary-foreground/20 transition-all duration-300",title:"Export Conversation",children:e.jsx(hn,{className:"h-4 w-4"})}),e.jsx(I,{variant:"ghost",size:"icon",onClick:Me,className:"text-primary-foreground hover:bg-primary-foreground/20 transition-all duration-300",title:"Clear Conversation",children:e.jsx(Ua,{className:"h-4 w-4"})}),e.jsx(I,{variant:"ghost",size:"icon",onClick:()=>i(!1),className:"text-primary-foreground hover:bg-primary-foreground/20 hover:rotate-90 transition-all duration-300",children:e.jsx(nr,{className:"h-5 w-5"})})]})]}),e.jsxs("div",{className:"relative mt-2 flex items-center justify-between gap-2 flex-wrap",children:[e.jsx("div",{className:"flex items-center gap-2",children:h==="admin"?e.jsxs(e.Fragment,{children:[e.jsxs(ze,{variant:"secondary",className:"text-xs bg-primary-foreground/20",children:[e.jsx(Mn,{className:"h-3 w-3 mr-1"}),"$",Z.totalRevenue?.toFixed(0)||0]}),e.jsxs(ze,{variant:"secondary",className:"text-xs bg-primary-foreground/20",children:[e.jsx(cs,{className:"h-3 w-3 mr-1"}),Z.totalOrders||0," orders"]}),Z.lowStockItems>0&&e.jsxs(ze,{variant:"destructive",className:"text-xs animate-pulse",children:[e.jsx(Ws,{className:"h-3 w-3 mr-1"}),Z.lowStockItems," low stock"]})]}):e.jsxs(e.Fragment,{children:[e.jsxs(ze,{variant:"secondary",className:"text-xs bg-primary-foreground/20",children:[e.jsx(Bs,{className:"h-3 w-3 mr-1"}),O.availableProducts||0," products"]}),e.jsxs(ze,{variant:"secondary",className:"text-xs bg-primary-foreground/20",children:[O.myOrders||0," my orders"]})]})}),De.current.length>2&&e.jsxs(ze,{variant:"secondary",className:"text-xs bg-primary-foreground/20",children:[e.jsx(jo,{className:"h-3 w-3 mr-1"}),De.current.length," learned"]})]})]}),D&&e.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 bg-muted/30",children:[e.jsxs("h3",{className:"font-semibold flex items-center gap-2",children:[e.jsx(Ya,{className:"h-4 w-4"}),"AI Assistant Settings"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"AI Personality"}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:["professional","friendly","technical"].map(Ze=>e.jsx(I,{variant:he===Ze?"default":"outline",size:"sm",onClick:()=>V(Ze),className:"capitalize",children:Ze},Ze))})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"AI Training"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Learn from conversations"})]}),e.jsx(I,{variant:ae?"default":"outline",size:"sm",onClick:()=>ge(!ae),children:ae?"Enabled":"Disabled"})]}),e.jsxs("div",{className:"border-t pt-3",children:[e.jsx("p",{className:"text-sm font-medium mb-2",children:"Training Statistics"}),e.jsxs("div",{className:"space-y-1 text-xs text-muted-foreground",children:[e.jsxs("p",{children:[" Conversations: ",K.length]}),e.jsxs("p",{children:[" Interactions: ",De.current.length]}),e.jsxs("p",{children:[" Dashboard: ",h==="storefront"?"Customer":"Admin"]}),e.jsxs("p",{children:[" Context Items: ",Object.keys(O).length]})]})]}),e.jsxs(I,{variant:"outline",size:"sm",onClick:$t,className:"w-full",children:[e.jsx(S5,{className:"h-4 w-4 mr-2"}),"Save Current Chat"]})]})]}),q&&e.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-2 bg-muted/30",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(Da,{className:"h-4 w-4 text-muted-foreground"}),e.jsx(we,{value:P,onChange:Ze=>G(Ze.target.value),placeholder:"Search conversations...",className:"h-8 text-sm"})]}),Mt.length===0?e.jsxs("div",{className:"text-center text-sm text-muted-foreground py-8",children:[e.jsx(Zl,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),e.jsx("p",{children:"No conversation history yet"}),e.jsx("p",{className:"text-xs mt-1",children:"Start chatting to build your history"})]}):Mt.map(Ze=>e.jsx("div",{className:"p-3 border rounded-lg hover:bg-accent/50 cursor-pointer transition-colors group",onClick:()=>He(Ze),children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium line-clamp-2",children:Ze.summary}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:new Date(Ze.date).toLocaleString()}),e.jsxs(ze,{variant:"outline",className:"text-xs mt-1",children:[Ze.messages.length," messages"]})]}),e.jsx(I,{variant:"ghost",size:"icon",className:"h-6 w-6 opacity-0 group-hover:opacity-100 transition-opacity",onClick:Xe=>{Xe.stopPropagation(),ht(Ze.id)},children:e.jsx(Ua,{className:"h-3 w-3"})})]})},Ze.id))]}),!q&&!D&&e.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 bg-gradient-to-b from-accent/5 to-transparent",children:[g.map((Ze,Xe)=>e.jsxs("div",{className:ut("flex gap-2 items-end animate-in slide-in-from-bottom-3",Ze.sender==="user"?"justify-end":"justify-start"),style:{animationDelay:`${Xe*50}ms`},children:[Ze.sender==="support"&&e.jsx("div",{className:"h-8 w-8 rounded-full bg-accent/20 flex items-center justify-center flex-shrink-0 border-2 border-accent",children:e.jsx(Q0,{className:"h-5 w-5 text-accent"})}),e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:ut("max-w-[85%] rounded-2xl p-3 shadow-md transition-all duration-200 hover:shadow-lg group relative",Ze.sender==="user"?"bg-primary text-primary-foreground rounded-br-sm ml-auto":"bg-card border-2 border-accent/30 text-foreground rounded-bl-sm"),children:[e.jsx("p",{className:"text-sm leading-relaxed whitespace-pre-wrap",children:Ze.text}),e.jsxs("div",{className:"flex items-center justify-between mt-1.5",children:[e.jsx("p",{className:"text-xs opacity-70 flex items-center gap-1",children:Ze.timestamp.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}),Ze.sender==="support"&&e.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[e.jsx(I,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:()=>Es(Ze.text),title:"Copy",children:e.jsx(Jy,{className:"h-3 w-3"})}),e.jsx(I,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:()=>Hs(Ze.id,!0),title:"Helpful",children:e.jsx(ld,{className:"h-3 w-3"})}),e.jsx(I,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:()=>Hs(Ze.id,!1),title:"Not Helpful",children:e.jsx(I_,{className:"h-3 w-3"})})]})]})]})}),Ze.sender==="user"&&e.jsx("div",{className:"h-8 w-8 rounded-full bg-primary flex items-center justify-center flex-shrink-0 border-2 border-primary",children:e.jsx(Aa,{className:"h-5 w-5 text-primary-foreground"})})]},Ze.id)),_&&e.jsxs("div",{className:"flex gap-2 items-end animate-in fade-in duration-300",children:[e.jsx("div",{className:"h-8 w-8 rounded-full bg-accent/20 flex items-center justify-center flex-shrink-0 border-2 border-accent",children:e.jsx(Q0,{className:"h-5 w-5 text-accent"})}),e.jsxs("div",{className:"bg-card border-2 border-accent/30 rounded-2xl rounded-bl-sm p-3 flex gap-1",children:[e.jsx("div",{className:"h-2 w-2 rounded-full bg-accent animate-bounce",style:{animationDelay:"0ms"}}),e.jsx("div",{className:"h-2 w-2 rounded-full bg-accent animate-bounce",style:{animationDelay:"150ms"}}),e.jsx("div",{className:"h-2 w-2 rounded-full bg-accent animate-bounce",style:{animationDelay:"300ms"}})]})]}),e.jsx("div",{ref:me})]}),!q&&!D&&g.length<=2&&e.jsxs("div",{className:"px-4 pb-2 border-t border-border/50 bg-gradient-to-b from-accent/5 to-transparent",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2 mt-3",children:[e.jsx(Ga,{className:"h-4 w-4 text-accent"}),e.jsx("p",{className:"text-xs font-medium text-accent",children:"Quick Actions:"})]}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:h==="admin"?e.jsxs(e.Fragment,{children:[e.jsxs(I,{variant:"outline",size:"sm",className:"text-xs justify-start",onClick:()=>Le("Show sales summary"),children:[e.jsx(Sa,{className:"h-3 w-3 mr-1"})," Sales"]}),e.jsxs(I,{variant:"outline",size:"sm",className:"text-xs justify-start",onClick:()=>Le("Check inventory"),children:[e.jsx(cs,{className:"h-3 w-3 mr-1"})," Inventory"]}),e.jsxs(I,{variant:"outline",size:"sm",className:"text-xs justify-start",onClick:()=>Le("Business insights"),children:[e.jsx(jo,{className:"h-3 w-3 mr-1"})," Insights"]}),e.jsxs(I,{variant:"outline",size:"sm",className:"text-xs justify-start",onClick:()=>Le("Team status"),children:[e.jsx(fs,{className:"h-3 w-3 mr-1"})," Team"]})]}):e.jsxs(e.Fragment,{children:[e.jsxs(I,{variant:"outline",size:"sm",className:"text-xs justify-start",onClick:()=>Le("Show products"),children:[e.jsx(Bs,{className:"h-3 w-3 mr-1"})," Browse"]}),e.jsxs(I,{variant:"outline",size:"sm",className:"text-xs justify-start",onClick:()=>Le("Track my order"),children:[e.jsx(cs,{className:"h-3 w-3 mr-1"})," Track Order"]}),e.jsxs(I,{variant:"outline",size:"sm",className:"text-xs justify-start",onClick:()=>Le("Book appointment"),children:[e.jsx(Dn,{className:"h-3 w-3 mr-1"})," Book"]}),e.jsxs(I,{variant:"outline",size:"sm",className:"text-xs justify-start",onClick:()=>Le("Contact support"),children:[e.jsx(wi,{className:"h-3 w-3 mr-1"})," Support"]})]})})]}),!q&&!D&&E.length>0&&g.length<=3&&e.jsxs("div",{className:"px-4 pb-2 border-t border-border/50 bg-gradient-to-b from-accent/5 to-transparent",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2 mt-3",children:[e.jsx(km,{className:"h-4 w-4 text-accent animate-pulse"}),e.jsx("p",{className:"text-xs font-medium text-accent",children:"Suggested questions:"})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:E.map((Ze,Xe)=>e.jsx(I,{variant:"outline",size:"sm",onClick:()=>Le(Ze),className:"text-xs hover:bg-accent/10 hover:border-accent transition-all",children:Ze},Xe))})]}),e.jsxs("div",{className:"p-4 border-t-2 border-border bg-card/50 backdrop-blur-sm",children:[O.currentPage&&e.jsxs("div",{className:"mb-2 flex items-center justify-between gap-2 text-xs text-muted-foreground flex-wrap",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(jo,{className:"h-3 w-3 text-accent animate-pulse"}),e.jsx("span",{children:h==="storefront"?"Shopping":O.currentPage}),ae&&e.jsxs(ze,{variant:"secondary",className:"text-xs px-1.5 py-0",children:[e.jsx(aa,{className:"h-3 w-3 mr-1"}),"Training"]})]}),e.jsx("div",{className:"flex items-center gap-1",children:h==="admin"&&O.pendingOrders>0&&e.jsxs(ze,{variant:"destructive",className:"text-xs px-1.5 py-0 animate-pulse",children:[O.pendingOrders," pending"]})})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(Gs,{value:v,onChange:Ze=>y(Ze.target.value),onKeyPress:Ze=>{Ze.key==="Enter"&&!Ze.shiftKey&&(Ze.preventDefault(),Le())},placeholder:h==="storefront"?"Ask me anything about products, orders, or services...":"Ask me about analytics, inventory, sales, or anything else...",className:"flex-1 min-h-[40px] max-h-[120px] border-2 border-input focus:border-primary transition-all bg-background/50 backdrop-blur-sm allow-select resize-none",rows:1}),e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx(I,{onClick:ys,variant:J?"destructive":"outline",size:"icon",className:ut("h-10 w-10 transition-all duration-200",J&&"animate-pulse"),title:J?"Stop recording":"Voice input",children:J?e.jsx(Tm,{className:"h-4 w-4"}):e.jsx(Cm,{className:"h-4 w-4"})}),e.jsx(I,{onClick:()=>Le(),size:"icon",disabled:!v.trim()||_,className:ut("h-10 w-10 transition-all duration-200",v.trim()&&"hover:scale-110 shadow-lg shadow-primary/50"),children:e.jsx(mn,{className:"h-4 w-4"})})]})]}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-2 text-center flex items-center justify-center gap-1",children:[e.jsx(wi,{className:"h-3 w-3"}),"Powered by Google Gemini AI  ",h==="storefront"?"Customer":"Business"," Mode  Enter to send"]})]})]})]}),e.jsx(q4,{isOpen:te,onClose:()=>X(!1),callType:ce,participant:re||{id:"business-owner",name:"Business Owner",email:"support@business.com",avatar:null},user:a||{id:"guest",name:"Guest User",email:"guest@example.com"},token:localStorage.getItem("token")||localStorage.getItem("customerToken")})]})},JO=()=>e.jsxs("div",{className:"flex h-screen bg-background text-foreground",children:[e.jsx(_O,{}),e.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[e.jsx(XO,{}),e.jsx("main",{className:"flex-1 overflow-auto p-6 bg-background",children:e.jsx(f5,{})})]}),e.jsx(K4,{})]});function Gi({className:t,...s}){return e.jsx("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:e.jsx("table",{"data-slot":"table",className:ut("w-full caption-bottom text-sm",t),...s})})}function qi({className:t,...s}){return e.jsx("thead",{"data-slot":"table-header",className:ut("[&_tr]:border-b",t),...s})}function Ki({className:t,...s}){return e.jsx("tbody",{"data-slot":"table-body",className:ut("[&_tr:last-child]:border-0",t),...s})}function Fa({className:t,...s}){return e.jsx("tr",{"data-slot":"table-row",className:ut("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",t),...s})}function Bt({className:t,...s}){return e.jsx("th",{"data-slot":"table-head",className:ut("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",t),...s})}function It({className:t,...s}){return e.jsx("td",{"data-slot":"table-cell",className:ut("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",t),...s})}function xj(t){const s=N.useRef({value:t,previous:t});return N.useMemo(()=>(s.current.value!==t&&(s.current.previous=s.current.value,s.current.value=t),s.current.previous),[t])}var Y4=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),eM="VisuallyHidden",tM=N.forwardRef((t,s)=>e.jsx(Ma.span,{...t,ref:s,style:{...Y4,...t.style}}));tM.displayName=eM;var sM=[" ","Enter","ArrowUp","ArrowDown"],aM=[" ","Enter"],ud="Select",[$p,Wp,nM]=A_(ud),[qu]=Pp(ud,[nM,Op]),Gp=Op(),[rM,cc]=qu(ud),[iM,oM]=qu(ud),Z4=t=>{const{__scopeSelect:s,children:a,open:n,defaultOpen:i,onOpenChange:c,value:d,defaultValue:h,onValueChange:f,dir:g,name:p,autoComplete:v,disabled:y,required:_,form:S}=t,b=Gp(s),[T,E]=N.useState(null),[A,O]=N.useState(null),[Q,q]=N.useState(!1),U=E_(g),[D,M]=_m({prop:n,defaultProp:i??!1,onChange:c,caller:ud}),[P,G]=_m({prop:d,defaultProp:h,onChange:f,caller:ud}),K=N.useRef(null),z=T?S||!!T.closest("form"):!0,[J,W]=N.useState(new Set),he=Array.from(J).map(V=>V.props.value).join(";");return e.jsx(T_,{...b,children:e.jsxs(rM,{required:_,scope:s,trigger:T,onTriggerChange:E,valueNode:A,onValueNodeChange:O,valueNodeHasChildren:Q,onValueNodeHasChildrenChange:q,contentId:Mp(),value:P,onValueChange:G,open:D,onOpenChange:M,dir:U,triggerPointerDownPosRef:K,disabled:y,children:[e.jsx($p.Provider,{scope:s,children:e.jsx(iM,{scope:t.__scopeSelect,onNativeOptionAdd:N.useCallback(V=>{W(ae=>new Set(ae).add(V))},[]),onNativeOptionRemove:N.useCallback(V=>{W(ae=>{const ge=new Set(ae);return ge.delete(V),ge})},[]),children:a})}),z?e.jsxs(vC,{"aria-hidden":!0,required:_,tabIndex:-1,name:p,autoComplete:v,value:P,onChange:V=>G(V.target.value),disabled:y,form:S,children:[P===void 0?e.jsx("option",{value:""}):null,Array.from(J)]},he):null]})})};Z4.displayName=ud;var X4="SelectTrigger",Q4=N.forwardRef((t,s)=>{const{__scopeSelect:a,disabled:n=!1,...i}=t,c=Gp(a),d=cc(X4,a),h=d.disabled||n,f=Sn(s,d.onTriggerChange),g=Wp(a),p=N.useRef("touch"),[v,y,_]=jC(b=>{const T=g().filter(O=>!O.disabled),E=T.find(O=>O.value===d.value),A=NC(T,b,E);A!==void 0&&d.onValueChange(A.value)}),S=b=>{h||(d.onOpenChange(!0),_()),b&&(d.triggerPointerDownPosRef.current={x:Math.round(b.pageX),y:Math.round(b.pageY)})};return e.jsx(Ky,{asChild:!0,...c,children:e.jsx(Ma.button,{type:"button",role:"combobox","aria-controls":d.contentId,"aria-expanded":d.open,"aria-required":d.required,"aria-autocomplete":"none",dir:d.dir,"data-state":d.open?"open":"closed",disabled:h,"data-disabled":h?"":void 0,"data-placeholder":yC(d.value)?"":void 0,...i,ref:f,onClick:ua(i.onClick,b=>{b.currentTarget.focus(),p.current!=="mouse"&&S(b)}),onPointerDown:ua(i.onPointerDown,b=>{p.current=b.pointerType;const T=b.target;T.hasPointerCapture(b.pointerId)&&T.releasePointerCapture(b.pointerId),b.button===0&&b.ctrlKey===!1&&b.pointerType==="mouse"&&(S(b),b.preventDefault())}),onKeyDown:ua(i.onKeyDown,b=>{const T=v.current!=="";!(b.ctrlKey||b.altKey||b.metaKey)&&b.key.length===1&&y(b.key),!(T&&b.key===" ")&&sM.includes(b.key)&&(S(),b.preventDefault())})})})});Q4.displayName=X4;var J4="SelectValue",eC=N.forwardRef((t,s)=>{const{__scopeSelect:a,className:n,style:i,children:c,placeholder:d="",...h}=t,f=cc(J4,a),{onValueNodeHasChildrenChange:g}=f,p=c!==void 0,v=Sn(s,f.onValueNodeChange);return sc(()=>{g(p)},[g,p]),e.jsx(Ma.span,{...h,ref:v,style:{pointerEvents:"none"},children:yC(f.value)?e.jsx(e.Fragment,{children:d}):c})});eC.displayName=J4;var lM="SelectIcon",tC=N.forwardRef((t,s)=>{const{__scopeSelect:a,children:n,...i}=t;return e.jsx(Ma.span,{"aria-hidden":!0,...i,ref:s,children:n||""})});tC.displayName=lM;var cM="SelectPortal",sC=t=>e.jsx(y_,{asChild:!0,...t});sC.displayName=cM;var hd="SelectContent",aC=N.forwardRef((t,s)=>{const a=cc(hd,t.__scopeSelect),[n,i]=N.useState();if(sc(()=>{i(new DocumentFragment)},[]),!a.open){const c=n;return c?P_.createPortal(e.jsx(nC,{scope:t.__scopeSelect,children:e.jsx($p.Slot,{scope:t.__scopeSelect,children:e.jsx("div",{children:t.children})})}),c):null}return e.jsx(rC,{...t,ref:s})});aC.displayName=hd;var Bi=10,[nC,dc]=qu(hd),dM="SelectContentImpl",uM=w_("SelectContent.RemoveScroll"),rC=N.forwardRef((t,s)=>{const{__scopeSelect:a,position:n="item-aligned",onCloseAutoFocus:i,onEscapeKeyDown:c,onPointerDownOutside:d,side:h,sideOffset:f,align:g,alignOffset:p,arrowPadding:v,collisionBoundary:y,collisionPadding:_,sticky:S,hideWhenDetached:b,avoidCollisions:T,...E}=t,A=cc(hd,a),[O,Q]=N.useState(null),[q,U]=N.useState(null),D=Sn(s,me=>Q(me)),[M,P]=N.useState(null),[G,K]=N.useState(null),z=Wp(a),[J,W]=N.useState(!1),he=N.useRef(!1);N.useEffect(()=>{if(O)return j_(O)},[O]),b_();const V=N.useCallback(me=>{const[De,...Ne]=z().map(ot=>ot.ref.current),[pe]=Ne.slice(-1),Le=document.activeElement;for(const ot of me)if(ot===Le||(ot?.scrollIntoView({block:"nearest"}),ot===De&&q&&(q.scrollTop=0),ot===pe&&q&&(q.scrollTop=q.scrollHeight),ot?.focus(),document.activeElement!==Le))return},[z,q]),ae=N.useCallback(()=>V([M,O]),[V,M,O]);N.useEffect(()=>{J&&ae()},[J,ae]);const{onOpenChange:ge,triggerPointerDownPosRef:Z}=A;N.useEffect(()=>{if(O){let me={x:0,y:0};const De=pe=>{me={x:Math.abs(Math.round(pe.pageX)-(Z.current?.x??0)),y:Math.abs(Math.round(pe.pageY)-(Z.current?.y??0))}},Ne=pe=>{me.x<=10&&me.y<=10?pe.preventDefault():O.contains(pe.target)||ge(!1),document.removeEventListener("pointermove",De),Z.current=null};return Z.current!==null&&(document.addEventListener("pointermove",De),document.addEventListener("pointerup",Ne,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",De),document.removeEventListener("pointerup",Ne,{capture:!0})}}},[O,ge,Z]),N.useEffect(()=>{const me=()=>ge(!1);return window.addEventListener("blur",me),window.addEventListener("resize",me),()=>{window.removeEventListener("blur",me),window.removeEventListener("resize",me)}},[ge]);const[ee,te]=jC(me=>{const De=z().filter(Le=>!Le.disabled),Ne=De.find(Le=>Le.ref.current===document.activeElement),pe=NC(De,me,Ne);pe&&setTimeout(()=>pe.ref.current.focus())}),X=N.useCallback((me,De,Ne)=>{const pe=!he.current&&!Ne;(A.value!==void 0&&A.value===De||pe)&&(P(me),pe&&(he.current=!0))},[A.value]),ce=N.useCallback(()=>O?.focus(),[O]),F=N.useCallback((me,De,Ne)=>{const pe=!he.current&&!Ne;(A.value!==void 0&&A.value===De||pe)&&K(me)},[A.value]),re=n==="popper"?oy:iC,de=re===oy?{side:h,sideOffset:f,align:g,alignOffset:p,arrowPadding:v,collisionBoundary:y,collisionPadding:_,sticky:S,hideWhenDetached:b,avoidCollisions:T}:{};return e.jsx(nC,{scope:a,content:O,viewport:q,onViewportChange:U,itemRefCallback:X,selectedItem:M,onItemLeave:ce,itemTextRefCallback:F,focusSelectedItem:ae,selectedItemText:G,position:n,isPositioned:J,searchRef:ee,children:e.jsx(N_,{as:uM,allowPinchZoom:!0,children:e.jsx(S_,{asChild:!0,trapped:A.open,onMountAutoFocus:me=>{me.preventDefault()},onUnmountAutoFocus:ua(i,me=>{A.trigger?.focus({preventScroll:!0}),me.preventDefault()}),children:e.jsx(__,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:c,onPointerDownOutside:d,onFocusOutside:me=>me.preventDefault(),onDismiss:()=>A.onOpenChange(!1),children:e.jsx(re,{role:"listbox",id:A.contentId,"data-state":A.open?"open":"closed",dir:A.dir,onContextMenu:me=>me.preventDefault(),...E,...de,onPlaced:()=>W(!0),ref:D,style:{display:"flex",flexDirection:"column",outline:"none",...E.style},onKeyDown:ua(E.onKeyDown,me=>{const De=me.ctrlKey||me.altKey||me.metaKey;if(me.key==="Tab"&&me.preventDefault(),!De&&me.key.length===1&&te(me.key),["ArrowUp","ArrowDown","Home","End"].includes(me.key)){let pe=z().filter(Le=>!Le.disabled).map(Le=>Le.ref.current);if(["ArrowUp","End"].includes(me.key)&&(pe=pe.slice().reverse()),["ArrowUp","ArrowDown"].includes(me.key)){const Le=me.target,ot=pe.indexOf(Le);pe=pe.slice(ot+1)}setTimeout(()=>V(pe)),me.preventDefault()}})})})})})})});rC.displayName=dM;var hM="SelectItemAlignedPosition",iC=N.forwardRef((t,s)=>{const{__scopeSelect:a,onPlaced:n,...i}=t,c=cc(hd,a),d=dc(hd,a),[h,f]=N.useState(null),[g,p]=N.useState(null),v=Sn(s,D=>p(D)),y=Wp(a),_=N.useRef(!1),S=N.useRef(!0),{viewport:b,selectedItem:T,selectedItemText:E,focusSelectedItem:A}=d,O=N.useCallback(()=>{if(c.trigger&&c.valueNode&&h&&g&&b&&T&&E){const D=c.trigger.getBoundingClientRect(),M=g.getBoundingClientRect(),P=c.valueNode.getBoundingClientRect(),G=E.getBoundingClientRect();if(c.dir!=="rtl"){const Le=G.left-M.left,ot=P.left-Le,Pt=D.left-ot,Dt=D.width+Pt,Ct=Math.max(Dt,M.width),Lt=window.innerWidth-Bi,yt=rp(ot,[Bi,Math.max(Bi,Lt-Ct)]);h.style.minWidth=Dt+"px",h.style.left=yt+"px"}else{const Le=M.right-G.right,ot=window.innerWidth-P.right-Le,Pt=window.innerWidth-D.right-ot,Dt=D.width+Pt,Ct=Math.max(Dt,M.width),Lt=window.innerWidth-Bi,yt=rp(ot,[Bi,Math.max(Bi,Lt-Ct)]);h.style.minWidth=Dt+"px",h.style.right=yt+"px"}const K=y(),z=window.innerHeight-Bi*2,J=b.scrollHeight,W=window.getComputedStyle(g),he=parseInt(W.borderTopWidth,10),V=parseInt(W.paddingTop,10),ae=parseInt(W.borderBottomWidth,10),ge=parseInt(W.paddingBottom,10),Z=he+V+J+ge+ae,ee=Math.min(T.offsetHeight*5,Z),te=window.getComputedStyle(b),X=parseInt(te.paddingTop,10),ce=parseInt(te.paddingBottom,10),F=D.top+D.height/2-Bi,re=z-F,de=T.offsetHeight/2,me=T.offsetTop+de,De=he+V+me,Ne=Z-De;if(De<=F){const Le=K.length>0&&T===K[K.length-1].ref.current;h.style.bottom="0px";const ot=g.clientHeight-b.offsetTop-b.offsetHeight,Pt=Math.max(re,de+(Le?ce:0)+ot+ae),Dt=De+Pt;h.style.height=Dt+"px"}else{const Le=K.length>0&&T===K[0].ref.current;h.style.top="0px";const Pt=Math.max(F,he+b.offsetTop+(Le?X:0)+de)+Ne;h.style.height=Pt+"px",b.scrollTop=De-F+b.offsetTop}h.style.margin=`${Bi}px 0`,h.style.minHeight=ee+"px",h.style.maxHeight=z+"px",n?.(),requestAnimationFrame(()=>_.current=!0)}},[y,c.trigger,c.valueNode,h,g,b,T,E,c.dir,n]);sc(()=>O(),[O]);const[Q,q]=N.useState();sc(()=>{g&&q(window.getComputedStyle(g).zIndex)},[g]);const U=N.useCallback(D=>{D&&S.current===!0&&(O(),A?.(),S.current=!1)},[O,A]);return e.jsx(fM,{scope:a,contentWrapper:h,shouldExpandOnScrollRef:_,onScrollButtonChange:U,children:e.jsx("div",{ref:f,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:Q},children:e.jsx(Ma.div,{...i,ref:v,style:{boxSizing:"border-box",maxHeight:"100%",...i.style}})})})});iC.displayName=hM;var mM="SelectPopperPosition",oy=N.forwardRef((t,s)=>{const{__scopeSelect:a,align:n="start",collisionPadding:i=Bi,...c}=t,d=Gp(a);return e.jsx(C_,{...d,...c,ref:s,align:n,collisionPadding:i,style:{boxSizing:"border-box",...c.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});oy.displayName=mM;var[fM,pj]=qu(hd,{}),ly="SelectViewport",oC=N.forwardRef((t,s)=>{const{__scopeSelect:a,nonce:n,...i}=t,c=dc(ly,a),d=pj(ly,a),h=Sn(s,c.onViewportChange),f=N.useRef(0);return e.jsxs(e.Fragment,{children:[e.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:n}),e.jsx($p.Slot,{scope:a,children:e.jsx(Ma.div,{"data-radix-select-viewport":"",role:"presentation",...i,ref:h,style:{position:"relative",flex:1,overflow:"hidden auto",...i.style},onScroll:ua(i.onScroll,g=>{const p=g.currentTarget,{contentWrapper:v,shouldExpandOnScrollRef:y}=d;if(y?.current&&v){const _=Math.abs(f.current-p.scrollTop);if(_>0){const S=window.innerHeight-Bi*2,b=parseFloat(v.style.minHeight),T=parseFloat(v.style.height),E=Math.max(b,T);if(E<S){const A=E+_,O=Math.min(S,A),Q=A-O;v.style.height=O+"px",v.style.bottom==="0px"&&(p.scrollTop=Q>0?Q:0,v.style.justifyContent="flex-end")}}}f.current=p.scrollTop})})})]})});oC.displayName=ly;var lC="SelectGroup",[xM,pM]=qu(lC),gM=N.forwardRef((t,s)=>{const{__scopeSelect:a,...n}=t,i=Mp();return e.jsx(xM,{scope:a,id:i,children:e.jsx(Ma.div,{role:"group","aria-labelledby":i,...n,ref:s})})});gM.displayName=lC;var cC="SelectLabel",vM=N.forwardRef((t,s)=>{const{__scopeSelect:a,...n}=t,i=pM(cC,a);return e.jsx(Ma.div,{id:i.id,...n,ref:s})});vM.displayName=cC;var up="SelectItem",[yM,dC]=qu(up),uC=N.forwardRef((t,s)=>{const{__scopeSelect:a,value:n,disabled:i=!1,textValue:c,...d}=t,h=cc(up,a),f=dc(up,a),g=h.value===n,[p,v]=N.useState(c??""),[y,_]=N.useState(!1),S=Sn(s,A=>f.itemRefCallback?.(A,n,i)),b=Mp(),T=N.useRef("touch"),E=()=>{i||(h.onValueChange(n),h.onOpenChange(!1))};if(n==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return e.jsx(yM,{scope:a,value:n,disabled:i,textId:b,isSelected:g,onItemTextChange:N.useCallback(A=>{v(O=>O||(A?.textContent??"").trim())},[]),children:e.jsx($p.ItemSlot,{scope:a,value:n,disabled:i,textValue:p,children:e.jsx(Ma.div,{role:"option","aria-labelledby":b,"data-highlighted":y?"":void 0,"aria-selected":g&&y,"data-state":g?"checked":"unchecked","aria-disabled":i||void 0,"data-disabled":i?"":void 0,tabIndex:i?void 0:-1,...d,ref:S,onFocus:ua(d.onFocus,()=>_(!0)),onBlur:ua(d.onBlur,()=>_(!1)),onClick:ua(d.onClick,()=>{T.current!=="mouse"&&E()}),onPointerUp:ua(d.onPointerUp,()=>{T.current==="mouse"&&E()}),onPointerDown:ua(d.onPointerDown,A=>{T.current=A.pointerType}),onPointerMove:ua(d.onPointerMove,A=>{T.current=A.pointerType,i?f.onItemLeave?.():T.current==="mouse"&&A.currentTarget.focus({preventScroll:!0})}),onPointerLeave:ua(d.onPointerLeave,A=>{A.currentTarget===document.activeElement&&f.onItemLeave?.()}),onKeyDown:ua(d.onKeyDown,A=>{f.searchRef?.current!==""&&A.key===" "||(aM.includes(A.key)&&E(),A.key===" "&&A.preventDefault())})})})})});uC.displayName=up;var im="SelectItemText",hC=N.forwardRef((t,s)=>{const{__scopeSelect:a,className:n,style:i,...c}=t,d=cc(im,a),h=dc(im,a),f=dC(im,a),g=oM(im,a),[p,v]=N.useState(null),y=Sn(s,E=>v(E),f.onItemTextChange,E=>h.itemTextRefCallback?.(E,f.value,f.disabled)),_=p?.textContent,S=N.useMemo(()=>e.jsx("option",{value:f.value,disabled:f.disabled,children:_},f.value),[f.disabled,f.value,_]),{onNativeOptionAdd:b,onNativeOptionRemove:T}=g;return sc(()=>(b(S),()=>T(S)),[b,T,S]),e.jsxs(e.Fragment,{children:[e.jsx(Ma.span,{id:f.textId,...c,ref:y}),f.isSelected&&d.valueNode&&!d.valueNodeHasChildren?P_.createPortal(c.children,d.valueNode):null]})});hC.displayName=im;var mC="SelectItemIndicator",fC=N.forwardRef((t,s)=>{const{__scopeSelect:a,...n}=t;return dC(mC,a).isSelected?e.jsx(Ma.span,{"aria-hidden":!0,...n,ref:s}):null});fC.displayName=mC;var cy="SelectScrollUpButton",xC=N.forwardRef((t,s)=>{const a=dc(cy,t.__scopeSelect),n=pj(cy,t.__scopeSelect),[i,c]=N.useState(!1),d=Sn(s,n.onScrollButtonChange);return sc(()=>{if(a.viewport&&a.isPositioned){let h=function(){const g=f.scrollTop>0;c(g)};const f=a.viewport;return h(),f.addEventListener("scroll",h),()=>f.removeEventListener("scroll",h)}},[a.viewport,a.isPositioned]),i?e.jsx(gC,{...t,ref:d,onAutoScroll:()=>{const{viewport:h,selectedItem:f}=a;h&&f&&(h.scrollTop=h.scrollTop-f.offsetHeight)}}):null});xC.displayName=cy;var dy="SelectScrollDownButton",pC=N.forwardRef((t,s)=>{const a=dc(dy,t.__scopeSelect),n=pj(dy,t.__scopeSelect),[i,c]=N.useState(!1),d=Sn(s,n.onScrollButtonChange);return sc(()=>{if(a.viewport&&a.isPositioned){let h=function(){const g=f.scrollHeight-f.clientHeight,p=Math.ceil(f.scrollTop)<g;c(p)};const f=a.viewport;return h(),f.addEventListener("scroll",h),()=>f.removeEventListener("scroll",h)}},[a.viewport,a.isPositioned]),i?e.jsx(gC,{...t,ref:d,onAutoScroll:()=>{const{viewport:h,selectedItem:f}=a;h&&f&&(h.scrollTop=h.scrollTop+f.offsetHeight)}}):null});pC.displayName=dy;var gC=N.forwardRef((t,s)=>{const{__scopeSelect:a,onAutoScroll:n,...i}=t,c=dc("SelectScrollButton",a),d=N.useRef(null),h=Wp(a),f=N.useCallback(()=>{d.current!==null&&(window.clearInterval(d.current),d.current=null)},[]);return N.useEffect(()=>()=>f(),[f]),sc(()=>{h().find(p=>p.ref.current===document.activeElement)?.ref.current?.scrollIntoView({block:"nearest"})},[h]),e.jsx(Ma.div,{"aria-hidden":!0,...i,ref:s,style:{flexShrink:0,...i.style},onPointerDown:ua(i.onPointerDown,()=>{d.current===null&&(d.current=window.setInterval(n,50))}),onPointerMove:ua(i.onPointerMove,()=>{c.onItemLeave?.(),d.current===null&&(d.current=window.setInterval(n,50))}),onPointerLeave:ua(i.onPointerLeave,()=>{f()})})}),jM="SelectSeparator",NM=N.forwardRef((t,s)=>{const{__scopeSelect:a,...n}=t;return e.jsx(Ma.div,{"aria-hidden":!0,...n,ref:s})});NM.displayName=jM;var uy="SelectArrow",wM=N.forwardRef((t,s)=>{const{__scopeSelect:a,...n}=t,i=Gp(a),c=cc(uy,a),d=dc(uy,a);return c.open&&d.position==="popper"?e.jsx(k_,{...i,...n,ref:s}):null});wM.displayName=uy;var bM="SelectBubbleInput",vC=N.forwardRef(({__scopeSelect:t,value:s,...a},n)=>{const i=N.useRef(null),c=Sn(n,i),d=xj(s);return N.useEffect(()=>{const h=i.current;if(!h)return;const f=window.HTMLSelectElement.prototype,p=Object.getOwnPropertyDescriptor(f,"value").set;if(d!==s&&p){const v=new Event("change",{bubbles:!0});p.call(h,s),h.dispatchEvent(v)}},[d,s]),e.jsx(Ma.select,{...a,style:{...Y4,...a.style},ref:c,defaultValue:s})});vC.displayName=bM;function yC(t){return t===""||t===void 0}function jC(t){const s=a5(t),a=N.useRef(""),n=N.useRef(0),i=N.useCallback(d=>{const h=a.current+d;s(h),(function f(g){a.current=g,window.clearTimeout(n.current),g!==""&&(n.current=window.setTimeout(()=>f(""),1e3))})(h)},[s]),c=N.useCallback(()=>{a.current="",window.clearTimeout(n.current)},[]);return N.useEffect(()=>()=>window.clearTimeout(n.current),[]),[a,i,c]}function NC(t,s,a){const i=s.length>1&&Array.from(s).every(g=>g===s[0])?s[0]:s,c=a?t.indexOf(a):-1;let d=SM(t,Math.max(c,0));i.length===1&&(d=d.filter(g=>g!==a));const f=d.find(g=>g.textValue.toLowerCase().startsWith(i.toLowerCase()));return f!==a?f:void 0}function SM(t,s){return t.map((a,n)=>t[(s+n)%t.length])}var _M=Z4,CM=Q4,TM=eC,kM=tC,EM=sC,AM=aC,DM=oC,PM=uC,OM=hC,MM=fC,RM=xC,LM=pC;function Xt({...t}){return e.jsx(_M,{"data-slot":"select",...t})}function Qt({...t}){return e.jsx(TM,{"data-slot":"select-value",...t})}function Jt({className:t,size:s="default",children:a,...n}){return e.jsxs(CM,{"data-slot":"select-trigger","data-size":s,className:ut("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-fit items-center justify-between gap-2 rounded-md border bg-transparent px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...n,children:[a,e.jsx(kM,{asChild:!0,children:e.jsx(Lp,{className:"size-4 opacity-50"})})]})}function es({className:t,children:s,position:a="popper",...n}){return e.jsx(EM,{children:e.jsxs(AM,{"data-slot":"select-content",className:ut("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md",a==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:a,...n,children:[e.jsx(IM,{}),e.jsx(DM,{className:ut("p-1",a==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:s}),e.jsx(FM,{})]})})}function Ie({className:t,children:s,...a}){return e.jsxs(PM,{"data-slot":"select-item",className:ut("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",t),...a,children:[e.jsx("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:e.jsx(MM,{children:e.jsx(To,{className:"size-4"})})}),e.jsx(OM,{children:s})]})}function IM({className:t,...s}){return e.jsx(RM,{"data-slot":"select-scroll-up-button",className:ut("flex cursor-default items-center justify-center py-1",t),...s,children:e.jsx(_5,{className:"size-4"})})}function FM({className:t,...s}){return e.jsx(LM,{"data-slot":"select-scroll-down-button",className:ut("flex cursor-default items-center justify-center py-1",t),...s,children:e.jsx(Lp,{className:"size-4"})})}const BM=()=>{const[t,s]=N.useState(""),[a,n]=N.useState("all"),[i,c]=N.useState(!1),[d,h]=N.useState(!1),[f,g]=N.useState(""),[p,v]=N.useState([]),[y,_]=N.useState({name:"",sku:"",category:"",stockQuantity:"",reorderLevel:"",price:"",supplierName:"",description:""}),S={name:"",sku:"",category:"",stockQuantity:"",reorderLevel:"",price:"",supplierName:"",description:""},[b,T]=N.useState(!1),[E,A]=N.useState(null);N.useEffect(()=>{(async()=>{const X=localStorage.getItem("token");if(!X){R.error("Please log in to view your products.");return}try{const ce=await ke.get("/products",{headers:{Authorization:`Bearer ${X}`}});v(ce.data)}catch(ce){ce.response?.status===401?R.error("Unauthorized: Please log in again."):R.error("Error fetching products. Please try again later."),console.error("Error fetching products:",ce)}})()},[]);const O=(te,X)=>{_(ce=>({...ce,[te]:X}))},Q=async()=>{if(["name","sku","category","stockQuantity","price","supplierName"].some(F=>!y[F]?.toString().trim())){R.error("Please fill in all required fields.");return}const ce={...y,stock:Number(y.stockQuantity),reorderLevel:Number(y.reorderLevel),price:Number(y.price)};try{const F=localStorage.getItem("token"),re=await ke.post("/products",ce,{headers:{Authorization:`Bearer ${F}`,"Content-Type":"application/json"}});v(de=>[...de,re.data]),_(S),c(!1),R.success("Product added successfully!")}catch(F){R.error(F.response?.data?.error||"Error adding product."),console.error("Error adding product:",F)}},q=te=>{A({...te}),T(!0)},U=(te,X)=>{A(ce=>({...ce,[te]:X}))},D=async()=>{if(!E)return;const te={...E,stockQuantity:Number(E.stockQuantity),reorderLevel:Number(E.reorderLevel),price:Number(E.price)};try{const X=localStorage.getItem("token"),ce=await ke.put(`/products/${E._id}`,te,{headers:{Authorization:`Bearer ${X}`,"Content-Type":"application/json"}});v(F=>F.map(re=>re._id===ce.data._id?ce.data:re)),T(!1),A(null),R.success("Product updated successfully!")}catch(X){R.error(X.response?.data?.error||"Error updating product."),console.error("Error updating product:",X)}},M=async te=>{if(window.confirm("Are you sure you want to delete this product?"))try{const ce=localStorage.getItem("token");await ke.delete(`/products/${te}`,{headers:{Authorization:`Bearer ${ce}`,"Content-Type":"application/json"}}),v(F=>F.filter(re=>re._id!==te)),R.success("Product deleted successfully!")}catch(ce){R.error(ce.response?.data?.error||"Error deleting product."),console.error("Error deleting product:",ce)}},P=(te,X,ce)=>X===0?e.jsx(ze,{variant:"destructive",children:"Out of Stock"}):X<=ce?e.jsx(ze,{variant:"secondary",children:"Low Stock"}):e.jsx(ze,{variant:"default",children:"In Stock"}),G=p.filter(te=>{const X=te.name.toLowerCase().includes(t.toLowerCase())||te.sku.toLowerCase().includes(t.toLowerCase()),ce=a==="all"||te.category===a;return X&&ce}),[K,z]=N.useState([]),[J,W]=N.useState(0);N.useEffect(()=>{(async()=>{const X=localStorage.getItem("token");if(X)try{const ce=await ke.get("/services",{headers:{Authorization:`Bearer ${X}`}});z(ce.data||[]);const F=(ce.data||[]).reduce((re,de)=>re+(de.price||0)*(de.bookingsCount||0),0);W(F)}catch(ce){console.error("Error fetching services:",ce)}})()},[]);const he=G.length,V=p.filter(te=>te.stockQuantity<=te.reorderLevel&&te.stockQuantity>0).length,ae=p.filter(te=>te.stockQuantity===0).length,ge=p.reduce((te,X)=>{const ce=Number(X.price)||0,F=Number(X.stockQuantity)||Number(X.stock)||0,re=ce*F;return console.log(` Product: ${X.name}`),console.log(`   Price: KES ${ce}`),console.log(`   Stock: ${F} units`),console.log(`   Value: KES ${re.toFixed(2)}`),console.log("---"),te+re},0);console.log(" TOTAL INVENTORY VALUE:",`KES ${ge.toFixed(2)}`),console.log(" Total Products:",p.length),console.log("=====================================");const ee=(isNaN(ge)?0:ge).toFixed(2);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Inventory Management"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage your products, stock levels, and suppliers"})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs(I,{variant:"outline",onClick:()=>h(!0),children:[e.jsx($v,{className:"mr-2 h-4 w-4"}),"Scan Barcode"]}),e.jsxs(Gt,{open:i,onOpenChange:c,children:[e.jsx(Za,{asChild:!0,children:e.jsxs(I,{className:"bg-green-500 cursor-pointer hover:bg-green-400",children:[e.jsx(ha,{className:"mr-2 h-4 w-4"}),"Add Product"]})}),e.jsxs(qt,{children:[e.jsxs(Kt,{children:[e.jsx(Yt,{children:"Add New Product"}),e.jsx(vs,{children:"Register a new product to your inventory"})]}),e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(ue,{htmlFor:"product-name",children:"Product Name"}),e.jsx(we,{id:"product-name",placeholder:"Enter product name",value:y.name,onChange:te=>O("name",te.target.value)})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(ue,{htmlFor:"sku",children:"SKU"}),e.jsx(we,{id:"sku",placeholder:"Product SKU",value:y.sku,onChange:te=>O("sku",te.target.value)})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(ue,{htmlFor:"category",children:"Category"}),e.jsx(we,{id:"category",placeholder:"Enter category",value:y.category,onChange:te=>O("category",te.target.value)})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(ue,{htmlFor:"stock",children:"Stock Quantity"}),e.jsx(we,{id:"stock",type:"number",min:"0",placeholder:"e.g. 25",value:y.stockQuantity,onChange:te=>O("stockQuantity",te.target.value)})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(ue,{htmlFor:"reorderLevel",children:"Reorder Level"}),e.jsx(we,{id:"reorderLevel",type:"number",min:"0",placeholder:"e.g. 10",value:y.reorderLevel,onChange:te=>O("reorderLevel",te.target.value)})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(ue,{htmlFor:"price",children:"Price (KES)"}),e.jsx(we,{id:"price",type:"number",min:"0",step:"1",placeholder:"e.g. 2500",value:y.price,onChange:te=>O("price",te.target.value)})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(ue,{htmlFor:"supplier",children:"Supplier"}),e.jsx(we,{id:"supplier",placeholder:"Supplier name",value:y.supplierName,onChange:te=>O("supplierName",te.target.value)})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(ue,{htmlFor:"description",children:"Description (Optional)"}),e.jsx(Gs,{id:"description",placeholder:"Product description",value:y.description,onChange:te=>O("description",te.target.value),className:"resize-none"})]})]}),e.jsxs(ea,{children:[e.jsx(I,{variant:"outline",className:"text-red-500 cursor-pointer hover:text-red-400",onClick:()=>c(!1),children:"Cancel"}),e.jsxs(I,{className:"bg-green-500 cursor-pointer hover:bg-green-400",onClick:Q,children:[e.jsx(mn,{className:"mr-2 h-4 w-4"}),"Add Product"]})]})]})]})]})]}),e.jsxs("div",{className:"grid gap-6 md:grid-cols-4",children:[e.jsxs(se,{children:[e.jsxs(_e,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(Te,{className:"text-sm font-medium",children:"Total Products"}),e.jsx(cs,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(oe,{children:[e.jsx("div",{className:"text-2xl font-bold",children:he}),e.jsx("p",{className:"text-xs text-muted-foreground",children:he===0?"No products yet":`${he} total products`})]})]}),e.jsxs(se,{children:[e.jsxs(_e,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(Te,{className:"text-sm font-medium",children:"Low Stock Items"}),e.jsx(mr,{className:"h-4 w-4 text-orange-500"})]}),e.jsxs(oe,{children:[e.jsx("div",{className:"text-2xl font-bold text-orange-600",children:V}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Need immediate attention"})]})]}),e.jsxs(se,{children:[e.jsxs(_e,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(Te,{className:"text-sm font-medium",children:"Out of Stock"}),e.jsx(mr,{className:"h-4 w-4 text-red-500"})]}),e.jsxs(oe,{children:[e.jsx("div",{className:"text-2xl font-bold text-red-600",children:ae}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Require restocking"})]})]}),e.jsxs(se,{children:[e.jsxs(_e,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(Te,{className:"text-sm font-medium",children:"Total Value"}),e.jsx(Sa,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(oe,{children:[e.jsxs("div",{className:"text-2xl font-bold",children:["KES ",ee]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:he>0?`Value of ${he} products`:"No inventory value"})]})]})]}),e.jsxs(se,{children:[e.jsxs(_e,{children:[e.jsx(Te,{children:"Product Inventory"}),e.jsx(vt,{children:"View and manage all your products"})]}),e.jsxs(oe,{children:[e.jsxs("div",{className:"flex items-center space-x-4 mb-6",children:[e.jsxs("div",{className:"relative flex-1 max-w-sm",children:[e.jsx(Da,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(we,{placeholder:"Search products...",value:t,onChange:te=>s(te.target.value),className:"pl-10"})]}),e.jsxs(Xt,{value:a,onValueChange:n,children:[e.jsx(Jt,{className:"w-[180px]",children:e.jsx(Qt,{placeholder:"Category"})}),e.jsxs(es,{children:[e.jsx(Ie,{value:"all",children:"All Categories"}),e.jsx(Ie,{value:"Hair Care",children:"Hair Care"}),e.jsx(Ie,{value:"Skincare",children:"Skincare"}),e.jsx(Ie,{value:"Equipment",children:"Equipment"})]})]}),e.jsxs(I,{variant:"outline",children:[e.jsx(ll,{className:"mr-2 h-4 w-4"}),"More Filters"]})]}),e.jsxs(Gi,{children:[e.jsx(qi,{children:e.jsxs(Fa,{children:[e.jsx(Bt,{children:"Product"}),e.jsx(Bt,{children:"SKU"}),e.jsx(Bt,{children:"Category"}),e.jsx(Bt,{children:"Stock"}),e.jsx(Bt,{children:"Price"}),e.jsx(Bt,{children:"Supplier"}),e.jsx(Bt,{children:"Status"}),e.jsx(Bt,{children:"Actions"})]})}),e.jsx(Ki,{children:G.map((te,X)=>e.jsxs(Fa,{children:[e.jsx(It,{className:"font-medium",children:te.name}),e.jsx(It,{children:te.sku}),e.jsx(It,{children:te.category}),e.jsx(It,{children:te.stockQuantity}),e.jsxs(It,{children:["KES ",te.price?.toLocaleString()||0]}),e.jsx(It,{children:te.supplierName}),e.jsx(It,{children:P(te.status,te.stock,te.reorderLevel)}),e.jsx(It,{children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(I,{variant:"outline",size:"sm",onClick:()=>q(te),children:"Edit"}),e.jsx(I,{variant:"destructive",size:"sm",onClick:()=>M(te._id),children:e.jsx(Ua,{className:"h-4 w-4"})})]})})]},te._id||`product-${X}`))})]})]})]}),b&&E&&e.jsx(Gt,{open:b,onOpenChange:T,children:e.jsxs(qt,{children:[e.jsxs(Kt,{children:[e.jsx(Yt,{children:"Edit Product"}),e.jsx(vs,{children:"Update product details"})]}),e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(ue,{htmlFor:"edit-product-name",children:"Product Name"}),e.jsx(we,{id:"edit-product-name",placeholder:"Enter product name",value:E?.name??"",onChange:te=>U("name",te.target.value)})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(ue,{htmlFor:"edit-sku",children:"SKU"}),e.jsx(we,{id:"edit-sku",placeholder:"Product SKU",value:E?.sku??"",onChange:te=>U("sku",te.target.value)})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(ue,{htmlFor:"edit-category",children:"Category"}),e.jsx(we,{id:"edit-category",placeholder:"Enter category",value:E?.category??"",onChange:te=>U("category",te.target.value)})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(ue,{htmlFor:"edit-stock",children:"Stock Quantity"}),e.jsx(we,{id:"edit-stock",type:"number",min:"0",placeholder:"e.g. 25",value:E?.stockQuantity??"",onChange:te=>U("stockQuantity",te.target.value)})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(ue,{htmlFor:"edit-reorderLevel",children:"Reorder Level"}),e.jsx(we,{id:"edit-reorderLevel",type:"number",min:"0",placeholder:"e.g. 10",value:E?.reorderLevel??"",onChange:te=>U("reorderLevel",te.target.value)})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(ue,{htmlFor:"edit-price",children:"Price (KES)"}),e.jsx(we,{id:"edit-price",type:"number",min:"0",step:"1",placeholder:"e.g. 2500",value:E?.price??"",onChange:te=>U("price",te.target.value)})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(ue,{htmlFor:"edit-supplier",children:"Supplier"}),e.jsx(we,{id:"edit-supplier",placeholder:"Supplier name",value:E?.supplierName??"",onChange:te=>U("supplierName",te.target.value)})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(ue,{htmlFor:"edit-description",children:"Description (Optional)"}),e.jsx(Gs,{id:"edit-description",placeholder:"Product description",value:E?.description??"",onChange:te=>U("description",te.target.value),className:"resize-none"})]})]}),e.jsxs(ea,{children:[e.jsx(I,{variant:"outline",className:"text-red-500 cursor-pointer hover:text-red-400",onClick:()=>T(!1),children:"Cancel"}),e.jsxs(I,{className:"bg-green-500 cursor-pointer hover:bg-green-400",onClick:D,children:[e.jsx(mn,{className:"mr-2 h-4 w-4"}),"Save Changes"]})]})]})}),e.jsx(Gt,{open:d,onOpenChange:h,children:e.jsxs(qt,{children:[e.jsxs(Kt,{children:[e.jsx(Yt,{children:"Scan Barcode"}),e.jsx(vs,{children:"Enter barcode/SKU to search for products"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(ue,{htmlFor:"barcode",children:"Barcode / SKU"}),e.jsx(we,{id:"barcode",placeholder:"Enter SKU or barcode...",value:f,onChange:te=>g(te.target.value),onKeyPress:te=>{if(te.key==="Enter"&&f.trim()){const X=p.find(ce=>ce.sku?.toLowerCase()===f.trim().toLowerCase());X?(R.success(`Product found: ${X.name}`),A(X),T(!0),h(!1),g("")):R.error("Product not found")}},autoFocus:!0})]}),e.jsx("div",{className:"text-sm text-muted-foreground",children:e.jsx("p",{children:" Enter the product SKU and press Enter to search"})})]}),e.jsxs(ea,{children:[e.jsx(I,{variant:"outline",onClick:()=>{h(!1),g("")},children:"Cancel"}),e.jsxs(I,{onClick:()=>{if(f.trim()){const te=p.find(X=>X.sku?.toLowerCase()===f.trim().toLowerCase());te?(R.success(`Product found: ${te.name}`),A(te),T(!0),h(!1),g("")):R.error("Product not found")}},children:[e.jsx(Da,{className:"mr-2 h-4 w-4"}),"Search"]})]})]})})]})},zM=()=>{const{user:t}=qs(),s=f=>t?(Array.isArray(f)?f:[f]).includes(t.role):!1;return{user:t,hasRole:s,hasPermission:f=>!t||!t.permissions?!1:t.permissions[f]===!0,hasAnyPermission:f=>!t||!t.permissions?!1:f.some(g=>t.permissions[g]===!0),hasAllPermissions:f=>!t||!t.permissions?!1:f.every(g=>t.permissions[g]===!0),isAdmin:()=>s(["admin","super_admin"]),isSuperAdmin:()=>s(["super_admin"]),isClient:()=>s(["client"]),permissions:t?.permissions||{}}};/*! xlsx.js (C) 2013-present SheetJS -- http://sheetjs.com */var hp={};hp.version="0.18.5";var wC=1252,UM=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],bC=function(t){UM.indexOf(t)!=-1&&(wC=t)};function VM(){bC(1252)}var Am=function(t){bC(t)};function HM(){Am(1200),VM()}var Mx=function(s){return String.fromCharCode(s)},t2=function(s){return String.fromCharCode(s)},mp,Ql="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function Dm(t){for(var s="",a=0,n=0,i=0,c=0,d=0,h=0,f=0,g=0;g<t.length;)a=t.charCodeAt(g++),c=a>>2,n=t.charCodeAt(g++),d=(a&3)<<4|n>>4,i=t.charCodeAt(g++),h=(n&15)<<2|i>>6,f=i&63,isNaN(n)?h=f=64:isNaN(i)&&(f=64),s+=Ql.charAt(c)+Ql.charAt(d)+Ql.charAt(h)+Ql.charAt(f);return s}function al(t){var s="",a=0,n=0,i=0,c=0,d=0,h=0,f=0;t=t.replace(/[^\w\+\/\=]/g,"");for(var g=0;g<t.length;)c=Ql.indexOf(t.charAt(g++)),d=Ql.indexOf(t.charAt(g++)),a=c<<2|d>>4,s+=String.fromCharCode(a),h=Ql.indexOf(t.charAt(g++)),n=(d&15)<<4|h>>2,h!==64&&(s+=String.fromCharCode(n)),f=Ql.indexOf(t.charAt(g++)),i=(h&3)<<6|f,f!==64&&(s+=String.fromCharCode(i));return s}var sa=(function(){return typeof Buffer<"u"&&typeof process<"u"&&typeof process.versions<"u"&&!!process.versions.node})(),cl=(function(){if(typeof Buffer<"u"){var t=!Buffer.from;if(!t)try{Buffer.from("foo","utf8")}catch{t=!0}return t?function(s,a){return a?new Buffer(s,a):new Buffer(s)}:Buffer.from.bind(Buffer)}return function(){}})();function md(t){return sa?Buffer.alloc?Buffer.alloc(t):new Buffer(t):typeof Uint8Array<"u"?new Uint8Array(t):new Array(t)}function s2(t){return sa?Buffer.allocUnsafe?Buffer.allocUnsafe(t):new Buffer(t):typeof Uint8Array<"u"?new Uint8Array(t):new Array(t)}var Vi=function(s){return sa?cl(s,"binary"):s.split("").map(function(a){return a.charCodeAt(0)&255})};function qp(t){if(typeof ArrayBuffer>"u")return Vi(t);for(var s=new ArrayBuffer(t.length),a=new Uint8Array(s),n=0;n!=t.length;++n)a[n]=t.charCodeAt(n)&255;return s}function Xm(t){if(Array.isArray(t))return t.map(function(n){return String.fromCharCode(n)}).join("");for(var s=[],a=0;a<t.length;++a)s[a]=String.fromCharCode(t[a]);return s.join("")}function $M(t){if(typeof Uint8Array>"u")throw new Error("Unsupported");return new Uint8Array(t)}var er=sa?function(t){return Buffer.concat(t.map(function(s){return Buffer.isBuffer(s)?s:cl(s)}))}:function(t){if(typeof Uint8Array<"u"){var s=0,a=0;for(s=0;s<t.length;++s)a+=t[s].length;var n=new Uint8Array(a),i=0;for(s=0,a=0;s<t.length;a+=i,++s)if(i=t[s].length,t[s]instanceof Uint8Array)n.set(t[s],a);else{if(typeof t[s]=="string")throw"wtf";n.set(new Uint8Array(t[s]),a)}return n}return[].concat.apply([],t.map(function(c){return Array.isArray(c)?c:[].slice.call(c)}))};function WM(t){for(var s=[],a=0,n=t.length+250,i=md(t.length+255),c=0;c<t.length;++c){var d=t.charCodeAt(c);if(d<128)i[a++]=d;else if(d<2048)i[a++]=192|d>>6&31,i[a++]=128|d&63;else if(d>=55296&&d<57344){d=(d&1023)+64;var h=t.charCodeAt(++c)&1023;i[a++]=240|d>>8&7,i[a++]=128|d>>2&63,i[a++]=128|h>>6&15|(d&3)<<4,i[a++]=128|h&63}else i[a++]=224|d>>12&15,i[a++]=128|d>>6&63,i[a++]=128|d&63;a>n&&(s.push(i.slice(0,a)),a=0,i=md(65535),n=65530)}return s.push(i.slice(0,a)),er(s)}var mm=/\u0000/g,Rx=/[\u0001-\u0006]/g;function Tu(t){for(var s="",a=t.length-1;a>=0;)s+=t.charAt(a--);return s}function $i(t,s){var a=""+t;return a.length>=s?a:nn("0",s-a.length)+a}function gj(t,s){var a=""+t;return a.length>=s?a:nn(" ",s-a.length)+a}function fp(t,s){var a=""+t;return a.length>=s?a:a+nn(" ",s-a.length)}function GM(t,s){var a=""+Math.round(t);return a.length>=s?a:nn("0",s-a.length)+a}function qM(t,s){var a=""+t;return a.length>=s?a:nn("0",s-a.length)+a}var a2=Math.pow(2,32);function uu(t,s){if(t>a2||t<-a2)return GM(t,s);var a=Math.round(t);return qM(a,s)}function xp(t,s){return s=s||0,t.length>=7+s&&(t.charCodeAt(s)|32)===103&&(t.charCodeAt(s+1)|32)===101&&(t.charCodeAt(s+2)|32)===110&&(t.charCodeAt(s+3)|32)===101&&(t.charCodeAt(s+4)|32)===114&&(t.charCodeAt(s+5)|32)===97&&(t.charCodeAt(s+6)|32)===108}var n2=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],dv=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];function KM(t){return t||(t={}),t[0]="General",t[1]="0",t[2]="0.00",t[3]="#,##0",t[4]="#,##0.00",t[9]="0%",t[10]="0.00%",t[11]="0.00E+00",t[12]="# ?/?",t[13]="# ??/??",t[14]="m/d/yy",t[15]="d-mmm-yy",t[16]="d-mmm",t[17]="mmm-yy",t[18]="h:mm AM/PM",t[19]="h:mm:ss AM/PM",t[20]="h:mm",t[21]="h:mm:ss",t[22]="m/d/yy h:mm",t[37]="#,##0 ;(#,##0)",t[38]="#,##0 ;[Red](#,##0)",t[39]="#,##0.00;(#,##0.00)",t[40]="#,##0.00;[Red](#,##0.00)",t[45]="mm:ss",t[46]="[h]:mm:ss",t[47]="mmss.0",t[48]="##0.0E+0",t[49]="@",t[56]='"/ "hh""mm""ss" "',t}var on={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"/ "hh""mm""ss" "'},r2={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},YM={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function pp(t,s,a){for(var n=t<0?-1:1,i=t*n,c=0,d=1,h=0,f=1,g=0,p=0,v=Math.floor(i);g<s&&(v=Math.floor(i),h=v*d+c,p=v*g+f,!(i-v<5e-8));)i=1/(i-v),c=d,d=h,f=g,g=p;if(p>s&&(g>s?(p=f,h=c):(p=g,h=d)),!a)return[0,n*h,p];var y=Math.floor(n*h/p);return[y,n*h-y*p,p]}function Lx(t,s,a){if(t>2958465||t<0)return null;var n=t|0,i=Math.floor(86400*(t-n)),c=0,d=[],h={D:n,T:i,u:86400*(t-n)-i,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(h.u)<1e-6&&(h.u=0),s&&s.date1904&&(n+=1462),h.u>.9999&&(h.u=0,++i==86400&&(h.T=i=0,++n,++h.D)),n===60)d=a?[1317,10,29]:[1900,2,29],c=3;else if(n===0)d=a?[1317,8,29]:[1900,1,0],c=6;else{n>60&&--n;var f=new Date(1900,0,1);f.setDate(f.getDate()+n-1),d=[f.getFullYear(),f.getMonth()+1,f.getDate()],c=f.getDay(),n<60&&(c=(c+6)%7),a&&(c=sR(f,d))}return h.y=d[0],h.m=d[1],h.d=d[2],h.S=i%60,i=Math.floor(i/60),h.M=i%60,i=Math.floor(i/60),h.H=i,h.q=c,h}var SC=new Date(1899,11,31,0,0,0),ZM=SC.getTime(),XM=new Date(1900,2,1,0,0,0);function _C(t,s){var a=t.getTime();return s?a-=1461*24*60*60*1e3:t>=XM&&(a+=1440*60*1e3),(a-(ZM+(t.getTimezoneOffset()-SC.getTimezoneOffset())*6e4))/(1440*60*1e3)}function vj(t){return t.indexOf(".")==-1?t:t.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function QM(t){return t.indexOf("E")==-1?t:t.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}function JM(t){var s=t<0?12:11,a=vj(t.toFixed(12));return a.length<=s||(a=t.toPrecision(10),a.length<=s)?a:t.toExponential(5)}function eR(t){var s=vj(t.toFixed(11));return s.length>(t<0?12:11)||s==="0"||s==="-0"?t.toPrecision(6):s}function tR(t){var s=Math.floor(Math.log(Math.abs(t))*Math.LOG10E),a;return s>=-4&&s<=-1?a=t.toPrecision(10+s):Math.abs(s)<=9?a=JM(t):s===10?a=t.toFixed(10).substr(0,12):a=eR(t),vj(QM(a.toUpperCase()))}function hy(t,s){switch(typeof t){case"string":return t;case"boolean":return t?"TRUE":"FALSE";case"number":return(t|0)===t?t.toString(10):tR(t);case"undefined":return"";case"object":if(t==null)return"";if(t instanceof Date)return ac(14,_C(t,s&&s.date1904),s)}throw new Error("unsupported value in General format: "+t)}function sR(t,s){s[0]-=581;var a=t.getDay();return t<60&&(a=(a+6)%7),a}function aR(t,s,a,n){var i="",c=0,d=0,h=a.y,f,g=0;switch(t){case 98:h=a.y+543;case 121:switch(s.length){case 1:case 2:f=h%100,g=2;break;default:f=h%1e4,g=4;break}break;case 109:switch(s.length){case 1:case 2:f=a.m,g=s.length;break;case 3:return dv[a.m-1][1];case 5:return dv[a.m-1][0];default:return dv[a.m-1][2]}break;case 100:switch(s.length){case 1:case 2:f=a.d,g=s.length;break;case 3:return n2[a.q][0];default:return n2[a.q][1]}break;case 104:switch(s.length){case 1:case 2:f=1+(a.H+11)%12,g=s.length;break;default:throw"bad hour format: "+s}break;case 72:switch(s.length){case 1:case 2:f=a.H,g=s.length;break;default:throw"bad hour format: "+s}break;case 77:switch(s.length){case 1:case 2:f=a.M,g=s.length;break;default:throw"bad minute format: "+s}break;case 115:if(s!="s"&&s!="ss"&&s!=".0"&&s!=".00"&&s!=".000")throw"bad second format: "+s;return a.u===0&&(s=="s"||s=="ss")?$i(a.S,s.length):(n>=2?d=n===3?1e3:100:d=n===1?10:1,c=Math.round(d*(a.S+a.u)),c>=60*d&&(c=0),s==="s"?c===0?"0":""+c/d:(i=$i(c,2+n),s==="ss"?i.substr(0,2):"."+i.substr(2,s.length-1)));case 90:switch(s){case"[h]":case"[hh]":f=a.D*24+a.H;break;case"[m]":case"[mm]":f=(a.D*24+a.H)*60+a.M;break;case"[s]":case"[ss]":f=((a.D*24+a.H)*60+a.M)*60+Math.round(a.S+a.u);break;default:throw"bad abstime format: "+s}g=s.length===3?1:2;break;case 101:f=h,g=1;break}var p=g>0?$i(f,g):"";return p}function Jl(t){var s=3;if(t.length<=s)return t;for(var a=t.length%s,n=t.substr(0,a);a!=t.length;a+=s)n+=(n.length>0?",":"")+t.substr(a,s);return n}var CC=/%/g;function nR(t,s,a){var n=s.replace(CC,""),i=s.length-n.length;return Jo(t,n,a*Math.pow(10,2*i))+nn("%",i)}function rR(t,s,a){for(var n=s.length-1;s.charCodeAt(n-1)===44;)--n;return Jo(t,s.substr(0,n),a/Math.pow(10,3*(s.length-n)))}function TC(t,s){var a,n=t.indexOf("E")-t.indexOf(".")-1;if(t.match(/^#+0.0E\+0$/)){if(s==0)return"0.0E+0";if(s<0)return"-"+TC(t,-s);var i=t.indexOf(".");i===-1&&(i=t.indexOf("E"));var c=Math.floor(Math.log(s)*Math.LOG10E)%i;if(c<0&&(c+=i),a=(s/Math.pow(10,c)).toPrecision(n+1+(i+c)%i),a.indexOf("e")===-1){var d=Math.floor(Math.log(s)*Math.LOG10E);for(a.indexOf(".")===-1?a=a.charAt(0)+"."+a.substr(1)+"E+"+(d-a.length+c):a+="E+"+(d-c);a.substr(0,2)==="0.";)a=a.charAt(0)+a.substr(2,i)+"."+a.substr(2+i),a=a.replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");a=a.replace(/\+-/,"-")}a=a.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(h,f,g,p){return f+g+p.substr(0,(i+c)%i)+"."+p.substr(c)+"E"})}else a=s.toExponential(n);return t.match(/E\+00$/)&&a.match(/e[+-]\d$/)&&(a=a.substr(0,a.length-1)+"0"+a.charAt(a.length-1)),t.match(/E\-/)&&a.match(/e\+/)&&(a=a.replace(/e\+/,"e")),a.replace("e","E")}var kC=/# (\?+)( ?)\/( ?)(\d+)/;function iR(t,s,a){var n=parseInt(t[4],10),i=Math.round(s*n),c=Math.floor(i/n),d=i-c*n,h=n;return a+(c===0?"":""+c)+" "+(d===0?nn(" ",t[1].length+1+t[4].length):gj(d,t[1].length)+t[2]+"/"+t[3]+$i(h,t[4].length))}function oR(t,s,a){return a+(s===0?"":""+s)+nn(" ",t[1].length+2+t[4].length)}var EC=/^#*0*\.([0#]+)/,AC=/\).*[0#]/,DC=/\(###\) ###\\?-####/;function Nr(t){for(var s="",a,n=0;n!=t.length;++n)switch(a=t.charCodeAt(n)){case 35:break;case 63:s+=" ";break;case 48:s+="0";break;default:s+=String.fromCharCode(a)}return s}function i2(t,s){var a=Math.pow(10,s);return""+Math.round(t*a)/a}function o2(t,s){var a=t-Math.floor(t),n=Math.pow(10,s);return s<(""+Math.round(a*n)).length?0:Math.round(a*n)}function lR(t,s){return s<(""+Math.round((t-Math.floor(t))*Math.pow(10,s))).length?1:0}function cR(t){return t<2147483647&&t>-2147483648?""+(t>=0?t|0:t-1|0):""+Math.floor(t)}function vi(t,s,a){if(t.charCodeAt(0)===40&&!s.match(AC)){var n=s.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return a>=0?vi("n",n,a):"("+vi("n",n,-a)+")"}if(s.charCodeAt(s.length-1)===44)return rR(t,s,a);if(s.indexOf("%")!==-1)return nR(t,s,a);if(s.indexOf("E")!==-1)return TC(s,a);if(s.charCodeAt(0)===36)return"$"+vi(t,s.substr(s.charAt(1)==" "?2:1),a);var i,c,d,h,f=Math.abs(a),g=a<0?"-":"";if(s.match(/^00+$/))return g+uu(f,s.length);if(s.match(/^[#?]+$/))return i=uu(a,0),i==="0"&&(i=""),i.length>s.length?i:Nr(s.substr(0,s.length-i.length))+i;if(c=s.match(kC))return iR(c,f,g);if(s.match(/^#+0+$/))return g+uu(f,s.length-s.indexOf("0"));if(c=s.match(EC))return i=i2(a,c[1].length).replace(/^([^\.]+)$/,"$1."+Nr(c[1])).replace(/\.$/,"."+Nr(c[1])).replace(/\.(\d*)$/,function(S,b){return"."+b+nn("0",Nr(c[1]).length-b.length)}),s.indexOf("0.")!==-1?i:i.replace(/^0\./,".");if(s=s.replace(/^#+([0.])/,"$1"),c=s.match(/^(0*)\.(#*)$/))return g+i2(f,c[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,c[1].length?"0.":".");if(c=s.match(/^#{1,3},##0(\.?)$/))return g+Jl(uu(f,0));if(c=s.match(/^#,##0\.([#0]*0)$/))return a<0?"-"+vi(t,s,-a):Jl(""+(Math.floor(a)+lR(a,c[1].length)))+"."+$i(o2(a,c[1].length),c[1].length);if(c=s.match(/^#,#*,#0/))return vi(t,s.replace(/^#,#*,/,""),a);if(c=s.match(/^([0#]+)(\\?-([0#]+))+$/))return i=Tu(vi(t,s.replace(/[\\-]/g,""),a)),d=0,Tu(Tu(s.replace(/\\/g,"")).replace(/[0#]/g,function(S){return d<i.length?i.charAt(d++):S==="0"?"0":""}));if(s.match(DC))return i=vi(t,"##########",a),"("+i.substr(0,3)+") "+i.substr(3,3)+"-"+i.substr(6);var p="";if(c=s.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return d=Math.min(c[4].length,7),h=pp(f,Math.pow(10,d)-1,!1),i=""+g,p=Jo("n",c[1],h[1]),p.charAt(p.length-1)==" "&&(p=p.substr(0,p.length-1)+"0"),i+=p+c[2]+"/"+c[3],p=fp(h[2],d),p.length<c[4].length&&(p=Nr(c[4].substr(c[4].length-p.length))+p),i+=p,i;if(c=s.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return d=Math.min(Math.max(c[1].length,c[4].length),7),h=pp(f,Math.pow(10,d)-1,!0),g+(h[0]||(h[1]?"":"0"))+" "+(h[1]?gj(h[1],d)+c[2]+"/"+c[3]+fp(h[2],d):nn(" ",2*d+1+c[2].length+c[3].length));if(c=s.match(/^[#0?]+$/))return i=uu(a,0),s.length<=i.length?i:Nr(s.substr(0,s.length-i.length))+i;if(c=s.match(/^([#0?]+)\.([#0]+)$/)){i=""+a.toFixed(Math.min(c[2].length,10)).replace(/([^0])0+$/,"$1"),d=i.indexOf(".");var v=s.indexOf(".")-d,y=s.length-i.length-v;return Nr(s.substr(0,v)+i+s.substr(s.length-y))}if(c=s.match(/^00,000\.([#0]*0)$/))return d=o2(a,c[1].length),a<0?"-"+vi(t,s,-a):Jl(cR(a)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(S){return"00,"+(S.length<3?$i(0,3-S.length):"")+S})+"."+$i(d,c[1].length);switch(s){case"###,##0.00":return vi(t,"#,##0.00",a);case"###,###":case"##,###":case"#,###":var _=Jl(uu(f,0));return _!=="0"?g+_:"";case"###,###.00":return vi(t,"###,##0.00",a).replace(/^0\./,".");case"#,###.00":return vi(t,"#,##0.00",a).replace(/^0\./,".")}throw new Error("unsupported format |"+s+"|")}function dR(t,s,a){for(var n=s.length-1;s.charCodeAt(n-1)===44;)--n;return Jo(t,s.substr(0,n),a/Math.pow(10,3*(s.length-n)))}function uR(t,s,a){var n=s.replace(CC,""),i=s.length-n.length;return Jo(t,n,a*Math.pow(10,2*i))+nn("%",i)}function PC(t,s){var a,n=t.indexOf("E")-t.indexOf(".")-1;if(t.match(/^#+0.0E\+0$/)){if(s==0)return"0.0E+0";if(s<0)return"-"+PC(t,-s);var i=t.indexOf(".");i===-1&&(i=t.indexOf("E"));var c=Math.floor(Math.log(s)*Math.LOG10E)%i;if(c<0&&(c+=i),a=(s/Math.pow(10,c)).toPrecision(n+1+(i+c)%i),!a.match(/[Ee]/)){var d=Math.floor(Math.log(s)*Math.LOG10E);a.indexOf(".")===-1?a=a.charAt(0)+"."+a.substr(1)+"E+"+(d-a.length+c):a+="E+"+(d-c),a=a.replace(/\+-/,"-")}a=a.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(h,f,g,p){return f+g+p.substr(0,(i+c)%i)+"."+p.substr(c)+"E"})}else a=s.toExponential(n);return t.match(/E\+00$/)&&a.match(/e[+-]\d$/)&&(a=a.substr(0,a.length-1)+"0"+a.charAt(a.length-1)),t.match(/E\-/)&&a.match(/e\+/)&&(a=a.replace(/e\+/,"e")),a.replace("e","E")}function fo(t,s,a){if(t.charCodeAt(0)===40&&!s.match(AC)){var n=s.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return a>=0?fo("n",n,a):"("+fo("n",n,-a)+")"}if(s.charCodeAt(s.length-1)===44)return dR(t,s,a);if(s.indexOf("%")!==-1)return uR(t,s,a);if(s.indexOf("E")!==-1)return PC(s,a);if(s.charCodeAt(0)===36)return"$"+fo(t,s.substr(s.charAt(1)==" "?2:1),a);var i,c,d,h,f=Math.abs(a),g=a<0?"-":"";if(s.match(/^00+$/))return g+$i(f,s.length);if(s.match(/^[#?]+$/))return i=""+a,a===0&&(i=""),i.length>s.length?i:Nr(s.substr(0,s.length-i.length))+i;if(c=s.match(kC))return oR(c,f,g);if(s.match(/^#+0+$/))return g+$i(f,s.length-s.indexOf("0"));if(c=s.match(EC))return i=(""+a).replace(/^([^\.]+)$/,"$1."+Nr(c[1])).replace(/\.$/,"."+Nr(c[1])),i=i.replace(/\.(\d*)$/,function(S,b){return"."+b+nn("0",Nr(c[1]).length-b.length)}),s.indexOf("0.")!==-1?i:i.replace(/^0\./,".");if(s=s.replace(/^#+([0.])/,"$1"),c=s.match(/^(0*)\.(#*)$/))return g+(""+f).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,c[1].length?"0.":".");if(c=s.match(/^#{1,3},##0(\.?)$/))return g+Jl(""+f);if(c=s.match(/^#,##0\.([#0]*0)$/))return a<0?"-"+fo(t,s,-a):Jl(""+a)+"."+nn("0",c[1].length);if(c=s.match(/^#,#*,#0/))return fo(t,s.replace(/^#,#*,/,""),a);if(c=s.match(/^([0#]+)(\\?-([0#]+))+$/))return i=Tu(fo(t,s.replace(/[\\-]/g,""),a)),d=0,Tu(Tu(s.replace(/\\/g,"")).replace(/[0#]/g,function(S){return d<i.length?i.charAt(d++):S==="0"?"0":""}));if(s.match(DC))return i=fo(t,"##########",a),"("+i.substr(0,3)+") "+i.substr(3,3)+"-"+i.substr(6);var p="";if(c=s.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return d=Math.min(c[4].length,7),h=pp(f,Math.pow(10,d)-1,!1),i=""+g,p=Jo("n",c[1],h[1]),p.charAt(p.length-1)==" "&&(p=p.substr(0,p.length-1)+"0"),i+=p+c[2]+"/"+c[3],p=fp(h[2],d),p.length<c[4].length&&(p=Nr(c[4].substr(c[4].length-p.length))+p),i+=p,i;if(c=s.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return d=Math.min(Math.max(c[1].length,c[4].length),7),h=pp(f,Math.pow(10,d)-1,!0),g+(h[0]||(h[1]?"":"0"))+" "+(h[1]?gj(h[1],d)+c[2]+"/"+c[3]+fp(h[2],d):nn(" ",2*d+1+c[2].length+c[3].length));if(c=s.match(/^[#0?]+$/))return i=""+a,s.length<=i.length?i:Nr(s.substr(0,s.length-i.length))+i;if(c=s.match(/^([#0]+)\.([#0]+)$/)){i=""+a.toFixed(Math.min(c[2].length,10)).replace(/([^0])0+$/,"$1"),d=i.indexOf(".");var v=s.indexOf(".")-d,y=s.length-i.length-v;return Nr(s.substr(0,v)+i+s.substr(s.length-y))}if(c=s.match(/^00,000\.([#0]*0)$/))return a<0?"-"+fo(t,s,-a):Jl(""+a).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(S){return"00,"+(S.length<3?$i(0,3-S.length):"")+S})+"."+$i(0,c[1].length);switch(s){case"###,###":case"##,###":case"#,###":var _=Jl(""+f);return _!=="0"?g+_:"";default:if(s.match(/\.[0#?]*$/))return fo(t,s.slice(0,s.lastIndexOf(".")),a)+Nr(s.slice(s.lastIndexOf(".")))}throw new Error("unsupported format |"+s+"|")}function Jo(t,s,a){return(a|0)===a?fo(t,s,a):vi(t,s,a)}function hR(t){for(var s=[],a=!1,n=0,i=0;n<t.length;++n)switch(t.charCodeAt(n)){case 34:a=!a;break;case 95:case 42:case 92:++n;break;case 59:s[s.length]=t.substr(i,n-i),i=n+1}if(s[s.length]=t.substr(i),a===!0)throw new Error("Format |"+t+"| unterminated string ");return s}var OC=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function MC(t){for(var s=0,a="",n="";s<t.length;)switch(a=t.charAt(s)){case"G":xp(t,s)&&(s+=6),s++;break;case'"':for(;t.charCodeAt(++s)!==34&&s<t.length;);++s;break;case"\\":s+=2;break;case"_":s+=2;break;case"@":++s;break;case"B":case"b":if(t.charAt(s+1)==="1"||t.charAt(s+1)==="2")return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"":if(t.substr(s,3).toUpperCase()==="A/P"||t.substr(s,5).toUpperCase()==="AM/PM"||t.substr(s,5).toUpperCase()==="/")return!0;++s;break;case"[":for(n=a;t.charAt(s++)!=="]"&&s<t.length;)n+=t.charAt(s);if(n.match(OC))return!0;break;case".":case"0":case"#":for(;s<t.length&&("0#?.,E+-%".indexOf(a=t.charAt(++s))>-1||a=="\\"&&t.charAt(s+1)=="-"&&"0#".indexOf(t.charAt(s+2))>-1););break;case"?":for(;t.charAt(++s)===a;);break;case"*":++s,(t.charAt(s)==" "||t.charAt(s)=="*")&&++s;break;case"(":case")":++s;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;s<t.length&&"0123456789".indexOf(t.charAt(++s))>-1;);break;case" ":++s;break;default:++s;break}return!1}function mR(t,s,a,n){for(var i=[],c="",d=0,h="",f="t",g,p,v,y="H";d<t.length;)switch(h=t.charAt(d)){case"G":if(!xp(t,d))throw new Error("unrecognized character "+h+" in "+t);i[i.length]={t:"G",v:"General"},d+=7;break;case'"':for(c="";(v=t.charCodeAt(++d))!==34&&d<t.length;)c+=String.fromCharCode(v);i[i.length]={t:"t",v:c},++d;break;case"\\":var _=t.charAt(++d),S=_==="("||_===")"?_:"t";i[i.length]={t:S,v:_},++d;break;case"_":i[i.length]={t:"t",v:" "},d+=2;break;case"@":i[i.length]={t:"T",v:s},++d;break;case"B":case"b":if(t.charAt(d+1)==="1"||t.charAt(d+1)==="2"){if(g==null&&(g=Lx(s,a,t.charAt(d+1)==="2"),g==null))return"";i[i.length]={t:"X",v:t.substr(d,2)},f=h,d+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":h=h.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(s<0||g==null&&(g=Lx(s,a),g==null))return"";for(c=h;++d<t.length&&t.charAt(d).toLowerCase()===h;)c+=h;h==="m"&&f.toLowerCase()==="h"&&(h="M"),h==="h"&&(h=y),i[i.length]={t:h,v:c},f=h;break;case"A":case"a":case"":var b={t:h,v:h};if(g==null&&(g=Lx(s,a)),t.substr(d,3).toUpperCase()==="A/P"?(g!=null&&(b.v=g.H>=12?"P":"A"),b.t="T",y="h",d+=3):t.substr(d,5).toUpperCase()==="AM/PM"?(g!=null&&(b.v=g.H>=12?"PM":"AM"),b.t="T",d+=5,y="h"):t.substr(d,5).toUpperCase()==="/"?(g!=null&&(b.v=g.H>=12?"":""),b.t="T",d+=5,y="h"):(b.t="t",++d),g==null&&b.t==="T")return"";i[i.length]=b,f=h;break;case"[":for(c=h;t.charAt(d++)!=="]"&&d<t.length;)c+=t.charAt(d);if(c.slice(-1)!=="]")throw'unterminated "[" block: |'+c+"|";if(c.match(OC)){if(g==null&&(g=Lx(s,a),g==null))return"";i[i.length]={t:"Z",v:c.toLowerCase()},f=c.charAt(1)}else c.indexOf("$")>-1&&(c=(c.match(/\$([^-\[\]]*)/)||[])[1]||"$",MC(t)||(i[i.length]={t:"t",v:c}));break;case".":if(g!=null){for(c=h;++d<t.length&&(h=t.charAt(d))==="0";)c+=h;i[i.length]={t:"s",v:c};break}case"0":case"#":for(c=h;++d<t.length&&"0#?.,E+-%".indexOf(h=t.charAt(d))>-1;)c+=h;i[i.length]={t:"n",v:c};break;case"?":for(c=h;t.charAt(++d)===h;)c+=h;i[i.length]={t:h,v:c},f=h;break;case"*":++d,(t.charAt(d)==" "||t.charAt(d)=="*")&&++d;break;case"(":case")":i[i.length]={t:n===1?"t":h,v:h},++d;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(c=h;d<t.length&&"0123456789".indexOf(t.charAt(++d))>-1;)c+=t.charAt(d);i[i.length]={t:"D",v:c};break;case" ":i[i.length]={t:h,v:h},++d;break;case"$":i[i.length]={t:"t",v:"$"},++d;break;default:if(",$-+/():!^&'~{}<>=acfijklopqrtuvwxzP".indexOf(h)===-1)throw new Error("unrecognized character "+h+" in "+t);i[i.length]={t:"t",v:h},++d;break}var T=0,E=0,A;for(d=i.length-1,f="t";d>=0;--d)switch(i[d].t){case"h":case"H":i[d].t=y,f="h",T<1&&(T=1);break;case"s":(A=i[d].v.match(/\.0+$/))&&(E=Math.max(E,A[0].length-1)),T<3&&(T=3);case"d":case"y":case"M":case"e":f=i[d].t;break;case"m":f==="s"&&(i[d].t="M",T<2&&(T=2));break;case"X":break;case"Z":T<1&&i[d].v.match(/[Hh]/)&&(T=1),T<2&&i[d].v.match(/[Mm]/)&&(T=2),T<3&&i[d].v.match(/[Ss]/)&&(T=3)}switch(T){case 0:break;case 1:g.u>=.5&&(g.u=0,++g.S),g.S>=60&&(g.S=0,++g.M),g.M>=60&&(g.M=0,++g.H);break;case 2:g.u>=.5&&(g.u=0,++g.S),g.S>=60&&(g.S=0,++g.M);break}var O="",Q;for(d=0;d<i.length;++d)switch(i[d].t){case"t":case"T":case" ":case"D":break;case"X":i[d].v="",i[d].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":i[d].v=aR(i[d].t.charCodeAt(0),i[d].v,g,E),i[d].t="t";break;case"n":case"?":for(Q=d+1;i[Q]!=null&&((h=i[Q].t)==="?"||h==="D"||(h===" "||h==="t")&&i[Q+1]!=null&&(i[Q+1].t==="?"||i[Q+1].t==="t"&&i[Q+1].v==="/")||i[d].t==="("&&(h===" "||h==="n"||h===")")||h==="t"&&(i[Q].v==="/"||i[Q].v===" "&&i[Q+1]!=null&&i[Q+1].t=="?"));)i[d].v+=i[Q].v,i[Q]={v:"",t:";"},++Q;O+=i[d].v,d=Q-1;break;case"G":i[d].t="t",i[d].v=hy(s,a);break}var q="",U,D;if(O.length>0){O.charCodeAt(0)==40?(U=s<0&&O.charCodeAt(0)===45?-s:s,D=Jo("n",O,U)):(U=s<0&&n>1?-s:s,D=Jo("n",O,U),U<0&&i[0]&&i[0].t=="t"&&(D=D.substr(1),i[0].v="-"+i[0].v)),Q=D.length-1;var M=i.length;for(d=0;d<i.length;++d)if(i[d]!=null&&i[d].t!="t"&&i[d].v.indexOf(".")>-1){M=d;break}var P=i.length;if(M===i.length&&D.indexOf("E")===-1){for(d=i.length-1;d>=0;--d)i[d]==null||"n?".indexOf(i[d].t)===-1||(Q>=i[d].v.length-1?(Q-=i[d].v.length,i[d].v=D.substr(Q+1,i[d].v.length)):Q<0?i[d].v="":(i[d].v=D.substr(0,Q+1),Q=-1),i[d].t="t",P=d);Q>=0&&P<i.length&&(i[P].v=D.substr(0,Q+1)+i[P].v)}else if(M!==i.length&&D.indexOf("E")===-1){for(Q=D.indexOf(".")-1,d=M;d>=0;--d)if(!(i[d]==null||"n?".indexOf(i[d].t)===-1)){for(p=i[d].v.indexOf(".")>-1&&d===M?i[d].v.indexOf(".")-1:i[d].v.length-1,q=i[d].v.substr(p+1);p>=0;--p)Q>=0&&(i[d].v.charAt(p)==="0"||i[d].v.charAt(p)==="#")&&(q=D.charAt(Q--)+q);i[d].v=q,i[d].t="t",P=d}for(Q>=0&&P<i.length&&(i[P].v=D.substr(0,Q+1)+i[P].v),Q=D.indexOf(".")+1,d=M;d<i.length;++d)if(!(i[d]==null||"n?(".indexOf(i[d].t)===-1&&d!==M)){for(p=i[d].v.indexOf(".")>-1&&d===M?i[d].v.indexOf(".")+1:0,q=i[d].v.substr(0,p);p<i[d].v.length;++p)Q<D.length&&(q+=D.charAt(Q++));i[d].v=q,i[d].t="t",P=d}}}for(d=0;d<i.length;++d)i[d]!=null&&"n?".indexOf(i[d].t)>-1&&(U=n>1&&s<0&&d>0&&i[d-1].v==="-"?-s:s,i[d].v=Jo(i[d].t,i[d].v,U),i[d].t="t");var G="";for(d=0;d!==i.length;++d)i[d]!=null&&(G+=i[d].v);return G}var l2=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function c2(t,s){if(s==null)return!1;var a=parseFloat(s[2]);switch(s[1]){case"=":if(t==a)return!0;break;case">":if(t>a)return!0;break;case"<":if(t<a)return!0;break;case"<>":if(t!=a)return!0;break;case">=":if(t>=a)return!0;break;case"<=":if(t<=a)return!0;break}return!1}function fR(t,s){var a=hR(t),n=a.length,i=a[n-1].indexOf("@");if(n<4&&i>-1&&--n,a.length>4)throw new Error("cannot find right format for |"+a.join("|")+"|");if(typeof s!="number")return[4,a.length===4||i>-1?a[a.length-1]:"@"];switch(a.length){case 1:a=i>-1?["General","General","General",a[0]]:[a[0],a[0],a[0],"@"];break;case 2:a=i>-1?[a[0],a[0],a[0],a[1]]:[a[0],a[1],a[0],"@"];break;case 3:a=i>-1?[a[0],a[1],a[0],a[2]]:[a[0],a[1],a[2],"@"];break}var c=s>0?a[0]:s<0?a[1]:a[2];if(a[0].indexOf("[")===-1&&a[1].indexOf("[")===-1)return[n,c];if(a[0].match(/\[[=<>]/)!=null||a[1].match(/\[[=<>]/)!=null){var d=a[0].match(l2),h=a[1].match(l2);return c2(s,d)?[n,a[0]]:c2(s,h)?[n,a[1]]:[n,a[d!=null&&h!=null?2:1]]}return[n,c]}function ac(t,s,a){a==null&&(a={});var n="";switch(typeof t){case"string":t=="m/d/yy"&&a.dateNF?n=a.dateNF:n=t;break;case"number":t==14&&a.dateNF?n=a.dateNF:n=(a.table!=null?a.table:on)[t],n==null&&(n=a.table&&a.table[r2[t]]||on[r2[t]]),n==null&&(n=YM[t]||"General");break}if(xp(n,0))return hy(s,a);s instanceof Date&&(s=_C(s,a.date1904));var i=fR(n,s);if(xp(i[1]))return hy(s,a);if(s===!0)s="TRUE";else if(s===!1)s="FALSE";else if(s===""||s==null)return"";return mR(i[1],s,a,i[0])}function RC(t,s){if(typeof s!="number"){s=+s||-1;for(var a=0;a<392;++a){if(on[a]==null){s<0&&(s=a);continue}if(on[a]==t){s=a;break}}s<0&&(s=391)}return on[s]=t,s}function Kp(t){for(var s=0;s!=392;++s)t[s]!==void 0&&RC(t[s],s)}function Yp(){on=KM()}var LC=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;function xR(t){var s=typeof t=="number"?on[t]:t;return s=s.replace(LC,"(\\d+)"),new RegExp("^"+s+"$")}function pR(t,s,a){var n=-1,i=-1,c=-1,d=-1,h=-1,f=-1;(s.match(LC)||[]).forEach(function(v,y){var _=parseInt(a[y+1],10);switch(v.toLowerCase().charAt(0)){case"y":n=_;break;case"d":c=_;break;case"h":d=_;break;case"s":f=_;break;case"m":d>=0?h=_:i=_;break}}),f>=0&&h==-1&&i>=0&&(h=i,i=-1);var g=(""+(n>=0?n:new Date().getFullYear())).slice(-4)+"-"+("00"+(i>=1?i:1)).slice(-2)+"-"+("00"+(c>=1?c:1)).slice(-2);g.length==7&&(g="0"+g),g.length==8&&(g="20"+g);var p=("00"+(d>=0?d:0)).slice(-2)+":"+("00"+(h>=0?h:0)).slice(-2)+":"+("00"+(f>=0?f:0)).slice(-2);return d==-1&&h==-1&&f==-1?g:n==-1&&i==-1&&c==-1?p:g+"T"+p}var gR=(function(){var t={};t.version="1.2.0";function s(){for(var D=0,M=new Array(256),P=0;P!=256;++P)D=P,D=D&1?-306674912^D>>>1:D>>>1,D=D&1?-306674912^D>>>1:D>>>1,D=D&1?-306674912^D>>>1:D>>>1,D=D&1?-306674912^D>>>1:D>>>1,D=D&1?-306674912^D>>>1:D>>>1,D=D&1?-306674912^D>>>1:D>>>1,D=D&1?-306674912^D>>>1:D>>>1,D=D&1?-306674912^D>>>1:D>>>1,M[P]=D;return typeof Int32Array<"u"?new Int32Array(M):M}var a=s();function n(D){var M=0,P=0,G=0,K=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(G=0;G!=256;++G)K[G]=D[G];for(G=0;G!=256;++G)for(P=D[G],M=256+G;M<4096;M+=256)P=K[M]=P>>>8^D[P&255];var z=[];for(G=1;G!=16;++G)z[G-1]=typeof Int32Array<"u"?K.subarray(G*256,G*256+256):K.slice(G*256,G*256+256);return z}var i=n(a),c=i[0],d=i[1],h=i[2],f=i[3],g=i[4],p=i[5],v=i[6],y=i[7],_=i[8],S=i[9],b=i[10],T=i[11],E=i[12],A=i[13],O=i[14];function Q(D,M){for(var P=M^-1,G=0,K=D.length;G<K;)P=P>>>8^a[(P^D.charCodeAt(G++))&255];return~P}function q(D,M){for(var P=M^-1,G=D.length-15,K=0;K<G;)P=O[D[K++]^P&255]^A[D[K++]^P>>8&255]^E[D[K++]^P>>16&255]^T[D[K++]^P>>>24]^b[D[K++]]^S[D[K++]]^_[D[K++]]^y[D[K++]]^v[D[K++]]^p[D[K++]]^g[D[K++]]^f[D[K++]]^h[D[K++]]^d[D[K++]]^c[D[K++]]^a[D[K++]];for(G+=15;K<G;)P=P>>>8^a[(P^D[K++])&255];return~P}function U(D,M){for(var P=M^-1,G=0,K=D.length,z=0,J=0;G<K;)z=D.charCodeAt(G++),z<128?P=P>>>8^a[(P^z)&255]:z<2048?(P=P>>>8^a[(P^(192|z>>6&31))&255],P=P>>>8^a[(P^(128|z&63))&255]):z>=55296&&z<57344?(z=(z&1023)+64,J=D.charCodeAt(G++)&1023,P=P>>>8^a[(P^(240|z>>8&7))&255],P=P>>>8^a[(P^(128|z>>2&63))&255],P=P>>>8^a[(P^(128|J>>6&15|(z&3)<<4))&255],P=P>>>8^a[(P^(128|J&63))&255]):(P=P>>>8^a[(P^(224|z>>12&15))&255],P=P>>>8^a[(P^(128|z>>6&63))&255],P=P>>>8^a[(P^(128|z&63))&255]);return~P}return t.table=a,t.bstr=Q,t.buf=q,t.str=U,t})(),ya=(function(){var s={};s.version="1.2.1";function a(ne,ye){for(var ve=ne.split("/"),B=ye.split("/"),fe=0,je=0,Ue=Math.min(ve.length,B.length);fe<Ue;++fe){if(je=ve[fe].length-B[fe].length)return je;if(ve[fe]!=B[fe])return ve[fe]<B[fe]?-1:1}return ve.length-B.length}function n(ne){if(ne.charAt(ne.length-1)=="/")return ne.slice(0,-1).indexOf("/")===-1?ne:n(ne.slice(0,-1));var ye=ne.lastIndexOf("/");return ye===-1?ne:ne.slice(0,ye+1)}function i(ne){if(ne.charAt(ne.length-1)=="/")return i(ne.slice(0,-1));var ye=ne.lastIndexOf("/");return ye===-1?ne:ne.slice(ye+1)}function c(ne,ye){typeof ye=="string"&&(ye=new Date(ye));var ve=ye.getHours();ve=ve<<6|ye.getMinutes(),ve=ve<<5|ye.getSeconds()>>>1,ne.write_shift(2,ve);var B=ye.getFullYear()-1980;B=B<<4|ye.getMonth()+1,B=B<<5|ye.getDate(),ne.write_shift(2,B)}function d(ne){var ye=ne.read_shift(2)&65535,ve=ne.read_shift(2)&65535,B=new Date,fe=ve&31;ve>>>=5;var je=ve&15;ve>>>=4,B.setMilliseconds(0),B.setFullYear(ve+1980),B.setMonth(je-1),B.setDate(fe);var Ue=ye&31;ye>>>=5;var Je=ye&63;return ye>>>=6,B.setHours(ye),B.setMinutes(Je),B.setSeconds(Ue<<1),B}function h(ne){ti(ne,0);for(var ye={},ve=0;ne.l<=ne.length-4;){var B=ne.read_shift(2),fe=ne.read_shift(2),je=ne.l+fe,Ue={};switch(B){case 21589:ve=ne.read_shift(1),ve&1&&(Ue.mtime=ne.read_shift(4)),fe>5&&(ve&2&&(Ue.atime=ne.read_shift(4)),ve&4&&(Ue.ctime=ne.read_shift(4))),Ue.mtime&&(Ue.mt=new Date(Ue.mtime*1e3));break}ne.l=je,ye[B]=Ue}return ye}var f;function g(){return f||(f={})}function p(ne,ye){if(ne[0]==80&&ne[1]==75)return Ot(ne,ye);if((ne[0]|32)==109&&(ne[1]|32)==105)return Re(ne,ye);if(ne.length<512)throw new Error("CFB file size "+ne.length+" < 512");var ve=3,B=512,fe=0,je=0,Ue=0,Je=0,Ve=0,$e=[],We=ne.slice(0,512);ti(We,0);var pt=v(We);switch(ve=pt[0],ve){case 3:B=512;break;case 4:B=4096;break;case 0:if(pt[1]==0)return Ot(ne,ye);default:throw new Error("Major Version: Expected 3 or 4 saw "+ve)}B!==512&&(We=ne.slice(0,B),ti(We,28));var be=ne.slice(0,B);y(We,ve);var st=We.read_shift(4,"i");if(ve===3&&st!==0)throw new Error("# Directory Sectors: Expected 0 saw "+st);We.l+=4,Ue=We.read_shift(4,"i"),We.l+=4,We.chk("00100000","Mini Stream Cutoff Size: "),Je=We.read_shift(4,"i"),fe=We.read_shift(4,"i"),Ve=We.read_shift(4,"i"),je=We.read_shift(4,"i");for(var Pe=-1,dt=0;dt<109&&(Pe=We.read_shift(4,"i"),!(Pe<0));++dt)$e[dt]=Pe;var gt=_(ne,B);T(Ve,je,gt,B,$e);var Ft=A(gt,Ue,$e,B);Ft[Ue].name="!Directory",fe>0&&Je!==J&&(Ft[Je].name="!MiniFAT"),Ft[$e[0]].name="!FAT",Ft.fat_addrs=$e,Ft.ssz=B;var lt={},ss=[],xn=[],Rn=[];O(Ue,Ft,gt,ss,fe,lt,xn,Je),S(xn,Rn,ss),ss.shift();var $n={FileIndex:xn,FullPaths:Rn};return ye&&ye.raw&&($n.raw={header:be,sectors:gt}),$n}function v(ne){if(ne[ne.l]==80&&ne[ne.l+1]==75)return[0,0];ne.chk(W,"Header Signature: "),ne.l+=16;var ye=ne.read_shift(2,"u");return[ne.read_shift(2,"u"),ye]}function y(ne,ye){var ve=9;switch(ne.l+=2,ve=ne.read_shift(2)){case 9:if(ye!=3)throw new Error("Sector Shift: Expected 9 saw "+ve);break;case 12:if(ye!=4)throw new Error("Sector Shift: Expected 12 saw "+ve);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+ve)}ne.chk("0600","Mini Sector Shift: "),ne.chk("000000000000","Reserved: ")}function _(ne,ye){for(var ve=Math.ceil(ne.length/ye)-1,B=[],fe=1;fe<ve;++fe)B[fe-1]=ne.slice(fe*ye,(fe+1)*ye);return B[ve-1]=ne.slice(ve*ye),B}function S(ne,ye,ve){for(var B=0,fe=0,je=0,Ue=0,Je=0,Ve=ve.length,$e=[],We=[];B<Ve;++B)$e[B]=We[B]=B,ye[B]=ve[B];for(;Je<We.length;++Je)B=We[Je],fe=ne[B].L,je=ne[B].R,Ue=ne[B].C,$e[B]===B&&(fe!==-1&&$e[fe]!==fe&&($e[B]=$e[fe]),je!==-1&&$e[je]!==je&&($e[B]=$e[je])),Ue!==-1&&($e[Ue]=B),fe!==-1&&B!=$e[B]&&($e[fe]=$e[B],We.lastIndexOf(fe)<Je&&We.push(fe)),je!==-1&&B!=$e[B]&&($e[je]=$e[B],We.lastIndexOf(je)<Je&&We.push(je));for(B=1;B<Ve;++B)$e[B]===B&&(je!==-1&&$e[je]!==je?$e[B]=$e[je]:fe!==-1&&$e[fe]!==fe&&($e[B]=$e[fe]));for(B=1;B<Ve;++B)if(ne[B].type!==0){if(Je=B,Je!=$e[Je])do Je=$e[Je],ye[B]=ye[Je]+"/"+ye[B];while(Je!==0&&$e[Je]!==-1&&Je!=$e[Je]);$e[B]=-1}for(ye[0]+="/",B=1;B<Ve;++B)ne[B].type!==2&&(ye[B]+="/")}function b(ne,ye,ve){for(var B=ne.start,fe=ne.size,je=[],Ue=B;ve&&fe>0&&Ue>=0;)je.push(ye.slice(Ue*z,Ue*z+z)),fe-=z,Ue=Zc(ve,Ue*4);return je.length===0?nt(0):er(je).slice(0,ne.size)}function T(ne,ye,ve,B,fe){var je=J;if(ne===J){if(ye!==0)throw new Error("DIFAT chain shorter than expected")}else if(ne!==-1){var Ue=ve[ne],Je=(B>>>2)-1;if(!Ue)return;for(var Ve=0;Ve<Je&&(je=Zc(Ue,Ve*4))!==J;++Ve)fe.push(je);T(Zc(Ue,B-4),ye-1,ve,B,fe)}}function E(ne,ye,ve,B,fe){var je=[],Ue=[];fe||(fe=[]);var Je=B-1,Ve=0,$e=0;for(Ve=ye;Ve>=0;){fe[Ve]=!0,je[je.length]=Ve,Ue.push(ne[Ve]);var We=ve[Math.floor(Ve*4/B)];if($e=Ve*4&Je,B<4+$e)throw new Error("FAT boundary crossed: "+Ve+" 4 "+B);if(!ne[We])break;Ve=Zc(ne[We],$e)}return{nodes:je,data:g2([Ue])}}function A(ne,ye,ve,B){var fe=ne.length,je=[],Ue=[],Je=[],Ve=[],$e=B-1,We=0,pt=0,be=0,st=0;for(We=0;We<fe;++We)if(Je=[],be=We+ye,be>=fe&&(be-=fe),!Ue[be]){Ve=[];var Pe=[];for(pt=be;pt>=0;){Pe[pt]=!0,Ue[pt]=!0,Je[Je.length]=pt,Ve.push(ne[pt]);var dt=ve[Math.floor(pt*4/B)];if(st=pt*4&$e,B<4+st)throw new Error("FAT boundary crossed: "+pt+" 4 "+B);if(!ne[dt]||(pt=Zc(ne[dt],st),Pe[pt]))break}je[be]={nodes:Je,data:g2([Ve])}}return je}function O(ne,ye,ve,B,fe,je,Ue,Je){for(var Ve=0,$e=B.length?2:0,We=ye[ne].data,pt=0,be=0,st;pt<We.length;pt+=128){var Pe=We.slice(pt,pt+128);ti(Pe,64),be=Pe.read_shift(2),st=bj(Pe,0,be-$e),B.push(st);var dt={name:st,type:Pe.read_shift(1),color:Pe.read_shift(1),L:Pe.read_shift(4,"i"),R:Pe.read_shift(4,"i"),C:Pe.read_shift(4,"i"),clsid:Pe.read_shift(16),state:Pe.read_shift(4,"i"),start:0,size:0},gt=Pe.read_shift(2)+Pe.read_shift(2)+Pe.read_shift(2)+Pe.read_shift(2);gt!==0&&(dt.ct=Q(Pe,Pe.l-8));var Ft=Pe.read_shift(2)+Pe.read_shift(2)+Pe.read_shift(2)+Pe.read_shift(2);Ft!==0&&(dt.mt=Q(Pe,Pe.l-8)),dt.start=Pe.read_shift(4,"i"),dt.size=Pe.read_shift(4,"i"),dt.size<0&&dt.start<0&&(dt.size=dt.type=0,dt.start=J,dt.name=""),dt.type===5?(Ve=dt.start,fe>0&&Ve!==J&&(ye[Ve].name="!StreamData")):dt.size>=4096?(dt.storage="fat",ye[dt.start]===void 0&&(ye[dt.start]=E(ve,dt.start,ye.fat_addrs,ye.ssz)),ye[dt.start].name=dt.name,dt.content=ye[dt.start].data.slice(0,dt.size)):(dt.storage="minifat",dt.size<0?dt.size=0:Ve!==J&&dt.start!==J&&ye[Ve]&&(dt.content=b(dt,ye[Ve].data,(ye[Je]||{}).data))),dt.content&&ti(dt.content,0),je[st]=dt,Ue.push(dt)}}function Q(ne,ye){return new Date((ai(ne,ye+4)/1e7*Math.pow(2,32)+ai(ne,ye)/1e7-11644473600)*1e3)}function q(ne,ye){return g(),p(f.readFileSync(ne),ye)}function U(ne,ye){var ve=ye&&ye.type;switch(ve||sa&&Buffer.isBuffer(ne)&&(ve="buffer"),ve||"base64"){case"file":return q(ne,ye);case"base64":return p(Vi(al(ne)),ye);case"binary":return p(Vi(ne),ye)}return p(ne,ye)}function D(ne,ye){var ve=ye||{},B=ve.root||"Root Entry";if(ne.FullPaths||(ne.FullPaths=[]),ne.FileIndex||(ne.FileIndex=[]),ne.FullPaths.length!==ne.FileIndex.length)throw new Error("inconsistent CFB structure");ne.FullPaths.length===0&&(ne.FullPaths[0]=B+"/",ne.FileIndex[0]={name:B,type:5}),ve.CLSID&&(ne.FileIndex[0].clsid=ve.CLSID),M(ne)}function M(ne){var ye="Sh33tJ5";if(!ya.find(ne,"/"+ye)){var ve=nt(4);ve[0]=55,ve[1]=ve[3]=50,ve[2]=54,ne.FileIndex.push({name:ye,type:2,content:ve,size:4,L:69,R:69,C:69}),ne.FullPaths.push(ne.FullPaths[0]+ye),P(ne)}}function P(ne,ye){D(ne);for(var ve=!1,B=!1,fe=ne.FullPaths.length-1;fe>=0;--fe){var je=ne.FileIndex[fe];switch(je.type){case 0:B?ve=!0:(ne.FileIndex.pop(),ne.FullPaths.pop());break;case 1:case 2:case 5:B=!0,isNaN(je.R*je.L*je.C)&&(ve=!0),je.R>-1&&je.L>-1&&je.R==je.L&&(ve=!0);break;default:ve=!0;break}}if(!(!ve&&!ye)){var Ue=new Date(1987,1,19),Je=0,Ve=Object.create?Object.create(null):{},$e=[];for(fe=0;fe<ne.FullPaths.length;++fe)Ve[ne.FullPaths[fe]]=!0,ne.FileIndex[fe].type!==0&&$e.push([ne.FullPaths[fe],ne.FileIndex[fe]]);for(fe=0;fe<$e.length;++fe){var We=n($e[fe][0]);B=Ve[We],B||($e.push([We,{name:i(We).replace("/",""),type:1,clsid:V,ct:Ue,mt:Ue,content:null}]),Ve[We]=!0)}for($e.sort(function(st,Pe){return a(st[0],Pe[0])}),ne.FullPaths=[],ne.FileIndex=[],fe=0;fe<$e.length;++fe)ne.FullPaths[fe]=$e[fe][0],ne.FileIndex[fe]=$e[fe][1];for(fe=0;fe<$e.length;++fe){var pt=ne.FileIndex[fe],be=ne.FullPaths[fe];if(pt.name=i(be).replace("/",""),pt.L=pt.R=pt.C=-(pt.color=1),pt.size=pt.content?pt.content.length:0,pt.start=0,pt.clsid=pt.clsid||V,fe===0)pt.C=$e.length>1?1:-1,pt.size=0,pt.type=5;else if(be.slice(-1)=="/"){for(Je=fe+1;Je<$e.length&&n(ne.FullPaths[Je])!=be;++Je);for(pt.C=Je>=$e.length?-1:Je,Je=fe+1;Je<$e.length&&n(ne.FullPaths[Je])!=n(be);++Je);pt.R=Je>=$e.length?-1:Je,pt.type=1}else n(ne.FullPaths[fe+1]||"")==n(be)&&(pt.R=fe+1),pt.type=2}}}function G(ne,ye){var ve=ye||{};if(ve.fileType=="mad")return tt(ne,ve);switch(P(ne),ve.fileType){case"zip":return js(ne,ve)}var B=(function(st){for(var Pe=0,dt=0,gt=0;gt<st.FileIndex.length;++gt){var Ft=st.FileIndex[gt];if(Ft.content){var lt=Ft.content.length;lt>0&&(lt<4096?Pe+=lt+63>>6:dt+=lt+511>>9)}}for(var ss=st.FullPaths.length+3>>2,xn=Pe+7>>3,Rn=Pe+127>>7,$n=xn+dt+ss+Rn,Wn=$n+127>>7,Ln=Wn<=109?0:Math.ceil((Wn-109)/127);$n+Wn+Ln+127>>7>Wn;)Ln=++Wn<=109?0:Math.ceil((Wn-109)/127);var ds=[1,Ln,Wn,Rn,ss,dt,Pe,0];return st.FileIndex[0].size=Pe<<6,ds[7]=(st.FileIndex[0].start=ds[0]+ds[1]+ds[2]+ds[3]+ds[4]+ds[5])+(ds[6]+7>>3),ds})(ne),fe=nt(B[7]<<9),je=0,Ue=0;{for(je=0;je<8;++je)fe.write_shift(1,he[je]);for(je=0;je<8;++je)fe.write_shift(2,0);for(fe.write_shift(2,62),fe.write_shift(2,3),fe.write_shift(2,65534),fe.write_shift(2,9),fe.write_shift(2,6),je=0;je<3;++je)fe.write_shift(2,0);for(fe.write_shift(4,0),fe.write_shift(4,B[2]),fe.write_shift(4,B[0]+B[1]+B[2]+B[3]-1),fe.write_shift(4,0),fe.write_shift(4,4096),fe.write_shift(4,B[3]?B[0]+B[1]+B[2]-1:J),fe.write_shift(4,B[3]),fe.write_shift(-4,B[1]?B[0]-1:J),fe.write_shift(4,B[1]),je=0;je<109;++je)fe.write_shift(-4,je<B[2]?B[1]+je:-1)}if(B[1])for(Ue=0;Ue<B[1];++Ue){for(;je<236+Ue*127;++je)fe.write_shift(-4,je<B[2]?B[1]+je:-1);fe.write_shift(-4,Ue===B[1]-1?J:Ue+1)}var Je=function(st){for(Ue+=st;je<Ue-1;++je)fe.write_shift(-4,je+1);st&&(++je,fe.write_shift(-4,J))};for(Ue=je=0,Ue+=B[1];je<Ue;++je)fe.write_shift(-4,ae.DIFSECT);for(Ue+=B[2];je<Ue;++je)fe.write_shift(-4,ae.FATSECT);Je(B[3]),Je(B[4]);for(var Ve=0,$e=0,We=ne.FileIndex[0];Ve<ne.FileIndex.length;++Ve)We=ne.FileIndex[Ve],We.content&&($e=We.content.length,!($e<4096)&&(We.start=Ue,Je($e+511>>9)));for(Je(B[6]+7>>3);fe.l&511;)fe.write_shift(-4,ae.ENDOFCHAIN);for(Ue=je=0,Ve=0;Ve<ne.FileIndex.length;++Ve)We=ne.FileIndex[Ve],We.content&&($e=We.content.length,!(!$e||$e>=4096)&&(We.start=Ue,Je($e+63>>6)));for(;fe.l&511;)fe.write_shift(-4,ae.ENDOFCHAIN);for(je=0;je<B[4]<<2;++je){var pt=ne.FullPaths[je];if(!pt||pt.length===0){for(Ve=0;Ve<17;++Ve)fe.write_shift(4,0);for(Ve=0;Ve<3;++Ve)fe.write_shift(4,-1);for(Ve=0;Ve<12;++Ve)fe.write_shift(4,0);continue}We=ne.FileIndex[je],je===0&&(We.start=We.size?We.start-1:J);var be=je===0&&ve.root||We.name;if($e=2*(be.length+1),fe.write_shift(64,be,"utf16le"),fe.write_shift(2,$e),fe.write_shift(1,We.type),fe.write_shift(1,We.color),fe.write_shift(-4,We.L),fe.write_shift(-4,We.R),fe.write_shift(-4,We.C),We.clsid)fe.write_shift(16,We.clsid,"hex");else for(Ve=0;Ve<4;++Ve)fe.write_shift(4,0);fe.write_shift(4,We.state||0),fe.write_shift(4,0),fe.write_shift(4,0),fe.write_shift(4,0),fe.write_shift(4,0),fe.write_shift(4,We.start),fe.write_shift(4,We.size),fe.write_shift(4,0)}for(je=1;je<ne.FileIndex.length;++je)if(We=ne.FileIndex[je],We.size>=4096)if(fe.l=We.start+1<<9,sa&&Buffer.isBuffer(We.content))We.content.copy(fe,fe.l,0,We.size),fe.l+=We.size+511&-512;else{for(Ve=0;Ve<We.size;++Ve)fe.write_shift(1,We.content[Ve]);for(;Ve&511;++Ve)fe.write_shift(1,0)}for(je=1;je<ne.FileIndex.length;++je)if(We=ne.FileIndex[je],We.size>0&&We.size<4096)if(sa&&Buffer.isBuffer(We.content))We.content.copy(fe,fe.l,0,We.size),fe.l+=We.size+63&-64;else{for(Ve=0;Ve<We.size;++Ve)fe.write_shift(1,We.content[Ve]);for(;Ve&63;++Ve)fe.write_shift(1,0)}if(sa)fe.l=fe.length;else for(;fe.l<fe.length;)fe.write_shift(1,0);return fe}function K(ne,ye){var ve=ne.FullPaths.map(function(Ve){return Ve.toUpperCase()}),B=ve.map(function(Ve){var $e=Ve.split("/");return $e[$e.length-(Ve.slice(-1)=="/"?2:1)]}),fe=!1;ye.charCodeAt(0)===47?(fe=!0,ye=ve[0].slice(0,-1)+ye):fe=ye.indexOf("/")!==-1;var je=ye.toUpperCase(),Ue=fe===!0?ve.indexOf(je):B.indexOf(je);if(Ue!==-1)return ne.FileIndex[Ue];var Je=!je.match(Rx);for(je=je.replace(mm,""),Je&&(je=je.replace(Rx,"!")),Ue=0;Ue<ve.length;++Ue)if((Je?ve[Ue].replace(Rx,"!"):ve[Ue]).replace(mm,"")==je||(Je?B[Ue].replace(Rx,"!"):B[Ue]).replace(mm,"")==je)return ne.FileIndex[Ue];return null}var z=64,J=-2,W="d0cf11e0a1b11ae1",he=[208,207,17,224,161,177,26,225],V="00000000000000000000000000000000",ae={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:J,FREESECT:-1,HEADER_SIGNATURE:W,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:V,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function ge(ne,ye,ve){g();var B=G(ne,ve);f.writeFileSync(ye,B)}function Z(ne){for(var ye=new Array(ne.length),ve=0;ve<ne.length;++ve)ye[ve]=String.fromCharCode(ne[ve]);return ye.join("")}function ee(ne,ye){var ve=G(ne,ye);switch(ye&&ye.type||"buffer"){case"file":return g(),f.writeFileSync(ye.filename,ve),ve;case"binary":return typeof ve=="string"?ve:Z(ve);case"base64":return Dm(typeof ve=="string"?ve:Z(ve));case"buffer":if(sa)return Buffer.isBuffer(ve)?ve:cl(ve);case"array":return typeof ve=="string"?Vi(ve):ve}return ve}var te;function X(ne){try{var ye=ne.InflateRaw,ve=new ye;if(ve._processChunk(new Uint8Array([3,0]),ve._finishFlushFlag),ve.bytesRead)te=ne;else throw new Error("zlib does not expose bytesRead")}catch(B){console.error("cannot use native zlib: "+(B.message||B))}}function ce(ne,ye){if(!te)return Qe(ne,ye);var ve=te.InflateRaw,B=new ve,fe=B._processChunk(ne.slice(ne.l),B._finishFlushFlag);return ne.l+=B.bytesRead,fe}function F(ne){return te?te.deflateRawSync(ne):Rt(ne)}var re=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],de=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],me=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function De(ne){var ye=(ne<<1|ne<<11)&139536|(ne<<5|ne<<15)&558144;return(ye>>16|ye>>8|ye)&255}for(var Ne=typeof Uint8Array<"u",pe=Ne?new Uint8Array(256):[],Le=0;Le<256;++Le)pe[Le]=De(Le);function ot(ne,ye){var ve=pe[ne&255];return ye<=8?ve>>>8-ye:(ve=ve<<8|pe[ne>>8&255],ye<=16?ve>>>16-ye:(ve=ve<<8|pe[ne>>16&255],ve>>>24-ye))}function Pt(ne,ye){var ve=ye&7,B=ye>>>3;return(ne[B]|(ve<=6?0:ne[B+1]<<8))>>>ve&3}function Dt(ne,ye){var ve=ye&7,B=ye>>>3;return(ne[B]|(ve<=5?0:ne[B+1]<<8))>>>ve&7}function Ct(ne,ye){var ve=ye&7,B=ye>>>3;return(ne[B]|(ve<=4?0:ne[B+1]<<8))>>>ve&15}function Lt(ne,ye){var ve=ye&7,B=ye>>>3;return(ne[B]|(ve<=3?0:ne[B+1]<<8))>>>ve&31}function yt(ne,ye){var ve=ye&7,B=ye>>>3;return(ne[B]|(ve<=1?0:ne[B+1]<<8))>>>ve&127}function ys(ne,ye,ve){var B=ye&7,fe=ye>>>3,je=(1<<ve)-1,Ue=ne[fe]>>>B;return ve<8-B||(Ue|=ne[fe+1]<<8-B,ve<16-B)||(Ue|=ne[fe+2]<<16-B,ve<24-B)||(Ue|=ne[fe+3]<<24-B),Ue&je}function Es(ne,ye,ve){var B=ye&7,fe=ye>>>3;return B<=5?ne[fe]|=(ve&7)<<B:(ne[fe]|=ve<<B&255,ne[fe+1]=(ve&7)>>8-B),ye+3}function Hs(ne,ye,ve){var B=ye&7,fe=ye>>>3;return ve=(ve&1)<<B,ne[fe]|=ve,ye+1}function bs(ne,ye,ve){var B=ye&7,fe=ye>>>3;return ve<<=B,ne[fe]|=ve&255,ve>>>=8,ne[fe+1]=ve,ye+8}function $s(ne,ye,ve){var B=ye&7,fe=ye>>>3;return ve<<=B,ne[fe]|=ve&255,ve>>>=8,ne[fe+1]=ve&255,ne[fe+2]=ve>>>8,ye+16}function ws(ne,ye){var ve=ne.length,B=2*ve>ye?2*ve:ye+5,fe=0;if(ve>=ye)return ne;if(sa){var je=s2(B);if(ne.copy)ne.copy(je);else for(;fe<ne.length;++fe)je[fe]=ne[fe];return je}else if(Ne){var Ue=new Uint8Array(B);if(Ue.set)Ue.set(ne);else for(;fe<ve;++fe)Ue[fe]=ne[fe];return Ue}return ne.length=B,ne}function $t(ne){for(var ye=new Array(ne),ve=0;ve<ne;++ve)ye[ve]=0;return ye}function Na(ne,ye,ve){var B=1,fe=0,je=0,Ue=0,Je=0,Ve=ne.length,$e=Ne?new Uint16Array(32):$t(32);for(je=0;je<32;++je)$e[je]=0;for(je=Ve;je<ve;++je)ne[je]=0;Ve=ne.length;var We=Ne?new Uint16Array(Ve):$t(Ve);for(je=0;je<Ve;++je)$e[fe=ne[je]]++,B<fe&&(B=fe),We[je]=0;for($e[0]=0,je=1;je<=B;++je)$e[je+16]=Je=Je+$e[je-1]<<1;for(je=0;je<Ve;++je)Je=ne[je],Je!=0&&(We[je]=$e[Je+16]++);var pt=0;for(je=0;je<Ve;++je)if(pt=ne[je],pt!=0)for(Je=ot(We[je],B)>>B-pt,Ue=(1<<B+4-pt)-1;Ue>=0;--Ue)ye[Je|Ue<<pt]=pt&15|je<<4;return B}var Me=Ne?new Uint16Array(512):$t(512),ht=Ne?new Uint16Array(32):$t(32);if(!Ne){for(var He=0;He<512;++He)Me[He]=0;for(He=0;He<32;++He)ht[He]=0}(function(){for(var ne=[],ye=0;ye<32;ye++)ne.push(5);Na(ne,ht,32);var ve=[];for(ye=0;ye<=143;ye++)ve.push(8);for(;ye<=255;ye++)ve.push(9);for(;ye<=279;ye++)ve.push(7);for(;ye<=287;ye++)ve.push(8);Na(ve,Me,288)})();var Mt=(function(){for(var ye=Ne?new Uint8Array(32768):[],ve=0,B=0;ve<me.length-1;++ve)for(;B<me[ve+1];++B)ye[B]=ve;for(;B<32768;++B)ye[B]=29;var fe=Ne?new Uint8Array(259):[];for(ve=0,B=0;ve<de.length-1;++ve)for(;B<de[ve+1];++B)fe[B]=ve;function je(Je,Ve){for(var $e=0;$e<Je.length;){var We=Math.min(65535,Je.length-$e),pt=$e+We==Je.length;for(Ve.write_shift(1,+pt),Ve.write_shift(2,We),Ve.write_shift(2,~We&65535);We-- >0;)Ve[Ve.l++]=Je[$e++]}return Ve.l}function Ue(Je,Ve){for(var $e=0,We=0,pt=Ne?new Uint16Array(32768):[];We<Je.length;){var be=Math.min(65535,Je.length-We);if(be<10){for($e=Es(Ve,$e,+(We+be==Je.length)),$e&7&&($e+=8-($e&7)),Ve.l=$e/8|0,Ve.write_shift(2,be),Ve.write_shift(2,~be&65535);be-- >0;)Ve[Ve.l++]=Je[We++];$e=Ve.l*8;continue}$e=Es(Ve,$e,+(We+be==Je.length)+2);for(var st=0;be-- >0;){var Pe=Je[We];st=(st<<5^Pe)&32767;var dt=-1,gt=0;if((dt=pt[st])&&(dt|=We&-32768,dt>We&&(dt-=32768),dt<We))for(;Je[dt+gt]==Je[We+gt]&&gt<250;)++gt;if(gt>2){Pe=fe[gt],Pe<=22?$e=bs(Ve,$e,pe[Pe+1]>>1)-1:(bs(Ve,$e,3),$e+=5,bs(Ve,$e,pe[Pe-23]>>5),$e+=3);var Ft=Pe<8?0:Pe-4>>2;Ft>0&&($s(Ve,$e,gt-de[Pe]),$e+=Ft),Pe=ye[We-dt],$e=bs(Ve,$e,pe[Pe]>>3),$e-=3;var lt=Pe<4?0:Pe-2>>1;lt>0&&($s(Ve,$e,We-dt-me[Pe]),$e+=lt);for(var ss=0;ss<gt;++ss)pt[st]=We&32767,st=(st<<5^Je[We])&32767,++We;be-=gt-1}else Pe<=143?Pe=Pe+48:$e=Hs(Ve,$e,1),$e=bs(Ve,$e,pe[Pe]),pt[st]=We&32767,++We}$e=bs(Ve,$e,0)-1}return Ve.l=($e+7)/8|0,Ve.l}return function(Ve,$e){return Ve.length<8?je(Ve,$e):Ue(Ve,$e)}})();function Rt(ne){var ye=nt(50+Math.floor(ne.length*1.1)),ve=Mt(ne,ye);return ye.slice(0,ve)}var xs=Ne?new Uint16Array(32768):$t(32768),Ks=Ne?new Uint16Array(32768):$t(32768),Ze=Ne?new Uint16Array(128):$t(128),Xe=1,Se=1;function Ce(ne,ye){var ve=Lt(ne,ye)+257;ye+=5;var B=Lt(ne,ye)+1;ye+=5;var fe=Ct(ne,ye)+4;ye+=4;for(var je=0,Ue=Ne?new Uint8Array(19):$t(19),Je=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],Ve=1,$e=Ne?new Uint8Array(8):$t(8),We=Ne?new Uint8Array(8):$t(8),pt=Ue.length,be=0;be<fe;++be)Ue[re[be]]=je=Dt(ne,ye),Ve<je&&(Ve=je),$e[je]++,ye+=3;var st=0;for($e[0]=0,be=1;be<=Ve;++be)We[be]=st=st+$e[be-1]<<1;for(be=0;be<pt;++be)(st=Ue[be])!=0&&(Je[be]=We[st]++);var Pe=0;for(be=0;be<pt;++be)if(Pe=Ue[be],Pe!=0){st=pe[Je[be]]>>8-Pe;for(var dt=(1<<7-Pe)-1;dt>=0;--dt)Ze[st|dt<<Pe]=Pe&7|be<<3}var gt=[];for(Ve=1;gt.length<ve+B;)switch(st=Ze[yt(ne,ye)],ye+=st&7,st>>>=3){case 16:for(je=3+Pt(ne,ye),ye+=2,st=gt[gt.length-1];je-- >0;)gt.push(st);break;case 17:for(je=3+Dt(ne,ye),ye+=3;je-- >0;)gt.push(0);break;case 18:for(je=11+yt(ne,ye),ye+=7;je-- >0;)gt.push(0);break;default:gt.push(st),Ve<st&&(Ve=st);break}var Ft=gt.slice(0,ve),lt=gt.slice(ve);for(be=ve;be<286;++be)Ft[be]=0;for(be=B;be<30;++be)lt[be]=0;return Xe=Na(Ft,xs,286),Se=Na(lt,Ks,30),ye}function rt(ne,ye){if(ne[0]==3&&!(ne[1]&3))return[md(ye),2];for(var ve=0,B=0,fe=s2(ye||1<<18),je=0,Ue=fe.length>>>0,Je=0,Ve=0;(B&1)==0;){if(B=Dt(ne,ve),ve+=3,B>>>1)B>>1==1?(Je=9,Ve=5):(ve=Ce(ne,ve),Je=Xe,Ve=Se);else{ve&7&&(ve+=8-(ve&7));var $e=ne[ve>>>3]|ne[(ve>>>3)+1]<<8;if(ve+=32,$e>0)for(!ye&&Ue<je+$e&&(fe=ws(fe,je+$e),Ue=fe.length);$e-- >0;)fe[je++]=ne[ve>>>3],ve+=8;continue}for(;;){!ye&&Ue<je+32767&&(fe=ws(fe,je+32767),Ue=fe.length);var We=ys(ne,ve,Je),pt=B>>>1==1?Me[We]:xs[We];if(ve+=pt&15,pt>>>=4,(pt>>>8&255)===0)fe[je++]=pt;else{if(pt==256)break;pt-=257;var be=pt<8?0:pt-4>>2;be>5&&(be=0);var st=je+de[pt];be>0&&(st+=ys(ne,ve,be),ve+=be),We=ys(ne,ve,Ve),pt=B>>>1==1?ht[We]:Ks[We],ve+=pt&15,pt>>>=4;var Pe=pt<4?0:pt-2>>1,dt=me[pt];for(Pe>0&&(dt+=ys(ne,ve,Pe),ve+=Pe),!ye&&Ue<st&&(fe=ws(fe,st+100),Ue=fe.length);je<st;)fe[je]=fe[je-dt],++je}}}return ye?[fe,ve+7>>>3]:[fe.slice(0,je),ve+7>>>3]}function Qe(ne,ye){var ve=ne.slice(ne.l||0),B=rt(ve,ye);return ne.l+=B[1],B[0]}function jt(ne,ye){if(ne)typeof console<"u"&&console.error(ye);else throw new Error(ye)}function Ot(ne,ye){var ve=ne;ti(ve,0);var B=[],fe=[],je={FileIndex:B,FullPaths:fe};D(je,{root:ye.root});for(var Ue=ve.length-4;(ve[Ue]!=80||ve[Ue+1]!=75||ve[Ue+2]!=5||ve[Ue+3]!=6)&&Ue>=0;)--Ue;ve.l=Ue+4,ve.l+=4;var Je=ve.read_shift(2);ve.l+=6;var Ve=ve.read_shift(4);for(ve.l=Ve,Ue=0;Ue<Je;++Ue){ve.l+=20;var $e=ve.read_shift(4),We=ve.read_shift(4),pt=ve.read_shift(2),be=ve.read_shift(2),st=ve.read_shift(2);ve.l+=8;var Pe=ve.read_shift(4),dt=h(ve.slice(ve.l+pt,ve.l+pt+be));ve.l+=pt+be+st;var gt=ve.l;ve.l=Pe+4,ts(ve,$e,We,je,dt),ve.l=gt}return je}function ts(ne,ye,ve,B,fe){ne.l+=2;var je=ne.read_shift(2),Ue=ne.read_shift(2),Je=d(ne);if(je&8257)throw new Error("Unsupported ZIP encryption");for(var Ve=ne.read_shift(4),$e=ne.read_shift(4),We=ne.read_shift(4),pt=ne.read_shift(2),be=ne.read_shift(2),st="",Pe=0;Pe<pt;++Pe)st+=String.fromCharCode(ne[ne.l++]);if(be){var dt=h(ne.slice(ne.l,ne.l+be));(dt[21589]||{}).mt&&(Je=dt[21589].mt),((fe||{})[21589]||{}).mt&&(Je=fe[21589].mt)}ne.l+=be;var gt=ne.slice(ne.l,ne.l+$e);switch(Ue){case 8:gt=ce(ne,We);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+Ue)}var Ft=!1;je&8&&(Ve=ne.read_shift(4),Ve==134695760&&(Ve=ne.read_shift(4),Ft=!0),$e=ne.read_shift(4),We=ne.read_shift(4)),$e!=ye&&jt(Ft,"Bad compressed size: "+ye+" != "+$e),We!=ve&&jt(Ft,"Bad uncompressed size: "+ve+" != "+We),bt(B,st,gt,{unsafe:!0,mt:Je})}function js(ne,ye){var ve=ye||{},B=[],fe=[],je=nt(1),Ue=ve.compression?8:0,Je=0,Ve=0,$e=0,We=0,pt=0,be=ne.FullPaths[0],st=be,Pe=ne.FileIndex[0],dt=[],gt=0;for(Ve=1;Ve<ne.FullPaths.length;++Ve)if(st=ne.FullPaths[Ve].slice(be.length),Pe=ne.FileIndex[Ve],!(!Pe.size||!Pe.content||st=="Sh33tJ5")){var Ft=We,lt=nt(st.length);for($e=0;$e<st.length;++$e)lt.write_shift(1,st.charCodeAt($e)&127);lt=lt.slice(0,lt.l),dt[pt]=gR.buf(Pe.content,0);var ss=Pe.content;Ue==8&&(ss=F(ss)),je=nt(30),je.write_shift(4,67324752),je.write_shift(2,20),je.write_shift(2,Je),je.write_shift(2,Ue),Pe.mt?c(je,Pe.mt):je.write_shift(4,0),je.write_shift(-4,dt[pt]),je.write_shift(4,ss.length),je.write_shift(4,Pe.content.length),je.write_shift(2,lt.length),je.write_shift(2,0),We+=je.length,B.push(je),We+=lt.length,B.push(lt),We+=ss.length,B.push(ss),je=nt(46),je.write_shift(4,33639248),je.write_shift(2,0),je.write_shift(2,20),je.write_shift(2,Je),je.write_shift(2,Ue),je.write_shift(4,0),je.write_shift(-4,dt[pt]),je.write_shift(4,ss.length),je.write_shift(4,Pe.content.length),je.write_shift(2,lt.length),je.write_shift(2,0),je.write_shift(2,0),je.write_shift(2,0),je.write_shift(2,0),je.write_shift(4,0),je.write_shift(4,Ft),gt+=je.l,fe.push(je),gt+=lt.length,fe.push(lt),++pt}return je=nt(22),je.write_shift(4,101010256),je.write_shift(2,0),je.write_shift(2,0),je.write_shift(2,pt),je.write_shift(2,pt),je.write_shift(4,gt),je.write_shift(4,We),je.write_shift(2,0),er([er(B),er(fe),je])}var Zt={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function Ca(ne,ye){if(ne.ctype)return ne.ctype;var ve=ne.name||"",B=ve.match(/\.([^\.]+)$/);return B&&Zt[B[1]]||ye&&(B=(ve=ye).match(/[\.\\]([^\.\\])+$/),B&&Zt[B[1]])?Zt[B[1]]:"application/octet-stream"}function Ta(ne){for(var ye=Dm(ne),ve=[],B=0;B<ye.length;B+=76)ve.push(ye.slice(B,B+76));return ve.join(`\r
`)+`\r
`}function Qa(ne){var ye=ne.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function($e){var We=$e.charCodeAt(0).toString(16).toUpperCase();return"="+(We.length==1?"0"+We:We)});ye=ye.replace(/ $/mg,"=20").replace(/\t$/mg,"=09"),ye.charAt(0)==`
`&&(ye="=0D"+ye.slice(1)),ye=ye.replace(/\r(?!\n)/mg,"=0D").replace(/\n\n/mg,`
=0A`).replace(/([^\r\n])\n/mg,"$1=0A");for(var ve=[],B=ye.split(`\r
`),fe=0;fe<B.length;++fe){var je=B[fe];if(je.length==0){ve.push("");continue}for(var Ue=0;Ue<je.length;){var Je=76,Ve=je.slice(Ue,Ue+Je);Ve.charAt(Je-1)=="="?Je--:Ve.charAt(Je-2)=="="?Je-=2:Ve.charAt(Je-3)=="="&&(Je-=3),Ve=je.slice(Ue,Ue+Je),Ue+=Je,Ue<je.length&&(Ve+="="),ve.push(Ve)}}return ve.join(`\r
`)}function Ps(ne){for(var ye=[],ve=0;ve<ne.length;++ve){for(var B=ne[ve];ve<=ne.length&&B.charAt(B.length-1)=="=";)B=B.slice(0,B.length-1)+ne[++ve];ye.push(B)}for(var fe=0;fe<ye.length;++fe)ye[fe]=ye[fe].replace(/[=][0-9A-Fa-f]{2}/g,function(je){return String.fromCharCode(parseInt(je.slice(1),16))});return Vi(ye.join(`\r
`))}function ie(ne,ye,ve){for(var B="",fe="",je="",Ue,Je=0;Je<10;++Je){var Ve=ye[Je];if(!Ve||Ve.match(/^\s*$/))break;var $e=Ve.match(/^(.*?):\s*([^\s].*)$/);if($e)switch($e[1].toLowerCase()){case"content-location":B=$e[2].trim();break;case"content-type":je=$e[2].trim();break;case"content-transfer-encoding":fe=$e[2].trim();break}}switch(++Je,fe.toLowerCase()){case"base64":Ue=Vi(al(ye.slice(Je).join("")));break;case"quoted-printable":Ue=Ps(ye.slice(Je));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+fe)}var We=bt(ne,B.slice(ve.length),Ue,{unsafe:!0});je&&(We.ctype=je)}function Re(ne,ye){if(Z(ne.slice(0,13)).toLowerCase()!="mime-version:")throw new Error("Unsupported MAD header");var ve=ye&&ye.root||"",B=(sa&&Buffer.isBuffer(ne)?ne.toString("binary"):Z(ne)).split(`\r
`),fe=0,je="";for(fe=0;fe<B.length;++fe)if(je=B[fe],!!/^Content-Location:/i.test(je)&&(je=je.slice(je.indexOf("file")),ve||(ve=je.slice(0,je.lastIndexOf("/")+1)),je.slice(0,ve.length)!=ve))for(;ve.length>0&&(ve=ve.slice(0,ve.length-1),ve=ve.slice(0,ve.lastIndexOf("/")+1),je.slice(0,ve.length)!=ve););var Ue=(B[1]||"").match(/boundary="(.*?)"/);if(!Ue)throw new Error("MAD cannot find boundary");var Je="--"+(Ue[1]||""),Ve=[],$e=[],We={FileIndex:Ve,FullPaths:$e};D(We);var pt,be=0;for(fe=0;fe<B.length;++fe){var st=B[fe];st!==Je&&st!==Je+"--"||(be++&&ie(We,B.slice(pt,fe),ve),pt=fe)}return We}function tt(ne,ye){var ve=ye||{},B=ve.boundary||"SheetJS";B="------="+B;for(var fe=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+B.slice(2)+'"',"","",""],je=ne.FullPaths[0],Ue=je,Je=ne.FileIndex[0],Ve=1;Ve<ne.FullPaths.length;++Ve)if(Ue=ne.FullPaths[Ve].slice(je.length),Je=ne.FileIndex[Ve],!(!Je.size||!Je.content||Ue=="Sh33tJ5")){Ue=Ue.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(gt){return"_x"+gt.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(gt){return"_u"+gt.charCodeAt(0).toString(16)+"_"});for(var $e=Je.content,We=sa&&Buffer.isBuffer($e)?$e.toString("binary"):Z($e),pt=0,be=Math.min(1024,We.length),st=0,Pe=0;Pe<=be;++Pe)(st=We.charCodeAt(Pe))>=32&&st<128&&++pt;var dt=pt>=be*4/5;fe.push(B),fe.push("Content-Location: "+(ve.root||"file:///C:/SheetJS/")+Ue),fe.push("Content-Transfer-Encoding: "+(dt?"quoted-printable":"base64")),fe.push("Content-Type: "+Ca(Je,Ue)),fe.push(""),fe.push(dt?Qa(We):Ta(We))}return fe.push(B+`--\r
`),fe.join(`\r
`)}function wt(ne){var ye={};return D(ye,ne),ye}function bt(ne,ye,ve,B){var fe=B&&B.unsafe;fe||D(ne);var je=!fe&&ya.find(ne,ye);if(!je){var Ue=ne.FullPaths[0];ye.slice(0,Ue.length)==Ue?Ue=ye:(Ue.slice(-1)!="/"&&(Ue+="/"),Ue=(Ue+ye).replace("//","/")),je={name:i(ye),type:2},ne.FileIndex.push(je),ne.FullPaths.push(Ue),fe||ya.utils.cfb_gc(ne)}return je.content=ve,je.size=ve?ve.length:0,B&&(B.CLSID&&(je.clsid=B.CLSID),B.mt&&(je.mt=B.mt),B.ct&&(je.ct=B.ct)),je}function rs(ne,ye){D(ne);var ve=ya.find(ne,ye);if(ve){for(var B=0;B<ne.FileIndex.length;++B)if(ne.FileIndex[B]==ve)return ne.FileIndex.splice(B,1),ne.FullPaths.splice(B,1),!0}return!1}function gs(ne,ye,ve){D(ne);var B=ya.find(ne,ye);if(B){for(var fe=0;fe<ne.FileIndex.length;++fe)if(ne.FileIndex[fe]==B)return ne.FileIndex[fe].name=i(ve),ne.FullPaths[fe]=ve,!0}return!1}function Nt(ne){P(ne,!0)}return s.find=K,s.read=U,s.parse=p,s.write=ee,s.writeFile=ge,s.utils={cfb_new:wt,cfb_add:bt,cfb_del:rs,cfb_mov:gs,cfb_gc:Nt,ReadShift:xm,CheckField:eT,prep_blob:ti,bconcat:er,use_zlib:X,_deflateRaw:Rt,_inflateRaw:Qe,consts:ae},s})();function vR(t){return typeof t=="string"?qp(t):Array.isArray(t)?$M(t):t}function Qm(t,s,a){if(typeof Deno<"u"){if(a&&typeof s=="string")switch(a){case"utf8":s=new TextEncoder(a).encode(s);break;case"binary":s=qp(s);break;default:throw new Error("Unsupported encoding "+a)}return Deno.writeFileSync(t,s)}var n=a=="utf8"?Om(s):s;if(typeof IE_SaveFile<"u")return IE_SaveFile(n,t);if(typeof Blob<"u"){var i=new Blob([vR(n)],{type:"application/octet-stream"});if(typeof navigator<"u"&&navigator.msSaveBlob)return navigator.msSaveBlob(i,t);if(typeof saveAs<"u")return saveAs(i,t);if(typeof URL<"u"&&typeof document<"u"&&document.createElement&&URL.createObjectURL){var c=URL.createObjectURL(i);if(typeof chrome=="object"&&typeof(chrome.downloads||{}).download=="function")return URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(c)},6e4),chrome.downloads.download({url:c,filename:t,saveAs:!0});var d=document.createElement("a");if(d.download!=null)return d.download=t,d.href=c,document.body.appendChild(d),d.click(),document.body.removeChild(d),URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(c)},6e4),c}}if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var h=File(t);return h.open("w"),h.encoding="binary",Array.isArray(s)&&(s=Xm(s)),h.write(s),h.close(),s}catch(f){if(!f.message||!f.message.match(/onstruct/))throw f}throw new Error("cannot save file "+t)}function rr(t){for(var s=Object.keys(t),a=[],n=0;n<s.length;++n)Object.prototype.hasOwnProperty.call(t,s[n])&&a.push(s[n]);return a}function d2(t,s){for(var a=[],n=rr(t),i=0;i!==n.length;++i)a[t[n[i]][s]]==null&&(a[t[n[i]][s]]=n[i]);return a}function yj(t){for(var s=[],a=rr(t),n=0;n!==a.length;++n)s[t[a[n]]]=a[n];return s}function Zp(t){for(var s=[],a=rr(t),n=0;n!==a.length;++n)s[t[a[n]]]=parseInt(a[n],10);return s}function yR(t){for(var s=[],a=rr(t),n=0;n!==a.length;++n)s[t[a[n]]]==null&&(s[t[a[n]]]=[]),s[t[a[n]]].push(a[n]);return s}var gp=new Date(1899,11,30,0,0,0);function Vr(t,s){var a=t.getTime(),n=gp.getTime()+(t.getTimezoneOffset()-gp.getTimezoneOffset())*6e4;return(a-n)/(1440*60*1e3)}var IC=new Date,jR=gp.getTime()+(IC.getTimezoneOffset()-gp.getTimezoneOffset())*6e4,u2=IC.getTimezoneOffset();function FC(t){var s=new Date;return s.setTime(t*24*60*60*1e3+jR),s.getTimezoneOffset()!==u2&&s.setTime(s.getTime()+(s.getTimezoneOffset()-u2)*6e4),s}var h2=new Date("2017-02-19T19:06:09.000Z"),BC=isNaN(h2.getFullYear())?new Date("2/19/17"):h2,NR=BC.getFullYear()==2017;function Sr(t,s){var a=new Date(t);if(NR)return s>0?a.setTime(a.getTime()+a.getTimezoneOffset()*60*1e3):s<0&&a.setTime(a.getTime()-a.getTimezoneOffset()*60*1e3),a;if(t instanceof Date)return t;if(BC.getFullYear()==1917&&!isNaN(a.getFullYear())){var n=a.getFullYear();return t.indexOf(""+n)>-1||a.setFullYear(a.getFullYear()+100),a}var i=t.match(/\d+/g)||["2017","2","19","0","0","0"],c=new Date(+i[0],+i[1]-1,+i[2],+i[3]||0,+i[4]||0,+i[5]||0);return t.indexOf("Z")>-1&&(c=new Date(c.getTime()-c.getTimezoneOffset()*60*1e3)),c}function Xp(t,s){if(sa&&Buffer.isBuffer(t))return t.toString("binary");if(typeof TextDecoder<"u")try{var a={"":"","":"",:"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"","":"","":"","":"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"",:""};return Array.isArray(t)&&(t=new Uint8Array(t)),new TextDecoder("latin1").decode(t).replace(/[]/g,function(c){return a[c]||c})}catch{}for(var n=[],i=0;i!=t.length;++i)n.push(String.fromCharCode(t[i]));return n.join("")}function Hr(t){if(typeof JSON<"u"&&!Array.isArray(t))return JSON.parse(JSON.stringify(t));if(typeof t!="object"||t==null)return t;if(t instanceof Date)return new Date(t.getTime());var s={};for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(s[a]=Hr(t[a]));return s}function nn(t,s){for(var a="";a.length<s;)a+=t;return a}function el(t){var s=Number(t);if(!isNaN(s))return isFinite(s)?s:NaN;if(!/\d/.test(t))return s;var a=1,n=t.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return a*=100,""});return!isNaN(s=Number(n))||(n=n.replace(/[(](.*)[)]/,function(i,c){return a=-a,c}),!isNaN(s=Number(n)))?s/a:s}var wR=["january","february","march","april","may","june","july","august","september","october","november","december"];function Pm(t){var s=new Date(t),a=new Date(NaN),n=s.getYear(),i=s.getMonth(),c=s.getDate();if(isNaN(c))return a;var d=t.toLowerCase();if(d.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if(d=d.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,""),d.length>3&&wR.indexOf(d)==-1)return a}else if(d.match(/[a-z]/))return a;return n<0||n>8099?a:(i>0||c>1)&&n!=101?s:t.match(/[^-0-9:,\/\\]/)?a:s}function Os(t,s,a){if(t.FullPaths){if(typeof a=="string"){var n;return sa?n=cl(a):n=WM(a),ya.utils.cfb_add(t,s,n)}ya.utils.cfb_add(t,s,a)}else t.file(s,a)}function jj(){return ya.utils.cfb_new()}var Cn=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r
`,bR={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},Nj=yj(bR),wj=/[&<>'"]/g,SR=/[\u0000-\u0008\u000b-\u001f]/g;function ma(t){var s=t+"";return s.replace(wj,function(a){return Nj[a]}).replace(SR,function(a){return"_x"+("000"+a.charCodeAt(0).toString(16)).slice(-4)+"_"})}function m2(t){return ma(t).replace(/ /g,"_x0020_")}var zC=/[\u0000-\u001f]/g;function _R(t){var s=t+"";return s.replace(wj,function(a){return Nj[a]}).replace(/\n/g,"<br/>").replace(zC,function(a){return"&#x"+("000"+a.charCodeAt(0).toString(16)).slice(-4)+";"})}function CR(t){var s=t+"";return s.replace(wj,function(a){return Nj[a]}).replace(zC,function(a){return"&#x"+a.charCodeAt(0).toString(16).toUpperCase()+";"})}function TR(t){return t.replace(/(\r\n|[\r\n])/g,"&#10;")}function kR(t){switch(t){case 1:case!0:case"1":case"true":case"TRUE":return!0;default:return!1}}function uv(t){for(var s="",a=0,n=0,i=0,c=0,d=0,h=0;a<t.length;){if(n=t.charCodeAt(a++),n<128){s+=String.fromCharCode(n);continue}if(i=t.charCodeAt(a++),n>191&&n<224){d=(n&31)<<6,d|=i&63,s+=String.fromCharCode(d);continue}if(c=t.charCodeAt(a++),n<240){s+=String.fromCharCode((n&15)<<12|(i&63)<<6|c&63);continue}d=t.charCodeAt(a++),h=((n&7)<<18|(i&63)<<12|(c&63)<<6|d&63)-65536,s+=String.fromCharCode(55296+(h>>>10&1023)),s+=String.fromCharCode(56320+(h&1023))}return s}function f2(t){var s=md(2*t.length),a,n,i=1,c=0,d=0,h;for(n=0;n<t.length;n+=i)i=1,(h=t.charCodeAt(n))<128?a=h:h<224?(a=(h&31)*64+(t.charCodeAt(n+1)&63),i=2):h<240?(a=(h&15)*4096+(t.charCodeAt(n+1)&63)*64+(t.charCodeAt(n+2)&63),i=3):(i=4,a=(h&7)*262144+(t.charCodeAt(n+1)&63)*4096+(t.charCodeAt(n+2)&63)*64+(t.charCodeAt(n+3)&63),a-=65536,d=55296+(a>>>10&1023),a=56320+(a&1023)),d!==0&&(s[c++]=d&255,s[c++]=d>>>8,d=0),s[c++]=a%256,s[c++]=a>>>8;return s.slice(0,c).toString("ucs2")}function x2(t){return cl(t,"binary").toString("utf8")}var Ix="foo bar baz",fm=sa&&(x2(Ix)==uv(Ix)&&x2||f2(Ix)==uv(Ix)&&f2)||uv,Om=sa?function(t){return cl(t,"utf8").toString("binary")}:function(t){for(var s=[],a=0,n=0,i=0;a<t.length;)switch(n=t.charCodeAt(a++),!0){case n<128:s.push(String.fromCharCode(n));break;case n<2048:s.push(String.fromCharCode(192+(n>>6))),s.push(String.fromCharCode(128+(n&63)));break;case(n>=55296&&n<57344):n-=55296,i=t.charCodeAt(a++)-56320+(n<<10),s.push(String.fromCharCode(240+(i>>18&7))),s.push(String.fromCharCode(144+(i>>12&63))),s.push(String.fromCharCode(128+(i>>6&63))),s.push(String.fromCharCode(128+(i&63)));break;default:s.push(String.fromCharCode(224+(n>>12))),s.push(String.fromCharCode(128+(n>>6&63))),s.push(String.fromCharCode(128+(n&63)))}return s.join("")},ER=(function(){var t=[["nbsp"," "],["middot",""],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(s){return[new RegExp("&"+s[0]+";","ig"),s[1]]});return function(a){for(var n=a.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,`
`).replace(/<[^>]*>/g,""),i=0;i<t.length;++i)n=n.replace(t[i][0],t[i][1]);return n}})(),UC=/(^\s|\s$|\n)/;function tr(t,s){return"<"+t+(s.match(UC)?' xml:space="preserve"':"")+">"+s+"</"+t+">"}function Mm(t){return rr(t).map(function(s){return" "+s+'="'+t[s]+'"'}).join("")}function St(t,s,a){return"<"+t+(a!=null?Mm(a):"")+(s!=null?(s.match(UC)?' xml:space="preserve"':"")+">"+s+"</"+t:"/")+">"}function my(t,s){try{return t.toISOString().replace(/\.\d*/,"")}catch(a){if(s)throw a}return""}function AR(t,s){switch(typeof t){case"string":var a=St("vt:lpwstr",ma(t));return a=a.replace(/&quot;/g,"_x0022_"),a;case"number":return St((t|0)==t?"vt:i4":"vt:r8",ma(String(t)));case"boolean":return St("vt:bool",t?"true":"false")}if(t instanceof Date)return St("vt:filetime",my(t));throw new Error("Unable to serialize "+t)}var Un={CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/metadata/core-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/custom-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties",CT:"http://schemas.openxmlformats.org/package/2006/content-types",RELS:"http://schemas.openxmlformats.org/package/2006/relationships",TCMNT:"http://schemas.microsoft.com/office/spreadsheetml/2018/threadedcomments",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",dcmitype:"http://purl.org/dc/dcmitype/",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",vt:"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes",xsi:"http://www.w3.org/2001/XMLSchema-instance",xsd:"http://www.w3.org/2001/XMLSchema"},Ku=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"],si={o:"urn:schemas-microsoft-com:office:office",x:"urn:schemas-microsoft-com:office:excel",ss:"urn:schemas-microsoft-com:office:spreadsheet",dt:"uuid:C2F41010-65B3-11d1-A29F-00AA00C14882",mv:"http://macVmlSchemaUri",v:"urn:schemas-microsoft-com:vml",html:"http://www.w3.org/TR/REC-html40"};function DR(t,s){for(var a=1-2*(t[s+7]>>>7),n=((t[s+7]&127)<<4)+(t[s+6]>>>4&15),i=t[s+6]&15,c=5;c>=0;--c)i=i*256+t[s+c];return n==2047?i==0?a*(1/0):NaN:(n==0?n=-1022:(n-=1023,i+=Math.pow(2,52)),a*Math.pow(2,n-52)*i)}function PR(t,s,a){var n=(s<0||1/s==-1/0?1:0)<<7,i=0,c=0,d=n?-s:s;isFinite(d)?d==0?i=c=0:(i=Math.floor(Math.log(d)/Math.LN2),c=d*Math.pow(2,52-i),i<=-1023&&(!isFinite(c)||c<Math.pow(2,52))?i=-1022:(c-=Math.pow(2,52),i+=1023)):(i=2047,c=isNaN(s)?26985:0);for(var h=0;h<=5;++h,c/=256)t[a+h]=c&255;t[a+6]=(i&15)<<4|c&15,t[a+7]=i>>4|n}var p2=function(t){for(var s=[],a=10240,n=0;n<t[0].length;++n)if(t[0][n])for(var i=0,c=t[0][n].length;i<c;i+=a)s.push.apply(s,t[0][n].slice(i,i+a));return s},g2=sa?function(t){return t[0].length>0&&Buffer.isBuffer(t[0][0])?Buffer.concat(t[0].map(function(s){return Buffer.isBuffer(s)?s:cl(s)})):p2(t)}:p2,v2=function(t,s,a){for(var n=[],i=s;i<a;i+=2)n.push(String.fromCharCode(om(t,i)));return n.join("").replace(mm,"")},bj=sa?function(t,s,a){return Buffer.isBuffer(t)?t.toString("utf16le",s,a).replace(mm,""):v2(t,s,a)}:v2,y2=function(t,s,a){for(var n=[],i=s;i<s+a;++i)n.push(("0"+t[i].toString(16)).slice(-2));return n.join("")},VC=sa?function(t,s,a){return Buffer.isBuffer(t)?t.toString("hex",s,s+a):y2(t,s,a)}:y2,j2=function(t,s,a){for(var n=[],i=s;i<a;i++)n.push(String.fromCharCode(xu(t,i)));return n.join("")},Jm=sa?function(s,a,n){return Buffer.isBuffer(s)?s.toString("utf8",a,n):j2(s,a,n)}:j2,HC=function(t,s){var a=ai(t,s);return a>0?Jm(t,s+4,s+4+a-1):""},$C=HC,WC=function(t,s){var a=ai(t,s);return a>0?Jm(t,s+4,s+4+a-1):""},GC=WC,qC=function(t,s){var a=2*ai(t,s);return a>0?Jm(t,s+4,s+4+a-1):""},KC=qC,YC=function(s,a){var n=ai(s,a);return n>0?bj(s,a+4,a+4+n):""},ZC=YC,XC=function(t,s){var a=ai(t,s);return a>0?Jm(t,s+4,s+4+a):""},QC=XC,JC=function(t,s){return DR(t,s)},vp=JC,Sj=function(s){return Array.isArray(s)||typeof Uint8Array<"u"&&s instanceof Uint8Array};sa&&($C=function(s,a){if(!Buffer.isBuffer(s))return HC(s,a);var n=s.readUInt32LE(a);return n>0?s.toString("utf8",a+4,a+4+n-1):""},GC=function(s,a){if(!Buffer.isBuffer(s))return WC(s,a);var n=s.readUInt32LE(a);return n>0?s.toString("utf8",a+4,a+4+n-1):""},KC=function(s,a){if(!Buffer.isBuffer(s))return qC(s,a);var n=2*s.readUInt32LE(a);return s.toString("utf16le",a+4,a+4+n-1)},ZC=function(s,a){if(!Buffer.isBuffer(s))return YC(s,a);var n=s.readUInt32LE(a);return s.toString("utf16le",a+4,a+4+n)},QC=function(s,a){if(!Buffer.isBuffer(s))return XC(s,a);var n=s.readUInt32LE(a);return s.toString("utf8",a+4,a+4+n)},vp=function(s,a){return Buffer.isBuffer(s)?s.readDoubleLE(a):JC(s,a)},Sj=function(s){return Buffer.isBuffer(s)||Array.isArray(s)||typeof Uint8Array<"u"&&s instanceof Uint8Array});var xu=function(t,s){return t[s]},om=function(t,s){return t[s+1]*256+t[s]},OR=function(t,s){var a=t[s+1]*256+t[s];return a<32768?a:(65535-a+1)*-1},ai=function(t,s){return t[s+3]*(1<<24)+(t[s+2]<<16)+(t[s+1]<<8)+t[s]},Zc=function(t,s){return t[s+3]<<24|t[s+2]<<16|t[s+1]<<8|t[s]},MR=function(t,s){return t[s]<<24|t[s+1]<<16|t[s+2]<<8|t[s+3]};function xm(t,s){var a="",n,i,c=[],d,h,f,g;switch(s){case"dbcs":if(g=this.l,sa&&Buffer.isBuffer(this))a=this.slice(this.l,this.l+2*t).toString("utf16le");else for(f=0;f<t;++f)a+=String.fromCharCode(om(this,g)),g+=2;t*=2;break;case"utf8":a=Jm(this,this.l,this.l+t);break;case"utf16le":t*=2,a=bj(this,this.l,this.l+t);break;case"wstr":return xm.call(this,t,"dbcs");case"lpstr-ansi":a=$C(this,this.l),t=4+ai(this,this.l);break;case"lpstr-cp":a=GC(this,this.l),t=4+ai(this,this.l);break;case"lpwstr":a=KC(this,this.l),t=4+2*ai(this,this.l);break;case"lpp4":t=4+ai(this,this.l),a=ZC(this,this.l),t&2&&(t+=2);break;case"8lpp4":t=4+ai(this,this.l),a=QC(this,this.l),t&3&&(t+=4-(t&3));break;case"cstr":for(t=0,a="";(d=xu(this,this.l+t++))!==0;)c.push(Mx(d));a=c.join("");break;case"_wstr":for(t=0,a="";(d=om(this,this.l+t))!==0;)c.push(Mx(d)),t+=2;t+=2,a=c.join("");break;case"dbcs-cont":for(a="",g=this.l,f=0;f<t;++f){if(this.lens&&this.lens.indexOf(g)!==-1)return d=xu(this,g),this.l=g+1,h=xm.call(this,t-f,d?"dbcs-cont":"sbcs-cont"),c.join("")+h;c.push(Mx(om(this,g))),g+=2}a=c.join(""),t*=2;break;case"cpstr":case"sbcs-cont":for(a="",g=this.l,f=0;f!=t;++f){if(this.lens&&this.lens.indexOf(g)!==-1)return d=xu(this,g),this.l=g+1,h=xm.call(this,t-f,d?"dbcs-cont":"sbcs-cont"),c.join("")+h;c.push(Mx(xu(this,g))),g+=1}a=c.join("");break;default:switch(t){case 1:return n=xu(this,this.l),this.l++,n;case 2:return n=(s==="i"?OR:om)(this,this.l),this.l+=2,n;case 4:case-4:return s==="i"||(this[this.l+3]&128)===0?(n=(t>0?Zc:MR)(this,this.l),this.l+=4,n):(i=ai(this,this.l),this.l+=4,i);case 8:case-8:if(s==="f")return t==8?i=vp(this,this.l):i=vp([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,i;t=8;case 16:a=VC(this,this.l,t);break}}return this.l+=t,a}var RR=function(t,s,a){t[a]=s&255,t[a+1]=s>>>8&255,t[a+2]=s>>>16&255,t[a+3]=s>>>24&255},LR=function(t,s,a){t[a]=s&255,t[a+1]=s>>8&255,t[a+2]=s>>16&255,t[a+3]=s>>24&255},IR=function(t,s,a){t[a]=s&255,t[a+1]=s>>>8&255};function FR(t,s,a){var n=0,i=0;if(a==="dbcs"){for(i=0;i!=s.length;++i)IR(this,s.charCodeAt(i),this.l+2*i);n=2*s.length}else if(a==="sbcs"){for(s=s.replace(/[^\x00-\x7F]/g,"_"),i=0;i!=s.length;++i)this[this.l+i]=s.charCodeAt(i)&255;n=s.length}else if(a==="hex"){for(;i<t;++i)this[this.l++]=parseInt(s.slice(2*i,2*i+2),16)||0;return this}else if(a==="utf16le"){var c=Math.min(this.l+t,this.length);for(i=0;i<Math.min(s.length,t);++i){var d=s.charCodeAt(i);this[this.l++]=d&255,this[this.l++]=d>>8}for(;this.l<c;)this[this.l++]=0;return this}else switch(t){case 1:n=1,this[this.l]=s&255;break;case 2:n=2,this[this.l]=s&255,s>>>=8,this[this.l+1]=s&255;break;case 3:n=3,this[this.l]=s&255,s>>>=8,this[this.l+1]=s&255,s>>>=8,this[this.l+2]=s&255;break;case 4:n=4,RR(this,s,this.l);break;case 8:if(n=8,a==="f"){PR(this,s,this.l);break}case 16:break;case-4:n=4,LR(this,s,this.l);break}return this.l+=n,this}function eT(t,s){var a=VC(this,this.l,t.length>>1);if(a!==t)throw new Error(s+"Expected "+t+" saw "+a);this.l+=t.length>>1}function ti(t,s){t.l=s,t.read_shift=xm,t.chk=eT,t.write_shift=FR}function Co(t,s){t.l+=s}function nt(t){var s=md(t);return ti(s,0),s}function Ur(){var t=[],s=sa?256:2048,a=function(g){var p=nt(g);return ti(p,0),p},n=a(s),i=function(){n&&(n.length>n.l&&(n=n.slice(0,n.l),n.l=n.length),n.length>0&&t.push(n),n=null)},c=function(g){return n&&g<n.length-n.l?n:(i(),n=a(Math.max(g+1,s)))},d=function(){return i(),er(t)},h=function(g){i(),n=g,n.l==null&&(n.l=n.length),c(s)};return{next:c,push:h,end:d,_bufs:t}}function xt(t,s,a,n){var i=+s,c;if(!isNaN(i)){n||(n=Dz[i].p||(a||[]).length||0),c=1+(i>=128?1:0)+1,n>=128&&++c,n>=16384&&++c,n>=2097152&&++c;var d=t.next(c);i<=127?d.write_shift(1,i):(d.write_shift(1,(i&127)+128),d.write_shift(1,i>>7));for(var h=0;h!=4;++h)if(n>=128)d.write_shift(1,(n&127)+128),n>>=7;else{d.write_shift(1,n);break}n>0&&Sj(a)&&t.push(a)}}function pm(t,s,a){var n=Hr(t);if(s.s?(n.cRel&&(n.c+=s.s.c),n.rRel&&(n.r+=s.s.r)):(n.cRel&&(n.c+=s.c),n.rRel&&(n.r+=s.r)),!a||a.biff<12){for(;n.c>=256;)n.c-=256;for(;n.r>=65536;)n.r-=65536}return n}function N2(t,s,a){var n=Hr(t);return n.s=pm(n.s,s.s,a),n.e=pm(n.e,s.s,a),n}function gm(t,s){if(t.cRel&&t.c<0)for(t=Hr(t);t.c<0;)t.c+=s>8?16384:256;if(t.rRel&&t.r<0)for(t=Hr(t);t.r<0;)t.r+=s>8?1048576:s>5?65536:16384;var a=xa(t);return!t.cRel&&t.cRel!=null&&(a=UR(a)),!t.rRel&&t.rRel!=null&&(a=BR(a)),a}function hv(t,s){return t.s.r==0&&!t.s.rRel&&t.e.r==(s.biff>=12?1048575:s.biff>=8?65536:16384)&&!t.e.rRel?(t.s.cRel?"":"$")+pr(t.s.c)+":"+(t.e.cRel?"":"$")+pr(t.e.c):t.s.c==0&&!t.s.cRel&&t.e.c==(s.biff>=12?16383:255)&&!t.e.cRel?(t.s.rRel?"":"$")+ar(t.s.r)+":"+(t.e.rRel?"":"$")+ar(t.e.r):gm(t.s,s.biff)+":"+gm(t.e,s.biff)}function _j(t){return parseInt(zR(t),10)-1}function ar(t){return""+(t+1)}function BR(t){return t.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}function zR(t){return t.replace(/\$(\d+)$/,"$1")}function Cj(t){for(var s=VR(t),a=0,n=0;n!==s.length;++n)a=26*a+s.charCodeAt(n)-64;return a-1}function pr(t){if(t<0)throw new Error("invalid column "+t);var s="";for(++t;t;t=Math.floor((t-1)/26))s=String.fromCharCode((t-1)%26+65)+s;return s}function UR(t){return t.replace(/^([A-Z])/,"$$$1")}function VR(t){return t.replace(/^\$([A-Z])/,"$1")}function HR(t){return t.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")}function Vn(t){for(var s=0,a=0,n=0;n<t.length;++n){var i=t.charCodeAt(n);i>=48&&i<=57?s=10*s+(i-48):i>=65&&i<=90&&(a=26*a+(i-64))}return{c:a-1,r:s-1}}function xa(t){for(var s=t.c+1,a="";s;s=(s-1)/26|0)a=String.fromCharCode((s-1)%26+65)+a;return a+(t.r+1)}function ni(t){var s=t.indexOf(":");return s==-1?{s:Vn(t),e:Vn(t)}:{s:Vn(t.slice(0,s)),e:Vn(t.slice(s+1))}}function bn(t,s){return typeof s>"u"||typeof s=="number"?bn(t.s,t.e):(typeof t!="string"&&(t=xa(t)),typeof s!="string"&&(s=xa(s)),t==s?t:t+":"+s)}function Oa(t){var s={s:{c:0,r:0},e:{c:0,r:0}},a=0,n=0,i=0,c=t.length;for(a=0;n<c&&!((i=t.charCodeAt(n)-64)<1||i>26);++n)a=26*a+i;for(s.s.c=--a,a=0;n<c&&!((i=t.charCodeAt(n)-48)<0||i>9);++n)a=10*a+i;if(s.s.r=--a,n===c||i!=10)return s.e.c=s.s.c,s.e.r=s.s.r,s;for(++n,a=0;n!=c&&!((i=t.charCodeAt(n)-64)<1||i>26);++n)a=26*a+i;for(s.e.c=--a,a=0;n!=c&&!((i=t.charCodeAt(n)-48)<0||i>9);++n)a=10*a+i;return s.e.r=--a,s}function w2(t,s){var a=t.t=="d"&&s instanceof Date;if(t.z!=null)try{return t.w=ac(t.z,a?Vr(s):s)}catch{}try{return t.w=ac((t.XF||{}).numFmtId||(a?14:0),a?Vr(s):s)}catch{return""+s}}function nl(t,s,a){return t==null||t.t==null||t.t=="z"?"":t.w!==void 0?t.w:(t.t=="d"&&!t.z&&a&&a.dateNF&&(t.z=a.dateNF),t.t=="e"?ef[t.v]||t.v:s==null?w2(t,t.v):w2(t,s))}function gd(t,s){var a=s&&s.sheet?s.sheet:"Sheet1",n={};return n[a]=t,{SheetNames:[a],Sheets:n}}function tT(t,s,a){var n=a||{},i=t?Array.isArray(t):n.dense,c=t||(i?[]:{}),d=0,h=0;if(c&&n.origin!=null){if(typeof n.origin=="number")d=n.origin;else{var f=typeof n.origin=="string"?Vn(n.origin):n.origin;d=f.r,h=f.c}c["!ref"]||(c["!ref"]="A1:A1")}var g={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(c["!ref"]){var p=Oa(c["!ref"]);g.s.c=p.s.c,g.s.r=p.s.r,g.e.c=Math.max(g.e.c,p.e.c),g.e.r=Math.max(g.e.r,p.e.r),d==-1&&(g.e.r=d=p.e.r+1)}for(var v=0;v!=s.length;++v)if(s[v]){if(!Array.isArray(s[v]))throw new Error("aoa_to_sheet expects an array of arrays");for(var y=0;y!=s[v].length;++y)if(!(typeof s[v][y]>"u")){var _={v:s[v][y]},S=d+v,b=h+y;if(g.s.r>S&&(g.s.r=S),g.s.c>b&&(g.s.c=b),g.e.r<S&&(g.e.r=S),g.e.c<b&&(g.e.c=b),s[v][y]&&typeof s[v][y]=="object"&&!Array.isArray(s[v][y])&&!(s[v][y]instanceof Date))_=s[v][y];else if(Array.isArray(_.v)&&(_.f=s[v][y][1],_.v=_.v[0]),_.v===null)if(_.f)_.t="n";else if(n.nullError)_.t="e",_.v=0;else if(n.sheetStubs)_.t="z";else continue;else typeof _.v=="number"?_.t="n":typeof _.v=="boolean"?_.t="b":_.v instanceof Date?(_.z=n.dateNF||on[14],n.cellDates?(_.t="d",_.w=ac(_.z,Vr(_.v))):(_.t="n",_.v=Vr(_.v),_.w=ac(_.z,_.v))):_.t="s";if(i)c[S]||(c[S]=[]),c[S][b]&&c[S][b].z&&(_.z=c[S][b].z),c[S][b]=_;else{var T=xa({c:b,r:S});c[T]&&c[T].z&&(_.z=c[T].z),c[T]=_}}}return g.s.c<1e7&&(c["!ref"]=bn(g)),c}function Yu(t,s){return tT(null,t,s)}function $R(t){return t.read_shift(4,"i")}function Yi(t,s){return s||(s=nt(4)),s.write_shift(4,t),s}function gr(t){var s=t.read_shift(4);return s===0?"":t.read_shift(s,"dbcs")}function Hn(t,s){var a=!1;return s==null&&(a=!0,s=nt(4+2*t.length)),s.write_shift(4,t.length),t.length>0&&s.write_shift(0,t,"dbcs"),a?s.slice(0,s.l):s}function WR(t){return{ich:t.read_shift(2),ifnt:t.read_shift(2)}}function GR(t,s){return s||(s=nt(4)),s.write_shift(2,0),s.write_shift(2,0),s}function Tj(t,s){var a=t.l,n=t.read_shift(1),i=gr(t),c=[],d={t:i,h:i};if((n&1)!==0){for(var h=t.read_shift(4),f=0;f!=h;++f)c.push(WR(t));d.r=c}else d.r=[{ich:0,ifnt:0}];return t.l=a+s,d}function qR(t,s){var a=!1;return s==null&&(a=!0,s=nt(15+4*t.t.length)),s.write_shift(1,0),Hn(t.t,s),a?s.slice(0,s.l):s}var KR=Tj;function YR(t,s){var a=!1;return s==null&&(a=!0,s=nt(23+4*t.t.length)),s.write_shift(1,1),Hn(t.t,s),s.write_shift(4,1),GR({},s),a?s.slice(0,s.l):s}function Ci(t){var s=t.read_shift(4),a=t.read_shift(2);return a+=t.read_shift(1)<<16,t.l++,{c:s,iStyleRef:a}}function vd(t,s){return s==null&&(s=nt(8)),s.write_shift(-4,t.c),s.write_shift(3,t.iStyleRef||t.s),s.write_shift(1,0),s}function yd(t){var s=t.read_shift(2);return s+=t.read_shift(1)<<16,t.l++,{c:-1,iStyleRef:s}}function jd(t,s){return s==null&&(s=nt(4)),s.write_shift(3,t.iStyleRef||t.s),s.write_shift(1,0),s}var ZR=gr,sT=Hn;function kj(t){var s=t.read_shift(4);return s===0||s===4294967295?"":t.read_shift(s,"dbcs")}function yp(t,s){var a=!1;return s==null&&(a=!0,s=nt(127)),s.write_shift(4,t.length>0?t.length:4294967295),t.length>0&&s.write_shift(0,t,"dbcs"),a?s.slice(0,s.l):s}var XR=gr,fy=kj,Ej=yp;function aT(t){var s=t.slice(t.l,t.l+4),a=s[0]&1,n=s[0]&2;t.l+=4;var i=n===0?vp([0,0,0,0,s[0]&252,s[1],s[2],s[3]],0):Zc(s,0)>>2;return a?i/100:i}function nT(t,s){s==null&&(s=nt(4));var a=0,n=0,i=t*100;if(t==(t|0)&&t>=-536870912&&t<1<<29?n=1:i==(i|0)&&i>=-536870912&&i<1<<29&&(n=1,a=1),n)s.write_shift(-4,((a?i:t)<<2)+(a+2));else throw new Error("unsupported RkNumber "+t)}function rT(t){var s={s:{},e:{}};return s.s.r=t.read_shift(4),s.e.r=t.read_shift(4),s.s.c=t.read_shift(4),s.e.c=t.read_shift(4),s}function QR(t,s){return s||(s=nt(16)),s.write_shift(4,t.s.r),s.write_shift(4,t.e.r),s.write_shift(4,t.s.c),s.write_shift(4,t.e.c),s}var Nd=rT,Zu=QR;function Xu(t){if(t.length-t.l<8)throw"XLS Xnum Buffer underflow";return t.read_shift(8,"f")}function fd(t,s){return(s||nt(8)).write_shift(8,t,"f")}function JR(t){var s={},a=t.read_shift(1),n=a>>>1,i=t.read_shift(1),c=t.read_shift(2,"i"),d=t.read_shift(1),h=t.read_shift(1),f=t.read_shift(1);switch(t.l++,n){case 0:s.auto=1;break;case 1:s.index=i;var g=lL[i];g&&(s.rgb=O2(g));break;case 2:s.rgb=O2([d,h,f]);break;case 3:s.theme=i;break}return c!=0&&(s.tint=c>0?c/32767:c/32768),s}function jp(t,s){if(s||(s=nt(8)),!t||t.auto)return s.write_shift(4,0),s.write_shift(4,0),s;t.index!=null?(s.write_shift(1,2),s.write_shift(1,t.index)):t.theme!=null?(s.write_shift(1,6),s.write_shift(1,t.theme)):(s.write_shift(1,5),s.write_shift(1,0));var a=t.tint||0;if(a>0?a*=32767:a<0&&(a*=32768),s.write_shift(2,a),!t.rgb||t.theme!=null)s.write_shift(2,0),s.write_shift(1,0),s.write_shift(1,0);else{var n=t.rgb||"FFFFFF";typeof n=="number"&&(n=("000000"+n.toString(16)).slice(-6)),s.write_shift(1,parseInt(n.slice(0,2),16)),s.write_shift(1,parseInt(n.slice(2,4),16)),s.write_shift(1,parseInt(n.slice(4,6),16)),s.write_shift(1,255)}return s}function eL(t){var s=t.read_shift(1);t.l++;var a={fBold:s&1,fItalic:s&2,fUnderline:s&4,fStrikeout:s&8,fOutline:s&16,fShadow:s&32,fCondense:s&64,fExtend:s&128};return a}function tL(t,s){s||(s=nt(2));var a=(t.italic?2:0)|(t.strike?8:0)|(t.outline?16:0)|(t.shadow?32:0)|(t.condense?64:0)|(t.extend?128:0);return s.write_shift(1,a),s.write_shift(1,0),s}var iT=2,Jr=3,Fx=11,Np=19,Bx=64,sL=65,aL=71,nL=4108,rL=4126,Jn=80,b2={1:{n:"CodePage",t:iT},2:{n:"Category",t:Jn},3:{n:"PresentationFormat",t:Jn},4:{n:"ByteCount",t:Jr},5:{n:"LineCount",t:Jr},6:{n:"ParagraphCount",t:Jr},7:{n:"SlideCount",t:Jr},8:{n:"NoteCount",t:Jr},9:{n:"HiddenCount",t:Jr},10:{n:"MultimediaClipCount",t:Jr},11:{n:"ScaleCrop",t:Fx},12:{n:"HeadingPairs",t:nL},13:{n:"TitlesOfParts",t:rL},14:{n:"Manager",t:Jn},15:{n:"Company",t:Jn},16:{n:"LinksUpToDate",t:Fx},17:{n:"CharacterCount",t:Jr},19:{n:"SharedDoc",t:Fx},22:{n:"HyperlinksChanged",t:Fx},23:{n:"AppVersion",t:Jr,p:"version"},24:{n:"DigSig",t:sL},26:{n:"ContentType",t:Jn},27:{n:"ContentStatus",t:Jn},28:{n:"Language",t:Jn},29:{n:"Version",t:Jn},255:{},2147483648:{n:"Locale",t:Np},2147483651:{n:"Behavior",t:Np},1919054434:{}},S2={1:{n:"CodePage",t:iT},2:{n:"Title",t:Jn},3:{n:"Subject",t:Jn},4:{n:"Author",t:Jn},5:{n:"Keywords",t:Jn},6:{n:"Comments",t:Jn},7:{n:"Template",t:Jn},8:{n:"LastAuthor",t:Jn},9:{n:"RevNumber",t:Jn},10:{n:"EditTime",t:Bx},11:{n:"LastPrinted",t:Bx},12:{n:"CreatedDate",t:Bx},13:{n:"ModifiedDate",t:Bx},14:{n:"PageCount",t:Jr},15:{n:"WordCount",t:Jr},16:{n:"CharCount",t:Jr},17:{n:"Thumbnail",t:aL},18:{n:"Application",t:Jn},19:{n:"DocSecurity",t:Jr},255:{},2147483648:{n:"Locale",t:Np},2147483651:{n:"Behavior",t:Np},1919054434:{}};function iL(t){return t.map(function(s){return[s>>16&255,s>>8&255,s&255]})}var oL=iL([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),lL=Hr(oL),ef={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},cL={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"},zx={workbooks:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml",xlsm:"application/vnd.ms-excel.sheet.macroEnabled.main+xml",xlsb:"application/vnd.ms-excel.sheet.binary.macroEnabled.main",xlam:"application/vnd.ms-excel.addin.macroEnabled.main+xml",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml"},strs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml",xlsb:"application/vnd.ms-excel.sharedStrings"},comments:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml",xlsb:"application/vnd.ms-excel.comments"},sheets:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml",xlsb:"application/vnd.ms-excel.worksheet"},charts:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml",xlsb:"application/vnd.ms-excel.chartsheet"},dialogs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml",xlsb:"application/vnd.ms-excel.dialogsheet"},macros:{xlsx:"application/vnd.ms-excel.macrosheet+xml",xlsb:"application/vnd.ms-excel.macrosheet"},metadata:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml",xlsb:"application/vnd.ms-excel.sheetMetadata"},styles:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml",xlsb:"application/vnd.ms-excel.styles"}};function oT(){return{workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""}}function lT(t,s){var a=yR(cL),n=[],i;n[n.length]=Cn,n[n.length]=St("Types",null,{xmlns:Un.CT,"xmlns:xsd":Un.xsd,"xmlns:xsi":Un.xsi}),n=n.concat([["xml","application/xml"],["bin","application/vnd.ms-excel.sheet.binary.macroEnabled.main"],["vml","application/vnd.openxmlformats-officedocument.vmlDrawing"],["data","application/vnd.openxmlformats-officedocument.model+data"],["bmp","image/bmp"],["png","image/png"],["gif","image/gif"],["emf","image/x-emf"],["wmf","image/x-wmf"],["jpg","image/jpeg"],["jpeg","image/jpeg"],["tif","image/tiff"],["tiff","image/tiff"],["pdf","application/pdf"],["rels","application/vnd.openxmlformats-package.relationships+xml"]].map(function(f){return St("Default",null,{Extension:f[0],ContentType:f[1]})}));var c=function(f){t[f]&&t[f].length>0&&(i=t[f][0],n[n.length]=St("Override",null,{PartName:(i[0]=="/"?"":"/")+i,ContentType:zx[f][s.bookType]||zx[f].xlsx}))},d=function(f){(t[f]||[]).forEach(function(g){n[n.length]=St("Override",null,{PartName:(g[0]=="/"?"":"/")+g,ContentType:zx[f][s.bookType]||zx[f].xlsx})})},h=function(f){(t[f]||[]).forEach(function(g){n[n.length]=St("Override",null,{PartName:(g[0]=="/"?"":"/")+g,ContentType:a[f][0]})})};return c("workbooks"),d("sheets"),d("charts"),h("themes"),["strs","styles"].forEach(c),["coreprops","extprops","custprops"].forEach(h),h("vba"),h("comments"),h("threadedcomments"),h("drawings"),d("metadata"),h("people"),n.length>2&&(n[n.length]="</Types>",n[1]=n[1].replace("/>",">")),n.join("")}var Js={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function cT(t){var s=t.lastIndexOf("/");return t.slice(0,s+1)+"_rels/"+t.slice(s+1)+".rels"}function ku(t){var s=[Cn,St("Relationships",null,{xmlns:Un.RELS})];return rr(t["!id"]).forEach(function(a){s[s.length]=St("Relationship",null,t["!id"][a])}),s.length>2&&(s[s.length]="</Relationships>",s[1]=s[1].replace("/>",">")),s.join("")}function da(t,s,a,n,i,c){if(i||(i={}),t["!id"]||(t["!id"]={}),t["!idx"]||(t["!idx"]=1),s<0)for(s=t["!idx"];t["!id"]["rId"+s];++s);if(t["!idx"]=s+1,i.Id="rId"+s,i.Type=n,i.Target=a,[Js.HLINK,Js.XPATH,Js.XMISS].indexOf(i.Type)>-1&&(i.TargetMode="External"),t["!id"][i.Id])throw new Error("Cannot rewrite rId "+s);return t["!id"][i.Id]=i,t[("/"+i.Target).replace("//","/")]=i,s}function dL(t){var s=[Cn];s.push(`<manifest:manifest xmlns:manifest="urn:oasis:names:tc:opendocument:xmlns:manifest:1.0" manifest:version="1.2">
`),s.push(`  <manifest:file-entry manifest:full-path="/" manifest:version="1.2" manifest:media-type="application/vnd.oasis.opendocument.spreadsheet"/>
`);for(var a=0;a<t.length;++a)s.push('  <manifest:file-entry manifest:full-path="'+t[a][0]+'" manifest:media-type="'+t[a][1]+`"/>
`);return s.push("</manifest:manifest>"),s.join("")}function _2(t,s,a){return['  <rdf:Description rdf:about="'+t+`">
`,'    <rdf:type rdf:resource="http://docs.oasis-open.org/ns/office/1.2/meta/'+(a||"odf")+"#"+s+`"/>
`,`  </rdf:Description>
`].join("")}function uL(t,s){return['  <rdf:Description rdf:about="'+t+`">
`,'    <ns0:hasPart xmlns:ns0="http://docs.oasis-open.org/ns/office/1.2/meta/pkg#" rdf:resource="'+s+`"/>
`,`  </rdf:Description>
`].join("")}function hL(t){var s=[Cn];s.push(`<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
`);for(var a=0;a!=t.length;++a)s.push(_2(t[a][0],t[a][1])),s.push(uL("",t[a][0]));return s.push(_2("","Document","pkg")),s.push("</rdf:RDF>"),s.join("")}function dT(){return'<office:document-meta xmlns:office="urn:oasis:names:tc:opendocument:xmlns:office:1.0" xmlns:meta="urn:oasis:names:tc:opendocument:xmlns:meta:1.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:xlink="http://www.w3.org/1999/xlink" office:version="1.2"><office:meta><meta:generator>SheetJS '+hp.version+"</meta:generator></office:meta></office:document-meta>"}var nd=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]];function mv(t,s,a,n,i){i[t]!=null||s==null||s===""||(i[t]=s,s=ma(s),n[n.length]=a?St(t,s,a):tr(t,s))}function uT(t,s){var a=s||{},n=[Cn,St("cp:coreProperties",null,{"xmlns:cp":Un.CORE_PROPS,"xmlns:dc":Un.dc,"xmlns:dcterms":Un.dcterms,"xmlns:dcmitype":Un.dcmitype,"xmlns:xsi":Un.xsi})],i={};if(!t&&!a.Props)return n.join("");t&&(t.CreatedDate!=null&&mv("dcterms:created",typeof t.CreatedDate=="string"?t.CreatedDate:my(t.CreatedDate,a.WTF),{"xsi:type":"dcterms:W3CDTF"},n,i),t.ModifiedDate!=null&&mv("dcterms:modified",typeof t.ModifiedDate=="string"?t.ModifiedDate:my(t.ModifiedDate,a.WTF),{"xsi:type":"dcterms:W3CDTF"},n,i));for(var c=0;c!=nd.length;++c){var d=nd[c],h=a.Props&&a.Props[d[1]]!=null?a.Props[d[1]]:t?t[d[1]]:null;h===!0?h="1":h===!1?h="0":typeof h=="number"&&(h=String(h)),h!=null&&mv(d[0],h,null,n,i)}return n.length>2&&(n[n.length]="</cp:coreProperties>",n[1]=n[1].replace("/>",">")),n.join("")}var Eu=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]],hT=["Worksheets","SheetNames","NamedRanges","DefinedNames","Chartsheets","ChartNames"];function mT(t){var s=[],a=St;return t||(t={}),t.Application="SheetJS",s[s.length]=Cn,s[s.length]=St("Properties",null,{xmlns:Un.EXT_PROPS,"xmlns:vt":Un.vt}),Eu.forEach(function(n){if(t[n[1]]!==void 0){var i;switch(n[2]){case"string":i=ma(String(t[n[1]]));break;case"bool":i=t[n[1]]?"true":"false";break}i!==void 0&&(s[s.length]=a(n[0],i))}}),s[s.length]=a("HeadingPairs",a("vt:vector",a("vt:variant","<vt:lpstr>Worksheets</vt:lpstr>")+a("vt:variant",a("vt:i4",String(t.Worksheets))),{size:2,baseType:"variant"})),s[s.length]=a("TitlesOfParts",a("vt:vector",t.SheetNames.map(function(n){return"<vt:lpstr>"+ma(n)+"</vt:lpstr>"}).join(""),{size:t.Worksheets,baseType:"lpstr"})),s.length>2&&(s[s.length]="</Properties>",s[1]=s[1].replace("/>",">")),s.join("")}function fT(t){var s=[Cn,St("Properties",null,{xmlns:Un.CUST_PROPS,"xmlns:vt":Un.vt})];if(!t)return s.join("");var a=1;return rr(t).forEach(function(i){++a,s[s.length]=St("property",AR(t[i]),{fmtid:"{D5CDD505-2E9C-101B-9397-08002B2CF9AE}",pid:a,name:ma(i)})}),s.length>2&&(s[s.length]="</Properties>",s[1]=s[1].replace("/>",">")),s.join("")}var C2={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"};function mL(t,s){var a=[];return rr(C2).map(function(n){for(var i=0;i<nd.length;++i)if(nd[i][1]==n)return nd[i];for(i=0;i<Eu.length;++i)if(Eu[i][1]==n)return Eu[i];throw n}).forEach(function(n){if(t[n[1]]!=null){var i=s&&s.Props&&s.Props[n[1]]!=null?s.Props[n[1]]:t[n[1]];switch(n[2]){case"date":i=new Date(i).toISOString().replace(/\.\d*Z/,"Z");break}typeof i=="number"?i=String(i):i===!0||i===!1?i=i?"1":"0":i instanceof Date&&(i=new Date(i).toISOString().replace(/\.\d*Z/,"")),a.push(tr(C2[n[1]]||n[1],i))}}),St("DocumentProperties",a.join(""),{xmlns:si.o})}function fL(t,s){var a=["Worksheets","SheetNames"],n="CustomDocumentProperties",i=[];return t&&rr(t).forEach(function(c){if(Object.prototype.hasOwnProperty.call(t,c)){for(var d=0;d<nd.length;++d)if(c==nd[d][1])return;for(d=0;d<Eu.length;++d)if(c==Eu[d][1])return;for(d=0;d<a.length;++d)if(c==a[d])return;var h=t[c],f="string";typeof h=="number"?(f="float",h=String(h)):h===!0||h===!1?(f="boolean",h=h?"1":"0"):h=String(h),i.push(St(m2(c),h,{"dt:dt":f}))}}),s&&rr(s).forEach(function(c){if(Object.prototype.hasOwnProperty.call(s,c)&&!(t&&Object.prototype.hasOwnProperty.call(t,c))){var d=s[c],h="string";typeof d=="number"?(h="float",d=String(d)):d===!0||d===!1?(h="boolean",d=d?"1":"0"):d instanceof Date?(h="dateTime.tz",d=d.toISOString()):d=String(d),i.push(St(m2(c),d,{"dt:dt":h}))}}),"<"+n+' xmlns="'+si.o+'">'+i.join("")+"</"+n+">"}function xL(t){var s=typeof t=="string"?new Date(Date.parse(t)):t,a=s.getTime()/1e3+11644473600,n=a%Math.pow(2,32),i=(a-n)/Math.pow(2,32);n*=1e7,i*=1e7;var c=n/Math.pow(2,32)|0;c>0&&(n=n%Math.pow(2,32),i+=c);var d=nt(8);return d.write_shift(4,n),d.write_shift(4,i),d}function T2(t,s){var a=nt(4),n=nt(4);switch(a.write_shift(4,t==80?31:t),t){case 3:n.write_shift(-4,s);break;case 5:n=nt(8),n.write_shift(8,s,"f");break;case 11:n.write_shift(4,s?1:0);break;case 64:n=xL(s);break;case 31:case 80:for(n=nt(4+2*(s.length+1)+(s.length%2?0:2)),n.write_shift(4,s.length+1),n.write_shift(0,s,"dbcs");n.l!=n.length;)n.write_shift(1,0);break;default:throw new Error("TypedPropertyValue unrecognized type "+t+" "+s)}return er([a,n])}var xT=["CodePage","Thumbnail","_PID_LINKBASE","_PID_HLINKS","SystemIdentifier","FMTID"];function pL(t){switch(typeof t){case"boolean":return 11;case"number":return(t|0)==t?3:5;case"string":return 31;case"object":if(t instanceof Date)return 64;break}return-1}function k2(t,s,a){var n=nt(8),i=[],c=[],d=8,h=0,f=nt(8),g=nt(8);if(f.write_shift(4,2),f.write_shift(4,1200),g.write_shift(4,1),c.push(f),i.push(g),d+=8+f.length,!s){g=nt(8),g.write_shift(4,0),i.unshift(g);var p=[nt(4)];for(p[0].write_shift(4,t.length),h=0;h<t.length;++h){var v=t[h][0];for(f=nt(8+2*(v.length+1)+(v.length%2?0:2)),f.write_shift(4,h+2),f.write_shift(4,v.length+1),f.write_shift(0,v,"dbcs");f.l!=f.length;)f.write_shift(1,0);p.push(f)}f=er(p),c.unshift(f),d+=8+f.length}for(h=0;h<t.length;++h)if(!(s&&!s[t[h][0]])&&!(xT.indexOf(t[h][0])>-1||hT.indexOf(t[h][0])>-1)&&t[h][1]!=null){var y=t[h][1],_=0;if(s){_=+s[t[h][0]];var S=a[_];if(S.p=="version"&&typeof y=="string"){var b=y.split(".");y=(+b[0]<<16)+(+b[1]||0)}f=T2(S.t,y)}else{var T=pL(y);T==-1&&(T=31,y=String(y)),f=T2(T,y)}c.push(f),g=nt(8),g.write_shift(4,s?_:2+h),i.push(g),d+=8+f.length}var E=8*(c.length+1);for(h=0;h<c.length;++h)i[h].write_shift(4,E),E+=c[h].length;return n.write_shift(4,d),n.write_shift(4,c.length),er([n].concat(i).concat(c))}function E2(t,s,a,n,i,c){var d=nt(i?68:48),h=[d];d.write_shift(2,65534),d.write_shift(2,0),d.write_shift(4,842412599),d.write_shift(16,ya.utils.consts.HEADER_CLSID,"hex"),d.write_shift(4,i?2:1),d.write_shift(16,s,"hex"),d.write_shift(4,i?68:48);var f=k2(t,a,n);if(h.push(f),i){var g=k2(i,null,null);d.write_shift(16,c,"hex"),d.write_shift(4,68+f.length),h.push(g)}return er(h)}function gL(t,s){s||(s=nt(t));for(var a=0;a<t;++a)s.write_shift(1,0);return s}function vL(t,s){return t.read_shift(s)===1}function wr(t,s){return s||(s=nt(2)),s.write_shift(2,+!!t),s}function pT(t){return t.read_shift(2,"u")}function ji(t,s){return s||(s=nt(2)),s.write_shift(2,t),s}function gT(t,s,a){return a||(a=nt(2)),a.write_shift(1,s=="e"?+t:+!!t),a.write_shift(1,s=="e"?1:0),a}function vT(t,s,a){var n=t.read_shift(a&&a.biff>=12?2:1),i="sbcs-cont";if(a&&a.biff>=8,!a||a.biff==8){var c=t.read_shift(1);c&&(i="dbcs-cont")}else a.biff==12&&(i="wstr");a.biff>=2&&a.biff<=5&&(i="cpstr");var d=n?t.read_shift(n,i):"";return d}function yL(t){var s=t.t||"",a=nt(3);a.write_shift(2,s.length),a.write_shift(1,1);var n=nt(2*s.length);n.write_shift(2*s.length,s,"utf16le");var i=[a,n];return er(i)}function jL(t,s,a){var n;if(a){if(a.biff>=2&&a.biff<=5)return t.read_shift(s,"cpstr");if(a.biff>=12)return t.read_shift(s,"dbcs-cont")}var i=t.read_shift(1);return i===0?n=t.read_shift(s,"sbcs-cont"):n=t.read_shift(s,"dbcs-cont"),n}function NL(t,s,a){var n=t.read_shift(a&&a.biff==2?1:2);return n===0?(t.l++,""):jL(t,n,a)}function wL(t,s,a){if(a.biff>5)return NL(t,s,a);var n=t.read_shift(1);return n===0?(t.l++,""):t.read_shift(n,a.biff<=4||!t.lens?"cpstr":"sbcs-cont")}function yT(t,s,a){return a||(a=nt(3+2*t.length)),a.write_shift(2,t.length),a.write_shift(1,1),a.write_shift(31,t,"utf16le"),a}function A2(t,s){s||(s=nt(6+t.length*2)),s.write_shift(4,1+t.length);for(var a=0;a<t.length;++a)s.write_shift(2,t.charCodeAt(a));return s.write_shift(2,0),s}function bL(t){var s=nt(512),a=0,n=t.Target;n.slice(0,7)=="file://"&&(n=n.slice(7));var i=n.indexOf("#"),c=i>-1?31:23;switch(n.charAt(0)){case"#":c=28;break;case".":c&=-3;break}s.write_shift(4,2),s.write_shift(4,c);var d=[8,6815827,6619237,4849780,83];for(a=0;a<d.length;++a)s.write_shift(4,d[a]);if(c==28)n=n.slice(1),A2(n,s);else if(c&2){for(d="e0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),a=0;a<d.length;++a)s.write_shift(1,parseInt(d[a],16));var h=i>-1?n.slice(0,i):n;for(s.write_shift(4,2*(h.length+1)),a=0;a<h.length;++a)s.write_shift(2,h.charCodeAt(a));s.write_shift(2,0),c&8&&A2(i>-1?n.slice(i+1):"",s)}else{for(d="03 03 00 00 00 00 00 00 c0 00 00 00 00 00 00 46".split(" "),a=0;a<d.length;++a)s.write_shift(1,parseInt(d[a],16));for(var f=0;n.slice(f*3,f*3+3)=="../"||n.slice(f*3,f*3+3)=="..\\";)++f;for(s.write_shift(2,f),s.write_shift(4,n.length-3*f+1),a=0;a<n.length-3*f;++a)s.write_shift(1,n.charCodeAt(a+3*f)&255);for(s.write_shift(1,0),s.write_shift(2,65535),s.write_shift(2,57005),a=0;a<6;++a)s.write_shift(4,0)}return s.slice(0,s.l)}function xd(t,s,a,n){return n||(n=nt(6)),n.write_shift(2,t),n.write_shift(2,s),n.write_shift(2,a||0),n}function SL(t,s,a){var n=a.biff>8?4:2,i=t.read_shift(n),c=t.read_shift(n,"i"),d=t.read_shift(n,"i");return[i,c,d]}function _L(t){var s=t.read_shift(2),a=t.read_shift(2),n=t.read_shift(2),i=t.read_shift(2);return{s:{c:n,r:s},e:{c:i,r:a}}}function jT(t,s){return s||(s=nt(8)),s.write_shift(2,t.s.r),s.write_shift(2,t.e.r),s.write_shift(2,t.s.c),s.write_shift(2,t.e.c),s}function Aj(t,s,a){var n=1536,i=16;switch(a.bookType){case"biff8":break;case"biff5":n=1280,i=8;break;case"biff4":n=4,i=6;break;case"biff3":n=3,i=6;break;case"biff2":n=2,i=4;break;case"xla":break;default:throw new Error("unsupported BIFF version")}var c=nt(i);return c.write_shift(2,n),c.write_shift(2,s),i>4&&c.write_shift(2,29282),i>6&&c.write_shift(2,1997),i>8&&(c.write_shift(2,49161),c.write_shift(2,1),c.write_shift(2,1798),c.write_shift(2,0)),c}function CL(t,s){var a=!s||s.biff==8,n=nt(a?112:54);for(n.write_shift(s.biff==8?2:1,7),a&&n.write_shift(1,0),n.write_shift(4,859007059),n.write_shift(4,5458548|(a?0:536870912));n.l<n.length;)n.write_shift(1,a?0:32);return n}function TL(t,s){var a=!s||s.biff>=8?2:1,n=nt(8+a*t.name.length);n.write_shift(4,t.pos),n.write_shift(1,t.hs||0),n.write_shift(1,t.dt),n.write_shift(1,t.name.length),s.biff>=8&&n.write_shift(1,1),n.write_shift(a*t.name.length,t.name,s.biff<8?"sbcs":"utf16le");var i=n.slice(0,n.l);return i.l=n.l,i}function kL(t,s){var a=nt(8);a.write_shift(4,t.Count),a.write_shift(4,t.Unique);for(var n=[],i=0;i<t.length;++i)n[i]=yL(t[i]);var c=er([a].concat(n));return c.parts=[a.length].concat(n.map(function(d){return d.length})),c}function EL(){var t=nt(18);return t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,29280),t.write_shift(2,17600),t.write_shift(2,56),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,1),t.write_shift(2,500),t}function AL(t){var s=nt(18),a=1718;return t&&t.RTL&&(a|=64),s.write_shift(2,a),s.write_shift(4,0),s.write_shift(4,64),s.write_shift(4,0),s.write_shift(4,0),s}function DL(t,s){var a=t.name||"Arial",n=s&&s.biff==5,i=n?15+a.length:16+2*a.length,c=nt(i);return c.write_shift(2,t.sz*20),c.write_shift(4,0),c.write_shift(2,400),c.write_shift(4,0),c.write_shift(2,0),c.write_shift(1,a.length),n||c.write_shift(1,1),c.write_shift((n?1:2)*a.length,a,n?"sbcs":"utf16le"),c}function PL(t,s,a,n){var i=nt(10);return xd(t,s,n,i),i.write_shift(4,a),i}function OL(t,s,a,n,i){var c=!i||i.biff==8,d=nt(8+ +c+(1+c)*a.length);return xd(t,s,n,d),d.write_shift(2,a.length),c&&d.write_shift(1,1),d.write_shift((1+c)*a.length,a,c?"utf16le":"sbcs"),d}function ML(t,s,a,n){var i=a&&a.biff==5;n||(n=nt(i?3+s.length:5+2*s.length)),n.write_shift(2,t),n.write_shift(i?1:2,s.length),i||n.write_shift(1,1),n.write_shift((i?1:2)*s.length,s,i?"sbcs":"utf16le");var c=n.length>n.l?n.slice(0,n.l):n;return c.l==null&&(c.l=c.length),c}function RL(t,s){var a=s.biff==8||!s.biff?4:2,n=nt(2*a+6);return n.write_shift(a,t.s.r),n.write_shift(a,t.e.r+1),n.write_shift(2,t.s.c),n.write_shift(2,t.e.c+1),n.write_shift(2,0),n}function D2(t,s,a,n){var i=a&&a.biff==5;n||(n=nt(i?16:20)),n.write_shift(2,0),t.style?(n.write_shift(2,t.numFmtId||0),n.write_shift(2,65524)):(n.write_shift(2,t.numFmtId||0),n.write_shift(2,s<<4));var c=0;return t.numFmtId>0&&i&&(c|=1024),n.write_shift(4,c),n.write_shift(4,0),i||n.write_shift(4,0),n.write_shift(2,0),n}function LL(t){var s=nt(8);return s.write_shift(4,0),s.write_shift(2,0),s.write_shift(2,0),s}function IL(t,s,a,n,i,c){var d=nt(8);return xd(t,s,n,d),gT(a,c,d),d}function FL(t,s,a,n){var i=nt(14);return xd(t,s,n,i),fd(a,i),i}function BL(t,s,a){if(a.biff<8)return zL(t,s,a);for(var n=[],i=t.l+s,c=t.read_shift(a.biff>8?4:2);c--!==0;)n.push(SL(t,a.biff>8?12:6,a));if(t.l!=i)throw new Error("Bad ExternSheet: "+t.l+" != "+i);return n}function zL(t,s,a){t[t.l+1]==3&&t[t.l]++;var n=vT(t,s,a);return n.charCodeAt(0)==3?n.slice(1):n}function UL(t){var s=nt(2+t.length*8);s.write_shift(2,t.length);for(var a=0;a<t.length;++a)jT(t[a],s);return s}function VL(t){var s=nt(24),a=Vn(t[0]);s.write_shift(2,a.r),s.write_shift(2,a.r),s.write_shift(2,a.c),s.write_shift(2,a.c);for(var n="d0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),i=0;i<16;++i)s.write_shift(1,parseInt(n[i],16));return er([s,bL(t[1])])}function HL(t){var s=t[1].Tooltip,a=nt(10+2*(s.length+1));a.write_shift(2,2048);var n=Vn(t[0]);a.write_shift(2,n.r),a.write_shift(2,n.r),a.write_shift(2,n.c),a.write_shift(2,n.c);for(var i=0;i<s.length;++i)a.write_shift(2,s.charCodeAt(i));return a.write_shift(2,0),a}function $L(t){return t||(t=nt(4)),t.write_shift(2,1),t.write_shift(2,1),t}function WL(t,s,a){if(!a.cellStyles)return Co(t,s);var n=a&&a.biff>=12?4:2,i=t.read_shift(n),c=t.read_shift(n),d=t.read_shift(n),h=t.read_shift(n),f=t.read_shift(2);n==2&&(t.l+=2);var g={s:i,e:c,w:d,ixfe:h,flags:f};return(a.biff>=5||!a.biff)&&(g.level=f>>8&7),g}function GL(t,s){var a=nt(12);a.write_shift(2,s),a.write_shift(2,s),a.write_shift(2,t.width*256),a.write_shift(2,0);var n=0;return t.hidden&&(n|=1),a.write_shift(1,n),n=t.level||0,a.write_shift(1,n),a.write_shift(2,0),a}function qL(t){for(var s=nt(2*t),a=0;a<t;++a)s.write_shift(2,a+1);return s}function KL(t,s,a){var n=nt(15);return sf(n,t,s),n.write_shift(8,a,"f"),n}function YL(t,s,a){var n=nt(9);return sf(n,t,s),n.write_shift(2,a),n}var ZL=(function(){var t={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},s=yj({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function a(h,f){var g=[],p=md(1);switch(f.type){case"base64":p=Vi(al(h));break;case"binary":p=Vi(h);break;case"buffer":case"array":p=h;break}ti(p,0);var v=p.read_shift(1),y=!!(v&136),_=!1,S=!1;switch(v){case 2:break;case 3:break;case 48:_=!0,y=!0;break;case 49:_=!0,y=!0;break;case 131:break;case 139:break;case 140:S=!0;break;case 245:break;default:throw new Error("DBF Unsupported Version: "+v.toString(16))}var b=0,T=521;v==2&&(b=p.read_shift(2)),p.l+=3,v!=2&&(b=p.read_shift(4)),b>1048576&&(b=1e6),v!=2&&(T=p.read_shift(2));var E=p.read_shift(2),A=f.codepage||1252;v!=2&&(p.l+=16,p.read_shift(1),p[p.l]!==0&&(A=t[p[p.l]]),p.l+=1,p.l+=2),S&&(p.l+=36);for(var O=[],Q={},q=Math.min(p.length,v==2?521:T-10-(_?264:0)),U=S?32:11;p.l<q&&p[p.l]!=13;)switch(Q={},Q.name=mp.utils.decode(A,p.slice(p.l,p.l+U)).replace(/[\u0000\r\n].*$/g,""),p.l+=U,Q.type=String.fromCharCode(p.read_shift(1)),v!=2&&!S&&(Q.offset=p.read_shift(4)),Q.len=p.read_shift(1),v==2&&(Q.offset=p.read_shift(2)),Q.dec=p.read_shift(1),Q.name.length&&O.push(Q),v!=2&&(p.l+=S?13:14),Q.type){case"B":(!_||Q.len!=8)&&f.WTF&&console.log("Skipping "+Q.name+":"+Q.type);break;case"G":case"P":f.WTF&&console.log("Skipping "+Q.name+":"+Q.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+Q.type)}if(p[p.l]!==13&&(p.l=T-1),p.read_shift(1)!==13)throw new Error("DBF Terminator not found "+p.l+" "+p[p.l]);p.l=T;var D=0,M=0;for(g[0]=[],M=0;M!=O.length;++M)g[0][M]=O[M].name;for(;b-- >0;){if(p[p.l]===42){p.l+=E;continue}for(++p.l,g[++D]=[],M=0,M=0;M!=O.length;++M){var P=p.slice(p.l,p.l+O[M].len);p.l+=O[M].len,ti(P,0);var G=mp.utils.decode(A,P);switch(O[M].type){case"C":G.trim().length&&(g[D][M]=G.replace(/\s+$/,""));break;case"D":G.length===8?g[D][M]=new Date(+G.slice(0,4),+G.slice(4,6)-1,+G.slice(6,8)):g[D][M]=G;break;case"F":g[D][M]=parseFloat(G.trim());break;case"+":case"I":g[D][M]=S?P.read_shift(-4,"i")^2147483648:P.read_shift(4,"i");break;case"L":switch(G.trim().toUpperCase()){case"Y":case"T":g[D][M]=!0;break;case"N":case"F":g[D][M]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+G+"|")}break;case"M":if(!y)throw new Error("DBF Unexpected MEMO for type "+v.toString(16));g[D][M]="##MEMO##"+(S?parseInt(G.trim(),10):P.read_shift(4));break;case"N":G=G.replace(/\u0000/g,"").trim(),G&&G!="."&&(g[D][M]=+G||0);break;case"@":g[D][M]=new Date(P.read_shift(-8,"f")-621356832e5);break;case"T":g[D][M]=new Date((P.read_shift(4)-2440588)*864e5+P.read_shift(4));break;case"Y":g[D][M]=P.read_shift(4,"i")/1e4+P.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":g[D][M]=-P.read_shift(-8,"f");break;case"B":if(_&&O[M].len==8){g[D][M]=P.read_shift(8,"f");break}case"G":case"P":P.l+=O[M].len;break;case"0":if(O[M].name==="_NullFlags")break;default:throw new Error("DBF Unsupported data type "+O[M].type)}}}if(v!=2&&p.l<p.length&&p[p.l++]!=26)throw new Error("DBF EOF Marker missing "+(p.l-1)+" of "+p.length+" "+p[p.l-1].toString(16));return f&&f.sheetRows&&(g=g.slice(0,f.sheetRows)),f.DBF=O,g}function n(h,f){var g=f||{};g.dateNF||(g.dateNF="yyyymmdd");var p=Yu(a(h,g),g);return p["!cols"]=g.DBF.map(function(v){return{wch:v.len,DBF:v}}),delete g.DBF,p}function i(h,f){try{return gd(n(h,f),f)}catch(g){if(f&&f.WTF)throw g}return{SheetNames:[],Sheets:{}}}var c={B:8,C:250,L:1,D:8,"?":0,"":0};function d(h,f){var g=f||{};if(+g.codepage>=0&&Am(+g.codepage),g.type=="string")throw new Error("Cannot write DBF to JS string");var p=Ur(),v=Cp(h,{header:1,raw:!0,cellDates:!0}),y=v[0],_=v.slice(1),S=h["!cols"]||[],b=0,T=0,E=0,A=1;for(b=0;b<y.length;++b){if(((S[b]||{}).DBF||{}).name){y[b]=S[b].DBF.name,++E;continue}if(y[b]!=null){if(++E,typeof y[b]=="number"&&(y[b]=y[b].toString(10)),typeof y[b]!="string")throw new Error("DBF Invalid column name "+y[b]+" |"+typeof y[b]+"|");if(y.indexOf(y[b])!==b){for(T=0;T<1024;++T)if(y.indexOf(y[b]+"_"+T)==-1){y[b]+="_"+T;break}}}}var O=Oa(h["!ref"]),Q=[],q=[],U=[];for(b=0;b<=O.e.c-O.s.c;++b){var D="",M="",P=0,G=[];for(T=0;T<_.length;++T)_[T][b]!=null&&G.push(_[T][b]);if(G.length==0||y[b]==null){Q[b]="?";continue}for(T=0;T<G.length;++T){switch(typeof G[T]){case"number":M="B";break;case"string":M="C";break;case"boolean":M="L";break;case"object":M=G[T]instanceof Date?"D":"C";break;default:M="C"}P=Math.max(P,String(G[T]).length),D=D&&D!=M?"C":M}P>250&&(P=250),M=((S[b]||{}).DBF||{}).type,M=="C"&&S[b].DBF.len>P&&(P=S[b].DBF.len),D=="B"&&M=="N"&&(D="N",U[b]=S[b].DBF.dec,P=S[b].DBF.len),q[b]=D=="C"||M=="N"?P:c[D]||0,A+=q[b],Q[b]=D}var K=p.next(32);for(K.write_shift(4,318902576),K.write_shift(4,_.length),K.write_shift(2,296+32*E),K.write_shift(2,A),b=0;b<4;++b)K.write_shift(4,0);for(K.write_shift(4,0|(+s[wC]||3)<<8),b=0,T=0;b<y.length;++b)if(y[b]!=null){var z=p.next(32),J=(y[b].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);z.write_shift(1,J,"sbcs"),z.write_shift(1,Q[b]=="?"?"C":Q[b],"sbcs"),z.write_shift(4,T),z.write_shift(1,q[b]||c[Q[b]]||0),z.write_shift(1,U[b]||0),z.write_shift(1,2),z.write_shift(4,0),z.write_shift(1,0),z.write_shift(4,0),z.write_shift(4,0),T+=q[b]||c[Q[b]]||0}var W=p.next(264);for(W.write_shift(4,13),b=0;b<65;++b)W.write_shift(4,0);for(b=0;b<_.length;++b){var he=p.next(A);for(he.write_shift(1,0),T=0;T<y.length;++T)if(y[T]!=null)switch(Q[T]){case"L":he.write_shift(1,_[b][T]==null?63:_[b][T]?84:70);break;case"B":he.write_shift(8,_[b][T]||0,"f");break;case"N":var V="0";for(typeof _[b][T]=="number"&&(V=_[b][T].toFixed(U[T]||0)),E=0;E<q[T]-V.length;++E)he.write_shift(1,32);he.write_shift(1,V,"sbcs");break;case"D":_[b][T]?(he.write_shift(4,("0000"+_[b][T].getFullYear()).slice(-4),"sbcs"),he.write_shift(2,("00"+(_[b][T].getMonth()+1)).slice(-2),"sbcs"),he.write_shift(2,("00"+_[b][T].getDate()).slice(-2),"sbcs")):he.write_shift(8,"00000000","sbcs");break;case"C":var ae=String(_[b][T]!=null?_[b][T]:"").slice(0,q[T]);for(he.write_shift(1,ae,"sbcs"),E=0;E<q[T]-ae.length;++E)he.write_shift(1,32);break}}return p.next(1).write_shift(1,26),p.end()}return{to_workbook:i,to_sheet:n,from_sheet:d}})(),XL=(function(){var t={AA:"",BA:"",CA:"",DA:195,HA:"",JA:197,AE:"",BE:"",CE:"",HE:"",AI:"",BI:"",CI:"",HI:"",AO:"",BO:"",CO:"",DO:213,HO:"",AU:"",BU:"",CU:"",HU:"",Aa:"",Ba:"",Ca:"",Da:227,Ha:"",Ja:229,Ae:"",Be:"",Ce:"",He:"",Ai:"",Bi:"",Ci:"",Hi:"",Ao:"",Bo:"",Co:"",Do:245,Ho:"",Au:"",Bu:"",Cu:"",Hu:"",KC:"",Kc:"",q:"",z:"",a:"",j:"",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},s=new RegExp("\x1BN("+rr(t).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),a=function(y,_){var S=t[_];return typeof S=="number"?t2(S):S},n=function(y,_,S){var b=_.charCodeAt(0)-32<<4|S.charCodeAt(0)-48;return b==59?y:t2(b)};t["|"]=254;function i(y,_){switch(_.type){case"base64":return c(al(y),_);case"binary":return c(y,_);case"buffer":return c(sa&&Buffer.isBuffer(y)?y.toString("binary"):Xm(y),_);case"array":return c(Xp(y),_)}throw new Error("Unrecognized type "+_.type)}function c(y,_){var S=y.split(/[\n\r]+/),b=-1,T=-1,E=0,A=0,O=[],Q=[],q=null,U={},D=[],M=[],P=[],G=0,K;for(+_.codepage>=0&&Am(+_.codepage);E!==S.length;++E){G=0;var z=S[E].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,n).replace(s,a),J=z.replace(/;;/g,"\0").split(";").map(function(re){return re.replace(/\u0000/g,";")}),W=J[0],he;if(z.length>0)switch(W){case"ID":break;case"E":break;case"B":break;case"O":break;case"W":break;case"P":J[1].charAt(0)=="P"&&Q.push(z.slice(3).replace(/;;/g,";"));break;case"C":var V=!1,ae=!1,ge=!1,Z=!1,ee=-1,te=-1;for(A=1;A<J.length;++A)switch(J[A].charAt(0)){case"A":break;case"X":T=parseInt(J[A].slice(1))-1,ae=!0;break;case"Y":for(b=parseInt(J[A].slice(1))-1,ae||(T=0),K=O.length;K<=b;++K)O[K]=[];break;case"K":he=J[A].slice(1),he.charAt(0)==='"'?he=he.slice(1,he.length-1):he==="TRUE"?he=!0:he==="FALSE"?he=!1:isNaN(el(he))?isNaN(Pm(he).getDate())||(he=Sr(he)):(he=el(he),q!==null&&MC(q)&&(he=FC(he))),V=!0;break;case"E":Z=!0;var X=YI(J[A].slice(1),{r:b,c:T});O[b][T]=[O[b][T],X];break;case"S":ge=!0,O[b][T]=[O[b][T],"S5S"];break;case"G":break;case"R":ee=parseInt(J[A].slice(1))-1;break;case"C":te=parseInt(J[A].slice(1))-1;break;default:if(_&&_.WTF)throw new Error("SYLK bad record "+z)}if(V&&(O[b][T]&&O[b][T].length==2?O[b][T][0]=he:O[b][T]=he,q=null),ge){if(Z)throw new Error("SYLK shared formula cannot have own formula");var ce=ee>-1&&O[ee][te];if(!ce||!ce[1])throw new Error("SYLK shared formula cannot find base");O[b][T][1]=ZI(ce[1],{r:b-ee,c:T-te})}break;case"F":var F=0;for(A=1;A<J.length;++A)switch(J[A].charAt(0)){case"X":T=parseInt(J[A].slice(1))-1,++F;break;case"Y":for(b=parseInt(J[A].slice(1))-1,K=O.length;K<=b;++K)O[K]=[];break;case"M":G=parseInt(J[A].slice(1))/20;break;case"F":break;case"G":break;case"P":q=Q[parseInt(J[A].slice(1))];break;case"S":break;case"D":break;case"N":break;case"W":for(P=J[A].slice(1).split(" "),K=parseInt(P[0],10);K<=parseInt(P[1],10);++K)G=parseInt(P[2],10),M[K-1]=G===0?{hidden:!0}:{wch:G},Dj(M[K-1]);break;case"C":T=parseInt(J[A].slice(1))-1,M[T]||(M[T]={});break;case"R":b=parseInt(J[A].slice(1))-1,D[b]||(D[b]={}),G>0?(D[b].hpt=G,D[b].hpx=_T(G)):G===0&&(D[b].hidden=!0);break;default:if(_&&_.WTF)throw new Error("SYLK bad record "+z)}F<1&&(q=null);break;default:if(_&&_.WTF)throw new Error("SYLK bad record "+z)}}return D.length>0&&(U["!rows"]=D),M.length>0&&(U["!cols"]=M),_&&_.sheetRows&&(O=O.slice(0,_.sheetRows)),[O,U]}function d(y,_){var S=i(y,_),b=S[0],T=S[1],E=Yu(b,_);return rr(T).forEach(function(A){E[A]=T[A]}),E}function h(y,_){return gd(d(y,_),_)}function f(y,_,S,b){var T="C;Y"+(S+1)+";X"+(b+1)+";K";switch(y.t){case"n":T+=y.v||0,y.f&&!y.F&&(T+=";E"+Oj(y.f,{r:S,c:b}));break;case"b":T+=y.v?"TRUE":"FALSE";break;case"e":T+=y.w||y.v;break;case"d":T+='"'+(y.w||y.v)+'"';break;case"s":T+='"'+y.v.replace(/"/g,"").replace(/;/g,";;")+'"';break}return T}function g(y,_){_.forEach(function(S,b){var T="F;W"+(b+1)+" "+(b+1)+" ";S.hidden?T+="0":(typeof S.width=="number"&&!S.wpx&&(S.wpx=wp(S.width)),typeof S.wpx=="number"&&!S.wch&&(S.wch=bp(S.wpx)),typeof S.wch=="number"&&(T+=Math.round(S.wch))),T.charAt(T.length-1)!=" "&&y.push(T)})}function p(y,_){_.forEach(function(S,b){var T="F;";S.hidden?T+="M0;":S.hpt?T+="M"+20*S.hpt+";":S.hpx&&(T+="M"+20*Sp(S.hpx)+";"),T.length>2&&y.push(T+"R"+(b+1))})}function v(y,_){var S=["ID;PWXL;N;E"],b=[],T=Oa(y["!ref"]),E,A=Array.isArray(y),O=`\r
`;S.push("P;PGeneral"),S.push("F;P0;DG0G8;M255"),y["!cols"]&&g(S,y["!cols"]),y["!rows"]&&p(S,y["!rows"]),S.push("B;Y"+(T.e.r-T.s.r+1)+";X"+(T.e.c-T.s.c+1)+";D"+[T.s.c,T.s.r,T.e.c,T.e.r].join(" "));for(var Q=T.s.r;Q<=T.e.r;++Q)for(var q=T.s.c;q<=T.e.c;++q){var U=xa({r:Q,c:q});E=A?(y[Q]||[])[q]:y[U],!(!E||E.v==null&&(!E.f||E.F))&&b.push(f(E,y,Q,q))}return S.join(O)+O+b.join(O)+O+"E"+O}return{to_workbook:h,to_sheet:d,from_sheet:v}})(),QL=(function(){function t(c,d){switch(d.type){case"base64":return s(al(c),d);case"binary":return s(c,d);case"buffer":return s(sa&&Buffer.isBuffer(c)?c.toString("binary"):Xm(c),d);case"array":return s(Xp(c),d)}throw new Error("Unrecognized type "+d.type)}function s(c,d){for(var h=c.split(`
`),f=-1,g=-1,p=0,v=[];p!==h.length;++p){if(h[p].trim()==="BOT"){v[++f]=[],g=0;continue}if(!(f<0)){var y=h[p].trim().split(","),_=y[0],S=y[1];++p;for(var b=h[p]||"";(b.match(/["]/g)||[]).length&1&&p<h.length-1;)b+=`
`+h[++p];switch(b=b.trim(),+_){case-1:if(b==="BOT"){v[++f]=[],g=0;continue}else if(b!=="EOD")throw new Error("Unrecognized DIF special command "+b);break;case 0:b==="TRUE"?v[f][g]=!0:b==="FALSE"?v[f][g]=!1:isNaN(el(S))?isNaN(Pm(S).getDate())?v[f][g]=S:v[f][g]=Sr(S):v[f][g]=el(S),++g;break;case 1:b=b.slice(1,b.length-1),b=b.replace(/""/g,'"'),b&&b.match(/^=".*"$/)&&(b=b.slice(2,-1)),v[f][g++]=b!==""?b:null;break}if(b==="EOD")break}}return d&&d.sheetRows&&(v=v.slice(0,d.sheetRows)),v}function a(c,d){return Yu(t(c,d),d)}function n(c,d){return gd(a(c,d),d)}var i=(function(){var c=function(f,g,p,v,y){f.push(g),f.push(p+","+v),f.push('"'+y.replace(/"/g,'""')+'"')},d=function(f,g,p,v){f.push(g+","+p),f.push(g==1?'"'+v.replace(/"/g,'""')+'"':v)};return function(f){var g=[],p=Oa(f["!ref"]),v,y=Array.isArray(f);c(g,"TABLE",0,1,"sheetjs"),c(g,"VECTORS",0,p.e.r-p.s.r+1,""),c(g,"TUPLES",0,p.e.c-p.s.c+1,""),c(g,"DATA",0,0,"");for(var _=p.s.r;_<=p.e.r;++_){d(g,-1,0,"BOT");for(var S=p.s.c;S<=p.e.c;++S){var b=xa({r:_,c:S});if(v=y?(f[_]||[])[S]:f[b],!v){d(g,1,0,"");continue}switch(v.t){case"n":var T=v.w;!T&&v.v!=null&&(T=v.v),T==null?v.f&&!v.F?d(g,1,0,"="+v.f):d(g,1,0,""):d(g,0,T,"V");break;case"b":d(g,0,v.v?1:0,v.v?"TRUE":"FALSE");break;case"s":d(g,1,0,isNaN(v.v)?v.v:'="'+v.v+'"');break;case"d":v.w||(v.w=ac(v.z||on[14],Vr(Sr(v.v)))),d(g,0,v.w,"V");break;default:d(g,1,0,"")}}}d(g,-1,0,"EOD");var E=`\r
`,A=g.join(E);return A}})();return{to_workbook:n,to_sheet:a,from_sheet:i}})(),NT=(function(){function t(v){return v.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,`
`)}function s(v){return v.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function a(v,y){for(var _=v.split(`
`),S=-1,b=-1,T=0,E=[];T!==_.length;++T){var A=_[T].trim().split(":");if(A[0]==="cell"){var O=Vn(A[1]);if(E.length<=O.r)for(S=E.length;S<=O.r;++S)E[S]||(E[S]=[]);switch(S=O.r,b=O.c,A[2]){case"t":E[S][b]=t(A[3]);break;case"v":E[S][b]=+A[3];break;case"vtf":var Q=A[A.length-1];case"vtc":switch(A[3]){case"nl":E[S][b]=!!+A[4];break;default:E[S][b]=+A[4];break}A[2]=="vtf"&&(E[S][b]=[E[S][b],Q])}}}return y&&y.sheetRows&&(E=E.slice(0,y.sheetRows)),E}function n(v,y){return Yu(a(v,y),y)}function i(v,y){return gd(n(v,y),y)}var c=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join(`
`),d=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join(`
`)+`
`,h=["# SocialCalc Spreadsheet Control Save","part:sheet"].join(`
`),f="--SocialCalcSpreadsheetControlSave--";function g(v){if(!v||!v["!ref"])return"";for(var y=[],_=[],S,b="",T=ni(v["!ref"]),E=Array.isArray(v),A=T.s.r;A<=T.e.r;++A)for(var O=T.s.c;O<=T.e.c;++O)if(b=xa({r:A,c:O}),S=E?(v[A]||[])[O]:v[b],!(!S||S.v==null||S.t==="z")){switch(_=["cell",b,"t"],S.t){case"s":case"str":_.push(s(S.v));break;case"n":S.f?(_[2]="vtf",_[3]="n",_[4]=S.v,_[5]=s(S.f)):(_[2]="v",_[3]=S.v);break;case"b":_[2]="vt"+(S.f?"f":"c"),_[3]="nl",_[4]=S.v?"1":"0",_[5]=s(S.f||(S.v?"TRUE":"FALSE"));break;case"d":var Q=Vr(Sr(S.v));_[2]="vtc",_[3]="nd",_[4]=""+Q,_[5]=S.w||ac(S.z||on[14],Q);break;case"e":continue}y.push(_.join(":"))}return y.push("sheet:c:"+(T.e.c-T.s.c+1)+":r:"+(T.e.r-T.s.r+1)+":tvf:1"),y.push("valueformat:1:text-wiki"),y.join(`
`)}function p(v){return[c,d,h,d,g(v),f].join(`
`)}return{to_workbook:i,to_sheet:n,from_sheet:p}})(),JL=(function(){function t(p,v,y,_,S){S.raw?v[y][_]=p:p===""||(p==="TRUE"?v[y][_]=!0:p==="FALSE"?v[y][_]=!1:isNaN(el(p))?isNaN(Pm(p).getDate())?v[y][_]=p:v[y][_]=Sr(p):v[y][_]=el(p))}function s(p,v){var y=v||{},_=[];if(!p||p.length===0)return _;for(var S=p.split(/[\r\n]/),b=S.length-1;b>=0&&S[b].length===0;)--b;for(var T=10,E=0,A=0;A<=b;++A)E=S[A].indexOf(" "),E==-1?E=S[A].length:E++,T=Math.max(T,E);for(A=0;A<=b;++A){_[A]=[];var O=0;for(t(S[A].slice(0,T).trim(),_,A,O,y),O=1;O<=(S[A].length-T)/10+1;++O)t(S[A].slice(T+(O-1)*10,T+O*10).trim(),_,A,O,y)}return y.sheetRows&&(_=_.slice(0,y.sheetRows)),_}var a={44:",",9:"	",59:";",124:"|"},n={44:3,9:2,59:1,124:0};function i(p){for(var v={},y=!1,_=0,S=0;_<p.length;++_)(S=p.charCodeAt(_))==34?y=!y:!y&&S in a&&(v[S]=(v[S]||0)+1);S=[];for(_ in v)Object.prototype.hasOwnProperty.call(v,_)&&S.push([v[_],_]);if(!S.length){v=n;for(_ in v)Object.prototype.hasOwnProperty.call(v,_)&&S.push([v[_],_])}return S.sort(function(b,T){return b[0]-T[0]||n[b[1]]-n[T[1]]}),a[S.pop()[1]]||44}function c(p,v){var y=v||{},_="",S=y.dense?[]:{},b={s:{c:0,r:0},e:{c:0,r:0}};p.slice(0,4)=="sep="?p.charCodeAt(5)==13&&p.charCodeAt(6)==10?(_=p.charAt(4),p=p.slice(7)):p.charCodeAt(5)==13||p.charCodeAt(5)==10?(_=p.charAt(4),p=p.slice(6)):_=i(p.slice(0,1024)):y&&y.FS?_=y.FS:_=i(p.slice(0,1024));var T=0,E=0,A=0,O=0,Q=0,q=_.charCodeAt(0),U=!1,D=0,M=p.charCodeAt(0);p=p.replace(/\r\n/mg,`
`);var P=y.dateNF!=null?xR(y.dateNF):null;function G(){var K=p.slice(O,Q),z={};if(K.charAt(0)=='"'&&K.charAt(K.length-1)=='"'&&(K=K.slice(1,-1).replace(/""/g,'"')),K.length===0)z.t="z";else if(y.raw)z.t="s",z.v=K;else if(K.trim().length===0)z.t="s",z.v=K;else if(K.charCodeAt(0)==61)K.charCodeAt(1)==34&&K.charCodeAt(K.length-1)==34?(z.t="s",z.v=K.slice(2,-1).replace(/""/g,'"')):XI(K)?(z.t="n",z.f=K.slice(1)):(z.t="s",z.v=K);else if(K=="TRUE")z.t="b",z.v=!0;else if(K=="FALSE")z.t="b",z.v=!1;else if(!isNaN(A=el(K)))z.t="n",y.cellText!==!1&&(z.w=K),z.v=A;else if(!isNaN(Pm(K).getDate())||P&&K.match(P)){z.z=y.dateNF||on[14];var J=0;P&&K.match(P)&&(K=pR(K,y.dateNF,K.match(P)||[]),J=1),y.cellDates?(z.t="d",z.v=Sr(K,J)):(z.t="n",z.v=Vr(Sr(K,J))),y.cellText!==!1&&(z.w=ac(z.z,z.v instanceof Date?Vr(z.v):z.v)),y.cellNF||delete z.z}else z.t="s",z.v=K;if(z.t=="z"||(y.dense?(S[T]||(S[T]=[]),S[T][E]=z):S[xa({c:E,r:T})]=z),O=Q+1,M=p.charCodeAt(O),b.e.c<E&&(b.e.c=E),b.e.r<T&&(b.e.r=T),D==q)++E;else if(E=0,++T,y.sheetRows&&y.sheetRows<=T)return!0}e:for(;Q<p.length;++Q)switch(D=p.charCodeAt(Q)){case 34:M===34&&(U=!U);break;case q:case 10:case 13:if(!U&&G())break e;break}return Q-O>0&&G(),S["!ref"]=bn(b),S}function d(p,v){return!(v&&v.PRN)||v.FS||p.slice(0,4)=="sep="||p.indexOf("	")>=0||p.indexOf(",")>=0||p.indexOf(";")>=0?c(p,v):Yu(s(p,v),v)}function h(p,v){var y="",_=v.type=="string"?[0,0,0,0]:u7(p,v);switch(v.type){case"base64":y=al(p);break;case"binary":y=p;break;case"buffer":v.codepage==65001?y=p.toString("utf8"):v.codepage&&typeof mp<"u"||(y=sa&&Buffer.isBuffer(p)?p.toString("binary"):Xm(p));break;case"array":y=Xp(p);break;case"string":y=p;break;default:throw new Error("Unrecognized type "+v.type)}return _[0]==239&&_[1]==187&&_[2]==191?y=fm(y.slice(3)):v.type!="string"&&v.type!="buffer"&&v.codepage==65001?y=fm(y):v.type=="binary"&&typeof mp<"u",y.slice(0,19)=="socialcalc:version:"?NT.to_sheet(v.type=="string"?y:fm(y),v):d(y,v)}function f(p,v){return gd(h(p,v),v)}function g(p){for(var v=[],y=Oa(p["!ref"]),_,S=Array.isArray(p),b=y.s.r;b<=y.e.r;++b){for(var T=[],E=y.s.c;E<=y.e.c;++E){var A=xa({r:b,c:E});if(_=S?(p[b]||[])[E]:p[A],!_||_.v==null){T.push("          ");continue}for(var O=(_.w||(nl(_),_.w)||"").slice(0,10);O.length<10;)O+=" ";T.push(O+(E===0?" ":""))}v.push(T.join(""))}return v.join(`
`)}return{to_workbook:f,to_sheet:h,from_sheet:g}})(),P2=(function(){function t(X,ce,F){if(X){ti(X,X.l||0);for(var re=F.Enum||ee;X.l<X.length;){var de=X.read_shift(2),me=re[de]||re[65535],De=X.read_shift(2),Ne=X.l+De,pe=me.f&&me.f(X,De,F);if(X.l=Ne,ce(pe,me,de))return}}}function s(X,ce){switch(ce.type){case"base64":return a(Vi(al(X)),ce);case"binary":return a(Vi(X),ce);case"buffer":case"array":return a(X,ce)}throw"Unsupported type "+ce.type}function a(X,ce){if(!X)return X;var F=ce||{},re=F.dense?[]:{},de="Sheet1",me="",De=0,Ne={},pe=[],Le=[],ot={s:{r:0,c:0},e:{r:0,c:0}},Pt=F.sheetRows||0;if(X[2]==0&&(X[3]==8||X[3]==9)&&X.length>=16&&X[14]==5&&X[15]===108)throw new Error("Unsupported Works 3 for Mac file");if(X[2]==2)F.Enum=ee,t(X,function(yt,ys,Es){switch(Es){case 0:F.vers=yt,yt>=4096&&(F.qpro=!0);break;case 6:ot=yt;break;case 204:yt&&(me=yt);break;case 222:me=yt;break;case 15:case 51:F.qpro||(yt[1].v=yt[1].v.slice(1));case 13:case 14:case 16:Es==14&&(yt[2]&112)==112&&(yt[2]&15)>1&&(yt[2]&15)<15&&(yt[1].z=F.dateNF||on[14],F.cellDates&&(yt[1].t="d",yt[1].v=FC(yt[1].v))),F.qpro&&yt[3]>De&&(re["!ref"]=bn(ot),Ne[de]=re,pe.push(de),re=F.dense?[]:{},ot={s:{r:0,c:0},e:{r:0,c:0}},De=yt[3],de=me||"Sheet"+(De+1),me="");var Hs=F.dense?(re[yt[0].r]||[])[yt[0].c]:re[xa(yt[0])];if(Hs){Hs.t=yt[1].t,Hs.v=yt[1].v,yt[1].z!=null&&(Hs.z=yt[1].z),yt[1].f!=null&&(Hs.f=yt[1].f);break}F.dense?(re[yt[0].r]||(re[yt[0].r]=[]),re[yt[0].r][yt[0].c]=yt[1]):re[xa(yt[0])]=yt[1];break}},F);else if(X[2]==26||X[2]==14)F.Enum=te,X[2]==14&&(F.qpro=!0,X.l=0),t(X,function(yt,ys,Es){switch(Es){case 204:de=yt;break;case 22:yt[1].v=yt[1].v.slice(1);case 23:case 24:case 25:case 37:case 39:case 40:if(yt[3]>De&&(re["!ref"]=bn(ot),Ne[de]=re,pe.push(de),re=F.dense?[]:{},ot={s:{r:0,c:0},e:{r:0,c:0}},De=yt[3],de="Sheet"+(De+1)),Pt>0&&yt[0].r>=Pt)break;F.dense?(re[yt[0].r]||(re[yt[0].r]=[]),re[yt[0].r][yt[0].c]=yt[1]):re[xa(yt[0])]=yt[1],ot.e.c<yt[0].c&&(ot.e.c=yt[0].c),ot.e.r<yt[0].r&&(ot.e.r=yt[0].r);break;case 27:yt[14e3]&&(Le[yt[14e3][0]]=yt[14e3][1]);break;case 1537:Le[yt[0]]=yt[1],yt[0]==De&&(de=yt[1]);break}},F);else throw new Error("Unrecognized LOTUS BOF "+X[2]);if(re["!ref"]=bn(ot),Ne[me||de]=re,pe.push(me||de),!Le.length)return{SheetNames:pe,Sheets:Ne};for(var Dt={},Ct=[],Lt=0;Lt<Le.length;++Lt)Ne[pe[Lt]]?(Ct.push(Le[Lt]||pe[Lt]),Dt[Le[Lt]]=Ne[Le[Lt]]||Ne[pe[Lt]]):(Ct.push(Le[Lt]),Dt[Le[Lt]]={"!ref":"A1"});return{SheetNames:Ct,Sheets:Dt}}function n(X,ce){var F=ce||{};if(+F.codepage>=0&&Am(+F.codepage),F.type=="string")throw new Error("Cannot write WK1 to JS string");var re=Ur(),de=Oa(X["!ref"]),me=Array.isArray(X),De=[];_t(re,0,c(1030)),_t(re,6,f(de));for(var Ne=Math.min(de.e.r,8191),pe=de.s.r;pe<=Ne;++pe)for(var Le=ar(pe),ot=de.s.c;ot<=de.e.c;++ot){pe===de.s.r&&(De[ot]=pr(ot));var Pt=De[ot]+Le,Dt=me?(X[pe]||[])[ot]:X[Pt];if(!(!Dt||Dt.t=="z"))if(Dt.t=="n")(Dt.v|0)==Dt.v&&Dt.v>=-32768&&Dt.v<=32767?_t(re,13,_(pe,ot,Dt.v)):_t(re,14,b(pe,ot,Dt.v));else{var Ct=nl(Dt);_t(re,15,v(pe,ot,Ct.slice(0,239)))}}return _t(re,1),re.end()}function i(X,ce){var F=ce||{};if(+F.codepage>=0&&Am(+F.codepage),F.type=="string")throw new Error("Cannot write WK3 to JS string");var re=Ur();_t(re,0,d(X));for(var de=0,me=0;de<X.SheetNames.length;++de)(X.Sheets[X.SheetNames[de]]||{})["!ref"]&&_t(re,27,Z(X.SheetNames[de],me++));var De=0;for(de=0;de<X.SheetNames.length;++de){var Ne=X.Sheets[X.SheetNames[de]];if(!(!Ne||!Ne["!ref"])){for(var pe=Oa(Ne["!ref"]),Le=Array.isArray(Ne),ot=[],Pt=Math.min(pe.e.r,8191),Dt=pe.s.r;Dt<=Pt;++Dt)for(var Ct=ar(Dt),Lt=pe.s.c;Lt<=pe.e.c;++Lt){Dt===pe.s.r&&(ot[Lt]=pr(Lt));var yt=ot[Lt]+Ct,ys=Le?(Ne[Dt]||[])[Lt]:Ne[yt];if(!(!ys||ys.t=="z"))if(ys.t=="n")_t(re,23,G(Dt,Lt,De,ys.v));else{var Es=nl(ys);_t(re,22,D(Dt,Lt,De,Es.slice(0,239)))}}++De}}return _t(re,1),re.end()}function c(X){var ce=nt(2);return ce.write_shift(2,X),ce}function d(X){var ce=nt(26);ce.write_shift(2,4096),ce.write_shift(2,4),ce.write_shift(4,0);for(var F=0,re=0,de=0,me=0;me<X.SheetNames.length;++me){var De=X.SheetNames[me],Ne=X.Sheets[De];if(!(!Ne||!Ne["!ref"])){++de;var pe=ni(Ne["!ref"]);F<pe.e.r&&(F=pe.e.r),re<pe.e.c&&(re=pe.e.c)}}return F>8191&&(F=8191),ce.write_shift(2,F),ce.write_shift(1,de),ce.write_shift(1,re),ce.write_shift(2,0),ce.write_shift(2,0),ce.write_shift(1,1),ce.write_shift(1,2),ce.write_shift(4,0),ce.write_shift(4,0),ce}function h(X,ce,F){var re={s:{c:0,r:0},e:{c:0,r:0}};return ce==8&&F.qpro?(re.s.c=X.read_shift(1),X.l++,re.s.r=X.read_shift(2),re.e.c=X.read_shift(1),X.l++,re.e.r=X.read_shift(2),re):(re.s.c=X.read_shift(2),re.s.r=X.read_shift(2),ce==12&&F.qpro&&(X.l+=2),re.e.c=X.read_shift(2),re.e.r=X.read_shift(2),ce==12&&F.qpro&&(X.l+=2),re.s.c==65535&&(re.s.c=re.e.c=re.s.r=re.e.r=0),re)}function f(X){var ce=nt(8);return ce.write_shift(2,X.s.c),ce.write_shift(2,X.s.r),ce.write_shift(2,X.e.c),ce.write_shift(2,X.e.r),ce}function g(X,ce,F){var re=[{c:0,r:0},{t:"n",v:0},0,0];return F.qpro&&F.vers!=20768?(re[0].c=X.read_shift(1),re[3]=X.read_shift(1),re[0].r=X.read_shift(2),X.l+=2):(re[2]=X.read_shift(1),re[0].c=X.read_shift(2),re[0].r=X.read_shift(2)),re}function p(X,ce,F){var re=X.l+ce,de=g(X,ce,F);if(de[1].t="s",F.vers==20768){X.l++;var me=X.read_shift(1);return de[1].v=X.read_shift(me,"utf8"),de}return F.qpro&&X.l++,de[1].v=X.read_shift(re-X.l,"cstr"),de}function v(X,ce,F){var re=nt(7+F.length);re.write_shift(1,255),re.write_shift(2,ce),re.write_shift(2,X),re.write_shift(1,39);for(var de=0;de<re.length;++de){var me=F.charCodeAt(de);re.write_shift(1,me>=128?95:me)}return re.write_shift(1,0),re}function y(X,ce,F){var re=g(X,ce,F);return re[1].v=X.read_shift(2,"i"),re}function _(X,ce,F){var re=nt(7);return re.write_shift(1,255),re.write_shift(2,ce),re.write_shift(2,X),re.write_shift(2,F,"i"),re}function S(X,ce,F){var re=g(X,ce,F);return re[1].v=X.read_shift(8,"f"),re}function b(X,ce,F){var re=nt(13);return re.write_shift(1,255),re.write_shift(2,ce),re.write_shift(2,X),re.write_shift(8,F,"f"),re}function T(X,ce,F){var re=X.l+ce,de=g(X,ce,F);if(de[1].v=X.read_shift(8,"f"),F.qpro)X.l=re;else{var me=X.read_shift(2);Q(X.slice(X.l,X.l+me),de),X.l+=me}return de}function E(X,ce,F){var re=ce&32768;return ce&=-32769,ce=(re?X:0)+(ce>=8192?ce-16384:ce),(re?"":"$")+(F?pr(ce):ar(ce))}var A={51:["FALSE",0],52:["TRUE",0],70:["LEN",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],111:["T",1]},O=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function Q(X,ce){ti(X,0);for(var F=[],re=0,de="",me="",De="",Ne="";X.l<X.length;){var pe=X[X.l++];switch(pe){case 0:F.push(X.read_shift(8,"f"));break;case 1:me=E(ce[0].c,X.read_shift(2),!0),de=E(ce[0].r,X.read_shift(2),!1),F.push(me+de);break;case 2:{var Le=E(ce[0].c,X.read_shift(2),!0),ot=E(ce[0].r,X.read_shift(2),!1);me=E(ce[0].c,X.read_shift(2),!0),de=E(ce[0].r,X.read_shift(2),!1),F.push(Le+ot+":"+me+de)}break;case 3:if(X.l<X.length){console.error("WK1 premature formula end");return}break;case 4:F.push("("+F.pop()+")");break;case 5:F.push(X.read_shift(2));break;case 6:{for(var Pt="";pe=X[X.l++];)Pt+=String.fromCharCode(pe);F.push('"'+Pt.replace(/"/g,'""')+'"')}break;case 8:F.push("-"+F.pop());break;case 23:F.push("+"+F.pop());break;case 22:F.push("NOT("+F.pop()+")");break;case 20:case 21:Ne=F.pop(),De=F.pop(),F.push(["AND","OR"][pe-20]+"("+De+","+Ne+")");break;default:if(pe<32&&O[pe])Ne=F.pop(),De=F.pop(),F.push(De+O[pe]+Ne);else if(A[pe]){if(re=A[pe][1],re==69&&(re=X[X.l++]),re>F.length){console.error("WK1 bad formula parse 0x"+pe.toString(16)+":|"+F.join("|")+"|");return}var Dt=F.slice(-re);F.length-=re,F.push(A[pe][0]+"("+Dt.join(",")+")")}else return pe<=7?console.error("WK1 invalid opcode "+pe.toString(16)):pe<=24?console.error("WK1 unsupported op "+pe.toString(16)):pe<=30?console.error("WK1 invalid opcode "+pe.toString(16)):pe<=115?console.error("WK1 unsupported function opcode "+pe.toString(16)):console.error("WK1 unrecognized opcode "+pe.toString(16))}}F.length==1?ce[1].f=""+F[0]:console.error("WK1 bad formula parse |"+F.join("|")+"|")}function q(X){var ce=[{c:0,r:0},{t:"n",v:0},0];return ce[0].r=X.read_shift(2),ce[3]=X[X.l++],ce[0].c=X[X.l++],ce}function U(X,ce){var F=q(X);return F[1].t="s",F[1].v=X.read_shift(ce-4,"cstr"),F}function D(X,ce,F,re){var de=nt(6+re.length);de.write_shift(2,X),de.write_shift(1,F),de.write_shift(1,ce),de.write_shift(1,39);for(var me=0;me<re.length;++me){var De=re.charCodeAt(me);de.write_shift(1,De>=128?95:De)}return de.write_shift(1,0),de}function M(X,ce){var F=q(X);F[1].v=X.read_shift(2);var re=F[1].v>>1;if(F[1].v&1)switch(re&7){case 0:re=(re>>3)*5e3;break;case 1:re=(re>>3)*500;break;case 2:re=(re>>3)/20;break;case 3:re=(re>>3)/200;break;case 4:re=(re>>3)/2e3;break;case 5:re=(re>>3)/2e4;break;case 6:re=(re>>3)/16;break;case 7:re=(re>>3)/64;break}return F[1].v=re,F}function P(X,ce){var F=q(X),re=X.read_shift(4),de=X.read_shift(4),me=X.read_shift(2);if(me==65535)return re===0&&de===3221225472?(F[1].t="e",F[1].v=15):re===0&&de===3489660928?(F[1].t="e",F[1].v=42):F[1].v=0,F;var De=me&32768;return me=(me&32767)-16446,F[1].v=(1-De*2)*(de*Math.pow(2,me+32)+re*Math.pow(2,me)),F}function G(X,ce,F,re){var de=nt(14);if(de.write_shift(2,X),de.write_shift(1,F),de.write_shift(1,ce),re==0)return de.write_shift(4,0),de.write_shift(4,0),de.write_shift(2,65535),de;var me=0,De=0,Ne=0,pe=0;return re<0&&(me=1,re=-re),De=Math.log2(re)|0,re/=Math.pow(2,De-31),pe=re>>>0,(pe&2147483648)==0&&(re/=2,++De,pe=re>>>0),re-=pe,pe|=2147483648,pe>>>=0,re*=Math.pow(2,32),Ne=re>>>0,de.write_shift(4,Ne),de.write_shift(4,pe),De+=16383+(me?32768:0),de.write_shift(2,De),de}function K(X,ce){var F=P(X);return X.l+=ce-14,F}function z(X,ce){var F=q(X),re=X.read_shift(4);return F[1].v=re>>6,F}function J(X,ce){var F=q(X),re=X.read_shift(8,"f");return F[1].v=re,F}function W(X,ce){var F=J(X);return X.l+=ce-10,F}function he(X,ce){return X[X.l+ce-1]==0?X.read_shift(ce,"cstr"):""}function V(X,ce){var F=X[X.l++];F>ce-1&&(F=ce-1);for(var re="";re.length<F;)re+=String.fromCharCode(X[X.l++]);return re}function ae(X,ce,F){if(!(!F.qpro||ce<21)){var re=X.read_shift(1);X.l+=17,X.l+=1,X.l+=2;var de=X.read_shift(ce-21,"cstr");return[re,de]}}function ge(X,ce){for(var F={},re=X.l+ce;X.l<re;){var de=X.read_shift(2);if(de==14e3){for(F[de]=[0,""],F[de][0]=X.read_shift(2);X[X.l];)F[de][1]+=String.fromCharCode(X[X.l]),X.l++;X.l++}}return F}function Z(X,ce){var F=nt(5+X.length);F.write_shift(2,14e3),F.write_shift(2,ce);for(var re=0;re<X.length;++re){var de=X.charCodeAt(re);F[F.l++]=de>127?95:de}return F[F.l++]=0,F}var ee={0:{n:"BOF",f:pT},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:h},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f:y},14:{n:"NUMBER",f:S},15:{n:"LABEL",f:p},16:{n:"FORMULA",f:T},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f:p},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:he},222:{n:"SHEETNAMELP",f:V},65535:{n:""}},te={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:U},23:{n:"NUMBER17",f:P},24:{n:"NUMBER18",f:M},25:{n:"FORMULA19",f:K},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:ge},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:z},38:{n:"??"},39:{n:"NUMBER27",f:J},40:{n:"FORMULA28",f:W},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:he},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:ae},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};return{sheet_to_wk1:n,book_to_wk3:i,to_workbook:s}})(),eI=/^\s|\s$|[\t\n\r]/;function wT(t,s){if(!s.bookSST)return"";var a=[Cn];a[a.length]=St("sst",null,{xmlns:Ku[0],count:t.Count,uniqueCount:t.Unique});for(var n=0;n!=t.length;++n)if(t[n]!=null){var i=t[n],c="<si>";i.r?c+=i.r:(c+="<t",i.t||(i.t=""),i.t.match(eI)&&(c+=' xml:space="preserve"'),c+=">"+ma(i.t)+"</t>"),c+="</si>",a[a.length]=c}return a.length>2&&(a[a.length]="</sst>",a[1]=a[1].replace("/>",">")),a.join("")}function tI(t){return[t.read_shift(4),t.read_shift(4)]}function sI(t,s){return s||(s=nt(8)),s.write_shift(4,t.Count),s.write_shift(4,t.Unique),s}var aI=qR;function nI(t){var s=Ur();xt(s,159,sI(t));for(var a=0;a<t.length;++a)xt(s,19,aI(t[a]));return xt(s,160),s.end()}function rI(t){for(var s=[],a=t.split(""),n=0;n<a.length;++n)s[n]=a[n].charCodeAt(0);return s}function bT(t){var s=0,a,n=rI(t),i=n.length+1,c,d,h,f,g;for(a=md(i),a[0]=n.length,c=1;c!=i;++c)a[c]=n[c-1];for(c=i-1;c>=0;--c)d=a[c],h=(s&16384)===0?0:1,f=s<<1&32767,g=h|f,s=g^d;return s^52811}var iI=(function(){function t(i,c){switch(c.type){case"base64":return s(al(i),c);case"binary":return s(i,c);case"buffer":return s(sa&&Buffer.isBuffer(i)?i.toString("binary"):Xm(i),c);case"array":return s(Xp(i),c)}throw new Error("Unrecognized type "+c.type)}function s(i,c){var d=c||{},h=d.dense?[]:{},f=i.match(/\\trowd.*?\\row\b/g);if(!f.length)throw new Error("RTF missing table");var g={s:{c:0,r:0},e:{c:0,r:f.length-1}};return f.forEach(function(p,v){Array.isArray(h)&&(h[v]=[]);for(var y=/\\\w+\b/g,_=0,S,b=-1;S=y.exec(p);){switch(S[0]){case"\\cell":var T=p.slice(_,y.lastIndex-S[0].length);if(T[0]==" "&&(T=T.slice(1)),++b,T.length){var E={v:T,t:"s"};Array.isArray(h)?h[v][b]=E:h[xa({r:v,c:b})]=E}break}_=y.lastIndex}b>g.e.c&&(g.e.c=b)}),h["!ref"]=bn(g),h}function a(i,c){return gd(t(i,c),c)}function n(i){for(var c=["{\\rtf1\\ansi"],d=Oa(i["!ref"]),h,f=Array.isArray(i),g=d.s.r;g<=d.e.r;++g){c.push("\\trowd\\trautofit1");for(var p=d.s.c;p<=d.e.c;++p)c.push("\\cellx"+(p+1));for(c.push("\\pard\\intbl"),p=d.s.c;p<=d.e.c;++p){var v=xa({r:g,c:p});h=f?(i[g]||[])[p]:i[v],!(!h||h.v==null&&(!h.f||h.F))&&(c.push(" "+(h.w||(nl(h),h.w))),c.push("\\cell"))}c.push("\\pard\\intbl\\row")}return c.join("")+"}"}return{to_workbook:a,to_sheet:t,from_sheet:n}})();function O2(t){for(var s=0,a=1;s!=3;++s)a=a*256+(t[s]>255?255:t[s]<0?0:t[s]);return a.toString(16).toUpperCase().slice(1)}var oI=6,tl=oI;function wp(t){return Math.floor((t+Math.round(128/tl)/256)*tl)}function bp(t){return Math.floor((t-5)/tl*100+.5)/100}function xy(t){return Math.round((t*tl+5)/tl*256)/256}function Dj(t){t.width?(t.wpx=wp(t.width),t.wch=bp(t.wpx),t.MDW=tl):t.wpx?(t.wch=bp(t.wpx),t.width=xy(t.wch),t.MDW=tl):typeof t.wch=="number"&&(t.width=xy(t.wch),t.wpx=wp(t.width),t.MDW=tl),t.customWidth&&delete t.customWidth}var lI=96,ST=lI;function Sp(t){return t*96/ST}function _T(t){return t*ST/96}function cI(t){var s=["<numFmts>"];return[[5,8],[23,26],[41,44],[50,392]].forEach(function(a){for(var n=a[0];n<=a[1];++n)t[n]!=null&&(s[s.length]=St("numFmt",null,{numFmtId:n,formatCode:ma(t[n])}))}),s.length===1?"":(s[s.length]="</numFmts>",s[0]=St("numFmts",null,{count:s.length-2}).replace("/>",">"),s.join(""))}function dI(t){var s=[];return s[s.length]=St("cellXfs",null),t.forEach(function(a){s[s.length]=St("xf",null,a)}),s[s.length]="</cellXfs>",s.length===2?"":(s[0]=St("cellXfs",null,{count:s.length-2}).replace("/>",">"),s.join(""))}function CT(t,s){var a=[Cn,St("styleSheet",null,{xmlns:Ku[0],"xmlns:vt":Un.vt})],n;return t.SSF&&(n=cI(t.SSF))!=null&&(a[a.length]=n),a[a.length]='<fonts count="1"><font><sz val="12"/><color theme="1"/><name val="Calibri"/><family val="2"/><scheme val="minor"/></font></fonts>',a[a.length]='<fills count="2"><fill><patternFill patternType="none"/></fill><fill><patternFill patternType="gray125"/></fill></fills>',a[a.length]='<borders count="1"><border><left/><right/><top/><bottom/><diagonal/></border></borders>',a[a.length]='<cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0"/></cellStyleXfs>',(n=dI(s.cellXfs))&&(a[a.length]=n),a[a.length]='<cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0"/></cellStyles>',a[a.length]='<dxfs count="0"/>',a[a.length]='<tableStyles count="0" defaultTableStyle="TableStyleMedium9" defaultPivotStyle="PivotStyleMedium4"/>',a.length>2&&(a[a.length]="</styleSheet>",a[1]=a[1].replace("/>",">")),a.join("")}function uI(t,s){var a=t.read_shift(2),n=gr(t);return[a,n]}function hI(t,s,a){a||(a=nt(6+4*s.length)),a.write_shift(2,t),Hn(s,a);var n=a.length>a.l?a.slice(0,a.l):a;return a.l==null&&(a.l=a.length),n}function mI(t,s,a){var n={};n.sz=t.read_shift(2)/20;var i=eL(t);i.fItalic&&(n.italic=1),i.fCondense&&(n.condense=1),i.fExtend&&(n.extend=1),i.fShadow&&(n.shadow=1),i.fOutline&&(n.outline=1),i.fStrikeout&&(n.strike=1);var c=t.read_shift(2);switch(c===700&&(n.bold=1),t.read_shift(2)){case 1:n.vertAlign="superscript";break;case 2:n.vertAlign="subscript";break}var d=t.read_shift(1);d!=0&&(n.underline=d);var h=t.read_shift(1);h>0&&(n.family=h);var f=t.read_shift(1);switch(f>0&&(n.charset=f),t.l++,n.color=JR(t),t.read_shift(1)){case 1:n.scheme="major";break;case 2:n.scheme="minor";break}return n.name=gr(t),n}function fI(t,s){s||(s=nt(153)),s.write_shift(2,t.sz*20),tL(t,s),s.write_shift(2,t.bold?700:400);var a=0;t.vertAlign=="superscript"?a=1:t.vertAlign=="subscript"&&(a=2),s.write_shift(2,a),s.write_shift(1,t.underline||0),s.write_shift(1,t.family||0),s.write_shift(1,t.charset||0),s.write_shift(1,0),jp(t.color,s);var n=0;return n=2,s.write_shift(1,n),Hn(t.name,s),s.length>s.l?s.slice(0,s.l):s}var xI=["none","solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"],fv,pI=Co;function M2(t,s){s||(s=nt(84)),fv||(fv=yj(xI));var a=fv[t.patternType];a==null&&(a=40),s.write_shift(4,a);var n=0;if(a!=40)for(jp({auto:1},s),jp({auto:1},s);n<12;++n)s.write_shift(4,0);else{for(;n<4;++n)s.write_shift(4,0);for(;n<12;++n)s.write_shift(4,0)}return s.length>s.l?s.slice(0,s.l):s}function gI(t,s){var a=t.l+s,n=t.read_shift(2),i=t.read_shift(2);return t.l=a,{ixfe:n,numFmtId:i}}function TT(t,s,a){a||(a=nt(16)),a.write_shift(2,s||0),a.write_shift(2,t.numFmtId||0),a.write_shift(2,0),a.write_shift(2,0),a.write_shift(2,0),a.write_shift(1,0),a.write_shift(1,0);var n=0;return a.write_shift(1,n),a.write_shift(1,0),a.write_shift(1,0),a.write_shift(1,0),a}function sm(t,s){return s||(s=nt(10)),s.write_shift(1,0),s.write_shift(1,0),s.write_shift(4,0),s.write_shift(4,0),s}var vI=Co;function yI(t,s){return s||(s=nt(51)),s.write_shift(1,0),sm(null,s),sm(null,s),sm(null,s),sm(null,s),sm(null,s),s.length>s.l?s.slice(0,s.l):s}function jI(t,s){return s||(s=nt(52)),s.write_shift(4,t.xfId),s.write_shift(2,1),s.write_shift(1,0),s.write_shift(1,0),yp(t.name||"",s),s.length>s.l?s.slice(0,s.l):s}function NI(t,s,a){var n=nt(2052);return n.write_shift(4,t),yp(s,n),yp(a,n),n.length>n.l?n.slice(0,n.l):n}function wI(t,s){if(s){var a=0;[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var i=n[0];i<=n[1];++i)s[i]!=null&&++a}),a!=0&&(xt(t,615,Yi(a)),[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var i=n[0];i<=n[1];++i)s[i]!=null&&xt(t,44,hI(i,s[i]))}),xt(t,616))}}function bI(t){var s=1;xt(t,611,Yi(s)),xt(t,43,fI({sz:12,color:{theme:1},name:"Calibri",family:2})),xt(t,612)}function SI(t){var s=2;xt(t,603,Yi(s)),xt(t,45,M2({patternType:"none"})),xt(t,45,M2({patternType:"gray125"})),xt(t,604)}function _I(t){var s=1;xt(t,613,Yi(s)),xt(t,46,yI()),xt(t,614)}function CI(t){var s=1;xt(t,626,Yi(s)),xt(t,47,TT({numFmtId:0},65535)),xt(t,627)}function TI(t,s){xt(t,617,Yi(s.length)),s.forEach(function(a){xt(t,47,TT(a,0))}),xt(t,618)}function kI(t){var s=1;xt(t,619,Yi(s)),xt(t,48,jI({xfId:0,name:"Normal"})),xt(t,620)}function EI(t){var s=0;xt(t,505,Yi(s)),xt(t,506)}function AI(t){var s=0;xt(t,508,NI(s,"TableStyleMedium9","PivotStyleMedium4")),xt(t,509)}function DI(t,s){var a=Ur();return xt(a,278),wI(a,t.SSF),bI(a),SI(a),_I(a),CI(a),TI(a,s.cellXfs),kI(a),EI(a),AI(a),xt(a,279),a.end()}function kT(t,s){if(s&&s.themeXLSX)return s.themeXLSX;if(t&&typeof t.raw=="string")return t.raw;var a=[Cn];return a[a.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',a[a.length]="<a:themeElements>",a[a.length]='<a:clrScheme name="Office">',a[a.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',a[a.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',a[a.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',a[a.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',a[a.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',a[a.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',a[a.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',a[a.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',a[a.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',a[a.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',a[a.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',a[a.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',a[a.length]="</a:clrScheme>",a[a.length]='<a:fontScheme name="Office">',a[a.length]="<a:majorFont>",a[a.length]='<a:latin typeface="Cambria"/>',a[a.length]='<a:ea typeface=""/>',a[a.length]='<a:cs typeface=""/>',a[a.length]='<a:font script="Jpan" typeface=" "/>',a[a.length]='<a:font script="Hang" typeface=" "/>',a[a.length]='<a:font script="Hans" typeface=""/>',a[a.length]='<a:font script="Hant" typeface=""/>',a[a.length]='<a:font script="Arab" typeface="Times New Roman"/>',a[a.length]='<a:font script="Hebr" typeface="Times New Roman"/>',a[a.length]='<a:font script="Thai" typeface="Tahoma"/>',a[a.length]='<a:font script="Ethi" typeface="Nyala"/>',a[a.length]='<a:font script="Beng" typeface="Vrinda"/>',a[a.length]='<a:font script="Gujr" typeface="Shruti"/>',a[a.length]='<a:font script="Khmr" typeface="MoolBoran"/>',a[a.length]='<a:font script="Knda" typeface="Tunga"/>',a[a.length]='<a:font script="Guru" typeface="Raavi"/>',a[a.length]='<a:font script="Cans" typeface="Euphemia"/>',a[a.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',a[a.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',a[a.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',a[a.length]='<a:font script="Thaa" typeface="MV Boli"/>',a[a.length]='<a:font script="Deva" typeface="Mangal"/>',a[a.length]='<a:font script="Telu" typeface="Gautami"/>',a[a.length]='<a:font script="Taml" typeface="Latha"/>',a[a.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',a[a.length]='<a:font script="Orya" typeface="Kalinga"/>',a[a.length]='<a:font script="Mlym" typeface="Kartika"/>',a[a.length]='<a:font script="Laoo" typeface="DokChampa"/>',a[a.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',a[a.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',a[a.length]='<a:font script="Viet" typeface="Times New Roman"/>',a[a.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',a[a.length]='<a:font script="Geor" typeface="Sylfaen"/>',a[a.length]="</a:majorFont>",a[a.length]="<a:minorFont>",a[a.length]='<a:latin typeface="Calibri"/>',a[a.length]='<a:ea typeface=""/>',a[a.length]='<a:cs typeface=""/>',a[a.length]='<a:font script="Jpan" typeface=" "/>',a[a.length]='<a:font script="Hang" typeface=" "/>',a[a.length]='<a:font script="Hans" typeface=""/>',a[a.length]='<a:font script="Hant" typeface=""/>',a[a.length]='<a:font script="Arab" typeface="Arial"/>',a[a.length]='<a:font script="Hebr" typeface="Arial"/>',a[a.length]='<a:font script="Thai" typeface="Tahoma"/>',a[a.length]='<a:font script="Ethi" typeface="Nyala"/>',a[a.length]='<a:font script="Beng" typeface="Vrinda"/>',a[a.length]='<a:font script="Gujr" typeface="Shruti"/>',a[a.length]='<a:font script="Khmr" typeface="DaunPenh"/>',a[a.length]='<a:font script="Knda" typeface="Tunga"/>',a[a.length]='<a:font script="Guru" typeface="Raavi"/>',a[a.length]='<a:font script="Cans" typeface="Euphemia"/>',a[a.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',a[a.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',a[a.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',a[a.length]='<a:font script="Thaa" typeface="MV Boli"/>',a[a.length]='<a:font script="Deva" typeface="Mangal"/>',a[a.length]='<a:font script="Telu" typeface="Gautami"/>',a[a.length]='<a:font script="Taml" typeface="Latha"/>',a[a.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',a[a.length]='<a:font script="Orya" typeface="Kalinga"/>',a[a.length]='<a:font script="Mlym" typeface="Kartika"/>',a[a.length]='<a:font script="Laoo" typeface="DokChampa"/>',a[a.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',a[a.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',a[a.length]='<a:font script="Viet" typeface="Arial"/>',a[a.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',a[a.length]='<a:font script="Geor" typeface="Sylfaen"/>',a[a.length]="</a:minorFont>",a[a.length]="</a:fontScheme>",a[a.length]='<a:fmtScheme name="Office">',a[a.length]="<a:fillStyleLst>",a[a.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',a[a.length]='<a:gradFill rotWithShape="1">',a[a.length]="<a:gsLst>",a[a.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',a[a.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',a[a.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',a[a.length]="</a:gsLst>",a[a.length]='<a:lin ang="16200000" scaled="1"/>',a[a.length]="</a:gradFill>",a[a.length]='<a:gradFill rotWithShape="1">',a[a.length]="<a:gsLst>",a[a.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',a[a.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',a[a.length]="</a:gsLst>",a[a.length]='<a:lin ang="16200000" scaled="0"/>',a[a.length]="</a:gradFill>",a[a.length]="</a:fillStyleLst>",a[a.length]="<a:lnStyleLst>",a[a.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',a[a.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',a[a.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',a[a.length]="</a:lnStyleLst>",a[a.length]="<a:effectStyleLst>",a[a.length]="<a:effectStyle>",a[a.length]="<a:effectLst>",a[a.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',a[a.length]="</a:effectLst>",a[a.length]="</a:effectStyle>",a[a.length]="<a:effectStyle>",a[a.length]="<a:effectLst>",a[a.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',a[a.length]="</a:effectLst>",a[a.length]="</a:effectStyle>",a[a.length]="<a:effectStyle>",a[a.length]="<a:effectLst>",a[a.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',a[a.length]="</a:effectLst>",a[a.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',a[a.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',a[a.length]="</a:effectStyle>",a[a.length]="</a:effectStyleLst>",a[a.length]="<a:bgFillStyleLst>",a[a.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',a[a.length]='<a:gradFill rotWithShape="1">',a[a.length]="<a:gsLst>",a[a.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',a[a.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',a[a.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',a[a.length]="</a:gsLst>",a[a.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',a[a.length]="</a:gradFill>",a[a.length]='<a:gradFill rotWithShape="1">',a[a.length]="<a:gsLst>",a[a.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',a[a.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',a[a.length]="</a:gsLst>",a[a.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',a[a.length]="</a:gradFill>",a[a.length]="</a:bgFillStyleLst>",a[a.length]="</a:fmtScheme>",a[a.length]="</a:themeElements>",a[a.length]="<a:objectDefaults>",a[a.length]="<a:spDef>",a[a.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',a[a.length]="</a:spDef>",a[a.length]="<a:lnDef>",a[a.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',a[a.length]="</a:lnDef>",a[a.length]="</a:objectDefaults>",a[a.length]="<a:extraClrSchemeLst/>",a[a.length]="</a:theme>",a.join("")}function PI(t,s){return{flags:t.read_shift(4),version:t.read_shift(4),name:gr(t)}}function OI(t){var s=nt(12+2*t.name.length);return s.write_shift(4,t.flags),s.write_shift(4,t.version),Hn(t.name,s),s.slice(0,s.l)}function MI(t){for(var s=[],a=t.read_shift(4);a-- >0;)s.push([t.read_shift(4),t.read_shift(4)]);return s}function RI(t){var s=nt(4+8*t.length);s.write_shift(4,t.length);for(var a=0;a<t.length;++a)s.write_shift(4,t[a][0]),s.write_shift(4,t[a][1]);return s}function LI(t,s){var a=nt(8+2*s.length);return a.write_shift(4,t),Hn(s,a),a.slice(0,a.l)}function II(t){return t.l+=4,t.read_shift(4)!=0}function FI(t,s){var a=nt(8);return a.write_shift(4,t),a.write_shift(4,1),a}function BI(){var t=Ur();return xt(t,332),xt(t,334,Yi(1)),xt(t,335,OI({name:"XLDAPR",version:12e4,flags:3496657072})),xt(t,336),xt(t,339,LI(1,"XLDAPR")),xt(t,52),xt(t,35,Yi(514)),xt(t,4096,Yi(0)),xt(t,4097,ji(1)),xt(t,36),xt(t,53),xt(t,340),xt(t,337,FI(1)),xt(t,51,RI([[1,0]])),xt(t,338),xt(t,333),t.end()}function ET(){var t=[Cn];return t.push(`<metadata xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:xlrd="http://schemas.microsoft.com/office/spreadsheetml/2017/richdata" xmlns:xda="http://schemas.microsoft.com/office/spreadsheetml/2017/dynamicarray">
  <metadataTypes count="1">
    <metadataType name="XLDAPR" minSupportedVersion="120000" copy="1" pasteAll="1" pasteValues="1" merge="1" splitFirst="1" rowColShift="1" clearFormats="1" clearComments="1" assign="1" coerce="1" cellMeta="1"/>
  </metadataTypes>
  <futureMetadata name="XLDAPR" count="1">
    <bk>
      <extLst>
        <ext uri="{bdbb8cdc-fa1e-496e-a857-3c3f30c029c3}">
          <xda:dynamicArrayProperties fDynamic="1" fCollapsed="0"/>
        </ext>
      </extLst>
    </bk>
  </futureMetadata>
  <cellMetadata count="1">
    <bk>
      <rc t="1" v="0"/>
    </bk>
  </cellMetadata>
</metadata>`),t.join("")}function zI(t){var s={};s.i=t.read_shift(4);var a={};a.r=t.read_shift(4),a.c=t.read_shift(4),s.r=xa(a);var n=t.read_shift(1);return n&2&&(s.l="1"),n&8&&(s.a="1"),s}var gu=1024;function AT(t,s){for(var a=[21600,21600],n=["m0,0l0",a[1],a[0],a[1],a[0],"0xe"].join(","),i=[St("xml",null,{"xmlns:v":si.v,"xmlns:o":si.o,"xmlns:x":si.x,"xmlns:mv":si.mv}).replace(/\/>/,">"),St("o:shapelayout",St("o:idmap",null,{"v:ext":"edit",data:t}),{"v:ext":"edit"}),St("v:shapetype",[St("v:stroke",null,{joinstyle:"miter"}),St("v:path",null,{gradientshapeok:"t","o:connecttype":"rect"})].join(""),{id:"_x0000_t202","o:spt":202,coordsize:a.join(","),path:n})];gu<t*1e3;)gu+=1e3;return s.forEach(function(c){var d=Vn(c[0]),h={color2:"#BEFF82",type:"gradient"};h.type=="gradient"&&(h.angle="-180");var f=h.type=="gradient"?St("o:fill",null,{type:"gradientUnscaled","v:ext":"view"}):null,g=St("v:fill",f,h),p={on:"t",obscured:"t"};++gu,i=i.concat(["<v:shape"+Mm({id:"_x0000_s"+gu,type:"#_x0000_t202",style:"position:absolute; margin-left:80pt;margin-top:5pt;width:104pt;height:64pt;z-index:10"+(c[1].hidden?";visibility:hidden":""),fillcolor:"#ECFAD4",strokecolor:"#edeaa1"})+">",g,St("v:shadow",null,p),St("v:path",null,{"o:connecttype":"none"}),'<v:textbox><div style="text-align:left"></div></v:textbox>','<x:ClientData ObjectType="Note">',"<x:MoveWithCells/>","<x:SizeWithCells/>",tr("x:Anchor",[d.c+1,0,d.r+1,0,d.c+3,20,d.r+5,20].join(",")),tr("x:AutoFill","False"),tr("x:Row",String(d.r)),tr("x:Column",String(d.c)),c[1].hidden?"":"<x:Visible/>","</x:ClientData>","</v:shape>"])}),i.push("</xml>"),i.join("")}function DT(t){var s=[Cn,St("comments",null,{xmlns:Ku[0]})],a=[];return s.push("<authors>"),t.forEach(function(n){n[1].forEach(function(i){var c=ma(i.a);a.indexOf(c)==-1&&(a.push(c),s.push("<author>"+c+"</author>")),i.T&&i.ID&&a.indexOf("tc="+i.ID)==-1&&(a.push("tc="+i.ID),s.push("<author>tc="+i.ID+"</author>"))})}),a.length==0&&(a.push("SheetJ5"),s.push("<author>SheetJ5</author>")),s.push("</authors>"),s.push("<commentList>"),t.forEach(function(n){var i=0,c=[];if(n[1][0]&&n[1][0].T&&n[1][0].ID?i=a.indexOf("tc="+n[1][0].ID):n[1].forEach(function(f){f.a&&(i=a.indexOf(ma(f.a))),c.push(f.t||"")}),s.push('<comment ref="'+n[0]+'" authorId="'+i+'"><text>'),c.length<=1)s.push(tr("t",ma(c[0]||"")));else{for(var d=`Comment:
    `+c[0]+`
`,h=1;h<c.length;++h)d+=`Reply:
    `+c[h]+`
`;s.push(tr("t",ma(d)))}s.push("</text></comment>")}),s.push("</commentList>"),s.length>2&&(s[s.length]="</comments>",s[1]=s[1].replace("/>",">")),s.join("")}function UI(t,s,a){var n=[Cn,St("ThreadedComments",null,{xmlns:Un.TCMNT}).replace(/[\/]>/,">")];return t.forEach(function(i){var c="";(i[1]||[]).forEach(function(d,h){if(!d.T){delete d.ID;return}d.a&&s.indexOf(d.a)==-1&&s.push(d.a);var f={ref:i[0],id:"{54EE7951-7262-4200-6969-"+("000000000000"+a.tcid++).slice(-12)+"}"};h==0?c=f.id:f.parentId=c,d.ID=f.id,d.a&&(f.personId="{54EE7950-7262-4200-6969-"+("000000000000"+s.indexOf(d.a)).slice(-12)+"}"),n.push(St("threadedComment",tr("text",d.t||""),f))})}),n.push("</ThreadedComments>"),n.join("")}function VI(t){var s=[Cn,St("personList",null,{xmlns:Un.TCMNT,"xmlns:x":Ku[0]}).replace(/[\/]>/,">")];return t.forEach(function(a,n){s.push(St("person",null,{displayName:a,id:"{54EE7950-7262-4200-6969-"+("000000000000"+n).slice(-12)+"}",userId:a,providerId:"None"}))}),s.push("</personList>"),s.join("")}function HI(t){var s={};s.iauthor=t.read_shift(4);var a=Nd(t);return s.rfx=a.s,s.ref=xa(a.s),t.l+=16,s}function $I(t,s){return s==null&&(s=nt(36)),s.write_shift(4,t[1].iauthor),Zu(t[0],s),s.write_shift(4,0),s.write_shift(4,0),s.write_shift(4,0),s.write_shift(4,0),s}var WI=gr;function GI(t){return Hn(t.slice(0,54))}function qI(t){var s=Ur(),a=[];return xt(s,628),xt(s,630),t.forEach(function(n){n[1].forEach(function(i){a.indexOf(i.a)>-1||(a.push(i.a.slice(0,54)),xt(s,632,GI(i.a)))})}),xt(s,631),xt(s,633),t.forEach(function(n){n[1].forEach(function(i){i.iauthor=a.indexOf(i.a);var c={s:Vn(n[0]),e:Vn(n[0])};xt(s,635,$I([c,i])),i.t&&i.t.length>0&&xt(s,637,YR(i)),xt(s,636),delete i.iauthor})}),xt(s,634),xt(s,629),s.end()}function KI(t,s){s.FullPaths.forEach(function(a,n){if(n!=0){var i=a.replace(/[^\/]*[\/]/,"/_VBA_PROJECT_CUR/");i.slice(-1)!=="/"&&ya.utils.cfb_add(t,i,s.FileIndex[n].content)}})}var PT=["xlsb","xlsm","xlam","biff8","xla"],YI=(function(){var t=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,s={r:0,c:0};function a(n,i,c,d){var h=!1,f=!1;c.length==0?f=!0:c.charAt(0)=="["&&(f=!0,c=c.slice(1,-1)),d.length==0?h=!0:d.charAt(0)=="["&&(h=!0,d=d.slice(1,-1));var g=c.length>0?parseInt(c,10)|0:0,p=d.length>0?parseInt(d,10)|0:0;return h?p+=s.c:--p,f?g+=s.r:--g,i+(h?"":"$")+pr(p)+(f?"":"$")+ar(g)}return function(i,c){return s=c,i.replace(t,a)}})(),Pj=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,Oj=(function(){return function(s,a){return s.replace(Pj,function(n,i,c,d,h,f){var g=Cj(d)-(c?0:a.c),p=_j(f)-(h?0:a.r),v=p==0?"":h?p+1:"["+p+"]",y=g==0?"":c?g+1:"["+g+"]";return i+"R"+v+"C"+y})}})();function ZI(t,s){return t.replace(Pj,function(a,n,i,c,d,h){return n+(i=="$"?i+c:pr(Cj(c)+s.c))+(d=="$"?d+h:ar(_j(h)+s.r))})}function XI(t){return t.length!=1}function jn(t){t.l+=1}function nc(t,s){var a=t.read_shift(2);return[a&16383,a>>14&1,a>>15&1]}function OT(t,s,a){var n=2;if(a){if(a.biff>=2&&a.biff<=5)return MT(t);a.biff==12&&(n=4)}var i=t.read_shift(n),c=t.read_shift(n),d=nc(t),h=nc(t);return{s:{r:i,c:d[0],cRel:d[1],rRel:d[2]},e:{r:c,c:h[0],cRel:h[1],rRel:h[2]}}}function MT(t){var s=nc(t),a=nc(t),n=t.read_shift(1),i=t.read_shift(1);return{s:{r:s[0],c:n,cRel:s[1],rRel:s[2]},e:{r:a[0],c:i,cRel:a[1],rRel:a[2]}}}function QI(t,s,a){if(a.biff<8)return MT(t);var n=t.read_shift(a.biff==12?4:2),i=t.read_shift(a.biff==12?4:2),c=nc(t),d=nc(t);return{s:{r:n,c:c[0],cRel:c[1],rRel:c[2]},e:{r:i,c:d[0],cRel:d[1],rRel:d[2]}}}function RT(t,s,a){if(a&&a.biff>=2&&a.biff<=5)return JI(t);var n=t.read_shift(a&&a.biff==12?4:2),i=nc(t);return{r:n,c:i[0],cRel:i[1],rRel:i[2]}}function JI(t){var s=nc(t),a=t.read_shift(1);return{r:s[0],c:a,cRel:s[1],rRel:s[2]}}function eF(t){var s=t.read_shift(2),a=t.read_shift(2);return{r:s,c:a&255,fQuoted:!!(a&16384),cRel:a>>15,rRel:a>>15}}function tF(t,s,a){var n=a&&a.biff?a.biff:8;if(n>=2&&n<=5)return sF(t);var i=t.read_shift(n>=12?4:2),c=t.read_shift(2),d=(c&16384)>>14,h=(c&32768)>>15;if(c&=16383,h==1)for(;i>524287;)i-=1048576;if(d==1)for(;c>8191;)c=c-16384;return{r:i,c,cRel:d,rRel:h}}function sF(t){var s=t.read_shift(2),a=t.read_shift(1),n=(s&32768)>>15,i=(s&16384)>>14;return s&=16383,n==1&&s>=8192&&(s=s-16384),i==1&&a>=128&&(a=a-256),{r:s,c:a,cRel:i,rRel:n}}function aF(t,s,a){var n=(t[t.l++]&96)>>5,i=OT(t,a.biff>=2&&a.biff<=5?6:8,a);return[n,i]}function nF(t,s,a){var n=(t[t.l++]&96)>>5,i=t.read_shift(2,"i"),c=8;if(a)switch(a.biff){case 5:t.l+=12,c=6;break;case 12:c=12;break}var d=OT(t,c,a);return[n,i,d]}function rF(t,s,a){var n=(t[t.l++]&96)>>5;return t.l+=a&&a.biff>8?12:a.biff<8?6:8,[n]}function iF(t,s,a){var n=(t[t.l++]&96)>>5,i=t.read_shift(2),c=8;if(a)switch(a.biff){case 5:t.l+=12,c=6;break;case 12:c=12;break}return t.l+=c,[n,i]}function oF(t,s,a){var n=(t[t.l++]&96)>>5,i=QI(t,s-1,a);return[n,i]}function lF(t,s,a){var n=(t[t.l++]&96)>>5;return t.l+=a.biff==2?6:a.biff==12?14:7,[n]}function R2(t){var s=t[t.l+1]&1,a=1;return t.l+=4,[s,a]}function cF(t,s,a){t.l+=2;for(var n=t.read_shift(a&&a.biff==2?1:2),i=[],c=0;c<=n;++c)i.push(t.read_shift(a&&a.biff==2?1:2));return i}function dF(t,s,a){var n=t[t.l+1]&255?1:0;return t.l+=2,[n,t.read_shift(a&&a.biff==2?1:2)]}function uF(t,s,a){var n=t[t.l+1]&255?1:0;return t.l+=2,[n,t.read_shift(a&&a.biff==2?1:2)]}function hF(t){var s=t[t.l+1]&255?1:0;return t.l+=2,[s,t.read_shift(2)]}function mF(t,s,a){var n=t[t.l+1]&255?1:0;return t.l+=a&&a.biff==2?3:4,[n]}function LT(t){var s=t.read_shift(1),a=t.read_shift(1);return[s,a]}function fF(t){return t.read_shift(2),LT(t)}function xF(t){return t.read_shift(2),LT(t)}function pF(t,s,a){var n=(t[t.l]&96)>>5;t.l+=1;var i=RT(t,0,a);return[n,i]}function gF(t,s,a){var n=(t[t.l]&96)>>5;t.l+=1;var i=tF(t,0,a);return[n,i]}function vF(t,s,a){var n=(t[t.l]&96)>>5;t.l+=1;var i=t.read_shift(2);a&&a.biff==5&&(t.l+=12);var c=RT(t,0,a);return[n,i,c]}function yF(t,s,a){var n=(t[t.l]&96)>>5;t.l+=1;var i=t.read_shift(a&&a.biff<=3?1:2);return[y8[i],BT[i],n]}function jF(t,s,a){var n=t[t.l++],i=t.read_shift(1),c=a&&a.biff<=3?[n==88?-1:0,t.read_shift(1)]:NF(t);return[i,(c[0]===0?BT:v8)[c[1]]]}function NF(t){return[t[t.l+1]>>7,t.read_shift(2)&32767]}function wF(t,s,a){t.l+=a&&a.biff==2?3:4}function bF(t,s,a){if(t.l++,a&&a.biff==12)return[t.read_shift(4,"i"),0];var n=t.read_shift(2),i=t.read_shift(a&&a.biff==2?1:2);return[n,i]}function SF(t){return t.l++,ef[t.read_shift(1)]}function _F(t){return t.l++,t.read_shift(2)}function CF(t){return t.l++,t.read_shift(1)!==0}function TF(t){return t.l++,Xu(t)}function kF(t,s,a){return t.l++,vT(t,s-1,a)}function EF(t,s){var a=[t.read_shift(1)];if(s==12)switch(a[0]){case 2:a[0]=4;break;case 4:a[0]=16;break;case 0:a[0]=1;break;case 1:a[0]=2;break}switch(a[0]){case 4:a[1]=vL(t,1)?"TRUE":"FALSE",s!=12&&(t.l+=7);break;case 37:case 16:a[1]=ef[t[t.l]],t.l+=s==12?4:8;break;case 0:t.l+=8;break;case 1:a[1]=Xu(t);break;case 2:a[1]=wL(t,0,{biff:s>0&&s<8?2:s});break;default:throw new Error("Bad SerAr: "+a[0])}return a}function AF(t,s,a){for(var n=t.read_shift(a.biff==12?4:2),i=[],c=0;c!=n;++c)i.push((a.biff==12?Nd:_L)(t));return i}function DF(t,s,a){var n=0,i=0;a.biff==12?(n=t.read_shift(4),i=t.read_shift(4)):(i=1+t.read_shift(1),n=1+t.read_shift(2)),a.biff>=2&&a.biff<8&&(--n,--i==0&&(i=256));for(var c=0,d=[];c!=n&&(d[c]=[]);++c)for(var h=0;h!=i;++h)d[c][h]=EF(t,a.biff);return d}function PF(t,s,a){var n=t.read_shift(1)>>>5&3,i=!a||a.biff>=8?4:2,c=t.read_shift(i);switch(a.biff){case 2:t.l+=5;break;case 3:case 4:t.l+=8;break;case 5:t.l+=12;break}return[n,0,c]}function OF(t,s,a){if(a.biff==5)return MF(t);var n=t.read_shift(1)>>>5&3,i=t.read_shift(2),c=t.read_shift(4);return[n,i,c]}function MF(t){var s=t.read_shift(1)>>>5&3,a=t.read_shift(2,"i");t.l+=8;var n=t.read_shift(2);return t.l+=12,[s,a,n]}function RF(t,s,a){var n=t.read_shift(1)>>>5&3;t.l+=a&&a.biff==2?3:4;var i=t.read_shift(a&&a.biff==2?1:2);return[n,i]}function LF(t,s,a){var n=t.read_shift(1)>>>5&3,i=t.read_shift(a&&a.biff==2?1:2);return[n,i]}function IF(t,s,a){var n=t.read_shift(1)>>>5&3;return t.l+=4,a.biff<8&&t.l--,a.biff==12&&(t.l+=2),[n]}function FF(t,s,a){var n=(t[t.l++]&96)>>5,i=t.read_shift(2),c=4;if(a)switch(a.biff){case 5:c=15;break;case 12:c=6;break}return t.l+=c,[n,i]}var BF=Co,zF=Co,UF=Co;function tf(t,s,a){return t.l+=2,[eF(t)]}function Mj(t){return t.l+=6,[]}var VF=tf,HF=Mj,$F=Mj,WF=tf;function IT(t){return t.l+=2,[pT(t),t.read_shift(2)&1]}var GF=tf,qF=IT,KF=Mj,YF=tf,ZF=tf,XF=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];function QF(t){t.l+=2;var s=t.read_shift(2),a=t.read_shift(2),n=t.read_shift(4),i=t.read_shift(2),c=t.read_shift(2),d=XF[a>>2&31];return{ixti:s,coltype:a&3,rt:d,idx:n,c:i,C:c}}function JF(t){return t.l+=2,[t.read_shift(4)]}function e8(t,s,a){return t.l+=5,t.l+=2,t.l+=a.biff==2?1:4,["PTGSHEET"]}function t8(t,s,a){return t.l+=a.biff==2?4:5,["PTGENDSHEET"]}function s8(t){var s=t.read_shift(1)>>>5&3,a=t.read_shift(2);return[s,a]}function a8(t){var s=t.read_shift(1)>>>5&3,a=t.read_shift(2);return[s,a]}function n8(t){return t.l+=4,[0,0]}var L2={1:{n:"PtgExp",f:bF},2:{n:"PtgTbl",f:UF},3:{n:"PtgAdd",f:jn},4:{n:"PtgSub",f:jn},5:{n:"PtgMul",f:jn},6:{n:"PtgDiv",f:jn},7:{n:"PtgPower",f:jn},8:{n:"PtgConcat",f:jn},9:{n:"PtgLt",f:jn},10:{n:"PtgLe",f:jn},11:{n:"PtgEq",f:jn},12:{n:"PtgGe",f:jn},13:{n:"PtgGt",f:jn},14:{n:"PtgNe",f:jn},15:{n:"PtgIsect",f:jn},16:{n:"PtgUnion",f:jn},17:{n:"PtgRange",f:jn},18:{n:"PtgUplus",f:jn},19:{n:"PtgUminus",f:jn},20:{n:"PtgPercent",f:jn},21:{n:"PtgParen",f:jn},22:{n:"PtgMissArg",f:jn},23:{n:"PtgStr",f:kF},26:{n:"PtgSheet",f:e8},27:{n:"PtgEndSheet",f:t8},28:{n:"PtgErr",f:SF},29:{n:"PtgBool",f:CF},30:{n:"PtgInt",f:_F},31:{n:"PtgNum",f:TF},32:{n:"PtgArray",f:lF},33:{n:"PtgFunc",f:yF},34:{n:"PtgFuncVar",f:jF},35:{n:"PtgName",f:PF},36:{n:"PtgRef",f:pF},37:{n:"PtgArea",f:aF},38:{n:"PtgMemArea",f:RF},39:{n:"PtgMemErr",f:BF},40:{n:"PtgMemNoMem",f:zF},41:{n:"PtgMemFunc",f:LF},42:{n:"PtgRefErr",f:IF},43:{n:"PtgAreaErr",f:rF},44:{n:"PtgRefN",f:gF},45:{n:"PtgAreaN",f:oF},46:{n:"PtgMemAreaN",f:s8},47:{n:"PtgMemNoMemN",f:a8},57:{n:"PtgNameX",f:OF},58:{n:"PtgRef3d",f:vF},59:{n:"PtgArea3d",f:nF},60:{n:"PtgRefErr3d",f:FF},61:{n:"PtgAreaErr3d",f:iF},255:{}},r8={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},i8={1:{n:"PtgElfLel",f:IT},2:{n:"PtgElfRw",f:YF},3:{n:"PtgElfCol",f:VF},6:{n:"PtgElfRwV",f:ZF},7:{n:"PtgElfColV",f:WF},10:{n:"PtgElfRadical",f:GF},11:{n:"PtgElfRadicalS",f:KF},13:{n:"PtgElfColS",f:HF},15:{n:"PtgElfColSV",f:$F},16:{n:"PtgElfRadicalLel",f:qF},25:{n:"PtgList",f:QF},29:{n:"PtgSxName",f:JF},255:{}},o8={0:{n:"PtgAttrNoop",f:n8},1:{n:"PtgAttrSemi",f:mF},2:{n:"PtgAttrIf",f:uF},4:{n:"PtgAttrChoose",f:cF},8:{n:"PtgAttrGoto",f:dF},16:{n:"PtgAttrSum",f:wF},32:{n:"PtgAttrBaxcel",f:R2},33:{n:"PtgAttrBaxcel",f:R2},64:{n:"PtgAttrSpace",f:fF},65:{n:"PtgAttrSpaceSemi",f:xF},128:{n:"PtgAttrIfError",f:hF},255:{}};function l8(t,s,a,n){if(n.biff<8)return Co(t,s);for(var i=t.l+s,c=[],d=0;d!==a.length;++d)switch(a[d][0]){case"PtgArray":a[d][1]=DF(t,0,n),c.push(a[d][1]);break;case"PtgMemArea":a[d][2]=AF(t,a[d][1],n),c.push(a[d][2]);break;case"PtgExp":n&&n.biff==12&&(a[d][1][1]=t.read_shift(4),c.push(a[d][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+a[d][0]}return s=i-t.l,s!==0&&c.push(Co(t,s)),c}function c8(t,s,a){for(var n=t.l+s,i,c,d=[];n!=t.l;)s=n-t.l,c=t[t.l],i=L2[c]||L2[r8[c]],(c===24||c===25)&&(i=(c===24?i8:o8)[t[t.l+1]]),!i||!i.f?Co(t,s):d.push([i.n,i.f(t,s,a)]);return d}function d8(t){for(var s=[],a=0;a<t.length;++a){for(var n=t[a],i=[],c=0;c<n.length;++c){var d=n[c];if(d)switch(d[0]){case 2:i.push('"'+d[1].replace(/"/g,'""')+'"');break;default:i.push(d[1])}else i.push("")}s.push(i.join(","))}return s.join(";")}var u8={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function h8(t,s){if(!t&&!(s&&s.biff<=5&&s.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(t)?"'"+t+"'":t}function FT(t,s,a){if(!t)return"SH33TJSERR0";if(a.biff>8&&(!t.XTI||!t.XTI[s]))return t.SheetNames[s];if(!t.XTI)return"SH33TJSERR6";var n=t.XTI[s];if(a.biff<8)return s>1e4&&(s-=65536),s<0&&(s=-s),s==0?"":t.XTI[s-1];if(!n)return"SH33TJSERR1";var i="";if(a.biff>8)switch(t[n[0]][0]){case 357:return i=n[1]==-1?"#REF":t.SheetNames[n[1]],n[1]==n[2]?i:i+":"+t.SheetNames[n[2]];case 358:return a.SID!=null?t.SheetNames[a.SID]:"SH33TJSSAME"+t[n[0]][0];case 355:default:return"SH33TJSSRC"+t[n[0]][0]}switch(t[n[0]][0][0]){case 1025:return i=n[1]==-1?"#REF":t.SheetNames[n[1]]||"SH33TJSERR3",n[1]==n[2]?i:i+":"+t.SheetNames[n[2]];case 14849:return t[n[0]].slice(1).map(function(c){return c.Name}).join(";;");default:return t[n[0]][0][3]?(i=n[1]==-1?"#REF":t[n[0]][0][3][n[1]]||"SH33TJSERR4",n[1]==n[2]?i:i+":"+t[n[0]][0][3][n[2]]):"SH33TJSERR2"}}function I2(t,s,a){var n=FT(t,s,a);return n=="#REF"?n:h8(n,a)}function Fu(t,s,a,n,i){var c=i&&i.biff||8,d={s:{c:0,r:0}},h=[],f,g,p,v=0,y=0,_,S="";if(!t[0]||!t[0][0])return"";for(var b=-1,T="",E=0,A=t[0].length;E<A;++E){var O=t[0][E];switch(O[0]){case"PtgUminus":h.push("-"+h.pop());break;case"PtgUplus":h.push("+"+h.pop());break;case"PtgPercent":h.push(h.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(f=h.pop(),g=h.pop(),b>=0){switch(t[0][b][1][0]){case 0:T=nn(" ",t[0][b][1][1]);break;case 1:T=nn("\r",t[0][b][1][1]);break;default:if(T="",i.WTF)throw new Error("Unexpected PtgAttrSpaceType "+t[0][b][1][0])}g=g+T,b=-1}h.push(g+u8[O[0]]+f);break;case"PtgIsect":f=h.pop(),g=h.pop(),h.push(g+" "+f);break;case"PtgUnion":f=h.pop(),g=h.pop(),h.push(g+","+f);break;case"PtgRange":f=h.pop(),g=h.pop(),h.push(g+":"+f);break;case"PtgAttrChoose":break;case"PtgAttrGoto":break;case"PtgAttrIf":break;case"PtgAttrIfError":break;case"PtgRef":p=pm(O[1][1],d,i),h.push(gm(p,c));break;case"PtgRefN":p=a?pm(O[1][1],a,i):O[1][1],h.push(gm(p,c));break;case"PtgRef3d":v=O[1][1],p=pm(O[1][2],d,i),S=I2(n,v,i),h.push(S+"!"+gm(p,c));break;case"PtgFunc":case"PtgFuncVar":var Q=O[1][0],q=O[1][1];Q||(Q=0),Q&=127;var U=Q==0?[]:h.slice(-Q);h.length-=Q,q==="User"&&(q=U.shift()),h.push(q+"("+U.join(",")+")");break;case"PtgBool":h.push(O[1]?"TRUE":"FALSE");break;case"PtgInt":h.push(O[1]);break;case"PtgNum":h.push(String(O[1]));break;case"PtgStr":h.push('"'+O[1].replace(/"/g,'""')+'"');break;case"PtgErr":h.push(O[1]);break;case"PtgAreaN":_=N2(O[1][1],a?{s:a}:d,i),h.push(hv(_,i));break;case"PtgArea":_=N2(O[1][1],d,i),h.push(hv(_,i));break;case"PtgArea3d":v=O[1][1],_=O[1][2],S=I2(n,v,i),h.push(S+"!"+hv(_,i));break;case"PtgAttrSum":h.push("SUM("+h.pop()+")");break;case"PtgAttrBaxcel":case"PtgAttrSemi":break;case"PtgName":y=O[1][2];var D=(n.names||[])[y-1]||(n[0]||[])[y],M=D?D.Name:"SH33TJSNAME"+String(y);M&&M.slice(0,6)=="_xlfn."&&!i.xlfn&&(M=M.slice(6)),h.push(M);break;case"PtgNameX":var P=O[1][1];y=O[1][2];var G;if(i.biff<=5)P<0&&(P=-P),n[P]&&(G=n[P][y]);else{var K="";if(((n[P]||[])[0]||[])[0]==14849||(((n[P]||[])[0]||[])[0]==1025?n[P][y]&&n[P][y].itab>0&&(K=n.SheetNames[n[P][y].itab-1]+"!"):K=n.SheetNames[y-1]+"!"),n[P]&&n[P][y])K+=n[P][y].Name;else if(n[0]&&n[0][y])K+=n[0][y].Name;else{var z=(FT(n,P,i)||"").split(";;");z[y-1]?K=z[y-1]:K+="SH33TJSERRX"}h.push(K);break}G||(G={Name:"SH33TJSERRY"}),h.push(G.Name);break;case"PtgParen":var J="(",W=")";if(b>=0){switch(T="",t[0][b][1][0]){case 2:J=nn(" ",t[0][b][1][1])+J;break;case 3:J=nn("\r",t[0][b][1][1])+J;break;case 4:W=nn(" ",t[0][b][1][1])+W;break;case 5:W=nn("\r",t[0][b][1][1])+W;break;default:if(i.WTF)throw new Error("Unexpected PtgAttrSpaceType "+t[0][b][1][0])}b=-1}h.push(J+h.pop()+W);break;case"PtgRefErr":h.push("#REF!");break;case"PtgRefErr3d":h.push("#REF!");break;case"PtgExp":p={c:O[1][1],r:O[1][0]};var he={c:a.c,r:a.r};if(n.sharedf[xa(p)]){var V=n.sharedf[xa(p)];h.push(Fu(V,d,he,n,i))}else{var ae=!1;for(f=0;f!=n.arrayf.length;++f)if(g=n.arrayf[f],!(p.c<g[0].s.c||p.c>g[0].e.c)&&!(p.r<g[0].s.r||p.r>g[0].e.r)){h.push(Fu(g[1],d,he,n,i)),ae=!0;break}ae||h.push(O[1])}break;case"PtgArray":h.push("{"+d8(O[1])+"}");break;case"PtgMemArea":break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":b=E;break;case"PtgTbl":break;case"PtgMemErr":break;case"PtgMissArg":h.push("");break;case"PtgAreaErr":h.push("#REF!");break;case"PtgAreaErr3d":h.push("#REF!");break;case"PtgList":h.push("Table"+O[1].idx+"[#"+O[1].rt+"]");break;case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":break;case"PtgMemFunc":break;case"PtgMemNoMem":break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");case"PtgSxName":throw new Error("Unrecognized Formula Token: "+String(O));default:throw new Error("Unrecognized Formula Token: "+String(O))}var ge=["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"];if(i.biff!=3&&b>=0&&ge.indexOf(t[0][E][0])==-1){O=t[0][b];var Z=!0;switch(O[1][0]){case 4:Z=!1;case 0:T=nn(" ",O[1][1]);break;case 5:Z=!1;case 1:T=nn("\r",O[1][1]);break;default:if(T="",i.WTF)throw new Error("Unexpected PtgAttrSpaceType "+O[1][0])}h.push((Z?T:"")+h.pop()+(Z?"":T)),b=-1}}if(h.length>1&&i.WTF)throw new Error("bad formula stack");return h[0]}function m8(t){if(t==null){var s=nt(8);return s.write_shift(1,3),s.write_shift(1,0),s.write_shift(2,0),s.write_shift(2,0),s.write_shift(2,65535),s}else if(typeof t=="number")return fd(t);return fd(0)}function f8(t,s,a,n,i){var c=xd(s,a,i),d=m8(t.v),h=nt(6),f=33;h.write_shift(2,f),h.write_shift(4,0);for(var g=nt(t.bf.length),p=0;p<t.bf.length;++p)g[p]=t.bf[p];var v=er([c,d,h,g]);return v}function Qp(t,s,a){var n=t.read_shift(4),i=c8(t,n,a),c=t.read_shift(4),d=c>0?l8(t,c,i,a):null;return[i,d]}var x8=Qp,Jp=Qp,p8=Qp,g8=Qp,v8={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},BT={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},y8={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function j8(t){var s="of:="+t.replace(Pj,"$1[.$2$3$4$5]").replace(/\]:\[/g,":");return s.replace(/;/g,"|").replace(/,/g,";")}function N8(t){return t.replace(/\./,"!")}var vm=typeof Map<"u";function Rj(t,s,a){var n=0,i=t.length;if(a){if(vm?a.has(s):Object.prototype.hasOwnProperty.call(a,s)){for(var c=vm?a.get(s):a[s];n<c.length;++n)if(t[c[n]].t===s)return t.Count++,c[n]}}else for(;n<i;++n)if(t[n].t===s)return t.Count++,n;return t[i]={t:s},t.Count++,t.Unique++,a&&(vm?(a.has(s)||a.set(s,[]),a.get(s).push(i)):(Object.prototype.hasOwnProperty.call(a,s)||(a[s]=[]),a[s].push(i))),i}function eg(t,s){var a={min:t+1,max:t+1},n=-1;return s.MDW&&(tl=s.MDW),s.width!=null?a.customWidth=1:s.wpx!=null?n=bp(s.wpx):s.wch!=null&&(n=s.wch),n>-1?(a.width=xy(n),a.customWidth=1):s.width!=null&&(a.width=s.width),s.hidden&&(a.hidden=!0),s.level!=null&&(a.outlineLevel=a.level=s.level),a}function zT(t,s){if(t){var a=[.7,.7,.75,.75,.3,.3];t.left==null&&(t.left=a[0]),t.right==null&&(t.right=a[1]),t.top==null&&(t.top=a[2]),t.bottom==null&&(t.bottom=a[3]),t.header==null&&(t.header=a[4]),t.footer==null&&(t.footer=a[5])}}function uc(t,s,a){var n=a.revssf[s.z!=null?s.z:"General"],i=60,c=t.length;if(n==null&&a.ssf){for(;i<392;++i)if(a.ssf[i]==null){RC(s.z,i),a.ssf[i]=s.z,a.revssf[s.z]=n=i;break}}for(i=0;i!=c;++i)if(t[i].numFmtId===n)return i;return t[c]={numFmtId:n,fontId:0,fillId:0,borderId:0,xfId:0,applyNumberFormat:1},c}function w8(t,s,a){if(t&&t["!ref"]){var n=Oa(t["!ref"]);if(n.e.c<n.s.c||n.e.r<n.s.r)throw new Error("Bad range ("+a+"): "+t["!ref"])}}function b8(t){if(t.length===0)return"";for(var s='<mergeCells count="'+t.length+'">',a=0;a!=t.length;++a)s+='<mergeCell ref="'+bn(t[a])+'"/>';return s+"</mergeCells>"}function S8(t,s,a,n,i){var c=!1,d={},h=null;if(n.bookType!=="xlsx"&&s.vbaraw){var f=s.SheetNames[a];try{s.Workbook&&(f=s.Workbook.Sheets[a].CodeName||f)}catch{}c=!0,d.codeName=Om(ma(f))}if(t&&t["!outline"]){var g={summaryBelow:1,summaryRight:1};t["!outline"].above&&(g.summaryBelow=0),t["!outline"].left&&(g.summaryRight=0),h=(h||"")+St("outlinePr",null,g)}!c&&!h||(i[i.length]=St("sheetPr",h,d))}var _8=["objects","scenarios","selectLockedCells","selectUnlockedCells"],C8=["formatColumns","formatRows","formatCells","insertColumns","insertRows","insertHyperlinks","deleteColumns","deleteRows","sort","autoFilter","pivotTables"];function T8(t){var s={sheet:1};return _8.forEach(function(a){t[a]!=null&&t[a]&&(s[a]="1")}),C8.forEach(function(a){t[a]!=null&&!t[a]&&(s[a]="0")}),t.password&&(s.password=bT(t.password).toString(16).toUpperCase()),St("sheetProtection",null,s)}function k8(t){return zT(t),St("pageMargins",null,t)}function E8(t,s){for(var a=["<cols>"],n,i=0;i!=s.length;++i)(n=s[i])&&(a[a.length]=St("col",null,eg(i,n)));return a[a.length]="</cols>",a.join("")}function A8(t,s,a,n){var i=typeof t.ref=="string"?t.ref:bn(t.ref);a.Workbook||(a.Workbook={Sheets:[]}),a.Workbook.Names||(a.Workbook.Names=[]);var c=a.Workbook.Names,d=ni(i);d.s.r==d.e.r&&(d.e.r=ni(s["!ref"]).e.r,i=bn(d));for(var h=0;h<c.length;++h){var f=c[h];if(f.Name=="_xlnm._FilterDatabase"&&f.Sheet==n){f.Ref="'"+a.SheetNames[n]+"'!"+i;break}}return h==c.length&&c.push({Name:"_xlnm._FilterDatabase",Sheet:n,Ref:"'"+a.SheetNames[n]+"'!"+i}),St("autoFilter",null,{ref:i})}function D8(t,s,a,n){var i={workbookViewId:"0"};return(((n||{}).Workbook||{}).Views||[])[0]&&(i.rightToLeft=n.Workbook.Views[0].RTL?"1":"0"),St("sheetViews",St("sheetView",null,i),{})}function P8(t,s,a,n){if(t.c&&a["!comments"].push([s,t.c]),t.v===void 0&&typeof t.f!="string"||t.t==="z"&&!t.f)return"";var i="",c=t.t,d=t.v;if(t.t!=="z")switch(t.t){case"b":i=t.v?"1":"0";break;case"n":i=""+t.v;break;case"e":i=ef[t.v];break;case"d":n&&n.cellDates?i=Sr(t.v,-1).toISOString():(t=Hr(t),t.t="n",i=""+(t.v=Vr(Sr(t.v)))),typeof t.z>"u"&&(t.z=on[14]);break;default:i=t.v;break}var h=tr("v",ma(i)),f={r:s},g=uc(n.cellXfs,t,n);switch(g!==0&&(f.s=g),t.t){case"n":break;case"d":f.t="d";break;case"b":f.t="b";break;case"e":f.t="e";break;case"z":break;default:if(t.v==null){delete t.t;break}if(t.v.length>32767)throw new Error("Text length must not exceed 32767 characters");if(n&&n.bookSST){h=tr("v",""+Rj(n.Strings,t.v,n.revStrings)),f.t="s";break}f.t="str";break}if(t.t!=c&&(t.t=c,t.v=d),typeof t.f=="string"&&t.f){var p=t.F&&t.F.slice(0,s.length)==s?{t:"array",ref:t.F}:null;h=St("f",ma(t.f),p)+(t.v!=null?h:"")}return t.l&&a["!links"].push([s,t.l]),t.D&&(f.cm=1),St("c",h,f)}function O8(t,s,a,n){var i=[],c=[],d=Oa(t["!ref"]),h="",f,g="",p=[],v=0,y=0,_=t["!rows"],S=Array.isArray(t),b={r:g},T,E=-1;for(y=d.s.c;y<=d.e.c;++y)p[y]=pr(y);for(v=d.s.r;v<=d.e.r;++v){for(c=[],g=ar(v),y=d.s.c;y<=d.e.c;++y){f=p[y]+g;var A=S?(t[v]||[])[y]:t[f];A!==void 0&&(h=P8(A,f,t,s))!=null&&c.push(h)}(c.length>0||_&&_[v])&&(b={r:g},_&&_[v]&&(T=_[v],T.hidden&&(b.hidden=1),E=-1,T.hpx?E=Sp(T.hpx):T.hpt&&(E=T.hpt),E>-1&&(b.ht=E,b.customHeight=1),T.level&&(b.outlineLevel=T.level)),i[i.length]=St("row",c.join(""),b))}if(_)for(;v<_.length;++v)_&&_[v]&&(b={r:v+1},T=_[v],T.hidden&&(b.hidden=1),E=-1,T.hpx?E=Sp(T.hpx):T.hpt&&(E=T.hpt),E>-1&&(b.ht=E,b.customHeight=1),T.level&&(b.outlineLevel=T.level),i[i.length]=St("row","",b));return i.join("")}function UT(t,s,a,n){var i=[Cn,St("worksheet",null,{xmlns:Ku[0],"xmlns:r":Un.r})],c=a.SheetNames[t],d=0,h="",f=a.Sheets[c];f==null&&(f={});var g=f["!ref"]||"A1",p=Oa(g);if(p.e.c>16383||p.e.r>1048575){if(s.WTF)throw new Error("Range "+g+" exceeds format limit A1:XFD1048576");p.e.c=Math.min(p.e.c,16383),p.e.r=Math.min(p.e.c,1048575),g=bn(p)}n||(n={}),f["!comments"]=[];var v=[];S8(f,a,t,s,i),i[i.length]=St("dimension",null,{ref:g}),i[i.length]=D8(f,s,t,a),s.sheetFormat&&(i[i.length]=St("sheetFormatPr",null,{defaultRowHeight:s.sheetFormat.defaultRowHeight||"16",baseColWidth:s.sheetFormat.baseColWidth||"10",outlineLevelRow:s.sheetFormat.outlineLevelRow||"7"})),f["!cols"]!=null&&f["!cols"].length>0&&(i[i.length]=E8(f,f["!cols"])),i[d=i.length]="<sheetData/>",f["!links"]=[],f["!ref"]!=null&&(h=O8(f,s),h.length>0&&(i[i.length]=h)),i.length>d+1&&(i[i.length]="</sheetData>",i[d]=i[d].replace("/>",">")),f["!protect"]&&(i[i.length]=T8(f["!protect"])),f["!autofilter"]!=null&&(i[i.length]=A8(f["!autofilter"],f,a,t)),f["!merges"]!=null&&f["!merges"].length>0&&(i[i.length]=b8(f["!merges"]));var y=-1,_,S=-1;return f["!links"].length>0&&(i[i.length]="<hyperlinks>",f["!links"].forEach(function(b){b[1].Target&&(_={ref:b[0]},b[1].Target.charAt(0)!="#"&&(S=da(n,-1,ma(b[1].Target).replace(/#.*$/,""),Js.HLINK),_["r:id"]="rId"+S),(y=b[1].Target.indexOf("#"))>-1&&(_.location=ma(b[1].Target.slice(y+1))),b[1].Tooltip&&(_.tooltip=ma(b[1].Tooltip)),i[i.length]=St("hyperlink",null,_))}),i[i.length]="</hyperlinks>"),delete f["!links"],f["!margins"]!=null&&(i[i.length]=k8(f["!margins"])),(!s||s.ignoreEC||s.ignoreEC==null)&&(i[i.length]=tr("ignoredErrors",St("ignoredError",null,{numberStoredAsText:1,sqref:g}))),v.length>0&&(S=da(n,-1,"../drawings/drawing"+(t+1)+".xml",Js.DRAW),i[i.length]=St("drawing",null,{"r:id":"rId"+S}),f["!drawing"]=v),f["!comments"].length>0&&(S=da(n,-1,"../drawings/vmlDrawing"+(t+1)+".vml",Js.VML),i[i.length]=St("legacyDrawing",null,{"r:id":"rId"+S}),f["!legacy"]=S),i.length>1&&(i[i.length]="</worksheet>",i[1]=i[1].replace("/>",">")),i.join("")}function M8(t,s){var a={},n=t.l+s;a.r=t.read_shift(4),t.l+=4;var i=t.read_shift(2);t.l+=1;var c=t.read_shift(1);return t.l=n,c&7&&(a.level=c&7),c&16&&(a.hidden=!0),c&32&&(a.hpt=i/20),a}function R8(t,s,a){var n=nt(145),i=(a["!rows"]||[])[t]||{};n.write_shift(4,t),n.write_shift(4,0);var c=320;i.hpx?c=Sp(i.hpx)*20:i.hpt&&(c=i.hpt*20),n.write_shift(2,c),n.write_shift(1,0);var d=0;i.level&&(d|=i.level),i.hidden&&(d|=16),(i.hpx||i.hpt)&&(d|=32),n.write_shift(1,d),n.write_shift(1,0);var h=0,f=n.l;n.l+=4;for(var g={r:t,c:0},p=0;p<16;++p)if(!(s.s.c>p+1<<10||s.e.c<p<<10)){for(var v=-1,y=-1,_=p<<10;_<p+1<<10;++_){g.c=_;var S=Array.isArray(a)?(a[g.r]||[])[g.c]:a[xa(g)];S&&(v<0&&(v=_),y=_)}v<0||(++h,n.write_shift(4,v),n.write_shift(4,y))}var b=n.l;return n.l=f,n.write_shift(4,h),n.l=b,n.length>n.l?n.slice(0,n.l):n}function L8(t,s,a,n){var i=R8(n,a,s);(i.length>17||(s["!rows"]||[])[n])&&xt(t,0,i)}var I8=Nd,F8=Zu;function B8(){}function z8(t,s){var a={},n=t[t.l];return++t.l,a.above=!(n&64),a.left=!(n&128),t.l+=18,a.name=ZR(t),a}function U8(t,s,a){a==null&&(a=nt(84+4*t.length));var n=192;s&&(s.above&&(n&=-65),s.left&&(n&=-129)),a.write_shift(1,n);for(var i=1;i<3;++i)a.write_shift(1,0);return jp({auto:1},a),a.write_shift(-4,-1),a.write_shift(-4,-1),sT(t,a),a.slice(0,a.l)}function V8(t){var s=Ci(t);return[s]}function H8(t,s,a){return a==null&&(a=nt(8)),vd(s,a)}function $8(t){var s=yd(t);return[s]}function W8(t,s,a){return a==null&&(a=nt(4)),jd(s,a)}function G8(t){var s=Ci(t),a=t.read_shift(1);return[s,a,"b"]}function q8(t,s,a){return a==null&&(a=nt(9)),vd(s,a),a.write_shift(1,t.v?1:0),a}function K8(t){var s=yd(t),a=t.read_shift(1);return[s,a,"b"]}function Y8(t,s,a){return a==null&&(a=nt(5)),jd(s,a),a.write_shift(1,t.v?1:0),a}function Z8(t){var s=Ci(t),a=t.read_shift(1);return[s,a,"e"]}function X8(t,s,a){return a==null&&(a=nt(9)),vd(s,a),a.write_shift(1,t.v),a}function Q8(t){var s=yd(t),a=t.read_shift(1);return[s,a,"e"]}function J8(t,s,a){return a==null&&(a=nt(8)),jd(s,a),a.write_shift(1,t.v),a.write_shift(2,0),a.write_shift(1,0),a}function eB(t){var s=Ci(t),a=t.read_shift(4);return[s,a,"s"]}function tB(t,s,a){return a==null&&(a=nt(12)),vd(s,a),a.write_shift(4,s.v),a}function sB(t){var s=yd(t),a=t.read_shift(4);return[s,a,"s"]}function aB(t,s,a){return a==null&&(a=nt(8)),jd(s,a),a.write_shift(4,s.v),a}function nB(t){var s=Ci(t),a=Xu(t);return[s,a,"n"]}function rB(t,s,a){return a==null&&(a=nt(16)),vd(s,a),fd(t.v,a),a}function iB(t){var s=yd(t),a=Xu(t);return[s,a,"n"]}function oB(t,s,a){return a==null&&(a=nt(12)),jd(s,a),fd(t.v,a),a}function lB(t){var s=Ci(t),a=aT(t);return[s,a,"n"]}function cB(t,s,a){return a==null&&(a=nt(12)),vd(s,a),nT(t.v,a),a}function dB(t){var s=yd(t),a=aT(t);return[s,a,"n"]}function uB(t,s,a){return a==null&&(a=nt(8)),jd(s,a),nT(t.v,a),a}function hB(t){var s=Ci(t),a=Tj(t);return[s,a,"is"]}function mB(t){var s=Ci(t),a=gr(t);return[s,a,"str"]}function fB(t,s,a){return a==null&&(a=nt(12+4*t.v.length)),vd(s,a),Hn(t.v,a),a.length>a.l?a.slice(0,a.l):a}function xB(t){var s=yd(t),a=gr(t);return[s,a,"str"]}function pB(t,s,a){return a==null&&(a=nt(8+4*t.v.length)),jd(s,a),Hn(t.v,a),a.length>a.l?a.slice(0,a.l):a}function gB(t,s,a){var n=t.l+s,i=Ci(t);i.r=a["!row"];var c=t.read_shift(1),d=[i,c,"b"];if(a.cellFormula){t.l+=2;var h=Jp(t,n-t.l,a);d[3]=Fu(h,null,i,a.supbooks,a)}else t.l=n;return d}function vB(t,s,a){var n=t.l+s,i=Ci(t);i.r=a["!row"];var c=t.read_shift(1),d=[i,c,"e"];if(a.cellFormula){t.l+=2;var h=Jp(t,n-t.l,a);d[3]=Fu(h,null,i,a.supbooks,a)}else t.l=n;return d}function yB(t,s,a){var n=t.l+s,i=Ci(t);i.r=a["!row"];var c=Xu(t),d=[i,c,"n"];if(a.cellFormula){t.l+=2;var h=Jp(t,n-t.l,a);d[3]=Fu(h,null,i,a.supbooks,a)}else t.l=n;return d}function jB(t,s,a){var n=t.l+s,i=Ci(t);i.r=a["!row"];var c=gr(t),d=[i,c,"str"];if(a.cellFormula){t.l+=2;var h=Jp(t,n-t.l,a);d[3]=Fu(h,null,i,a.supbooks,a)}else t.l=n;return d}var NB=Nd,wB=Zu;function bB(t,s){return s==null&&(s=nt(4)),s.write_shift(4,t),s}function SB(t,s){var a=t.l+s,n=Nd(t),i=kj(t),c=gr(t),d=gr(t),h=gr(t);t.l=a;var f={rfx:n,relId:i,loc:c,display:h};return d&&(f.Tooltip=d),f}function _B(t,s){var a=nt(50+4*(t[1].Target.length+(t[1].Tooltip||"").length));Zu({s:Vn(t[0]),e:Vn(t[0])},a),Ej("rId"+s,a);var n=t[1].Target.indexOf("#"),i=n==-1?"":t[1].Target.slice(n+1);return Hn(i||"",a),Hn(t[1].Tooltip||"",a),Hn("",a),a.slice(0,a.l)}function CB(){}function TB(t,s,a){var n=t.l+s,i=rT(t),c=t.read_shift(1),d=[i];if(d[2]=c,a.cellFormula){var h=x8(t,n-t.l,a);d[1]=h}else t.l=n;return d}function kB(t,s,a){var n=t.l+s,i=Nd(t),c=[i];if(a.cellFormula){var d=g8(t,n-t.l,a);c[1]=d,t.l=n}else t.l=n;return c}function EB(t,s,a){a==null&&(a=nt(18));var n=eg(t,s);a.write_shift(-4,t),a.write_shift(-4,t),a.write_shift(4,(n.width||10)*256),a.write_shift(4,0);var i=0;return s.hidden&&(i|=1),typeof n.width=="number"&&(i|=2),s.level&&(i|=s.level<<8),a.write_shift(2,i),a}var VT=["left","right","top","bottom","header","footer"];function AB(t){var s={};return VT.forEach(function(a){s[a]=Xu(t)}),s}function DB(t,s){return s==null&&(s=nt(48)),zT(t),VT.forEach(function(a){fd(t[a],s)}),s}function PB(t){var s=t.read_shift(2);return t.l+=28,{RTL:s&32}}function OB(t,s,a){a==null&&(a=nt(30));var n=924;return(((s||{}).Views||[])[0]||{}).RTL&&(n|=32),a.write_shift(2,n),a.write_shift(4,0),a.write_shift(4,0),a.write_shift(4,0),a.write_shift(1,0),a.write_shift(1,0),a.write_shift(2,0),a.write_shift(2,100),a.write_shift(2,0),a.write_shift(2,0),a.write_shift(2,0),a.write_shift(4,0),a}function MB(t){var s=nt(24);return s.write_shift(4,4),s.write_shift(4,1),Zu(t,s),s}function RB(t,s){return s==null&&(s=nt(66)),s.write_shift(2,t.password?bT(t.password):0),s.write_shift(4,1),[["objects",!1],["scenarios",!1],["formatCells",!0],["formatColumns",!0],["formatRows",!0],["insertColumns",!0],["insertRows",!0],["insertHyperlinks",!0],["deleteColumns",!0],["deleteRows",!0],["selectLockedCells",!1],["sort",!0],["autoFilter",!0],["pivotTables",!0],["selectUnlockedCells",!1]].forEach(function(a){a[1]?s.write_shift(4,t[a[0]]!=null&&!t[a[0]]?1:0):s.write_shift(4,t[a[0]]!=null&&t[a[0]]?0:1)}),s}function LB(){}function IB(){}function FB(t,s,a,n,i,c,d){if(s.v===void 0)return!1;var h="";switch(s.t){case"b":h=s.v?"1":"0";break;case"d":s=Hr(s),s.z=s.z||on[14],s.v=Vr(Sr(s.v)),s.t="n";break;case"n":case"e":h=""+s.v;break;default:h=s.v;break}var f={r:a,c:n};switch(f.s=uc(i.cellXfs,s,i),s.l&&c["!links"].push([xa(f),s.l]),s.c&&c["!comments"].push([xa(f),s.c]),s.t){case"s":case"str":return i.bookSST?(h=Rj(i.Strings,s.v,i.revStrings),f.t="s",f.v=h,d?xt(t,18,aB(s,f)):xt(t,7,tB(s,f))):(f.t="str",d?xt(t,17,pB(s,f)):xt(t,6,fB(s,f))),!0;case"n":return s.v==(s.v|0)&&s.v>-1e3&&s.v<1e3?d?xt(t,13,uB(s,f)):xt(t,2,cB(s,f)):d?xt(t,16,oB(s,f)):xt(t,5,rB(s,f)),!0;case"b":return f.t="b",d?xt(t,15,Y8(s,f)):xt(t,4,q8(s,f)),!0;case"e":return f.t="e",d?xt(t,14,J8(s,f)):xt(t,3,X8(s,f)),!0}return d?xt(t,12,W8(s,f)):xt(t,1,H8(s,f)),!0}function BB(t,s,a,n){var i=Oa(s["!ref"]||"A1"),c,d="",h=[];xt(t,145);var f=Array.isArray(s),g=i.e.r;s["!rows"]&&(g=Math.max(i.e.r,s["!rows"].length-1));for(var p=i.s.r;p<=g;++p){d=ar(p),L8(t,s,i,p);var v=!1;if(p<=i.e.r)for(var y=i.s.c;y<=i.e.c;++y){p===i.s.r&&(h[y]=pr(y)),c=h[y]+d;var _=f?(s[p]||[])[y]:s[c];if(!_){v=!1;continue}v=FB(t,_,p,y,n,s,v)}}xt(t,146)}function zB(t,s){!s||!s["!merges"]||(xt(t,177,bB(s["!merges"].length)),s["!merges"].forEach(function(a){xt(t,176,wB(a))}),xt(t,178))}function UB(t,s){!s||!s["!cols"]||(xt(t,390),s["!cols"].forEach(function(a,n){a&&xt(t,60,EB(n,a))}),xt(t,391))}function VB(t,s){!s||!s["!ref"]||(xt(t,648),xt(t,649,MB(Oa(s["!ref"]))),xt(t,650))}function HB(t,s,a){s["!links"].forEach(function(n){if(n[1].Target){var i=da(a,-1,n[1].Target.replace(/#.*$/,""),Js.HLINK);xt(t,494,_B(n,i))}}),delete s["!links"]}function $B(t,s,a,n){if(s["!comments"].length>0){var i=da(n,-1,"../drawings/vmlDrawing"+(a+1)+".vml",Js.VML);xt(t,551,Ej("rId"+i)),s["!legacy"]=i}}function WB(t,s,a,n){if(s["!autofilter"]){var i=s["!autofilter"],c=typeof i.ref=="string"?i.ref:bn(i.ref);a.Workbook||(a.Workbook={Sheets:[]}),a.Workbook.Names||(a.Workbook.Names=[]);var d=a.Workbook.Names,h=ni(c);h.s.r==h.e.r&&(h.e.r=ni(s["!ref"]).e.r,c=bn(h));for(var f=0;f<d.length;++f){var g=d[f];if(g.Name=="_xlnm._FilterDatabase"&&g.Sheet==n){g.Ref="'"+a.SheetNames[n]+"'!"+c;break}}f==d.length&&d.push({Name:"_xlnm._FilterDatabase",Sheet:n,Ref:"'"+a.SheetNames[n]+"'!"+c}),xt(t,161,Zu(Oa(c))),xt(t,162)}}function GB(t,s,a){xt(t,133),xt(t,137,OB(s,a)),xt(t,138),xt(t,134)}function qB(t,s){s["!protect"]&&xt(t,535,RB(s["!protect"]))}function KB(t,s,a,n){var i=Ur(),c=a.SheetNames[t],d=a.Sheets[c]||{},h=c;try{a&&a.Workbook&&(h=a.Workbook.Sheets[t].CodeName||h)}catch{}var f=Oa(d["!ref"]||"A1");if(f.e.c>16383||f.e.r>1048575){if(s.WTF)throw new Error("Range "+(d["!ref"]||"A1")+" exceeds format limit A1:XFD1048576");f.e.c=Math.min(f.e.c,16383),f.e.r=Math.min(f.e.c,1048575)}return d["!links"]=[],d["!comments"]=[],xt(i,129),(a.vbaraw||d["!outline"])&&xt(i,147,U8(h,d["!outline"])),xt(i,148,F8(f)),GB(i,d,a.Workbook),UB(i,d),BB(i,d,t,s),qB(i,d),WB(i,d,a,t),zB(i,d),HB(i,d,n),d["!margins"]&&xt(i,476,DB(d["!margins"])),(!s||s.ignoreEC||s.ignoreEC==null)&&VB(i,d),$B(i,d,t,n),xt(i,130),i.end()}function YB(t,s){t.l+=10;var a=gr(t);return{name:a}}var ZB=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]];function XB(t){return!t.Workbook||!t.Workbook.WBProps?"false":kR(t.Workbook.WBProps.date1904)?"true":"false"}var QB="][*?/\\".split("");function HT(t,s){if(t.length>31)throw new Error("Sheet names cannot exceed 31 chars");var a=!0;return QB.forEach(function(n){if(t.indexOf(n)!=-1)throw new Error("Sheet name cannot contain : \\ / ? * [ ]")}),a}function JB(t,s,a){t.forEach(function(n,i){HT(n);for(var c=0;c<i;++c)if(n==t[c])throw new Error("Duplicate Sheet Name: "+n);if(a){var d=s&&s[i]&&s[i].CodeName||n;if(d.charCodeAt(0)==95&&d.length>22)throw new Error("Bad Code Name: Worksheet"+d)}})}function ez(t){if(!t||!t.SheetNames||!t.Sheets)throw new Error("Invalid Workbook");if(!t.SheetNames.length)throw new Error("Workbook is empty");var s=t.Workbook&&t.Workbook.Sheets||[];JB(t.SheetNames,s,!!t.vbaraw);for(var a=0;a<t.SheetNames.length;++a)w8(t.Sheets[t.SheetNames[a]],t.SheetNames[a],a)}function $T(t){var s=[Cn];s[s.length]=St("workbook",null,{xmlns:Ku[0],"xmlns:r":Un.r});var a=t.Workbook&&(t.Workbook.Names||[]).length>0,n={codeName:"ThisWorkbook"};t.Workbook&&t.Workbook.WBProps&&(ZB.forEach(function(h){t.Workbook.WBProps[h[0]]!=null&&t.Workbook.WBProps[h[0]]!=h[1]&&(n[h[0]]=t.Workbook.WBProps[h[0]])}),t.Workbook.WBProps.CodeName&&(n.codeName=t.Workbook.WBProps.CodeName,delete n.CodeName)),s[s.length]=St("workbookPr",null,n);var i=t.Workbook&&t.Workbook.Sheets||[],c=0;if(i&&i[0]&&i[0].Hidden){for(s[s.length]="<bookViews>",c=0;c!=t.SheetNames.length&&!(!i[c]||!i[c].Hidden);++c);c==t.SheetNames.length&&(c=0),s[s.length]='<workbookView firstSheet="'+c+'" activeTab="'+c+'"/>',s[s.length]="</bookViews>"}for(s[s.length]="<sheets>",c=0;c!=t.SheetNames.length;++c){var d={name:ma(t.SheetNames[c].slice(0,31))};if(d.sheetId=""+(c+1),d["r:id"]="rId"+(c+1),i[c])switch(i[c].Hidden){case 1:d.state="hidden";break;case 2:d.state="veryHidden";break}s[s.length]=St("sheet",null,d)}return s[s.length]="</sheets>",a&&(s[s.length]="<definedNames>",t.Workbook&&t.Workbook.Names&&t.Workbook.Names.forEach(function(h){var f={name:h.Name};h.Comment&&(f.comment=h.Comment),h.Sheet!=null&&(f.localSheetId=""+h.Sheet),h.Hidden&&(f.hidden="1"),h.Ref&&(s[s.length]=St("definedName",ma(h.Ref),f))}),s[s.length]="</definedNames>"),s.length>2&&(s[s.length]="</workbook>",s[1]=s[1].replace("/>",">")),s.join("")}function tz(t,s){var a={};return a.Hidden=t.read_shift(4),a.iTabID=t.read_shift(4),a.strRelID=fy(t),a.name=gr(t),a}function sz(t,s){return s||(s=nt(127)),s.write_shift(4,t.Hidden),s.write_shift(4,t.iTabID),Ej(t.strRelID,s),Hn(t.name.slice(0,31),s),s.length>s.l?s.slice(0,s.l):s}function az(t,s){var a={},n=t.read_shift(4);a.defaultThemeVersion=t.read_shift(4);var i=s>8?gr(t):"";return i.length>0&&(a.CodeName=i),a.autoCompressPictures=!!(n&65536),a.backupFile=!!(n&64),a.checkCompatibility=!!(n&4096),a.date1904=!!(n&1),a.filterPrivacy=!!(n&8),a.hidePivotFieldList=!!(n&1024),a.promptedSolutions=!!(n&16),a.publishItems=!!(n&2048),a.refreshAllConnections=!!(n&262144),a.saveExternalLinkValues=!!(n&128),a.showBorderUnselectedTables=!!(n&4),a.showInkAnnotation=!!(n&32),a.showObjects=["all","placeholders","none"][n>>13&3],a.showPivotChartFilter=!!(n&32768),a.updateLinks=["userSet","never","always"][n>>8&3],a}function nz(t,s){s||(s=nt(72));var a=0;return t&&t.filterPrivacy&&(a|=8),s.write_shift(4,a),s.write_shift(4,0),sT(t&&t.CodeName||"ThisWorkbook",s),s.slice(0,s.l)}function rz(t,s,a){var n=t.l+s;t.l+=4,t.l+=1;var i=t.read_shift(4),c=XR(t),d=p8(t,0,a),h=kj(t);t.l=n;var f={Name:c,Ptg:d};return i<268435455&&(f.Sheet=i),h&&(f.Comment=h),f}function iz(t,s){xt(t,143);for(var a=0;a!=s.SheetNames.length;++a){var n=s.Workbook&&s.Workbook.Sheets&&s.Workbook.Sheets[a]&&s.Workbook.Sheets[a].Hidden||0,i={Hidden:n,iTabID:a+1,strRelID:"rId"+(a+1),name:s.SheetNames[a]};xt(t,156,sz(i))}xt(t,144)}function oz(t,s){s||(s=nt(127));for(var a=0;a!=4;++a)s.write_shift(4,0);return Hn("SheetJS",s),Hn(hp.version,s),Hn(hp.version,s),Hn("7262",s),s.length>s.l?s.slice(0,s.l):s}function lz(t,s){s||(s=nt(29)),s.write_shift(-4,0),s.write_shift(-4,460),s.write_shift(4,28800),s.write_shift(4,17600),s.write_shift(4,500),s.write_shift(4,t),s.write_shift(4,t);var a=120;return s.write_shift(1,a),s.length>s.l?s.slice(0,s.l):s}function cz(t,s){if(!(!s.Workbook||!s.Workbook.Sheets)){for(var a=s.Workbook.Sheets,n=0,i=-1,c=-1;n<a.length;++n)!a[n]||!a[n].Hidden&&i==-1?i=n:a[n].Hidden==1&&c==-1&&(c=n);c>i||(xt(t,135),xt(t,158,lz(i)),xt(t,136))}}function dz(t,s){var a=Ur();return xt(a,131),xt(a,128,oz()),xt(a,153,nz(t.Workbook&&t.Workbook.WBProps||null)),cz(a,t),iz(a,t),xt(a,132),a.end()}function uz(t,s,a){return(s.slice(-4)===".bin"?dz:$T)(t)}function hz(t,s,a,n,i){return(s.slice(-4)===".bin"?KB:UT)(t,a,n,i)}function mz(t,s,a){return(s.slice(-4)===".bin"?DI:CT)(t,a)}function fz(t,s,a){return(s.slice(-4)===".bin"?nI:wT)(t,a)}function xz(t,s,a){return(s.slice(-4)===".bin"?qI:DT)(t)}function pz(t){return(t.slice(-4)===".bin"?BI:ET)()}function gz(t,s){var a=[];return t.Props&&a.push(mL(t.Props,s)),t.Custprops&&a.push(fL(t.Props,t.Custprops)),a.join("")}function vz(){return""}function yz(t,s){var a=['<Style ss:ID="Default" ss:Name="Normal"><NumberFormat/></Style>'];return s.cellXfs.forEach(function(n,i){var c=[];c.push(St("NumberFormat",null,{"ss:Format":ma(on[n.numFmtId])}));var d={"ss:ID":"s"+(21+i)};a.push(St("Style",c.join(""),d))}),St("Styles",a.join(""))}function WT(t){return St("NamedRange",null,{"ss:Name":t.Name,"ss:RefersTo":"="+Oj(t.Ref,{r:0,c:0})})}function jz(t){if(!((t||{}).Workbook||{}).Names)return"";for(var s=t.Workbook.Names,a=[],n=0;n<s.length;++n){var i=s[n];i.Sheet==null&&(i.Name.match(/^_xlfn\./)||a.push(WT(i)))}return St("Names",a.join(""))}function Nz(t,s,a,n){if(!t||!((n||{}).Workbook||{}).Names)return"";for(var i=n.Workbook.Names,c=[],d=0;d<i.length;++d){var h=i[d];h.Sheet==a&&(h.Name.match(/^_xlfn\./)||c.push(WT(h)))}return c.join("")}function wz(t,s,a,n){if(!t)return"";var i=[];if(t["!margins"]&&(i.push("<PageSetup>"),t["!margins"].header&&i.push(St("Header",null,{"x:Margin":t["!margins"].header})),t["!margins"].footer&&i.push(St("Footer",null,{"x:Margin":t["!margins"].footer})),i.push(St("PageMargins",null,{"x:Bottom":t["!margins"].bottom||"0.75","x:Left":t["!margins"].left||"0.7","x:Right":t["!margins"].right||"0.7","x:Top":t["!margins"].top||"0.75"})),i.push("</PageSetup>")),n&&n.Workbook&&n.Workbook.Sheets&&n.Workbook.Sheets[a])if(n.Workbook.Sheets[a].Hidden)i.push(St("Visible",n.Workbook.Sheets[a].Hidden==1?"SheetHidden":"SheetVeryHidden",{}));else{for(var c=0;c<a&&!(n.Workbook.Sheets[c]&&!n.Workbook.Sheets[c].Hidden);++c);c==a&&i.push("<Selected/>")}return((((n||{}).Workbook||{}).Views||[])[0]||{}).RTL&&i.push("<DisplayRightToLeft/>"),t["!protect"]&&(i.push(tr("ProtectContents","True")),t["!protect"].objects&&i.push(tr("ProtectObjects","True")),t["!protect"].scenarios&&i.push(tr("ProtectScenarios","True")),t["!protect"].selectLockedCells!=null&&!t["!protect"].selectLockedCells?i.push(tr("EnableSelection","NoSelection")):t["!protect"].selectUnlockedCells!=null&&!t["!protect"].selectUnlockedCells&&i.push(tr("EnableSelection","UnlockedCells")),[["formatCells","AllowFormatCells"],["formatColumns","AllowSizeCols"],["formatRows","AllowSizeRows"],["insertColumns","AllowInsertCols"],["insertRows","AllowInsertRows"],["insertHyperlinks","AllowInsertHyperlinks"],["deleteColumns","AllowDeleteCols"],["deleteRows","AllowDeleteRows"],["sort","AllowSort"],["autoFilter","AllowFilter"],["pivotTables","AllowUsePivotTables"]].forEach(function(d){t["!protect"][d[0]]&&i.push("<"+d[1]+"/>")})),i.length==0?"":St("WorksheetOptions",i.join(""),{xmlns:si.x})}function bz(t){return t.map(function(s){var a=TR(s.t||""),n=St("ss:Data",a,{xmlns:"http://www.w3.org/TR/REC-html40"});return St("Comment",n,{"ss:Author":s.a})}).join("")}function Sz(t,s,a,n,i,c,d){if(!t||t.v==null&&t.f==null)return"";var h={};if(t.f&&(h["ss:Formula"]="="+ma(Oj(t.f,d))),t.F&&t.F.slice(0,s.length)==s){var f=Vn(t.F.slice(s.length+1));h["ss:ArrayRange"]="RC:R"+(f.r==d.r?"":"["+(f.r-d.r)+"]")+"C"+(f.c==d.c?"":"["+(f.c-d.c)+"]")}if(t.l&&t.l.Target&&(h["ss:HRef"]=ma(t.l.Target),t.l.Tooltip&&(h["x:HRefScreenTip"]=ma(t.l.Tooltip))),a["!merges"])for(var g=a["!merges"],p=0;p!=g.length;++p)g[p].s.c!=d.c||g[p].s.r!=d.r||(g[p].e.c>g[p].s.c&&(h["ss:MergeAcross"]=g[p].e.c-g[p].s.c),g[p].e.r>g[p].s.r&&(h["ss:MergeDown"]=g[p].e.r-g[p].s.r));var v="",y="";switch(t.t){case"z":if(!n.sheetStubs)return"";break;case"n":v="Number",y=String(t.v);break;case"b":v="Boolean",y=t.v?"1":"0";break;case"e":v="Error",y=ef[t.v];break;case"d":v="DateTime",y=new Date(t.v).toISOString(),t.z==null&&(t.z=t.z||on[14]);break;case"s":v="String",y=CR(t.v||"");break}var _=uc(n.cellXfs,t,n);h["ss:StyleID"]="s"+(21+_),h["ss:Index"]=d.c+1;var S=t.v!=null?y:"",b=t.t=="z"?"":'<Data ss:Type="'+v+'">'+S+"</Data>";return(t.c||[]).length>0&&(b+=bz(t.c)),St("Cell",b,h)}function _z(t,s){var a='<Row ss:Index="'+(t+1)+'"';return s&&(s.hpt&&!s.hpx&&(s.hpx=_T(s.hpt)),s.hpx&&(a+=' ss:AutoFitHeight="0" ss:Height="'+s.hpx+'"'),s.hidden&&(a+=' ss:Hidden="1"')),a+">"}function Cz(t,s,a,n){if(!t["!ref"])return"";var i=Oa(t["!ref"]),c=t["!merges"]||[],d=0,h=[];t["!cols"]&&t["!cols"].forEach(function(T,E){Dj(T);var A=!!T.width,O=eg(E,T),Q={"ss:Index":E+1};A&&(Q["ss:Width"]=wp(O.width)),T.hidden&&(Q["ss:Hidden"]="1"),h.push(St("Column",null,Q))});for(var f=Array.isArray(t),g=i.s.r;g<=i.e.r;++g){for(var p=[_z(g,(t["!rows"]||[])[g])],v=i.s.c;v<=i.e.c;++v){var y=!1;for(d=0;d!=c.length;++d)if(!(c[d].s.c>v)&&!(c[d].s.r>g)&&!(c[d].e.c<v)&&!(c[d].e.r<g)){(c[d].s.c!=v||c[d].s.r!=g)&&(y=!0);break}if(!y){var _={r:g,c:v},S=xa(_),b=f?(t[g]||[])[v]:t[S];p.push(Sz(b,S,t,s,a,n,_))}}p.push("</Row>"),p.length>2&&h.push(p.join(""))}return h.join("")}function Tz(t,s,a){var n=[],i=a.SheetNames[t],c=a.Sheets[i],d=c?Nz(c,s,t,a):"";return d.length>0&&n.push("<Names>"+d+"</Names>"),d=c?Cz(c,s,t,a):"",d.length>0&&n.push("<Table>"+d+"</Table>"),n.push(wz(c,s,t,a)),n.join("")}function kz(t,s){s||(s={}),t.SSF||(t.SSF=Hr(on)),t.SSF&&(Yp(),Kp(t.SSF),s.revssf=Zp(t.SSF),s.revssf[t.SSF[65535]]=0,s.ssf=t.SSF,s.cellXfs=[],uc(s.cellXfs,{},{revssf:{General:0}}));var a=[];a.push(gz(t,s)),a.push(vz()),a.push(""),a.push("");for(var n=0;n<t.SheetNames.length;++n)a.push(St("Worksheet",Tz(n,s,t),{"ss:Name":ma(t.SheetNames[n])}));return a[2]=yz(t,s),a[3]=jz(t),Cn+St("Workbook",a.join(""),{xmlns:si.ss,"xmlns:o":si.o,"xmlns:x":si.x,"xmlns:ss":si.ss,"xmlns:dt":si.dt,"xmlns:html":si.html})}var xv={SI:"e0859ff2f94f6810ab9108002b27b3d9",DSI:"02d5cdd59c2e1b10939708002b2cf9ae",UDI:"05d5cdd59c2e1b10939708002b2cf9ae"};function Ez(t,s){var a=[],n=[],i=[],c=0,d,h=d2(b2,"n"),f=d2(S2,"n");if(t.Props)for(d=rr(t.Props),c=0;c<d.length;++c)(Object.prototype.hasOwnProperty.call(h,d[c])?a:Object.prototype.hasOwnProperty.call(f,d[c])?n:i).push([d[c],t.Props[d[c]]]);if(t.Custprops)for(d=rr(t.Custprops),c=0;c<d.length;++c)Object.prototype.hasOwnProperty.call(t.Props||{},d[c])||(Object.prototype.hasOwnProperty.call(h,d[c])?a:Object.prototype.hasOwnProperty.call(f,d[c])?n:i).push([d[c],t.Custprops[d[c]]]);var g=[];for(c=0;c<i.length;++c)xT.indexOf(i[c][0])>-1||hT.indexOf(i[c][0])>-1||i[c][1]!=null&&g.push(i[c]);n.length&&ya.utils.cfb_add(s,"/SummaryInformation",E2(n,xv.SI,f,S2)),(a.length||g.length)&&ya.utils.cfb_add(s,"/DocumentSummaryInformation",E2(a,xv.DSI,h,b2,g.length?g:null,xv.UDI))}function Az(t,s){var a=s||{},n=ya.utils.cfb_new({root:"R"}),i="/Workbook";switch(a.bookType||"xls"){case"xls":a.bookType="biff8";case"xla":a.bookType||(a.bookType="xla");case"biff8":i="/Workbook",a.biff=8;break;case"biff5":i="/Book",a.biff=5;break;default:throw new Error("invalid type "+a.bookType+" for XLS CFB")}return ya.utils.cfb_add(n,i,GT(t,a)),a.biff==8&&(t.Props||t.Custprops)&&Ez(t,n),a.biff==8&&t.vbaraw&&KI(n,ya.read(t.vbaraw,{type:typeof t.vbaraw=="string"?"binary":"buffer"})),n}var Dz={0:{f:M8},1:{f:V8},2:{f:lB},3:{f:Z8},4:{f:G8},5:{f:nB},6:{f:mB},7:{f:eB},8:{f:jB},9:{f:yB},10:{f:gB},11:{f:vB},12:{f:$8},13:{f:dB},14:{f:Q8},15:{f:K8},16:{f:iB},17:{f:xB},18:{f:sB},19:{f:Tj},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:rz},40:{},42:{},43:{f:mI},44:{f:uI},45:{f:pI},46:{f:vI},47:{f:gI},48:{},49:{f:$R},50:{},51:{f:MI},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:WL},62:{f:hB},63:{f:zI},64:{f:LB},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:Co,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:PB},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:z8},148:{f:I8,p:16},151:{f:CB},152:{},153:{f:az},154:{},155:{},156:{f:tz},157:{},158:{},159:{T:1,f:tI},160:{T:-1},161:{T:1,f:Nd},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:NB},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:PI},336:{T:-1},337:{f:II,T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:fy},357:{},358:{},359:{},360:{T:1},361:{},362:{f:BL},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:TB},427:{f:kB},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:AB},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:B8},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:SB},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:fy},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:WI},633:{T:1},634:{T:-1},635:{T:1,f:HI},636:{T:-1},637:{f:KR},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:YB},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:IB},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}};function _t(t,s,a,n){var i=s;if(!isNaN(i)){var c=n||(a||[]).length||0,d=t.next(4);d.write_shift(2,i),d.write_shift(2,c),c>0&&Sj(a)&&t.push(a)}}function Pz(t,s,a,n){var i=(a||[]).length||0;if(i<=8224)return _t(t,s,a,i);var c=s;if(!isNaN(c)){for(var d=a.parts||[],h=0,f=0,g=0;g+(d[h]||8224)<=8224;)g+=d[h]||8224,h++;var p=t.next(4);for(p.write_shift(2,c),p.write_shift(2,g),t.push(a.slice(f,f+g)),f+=g;f<i;){for(p=t.next(4),p.write_shift(2,60),g=0;g+(d[h]||8224)<=8224;)g+=d[h]||8224,h++;p.write_shift(2,g),t.push(a.slice(f,f+g)),f+=g}}}function sf(t,s,a){return t||(t=nt(7)),t.write_shift(2,s),t.write_shift(2,a),t.write_shift(2,0),t.write_shift(1,0),t}function Oz(t,s,a,n){var i=nt(9);return sf(i,t,s),gT(a,n||"b",i),i}function Mz(t,s,a){var n=nt(8+2*a.length);return sf(n,t,s),n.write_shift(1,a.length),n.write_shift(a.length,a,"sbcs"),n.l<n.length?n.slice(0,n.l):n}function Rz(t,s,a,n){if(s.v!=null)switch(s.t){case"d":case"n":var i=s.t=="d"?Vr(Sr(s.v)):s.v;i==(i|0)&&i>=0&&i<65536?_t(t,2,YL(a,n,i)):_t(t,3,KL(a,n,i));return;case"b":case"e":_t(t,5,Oz(a,n,s.v,s.t));return;case"s":case"str":_t(t,4,Mz(a,n,(s.v||"").slice(0,255)));return}_t(t,1,sf(null,a,n))}function Lz(t,s,a,n){var i=Array.isArray(s),c=Oa(s["!ref"]||"A1"),d,h="",f=[];if(c.e.c>255||c.e.r>16383){if(n.WTF)throw new Error("Range "+(s["!ref"]||"A1")+" exceeds format limit A1:IV16384");c.e.c=Math.min(c.e.c,255),c.e.r=Math.min(c.e.c,16383),d=bn(c)}for(var g=c.s.r;g<=c.e.r;++g){h=ar(g);for(var p=c.s.c;p<=c.e.c;++p){g===c.s.r&&(f[p]=pr(p)),d=f[p]+h;var v=i?(s[g]||[])[p]:s[d];v&&Rz(t,v,g,p)}}}function Iz(t,s){for(var a=s||{},n=Ur(),i=0,c=0;c<t.SheetNames.length;++c)t.SheetNames[c]==a.sheet&&(i=c);if(i==0&&a.sheet&&t.SheetNames[0]!=a.sheet)throw new Error("Sheet not found: "+a.sheet);return _t(n,a.biff==4?1033:a.biff==3?521:9,Aj(t,16,a)),Lz(n,t.Sheets[t.SheetNames[i]],i,a),_t(n,10),n.end()}function Fz(t,s,a){_t(t,49,DL({sz:12,name:"Arial"},a))}function Bz(t,s,a){s&&[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var i=n[0];i<=n[1];++i)s[i]!=null&&_t(t,1054,ML(i,s[i],a))})}function zz(t,s){var a=nt(19);a.write_shift(4,2151),a.write_shift(4,0),a.write_shift(4,0),a.write_shift(2,3),a.write_shift(1,1),a.write_shift(4,0),_t(t,2151,a),a=nt(39),a.write_shift(4,2152),a.write_shift(4,0),a.write_shift(4,0),a.write_shift(2,3),a.write_shift(1,0),a.write_shift(4,0),a.write_shift(2,1),a.write_shift(4,4),a.write_shift(2,0),jT(Oa(s["!ref"]||"A1"),a),a.write_shift(4,4),_t(t,2152,a)}function Uz(t,s){for(var a=0;a<16;++a)_t(t,224,D2({numFmtId:0,style:!0},0,s));s.cellXfs.forEach(function(n){_t(t,224,D2(n,0,s))})}function Vz(t,s){for(var a=0;a<s["!links"].length;++a){var n=s["!links"][a];_t(t,440,VL(n)),n[1].Tooltip&&_t(t,2048,HL(n))}delete s["!links"]}function Hz(t,s){if(s){var a=0;s.forEach(function(n,i){++a<=256&&n&&_t(t,125,GL(eg(i,n),i))})}}function $z(t,s,a,n,i){var c=16+uc(i.cellXfs,s,i);if(s.v==null&&!s.bf){_t(t,513,xd(a,n,c));return}if(s.bf)_t(t,6,f8(s,a,n,i,c));else switch(s.t){case"d":case"n":var d=s.t=="d"?Vr(Sr(s.v)):s.v;_t(t,515,FL(a,n,d,c));break;case"b":case"e":_t(t,517,IL(a,n,s.v,c,i,s.t));break;case"s":case"str":if(i.bookSST){var h=Rj(i.Strings,s.v,i.revStrings);_t(t,253,PL(a,n,h,c))}else _t(t,516,OL(a,n,(s.v||"").slice(0,255),c,i));break;default:_t(t,513,xd(a,n,c))}}function Wz(t,s,a){var n=Ur(),i=a.SheetNames[t],c=a.Sheets[i]||{},d=(a||{}).Workbook||{},h=(d.Sheets||[])[t]||{},f=Array.isArray(c),g=s.biff==8,p,v="",y=[],_=Oa(c["!ref"]||"A1"),S=g?65536:16384;if(_.e.c>255||_.e.r>=S){if(s.WTF)throw new Error("Range "+(c["!ref"]||"A1")+" exceeds format limit A1:IV16384");_.e.c=Math.min(_.e.c,255),_.e.r=Math.min(_.e.c,S-1)}_t(n,2057,Aj(a,16,s)),_t(n,13,ji(1)),_t(n,12,ji(100)),_t(n,15,wr(!0)),_t(n,17,wr(!1)),_t(n,16,fd(.001)),_t(n,95,wr(!0)),_t(n,42,wr(!1)),_t(n,43,wr(!1)),_t(n,130,ji(1)),_t(n,128,LL()),_t(n,131,wr(!1)),_t(n,132,wr(!1)),g&&Hz(n,c["!cols"]),_t(n,512,RL(_,s)),g&&(c["!links"]=[]);for(var b=_.s.r;b<=_.e.r;++b){v=ar(b);for(var T=_.s.c;T<=_.e.c;++T){b===_.s.r&&(y[T]=pr(T)),p=y[T]+v;var E=f?(c[b]||[])[T]:c[p];E&&($z(n,E,b,T,s),g&&E.l&&c["!links"].push([p,E.l]))}}var A=h.CodeName||h.name||i;return g&&_t(n,574,AL((d.Views||[])[0])),g&&(c["!merges"]||[]).length&&_t(n,229,UL(c["!merges"])),g&&Vz(n,c),_t(n,442,yT(A)),g&&zz(n,c),_t(n,10),n.end()}function Gz(t,s,a){var n=Ur(),i=(t||{}).Workbook||{},c=i.Sheets||[],d=i.WBProps||{},h=a.biff==8,f=a.biff==5;if(_t(n,2057,Aj(t,5,a)),a.bookType=="xla"&&_t(n,135),_t(n,225,h?ji(1200):null),_t(n,193,gL(2)),f&&_t(n,191),f&&_t(n,192),_t(n,226),_t(n,92,CL("SheetJS",a)),_t(n,66,ji(h?1200:1252)),h&&_t(n,353,ji(0)),h&&_t(n,448),_t(n,317,qL(t.SheetNames.length)),h&&t.vbaraw&&_t(n,211),h&&t.vbaraw){var g=d.CodeName||"ThisWorkbook";_t(n,442,yT(g))}_t(n,156,ji(17)),_t(n,25,wr(!1)),_t(n,18,wr(!1)),_t(n,19,ji(0)),h&&_t(n,431,wr(!1)),h&&_t(n,444,ji(0)),_t(n,61,EL()),_t(n,64,wr(!1)),_t(n,141,ji(0)),_t(n,34,wr(XB(t)=="true")),_t(n,14,wr(!0)),h&&_t(n,439,wr(!1)),_t(n,218,ji(0)),Fz(n,t,a),Bz(n,t.SSF,a),Uz(n,a),h&&_t(n,352,wr(!1));var p=n.end(),v=Ur();h&&_t(v,140,$L()),h&&a.Strings&&Pz(v,252,kL(a.Strings)),_t(v,10);var y=v.end(),_=Ur(),S=0,b=0;for(b=0;b<t.SheetNames.length;++b)S+=(h?12:11)+(h?2:1)*t.SheetNames[b].length;var T=p.length+S+y.length;for(b=0;b<t.SheetNames.length;++b){var E=c[b]||{};_t(_,133,TL({pos:T,hs:E.Hidden||0,dt:0,name:t.SheetNames[b]},a)),T+=s[b].length}var A=_.end();if(S!=A.length)throw new Error("BS8 "+S+" != "+A.length);var O=[];return p.length&&O.push(p),A.length&&O.push(A),y.length&&O.push(y),er(O)}function qz(t,s){var a=s||{},n=[];t&&!t.SSF&&(t.SSF=Hr(on)),t&&t.SSF&&(Yp(),Kp(t.SSF),a.revssf=Zp(t.SSF),a.revssf[t.SSF[65535]]=0,a.ssf=t.SSF),a.Strings=[],a.Strings.Count=0,a.Strings.Unique=0,Lj(a),a.cellXfs=[],uc(a.cellXfs,{},{revssf:{General:0}}),t.Props||(t.Props={});for(var i=0;i<t.SheetNames.length;++i)n[n.length]=Wz(i,a,t);return n.unshift(Gz(t,n,a)),er(n)}function GT(t,s){for(var a=0;a<=t.SheetNames.length;++a){var n=t.Sheets[t.SheetNames[a]];if(!(!n||!n["!ref"])){var i=ni(n["!ref"]);i.e.c>255&&typeof console<"u"&&console.error&&console.error("Worksheet '"+t.SheetNames[a]+"' extends beyond column IV (255).  Data may be lost.")}}var c=s||{};switch(c.biff||2){case 8:case 5:return qz(t,s);case 4:case 3:case 2:return Iz(t,s)}throw new Error("invalid type "+c.bookType+" for BIFF")}function Kz(t,s,a,n){for(var i=t["!merges"]||[],c=[],d=s.s.c;d<=s.e.c;++d){for(var h=0,f=0,g=0;g<i.length;++g)if(!(i[g].s.r>a||i[g].s.c>d)&&!(i[g].e.r<a||i[g].e.c<d)){if(i[g].s.r<a||i[g].s.c<d){h=-1;break}h=i[g].e.r-i[g].s.r+1,f=i[g].e.c-i[g].s.c+1;break}if(!(h<0)){var p=xa({r:a,c:d}),v=n.dense?(t[a]||[])[d]:t[p],y=v&&v.v!=null&&(v.h||_R(v.w||(nl(v),v.w)||""))||"",_={};h>1&&(_.rowspan=h),f>1&&(_.colspan=f),n.editable?y='<span contenteditable="true">'+y+"</span>":v&&(_["data-t"]=v&&v.t||"z",v.v!=null&&(_["data-v"]=v.v),v.z!=null&&(_["data-z"]=v.z),v.l&&(v.l.Target||"#").charAt(0)!="#"&&(y='<a href="'+v.l.Target+'">'+y+"</a>")),_.id=(n.id||"sjs")+"-"+p,c.push(St("td",y,_))}}var S="<tr>";return S+c.join("")+"</tr>"}var Yz='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',Zz="</body></html>";function Xz(t,s,a){var n=[];return n.join("")+"<table"+(a&&a.id?' id="'+a.id+'"':"")+">"}function qT(t,s){var a=s||{},n=a.header!=null?a.header:Yz,i=a.footer!=null?a.footer:Zz,c=[n],d=ni(t["!ref"]);a.dense=Array.isArray(t),c.push(Xz(t,d,a));for(var h=d.s.r;h<=d.e.r;++h)c.push(Kz(t,d,h,a));return c.push("</table>"+i),c.join("")}function KT(t,s,a){var n=a||{},i=0,c=0;if(n.origin!=null)if(typeof n.origin=="number")i=n.origin;else{var d=typeof n.origin=="string"?Vn(n.origin):n.origin;i=d.r,c=d.c}var h=s.getElementsByTagName("tr"),f=Math.min(n.sheetRows||1e7,h.length),g={s:{r:0,c:0},e:{r:i,c}};if(t["!ref"]){var p=ni(t["!ref"]);g.s.r=Math.min(g.s.r,p.s.r),g.s.c=Math.min(g.s.c,p.s.c),g.e.r=Math.max(g.e.r,p.e.r),g.e.c=Math.max(g.e.c,p.e.c),i==-1&&(g.e.r=i=p.e.r+1)}var v=[],y=0,_=t["!rows"]||(t["!rows"]=[]),S=0,b=0,T=0,E=0,A=0,O=0;for(t["!cols"]||(t["!cols"]=[]);S<h.length&&b<f;++S){var Q=h[S];if(F2(Q)){if(n.display)continue;_[b]={hidden:!0}}var q=Q.children;for(T=E=0;T<q.length;++T){var U=q[T];if(!(n.display&&F2(U))){var D=U.hasAttribute("data-v")?U.getAttribute("data-v"):U.hasAttribute("v")?U.getAttribute("v"):ER(U.innerHTML),M=U.getAttribute("data-z")||U.getAttribute("z");for(y=0;y<v.length;++y){var P=v[y];P.s.c==E+c&&P.s.r<b+i&&b+i<=P.e.r&&(E=P.e.c+1-c,y=-1)}O=+U.getAttribute("colspan")||1,((A=+U.getAttribute("rowspan")||1)>1||O>1)&&v.push({s:{r:b+i,c:E+c},e:{r:b+i+(A||1)-1,c:E+c+(O||1)-1}});var G={t:"s",v:D},K=U.getAttribute("data-t")||U.getAttribute("t")||"";D!=null&&(D.length==0?G.t=K||"z":n.raw||D.trim().length==0||K=="s"||(D==="TRUE"?G={t:"b",v:!0}:D==="FALSE"?G={t:"b",v:!1}:isNaN(el(D))?isNaN(Pm(D).getDate())||(G={t:"d",v:Sr(D)},n.cellDates||(G={t:"n",v:Vr(G.v)}),G.z=n.dateNF||on[14]):G={t:"n",v:el(D)})),G.z===void 0&&M!=null&&(G.z=M);var z="",J=U.getElementsByTagName("A");if(J&&J.length)for(var W=0;W<J.length&&!(J[W].hasAttribute("href")&&(z=J[W].getAttribute("href"),z.charAt(0)!="#"));++W);z&&z.charAt(0)!="#"&&(G.l={Target:z}),n.dense?(t[b+i]||(t[b+i]=[]),t[b+i][E+c]=G):t[xa({c:E+c,r:b+i})]=G,g.e.c<E+c&&(g.e.c=E+c),E+=O}}++b}return v.length&&(t["!merges"]=(t["!merges"]||[]).concat(v)),g.e.r=Math.max(g.e.r,b-1+i),t["!ref"]=bn(g),b>=f&&(t["!fullref"]=bn((g.e.r=h.length-S+b-1+i,g))),t}function YT(t,s){var a=s||{},n=a.dense?[]:{};return KT(n,t,s)}function Qz(t,s){return gd(YT(t,s),s)}function F2(t){var s="",a=Jz(t);return a&&(s=a(t).getPropertyValue("display")),s||(s=t.style&&t.style.display),s==="none"}function Jz(t){return t.ownerDocument.defaultView&&typeof t.ownerDocument.defaultView.getComputedStyle=="function"?t.ownerDocument.defaultView.getComputedStyle:typeof getComputedStyle=="function"?getComputedStyle:null}var e7=(function(){var t=["<office:master-styles>",'<style:master-page style:name="mp1" style:page-layout-name="mp1">',"<style:header/>",'<style:header-left style:display="false"/>',"<style:footer/>",'<style:footer-left style:display="false"/>',"</style:master-page>","</office:master-styles>"].join(""),s="<office:document-styles "+Mm({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","office:version":"1.2"})+">"+t+"</office:document-styles>";return function(){return Cn+s}})(),B2=(function(){var t=function(c){return ma(c).replace(/  +/g,function(d){return'<text:s text:c="'+d.length+'"/>'}).replace(/\t/g,"<text:tab/>").replace(/\n/g,"</text:p><text:p>").replace(/^ /,"<text:s/>").replace(/ $/,"<text:s/>")},s=`          <table:table-cell />
`,a=`          <table:covered-table-cell/>
`,n=function(c,d,h){var f=[];f.push('      <table:table table:name="'+ma(d.SheetNames[h])+`" table:style-name="ta1">
`);var g=0,p=0,v=ni(c["!ref"]||"A1"),y=c["!merges"]||[],_=0,S=Array.isArray(c);if(c["!cols"])for(p=0;p<=v.e.c;++p)f.push("        <table:table-column"+(c["!cols"][p]?' table:style-name="co'+c["!cols"][p].ods+'"':"")+`></table:table-column>
`);var b="",T=c["!rows"]||[];for(g=0;g<v.s.r;++g)b=T[g]?' table:style-name="ro'+T[g].ods+'"':"",f.push("        <table:table-row"+b+`></table:table-row>
`);for(;g<=v.e.r;++g){for(b=T[g]?' table:style-name="ro'+T[g].ods+'"':"",f.push("        <table:table-row"+b+`>
`),p=0;p<v.s.c;++p)f.push(s);for(;p<=v.e.c;++p){var E=!1,A={},O="";for(_=0;_!=y.length;++_)if(!(y[_].s.c>p)&&!(y[_].s.r>g)&&!(y[_].e.c<p)&&!(y[_].e.r<g)){(y[_].s.c!=p||y[_].s.r!=g)&&(E=!0),A["table:number-columns-spanned"]=y[_].e.c-y[_].s.c+1,A["table:number-rows-spanned"]=y[_].e.r-y[_].s.r+1;break}if(E){f.push(a);continue}var Q=xa({r:g,c:p}),q=S?(c[g]||[])[p]:c[Q];if(q&&q.f&&(A["table:formula"]=ma(j8(q.f)),q.F&&q.F.slice(0,Q.length)==Q)){var U=ni(q.F);A["table:number-matrix-columns-spanned"]=U.e.c-U.s.c+1,A["table:number-matrix-rows-spanned"]=U.e.r-U.s.r+1}if(!q){f.push(s);continue}switch(q.t){case"b":O=q.v?"TRUE":"FALSE",A["office:value-type"]="boolean",A["office:boolean-value"]=q.v?"true":"false";break;case"n":O=q.w||String(q.v||0),A["office:value-type"]="float",A["office:value"]=q.v||0;break;case"s":case"str":O=q.v==null?"":q.v,A["office:value-type"]="string";break;case"d":O=q.w||Sr(q.v).toISOString(),A["office:value-type"]="date",A["office:date-value"]=Sr(q.v).toISOString(),A["table:style-name"]="ce1";break;default:f.push(s);continue}var D=t(O);if(q.l&&q.l.Target){var M=q.l.Target;M=M.charAt(0)=="#"?"#"+N8(M.slice(1)):M,M.charAt(0)!="#"&&!M.match(/^\w+:/)&&(M="../"+M),D=St("text:a",D,{"xlink:href":M.replace(/&/g,"&amp;")})}f.push("          "+St("table:table-cell",St("text:p",D,{}),A)+`
`)}f.push(`        </table:table-row>
`)}return f.push(`      </table:table>
`),f.join("")},i=function(c,d){c.push(` <office:automatic-styles>
`),c.push(`  <number:date-style style:name="N37" number:automatic-order="true">
`),c.push(`   <number:month number:style="long"/>
`),c.push(`   <number:text>/</number:text>
`),c.push(`   <number:day number:style="long"/>
`),c.push(`   <number:text>/</number:text>
`),c.push(`   <number:year/>
`),c.push(`  </number:date-style>
`);var h=0;d.SheetNames.map(function(g){return d.Sheets[g]}).forEach(function(g){if(g&&g["!cols"]){for(var p=0;p<g["!cols"].length;++p)if(g["!cols"][p]){var v=g["!cols"][p];if(v.width==null&&v.wpx==null&&v.wch==null)continue;Dj(v),v.ods=h;var y=g["!cols"][p].wpx+"px";c.push('  <style:style style:name="co'+h+`" style:family="table-column">
`),c.push('   <style:table-column-properties fo:break-before="auto" style:column-width="'+y+`"/>
`),c.push(`  </style:style>
`),++h}}});var f=0;d.SheetNames.map(function(g){return d.Sheets[g]}).forEach(function(g){if(g&&g["!rows"]){for(var p=0;p<g["!rows"].length;++p)if(g["!rows"][p]){g["!rows"][p].ods=f;var v=g["!rows"][p].hpx+"px";c.push('  <style:style style:name="ro'+f+`" style:family="table-row">
`),c.push('   <style:table-row-properties fo:break-before="auto" style:row-height="'+v+`"/>
`),c.push(`  </style:style>
`),++f}}}),c.push(`  <style:style style:name="ta1" style:family="table" style:master-page-name="mp1">
`),c.push(`   <style:table-properties table:display="true" style:writing-mode="lr-tb"/>
`),c.push(`  </style:style>
`),c.push(`  <style:style style:name="ce1" style:family="table-cell" style:parent-style-name="Default" style:data-style-name="N37"/>
`),c.push(` </office:automatic-styles>
`)};return function(d,h){var f=[Cn],g=Mm({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:meta":"urn:oasis:names:tc:opendocument:xmlns:meta:1.0","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:presentation":"urn:oasis:names:tc:opendocument:xmlns:presentation:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:chart":"urn:oasis:names:tc:opendocument:xmlns:chart:1.0","xmlns:dr3d":"urn:oasis:names:tc:opendocument:xmlns:dr3d:1.0","xmlns:math":"http://www.w3.org/1998/Math/MathML","xmlns:form":"urn:oasis:names:tc:opendocument:xmlns:form:1.0","xmlns:script":"urn:oasis:names:tc:opendocument:xmlns:script:1.0","xmlns:ooo":"http://openoffice.org/2004/office","xmlns:ooow":"http://openoffice.org/2004/writer","xmlns:oooc":"http://openoffice.org/2004/calc","xmlns:dom":"http://www.w3.org/2001/xml-events","xmlns:xforms":"http://www.w3.org/2002/xforms","xmlns:xsd":"http://www.w3.org/2001/XMLSchema","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","xmlns:sheet":"urn:oasis:names:tc:opendocument:sh33tjs:1.0","xmlns:rpt":"http://openoffice.org/2005/report","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","xmlns:xhtml":"http://www.w3.org/1999/xhtml","xmlns:grddl":"http://www.w3.org/2003/g/data-view#","xmlns:tableooo":"http://openoffice.org/2009/table","xmlns:drawooo":"http://openoffice.org/2010/draw","xmlns:calcext":"urn:org:documentfoundation:names:experimental:calc:xmlns:calcext:1.0","xmlns:loext":"urn:org:documentfoundation:names:experimental:office:xmlns:loext:1.0","xmlns:field":"urn:openoffice:names:experimental:ooo-ms-interop:xmlns:field:1.0","xmlns:formx":"urn:openoffice:names:experimental:ooxml-odf-interop:xmlns:form:1.0","xmlns:css3t":"http://www.w3.org/TR/css3-text/","office:version":"1.2"}),p=Mm({"xmlns:config":"urn:oasis:names:tc:opendocument:xmlns:config:1.0","office:mimetype":"application/vnd.oasis.opendocument.spreadsheet"});h.bookType=="fods"?(f.push("<office:document"+g+p+`>
`),f.push(dT().replace(/office:document-meta/g,"office:meta"))):f.push("<office:document-content"+g+`>
`),i(f,d),f.push(`  <office:body>
`),f.push(`    <office:spreadsheet>
`);for(var v=0;v!=d.SheetNames.length;++v)f.push(n(d.Sheets[d.SheetNames[v]],d,v));return f.push(`    </office:spreadsheet>
`),f.push(`  </office:body>
`),h.bookType=="fods"?f.push("</office:document>"):f.push("</office:document-content>"),f.join("")}})();function ZT(t,s){if(s.bookType=="fods")return B2(t,s);var a=jj(),n="",i=[],c=[];return n="mimetype",Os(a,n,"application/vnd.oasis.opendocument.spreadsheet"),n="content.xml",Os(a,n,B2(t,s)),i.push([n,"text/xml"]),c.push([n,"ContentFile"]),n="styles.xml",Os(a,n,e7(t,s)),i.push([n,"text/xml"]),c.push([n,"StylesFile"]),n="meta.xml",Os(a,n,Cn+dT()),i.push([n,"text/xml"]),c.push([n,"MetadataFile"]),n="manifest.rdf",Os(a,n,hL(c)),i.push([n,"application/rdf+xml"]),n="META-INF/manifest.xml",Os(a,n,dL(i)),a}/*! sheetjs (C) 2013-present SheetJS -- http://sheetjs.com */function _p(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function t7(t){return typeof TextEncoder<"u"?new TextEncoder().encode(t):Vi(Om(t))}function s7(t,s){e:for(var a=0;a<=t.length-s.length;++a){for(var n=0;n<s.length;++n)if(t[a+n]!=s[n])continue e;return!0}return!1}function rc(t){var s=t.reduce(function(i,c){return i+c.length},0),a=new Uint8Array(s),n=0;return t.forEach(function(i){a.set(i,n),n+=i.length}),a}function a7(t,s,a){var n=Math.floor(a==0?0:Math.LOG10E*Math.log(Math.abs(a)))+6176-20,i=a/Math.pow(10,n-6176);t[s+15]|=n>>7,t[s+14]|=(n&127)<<1;for(var c=0;i>=1;++c,i/=256)t[s+c]=i&255;t[s+15]|=a>=0?0:128}function Rm(t,s){var a=s?s[0]:0,n=t[a]&127;e:if(t[a++]>=128&&(n|=(t[a]&127)<<7,t[a++]<128||(n|=(t[a]&127)<<14,t[a++]<128)||(n|=(t[a]&127)<<21,t[a++]<128)||(n+=(t[a]&127)*Math.pow(2,28),++a,t[a++]<128)||(n+=(t[a]&127)*Math.pow(2,35),++a,t[a++]<128)||(n+=(t[a]&127)*Math.pow(2,42),++a,t[a++]<128)))break e;return s&&(s[0]=a),n}function ca(t){var s=new Uint8Array(7);s[0]=t&127;var a=1;e:if(t>127){if(s[a-1]|=128,s[a]=t>>7&127,++a,t<=16383||(s[a-1]|=128,s[a]=t>>14&127,++a,t<=2097151)||(s[a-1]|=128,s[a]=t>>21&127,++a,t<=268435455)||(s[a-1]|=128,s[a]=t/256>>>21&127,++a,t<=34359738367)||(s[a-1]|=128,s[a]=t/65536>>>21&127,++a,t<=4398046511103))break e;s[a-1]|=128,s[a]=t/16777216>>>21&127,++a}return s.slice(0,a)}function Au(t){var s=0,a=t[s]&127;e:if(t[s++]>=128){if(a|=(t[s]&127)<<7,t[s++]<128||(a|=(t[s]&127)<<14,t[s++]<128)||(a|=(t[s]&127)<<21,t[s++]<128))break e;a|=(t[s]&127)<<28}return a}function An(t){for(var s=[],a=[0];a[0]<t.length;){var n=a[0],i=Rm(t,a),c=i&7;i=Math.floor(i/8);var d=0,h;if(i==0)break;switch(c){case 0:{for(var f=a[0];t[a[0]++]>=128;);h=t.slice(f,a[0])}break;case 5:d=4,h=t.slice(a[0],a[0]+d),a[0]+=d;break;case 1:d=8,h=t.slice(a[0],a[0]+d),a[0]+=d;break;case 2:d=Rm(t,a),h=t.slice(a[0],a[0]+d),a[0]+=d;break;case 3:case 4:default:throw new Error("PB Type ".concat(c," for Field ").concat(i," at offset ").concat(n))}var g={data:h,type:c};s[i]==null?s[i]=[g]:s[i].push(g)}return s}function Xn(t){var s=[];return t.forEach(function(a,n){a.forEach(function(i){i.data&&(s.push(ca(n*8+i.type)),i.type==2&&s.push(ca(i.data.length)),s.push(i.data))})}),rc(s)}function Ii(t){for(var s,a=[],n=[0];n[0]<t.length;){var i=Rm(t,n),c=An(t.slice(n[0],n[0]+i));n[0]+=i;var d={id:Au(c[1][0].data),messages:[]};c[2].forEach(function(h){var f=An(h.data),g=Au(f[3][0].data);d.messages.push({meta:f,data:t.slice(n[0],n[0]+g)}),n[0]+=g}),(s=c[3])!=null&&s[0]&&(d.merge=Au(c[3][0].data)>>>0>0),a.push(d)}return a}function hu(t){var s=[];return t.forEach(function(a){var n=[];n[1]=[{data:ca(a.id),type:0}],n[2]=[],a.merge!=null&&(n[3]=[{data:ca(+!!a.merge),type:0}]);var i=[];a.messages.forEach(function(d){i.push(d.data),d.meta[3]=[{type:0,data:ca(d.data.length)}],n[2].push({data:Xn(d.meta),type:2})});var c=Xn(n);s.push(ca(c.length)),s.push(c),i.forEach(function(d){return s.push(d)})}),rc(s)}function n7(t,s){if(t!=0)throw new Error("Unexpected Snappy chunk type ".concat(t));for(var a=[0],n=Rm(s,a),i=[];a[0]<s.length;){var c=s[a[0]]&3;if(c==0){var d=s[a[0]++]>>2;if(d<60)++d;else{var h=d-59;d=s[a[0]],h>1&&(d|=s[a[0]+1]<<8),h>2&&(d|=s[a[0]+2]<<16),h>3&&(d|=s[a[0]+3]<<24),d>>>=0,d++,a[0]+=h}i.push(s.slice(a[0],a[0]+d)),a[0]+=d;continue}else{var f=0,g=0;if(c==1?(g=(s[a[0]]>>2&7)+4,f=(s[a[0]++]&224)<<3,f|=s[a[0]++]):(g=(s[a[0]++]>>2)+1,c==2?(f=s[a[0]]|s[a[0]+1]<<8,a[0]+=2):(f=(s[a[0]]|s[a[0]+1]<<8|s[a[0]+2]<<16|s[a[0]+3]<<24)>>>0,a[0]+=4)),i=[rc(i)],f==0)throw new Error("Invalid offset 0");if(f>i[0].length)throw new Error("Invalid offset beyond length");if(g>=f)for(i.push(i[0].slice(-f)),g-=f;g>=i[i.length-1].length;)i.push(i[i.length-1]),g-=i[i.length-1].length;i.push(i[0].slice(-f,-f+g))}}var p=rc(i);if(p.length!=n)throw new Error("Unexpected length: ".concat(p.length," != ").concat(n));return p}function Fi(t){for(var s=[],a=0;a<t.length;){var n=t[a++],i=t[a]|t[a+1]<<8|t[a+2]<<16;a+=3,s.push(n7(n,t.slice(a,a+i))),a+=i}if(a!==t.length)throw new Error("data is not a valid framed stream!");return rc(s)}function mu(t){for(var s=[],a=0;a<t.length;){var n=Math.min(t.length-a,268435455),i=new Uint8Array(4);s.push(i);var c=ca(n),d=c.length;s.push(c),n<=60?(d++,s.push(new Uint8Array([n-1<<2]))):n<=256?(d+=2,s.push(new Uint8Array([240,n-1&255]))):n<=65536?(d+=3,s.push(new Uint8Array([244,n-1&255,n-1>>8&255]))):n<=16777216?(d+=4,s.push(new Uint8Array([248,n-1&255,n-1>>8&255,n-1>>16&255]))):n<=4294967296&&(d+=5,s.push(new Uint8Array([252,n-1&255,n-1>>8&255,n-1>>16&255,n-1>>>24&255]))),s.push(t.slice(a,a+n)),d+=n,i[0]=0,i[1]=d&255,i[2]=d>>8&255,i[3]=d>>16&255,a+=n}return rc(s)}function pv(t,s){var a=new Uint8Array(32),n=_p(a),i=12,c=0;switch(a[0]=5,t.t){case"n":a[1]=2,a7(a,i,t.v),c|=1,i+=16;break;case"b":a[1]=6,n.setFloat64(i,t.v?1:0,!0),c|=2,i+=8;break;case"s":if(s.indexOf(t.v)==-1)throw new Error("Value ".concat(t.v," missing from SST!"));a[1]=3,n.setUint32(i,s.indexOf(t.v),!0),c|=8,i+=4;break;default:throw"unsupported cell type "+t.t}return n.setUint32(8,c,!0),a.slice(0,i)}function gv(t,s){var a=new Uint8Array(32),n=_p(a),i=12,c=0;switch(a[0]=3,t.t){case"n":a[2]=2,n.setFloat64(i,t.v,!0),c|=32,i+=8;break;case"b":a[2]=6,n.setFloat64(i,t.v?1:0,!0),c|=32,i+=8;break;case"s":if(s.indexOf(t.v)==-1)throw new Error("Value ".concat(t.v," missing from SST!"));a[2]=3,n.setUint32(i,s.indexOf(t.v),!0),c|=16,i+=4;break;default:throw"unsupported cell type "+t.t}return n.setUint32(4,c,!0),a.slice(0,i)}function Kl(t){var s=An(t);return Rm(s[1][0].data)}function r7(t,s,a){var n,i,c,d;if(!((n=t[6])!=null&&n[0])||!((i=t[7])!=null&&i[0]))throw"Mutation only works on post-BNC storages!";var h=((d=(c=t[8])==null?void 0:c[0])==null?void 0:d.data)&&Au(t[8][0].data)>0||!1;if(h)throw"Math only works with normal offsets";for(var f=0,g=_p(t[7][0].data),p=0,v=[],y=_p(t[4][0].data),_=0,S=[],b=0;b<s.length;++b){if(s[b]==null){g.setUint16(b*2,65535,!0),y.setUint16(b*2,65535);continue}g.setUint16(b*2,p,!0),y.setUint16(b*2,_,!0);var T,E;switch(typeof s[b]){case"string":T=pv({t:"s",v:s[b]},a),E=gv({t:"s",v:s[b]},a);break;case"number":T=pv({t:"n",v:s[b]},a),E=gv({t:"n",v:s[b]},a);break;case"boolean":T=pv({t:"b",v:s[b]},a),E=gv({t:"b",v:s[b]},a);break;default:throw new Error("Unsupported value "+s[b])}v.push(T),p+=T.length,S.push(E),_+=E.length,++f}for(t[2][0].data=ca(f);b<t[7][0].data.length/2;++b)g.setUint16(b*2,65535,!0),y.setUint16(b*2,65535,!0);return t[6][0].data=rc(v),t[3][0].data=rc(S),f}function i7(t,s){if(!s||!s.numbers)throw new Error("Must pass a `numbers` option -- check the README");var a=t.Sheets[t.SheetNames[0]];t.SheetNames.length>1&&console.error("The Numbers writer currently writes only the first table");var n=ni(a["!ref"]);n.s.r=n.s.c=0;var i=!1;n.e.c>9&&(i=!0,n.e.c=9),n.e.r>49&&(i=!0,n.e.r=49),i&&console.error("The Numbers writer is currently limited to ".concat(bn(n)));var c=Cp(a,{range:n,header:1}),d=["~Sh33tJ5~"];c.forEach(function(ce){return ce.forEach(function(F){typeof F=="string"&&d.push(F)})});var h={},f=[],g=ya.read(s.numbers,{type:"base64"});g.FileIndex.map(function(ce,F){return[ce,g.FullPaths[F]]}).forEach(function(ce){var F=ce[0],re=ce[1];if(F.type==2&&F.name.match(/\.iwa/)){var de=F.content,me=Fi(de),De=Ii(me);De.forEach(function(Ne){f.push(Ne.id),h[Ne.id]={deps:[],location:re,type:Au(Ne.messages[0].meta[1][0].data)}})}}),f.sort(function(ce,F){return ce-F});var p=f.filter(function(ce){return ce>1}).map(function(ce){return[ce,ca(ce)]});g.FileIndex.map(function(ce,F){return[ce,g.FullPaths[F]]}).forEach(function(ce){var F=ce[0];if(ce[1],!!F.name.match(/\.iwa/)){var re=Ii(Fi(F.content));re.forEach(function(de){de.messages.forEach(function(me){p.forEach(function(De){de.messages.some(function(Ne){return Au(Ne.meta[1][0].data)!=11006&&s7(Ne.data,De[1])})&&h[De[0]].deps.push(de.id)})})})}});for(var v=ya.find(g,h[1].location),y=Ii(Fi(v.content)),_,S=0;S<y.length;++S){var b=y[S];b.id==1&&(_=b)}var T=Kl(An(_.messages[0].data)[1][0].data);for(v=ya.find(g,h[T].location),y=Ii(Fi(v.content)),S=0;S<y.length;++S)b=y[S],b.id==T&&(_=b);for(T=Kl(An(_.messages[0].data)[2][0].data),v=ya.find(g,h[T].location),y=Ii(Fi(v.content)),S=0;S<y.length;++S)b=y[S],b.id==T&&(_=b);for(T=Kl(An(_.messages[0].data)[2][0].data),v=ya.find(g,h[T].location),y=Ii(Fi(v.content)),S=0;S<y.length;++S)b=y[S],b.id==T&&(_=b);var E=An(_.messages[0].data);{E[6][0].data=ca(n.e.r+1),E[7][0].data=ca(n.e.c+1);var A=Kl(E[46][0].data),O=ya.find(g,h[A].location),Q=Ii(Fi(O.content));{for(var q=0;q<Q.length&&Q[q].id!=A;++q);if(Q[q].id!=A)throw"Bad ColumnRowUIDMapArchive";var U=An(Q[q].messages[0].data);U[1]=[],U[2]=[],U[3]=[];for(var D=0;D<=n.e.c;++D){var M=[];M[1]=M[2]=[{type:0,data:ca(D+420690)}],U[1].push({type:2,data:Xn(M)}),U[2].push({type:0,data:ca(D)}),U[3].push({type:0,data:ca(D)})}U[4]=[],U[5]=[],U[6]=[];for(var P=0;P<=n.e.r;++P)M=[],M[1]=M[2]=[{type:0,data:ca(P+726270)}],U[4].push({type:2,data:Xn(M)}),U[5].push({type:0,data:ca(P)}),U[6].push({type:0,data:ca(P)});Q[q].messages[0].data=Xn(U)}O.content=mu(hu(Q)),O.size=O.content.length,delete E[46];var G=An(E[4][0].data);{G[7][0].data=ca(n.e.r+1);var K=An(G[1][0].data),z=Kl(K[2][0].data);O=ya.find(g,h[z].location),Q=Ii(Fi(O.content));{if(Q[0].id!=z)throw"Bad HeaderStorageBucket";var J=An(Q[0].messages[0].data);for(P=0;P<c.length;++P){var W=An(J[2][0].data);W[1][0].data=ca(P),W[4][0].data=ca(c[P].length),J[2][P]={type:J[2][0].type,data:Xn(W)}}Q[0].messages[0].data=Xn(J)}O.content=mu(hu(Q)),O.size=O.content.length;var he=Kl(G[2][0].data);O=ya.find(g,h[he].location),Q=Ii(Fi(O.content));{if(Q[0].id!=he)throw"Bad HeaderStorageBucket";for(J=An(Q[0].messages[0].data),D=0;D<=n.e.c;++D)W=An(J[2][0].data),W[1][0].data=ca(D),W[4][0].data=ca(n.e.r+1),J[2][D]={type:J[2][0].type,data:Xn(W)};Q[0].messages[0].data=Xn(J)}O.content=mu(hu(Q)),O.size=O.content.length;var V=Kl(G[4][0].data);(function(){for(var ce=ya.find(g,h[V].location),F=Ii(Fi(ce.content)),re,de=0;de<F.length;++de){var me=F[de];me.id==V&&(re=me)}var De=An(re.messages[0].data);{De[3]=[];var Ne=[];d.forEach(function(ot,Pt){Ne[1]=[{type:0,data:ca(Pt)}],Ne[2]=[{type:0,data:ca(1)}],Ne[3]=[{type:2,data:t7(ot)}],De[3].push({type:2,data:Xn(Ne)})})}re.messages[0].data=Xn(De);var pe=hu(F),Le=mu(pe);ce.content=Le,ce.size=ce.content.length})();var ae=An(G[3][0].data);{var ge=ae[1][0];delete ae[2];var Z=An(ge.data);{var ee=Kl(Z[2][0].data);(function(){for(var ce=ya.find(g,h[ee].location),F=Ii(Fi(ce.content)),re,de=0;de<F.length;++de){var me=F[de];me.id==ee&&(re=me)}var De=An(re.messages[0].data);{delete De[6],delete ae[7];var Ne=new Uint8Array(De[5][0].data);De[5]=[];for(var pe=0,Le=0;Le<=n.e.r;++Le){var ot=An(Ne);pe+=r7(ot,c[Le],d),ot[1][0].data=ca(Le),De[5].push({data:Xn(ot),type:2})}De[1]=[{type:0,data:ca(n.e.c+1)}],De[2]=[{type:0,data:ca(n.e.r+1)}],De[3]=[{type:0,data:ca(pe)}],De[4]=[{type:0,data:ca(n.e.r+1)}]}re.messages[0].data=Xn(De);var Pt=hu(F),Dt=mu(Pt);ce.content=Dt,ce.size=ce.content.length})()}ge.data=Xn(Z)}G[3][0].data=Xn(ae)}E[4][0].data=Xn(G)}_.messages[0].data=Xn(E);var te=hu(y),X=mu(te);return v.content=X,v.size=v.content.length,g}function o7(t){return function(a){for(var n=0;n!=t.length;++n){var i=t[n];a[i[0]]===void 0&&(a[i[0]]=i[1]),i[2]==="n"&&(a[i[0]]=Number(a[i[0]]))}}}function Lj(t){o7([["cellDates",!1],["bookSST",!1],["bookType","xlsx"],["compression",!1],["WTF",!1]])(t)}function l7(t,s){return s.bookType=="ods"?ZT(t,s):s.bookType=="numbers"?i7(t,s):s.bookType=="xlsb"?c7(t,s):d7(t,s)}function c7(t,s){gu=1024,t&&!t.SSF&&(t.SSF=Hr(on)),t&&t.SSF&&(Yp(),Kp(t.SSF),s.revssf=Zp(t.SSF),s.revssf[t.SSF[65535]]=0,s.ssf=t.SSF),s.rels={},s.wbrels={},s.Strings=[],s.Strings.Count=0,s.Strings.Unique=0,vm?s.revStrings=new Map:(s.revStrings={},s.revStrings.foo=[],delete s.revStrings.foo);var a=s.bookType=="xlsb"?"bin":"xml",n=PT.indexOf(s.bookType)>-1,i=oT();Lj(s=s||{});var c=jj(),d="",h=0;if(s.cellXfs=[],uc(s.cellXfs,{},{revssf:{General:0}}),t.Props||(t.Props={}),d="docProps/core.xml",Os(c,d,uT(t.Props,s)),i.coreprops.push(d),da(s.rels,2,d,Js.CORE_PROPS),d="docProps/app.xml",!(t.Props&&t.Props.SheetNames))if(!t.Workbook||!t.Workbook.Sheets)t.Props.SheetNames=t.SheetNames;else{for(var f=[],g=0;g<t.SheetNames.length;++g)(t.Workbook.Sheets[g]||{}).Hidden!=2&&f.push(t.SheetNames[g]);t.Props.SheetNames=f}for(t.Props.Worksheets=t.Props.SheetNames.length,Os(c,d,mT(t.Props)),i.extprops.push(d),da(s.rels,3,d,Js.EXT_PROPS),t.Custprops!==t.Props&&rr(t.Custprops||{}).length>0&&(d="docProps/custom.xml",Os(c,d,fT(t.Custprops)),i.custprops.push(d),da(s.rels,4,d,Js.CUST_PROPS)),h=1;h<=t.SheetNames.length;++h){var p={"!id":{}},v=t.Sheets[t.SheetNames[h-1]],y=(v||{})["!type"]||"sheet";switch(y){case"chart":default:d="xl/worksheets/sheet"+h+"."+a,Os(c,d,hz(h-1,d,s,t,p)),i.sheets.push(d),da(s.wbrels,-1,"worksheets/sheet"+h+"."+a,Js.WS[0])}if(v){var _=v["!comments"],S=!1,b="";_&&_.length>0&&(b="xl/comments"+h+"."+a,Os(c,b,xz(_,b)),i.comments.push(b),da(p,-1,"../comments"+h+"."+a,Js.CMNT),S=!0),v["!legacy"]&&S&&Os(c,"xl/drawings/vmlDrawing"+h+".vml",AT(h,v["!comments"])),delete v["!comments"],delete v["!legacy"]}p["!id"].rId1&&Os(c,cT(d),ku(p))}return s.Strings!=null&&s.Strings.length>0&&(d="xl/sharedStrings."+a,Os(c,d,fz(s.Strings,d,s)),i.strs.push(d),da(s.wbrels,-1,"sharedStrings."+a,Js.SST)),d="xl/workbook."+a,Os(c,d,uz(t,d)),i.workbooks.push(d),da(s.rels,1,d,Js.WB),d="xl/theme/theme1.xml",Os(c,d,kT(t.Themes,s)),i.themes.push(d),da(s.wbrels,-1,"theme/theme1.xml",Js.THEME),d="xl/styles."+a,Os(c,d,mz(t,d,s)),i.styles.push(d),da(s.wbrels,-1,"styles."+a,Js.STY),t.vbaraw&&n&&(d="xl/vbaProject.bin",Os(c,d,t.vbaraw),i.vba.push(d),da(s.wbrels,-1,"vbaProject.bin",Js.VBA)),d="xl/metadata."+a,Os(c,d,pz(d)),i.metadata.push(d),da(s.wbrels,-1,"metadata."+a,Js.XLMETA),Os(c,"[Content_Types].xml",lT(i,s)),Os(c,"_rels/.rels",ku(s.rels)),Os(c,"xl/_rels/workbook."+a+".rels",ku(s.wbrels)),delete s.revssf,delete s.ssf,c}function d7(t,s){gu=1024,t&&!t.SSF&&(t.SSF=Hr(on)),t&&t.SSF&&(Yp(),Kp(t.SSF),s.revssf=Zp(t.SSF),s.revssf[t.SSF[65535]]=0,s.ssf=t.SSF),s.rels={},s.wbrels={},s.Strings=[],s.Strings.Count=0,s.Strings.Unique=0,vm?s.revStrings=new Map:(s.revStrings={},s.revStrings.foo=[],delete s.revStrings.foo);var a="xml",n=PT.indexOf(s.bookType)>-1,i=oT();Lj(s=s||{});var c=jj(),d="",h=0;if(s.cellXfs=[],uc(s.cellXfs,{},{revssf:{General:0}}),t.Props||(t.Props={}),d="docProps/core.xml",Os(c,d,uT(t.Props,s)),i.coreprops.push(d),da(s.rels,2,d,Js.CORE_PROPS),d="docProps/app.xml",!(t.Props&&t.Props.SheetNames))if(!t.Workbook||!t.Workbook.Sheets)t.Props.SheetNames=t.SheetNames;else{for(var f=[],g=0;g<t.SheetNames.length;++g)(t.Workbook.Sheets[g]||{}).Hidden!=2&&f.push(t.SheetNames[g]);t.Props.SheetNames=f}t.Props.Worksheets=t.Props.SheetNames.length,Os(c,d,mT(t.Props)),i.extprops.push(d),da(s.rels,3,d,Js.EXT_PROPS),t.Custprops!==t.Props&&rr(t.Custprops||{}).length>0&&(d="docProps/custom.xml",Os(c,d,fT(t.Custprops)),i.custprops.push(d),da(s.rels,4,d,Js.CUST_PROPS));var p=["SheetJ5"];for(s.tcid=0,h=1;h<=t.SheetNames.length;++h){var v={"!id":{}},y=t.Sheets[t.SheetNames[h-1]],_=(y||{})["!type"]||"sheet";switch(_){case"chart":default:d="xl/worksheets/sheet"+h+"."+a,Os(c,d,UT(h-1,s,t,v)),i.sheets.push(d),da(s.wbrels,-1,"worksheets/sheet"+h+"."+a,Js.WS[0])}if(y){var S=y["!comments"],b=!1,T="";if(S&&S.length>0){var E=!1;S.forEach(function(A){A[1].forEach(function(O){O.T==!0&&(E=!0)})}),E&&(T="xl/threadedComments/threadedComment"+h+"."+a,Os(c,T,UI(S,p,s)),i.threadedcomments.push(T),da(v,-1,"../threadedComments/threadedComment"+h+"."+a,Js.TCMNT)),T="xl/comments"+h+"."+a,Os(c,T,DT(S)),i.comments.push(T),da(v,-1,"../comments"+h+"."+a,Js.CMNT),b=!0}y["!legacy"]&&b&&Os(c,"xl/drawings/vmlDrawing"+h+".vml",AT(h,y["!comments"])),delete y["!comments"],delete y["!legacy"]}v["!id"].rId1&&Os(c,cT(d),ku(v))}return s.Strings!=null&&s.Strings.length>0&&(d="xl/sharedStrings."+a,Os(c,d,wT(s.Strings,s)),i.strs.push(d),da(s.wbrels,-1,"sharedStrings."+a,Js.SST)),d="xl/workbook."+a,Os(c,d,$T(t)),i.workbooks.push(d),da(s.rels,1,d,Js.WB),d="xl/theme/theme1.xml",Os(c,d,kT(t.Themes,s)),i.themes.push(d),da(s.wbrels,-1,"theme/theme1.xml",Js.THEME),d="xl/styles."+a,Os(c,d,CT(t,s)),i.styles.push(d),da(s.wbrels,-1,"styles."+a,Js.STY),t.vbaraw&&n&&(d="xl/vbaProject.bin",Os(c,d,t.vbaraw),i.vba.push(d),da(s.wbrels,-1,"vbaProject.bin",Js.VBA)),d="xl/metadata."+a,Os(c,d,ET()),i.metadata.push(d),da(s.wbrels,-1,"metadata."+a,Js.XLMETA),p.length>1&&(d="xl/persons/person.xml",Os(c,d,VI(p)),i.people.push(d),da(s.wbrels,-1,"persons/person.xml",Js.PEOPLE)),Os(c,"[Content_Types].xml",lT(i,s)),Os(c,"_rels/.rels",ku(s.rels)),Os(c,"xl/_rels/workbook."+a+".rels",ku(s.wbrels)),delete s.revssf,delete s.ssf,c}function u7(t,s){var a="";switch((s||{}).type||"base64"){case"buffer":return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]];case"base64":a=al(t.slice(0,12));break;case"binary":a=t;break;case"array":return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]];default:throw new Error("Unrecognized type "+(s&&s.type||"undefined"))}return[a.charCodeAt(0),a.charCodeAt(1),a.charCodeAt(2),a.charCodeAt(3),a.charCodeAt(4),a.charCodeAt(5),a.charCodeAt(6),a.charCodeAt(7)]}function XT(t,s){switch(s.type){case"base64":case"binary":break;case"buffer":case"array":s.type="";break;case"file":return Qm(s.file,ya.write(t,{type:sa?"buffer":""}));case"string":throw new Error("'string' output type invalid for '"+s.bookType+"' files");default:throw new Error("Unrecognized type "+s.type)}return ya.write(t,s)}function h7(t,s){var a=Hr(s||{}),n=l7(t,a);return m7(n,a)}function m7(t,s){var a={},n=sa?"nodebuffer":typeof Uint8Array<"u"?"array":"string";if(s.compression&&(a.compression="DEFLATE"),s.password)a.type=n;else switch(s.type){case"base64":a.type="base64";break;case"binary":a.type="string";break;case"string":throw new Error("'string' output type invalid for '"+s.bookType+"' files");case"buffer":case"file":a.type=n;break;default:throw new Error("Unrecognized type "+s.type)}var i=t.FullPaths?ya.write(t,{fileType:"zip",type:{nodebuffer:"buffer",string:"binary"}[a.type]||a.type,compression:!!s.compression}):t.generate(a);if(typeof Deno<"u"&&typeof i=="string"){if(s.type=="binary"||s.type=="base64")return i;i=new Uint8Array(qp(i))}return s.password&&typeof encrypt_agile<"u"?XT(encrypt_agile(i,s.password),s):s.type==="file"?Qm(s.file,i):s.type=="string"?fm(i):i}function f7(t,s){var a=s||{},n=Az(t,a);return XT(n,a)}function xo(t,s,a){a||(a="");var n=a+t;switch(s.type){case"base64":return Dm(Om(n));case"binary":return Om(n);case"string":return t;case"file":return Qm(s.file,n,"utf8");case"buffer":return sa?cl(n,"utf8"):typeof TextEncoder<"u"?new TextEncoder().encode(n):xo(n,{type:"binary"}).split("").map(function(i){return i.charCodeAt(0)})}throw new Error("Unrecognized type "+s.type)}function x7(t,s){switch(s.type){case"base64":return Dm(t);case"binary":return t;case"string":return t;case"file":return Qm(s.file,t,"binary");case"buffer":return sa?cl(t,"binary"):t.split("").map(function(a){return a.charCodeAt(0)})}throw new Error("Unrecognized type "+s.type)}function Ux(t,s){switch(s.type){case"string":case"base64":case"binary":for(var a="",n=0;n<t.length;++n)a+=String.fromCharCode(t[n]);return s.type=="base64"?Dm(a):s.type=="string"?fm(a):a;case"file":return Qm(s.file,t);case"buffer":return t;default:throw new Error("Unrecognized type "+s.type)}}function QT(t,s){HM(),ez(t);var a=Hr(s||{});if(a.cellStyles&&(a.cellNF=!0,a.sheetStubs=!0),a.type=="array"){a.type="binary";var n=QT(t,a);return a.type="array",qp(n)}var i=0;if(a.sheet&&(typeof a.sheet=="number"?i=a.sheet:i=t.SheetNames.indexOf(a.sheet),!t.SheetNames[i]))throw new Error("Sheet not found: "+a.sheet+" : "+typeof a.sheet);switch(a.bookType||"xlsb"){case"xml":case"xlml":return xo(kz(t,a),a);case"slk":case"sylk":return xo(XL.from_sheet(t.Sheets[t.SheetNames[i]],a),a);case"htm":case"html":return xo(qT(t.Sheets[t.SheetNames[i]],a),a);case"txt":return x7(JT(t.Sheets[t.SheetNames[i]],a),a);case"csv":return xo(Ij(t.Sheets[t.SheetNames[i]],a),a,"\uFEFF");case"dif":return xo(QL.from_sheet(t.Sheets[t.SheetNames[i]],a),a);case"dbf":return Ux(ZL.from_sheet(t.Sheets[t.SheetNames[i]],a),a);case"prn":return xo(JL.from_sheet(t.Sheets[t.SheetNames[i]],a),a);case"rtf":return xo(iI.from_sheet(t.Sheets[t.SheetNames[i]],a),a);case"eth":return xo(NT.from_sheet(t.Sheets[t.SheetNames[i]],a),a);case"fods":return xo(ZT(t,a),a);case"wk1":return Ux(P2.sheet_to_wk1(t.Sheets[t.SheetNames[i]],a),a);case"wk3":return Ux(P2.book_to_wk3(t,a),a);case"biff2":a.biff||(a.biff=2);case"biff3":a.biff||(a.biff=3);case"biff4":return a.biff||(a.biff=4),Ux(GT(t,a),a);case"biff5":a.biff||(a.biff=5);case"biff8":case"xla":case"xls":return a.biff||(a.biff=8),f7(t,a);case"xlsx":case"xlsm":case"xlam":case"xlsb":case"numbers":case"ods":return h7(t,a);default:throw new Error("Unrecognized bookType |"+a.bookType+"|")}}function p7(t){if(!t.bookType){var s={xls:"biff8",htm:"html",slk:"sylk",socialcalc:"eth",Sh33tJS:"WTF"},a=t.file.slice(t.file.lastIndexOf(".")).toLowerCase();a.match(/^\.[a-z]+$/)&&(t.bookType=a.slice(1)),t.bookType=s[t.bookType]||t.bookType}}function g7(t,s,a){var n={};return n.type="file",n.file=s,p7(n),QT(t,n)}function v7(t,s,a,n,i,c,d,h){var f=ar(a),g=h.defval,p=h.raw||!Object.prototype.hasOwnProperty.call(h,"raw"),v=!0,y=i===1?[]:{};if(i!==1)if(Object.defineProperty)try{Object.defineProperty(y,"__rowNum__",{value:a,enumerable:!1})}catch{y.__rowNum__=a}else y.__rowNum__=a;if(!d||t[a])for(var _=s.s.c;_<=s.e.c;++_){var S=d?t[a][_]:t[n[_]+f];if(S===void 0||S.t===void 0){if(g===void 0)continue;c[_]!=null&&(y[c[_]]=g);continue}var b=S.v;switch(S.t){case"z":if(b==null)break;continue;case"e":b=b==0?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+S.t)}if(c[_]!=null){if(b==null)if(S.t=="e"&&b===null)y[c[_]]=null;else if(g!==void 0)y[c[_]]=g;else if(p&&b===null)y[c[_]]=null;else continue;else y[c[_]]=p&&(S.t!=="n"||S.t==="n"&&h.rawNumbers!==!1)?b:nl(S,b,h);b!=null&&(v=!1)}}return{row:y,isempty:v}}function Cp(t,s){if(t==null||t["!ref"]==null)return[];var a={t:"n",v:0},n=0,i=1,c=[],d=0,h="",f={s:{r:0,c:0},e:{r:0,c:0}},g=s||{},p=g.range!=null?g.range:t["!ref"];switch(g.header===1?n=1:g.header==="A"?n=2:Array.isArray(g.header)?n=3:g.header==null&&(n=0),typeof p){case"string":f=Oa(p);break;case"number":f=Oa(t["!ref"]),f.s.r=p;break;default:f=p}n>0&&(i=0);var v=ar(f.s.r),y=[],_=[],S=0,b=0,T=Array.isArray(t),E=f.s.r,A=0,O={};T&&!t[E]&&(t[E]=[]);var Q=g.skipHidden&&t["!cols"]||[],q=g.skipHidden&&t["!rows"]||[];for(A=f.s.c;A<=f.e.c;++A)if(!(Q[A]||{}).hidden)switch(y[A]=pr(A),a=T?t[E][A]:t[y[A]+v],n){case 1:c[A]=A-f.s.c;break;case 2:c[A]=y[A];break;case 3:c[A]=g.header[A-f.s.c];break;default:if(a==null&&(a={w:"__EMPTY",t:"s"}),h=d=nl(a,null,g),b=O[d]||0,!b)O[d]=1;else{do h=d+"_"+b++;while(O[h]);O[d]=b,O[h]=1}c[A]=h}for(E=f.s.r+i;E<=f.e.r;++E)if(!(q[E]||{}).hidden){var U=v7(t,f,E,y,n,c,T,g);(U.isempty===!1||(n===1?g.blankrows!==!1:g.blankrows))&&(_[S++]=U.row)}return _.length=S,_}var z2=/"/g;function y7(t,s,a,n,i,c,d,h){for(var f=!0,g=[],p="",v=ar(a),y=s.s.c;y<=s.e.c;++y)if(n[y]){var _=h.dense?(t[a]||[])[y]:t[n[y]+v];if(_==null)p="";else if(_.v!=null){f=!1,p=""+(h.rawNumbers&&_.t=="n"?_.v:nl(_,null,h));for(var S=0,b=0;S!==p.length;++S)if((b=p.charCodeAt(S))===i||b===c||b===34||h.forceQuotes){p='"'+p.replace(z2,'""')+'"';break}p=="ID"&&(p='"ID"')}else _.f!=null&&!_.F?(f=!1,p="="+_.f,p.indexOf(",")>=0&&(p='"'+p.replace(z2,'""')+'"')):p="";g.push(p)}return h.blankrows===!1&&f?null:g.join(d)}function Ij(t,s){var a=[],n=s??{};if(t==null||t["!ref"]==null)return"";var i=Oa(t["!ref"]),c=n.FS!==void 0?n.FS:",",d=c.charCodeAt(0),h=n.RS!==void 0?n.RS:`
`,f=h.charCodeAt(0),g=new RegExp((c=="|"?"\\|":c)+"+$"),p="",v=[];n.dense=Array.isArray(t);for(var y=n.skipHidden&&t["!cols"]||[],_=n.skipHidden&&t["!rows"]||[],S=i.s.c;S<=i.e.c;++S)(y[S]||{}).hidden||(v[S]=pr(S));for(var b=0,T=i.s.r;T<=i.e.r;++T)(_[T]||{}).hidden||(p=y7(t,i,T,v,d,f,c,n),p!=null&&(n.strip&&(p=p.replace(g,"")),(p||n.blankrows!==!1)&&a.push((b++?h:"")+p)));return delete n.dense,a.join("")}function JT(t,s){s||(s={}),s.FS="	",s.RS=`
`;var a=Ij(t,s);return a}function j7(t){var s="",a,n="";if(t==null||t["!ref"]==null)return[];var i=Oa(t["!ref"]),c="",d=[],h,f=[],g=Array.isArray(t);for(h=i.s.c;h<=i.e.c;++h)d[h]=pr(h);for(var p=i.s.r;p<=i.e.r;++p)for(c=ar(p),h=i.s.c;h<=i.e.c;++h)if(s=d[h]+c,a=g?(t[p]||[])[h]:t[s],n="",a!==void 0){if(a.F!=null){if(s=a.F,!a.f)continue;n=a.f,s.indexOf(":")==-1&&(s=s+":"+s)}if(a.f!=null)n=a.f;else{if(a.t=="z")continue;if(a.t=="n"&&a.v!=null)n=""+a.v;else if(a.t=="b")n=a.v?"TRUE":"FALSE";else if(a.w!==void 0)n="'"+a.w;else{if(a.v===void 0)continue;a.t=="s"?n="'"+a.v:n=""+a.v}}f[f.length]=s+"="+n}return f}function ek(t,s,a){var n=a||{},i=+!n.skipHeader,c=t||{},d=0,h=0;if(c&&n.origin!=null)if(typeof n.origin=="number")d=n.origin;else{var f=typeof n.origin=="string"?Vn(n.origin):n.origin;d=f.r,h=f.c}var g,p={s:{c:0,r:0},e:{c:h,r:d+s.length-1+i}};if(c["!ref"]){var v=Oa(c["!ref"]);p.e.c=Math.max(p.e.c,v.e.c),p.e.r=Math.max(p.e.r,v.e.r),d==-1&&(d=v.e.r+1,p.e.r=d+s.length-1+i)}else d==-1&&(d=0,p.e.r=s.length-1+i);var y=n.header||[],_=0;s.forEach(function(b,T){rr(b).forEach(function(E){(_=y.indexOf(E))==-1&&(y[_=y.length]=E);var A=b[E],O="z",Q="",q=xa({c:h+_,r:d+T+i});g=Lm(c,q),A&&typeof A=="object"&&!(A instanceof Date)?c[q]=A:(typeof A=="number"?O="n":typeof A=="boolean"?O="b":typeof A=="string"?O="s":A instanceof Date?(O="d",n.cellDates||(O="n",A=Vr(A)),Q=n.dateNF||on[14]):A===null&&n.nullError&&(O="e",A=0),g?(g.t=O,g.v=A,delete g.w,delete g.R,Q&&(g.z=Q)):c[q]=g={t:O,v:A},Q&&(g.z=Q))})}),p.e.c=Math.max(p.e.c,h+y.length-1);var S=ar(d);if(i)for(_=0;_<y.length;++_)c[pr(_+h)+S]={t:"s",v:y[_]};return c["!ref"]=bn(p),c}function N7(t,s){return ek(null,t,s)}function Lm(t,s,a){if(typeof s=="string"){if(Array.isArray(t)){var n=Vn(s);return t[n.r]||(t[n.r]=[]),t[n.r][n.c]||(t[n.r][n.c]={t:"z"})}return t[s]||(t[s]={t:"z"})}return typeof s!="number"?Lm(t,xa(s)):Lm(t,xa({r:s,c:a||0}))}function w7(t,s){if(typeof s=="number"){if(s>=0&&t.SheetNames.length>s)return s;throw new Error("Cannot find sheet # "+s)}else if(typeof s=="string"){var a=t.SheetNames.indexOf(s);if(a>-1)return a;throw new Error("Cannot find sheet name |"+s+"|")}else throw new Error("Cannot find sheet |"+s+"|")}function b7(){return{SheetNames:[],Sheets:{}}}function S7(t,s,a,n){var i=1;if(!a)for(;i<=65535&&t.SheetNames.indexOf(a="Sheet"+i)!=-1;++i,a=void 0);if(!a||t.SheetNames.length>=65535)throw new Error("Too many worksheets");if(n&&t.SheetNames.indexOf(a)>=0){var c=a.match(/(^.*?)(\d+)$/);i=c&&+c[2]||0;var d=c&&c[1]||a;for(++i;i<=65535&&t.SheetNames.indexOf(a=d+i)!=-1;++i);}if(HT(a),t.SheetNames.indexOf(a)>=0)throw new Error("Worksheet with name |"+a+"| already exists!");return t.SheetNames.push(a),t.Sheets[a]=s,a}function _7(t,s,a){t.Workbook||(t.Workbook={}),t.Workbook.Sheets||(t.Workbook.Sheets=[]);var n=w7(t,s);switch(t.Workbook.Sheets[n]||(t.Workbook.Sheets[n]={}),a){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+a)}t.Workbook.Sheets[n].Hidden=a}function C7(t,s){return t.z=s,t}function tk(t,s,a){return s?(t.l={Target:s},a&&(t.l.Tooltip=a)):delete t.l,t}function T7(t,s,a){return tk(t,"#"+s,a)}function k7(t,s,a){t.c||(t.c=[]),t.c.push({t:s,a:a||"SheetJS"})}function E7(t,s,a,n){for(var i=typeof s!="string"?s:Oa(s),c=typeof s=="string"?s:bn(s),d=i.s.r;d<=i.e.r;++d)for(var h=i.s.c;h<=i.e.c;++h){var f=Lm(t,d,h);f.t="n",f.F=c,delete f.v,d==i.s.r&&h==i.s.c&&(f.f=a,n&&(f.D=!0))}return t}var vv={encode_col:pr,encode_row:ar,encode_cell:xa,encode_range:bn,decode_col:Cj,decode_row:_j,split_cell:HR,decode_cell:Vn,decode_range:ni,format_cell:nl,sheet_add_aoa:tT,sheet_add_json:ek,sheet_add_dom:KT,aoa_to_sheet:Yu,json_to_sheet:N7,table_to_sheet:YT,table_to_book:Qz,sheet_to_csv:Ij,sheet_to_txt:JT,sheet_to_json:Cp,sheet_to_html:qT,sheet_to_formulae:j7,sheet_to_row_object_array:Cp,sheet_get_cell:Lm,book_new:b7,book_append_sheet:S7,book_set_sheet_visibility:_7,cell_set_number_format:C7,cell_set_hyperlink:tk,cell_set_internal_link:T7,cell_add_comment:k7,sheet_set_array_formula:E7,consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}};const A7=()=>{const t=_n(),[s,a]=N.useState({upcomingSessions:0,openTickets:0,unreadMessages:0,todayAppointments:0});N.useEffect(()=>{n()},[]);const n=async()=>{try{const h={Authorization:`Bearer ${localStorage.getItem("token")}`},[f,g,p]=await Promise.allSettled([ke.get("/sessions?upcoming=true",{headers:h}),ke.get("/support/tickets?status=open",{headers:h}),ke.get("/appointments",{headers:h})]);a({upcomingSessions:f.status==="fulfilled"&&f.value?.data?.length||0,openTickets:g.status==="fulfilled"&&g.value?.data?.length||0,unreadMessages:0,todayAppointments:p.status==="fulfilled"&&p.value?.data?.filter(v=>{const y=new Date(v.date),_=new Date;return y.toDateString()===_.toDateString()}).length||0})}catch(d){console.error("Error fetching communication stats:",d)}},i=[{icon:za,title:"Live Sessions",description:"Schedule and host video meetings",href:"/dashboard/sessions",color:"text-blue-500",bgColor:"bg-blue-50 dark:bg-blue-950",stat:s.upcomingSessions,statLabel:"upcoming",badge:"New",badgeColor:"bg-green-500"},{icon:Rp,title:"Support Tickets",description:"Manage customer support requests",href:"/dashboard/support",color:"text-purple-500",bgColor:"bg-purple-50 dark:bg-purple-950",stat:s.openTickets,statLabel:"open"},{icon:ja,title:"Messages",description:"Chat with clients and team",href:"/dashboard/messages",color:"text-green-500",bgColor:"bg-green-50 dark:bg-green-950",stat:s.unreadMessages,statLabel:"unread"},{icon:Ms,title:"Appointments",description:"View and manage bookings",href:"/dashboard/appointments",color:"text-orange-500",bgColor:"bg-orange-50 dark:bg-orange-950",stat:s.todayAppointments,statLabel:"today"}],c=[{icon:za,label:"Schedule Session",onClick:()=>t("/dashboard/sessions"),variant:"default"},{icon:ja,label:"New Ticket",onClick:()=>t("/dashboard/support"),variant:"outline"},{icon:fa,label:"Send Email",onClick:()=>window.location.href="mailto:",variant:"outline"}];return e.jsxs(se,{className:"w-full",children:[e.jsx(_e,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs(Te,{className:"flex items-center gap-2",children:[e.jsx(fs,{className:"h-5 w-5"}),"Communication Hub"]}),e.jsx(vt,{children:"Manage all your client communications in one place"})]}),e.jsxs(I,{variant:"ghost",size:"sm",onClick:()=>t("/dashboard/support"),children:["View All",e.jsx(Xl,{className:"h-4 w-4 ml-2"})]})]})}),e.jsxs(oe,{className:"space-y-6",children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:i.map(d=>e.jsx(se,{className:"cursor-pointer hover:shadow-md transition-shadow relative overflow-hidden group",onClick:()=>t(d.href),children:e.jsxs(oe,{className:"p-4",children:[e.jsx("div",{className:`${d.bgColor} rounded-lg p-3 w-fit mb-3 group-hover:scale-110 transition-transform`,children:e.jsx(d.icon,{className:`h-6 w-6 ${d.color}`})}),e.jsxs("h3",{className:"font-semibold text-sm mb-1 flex items-center gap-2",children:[d.title,d.badge&&e.jsx(ze,{className:`${d.badgeColor} text-white text-[10px] px-1.5 py-0`,children:d.badge})]}),e.jsx("p",{className:"text-xs text-muted-foreground mb-2",children:d.description}),d.stat!==void 0&&e.jsxs("div",{className:"text-lg font-bold",children:[d.stat,e.jsx("span",{className:"text-xs text-muted-foreground font-normal ml-1",children:d.statLabel})]})]})},d.title))}),e.jsxs("div",{className:"border-t pt-4",children:[e.jsx("h4",{className:"text-sm font-semibold mb-3",children:"Quick Actions"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:c.map(d=>e.jsxs(I,{variant:d.variant,size:"sm",onClick:d.onClick,className:"gap-2",children:[e.jsx(d.icon,{className:"h-4 w-4"}),d.label]},d.label))})]}),e.jsxs("div",{className:"bg-muted/50 rounded-lg p-4 space-y-2",children:[e.jsxs("h4",{className:"text-sm font-semibold flex items-center gap-2",children:[e.jsx(ia,{className:"h-4 w-4"}),"Communication Tips"]}),e.jsxs("ul",{className:"text-xs text-muted-foreground space-y-1",children:[e.jsx("li",{children:" Use Live Sessions for face-to-face client meetings"}),e.jsx("li",{children:" Create support tickets for trackable customer issues"}),e.jsx("li",{children:" Schedule appointments for structured consultations"}),e.jsx("li",{children:" Response time affects customer satisfaction"})]})]})]})]})},yv=async()=>{try{const t=localStorage.getItem("token");if(!t)return null;const s={Authorization:`Bearer ${t}`},[a,n,i,c,d]=await Promise.allSettled([ke.get("/orders",{headers:s}),ke.get("/products",{headers:s}),ke.get("/transactions",{headers:s}),ke.get("/appointments",{headers:s}),ke.get("/messages/customers",{headers:s})]),h=a.status==="fulfilled"?a.value?.data||[]:[],f=h.length,g=i.status==="fulfilled"?i.value?.data||[]:[],p=Array.isArray(g)?g.reduce((P,G)=>P+(Number(G.amount)||0),0):0,_=((d.status==="fulfilled"?d.value?.data:null)?.customers||[]).length,S=isNaN(p)?0:p,b=isNaN(f)?0:f,T=isNaN(_)?0:_,E=c.status==="fulfilled"?c.value?.data||[]:[],A=new Date;A.setHours(0,0,0,0);const O=new Date(A);O.setDate(O.getDate()+1);const Q=E.filter(P=>{const G=new Date(P.time||P.date);return G>=A&&G<O}).length,q=new Date().getMonth(),U=h.filter(P=>new Date(P.createdAt).getMonth()===q).length,D=h.filter(P=>new Date(P.createdAt).getMonth()===q-1).length,M=D>0?((U-D)/D*100).toFixed(1):0;return{stats:[{title:"Total Revenue",value:`KES ${S.toLocaleString()}`,change:"+12.3%",trend:"up",icon:Sa,description:"from last month"},{title:"Total Orders",value:b.toString(),change:`${M>0?"+":""}${M}%`,trend:M>=0?"up":"down",icon:Bs,description:"from last month"},{title:"Active Customers",value:T.toString(),change:"+5.2%",trend:"up",icon:fs,description:"total customers"},{title:"Appointments Today",value:(isNaN(Q)?0:Q).toString(),change:E.length>0?`${E.length} total`:"0 total",trend:Q>0?"up":"down",icon:Ms,description:"scheduled today"}]}}catch(t){return console.error("Error fetching dashboard data:",t),{stats:[{title:"Total Revenue",value:"KES 0",change:"0%",trend:"up",icon:Sa,description:"from last month"},{title:"Total Orders",value:"0",change:"0%",trend:"up",icon:Bs,description:"from last month"},{title:"Active Customers",value:"0",change:"0%",trend:"up",icon:fs,description:"total customers"},{title:"Appointments Today",value:"0",change:"0",trend:"down",icon:Ms,description:"scheduled today"}]}}},D7=()=>{const{user:t,isAuthenticated:s,loading:a}=qs();zM();const n=_n(),[i,c]=N.useState(null),[d,h]=N.useState(!1),[f,g]=N.useState(!1),[p,v]=N.useState(!1),y=async()=>{v(!0);const T=await yv();c(T),v(!1)},_=[{name:"Add Product",icon:cs,path:"/dashboard/products",color:"text-blue-600"},{name:"Add Service",icon:ec,path:"/dashboard/services",color:"text-green-600"},{name:"Create Discount",icon:tc,path:"/dashboard/discounts",color:"text-purple-600"},{name:"View Analytics",icon:Mn,path:"/dashboard/analytics",color:"text-orange-600"},{name:"View Reports",icon:Ka,path:"/dashboard/reports",color:"text-red-600"},{name:"Settings",icon:Ya,path:"/dashboard/settings",color:"text-gray-600"}];if(N.useEffect(()=>{s&&yv().then(c)},[s]),N.useEffect(()=>{if(!s)return;const T=setInterval(()=>{yv().then(c)},3e4);return()=>clearInterval(T)},[s]),a)return e.jsx("div",{children:"Loading..."});if(!s)return e.jsx("div",{children:"Please log in to view your dashboard."});if(!i)return e.jsx("div",{children:"Loading dashboard data..."});const{stats:S}=i,b=()=>{const T=vv.json_to_sheet(S.map(A=>({Title:A.title,Value:A.value,Change:A.change,Trend:A.trend,Description:A.description}))),E=vv.book_new();vv.book_append_sheet(E,T,"Stats Report"),g7(E,"dashboard_report.xlsx")};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold text-foreground",children:["Welcome back, ",e.jsx("span",{className:"text-green-500",children:t?t.name:"Guest"}),"!"]}),e.jsx("p",{className:"text-muted-foreground",children:"Here's what's happening with your business today."})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs(I,{variant:"outline",onClick:y,disabled:p,children:[e.jsx(Cs,{className:`mr-2 h-4 w-4 ${p?"animate-spin":""}`}),p?"Refreshing...":"Refresh"]}),e.jsxs(I,{variant:"outline",onClick:()=>h(!d),children:[e.jsx(Pa,{className:"mr-2 h-4 w-4"}),"View Reports"]}),e.jsxs(I,{onClick:()=>g(!0),children:[e.jsx(ha,{className:"mr-2 h-4 w-4"}),"Quick Action"]})]})]}),d&&e.jsxs("div",{className:"mt-4",children:[e.jsxs(se,{children:[e.jsxs(_e,{children:[e.jsx(Te,{children:"Stats Report"}),e.jsx(vt,{children:"Generated Report of Business Stats"})]}),e.jsx(oe,{children:e.jsxs("table",{className:"min-w-full table-auto",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2 text-left",children:"Title"}),e.jsx("th",{className:"px-4 py-2 text-left",children:"Value"}),e.jsx("th",{className:"px-4 py-2 text-left",children:"Change"}),e.jsx("th",{className:"px-4 py-2 text-left",children:"Trend"}),e.jsx("th",{className:"px-4 py-2 text-left",children:"Description"})]})}),e.jsx("tbody",{children:S.map(T=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-2",children:T.title}),e.jsx("td",{className:"px-4 py-2",children:T.value}),e.jsx("td",{className:"px-4 py-2",children:T.change}),e.jsx("td",{className:"px-4 py-2",children:T.trend==="up"?"":""}),e.jsx("td",{className:"px-4 py-2",children:T.description})]},T.title))})]})})]}),e.jsx(I,{className:"mt-4",onClick:b,children:"Download Report (Excel)"})]}),e.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-4",children:S.map(T=>{const E=T.icon;return e.jsxs(se,{children:[e.jsxs(_e,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(Te,{className:"text-sm font-medium",children:T.title}),e.jsx(E,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(oe,{children:[e.jsx("div",{className:"text-2xl font-bold",children:T.value}),e.jsxs("div",{className:"flex items-center text-xs text-muted-foreground",children:[T.trend==="up"?e.jsx(aa,{className:"mr-1 h-3 w-3 text-green-600"}):e.jsx(No,{className:"mr-1 h-3 w-3 text-red-600"}),e.jsx("span",{className:T.trend==="up"?"text-green-600":"text-red-600",children:T.change}),e.jsx("span",{className:"ml-1",children:T.description})]})]})]},T.title)})}),e.jsx(A7,{}),e.jsxs(se,{children:[e.jsxs(_e,{children:[e.jsx(Te,{children:"Quick Actions"}),e.jsx(vt,{children:"Common tasks and shortcuts"})]}),e.jsx(oe,{children:e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[e.jsxs(I,{variant:"outline",className:"h-auto flex-col py-4",onClick:()=>n("/dashboard/products"),children:[e.jsx(cs,{className:"h-6 w-6 mb-2"}),e.jsx("span",{className:"text-xs",children:"Add Product"})]}),e.jsxs(I,{variant:"outline",className:"h-auto flex-col py-4",onClick:()=>n("/dashboard/services"),children:[e.jsx(ec,{className:"h-6 w-6 mb-2"}),e.jsx("span",{className:"text-xs",children:"Add Service"})]}),e.jsxs(I,{variant:"outline",className:"h-auto flex-col py-4",onClick:()=>n("/dashboard/appointments"),children:[e.jsx(Ms,{className:"h-6 w-6 mb-2"}),e.jsx("span",{className:"text-xs",children:"Appointments"})]}),e.jsxs(I,{variant:"outline",className:"h-auto flex-col py-4",onClick:()=>n("/dashboard/discounts"),children:[e.jsx(tc,{className:"h-6 w-6 mb-2"}),e.jsx("span",{className:"text-xs",children:"Discounts"})]})]})})]}),e.jsx(Gt,{open:f,onOpenChange:g,children:e.jsxs(qt,{className:"sm:max-w-md",children:[e.jsxs(Kt,{children:[e.jsx(Yt,{children:"Quick Actions"}),e.jsx(vs,{children:"Choose an action to perform quickly"})]}),e.jsx("div",{className:"grid grid-cols-2 gap-3",children:_.map(T=>{const E=T.icon;return e.jsxs(I,{variant:"outline",className:"h-20 flex-col gap-2",onClick:()=>{n(T.path),g(!1)},children:[e.jsx(E,{className:`h-6 w-6 ${T.color}`}),e.jsx("span",{className:"text-xs",children:T.name})]},T.name)})})]})})]})};function sk(){const t=[{id:1,icon:cs,title:"Inventory Management",description:"Track stock levels, manage suppliers, and automate reordering with real-time inventory updates.",features:["Real-time tracking","Low stock alerts","Supplier management","Barcode scanning"]},{id:2,icon:Bs,title:"E-Commerce Integration",description:"Seamlessly connect your online store with inventory and order management systems.",features:["Multi-platform sync","Order processing","Product catalog","Payment integration"]},{id:3,icon:Ms,title:"Appointment Scheduling",description:"Manage bookings, send reminders, and optimize your schedule with intelligent calendar management.",features:["Online booking","SMS reminders","Calendar sync","Staff scheduling"]},{id:4,icon:Sa,title:"Financial Management",description:"Handle invoicing, track expenses, and monitor cash flow with comprehensive financial tools.",features:["Invoice generation","Expense tracking","Payment processing","Financial reports"]},{id:5,icon:Mn,title:"Analytics & Insights",description:"Make data-driven decisions with detailed analytics and AI-powered business insights.",features:["Sales analytics","Performance metrics","Trend analysis","Custom reports"]},{id:6,icon:fs,title:"Customer Management",description:"Build stronger relationships with comprehensive customer profiles and communication tools.",features:["Customer profiles","Communication history","Loyalty programs","Feedback management"]},{id:7,icon:_a,title:"Security & Compliance",description:"Enterprise-grade security with data encryption and compliance with industry standards.",features:["Data encryption","Access controls","Audit trails","GDPR compliance"]},{id:8,icon:Lr,title:"Mobile Access",description:"Manage your business on-the-go with our responsive mobile interface and dedicated apps.",features:["Mobile responsive","Offline access","Push notifications","Cross-platform"]}],s=[{icon:ps,title:"24/7 Support",description:"Round-the-clock customer support"},{icon:aa,title:"Scalable",description:"Grows with your business needs"},{icon:Ka,title:"Documentation",description:"Comprehensive guides and tutorials"},{icon:Ya,title:"Customizable",description:"Tailor the platform to your workflow"}];return e.jsx("section",{className:"py-16 bg-background",children:e.jsxs("div",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"text-center mb-16",children:[e.jsxs("h2",{className:"text-4xl font-bold text-foreground mb-4",children:["Powerful ",e.jsx("span",{className:"text-green-400",children:"Features "})," for Your Business"]}),e.jsx("p",{className:"text-xl text-muted-foreground max-w-3xl mx-auto",children:"Everything you need to streamline operations, boost productivity, and grow your business in one comprehensive platform."})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-8 mb-16",children:t.map(a=>{const n=a.icon;return e.jsxs("div",{className:"bg-card p-6 rounded-lg border shadow-sm hover:shadow-md transition-shadow duration-300 group",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("div",{className:"p-3 bg-primary/10 rounded-lg mr-4 group-hover:bg-primary/20 transition-colors duration-300",children:e.jsx(n,{className:"h-6 w-6 text-green-500"})}),e.jsx("h3",{className:"text-lg font-semibold text-foreground",children:a.title})]}),e.jsx("p",{className:"text-muted-foreground mb-4 text-sm leading-relaxed",children:a.description}),e.jsx("ul",{className:"space-y-2",children:a.features.map((i,c)=>e.jsxs("li",{className:"flex items-center text-sm text-muted-foreground",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-primary rounded-full mr-2 flex-shrink-0"}),i]},c))})]},a.id)})}),e.jsxs("div",{className:"bg-muted/30 rounded-2xl p-8",children:[e.jsx("h3",{className:"text-2xl font-bold text-center text-foreground mb-8",children:"Why Choose ominbiz?"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:s.map((a,n)=>{const i=a.icon;return e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"inline-flex p-4 bg-primary/10 rounded-full mb-4",children:e.jsx(i,{className:"h-8 w-8 text-green-500"})}),e.jsx("h4",{className:"font-semibold text-foreground mb-2",children:a.title}),e.jsx("p",{className:"text-sm text-muted-foreground",children:a.description})]},n)})})]}),e.jsxs("div",{className:"text-center mt-16",children:[e.jsx("h3",{className:"text-2xl font-bold text-foreground mb-4",children:"Ready to Transform Your Business?"}),e.jsx("p",{className:"text-muted-foreground mb-8 max-w-2xl mx-auto",children:"Join thousands of businesses that have streamlined their operations with ominbiz. Start your free trial today and see the difference."}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[e.jsx(is,{to:"/signup",children:e.jsx("button",{className:"bg-green-500 text-white px-8 py-3 rounded-lg font-medium cursor-pointer hover:bg-green-400  transition-colors duration-200",children:"Start Free Trial"})}),e.jsx(is,{to:"/contact",children:e.jsx("button",{className:"border border-input px-8 py-3 rounded-lg  cursor-pointer font-medium text-foreground hover:bg-accent hover:text-accent-foreground transition-colors duration-200",children:"Schedule Demo"})})]})]})]})})}const wd=()=>{const[t,s]=N.useState({});return e.jsx("div",{className:"footer",children:e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-8",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-3xl font-bold mb-4",children:["Omni",e.jsx("span",{className:"text-green-500",children:"Biz"})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Streamline your business operations with our comprehensive management platform."})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-4",children:"Features"}),e.jsxs("ul",{className:"space-y-2 text-sm",children:[e.jsx("li",{children:e.jsx(is,{to:"/features",className:"hover:text-primary",children:"Inventory Management"})}),e.jsx("li",{children:e.jsx(is,{to:"/features",className:"hover:text-primary",children:"E-commerce"})}),e.jsx("li",{children:e.jsx(is,{to:"/features",className:"hover:text-primary",children:"Appointments"})}),e.jsx("li",{children:e.jsx(is,{to:"/features",className:"hover:text-primary",children:"Finance"})})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-4",children:"Company"}),e.jsxs("ul",{className:"space-y-2 text-sm",children:[e.jsx("li",{children:e.jsx(is,{to:"/about",className:"hover:text-primary",children:"About"})}),e.jsx("li",{children:e.jsx(is,{to:"/contact",className:"hover:text-primary",children:"Contact"})}),e.jsx("li",{children:e.jsx(is,{to:"/contact",className:"hover:text-primary",children:"Support"})})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-4",children:"Legal"}),e.jsxs("ul",{className:"space-y-2 text-sm",children:[e.jsx("li",{children:e.jsx(is,{to:"/privacy",className:"hover:text-primary",children:"Privacy Policy"})}),e.jsx("li",{children:e.jsx(is,{to:"/terms",className:"hover:text-primary",children:"Terms of Service"})})]})]})]}),e.jsx("div",{className:"border-t mt-8 pt-8 text-center text-sm text-muted-foreground",children:e.jsxs("p",{children:[" ",new Date().getFullYear()," ",e.jsxs("span",{className:"text-2xl font-bold",children:["Omni",e.jsx("span",{className:"text-green-500",children:"Biz"})]}),". All rights reserved."]})})]})})};function P7({title:t,titleId:s,...a},n){return N.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},a),t?N.createElement("title",{id:s},t):null,N.createElement("path",{fillRule:"evenodd",d:"M12.97 3.97a.75.75 0 0 1 1.06 0l7.5 7.5a.75.75 0 0 1 0 1.06l-7.5 7.5a.75.75 0 1 1-1.06-1.06l6.22-6.22H3a.75.75 0 0 1 0-1.5h16.19l-6.22-6.22a.75.75 0 0 1 0-1.06Z",clipRule:"evenodd"}))}const O7=N.forwardRef(P7);function M7({title:t,titleId:s,...a},n){return N.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},a),t?N.createElement("title",{id:s},t):null,N.createElement("path",{fillRule:"evenodd",d:"M15.22 6.268a.75.75 0 0 1 .968-.431l5.942 2.28a.75.75 0 0 1 .431.97l-2.28 5.94a.75.75 0 1 1-1.4-.537l1.63-4.251-1.086.484a11.2 11.2 0 0 0-5.45 5.173.75.75 0 0 1-1.199.19L9 12.312l-6.22 6.22a.75.75 0 0 1-1.06-1.061l6.75-6.75a.75.75 0 0 1 1.06 0l3.606 3.606a12.695 12.695 0 0 1 5.68-4.974l1.086-.483-4.251-1.632a.75.75 0 0 1-.432-.97Z",clipRule:"evenodd"}))}const U2=N.forwardRef(M7);function R7({title:t,titleId:s,...a},n){return N.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},a),t?N.createElement("title",{id:s},t):null,N.createElement("path",{fillRule:"evenodd",d:"M3 6.75A.75.75 0 0 1 3.75 6h16.5a.75.75 0 0 1 0 1.5H3.75A.75.75 0 0 1 3 6.75ZM3 12a.75.75 0 0 1 .75-.75h16.5a.75.75 0 0 1 0 1.5H3.75A.75.75 0 0 1 3 12Zm0 5.25a.75.75 0 0 1 .75-.75h16.5a.75.75 0 0 1 0 1.5H3.75a.75.75 0 0 1-.75-.75Z",clipRule:"evenodd"}))}const L7=N.forwardRef(R7);function I7({title:t,titleId:s,...a},n){return N.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},a),t?N.createElement("title",{id:s},t):null,N.createElement("path",{fillRule:"evenodd",d:"M12.516 2.17a.75.75 0 0 0-1.032 0 11.209 11.209 0 0 1-7.877 3.08.75.75 0 0 0-.722.515A12.74 12.74 0 0 0 2.25 9.75c0 5.942 4.064 10.933 9.563 12.348a.749.749 0 0 0 .374 0c5.499-1.415 9.563-6.406 9.563-12.348 0-1.39-.223-2.73-.635-3.985a.75.75 0 0 0-.722-.516l-.143.001c-2.996 0-5.717-1.17-7.734-3.08Zm3.094 8.016a.75.75 0 1 0-1.22-.872l-3.236 4.53L9.53 12.22a.75.75 0 0 0-1.06 1.06l2.25 2.25a.75.75 0 0 0 1.14-.094l3.75-5.25Z",clipRule:"evenodd"}))}const F7=N.forwardRef(I7);function B7({title:t,titleId:s,...a},n){return N.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},a),t?N.createElement("title",{id:s},t):null,N.createElement("path",{fillRule:"evenodd",d:"M8.25 6.75a3.75 3.75 0 1 1 7.5 0 3.75 3.75 0 0 1-7.5 0ZM15.75 9.75a3 3 0 1 1 6 0 3 3 0 0 1-6 0ZM2.25 9.75a3 3 0 1 1 6 0 3 3 0 0 1-6 0ZM6.31 15.117A6.745 6.745 0 0 1 12 12a6.745 6.745 0 0 1 6.709 7.498.75.75 0 0 1-.372.568A12.696 12.696 0 0 1 12 21.75c-2.305 0-4.47-.612-6.337-1.684a.75.75 0 0 1-.372-.568 6.787 6.787 0 0 1 1.019-4.38Z",clipRule:"evenodd"}),N.createElement("path",{d:"M5.082 14.254a8.287 8.287 0 0 0-1.308 5.135 9.687 9.687 0 0 1-1.764-.44l-.115-.04a.563.563 0 0 1-.373-.487l-.01-.121a3.75 3.75 0 0 1 3.57-4.047ZM20.226 19.389a8.287 8.287 0 0 0-1.308-5.135 3.75 3.75 0 0 1 3.57 4.047l-.01.121a.563.563 0 0 1-.373.486l-.115.04c-.567.2-1.156.349-1.764.441Z"}))}const z7=N.forwardRef(B7);function U7({title:t,titleId:s,...a},n){return N.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},a),t?N.createElement("title",{id:s},t):null,N.createElement("path",{fillRule:"evenodd",d:"M5.47 5.47a.75.75 0 0 1 1.06 0L12 10.94l5.47-5.47a.75.75 0 1 1 1.06 1.06L13.06 12l5.47 5.47a.75.75 0 1 1-1.06 1.06L12 13.06l-5.47 5.47a.75.75 0 0 1-1.06-1.06L10.94 12 5.47 6.53a.75.75 0 0 1 0-1.06Z",clipRule:"evenodd"}))}const V7=N.forwardRef(U7);function H7(){return e.jsxs("section",{className:"bg-gray-200 flex flex-col md:flex-row items-center md:h-screen px-4 sm:px-6 lg:px-10 py-10",children:[e.jsxs("div",{className:"space-y-5 w-full md:w-1/2",children:[e.jsxs("p",{className:"bg-green-500 mt-4 text-white flex items-center w-fit px-4 py-2 rounded-md text-sm",children:[e.jsx(U2,{className:"w-5 h-5 text-white mr-2"}),"Trusted by 10,000+ businesses"]}),e.jsxs("h1",{className:"text-3xl sm:text-4xl md:text-6xl font-bold text-gray-800 leading-tight",children:["Complete Business ",e.jsx("span",{className:"text-green-600",children:"Management"})," ","Solution"]}),e.jsx("p",{className:"text-base sm:text-lg md:text-2xl font-medium text-gray-600",children:"Streamline your entire business with our all-in-one platform. Manage inventory, run your e-commerce store, schedule appointments, and track finances  all from one beautiful dashboard."}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4",children:[e.jsxs("p",{className:"flex items-center text-gray-700",children:[e.jsx(z7,{className:"w-8 h-8 text-green-600 mr-2"}),"10,000+ users"]}),e.jsxs("p",{className:"flex items-center text-gray-700",children:[e.jsx(F7,{className:"w-8 h-8 text-green-600 mr-2"}),"Bank-level Security"]}),e.jsxs("p",{className:"flex items-center text-gray-700",children:[e.jsx(U2,{className:"w-8 h-8 text-green-600 mr-2"}),"99.9% Uptime"]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 sm:gap-10",children:[e.jsx(is,{to:"/signup",children:e.jsxs(I,{className:"bg-green-500 text-white px-10 py-6 hover:bg-green-400 flex items-center justify-center gap-2",children:["Start free trial ",e.jsx(O7,{className:"w-5 h-5"})]})}),e.jsx(is,{to:"/features",children:e.jsx(I,{className:"px-10 py-6 border border-gray-400 text-gray-200",children:"Learn more"})})]}),e.jsx("p",{className:"text-sm text-gray-500",children:"No credit card required  14-day free trial  Cancel anytime"})]}),e.jsx("div",{className:"mt-10 md:mt-0 md:ml-10 w-full md:w-[60%]",children:e.jsx("img",{src:"https://preview--verdant-manage.lovable.app/assets/hero-dashboard-CKmWT72o.jpg",alt:"Dashboard preview",className:"rounded w-full max-w-md sm:max-w-lg md:max-w-2xl mx-auto"})})]})}const bd=()=>{const[t,s]=N.useState(!1);return N.useEffect(()=>{const a=n=>{t&&!n.target.closest("nav")&&s(!1)};return document.addEventListener("click",a),()=>document.removeEventListener("click",a)},[t]),e.jsx("nav",{className:"bg-background border-b border-border sticky top-0 z-50",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"flex justify-between items-center h-16",children:[e.jsxs(is,{to:"/",className:"flex items-center space-x-2",children:[e.jsx("img",{src:"https://2aa832b0f010801d3551c6c63b116063.cdn.bubble.io/cdn-cgi/image/w=48,h=48,f=auto,dpr=1,fit=contain/f1758225569468x933635082935872100/logo.webp",alt:"ominbizHub Logo"}),e.jsxs("span",{className:"text-xl font-bold text-foreground",children:["Omin",e.jsx("span",{className:"text-green-500",children:"BIZ"})]})]}),e.jsxs("div",{className:"hidden md:flex items-center space-x-8",children:[e.jsx(is,{to:"/features",className:"text-foreground hover:text-primary transition-colors",children:"Features"}),e.jsx(is,{to:"/pricing",className:"text-foreground hover:text-primary transition-colors",children:"Pricing"}),e.jsx(is,{to:"/about",className:"text-foreground hover:text-primary transition-colors",children:"About"}),e.jsx(is,{to:"/contact",className:"text-foreground hover:text-primary transition-colors",children:"Contact"})]}),e.jsxs("div",{className:"hidden md:flex items-center space-x-4",children:[e.jsx(is,{to:"/loginpage",children:e.jsx(I,{variant:"ghost",children:"Login"})}),e.jsx(is,{to:"/signup",children:e.jsx(I,{className:"bg-green-500 py-6 px-8 cursor-pointer hover:bg-green-400",children:"Start Free Trial"})})]}),e.jsx("div",{className:"md:hidden",children:e.jsx(I,{variant:"ghost",size:"icon",onClick:()=>s(!t),children:t?e.jsx(V7,{className:"h-6 w-6"}):e.jsx(L7,{className:"h-6 w-6"})})})]}),t&&e.jsx("div",{className:"md:hidden",children:e.jsxs("div",{className:"px-2 pt-2 pb-3 space-y-1 bg-background border-t border-border",children:[e.jsx(is,{to:"/features",className:"block px-3 py-2 text-foreground hover:text-primary transition-colors",onClick:()=>s(!1),children:"Features"}),e.jsx(is,{to:"/pricing",className:"block px-3 py-2 text-foreground hover:text-primary transition-colors",onClick:()=>s(!1),children:"Pricing"}),e.jsx(is,{to:"/about",className:"block px-3 py-2 text-foreground hover:text-primary transition-colors",onClick:()=>s(!1),children:"About"}),e.jsx(is,{to:"/contact",className:"block px-3 py-2 text-foreground hover:text-primary transition-colors",onClick:()=>s(!1),children:"Contact"}),e.jsxs("div",{className:"pt-4 space-y-2",children:[e.jsx(is,{to:"/loginpage",onClick:()=>s(!1),children:e.jsx(I,{variant:"ghost",className:"w-full",children:"Login"})}),e.jsx(is,{to:"/signup",onClick:()=>s(!1),children:e.jsx(I,{className:"bg-green-500 py-6 px-8 cursor-pointer w-full",children:"Start Free Trial"})})]})]})})]})})},$7=[{name:"Sarah Chebet",role:"Restaurant Owner",company:"Green Leaf Bistro",content:"BizHub transformed how we manage our restaurant. From inventory tracking to appointment reservations, everything is seamless. Our efficiency increased by 40%!",rating:5,avatar:"SJ"},{name:"Mike Simiyu",role:"Retail Manager",company:"Tech Gadgets Plus",content:"The e-commerce integration is incredible. We went from manual order processing to complete automation. Our online sales doubled in just 3 months.",rating:5,avatar:"MC"},{name:"Emily Wangoi",role:"Salon Owner",company:"Bella Beauty Studio",content:"The appointment scheduling feature is a game-changer. Clients love the automatic reminders, and we've reduced no-shows by 60%. Highly recommended!",rating:5,avatar:"ER"}],W7=()=>e.jsx("section",{className:"py-16 lg:py-24 bg-secondary/30",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"text-center max-w-3xl mx-auto mb-16",children:[e.jsxs("h2",{className:"text-3xl lg:text-5xl font-bold text-foreground mb-6",children:["Trusted by Business Owners",e.jsx("span",{className:"text-green-500 block",children:"Across Industries"})]}),e.jsx("p",{className:"text-xl text-muted-foreground",children:"See how BizHub is helping businesses streamline operations and accelerate growth."})]}),e.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-8",children:$7.map(t=>e.jsxs(se,{className:"relative group hover:shadow-md transition-all duration-200",children:[e.jsx("div",{className:"absolute -top-3 -left-3 w-8 h-8 bg-gray-200 rounded-full flex items-center justify-center opacity-80 group-hover:opacity-100 transition-opacity",children:e.jsx(C5,{className:"h-4 w-4 text-green-700"})}),e.jsxs(oe,{className:"space-y-4 pt-6",children:[e.jsx("div",{className:"flex items-center space-x-1",children:[...Array(t.rating)].map((s,a)=>e.jsx(Dn,{className:"h-4 w-4 fill-amber-400 text-amber-400"},a))}),e.jsxs("p",{className:"text-foreground leading-relaxed",children:['"',t.content,'"']}),e.jsxs("div",{className:"flex items-center space-x-3 pt-4 border-t border-border",children:[e.jsx("div",{className:"w-10 h-10 bg-primary/10 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-sm font-semibold text-primary",children:t.avatar})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-foreground",children:t.name}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:[t.role,", ",t.company]})]})]})]})]},t.name))}),e.jsxs("div",{className:"mt-16 grid grid-cols-2 md:grid-cols-4 gap-8 text-center",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex flex-col items-center justify-center space-y-1",children:[e.jsx(fs,{className:"h-6 w-6 text-green-500"}),e.jsx("div",{className:"text-3xl font-bold text-green-500",children:"10,000+"})]}),e.jsx("div",{className:"text-muted-foreground",children:"Active Users"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex flex-col items-center justify-center space-y-1",children:[e.jsx(T5,{className:"h-6 w-6 text-green-500"}),e.jsx("div",{className:"text-3xl font-bold text-green-500",children:"99.9%"})]}),e.jsx("div",{className:"text-muted-foreground",children:"Uptime"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex flex-col items-center justify-center space-y-1",children:[e.jsx(k5,{className:"h-6 w-6 text-green-500"}),e.jsx("div",{className:"text-3xl font-bold text-green-500",children:"24/7"})]}),e.jsx("div",{className:"text-muted-foreground",children:"Support"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex flex-col items-center justify-center space-y-1",children:[e.jsx(Dn,{className:"h-6 w-6 text-green-500 fill-green-500"}),e.jsx("div",{className:"text-3xl font-bold text-green-500",children:"4.9/5"})]}),e.jsx("div",{className:"text-muted-foreground",children:"User Rating"})]})]})]})});function G7(){return e.jsxs(e.Fragment,{children:[e.jsx(bd,{}),e.jsx(H7,{}),e.jsx(sk,{}),e.jsx(W7,{}),e.jsx(wd,{})]})}const q7="modulepreload",K7=function(t){return"/"+t},V2={},dl=function(s,a,n){let i=Promise.resolve();if(a&&a.length>0){let f=function(g){return Promise.all(g.map(p=>Promise.resolve(p).then(v=>({status:"fulfilled",value:v}),v=>({status:"rejected",reason:v}))))};document.getElementsByTagName("link");const d=document.querySelector("meta[property=csp-nonce]"),h=d?.nonce||d?.getAttribute("nonce");i=f(a.map(g=>{if(g=K7(g),g in V2)return;V2[g]=!0;const p=g.endsWith(".css"),v=p?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${g}"]${v}`))return;const y=document.createElement("link");if(y.rel=p?"stylesheet":q7,p||(y.as="script"),y.crossOrigin="",y.href=g,h&&y.setAttribute("nonce",h),document.head.appendChild(y),p)return new Promise((_,S)=>{y.addEventListener("load",_),y.addEventListener("error",()=>S(new Error(`Unable to preload CSS for ${g}`)))})}))}function c(d){const h=new Event("vite:preloadError",{cancelable:!0});if(h.payload=d,window.dispatchEvent(h),!h.defaultPrevented)throw d}return i.then(d=>{for(const h of d||[])h.status==="rejected"&&c(h.reason);return s().catch(c)})},ak=N.createContext(),nk=()=>N.useContext(ak),Y7=({children:t})=>{const{isAuthenticated:s}=qs(),[a,n]=N.useState({summary:null,transactions:[],loading:!0,error:null}),i=async()=>{try{const p=await ke.get("/financial-summary",{timeout:3e4});n(v=>({...v,summary:p.data,loading:!1,error:null}))}catch(p){console.error("Error fetching financial summary:",p),n(v=>({...v,summary:{totalRevenue:0,totalExpenses:0,netProfit:0,pendingPayments:0},loading:!1,error:null}))}},c=async()=>{try{const p=await ke.get("/transactions",{timeout:3e4});n(v=>({...v,transactions:p.data||[],error:null}))}catch(p){console.error("Error fetching transactions:",p),n(v=>({...v,transactions:[],error:null}))}},d=async()=>{n(p=>({...p,loading:!0})),await Promise.all([i(),c()])},h=p=>{n(v=>({...v,transactions:[p,...v.transactions]})),i()},f=p=>{n(v=>({...v,transactions:v.transactions.map(y=>y._id===p._id?p:y)})),i()};N.useEffect(()=>{s&&d()},[s]),N.useEffect(()=>{if(!s)return;const p=setInterval(()=>{i(),c()},3e4);return()=>clearInterval(p)},[s]);const g={...a,refreshFinancialData:d,addTransaction:h,updateTransaction:f,fetchFinancialSummary:i,fetchTransactions:c};return e.jsx(ak.Provider,{value:g,children:t})},Zn=[];for(let t=0;t<256;++t)Zn.push((t+256).toString(16).slice(1));function Z7(t,s=0){return(Zn[t[s+0]]+Zn[t[s+1]]+Zn[t[s+2]]+Zn[t[s+3]]+"-"+Zn[t[s+4]]+Zn[t[s+5]]+"-"+Zn[t[s+6]]+Zn[t[s+7]]+"-"+Zn[t[s+8]]+Zn[t[s+9]]+"-"+Zn[t[s+10]]+Zn[t[s+11]]+Zn[t[s+12]]+Zn[t[s+13]]+Zn[t[s+14]]+Zn[t[s+15]]).toLowerCase()}let jv;const X7=new Uint8Array(16);function Q7(){if(!jv){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");jv=crypto.getRandomValues.bind(crypto)}return jv(X7)}const J7=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),H2={randomUUID:J7};function e9(t,s,a){t=t||{};const n=t.random??t.rng?.()??Q7();if(n.length<16)throw new Error("Random bytes length must be >= 16");return n[6]=n[6]&15|64,n[8]=n[8]&63|128,Z7(n)}function t9(t,s,a){return H2.randomUUID&&!t?H2.randomUUID():e9(t)}const s9=N.lazy(()=>dl(()=>import("./ProductCatalog-CJOseC2R.js"),__vite__mapDeps([0,1,2,3,4,5]))),a9=N.lazy(()=>dl(()=>import("./SalesAnalytics-DbA8QVr9.js"),__vite__mapDeps([6,1,2,3,4,5]))),n9=N.lazy(()=>dl(()=>import("./OrderTimeline-L8H_wEm2.js"),__vite__mapDeps([7,1,2,3,4,5]))),r9=N.lazy(()=>dl(()=>import("./QuickActions-CINXzf0a.js"),__vite__mapDeps([8,1,2,3,4,5]))),i9=N.lazy(()=>dl(()=>Promise.resolve().then(()=>ZK),void 0)),o9=N.lazy(()=>dl(()=>import("./EnhancedOrderForm-DAzYu6Tf.js"),__vite__mapDeps([9,1,2,3,4,5]))),l9=N.lazy(()=>dl(()=>import("./RealTimeSync-yoGY_FwC.js"),__vite__mapDeps([10,1,2,3,4,5]))),c9=N.lazy(()=>dl(()=>import("./ModernOrderCard-BwodiTkE.js"),__vite__mapDeps([11,1,2,3,4,5]))),d9={name:"",sku:"",category:"",stockQuantity:"",reorderLevel:"",price:"",supplierName:"",description:"",currency:"KES"},u9=()=>{const t=_n(),{isAuthenticated:s,user:a}=qs(),{refreshFinancialData:n}=nk(),[i,c]=N.useState([]),[d,h]=N.useState([]),[f,g]=N.useState(!0),[p,v]=N.useState(!0),[y,_]=N.useState(null),[S,b]=N.useState(null),[T,E]=N.useState(!1),[A,O]=N.useState(null),[Q,q]=N.useState(!1),[U,D]=N.useState(null),[M,P]=N.useState(!1),[G,K]=N.useState(null),[z,J]=N.useState("overview"),[W,he]=N.useState("month"),[V,ae]=N.useState(!1),[ge,Z]=N.useState(d9),[ee,te]=N.useState(!1),[X,ce]=N.useState(""),[F,re]=N.useState(!1),de=async()=>{if(s){g(!0),_(null);try{const Ce=await ke.get("/client/orders",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}),rt=Ce.data,Qe=Array.isArray(rt)?rt:rt.orders||[];console.log(" Orders loaded:",Qe.length),c(Qe),Ce.data.length===0&&R.info("No orders yet. Create your first order!",{duration:3e3})}catch(Ce){console.error(" Error fetching orders:",Ce),_(Ce.response?.data?.message||Ce.message||"Failed to load orders"),R.error("Failed to load orders. Click refresh to retry.")}finally{g(!1)}}};N.useEffect(()=>{de()},[s]);const me=async()=>{if(s){v(!0),b(null);try{const Ce=await ke.get("/products",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});console.log(" Products loaded:",Ce.data.length),h(Ce.data||[]),Ce.data.length===0&&R.info("No products yet. Add your first product!",{duration:3e3})}catch(Ce){console.error(" Error fetching products:",Ce),b(Ce.response?.data?.message||Ce.message||"Failed to load products"),R.error("Failed to load products. Click refresh to retry.")}finally{v(!1)}}},De=async()=>{R.info("Refreshing data...",{duration:1e3}),await Promise.all([me(),de()]),R.success("Data refreshed successfully!")};N.useEffect(()=>{me()},[s]);const Ne=Ce=>{O({...Ce}),E(!0)},pe=Ce=>{D(Ce),q(!0)},Le=(Ce,rt)=>{O(Ce==="customerName"||Ce==="customerEmail"?Qe=>({...Qe,customer:{...Qe?.customer||{},[Ce==="customerName"?"name":"email"]:rt}}):Qe=>({...Qe,[Ce]:rt}))},ot=async()=>{try{const Ce=A.id||A._id,rt=await ke.put(`/orders/${Ce}`,A,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});c(Qe=>Qe.map(jt=>jt.id===rt.data.id||jt._id===rt.data.id?rt.data:jt)),E(!1),O(null),R.success("The order has been updated successfully."),(rt.data.status==="Paid"||rt.data.paymentStatus==="Paid")&&n?.()}catch(Ce){R.error("We couldn't update this order."),console.error("Error updating order:",Ce)}},Pt=async Ce=>{if(window.confirm(`Are you sure you want to delete order ${Ce.orderId}? This action cannot be undone.`))try{const rt=Ce._id||Ce.id;await ke.delete(`/client/orders/${rt}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}),c(Qe=>Qe.filter(jt=>(jt._id||jt.id)!==rt)),R.success("Order deleted successfully!"),Ce.paymentStatus==="Paid"&&n?.()}catch(rt){R.error(rt.response?.data?.message||"Failed to delete order"),console.error("Error deleting order:",rt)}},Dt=Ce=>{K(Ce),P(!0)},Ct=async Ce=>{try{await ke.delete(`/products/${Ce._id||Ce.id}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}),h(rt=>rt.filter(Qe=>(Qe._id||Qe.id)!==(Ce._id||Ce.id))),R.success("Product deleted successfully!")}catch{R.error("Failed to delete product")}},Lt=Ce=>{R.info(`Viewing ${Ce.name}`)},yt=()=>{const Ce=document.createElement("input");Ce.type="file",Ce.accept=".csv,.xlsx",Ce.onchange=async rt=>{rt.target.files[0]&&R.info("Import feature coming soon!")},Ce.click()},ys=()=>{try{const Ce=JSON.stringify({products:d,orders:i},null,2),rt=new Blob([Ce],{type:"application/json"}),Qe=URL.createObjectURL(rt),jt=document.createElement("a");jt.href=Qe,jt.download=`ecommerce-data-${new Date().toISOString().split("T")[0]}.json`,jt.click(),URL.revokeObjectURL(Qe),R.success("Data exported successfully!")}catch{R.error("Failed to export data")}},Es=()=>{R.info("Generating report..."),setTimeout(()=>{R.success("Report generation coming soon!")},1e3)},Hs=Ce=>{h(rt=>{const Qe=rt.findIndex(jt=>(jt._id||jt.id)===(Ce._id||Ce.id));if(Qe!==-1){const jt=[...rt];return jt[Qe]=Ce,jt}return[...rt,Ce]})},bs=Ce=>{c(rt=>{const Qe=rt.findIndex(jt=>(jt._id||jt.id)===(Ce._id||Ce.id));if(Qe!==-1){const jt=[...rt];return jt[Qe]=Ce,jt}return[...rt,Ce]}),(Ce.status==="Paid"||Ce.paymentStatus==="Paid")&&n?.()},$s=Ce=>{h(rt=>rt.map(Qe=>Qe._id===Ce.productId||Qe.id===Ce.productId?{...Qe,stockQuantity:Ce.stockQuantity}:Qe))},ws=async Ce=>{try{const rt=localStorage.getItem("token"),Qe=await ke.post("/products",Ce,{headers:{Authorization:`Bearer ${rt}`,"Content-Type":"application/json"}});h(jt=>[...jt,Qe.data]),ae(!1),R.success("Product added successfully with images!")}catch(rt){R.error(rt.response?.data?.error||"Failed to add product")}},$t=async Ce=>{try{const rt=localStorage.getItem("token"),Qe=await ke.post("/client/orders",Ce,{headers:{Authorization:`Bearer ${rt}`,"Content-Type":"application/json"}});c(jt=>[...jt,Qe.data]),te(!1),R.success("Order created successfully!"),(Qe.data.status==="Paid"||Qe.data.paymentStatus==="Paid")&&n?.()}catch(rt){R.error(rt.response?.data?.error||"Failed to create order")}},Na=async()=>{re(!0);try{const Ce=t9().replace(/-/g,"").substring(0,12),rt=localStorage.getItem("token");if(!rt)throw new Error("No authentication token found. Please log in again.");const Qe=await ke.post("/user/invite-code",{inviteCode:Ce},{headers:{Authorization:`Bearer ${rt}`}});console.log("Invite code save response:",Qe.data);const jt=`${window.location.origin}/client/signup/${Ce}`;ce(jt),R.success("Invite link generated and saved. Share this link with your clients.")}catch(Ce){const rt=Ce.response?.data?.error||Ce.message;R.error(`Failed to generate invite link: ${rt}`),console.error("Error generating invite code:",Ce.response?.data||Ce.message)}finally{re(!1)}},Me=()=>{navigator.clipboard.writeText(X),R.success("Invite link copied to clipboard.")},ht=()=>{navigator.share?navigator.share({title:"Join My Store",text:"You've been invited to access my exclusive online store!",url:X}).catch(()=>{}):Me()},He=Ce=>{const rt={Pending:{variant:"secondary"},Processing:{variant:"default"},Shipped:{variant:"default"},Delivered:{variant:"default"},Paid:{variant:"default"},Cancelled:{variant:"destructive"}};return e.jsx(ze,{variant:rt[Ce]?.variant||"default",children:Ce})},Mt=i.length,Rt=i.reduce((Ce,rt)=>Ce+(Number(rt.total)||0),0),xs=Mt&&Rt>0?(Rt/Mt).toFixed(2):"0.00",Ks=isNaN(Rt)?0:Rt,Ze=isNaN(parseFloat(xs))?"0.00":xs,Xe=(()=>{const Ce={};return i.forEach(rt=>{rt.items?.forEach(Qe=>{const jt=Qe.product||Qe.name;Ce[jt]||(Ce[jt]={name:Qe.name||"Unknown Product",sales:0,revenue:0}),Ce[jt].sales+=Qe.quantity||1,Ce[jt].revenue+=(Qe.price||0)*(Qe.quantity||1)})}),Object.values(Ce).sort((rt,Qe)=>Qe.revenue-rt.revenue).slice(0,4).map(rt=>({...rt,revenue:`KES ${rt.revenue.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}`}))})(),Se=()=>e.jsx("div",{className:"flex items-center justify-center p-8",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})});return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"E-Commerce Dashboard"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage your online store and orders"}),e.jsx("div",{className:"mt-2",children:e.jsx(N.Suspense,{fallback:null,children:e.jsx(l9,{onProductUpdate:Hs,onOrderUpdate:bs,onStockUpdate:$s,onManualRefresh:De})})})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsxs(I,{variant:"default",className:"gap-2 bg-purple-600 hover:bg-purple-700",onClick:()=>te(!0),children:[e.jsx(Bs,{className:"h-4 w-4"}),"Create Order"]}),e.jsxs(I,{variant:"default",className:"gap-2 bg-blue-600 hover:bg-blue-700",onClick:()=>{t("/store"),R.success("Opening store overview...")},children:[e.jsx(cs,{className:"h-4 w-4"}),"Store Overview"]}),e.jsxs(Gt,{children:[e.jsx(Za,{asChild:!0,children:e.jsxs(I,{variant:"outline",className:"gap-2",children:[e.jsx(Wv,{className:"h-4 w-4"}),"Generate Invite Link"]})}),e.jsxs(qt,{className:"sm:max-w-md",children:[e.jsxs(Kt,{children:[e.jsx(Yt,{children:"Invite Clients to Your Store"}),e.jsx(vs,{children:"Generate a unique invite link and share it with your clients. They'll sign up and get access to your exclusive store."})]}),e.jsx("div",{className:"space-y-4",children:X?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex items-center space-x-2",children:e.jsx(we,{readOnly:!0,value:X,className:"flex-1 bg-muted"})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(I,{onClick:Me,variant:"outline",className:"flex-1 gap-2",children:[e.jsx(Jy,{className:"h-4 w-4"}),"Copy Link"]}),e.jsxs(I,{onClick:ht,className:"flex-1 gap-2",children:[e.jsx(Pu,{className:"h-4 w-4"}),"Share"]})]}),e.jsx("p",{className:"text-xs text-muted-foreground text-center",children:" Tip: This link is unique to your store. Clients who use it will only see your products."})]}):e.jsxs(I,{onClick:Na,disabled:F,className:"w-full",children:[e.jsx(Wv,{className:"mr-2 h-4 w-4"}),F?"Generating...":"Generate Invite Link"]})})]})]}),e.jsxs(I,{variant:"outline",className:"gap-2",onClick:()=>{a?.inviteCode?(window.open(`/store/${a.inviteCode}`,"_blank"),R.success("Opening your client store in a new tab...")):(window.open("/store","_blank"),R.info("Opening store view..."))},children:[e.jsx(Pa,{className:"h-4 w-4"}),"View Store"]}),e.jsxs(I,{className:"gap-2 bg-green-500 hover:bg-green-400",onClick:()=>ae(!0),children:[e.jsx(ha,{className:"h-4 w-4"}),"Add Product"]})]})]}),e.jsxs("div",{className:"flex items-center gap-2 border-b border-border pb-2",children:[e.jsxs(I,{variant:z==="overview"?"default":"ghost",onClick:()=>J("overview"),className:"gap-2",children:[e.jsx(Bs,{className:"h-4 w-4"}),"Overview"]}),e.jsxs(I,{variant:z==="products"?"default":"ghost",onClick:()=>J("products"),className:"gap-2",children:[e.jsx(cs,{className:"h-4 w-4"}),"Products (",d.length,")"]}),e.jsxs(I,{variant:z==="analytics"?"default":"ghost",onClick:()=>J("analytics"),className:"gap-2",children:[e.jsx(aa,{className:"h-4 w-4"}),"Analytics"]})]}),e.jsx(N.Suspense,{fallback:e.jsx(Se,{}),children:e.jsx(r9,{onAddProduct:()=>ae(!0),onImport:yt,onExport:ys,onGenerateReport:Es})}),z==="overview"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid gap-6 md:grid-cols-4",children:[e.jsxs(se,{children:[e.jsxs(_e,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(Te,{className:"text-sm font-medium",children:"Total Orders"}),e.jsx(Bs,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(oe,{children:f?e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"h-8 w-16 bg-gray-200 rounded animate-pulse"}),e.jsx("div",{className:"h-3 w-24 bg-gray-100 rounded animate-pulse"})]}):y?e.jsxs("div",{children:[e.jsx("div",{className:"text-lg font-bold text-red-600",children:"Error"}),e.jsx(I,{size:"sm",variant:"link",onClick:de,className:"p-0 h-auto text-xs",children:"Retry"})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-2xl font-bold",children:Mt}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Total orders placed"})]})})]}),e.jsxs(se,{children:[e.jsxs(_e,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(Te,{className:"text-sm font-medium",children:"Revenue"}),e.jsx(Ba,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(oe,{children:f?e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"h-8 w-24 bg-gray-200 rounded animate-pulse"}),e.jsx("div",{className:"h-3 w-20 bg-gray-100 rounded animate-pulse"})]}):y?e.jsxs("div",{children:[e.jsx("div",{className:"text-lg font-bold text-red-600",children:"Error"}),e.jsx(I,{size:"sm",variant:"link",onClick:de,className:"p-0 h-auto text-xs",children:"Retry"})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-2xl font-bold",children:["KES ",Ks.toLocaleString()]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Total revenue earned"})]})})]}),e.jsxs(se,{children:[e.jsxs(_e,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(Te,{className:"text-sm font-medium",children:"Products"}),e.jsx(cs,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(oe,{children:p?e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"h-8 w-16 bg-gray-200 rounded animate-pulse"}),e.jsx("div",{className:"h-3 w-24 bg-gray-100 rounded animate-pulse"})]}):S?e.jsxs("div",{children:[e.jsx("div",{className:"text-lg font-bold text-red-600",children:"Error"}),e.jsx(I,{size:"sm",variant:"link",onClick:me,className:"p-0 h-auto text-xs",children:"Retry"})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-2xl font-bold",children:d.length}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Active products"})]})})]}),e.jsxs(se,{children:[e.jsxs(_e,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(Te,{className:"text-sm font-medium",children:"Avg. Order Value"}),e.jsx(aa,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(oe,{children:f?e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"h-8 w-20 bg-gray-200 rounded animate-pulse"}),e.jsx("div",{className:"h-3 w-24 bg-gray-100 rounded animate-pulse"})]}):y?e.jsxs("div",{children:[e.jsx("div",{className:"text-lg font-bold text-red-600",children:"Error"}),e.jsx(I,{size:"sm",variant:"link",onClick:de,className:"p-0 h-auto text-xs",children:"Retry"})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-2xl font-bold",children:["KES ",Ze]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Average per order"})]})})]})]}),e.jsxs("div",{className:"grid gap-6 lg:grid-cols-3",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-4",children:[e.jsx(se,{children:e.jsx(_e,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(Te,{children:"Recent Orders"}),e.jsx(vt,{children:"Latest customer orders with product details"})]}),e.jsxs(I,{variant:"outline",size:"sm",onClick:de,disabled:f,className:"gap-2",children:[e.jsx(Cs,{className:`h-4 w-4 ${f?"animate-spin":""}`}),"Refresh"]})]})})}),f?e.jsx("div",{className:"space-y-4",children:[1,2,3].map(Ce=>e.jsx(se,{className:"animate-pulse",children:e.jsxs(oe,{className:"p-6 space-y-4",children:[e.jsx("div",{className:"h-6 bg-gray-200 rounded w-1/3"}),e.jsx("div",{className:"h-4 bg-gray-100 rounded w-1/2"}),e.jsx("div",{className:"h-20 bg-gray-100 rounded"})]})},Ce))}):y?e.jsx(se,{className:"border-red-200",children:e.jsxs(oe,{className:"p-8 text-center",children:[e.jsx(Ws,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-red-700 mb-2",children:"Failed to Load Orders"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:y}),e.jsxs(I,{onClick:de,variant:"outline",children:[e.jsx(Cs,{className:"h-4 w-4 mr-2"}),"Try Again"]})]})}):i.length===0?e.jsx(se,{children:e.jsxs(oe,{className:"p-8 text-center",children:[e.jsx(Bs,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No Orders Yet"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Create your first order to get started!"}),e.jsxs(I,{onClick:()=>te(!0),children:[e.jsx(ha,{className:"h-4 w-4 mr-2"}),"Create Order"]})]})}):e.jsxs("div",{className:"space-y-4",children:[e.jsx(N.Suspense,{fallback:e.jsx(Se,{}),children:i.slice(0,5).map(Ce=>e.jsx(c9,{order:Ce,onView:pe,onEdit:Ne,onDelete:Pt},Ce._id||Ce.id))}),i.length>5&&e.jsx("div",{className:"text-center py-4",children:e.jsxs(I,{variant:"outline",onClick:()=>J("analytics"),children:["View All ",i.length," Orders"]})})]})]}),e.jsxs(se,{children:[e.jsxs(_e,{children:[e.jsx(Te,{children:"Top Products"}),e.jsx(vt,{children:"Best selling items this month"})]}),e.jsx(oe,{children:f?e.jsx("div",{className:"space-y-4",children:[1,2,3,4].map(Ce=>e.jsxs("div",{className:"flex items-center justify-between animate-pulse",children:[e.jsxs("div",{className:"space-y-2 flex-1",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),e.jsx("div",{className:"h-3 bg-gray-200 rounded w-1/2"})]}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-20"})]},Ce))}):y?e.jsxs("div",{className:"text-center py-8 text-red-600",children:[e.jsx(Ws,{className:"h-8 w-8 mx-auto mb-2"}),e.jsx("p",{className:"text-sm",children:y})]}):Xe.length===0?e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(cs,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{className:"text-sm font-medium",children:"No product sales yet"}),e.jsx("p",{className:"text-xs mt-2",children:"Top sellers will appear here"})]}):e.jsx("div",{className:"space-y-4",children:Xe.map((Ce,rt)=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-foreground",children:Ce.name}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[Ce.sales," sales"]})]}),e.jsx("div",{className:"text-right",children:e.jsx("p",{className:"text-sm font-medium text-foreground",children:Ce.revenue})})]},rt))})})]})]}),e.jsxs("div",{className:"grid gap-6 lg:grid-cols-4",children:[e.jsxs(se,{children:[e.jsx(_e,{className:"pb-3",children:e.jsx(Te,{className:"text-base",children:"Pending Orders"})}),e.jsxs(oe,{children:[e.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:i.filter(Ce=>Ce.status==="Pending").length}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Need processing"})]})]}),e.jsxs(se,{children:[e.jsx(_e,{className:"pb-3",children:e.jsx(Te,{className:"text-base",children:"Processing"})}),e.jsxs(oe,{children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:i.filter(Ce=>Ce.status==="Processing").length}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Being prepared"})]})]}),e.jsxs(se,{children:[e.jsx(_e,{className:"pb-3",children:e.jsx(Te,{className:"text-base",children:"Shipped"})}),e.jsxs(oe,{children:[e.jsx("div",{className:"text-2xl font-bold text-purple-600",children:i.filter(Ce=>Ce.status==="Shipped").length}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"In transit"})]})]}),e.jsxs(se,{children:[e.jsx(_e,{className:"pb-3",children:e.jsx(Te,{className:"text-base",children:"Delivered"})}),e.jsxs(oe,{children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:i.filter(Ce=>Ce.status==="Delivered").length}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"This month"})]})]})]}),e.jsx(N.Suspense,{fallback:e.jsx(Se,{}),children:e.jsx(n9,{orders:i,limit:15})})]}),z==="products"&&e.jsx(N.Suspense,{fallback:e.jsx(Se,{}),children:e.jsx(s9,{products:d,onEdit:Dt,onDelete:Ct,onView:Lt})}),z==="analytics"&&e.jsxs("div",{id:"analytics-section",className:"space-y-4",children:[e.jsx(se,{className:"border-primary/20",children:e.jsx(oe,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Sales Analytics"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"View your sales performance and trends"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ue,{htmlFor:"timeframe",className:"text-sm",children:"Time Period:"}),e.jsxs(Xt,{value:W,onValueChange:he,children:[e.jsx(Jt,{id:"timeframe",className:"w-32",children:e.jsx(Qt,{})}),e.jsxs(es,{children:[e.jsx(Ie,{value:"week",children:"This Week"}),e.jsx(Ie,{value:"month",children:"This Month"}),e.jsx(Ie,{value:"year",children:"This Year"})]})]})]})]})})}),e.jsx(N.Suspense,{fallback:e.jsx(Se,{}),children:e.jsx(a9,{orders:i,timeFrame:W})})]}),Q&&U&&e.jsx(Gt,{open:Q,onOpenChange:q,children:e.jsxs(qt,{children:[e.jsxs(Kt,{children:[e.jsx(Yt,{children:"Order Details"}),e.jsx(vs,{children:"View order information"})]}),e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{children:[e.jsx(ue,{children:"Order ID"}),e.jsx("div",{className:"font-medium",children:U.orderId||U.id})]}),e.jsxs("div",{children:[e.jsx(ue,{children:"Customer"}),e.jsx("div",{children:U.customer?.name})]}),e.jsxs("div",{children:[e.jsx(ue,{children:"Email"}),e.jsx("div",{children:U.customer?.email})]}),e.jsxs("div",{children:[e.jsx(ue,{children:"Date"}),e.jsx("div",{children:U.date?new Date(U.date).toLocaleString():""})]}),e.jsxs("div",{children:[e.jsx(ue,{children:"Total"}),e.jsxs("div",{children:["KES ",Number(U.total||0).toFixed(2)]})]}),e.jsxs("div",{children:[e.jsx(ue,{children:"Status"}),e.jsx("div",{children:He(U.status)})]}),e.jsxs("div",{children:[e.jsx(ue,{children:"Items"}),e.jsx("div",{children:Array.isArray(U.items)?`${U.items.length} items`:U.items})]}),e.jsxs("div",{children:[e.jsx(ue,{children:"Notes"}),e.jsx("div",{children:U.notes})]})]}),e.jsx(ea,{children:e.jsx(I,{variant:"outline",onClick:()=>q(!1),children:"Close"})})]})}),T&&A&&e.jsx(Gt,{open:T,onOpenChange:E,children:e.jsxs(qt,{children:[e.jsxs(Kt,{children:[e.jsx(Yt,{children:"Edit Order"}),e.jsx(vs,{children:"Update order details"})]}),e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(ue,{htmlFor:"edit-customer",children:"Customer Name"}),e.jsx(we,{id:"edit-customer",value:A.customer?.name||"",onChange:Ce=>Le("customerName",Ce.target.value)})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(ue,{htmlFor:"edit-email",children:"Customer Email"}),e.jsx(we,{id:"edit-email",value:A.customer?.email||"",onChange:Ce=>Le("customerEmail",Ce.target.value)})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(ue,{htmlFor:"edit-date",children:"Order Date"}),e.jsx(we,{id:"edit-date",type:"date",value:A.date?new Date(A.date).toISOString().slice(0,10):"",onChange:Ce=>Le("date",Ce.target.value)})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(ue,{htmlFor:"edit-total",children:"Total Amount (KES)"}),e.jsx(we,{id:"edit-total",type:"number",min:"0",step:"0.01",value:A.total||"",onChange:Ce=>Le("total",Ce.target.value)})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(ue,{htmlFor:"edit-items",children:"Number of Items"}),e.jsx(we,{id:"edit-items",type:"number",min:"0",value:Array.isArray(A.items)?A.items.length:A.items||0,onChange:Ce=>{const rt=parseInt(Ce.target.value)||0,Qe=Array.from({length:rt},(jt,Ot)=>({id:Ot+1,name:`Item ${Ot+1}`,quantity:1,price:rt>0?Number(A.total||0)/rt:0}));Le("items",Qe)}})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(ue,{htmlFor:"edit-status",children:"Status"}),e.jsxs(Xt,{value:A.status||"Pending",onValueChange:Ce=>Le("status",Ce),children:[e.jsx(Jt,{children:e.jsx(Qt,{placeholder:"Select status"})}),e.jsxs(es,{children:[e.jsx(Ie,{value:"Pending",children:"Pending"}),e.jsx(Ie,{value:"Processing",children:"Processing"}),e.jsx(Ie,{value:"Shipped",children:"Shipped"}),e.jsx(Ie,{value:"Delivered",children:"Delivered"}),e.jsx(Ie,{value:"Paid",children:"Paid"}),e.jsx(Ie,{value:"Cancelled",children:"Cancelled"})]})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(ue,{htmlFor:"edit-notes",children:"Notes (Optional)"}),e.jsx(Gs,{id:"edit-notes",value:A.notes||"",onChange:Ce=>Le("notes",Ce.target.value),className:"resize-none"})]})]}),e.jsxs(ea,{children:[e.jsx(I,{variant:"outline",onClick:()=>E(!1),children:"Cancel"}),e.jsx(I,{onClick:ot,children:"Save Changes"})]})]})}),e.jsx(N.Suspense,{fallback:e.jsx(Se,{}),children:e.jsx(i9,{isOpen:V,onClose:()=>ae(!1),onSubmit:ws,initialData:G,mode:G?"edit":"add"})}),e.jsx(N.Suspense,{fallback:e.jsx(Se,{}),children:e.jsx(o9,{isOpen:ee,onClose:()=>te(!1),onSubmit:$t,products:d,mode:"add"})})]})},$2=["Pending","Confirmed","Completed","Cancelled","Rejected"],h9=()=>{const{user:t,isAuthenticated:s,loading:a}=qs(),{socket:n,connected:i}=Ra(),c=()=>new Date().toISOString().split("T")[0],[d,h]=N.useState(c()),[f,g]=N.useState([]),[p,v]=N.useState([]),[y,_]=N.useState(0),[S,b]=N.useState(0),[T,E]=N.useState(0),[A,O]=N.useState(0),[Q,q]=N.useState(0),[U,D]=N.useState(0),[M,P]=N.useState(0),[G,K]=N.useState("all"),[z,J]=N.useState(""),[W,he]=N.useState(null),[V,ae]=N.useState(!1),[ge,Z]=N.useState([]),[ee,te]=N.useState([]),[X,ce]=N.useState(!1),[F,re]=N.useState(null),[de,me]=N.useState({customerName:"",service:"",time:"",durationMinutes:"",status:"Pending",notes:""});N.useEffect(()=>{d&&(async()=>{if(s)try{const{data:ht}=await ke.get(`/appointments?date=${d}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});g(ht)}catch(ht){R.error("Error fetching appointments."),console.error("Error fetching appointments:",ht)}})()},[d,s]),N.useEffect(()=>{(async()=>{if(s)try{const{data:ht}=await ke.get("/team",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});Z(ht)}catch(ht){console.error("Error fetching team members:",ht)}})()},[s]),N.useEffect(()=>{if(!(!n||!i))return n.on("appointment_created",Me=>{console.log("New appointment created:",Me),g(ht=>[Me.appointment,...ht]),R.success(`New appointment from ${Me.appointment.customerName}`),De()}),n.on("appointment_updated",Me=>{console.log("Appointment updated:",Me),g(ht=>ht.map(He=>He._id===Me.appointment._id?Me.appointment:He)),R.info("Appointment updated in real-time")}),n.on("appointment_confirmed",Me=>{console.log("Appointment confirmed:",Me),g(ht=>ht.map(He=>He._id===Me.appointment._id?Me.appointment:He)),R.success(`Appointment confirmed for ${Me.appointment.customerName}`),De()}),n.on("appointment_rejected",Me=>{console.log("Appointment rejected:",Me),g(ht=>ht.map(He=>He._id===Me.appointment._id?Me.appointment:He)),R.info("Appointment rejected"),De()}),n.on("appointment_completed",Me=>{console.log("Appointment completed:",Me),g(ht=>ht.map(He=>He._id===Me.appointment._id?Me.appointment:He)),R.success("Appointment completed"),De()}),n.on("appointment_deleted",Me=>{console.log("Appointment deleted:",Me),g(ht=>ht.filter(He=>He._id!==Me.appointmentId)),R.info("Appointment removed"),De()}),()=>{n.off("appointment_created"),n.off("appointment_updated"),n.off("appointment_confirmed"),n.off("appointment_rejected"),n.off("appointment_completed"),n.off("appointment_deleted")}},[n,i]);const De=async()=>{try{const{data:Me}=await ke.get("/appointments/stats/overview",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});he(Me)}catch(Me){console.error("Error fetching appointment stats:",Me)}};N.useEffect(()=>{s&&De()},[s]);const Ne=Me=>{const ht=(Ks="")=>Ks.trim().toLowerCase(),He=Me.filter(Ks=>ht(Ks.status)==="confirmed").length,Mt=Me.filter(Ks=>ht(Ks.status)==="pending").length,Rt=Me.filter(Ks=>ht(Ks.status)==="cancelled").length,xs=Me.filter(Ks=>ht(Ks.status)==="completed").length;_(Me.length),O(He),q(Mt),D(Rt),P(xs),E(Rt)};N.useEffect(()=>{Ne(f),Le(f),pe()},[f,G,z]);const pe=()=>{let Me=[...f];if(G!=="all"&&(Me=Me.filter(ht=>ht.status.toLowerCase()===G.toLowerCase())),z.trim()){const ht=z.toLowerCase();Me=Me.filter(He=>He.customerName?.toLowerCase().includes(ht)||He.service?.toLowerCase().includes(ht)||He.customerEmail?.toLowerCase().includes(ht))}v(Me)},Le=Me=>{if(Me.length===0){te([]);return}const ht={};Me.forEach(Rt=>{const xs=Rt.service||"Unknown";ht[xs]=(ht[xs]||0)+1});const He=Me.length,Mt=Object.entries(ht).map(([Rt,xs])=>({service:Rt,count:xs,percentage:(xs/He*100).toFixed(0)})).sort((Rt,xs)=>xs.count-Rt.count).slice(0,3);te(Mt)},ot=(Me,ht)=>{me(He=>({...He,[Me]:ht}))},Pt=async()=>{if(!de.customerName||!de.service||!de.time||!de.durationMinutes){R.error("Please fill in all required fields.");return}const Me=!isNaN(new Date(de.time).getTime()),ht=Number(de.durationMinutes);if(!Me||isNaN(ht)||ht<=0){R.error("Invalid time or duration.");return}try{const He={customerName:de.customerName,service:de.service,time:new Date(de.time),durationMinutes:ht,status:de.status||"Pending",notes:de.notes},Mt=localStorage.getItem("token"),{data:Rt}=await ke.post("/appointments",He,{headers:{Authorization:`Bearer ${Mt}`,"Content-Type":"application/json"}});g(xs=>[Rt,...xs]),ae(!1),me({customerName:"",service:"",time:c(),durationMinutes:"",status:"Pending",notes:""}),R.success("Appointment added successfully!")}catch(He){const Mt=He.response?.data?.error||"Error adding appointment.";R.error(Mt),console.error("Error adding appointment:",Mt)}},Dt=Me=>{re({...Me,time:Ct(Me.time),durationMinutes:String(Me.durationMinutes??"")}),ce(!0)},Ct=Me=>{if(!Me)return"";const ht=new Date(Me);if(Number.isNaN(ht.getTime()))return"";const He=Xe=>Xe.toString().padStart(2,"0"),Mt=ht.getFullYear(),Rt=He(ht.getMonth()+1),xs=He(ht.getDate()),Ks=He(ht.getHours()),Ze=He(ht.getMinutes());return`${Mt}-${Rt}-${xs}T${Ks}:${Ze}`},Lt=(Me,ht)=>{re(He=>({...He,[Me]:ht}))},yt=async()=>{try{if(!F?._id)return;const Me=localStorage.getItem("token"),ht={...F,time:new Date(F.time),durationMinutes:Number(F.durationMinutes)},{data:He}=await ke.put(`/appointments/${F._id}`,ht,{headers:{Authorization:`Bearer ${Me}`,"Content-Type":"application/json"}});g(Mt=>Mt.map(Rt=>Rt._id===He._id?He:Rt)),ce(!1),re(null),R.success("Appointment updated successfully!")}catch(Me){R.error("Error updating appointment."),console.error("Error updating appointment:",Me)}},ys=async Me=>{try{const ht=localStorage.getItem("token");await ke.delete(`/appointments/${Me}`,{headers:{Authorization:`Bearer ${ht}`}}),g(He=>He.filter(Mt=>Mt._id!==Me)),R.success("Appointment deleted successfully!"),De()}catch(ht){R.error("Error deleting appointment."),console.error("Error deleting appointment:",ht)}},Es=async Me=>{try{const ht=localStorage.getItem("token"),{data:He}=await ke.put(`/appointments/${Me}/confirm`,{},{headers:{Authorization:`Bearer ${ht}`}});g(Mt=>Mt.map(Rt=>Rt._id===Me?He.appointment:Rt)),R.success("Appointment confirmed! Email sent to customer."),De()}catch(ht){R.error(ht.response?.data?.error||"Error confirming appointment."),console.error("Error confirming appointment:",ht)}},Hs=async(Me,ht="Time slot unavailable")=>{try{const He=localStorage.getItem("token"),{data:Mt}=await ke.put(`/appointments/${Me}/reject`,{reason:ht},{headers:{Authorization:`Bearer ${He}`}});g(Rt=>Rt.map(xs=>xs._id===Me?Mt.appointment:xs)),R.success("Appointment rejected. Customer notified."),De()}catch(He){R.error(He.response?.data?.error||"Error rejecting appointment."),console.error("Error rejecting appointment:",He)}},bs=async Me=>{try{const ht=localStorage.getItem("token"),{data:He}=await ke.put(`/appointments/${Me}/complete`,{},{headers:{Authorization:`Bearer ${ht}`}});g(Mt=>Mt.map(Rt=>Rt._id===Me?He.appointment:Rt)),R.success("Appointment marked as completed!"),De()}catch(ht){R.error(ht.response?.data?.error||"Error completing appointment."),console.error("Error completing appointment:",ht)}};if(a)return e.jsx("div",{children:"Loading..."});if(!s)return e.jsx("div",{children:"Please log in to manage your appointments."});const $s=["09:00","09:30","10:00","10:30","11:00","11:30","12:00","12:30","13:00","13:30","14:00","14:30","15:00","15:30","16:00","16:30","17:00","17:30"],ws=Me=>f.some(ht=>{const He=new Date(ht.time);return`${He.getHours().toString().padStart(2,"0")}:${He.getMinutes().toString().padStart(2,"0")}`===Me}),$t=Me=>{const ht={Confirmed:{variant:"default",className:"bg-green-100 text-green-800"},Pending:{variant:"secondary",className:"bg-yellow-100 text-yellow-800"},Cancelled:{variant:"destructive",className:"bg-red-100 text-red-800"},Rejected:{variant:"destructive",className:"bg-red-100 text-red-800"},Completed:{variant:"default",className:"bg-blue-100 text-blue-800"}};return e.jsx(ze,{variant:ht[Me]?.variant||"default",className:ht[Me]?.className,children:Me})},Na=Me=>{const ht=Me.status==="Pending",He=Me.status==="Confirmed";return e.jsxs("div",{className:"flex gap-1",children:[ht&&e.jsxs(e.Fragment,{children:[e.jsxs(I,{variant:"outline",size:"sm",className:"text-green-600 hover:text-green-700 hover:bg-green-50",onClick:()=>Es(Me._id),children:[e.jsx(ks,{className:"h-4 w-4 mr-1"}),"Confirm"]}),e.jsxs(I,{variant:"outline",size:"sm",className:"text-red-600 hover:text-red-700 hover:bg-red-50",onClick:()=>Hs(Me._id),children:[e.jsx(cr,{className:"h-4 w-4 mr-1"}),"Reject"]})]}),He&&e.jsxs(I,{variant:"outline",size:"sm",className:"text-blue-600 hover:text-blue-700 hover:bg-blue-50",onClick:()=>bs(Me._id),children:[e.jsx(Zi,{className:"h-4 w-4 mr-1"}),"Complete"]}),Me.customerEmail&&e.jsx(I,{variant:"ghost",size:"sm",onClick:()=>window.location.href=`mailto:${Me.customerEmail}`,children:e.jsx(fa,{className:"h-4 w-4"})})]})};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Appointment Scheduling"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage bookings and calendar"})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Da,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(we,{placeholder:"Search appointments...",value:z,onChange:Me=>J(Me.target.value),className:"pl-9 w-64"})]}),e.jsxs(Xt,{value:G,onValueChange:K,children:[e.jsx(Jt,{className:"w-[140px]",children:e.jsx(Qt,{placeholder:"Filter status"})}),e.jsxs(es,{children:[e.jsx(Ie,{value:"all",children:"All Status"}),e.jsx(Ie,{value:"pending",children:"Pending"}),e.jsx(Ie,{value:"confirmed",children:"Confirmed"}),e.jsx(Ie,{value:"completed",children:"Completed"}),e.jsx(Ie,{value:"cancelled",children:"Cancelled"}),e.jsx(Ie,{value:"rejected",children:"Rejected"})]})]}),e.jsx(we,{type:"date",value:d,onChange:Me=>h(Me.target.value),className:"w-auto"}),e.jsxs(I,{variant:"outline",onClick:()=>{J(""),K("all")},children:[e.jsx(Cs,{className:"mr-2 h-4 w-4"}),"Reset"]}),e.jsxs(Gt,{open:V,onOpenChange:ae,children:[e.jsx(Za,{asChild:!0,children:e.jsxs(I,{className:"bg-green-500 cursor-pointer hover:bg-green-400",children:[e.jsx(ha,{className:"mr-2 h-4 w-4"}),"New Appointment"]})}),e.jsxs(qt,{children:[e.jsxs(Kt,{children:[e.jsx(Yt,{children:"Add New Appointment"}),e.jsx(vs,{children:"Fill in the details to schedule a new appointment."})]}),e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(ue,{htmlFor:"customerName",children:"Customer Name"}),e.jsx(we,{id:"customerName",placeholder:"Enter customer name",value:de.customerName,onChange:Me=>ot("customerName",Me.target.value)})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(ue,{htmlFor:"service",children:"Service"}),e.jsx(we,{id:"service",placeholder:"e.g. Hair Cut",value:de.service,onChange:Me=>ot("service",Me.target.value)})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(ue,{htmlFor:"time",children:"Date & Time"}),e.jsx(we,{id:"time",type:"datetime-local",value:de.time,onChange:Me=>ot("time",Me.target.value)})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(ue,{htmlFor:"durationMinutes",children:"Duration (minutes)"}),e.jsx(we,{id:"durationMinutes",type:"number",min:"15",step:"15",placeholder:"e.g. 30",value:de.durationMinutes,onChange:Me=>ot("durationMinutes",Me.target.value)})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(ue,{htmlFor:"status",children:"Status"}),e.jsx("select",{id:"status",className:"border rounded px-2 py-1",value:de.status,onChange:Me=>ot("status",Me.target.value),children:$2.map(Me=>e.jsx("option",{value:Me,children:Me},Me))})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(ue,{htmlFor:"notes",children:"Notes (Optional)"}),e.jsx(Gs,{id:"notes",placeholder:"Appointment notes",value:de.notes,onChange:Me=>ot("notes",Me.target.value),className:"resize-none"})]})]}),e.jsxs(ea,{children:[e.jsx(I,{variant:"outline",className:"text-red-500",onClick:()=>ae(!1),children:"Cancel"}),e.jsxs(I,{className:"bg-green-500 hover:bg-green-400",onClick:Pt,children:[e.jsx(mn,{className:"mr-2 h-4 w-4"}),"Add Appointment"]})]})]})]})]})]}),e.jsxs("div",{className:"grid gap-6 md:grid-cols-5",children:[e.jsxs(se,{children:[e.jsxs(_e,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(Te,{className:"text-sm font-medium",children:"Today's Appointments"}),e.jsx(Ms,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(oe,{children:[e.jsx("div",{className:"text-2xl font-bold",children:y}),e.jsx("p",{className:"text-xs text-green-600",children:"appointments"})]})]}),e.jsxs(se,{children:[e.jsxs(_e,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(Te,{className:"text-sm font-medium",children:"Pending"}),e.jsx(ps,{className:"h-4 w-4 text-yellow-600"})]}),e.jsxs(oe,{children:[e.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:W?.pending||Q}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Awaiting confirmation"})]})]}),e.jsxs(se,{children:[e.jsxs(_e,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(Te,{className:"text-sm font-medium",children:"Confirmed"}),e.jsx(ks,{className:"h-4 w-4 text-green-600"})]}),e.jsxs(oe,{children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:W?.confirmed||A}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Ready to serve"})]})]}),e.jsxs(se,{children:[e.jsxs(_e,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(Te,{className:"text-sm font-medium",children:"Completed"}),e.jsx(Zi,{className:"h-4 w-4 text-blue-600"})]}),e.jsxs(oe,{children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:W?.completed||M}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Service done"})]})]}),e.jsxs(se,{children:[e.jsxs(_e,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(Te,{className:"text-sm font-medium",children:"Cancelled"}),e.jsx(cr,{className:"h-4 w-4 text-red-600"})]}),e.jsxs(oe,{children:[e.jsx("div",{className:"text-2xl font-bold text-red-600",children:W?.cancelled||U}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"No-shows/rejected"})]})]})]}),e.jsxs("div",{className:"grid gap-6 lg:grid-cols-3",children:[e.jsxs(se,{className:"lg:col-span-2",children:[e.jsxs(_e,{children:[e.jsxs(Te,{children:["Today's Schedule - ",new Date(d).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})]}),e.jsxs(vt,{children:["View and manage daily appointments ",i&&e.jsx(ze,{variant:"outline",className:"ml-2 bg-green-100 text-green-800",children:" Live"})]})]}),e.jsx(oe,{children:e.jsx("div",{className:"space-y-4",children:p.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Ms,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"No appointments found"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:z||G!=="all"?"Try adjusting your filters":"Add a new appointment to get started"})]}):p.map(Me=>e.jsxs("div",{className:"flex items-center space-x-4 p-4 border rounded-lg",children:[e.jsxs("div",{className:"text-center min-w-[80px]",children:[e.jsx("p",{className:"font-semibold text-foreground",children:Me.time?new Date(Me.time).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):""}),e.jsx("p",{className:"text-xs text-muted-foreground",children:Me.durationMinutes||""})]}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("p",{className:"font-medium text-foreground",children:Me.customerName}),$t(Me.status)]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:Me.service}),Me.customerEmail&&e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:Me.customerEmail})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[Na(Me),e.jsx(I,{variant:"outline",size:"sm",onClick:()=>Dt(Me),children:"Edit"}),e.jsx(I,{variant:"ghost",size:"sm",className:"text-red-500 hover:text-red-600",onClick:()=>ys(Me._id),children:e.jsx(Ua,{className:"h-4 w-4"})})]})]},Me._id||Me.id))})})]}),e.jsxs(se,{children:[e.jsxs(_e,{children:[e.jsx(Te,{children:"Available Slots"}),e.jsx(vt,{children:"Quick booking slots for today"})]}),e.jsx(oe,{children:e.jsx("div",{className:"grid grid-cols-2 gap-2",children:$s.map(Me=>e.jsx(I,{variant:ws(Me)?"secondary":"outline",size:"sm",disabled:ws(Me),className:"text-xs",onClick:()=>ot("time",`${d}T${Me}`),children:Me},Me))})})]})]}),X&&F&&e.jsx(Gt,{open:X,onOpenChange:ce,children:e.jsxs(qt,{children:[e.jsxs(Kt,{children:[e.jsx(Yt,{children:"Edit Appointment"}),e.jsx(vs,{children:"Update appointment details"})]}),e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(ue,{htmlFor:"edit-customerName",children:"Customer Name"}),e.jsx(we,{id:"edit-customerName",placeholder:"Enter customer name",value:F.customerName||"",onChange:Me=>Lt("customerName",Me.target.value)})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(ue,{htmlFor:"edit-service",children:"Service"}),e.jsx(we,{id:"edit-service",placeholder:"e.g. Hair Cut",value:F.service||"",onChange:Me=>Lt("service",Me.target.value)})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(ue,{htmlFor:"edit-time",children:"Date & Time"}),e.jsx(we,{id:"edit-time",type:"datetime-local",value:F.time||"",onChange:Me=>Lt("time",Me.target.value)})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(ue,{htmlFor:"edit-durationMinutes",children:"Duration (minutes)"}),e.jsx(we,{id:"edit-durationMinutes",type:"number",min:"15",step:"15",placeholder:"e.g. 30",value:F.durationMinutes||"",onChange:Me=>Lt("durationMinutes",Me.target.value)})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(ue,{htmlFor:"edit-status",children:"Status"}),e.jsx("select",{id:"edit-status",className:"border rounded px-2 py-1",value:F.status||"Pending",onChange:Me=>Lt("status",Me.target.value),children:$2.map(Me=>e.jsx("option",{value:Me,children:Me},Me))})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(ue,{htmlFor:"edit-notes",children:"Notes (Optional)"}),e.jsx(Gs,{id:"edit-notes",placeholder:"Appointment notes",className:"resize-none",value:F.notes||"",onChange:Me=>Lt("notes",Me.target.value)})]})]}),e.jsxs(ea,{children:[e.jsx(I,{variant:"outline",className:"text-red-500",onClick:()=>ce(!1),children:"Cancel"}),e.jsxs(I,{className:"bg-green-500 hover:bg-green-400",onClick:yt,children:[e.jsx(mn,{className:"mr-2 h-4 w-4"}),"Save Changes"]})]})]})}),e.jsxs("div",{className:"grid gap-6 lg:grid-cols-3",children:[e.jsxs(se,{children:[e.jsx(_e,{children:e.jsx(Te,{children:"Appointment Status"})}),e.jsx(oe,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm",children:"Confirmed"}),e.jsx(ze,{variant:"default",children:A})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm",children:"Pending"}),e.jsx(ze,{variant:"secondary",children:Q})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm",children:"Cancelled"}),e.jsx(ze,{variant:"destructive",children:U})]})]})})]}),e.jsxs(se,{children:[e.jsx(_e,{children:e.jsx(Te,{children:"Popular Services"})}),e.jsx(oe,{children:e.jsx("div",{className:"space-y-3",children:ee.length>0?ee.map((Me,ht)=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm",children:Me.service}),e.jsxs("span",{className:"text-sm font-medium",children:[Me.percentage,"%"]})]},ht)):e.jsx("p",{className:"text-sm text-muted-foreground",children:"No service data available"})})})]}),e.jsxs(se,{children:[e.jsx(_e,{children:e.jsx(Te,{children:"Staff Availability"})}),e.jsx(oe,{children:e.jsx("div",{className:"space-y-3",children:ge.length>0?ge.slice(0,3).map(Me=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm",children:Me.name}),e.jsx(ze,{variant:Me.status==="active"?"default":"secondary",children:Me.status==="active"?"Available":Me.status||"Unknown"})]},Me._id)):e.jsx("p",{className:"text-sm text-muted-foreground",children:"No team members found"})})})]})]})]})},Nv=[{name:"Professional Haircut & Styling",description:"Expert haircut and styling service tailored to your preferences. Includes wash, cut, and blow-dry.",price:1500,duration:"45 min",category:"Hair & Beauty"},{name:"Full Body Massage",description:"Relaxing full body massage to relieve stress and tension. Perfect for unwinding after a long day.",price:3500,duration:"90 min",category:"Wellness & Spa"},{name:"Manicure & Pedicure",description:"Complete nail care service including filing, buffing, cuticle care, and polish application.",price:2e3,duration:"60 min",category:"Hair & Beauty"},{name:"Personal Training Session",description:"One-on-one fitness training with certified personal trainer. Customized workout plan included.",price:2500,duration:"60 min",category:"Fitness & Health"},{name:"Deep Tissue Massage",description:"Therapeutic massage targeting deep muscle layers to relieve chronic pain and muscle tension.",price:4e3,duration:"75 min",category:"Wellness & Spa"},{name:"Facial Treatment",description:"Rejuvenating facial treatment with deep cleansing, exfoliation, and hydration for glowing skin.",price:3e3,duration:"60 min",category:"Hair & Beauty"},{name:"Yoga Class",description:"Group or private yoga session for flexibility, strength, and mindfulness. All levels welcome.",price:1200,duration:"60 min",category:"Fitness & Health"},{name:"Hair Coloring Service",description:"Professional hair coloring with premium products. Includes consultation, application, and styling.",price:4500,duration:"120 min",category:"Hair & Beauty"},{name:"Nutritional Consultation",description:"Personalized nutrition plan and dietary guidance from certified nutritionist.",price:2800,duration:"45 min",category:"Fitness & Health"},{name:"Hot Stone Massage",description:"Luxurious massage using heated stones to melt away tension and promote deep relaxation.",price:4500,duration:"90 min",category:"Wellness & Spa"},{name:"Makeup Application",description:"Professional makeup for events, photoshoots, or special occasions. Includes consultation.",price:3500,duration:"60 min",category:"Hair & Beauty"},{name:"Aromatherapy Session",description:"Therapeutic treatment using essential oils to enhance physical and emotional well-being.",price:3200,duration:"60 min",category:"Wellness & Spa"},{name:"Group Fitness Class",description:"High-energy group workout including cardio, strength training, and flexibility exercises.",price:800,duration:"45 min",category:"Fitness & Health"},{name:"Reflexology Treatment",description:"Foot reflexology targeting pressure points to promote healing and relaxation throughout the body.",price:2500,duration:"60 min",category:"Wellness & Spa"},{name:"Bridal Hair & Makeup",description:"Complete bridal beauty package including hair styling, makeup, and trial session.",price:8500,duration:"150 min",category:"Hair & Beauty"}],m9=()=>{const[t,s]=N.useState([]),[a,n]=N.useState(!0),[i,c]=N.useState(!1),[d,h]=N.useState(!1),[f,g]=N.useState(null),[p,v]=N.useState(!1),[y,_]=N.useState({name:"",description:"",price:"",duration:"",category:""});N.useEffect(()=>{S()},[]);const S=async()=>{n(!0);try{const A=localStorage.getItem("token"),Q=(await ke.get("/services",{headers:{Authorization:`Bearer ${A}`}})).data,q=Array.isArray(Q)?Q:Q?.services||[];s(q),console.log(` Loaded ${q.length} services`)}catch(A){console.error("Error fetching services:",A),R.error("Failed to load services"),s([])}finally{n(!1)}},b=async()=>{if(!y.name||!y.price){R.error("Please fill in required fields");return}try{const A=localStorage.getItem("token");await ke.post("/services",y,{headers:{Authorization:`Bearer ${A}`}}),R.success("Service added successfully!"),c(!1),_({name:"",description:"",price:"",duration:"",category:""}),S()}catch(A){console.error("Error adding service:",A),R.error("Failed to add service")}},T=async A=>{if(confirm("Are you sure you want to delete this service?"))try{const O=localStorage.getItem("token");await ke.delete(`/services/${A}`,{headers:{Authorization:`Bearer ${O}`}}),R.success("Service deleted successfully!"),S()}catch(O){console.error("Error deleting service:",O),R.error("Failed to delete service")}},E=async()=>{v(!0);try{const A=localStorage.getItem("token");let O=0,Q=0;for(const q of Nv)try{await ke.post("/services",q,{headers:{Authorization:`Bearer ${A}`}}),O++}catch(U){if(console.error(`Error adding service ${q.name}:`,U),console.error("Error details:",U.response?.data),Q++,Q===1){const D=U.response?.data?.message||U.message;console.error("First error message:",D)}}if(O>0&&(R.success(`Successfully added ${O} of ${Nv.length} sample services!`),S()),Q>0){const q=Q===Nv.length?"All services failed to add. Please check your permissions.":`${Q} services failed to add`;R.warning(q)}O===0&&Q===0&&R.info("No services were added")}catch(A){console.error("Error loading sample services:",A);const O=A.response?.status===403?"Permission denied. Please ensure you're logged in with proper access.":A.response?.data?.message||"Failed to load sample services";R.error(O)}finally{v(!1)}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Services"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage your service offerings"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(I,{onClick:S,variant:"outline",disabled:a,children:[e.jsx(Cs,{className:`h-4 w-4 mr-2 ${a?"animate-spin":""}`}),"Refresh"]}),e.jsxs(I,{onClick:E,variant:"secondary",disabled:p,children:[e.jsx(Yo,{className:`h-4 w-4 mr-2 ${p?"animate-spin":""}`}),p?"Loading...":"Load Sample Services"]}),e.jsxs(Gt,{open:i,onOpenChange:c,children:[e.jsx(Za,{asChild:!0,children:e.jsxs(I,{children:[e.jsx(ha,{className:"h-4 w-4 mr-2"}),"Add Service"]})}),e.jsxs(qt,{children:[e.jsxs(Kt,{children:[e.jsx(Yt,{children:"Add New Service"}),e.jsx(vs,{children:"Create a new service offering"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(ue,{children:"Service Name *"}),e.jsx(we,{value:y.name,onChange:A=>_({...y,name:A.target.value}),placeholder:"e.g., Haircut & Styling"})]}),e.jsxs("div",{children:[e.jsx(ue,{children:"Description"}),e.jsx(Gs,{value:y.description,onChange:A=>_({...y,description:A.target.value}),placeholder:"Describe your service"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(ue,{children:"Price (KES) *"}),e.jsx(we,{type:"number",value:y.price,onChange:A=>_({...y,price:A.target.value}),placeholder:"1500"})]}),e.jsxs("div",{children:[e.jsx(ue,{children:"Duration"}),e.jsx(we,{value:y.duration,onChange:A=>_({...y,duration:A.target.value}),placeholder:"60 min"})]})]}),e.jsxs("div",{children:[e.jsx(ue,{children:"Category"}),e.jsxs(Xt,{value:y.category,onValueChange:A=>_({...y,category:A}),children:[e.jsx(Jt,{children:e.jsx(Qt,{placeholder:"Select category"})}),e.jsxs(es,{children:[e.jsx(Ie,{value:"Hair & Beauty",children:"Hair & Beauty"}),e.jsx(Ie,{value:"Wellness & Spa",children:"Wellness & Spa"}),e.jsx(Ie,{value:"Fitness & Health",children:"Fitness & Health"}),e.jsx(Ie,{value:"Professional Services",children:"Professional Services"}),e.jsx(Ie,{value:"Other",children:"Other"})]})]})]})]}),e.jsxs(ea,{children:[e.jsx(I,{variant:"outline",onClick:()=>c(!1),children:"Cancel"}),e.jsx(I,{onClick:b,children:"Add Service"})]})]})]})]})]}),e.jsx("div",{className:"grid gap-6 md:grid-cols-4",children:e.jsx(se,{children:e.jsx(oe,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Total Services"}),e.jsx("p",{className:"text-2xl font-bold",children:t.length})]}),e.jsx(ec,{className:"h-8 w-8 text-blue-600"})]})})})}),e.jsxs(se,{children:[e.jsxs(_e,{children:[e.jsx(Te,{children:"All Services"}),e.jsx(vt,{children:"Manage and track all your service offerings"})]}),e.jsx(oe,{children:a?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Cs,{className:"h-12 w-12 animate-spin text-primary mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"Loading services..."})]}):t.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Ws,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No Services Yet"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"Add your first service or load sample services"}),e.jsxs("div",{className:"flex gap-2 justify-center",children:[e.jsxs(I,{onClick:E,disabled:p,children:[e.jsx(Yo,{className:"h-4 w-4 mr-2"}),"Load 15 Sample Services"]}),e.jsxs(I,{onClick:()=>c(!0),variant:"outline",children:[e.jsx(ha,{className:"h-4 w-4 mr-2"}),"Add Manually"]})]})]}):e.jsxs(Gi,{children:[e.jsx(qi,{children:e.jsxs(Fa,{children:[e.jsx(Bt,{children:"Service Name"}),e.jsx(Bt,{children:"Category"}),e.jsx(Bt,{children:"Duration"}),e.jsx(Bt,{children:"Price"}),e.jsx(Bt,{children:"Actions"})]})}),e.jsx(Ki,{children:t.map(A=>e.jsxs(Fa,{children:[e.jsx(It,{children:e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:A.name}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[A.description?.substring(0,50),"..."]})]})}),e.jsx(It,{children:e.jsx(ze,{variant:"outline",children:A.category||"Uncategorized"})}),e.jsx(It,{children:A.duration||"N/A"}),e.jsxs(It,{className:"font-semibold",children:["KES ",A.price?.toLocaleString()]}),e.jsx(It,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(I,{variant:"ghost",size:"sm",children:e.jsx(sl,{className:"h-4 w-4"})}),e.jsx(I,{variant:"ghost",size:"sm",onClick:()=>T(A._id||A.id),children:e.jsx(Ua,{className:"h-4 w-4 text-red-500"})})]})})]},A._id||A.id))})]})})]})]})};var tg="Switch",[f9]=Pp(tg),[x9,p9]=f9(tg),rk=N.forwardRef((t,s)=>{const{__scopeSwitch:a,name:n,checked:i,defaultChecked:c,required:d,disabled:h,value:f="on",onCheckedChange:g,form:p,...v}=t,[y,_]=N.useState(null),S=Sn(s,O=>_(O)),b=N.useRef(!1),T=y?p||!!y.closest("form"):!0,[E,A]=_m({prop:i,defaultProp:c??!1,onChange:g,caller:tg});return e.jsxs(x9,{scope:a,checked:E,disabled:h,children:[e.jsx(Ma.button,{type:"button",role:"switch","aria-checked":E,"aria-required":d,"data-state":ck(E),"data-disabled":h?"":void 0,disabled:h,value:f,...v,ref:S,onClick:ua(t.onClick,O=>{A(Q=>!Q),T&&(b.current=O.isPropagationStopped(),b.current||O.stopPropagation())})}),T&&e.jsx(lk,{control:y,bubbles:!b.current,name:n,value:f,checked:E,required:d,disabled:h,form:p,style:{transform:"translateX(-100%)"}})]})});rk.displayName=tg;var ik="SwitchThumb",ok=N.forwardRef((t,s)=>{const{__scopeSwitch:a,...n}=t,i=p9(ik,a);return e.jsx(Ma.span,{"data-state":ck(i.checked),"data-disabled":i.disabled?"":void 0,...n,ref:s})});ok.displayName=ik;var g9="SwitchBubbleInput",lk=N.forwardRef(({__scopeSwitch:t,control:s,checked:a,bubbles:n=!0,...i},c)=>{const d=N.useRef(null),h=Sn(d,c),f=xj(a),g=D_(s);return N.useEffect(()=>{const p=d.current;if(!p)return;const v=window.HTMLInputElement.prototype,_=Object.getOwnPropertyDescriptor(v,"checked").set;if(f!==a&&_){const S=new Event("click",{bubbles:n});_.call(p,a),p.dispatchEvent(S)}},[f,a,n]),e.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:a,...i,tabIndex:-1,ref:h,style:{...i.style,...g,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});lk.displayName=g9;function ck(t){return t?"checked":"unchecked"}var v9=rk,y9=ok;function _s({className:t,...s}){return e.jsx(v9,{"data-slot":"switch",className:ut("peer data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:border-ring focus-visible:ring-ring/50 dark:data-[state=unchecked]:bg-input/80 inline-flex h-[1.15rem] w-8 shrink-0 items-center rounded-full border border-transparent shadow-xs transition-all outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",t),...s,children:e.jsx(y9,{"data-slot":"switch-thumb",className:ut("bg-background dark:data-[state=unchecked]:bg-foreground dark:data-[state=checked]:bg-primary-foreground pointer-events-none block size-4 rounded-full ring-0 transition-transform data-[state=checked]:translate-x-[calc(100%-2px)] data-[state=unchecked]:translate-x-0")})})}const j9=()=>{const[t,s]=N.useState(""),[a,n]=N.useState("all"),[i,c]=N.useState(!1),[d,h]=N.useState(!1),[f,g]=N.useState(!1),[p,v]=N.useState(null),{user:y,isAuthenticated:_,loading:S}=qs(),b=Z=>({_id:Z._id||Z.id,name:Z.name??Z.fullName??"",email:Z.email??Z.contactEmail??"",phone:Z.phone??Z.phoneNumber??"",role:Z.role??"",salary:Z.salary??0,status:Z.status??"Active",notifications:{sms:Z.notifications?.sms??Z.notifyBySMS??!1,email:Z.notifications?.email??Z.notifyByEmail??!1},joinDate:Z.joinDate??Z.createdAt??null}),[T,E]=N.useState([]),[A,O]=N.useState([]),[Q,q]=N.useState({name:"",email:"",phone:"",role:"",salary:"",profilePhoto:"",notifications:{sms:!1,email:!1}}),[U,D]=N.useState({employeeId:"",amount:"",phone:"",message:"",smsReceipt:!1});N.useEffect(()=>{(async()=>{if(_)try{const ee=localStorage.getItem("token"),[te,X]=await Promise.all([ke.get("/team",{headers:{Authorization:`Bearer ${ee}`}}),ke.get("/expenses",{headers:{Authorization:`Bearer ${ee}`}})]);E((te.data||[]).map(b)),O(X.data||[])}catch(ee){R.error("Failed to fetch data"),console.error(ee)}})()},[_]);const M=async()=>{const Z=localStorage.getItem("token");if(!Z)return R.error("Please log in first.");const{name:ee,email:te,phone:X,role:ce,salary:F,notifications:re}=Q;if(!ee||!te||!ce)return R.error("Name, email and role are required.");if(T.find(me=>me.contactEmail?.toLowerCase()===te.toLowerCase()))return R.error("An employee with this email already exists.");if(X&&T.find(me=>me.phoneNumber===X))return R.error("An employee with this phone number already exists.");try{const me=await ke.post("/team",{fullName:ee,contactEmail:te,phoneNumber:X,role:ce,salary:Number(F)||0,profilePhoto:Q.profilePhoto||`https://ui-avatars.com/api/?name=${encodeURIComponent(ee)}&background=10b981&color=fff`,notifyBySMS:re.sms,notifyByEmail:re.email},{headers:{Authorization:`Bearer ${Z}`}});E(De=>[...De,me.data]),c(!1),q({name:"",email:"",phone:"",role:"",salary:"",profilePhoto:"",notifications:{sms:!1,email:!1}}),R.success("Employee added successfully!")}catch(me){R.error(me.response?.data?.message||"Error adding employee."),console.error(me)}},P=Z=>{v({...Z,salary:String(Z.salary??"")}),g(!0)},G=(Z,ee)=>{v(te=>({...te,[Z]:ee}))},K=async()=>{const Z=localStorage.getItem("token");if(!(!Z||!p?._id))try{const ee=await ke.put(`/team/${p._id}`,{fullName:p.name,contactEmail:p.email,phoneNumber:p.phone,role:p.role,salary:Number(p.salary)||0,notifyBySMS:p.notifications?.sms,notifyByEmail:p.notifications?.email},{headers:{Authorization:`Bearer ${Z}`}});E(te=>te.map(X=>X._id===ee.data._id?ee.data:X)),g(!1),v(null),R.success("Employee updated!")}catch(ee){R.error(ee.response?.data?.message||"Error updating employee."),console.error(ee)}},z=async Z=>{const ee=localStorage.getItem("token");if(!ee)return R.error("Please log in first.");try{await ke.delete(`/team/${Z}`,{headers:{Authorization:`Bearer ${ee}`}}),E(te=>te.filter(X=>(X._id||X.id)!==Z)),R.success("Employee deleted.")}catch(te){R.error(te.response?.data?.message||"Error deleting employee."),console.error(te)}},J=async()=>{const Z=localStorage.getItem("token");if(!Z){R.error("Please log in first.");return}if(!U.employeeId||!U.amount||!U.phone){R.error("Please fill in all required fields.");return}const ee=Number(U.amount);if(isNaN(ee)||ee<1){R.error("Amount must be a positive number (at least 1 KSh).");return}try{const te=T.find(ce=>ce._id===U.employeeId),X=await ke.post("/mpesa/stkpush",{phone:U.phone,amount:ee,accountReference:"Payroll Payment",transactionDesc:`Payroll payment for ${te?.name||"Employee"} - ${U.message||""}`},{headers:{Authorization:`Bearer ${Z}`}});if(X.status===200&&X.data?.data?.checkoutRequestID){const ce=X.data.data.checkoutRequestID;await ke.post("/expenses",{employeeId:U.employeeId,amount:ee,phone:U.phone,message:U.message,smsReceipt:U.smsReceipt,paymentMethod:"M-Pesa",transactionId:ce,category:"Payroll",description:`Payroll payment via M-Pesa for ${te?.name||"Employee"}`},{headers:{Authorization:`Bearer ${Z}`}}),h(!1),D({employeeId:"",amount:"",phone:"",message:"",smsReceipt:!1});const F=await ke.get("/expenses",{headers:{Authorization:`Bearer ${Z}`}});O(F.data||[]),R.success("M-Pesa STK Push initiated successfully! Employee will receive payment prompt on their phone.")}else throw new Error(X.data?.error||X.data?.message||"M-Pesa STK Push failed")}catch(te){console.error("Payroll payment error:",te),R.error(te.response?.data?.error||te.response?.data?.message||"Error sending payroll payment. Please try again.")}},W=Z=>{switch(Z){case"Active":return e.jsx(ze,{variant:"default",children:"Active"});case"On Leave":return e.jsx(ze,{variant:"secondary",children:"On Leave"});case"Inactive":return e.jsx(ze,{variant:"destructive",children:"Inactive"});default:return e.jsx(ze,{variant:"outline",children:Z})}},he=Z=>{switch(Z){case"Completed":return e.jsx(ze,{variant:"default",children:"Completed"});case"Pending":return e.jsx(ze,{variant:"secondary",children:"Pending"});case"Failed":return e.jsx(ze,{variant:"destructive",children:"Failed"});default:return e.jsx(ze,{variant:"outline",children:Z})}},V=T.filter(Z=>{const ee=Z.name?.toLowerCase().includes(t.toLowerCase())||Z.email?.toLowerCase().includes(t.toLowerCase()),te=a==="all"||Z.role===a;return ee&&te}),ae=T.reduce((Z,ee)=>Z+(ee.salary||0),0),ge=T.filter(Z=>Z.status==="Active").length;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Team Management"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage employees, payroll, and notifications"})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs(Gt,{open:d,onOpenChange:h,children:[e.jsx(Za,{asChild:!0,children:e.jsxs(I,{variant:"outline",children:[e.jsx(Ba,{className:"mr-2 h-4 w-4"}),"M-Pesa Payroll"]})}),e.jsxs(qt,{className:"max-w-2xl",children:[e.jsxs(Kt,{children:[e.jsx(Yt,{children:"M-Pesa Payroll Management"}),e.jsx(vs,{children:"Send salaries directly to employee phone numbers via M-Pesa"})]}),e.jsxs(Ha,{defaultValue:"pay-salary",className:"w-full",children:[e.jsxs(Xa,{className:"grid w-full grid-cols-2",children:[e.jsx(Tt,{value:"pay-salary",children:"Pay Salary"}),e.jsx(Tt,{value:"payment-history",children:"Payment History"})]}),e.jsxs(kt,{value:"pay-salary",className:"space-y-4",children:[e.jsxs("div",{className:"grid gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(ue,{htmlFor:"employee-select",children:"Select Employee"}),e.jsxs(Xt,{value:U.employeeId,onValueChange:Z=>D(ee=>({...ee,employeeId:Z})),children:[e.jsx(Jt,{children:e.jsx(Qt,{placeholder:"Choose employee"})}),e.jsx(es,{children:T.map(Z=>e.jsxs(Ie,{value:Z._id||Z.id,children:[Z.name," - KSh ",Z.salary?.toLocaleString()]},Z._id||Z.id))})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(ue,{htmlFor:"amount",children:"Amount (KSh)"}),e.jsx(we,{id:"amount",placeholder:"45,000",value:U.amount,onChange:Z=>D(ee=>({...ee,amount:Z.target.value})),type:"number",min:"1"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(ue,{htmlFor:"phone",children:"Phone Number"}),e.jsx(we,{id:"phone",placeholder:"+254701234567",value:U.phone,onChange:Z=>D(ee=>({...ee,phone:Z.target.value}))})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(ue,{htmlFor:"message",children:"Payment Message (Optional)"}),e.jsx(Gs,{id:"message",placeholder:"Salary payment for January 2024",className:"resize-none",value:U.message,onChange:Z=>D(ee=>({...ee,message:Z.target.value}))})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_s,{id:"sms-receipt",checked:U.smsReceipt,onCheckedChange:Z=>D(ee=>({...ee,smsReceipt:Z}))}),e.jsx(ue,{htmlFor:"sms-receipt",children:"Send SMS receipt"})]})]}),e.jsxs(ea,{children:[e.jsx(I,{variant:"outline",className:"text-red-500 cursor-pointer hover:text-red-500",onClick:()=>h(!1),children:"Cancel"}),e.jsxs(I,{className:"bg-green-500 cursor-pointer hover:bg-green-400",onClick:J,children:[e.jsx(mn,{className:"mr-2 h-4 w-4"}),"Send Payment"]})]})]}),e.jsx(kt,{value:"payment-history",children:e.jsx("div",{className:"space-y-4",children:e.jsxs(Gi,{children:[e.jsx(qi,{children:e.jsxs(Fa,{children:[e.jsx(Bt,{children:"Employee"}),e.jsx(Bt,{children:"Amount"}),e.jsx(Bt,{children:"Date"}),e.jsx(Bt,{children:"Status"}),e.jsx(Bt,{children:"Transaction ID"})]})}),e.jsx(Ki,{children:A.map(Z=>e.jsxs(Fa,{children:[e.jsx(It,{children:Z.employeeName}),e.jsxs(It,{children:["KSh ",Z.amount?.toLocaleString()]}),e.jsx(It,{children:Z.date?new Date(Z.date).toLocaleDateString():""}),e.jsx(It,{children:he(Z.status)}),e.jsx(It,{className:"font-mono text-xs",children:Z.transactionId})]},Z._id||Z.id))})]})})})]})]})]}),e.jsxs(Gt,{open:i,onOpenChange:c,children:[e.jsx(Za,{asChild:!0,children:e.jsxs(I,{className:"bg-green-500 cursor-pointer hover:bg-green-400",children:[e.jsx(ha,{className:"mr-2 h-4 w-4"}),"Add Employee"]})}),e.jsxs(qt,{children:[e.jsxs(Kt,{children:[e.jsx(Yt,{children:"Add New Employee"}),e.jsx(vs,{children:"Register a new team member to your business"})]}),e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(ue,{htmlFor:"name",children:"Full Name"}),e.jsx(we,{id:"name",placeholder:"Enter full name",value:Q.name,onChange:Z=>q(ee=>({...ee,name:Z.target.value}))})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(ue,{htmlFor:"email",children:"Email Address"}),e.jsx(we,{id:"email",type:"email",placeholder:"employee@example.com",value:Q.email,onChange:Z=>q(ee=>({...ee,email:Z.target.value}))})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(ue,{htmlFor:"phone",children:"Phone Number"}),e.jsx(we,{id:"phone",placeholder:"+254701234567",value:Q.phone,onChange:Z=>q(ee=>({...ee,phone:Z.target.value}))})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(ue,{htmlFor:"profilePhoto",children:"Profile Photo URL (Optional)"}),e.jsx(we,{id:"profilePhoto",placeholder:"https://example.com/photo.jpg",value:Q.profilePhoto,onChange:Z=>q(ee=>({...ee,profilePhoto:Z.target.value}))}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Leave empty to auto-generate an avatar based on the name"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(ue,{htmlFor:"role",children:"Role"}),e.jsxs(Xt,{value:Q.role,onValueChange:Z=>q(ee=>({...ee,role:Z})),children:[e.jsx(Jt,{children:e.jsx(Qt,{placeholder:"Select role"})}),e.jsxs(es,{children:[e.jsx(Ie,{value:"Manager",children:"Manager"}),e.jsx(Ie,{value:"Stylist",children:"Stylist"}),e.jsx(Ie,{value:"Receptionist",children:"Receptionist"}),e.jsx(Ie,{value:"Staff",children:"Staff"})]})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(ue,{htmlFor:"salary",children:"Monthly Salary (KSh)"}),e.jsx(we,{id:"salary",placeholder:"35,000",value:Q.salary,onChange:Z=>q(ee=>({...ee,salary:Z.target.value}))})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(ue,{children:"Notification Preferences"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(wo,{className:"h-4 w-4"}),e.jsx(ue,{htmlFor:"sms-notifications",children:"SMS Notifications"})]}),e.jsx(_s,{id:"sms-notifications",checked:Q.notifications.sms,onCheckedChange:Z=>q(ee=>({...ee,notifications:{...ee.notifications,sms:Z}}))})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(fa,{className:"h-4 w-4"}),e.jsx(ue,{htmlFor:"email-notifications",children:"Email Notifications"})]}),e.jsx(_s,{id:"email-notifications",checked:Q.notifications.email,onCheckedChange:Z=>q(ee=>({...ee,notifications:{...ee.notifications,email:Z}}))})]})]})]}),e.jsxs(ea,{children:[e.jsx(I,{variant:"outline",className:"text-red-500 cursor-pointer hover:text-red-400",onClick:()=>c(!1),children:"Cancel"}),e.jsx(I,{className:"bg-green-500 cursor-pointer hover:bg-green-400",onClick:M,children:"Add Employee"})]})]})]})]})]}),e.jsxs("div",{className:"grid gap-6 md:grid-cols-4",children:[e.jsxs(se,{children:[e.jsxs(_e,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(Te,{className:"text-sm font-medium",children:"Total Employees"}),e.jsx(fs,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(oe,{children:[e.jsx("div",{className:"text-2xl font-bold",children:T.length}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[ge," active"]})]})]}),e.jsxs(se,{children:[e.jsxs(_e,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(Te,{className:"text-sm font-medium",children:"Monthly Payroll"}),e.jsx(Sa,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(oe,{children:[e.jsxs("div",{className:"text-2xl font-bold",children:["KSh ",ae.toLocaleString()]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Total monthly budget"})]})]}),e.jsxs(se,{children:[e.jsxs(_e,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(Te,{className:"text-sm font-medium",children:"Last Payment"}),e.jsx(Ba,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(oe,{children:[e.jsx("div",{className:"text-2xl font-bold",children:A[0]?.date?new Date(A[0].date).toLocaleDateString("en-US",{month:"short",day:"numeric"}):"--"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Next due: Feb 1"})]})]}),e.jsxs(se,{children:[e.jsxs(_e,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(Te,{className:"text-sm font-medium",children:"Notifications Sent"}),e.jsx(ur,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(oe,{children:[e.jsx("div",{className:"text-2xl font-bold",children:"47"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"This month"})]})]})]}),e.jsxs(se,{children:[e.jsxs(_e,{children:[e.jsx(Te,{children:"Employee Directory"}),e.jsx(vt,{children:"Manage your team members and their details"})]}),e.jsxs(oe,{children:[e.jsxs("div",{className:"flex items-center space-x-4 mb-6",children:[e.jsxs("div",{className:"relative flex-1 max-w-sm",children:[e.jsx(Da,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(we,{placeholder:"Search employees...",value:t,onChange:Z=>s(Z.target.value),className:"pl-10"})]}),e.jsxs(Xt,{value:a,onValueChange:n,children:[e.jsx(Jt,{className:"w-[180px]",children:e.jsx(Qt,{placeholder:"Filter by role"})}),e.jsxs(es,{children:[e.jsx(Ie,{value:"all",children:"All Roles"}),e.jsx(Ie,{value:"Manager",children:"Manager"}),e.jsx(Ie,{value:"Stylist",children:"Stylist"}),e.jsx(Ie,{value:"Receptionist",children:"Receptionist"}),e.jsx(Ie,{value:"Staff",children:"Staff"})]})]})]}),e.jsxs(Gi,{children:[e.jsx(qi,{children:e.jsxs(Fa,{children:[e.jsx(Bt,{children:"Employee"}),e.jsx(Bt,{children:"Contact"}),e.jsx(Bt,{children:"Role"}),e.jsx(Bt,{children:"Salary"}),e.jsx(Bt,{children:"Status"}),e.jsx(Bt,{children:"Notifications"}),e.jsx(Bt,{children:"Actions"})]})}),e.jsx(Ki,{children:V.map(Z=>e.jsxs(Fa,{children:[e.jsx(It,{children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:Z.name}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Joined"," ",Z.joinDate?new Date(Z.joinDate).toLocaleDateString():""]})]})}),e.jsx(It,{children:e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center text-sm",children:[e.jsx(fa,{className:"mr-1 h-3 w-3"}),Z.email]}),e.jsxs("div",{className:"flex items-center text-sm",children:[e.jsx(ia,{className:"mr-1 h-3 w-3"}),Z.phone]})]})}),e.jsx(It,{children:Z.role}),e.jsxs(It,{children:["KSh ",Z.salary?.toLocaleString()]}),e.jsx(It,{children:W(Z.status)}),e.jsx(It,{children:e.jsxs("div",{className:"flex space-x-1",children:[Z.notifications?.sms&&e.jsx(ze,{variant:"outline",className:"text-xs",children:"SMS"}),Z.notifications?.email&&e.jsx(ze,{variant:"outline",className:"text-xs",children:"Email"})]})}),e.jsx(It,{children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(I,{variant:"outline",size:"sm",onClick:()=>P(Z),children:e.jsx(sl,{className:"h-3 w-3"})}),e.jsx(I,{variant:"outline",size:"sm",onClick:()=>z(Z._id||Z.id),children:e.jsx(Ua,{className:"h-3 w-3"})})]})})]},Z._id||Z.id))})]})]})]}),f&&p&&e.jsx(Gt,{open:f,onOpenChange:g,children:e.jsxs(qt,{children:[e.jsxs(Kt,{children:[e.jsx(Yt,{children:"Edit Employee"}),e.jsx(vs,{children:"Update employee details"})]}),e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsx(ue,{children:"Name"}),e.jsx(we,{value:p.name,onChange:Z=>G("name",Z.target.value)}),e.jsx(ue,{children:"Email"}),e.jsx(we,{type:"email",value:p.email,onChange:Z=>G("email",Z.target.value)}),e.jsx(ue,{children:"Phone"}),e.jsx(we,{value:p.phone,onChange:Z=>G("phone",Z.target.value)}),e.jsx(ue,{children:"Role"}),e.jsx(we,{value:p.role,onChange:Z=>G("role",Z.target.value)}),e.jsx(ue,{children:"Salary"}),e.jsx(we,{type:"number",value:p.salary,onChange:Z=>G("salary",Z.target.value)})]}),e.jsxs(ea,{children:[e.jsx(I,{variant:"outline",onClick:()=>g(!1),children:"Cancel"}),e.jsx(I,{className:"bg-green-500 hover:bg-green-400",onClick:K,children:"Save"})]})]})})]})},Ns=({data:t=null,type:s="line",title:a="Analytics Chart",description:n="",height:i=300,showControls:c=!0,autoRefresh:d=!1,refreshInterval:h=3e4,className:f="",onDataUpdate:g=null})=>{const[p,v]=N.useState(s),[y,_]=N.useState("7d"),[S,b]=N.useState(t),[T,E]=N.useState(!1),[A,O]=N.useState(new Date),Q={primary:["#10b981","#059669","#047857","#065f46"],profit:["#22c55e","#16a34a","#15803d","#166534"],loss:["#ef4444","#dc2626","#b91c1c","#991b1b"],rainbow:["#10b981","#3b82f6","#8b5cf6","#f59e0b","#ef4444","#06b6d4"]},q=(J,W)=>{const he=W==="7d"?7:W==="30d"?30:W==="90d"?90:365,V=[];for(let ae=0;ae<he;ae++){const ge=new Date;ge.setDate(ge.getDate()-(he-ae-1));const Z=1e3+Math.random()*500,ee=J==="profit"?ae*10:J==="loss"?-ae*5:Math.sin(ae/5)*100;V.push({date:ge.toISOString().split("T")[0],name:ge.toLocaleDateString("en-US",{month:"short",day:"numeric"}),value:Math.max(0,Z+ee+(Math.random()-.5)*200),profit:Math.max(0,Z*.3+ee*.5+(Math.random()-.5)*100),loss:Math.max(0,Z*.1-ee*.3+(Math.random()-.5)*50),revenue:Z+ee+(Math.random()-.5)*300,orders:Math.floor(20+Math.random()*50+ae*2),customers:Math.floor(10+Math.random()*30+ae),products:Math.floor(5+Math.random()*15),growth:((Math.random()-.5)*20).toFixed(1)})}return V};N.useEffect(()=>{if(d){const J=setInterval(()=>{U()},h);return()=>clearInterval(J)}},[d,h,y]),N.useEffect(()=>{b(t||q(s,y))},[t,s,y]);const U=async()=>{E(!0);try{await new Promise(W=>setTimeout(W,1e3));const J=t||q(s,y);b(J),O(new Date),g&&g(J),R.success("Chart data updated successfully")}catch{R.error("Failed to update chart data")}finally{E(!1)}},D=()=>{R.info("Exporting chart data...");const J=S.map(ae=>Object.entries(ae).map(([ge,Z])=>`${ge}: ${Z}`).join(", ")).join(`
`),W=new Blob([J],{type:"text/csv"}),he=URL.createObjectURL(W),V=document.createElement("a");V.href=he,V.download=`${a.replace(/\s+/g,"_")}_${new Date().toISOString().split("T")[0]}.csv`,V.click(),URL.revokeObjectURL(he)},P=a.toLowerCase().includes("profit")||a.toLowerCase().includes("revenue")?Q.profit:a.toLowerCase().includes("loss")||a.toLowerCase().includes("expense")?Q.loss:Q.primary,G=()=>{if(!S||S.length===0)return e.jsx("div",{className:"flex items-center justify-center h-64 text-muted-foreground",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Mn,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"No data available"})]})});const J={data:S,margin:{top:5,right:30,left:20,bottom:5}};switch(p){case"line":return e.jsxs(XD,{...J,children:[e.jsx(Tx,{strokeDasharray:"3 3",stroke:"#f0f0f0"}),e.jsx(kx,{dataKey:"name",stroke:"#666"}),e.jsx(Ex,{stroke:"#666"}),e.jsx(Qh,{contentStyle:{backgroundColor:"#fff",border:"1px solid #e5e7eb",borderRadius:"8px",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1)"}}),e.jsx(Ax,{}),e.jsx(C1,{type:"monotone",dataKey:"value",stroke:P[0],strokeWidth:3,dot:{fill:P[0],strokeWidth:2,r:4},activeDot:{r:6,stroke:P[0],strokeWidth:2}})]});case"area":return e.jsxs(YD,{...J,children:[e.jsx(Tx,{strokeDasharray:"3 3",stroke:"#f0f0f0"}),e.jsx(kx,{dataKey:"name",stroke:"#666"}),e.jsx(Ex,{stroke:"#666"}),e.jsx(Qh,{contentStyle:{backgroundColor:"#fff",border:"1px solid #e5e7eb",borderRadius:"8px",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1)"}}),e.jsx(Ax,{}),e.jsx(ZD,{type:"monotone",dataKey:"value",stroke:P[0],fill:P[0],fillOpacity:.3,strokeWidth:2})]});case"bar":return e.jsxs(KD,{...J,children:[e.jsx(Tx,{strokeDasharray:"3 3",stroke:"#f0f0f0"}),e.jsx(kx,{dataKey:"name",stroke:"#666"}),e.jsx(Ex,{stroke:"#666"}),e.jsx(Qh,{contentStyle:{backgroundColor:"#fff",border:"1px solid #e5e7eb",borderRadius:"8px",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1)"}}),e.jsx(Ax,{}),e.jsx(_1,{dataKey:"value",fill:P[0],radius:[4,4,0,0]})]});case"pie":const W=S.slice(0,6).map((he,V)=>({name:he.name,value:he.value,fill:Q.rainbow[V%Q.rainbow.length]}));return e.jsxs(WD,{children:[e.jsx(GD,{data:W,cx:"50%",cy:"50%",labelLine:!1,label:({name:he,percent:V})=>`${he} ${(V*100).toFixed(0)}%`,outerRadius:80,fill:"#8884d8",dataKey:"value",children:W.map((he,V)=>e.jsx(qD,{fill:he.fill},`cell-${V}`))}),e.jsx(Qh,{})]});case"composed":return e.jsxs($D,{...J,children:[e.jsx(Tx,{strokeDasharray:"3 3",stroke:"#f0f0f0"}),e.jsx(kx,{dataKey:"name",stroke:"#666"}),e.jsx(Ex,{stroke:"#666"}),e.jsx(Qh,{contentStyle:{backgroundColor:"#fff",border:"1px solid #e5e7eb",borderRadius:"8px",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1)"}}),e.jsx(Ax,{}),e.jsx(_1,{dataKey:"profit",fill:Q.profit[0],radius:[2,2,0,0]}),e.jsx(C1,{type:"monotone",dataKey:"revenue",stroke:P[0],strokeWidth:3})]});default:return G()}},K=[{value:"line",label:"Line Chart",icon:rn},{value:"area",label:"Area Chart",icon:aa},{value:"bar",label:"Bar Chart",icon:Mn},{value:"pie",label:"Pie Chart",icon:O_},{value:"composed",label:"Combined",icon:Mn}],z=[{value:"7d",label:"7 Days"},{value:"30d",label:"30 Days"},{value:"90d",label:"90 Days"},{value:"1y",label:"1 Year"}];return e.jsxs(se,{className:f,children:[e.jsxs(_e,{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs(Te,{className:"flex items-center gap-2",children:[e.jsx(Mn,{className:"h-5 w-5 text-green-600"}),a]}),n&&e.jsx(vt,{children:n})]}),c&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(Xt,{value:p,onValueChange:v,children:[e.jsx(Jt,{className:"w-32",children:e.jsx(Qt,{})}),e.jsx(es,{children:K.map(J=>{const W=J.icon;return e.jsx(Ie,{value:J.value,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(W,{className:"h-4 w-4"}),J.label]})},J.value)})})]}),e.jsxs(Xt,{value:y,onValueChange:_,children:[e.jsx(Jt,{className:"w-24",children:e.jsx(Qt,{})}),e.jsx(es,{children:z.map(J=>e.jsx(Ie,{value:J.value,children:J.label},J.value))})]}),e.jsx(I,{variant:"outline",size:"sm",onClick:U,disabled:T,children:e.jsx(Cs,{className:`h-4 w-4 ${T?"animate-spin":""}`})}),e.jsx(I,{variant:"outline",size:"sm",onClick:D,children:e.jsx(hn,{className:"h-4 w-4"})})]})]}),A&&e.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[e.jsx(ps,{className:"h-3 w-3"}),"Last updated: ",A.toLocaleTimeString(),d&&e.jsx(ze,{variant:"secondary",className:"text-xs",children:"Auto-refresh"})]})]}),e.jsx(oe,{children:e.jsx(HD,{width:"100%",height:i,children:G()})})]})},N9=({amount:t,description:s,onSuccess:a,onError:n,disabled:i=!1})=>{const[c,d]=N.useState(!1),[h,f]=N.useState(""),[g,p]=N.useState(!1),[v,y]=N.useState(null),[_,S]=N.useState(""),b=D=>{const M=D.replace(/\D/g,"");return M.startsWith("254")?M:M.startsWith("0")?"254"+M.substring(1):M.length===9?"254"+M:M},T=D=>{const M=b(D);return M.length===12&&M.startsWith("254")},E=async()=>{if(!T(h)){R.error("Please enter a valid Kenyan phone number");return}p(!0),y("pending");try{const D=localStorage.getItem("token"),M=b(h),P=await ke.post("/payments/mpesa/initiate",{phoneNumber:M,amount:t,description:s||"Payment for ominbiz services"},{headers:{Authorization:`Bearer ${D}`}});if(P.data.success)S(P.data.transactionId),R.success("Payment request sent! Please check your phone for the M-Pesa prompt."),A(P.data.transactionId);else throw new Error(P.data.message||"Payment initiation failed")}catch(D){console.error("M-Pesa payment error:",D),y("failed");const M=D.response?.data?.message||D.message||"Payment failed";R.error(M),n&&n(D)}},A=async D=>{let P=0;const G=async()=>{try{const K=localStorage.getItem("token"),z=await ke.get(`/payments/mpesa/status/${D}`,{headers:{Authorization:`Bearer ${K}`}}),J=z.data.status;J==="completed"?(y("success"),p(!1),R.success("Payment completed successfully!"),a&&a(z.data),setTimeout(()=>d(!1),2e3)):J==="failed"||J==="cancelled"?(y("failed"),p(!1),R.error("Payment was cancelled or failed"),n&&n(new Error("Payment failed"))):P<30?(P++,setTimeout(G,1e4)):(y("failed"),p(!1),R.error("Payment timeout. Please try again."),n&&n(new Error("Payment timeout")))}catch(K){console.error("Error checking payment status:",K),P<30?(P++,setTimeout(G,1e4)):(y("failed"),p(!1),R.error("Unable to verify payment status"),n&&n(K))}};G()},O=()=>{y(null),p(!1),S(""),f("")},Q=()=>{g||(d(!1),O())},q=()=>{switch(v){case"pending":return e.jsx(ps,{className:"h-8 w-8 text-yellow-500"});case"success":return e.jsx(ks,{className:"h-8 w-8 text-green-500"});case"failed":return e.jsx(Ws,{className:"h-8 w-8 text-red-500"});default:return e.jsx(Lr,{className:"h-8 w-8 text-primary"})}},U=()=>{switch(v){case"pending":return"Waiting for payment confirmation...";case"success":return"Payment completed successfully!";case"failed":return"Payment failed. Please try again.";default:return"Enter your M-Pesa number to proceed"}};return e.jsxs(Gt,{open:c,onOpenChange:Q,children:[e.jsx(Za,{asChild:!0,children:e.jsxs(I,{onClick:()=>d(!0),disabled:i,className:"bg-green-600 hover:bg-green-700 text-white",children:[e.jsx(Lr,{className:"mr-2 h-4 w-4"}),"Pay with M-Pesa"]})}),e.jsxs(qt,{className:"sm:max-w-md",children:[e.jsxs(Kt,{children:[e.jsxs(Yt,{className:"flex items-center gap-2",children:[e.jsx(Lr,{className:"h-5 w-5 text-green-600"}),"M-Pesa Payment"]}),e.jsxs(vs,{children:["Pay KES ",t?.toLocaleString()," using M-Pesa"]})]}),e.jsx(se,{children:e.jsxs(oe,{className:"pt-6",children:[e.jsxs("div",{className:"text-center space-y-4",children:[q(),e.jsx("p",{className:"text-sm text-muted-foreground",children:U()})]}),!v&&e.jsxs("div",{className:"space-y-4 mt-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(ue,{htmlFor:"phone",children:"Phone Number"}),e.jsx(we,{id:"phone",type:"tel",placeholder:"0712345678 or 254712345678",value:h,onChange:D=>f(D.target.value),disabled:g}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Enter your Safaricom M-Pesa number"})]}),e.jsx(I,{onClick:E,disabled:!h||g,className:"w-full bg-green-600 hover:bg-green-700",children:g?e.jsxs(e.Fragment,{children:[e.jsx(Hi,{className:"mr-2 h-4 w-4 animate-spin"}),"Processing..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Lr,{className:"mr-2 h-4 w-4"}),"Send Payment Request"]})})]}),v==="pending"&&e.jsxs("div",{className:"mt-6 p-4 bg-yellow-50 dark:bg-yellow-900/20 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 text-yellow-800 dark:text-yellow-200",children:[e.jsx(Hi,{className:"h-4 w-4 animate-spin"}),e.jsx("span",{className:"text-sm font-medium",children:"Check your phone for M-Pesa prompt"})]}),e.jsxs("p",{className:"text-xs text-yellow-700 dark:text-yellow-300 mt-1",children:["Transaction ID: ",_]})]}),v==="failed"&&e.jsxs("div",{className:"mt-6 space-y-3",children:[e.jsx("div",{className:"p-4 bg-red-50 dark:bg-red-900/20 rounded-lg",children:e.jsx("p",{className:"text-sm text-red-800 dark:text-red-200",children:"Payment was not completed. Please try again."})}),e.jsx(I,{onClick:O,variant:"outline",className:"w-full",children:"Try Again"})]})]})})]})]})},w9=({amount:t,description:s,currency:a="USD",onSuccess:n,onError:i,disabled:c=!1})=>{const[d,h]=N.useState(!1),[f,g]=N.useState(!1),[p,v]=N.useState(null),[y,_]=N.useState(!1),[S,b]=N.useState(null);N.useEffect(()=>{if(typeof window<"u"&&!window.paypal){const U=document.createElement("script"),D="demo_client_id";U.src=`https://www.paypal.com/sdk/js?client-id=${D}&currency=${a}`,U.async=!0,U.onload=()=>{_(!0)},U.onerror=()=>{console.error("Failed to load PayPal SDK"),_(!1)},document.body.appendChild(U)}else window.paypal&&_(!0)},[a]),N.useEffect(()=>{d&&y&&window.paypal&&!S&&T()},[d,y,S]);const T=()=>{if(!window.paypal)return;const U=window.paypal.Buttons({createOrder:async(M,P)=>{try{g(!0);const G=localStorage.getItem("token"),K=await ke.post("/payments/paypal/create-order",{amount:t,currency:a,description:s||"Payment for ominbiz services"},{headers:{Authorization:`Bearer ${G}`}});if(K.data.success)return K.data.orderID;throw new Error(K.data.message||"Failed to create PayPal order")}catch(G){return console.error("Error creating PayPal order:",G),g(!1),R.error("Failed to create payment order"),i&&i(G),null}},onApprove:async(M,P)=>{try{const G=localStorage.getItem("token"),K=await ke.post("/payments/paypal/capture-order",{orderID:M.orderID},{headers:{Authorization:`Bearer ${G}`}});if(K.data.success)v("success"),g(!1),R.success("Payment completed successfully!"),n&&n(K.data),setTimeout(()=>h(!1),2e3);else throw new Error(K.data.message||"Payment capture failed")}catch(G){console.error("Error capturing PayPal payment:",G),v("failed"),g(!1),R.error("Payment failed to complete"),i&&i(G)}},onError:M=>{console.error("PayPal error:",M),v("failed"),g(!1),R.error("PayPal payment error occurred"),i&&i(M)},onCancel:M=>{console.log("PayPal payment cancelled:",M),g(!1),R.info("Payment was cancelled")},style:{layout:"vertical",color:"blue",shape:"rect",label:"paypal",height:40}}),D=document.getElementById("paypal-button-container");D&&D.children.length===0&&U.render("#paypal-button-container").then(()=>{b(U)}).catch(M=>{console.error("Error rendering PayPal buttons:",M),R.error("Failed to load PayPal payment options")})},E=()=>{v(null),g(!1);const U=document.getElementById("paypal-button-container");U&&(U.innerHTML=""),b(null)},A=()=>{f||(h(!1),E())},O=U=>{U?(h(!0),E()):A()},Q=()=>{switch(p){case"success":return e.jsx(ks,{className:"h-8 w-8 text-green-500"});case"failed":return e.jsx(Ws,{className:"h-8 w-8 text-red-500"});default:return e.jsx(Ba,{className:"h-8 w-8 text-blue-500"})}},q=()=>{switch(p){case"success":return"Payment completed successfully!";case"failed":return"Payment failed. Please try again.";default:return"Choose your payment method below"}};return e.jsxs(Gt,{open:d,onOpenChange:O,children:[e.jsx(Za,{asChild:!0,children:e.jsxs(I,{disabled:c,className:"bg-blue-600 hover:bg-blue-700 text-white",children:[e.jsx(Ba,{className:"mr-2 h-4 w-4"}),"Pay with PayPal"]})}),e.jsxs(qt,{className:"sm:max-w-md",children:[e.jsxs(Kt,{children:[e.jsxs(Yt,{className:"flex items-center gap-2",children:[e.jsx(Ba,{className:"h-5 w-5 text-blue-600"}),"PayPal Payment"]}),e.jsxs(vs,{children:["Pay ",a," ",t?.toLocaleString()," using PayPal"]})]}),e.jsx(se,{children:e.jsxs(oe,{className:"pt-6",children:[e.jsxs("div",{className:"text-center space-y-4",children:[Q(),e.jsx("p",{className:"text-sm text-muted-foreground",children:q()})]}),!p&&e.jsx("div",{className:"mt-6 space-y-4",children:y?e.jsxs(e.Fragment,{children:[e.jsx("div",{id:"paypal-button-container",className:"min-h-[50px]"}),f&&e.jsxs("div",{className:"flex items-center justify-center py-4",children:[e.jsx(Hi,{className:"h-4 w-4 animate-spin mr-2"}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"Processing payment..."})]})]}):e.jsxs("div",{className:"flex items-center justify-center py-8",children:[e.jsx(Hi,{className:"h-6 w-6 animate-spin mr-2"}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"Loading PayPal..."})]})}),p==="failed"&&e.jsxs("div",{className:"mt-6 space-y-3",children:[e.jsx("div",{className:"p-4 bg-red-50 dark:bg-red-900/20 rounded-lg",children:e.jsx("p",{className:"text-sm text-red-800 dark:text-red-200",children:"Payment was not completed. Please try again."})}),e.jsx(I,{onClick:E,variant:"outline",className:"w-full",children:"Try Again"})]}),e.jsxs("div",{className:"mt-6 pt-4 border-t",children:[e.jsxs("div",{className:"flex items-center justify-center space-x-2 text-xs text-muted-foreground",children:[e.jsx(Ba,{className:"h-3 w-3"}),e.jsx("span",{children:"Secured by PayPal"})]}),e.jsx("p",{className:"text-center text-xs text-muted-foreground mt-1",children:"Your payment information is encrypted and secure"})]})]})})]})]})},dk=({amount:t,description:s,currency:a="KES",onSuccess:n,onError:i,disabled:c=!1,triggerText:d="Make Payment",showMpesa:h=!0,showPaypal:f=!0})=>{const[g,p]=N.useState(!1),v=S=>{p(!1),n&&n(S)},y=S=>{i&&i(S)},_=(S,b)=>b==="KES"?`KES ${S?.toLocaleString()}`:b==="USD"?`$${S?.toLocaleString()}`:`${b} ${S?.toLocaleString()}`;return e.jsxs(Gt,{open:g,onOpenChange:p,children:[e.jsx(Za,{asChild:!0,children:e.jsxs(I,{disabled:c,className:"bg-primary hover:bg-primary/90",children:[e.jsx(Ba,{className:"mr-2 h-4 w-4"}),d]})}),e.jsxs(qt,{className:"sm:max-w-lg",children:[e.jsxs(Kt,{children:[e.jsxs(Yt,{className:"flex items-center gap-2",children:[e.jsx(E5,{className:"h-5 w-5"}),"Payment Options"]}),e.jsxs(vs,{children:["Choose your preferred payment method for ",_(t,a)]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(se,{children:[e.jsx(_e,{className:"pb-3",children:e.jsx(Te,{className:"text-lg",children:"Payment Summary"})}),e.jsxs(oe,{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Amount:"}),e.jsx("span",{className:"font-semibold",children:_(t,a)})]}),s&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Description:"}),e.jsx("span",{className:"text-sm",children:s})]})]})]}),e.jsxs(Ha,{defaultValue:h?"mpesa":"paypal",className:"w-full",children:[e.jsxs(Xa,{className:"grid w-full grid-cols-2",children:[h&&e.jsxs(Tt,{value:"mpesa",className:"flex items-center gap-2",children:[e.jsx(Lr,{className:"h-4 w-4"}),"M-Pesa"]}),f&&e.jsxs(Tt,{value:"paypal",className:"flex items-center gap-2",children:[e.jsx(Ba,{className:"h-4 w-4"}),"PayPal"]})]}),h&&e.jsx(kt,{value:"mpesa",className:"space-y-4",children:e.jsxs(se,{children:[e.jsxs(_e,{className:"pb-3",children:[e.jsxs(Te,{className:"flex items-center gap-2 text-green-600",children:[e.jsx(Lr,{className:"h-5 w-5"}),"M-Pesa Payment"]}),e.jsx(vt,{children:"Pay instantly using your Safaricom M-Pesa mobile money"})]}),e.jsxs(oe,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ps,{className:"h-4 w-4 text-green-500"}),e.jsx("span",{children:"Instant payment"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(_a,{className:"h-4 w-4 text-green-500"}),e.jsx("span",{children:"Secure & trusted"})]})]}),e.jsx("div",{className:"pt-2",children:e.jsx(N9,{amount:a==="KES"?t:Math.round(t*130),description:s,onSuccess:v,onError:y})})]})]})}),f&&e.jsx(kt,{value:"paypal",className:"space-y-4",children:e.jsxs(se,{children:[e.jsxs(_e,{className:"pb-3",children:[e.jsxs(Te,{className:"flex items-center gap-2 text-blue-600",children:[e.jsx(Ba,{className:"h-5 w-5"}),"PayPal Payment"]}),e.jsx(vt,{children:"Pay with PayPal, credit card, or debit card"})]}),e.jsxs(oe,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(_a,{className:"h-4 w-4 text-blue-500"}),e.jsx("span",{children:"Buyer protection"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ba,{className:"h-4 w-4 text-blue-500"}),e.jsx("span",{children:"Cards accepted"})]})]}),e.jsx("div",{className:"pt-2",children:e.jsx(w9,{amount:a==="USD"?t:Math.round(t/130*100)/100,description:s,currency:"USD",onSuccess:v,onError:y})})]})]})})]}),e.jsx("div",{className:"bg-muted/50 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(_a,{className:"h-5 w-5 text-primary mt-0.5"}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-sm font-medium",children:"Secure Payment"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Your payment information is encrypted and processed securely. We never store your payment details."})]})]})})]})]})]})};function b9({onBalanceUpdate:t}){const{socket:s,connected:a}=Ra(),{user:n}=qs(),[i,c]=N.useState(null),[d,h]=N.useState(!0),[f,g]=N.useState(""),[p,v]=N.useState(!1);N.useEffect(()=>{y()},[]),N.useEffect(()=>{if(!(!s||!a))return s.on("wallet_updated",b=>{c(T=>T?{...T,balance:b.balance}:null),R.success(`Wallet ${b.type}: ${b.transaction?.description}`),t&&t(b.balance)}),s.on("payment_success",b=>{c(T=>T?{...T,balance:b.balance}:null),v(!1),R.success(`Payment successful! Receipt: ${b.receipt}`),t&&t(b.balance)}),s.on("payment_failed",b=>{v(!1),R.error(`Payment failed: ${b.reason}`)}),s.on("mpesa_initiated",b=>{R.info(b.message||"Check your phone for M-Pesa prompt",{duration:1e4})}),()=>{s.off("wallet_updated"),s.off("payment_success"),s.off("payment_failed"),s.off("mpesa_initiated")}},[s,a,t]);const y=async()=>{try{const b=await ke.get("/wallet");c(b.data)}catch(b){console.error("Error fetching wallet:",b)}finally{h(!1)}},_=async()=>{if(!f||f<=0)return R.error("Please enter a valid amount");try{v(!0);const b=await ke.post("/mpesa/stk-push",{phone:"",amount:Number(f),accountReference:"WALLET_TOPUP",transactionDesc:"Wallet top-up via M-Pesa"});R.success(b.data.message),g("")}catch(b){R.error(b.response?.data?.error||"Failed to initiate payment"),v(!1)}},S=async(b,T="manual")=>{try{const E=await ke.post("/wallet/deposit",{amount:Number(b),source:T,description:`Wallet deposit from ${T}`});R.success(E.data.message),await y(),t&&t(E.data.wallet.balance)}catch(E){R.error(E.response?.data?.error||"Failed to deposit")}};return d?e.jsx("div",{className:"animate-pulse space-y-4",children:e.jsx("div",{className:"h-40 bg-muted rounded-lg"})}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs(se,{className:"border-2 border-green-500/20 bg-gradient-to-br from-green-50 to-transparent dark:from-green-950/20",children:[e.jsx(_e,{children:e.jsxs(Te,{className:"flex items-center gap-2",children:[e.jsx(Uu,{className:"h-5 w-5 text-green-600"}),"Digital Wallet",a&&e.jsxs(ze,{variant:"default",className:"gap-1 ml-auto bg-green-600 text-white border-green-600",children:[e.jsx(Ga,{className:"h-3 w-3"}),"Live"]})]})}),e.jsxs(oe,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:"Available Balance"}),e.jsxs("div",{className:"text-2xl font-bold text-green-600",children:[i?.currency||"KES"," ",i?.balance?.toLocaleString()||"0.00"]}),e.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground mt-1",children:[e.jsx(_a,{className:"h-3 w-3"}),"Secure"]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:"Daily Limit"}),e.jsxs("div",{className:"text-lg font-semibold",children:[i?.currency||"KES"," ",i?.dailyLimit?.toLocaleString()||"100,000"]}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:["Used: ",i?.todaySpent?.toLocaleString()||"0"]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:"Transactions"}),e.jsx("div",{className:"text-lg font-semibold",children:i?.totalTransactions||0}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"All time"})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsxs(Gt,{children:[e.jsx(Za,{asChild:!0,children:e.jsxs(I,{size:"sm",variant:"default",className:"gap-2",children:[e.jsx(A5,{className:"h-4 w-4"}),"Deposit"]})}),e.jsxs(qt,{children:[e.jsx(Kt,{children:e.jsx(Yt,{children:"Deposit Funds"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs(ue,{children:["Amount (",i?.currency||"KES",")"]}),e.jsx(we,{type:"number",placeholder:"0.00",id:"deposit-amount"})]}),e.jsx(I,{className:"w-full",onClick:()=>{const b=document.getElementById("deposit-amount").value;b&&S(b)},children:"Deposit"})]})]})]}),e.jsxs(I,{size:"sm",variant:"outline",className:"gap-2",children:[e.jsx(D5,{className:"h-4 w-4"}),"Withdraw"]}),e.jsxs(I,{size:"sm",variant:"outline",className:"gap-2",children:[e.jsx(mn,{className:"h-4 w-4"}),"Transfer"]})]})]})]}),e.jsxs(se,{className:"border-2 border-green-600/20",children:[e.jsxs(_e,{children:[e.jsxs(Te,{className:"flex items-center gap-2",children:[e.jsx(Lr,{className:"h-5 w-5 text-green-600"}),"M-Pesa Quick Top-Up"]}),e.jsxs(vt,{children:["Top up using your registered phone: ",n?.phone||"Not set"]})]}),e.jsxs(oe,{children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx(we,{type:"number",placeholder:"Amount (KES)",value:f,onChange:b=>g(b.target.value),disabled:p,className:"flex-1"}),e.jsx(I,{onClick:_,disabled:p||!f,className:"gap-2",children:p?e.jsxs(e.Fragment,{children:[e.jsx(ps,{className:"h-4 w-4 animate-spin"}),"Processing"]}):e.jsxs(e.Fragment,{children:[e.jsx(Lr,{className:"h-4 w-4"}),"Pay"]})})]}),e.jsxs("div",{className:"mt-3 p-3 bg-muted/50 rounded text-xs space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ks,{className:"h-3 w-3 text-green-600"}),"Uses your registered phone number"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ks,{className:"h-3 w-3 text-green-600"}),"Instant wallet credit on payment"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ks,{className:"h-3 w-3 text-green-600"}),"Real-time payment notifications"]})]})]})]})]})}const S9=oj("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),Im=N.forwardRef(({className:t,variant:s,...a},n)=>e.jsx("div",{ref:n,role:"alert",className:ut(S9({variant:s}),t),...a}));Im.displayName="Alert";const _9=N.forwardRef(({className:t,...s},a)=>e.jsx("h5",{ref:a,className:ut("mb-1 font-medium leading-none tracking-tight",t),...s}));_9.displayName="AlertTitle";const Fm=N.forwardRef(({className:t,...s},a)=>e.jsx("div",{ref:a,className:ut("text-sm [&_p]:leading-relaxed",t),...s}));Fm.displayName="AlertDescription";function C9({onSuccess:t}){const{user:s}=qs(),[a,n]=N.useState(!1),[i,c]=N.useState(!1),[d,h]=N.useState([]),[f,g]=N.useState(null),[p,v]=N.useState({recipientId:"",recipientName:"",recipientPhone:"",amount:"",paymentMethod:"wallet",description:"",category:"salary",pin:""});N.useEffect(()=>{a&&(y(),_())},[a]);const y=async()=>{try{const T=await ke.get("/team");h(T.data||[])}catch(T){console.error("Error fetching team:",T)}},_=async()=>{try{const T=await ke.get("/wallet");g(T.data)}catch(T){console.error("Error fetching wallet:",T)}},S=T=>{const E=d.find(A=>A._id===T);E&&v(A=>({...A,recipientId:E._id,recipientName:E.name,recipientPhone:E.phone||""}))},b=async()=>{if(!p.recipientId)return R.error("Please select a recipient");if(!p.amount||p.amount<=0)return R.error("Please enter a valid amount");if(p.paymentMethod==="wallet"&&!p.pin)return R.error("Please enter your wallet PIN");if(p.paymentMethod==="wallet"&&(!f||f.balance<p.amount))return R.error("Insufficient wallet balance");try{c(!0);let T;p.paymentMethod==="wallet"?T=await ke.post("/wallet/transfer",{amount:Number(p.amount),recipientId:p.recipientId,description:`${p.category}: ${p.description}`,pin:p.pin}):T=await ke.post("/mpesa/stk-push",{phone:p.recipientPhone,amount:Number(p.amount),accountReference:`PAY_${p.recipientId}`,transactionDesc:`Payment to ${p.recipientName}: ${p.description}`}),await ke.post("/transactions",{description:`Payment to ${p.recipientName} - ${p.category}`,amount:Number(p.amount),type:"expense",category:"employee_payment",status:"completed",reference:p.recipientId,notes:p.description}),R.success(`Payment initiated successfully to ${p.recipientName}`),n(!1),v({recipientId:"",recipientName:"",recipientPhone:"",amount:"",paymentMethod:"wallet",description:"",category:"salary",pin:""}),t&&t(T.data)}catch(T){console.error("Payment error:",T),R.error(T.response?.data?.error||"Payment failed")}finally{c(!1)}};return e.jsxs(Gt,{open:a,onOpenChange:n,children:[e.jsx(Za,{asChild:!0,children:e.jsxs(I,{className:"gap-2",children:[e.jsx(fs,{className:"h-4 w-4"}),"Pay Employee/Contractor"]})}),e.jsxs(qt,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsx(Kt,{children:e.jsxs(Yt,{className:"flex items-center gap-2",children:[e.jsx(mn,{className:"h-5 w-5"}),"Make Payment to Team Member"]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs(Im,{children:[e.jsx(_a,{className:"h-4 w-4"}),e.jsx(Fm,{children:"All payments are secure, logged, and auditable. Transaction records are maintained for compliance."})]}),f&&p.paymentMethod==="wallet"&&e.jsx("div",{className:"p-3 bg-green-50 dark:bg-green-950/20 rounded-lg border border-green-200 dark:border-green-800",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Available Balance:"}),e.jsxs("span",{className:"text-lg font-semibold text-green-600",children:[f.currency," ",f.balance?.toLocaleString()]})]})}),e.jsxs("div",{children:[e.jsx(ue,{children:"Select Recipient *"}),e.jsxs(Xt,{value:p.recipientId,onValueChange:S,children:[e.jsx(Jt,{children:e.jsx(Qt,{placeholder:"Choose team member"})}),e.jsx(es,{children:d.length===0?e.jsx("div",{className:"p-2 text-sm text-muted-foreground",children:"No team members found"}):d.map(T=>e.jsx(Ie,{value:T._id,children:e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsx("span",{children:T.name}),e.jsx(ze,{variant:"secondary",className:"text-xs",children:T.role||"Employee"})]})},T._id))})]})]}),e.jsxs("div",{children:[e.jsx(ue,{children:"Payment Method *"}),e.jsxs(Xt,{value:p.paymentMethod,onValueChange:T=>v(E=>({...E,paymentMethod:T})),children:[e.jsx(Jt,{children:e.jsx(Qt,{})}),e.jsxs(es,{children:[e.jsx(Ie,{value:"wallet",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Uu,{className:"h-4 w-4"}),"From Wallet (Instant Transfer)"]})}),e.jsx(Ie,{value:"mpesa",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Lr,{className:"h-4 w-4"}),"M-Pesa Direct (to recipient phone)"]})})]})]})]}),e.jsxs("div",{children:[e.jsxs(ue,{children:["Amount (",f?.currency||"KES",") *"]}),e.jsx(we,{type:"number",placeholder:"0.00",value:p.amount,onChange:T=>v(E=>({...E,amount:T.target.value}))})]}),e.jsxs("div",{children:[e.jsx(ue,{children:"Payment Category *"}),e.jsxs(Xt,{value:p.category,onValueChange:T=>v(E=>({...E,category:T})),children:[e.jsx(Jt,{children:e.jsx(Qt,{})}),e.jsxs(es,{children:[e.jsx(Ie,{value:"salary",children:"Salary"}),e.jsx(Ie,{value:"bonus",children:"Bonus"}),e.jsx(Ie,{value:"commission",children:"Commission"}),e.jsx(Ie,{value:"reimbursement",children:"Reimbursement"}),e.jsx(Ie,{value:"allowance",children:"Allowance"}),e.jsx(Ie,{value:"contractor_fee",children:"Contractor Fee"})]})]})]}),e.jsxs("div",{children:[e.jsx(ue,{children:"Description/Notes *"}),e.jsx(Gs,{placeholder:"Payment purpose, period, etc.",value:p.description,onChange:T=>v(E=>({...E,description:T.target.value})),rows:3})]}),p.paymentMethod==="wallet"&&e.jsxs("div",{children:[e.jsx(ue,{children:"Wallet PIN *"}),e.jsx(we,{type:"password",placeholder:"Enter your wallet PIN",value:p.pin,onChange:T=>v(E=>({...E,pin:T.target.value})),maxLength:6}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Required for security verification"})]}),p.paymentMethod==="mpesa"&&p.recipientPhone&&e.jsxs(Im,{children:[e.jsx(Ws,{className:"h-4 w-4"}),e.jsxs(Fm,{children:["M-Pesa prompt will be sent to: ",e.jsx("strong",{children:p.recipientPhone})]})]}),p.amount&&p.recipientName&&e.jsxs("div",{className:"p-4 bg-muted rounded-lg space-y-2",children:[e.jsx("h4",{className:"font-semibold text-sm",children:"Payment Summary"}),e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Recipient:"}),e.jsx("span",{className:"font-medium",children:p.recipientName})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Amount:"}),e.jsxs("span",{className:"font-medium",children:[f?.currency||"KES"," ",Number(p.amount).toLocaleString()]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Method:"}),e.jsx("span",{className:"font-medium capitalize",children:p.paymentMethod})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Category:"}),e.jsx("span",{className:"font-medium capitalize",children:p.category.replace("_"," ")})]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(I,{variant:"outline",className:"flex-1",onClick:()=>n(!1),disabled:i,children:"Cancel"}),e.jsx(I,{className:"flex-1 gap-2",onClick:b,disabled:i,children:i?e.jsx(e.Fragment,{children:"Processing..."}):e.jsxs(e.Fragment,{children:[e.jsx(mn,{className:"h-4 w-4"}),"Send Payment"]})})]})]})]})]})}const T9=()=>{const{user:t,isAuthenticated:s,loading:a}=qs(),{summary:n,transactions:i,loading:c,refreshFinancialData:d}=nk(),{socket:h,connected:f}=Ra(),g=n||{totalRevenue:"KES 0",totalExpenses:"KES 0",netProfit:"KES 0",pendingInvoices:"KES 0"},p=i||[],[v,y]=N.useState(""),[_,S]=N.useState(!1),[b,T]=N.useState(!1),[E,A]=N.useState([]),[O,Q]=N.useState([]),[q,U]=N.useState([]),[D,M]=N.useState({revenueGrowth:0,expenseGrowth:0,profitGrowth:0,pendingCount:0}),[P,G]=N.useState({clientName:"",clientEmail:"",amount:"",dueDate:"",description:""}),K=Z=>Array.isArray(Z)?Z:Z?.invoices||Z?.items||Z?.data||[],z=Z=>({id:Z._id||Z.id,customerName:Z.customerName??Z.clientName??Z.customer?.name??"",totalAmount:Number(Z.totalAmount??Z.amount??0),paymentStatus:Z.paymentStatus??Z.status??"pending"});N.useEffect(()=>{const Z=async()=>{if(s)try{const X={Authorization:`Bearer ${localStorage.getItem("token")}`},[ce,F,re]=await Promise.all([ke.get("/invoices",{headers:X}).catch(()=>({data:[]})),ke.get("/expenses",{headers:X}).catch(()=>({data:[]})),ke.get("/orders",{headers:X}).catch(()=>({data:[]}))]),de=K(ce.data).map(z),me=F.data||[],De=re.data||[];A(de),Q(me),U(De),he(de,me,De),console.log(" Financial data loaded:",{invoices:de.length,expenses:me.length,orders:De.length})}catch(te){R.error("Error fetching financial data."),console.error("Error fetching financial data:",te)}};Z();const ee=setInterval(Z,12e4);return()=>clearInterval(ee)},[s]),N.useEffect(()=>{if(!h||!f)return;console.log(" Setting up real-time financial listeners...");const Z=re=>{console.log(" New order received:",re),U(de=>[re,...de]),R.success("New order received!"),d()},ee=re=>{console.log(" Order updated:",re),U(de=>de.map(me=>me._id===re._id?re:me)),d()},te=re=>{console.log(" New invoice received:",re),A(de=>[z(re),...de]),R.success("New invoice created!"),d()},X=re=>{console.log(" Invoice updated:",re),A(de=>de.map(me=>me.id===re._id?z(re):me)),d()},ce=re=>{console.log(" New expense received:",re),Q(de=>[re,...de]),R.success("New expense recorded!"),d()},F=re=>{console.log(" Expense updated:",re),Q(de=>de.map(me=>me._id===re._id?re:me)),d()};return h.on("new_order",Z),h.on("order_updated",ee),h.on("new_invoice",te),h.on("invoice_updated",X),h.on("new_expense",ce),h.on("expense_updated",F),()=>{h.off("new_order",Z),h.off("order_updated",ee),h.off("new_invoice",te),h.off("invoice_updated",X),h.off("new_expense",ce),h.off("expense_updated",F)}},[h,f,d]);const J=(Z,ee)=>{const te={};for(let X=11;X>=0;X--){const ce=new Date;ce.setMonth(ce.getMonth()-X);const F=`${ce.getFullYear()}-${String(ce.getMonth()+1).padStart(2,"0")}`,re=ce.toLocaleDateString("en-US",{month:"short",year:"2-digit"});te[F]={name:re,revenue:0,expenses:0,profit:0}}return Z.forEach(X=>{const ce=new Date(X.createdAt||X.date),F=`${ce.getFullYear()}-${String(ce.getMonth()+1).padStart(2,"0")}`;te[F]&&(te[F].revenue+=Number(X.total)||0)}),ee.forEach(X=>{const ce=new Date(X.createdAt||X.date),F=`${ce.getFullYear()}-${String(ce.getMonth()+1).padStart(2,"0")}`;te[F]&&(te[F].expenses+=Number(X.amount)||0)}),Object.values(te).forEach(X=>{X.profit=X.revenue-X.expenses}),Object.values(te)},W=(Z,ee)=>{const te=[],X=new Date;for(let ce=29;ce>=0;ce--){const F=new Date(X);F.setDate(F.getDate()-ce);const re=F.toISOString().split("T")[0],de=Z.filter(pe=>new Date(pe.createdAt||pe.date).toISOString().split("T")[0]===re),me=ee.filter(pe=>new Date(pe.createdAt||pe.date).toISOString().split("T")[0]===re),De=de.reduce((pe,Le)=>pe+(Number(Le.total)||0),0),Ne=me.reduce((pe,Le)=>pe+(Number(Le.amount)||0),0);te.push({date:re,name:F.toLocaleDateString("en-US",{month:"short",day:"numeric"}),value:De-Ne,revenue:De,expenses:Ne})}return te},he=(Z,ee,te)=>{const X=new Date,ce=new Date(X.getFullYear(),X.getMonth()-1,1),F=new Date(X.getFullYear(),X.getMonth(),1),re=te.filter(Ct=>new Date(Ct.createdAt)>=ce&&new Date(Ct.createdAt)<F).reduce((Ct,Lt)=>Ct+(Number(Lt.total)||0),0),de=te.filter(Ct=>new Date(Ct.createdAt)>=F).reduce((Ct,Lt)=>Ct+(Number(Lt.total)||0),0),me=re>0?((de-re)/re*100).toFixed(1):0,De=ee.filter(Ct=>new Date(Ct.createdAt)>=ce&&new Date(Ct.createdAt)<F).reduce((Ct,Lt)=>Ct+(Number(Lt.amount)||0),0),Ne=ee.filter(Ct=>new Date(Ct.createdAt)>=F).reduce((Ct,Lt)=>Ct+(Number(Lt.amount)||0),0),pe=De>0?((Ne-De)/De*100).toFixed(1):0,Le=re-De,ot=de-Ne,Pt=Le>0?((ot-Le)/Le*100).toFixed(1):0,Dt=Z.filter(Ct=>Ct.paymentStatus==="pending"||Ct.paymentStatus==="unpaid").length;M({revenueGrowth:Number(me),expenseGrowth:Number(pe),profitGrowth:Number(Pt),pendingCount:Dt})},V=async()=>{try{const Z=localStorage.getItem("token"),ee=await ke.post("/expenses",{description:"New expense",amount:1e3,category:"office"},{headers:{Authorization:`Bearer ${Z}`}});R.success("Expense added successfully!"),T(!1)}catch(Z){R.error("Error adding expense."),console.error("Error adding expense:",Z)}},ae=async()=>{const Z=localStorage.getItem("token");if(!Z)return R.error("Please log in first.");const{clientName:ee,clientEmail:te,amount:X,dueDate:ce,description:F}=P;if(!ee||!te||!X||!ce)return R.error("Please fill in all required fields.");try{const re=await ke.post("/invoices",{customerName:ee,clientEmail:te,totalAmount:Number(X),dueDate:ce,description:F},{headers:{Authorization:`Bearer ${Z}`}});R.success("Invoice created successfully!"),S(!1),G({clientName:"",clientEmail:"",amount:"",dueDate:"",description:""});const de=z(re.data);A(me=>[de,...me])}catch(re){R.error(re.response?.data?.error||"Error creating invoice."),console.error("Error creating invoice:",re)}};if(a||c)return e.jsx("div",{children:"Loading..."});if(!s)return e.jsx("div",{children:"Please log in to manage financial data."});const ge=Z=>{switch(Z){case"paid":case"completed":return"bg-success text-success-foreground";case"pending":return"bg-warning text-warning-foreground";case"overdue":return"bg-destructive text-destructive-foreground";default:return"bg-muted text-muted-foreground"}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Financial Management"}),e.jsx("p",{className:"text-muted-foreground",children:"Track wallet, payments, income, expenses, and manage invoices"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(Gt,{open:b,onOpenChange:T,children:[e.jsx(Za,{asChild:!0,children:e.jsxs(I,{variant:"outline",className:"gap-2",children:[e.jsx(Gv,{className:"h-4 w-4"}),"Add Expense"]})}),e.jsxs(qt,{children:[e.jsx(Kt,{children:e.jsx(Yt,{children:"Record New Expense"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(ue,{htmlFor:"expense-description",children:"Description"}),e.jsx(we,{id:"expense-description",placeholder:"Enter expense description"})]}),e.jsxs("div",{children:[e.jsx(ue,{htmlFor:"expense-amount",children:"Amount (KES)"}),e.jsx(we,{id:"expense-amount",type:"number",placeholder:"0.00"})]}),e.jsxs("div",{children:[e.jsx(ue,{htmlFor:"expense-category",children:"Category"}),e.jsxs(Xt,{children:[e.jsx(Jt,{children:e.jsx(Qt,{placeholder:"Select category"})}),e.jsxs(es,{children:[e.jsx(Ie,{value:"office",children:"Office Supplies"}),e.jsx(Ie,{value:"marketing",children:"Marketing"}),e.jsx(Ie,{value:"transport",children:"Transport"}),e.jsx(Ie,{value:"utilities",children:"Utilities"}),e.jsx(Ie,{value:"other",children:"Other"})]})]})]}),e.jsxs("div",{children:[e.jsx(ue,{htmlFor:"expense-notes",children:"Notes"}),e.jsx(Gs,{id:"expense-notes",placeholder:"Additional notes (optional)"})]}),e.jsx(I,{className:"w-full",onClick:V,children:"Record Expense"})]})]})]}),e.jsxs(Gt,{open:_,onOpenChange:S,children:[e.jsx(Za,{asChild:!0,children:e.jsxs(I,{className:"gap-2",children:[e.jsx(ha,{className:"h-4 w-4"}),"Create Invoice"]})}),e.jsxs(qt,{children:[e.jsx(Kt,{children:e.jsx(Yt,{children:"Create New Invoice"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(ue,{htmlFor:"client-name",children:"Client Name"}),e.jsx(we,{id:"client-name",placeholder:"Enter client name",value:P.clientName,onChange:Z=>G({...P,clientName:Z.target.value})})]}),e.jsxs("div",{children:[e.jsx(ue,{htmlFor:"client-email",children:"Client Email"}),e.jsx(we,{id:"client-email",type:"email",placeholder:"client@example.com",value:P.clientEmail,onChange:Z=>G({...P,clientEmail:Z.target.value})})]}),e.jsxs("div",{children:[e.jsx(ue,{htmlFor:"invoice-amount",children:"Amount (KES)"}),e.jsx(we,{id:"invoice-amount",type:"number",placeholder:"0.00",value:P.amount,onChange:Z=>G({...P,amount:Z.target.value})})]}),e.jsxs("div",{children:[e.jsx(ue,{htmlFor:"due-date",children:"Due Date"}),e.jsx(we,{id:"due-date",type:"date",value:P.dueDate,onChange:Z=>G({...P,dueDate:Z.target.value})})]}),e.jsxs("div",{children:[e.jsx(ue,{htmlFor:"invoice-description",children:"Description"}),e.jsx(Gs,{id:"invoice-description",placeholder:"Invoice description or items",value:P.description,onChange:Z=>G({...P,description:Z.target.value})})]}),e.jsx(I,{className:"w-full",onClick:ae,children:"Create Invoice"})]})]})]})]})]}),e.jsx(b9,{onBalanceUpdate:d}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsxs(se,{children:[e.jsxs(_e,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(Te,{className:"text-sm font-medium",children:"Total Revenue"}),e.jsx(aa,{className:"h-4 w-4 text-success"})]}),e.jsxs(oe,{children:[e.jsx("div",{className:"text-2xl font-bold text-success",children:g.totalRevenue}),e.jsxs("p",{className:`text-xs ${D.revenueGrowth>=0?"text-green-600":"text-red-600"}`,children:[D.revenueGrowth>=0?"+":"",D.revenueGrowth,"% from last month"]})]})]}),e.jsxs(se,{children:[e.jsxs(_e,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(Te,{className:"text-sm font-medium",children:"Total Expenses"}),e.jsx(No,{className:"h-4 w-4 text-destructive"})]}),e.jsxs(oe,{children:[e.jsx("div",{className:"text-2xl font-bold text-destructive",children:g.totalExpenses}),e.jsxs("p",{className:`text-xs ${D.expenseGrowth>=0?"text-red-600":"text-green-600"}`,children:[D.expenseGrowth>=0?"+":"",D.expenseGrowth,"% from last month"]})]})]}),e.jsxs(se,{children:[e.jsxs(_e,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(Te,{className:"text-sm font-medium",children:"Net Profit"}),e.jsx(Sa,{className:"h-4 w-4 text-primary"})]}),e.jsxs(oe,{children:[e.jsx("div",{className:"text-2xl font-bold text-primary",children:g.netProfit}),e.jsxs("p",{className:`text-xs ${D.profitGrowth>=0?"text-green-600":"text-red-600"}`,children:[D.profitGrowth>=0?"+":"",D.profitGrowth,"% from last month"]})]})]}),e.jsxs(se,{children:[e.jsxs(_e,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(Te,{className:"text-sm font-medium",children:"Pending Invoices"}),e.jsx(Ba,{className:"h-4 w-4 text-warning"})]}),e.jsxs(oe,{children:[e.jsx("div",{className:"text-2xl font-bold text-warning",children:g.pendingInvoices}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[D.pendingCount," invoice",D.pendingCount!==1?"s":""," pending"]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx(Ns,{title:"Revenue vs Expenses",description:"Last 12 months from real orders and expenses",type:"composed",data:J(q,O),height:350,autoRefresh:!0,refreshInterval:12e4}),e.jsx(Ns,{title:"Profit Trends",description:"Net profit calculated from revenue - expenses",type:"area",data:J(q,O).map(Z=>({name:Z.name,value:Z.profit,profit:Z.profit})),height:350,autoRefresh:!0,refreshInterval:12e4})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx(Ns,{title:"Expense Categories",description:"Breakdown of business expenses from real data",type:"pie",data:(()=>{const Z={};return O.forEach(ee=>{const te=ee.category||"Other";Z[te]=(Z[te]||0)+(Number(ee.amount)||0)}),Object.entries(Z).length>0?Object.entries(Z).map(([ee,te])=>({name:ee,value:te})):[{name:"No expenses yet",value:1}]})(),height:300,showControls:!1}),e.jsx(Ns,{title:"Cash Flow",description:"Last 30 days: Revenue - Expenses",type:"line",data:W(q,O),height:300,autoRefresh:!0,refreshInterval:12e4}),e.jsx(Ns,{title:"Invoice Status",description:"Payment status distribution from real invoices",type:"bar",data:(()=>{const Z={paid:0,pending:0,overdue:0};return E.forEach(ee=>{const te=ee.paymentStatus?.toLowerCase()||"pending";te==="paid"||te==="completed"?Z.paid++:te==="overdue"?Z.overdue++:Z.pending++}),E.length>0?[{name:"Paid",value:Z.paid},{name:"Pending",value:Z.pending},{name:"Overdue",value:Z.overdue}]:[{name:"No invoices yet",value:1}]})(),height:300,showControls:!1})]}),e.jsxs(se,{children:[e.jsxs(_e,{children:[e.jsxs(Te,{className:"flex items-center gap-2",children:[e.jsx(fs,{className:"h-5 w-5"}),"Pay Employees & Contractors"]}),e.jsx(vt,{children:"Secure payments to team members via wallet or direct transfer"})]}),e.jsx(oe,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Make secure payments to your team members. All transactions are logged and tracked for audit purposes."}),e.jsx(C9,{onSuccess:d})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(se,{children:[e.jsx(_e,{children:e.jsxs(Te,{className:"flex items-center gap-2",children:[e.jsx(Ba,{className:"h-5 w-5"}),"Recent Transactions"]})}),e.jsx(oe,{children:e.jsx("div",{className:"space-y-4",children:Array.isArray(p)&&p.length>0?p.map(Z=>e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-foreground",children:Z.description}),e.jsx("p",{className:"text-sm text-muted-foreground",children:Z.date})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:`font-semibold ${Z.type==="income"?"text-success":"text-destructive"}`,children:[Z.type==="income"?"+":"-",Z.amount]}),e.jsx(ze,{className:ge(Z.status),children:Z.status})]})]},Z.id)):e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{className:"text-muted-foreground",children:"No recent transactions found"})})})})]}),e.jsxs(se,{children:[e.jsx(_e,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(Te,{className:"flex items-center gap-2",children:[e.jsx(Ka,{className:"h-5 w-5"}),"Invoice Management"]}),e.jsxs(I,{variant:"outline",size:"sm",className:"gap-2",children:[e.jsx(hn,{className:"h-4 w-4"}),"Export"]})]})}),e.jsx(oe,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Da,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),e.jsx(we,{placeholder:"Search invoices...",value:v,onChange:Z=>y(Z.target.value),className:"pl-8"})]}),e.jsxs(Gi,{children:[e.jsx(qi,{children:e.jsxs(Fa,{children:[e.jsx(Bt,{children:"Invoice"}),e.jsx(Bt,{children:"Client"}),e.jsx(Bt,{children:"Amount"}),e.jsx(Bt,{children:"Status"})]})}),e.jsx(Ki,{children:E.length===0?e.jsx(Fa,{children:e.jsx(It,{colSpan:4,className:"text-center text-muted-foreground",children:"No invoices found."})}):E.map(Z=>e.jsxs(Fa,{children:[e.jsx(It,{className:"font-medium",children:Z.id}),e.jsx(It,{children:Z.customerName}),e.jsx(It,{children:`KES ${Number(Z.totalAmount).toLocaleString()}`}),e.jsx(It,{children:e.jsx(ze,{className:ge(Z.paymentStatus),children:Z.paymentStatus})})]},Z.id))})]})]})})]})]}),e.jsxs("div",{className:"mt-8 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Financial Analytics"}),e.jsx(ze,{variant:"secondary",children:"Live Data"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx(Ns,{title:"Revenue vs Expenses",description:"Monthly comparison from real data",defaultType:"bar",data:J(q,O),height:350,autoRefresh:!0,refreshInterval:12e4}),e.jsx(Ns,{title:"Profit Trends",description:"Net profit over time",defaultType:"line",data:J(q,O).map(Z=>({name:Z.name,value:Z.profit})),height:350,autoRefresh:!0,refreshInterval:12e4})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx(Ns,{title:"Expense Categories",description:"Real expense breakdown",defaultType:"pie",data:(()=>{const Z={};return O.forEach(ee=>{const te=ee.category||"Other";Z[te]=(Z[te]||0)+(Number(ee.amount)||0)}),Object.entries(Z).length>0?Object.entries(Z).map(([ee,te])=>({name:ee,value:te})):[{name:"No data",value:1}]})(),height:350,autoRefresh:!1,refreshInterval:12e4}),e.jsx(Ns,{title:"Cash Flow Analysis",description:"Daily cash flow from operations",defaultType:"area",data:W(q,O),height:350,autoRefresh:!0,refreshInterval:12e4})]}),e.jsx("div",{className:"w-full",children:e.jsx(Ns,{title:"Invoice Status Overview",description:"Invoice payment status distribution",defaultType:"composed",data:(()=>{const Z={paid:0,pending:0,overdue:0};return E.forEach(ee=>{const te=ee.paymentStatus?.toLowerCase()||"pending";te==="paid"||te==="completed"?Z.paid++:te==="overdue"?Z.overdue++:Z.pending++}),[{name:"Paid",value:Z.paid},{name:"Pending",value:Z.pending},{name:"Overdue",value:Z.overdue}]})(),height:400,autoRefresh:!0,refreshInterval:12e4})})]})]})},dr=N.forwardRef(({className:t,value:s,...a},n)=>e.jsx("div",{ref:n,className:ut("relative h-4 w-full overflow-hidden rounded-full bg-gray-200",t),...a,children:e.jsx("div",{className:"h-full bg-blue-600 transition-all duration-300 ease-in-out",style:{width:`${Math.min(100,Math.max(0,s||0))}%`}})}));dr.displayName="Progress";const W2=[{id:"starter",name:"Starter",price:0,billing:"Free Forever",description:"Perfect for getting started",features:["100 Products","5 Team Members","Basic Inventory","Email Support","Standard Features"],limits:{products:100,teamMembers:5},badge:"Free",badgeColor:"bg-green-600"},{id:"professional",name:"Professional",price:2999,billing:"KES 2,999/month",description:"For growing businesses",features:["Unlimited Products","Unlimited Team Members","Advanced Inventory","Priority Support","Advanced Analytics","API Access","Custom Reports"],limits:{products:-1,teamMembers:-1},badge:"Popular",badgeColor:"bg-blue-600",popular:!0},{id:"enterprise",name:"Enterprise",price:"custom",billing:"Custom Pricing",description:"For large organizations",features:["Everything in Professional","Dedicated Support","Custom Features","SLA Guarantee","Training & Onboarding","White Label Options","Advanced Security"],limits:{products:-1,teamMembers:-1},badge:"Enterprise",badgeColor:"bg-purple-600"}];function k9(){const{user:t}=qs(),[s,a]=N.useState(null),[n,i]=N.useState(null),[c,d]=N.useState(!0);N.useEffect(()=>{h()},[]);const h=async()=>{try{const[v,y]=await Promise.all([ke.get("/subscriptions/current"),ke.get("/subscriptions/usage")]);a(v.data.subscription),i(y.data)}catch(v){console.error("Error fetching subscription:",v),R.error("Failed to load subscription data")}finally{d(!1)}},f=async v=>{if(v==="starter"){try{await ke.post("/subscriptions/activate",{planId:"starter"}),R.success("Starter plan activated!"),h()}catch{R.error("Failed to activate plan")}return}if(v==="enterprise"){R.info("Contact sales for Enterprise plan");return}R.info("Subscription payment coming soon")},g=async()=>{if(confirm("Are you sure you want to cancel your subscription?"))try{await ke.post("/subscriptions/cancel"),R.success("Subscription cancelled. Access continues until end of billing period."),h()}catch{R.error("Failed to cancel subscription")}};if(c)return e.jsx("div",{className:"flex items-center justify-center h-screen",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})});const p=W2.find(v=>v.id===(s?.plan||"starter"));return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Subscription Management"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage your plan and billing"})]}),e.jsxs(se,{className:"border-2 border-primary/20",children:[e.jsx(_e,{children:e.jsxs(Te,{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(_a,{className:"h-5 w-5"}),"Current Plan"]}),e.jsx(ze,{className:`${p?.badgeColor} text-white`,children:p?.badge})]})}),e.jsxs(oe,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:"Plan"}),e.jsx("div",{className:"text-2xl font-bold",children:p?.name})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:"Status"}),e.jsx(ze,{variant:s?.status==="active"?"default":"destructive",children:s?.status||"Active"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:"Billing"}),e.jsx("div",{className:"text-lg font-semibold",children:p?.billing})]})]}),s?.nextBilling&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[e.jsx(Ms,{className:"h-4 w-4"}),"Next billing: ",new Date(s.nextBilling).toLocaleDateString()]}),s?.cancelAtPeriodEnd&&e.jsxs(Im,{variant:"destructive",children:[e.jsx(Ws,{className:"h-4 w-4"}),e.jsxs(Fm,{children:["Your subscription will end on ",new Date(s.nextBilling).toLocaleDateString()]})]})]})]}),n&&e.jsxs(se,{children:[e.jsxs(_e,{children:[e.jsx(Te,{children:"Usage Statistics"}),e.jsx(vt,{children:"Current usage vs. plan limits"})]}),e.jsxs(oe,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(cs,{className:"h-4 w-4"}),"Products"]}),e.jsxs("span",{className:"font-medium",children:[n.usage?.products||0,n.limits?.products!==-1?` / ${n.limits?.products}`:" (Unlimited)"]})]}),n.limits?.products!==-1&&e.jsx(dr,{value:n.usage?.products/n.limits?.products*100,className:"h-2"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(fs,{className:"h-4 w-4"}),"Team Members"]}),e.jsxs("span",{className:"font-medium",children:[n.usage?.teamMembers||0,n.limits?.teamMembers!==-1?` / ${n.limits?.teamMembers}`:" (Unlimited)"]})]}),n.limits?.teamMembers!==-1&&e.jsx(dr,{value:n.usage?.teamMembers/n.limits?.teamMembers*100,className:"h-2"})]})]})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Available Plans"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:W2.map(v=>e.jsxs(se,{className:`relative ${v.popular?"border-2 border-primary shadow-lg":""} ${s?.plan===v.id?"bg-muted/50":""}`,children:[v.popular&&e.jsx("div",{className:"absolute -top-3 left-1/2 -translate-x-1/2",children:e.jsx(ze,{className:"bg-primary text-primary-foreground",children:"Most Popular"})}),e.jsxs(_e,{children:[e.jsxs(Te,{className:"flex items-center justify-between",children:[e.jsx("span",{children:v.name}),s?.plan===v.id&&e.jsx(ze,{variant:"secondary",children:"Current"})]}),e.jsx(vt,{children:v.description})]}),e.jsxs(oe,{className:"space-y-4",children:[e.jsx("div",{className:"text-center py-4",children:typeof v.price=="number"?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-4xl font-bold",children:["KES ",v.price.toLocaleString()]}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"per month"})]}):e.jsx("div",{className:"text-2xl font-bold",children:v.billing})}),e.jsx("div",{className:"space-y-2",children:v.features.map((y,_)=>e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(To,{className:"h-4 w-4 text-green-600 flex-shrink-0"}),e.jsx("span",{children:y})]},_))}),e.jsx(I,{className:"w-full",variant:s?.plan===v.id?"outline":"default",disabled:s?.plan===v.id,onClick:()=>f(v.id),children:s?.plan===v.id?"Current Plan":v.id==="enterprise"?"Contact Sales":`Upgrade to ${v.name}`})]})]},v.id))})]}),s?.plan!=="starter"&&e.jsxs(se,{children:[e.jsx(_e,{children:e.jsx(Te,{children:"Manage Subscription"})}),e.jsxs(oe,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Ba,{className:"h-5 w-5 text-muted-foreground"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium",children:"Payment Method"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Manage your payment methods and billing details"})]}),e.jsx(I,{variant:"outline",size:"sm",children:"Update"})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Ws,{className:"h-5 w-5 text-destructive"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium",children:"Cancel Subscription"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"You will continue to have access until the end of your billing period"})]}),e.jsx(I,{variant:"destructive",size:"sm",onClick:g,children:"Cancel Plan"})]})]})]})]})}const E9=()=>{const[t,s]=N.useState([]),[a,n]=N.useState(!1),i=[{id:1,type:"trend",priority:"high",title:"Sales Spike Detected",description:"Your sales have increased by 23% in the last 24 hours compared to the same period last week.",icon:aa,color:"text-green-600",bgColor:"bg-green-50",recommendation:"Consider increasing inventory for top-selling items.",timestamp:new Date(Date.now()-7200*1e3)},{id:2,type:"alert",priority:"medium",title:"Low Stock Warning",description:"5 products are running low on inventory and may need restocking soon.",icon:mr,color:"text-orange-600",bgColor:"bg-orange-50",recommendation:"Review inventory levels and place orders for affected items.",timestamp:new Date(Date.now()-14400*1e3)},{id:3,type:"opportunity",priority:"medium",title:"Customer Behavior Pattern",description:"Customers who buy Product A are 67% more likely to purchase Product B within 7 days.",icon:km,color:"text-blue-600",bgColor:"bg-blue-50",recommendation:"Create a bundle offer or cross-selling campaign for these products.",timestamp:new Date(Date.now()-360*60*1e3)},{id:4,type:"performance",priority:"low",title:"Peak Hours Identified",description:"Your busiest hours are between 2-4 PM and 7-9 PM on weekdays.",icon:Mn,color:"text-purple-600",bgColor:"bg-purple-50",recommendation:"Schedule staff accordingly and consider targeted promotions during these hours.",timestamp:new Date(Date.now()-480*60*1e3)}],c=()=>{n(!0),setTimeout(()=>{s(i),n(!1)},1e3)};N.useEffect(()=>{c()},[]);const d=f=>{switch(f){case"high":return"bg-red-100 text-red-800";case"medium":return"bg-yellow-100 text-yellow-800";case"low":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}},h=f=>{const p=new Date-f,v=Math.floor(p/(1e3*60*60));return v<1?`${Math.floor(p/6e4)} minutes ago`:v<24?`${v} hours ago`:`${Math.floor(v/24)} days ago`};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"AI Insights"}),e.jsx("p",{className:"text-gray-600",children:"Real-time business intelligence and recommendations"})]}),e.jsxs(I,{onClick:c,disabled:a,variant:"outline",size:"sm",children:[e.jsx(Cs,{className:`h-4 w-4 mr-2 ${a?"animate-spin":""}`}),"Refresh"]})]}),e.jsx("div",{className:"grid gap-4",children:a?e.jsxs("div",{className:"flex items-center justify-center py-12",children:[e.jsx(Cs,{className:"h-8 w-8 animate-spin text-gray-400"}),e.jsx("span",{className:"ml-2 text-gray-600",children:"Loading insights..."})]}):t.map(f=>{const g=f.icon;return e.jsxs(se,{className:"hover:shadow-md transition-shadow",children:[e.jsx(_e,{className:"pb-3",children:e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:`p-2 rounded-lg ${f.bgColor}`,children:e.jsx(g,{className:`h-5 w-5 ${f.color}`})}),e.jsxs("div",{children:[e.jsx(Te,{className:"text-lg",children:f.title}),e.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[e.jsx(ze,{className:d(f.priority),children:f.priority.toUpperCase()}),e.jsx("span",{className:"text-sm text-gray-500",children:h(f.timestamp)})]})]})]})})}),e.jsxs(oe,{children:[e.jsx(vt,{className:"text-base mb-3",children:f.description}),e.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg",children:[e.jsx("p",{className:"text-sm font-medium text-gray-700 mb-1",children:" Recommendation:"}),e.jsx("p",{className:"text-sm text-gray-600",children:f.recommendation})]})]})]},f.id)})}),!a&&t.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(km,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No insights available"}),e.jsx("p",{className:"text-gray-600",children:"Check back later for AI-powered business insights."})]})]})},A9=()=>{const{user:t,isAuthenticated:s,loading:a}=qs(),{socket:n,connected:i}=Ra(),[c,d]=N.useState([]),[h,f]=N.useState([]),[g,p]=N.useState({salesTrend:"neutral",customerSatisfaction:0,inventoryOptimization:0,revenueGrowth:0}),[v,y]=N.useState({orders:[],products:[],transactions:[],salesData:[],customerData:[]}),[_,S]=N.useState(!0),[b,T]=N.useState(null);N.useEffect(()=>{const D=async()=>{if(s){S(!0),T(null);try{const G={Authorization:`Bearer ${localStorage.getItem("token")}`},[K,z,J]=await Promise.all([ke.get("/orders",{headers:G}).catch(()=>({data:[]})),ke.get("/products",{headers:G}).catch(()=>({data:[]})),ke.get("/transactions",{headers:G}).catch(()=>({data:[]}))]);console.log(" Real data loaded:",{orders:K.data.length,products:z.data.length,transactions:J.data.length}),y({orders:K.data||[],products:z.data||[],transactions:J.data||[],salesData:E(K.data||[]),customerData:A(K.data||[])}),O(K.data,z.data,J.data)}catch(P){console.error(" Error fetching real data:",P),T(P.message),R.error("Failed to load AI insights data")}finally{S(!1)}}};D(),n&&i&&n.on("ai_insights_updated",P=>{console.log(" AI insights updated via socket:",P),P.insights&&d(G=>[...P.insights,...G].slice(0,10)),P.recommendations&&f(P.recommendations),R.success("AI insights updated!")});const M=setInterval(D,12e4);return()=>clearInterval(M)},[s]);const E=D=>{const M=[],P=new Date;for(let G=29;G>=0;G--){const K=new Date(P);K.setDate(K.getDate()-G);const z=K.toISOString().split("T")[0],J=D.filter(he=>new Date(he.date||he.createdAt).toISOString().split("T")[0]===z),W=J.reduce((he,V)=>he+(Number(V.total)||0),0);M.push({date:z,name:K.toLocaleDateString("en-US",{month:"short",day:"numeric"}),value:W,orders:J.length,customers:new Set(J.map(he=>he.customer?.email)).size})}return M},A=D=>{const M=Array(24).fill(0).map((P,G)=>({hour:G,name:`${G}:00`,value:0,orders:0}));return D.forEach(P=>{const K=new Date(P.date||P.createdAt).getHours();M[K].value+=Number(P.total)||0,M[K].orders+=1}),M},O=(D,M,P)=>{const G=new Date,K=new Date(G.getFullYear(),G.getMonth()-1,1),z=new Date(G.getFullYear(),G.getMonth(),1),J=D.filter(F=>{const re=new Date(F.date||F.createdAt);return re>=K&&re<z}),W=D.filter(F=>new Date(F.date||F.createdAt)>=z),he=J.reduce((F,re)=>F+(Number(re.total)||0),0),V=W.reduce((F,re)=>F+(Number(re.total)||0),0),ae=he>0?((V-he)/he*100).toFixed(1):0,ge=M.filter(F=>(F.stockQuantity||0)<=(F.reorderLevel||5)),Z={};D.forEach(F=>{const re=new Date(F.date||F.createdAt).getHours();Z[re]=(Z[re]||0)+1});const ee=Object.entries(Z).sort((F,re)=>re[1]-F[1]).slice(0,2).map(([F])=>F),te=[{id:1,type:"sales",title:"Sales Performance Analysis",description:`Your sales have ${ae>=0?"increased":"decreased"} by ${Math.abs(ae)}% this month compared to last month (${W.length} orders vs ${J.length}).`,confidence:95,impact:Math.abs(ae)>20?"high":"medium",trend:ae>=0?"up":"down"},{id:2,type:"inventory",title:"Inventory Optimization",description:ge.length>0?`${ge.length} products are running low on stock and need immediate restocking.`:"All products are adequately stocked. Inventory levels are optimal.",confidence:92,impact:ge.length>5?"high":ge.length>0?"medium":"low",trend:ge.length>0?"warning":"neutral"},{id:3,type:"customer",title:"Customer Behavior Pattern",description:ee.length>0?`Peak sales hours are between ${ee[0]}:00-${ee[1]||ee[0]+2}:00. Consider staffing optimization during these hours.`:"Analyzing customer patterns to identify peak sales periods.",confidence:88,impact:"medium",trend:"neutral"}],X=[];ae>15&&X.push({id:1,title:"Increase Marketing Budget",description:`With ${ae}% growth, increasing marketing spend by 20% could boost revenue further.`,priority:"high",category:"marketing"}),ge.length>0&&X.push({id:2,title:"Restock Critical Items",description:`${ge.length} products need immediate restocking: ${ge.slice(0,3).map(F=>F.name).join(", ")}.`,priority:"high",category:"inventory"});const ce=M.map(F=>{const re=D.filter(de=>de.items?.some(me=>me.product===F._id||me.name===F.name));return{...F,orderCount:re.length}}).sort((F,re)=>F.orderCount-re.orderCount);if(ce.length>0&&ce[0].orderCount===0){const F=ce.filter(re=>re.orderCount===0).length;X.push({id:3,title:"Optimize Product Pricing",description:`${F} products have no recent sales. Consider price adjustments or promotions.`,priority:"medium",category:"pricing"})}p({salesTrend:ae>=0?"up":"down",customerSatisfaction:D.length>0?85:70,inventoryOptimization:M.length>0?((M.length-ge.length)/M.length*100).toFixed(0):78,revenueGrowth:parseFloat(ae)}),d(te),f(X.length>0?X:[{id:1,title:"Continue Current Strategy",description:"Your business is performing well. Maintain current operations.",priority:"low",category:"general"}])};if(a)return e.jsx("div",{children:"Loading..."});if(!s)return e.jsx("div",{children:"Please log in to view AI insights."});const Q=D=>{switch(D){case"sales":return Mn;case"inventory":return _o;case"customer":return rn;default:return jo}},q=D=>{switch(D){case"up":return aa;case"down":return No;case"warning":return mr;default:return ks}},U=D=>{switch(D){case"high":return"bg-red-100 text-red-800 border-red-200";case"medium":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"low":return"bg-green-100 text-green-800 border-green-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"AI Insights"}),e.jsx("p",{className:"text-muted-foreground",children:"AI-powered analytics and recommendations for your business"})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs(I,{variant:"outline",onClick:()=>{window.location.href="/dashboard/analytics",R.success("Opening detailed analytics reports...")},children:[e.jsx(Pa,{className:"mr-2 h-4 w-4"}),"View Reports"]}),e.jsxs(I,{className:"bg-green-500 cursor-pointer hover:bg-green-400",disabled:_,onClick:async()=>{R.info("Analyzing your business data...",{duration:2e3});try{const M={Authorization:`Bearer ${localStorage.getItem("token")}`},[P,G]=await Promise.all([ke.get("/orders",{headers:M}),ke.get("/products",{headers:M})]),K=P.data||[],z=G.data||[],J=[],W={};K.forEach(pe=>{pe.items?.forEach(Le=>{const ot=Le.product||Le.name;W[ot]=(W[ot]||0)+(Le.quantity||1)})});const he=Object.entries(W).sort((pe,Le)=>Le[1]-pe[1]).slice(0,3);if(he.length>0){const pe=he.map(([Le,ot])=>z.find(Dt=>Dt._id===Le||Dt.name===Le)?.name||"Unknown");J.push({id:Date.now()+1,type:"sales",title:"Top Performing Products",description:`Your best sellers are: ${pe.join(", ")}. Focus marketing efforts on these products.`,confidence:96,impact:"high",trend:"up"})}const V=K.filter(pe=>{const Le=new Date(pe.date||pe.createdAt);return(new Date-Le)/(1e3*60*60*24)<=7}),ae=K.filter(pe=>{const Le=new Date(pe.date||pe.createdAt),ot=(new Date-Le)/(1e3*60*60*24);return ot>7&&ot<=14}),ge=V.reduce((pe,Le)=>pe+(Number(Le.total)||0),0),Z=ae.reduce((pe,Le)=>pe+(Number(Le.total)||0),0),ee=Z>0?((ge-Z)/Z*100).toFixed(1):0;J.push({id:Date.now()+2,type:"sales",title:"Revenue Velocity",description:`Revenue ${ee>=0?"accelerated":"decelerated"} by ${Math.abs(ee)}% in the last 7 days. ${ee>=10?"Excellent momentum!":ee<0?"Consider promotional campaigns.":"Steady performance."}`,confidence:93,impact:Math.abs(ee)>15?"high":"medium",trend:ee>=0?"up":"down"});const te={};K.forEach(pe=>{const Le=pe.customer?.email;Le&&(te[Le]=(te[Le]||0)+1)});const X=Object.values(te).filter(pe=>pe>1).length,ce=Object.keys(te).length,F=ce>0?(X/ce*100).toFixed(1):0;J.push({id:Date.now()+3,type:"customer",title:"Customer Retention Analysis",description:`${F}% of customers are repeat buyers (${X} out of ${ce}). ${F>30?"Strong loyalty!":F>15?"Good retention.":"Focus on loyalty programs."}`,confidence:91,impact:"medium",trend:F>25?"up":"neutral"});const de=z.map(pe=>{const Le=Object.entries(W).find(([ot])=>ot===pe._id||ot===pe.name);return{...pe,salesCount:Le?Le[1]:0,turnoverRate:pe.stockQuantity>0?(Le?.[1]||0)/pe.stockQuantity:0}}).sort((pe,Le)=>Le.turnoverRate-pe.turnoverRate).filter(pe=>pe.salesCount===0&&pe.stockQuantity>0).length;de>0&&J.push({id:Date.now()+4,type:"inventory",title:"Inventory Turnover Alert",description:`${de} products have no sales activity. Consider discounts or bundling to improve turnover.`,confidence:89,impact:de>5?"high":"medium",trend:"warning"});const me=K.length>0?K.reduce((pe,Le)=>pe+(Number(Le.total)||0),0)/K.length:0,De=V.length>0?V.reduce((pe,Le)=>pe+(Number(Le.total)||0),0)/V.length:0,Ne=me>0?((De-me)/me*100).toFixed(1):0;J.push({id:Date.now()+5,type:"sales",title:"Average Order Value Trend",description:`Recent avg order value is $${De.toFixed(2)} (${Ne>=0?"+":""}${Ne}% vs overall avg of $${me.toFixed(2)}). ${Ne>10?"Customers are spending more!":Ne<-10?"Consider upselling strategies.":"Stable spending patterns."}`,confidence:90,impact:Math.abs(Ne)>15?"high":"medium",trend:Ne>=0?"up":"down"}),d([...c,...J]),R.success(`Generated ${J.length} new AI insights!`,{description:"Advanced analysis complete"})}catch(D){console.error("Error generating insights:",D),R.error("Failed to generate insights. Please try again.")}},children:[e.jsx(Ga,{className:"mr-2 h-4 w-4"}),_?"Loading...":"Generate Insights"]})]})]}),e.jsxs("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-4",children:[e.jsxs(se,{children:[e.jsxs(_e,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(Te,{className:"text-sm font-medium",children:"Sales Trend"}),e.jsx(aa,{className:"h-4 w-4 text-green-600"})]}),e.jsxs(oe,{children:[e.jsxs("div",{className:"text-2xl font-bold text-green-600",children:["+",g.revenueGrowth,"%"]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Revenue growth this month"})]})]}),e.jsxs(se,{children:[e.jsxs(_e,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(Te,{className:"text-sm font-medium",children:"Customer Satisfaction"}),e.jsx(rn,{className:"h-4 w-4 text-blue-600"})]}),e.jsxs(oe,{children:[e.jsxs("div",{className:"text-2xl font-bold text-blue-600",children:[g.customerSatisfaction,"%"]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Based on feedback analysis"})]})]}),e.jsxs(se,{children:[e.jsxs(_e,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(Te,{className:"text-sm font-medium",children:"Inventory Optimization"}),e.jsx(_o,{className:"h-4 w-4 text-orange-600"})]}),e.jsxs(oe,{children:[e.jsxs("div",{className:"text-2xl font-bold text-orange-600",children:[g.inventoryOptimization,"%"]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Efficiency score"})]})]}),e.jsxs(se,{children:[e.jsxs(_e,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(Te,{className:"text-sm font-medium",children:"AI Confidence"}),e.jsx(jo,{className:"h-4 w-4 text-purple-600"})]}),e.jsxs(oe,{children:[e.jsx("div",{className:"text-2xl font-bold text-purple-600",children:"89%"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Average prediction accuracy"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx(Ns,{title:"Predictive Sales Trends",description:"Real-time sales data and forecasting",type:"area",data:v.salesData.length>0?v.salesData:[{name:"Loading...",value:0}],height:350,autoRefresh:!0,refreshInterval:12e4}),e.jsx(Ns,{title:"Customer Behavior Analysis",description:"Hourly sales patterns from actual orders",type:"line",data:v.customerData.length>0?v.customerData:[{name:"Loading...",value:0}],height:350,autoRefresh:!0,refreshInterval:12e4})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx(Ns,{title:"Market Opportunities",description:"Monthly revenue trends",type:"bar",data:v.salesData.length>0?v.salesData.slice(-12):[{name:"Loading...",value:0}],height:300}),e.jsx(Ns,{title:"Risk Assessment",description:"Business risk analysis by AI",type:"pie",data:[{name:"Low Risk",value:60},{name:"Medium Risk",value:30},{name:"High Risk",value:10}],height:300,showControls:!1}),e.jsx(Ns,{title:"Performance Optimization",description:"AI-suggested improvements",type:"composed",data:v.salesData.length>0?v.salesData.slice(-20):[{name:"Loading...",value:0}],height:300})]}),e.jsxs("div",{className:"grid gap-6 lg:grid-cols-2",children:[e.jsxs(se,{children:[e.jsxs(_e,{children:[e.jsxs(Te,{className:"flex items-center gap-2",children:[e.jsx(jo,{className:"h-5 w-5"}),"AI Insights"]}),e.jsx(vt,{children:"Data-driven insights about your business performance"})]}),e.jsx(oe,{children:e.jsx("div",{className:"space-y-4",children:c.map(D=>{const M=Q(D.type),P=q(D.trend);return e.jsxs("div",{className:"p-4 border rounded-lg hover:bg-gray-50 transition-colors",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(M,{className:"h-5 w-5 text-blue-600"}),e.jsx("h3",{className:"font-semibold",children:D.title})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(P,{className:"h-4 w-4 text-gray-500"}),e.jsxs(ze,{variant:"outline",children:[D.confidence,"% confidence"]})]})]}),e.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:D.description}),e.jsxs(ze,{className:D.impact==="high"?"bg-red-100 text-red-800":D.impact==="medium"?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800",children:[D.impact," impact"]})]},D.id)})})})]}),e.jsxs(se,{children:[e.jsxs(_e,{children:[e.jsxs(Te,{className:"flex items-center gap-2",children:[e.jsx(km,{className:"h-5 w-5"}),"AI Recommendations"]}),e.jsx(vt,{children:"Actionable suggestions to improve your business"})]}),e.jsx(oe,{children:e.jsx("div",{className:"space-y-4",children:h.map(D=>e.jsxs("div",{className:"p-4 border rounded-lg hover:bg-gray-50 transition-colors",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsx("h3",{className:"font-semibold",children:D.title}),e.jsxs(ze,{className:U(D.priority),children:[D.priority," priority"]})]}),e.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:D.description}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(ze,{variant:"outline",children:D.category}),e.jsx(I,{size:"sm",variant:"outline",children:"Apply"})]})]},D.id))})})]})]}),e.jsx("div",{className:"mt-8",children:e.jsx(E9,{title:"Advanced AI Business Intelligence",autoStart:!0,showNotifications:!0,updateInterval:2e4})}),e.jsxs("div",{className:"mt-8 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"AI-Powered Analytics"}),e.jsx(ze,{variant:"secondary",children:"Predictive Insights"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx(Ns,{title:"Predictive Sales Trends",defaultType:"line",height:350,autoRefresh:!0,refreshInterval:25e3}),e.jsx(Ns,{title:"Customer Behavior Analysis",defaultType:"area",height:350,autoRefresh:!0,refreshInterval:3e4})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx(Ns,{title:"Market Opportunities",defaultType:"bar",height:350,autoRefresh:!0,refreshInterval:45e3}),e.jsx(Ns,{title:"Risk Assessment",defaultType:"pie",height:350,autoRefresh:!1,refreshInterval:6e4})]}),e.jsx("div",{className:"w-full",children:e.jsx(Ns,{title:"Performance Optimization Insights",defaultType:"composed",height:400,autoRefresh:!0,refreshInterval:15e3})})]})]})};var lm={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */var D9=lm.exports,G2;function P9(){return G2||(G2=1,(function(t,s){(function(a,n){n(s)})(D9,(function(a){var n="1.9.4";function i(l){var m,j,k,H;for(j=1,k=arguments.length;j<k;j++){H=arguments[j];for(m in H)l[m]=H[m]}return l}var c=Object.create||(function(){function l(){}return function(m){return l.prototype=m,new l}})();function d(l,m){var j=Array.prototype.slice;if(l.bind)return l.bind.apply(l,j.call(arguments,1));var k=j.call(arguments,2);return function(){return l.apply(m,k.length?k.concat(j.call(arguments)):arguments)}}var h=0;function f(l){return"_leaflet_id"in l||(l._leaflet_id=++h),l._leaflet_id}function g(l,m,j){var k,H,le,Ee;return Ee=function(){k=!1,H&&(le.apply(j,H),H=!1)},le=function(){k?H=arguments:(l.apply(j,arguments),setTimeout(Ee,m),k=!0)},le}function p(l,m,j){var k=m[1],H=m[0],le=k-H;return l===k&&j?l:((l-H)%le+le)%le+H}function v(){return!1}function y(l,m){if(m===!1)return l;var j=Math.pow(10,m===void 0?6:m);return Math.round(l*j)/j}function _(l){return l.trim?l.trim():l.replace(/^\s+|\s+$/g,"")}function S(l){return _(l).split(/\s+/)}function b(l,m){Object.prototype.hasOwnProperty.call(l,"options")||(l.options=l.options?c(l.options):{});for(var j in m)l.options[j]=m[j];return l.options}function T(l,m,j){var k=[];for(var H in l)k.push(encodeURIComponent(j?H.toUpperCase():H)+"="+encodeURIComponent(l[H]));return(!m||m.indexOf("?")===-1?"?":"&")+k.join("&")}var E=/\{ *([\w_ -]+) *\}/g;function A(l,m){return l.replace(E,function(j,k){var H=m[k];if(H===void 0)throw new Error("No value provided for variable "+j);return typeof H=="function"&&(H=H(m)),H})}var O=Array.isArray||function(l){return Object.prototype.toString.call(l)==="[object Array]"};function Q(l,m){for(var j=0;j<l.length;j++)if(l[j]===m)return j;return-1}var q="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function U(l){return window["webkit"+l]||window["moz"+l]||window["ms"+l]}var D=0;function M(l){var m=+new Date,j=Math.max(0,16-(m-D));return D=m+j,window.setTimeout(l,j)}var P=window.requestAnimationFrame||U("RequestAnimationFrame")||M,G=window.cancelAnimationFrame||U("CancelAnimationFrame")||U("CancelRequestAnimationFrame")||function(l){window.clearTimeout(l)};function K(l,m,j){if(j&&P===M)l.call(m);else return P.call(window,d(l,m))}function z(l){l&&G.call(window,l)}var J={__proto__:null,extend:i,create:c,bind:d,get lastId(){return h},stamp:f,throttle:g,wrapNum:p,falseFn:v,formatNum:y,trim:_,splitWords:S,setOptions:b,getParamString:T,template:A,isArray:O,indexOf:Q,emptyImageUrl:q,requestFn:P,cancelFn:G,requestAnimFrame:K,cancelAnimFrame:z};function W(){}W.extend=function(l){var m=function(){b(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},j=m.__super__=this.prototype,k=c(j);k.constructor=m,m.prototype=k;for(var H in this)Object.prototype.hasOwnProperty.call(this,H)&&H!=="prototype"&&H!=="__super__"&&(m[H]=this[H]);return l.statics&&i(m,l.statics),l.includes&&(he(l.includes),i.apply(null,[k].concat(l.includes))),i(k,l),delete k.statics,delete k.includes,k.options&&(k.options=j.options?c(j.options):{},i(k.options,l.options)),k._initHooks=[],k.callInitHooks=function(){if(!this._initHooksCalled){j.callInitHooks&&j.callInitHooks.call(this),this._initHooksCalled=!0;for(var le=0,Ee=k._initHooks.length;le<Ee;le++)k._initHooks[le].call(this)}},m},W.include=function(l){var m=this.prototype.options;return i(this.prototype,l),l.options&&(this.prototype.options=m,this.mergeOptions(l.options)),this},W.mergeOptions=function(l){return i(this.prototype.options,l),this},W.addInitHook=function(l){var m=Array.prototype.slice.call(arguments,1),j=typeof l=="function"?l:function(){this[l].apply(this,m)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(j),this};function he(l){if(!(typeof L>"u"||!L||!L.Mixin)){l=O(l)?l:[l];for(var m=0;m<l.length;m++)l[m]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var V={on:function(l,m,j){if(typeof l=="object")for(var k in l)this._on(k,l[k],m);else{l=S(l);for(var H=0,le=l.length;H<le;H++)this._on(l[H],m,j)}return this},off:function(l,m,j){if(!arguments.length)delete this._events;else if(typeof l=="object")for(var k in l)this._off(k,l[k],m);else{l=S(l);for(var H=arguments.length===1,le=0,Ee=l.length;le<Ee;le++)H?this._off(l[le]):this._off(l[le],m,j)}return this},_on:function(l,m,j,k){if(typeof m!="function"){console.warn("wrong listener type: "+typeof m);return}if(this._listens(l,m,j)===!1){j===this&&(j=void 0);var H={fn:m,ctx:j};k&&(H.once=!0),this._events=this._events||{},this._events[l]=this._events[l]||[],this._events[l].push(H)}},_off:function(l,m,j){var k,H,le;if(this._events&&(k=this._events[l],!!k)){if(arguments.length===1){if(this._firingCount)for(H=0,le=k.length;H<le;H++)k[H].fn=v;delete this._events[l];return}if(typeof m!="function"){console.warn("wrong listener type: "+typeof m);return}var Ee=this._listens(l,m,j);if(Ee!==!1){var Be=k[Ee];this._firingCount&&(Be.fn=v,this._events[l]=k=k.slice()),k.splice(Ee,1)}}},fire:function(l,m,j){if(!this.listens(l,j))return this;var k=i({},m,{type:l,target:this,sourceTarget:m&&m.sourceTarget||this});if(this._events){var H=this._events[l];if(H){this._firingCount=this._firingCount+1||1;for(var le=0,Ee=H.length;le<Ee;le++){var Be=H[le],Ke=Be.fn;Be.once&&this.off(l,Ke,Be.ctx),Ke.call(Be.ctx||this,k)}this._firingCount--}}return j&&this._propagateEvent(k),this},listens:function(l,m,j,k){typeof l!="string"&&console.warn('"string" type argument expected');var H=m;typeof m!="function"&&(k=!!m,H=void 0,j=void 0);var le=this._events&&this._events[l];if(le&&le.length&&this._listens(l,H,j)!==!1)return!0;if(k){for(var Ee in this._eventParents)if(this._eventParents[Ee].listens(l,m,j,k))return!0}return!1},_listens:function(l,m,j){if(!this._events)return!1;var k=this._events[l]||[];if(!m)return!!k.length;j===this&&(j=void 0);for(var H=0,le=k.length;H<le;H++)if(k[H].fn===m&&k[H].ctx===j)return H;return!1},once:function(l,m,j){if(typeof l=="object")for(var k in l)this._on(k,l[k],m,!0);else{l=S(l);for(var H=0,le=l.length;H<le;H++)this._on(l[H],m,j,!0)}return this},addEventParent:function(l){return this._eventParents=this._eventParents||{},this._eventParents[f(l)]=l,this},removeEventParent:function(l){return this._eventParents&&delete this._eventParents[f(l)],this},_propagateEvent:function(l){for(var m in this._eventParents)this._eventParents[m].fire(l.type,i({layer:l.target,propagatedFrom:l.target},l),!0)}};V.addEventListener=V.on,V.removeEventListener=V.clearAllEventListeners=V.off,V.addOneTimeEventListener=V.once,V.fireEvent=V.fire,V.hasEventListeners=V.listens;var ae=W.extend(V);function ge(l,m,j){this.x=j?Math.round(l):l,this.y=j?Math.round(m):m}var Z=Math.trunc||function(l){return l>0?Math.floor(l):Math.ceil(l)};ge.prototype={clone:function(){return new ge(this.x,this.y)},add:function(l){return this.clone()._add(ee(l))},_add:function(l){return this.x+=l.x,this.y+=l.y,this},subtract:function(l){return this.clone()._subtract(ee(l))},_subtract:function(l){return this.x-=l.x,this.y-=l.y,this},divideBy:function(l){return this.clone()._divideBy(l)},_divideBy:function(l){return this.x/=l,this.y/=l,this},multiplyBy:function(l){return this.clone()._multiplyBy(l)},_multiplyBy:function(l){return this.x*=l,this.y*=l,this},scaleBy:function(l){return new ge(this.x*l.x,this.y*l.y)},unscaleBy:function(l){return new ge(this.x/l.x,this.y/l.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=Z(this.x),this.y=Z(this.y),this},distanceTo:function(l){l=ee(l);var m=l.x-this.x,j=l.y-this.y;return Math.sqrt(m*m+j*j)},equals:function(l){return l=ee(l),l.x===this.x&&l.y===this.y},contains:function(l){return l=ee(l),Math.abs(l.x)<=Math.abs(this.x)&&Math.abs(l.y)<=Math.abs(this.y)},toString:function(){return"Point("+y(this.x)+", "+y(this.y)+")"}};function ee(l,m,j){return l instanceof ge?l:O(l)?new ge(l[0],l[1]):l==null?l:typeof l=="object"&&"x"in l&&"y"in l?new ge(l.x,l.y):new ge(l,m,j)}function te(l,m){if(l)for(var j=m?[l,m]:l,k=0,H=j.length;k<H;k++)this.extend(j[k])}te.prototype={extend:function(l){var m,j;if(!l)return this;if(l instanceof ge||typeof l[0]=="number"||"x"in l)m=j=ee(l);else if(l=X(l),m=l.min,j=l.max,!m||!j)return this;return!this.min&&!this.max?(this.min=m.clone(),this.max=j.clone()):(this.min.x=Math.min(m.x,this.min.x),this.max.x=Math.max(j.x,this.max.x),this.min.y=Math.min(m.y,this.min.y),this.max.y=Math.max(j.y,this.max.y)),this},getCenter:function(l){return ee((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,l)},getBottomLeft:function(){return ee(this.min.x,this.max.y)},getTopRight:function(){return ee(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(l){var m,j;return typeof l[0]=="number"||l instanceof ge?l=ee(l):l=X(l),l instanceof te?(m=l.min,j=l.max):m=j=l,m.x>=this.min.x&&j.x<=this.max.x&&m.y>=this.min.y&&j.y<=this.max.y},intersects:function(l){l=X(l);var m=this.min,j=this.max,k=l.min,H=l.max,le=H.x>=m.x&&k.x<=j.x,Ee=H.y>=m.y&&k.y<=j.y;return le&&Ee},overlaps:function(l){l=X(l);var m=this.min,j=this.max,k=l.min,H=l.max,le=H.x>m.x&&k.x<j.x,Ee=H.y>m.y&&k.y<j.y;return le&&Ee},isValid:function(){return!!(this.min&&this.max)},pad:function(l){var m=this.min,j=this.max,k=Math.abs(m.x-j.x)*l,H=Math.abs(m.y-j.y)*l;return X(ee(m.x-k,m.y-H),ee(j.x+k,j.y+H))},equals:function(l){return l?(l=X(l),this.min.equals(l.getTopLeft())&&this.max.equals(l.getBottomRight())):!1}};function X(l,m){return!l||l instanceof te?l:new te(l,m)}function ce(l,m){if(l)for(var j=m?[l,m]:l,k=0,H=j.length;k<H;k++)this.extend(j[k])}ce.prototype={extend:function(l){var m=this._southWest,j=this._northEast,k,H;if(l instanceof re)k=l,H=l;else if(l instanceof ce){if(k=l._southWest,H=l._northEast,!k||!H)return this}else return l?this.extend(de(l)||F(l)):this;return!m&&!j?(this._southWest=new re(k.lat,k.lng),this._northEast=new re(H.lat,H.lng)):(m.lat=Math.min(k.lat,m.lat),m.lng=Math.min(k.lng,m.lng),j.lat=Math.max(H.lat,j.lat),j.lng=Math.max(H.lng,j.lng)),this},pad:function(l){var m=this._southWest,j=this._northEast,k=Math.abs(m.lat-j.lat)*l,H=Math.abs(m.lng-j.lng)*l;return new ce(new re(m.lat-k,m.lng-H),new re(j.lat+k,j.lng+H))},getCenter:function(){return new re((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new re(this.getNorth(),this.getWest())},getSouthEast:function(){return new re(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(l){typeof l[0]=="number"||l instanceof re||"lat"in l?l=de(l):l=F(l);var m=this._southWest,j=this._northEast,k,H;return l instanceof ce?(k=l.getSouthWest(),H=l.getNorthEast()):k=H=l,k.lat>=m.lat&&H.lat<=j.lat&&k.lng>=m.lng&&H.lng<=j.lng},intersects:function(l){l=F(l);var m=this._southWest,j=this._northEast,k=l.getSouthWest(),H=l.getNorthEast(),le=H.lat>=m.lat&&k.lat<=j.lat,Ee=H.lng>=m.lng&&k.lng<=j.lng;return le&&Ee},overlaps:function(l){l=F(l);var m=this._southWest,j=this._northEast,k=l.getSouthWest(),H=l.getNorthEast(),le=H.lat>m.lat&&k.lat<j.lat,Ee=H.lng>m.lng&&k.lng<j.lng;return le&&Ee},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(l,m){return l?(l=F(l),this._southWest.equals(l.getSouthWest(),m)&&this._northEast.equals(l.getNorthEast(),m)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function F(l,m){return l instanceof ce?l:new ce(l,m)}function re(l,m,j){if(isNaN(l)||isNaN(m))throw new Error("Invalid LatLng object: ("+l+", "+m+")");this.lat=+l,this.lng=+m,j!==void 0&&(this.alt=+j)}re.prototype={equals:function(l,m){if(!l)return!1;l=de(l);var j=Math.max(Math.abs(this.lat-l.lat),Math.abs(this.lng-l.lng));return j<=(m===void 0?1e-9:m)},toString:function(l){return"LatLng("+y(this.lat,l)+", "+y(this.lng,l)+")"},distanceTo:function(l){return De.distance(this,de(l))},wrap:function(){return De.wrapLatLng(this)},toBounds:function(l){var m=180*l/40075017,j=m/Math.cos(Math.PI/180*this.lat);return F([this.lat-m,this.lng-j],[this.lat+m,this.lng+j])},clone:function(){return new re(this.lat,this.lng,this.alt)}};function de(l,m,j){return l instanceof re?l:O(l)&&typeof l[0]!="object"?l.length===3?new re(l[0],l[1],l[2]):l.length===2?new re(l[0],l[1]):null:l==null?l:typeof l=="object"&&"lat"in l?new re(l.lat,"lng"in l?l.lng:l.lon,l.alt):m===void 0?null:new re(l,m,j)}var me={latLngToPoint:function(l,m){var j=this.projection.project(l),k=this.scale(m);return this.transformation._transform(j,k)},pointToLatLng:function(l,m){var j=this.scale(m),k=this.transformation.untransform(l,j);return this.projection.unproject(k)},project:function(l){return this.projection.project(l)},unproject:function(l){return this.projection.unproject(l)},scale:function(l){return 256*Math.pow(2,l)},zoom:function(l){return Math.log(l/256)/Math.LN2},getProjectedBounds:function(l){if(this.infinite)return null;var m=this.projection.bounds,j=this.scale(l),k=this.transformation.transform(m.min,j),H=this.transformation.transform(m.max,j);return new te(k,H)},infinite:!1,wrapLatLng:function(l){var m=this.wrapLng?p(l.lng,this.wrapLng,!0):l.lng,j=this.wrapLat?p(l.lat,this.wrapLat,!0):l.lat,k=l.alt;return new re(j,m,k)},wrapLatLngBounds:function(l){var m=l.getCenter(),j=this.wrapLatLng(m),k=m.lat-j.lat,H=m.lng-j.lng;if(k===0&&H===0)return l;var le=l.getSouthWest(),Ee=l.getNorthEast(),Be=new re(le.lat-k,le.lng-H),Ke=new re(Ee.lat-k,Ee.lng-H);return new ce(Be,Ke)}},De=i({},me,{wrapLng:[-180,180],R:6371e3,distance:function(l,m){var j=Math.PI/180,k=l.lat*j,H=m.lat*j,le=Math.sin((m.lat-l.lat)*j/2),Ee=Math.sin((m.lng-l.lng)*j/2),Be=le*le+Math.cos(k)*Math.cos(H)*Ee*Ee,Ke=2*Math.atan2(Math.sqrt(Be),Math.sqrt(1-Be));return this.R*Ke}}),Ne=6378137,pe={R:Ne,MAX_LATITUDE:85.0511287798,project:function(l){var m=Math.PI/180,j=this.MAX_LATITUDE,k=Math.max(Math.min(j,l.lat),-j),H=Math.sin(k*m);return new ge(this.R*l.lng*m,this.R*Math.log((1+H)/(1-H))/2)},unproject:function(l){var m=180/Math.PI;return new re((2*Math.atan(Math.exp(l.y/this.R))-Math.PI/2)*m,l.x*m/this.R)},bounds:(function(){var l=Ne*Math.PI;return new te([-l,-l],[l,l])})()};function Le(l,m,j,k){if(O(l)){this._a=l[0],this._b=l[1],this._c=l[2],this._d=l[3];return}this._a=l,this._b=m,this._c=j,this._d=k}Le.prototype={transform:function(l,m){return this._transform(l.clone(),m)},_transform:function(l,m){return m=m||1,l.x=m*(this._a*l.x+this._b),l.y=m*(this._c*l.y+this._d),l},untransform:function(l,m){return m=m||1,new ge((l.x/m-this._b)/this._a,(l.y/m-this._d)/this._c)}};function ot(l,m,j,k){return new Le(l,m,j,k)}var Pt=i({},De,{code:"EPSG:3857",projection:pe,transformation:(function(){var l=.5/(Math.PI*pe.R);return ot(l,.5,-l,.5)})()}),Dt=i({},Pt,{code:"EPSG:900913"});function Ct(l){return document.createElementNS("http://www.w3.org/2000/svg",l)}function Lt(l,m){var j="",k,H,le,Ee,Be,Ke;for(k=0,le=l.length;k<le;k++){for(Be=l[k],H=0,Ee=Be.length;H<Ee;H++)Ke=Be[H],j+=(H?"L":"M")+Ke.x+" "+Ke.y;j+=m?Nt.svg?"z":"x":""}return j||"M0 0"}var yt=document.documentElement.style,ys="ActiveXObject"in window,Es=ys&&!document.addEventListener,Hs="msLaunchUri"in navigator&&!("documentMode"in document),bs=gs("webkit"),$s=gs("android"),ws=gs("android 2")||gs("android 3"),$t=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),Na=$s&&gs("Google")&&$t<537&&!("AudioNode"in window),Me=!!window.opera,ht=!Hs&&gs("chrome"),He=gs("gecko")&&!bs&&!Me&&!ys,Mt=!ht&&gs("safari"),Rt=gs("phantom"),xs="OTransition"in yt,Ks=navigator.platform.indexOf("Win")===0,Ze=ys&&"transition"in yt,Xe="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!ws,Se="MozPerspective"in yt,Ce=!window.L_DISABLE_3D&&(Ze||Xe||Se)&&!xs&&!Rt,rt=typeof orientation<"u"||gs("mobile"),Qe=rt&&bs,jt=rt&&Xe,Ot=!window.PointerEvent&&window.MSPointerEvent,ts=!!(window.PointerEvent||Ot),js="ontouchstart"in window||!!window.TouchEvent,Zt=!window.L_NO_TOUCH&&(js||ts),Ca=rt&&Me,Ta=rt&&He,Qa=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Ps=(function(){var l=!1;try{var m=Object.defineProperty({},"passive",{get:function(){l=!0}});window.addEventListener("testPassiveEventSupport",v,m),window.removeEventListener("testPassiveEventSupport",v,m)}catch{}return l})(),ie=(function(){return!!document.createElement("canvas").getContext})(),Re=!!(document.createElementNS&&Ct("svg").createSVGRect),tt=!!Re&&(function(){var l=document.createElement("div");return l.innerHTML="<svg/>",(l.firstChild&&l.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"})(),wt=!Re&&(function(){try{var l=document.createElement("div");l.innerHTML='<v:shape adj="1"/>';var m=l.firstChild;return m.style.behavior="url(#default#VML)",m&&typeof m.adj=="object"}catch{return!1}})(),bt=navigator.platform.indexOf("Mac")===0,rs=navigator.platform.indexOf("Linux")===0;function gs(l){return navigator.userAgent.toLowerCase().indexOf(l)>=0}var Nt={ie:ys,ielt9:Es,edge:Hs,webkit:bs,android:$s,android23:ws,androidStock:Na,opera:Me,chrome:ht,gecko:He,safari:Mt,phantom:Rt,opera12:xs,win:Ks,ie3d:Ze,webkit3d:Xe,gecko3d:Se,any3d:Ce,mobile:rt,mobileWebkit:Qe,mobileWebkit3d:jt,msPointer:Ot,pointer:ts,touch:Zt,touchNative:js,mobileOpera:Ca,mobileGecko:Ta,retina:Qa,passiveEvents:Ps,canvas:ie,svg:Re,vml:wt,inlineSvg:tt,mac:bt,linux:rs},ne=Nt.msPointer?"MSPointerDown":"pointerdown",ye=Nt.msPointer?"MSPointerMove":"pointermove",ve=Nt.msPointer?"MSPointerUp":"pointerup",B=Nt.msPointer?"MSPointerCancel":"pointercancel",fe={touchstart:ne,touchmove:ye,touchend:ve,touchcancel:B},je={touchstart:dt,touchmove:Pe,touchend:Pe,touchcancel:Pe},Ue={},Je=!1;function Ve(l,m,j){return m==="touchstart"&&st(),je[m]?(j=je[m].bind(this,j),l.addEventListener(fe[m],j,!1),j):(console.warn("wrong event specified:",m),v)}function $e(l,m,j){if(!fe[m]){console.warn("wrong event specified:",m);return}l.removeEventListener(fe[m],j,!1)}function We(l){Ue[l.pointerId]=l}function pt(l){Ue[l.pointerId]&&(Ue[l.pointerId]=l)}function be(l){delete Ue[l.pointerId]}function st(){Je||(document.addEventListener(ne,We,!0),document.addEventListener(ye,pt,!0),document.addEventListener(ve,be,!0),document.addEventListener(B,be,!0),Je=!0)}function Pe(l,m){if(m.pointerType!==(m.MSPOINTER_TYPE_MOUSE||"mouse")){m.touches=[];for(var j in Ue)m.touches.push(Ue[j]);m.changedTouches=[m],l(m)}}function dt(l,m){m.MSPOINTER_TYPE_TOUCH&&m.pointerType===m.MSPOINTER_TYPE_TOUCH&&Ja(m),Pe(l,m)}function gt(l){var m={},j,k;for(k in l)j=l[k],m[k]=j&&j.bind?j.bind(l):j;return l=m,m.type="dblclick",m.detail=2,m.isTrusted=!1,m._simulated=!0,m}var Ft=200;function lt(l,m){l.addEventListener("dblclick",m);var j=0,k;function H(le){if(le.detail!==1){k=le.detail;return}if(!(le.pointerType==="mouse"||le.sourceCapabilities&&!le.sourceCapabilities.firesTouchEvents)){var Ee=vc(le);if(!(Ee.some(function(Ke){return Ke instanceof HTMLLabelElement&&Ke.attributes.for})&&!Ee.some(function(Ke){return Ke instanceof HTMLInputElement||Ke instanceof HTMLSelectElement}))){var Be=Date.now();Be-j<=Ft?(k++,k===2&&m(gt(le))):k=1,j=Be}}}return l.addEventListener("click",H),{dblclick:m,simDblclick:H}}function ss(l,m){l.removeEventListener("dblclick",m.dblclick),l.removeEventListener("click",m.simDblclick)}var xn=fc(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Rn=fc(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),$n=Rn==="webkitTransition"||Rn==="OTransition"?Rn+"End":"transitionend";function Wn(l){return typeof l=="string"?document.getElementById(l):l}function Ln(l,m){var j=l.style[m]||l.currentStyle&&l.currentStyle[m];if((!j||j==="auto")&&document.defaultView){var k=document.defaultView.getComputedStyle(l,null);j=k?k[m]:null}return j==="auto"?null:j}function ds(l,m,j){var k=document.createElement(l);return k.className=m||"",j&&j.appendChild(k),k}function na(l){var m=l.parentNode;m&&m.removeChild(l)}function In(l){for(;l.firstChild;)l.removeChild(l.firstChild)}function ln(l){var m=l.parentNode;m&&m.lastChild!==l&&m.appendChild(l)}function Ti(l){var m=l.parentNode;m&&m.firstChild!==l&&m.insertBefore(l,m.firstChild)}function mc(l,m){if(l.classList!==void 0)return l.classList.contains(m);var j=Sd(l);return j.length>0&&new RegExp("(^|\\s)"+m+"(\\s|$)").test(j)}function hs(l,m){if(l.classList!==void 0)for(var j=S(m),k=0,H=j.length;k<H;k++)l.classList.add(j[k]);else if(!mc(l,m)){var le=Sd(l);ul(l,(le?le+" ":"")+m)}}function La(l,m){l.classList!==void 0?l.classList.remove(m):ul(l,_((" "+Sd(l)+" ").replace(" "+m+" "," ")))}function ul(l,m){l.className.baseVal===void 0?l.className=m:l.className.baseVal=m}function Sd(l){return l.correspondingElement&&(l=l.correspondingElement),l.className.baseVal===void 0?l.className:l.className.baseVal}function ka(l,m){"opacity"in l.style?l.style.opacity=m:"filter"in l.style&&sh(l,m)}function sh(l,m){var j=!1,k="DXImageTransform.Microsoft.Alpha";try{j=l.filters.item(k)}catch{if(m===1)return}m=Math.round(m*100),j?(j.Enabled=m!==100,j.Opacity=m):l.style.filter+=" progid:"+k+"(opacity="+m+")"}function fc(l){for(var m=document.documentElement.style,j=0;j<l.length;j++)if(l[j]in m)return l[j];return!1}function ki(l,m,j){var k=m||new ge(0,0);l.style[xn]=(Nt.ie3d?"translate("+k.x+"px,"+k.y+"px)":"translate3d("+k.x+"px,"+k.y+"px,0)")+(j?" scale("+j+")":"")}function wa(l,m){l._leaflet_pos=m,Nt.any3d?ki(l,m):(l.style.left=m.x+"px",l.style.top=m.y+"px")}function Ji(l){return l._leaflet_pos||new ge(0,0)}var hl,ii,ah;if("onselectstart"in document)hl=function(){us(window,"selectstart",Ja)},ii=function(){ra(window,"selectstart",Ja)};else{var ml=fc(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);hl=function(){if(ml){var l=document.documentElement.style;ah=l[ml],l[ml]="none"}},ii=function(){ml&&(document.documentElement.style[ml]=ah,ah=void 0)}}function _d(){us(window,"dragstart",Ja)}function xc(){ra(window,"dragstart",Ja)}var Cd,nh;function fl(l){for(;l.tabIndex===-1;)l=l.parentNode;l.style&&(_r(),Cd=l,nh=l.style.outlineStyle,l.style.outlineStyle="none",us(window,"keydown",_r))}function _r(){Cd&&(Cd.style.outlineStyle=nh,Cd=void 0,nh=void 0,ra(window,"keydown",_r))}function Td(l){do l=l.parentNode;while((!l.offsetWidth||!l.offsetHeight)&&l!==document.body);return l}function pc(l){var m=l.getBoundingClientRect();return{x:m.width/l.offsetWidth||1,y:m.height/l.offsetHeight||1,boundingClientRect:m}}var xl={__proto__:null,TRANSFORM:xn,TRANSITION:Rn,TRANSITION_END:$n,get:Wn,getStyle:Ln,create:ds,remove:na,empty:In,toFront:ln,toBack:Ti,hasClass:mc,addClass:hs,removeClass:La,setClass:ul,getClass:Sd,setOpacity:ka,testProp:fc,setTransform:ki,setPosition:wa,getPosition:Ji,get disableTextSelection(){return hl},get enableTextSelection(){return ii},disableImageDrag:_d,enableImageDrag:xc,preventOutline:fl,restoreOutline:_r,getSizedParentNode:Td,getScale:pc};function us(l,m,j,k){if(m&&typeof m=="object")for(var H in m)Wr(l,H,m[H],j);else{m=S(m);for(var le=0,Ee=m.length;le<Ee;le++)Wr(l,m[le],j,k)}return this}var $r="_leaflet_events";function ra(l,m,j,k){if(arguments.length===1)rh(l),delete l[$r];else if(m&&typeof m=="object")for(var H in m)gc(l,H,m[H],j);else if(m=S(m),arguments.length===2)rh(l,function(Be){return Q(m,Be)!==-1});else for(var le=0,Ee=m.length;le<Ee;le++)gc(l,m[le],j,k);return this}function rh(l,m){for(var j in l[$r]){var k=j.split(/\d/)[0];(!m||m(k))&&gc(l,k,null,null,j)}}var Eo={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Wr(l,m,j,k){var H=m+f(j)+(k?"_"+f(k):"");if(l[$r]&&l[$r][H])return this;var le=function(Be){return j.call(k||l,Be||window.event)},Ee=le;!Nt.touchNative&&Nt.pointer&&m.indexOf("touch")===0?le=Ve(l,m,le):Nt.touch&&m==="dblclick"?le=lt(l,le):"addEventListener"in l?m==="touchstart"||m==="touchmove"||m==="wheel"||m==="mousewheel"?l.addEventListener(Eo[m]||m,le,Nt.passiveEvents?{passive:!1}:!1):m==="mouseenter"||m==="mouseleave"?(le=function(Be){Be=Be||window.event,Ei(l,Be)&&Ee(Be)},l.addEventListener(Eo[m],le,!1)):l.addEventListener(m,Ee,!1):l.attachEvent("on"+m,le),l[$r]=l[$r]||{},l[$r][H]=le}function gc(l,m,j,k,H){H=H||m+f(j)+(k?"_"+f(k):"");var le=l[$r]&&l[$r][H];if(!le)return this;!Nt.touchNative&&Nt.pointer&&m.indexOf("touch")===0?$e(l,m,le):Nt.touch&&m==="dblclick"?ss(l,le):"removeEventListener"in l?l.removeEventListener(Eo[m]||m,le,!1):l.detachEvent("on"+m,le),l[$r][H]=null}function Gr(l){return l.stopPropagation?l.stopPropagation():l.originalEvent?l.originalEvent._stopped=!0:l.cancelBubble=!0,this}function oi(l){return Wr(l,"wheel",Gr),this}function Ao(l){return us(l,"mousedown touchstart dblclick contextmenu",Gr),l._leaflet_disable_click=!0,this}function Ja(l){return l.preventDefault?l.preventDefault():l.returnValue=!1,this}function eo(l){return Ja(l),Gr(l),this}function vc(l){if(l.composedPath)return l.composedPath();for(var m=[],j=l.target;j;)m.push(j),j=j.parentNode;return m}function yc(l,m){if(!m)return new ge(l.clientX,l.clientY);var j=pc(m),k=j.boundingClientRect;return new ge((l.clientX-k.left)/j.x-m.clientLeft,(l.clientY-k.top)/j.y-m.clientTop)}var df=Nt.linux&&Nt.chrome?window.devicePixelRatio:Nt.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Gn(l){return Nt.edge?l.wheelDeltaY/2:l.deltaY&&l.deltaMode===0?-l.deltaY/df:l.deltaY&&l.deltaMode===1?-l.deltaY*20:l.deltaY&&l.deltaMode===2?-l.deltaY*60:l.deltaX||l.deltaZ?0:l.wheelDelta?(l.wheelDeltaY||l.wheelDelta)/2:l.detail&&Math.abs(l.detail)<32765?-l.detail*20:l.detail?l.detail/-32765*60:0}function Ei(l,m){var j=m.relatedTarget;if(!j)return!0;try{for(;j&&j!==l;)j=j.parentNode}catch{return!1}return j!==l}var kd={__proto__:null,on:us,off:ra,stopPropagation:Gr,disableScrollPropagation:oi,disableClickPropagation:Ao,preventDefault:Ja,stop:eo,getPropagationPath:vc,getMousePosition:yc,getWheelDelta:Gn,isExternalTarget:Ei,addListener:us,removeListener:ra},pl=ae.extend({run:function(l,m,j,k){this.stop(),this._el=l,this._inProgress=!0,this._duration=j||.25,this._easeOutPower=1/Math.max(k||.5,.2),this._startPos=Ji(l),this._offset=m.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=K(this._animate,this),this._step()},_step:function(l){var m=+new Date-this._startTime,j=this._duration*1e3;m<j?this._runFrame(this._easeOut(m/j),l):(this._runFrame(1),this._complete())},_runFrame:function(l,m){var j=this._startPos.add(this._offset.multiplyBy(l));m&&j._round(),wa(this._el,j),this.fire("step")},_complete:function(){z(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(l){return 1-Math.pow(1-l,this._easeOutPower)}}),zs=ae.extend({options:{crs:Pt,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(l,m){m=b(this,m),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(l),this._initLayout(),this._onResize=d(this._onResize,this),this._initEvents(),m.maxBounds&&this.setMaxBounds(m.maxBounds),m.zoom!==void 0&&(this._zoom=this._limitZoom(m.zoom)),m.center&&m.zoom!==void 0&&this.setView(de(m.center),m.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Rn&&Nt.any3d&&!Nt.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),us(this._proxy,$n,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(l,m,j){if(m=m===void 0?this._zoom:this._limitZoom(m),l=this._limitCenter(de(l),m,this.options.maxBounds),j=j||{},this._stop(),this._loaded&&!j.reset&&j!==!0){j.animate!==void 0&&(j.zoom=i({animate:j.animate},j.zoom),j.pan=i({animate:j.animate,duration:j.duration},j.pan));var k=this._zoom!==m?this._tryAnimatedZoom&&this._tryAnimatedZoom(l,m,j.zoom):this._tryAnimatedPan(l,j.pan);if(k)return clearTimeout(this._sizeTimer),this}return this._resetView(l,m,j.pan&&j.pan.noMoveStart),this},setZoom:function(l,m){return this._loaded?this.setView(this.getCenter(),l,{zoom:m}):(this._zoom=l,this)},zoomIn:function(l,m){return l=l||(Nt.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+l,m)},zoomOut:function(l,m){return l=l||(Nt.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-l,m)},setZoomAround:function(l,m,j){var k=this.getZoomScale(m),H=this.getSize().divideBy(2),le=l instanceof ge?l:this.latLngToContainerPoint(l),Ee=le.subtract(H).multiplyBy(1-1/k),Be=this.containerPointToLatLng(H.add(Ee));return this.setView(Be,m,{zoom:j})},_getBoundsCenterZoom:function(l,m){m=m||{},l=l.getBounds?l.getBounds():F(l);var j=ee(m.paddingTopLeft||m.padding||[0,0]),k=ee(m.paddingBottomRight||m.padding||[0,0]),H=this.getBoundsZoom(l,!1,j.add(k));if(H=typeof m.maxZoom=="number"?Math.min(m.maxZoom,H):H,H===1/0)return{center:l.getCenter(),zoom:H};var le=k.subtract(j).divideBy(2),Ee=this.project(l.getSouthWest(),H),Be=this.project(l.getNorthEast(),H),Ke=this.unproject(Ee.add(Be).divideBy(2).add(le),H);return{center:Ke,zoom:H}},fitBounds:function(l,m){if(l=F(l),!l.isValid())throw new Error("Bounds are not valid.");var j=this._getBoundsCenterZoom(l,m);return this.setView(j.center,j.zoom,m)},fitWorld:function(l){return this.fitBounds([[-90,-180],[90,180]],l)},panTo:function(l,m){return this.setView(l,this._zoom,{pan:m})},panBy:function(l,m){if(l=ee(l).round(),m=m||{},!l.x&&!l.y)return this.fire("moveend");if(m.animate!==!0&&!this.getSize().contains(l))return this._resetView(this.unproject(this.project(this.getCenter()).add(l)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new pl,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),m.noMoveStart||this.fire("movestart"),m.animate!==!1){hs(this._mapPane,"leaflet-pan-anim");var j=this._getMapPanePos().subtract(l).round();this._panAnim.run(this._mapPane,j,m.duration||.25,m.easeLinearity)}else this._rawPanBy(l),this.fire("move").fire("moveend");return this},flyTo:function(l,m,j){if(j=j||{},j.animate===!1||!Nt.any3d)return this.setView(l,m,j);this._stop();var k=this.project(this.getCenter()),H=this.project(l),le=this.getSize(),Ee=this._zoom;l=de(l),m=m===void 0?Ee:m;var Be=Math.max(le.x,le.y),Ke=Be*this.getZoomScale(Ee,m),mt=H.distanceTo(k)||1,Et=1.42,Wt=Et*Et;function As($a){var Oi=$a?-1:1,Mo=$a?Ke:Be,jh=Ke*Ke-Be*Be+Oi*Wt*Wt*mt*mt,Rc=2*Mo*Wt*mt,Lc=jh/Rc,co=Math.sqrt(Lc*Lc+1)-Lc,Mi=co<1e-9?-18:Math.log(co);return Mi}function Tn($a){return(Math.exp($a)-Math.exp(-$a))/2}function en($a){return(Math.exp($a)+Math.exp(-$a))/2}function yr($a){return Tn($a)/en($a)}var Ys=As(0);function Zs($a){return Be*(en(Ys)/en(Ys+Et*$a))}function Ls($a){return Be*(en(Ys)*yr(Ys+Et*$a)-Tn(Ys))/Wt}function oo($a){return 1-Math.pow(1-$a,1.5)}var Er=Date.now(),Vd=(As(1)-Ys)/Et,lo=j.duration?1e3*j.duration:1e3*Vd*.8;function yh(){var $a=(Date.now()-Er)/lo,Oi=oo($a)*Vd;$a<=1?(this._flyToFrame=K(yh,this),this._move(this.unproject(k.add(H.subtract(k).multiplyBy(Ls(Oi)/mt)),Ee),this.getScaleZoom(Be/Zs(Oi),Ee),{flyTo:!0})):this._move(l,m)._moveEnd(!0)}return this._moveStart(!0,j.noMoveStart),yh.call(this),this},flyToBounds:function(l,m){var j=this._getBoundsCenterZoom(l,m);return this.flyTo(j.center,j.zoom,m)},setMaxBounds:function(l){return l=F(l),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),l.isValid()?(this.options.maxBounds=l,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(l){var m=this.options.minZoom;return this.options.minZoom=l,this._loaded&&m!==l&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(l):this},setMaxZoom:function(l){var m=this.options.maxZoom;return this.options.maxZoom=l,this._loaded&&m!==l&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(l):this},panInsideBounds:function(l,m){this._enforcingBounds=!0;var j=this.getCenter(),k=this._limitCenter(j,this._zoom,F(l));return j.equals(k)||this.panTo(k,m),this._enforcingBounds=!1,this},panInside:function(l,m){m=m||{};var j=ee(m.paddingTopLeft||m.padding||[0,0]),k=ee(m.paddingBottomRight||m.padding||[0,0]),H=this.project(this.getCenter()),le=this.project(l),Ee=this.getPixelBounds(),Be=X([Ee.min.add(j),Ee.max.subtract(k)]),Ke=Be.getSize();if(!Be.contains(le)){this._enforcingBounds=!0;var mt=le.subtract(Be.getCenter()),Et=Be.extend(le).getSize().subtract(Ke);H.x+=mt.x<0?-Et.x:Et.x,H.y+=mt.y<0?-Et.y:Et.y,this.panTo(this.unproject(H),m),this._enforcingBounds=!1}return this},invalidateSize:function(l){if(!this._loaded)return this;l=i({animate:!1,pan:!0},l===!0?{animate:!0}:l);var m=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var j=this.getSize(),k=m.divideBy(2).round(),H=j.divideBy(2).round(),le=k.subtract(H);return!le.x&&!le.y?this:(l.animate&&l.pan?this.panBy(le):(l.pan&&this._rawPanBy(le),this.fire("move"),l.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(d(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:m,newSize:j}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(l){if(l=this._locateOptions=i({timeout:1e4,watch:!1},l),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var m=d(this._handleGeolocationResponse,this),j=d(this._handleGeolocationError,this);return l.watch?this._locationWatchId=navigator.geolocation.watchPosition(m,j,l):navigator.geolocation.getCurrentPosition(m,j,l),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(l){if(this._container._leaflet_id){var m=l.code,j=l.message||(m===1?"permission denied":m===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:m,message:"Geolocation error: "+j+"."})}},_handleGeolocationResponse:function(l){if(this._container._leaflet_id){var m=l.coords.latitude,j=l.coords.longitude,k=new re(m,j),H=k.toBounds(l.coords.accuracy*2),le=this._locateOptions;if(le.setView){var Ee=this.getBoundsZoom(H);this.setView(k,le.maxZoom?Math.min(Ee,le.maxZoom):Ee)}var Be={latlng:k,bounds:H,timestamp:l.timestamp};for(var Ke in l.coords)typeof l.coords[Ke]=="number"&&(Be[Ke]=l.coords[Ke]);this.fire("locationfound",Be)}},addHandler:function(l,m){if(!m)return this;var j=this[l]=new m(this);return this._handlers.push(j),this.options[l]&&j.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),na(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(z(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var l;for(l in this._layers)this._layers[l].remove();for(l in this._panes)na(this._panes[l]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(l,m){var j="leaflet-pane"+(l?" leaflet-"+l.replace("Pane","")+"-pane":""),k=ds("div",j,m||this._mapPane);return l&&(this._panes[l]=k),k},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var l=this.getPixelBounds(),m=this.unproject(l.getBottomLeft()),j=this.unproject(l.getTopRight());return new ce(m,j)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(l,m,j){l=F(l),j=ee(j||[0,0]);var k=this.getZoom()||0,H=this.getMinZoom(),le=this.getMaxZoom(),Ee=l.getNorthWest(),Be=l.getSouthEast(),Ke=this.getSize().subtract(j),mt=X(this.project(Be,k),this.project(Ee,k)).getSize(),Et=Nt.any3d?this.options.zoomSnap:1,Wt=Ke.x/mt.x,As=Ke.y/mt.y,Tn=m?Math.max(Wt,As):Math.min(Wt,As);return k=this.getScaleZoom(Tn,k),Et&&(k=Math.round(k/(Et/100))*(Et/100),k=m?Math.ceil(k/Et)*Et:Math.floor(k/Et)*Et),Math.max(H,Math.min(le,k))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new ge(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(l,m){var j=this._getTopLeftPoint(l,m);return new te(j,j.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(l){return this.options.crs.getProjectedBounds(l===void 0?this.getZoom():l)},getPane:function(l){return typeof l=="string"?this._panes[l]:l},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(l,m){var j=this.options.crs;return m=m===void 0?this._zoom:m,j.scale(l)/j.scale(m)},getScaleZoom:function(l,m){var j=this.options.crs;m=m===void 0?this._zoom:m;var k=j.zoom(l*j.scale(m));return isNaN(k)?1/0:k},project:function(l,m){return m=m===void 0?this._zoom:m,this.options.crs.latLngToPoint(de(l),m)},unproject:function(l,m){return m=m===void 0?this._zoom:m,this.options.crs.pointToLatLng(ee(l),m)},layerPointToLatLng:function(l){var m=ee(l).add(this.getPixelOrigin());return this.unproject(m)},latLngToLayerPoint:function(l){var m=this.project(de(l))._round();return m._subtract(this.getPixelOrigin())},wrapLatLng:function(l){return this.options.crs.wrapLatLng(de(l))},wrapLatLngBounds:function(l){return this.options.crs.wrapLatLngBounds(F(l))},distance:function(l,m){return this.options.crs.distance(de(l),de(m))},containerPointToLayerPoint:function(l){return ee(l).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(l){return ee(l).add(this._getMapPanePos())},containerPointToLatLng:function(l){var m=this.containerPointToLayerPoint(ee(l));return this.layerPointToLatLng(m)},latLngToContainerPoint:function(l){return this.layerPointToContainerPoint(this.latLngToLayerPoint(de(l)))},mouseEventToContainerPoint:function(l){return yc(l,this._container)},mouseEventToLayerPoint:function(l){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(l))},mouseEventToLatLng:function(l){return this.layerPointToLatLng(this.mouseEventToLayerPoint(l))},_initContainer:function(l){var m=this._container=Wn(l);if(m){if(m._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");us(m,"scroll",this._onScroll,this),this._containerId=f(m)},_initLayout:function(){var l=this._container;this._fadeAnimated=this.options.fadeAnimation&&Nt.any3d,hs(l,"leaflet-container"+(Nt.touch?" leaflet-touch":"")+(Nt.retina?" leaflet-retina":"")+(Nt.ielt9?" leaflet-oldie":"")+(Nt.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var m=Ln(l,"position");m!=="absolute"&&m!=="relative"&&m!=="fixed"&&m!=="sticky"&&(l.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var l=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),wa(this._mapPane,new ge(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(hs(l.markerPane,"leaflet-zoom-hide"),hs(l.shadowPane,"leaflet-zoom-hide"))},_resetView:function(l,m,j){wa(this._mapPane,new ge(0,0));var k=!this._loaded;this._loaded=!0,m=this._limitZoom(m),this.fire("viewprereset");var H=this._zoom!==m;this._moveStart(H,j)._move(l,m)._moveEnd(H),this.fire("viewreset"),k&&this.fire("load")},_moveStart:function(l,m){return l&&this.fire("zoomstart"),m||this.fire("movestart"),this},_move:function(l,m,j,k){m===void 0&&(m=this._zoom);var H=this._zoom!==m;return this._zoom=m,this._lastCenter=l,this._pixelOrigin=this._getNewPixelOrigin(l),k?j&&j.pinch&&this.fire("zoom",j):((H||j&&j.pinch)&&this.fire("zoom",j),this.fire("move",j)),this},_moveEnd:function(l){return l&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return z(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(l){wa(this._mapPane,this._getMapPanePos().subtract(l))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(l){this._targets={},this._targets[f(this._container)]=this;var m=l?ra:us;m(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&m(window,"resize",this._onResize,this),Nt.any3d&&this.options.transform3DLimit&&(l?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){z(this._resizeRequest),this._resizeRequest=K(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var l=this._getMapPanePos();Math.max(Math.abs(l.x),Math.abs(l.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(l,m){for(var j=[],k,H=m==="mouseout"||m==="mouseover",le=l.target||l.srcElement,Ee=!1;le;){if(k=this._targets[f(le)],k&&(m==="click"||m==="preclick")&&this._draggableMoved(k)){Ee=!0;break}if(k&&k.listens(m,!0)&&(H&&!Ei(le,l)||(j.push(k),H))||le===this._container)break;le=le.parentNode}return!j.length&&!Ee&&!H&&this.listens(m,!0)&&(j=[this]),j},_isClickDisabled:function(l){for(;l&&l!==this._container;){if(l._leaflet_disable_click)return!0;l=l.parentNode}},_handleDOMEvent:function(l){var m=l.target||l.srcElement;if(!(!this._loaded||m._leaflet_disable_events||l.type==="click"&&this._isClickDisabled(m))){var j=l.type;j==="mousedown"&&fl(m),this._fireDOMEvent(l,j)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(l,m,j){if(l.type==="click"){var k=i({},l);k.type="preclick",this._fireDOMEvent(k,k.type,j)}var H=this._findEventTargets(l,m);if(j){for(var le=[],Ee=0;Ee<j.length;Ee++)j[Ee].listens(m,!0)&&le.push(j[Ee]);H=le.concat(H)}if(H.length){m==="contextmenu"&&Ja(l);var Be=H[0],Ke={originalEvent:l};if(l.type!=="keypress"&&l.type!=="keydown"&&l.type!=="keyup"){var mt=Be.getLatLng&&(!Be._radius||Be._radius<=10);Ke.containerPoint=mt?this.latLngToContainerPoint(Be.getLatLng()):this.mouseEventToContainerPoint(l),Ke.layerPoint=this.containerPointToLayerPoint(Ke.containerPoint),Ke.latlng=mt?Be.getLatLng():this.layerPointToLatLng(Ke.layerPoint)}for(Ee=0;Ee<H.length;Ee++)if(H[Ee].fire(m,Ke,!0),Ke.originalEvent._stopped||H[Ee].options.bubblingMouseEvents===!1&&Q(this._mouseEvents,m)!==-1)return}},_draggableMoved:function(l){return l=l.dragging&&l.dragging.enabled()?l:this,l.dragging&&l.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var l=0,m=this._handlers.length;l<m;l++)this._handlers[l].disable()},whenReady:function(l,m){return this._loaded?l.call(m||this,{target:this}):this.on("load",l,m),this},_getMapPanePos:function(){return Ji(this._mapPane)||new ge(0,0)},_moved:function(){var l=this._getMapPanePos();return l&&!l.equals([0,0])},_getTopLeftPoint:function(l,m){var j=l&&m!==void 0?this._getNewPixelOrigin(l,m):this.getPixelOrigin();return j.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(l,m){var j=this.getSize()._divideBy(2);return this.project(l,m)._subtract(j)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(l,m,j){var k=this._getNewPixelOrigin(j,m);return this.project(l,m)._subtract(k)},_latLngBoundsToNewLayerBounds:function(l,m,j){var k=this._getNewPixelOrigin(j,m);return X([this.project(l.getSouthWest(),m)._subtract(k),this.project(l.getNorthWest(),m)._subtract(k),this.project(l.getSouthEast(),m)._subtract(k),this.project(l.getNorthEast(),m)._subtract(k)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(l){return this.latLngToLayerPoint(l).subtract(this._getCenterLayerPoint())},_limitCenter:function(l,m,j){if(!j)return l;var k=this.project(l,m),H=this.getSize().divideBy(2),le=new te(k.subtract(H),k.add(H)),Ee=this._getBoundsOffset(le,j,m);return Math.abs(Ee.x)<=1&&Math.abs(Ee.y)<=1?l:this.unproject(k.add(Ee),m)},_limitOffset:function(l,m){if(!m)return l;var j=this.getPixelBounds(),k=new te(j.min.add(l),j.max.add(l));return l.add(this._getBoundsOffset(k,m))},_getBoundsOffset:function(l,m,j){var k=X(this.project(m.getNorthEast(),j),this.project(m.getSouthWest(),j)),H=k.min.subtract(l.min),le=k.max.subtract(l.max),Ee=this._rebound(H.x,-le.x),Be=this._rebound(H.y,-le.y);return new ge(Ee,Be)},_rebound:function(l,m){return l+m>0?Math.round(l-m)/2:Math.max(0,Math.ceil(l))-Math.max(0,Math.floor(m))},_limitZoom:function(l){var m=this.getMinZoom(),j=this.getMaxZoom(),k=Nt.any3d?this.options.zoomSnap:1;return k&&(l=Math.round(l/k)*k),Math.max(m,Math.min(j,l))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){La(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(l,m){var j=this._getCenterOffset(l)._trunc();return(m&&m.animate)!==!0&&!this.getSize().contains(j)?!1:(this.panBy(j,m),!0)},_createAnimProxy:function(){var l=this._proxy=ds("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(l),this.on("zoomanim",function(m){var j=xn,k=this._proxy.style[j];ki(this._proxy,this.project(m.center,m.zoom),this.getZoomScale(m.zoom,1)),k===this._proxy.style[j]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){na(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var l=this.getCenter(),m=this.getZoom();ki(this._proxy,this.project(l,m),this.getZoomScale(m,1))},_catchTransitionEnd:function(l){this._animatingZoom&&l.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(l,m,j){if(this._animatingZoom)return!0;if(j=j||{},!this._zoomAnimated||j.animate===!1||this._nothingToAnimate()||Math.abs(m-this._zoom)>this.options.zoomAnimationThreshold)return!1;var k=this.getZoomScale(m),H=this._getCenterOffset(l)._divideBy(1-1/k);return j.animate!==!0&&!this.getSize().contains(H)?!1:(K(function(){this._moveStart(!0,j.noMoveStart||!1)._animateZoom(l,m,!0)},this),!0)},_animateZoom:function(l,m,j,k){this._mapPane&&(j&&(this._animatingZoom=!0,this._animateToCenter=l,this._animateToZoom=m,hs(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:l,zoom:m,noUpdate:k}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(d(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&La(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function ih(l,m){return new zs(l,m)}var vr=W.extend({options:{position:"topright"},initialize:function(l){b(this,l)},getPosition:function(){return this.options.position},setPosition:function(l){var m=this._map;return m&&m.removeControl(this),this.options.position=l,m&&m.addControl(this),this},getContainer:function(){return this._container},addTo:function(l){this.remove(),this._map=l;var m=this._container=this.onAdd(l),j=this.getPosition(),k=l._controlCorners[j];return hs(m,"leaflet-control"),j.indexOf("bottom")!==-1?k.insertBefore(m,k.firstChild):k.appendChild(m),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(na(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(l){this._map&&l&&l.screenX>0&&l.screenY>0&&this._map.getContainer().focus()}}),Ai=function(l){return new vr(l)};zs.include({addControl:function(l){return l.addTo(this),this},removeControl:function(l){return l.remove(),this},_initControlPos:function(){var l=this._controlCorners={},m="leaflet-",j=this._controlContainer=ds("div",m+"control-container",this._container);function k(H,le){var Ee=m+H+" "+m+le;l[H+le]=ds("div",Ee,j)}k("top","left"),k("top","right"),k("bottom","left"),k("bottom","right")},_clearControlPos:function(){for(var l in this._controlCorners)na(this._controlCorners[l]);na(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var jc=vr.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(l,m,j,k){return j<k?-1:k<j?1:0}},initialize:function(l,m,j){b(this,j),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var k in l)this._addLayer(l[k],k);for(k in m)this._addLayer(m[k],k,!0)},onAdd:function(l){this._initLayout(),this._update(),this._map=l,l.on("zoomend",this._checkDisabledLayers,this);for(var m=0;m<this._layers.length;m++)this._layers[m].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(l){return vr.prototype.addTo.call(this,l),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var l=0;l<this._layers.length;l++)this._layers[l].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(l,m){return this._addLayer(l,m),this._map?this._update():this},addOverlay:function(l,m){return this._addLayer(l,m,!0),this._map?this._update():this},removeLayer:function(l){l.off("add remove",this._onLayerChange,this);var m=this._getLayer(f(l));return m&&this._layers.splice(this._layers.indexOf(m),1),this._map?this._update():this},expand:function(){hs(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var l=this._map.getSize().y-(this._container.offsetTop+50);return l<this._section.clientHeight?(hs(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=l+"px"):La(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return La(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var l="leaflet-control-layers",m=this._container=ds("div",l),j=this.options.collapsed;m.setAttribute("aria-haspopup",!0),Ao(m),oi(m);var k=this._section=ds("section",l+"-list");j&&(this._map.on("click",this.collapse,this),us(m,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var H=this._layersLink=ds("a",l+"-toggle",m);H.href="#",H.title="Layers",H.setAttribute("role","button"),us(H,{keydown:function(le){le.keyCode===13&&this._expandSafely()},click:function(le){Ja(le),this._expandSafely()}},this),j||this.expand(),this._baseLayersList=ds("div",l+"-base",k),this._separator=ds("div",l+"-separator",k),this._overlaysList=ds("div",l+"-overlays",k),m.appendChild(k)},_getLayer:function(l){for(var m=0;m<this._layers.length;m++)if(this._layers[m]&&f(this._layers[m].layer)===l)return this._layers[m]},_addLayer:function(l,m,j){this._map&&l.on("add remove",this._onLayerChange,this),this._layers.push({layer:l,name:m,overlay:j}),this.options.sortLayers&&this._layers.sort(d(function(k,H){return this.options.sortFunction(k.layer,H.layer,k.name,H.name)},this)),this.options.autoZIndex&&l.setZIndex&&(this._lastZIndex++,l.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;In(this._baseLayersList),In(this._overlaysList),this._layerControlInputs=[];var l,m,j,k,H=0;for(j=0;j<this._layers.length;j++)k=this._layers[j],this._addItem(k),m=m||k.overlay,l=l||!k.overlay,H+=k.overlay?0:1;return this.options.hideSingleBase&&(l=l&&H>1,this._baseLayersList.style.display=l?"":"none"),this._separator.style.display=m&&l?"":"none",this},_onLayerChange:function(l){this._handlingClick||this._update();var m=this._getLayer(f(l.target)),j=m.overlay?l.type==="add"?"overlayadd":"overlayremove":l.type==="add"?"baselayerchange":null;j&&this._map.fire(j,m)},_createRadioElement:function(l,m){var j='<input type="radio" class="leaflet-control-layers-selector" name="'+l+'"'+(m?' checked="checked"':"")+"/>",k=document.createElement("div");return k.innerHTML=j,k.firstChild},_addItem:function(l){var m=document.createElement("label"),j=this._map.hasLayer(l.layer),k;l.overlay?(k=document.createElement("input"),k.type="checkbox",k.className="leaflet-control-layers-selector",k.defaultChecked=j):k=this._createRadioElement("leaflet-base-layers_"+f(this),j),this._layerControlInputs.push(k),k.layerId=f(l.layer),us(k,"click",this._onInputClick,this);var H=document.createElement("span");H.innerHTML=" "+l.name;var le=document.createElement("span");m.appendChild(le),le.appendChild(k),le.appendChild(H);var Ee=l.overlay?this._overlaysList:this._baseLayersList;return Ee.appendChild(m),this._checkDisabledLayers(),m},_onInputClick:function(){if(!this._preventClick){var l=this._layerControlInputs,m,j,k=[],H=[];this._handlingClick=!0;for(var le=l.length-1;le>=0;le--)m=l[le],j=this._getLayer(m.layerId).layer,m.checked?k.push(j):m.checked||H.push(j);for(le=0;le<H.length;le++)this._map.hasLayer(H[le])&&this._map.removeLayer(H[le]);for(le=0;le<k.length;le++)this._map.hasLayer(k[le])||this._map.addLayer(k[le]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var l=this._layerControlInputs,m,j,k=this._map.getZoom(),H=l.length-1;H>=0;H--)m=l[H],j=this._getLayer(m.layerId).layer,m.disabled=j.options.minZoom!==void 0&&k<j.options.minZoom||j.options.maxZoom!==void 0&&k>j.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var l=this._section;this._preventClick=!0,us(l,"click",Ja),this.expand();var m=this;setTimeout(function(){ra(l,"click",Ja),m._preventClick=!1})}}),uf=function(l,m,j){return new jc(l,m,j)},oh=vr.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(l){var m="leaflet-control-zoom",j=ds("div",m+" leaflet-bar"),k=this.options;return this._zoomInButton=this._createButton(k.zoomInText,k.zoomInTitle,m+"-in",j,this._zoomIn),this._zoomOutButton=this._createButton(k.zoomOutText,k.zoomOutTitle,m+"-out",j,this._zoomOut),this._updateDisabled(),l.on("zoomend zoomlevelschange",this._updateDisabled,this),j},onRemove:function(l){l.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(l){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(l.shiftKey?3:1))},_zoomOut:function(l){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(l.shiftKey?3:1))},_createButton:function(l,m,j,k,H){var le=ds("a",j,k);return le.innerHTML=l,le.href="#",le.title=m,le.setAttribute("role","button"),le.setAttribute("aria-label",m),Ao(le),us(le,"click",eo),us(le,"click",H,this),us(le,"click",this._refocusOnMap,this),le},_updateDisabled:function(){var l=this._map,m="leaflet-disabled";La(this._zoomInButton,m),La(this._zoomOutButton,m),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||l._zoom===l.getMinZoom())&&(hs(this._zoomOutButton,m),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||l._zoom===l.getMaxZoom())&&(hs(this._zoomInButton,m),this._zoomInButton.setAttribute("aria-disabled","true"))}});zs.mergeOptions({zoomControl:!0}),zs.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new oh,this.addControl(this.zoomControl))});var lg=function(l){return new oh(l)},hf=vr.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(l){var m="leaflet-control-scale",j=ds("div",m),k=this.options;return this._addScales(k,m+"-line",j),l.on(k.updateWhenIdle?"moveend":"move",this._update,this),l.whenReady(this._update,this),j},onRemove:function(l){l.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(l,m,j){l.metric&&(this._mScale=ds("div",m,j)),l.imperial&&(this._iScale=ds("div",m,j))},_update:function(){var l=this._map,m=l.getSize().y/2,j=l.distance(l.containerPointToLatLng([0,m]),l.containerPointToLatLng([this.options.maxWidth,m]));this._updateScales(j)},_updateScales:function(l){this.options.metric&&l&&this._updateMetric(l),this.options.imperial&&l&&this._updateImperial(l)},_updateMetric:function(l){var m=this._getRoundNum(l),j=m<1e3?m+" m":m/1e3+" km";this._updateScale(this._mScale,j,m/l)},_updateImperial:function(l){var m=l*3.2808399,j,k,H;m>5280?(j=m/5280,k=this._getRoundNum(j),this._updateScale(this._iScale,k+" mi",k/j)):(H=this._getRoundNum(m),this._updateScale(this._iScale,H+" ft",H/m))},_updateScale:function(l,m,j){l.style.width=Math.round(this.options.maxWidth*j)+"px",l.innerHTML=m},_getRoundNum:function(l){var m=Math.pow(10,(Math.floor(l)+"").length-1),j=l/m;return j=j>=10?10:j>=5?5:j>=3?3:j>=2?2:1,m*j}}),lh=function(l){return new hf(l)},cg='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',ch=vr.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(Nt.inlineSvg?cg+" ":"")+"Leaflet</a>"},initialize:function(l){b(this,l),this._attributions={}},onAdd:function(l){l.attributionControl=this,this._container=ds("div","leaflet-control-attribution"),Ao(this._container);for(var m in l._layers)l._layers[m].getAttribution&&this.addAttribution(l._layers[m].getAttribution());return this._update(),l.on("layeradd",this._addAttribution,this),this._container},onRemove:function(l){l.off("layeradd",this._addAttribution,this)},_addAttribution:function(l){l.layer.getAttribution&&(this.addAttribution(l.layer.getAttribution()),l.layer.once("remove",function(){this.removeAttribution(l.layer.getAttribution())},this))},setPrefix:function(l){return this.options.prefix=l,this._update(),this},addAttribution:function(l){return l?(this._attributions[l]||(this._attributions[l]=0),this._attributions[l]++,this._update(),this):this},removeAttribution:function(l){return l?(this._attributions[l]&&(this._attributions[l]--,this._update()),this):this},_update:function(){if(this._map){var l=[];for(var m in this._attributions)this._attributions[m]&&l.push(m);var j=[];this.options.prefix&&j.push(this.options.prefix),l.length&&j.push(l.join(", ")),this._container.innerHTML=j.join(' <span aria-hidden="true">|</span> ')}}});zs.mergeOptions({attributionControl:!0}),zs.addInitHook(function(){this.options.attributionControl&&new ch().addTo(this)});var dg=function(l){return new ch(l)};vr.Layers=jc,vr.Zoom=oh,vr.Scale=hf,vr.Attribution=ch,Ai.layers=uf,Ai.zoom=lg,Ai.scale=lh,Ai.attribution=dg;var li=W.extend({initialize:function(l){this._map=l},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});li.addTo=function(l,m){return l.addHandler(m,this),this};var ug={Events:V},dh=Nt.touch?"touchstart mousedown":"mousedown",to=ae.extend({options:{clickTolerance:3},initialize:function(l,m,j,k){b(this,k),this._element=l,this._dragStartTarget=m||l,this._preventOutline=j},enable:function(){this._enabled||(us(this._dragStartTarget,dh,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(to._dragging===this&&this.finishDrag(!0),ra(this._dragStartTarget,dh,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(l){if(this._enabled&&(this._moved=!1,!mc(this._element,"leaflet-zoom-anim"))){if(l.touches&&l.touches.length!==1){to._dragging===this&&this.finishDrag();return}if(!(to._dragging||l.shiftKey||l.which!==1&&l.button!==1&&!l.touches)&&(to._dragging=this,this._preventOutline&&fl(this._element),_d(),hl(),!this._moving)){this.fire("down");var m=l.touches?l.touches[0]:l,j=Td(this._element);this._startPoint=new ge(m.clientX,m.clientY),this._startPos=Ji(this._element),this._parentScale=pc(j);var k=l.type==="mousedown";us(document,k?"mousemove":"touchmove",this._onMove,this),us(document,k?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(l){if(this._enabled){if(l.touches&&l.touches.length>1){this._moved=!0;return}var m=l.touches&&l.touches.length===1?l.touches[0]:l,j=new ge(m.clientX,m.clientY)._subtract(this._startPoint);!j.x&&!j.y||Math.abs(j.x)+Math.abs(j.y)<this.options.clickTolerance||(j.x/=this._parentScale.x,j.y/=this._parentScale.y,Ja(l),this._moved||(this.fire("dragstart"),this._moved=!0,hs(document.body,"leaflet-dragging"),this._lastTarget=l.target||l.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),hs(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(j),this._moving=!0,this._lastEvent=l,this._updatePosition())}},_updatePosition:function(){var l={originalEvent:this._lastEvent};this.fire("predrag",l),wa(this._element,this._newPos),this.fire("drag",l)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(l){La(document.body,"leaflet-dragging"),this._lastTarget&&(La(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),ra(document,"mousemove touchmove",this._onMove,this),ra(document,"mouseup touchend touchcancel",this._onUp,this),xc(),ii();var m=this._moved&&this._moving;this._moving=!1,to._dragging=!1,m&&this.fire("dragend",{noInertia:l,distance:this._newPos.distanceTo(this._startPos)})}});function mf(l,m,j){var k,H=[1,4,2,8],le,Ee,Be,Ke,mt,Et,Wt,As;for(le=0,Et=l.length;le<Et;le++)l[le]._code=Do(l[le],m);for(Be=0;Be<4;Be++){for(Wt=H[Be],k=[],le=0,Et=l.length,Ee=Et-1;le<Et;Ee=le++)Ke=l[le],mt=l[Ee],Ke._code&Wt?mt._code&Wt||(As=Ed(mt,Ke,Wt,m,j),As._code=Do(As,m),k.push(As)):(mt._code&Wt&&(As=Ed(mt,Ke,Wt,m,j),As._code=Do(As,m),k.push(As)),k.push(Ke));l=k}return l}function ff(l,m){var j,k,H,le,Ee,Be,Ke,mt,Et;if(!l||l.length===0)throw new Error("latlngs not passed");Cr(l)||(console.warn("latlngs are not flat! Only the first ring will be used"),l=l[0]);var Wt=de([0,0]),As=F(l),Tn=As.getNorthWest().distanceTo(As.getSouthWest())*As.getNorthEast().distanceTo(As.getNorthWest());Tn<1700&&(Wt=uh(l));var en=l.length,yr=[];for(j=0;j<en;j++){var Ys=de(l[j]);yr.push(m.project(de([Ys.lat-Wt.lat,Ys.lng-Wt.lng])))}for(Be=Ke=mt=0,j=0,k=en-1;j<en;k=j++)H=yr[j],le=yr[k],Ee=H.y*le.x-le.y*H.x,Ke+=(H.x+le.x)*Ee,mt+=(H.y+le.y)*Ee,Be+=Ee*3;Be===0?Et=yr[0]:Et=[Ke/Be,mt/Be];var Zs=m.unproject(ee(Et));return de([Zs.lat+Wt.lat,Zs.lng+Wt.lng])}function uh(l){for(var m=0,j=0,k=0,H=0;H<l.length;H++){var le=de(l[H]);m+=le.lat,j+=le.lng,k++}return de([m/k,j/k])}var hh={__proto__:null,clipPolygon:mf,polygonCenter:ff,centroid:uh};function xf(l,m){if(!m||!l.length)return l.slice();var j=m*m;return l=mg(l,j),l=gf(l,j),l}function pf(l,m,j){return Math.sqrt(Nc(l,m,j,!0))}function hg(l,m,j){return Nc(l,m,j)}function gf(l,m){var j=l.length,k=typeof Uint8Array<"u"?Uint8Array:Array,H=new k(j);H[0]=H[j-1]=1,mh(l,H,m,0,j-1);var le,Ee=[];for(le=0;le<j;le++)H[le]&&Ee.push(l[le]);return Ee}function mh(l,m,j,k,H){var le=0,Ee,Be,Ke;for(Be=k+1;Be<=H-1;Be++)Ke=Nc(l[Be],l[k],l[H],!0),Ke>le&&(Ee=Be,le=Ke);le>j&&(m[Ee]=1,mh(l,m,j,k,Ee),mh(l,m,j,Ee,H))}function mg(l,m){for(var j=[l[0]],k=1,H=0,le=l.length;k<le;k++)fg(l[k],l[H])>m&&(j.push(l[k]),H=k);return H<le-1&&j.push(l[le-1]),j}var vf;function yf(l,m,j,k,H){var le=k?vf:Do(l,j),Ee=Do(m,j),Be,Ke,mt;for(vf=Ee;;){if(!(le|Ee))return[l,m];if(le&Ee)return!1;Be=le||Ee,Ke=Ed(l,m,Be,j,H),mt=Do(Ke,j),Be===le?(l=Ke,le=mt):(m=Ke,Ee=mt)}}function Ed(l,m,j,k,H){var le=m.x-l.x,Ee=m.y-l.y,Be=k.min,Ke=k.max,mt,Et;return j&8?(mt=l.x+le*(Ke.y-l.y)/Ee,Et=Ke.y):j&4?(mt=l.x+le*(Be.y-l.y)/Ee,Et=Be.y):j&2?(mt=Ke.x,Et=l.y+Ee*(Ke.x-l.x)/le):j&1&&(mt=Be.x,Et=l.y+Ee*(Be.x-l.x)/le),new ge(mt,Et,H)}function Do(l,m){var j=0;return l.x<m.min.x?j|=1:l.x>m.max.x&&(j|=2),l.y<m.min.y?j|=4:l.y>m.max.y&&(j|=8),j}function fg(l,m){var j=m.x-l.x,k=m.y-l.y;return j*j+k*k}function Nc(l,m,j,k){var H=m.x,le=m.y,Ee=j.x-H,Be=j.y-le,Ke=Ee*Ee+Be*Be,mt;return Ke>0&&(mt=((l.x-H)*Ee+(l.y-le)*Be)/Ke,mt>1?(H=j.x,le=j.y):mt>0&&(H+=Ee*mt,le+=Be*mt)),Ee=l.x-H,Be=l.y-le,k?Ee*Ee+Be*Be:new ge(H,le)}function Cr(l){return!O(l[0])||typeof l[0][0]!="object"&&typeof l[0][0]<"u"}function Ad(l){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Cr(l)}function gl(l,m){var j,k,H,le,Ee,Be,Ke,mt;if(!l||l.length===0)throw new Error("latlngs not passed");Cr(l)||(console.warn("latlngs are not flat! Only the first ring will be used"),l=l[0]);var Et=de([0,0]),Wt=F(l),As=Wt.getNorthWest().distanceTo(Wt.getSouthWest())*Wt.getNorthEast().distanceTo(Wt.getNorthWest());As<1700&&(Et=uh(l));var Tn=l.length,en=[];for(j=0;j<Tn;j++){var yr=de(l[j]);en.push(m.project(de([yr.lat-Et.lat,yr.lng-Et.lng])))}for(j=0,k=0;j<Tn-1;j++)k+=en[j].distanceTo(en[j+1])/2;if(k===0)mt=en[0];else for(j=0,le=0;j<Tn-1;j++)if(Ee=en[j],Be=en[j+1],H=Ee.distanceTo(Be),le+=H,le>k){Ke=(le-k)/H,mt=[Be.x-Ke*(Be.x-Ee.x),Be.y-Ke*(Be.y-Ee.y)];break}var Ys=m.unproject(ee(mt));return de([Ys.lat+Et.lat,Ys.lng+Et.lng])}var xg={__proto__:null,simplify:xf,pointToSegmentDistance:pf,closestPointOnSegment:hg,clipSegment:yf,_getEdgeIntersection:Ed,_getBitCode:Do,_sqClosestPointOnSegment:Nc,isFlat:Cr,_flat:Ad,polylineCenter:gl},Dd={project:function(l){return new ge(l.lng,l.lat)},unproject:function(l){return new re(l.y,l.x)},bounds:new te([-180,-90],[180,90])},Pd={R:6378137,R_MINOR:6356752314245179e-9,bounds:new te([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(l){var m=Math.PI/180,j=this.R,k=l.lat*m,H=this.R_MINOR/j,le=Math.sqrt(1-H*H),Ee=le*Math.sin(k),Be=Math.tan(Math.PI/4-k/2)/Math.pow((1-Ee)/(1+Ee),le/2);return k=-j*Math.log(Math.max(Be,1e-10)),new ge(l.lng*m*j,k)},unproject:function(l){for(var m=180/Math.PI,j=this.R,k=this.R_MINOR/j,H=Math.sqrt(1-k*k),le=Math.exp(-l.y/j),Ee=Math.PI/2-2*Math.atan(le),Be=0,Ke=.1,mt;Be<15&&Math.abs(Ke)>1e-7;Be++)mt=H*Math.sin(Ee),mt=Math.pow((1-mt)/(1+mt),H/2),Ke=Math.PI/2-2*Math.atan(le*mt)-Ee,Ee+=Ke;return new re(Ee*m,l.x*m/j)}},jf={__proto__:null,LonLat:Dd,Mercator:Pd,SphericalMercator:pe},Nf=i({},De,{code:"EPSG:3395",projection:Pd,transformation:(function(){var l=.5/(Math.PI*Pd.R);return ot(l,.5,-l,.5)})()}),fh=i({},De,{code:"EPSG:4326",projection:Dd,transformation:ot(1/180,1,-1/180,.5)}),vl=i({},me,{projection:Dd,transformation:ot(1,0,-1,0),scale:function(l){return Math.pow(2,l)},zoom:function(l){return Math.log(l)/Math.LN2},distance:function(l,m){var j=m.lng-l.lng,k=m.lat-l.lat;return Math.sqrt(j*j+k*k)},infinite:!0});me.Earth=De,me.EPSG3395=Nf,me.EPSG3857=Pt,me.EPSG900913=Dt,me.EPSG4326=fh,me.Simple=vl;var qr=ae.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(l){return l.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(l){return l&&l.removeLayer(this),this},getPane:function(l){return this._map.getPane(l?this.options[l]||l:this.options.pane)},addInteractiveTarget:function(l){return this._map._targets[f(l)]=this,this},removeInteractiveTarget:function(l){return delete this._map._targets[f(l)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(l){var m=l.target;if(m.hasLayer(this)){if(this._map=m,this._zoomAnimated=m._zoomAnimated,this.getEvents){var j=this.getEvents();m.on(j,this),this.once("remove",function(){m.off(j,this)},this)}this.onAdd(m),this.fire("add"),m.fire("layeradd",{layer:this})}}});zs.include({addLayer:function(l){if(!l._layerAdd)throw new Error("The provided object is not a Layer.");var m=f(l);return this._layers[m]?this:(this._layers[m]=l,l._mapToAdd=this,l.beforeAdd&&l.beforeAdd(this),this.whenReady(l._layerAdd,l),this)},removeLayer:function(l){var m=f(l);return this._layers[m]?(this._loaded&&l.onRemove(this),delete this._layers[m],this._loaded&&(this.fire("layerremove",{layer:l}),l.fire("remove")),l._map=l._mapToAdd=null,this):this},hasLayer:function(l){return f(l)in this._layers},eachLayer:function(l,m){for(var j in this._layers)l.call(m,this._layers[j]);return this},_addLayers:function(l){l=l?O(l)?l:[l]:[];for(var m=0,j=l.length;m<j;m++)this.addLayer(l[m])},_addZoomLimit:function(l){(!isNaN(l.options.maxZoom)||!isNaN(l.options.minZoom))&&(this._zoomBoundLayers[f(l)]=l,this._updateZoomLevels())},_removeZoomLimit:function(l){var m=f(l);this._zoomBoundLayers[m]&&(delete this._zoomBoundLayers[m],this._updateZoomLevels())},_updateZoomLevels:function(){var l=1/0,m=-1/0,j=this._getZoomSpan();for(var k in this._zoomBoundLayers){var H=this._zoomBoundLayers[k].options;l=H.minZoom===void 0?l:Math.min(l,H.minZoom),m=H.maxZoom===void 0?m:Math.max(m,H.maxZoom)}this._layersMaxZoom=m===-1/0?void 0:m,this._layersMinZoom=l===1/0?void 0:l,j!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var yl=qr.extend({initialize:function(l,m){b(this,m),this._layers={};var j,k;if(l)for(j=0,k=l.length;j<k;j++)this.addLayer(l[j])},addLayer:function(l){var m=this.getLayerId(l);return this._layers[m]=l,this._map&&this._map.addLayer(l),this},removeLayer:function(l){var m=l in this._layers?l:this.getLayerId(l);return this._map&&this._layers[m]&&this._map.removeLayer(this._layers[m]),delete this._layers[m],this},hasLayer:function(l){var m=typeof l=="number"?l:this.getLayerId(l);return m in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(l){var m=Array.prototype.slice.call(arguments,1),j,k;for(j in this._layers)k=this._layers[j],k[l]&&k[l].apply(k,m);return this},onAdd:function(l){this.eachLayer(l.addLayer,l)},onRemove:function(l){this.eachLayer(l.removeLayer,l)},eachLayer:function(l,m){for(var j in this._layers)l.call(m,this._layers[j]);return this},getLayer:function(l){return this._layers[l]},getLayers:function(){var l=[];return this.eachLayer(l.push,l),l},setZIndex:function(l){return this.invoke("setZIndex",l)},getLayerId:function(l){return f(l)}}),pg=function(l,m){return new yl(l,m)},ci=yl.extend({addLayer:function(l){return this.hasLayer(l)?this:(l.addEventParent(this),yl.prototype.addLayer.call(this,l),this.fire("layeradd",{layer:l}))},removeLayer:function(l){return this.hasLayer(l)?(l in this._layers&&(l=this._layers[l]),l.removeEventParent(this),yl.prototype.removeLayer.call(this,l),this.fire("layerremove",{layer:l})):this},setStyle:function(l){return this.invoke("setStyle",l)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var l=new ce;for(var m in this._layers){var j=this._layers[m];l.extend(j.getBounds?j.getBounds():j.getLatLng())}return l}}),wf=function(l,m){return new ci(l,m)},di=W.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(l){b(this,l)},createIcon:function(l){return this._createIcon("icon",l)},createShadow:function(l){return this._createIcon("shadow",l)},_createIcon:function(l,m){var j=this._getIconUrl(l);if(!j){if(l==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var k=this._createImg(j,m&&m.tagName==="IMG"?m:null);return this._setIconStyles(k,l),(this.options.crossOrigin||this.options.crossOrigin==="")&&(k.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),k},_setIconStyles:function(l,m){var j=this.options,k=j[m+"Size"];typeof k=="number"&&(k=[k,k]);var H=ee(k),le=ee(m==="shadow"&&j.shadowAnchor||j.iconAnchor||H&&H.divideBy(2,!0));l.className="leaflet-marker-"+m+" "+(j.className||""),le&&(l.style.marginLeft=-le.x+"px",l.style.marginTop=-le.y+"px"),H&&(l.style.width=H.x+"px",l.style.height=H.y+"px")},_createImg:function(l,m){return m=m||document.createElement("img"),m.src=l,m},_getIconUrl:function(l){return Nt.retina&&this.options[l+"RetinaUrl"]||this.options[l+"Url"]}});function wc(l){return new di(l)}var bc=di.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(l){return typeof bc.imagePath!="string"&&(bc.imagePath=this._detectIconPath()),(this.options.imagePath||bc.imagePath)+di.prototype._getIconUrl.call(this,l)},_stripUrl:function(l){var m=function(j,k,H){var le=k.exec(j);return le&&le[H]};return l=m(l,/^url\((['"])?(.+)\1\)$/,2),l&&m(l,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var l=ds("div","leaflet-default-icon-path",document.body),m=Ln(l,"background-image")||Ln(l,"backgroundImage");if(document.body.removeChild(l),m=this._stripUrl(m),m)return m;var j=document.querySelector('link[href$="leaflet.css"]');return j?j.href.substring(0,j.href.length-11-1):""}}),Sc=li.extend({initialize:function(l){this._marker=l},addHooks:function(){var l=this._marker._icon;this._draggable||(this._draggable=new to(l,l,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),hs(l,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&La(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(l){var m=this._marker,j=m._map,k=this._marker.options.autoPanSpeed,H=this._marker.options.autoPanPadding,le=Ji(m._icon),Ee=j.getPixelBounds(),Be=j.getPixelOrigin(),Ke=X(Ee.min._subtract(Be).add(H),Ee.max._subtract(Be).subtract(H));if(!Ke.contains(le)){var mt=ee((Math.max(Ke.max.x,le.x)-Ke.max.x)/(Ee.max.x-Ke.max.x)-(Math.min(Ke.min.x,le.x)-Ke.min.x)/(Ee.min.x-Ke.min.x),(Math.max(Ke.max.y,le.y)-Ke.max.y)/(Ee.max.y-Ke.max.y)-(Math.min(Ke.min.y,le.y)-Ke.min.y)/(Ee.min.y-Ke.min.y)).multiplyBy(k);j.panBy(mt,{animate:!1}),this._draggable._newPos._add(mt),this._draggable._startPos._add(mt),wa(m._icon,this._draggable._newPos),this._onDrag(l),this._panRequest=K(this._adjustPan.bind(this,l))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(l){this._marker.options.autoPan&&(z(this._panRequest),this._panRequest=K(this._adjustPan.bind(this,l)))},_onDrag:function(l){var m=this._marker,j=m._shadow,k=Ji(m._icon),H=m._map.layerPointToLatLng(k);j&&wa(j,k),m._latlng=H,l.latlng=H,l.oldLatLng=this._oldLatLng,m.fire("move",l).fire("drag",l)},_onDragEnd:function(l){z(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",l)}}),_c=qr.extend({options:{icon:new bc,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(l,m){b(this,m),this._latlng=de(l)},onAdd:function(l){this._zoomAnimated=this._zoomAnimated&&l.options.markerZoomAnimation,this._zoomAnimated&&l.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(l){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&l.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(l){var m=this._latlng;return this._latlng=de(l),this.update(),this.fire("move",{oldLatLng:m,latlng:this._latlng})},setZIndexOffset:function(l){return this.options.zIndexOffset=l,this.update()},getIcon:function(){return this.options.icon},setIcon:function(l){return this.options.icon=l,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var l=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(l)}return this},_initIcon:function(){var l=this.options,m="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),j=l.icon.createIcon(this._icon),k=!1;j!==this._icon&&(this._icon&&this._removeIcon(),k=!0,l.title&&(j.title=l.title),j.tagName==="IMG"&&(j.alt=l.alt||"")),hs(j,m),l.keyboard&&(j.tabIndex="0",j.setAttribute("role","button")),this._icon=j,l.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&us(j,"focus",this._panOnFocus,this);var H=l.icon.createShadow(this._shadow),le=!1;H!==this._shadow&&(this._removeShadow(),le=!0),H&&(hs(H,m),H.alt=""),this._shadow=H,l.opacity<1&&this._updateOpacity(),k&&this.getPane().appendChild(this._icon),this._initInteraction(),H&&le&&this.getPane(l.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&ra(this._icon,"focus",this._panOnFocus,this),na(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&na(this._shadow),this._shadow=null},_setPos:function(l){this._icon&&wa(this._icon,l),this._shadow&&wa(this._shadow,l),this._zIndex=l.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(l){this._icon&&(this._icon.style.zIndex=this._zIndex+l)},_animateZoom:function(l){var m=this._map._latLngToNewLayerPoint(this._latlng,l.zoom,l.center).round();this._setPos(m)},_initInteraction:function(){if(this.options.interactive&&(hs(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Sc)){var l=this.options.draggable;this.dragging&&(l=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Sc(this),l&&this.dragging.enable()}},setOpacity:function(l){return this.options.opacity=l,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var l=this.options.opacity;this._icon&&ka(this._icon,l),this._shadow&&ka(this._shadow,l)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var l=this._map;if(l){var m=this.options.icon.options,j=m.iconSize?ee(m.iconSize):ee(0,0),k=m.iconAnchor?ee(m.iconAnchor):ee(0,0);l.panInside(this._latlng,{paddingTopLeft:k,paddingBottomRight:j.subtract(k)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function bf(l,m){return new _c(l,m)}var ui=qr.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(l){this._renderer=l.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(l){return b(this,l),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&l&&Object.prototype.hasOwnProperty.call(l,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),jl=ui.extend({options:{fill:!0,radius:10},initialize:function(l,m){b(this,m),this._latlng=de(l),this._radius=this.options.radius},setLatLng:function(l){var m=this._latlng;return this._latlng=de(l),this.redraw(),this.fire("move",{oldLatLng:m,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(l){return this.options.radius=this._radius=l,this.redraw()},getRadius:function(){return this._radius},setStyle:function(l){var m=l&&l.radius||this._radius;return ui.prototype.setStyle.call(this,l),this.setRadius(m),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var l=this._radius,m=this._radiusY||l,j=this._clickTolerance(),k=[l+j,m+j];this._pxBounds=new te(this._point.subtract(k),this._point.add(k))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(l){return l.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function Sf(l,m){return new jl(l,m)}var Od=jl.extend({initialize:function(l,m,j){if(typeof m=="number"&&(m=i({},j,{radius:m})),b(this,m),this._latlng=de(l),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(l){return this._mRadius=l,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var l=[this._radius,this._radiusY||this._radius];return new ce(this._map.layerPointToLatLng(this._point.subtract(l)),this._map.layerPointToLatLng(this._point.add(l)))},setStyle:ui.prototype.setStyle,_project:function(){var l=this._latlng.lng,m=this._latlng.lat,j=this._map,k=j.options.crs;if(k.distance===De.distance){var H=Math.PI/180,le=this._mRadius/De.R/H,Ee=j.project([m+le,l]),Be=j.project([m-le,l]),Ke=Ee.add(Be).divideBy(2),mt=j.unproject(Ke).lat,Et=Math.acos((Math.cos(le*H)-Math.sin(m*H)*Math.sin(mt*H))/(Math.cos(m*H)*Math.cos(mt*H)))/H;(isNaN(Et)||Et===0)&&(Et=le/Math.cos(Math.PI/180*m)),this._point=Ke.subtract(j.getPixelOrigin()),this._radius=isNaN(Et)?0:Ke.x-j.project([mt,l-Et]).x,this._radiusY=Ke.y-Ee.y}else{var Wt=k.unproject(k.project(this._latlng).subtract([this._mRadius,0]));this._point=j.latLngToLayerPoint(this._latlng),this._radius=this._point.x-j.latLngToLayerPoint(Wt).x}this._updateBounds()}});function _f(l,m,j){return new Od(l,m,j)}var Di=ui.extend({options:{smoothFactor:1,noClip:!1},initialize:function(l,m){b(this,m),this._setLatLngs(l)},getLatLngs:function(){return this._latlngs},setLatLngs:function(l){return this._setLatLngs(l),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(l){for(var m=1/0,j=null,k=Nc,H,le,Ee=0,Be=this._parts.length;Ee<Be;Ee++)for(var Ke=this._parts[Ee],mt=1,Et=Ke.length;mt<Et;mt++){H=Ke[mt-1],le=Ke[mt];var Wt=k(l,H,le,!0);Wt<m&&(m=Wt,j=k(l,H,le))}return j&&(j.distance=Math.sqrt(m)),j},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return gl(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(l,m){return m=m||this._defaultShape(),l=de(l),m.push(l),this._bounds.extend(l),this.redraw()},_setLatLngs:function(l){this._bounds=new ce,this._latlngs=this._convertLatLngs(l)},_defaultShape:function(){return Cr(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(l){for(var m=[],j=Cr(l),k=0,H=l.length;k<H;k++)j?(m[k]=de(l[k]),this._bounds.extend(m[k])):m[k]=this._convertLatLngs(l[k]);return m},_project:function(){var l=new te;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,l),this._bounds.isValid()&&l.isValid()&&(this._rawPxBounds=l,this._updateBounds())},_updateBounds:function(){var l=this._clickTolerance(),m=new ge(l,l);this._rawPxBounds&&(this._pxBounds=new te([this._rawPxBounds.min.subtract(m),this._rawPxBounds.max.add(m)]))},_projectLatlngs:function(l,m,j){var k=l[0]instanceof re,H=l.length,le,Ee;if(k){for(Ee=[],le=0;le<H;le++)Ee[le]=this._map.latLngToLayerPoint(l[le]),j.extend(Ee[le]);m.push(Ee)}else for(le=0;le<H;le++)this._projectLatlngs(l[le],m,j)},_clipPoints:function(){var l=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(l))){if(this.options.noClip){this._parts=this._rings;return}var m=this._parts,j,k,H,le,Ee,Be,Ke;for(j=0,H=0,le=this._rings.length;j<le;j++)for(Ke=this._rings[j],k=0,Ee=Ke.length;k<Ee-1;k++)Be=yf(Ke[k],Ke[k+1],l,k,!0),Be&&(m[H]=m[H]||[],m[H].push(Be[0]),(Be[1]!==Ke[k+1]||k===Ee-2)&&(m[H].push(Be[1]),H++))}},_simplifyPoints:function(){for(var l=this._parts,m=this.options.smoothFactor,j=0,k=l.length;j<k;j++)l[j]=xf(l[j],m)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(l,m){var j,k,H,le,Ee,Be,Ke=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(l))return!1;for(j=0,le=this._parts.length;j<le;j++)for(Be=this._parts[j],k=0,Ee=Be.length,H=Ee-1;k<Ee;H=k++)if(!(!m&&k===0)&&pf(l,Be[H],Be[k])<=Ke)return!0;return!1}});function gg(l,m){return new Di(l,m)}Di._flat=Ad;var Nl=Di.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return ff(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(l){var m=Di.prototype._convertLatLngs.call(this,l),j=m.length;return j>=2&&m[0]instanceof re&&m[0].equals(m[j-1])&&m.pop(),m},_setLatLngs:function(l){Di.prototype._setLatLngs.call(this,l),Cr(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Cr(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var l=this._renderer._bounds,m=this.options.weight,j=new ge(m,m);if(l=new te(l.min.subtract(j),l.max.add(j)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(l))){if(this.options.noClip){this._parts=this._rings;return}for(var k=0,H=this._rings.length,le;k<H;k++)le=mf(this._rings[k],l,!0),le.length&&this._parts.push(le)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(l){var m=!1,j,k,H,le,Ee,Be,Ke,mt;if(!this._pxBounds||!this._pxBounds.contains(l))return!1;for(le=0,Ke=this._parts.length;le<Ke;le++)for(j=this._parts[le],Ee=0,mt=j.length,Be=mt-1;Ee<mt;Be=Ee++)k=j[Ee],H=j[Be],k.y>l.y!=H.y>l.y&&l.x<(H.x-k.x)*(l.y-k.y)/(H.y-k.y)+k.x&&(m=!m);return m||Di.prototype._containsPoint.call(this,l,!0)}});function vg(l,m){return new Nl(l,m)}var Pi=ci.extend({initialize:function(l,m){b(this,m),this._layers={},l&&this.addData(l)},addData:function(l){var m=O(l)?l:l.features,j,k,H;if(m){for(j=0,k=m.length;j<k;j++)H=m[j],(H.geometries||H.geometry||H.features||H.coordinates)&&this.addData(H);return this}var le=this.options;if(le.filter&&!le.filter(l))return this;var Ee=Fn(l,le);return Ee?(Ee.feature=Ld(l),Ee.defaultOptions=Ee.options,this.resetStyle(Ee),le.onEachFeature&&le.onEachFeature(l,Ee),this.addLayer(Ee)):this},resetStyle:function(l){return l===void 0?this.eachLayer(this.resetStyle,this):(l.options=i({},l.defaultOptions),this._setLayerStyle(l,this.options.style),this)},setStyle:function(l){return this.eachLayer(function(m){this._setLayerStyle(m,l)},this)},_setLayerStyle:function(l,m){l.setStyle&&(typeof m=="function"&&(m=m(l.feature)),l.setStyle(m))}});function Fn(l,m){var j=l.type==="Feature"?l.geometry:l,k=j?j.coordinates:null,H=[],le=m&&m.pointToLayer,Ee=m&&m.coordsToLatLng||Md,Be,Ke,mt,Et;if(!k&&!j)return null;switch(j.type){case"Point":return Be=Ee(k),wl(le,l,Be,m);case"MultiPoint":for(mt=0,Et=k.length;mt<Et;mt++)Be=Ee(k[mt]),H.push(wl(le,l,Be,m));return new ci(H);case"LineString":case"MultiLineString":return Ke=Cc(k,j.type==="LineString"?0:1,Ee),new Di(Ke,m);case"Polygon":case"MultiPolygon":return Ke=Cc(k,j.type==="Polygon"?1:2,Ee),new Nl(Ke,m);case"GeometryCollection":for(mt=0,Et=j.geometries.length;mt<Et;mt++){var Wt=Fn({geometry:j.geometries[mt],type:"Feature",properties:l.properties},m);Wt&&H.push(Wt)}return new ci(H);case"FeatureCollection":for(mt=0,Et=j.features.length;mt<Et;mt++){var As=Fn(j.features[mt],m);As&&H.push(As)}return new ci(H);default:throw new Error("Invalid GeoJSON object.")}}function wl(l,m,j,k){return l?l(m,j):new _c(j,k&&k.markersInheritOptions&&k)}function Md(l){return new re(l[1],l[0],l[2])}function Cc(l,m,j){for(var k=[],H=0,le=l.length,Ee;H<le;H++)Ee=m?Cc(l[H],m-1,j):(j||Md)(l[H]),k.push(Ee);return k}function Rd(l,m){return l=de(l),l.alt!==void 0?[y(l.lng,m),y(l.lat,m),y(l.alt,m)]:[y(l.lng,m),y(l.lat,m)]}function Tc(l,m,j,k){for(var H=[],le=0,Ee=l.length;le<Ee;le++)H.push(m?Tc(l[le],Cr(l[le])?0:m-1,j,k):Rd(l[le],k));return!m&&j&&H.length>0&&H.push(H[0].slice()),H}function so(l,m){return l.feature?i({},l.feature,{geometry:m}):Ld(m)}function Ld(l){return l.type==="Feature"||l.type==="FeatureCollection"?l:{type:"Feature",properties:{},geometry:l}}var ao={toGeoJSON:function(l){return so(this,{type:"Point",coordinates:Rd(this.getLatLng(),l)})}};_c.include(ao),Od.include(ao),jl.include(ao),Di.include({toGeoJSON:function(l){var m=!Cr(this._latlngs),j=Tc(this._latlngs,m?1:0,!1,l);return so(this,{type:(m?"Multi":"")+"LineString",coordinates:j})}}),Nl.include({toGeoJSON:function(l){var m=!Cr(this._latlngs),j=m&&!Cr(this._latlngs[0]),k=Tc(this._latlngs,j?2:m?1:0,!0,l);return m||(k=[k]),so(this,{type:(j?"Multi":"")+"Polygon",coordinates:k})}}),yl.include({toMultiPoint:function(l){var m=[];return this.eachLayer(function(j){m.push(j.toGeoJSON(l).geometry.coordinates)}),so(this,{type:"MultiPoint",coordinates:m})},toGeoJSON:function(l){var m=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(m==="MultiPoint")return this.toMultiPoint(l);var j=m==="GeometryCollection",k=[];return this.eachLayer(function(H){if(H.toGeoJSON){var le=H.toGeoJSON(l);if(j)k.push(le.geometry);else{var Ee=Ld(le);Ee.type==="FeatureCollection"?k.push.apply(k,Ee.features):k.push(Ee)}}}),j?so(this,{geometries:k,type:"GeometryCollection"}):{type:"FeatureCollection",features:k}}});function Id(l,m){return new Pi(l,m)}var kc=Id,bl=qr.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(l,m,j){this._url=l,this._bounds=F(m),b(this,j)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(hs(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){na(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(l){return this.options.opacity=l,this._image&&this._updateOpacity(),this},setStyle:function(l){return l.opacity&&this.setOpacity(l.opacity),this},bringToFront:function(){return this._map&&ln(this._image),this},bringToBack:function(){return this._map&&Ti(this._image),this},setUrl:function(l){return this._url=l,this._image&&(this._image.src=l),this},setBounds:function(l){return this._bounds=F(l),this._map&&this._reset(),this},getEvents:function(){var l={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(l.zoomanim=this._animateZoom),l},setZIndex:function(l){return this.options.zIndex=l,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var l=this._url.tagName==="IMG",m=this._image=l?this._url:ds("img");if(hs(m,"leaflet-image-layer"),this._zoomAnimated&&hs(m,"leaflet-zoom-animated"),this.options.className&&hs(m,this.options.className),m.onselectstart=v,m.onmousemove=v,m.onload=d(this.fire,this,"load"),m.onerror=d(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(m.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),l){this._url=m.src;return}m.src=this._url,m.alt=this.options.alt},_animateZoom:function(l){var m=this._map.getZoomScale(l.zoom),j=this._map._latLngBoundsToNewLayerBounds(this._bounds,l.zoom,l.center).min;ki(this._image,j,m)},_reset:function(){var l=this._image,m=new te(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),j=m.getSize();wa(l,m.min),l.style.width=j.x+"px",l.style.height=j.y+"px"},_updateOpacity:function(){ka(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var l=this.options.errorOverlayUrl;l&&this._url!==l&&(this._url=l,this._image.src=l)},getCenter:function(){return this._bounds.getCenter()}}),Cf=function(l,m,j){return new bl(l,m,j)},no=bl.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var l=this._url.tagName==="VIDEO",m=this._image=l?this._url:ds("video");if(hs(m,"leaflet-image-layer"),this._zoomAnimated&&hs(m,"leaflet-zoom-animated"),this.options.className&&hs(m,this.options.className),m.onselectstart=v,m.onmousemove=v,m.onloadeddata=d(this.fire,this,"load"),l){for(var j=m.getElementsByTagName("source"),k=[],H=0;H<j.length;H++)k.push(j[H].src);this._url=j.length>0?k:[m.src];return}O(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(m.style,"objectFit")&&(m.style.objectFit="fill"),m.autoplay=!!this.options.autoplay,m.loop=!!this.options.loop,m.muted=!!this.options.muted,m.playsInline=!!this.options.playsInline;for(var le=0;le<this._url.length;le++){var Ee=ds("source");Ee.src=this._url[le],m.appendChild(Ee)}}});function Sl(l,m,j){return new no(l,m,j)}var Fd=bl.extend({_initImage:function(){var l=this._image=this._url;hs(l,"leaflet-image-layer"),this._zoomAnimated&&hs(l,"leaflet-zoom-animated"),this.options.className&&hs(l,this.options.className),l.onselectstart=v,l.onmousemove=v}});function Tf(l,m,j){return new Fd(l,m,j)}var Bn=qr.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(l,m){l&&(l instanceof re||O(l))?(this._latlng=de(l),b(this,m)):(b(this,l),this._source=m),this.options.content&&(this._content=this.options.content)},openOn:function(l){return l=arguments.length?l:this._source._map,l.hasLayer(this)||l.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(l){return this._map?this.close():(arguments.length?this._source=l:l=this._source,this._prepareOpen(),this.openOn(l._map)),this},onAdd:function(l){this._zoomAnimated=l._zoomAnimated,this._container||this._initLayout(),l._fadeAnimated&&ka(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),l._fadeAnimated&&ka(this._container,1),this.bringToFront(),this.options.interactive&&(hs(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(l){l._fadeAnimated?(ka(this._container,0),this._removeTimeout=setTimeout(d(na,void 0,this._container),200)):na(this._container),this.options.interactive&&(La(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(l){return this._latlng=de(l),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(l){return this._content=l,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var l={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(l.zoomanim=this._animateZoom),l},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&ln(this._container),this},bringToBack:function(){return this._map&&Ti(this._container),this},_prepareOpen:function(l){var m=this._source;if(!m._map)return!1;if(m instanceof ci){m=null;var j=this._source._layers;for(var k in j)if(j[k]._map){m=j[k];break}if(!m)return!1;this._source=m}if(!l)if(m.getCenter)l=m.getCenter();else if(m.getLatLng)l=m.getLatLng();else if(m.getBounds)l=m.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(l),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var l=this._contentNode,m=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof m=="string")l.innerHTML=m;else{for(;l.hasChildNodes();)l.removeChild(l.firstChild);l.appendChild(m)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var l=this._map.latLngToLayerPoint(this._latlng),m=ee(this.options.offset),j=this._getAnchor();this._zoomAnimated?wa(this._container,l.add(j)):m=m.add(l).add(j);var k=this._containerBottom=-m.y,H=this._containerLeft=-Math.round(this._containerWidth/2)+m.x;this._container.style.bottom=k+"px",this._container.style.left=H+"px"}},_getAnchor:function(){return[0,0]}});zs.include({_initOverlay:function(l,m,j,k){var H=m;return H instanceof l||(H=new l(k).setContent(m)),j&&H.setLatLng(j),H}}),qr.include({_initOverlay:function(l,m,j,k){var H=j;return H instanceof l?(b(H,k),H._source=this):(H=m&&!k?m:new l(k,this),H.setContent(j)),H}});var Ec=Bn.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(l){return l=arguments.length?l:this._source._map,!l.hasLayer(this)&&l._popup&&l._popup.options.autoClose&&l.removeLayer(l._popup),l._popup=this,Bn.prototype.openOn.call(this,l)},onAdd:function(l){Bn.prototype.onAdd.call(this,l),l.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof ui||this._source.on("preclick",Gr))},onRemove:function(l){Bn.prototype.onRemove.call(this,l),l.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof ui||this._source.off("preclick",Gr))},getEvents:function(){var l=Bn.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(l.preclick=this.close),this.options.keepInView&&(l.moveend=this._adjustPan),l},_initLayout:function(){var l="leaflet-popup",m=this._container=ds("div",l+" "+(this.options.className||"")+" leaflet-zoom-animated"),j=this._wrapper=ds("div",l+"-content-wrapper",m);if(this._contentNode=ds("div",l+"-content",j),Ao(m),oi(this._contentNode),us(m,"contextmenu",Gr),this._tipContainer=ds("div",l+"-tip-container",m),this._tip=ds("div",l+"-tip",this._tipContainer),this.options.closeButton){var k=this._closeButton=ds("a",l+"-close-button",m);k.setAttribute("role","button"),k.setAttribute("aria-label","Close popup"),k.href="#close",k.innerHTML='<span aria-hidden="true">&#215;</span>',us(k,"click",function(H){Ja(H),this.close()},this)}},_updateLayout:function(){var l=this._contentNode,m=l.style;m.width="",m.whiteSpace="nowrap";var j=l.offsetWidth;j=Math.min(j,this.options.maxWidth),j=Math.max(j,this.options.minWidth),m.width=j+1+"px",m.whiteSpace="",m.height="";var k=l.offsetHeight,H=this.options.maxHeight,le="leaflet-popup-scrolled";H&&k>H?(m.height=H+"px",hs(l,le)):La(l,le),this._containerWidth=this._container.offsetWidth},_animateZoom:function(l){var m=this._map._latLngToNewLayerPoint(this._latlng,l.zoom,l.center),j=this._getAnchor();wa(this._container,m.add(j))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var l=this._map,m=parseInt(Ln(this._container,"marginBottom"),10)||0,j=this._container.offsetHeight+m,k=this._containerWidth,H=new ge(this._containerLeft,-j-this._containerBottom);H._add(Ji(this._container));var le=l.layerPointToContainerPoint(H),Ee=ee(this.options.autoPanPadding),Be=ee(this.options.autoPanPaddingTopLeft||Ee),Ke=ee(this.options.autoPanPaddingBottomRight||Ee),mt=l.getSize(),Et=0,Wt=0;le.x+k+Ke.x>mt.x&&(Et=le.x+k-mt.x+Ke.x),le.x-Et-Be.x<0&&(Et=le.x-Be.x),le.y+j+Ke.y>mt.y&&(Wt=le.y+j-mt.y+Ke.y),le.y-Wt-Be.y<0&&(Wt=le.y-Be.y),(Et||Wt)&&(this.options.keepInView&&(this._autopanning=!0),l.fire("autopanstart").panBy([Et,Wt]))}},_getAnchor:function(){return ee(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),kf=function(l,m){return new Ec(l,m)};zs.mergeOptions({closePopupOnClick:!0}),zs.include({openPopup:function(l,m,j){return this._initOverlay(Ec,l,m,j).openOn(this),this},closePopup:function(l){return l=arguments.length?l:this._popup,l&&l.close(),this}}),qr.include({bindPopup:function(l,m){return this._popup=this._initOverlay(Ec,this._popup,l,m),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(l){return this._popup&&(this instanceof ci||(this._popup._source=this),this._popup._prepareOpen(l||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(l){return this._popup&&this._popup.setContent(l),this},getPopup:function(){return this._popup},_openPopup:function(l){if(!(!this._popup||!this._map)){eo(l);var m=l.layer||l.target;if(this._popup._source===m&&!(m instanceof ui)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(l.latlng);return}this._popup._source=m,this.openPopup(l.latlng)}},_movePopup:function(l){this._popup.setLatLng(l.latlng)},_onKeyPress:function(l){l.originalEvent.keyCode===13&&this._openPopup(l)}});var Ac=Bn.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(l){Bn.prototype.onAdd.call(this,l),this.setOpacity(this.options.opacity),l.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(l){Bn.prototype.onRemove.call(this,l),l.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var l=Bn.prototype.getEvents.call(this);return this.options.permanent||(l.preclick=this.close),l},_initLayout:function(){var l="leaflet-tooltip",m=l+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=ds("div",m),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+f(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(l){var m,j,k=this._map,H=this._container,le=k.latLngToContainerPoint(k.getCenter()),Ee=k.layerPointToContainerPoint(l),Be=this.options.direction,Ke=H.offsetWidth,mt=H.offsetHeight,Et=ee(this.options.offset),Wt=this._getAnchor();Be==="top"?(m=Ke/2,j=mt):Be==="bottom"?(m=Ke/2,j=0):Be==="center"?(m=Ke/2,j=mt/2):Be==="right"?(m=0,j=mt/2):Be==="left"?(m=Ke,j=mt/2):Ee.x<le.x?(Be="right",m=0,j=mt/2):(Be="left",m=Ke+(Et.x+Wt.x)*2,j=mt/2),l=l.subtract(ee(m,j,!0)).add(Et).add(Wt),La(H,"leaflet-tooltip-right"),La(H,"leaflet-tooltip-left"),La(H,"leaflet-tooltip-top"),La(H,"leaflet-tooltip-bottom"),hs(H,"leaflet-tooltip-"+Be),wa(H,l)},_updatePosition:function(){var l=this._map.latLngToLayerPoint(this._latlng);this._setPosition(l)},setOpacity:function(l){this.options.opacity=l,this._container&&ka(this._container,l)},_animateZoom:function(l){var m=this._map._latLngToNewLayerPoint(this._latlng,l.zoom,l.center);this._setPosition(m)},_getAnchor:function(){return ee(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),yg=function(l,m){return new Ac(l,m)};zs.include({openTooltip:function(l,m,j){return this._initOverlay(Ac,l,m,j).openOn(this),this},closeTooltip:function(l){return l.close(),this}}),qr.include({bindTooltip:function(l,m){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Ac,this._tooltip,l,m),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(l){if(!(!l&&this._tooltipHandlersAdded)){var m=l?"off":"on",j={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?j.add=this._openTooltip:(j.mouseover=this._openTooltip,j.mouseout=this.closeTooltip,j.click=this._openTooltip,this._map?this._addFocusListeners():j.add=this._addFocusListeners),this._tooltip.options.sticky&&(j.mousemove=this._moveTooltip),this[m](j),this._tooltipHandlersAdded=!l}},openTooltip:function(l){return this._tooltip&&(this instanceof ci||(this._tooltip._source=this),this._tooltip._prepareOpen(l)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(l){return this._tooltip&&this._tooltip.setContent(l),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(l){var m=typeof l.getElement=="function"&&l.getElement();m&&(us(m,"focus",function(){this._tooltip._source=l,this.openTooltip()},this),us(m,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(l){var m=typeof l.getElement=="function"&&l.getElement();m&&m.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(l){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var m=this;this._map.once("moveend",function(){m._openOnceFlag=!1,m._openTooltip(l)});return}this._tooltip._source=l.layer||l.target,this.openTooltip(this._tooltip.options.sticky?l.latlng:void 0)}},_moveTooltip:function(l){var m=l.latlng,j,k;this._tooltip.options.sticky&&l.originalEvent&&(j=this._map.mouseEventToContainerPoint(l.originalEvent),k=this._map.containerPointToLayerPoint(j),m=this._map.layerPointToLatLng(k)),this._tooltip.setLatLng(m)}});var Ef=di.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(l){var m=l&&l.tagName==="DIV"?l:document.createElement("div"),j=this.options;if(j.html instanceof Element?(In(m),m.appendChild(j.html)):m.innerHTML=j.html!==!1?j.html:"",j.bgPos){var k=ee(j.bgPos);m.style.backgroundPosition=-k.x+"px "+-k.y+"px"}return this._setIconStyles(m,"icon"),m},createShadow:function(){return null}});function jg(l){return new Ef(l)}di.Default=bc;var _l=qr.extend({options:{tileSize:256,opacity:1,updateWhenIdle:Nt.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(l){b(this,l)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(l){l._addZoomLimit(this)},onRemove:function(l){this._removeAllTiles(),na(this._container),l._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(ln(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(Ti(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(l){return this.options.opacity=l,this._updateOpacity(),this},setZIndex:function(l){return this.options.zIndex=l,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var l=this._clampZoom(this._map.getZoom());l!==this._tileZoom&&(this._tileZoom=l,this._updateLevels()),this._update()}return this},getEvents:function(){var l={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=g(this._onMoveEnd,this.options.updateInterval,this)),l.move=this._onMove),this._zoomAnimated&&(l.zoomanim=this._animateZoom),l},createTile:function(){return document.createElement("div")},getTileSize:function(){var l=this.options.tileSize;return l instanceof ge?l:new ge(l,l)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(l){for(var m=this.getPane().children,j=-l(-1/0,1/0),k=0,H=m.length,le;k<H;k++)le=m[k].style.zIndex,m[k]!==this._container&&le&&(j=l(j,+le));isFinite(j)&&(this.options.zIndex=j+l(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!Nt.ielt9){ka(this._container,this.options.opacity);var l=+new Date,m=!1,j=!1;for(var k in this._tiles){var H=this._tiles[k];if(!(!H.current||!H.loaded)){var le=Math.min(1,(l-H.loaded)/200);ka(H.el,le),le<1?m=!0:(H.active?j=!0:this._onOpaqueTile(H),H.active=!0)}}j&&!this._noPrune&&this._pruneTiles(),m&&(z(this._fadeFrame),this._fadeFrame=K(this._updateOpacity,this))}},_onOpaqueTile:v,_initContainer:function(){this._container||(this._container=ds("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var l=this._tileZoom,m=this.options.maxZoom;if(l!==void 0){for(var j in this._levels)j=Number(j),this._levels[j].el.children.length||j===l?(this._levels[j].el.style.zIndex=m-Math.abs(l-j),this._onUpdateLevel(j)):(na(this._levels[j].el),this._removeTilesAtZoom(j),this._onRemoveLevel(j),delete this._levels[j]);var k=this._levels[l],H=this._map;return k||(k=this._levels[l]={},k.el=ds("div","leaflet-tile-container leaflet-zoom-animated",this._container),k.el.style.zIndex=m,k.origin=H.project(H.unproject(H.getPixelOrigin()),l).round(),k.zoom=l,this._setZoomTransform(k,H.getCenter(),H.getZoom()),v(k.el.offsetWidth),this._onCreateLevel(k)),this._level=k,k}},_onUpdateLevel:v,_onRemoveLevel:v,_onCreateLevel:v,_pruneTiles:function(){if(this._map){var l,m,j=this._map.getZoom();if(j>this.options.maxZoom||j<this.options.minZoom){this._removeAllTiles();return}for(l in this._tiles)m=this._tiles[l],m.retain=m.current;for(l in this._tiles)if(m=this._tiles[l],m.current&&!m.active){var k=m.coords;this._retainParent(k.x,k.y,k.z,k.z-5)||this._retainChildren(k.x,k.y,k.z,k.z+2)}for(l in this._tiles)this._tiles[l].retain||this._removeTile(l)}},_removeTilesAtZoom:function(l){for(var m in this._tiles)this._tiles[m].coords.z===l&&this._removeTile(m)},_removeAllTiles:function(){for(var l in this._tiles)this._removeTile(l)},_invalidateAll:function(){for(var l in this._levels)na(this._levels[l].el),this._onRemoveLevel(Number(l)),delete this._levels[l];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(l,m,j,k){var H=Math.floor(l/2),le=Math.floor(m/2),Ee=j-1,Be=new ge(+H,+le);Be.z=+Ee;var Ke=this._tileCoordsToKey(Be),mt=this._tiles[Ke];return mt&&mt.active?(mt.retain=!0,!0):(mt&&mt.loaded&&(mt.retain=!0),Ee>k?this._retainParent(H,le,Ee,k):!1)},_retainChildren:function(l,m,j,k){for(var H=2*l;H<2*l+2;H++)for(var le=2*m;le<2*m+2;le++){var Ee=new ge(H,le);Ee.z=j+1;var Be=this._tileCoordsToKey(Ee),Ke=this._tiles[Be];if(Ke&&Ke.active){Ke.retain=!0;continue}else Ke&&Ke.loaded&&(Ke.retain=!0);j+1<k&&this._retainChildren(H,le,j+1,k)}},_resetView:function(l){var m=l&&(l.pinch||l.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),m,m)},_animateZoom:function(l){this._setView(l.center,l.zoom,!0,l.noUpdate)},_clampZoom:function(l){var m=this.options;return m.minNativeZoom!==void 0&&l<m.minNativeZoom?m.minNativeZoom:m.maxNativeZoom!==void 0&&m.maxNativeZoom<l?m.maxNativeZoom:l},_setView:function(l,m,j,k){var H=Math.round(m);this.options.maxZoom!==void 0&&H>this.options.maxZoom||this.options.minZoom!==void 0&&H<this.options.minZoom?H=void 0:H=this._clampZoom(H);var le=this.options.updateWhenZooming&&H!==this._tileZoom;(!k||le)&&(this._tileZoom=H,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),H!==void 0&&this._update(l),j||this._pruneTiles(),this._noPrune=!!j),this._setZoomTransforms(l,m)},_setZoomTransforms:function(l,m){for(var j in this._levels)this._setZoomTransform(this._levels[j],l,m)},_setZoomTransform:function(l,m,j){var k=this._map.getZoomScale(j,l.zoom),H=l.origin.multiplyBy(k).subtract(this._map._getNewPixelOrigin(m,j)).round();Nt.any3d?ki(l.el,H,k):wa(l.el,H)},_resetGrid:function(){var l=this._map,m=l.options.crs,j=this._tileSize=this.getTileSize(),k=this._tileZoom,H=this._map.getPixelWorldBounds(this._tileZoom);H&&(this._globalTileRange=this._pxBoundsToTileRange(H)),this._wrapX=m.wrapLng&&!this.options.noWrap&&[Math.floor(l.project([0,m.wrapLng[0]],k).x/j.x),Math.ceil(l.project([0,m.wrapLng[1]],k).x/j.y)],this._wrapY=m.wrapLat&&!this.options.noWrap&&[Math.floor(l.project([m.wrapLat[0],0],k).y/j.x),Math.ceil(l.project([m.wrapLat[1],0],k).y/j.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(l){var m=this._map,j=m._animatingZoom?Math.max(m._animateToZoom,m.getZoom()):m.getZoom(),k=m.getZoomScale(j,this._tileZoom),H=m.project(l,this._tileZoom).floor(),le=m.getSize().divideBy(k*2);return new te(H.subtract(le),H.add(le))},_update:function(l){var m=this._map;if(m){var j=this._clampZoom(m.getZoom());if(l===void 0&&(l=m.getCenter()),this._tileZoom!==void 0){var k=this._getTiledPixelBounds(l),H=this._pxBoundsToTileRange(k),le=H.getCenter(),Ee=[],Be=this.options.keepBuffer,Ke=new te(H.getBottomLeft().subtract([Be,-Be]),H.getTopRight().add([Be,-Be]));if(!(isFinite(H.min.x)&&isFinite(H.min.y)&&isFinite(H.max.x)&&isFinite(H.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var mt in this._tiles){var Et=this._tiles[mt].coords;(Et.z!==this._tileZoom||!Ke.contains(new ge(Et.x,Et.y)))&&(this._tiles[mt].current=!1)}if(Math.abs(j-this._tileZoom)>1){this._setView(l,j);return}for(var Wt=H.min.y;Wt<=H.max.y;Wt++)for(var As=H.min.x;As<=H.max.x;As++){var Tn=new ge(As,Wt);if(Tn.z=this._tileZoom,!!this._isValidTile(Tn)){var en=this._tiles[this._tileCoordsToKey(Tn)];en?en.current=!0:Ee.push(Tn)}}if(Ee.sort(function(Ys,Zs){return Ys.distanceTo(le)-Zs.distanceTo(le)}),Ee.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var yr=document.createDocumentFragment();for(As=0;As<Ee.length;As++)this._addTile(Ee[As],yr);this._level.el.appendChild(yr)}}}},_isValidTile:function(l){var m=this._map.options.crs;if(!m.infinite){var j=this._globalTileRange;if(!m.wrapLng&&(l.x<j.min.x||l.x>j.max.x)||!m.wrapLat&&(l.y<j.min.y||l.y>j.max.y))return!1}if(!this.options.bounds)return!0;var k=this._tileCoordsToBounds(l);return F(this.options.bounds).overlaps(k)},_keyToBounds:function(l){return this._tileCoordsToBounds(this._keyToTileCoords(l))},_tileCoordsToNwSe:function(l){var m=this._map,j=this.getTileSize(),k=l.scaleBy(j),H=k.add(j),le=m.unproject(k,l.z),Ee=m.unproject(H,l.z);return[le,Ee]},_tileCoordsToBounds:function(l){var m=this._tileCoordsToNwSe(l),j=new ce(m[0],m[1]);return this.options.noWrap||(j=this._map.wrapLatLngBounds(j)),j},_tileCoordsToKey:function(l){return l.x+":"+l.y+":"+l.z},_keyToTileCoords:function(l){var m=l.split(":"),j=new ge(+m[0],+m[1]);return j.z=+m[2],j},_removeTile:function(l){var m=this._tiles[l];m&&(na(m.el),delete this._tiles[l],this.fire("tileunload",{tile:m.el,coords:this._keyToTileCoords(l)}))},_initTile:function(l){hs(l,"leaflet-tile");var m=this.getTileSize();l.style.width=m.x+"px",l.style.height=m.y+"px",l.onselectstart=v,l.onmousemove=v,Nt.ielt9&&this.options.opacity<1&&ka(l,this.options.opacity)},_addTile:function(l,m){var j=this._getTilePos(l),k=this._tileCoordsToKey(l),H=this.createTile(this._wrapCoords(l),d(this._tileReady,this,l));this._initTile(H),this.createTile.length<2&&K(d(this._tileReady,this,l,null,H)),wa(H,j),this._tiles[k]={el:H,coords:l,current:!0},m.appendChild(H),this.fire("tileloadstart",{tile:H,coords:l})},_tileReady:function(l,m,j){m&&this.fire("tileerror",{error:m,tile:j,coords:l});var k=this._tileCoordsToKey(l);j=this._tiles[k],j&&(j.loaded=+new Date,this._map._fadeAnimated?(ka(j.el,0),z(this._fadeFrame),this._fadeFrame=K(this._updateOpacity,this)):(j.active=!0,this._pruneTiles()),m||(hs(j.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:j.el,coords:l})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),Nt.ielt9||!this._map._fadeAnimated?K(this._pruneTiles,this):setTimeout(d(this._pruneTiles,this),250)))},_getTilePos:function(l){return l.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(l){var m=new ge(this._wrapX?p(l.x,this._wrapX):l.x,this._wrapY?p(l.y,this._wrapY):l.y);return m.z=l.z,m},_pxBoundsToTileRange:function(l){var m=this.getTileSize();return new te(l.min.unscaleBy(m).floor(),l.max.unscaleBy(m).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var l in this._tiles)if(!this._tiles[l].loaded)return!1;return!0}});function Af(l){return new _l(l)}var ro=_l.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(l,m){this._url=l,m=b(this,m),m.detectRetina&&Nt.retina&&m.maxZoom>0?(m.tileSize=Math.floor(m.tileSize/2),m.zoomReverse?(m.zoomOffset--,m.minZoom=Math.min(m.maxZoom,m.minZoom+1)):(m.zoomOffset++,m.maxZoom=Math.max(m.minZoom,m.maxZoom-1)),m.minZoom=Math.max(0,m.minZoom)):m.zoomReverse?m.minZoom=Math.min(m.maxZoom,m.minZoom):m.maxZoom=Math.max(m.minZoom,m.maxZoom),typeof m.subdomains=="string"&&(m.subdomains=m.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(l,m){return this._url===l&&m===void 0&&(m=!0),this._url=l,m||this.redraw(),this},createTile:function(l,m){var j=document.createElement("img");return us(j,"load",d(this._tileOnLoad,this,m,j)),us(j,"error",d(this._tileOnError,this,m,j)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(j.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(j.referrerPolicy=this.options.referrerPolicy),j.alt="",j.src=this.getTileUrl(l),j},getTileUrl:function(l){var m={r:Nt.retina?"@2x":"",s:this._getSubdomain(l),x:l.x,y:l.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var j=this._globalTileRange.max.y-l.y;this.options.tms&&(m.y=j),m["-y"]=j}return A(this._url,i(m,this.options))},_tileOnLoad:function(l,m){Nt.ielt9?setTimeout(d(l,this,null,m),0):l(null,m)},_tileOnError:function(l,m,j){var k=this.options.errorTileUrl;k&&m.getAttribute("src")!==k&&(m.src=k),l(j,m)},_onTileRemove:function(l){l.tile.onload=null},_getZoomForUrl:function(){var l=this._tileZoom,m=this.options.maxZoom,j=this.options.zoomReverse,k=this.options.zoomOffset;return j&&(l=m-l),l+k},_getSubdomain:function(l){var m=Math.abs(l.x+l.y)%this.options.subdomains.length;return this.options.subdomains[m]},_abortLoading:function(){var l,m;for(l in this._tiles)if(this._tiles[l].coords.z!==this._tileZoom&&(m=this._tiles[l].el,m.onload=v,m.onerror=v,!m.complete)){m.src=q;var j=this._tiles[l].coords;na(m),delete this._tiles[l],this.fire("tileabort",{tile:m,coords:j})}},_removeTile:function(l){var m=this._tiles[l];if(m)return m.el.setAttribute("src",q),_l.prototype._removeTile.call(this,l)},_tileReady:function(l,m,j){if(!(!this._map||j&&j.getAttribute("src")===q))return _l.prototype._tileReady.call(this,l,m,j)}});function Tr(l,m){return new ro(l,m)}var Dc=ro.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(l,m){this._url=l;var j=i({},this.defaultWmsParams);for(var k in m)k in this.options||(j[k]=m[k]);m=b(this,m);var H=m.detectRetina&&Nt.retina?2:1,le=this.getTileSize();j.width=le.x*H,j.height=le.y*H,this.wmsParams=j},onAdd:function(l){this._crs=this.options.crs||l.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var m=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[m]=this._crs.code,ro.prototype.onAdd.call(this,l)},getTileUrl:function(l){var m=this._tileCoordsToNwSe(l),j=this._crs,k=X(j.project(m[0]),j.project(m[1])),H=k.min,le=k.max,Ee=(this._wmsVersion>=1.3&&this._crs===fh?[H.y,H.x,le.y,le.x]:[H.x,H.y,le.x,le.y]).join(","),Be=ro.prototype.getTileUrl.call(this,l);return Be+T(this.wmsParams,Be,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+Ee},setParams:function(l,m){return i(this.wmsParams,l),m||this.redraw(),this}});function kr(l,m){return new Dc(l,m)}ro.WMS=Dc,Tr.wms=kr;var ir=qr.extend({options:{padding:.1},initialize:function(l){b(this,l),f(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),hs(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var l={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(l.zoomanim=this._onAnimZoom),l},_onAnimZoom:function(l){this._updateTransform(l.center,l.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(l,m){var j=this._map.getZoomScale(m,this._zoom),k=this._map.getSize().multiplyBy(.5+this.options.padding),H=this._map.project(this._center,m),le=k.multiplyBy(-j).add(H).subtract(this._map._getNewPixelOrigin(l,m));Nt.any3d?ki(this._container,le,j):wa(this._container,le)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var l in this._layers)this._layers[l]._reset()},_onZoomEnd:function(){for(var l in this._layers)this._layers[l]._project()},_updatePaths:function(){for(var l in this._layers)this._layers[l]._update()},_update:function(){var l=this.options.padding,m=this._map.getSize(),j=this._map.containerPointToLayerPoint(m.multiplyBy(-l)).round();this._bounds=new te(j,j.add(m.multiplyBy(1+l*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),Bd=ir.extend({options:{tolerance:0},getEvents:function(){var l=ir.prototype.getEvents.call(this);return l.viewprereset=this._onViewPreReset,l},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){ir.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var l=this._container=document.createElement("canvas");us(l,"mousemove",this._onMouseMove,this),us(l,"click dblclick mousedown mouseup contextmenu",this._onClick,this),us(l,"mouseout",this._handleMouseOut,this),l._leaflet_disable_events=!0,this._ctx=l.getContext("2d")},_destroyContainer:function(){z(this._redrawRequest),delete this._ctx,na(this._container),ra(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var l;this._redrawBounds=null;for(var m in this._layers)l=this._layers[m],l._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){ir.prototype._update.call(this);var l=this._bounds,m=this._container,j=l.getSize(),k=Nt.retina?2:1;wa(m,l.min),m.width=k*j.x,m.height=k*j.y,m.style.width=j.x+"px",m.style.height=j.y+"px",Nt.retina&&this._ctx.scale(2,2),this._ctx.translate(-l.min.x,-l.min.y),this.fire("update")}},_reset:function(){ir.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(l){this._updateDashArray(l),this._layers[f(l)]=l;var m=l._order={layer:l,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=m),this._drawLast=m,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(l){this._requestRedraw(l)},_removePath:function(l){var m=l._order,j=m.next,k=m.prev;j?j.prev=k:this._drawLast=k,k?k.next=j:this._drawFirst=j,delete l._order,delete this._layers[f(l)],this._requestRedraw(l)},_updatePath:function(l){this._extendRedrawBounds(l),l._project(),l._update(),this._requestRedraw(l)},_updateStyle:function(l){this._updateDashArray(l),this._requestRedraw(l)},_updateDashArray:function(l){if(typeof l.options.dashArray=="string"){var m=l.options.dashArray.split(/[, ]+/),j=[],k,H;for(H=0;H<m.length;H++){if(k=Number(m[H]),isNaN(k))return;j.push(k)}l.options._dashArray=j}else l.options._dashArray=l.options.dashArray},_requestRedraw:function(l){this._map&&(this._extendRedrawBounds(l),this._redrawRequest=this._redrawRequest||K(this._redraw,this))},_extendRedrawBounds:function(l){if(l._pxBounds){var m=(l.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new te,this._redrawBounds.extend(l._pxBounds.min.subtract([m,m])),this._redrawBounds.extend(l._pxBounds.max.add([m,m]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var l=this._redrawBounds;if(l){var m=l.getSize();this._ctx.clearRect(l.min.x,l.min.y,m.x,m.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var l,m=this._redrawBounds;if(this._ctx.save(),m){var j=m.getSize();this._ctx.beginPath(),this._ctx.rect(m.min.x,m.min.y,j.x,j.y),this._ctx.clip()}this._drawing=!0;for(var k=this._drawFirst;k;k=k.next)l=k.layer,(!m||l._pxBounds&&l._pxBounds.intersects(m))&&l._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(l,m){if(this._drawing){var j,k,H,le,Ee=l._parts,Be=Ee.length,Ke=this._ctx;if(Be){for(Ke.beginPath(),j=0;j<Be;j++){for(k=0,H=Ee[j].length;k<H;k++)le=Ee[j][k],Ke[k?"lineTo":"moveTo"](le.x,le.y);m&&Ke.closePath()}this._fillStroke(Ke,l)}}},_updateCircle:function(l){if(!(!this._drawing||l._empty())){var m=l._point,j=this._ctx,k=Math.max(Math.round(l._radius),1),H=(Math.max(Math.round(l._radiusY),1)||k)/k;H!==1&&(j.save(),j.scale(1,H)),j.beginPath(),j.arc(m.x,m.y/H,k,0,Math.PI*2,!1),H!==1&&j.restore(),this._fillStroke(j,l)}},_fillStroke:function(l,m){var j=m.options;j.fill&&(l.globalAlpha=j.fillOpacity,l.fillStyle=j.fillColor||j.color,l.fill(j.fillRule||"evenodd")),j.stroke&&j.weight!==0&&(l.setLineDash&&l.setLineDash(m.options&&m.options._dashArray||[]),l.globalAlpha=j.opacity,l.lineWidth=j.weight,l.strokeStyle=j.color,l.lineCap=j.lineCap,l.lineJoin=j.lineJoin,l.stroke())},_onClick:function(l){for(var m=this._map.mouseEventToLayerPoint(l),j,k,H=this._drawFirst;H;H=H.next)j=H.layer,j.options.interactive&&j._containsPoint(m)&&(!(l.type==="click"||l.type==="preclick")||!this._map._draggableMoved(j))&&(k=j);this._fireEvent(k?[k]:!1,l)},_onMouseMove:function(l){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var m=this._map.mouseEventToLayerPoint(l);this._handleMouseHover(l,m)}},_handleMouseOut:function(l){var m=this._hoveredLayer;m&&(La(this._container,"leaflet-interactive"),this._fireEvent([m],l,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(l,m){if(!this._mouseHoverThrottled){for(var j,k,H=this._drawFirst;H;H=H.next)j=H.layer,j.options.interactive&&j._containsPoint(m)&&(k=j);k!==this._hoveredLayer&&(this._handleMouseOut(l),k&&(hs(this._container,"leaflet-interactive"),this._fireEvent([k],l,"mouseover"),this._hoveredLayer=k)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,l),this._mouseHoverThrottled=!0,setTimeout(d(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(l,m,j){this._map._fireDOMEvent(m,j||m.type,l)},_bringToFront:function(l){var m=l._order;if(m){var j=m.next,k=m.prev;if(j)j.prev=k;else return;k?k.next=j:j&&(this._drawFirst=j),m.prev=this._drawLast,this._drawLast.next=m,m.next=null,this._drawLast=m,this._requestRedraw(l)}},_bringToBack:function(l){var m=l._order;if(m){var j=m.next,k=m.prev;if(k)k.next=j;else return;j?j.prev=k:k&&(this._drawLast=k),m.prev=null,m.next=this._drawFirst,this._drawFirst.prev=m,this._drawFirst=m,this._requestRedraw(l)}}});function Pc(l){return Nt.canvas?new Bd(l):null}var io=(function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(l){return document.createElement("<lvml:"+l+' class="lvml">')}}catch{}return function(l){return document.createElement("<"+l+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}})(),xh={_initContainer:function(){this._container=ds("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(ir.prototype._update.call(this),this.fire("update"))},_initPath:function(l){var m=l._container=io("shape");hs(m,"leaflet-vml-shape "+(this.options.className||"")),m.coordsize="1 1",l._path=io("path"),m.appendChild(l._path),this._updateStyle(l),this._layers[f(l)]=l},_addPath:function(l){var m=l._container;this._container.appendChild(m),l.options.interactive&&l.addInteractiveTarget(m)},_removePath:function(l){var m=l._container;na(m),l.removeInteractiveTarget(m),delete this._layers[f(l)]},_updateStyle:function(l){var m=l._stroke,j=l._fill,k=l.options,H=l._container;H.stroked=!!k.stroke,H.filled=!!k.fill,k.stroke?(m||(m=l._stroke=io("stroke")),H.appendChild(m),m.weight=k.weight+"px",m.color=k.color,m.opacity=k.opacity,k.dashArray?m.dashStyle=O(k.dashArray)?k.dashArray.join(" "):k.dashArray.replace(/( *, *)/g," "):m.dashStyle="",m.endcap=k.lineCap.replace("butt","flat"),m.joinstyle=k.lineJoin):m&&(H.removeChild(m),l._stroke=null),k.fill?(j||(j=l._fill=io("fill")),H.appendChild(j),j.color=k.fillColor||k.color,j.opacity=k.fillOpacity):j&&(H.removeChild(j),l._fill=null)},_updateCircle:function(l){var m=l._point.round(),j=Math.round(l._radius),k=Math.round(l._radiusY||j);this._setPath(l,l._empty()?"M0 0":"AL "+m.x+","+m.y+" "+j+","+k+" 0,"+65535*360)},_setPath:function(l,m){l._path.v=m},_bringToFront:function(l){ln(l._container)},_bringToBack:function(l){Ti(l._container)}},hi=Nt.vml?io:Ct,Cl=ir.extend({_initContainer:function(){this._container=hi("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=hi("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){na(this._container),ra(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){ir.prototype._update.call(this);var l=this._bounds,m=l.getSize(),j=this._container;(!this._svgSize||!this._svgSize.equals(m))&&(this._svgSize=m,j.setAttribute("width",m.x),j.setAttribute("height",m.y)),wa(j,l.min),j.setAttribute("viewBox",[l.min.x,l.min.y,m.x,m.y].join(" ")),this.fire("update")}},_initPath:function(l){var m=l._path=hi("path");l.options.className&&hs(m,l.options.className),l.options.interactive&&hs(m,"leaflet-interactive"),this._updateStyle(l),this._layers[f(l)]=l},_addPath:function(l){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(l._path),l.addInteractiveTarget(l._path)},_removePath:function(l){na(l._path),l.removeInteractiveTarget(l._path),delete this._layers[f(l)]},_updatePath:function(l){l._project(),l._update()},_updateStyle:function(l){var m=l._path,j=l.options;m&&(j.stroke?(m.setAttribute("stroke",j.color),m.setAttribute("stroke-opacity",j.opacity),m.setAttribute("stroke-width",j.weight),m.setAttribute("stroke-linecap",j.lineCap),m.setAttribute("stroke-linejoin",j.lineJoin),j.dashArray?m.setAttribute("stroke-dasharray",j.dashArray):m.removeAttribute("stroke-dasharray"),j.dashOffset?m.setAttribute("stroke-dashoffset",j.dashOffset):m.removeAttribute("stroke-dashoffset")):m.setAttribute("stroke","none"),j.fill?(m.setAttribute("fill",j.fillColor||j.color),m.setAttribute("fill-opacity",j.fillOpacity),m.setAttribute("fill-rule",j.fillRule||"evenodd")):m.setAttribute("fill","none"))},_updatePoly:function(l,m){this._setPath(l,Lt(l._parts,m))},_updateCircle:function(l){var m=l._point,j=Math.max(Math.round(l._radius),1),k=Math.max(Math.round(l._radiusY),1)||j,H="a"+j+","+k+" 0 1,0 ",le=l._empty()?"M0 0":"M"+(m.x-j)+","+m.y+H+j*2+",0 "+H+-j*2+",0 ";this._setPath(l,le)},_setPath:function(l,m){l._path.setAttribute("d",m)},_bringToFront:function(l){ln(l._path)},_bringToBack:function(l){Ti(l._path)}});Nt.vml&&Cl.include(xh);function Oc(l){return Nt.svg||Nt.vml?new Cl(l):null}zs.include({getRenderer:function(l){var m=l.options.renderer||this._getPaneRenderer(l.options.pane)||this.options.renderer||this._renderer;return m||(m=this._renderer=this._createRenderer()),this.hasLayer(m)||this.addLayer(m),m},_getPaneRenderer:function(l){if(l==="overlayPane"||l===void 0)return!1;var m=this._paneRenderers[l];return m===void 0&&(m=this._createRenderer({pane:l}),this._paneRenderers[l]=m),m},_createRenderer:function(l){return this.options.preferCanvas&&Pc(l)||Oc(l)}});var Po=Nl.extend({initialize:function(l,m){Nl.prototype.initialize.call(this,this._boundsToLatLngs(l),m)},setBounds:function(l){return this.setLatLngs(this._boundsToLatLngs(l))},_boundsToLatLngs:function(l){return l=F(l),[l.getSouthWest(),l.getNorthWest(),l.getNorthEast(),l.getSouthEast()]}});function Ng(l,m){return new Po(l,m)}Cl.create=hi,Cl.pointsToPath=Lt,Pi.geometryToLayer=Fn,Pi.coordsToLatLng=Md,Pi.coordsToLatLngs=Cc,Pi.latLngToCoords=Rd,Pi.latLngsToCoords=Tc,Pi.getFeature=so,Pi.asFeature=Ld,zs.mergeOptions({boxZoom:!0});var or=li.extend({initialize:function(l){this._map=l,this._container=l._container,this._pane=l._panes.overlayPane,this._resetStateTimeout=0,l.on("unload",this._destroy,this)},addHooks:function(){us(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){ra(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){na(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(l){if(!l.shiftKey||l.which!==1&&l.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),hl(),_d(),this._startPoint=this._map.mouseEventToContainerPoint(l),us(document,{contextmenu:eo,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(l){this._moved||(this._moved=!0,this._box=ds("div","leaflet-zoom-box",this._container),hs(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(l);var m=new te(this._point,this._startPoint),j=m.getSize();wa(this._box,m.min),this._box.style.width=j.x+"px",this._box.style.height=j.y+"px"},_finish:function(){this._moved&&(na(this._box),La(this._container,"leaflet-crosshair")),ii(),xc(),ra(document,{contextmenu:eo,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(l){if(!(l.which!==1&&l.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(d(this._resetState,this),0);var m=new ce(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(m).fire("boxzoomend",{boxZoomBounds:m})}},_onKeyDown:function(l){l.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});zs.addInitHook("addHandler","boxZoom",or),zs.mergeOptions({doubleClickZoom:!0});var zd=li.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(l){var m=this._map,j=m.getZoom(),k=m.options.zoomDelta,H=l.originalEvent.shiftKey?j-k:j+k;m.options.doubleClickZoom==="center"?m.setZoom(H):m.setZoomAround(l.containerPoint,H)}});zs.addInitHook("addHandler","doubleClickZoom",zd),zs.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var mi=li.extend({addHooks:function(){if(!this._draggable){var l=this._map;this._draggable=new to(l._mapPane,l._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),l.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),l.on("zoomend",this._onZoomEnd,this),l.whenReady(this._onZoomEnd,this))}hs(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){La(this._map._container,"leaflet-grab"),La(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var l=this._map;if(l._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var m=F(this._map.options.maxBounds);this._offsetLimit=X(this._map.latLngToContainerPoint(m.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(m.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;l.fire("movestart").fire("dragstart"),l.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(l){if(this._map.options.inertia){var m=this._lastTime=+new Date,j=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(j),this._times.push(m),this._prunePositions(m)}this._map.fire("move",l).fire("drag",l)},_prunePositions:function(l){for(;this._positions.length>1&&l-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var l=this._map.getSize().divideBy(2),m=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=m.subtract(l).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(l,m){return l-(l-m)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var l=this._draggable._newPos.subtract(this._draggable._startPos),m=this._offsetLimit;l.x<m.min.x&&(l.x=this._viscousLimit(l.x,m.min.x)),l.y<m.min.y&&(l.y=this._viscousLimit(l.y,m.min.y)),l.x>m.max.x&&(l.x=this._viscousLimit(l.x,m.max.x)),l.y>m.max.y&&(l.y=this._viscousLimit(l.y,m.max.y)),this._draggable._newPos=this._draggable._startPos.add(l)}},_onPreDragWrap:function(){var l=this._worldWidth,m=Math.round(l/2),j=this._initialWorldOffset,k=this._draggable._newPos.x,H=(k-m+j)%l+m-j,le=(k+m+j)%l-m-j,Ee=Math.abs(H+j)<Math.abs(le+j)?H:le;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=Ee},_onDragEnd:function(l){var m=this._map,j=m.options,k=!j.inertia||l.noInertia||this._times.length<2;if(m.fire("dragend",l),k)m.fire("moveend");else{this._prunePositions(+new Date);var H=this._lastPos.subtract(this._positions[0]),le=(this._lastTime-this._times[0])/1e3,Ee=j.easeLinearity,Be=H.multiplyBy(Ee/le),Ke=Be.distanceTo([0,0]),mt=Math.min(j.inertiaMaxSpeed,Ke),Et=Be.multiplyBy(mt/Ke),Wt=mt/(j.inertiaDeceleration*Ee),As=Et.multiplyBy(-Wt/2).round();!As.x&&!As.y?m.fire("moveend"):(As=m._limitOffset(As,m.options.maxBounds),K(function(){m.panBy(As,{duration:Wt,easeLinearity:Ee,noMoveStart:!0,animate:!0})}))}}});zs.addInitHook("addHandler","dragging",mi),zs.mergeOptions({keyboard:!0,keyboardPanDelta:80});var ph=li.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(l){this._map=l,this._setPanDelta(l.options.keyboardPanDelta),this._setZoomDelta(l.options.zoomDelta)},addHooks:function(){var l=this._map._container;l.tabIndex<=0&&(l.tabIndex="0"),us(l,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),ra(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var l=document.body,m=document.documentElement,j=l.scrollTop||m.scrollTop,k=l.scrollLeft||m.scrollLeft;this._map._container.focus(),window.scrollTo(k,j)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(l){var m=this._panKeys={},j=this.keyCodes,k,H;for(k=0,H=j.left.length;k<H;k++)m[j.left[k]]=[-1*l,0];for(k=0,H=j.right.length;k<H;k++)m[j.right[k]]=[l,0];for(k=0,H=j.down.length;k<H;k++)m[j.down[k]]=[0,l];for(k=0,H=j.up.length;k<H;k++)m[j.up[k]]=[0,-1*l]},_setZoomDelta:function(l){var m=this._zoomKeys={},j=this.keyCodes,k,H;for(k=0,H=j.zoomIn.length;k<H;k++)m[j.zoomIn[k]]=l;for(k=0,H=j.zoomOut.length;k<H;k++)m[j.zoomOut[k]]=-l},_addHooks:function(){us(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){ra(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(l){if(!(l.altKey||l.ctrlKey||l.metaKey)){var m=l.keyCode,j=this._map,k;if(m in this._panKeys){if(!j._panAnim||!j._panAnim._inProgress)if(k=this._panKeys[m],l.shiftKey&&(k=ee(k).multiplyBy(3)),j.options.maxBounds&&(k=j._limitOffset(ee(k),j.options.maxBounds)),j.options.worldCopyJump){var H=j.wrapLatLng(j.unproject(j.project(j.getCenter()).add(k)));j.panTo(H)}else j.panBy(k)}else if(m in this._zoomKeys)j.setZoom(j.getZoom()+(l.shiftKey?3:1)*this._zoomKeys[m]);else if(m===27&&j._popup&&j._popup.options.closeOnEscapeKey)j.closePopup();else return;eo(l)}}});zs.addInitHook("addHandler","keyboard",ph),zs.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var Mc=li.extend({addHooks:function(){us(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){ra(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(l){var m=Gn(l),j=this._map.options.wheelDebounceTime;this._delta+=m,this._lastMousePos=this._map.mouseEventToContainerPoint(l),this._startTime||(this._startTime=+new Date);var k=Math.max(j-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(d(this._performZoom,this),k),eo(l)},_performZoom:function(){var l=this._map,m=l.getZoom(),j=this._map.options.zoomSnap||0;l._stop();var k=this._delta/(this._map.options.wheelPxPerZoomLevel*4),H=4*Math.log(2/(1+Math.exp(-Math.abs(k))))/Math.LN2,le=j?Math.ceil(H/j)*j:H,Ee=l._limitZoom(m+(this._delta>0?le:-le))-m;this._delta=0,this._startTime=null,Ee&&(l.options.scrollWheelZoom==="center"?l.setZoom(m+Ee):l.setZoomAround(this._lastMousePos,m+Ee))}});zs.addInitHook("addHandler","scrollWheelZoom",Mc);var Oo=600;zs.mergeOptions({tapHold:Nt.touchNative&&Nt.safari&&Nt.mobile,tapTolerance:15});var Ud=li.extend({addHooks:function(){us(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){ra(this._map._container,"touchstart",this._onDown,this)},_onDown:function(l){if(clearTimeout(this._holdTimeout),l.touches.length===1){var m=l.touches[0];this._startPos=this._newPos=new ge(m.clientX,m.clientY),this._holdTimeout=setTimeout(d(function(){this._cancel(),this._isTapValid()&&(us(document,"touchend",Ja),us(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",m))},this),Oo),us(document,"touchend touchcancel contextmenu",this._cancel,this),us(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function l(){ra(document,"touchend",Ja),ra(document,"touchend touchcancel",l)},_cancel:function(){clearTimeout(this._holdTimeout),ra(document,"touchend touchcancel contextmenu",this._cancel,this),ra(document,"touchmove",this._onMove,this)},_onMove:function(l){var m=l.touches[0];this._newPos=new ge(m.clientX,m.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(l,m){var j=new MouseEvent(l,{bubbles:!0,cancelable:!0,view:window,screenX:m.screenX,screenY:m.screenY,clientX:m.clientX,clientY:m.clientY});j._simulated=!0,m.target.dispatchEvent(j)}});zs.addInitHook("addHandler","tapHold",Ud),zs.mergeOptions({touchZoom:Nt.touch,bounceAtZoomLimits:!0});var gh=li.extend({addHooks:function(){hs(this._map._container,"leaflet-touch-zoom"),us(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){La(this._map._container,"leaflet-touch-zoom"),ra(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(l){var m=this._map;if(!(!l.touches||l.touches.length!==2||m._animatingZoom||this._zooming)){var j=m.mouseEventToContainerPoint(l.touches[0]),k=m.mouseEventToContainerPoint(l.touches[1]);this._centerPoint=m.getSize()._divideBy(2),this._startLatLng=m.containerPointToLatLng(this._centerPoint),m.options.touchZoom!=="center"&&(this._pinchStartLatLng=m.containerPointToLatLng(j.add(k)._divideBy(2))),this._startDist=j.distanceTo(k),this._startZoom=m.getZoom(),this._moved=!1,this._zooming=!0,m._stop(),us(document,"touchmove",this._onTouchMove,this),us(document,"touchend touchcancel",this._onTouchEnd,this),Ja(l)}},_onTouchMove:function(l){if(!(!l.touches||l.touches.length!==2||!this._zooming)){var m=this._map,j=m.mouseEventToContainerPoint(l.touches[0]),k=m.mouseEventToContainerPoint(l.touches[1]),H=j.distanceTo(k)/this._startDist;if(this._zoom=m.getScaleZoom(H,this._startZoom),!m.options.bounceAtZoomLimits&&(this._zoom<m.getMinZoom()&&H<1||this._zoom>m.getMaxZoom()&&H>1)&&(this._zoom=m._limitZoom(this._zoom)),m.options.touchZoom==="center"){if(this._center=this._startLatLng,H===1)return}else{var le=j._add(k)._divideBy(2)._subtract(this._centerPoint);if(H===1&&le.x===0&&le.y===0)return;this._center=m.unproject(m.project(this._pinchStartLatLng,this._zoom).subtract(le),this._zoom)}this._moved||(m._moveStart(!0,!1),this._moved=!0),z(this._animRequest);var Ee=d(m._move,m,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=K(Ee,this,!0),Ja(l)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,z(this._animRequest),ra(document,"touchmove",this._onTouchMove,this),ra(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});zs.addInitHook("addHandler","touchZoom",gh),zs.BoxZoom=or,zs.DoubleClickZoom=zd,zs.Drag=mi,zs.Keyboard=ph,zs.ScrollWheelZoom=Mc,zs.TapHold=Ud,zs.TouchZoom=gh,a.Bounds=te,a.Browser=Nt,a.CRS=me,a.Canvas=Bd,a.Circle=Od,a.CircleMarker=jl,a.Class=W,a.Control=vr,a.DivIcon=Ef,a.DivOverlay=Bn,a.DomEvent=kd,a.DomUtil=xl,a.Draggable=to,a.Evented=ae,a.FeatureGroup=ci,a.GeoJSON=Pi,a.GridLayer=_l,a.Handler=li,a.Icon=di,a.ImageOverlay=bl,a.LatLng=re,a.LatLngBounds=ce,a.Layer=qr,a.LayerGroup=yl,a.LineUtil=xg,a.Map=zs,a.Marker=_c,a.Mixin=ug,a.Path=ui,a.Point=ge,a.PolyUtil=hh,a.Polygon=Nl,a.Polyline=Di,a.Popup=Ec,a.PosAnimation=pl,a.Projection=jf,a.Rectangle=Po,a.Renderer=ir,a.SVG=Cl,a.SVGOverlay=Fd,a.TileLayer=ro,a.Tooltip=Ac,a.Transformation=Le,a.Util=J,a.VideoOverlay=no,a.bind=d,a.bounds=X,a.canvas=Pc,a.circle=_f,a.circleMarker=Sf,a.control=Ai,a.divIcon=jg,a.extend=i,a.featureGroup=wf,a.geoJSON=Id,a.geoJson=kc,a.gridLayer=Af,a.icon=wc,a.imageOverlay=Cf,a.latLng=de,a.latLngBounds=F,a.layerGroup=pg,a.map=ih,a.marker=bf,a.point=ee,a.polygon=vg,a.polyline=gg,a.popup=kf,a.rectangle=Ng,a.setOptions=b,a.stamp=f,a.svg=Oc,a.svgOverlay=Tf,a.tileLayer=Tr,a.tooltip=yg,a.transformation=ot,a.version=n,a.videoOverlay=Sl;var vh=window.L;a.noConflict=function(){return window.L=vh,this},window.L=a}))})(lm,lm.exports)),lm.exports}var O9=P9();const uk=x5(O9);delete uk.Icon.Default.prototype._getIconUrl;uk.Icon.Default.mergeOptions({iconRetinaUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-icon-2x.png",iconUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-icon.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-shadow.png"});const M9=()=>{const{user:t,isAuthenticated:s,loading:a}=qs(),[n,i]=N.useState([]),[c,d]=N.useState({totalLocations:0,activeLocations:0,totalEmployees:0,totalInventory:0,totalRevenue:0,averagePerformance:0}),[h,f]=N.useState(!1),[g,p]=N.useState(!1),[v,y]=N.useState(!1),[_,S]=N.useState(null),[b,T]=N.useState(!1),[E,A]=N.useState({name:"",address:"",city:"",state:"",zipCode:"",phone:"",email:"",manager:"",operatingHours:"",description:""}),O=async()=>{if(s)try{const[V,ae]=await Promise.all([ke.get("/locations"),ke.get("/locations/stats")]),ge=V.data,Z=ae.data;if(ge.length===0){i([]),d({totalLocations:0,activeLocations:0,totalEmployees:0,totalInventory:0,totalRevenue:0,averagePerformance:0});return}const ee=ge.map(te=>({id:te._id,name:te.name,address:te.address,city:te.city,state:te.state,zipCode:te.zipCode,phone:te.phone,email:te.email,manager:te.manager,operatingHours:te.operatingHours,status:te.status,employees:te.employees,inventory:te.inventory,description:te.description,dailyRevenue:te.dailyRevenue,monthlyRevenue:te.dailyRevenue*30,performance:te.performance,todayOrders:te.dailyOrders,activeCustomers:te.dailyCustomers,lastUpdated:te.updatedAt}));i(ee),d(Z),console.log(" Loaded",ee.length,"real-time locations from database")}catch(V){R.error("Error fetching locations data."),console.error("Error fetching locations:",V)}};N.useEffect(()=>{O()},[s]),N.useEffect(()=>{if(!s)return;const V=setInterval(()=>{O()},3e4);return()=>clearInterval(V)},[s]);const Q=async()=>{T(!0),await O(),T(!1),R.success("Location data refreshed!")},q=V=>{window.location.href=`tel:${V}`,R.success(`Calling ${V}...`)},U=V=>{window.location.href=`sms:${V}`,R.success(`Opening SMS to ${V}...`)},D=(V,ae)=>{window.location.href=`mailto:${V}?subject=Regarding ${ae}`,R.success(`Opening email to ${V}...`)},M=(V,ae)=>{const ge=V.replace(/\s+/g,"").replace("+","");window.open(`https://wa.me/${ge}?text=Hello, regarding ${ae}`,"_blank"),R.success("Opening WhatsApp...")},P=(V,ae)=>{const ge=encodeURIComponent(`${V}, ${ae}`);window.open(`https://www.google.com/maps/search/?api=1&query=${ge}`,"_blank"),R.success("Opening Google Maps...")},G=async()=>{try{T(!0);const V=await ke.post("/locations/seed");R.success(`${V.data.count} default locations added to database!`),await O()}catch(V){V.response?.status===400?R.error(V.response.data.error):R.error("Error seeding locations. Please try again."),console.error("Error seeding locations:",V)}finally{T(!1)}},K=async()=>{const{name:V,address:ae,city:ge,phone:Z,manager:ee}=E;if(!V||!ae||!ge||!Z||!ee)return R.error("Please fill in all required fields.");try{const te=await ke.post("/locations",E);await O(),R.success("Location added successfully!"),f(!1),A({name:"",address:"",city:"",state:"",zipCode:"",phone:"",email:"",manager:"",operatingHours:"",description:""})}catch(te){R.error("Error adding location. Please try again."),console.error("Error adding location:",te)}},z=V=>{S(V),A(V),p(!0)},J=async()=>{try{const V=n.map(ae=>ae.id===_.id?{...E}:ae);i(V),R.success("Location updated successfully!"),p(!1),S(null),A({name:"",address:"",city:"",state:"",zipCode:"",phone:"",email:"",manager:"",operatingHours:"",description:""})}catch(V){R.error("Error updating location."),console.error("Error updating location:",V)}},W=async V=>{try{const ae=n.filter(ge=>ge.id!==V);i(ae),R.success("Location deleted successfully!")}catch(ae){R.error("Error deleting location."),console.error("Error deleting location:",ae)}};if(a)return e.jsx("div",{children:"Loading..."});if(!s)return e.jsx("div",{children:"Please log in to manage locations."});const he=V=>{switch(V){case"active":return"bg-green-100 text-green-800";case"maintenance":return"bg-yellow-100 text-yellow-800";case"closed":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Locations Overview"}),e.jsx("p",{className:"text-muted-foreground",children:"Real-time monitoring and management of your business locations"})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs(I,{variant:"outline",onClick:Q,disabled:b,children:[e.jsx(Cs,{className:`mr-2 h-4 w-4 ${b?"animate-spin":""}`}),b?"Refreshing...":"Refresh"]}),e.jsxs(I,{variant:"outline",onClick:()=>{window.location.href="/dashboard/analytics",R.success("Redirecting to analytics dashboard...")},children:[e.jsx(Mn,{className:"mr-2 h-4 w-4"}),"Analytics"]}),e.jsxs(I,{variant:"outline",onClick:()=>{window.open("https://maps.google.com","_blank"),R.success("Opening map view...")},children:[e.jsx(qv,{className:"mr-2 h-4 w-4"}),"View Map"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-6 gap-4",children:[e.jsxs(se,{children:[e.jsxs(_e,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(Te,{className:"text-sm font-medium",children:"Total Locations"}),e.jsx(Ou,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(oe,{children:[e.jsx("div",{className:"text-2xl font-bold",children:c.totalLocations}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[c.activeLocations," active"]})]})]}),e.jsxs(se,{children:[e.jsxs(_e,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(Te,{className:"text-sm font-medium",children:"Active Locations"}),e.jsx(ks,{className:"h-4 w-4 text-green-500"})]}),e.jsxs(oe,{children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:c.activeLocations}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[Math.round(c.activeLocations/c.totalLocations*100),"% operational"]})]})]}),e.jsxs(se,{children:[e.jsxs(_e,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(Te,{className:"text-sm font-medium",children:"Total Employees"}),e.jsx(fs,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(oe,{children:[e.jsx("div",{className:"text-2xl font-bold",children:c.totalEmployees}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Across all locations"})]})]}),e.jsxs(se,{children:[e.jsxs(_e,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(Te,{className:"text-sm font-medium",children:"Total Inventory"}),e.jsx(cs,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(oe,{children:[e.jsx("div",{className:"text-2xl font-bold",children:c.totalInventory.toLocaleString()}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Items in stock"})]})]}),e.jsxs(se,{children:[e.jsxs(_e,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(Te,{className:"text-sm font-medium",children:"Today's Revenue"}),e.jsx(Sa,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(oe,{children:[e.jsxs("div",{className:"text-2xl font-bold",children:["KES ",c.totalRevenue.toLocaleString()]}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[e.jsx(aa,{className:"inline h-3 w-3 text-green-500 mr-1"}),"+12% from yesterday"]})]})]}),e.jsxs(se,{children:[e.jsxs(_e,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(Te,{className:"text-sm font-medium",children:"Avg Performance"}),e.jsx(rn,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(oe,{children:[e.jsxs("div",{className:"text-2xl font-bold",children:[c.averagePerformance,"%"]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Overall efficiency"})]})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[n.length===0&&e.jsxs(I,{variant:"outline",onClick:G,disabled:b,className:"border-blue-500 text-blue-600 hover:bg-blue-50",children:[e.jsx(cs,{className:"mr-2 h-4 w-4"}),b?"Seeding...":"Seed Demo Locations"]}),e.jsxs(Gt,{open:h,onOpenChange:f,children:[e.jsx(Za,{asChild:!0,children:e.jsxs(I,{className:"bg-green-500 cursor-pointer hover:bg-green-400",children:[e.jsx(ha,{className:"mr-2 h-4 w-4"}),"Add Location"]})}),e.jsxs(qt,{className:"max-w-2xl",children:[e.jsxs(Kt,{children:[e.jsx(Yt,{children:"Add New Location"}),e.jsx(vs,{children:"Add a new business location or branch"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(ue,{htmlFor:"location-name",children:"Location Name *"}),e.jsx(we,{id:"location-name",placeholder:"Enter location name",value:E.name,onChange:V=>A({...E,name:V.target.value})})]}),e.jsxs("div",{children:[e.jsx(ue,{htmlFor:"manager",children:"Manager *"}),e.jsx(we,{id:"manager",placeholder:"Manager name",value:E.manager,onChange:V=>A({...E,manager:V.target.value})})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx(ue,{htmlFor:"address",children:"Address *"}),e.jsx(we,{id:"address",placeholder:"Street address",value:E.address,onChange:V=>A({...E,address:V.target.value})})]}),e.jsxs("div",{children:[e.jsx(ue,{htmlFor:"city",children:"City *"}),e.jsx(we,{id:"city",placeholder:"City",value:E.city,onChange:V=>A({...E,city:V.target.value})})]}),e.jsxs("div",{children:[e.jsx(ue,{htmlFor:"state",children:"State/County"}),e.jsx(we,{id:"state",placeholder:"State or County",value:E.state,onChange:V=>A({...E,state:V.target.value})})]}),e.jsxs("div",{children:[e.jsx(ue,{htmlFor:"zipCode",children:"Zip/Postal Code"}),e.jsx(we,{id:"zipCode",placeholder:"Postal code",value:E.zipCode,onChange:V=>A({...E,zipCode:V.target.value})})]}),e.jsxs("div",{children:[e.jsx(ue,{htmlFor:"phone",children:"Phone *"}),e.jsx(we,{id:"phone",placeholder:"+254 700 000 000",value:E.phone,onChange:V=>A({...E,phone:V.target.value})})]}),e.jsxs("div",{children:[e.jsx(ue,{htmlFor:"email",children:"Email"}),e.jsx(we,{id:"email",type:"email",placeholder:"location@ominbiz.com",value:E.email,onChange:V=>A({...E,email:V.target.value})})]}),e.jsxs("div",{children:[e.jsx(ue,{htmlFor:"operatingHours",children:"Operating Hours"}),e.jsx(we,{id:"operatingHours",placeholder:"8:00 AM - 6:00 PM",value:E.operatingHours,onChange:V=>A({...E,operatingHours:V.target.value})})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx(ue,{htmlFor:"description",children:"Description"}),e.jsx(Gs,{id:"description",placeholder:"Location description",value:E.description,onChange:V=>A({...E,description:V.target.value})})]})]}),e.jsxs(ea,{children:[e.jsx(I,{variant:"outline",onClick:()=>f(!1),children:"Cancel"}),e.jsx(I,{onClick:K,children:"Add Location"})]})]})]})]}),n.length===0&&e.jsx(se,{className:"p-12",children:e.jsxs(oe,{className:"flex flex-col items-center justify-center text-center space-y-4",children:[e.jsx(Fr,{className:"h-16 w-16 text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No Locations Found"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"Get started by adding your first location or seed demo data"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs(I,{onClick:G,disabled:b,children:[e.jsx(cs,{className:"mr-2 h-4 w-4"}),"Seed Demo Locations"]}),e.jsxs(I,{variant:"outline",onClick:()=>f(!0),children:[e.jsx(ha,{className:"mr-2 h-4 w-4"}),"Add Your First Location"]})]})]})}),n.length>0&&e.jsxs(se,{children:[e.jsxs(_e,{children:[e.jsxs(Te,{className:"flex items-center justify-between",children:[e.jsx("span",{children:"All Locations"}),e.jsxs(ze,{variant:"outline",className:"text-xs",children:["Last updated: ",new Date().toLocaleTimeString()]})]}),e.jsx(vt,{children:"Real-time monitoring and management of your business locations"})]}),e.jsx(oe,{children:e.jsxs(Gi,{children:[e.jsx(qi,{children:e.jsxs(Fa,{children:[e.jsx(Bt,{children:"Location"}),e.jsx(Bt,{children:"Performance"}),e.jsx(Bt,{children:"Today's Metrics"}),e.jsx(Bt,{children:"Manager"}),e.jsx(Bt,{children:"Contact"}),e.jsx(Bt,{children:"Status"}),e.jsx(Bt,{children:"Actions"})]})}),e.jsx(Ki,{children:n.map(V=>e.jsxs(Fa,{children:[e.jsx(It,{children:e.jsxs("div",{children:[e.jsxs("div",{className:"font-medium flex items-center gap-2",children:[V.name,V.status==="active"&&e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"})]}),e.jsx("div",{className:"text-sm text-muted-foreground",children:V.description}),e.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:[V.city,", ",V.state]})]})}),e.jsx(It,{children:e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"text-sm font-medium",children:[V.performance,"%"]}),V.performance>=90?e.jsx(aa,{className:"h-3 w-3 text-green-500"}):V.performance>=70?e.jsx(rn,{className:"h-3 w-3 text-yellow-500"}):e.jsx(No,{className:"h-3 w-3 text-red-500"})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-1.5",children:e.jsx("div",{className:`h-1.5 rounded-full ${V.performance>=90?"bg-green-500":V.performance>=70?"bg-yellow-500":"bg-red-500"}`,style:{width:`${V.performance}%`}})})]})}),e.jsx(It,{children:e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Sa,{className:"h-3 w-3 text-green-600"}),e.jsxs("span",{className:"font-medium",children:["KES ",V.dailyRevenue.toLocaleString()]})]}),e.jsxs("div",{className:"flex items-center gap-1 text-muted-foreground",children:[e.jsx(cs,{className:"h-3 w-3"}),e.jsxs("span",{children:[V.todayOrders," orders"]})]}),e.jsxs("div",{className:"flex items-center gap-1 text-muted-foreground",children:[e.jsx(fs,{className:"h-3 w-3"}),e.jsxs("span",{children:[V.activeCustomers," customers"]})]})]})}),e.jsx(It,{children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:V.manager}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:[V.employees," staff members"]})]})}),e.jsx(It,{children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"text-sm space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(ia,{className:"h-3 w-3"}),V.phone]}),V.email&&e.jsxs("div",{className:"flex items-center gap-1 text-muted-foreground",children:[e.jsx(fa,{className:"h-3 w-3"}),V.email]}),e.jsxs("div",{className:"flex items-center gap-1 text-muted-foreground",children:[e.jsx(ps,{className:"h-3 w-3"}),V.operatingHours]})]}),e.jsxs("div",{className:"flex gap-1 flex-wrap",children:[e.jsxs(I,{size:"sm",variant:"outline",className:"h-7 px-2 text-xs",onClick:()=>q(V.phone),children:[e.jsx(ia,{className:"h-3 w-3 mr-1"}),"Call"]}),e.jsxs(I,{size:"sm",variant:"outline",className:"h-7 px-2 text-xs",onClick:()=>U(V.phone),children:[e.jsx(wo,{className:"h-3 w-3 mr-1"}),"SMS"]}),e.jsxs(I,{size:"sm",variant:"outline",className:"h-7 px-2 text-xs",onClick:()=>D(V.email,V.name),children:[e.jsx(fa,{className:"h-3 w-3 mr-1"}),"Email"]}),e.jsxs(I,{size:"sm",variant:"outline",className:"h-7 px-2 text-xs bg-green-50 hover:bg-green-100",onClick:()=>M(V.phone,V.name),children:[e.jsx(ja,{className:"h-3 w-3 mr-1 text-green-600"}),"WhatsApp"]}),e.jsxs(I,{size:"sm",variant:"outline",className:"h-7 px-2 text-xs",onClick:()=>P(V.address,V.city),children:[e.jsx(qv,{className:"h-3 w-3 mr-1"}),"Map"]})]})]})}),e.jsx(It,{children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs(ze,{className:he(V.status),children:[V.status==="active"&&e.jsx(ks,{className:"h-3 w-3 mr-1"}),V.status==="maintenance"&&e.jsx(mr,{className:"h-3 w-3 mr-1"}),V.status==="closed"&&e.jsx(cr,{className:"h-3 w-3 mr-1"}),V.status]}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:[V.inventory," items"]})]})}),e.jsx(It,{children:e.jsxs("div",{className:"flex space-x-1",children:[e.jsx(I,{variant:"outline",size:"sm",onClick:()=>{S(V),y(!0)},children:e.jsx(Pa,{className:"h-4 w-4"})}),e.jsx(I,{variant:"outline",size:"sm",onClick:()=>z(V),children:e.jsx(sl,{className:"h-4 w-4"})}),e.jsx(I,{variant:"outline",size:"sm",onClick:()=>W(V.id),children:e.jsx(Ua,{className:"h-4 w-4"})})]})})]},V.id))})]})})]}),e.jsx(Gt,{open:v,onOpenChange:y,children:e.jsxs(qt,{className:"max-w-4xl",children:[e.jsxs(Kt,{children:[e.jsxs(Yt,{className:"flex items-center gap-2",children:[e.jsx(Ou,{className:"h-5 w-5"}),_?.name," - Detailed View"]}),e.jsx(vs,{children:"Real-time location performance and operational details"})]}),_&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs(se,{children:[e.jsx(_e,{className:"pb-2",children:e.jsx(Te,{className:"text-sm",children:"Performance Score"})}),e.jsxs(oe,{children:[e.jsxs("div",{className:"text-2xl font-bold",children:[_.performance,"%"]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 mt-2",children:e.jsx("div",{className:`h-2 rounded-full ${_.performance>=90?"bg-green-500":_.performance>=70?"bg-yellow-500":"bg-red-500"}`,style:{width:`${_.performance}%`}})})]})]}),e.jsxs(se,{children:[e.jsx(_e,{className:"pb-2",children:e.jsx(Te,{className:"text-sm",children:"Today's Revenue"})}),e.jsxs(oe,{children:[e.jsxs("div",{className:"text-2xl font-bold",children:["KES ",_.dailyRevenue.toLocaleString()]}),e.jsxs("p",{className:"text-xs text-green-600 flex items-center",children:[e.jsx(aa,{className:"h-3 w-3 mr-1"}),"+15% vs yesterday"]})]})]}),e.jsxs(se,{children:[e.jsx(_e,{className:"pb-2",children:e.jsx(Te,{className:"text-sm",children:"Orders Today"})}),e.jsxs(oe,{children:[e.jsx("div",{className:"text-2xl font-bold",children:_.todayOrders}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[_.activeCustomers," active customers"]})]})]}),e.jsxs(se,{children:[e.jsx(_e,{className:"pb-2",children:e.jsx(Te,{className:"text-sm",children:"Inventory Status"})}),e.jsxs(oe,{children:[e.jsx("div",{className:"text-2xl font-bold",children:_.inventory}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Items in stock"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(se,{children:[e.jsx(_e,{children:e.jsx(Te,{className:"text-lg",children:"Location Information"})}),e.jsxs(oe,{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(Fr,{className:"h-4 w-4 mt-1 text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:_.address}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:[_.city,", ",_.state," ",_.zipCode]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ia,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{children:_.phone})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(fa,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{children:_.email})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ps,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{children:_.operatingHours})]})]})]}),e.jsxs(se,{children:[e.jsx(_e,{children:e.jsx(Te,{className:"text-lg",children:"Staff & Operations"})}),e.jsxs(oe,{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(fs,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("span",{children:["Manager: ",_.manager]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(fs,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("span",{children:[_.employees," Staff Members"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(rn,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{children:"Status: "}),e.jsx(ze,{className:he(_.status),children:_.status})]}),e.jsx("div",{className:"pt-2",children:e.jsx("p",{className:"text-sm text-muted-foreground",children:_.description})})]})]})]})]}),e.jsxs(ea,{children:[e.jsx(I,{variant:"outline",onClick:()=>y(!1),children:"Close"}),e.jsx(I,{onClick:()=>{y(!1),z(_)},children:"Edit Location"})]})]})}),e.jsx(Gt,{open:g,onOpenChange:p,children:e.jsxs(qt,{className:"max-w-2xl",children:[e.jsxs(Kt,{children:[e.jsx(Yt,{children:"Edit Location"}),e.jsx(vs,{children:"Update location information"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(ue,{htmlFor:"edit-location-name",children:"Location Name *"}),e.jsx(we,{id:"edit-location-name",placeholder:"Enter location name",value:E.name,onChange:V=>A({...E,name:V.target.value})})]}),e.jsxs("div",{children:[e.jsx(ue,{htmlFor:"edit-manager",children:"Manager *"}),e.jsx(we,{id:"edit-manager",placeholder:"Manager name",value:E.manager,onChange:V=>A({...E,manager:V.target.value})})]})]}),e.jsxs(ea,{children:[e.jsx(I,{variant:"outline",onClick:()=>p(!1),children:"Cancel"}),e.jsx(I,{onClick:J,children:"Update Location"})]})]})})]})};var hk=["PageUp","PageDown"],mk=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],fk={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},Qu="Slider",[py,R9,L9]=A_(Qu),[xk]=Pp(Qu,[L9]),[I9,sg]=xk(Qu),pk=N.forwardRef((t,s)=>{const{name:a,min:n=0,max:i=100,step:c=1,orientation:d="horizontal",disabled:h=!1,minStepsBetweenThumbs:f=0,defaultValue:g=[n],value:p,onValueChange:v=()=>{},onValueCommit:y=()=>{},inverted:_=!1,form:S,...b}=t,T=N.useRef(new Set),E=N.useRef(0),O=d==="horizontal"?F9:B9,[Q=[],q]=_m({prop:p,defaultProp:g,onChange:K=>{[...T.current][E.current]?.focus(),v(K)}}),U=N.useRef(Q);function D(K){const z=$9(Q,K);G(K,z)}function M(K){G(K,E.current)}function P(){const K=U.current[E.current];Q[E.current]!==K&&y(Q)}function G(K,z,{commit:J}={commit:!1}){const W=K9(c),he=Y9(Math.round((K-n)/c)*c+n,W),V=rp(he,[n,i]);q((ae=[])=>{const ge=V9(ae,V,z);if(q9(ge,f*c)){E.current=ge.indexOf(V);const Z=String(ge)!==String(ae);return Z&&J&&y(ge),Z?ge:ae}else return ae})}return e.jsx(I9,{scope:t.__scopeSlider,name:a,disabled:h,min:n,max:i,valueIndexToChangeRef:E,thumbs:T.current,values:Q,orientation:d,form:S,children:e.jsx(py.Provider,{scope:t.__scopeSlider,children:e.jsx(py.Slot,{scope:t.__scopeSlider,children:e.jsx(O,{"aria-disabled":h,"data-disabled":h?"":void 0,...b,ref:s,onPointerDown:ua(b.onPointerDown,()=>{h||(U.current=Q)}),min:n,max:i,inverted:_,onSlideStart:h?void 0:D,onSlideMove:h?void 0:M,onSlideEnd:h?void 0:P,onHomeKeyDown:()=>!h&&G(n,0,{commit:!0}),onEndKeyDown:()=>!h&&G(i,Q.length-1,{commit:!0}),onStepKeyDown:({event:K,direction:z})=>{if(!h){const he=hk.includes(K.key)||K.shiftKey&&mk.includes(K.key)?10:1,V=E.current,ae=Q[V],ge=c*he*z;G(ae+ge,V,{commit:!0})}}})})})})});pk.displayName=Qu;var[gk,vk]=xk(Qu,{startEdge:"left",endEdge:"right",size:"width",direction:1}),F9=N.forwardRef((t,s)=>{const{min:a,max:n,dir:i,inverted:c,onSlideStart:d,onSlideMove:h,onSlideEnd:f,onStepKeyDown:g,...p}=t,[v,y]=N.useState(null),_=Sn(s,O=>y(O)),S=N.useRef(void 0),b=E_(i),T=b==="ltr",E=T&&!c||!T&&c;function A(O){const Q=S.current||v.getBoundingClientRect(),q=[0,Q.width],D=Fj(q,E?[a,n]:[n,a]);return S.current=Q,D(O-Q.left)}return e.jsx(gk,{scope:t.__scopeSlider,startEdge:E?"left":"right",endEdge:E?"right":"left",direction:E?1:-1,size:"width",children:e.jsx(yk,{dir:b,"data-orientation":"horizontal",...p,ref:_,style:{...p.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:O=>{const Q=A(O.clientX);d?.(Q)},onSlideMove:O=>{const Q=A(O.clientX);h?.(Q)},onSlideEnd:()=>{S.current=void 0,f?.()},onStepKeyDown:O=>{const q=fk[E?"from-left":"from-right"].includes(O.key);g?.({event:O,direction:q?-1:1})}})})}),B9=N.forwardRef((t,s)=>{const{min:a,max:n,inverted:i,onSlideStart:c,onSlideMove:d,onSlideEnd:h,onStepKeyDown:f,...g}=t,p=N.useRef(null),v=Sn(s,p),y=N.useRef(void 0),_=!i;function S(b){const T=y.current||p.current.getBoundingClientRect(),E=[0,T.height],O=Fj(E,_?[n,a]:[a,n]);return y.current=T,O(b-T.top)}return e.jsx(gk,{scope:t.__scopeSlider,startEdge:_?"bottom":"top",endEdge:_?"top":"bottom",size:"height",direction:_?1:-1,children:e.jsx(yk,{"data-orientation":"vertical",...g,ref:v,style:{...g.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:b=>{const T=S(b.clientY);c?.(T)},onSlideMove:b=>{const T=S(b.clientY);d?.(T)},onSlideEnd:()=>{y.current=void 0,h?.()},onStepKeyDown:b=>{const E=fk[_?"from-bottom":"from-top"].includes(b.key);f?.({event:b,direction:E?-1:1})}})})}),yk=N.forwardRef((t,s)=>{const{__scopeSlider:a,onSlideStart:n,onSlideMove:i,onSlideEnd:c,onHomeKeyDown:d,onEndKeyDown:h,onStepKeyDown:f,...g}=t,p=sg(Qu,a);return e.jsx(Ma.span,{...g,ref:s,onKeyDown:ua(t.onKeyDown,v=>{v.key==="Home"?(d(v),v.preventDefault()):v.key==="End"?(h(v),v.preventDefault()):hk.concat(mk).includes(v.key)&&(f(v),v.preventDefault())}),onPointerDown:ua(t.onPointerDown,v=>{const y=v.target;y.setPointerCapture(v.pointerId),v.preventDefault(),p.thumbs.has(y)?y.focus():n(v)}),onPointerMove:ua(t.onPointerMove,v=>{v.target.hasPointerCapture(v.pointerId)&&i(v)}),onPointerUp:ua(t.onPointerUp,v=>{const y=v.target;y.hasPointerCapture(v.pointerId)&&(y.releasePointerCapture(v.pointerId),c(v))})})}),jk="SliderTrack",Nk=N.forwardRef((t,s)=>{const{__scopeSlider:a,...n}=t,i=sg(jk,a);return e.jsx(Ma.span,{"data-disabled":i.disabled?"":void 0,"data-orientation":i.orientation,...n,ref:s})});Nk.displayName=jk;var gy="SliderRange",wk=N.forwardRef((t,s)=>{const{__scopeSlider:a,...n}=t,i=sg(gy,a),c=vk(gy,a),d=N.useRef(null),h=Sn(s,d),f=i.values.length,g=i.values.map(y=>_k(y,i.min,i.max)),p=f>1?Math.min(...g):0,v=100-Math.max(...g);return e.jsx(Ma.span,{"data-orientation":i.orientation,"data-disabled":i.disabled?"":void 0,...n,ref:h,style:{...t.style,[c.startEdge]:p+"%",[c.endEdge]:v+"%"}})});wk.displayName=gy;var vy="SliderThumb",bk=N.forwardRef((t,s)=>{const a=R9(t.__scopeSlider),[n,i]=N.useState(null),c=Sn(s,h=>i(h)),d=N.useMemo(()=>n?a().findIndex(h=>h.ref.current===n):-1,[a,n]);return e.jsx(z9,{...t,ref:c,index:d})}),z9=N.forwardRef((t,s)=>{const{__scopeSlider:a,index:n,name:i,...c}=t,d=sg(vy,a),h=vk(vy,a),[f,g]=N.useState(null),p=Sn(s,A=>g(A)),v=f?d.form||!!f.closest("form"):!0,y=D_(f),_=d.values[n],S=_===void 0?0:_k(_,d.min,d.max),b=H9(n,d.values.length),T=y?.[h.size],E=T?W9(T,S,h.direction):0;return N.useEffect(()=>{if(f)return d.thumbs.add(f),()=>{d.thumbs.delete(f)}},[f,d.thumbs]),e.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[h.startEdge]:`calc(${S}% + ${E}px)`},children:[e.jsx(py.ItemSlot,{scope:t.__scopeSlider,children:e.jsx(Ma.span,{role:"slider","aria-label":t["aria-label"]||b,"aria-valuemin":d.min,"aria-valuenow":_,"aria-valuemax":d.max,"aria-orientation":d.orientation,"data-orientation":d.orientation,"data-disabled":d.disabled?"":void 0,tabIndex:d.disabled?void 0:0,...c,ref:p,style:_===void 0?{display:"none"}:t.style,onFocus:ua(t.onFocus,()=>{d.valueIndexToChangeRef.current=n})})}),v&&e.jsx(Sk,{name:i??(d.name?d.name+(d.values.length>1?"[]":""):void 0),form:d.form,value:_},n)]})});bk.displayName=vy;var U9="RadioBubbleInput",Sk=N.forwardRef(({__scopeSlider:t,value:s,...a},n)=>{const i=N.useRef(null),c=Sn(i,n),d=xj(s);return N.useEffect(()=>{const h=i.current;if(!h)return;const f=window.HTMLInputElement.prototype,p=Object.getOwnPropertyDescriptor(f,"value").set;if(d!==s&&p){const v=new Event("input",{bubbles:!0});p.call(h,s),h.dispatchEvent(v)}},[d,s]),e.jsx(Ma.input,{style:{display:"none"},...a,ref:c,defaultValue:s})});Sk.displayName=U9;function V9(t=[],s,a){const n=[...t];return n[a]=s,n.sort((i,c)=>i-c)}function _k(t,s,a){const c=100/(a-s)*(t-s);return rp(c,[0,100])}function H9(t,s){return s>2?`Value ${t+1} of ${s}`:s===2?["Minimum","Maximum"][t]:void 0}function $9(t,s){if(t.length===1)return 0;const a=t.map(i=>Math.abs(i-s)),n=Math.min(...a);return a.indexOf(n)}function W9(t,s,a){const n=t/2,c=Fj([0,50],[0,n]);return(n-c(s)*a)*a}function G9(t){return t.slice(0,-1).map((s,a)=>t[a+1]-s)}function q9(t,s){if(s>0){const a=G9(t);return Math.min(...a)>=s}return!0}function Fj(t,s){return a=>{if(t[0]===t[1]||s[0]===s[1])return s[0];const n=(s[1]-s[0])/(t[1]-t[0]);return s[0]+n*(a-t[0])}}function K9(t){return(String(t).split(".")[1]||"").length}function Y9(t,s){const a=Math.pow(10,s);return Math.round(t*a)/a}var Ck=pk,Z9=Nk,X9=wk,Q9=bk;const vo=N.forwardRef(({className:t,...s},a)=>e.jsxs(Ck,{ref:a,className:ut("relative flex w-full touch-none select-none items-center",t),...s,children:[e.jsx(Z9,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary",children:e.jsx(X9,{className:"absolute h-full bg-primary"})}),e.jsx(Q9,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]}));vo.displayName=Ck.displayName;var J9=(t,s,a,n,i,c,d,h)=>{let f=document.documentElement,g=["light","dark"];function p(_){(Array.isArray(t)?t:[t]).forEach(S=>{let b=S==="class",T=b&&c?i.map(E=>c[E]||E):i;b?(f.classList.remove(...T),f.classList.add(c&&c[_]?c[_]:_)):f.setAttribute(S,_)}),v(_)}function v(_){h&&g.includes(_)&&(f.style.colorScheme=_)}function y(){return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}if(n)p(n);else try{let _=localStorage.getItem(s)||a,S=d&&_==="system"?y():_;p(S)}catch{}},eU=N.createContext(void 0),tU={setTheme:t=>{},themes:[]},Bj=()=>{var t;return(t=N.useContext(eU))!=null?t:tU};N.memo(({forcedTheme:t,storageKey:s,attribute:a,enableSystem:n,enableColorScheme:i,defaultTheme:c,value:d,themes:h,nonce:f,scriptProps:g})=>{let p=JSON.stringify([a,s,c,t,h,d,n,i]).slice(1,-1);return N.createElement("script",{...g,suppressHydrationWarning:!0,nonce:typeof window>"u"?f:"",dangerouslySetInnerHTML:{__html:`(${J9.toString()})(${p})`}})});const sU=()=>{const{theme:t,setTheme:s,sidebarCollapsed:a,setSidebarCollapsed:n,animations:i,setAnimations:c,reducedMotion:d,setReducedMotion:h,fontSize:f,setFontSize:g,borderRadius:p,setBorderRadius:v,compactMode:y,setCompactMode:_,highContrast:S,setHighContrast:b,customAccentColor:T,setCustomAccentColor:E,soundEnabled:A,setSoundEnabled:O,autoSave:Q,setAutoSave:q}=Gu(),[U,D]=N.useState(T),M=[{value:"small",label:"Small (14px)",size:14},{value:"medium",label:"Medium (16px)",size:16},{value:"large",label:"Large (18px)",size:18},{value:"extra-large",label:"Extra Large (20px)",size:20}],P=[{value:"none",label:"None",radius:"0px"},{value:"small",label:"Small",radius:"0.25rem"},{value:"medium",label:"Medium",radius:"0.5rem"},{value:"large",label:"Large",radius:"0.75rem"},{value:"extra-large",label:"Extra Large",radius:"1rem"}],G=J=>{D(J),E(J),R.success("Accent color updated")},K=()=>{s("light"),c(!0),h(!1),g("medium"),v("medium"),_(!1),b(!1),E("#3b82f6"),O(!0),q(!0),D("#3b82f6"),R.success("Settings reset to defaults")},z=()=>{const J={theme:t,animations:i,reducedMotion:d,fontSize:f,borderRadius:p,compactMode:y,highContrast:S,customAccentColor:T,soundEnabled:A,autoSave:Q,exportedAt:new Date().toISOString()},W=new Blob([JSON.stringify(J,null,2)],{type:"application/json"}),he=URL.createObjectURL(W),V=document.createElement("a");V.href=he,V.download="ominbiz-theme-settings.json",V.click(),URL.revokeObjectURL(he),R.success("Settings exported successfully")};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs(se,{children:[e.jsxs(_e,{children:[e.jsxs(Te,{className:"flex items-center gap-2",children:[e.jsx(bu,{className:"h-5 w-5"}),"Appearance"]}),e.jsx(vt,{children:"Customize the visual appearance of your dashboard"})]}),e.jsxs(oe,{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(ue,{children:"Custom Accent Color"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(we,{type:"color",value:U,onChange:J=>G(J.target.value),className:"w-16 h-10 p-1 border rounded"}),e.jsx(we,{type:"text",value:U,onChange:J=>G(J.target.value),className:"flex-1",placeholder:"#3b82f6"})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(ue,{children:"Font Size"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:M.map(J=>e.jsxs(I,{variant:f===J.value?"default":"outline",size:"sm",onClick:()=>g(J.value),className:"justify-start",children:[e.jsx(P5,{className:"h-4 w-4 mr-2"}),J.label]},J.value))})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(ue,{children:"Border Radius"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:P.map(J=>e.jsx(I,{variant:p===J.value?"default":"outline",size:"sm",onClick:()=>v(J.value),className:"justify-start",style:{borderRadius:J.radius},children:J.label},J.value))})]})]})]}),e.jsxs(se,{children:[e.jsxs(_e,{children:[e.jsxs(Te,{className:"flex items-center gap-2",children:[e.jsx(Pa,{className:"h-5 w-5"}),"Accessibility"]}),e.jsx(vt,{children:"Settings to improve accessibility and usability"})]}),e.jsxs(oe,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(ue,{children:"High Contrast Mode"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Increase contrast for better visibility"})]}),e.jsx(_s,{checked:S,onCheckedChange:b})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(ue,{children:"Reduced Motion"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Minimize animations and transitions"})]}),e.jsx(_s,{checked:d,onCheckedChange:h})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(ue,{children:"Compact Mode"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Reduce spacing for more content"})]}),e.jsx(_s,{checked:y,onCheckedChange:_})]})]})]}),e.jsxs(se,{children:[e.jsxs(_e,{children:[e.jsxs(Te,{className:"flex items-center gap-2",children:[e.jsx(Ga,{className:"h-5 w-5"}),"Performance"]}),e.jsx(vt,{children:"Settings that affect performance and user experience"})]}),e.jsxs(oe,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(ue,{children:"Enable Animations"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Show smooth transitions and animations"})]}),e.jsx(_s,{checked:i,onCheckedChange:c})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(ue,{children:"Sound Effects"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Play sounds for interactions"})]}),e.jsx(_s,{checked:A,onCheckedChange:O})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(ue,{children:"Auto-save Settings"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Automatically save theme changes"})]}),e.jsx(_s,{checked:Q,onCheckedChange:q})]})]})]}),e.jsxs(se,{children:[e.jsxs(_e,{children:[e.jsx(Te,{children:"Theme Management"}),e.jsx(vt,{children:"Export, import, or reset your theme settings"})]}),e.jsx(oe,{children:e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsxs(I,{variant:"outline",onClick:z,children:[e.jsx(hn,{className:"h-4 w-4 mr-2"}),"Export Settings"]}),e.jsxs(I,{variant:"outline",onClick:K,children:[e.jsx(Kv,{className:"h-4 w-4 mr-2"}),"Reset to Defaults"]})]})})]})]})},aU=()=>{const{isAuthenticated:t,loading:s,user:a}=qs(),{theme:n,setTheme:i,systemTheme:c}=Bj(),{sidebarCollapsed:d,setSidebarCollapsed:h,animations:f,setAnimations:g,fontSize:p,setFontSize:v,fontSizes:y,borderRadius:_,setBorderRadius:S,borderRadiusOptions:b,compactMode:T,setCompactMode:E,highContrast:A,setHighContrast:O,reducedMotion:Q,setReducedMotion:q,customAccentColor:U,setCustomAccentColor:D,soundEnabled:M,setSoundEnabled:P,autoSave:G,setAutoSave:K}=Gu(),[z,J]=N.useState(!1),[W,he]=N.useState(!1),[V,ae]=N.useState(!1),[ge,Z]=N.useState("general"),[ee,te]=N.useState({businessName:"ominbiz",businessEmail:"admin@ominbiz.com",businessPhone:"+254 700 123 456",businessAddress:"123 Business Street, Nairobi",timezone:"Africa/Nairobi",currency:"KES",language:"en",emailNotifications:!0,smsNotifications:!1,pushNotifications:!0,marketingEmails:!1,soundNotifications:M,desktopNotifications:!0,twoFactorAuth:!1,sessionTimeout:"30",passwordExpiry:"90",loginAlerts:!0,deviceTracking:!0,theme:n||"light",sidebarCollapsed:d,compactMode:T,highContrast:A,reducedMotion:Q,customAccentColor:U,animations:f,fontSize:p,borderRadius:_,dataSharing:!1,analytics:!0,crashReporting:!0,usageStatistics:!1,autoSave:G,cacheSize:100,backgroundSync:!0,currentPassword:"",newPassword:"",confirmPassword:""});N.useEffect(()=>{te(de=>({...de,theme:n,sidebarCollapsed:d,compactMode:T,highContrast:A,reducedMotion:Q,customAccentColor:U,animations:f,fontSize:p,borderRadius:_,soundNotifications:M,autoSave:G}))},[n,d,T,A,Q,U,f,p,_,M,G]),N.useEffect(()=>{(async()=>{if(t)try{he(!0);const me=localStorage.getItem("token"),Ne=(await ke.get("/user/profile",{headers:{Authorization:`Bearer ${me}`}})).data;console.log(" Settings loaded from server:",{user:Ne.name,email:Ne.email}),te(pe=>({...pe,businessName:Ne.businessName||Ne.name||pe.businessName,businessEmail:Ne.businessEmail||Ne.email||pe.businessEmail,businessPhone:Ne.businessPhone||Ne.phone||pe.businessPhone,businessAddress:Ne.businessAddress||Ne.address||pe.businessAddress,timezone:Ne.timezone||pe.timezone,currency:Ne.currency||pe.currency,language:Ne.language||pe.language,emailNotifications:Ne.emailNotifications??pe.emailNotifications,smsNotifications:Ne.smsNotifications??pe.smsNotifications,pushNotifications:Ne.pushNotifications??pe.pushNotifications,marketingEmails:Ne.marketingEmails??pe.marketingEmails,twoFactorAuth:Ne.twoFactorAuth??pe.twoFactorAuth,sessionTimeout:Ne.sessionTimeout?.toString()||pe.sessionTimeout,passwordExpiry:Ne.passwordExpiry?.toString()||pe.passwordExpiry,dataSharing:Ne.dataSharing??pe.dataSharing,analytics:Ne.analytics??pe.analytics}))}catch(me){console.error("Error fetching settings:",me),R.error(me.response?.data?.message||"Error fetching settings. Using default settings.")}finally{he(!1)}})()},[t]);const X=async de=>{try{he(!0);const me=localStorage.getItem("token");let De={},Ne="/user/settings",pe="put";switch(de){case"general":De={businessName:ee.businessName,businessEmail:ee.businessEmail,businessPhone:ee.businessPhone,businessAddress:ee.businessAddress,timezone:ee.timezone,currency:ee.currency,language:ee.language};break;case"notifications":De={emailNotifications:ee.emailNotifications,smsNotifications:ee.smsNotifications,pushNotifications:ee.pushNotifications,marketingEmails:ee.marketingEmails,soundNotifications:ee.soundNotifications},P(ee.soundNotifications);break;case"security":De={twoFactorAuth:ee.twoFactorAuth,sessionTimeout:parseInt(ee.sessionTimeout),passwordExpiry:parseInt(ee.passwordExpiry),loginAlerts:ee.loginAlerts,deviceTracking:ee.deviceTracking};break;case"appearance":De={theme:ee.theme,sidebarCollapsed:ee.sidebarCollapsed,compactMode:ee.compactMode,highContrast:ee.highContrast,reducedMotion:ee.reducedMotion,customAccentColor:ee.customAccentColor,animations:ee.animations,fontSize:ee.fontSize,borderRadius:ee.borderRadius},i(ee.theme),h(ee.sidebarCollapsed),E(ee.compactMode),O(ee.highContrast),q(ee.reducedMotion),D(ee.customAccentColor),g(ee.animations),v(ee.fontSize),S(ee.borderRadius);break;case"privacy":De={dataSharing:ee.dataSharing,analytics:ee.analytics,crashReporting:ee.crashReporting,usageStatistics:ee.usageStatistics};break;case"performance":De={autoSave:ee.autoSave,cacheSize:ee.cacheSize,backgroundSync:ee.backgroundSync},K(ee.autoSave);break}await ke[pe](Ne,{section:de,settings:De},{headers:{Authorization:`Bearer ${me}`}}),ae(!1),console.log(` ${de.charAt(0).toUpperCase()+de.slice(1)} settings saved:`,De),R.success(`${de.charAt(0).toUpperCase()+de.slice(1)} settings saved successfully!`),de==="general"&&(document.title=`${ee.businessName} - Dashboard`),de==="notifications"&&ee.soundNotifications&&console.log(" Sound notifications enabled")}catch(me){console.error(`Error saving ${de} settings:`,me),R.error(me.response?.data?.message||`Error saving ${de} settings.`)}finally{he(!1)}},ce=async()=>{if(!ee.currentPassword||!ee.newPassword||!ee.confirmPassword)return R.error("Please fill in all password fields.");if(ee.newPassword!==ee.confirmPassword)return R.error("New passwords do not match.");if(ee.newPassword.length<8)return R.error("Password must be at least 8 characters long.");if(!/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]/.test(ee.newPassword))return R.error("Password must include uppercase, lowercase, number, and special character.");try{he(!0);const me=localStorage.getItem("token");await ke.put("/user/change-password",{currentPassword:ee.currentPassword,newPassword:ee.newPassword},{headers:{Authorization:`Bearer ${me}`}}),R.success("Password changed successfully!"),te({...ee,currentPassword:"",newPassword:"",confirmPassword:""}),ae(!1)}catch(me){console.error("Error changing password:",me),R.error(me.response?.data?.message||"Error changing password. Please check your current password.")}finally{he(!1)}},F=(de,me)=>{te(De=>({...De,[de]:me})),ae(!0)},re=de=>{const me={general:{businessName:"ominbiz",businessEmail:"admin@ominbiz.com",businessPhone:"+254 700 123 456",businessAddress:"123 Business Street, Nairobi",timezone:"Africa/Nairobi",currency:"KES",language:"en"},notifications:{emailNotifications:!0,smsNotifications:!1,pushNotifications:!0,marketingEmails:!1,soundNotifications:!0}};me[de]&&(te(De=>({...De,...me[de]})),R.info(`${de} settings reset to defaults`))};return s||W?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Cs,{className:"h-8 w-8 animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"Loading settings..."})]})}):t?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold text-foreground flex items-center gap-2",children:[e.jsx(Ya,{className:"h-8 w-8"}),"Settings"]}),e.jsx("p",{className:"text-muted-foreground",children:"Manage your account and application preferences"})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[V&&e.jsxs(ze,{variant:"outline",className:"text-amber-600 border-amber-200",children:[e.jsx(mr,{className:"h-3 w-3 mr-1"}),"Unsaved Changes"]}),e.jsxs(ze,{variant:"secondary",children:[e.jsx(Aa,{className:"h-3 w-3 mr-1"}),a?.role||"User"]})]})]}),e.jsxs(Ha,{defaultValue:"general",value:ge,onValueChange:Z,className:"space-y-6",children:[e.jsxs(Xa,{className:"grid w-full grid-cols-6",children:[e.jsxs(Tt,{value:"general",className:"flex items-center gap-2",children:[e.jsx(Ya,{className:"h-4 w-4"}),"General"]}),e.jsxs(Tt,{value:"notifications",className:"flex items-center gap-2",children:[e.jsx(ur,{className:"h-4 w-4"}),"Notifications"]}),e.jsxs(Tt,{value:"security",className:"flex items-center gap-2",children:[e.jsx(_a,{className:"h-4 w-4"}),"Security"]}),e.jsxs(Tt,{value:"appearance",className:"flex items-center gap-2",children:[e.jsx(bu,{className:"h-4 w-4"}),"Appearance"]}),e.jsxs(Tt,{value:"privacy",className:"flex items-center gap-2",children:[e.jsx(sr,{className:"h-4 w-4"}),"Privacy"]}),e.jsxs(Tt,{value:"performance",className:"flex items-center gap-2",children:[e.jsx(Ga,{className:"h-4 w-4"}),"Performance"]})]}),e.jsx(kt,{value:"general",children:e.jsxs(se,{children:[e.jsxs(_e,{children:[e.jsxs(Te,{className:"flex items-center gap-2",children:[e.jsx(Ou,{className:"h-5 w-5"}),"Business Information"]}),e.jsx(vt,{children:"Configure your business details and regional preferences"})]}),e.jsxs(oe,{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs(ue,{htmlFor:"businessName",className:"flex items-center gap-2",children:[e.jsx(Ou,{className:"h-4 w-4"}),"Business Name"]}),e.jsx(we,{id:"businessName",value:ee.businessName,onChange:de=>F("businessName",de.target.value),placeholder:"Enter your business name"})]}),e.jsxs("div",{children:[e.jsxs(ue,{htmlFor:"businessEmail",className:"flex items-center gap-2",children:[e.jsx(fa,{className:"h-4 w-4"}),"Business Email"]}),e.jsx(we,{id:"businessEmail",type:"email",value:ee.businessEmail,onChange:de=>F("businessEmail",de.target.value),placeholder:"business@example.com"})]}),e.jsxs("div",{children:[e.jsxs(ue,{htmlFor:"businessPhone",className:"flex items-center gap-2",children:[e.jsx(ia,{className:"h-4 w-4"}),"Business Phone"]}),e.jsx(we,{id:"businessPhone",value:ee.businessPhone,onChange:de=>F("businessPhone",de.target.value),placeholder:"+254 700 000 000"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs(ue,{htmlFor:"timezone",className:"flex items-center gap-2",children:[e.jsx(ps,{className:"h-4 w-4"}),"Timezone"]}),e.jsxs(Xt,{value:ee.timezone,onValueChange:de=>F("timezone",de),children:[e.jsx(Jt,{children:e.jsx(Qt,{})}),e.jsxs(es,{children:[e.jsx(Ie,{value:"Africa/Nairobi",children:"East Africa Time (Nairobi)"}),e.jsx(Ie,{value:"Africa/Cairo",children:"Eastern European Time (Cairo)"}),e.jsx(Ie,{value:"UTC",children:"Coordinated Universal Time (UTC)"}),e.jsx(Ie,{value:"America/New_York",children:"Eastern Time (New York)"}),e.jsx(Ie,{value:"Europe/London",children:"Greenwich Mean Time (London)"})]})]})]}),e.jsxs("div",{children:[e.jsxs(ue,{htmlFor:"currency",className:"flex items-center gap-2",children:[e.jsx(Ba,{className:"h-4 w-4"}),"Currency"]}),e.jsxs(Xt,{value:ee.currency,onValueChange:de=>F("currency",de),children:[e.jsx(Jt,{children:e.jsx(Qt,{})}),e.jsxs(es,{children:[e.jsx(Ie,{value:"KES",children:"KES - Kenyan Shilling"}),e.jsx(Ie,{value:"USD",children:"USD - US Dollar"}),e.jsx(Ie,{value:"EUR",children:"EUR - Euro"}),e.jsx(Ie,{value:"GBP",children:"GBP - British Pound"}),e.jsx(Ie,{value:"UGX",children:"UGX - Ugandan Shilling"}),e.jsx(Ie,{value:"TZS",children:"TZS - Tanzanian Shilling"})]})]})]}),e.jsxs("div",{children:[e.jsxs(ue,{htmlFor:"language",className:"flex items-center gap-2",children:[e.jsx(O5,{className:"h-4 w-4"}),"Language"]}),e.jsxs(Xt,{value:ee.language,onValueChange:de=>F("language",de),children:[e.jsx(Jt,{children:e.jsx(Qt,{})}),e.jsxs(es,{children:[e.jsx(Ie,{value:"en",children:"English"}),e.jsx(Ie,{value:"sw",children:"Swahili"}),e.jsx(Ie,{value:"fr",children:"French"}),e.jsx(Ie,{value:"ar",children:"Arabic"})]})]})]})]})]}),e.jsxs("div",{children:[e.jsxs(ue,{htmlFor:"businessAddress",className:"flex items-center gap-2",children:[e.jsx(Fr,{className:"h-4 w-4"}),"Business Address"]}),e.jsx(Gs,{id:"businessAddress",value:ee.businessAddress,onChange:de=>F("businessAddress",de.target.value),placeholder:"Enter your business address",rows:3})]}),e.jsxs("div",{className:"flex gap-3 pt-4 border-t",children:[e.jsxs(I,{onClick:()=>X("general"),disabled:W,className:"flex items-center gap-2",children:[W?e.jsx(Cs,{className:"h-4 w-4 animate-spin"}):e.jsx(Ko,{className:"h-4 w-4"}),"Save General Settings"]}),e.jsxs(I,{variant:"outline",onClick:()=>re("general"),disabled:W,children:[e.jsx(Cs,{className:"h-4 w-4 mr-2"}),"Reset to Defaults"]})]})]})]})}),e.jsx(kt,{value:"notifications",children:e.jsxs(se,{children:[e.jsxs(_e,{children:[e.jsxs(Te,{className:"flex items-center gap-2",children:[e.jsx(ur,{className:"h-5 w-5"}),"Notification Preferences"]}),e.jsx(vt,{children:"Control how and when you receive notifications"})]}),e.jsxs(oe,{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg border",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsxs(ue,{className:"flex items-center gap-2",children:[e.jsx(fa,{className:"h-4 w-4"}),"Email Notifications"]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Receive important updates via email"})]}),e.jsx(_s,{checked:ee.emailNotifications,onCheckedChange:de=>F("emailNotifications",de)})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg border",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsxs(ue,{className:"flex items-center gap-2",children:[e.jsx(Lr,{className:"h-4 w-4"}),"SMS Notifications"]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Get urgent alerts via SMS"})]}),e.jsx(_s,{checked:ee.smsNotifications,onCheckedChange:de=>F("smsNotifications",de)})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg border",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsxs(ue,{className:"flex items-center gap-2",children:[e.jsx(Ga,{className:"h-4 w-4"}),"Push Notifications"]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Real-time notifications in your browser"})]}),e.jsx(_s,{checked:ee.pushNotifications,onCheckedChange:de=>F("pushNotifications",de)})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg border",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsxs(ue,{className:"flex items-center gap-2",children:[ee.soundNotifications?e.jsx(rm,{className:"h-4 w-4"}):e.jsx(Kx,{className:"h-4 w-4"}),"Sound Notifications"]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Play sounds for new notifications"})]}),e.jsx(_s,{checked:ee.soundNotifications,onCheckedChange:de=>F("soundNotifications",de)})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg border",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsxs(ue,{className:"flex items-center gap-2",children:[e.jsx(g1,{className:"h-4 w-4"}),"Marketing Emails"]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Receive promotions and updates"})]}),e.jsx(_s,{checked:ee.marketingEmails,onCheckedChange:de=>F("marketingEmails",de)})]})]}),e.jsxs("div",{className:"flex gap-3 pt-4 border-t",children:[e.jsxs(I,{onClick:()=>X("notifications"),disabled:W,className:"flex items-center gap-2",children:[W?e.jsx(Cs,{className:"h-4 w-4 animate-spin"}):e.jsx(Ko,{className:"h-4 w-4"}),"Save Notification Settings"]}),e.jsxs(I,{variant:"outline",onClick:()=>re("notifications"),disabled:W,children:[e.jsx(Cs,{className:"h-4 w-4 mr-2"}),"Reset to Defaults"]})]})]})]})}),e.jsx(kt,{value:"security",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs(se,{children:[e.jsxs(_e,{children:[e.jsxs(Te,{className:"flex items-center gap-2",children:[e.jsx(ip,{className:"h-5 w-5"}),"Security Preferences"]}),e.jsx(vt,{children:"Enhance your account security with these settings"})]}),e.jsxs(oe,{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg border",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsxs(ue,{className:"flex items-center gap-2",children:[e.jsx(sr,{className:"h-4 w-4"}),"Two-Factor Authentication"]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Extra security layer for your account"})]}),e.jsx(_s,{checked:ee.twoFactorAuth,onCheckedChange:de=>F("twoFactorAuth",de)})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs(ue,{htmlFor:"sessionTimeout",className:"flex items-center gap-2",children:[e.jsx(ps,{className:"h-4 w-4"}),"Session Timeout (minutes)"]}),e.jsx(we,{id:"sessionTimeout",type:"number",min:"5",max:"1440",value:ee.sessionTimeout,onChange:de=>F("sessionTimeout",de.target.value)}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Automatic logout after inactivity"})]}),e.jsxs("div",{children:[e.jsxs(ue,{htmlFor:"passwordExpiry",className:"flex items-center gap-2",children:[e.jsx(Cs,{className:"h-4 w-4"}),"Password Expiry (days)"]}),e.jsx(we,{id:"passwordExpiry",type:"number",min:"1",max:"365",value:ee.passwordExpiry,onChange:de=>F("passwordExpiry",de.target.value)}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Require password change periodically"})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg border",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsxs(ue,{className:"flex items-center gap-2",children:[e.jsx(ur,{className:"h-4 w-4"}),"Login Alerts"]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Get notified of new sign-ins"})]}),e.jsx(_s,{checked:ee.loginAlerts,onCheckedChange:de=>F("loginAlerts",de)})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg border",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsxs(ue,{className:"flex items-center gap-2",children:[e.jsx(Lr,{className:"h-4 w-4"}),"Device Tracking"]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Monitor active devices and sessions"})]}),e.jsx(_s,{checked:ee.deviceTracking,onCheckedChange:de=>F("deviceTracking",de)})]})]}),e.jsx("div",{className:"flex gap-3 pt-4 border-t",children:e.jsxs(I,{onClick:()=>X("security"),disabled:W,className:"flex items-center gap-2",children:[W?e.jsx(Cs,{className:"h-4 w-4 animate-spin"}):e.jsx(Ko,{className:"h-4 w-4"}),"Save Security Settings"]})})]})]}),e.jsxs(se,{children:[e.jsxs(_e,{children:[e.jsxs(Te,{className:"flex items-center gap-2",children:[e.jsx(sr,{className:"h-5 w-5"}),"Change Password"]}),e.jsx(vt,{children:"Update your account password for enhanced security"})]}),e.jsxs(oe,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(ue,{htmlFor:"currentPassword",children:"Current Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(we,{id:"currentPassword",type:z?"text":"password",value:ee.currentPassword,onChange:de=>F("currentPassword",de.target.value),placeholder:"Enter current password"}),e.jsx(I,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>J(!z),children:z?e.jsx(od,{className:"h-4 w-4"}):e.jsx(Pa,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{children:[e.jsx(ue,{htmlFor:"newPassword",children:"New Password"}),e.jsx(we,{id:"newPassword",type:"password",value:ee.newPassword,onChange:de=>F("newPassword",de.target.value),placeholder:"Enter new password"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Must be at least 8 characters with uppercase, lowercase, number, and special character"})]}),e.jsxs("div",{children:[e.jsx(ue,{htmlFor:"confirmPassword",children:"Confirm New Password"}),e.jsx(we,{id:"confirmPassword",type:"password",value:ee.confirmPassword,onChange:de=>F("confirmPassword",de.target.value),placeholder:"Confirm new password"})]}),e.jsxs(I,{onClick:ce,disabled:W||!ee.currentPassword||!ee.newPassword||!ee.confirmPassword,className:"flex items-center gap-2",children:[W?e.jsx(Cs,{className:"h-4 w-4 animate-spin"}):e.jsx(sr,{className:"h-4 w-4"}),"Change Password"]})]})]})]})}),e.jsx(kt,{value:"appearance",children:e.jsx(sU,{})}),e.jsx(kt,{value:"performance",children:e.jsxs(se,{children:[e.jsxs(_e,{children:[e.jsxs(Te,{className:"flex items-center gap-2",children:[e.jsx(Ga,{className:"h-5 w-5"}),"Performance & Data Settings"]}),e.jsx(vt,{children:"Optimize application performance and data usage"})]}),e.jsxs(oe,{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg border",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsxs(ue,{className:"flex items-center gap-2",children:[e.jsx(Ko,{className:"h-4 w-4"}),"Auto-Save"]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Automatically save changes as you work"})]}),e.jsx(_s,{checked:ee.autoSave,onCheckedChange:de=>{F("autoSave",de),K(de),console.log(` Auto-save ${de?"enabled":"disabled"}`),R.success(`Auto-save ${de?"enabled":"disabled"}`)}})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg border",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsxs(ue,{className:"flex items-center gap-2",children:[e.jsx(Cs,{className:"h-4 w-4"}),"Background Sync"]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Keep data synchronized in the background"})]}),e.jsx(_s,{checked:ee.backgroundSync,onCheckedChange:de=>{F("backgroundSync",de),console.log(` Background sync ${de?"enabled":"disabled"}`)}})]}),e.jsxs("div",{children:[e.jsxs(ue,{htmlFor:"cacheSize",className:"flex items-center gap-2",children:[e.jsx(hm,{className:"h-4 w-4"}),"Cache Size: ",ee.cacheSize," MB"]}),e.jsx(vo,{id:"cacheSize",min:50,max:500,step:50,value:[ee.cacheSize],onValueChange:([de])=>F("cacheSize",de),className:"mt-2"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Adjust how much data is cached locally (50-500 MB)"})]}),e.jsx("div",{className:"p-4 rounded-lg bg-muted/50",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(J0,{className:"h-5 w-5 text-muted-foreground mt-0.5"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-medium",children:"Performance Tips"}),e.jsxs("ul",{className:"text-sm text-muted-foreground space-y-1",children:[e.jsx("li",{children:" Enable auto-save to prevent data loss"}),e.jsx("li",{children:" Background sync keeps your data up-to-date"}),e.jsx("li",{children:" Increase cache for faster load times"}),e.jsx("li",{children:" Reduce animations if experiencing lag"})]})]})]})})]}),e.jsxs("div",{className:"flex gap-3 pt-4 border-t",children:[e.jsxs(I,{onClick:()=>X("performance"),disabled:W,className:"flex items-center gap-2",children:[W?e.jsx(Cs,{className:"h-4 w-4 animate-spin"}):e.jsx(Ko,{className:"h-4 w-4"}),"Save Performance Settings"]}),e.jsxs(I,{variant:"outline",onClick:()=>{localStorage.clear(),R.success("Cache cleared! Refresh to see changes."),console.log(" Cache cleared")},children:[e.jsx(Ua,{className:"h-4 w-4 mr-2"}),"Clear Cache"]})]})]})]})}),e.jsx(kt,{value:"privacy",children:e.jsxs(se,{children:[e.jsxs(_e,{children:[e.jsxs(Te,{className:"flex items-center gap-2",children:[e.jsx(hm,{className:"h-5 w-5"}),"Privacy & Data Settings"]}),e.jsx(vt,{children:"Control how your data is collected and used"})]}),e.jsxs(oe,{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg border",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsxs(ue,{className:"flex items-center gap-2",children:[e.jsx(Yo,{className:"h-4 w-4"}),"Data Sharing"]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Share anonymized data to help improve our services"})]}),e.jsx(_s,{checked:ee.dataSharing,onCheckedChange:de=>F("dataSharing",de)})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg border",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsxs(ue,{className:"flex items-center gap-2",children:[e.jsx(g1,{className:"h-4 w-4"}),"Usage Analytics"]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Help us understand how you use the application"})]}),e.jsx(_s,{checked:ee.analytics,onCheckedChange:de=>F("analytics",de)})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg border",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsxs(ue,{className:"flex items-center gap-2",children:[e.jsx(mr,{className:"h-4 w-4"}),"Crash Reporting"]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Automatically report errors and crashes"})]}),e.jsx(_s,{checked:ee.crashReporting,onCheckedChange:de=>F("crashReporting",de)})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg border",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsxs(ue,{className:"flex items-center gap-2",children:[e.jsx(J0,{className:"h-4 w-4"}),"Usage Statistics"]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Collect data about feature usage and performance"})]}),e.jsx(_s,{checked:ee.usageStatistics,onCheckedChange:de=>F("usageStatistics",de)})]})]}),e.jsx("div",{className:"p-4 rounded-lg bg-muted/50",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(J0,{className:"h-5 w-5 text-muted-foreground mt-0.5"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-medium",children:"Data Privacy Information"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"We respect your privacy. All data collection is anonymized and used solely to improve your experience. You can review our privacy policy for more details."}),e.jsxs(I,{variant:"outline",size:"sm",className:"flex items-center gap-2",children:[e.jsx(Xl,{className:"h-3 w-3"}),"View Privacy Policy"]})]})]})}),e.jsxs("div",{className:"flex gap-3 pt-4 border-t",children:[e.jsxs(I,{onClick:()=>X("privacy"),disabled:W,className:"flex items-center gap-2",children:[W?e.jsx(Cs,{className:"h-4 w-4 animate-spin"}):e.jsx(Ko,{className:"h-4 w-4"}),"Save Privacy Settings"]}),e.jsxs(I,{variant:"outline",className:"flex items-center gap-2",children:[e.jsx(hn,{className:"h-4 w-4"}),"Export Data"]}),e.jsxs(I,{variant:"outline",className:"flex items-center gap-2 text-red-600 hover:text-red-700",children:[e.jsx(Ua,{className:"h-4 w-4"}),"Delete Account"]})]})]})]})})]})]}):e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs(se,{className:"p-6 text-center",children:[e.jsx(mr,{className:"h-12 w-12 text-yellow-500 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Authentication Required"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"Please log in to access settings"}),e.jsx(I,{onClick:()=>window.location.href="/login",children:"Go to Login"})]})})};var nU="Separator",q2="horizontal",rU=["horizontal","vertical"],Tk=N.forwardRef((t,s)=>{const{decorative:a,orientation:n=q2,...i}=t,c=iU(n)?n:q2,h=a?{role:"none"}:{"aria-orientation":c==="vertical"?c:void 0,role:"separator"};return e.jsx(Ma.div,{"data-orientation":c,...h,...i,ref:s})});Tk.displayName=nU;function iU(t){return rU.includes(t)}var kk=Tk;const bi=N.forwardRef(({className:t,orientation:s="horizontal",decorative:a=!0,...n},i)=>e.jsx(kk,{ref:i,decorative:a,orientation:s,className:ut("shrink-0 bg-border",s==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",t),...n}));bi.displayName=kk.displayName;const Ek=()=>{const[t,s]=N.useState(navigator.onLine),[a,n]=N.useState(!1);return N.useEffect(()=>{const i=()=>{s(!0),n(!0),setTimeout(()=>n(!1),5e3)},c=()=>{s(!1)};return window.addEventListener("online",i),window.addEventListener("offline",c),()=>{window.removeEventListener("online",i),window.removeEventListener("offline",c)}},[]),{isOnline:t,wasOffline:a}},oU=({showBadge:t=!0,className:s=""})=>{const{isOnline:a,wasOffline:n}=Ek();return N.useEffect(()=>{n&&R.success("Back online!",{description:"Your internet connection has been restored.",icon:e.jsx(ks,{className:"h-4 w-4"})})},[n]),N.useEffect(()=>{a||R.error("No internet connection",{description:"You are currently offline. Some features may not work.",icon:e.jsx(Su,{className:"h-4 w-4"}),duration:1/0})},[a]),t?e.jsx("div",{className:`flex items-center gap-2 ${s}`,children:a?e.jsxs(ze,{variant:"outline",className:"bg-green-50 text-green-700 border-green-200",children:[e.jsx(cp,{className:"h-3 w-3 mr-1"}),"Online"]}):e.jsxs(ze,{variant:"outline",className:"bg-red-50 text-red-700 border-red-200 animate-pulse",children:[e.jsx(Su,{className:"h-3 w-3 mr-1"}),"Offline"]})}):null},lU=()=>{const{user:t,isAuthenticated:s,loading:a}=qs(),{theme:n,customAccentColor:i}=Gu();Ek();const[c,d]=N.useState(!1),[h,f]=N.useState("overview"),[g,p]=N.useState(!1),[v,y]=N.useState("public"),[_,S]=N.useState(!1),[b,T]=N.useState(""),[E,A]=N.useState(1),[O,Q]=N.useState(0),[q,U]=N.useState(!1);N.useRef(null);const D=N.useRef(null),M=N.useRef(null),[P,G]=N.useState({firstName:"",lastName:"",email:"",phone:"",address:"",city:"",country:"",dateOfBirth:"",gender:"",jobTitle:"",department:"",bio:"",avatar:"",coverImage:"",website:"",linkedin:"",twitter:"",github:"",instagram:"",skills:[],languages:[],interests:[],timezone:"UTC",emergencyContact:"",emergencyPhone:"",pronouns:"",location:"",workingHours:"9:00 AM - 5:00 PM",availability:"available",customFields:{}}),[K,z]=N.useState({completionRate:0,profileViews:0,connections:0,totalOrders:0,totalRevenue:0,activeProjects:0,teamMembers:0,rating:0,reviewsCount:0,engagements:0,totalSales:0,achievements:[]}),[J,W]=N.useState({emailNotifications:!0,pushNotifications:!0,marketingEmails:!1,weeklyDigest:!0,profileVisibility:"public",showActivity:!0,showStats:!0,allowMessages:!0,showOnlineStatus:!0}),[he,V]=N.useState({twoFactorEnabled:!1,loginAlerts:!0,sessionTimeout:30,deviceTracking:!0,passwordLastChanged:"2024-01-15"}),[ae,ge]=N.useState([]),[Z,ee]=N.useState([{name:"JavaScript",level:90,category:"Programming"},{name:"React",level:85,category:"Frontend"},{name:"Node.js",level:80,category:"Backend"},{name:"Python",level:75,category:"Programming"},{name:"UI/UX Design",level:70,category:"Design"},{name:"Project Management",level:85,category:"Management"}]),[te,X]=N.useState([]),[ce,F]=N.useState(!1),[re,de]=N.useState(!1),[me,De]=N.useState({email:"",message:""}),[Ne,pe]=N.useState(!1),[Le,ot]=N.useState(""),[Pt,Dt]=N.useState(!1),Ct=async()=>{F(!0);try{const ie=await ke.get("/connections");X(ie.data.connections||[])}catch(ie){console.error("Error fetching connections:",ie),X([{id:1,name:"Sarah Johnson",role:"Product Manager",email:"sarah@example.com",avatar:"",mutual:12,connected:!0},{id:2,name:"Mike Chen",role:"Developer",email:"mike@example.com",avatar:"",mutual:8,connected:!0},{id:3,name:"Emily Davis",role:"Designer",email:"emily@example.com",avatar:"",mutual:15,connected:!1},{id:4,name:"Alex Rodriguez",role:"Marketing Lead",email:"alex@example.com",avatar:"",mutual:6,connected:!0}])}finally{F(!1)}},Lt=async ie=>{try{await ke.post(`/connections/${ie}/connect`),X(Re=>Re.map(tt=>tt.id===ie?{...tt,connected:!0}:tt)),R.success("Connection request sent!")}catch(Re){console.error("Error connecting:",Re),R.error("Failed to send connection request")}},yt=async ie=>{try{await ke.delete(`/connections/${ie}`),X(Re=>Re.map(tt=>tt.id===ie?{...tt,connected:!1}:tt)),R.success("Connection removed")}catch(Re){console.error("Error disconnecting:",Re),R.error("Failed to remove connection")}},ys=async()=>{if(!me.email){R.error("Please enter an email address");return}try{await ke.post("/connections/invite",me),R.success("Connection invitation sent!"),de(!1),De({email:"",message:""}),Ct()}catch(ie){console.error("Error adding connection:",ie),R.error(ie.response?.data?.message||"Failed to send invitation")}},Es=async()=>{if(Le!=="DELETE"){R.error("Please type DELETE to confirm");return}Dt(!0);try{const ie=localStorage.getItem("token");await ke.delete("/user/account",{headers:{Authorization:`Bearer ${ie}`}}),localStorage.clear(),sessionStorage.clear(),R.success("Account deleted successfully. Redirecting..."),setTimeout(()=>{window.location.href="/"},1500)}catch(ie){console.error("Error deleting account:",ie),R.error(ie.response?.data?.message||"Failed to delete account"),Dt(!1)}},[Hs,bs]=N.useState([]),[$s,ws]=N.useState(null),[$t,Na]=N.useState({brightness:100,contrast:100,saturation:100}),Me=[{id:1,name:"Gold Crown",icon:F_,color:"border-yellow-400"},{id:2,name:"Silver Diamond",icon:F5,color:"border-gray-300"},{id:3,name:"Blue Tech",icon:B_,color:"border-blue-500"},{id:4,name:"Green Nature",icon:wi,color:"border-green-500"},{id:5,name:"Red Flame",icon:B5,color:"border-red-500"}];N.useEffect(()=>{(async()=>{if(s)try{const Re=localStorage.getItem("token"),wt=(await ke.get("/user/profile",{headers:{Authorization:`Bearer ${Re}`}})).data,bt={firstName:wt.firstName||wt.name?.split(" ")[0]||"",lastName:wt.lastName||wt.name?.split(" ")[1]||"",email:wt.email||"",phone:wt.phone||"",address:wt.address||"",city:wt.city||"",country:wt.country||"",dateOfBirth:wt.dateOfBirth?wt.dateOfBirth.split("T")[0]:"",gender:wt.gender||"",jobTitle:wt.jobTitle||wt.role||"",department:wt.department||"",bio:wt.bio||"",avatar:wt.avatar||"",location:wt.city||wt.country||""};G(bt),wt.avatar&&bs([wt.avatar]),console.log(" Profile data loaded:",bt)}catch(Re){console.error(" Error fetching profile data:",Re),R.error("Error fetching profile data.")}})(),s&&Ct()},[s,t]),N.useEffect(()=>{if(h==="connections"&&s){Ct();const ie=setInterval(Ct,3e4);return()=>clearInterval(ie)}},[h,s]),N.useEffect(()=>{(async()=>{if(s)try{const tt={Authorization:`Bearer ${localStorage.getItem("token")}`},[wt,bt,rs,gs]=await Promise.allSettled([ke.get("/orders",{headers:tt}),ke.get("/invoices",{headers:tt}),ke.get("/team",{headers:tt}),ke.get("/products",{headers:tt})]),Nt=wt.status==="fulfilled"?Array.isArray(wt.value?.data)?wt.value.data:[]:[],ne=bt.status==="fulfilled"?Array.isArray(bt.value?.data)?bt.value.data:[]:[],ye=rs.status==="fulfilled"?Array.isArray(rs.value?.data)?rs.value.data:[]:[],ve=gs.status==="fulfilled"?Array.isArray(gs.value?.data)?gs.value.data:[]:[],B=Nt.reduce((Pe,dt)=>{const gt=parseFloat(dt.total||dt.amount||0);return Pe+gt},0),fe=Nt.length,je=ye.length,Ue=ve.filter(Pe=>Pe.status==="active").length,Je=[{id:1,title:"First Sale",description:"Made your first sale",earned:fe>0,icon:"",date:fe>0?Nt[0]?.createdAt:null,type:"sales"},{id:2,title:"Team Builder",description:"Added 10+ team members",earned:je>=10,icon:"",date:je>=10?new Date().toISOString():null,type:"team"},{id:3,title:"Revenue Milestone",description:"Reached $10K revenue",earned:B>=1e4,icon:"",date:B>=1e4?new Date().toISOString():null,type:"revenue"},{id:4,title:"Customer Champion",description:"100+ satisfied customers",earned:fe>=100,icon:"",date:fe>=100?new Date().toISOString():null,type:"customer"},{id:5,title:"Innovation Leader",description:"Launched 5+ products",earned:ve.length>=5,icon:"",date:ve.length>=5?new Date().toISOString():null,type:"innovation"},{id:6,title:"Community Builder",description:"50+ orders completed",earned:fe>=50,icon:"",date:fe>=50?new Date().toISOString():null,type:"community"}],Ve=[...Nt.slice(0,3).map((Pe,dt)=>({id:`order-${dt}`,action:`Created order #${Pe.orderNumber||Pe._id?.slice(-6)} - ${Pe.customerName||"Customer"}`,timestamp:ht(Pe.createdAt),type:"order",icon:cs,color:"text-blue-500",metadata:{amount:Pe.total||Pe.amount}})),...ne.slice(0,2).map((Pe,dt)=>({id:`invoice-${dt}`,action:`Generated invoice #${Pe.invoiceNumber||Pe._id?.slice(-6)} - $${Pe.total||0}`,timestamp:ht(Pe.createdAt),type:"finance",icon:Sa,color:"text-green-500",metadata:{amount:Pe.total}})),...ye.slice(0,2).map((Pe,dt)=>({id:`team-${dt}`,action:`Added team member: ${Pe.name||Pe.email}`,timestamp:ht(Pe.createdAt),type:"team",icon:fs,color:"text-orange-500"})),...ve.filter(Pe=>Pe.createdAt).slice(0,2).map((Pe,dt)=>({id:`product-${dt}`,action:`Added product: ${Pe.name}`,timestamp:ht(Pe.createdAt),type:"product",icon:cs,color:"text-purple-500"}))].slice(0,8);ge(Ve);const $e=Nt.length+ne.length+ye.length+ve.length,We=Nt.filter(Pe=>Pe.status==="completed"||Pe.status==="delivered").length,be=Nt.filter(Pe=>Pe.status==="completed"||Pe.status==="delivered").filter(Pe=>Pe.rating),st=be.length>0?be.reduce((Pe,dt)=>Pe+(dt.rating||0),0)/be.length:0;z({completionRate:Ta(),profileViews:0,connections:ye.length,totalOrders:fe,totalRevenue:B,activeProjects:Ue,teamMembers:je,rating:st,reviewsCount:be.length,engagements:$e,totalSales:We,achievements:Je}),Ve.length>0&&ge(Ve),console.log(" Performance data loaded:",{orders:fe,revenue:B,team:je,achievements:Je.filter(Pe=>Pe.earned).length})}catch(Re){console.error(" Error fetching performance data:",Re)}})()},[s]);const ht=ie=>{if(!ie)return"Recently";const Re=new Date(ie),wt=new Date-Re,bt=Math.floor(wt/6e4),rs=Math.floor(wt/36e5),gs=Math.floor(wt/864e5);return bt<60?`${bt} minute${bt!==1?"s":""} ago`:rs<24?`${rs} hour${rs!==1?"s":""} ago`:gs<7?`${gs} day${gs!==1?"s":""} ago`:Re.toLocaleDateString()},He=async()=>{try{const ie=localStorage.getItem("token"),Re={...P};(!Re.gender||Re.gender==="")&&delete Re.gender,Object.keys(Re).forEach(tt=>{Re[tt]===""&&delete Re[tt]}),await ke.put("/user/profile",Re,{headers:{Authorization:`Bearer ${ie}`}}),R.success("Profile updated successfully!"),d(!1)}catch(ie){R.error("Error updating profile."),console.error("Error updating profile:",ie)}},Mt=async ie=>{const Re=ie.target.files[0];if(Re){if(Re.size>5*1024*1024){R.error("File size must be less than 5MB");return}if(!Re.type.startsWith("image/")){R.error("Please select an image file");return}try{U(!0);const tt=new FileReader;tt.onload=wt=>{const bt=wt.target.result;T(bt),S(!0),bs(rs=>[bt,...rs.slice(0,4)])},tt.readAsDataURL(Re)}catch(tt){R.error("Error processing image"),console.error("Error processing image:",tt)}finally{U(!1)}}},Rt=()=>{b&&(G({...P,avatar:b}),R.success("Profile picture updated!"),S(!1),A(1),Q(0),Na({brightness:100,contrast:100,saturation:100}))},xs=async()=>{const ie=prompt("Enter image URL:");if(ie)try{U(!0);const Re=new v1;Re.onload=()=>{T(ie),S(!0),bs(tt=>[ie,...tt.slice(0,4)])},Re.onerror=()=>R.error("Invalid image URL"),Re.src=ie}catch{R.error("Error loading image from URL")}finally{U(!1)}},Ks=ie=>{const Re=ie.target.files[0];if(Re){if(Re.size>10*1024*1024){R.error("File size must be less than 10MB");return}const tt=new FileReader;tt.onload=wt=>{G({...P,coverImage:wt.target.result}),R.success("Cover image updated!")},tt.readAsDataURL(Re)}},Ze=()=>{G({...P,avatar:""}),T(""),R.success("Profile picture removed")},Xe=()=>{Q(ie=>(ie+90)%360)},Se=ie=>{A(Re=>{const tt=ie==="in"?Re+.1:Re-.1;return Math.max(.5,Math.min(3,tt))})},Ce=(ie,Re)=>{Na(tt=>({...tt,[ie]:Re}))},rt=(ie,Re=50)=>{ie&&!Z.find(tt=>tt.name.toLowerCase()===ie.toLowerCase())&&(ee([...Z,{name:ie,level:Re,category:"Other"}]),R.success(`Added skill: ${ie}`))},Qe=ie=>{ee(Z.filter(Re=>Re.name!==ie)),R.success(`Removed skill: ${ie}`)},jt=(ie,Re)=>{ee(Z.map(tt=>tt.name===ie?{...tt,level:Re}:tt))},Ot=()=>{const ie=`${window.location.origin}/profile/${t?.id}`;return`https://api.qrserver.com/v1/create-qr-code/?size=200x200&data=${encodeURIComponent(ie)}`},ts=()=>{const ie=`${window.location.origin}/profile/${t?.id}`;navigator.clipboard.writeText(ie),R.success("Profile link copied to clipboard!")},js=async()=>{const ie=`${window.location.origin}/profile/${t?.id}`;if(navigator.share)try{await navigator.share({title:`${P.firstName} ${P.lastName}'s Profile`,text:"Check out my profile on ominbiz",url:ie})}catch{ts()}else ts()},Zt=()=>{const ie={...P,stats:K,preferences:J,exportedAt:new Date().toISOString()},Re=new Blob([JSON.stringify(ie,null,2)],{type:"application/json"}),tt=URL.createObjectURL(Re),wt=document.createElement("a");wt.href=tt,wt.download=`${P.firstName}_${P.lastName}_profile.json`,wt.click(),URL.revokeObjectURL(tt),R.success("Profile exported successfully!")},Ca=async()=>{R.info("This feature would generate a profile card image")};if(a)return e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-primary"})});if(!s)return e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsx(se,{className:"w-96",children:e.jsxs(oe,{className:"p-6 text-center",children:[e.jsx(_a,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground"}),e.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Authentication Required"}),e.jsx("p",{className:"text-muted-foreground",children:"Please log in to view your profile."})]})})});const Ta=()=>{const ie=[P.firstName,P.lastName,P.email,P.phone,P.bio,P.jobTitle,P.avatar,P.location],Re=ie.filter(tt=>tt&&tt.trim()!=="").length;return Math.round(Re/ie.length*100)},Qa=ie=>{switch(ie){case"available":return"bg-green-500";case"busy":return"bg-red-500";case"away":return"bg-yellow-500";default:return"bg-gray-500"}},Ps=ie=>{switch(ie){case"available":return"Available";case"busy":return"Busy";case"away":return"Away";default:return"Offline"}};return e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsxs("div",{className:"relative h-64 bg-gradient-to-r from-blue-600 via-purple-600 to-pink-600 overflow-hidden",children:[P.coverImage&&e.jsx("img",{src:P.coverImage,alt:"Cover",className:"w-full h-full object-cover"}),e.jsx("div",{className:"absolute inset-0 bg-black/20"}),c&&e.jsxs("div",{className:"absolute top-4 right-4",children:[e.jsx("input",{type:"file",accept:"image/*",onChange:Ks,className:"hidden",id:"cover-upload",ref:M}),e.jsxs(I,{variant:"secondary",size:"sm",onClick:()=>M.current?.click(),children:[e.jsx(Hv,{className:"h-4 w-4 mr-2"}),"Change Cover"]})]}),e.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-6",children:e.jsxs("div",{className:"flex items-end gap-6",children:[e.jsxs("div",{className:"relative group",children:[e.jsxs("div",{className:`relative rounded-full p-1 ${$s?$s.color:"border-4 border-white/20"}`,children:[e.jsxs(Pn,{className:"h-32 w-32 border-4 border-white shadow-lg",children:[e.jsx(Rr,{src:P.avatar,alt:`${P.firstName} ${P.lastName}`}),e.jsxs(On,{className:"text-2xl font-bold bg-primary text-primary-foreground",children:[P.firstName?.[0],P.lastName?.[0]]})]}),c&&e.jsxs(ny,{children:[e.jsx(ry,{asChild:!0,children:e.jsx("div",{className:"absolute inset-0 bg-black/50 rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity cursor-pointer",children:e.jsx(Hv,{className:"h-8 w-8 text-white"})})}),e.jsxs(iy,{align:"center",children:[e.jsxs(Ui,{onClick:()=>D.current?.click(),children:[e.jsx(M5,{className:"h-4 w-4 mr-2"}),"Upload Photo"]}),e.jsxs(Ui,{onClick:xs,children:[e.jsx(pu,{className:"h-4 w-4 mr-2"}),"From URL"]}),P.avatar&&e.jsxs(Ui,{onClick:Ze,children:[e.jsx(Ua,{className:"h-4 w-4 mr-2"}),"Remove Photo"]}),Hs.length>0&&e.jsxs(Ui,{onClick:()=>S(!0),children:[e.jsx(sl,{className:"h-4 w-4 mr-2"}),"Edit Photo"]})]})]})]}),e.jsx("div",{className:`absolute bottom-2 right-2 h-6 w-6 rounded-full border-2 border-white ${Qa(P.availability)}`})]}),e.jsxs("div",{className:"flex-1 text-white",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsxs("h1",{className:"text-3xl font-bold",children:[P.firstName," ",P.lastName]}),P.pronouns&&e.jsx(ze,{variant:"secondary",className:"text-xs",children:P.pronouns}),e.jsx("div",{className:`px-2 py-1 rounded-full text-xs font-medium ${Qa(P.availability)} text-white`,children:Ps(P.availability)}),e.jsx(oU,{showBadge:!0,className:"bg-white/10 backdrop-blur-sm px-2 py-1 rounded-full"})]}),e.jsxs("div",{className:"flex items-center gap-4 text-sm opacity-90 mb-3",children:[P.jobTitle&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(ec,{className:"h-4 w-4"}),P.jobTitle]}),P.location&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Fr,{className:"h-4 w-4"}),P.location]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Dn,{className:"h-4 w-4 fill-current"}),K.rating," (",K.reviewsCount," reviews)"]})]}),P.bio&&e.jsx("p",{className:"text-sm opacity-90 max-w-2xl",children:P.bio})]}),e.jsx("div",{className:"flex items-center gap-2",children:c?e.jsxs(e.Fragment,{children:[e.jsx(I,{variant:"outline",onClick:()=>d(!1),children:"Cancel"}),e.jsxs(I,{onClick:He,children:[e.jsx(Ko,{className:"h-4 w-4 mr-2"}),"Save Changes"]})]}):e.jsxs(e.Fragment,{children:[e.jsxs(I,{variant:"secondary",size:"sm",onClick:js,children:[e.jsx(Pu,{className:"h-4 w-4 mr-2"}),"Share"]}),e.jsxs(I,{variant:"secondary",size:"sm",onClick:()=>p(!0),children:[e.jsx($v,{className:"h-4 w-4 mr-2"}),"QR Code"]}),e.jsxs(I,{onClick:()=>d(!0),children:[e.jsx(sl,{className:"h-4 w-4 mr-2"}),"Edit Profile"]})]})})]})})]}),e.jsx("input",{type:"file",accept:"image/*",onChange:Mt,className:"hidden",ref:D}),e.jsxs("div",{className:"max-w-7xl mx-auto px-6 py-8",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[e.jsx(se,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Total Orders"}),e.jsx("p",{className:"text-2xl font-bold",children:K.totalOrders.toLocaleString()}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"From orders API"})]}),e.jsx(cs,{className:"h-8 w-8 text-blue-500"})]})}),e.jsx(se,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Total Revenue"}),e.jsxs("p",{className:"text-2xl font-bold",children:["$",K.totalRevenue.toLocaleString()]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Calculated from orders"})]}),e.jsx(Sa,{className:"h-8 w-8 text-green-500"})]})}),e.jsx(se,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Engagements"}),e.jsx("p",{className:"text-2xl font-bold",children:K.engagements.toLocaleString()}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Orders + Invoices + Team + Products"})]}),e.jsx(aa,{className:"h-8 w-8 text-purple-500"})]})}),e.jsx(se,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Completed Sales"}),e.jsx("p",{className:"text-2xl font-bold",children:K.totalSales.toLocaleString()}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Delivered orders"})]}),e.jsx(ks,{className:"h-8 w-8 text-emerald-500"})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[e.jsx(se,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Team Size"}),e.jsx("p",{className:"text-2xl font-bold",children:K.teamMembers})]}),e.jsx(fs,{className:"h-8 w-8 text-orange-500"})]})}),e.jsx(se,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Active Projects"}),e.jsx("p",{className:"text-2xl font-bold",children:K.activeProjects})]}),e.jsx(ec,{className:"h-8 w-8 text-indigo-500"})]})}),e.jsx(se,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Avg Rating"}),e.jsx("p",{className:"text-2xl font-bold",children:K.rating?K.rating.toFixed(1):"0.0"}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[K.reviewsCount," reviews"]})]}),e.jsx(Dn,{className:"h-8 w-8 text-yellow-500 fill-current"})]})}),e.jsx(se,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Profile Progress"}),e.jsxs("p",{className:"text-2xl font-bold",children:[Ta(),"%"]})]}),e.jsx(_o,{className:"h-8 w-8 text-pink-500"})]})})]}),e.jsxs(Ha,{value:h,onValueChange:f,className:"space-y-6",children:[e.jsxs(Xa,{className:"grid w-full grid-cols-6",children:[e.jsx(Tt,{value:"overview",children:"Overview"}),e.jsx(Tt,{value:"about",children:"About"}),e.jsx(Tt,{value:"skills",children:"Skills"}),e.jsx(Tt,{value:"activity",children:"Activity"}),e.jsx(Tt,{value:"connections",children:"Network"}),e.jsx(Tt,{value:"settings",children:"Settings"})]}),e.jsx(kt,{value:"overview",className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs(se,{children:[e.jsxs(_e,{children:[e.jsxs(Te,{className:"flex items-center gap-2",children:[e.jsx(_o,{className:"h-5 w-5"}),"Profile Completion"]}),e.jsx(vt,{children:"Complete your profile to get better visibility"})]}),e.jsx(oe,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium",children:"Overall Progress"}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[Ta(),"%"]})]}),e.jsx(dr,{value:Ta(),className:"h-2"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mt-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ks,{className:`h-4 w-4 ${P.avatar?"text-green-500":"text-gray-300"}`}),e.jsx("span",{className:"text-sm",children:"Profile Picture"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ks,{className:`h-4 w-4 ${P.bio?"text-green-500":"text-gray-300"}`}),e.jsx("span",{className:"text-sm",children:"Bio"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ks,{className:`h-4 w-4 ${P.jobTitle?"text-green-500":"text-gray-300"}`}),e.jsx("span",{className:"text-sm",children:"Job Title"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ks,{className:`h-4 w-4 ${P.location?"text-green-500":"text-gray-300"}`}),e.jsx("span",{className:"text-sm",children:"Location"})]})]})]})})]}),e.jsxs(se,{children:[e.jsxs(_e,{children:[e.jsxs(Te,{className:"flex items-center gap-2",children:[e.jsx(ej,{className:"h-5 w-5"}),"Achievements"]}),e.jsx(vt,{children:"Your milestones and accomplishments"})]}),e.jsx(oe,{children:e.jsx("div",{className:"grid grid-cols-2 gap-4",children:K.achievements.map(ie=>e.jsx("div",{className:`p-4 rounded-lg border-2 transition-all ${ie.earned?"border-green-200 bg-green-50 dark:border-green-800 dark:bg-green-950":"border-gray-200 bg-gray-50 dark:border-gray-800 dark:bg-gray-950 opacity-60"}`,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"text-2xl",children:ie.icon}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-medium text-sm",children:ie.title}),e.jsx("p",{className:"text-xs text-muted-foreground",children:ie.description}),ie.earned&&ie.date&&e.jsxs("p",{className:"text-xs text-green-600 dark:text-green-400 mt-1",children:["Earned ",new Date(ie.date).toLocaleDateString()]})]}),ie.earned&&e.jsx(ks,{className:"h-5 w-5 text-green-500"})]})},ie.id))})})]}),e.jsxs(se,{children:[e.jsxs(_e,{children:[e.jsxs(Te,{className:"flex items-center gap-2",children:[e.jsx(rn,{className:"h-5 w-5"}),"Recent Activity"]}),e.jsx(vt,{children:"Your latest actions and updates"})]}),e.jsx(oe,{children:e.jsx(xr,{className:"h-64",children:e.jsx("div",{className:"space-y-4",children:ae.map(ie=>e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:`p-2 rounded-full ${ie.color} bg-opacity-10`,children:e.jsx(ie.icon,{className:`h-4 w-4 ${ie.color}`})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium",children:ie.action}),e.jsx("p",{className:"text-xs text-muted-foreground",children:ie.timestamp})]})]},ie.id))})})})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(se,{children:[e.jsx(_e,{children:e.jsxs(Te,{className:"flex items-center gap-2",children:[e.jsx(Ga,{className:"h-5 w-5"}),"Quick Actions"]})}),e.jsxs(oe,{className:"space-y-3",children:[e.jsxs(I,{variant:"outline",className:"w-full justify-start",onClick:ts,children:[e.jsx(pu,{className:"h-4 w-4 mr-2"}),"Copy Profile Link"]}),e.jsxs(I,{variant:"outline",className:"w-full justify-start",onClick:Zt,children:[e.jsx(hn,{className:"h-4 w-4 mr-2"}),"Export Profile"]}),e.jsxs(I,{variant:"outline",className:"w-full justify-start",onClick:()=>p(!0),children:[e.jsx($v,{className:"h-4 w-4 mr-2"}),"Show QR Code"]}),e.jsxs(I,{variant:"outline",className:"w-full justify-start",onClick:Ca,children:[e.jsx(v1,{className:"h-4 w-4 mr-2"}),"Save as Image"]})]})]}),e.jsxs(se,{children:[e.jsx(_e,{children:e.jsxs(Te,{className:"flex items-center gap-2",children:[e.jsx(cd,{className:"h-5 w-5"}),"Social Links"]})}),e.jsxs(oe,{className:"space-y-3",children:[P.website&&e.jsxs("a",{href:P.website,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 text-sm hover:text-primary transition-colors",children:[e.jsx(cd,{className:"h-4 w-4"}),"Website",e.jsx(Xl,{className:"h-3 w-3"})]}),P.linkedin&&e.jsxs("a",{href:P.linkedin,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 text-sm hover:text-primary transition-colors",children:[e.jsx(tj,{className:"h-4 w-4"}),"LinkedIn",e.jsx(Xl,{className:"h-3 w-3"})]}),P.github&&e.jsxs("a",{href:P.github,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 text-sm hover:text-primary transition-colors",children:[e.jsx(_u,{className:"h-4 w-4"}),"GitHub",e.jsx(Xl,{className:"h-3 w-3"})]}),P.twitter&&e.jsxs("a",{href:P.twitter,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 text-sm hover:text-primary transition-colors",children:[e.jsx(sj,{className:"h-4 w-4"}),"Twitter",e.jsx(Xl,{className:"h-3 w-3"})]})]})]}),e.jsxs(se,{children:[e.jsx(_e,{children:e.jsxs(Te,{className:"flex items-center gap-2",children:[e.jsx(Mn,{className:"h-5 w-5"}),"Profile Stats"]})}),e.jsxs(oe,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm",children:"Total Orders"}),e.jsx("span",{className:"font-medium",children:K.totalOrders})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm",children:"Revenue"}),e.jsxs("span",{className:"font-medium",children:["$",K.totalRevenue.toLocaleString()]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm",children:"Active Projects"}),e.jsx("span",{className:"font-medium",children:K.activeProjects})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm",children:"Team Members"}),e.jsx("span",{className:"font-medium",children:K.teamMembers})]})]})]})]})]})}),e.jsx(kt,{value:"about",className:"space-y-6",children:e.jsxs(se,{children:[e.jsxs(_e,{children:[e.jsx(Te,{children:"About Me"}),e.jsx(vt,{children:"Personal and professional information"})]}),e.jsx(oe,{className:"space-y-6",children:c?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(ue,{children:"First Name"}),e.jsx(we,{value:P.firstName,onChange:ie=>G({...P,firstName:ie.target.value})})]}),e.jsxs("div",{children:[e.jsx(ue,{children:"Last Name"}),e.jsx(we,{value:P.lastName,onChange:ie=>G({...P,lastName:ie.target.value})})]})]}),e.jsxs("div",{children:[e.jsx(ue,{children:"Bio"}),e.jsx(Gs,{rows:4,value:P.bio,onChange:ie=>G({...P,bio:ie.target.value}),placeholder:"Tell us about yourself..."})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(ue,{children:"Email"}),e.jsx(we,{type:"email",value:P.email,onChange:ie=>G({...P,email:ie.target.value})})]}),e.jsxs("div",{children:[e.jsx(ue,{children:"Phone"}),e.jsx(we,{value:P.phone,onChange:ie=>G({...P,phone:ie.target.value})})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(ue,{children:"Job Title"}),e.jsx(we,{value:P.jobTitle,onChange:ie=>G({...P,jobTitle:ie.target.value})})]}),e.jsxs("div",{children:[e.jsx(ue,{children:"Department"}),e.jsx(we,{value:P.department,onChange:ie=>G({...P,department:ie.target.value})})]})]}),e.jsxs("div",{children:[e.jsx(ue,{children:"Location"}),e.jsx(we,{value:P.location,onChange:ie=>G({...P,location:ie.target.value})})]})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(fa,{className:"h-5 w-5 text-muted-foreground mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Email"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:P.email||"Not provided"})]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(ia,{className:"h-5 w-5 text-muted-foreground mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Phone"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:P.phone||"Not provided"})]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(ec,{className:"h-5 w-5 text-muted-foreground mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Job Title"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:P.jobTitle||"Not provided"})]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Fr,{className:"h-5 w-5 text-muted-foreground mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Location"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:P.location||"Not provided"})]})]})]})})]})}),e.jsx(kt,{value:"skills",className:"space-y-6",children:e.jsxs(se,{children:[e.jsx(_e,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(Te,{children:"Skills & Expertise"}),e.jsx(vt,{children:"Your professional skills and proficiency levels"})]}),e.jsxs(I,{size:"sm",onClick:()=>{const ie=prompt("Enter skill name:");ie&&rt(ie,50)},children:[e.jsx(ha,{className:"h-4 w-4 mr-2"}),"Add Skill"]})]})}),e.jsx(oe,{children:e.jsx("div",{className:"space-y-6",children:Z.map(ie=>e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"font-medium",children:ie.name}),e.jsx(ze,{variant:"secondary",className:"text-xs",children:ie.category})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-sm text-muted-foreground",children:[ie.level,"%"]}),e.jsx(I,{variant:"ghost",size:"sm",onClick:()=>Qe(ie.name),children:e.jsx(nr,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(dr,{value:ie.level,className:"h-2 flex-1"}),e.jsx(vo,{value:[ie.level],onValueChange:([Re])=>jt(ie.name,Re),max:100,step:5,className:"w-32"})]})]},ie.name))})})]})}),e.jsx(kt,{value:"activity",className:"space-y-6",children:e.jsxs(se,{children:[e.jsxs(_e,{children:[e.jsx(Te,{children:"Activity Timeline"}),e.jsx(vt,{children:"Your recent actions and updates"})]}),e.jsx(oe,{children:e.jsx(xr,{className:"h-96",children:e.jsx("div",{className:"space-y-4",children:ae.map(ie=>e.jsxs("div",{className:"flex items-start gap-4 p-4 rounded-lg hover:bg-muted/50 transition-colors",children:[e.jsx("div",{className:`p-2 rounded-full ${ie.color} bg-opacity-10`,children:e.jsx(ie.icon,{className:`h-5 w-5 ${ie.color}`})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-medium",children:ie.action}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:ie.timestamp}),e.jsx(ze,{variant:"outline",className:"mt-2 text-xs",children:ie.type})]})]},ie.id))})})})]})}),e.jsx(kt,{value:"connections",className:"space-y-6",children:e.jsxs(se,{children:[e.jsx(_e,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(Te,{children:"Network & Connections"}),e.jsxs(vt,{children:[te.length," connections",ce&&"  Refreshing..."]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(I,{size:"sm",variant:"outline",onClick:Ct,disabled:ce,children:[e.jsx(Xh,{className:`h-4 w-4 mr-2 ${ce?"animate-spin":""}`}),"Refresh"]}),e.jsxs(I,{size:"sm",onClick:()=>de(!0),children:[e.jsx(td,{className:"h-4 w-4 mr-2"}),"Add Connection"]})]})]})}),e.jsx(oe,{children:ce&&te.length===0?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Xh,{className:"h-8 w-8 animate-spin mx-auto text-muted-foreground mb-2"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Loading connections..."})]})}):te.length===0?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsxs("div",{className:"text-center",children:[e.jsx(fs,{className:"h-12 w-12 mx-auto text-muted-foreground mb-3"}),e.jsx("h3",{className:"font-medium mb-1",children:"No connections yet"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Start building your network"}),e.jsxs(I,{size:"sm",onClick:()=>de(!0),children:[e.jsx(td,{className:"h-4 w-4 mr-2"}),"Add Your First Connection"]})]})}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:te.map(ie=>e.jsx(se,{className:"p-4 hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(Pn,{className:"h-12 w-12",children:[e.jsx(Rr,{src:ie.avatar}),e.jsx(On,{children:ie.name.split(" ").map(Re=>Re[0]).join("")})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h4",{className:"font-medium text-sm",children:ie.name}),e.jsx("p",{className:"text-xs text-muted-foreground",children:ie.role}),ie.email&&e.jsx("p",{className:"text-xs text-muted-foreground",children:ie.email}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[ie.mutual," mutual connection",ie.mutual!==1?"s":""]})]}),e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx(I,{variant:ie.connected?"outline":"default",size:"sm",onClick:()=>ie.connected?yt(ie.id):Lt(ie.id),children:ie.connected?"Connected":"Connect"}),ie.connected&&e.jsxs(ny,{children:[e.jsx(ry,{asChild:!0,children:e.jsx(I,{variant:"ghost",size:"sm",children:e.jsx(R5,{className:"h-4 w-4"})})}),e.jsxs(iy,{children:[e.jsxs(Ui,{children:[e.jsx(ja,{className:"h-4 w-4 mr-2"}),"Send Message"]}),e.jsxs(Ui,{children:[e.jsx(Pa,{className:"h-4 w-4 mr-2"}),"View Profile"]}),e.jsxs(Ui,{className:"text-destructive",onClick:()=>yt(ie.id),children:[e.jsx(Ua,{className:"h-4 w-4 mr-2"}),"Remove Connection"]})]})]})]})]})},ie.id))})})]})}),e.jsx(Gt,{open:re,onOpenChange:de,children:e.jsxs(qt,{children:[e.jsxs(Kt,{children:[e.jsx(Yt,{children:"Add New Connection"}),e.jsx(vs,{children:"Send a connection invitation to someone via email"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(ue,{htmlFor:"connection-email",children:"Email Address"}),e.jsx(we,{id:"connection-email",type:"email",placeholder:"colleague@example.com",value:me.email,onChange:ie=>De(Re=>({...Re,email:ie.target.value}))})]}),e.jsxs("div",{children:[e.jsx(ue,{htmlFor:"connection-message",children:"Personal Message (Optional)"}),e.jsx(Gs,{id:"connection-message",placeholder:"I'd like to connect with you...",value:me.message,onChange:ie=>De(Re=>({...Re,message:ie.target.value})),rows:3})]})]}),e.jsxs(ea,{children:[e.jsx(I,{variant:"outline",onClick:()=>{de(!1),De({email:"",message:""})},children:"Cancel"}),e.jsxs(I,{onClick:ys,children:[e.jsx(td,{className:"h-4 w-4 mr-2"}),"Send Invitation"]})]})]})}),e.jsx(kt,{value:"settings",className:"space-y-6",children:e.jsxs(se,{children:[e.jsxs(_e,{children:[e.jsx(Te,{children:"Profile Settings"}),e.jsx(vt,{children:"Manage your privacy and preferences"})]}),e.jsx(oe,{className:"space-y-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg border",children:[e.jsxs("div",{children:[e.jsx(ue,{children:"Email Notifications"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Receive updates via email"})]}),e.jsx(_s,{checked:J.emailNotifications,onCheckedChange:ie=>{W({...J,emailNotifications:ie}),R.success(`Email notifications ${ie?"enabled":"disabled"}`)}})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg border",children:[e.jsxs("div",{children:[e.jsx(ue,{children:"Push Notifications"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Browser push notifications"})]}),e.jsx(_s,{checked:J.pushNotifications,onCheckedChange:ie=>{W({...J,pushNotifications:ie}),R.success(`Push notifications ${ie?"enabled":"disabled"}`)}})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg border",children:[e.jsxs("div",{children:[e.jsx(ue,{children:"Show Activity Status"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Let others see when you're active"})]}),e.jsx(_s,{checked:J.showActivity,onCheckedChange:ie=>{W({...J,showActivity:ie}),R.success(`Activity status ${ie?"visible":"hidden"}`)}})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg border",children:[e.jsxs("div",{children:[e.jsx(ue,{children:"Profile Visibility"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Control who can see your profile"})]}),e.jsxs(Xt,{value:J.profileVisibility,onValueChange:ie=>{W({...J,profileVisibility:ie}),R.success(`Profile visibility set to ${ie}`)},children:[e.jsx(Jt,{className:"w-32",children:e.jsx(Qt,{})}),e.jsxs(es,{children:[e.jsx(Ie,{value:"public",children:"Public"}),e.jsx(Ie,{value:"connections",children:"Connections"}),e.jsx(Ie,{value:"private",children:"Private"})]})]})]}),e.jsxs("div",{className:"p-4 rounded-lg bg-red-50 dark:bg-red-950 border border-red-200 dark:border-red-800",children:[e.jsx("h4",{className:"font-medium text-red-900 dark:text-red-100 mb-2",children:"Danger Zone"}),e.jsx("p",{className:"text-sm text-red-700 dark:text-red-300 mb-4",children:"Irreversible actions"}),e.jsxs(I,{variant:"destructive",size:"sm",onClick:()=>pe(!0),children:[e.jsx(Ua,{className:"h-4 w-4 mr-2"}),"Delete Account"]})]})]})})]})})]})]}),e.jsx(Gt,{open:g,onOpenChange:p,children:e.jsxs(qt,{className:"sm:max-w-md",children:[e.jsxs(Kt,{children:[e.jsx(Yt,{children:"Profile QR Code"}),e.jsx(vs,{children:"Share your profile with others using this QR code"})]}),e.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[e.jsx("div",{className:"p-4 bg-white rounded-lg",children:e.jsx("img",{src:Ot(),alt:"Profile QR Code",className:"w-48 h-48"})}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs(I,{variant:"outline",onClick:ts,children:[e.jsx(Jy,{className:"h-4 w-4 mr-2"}),"Copy Link"]}),e.jsxs(I,{onClick:js,children:[e.jsx(Pu,{className:"h-4 w-4 mr-2"}),"Share"]})]})]})]})}),e.jsx(Gt,{open:Ne,onOpenChange:pe,children:e.jsxs(qt,{className:"sm:max-w-md",children:[e.jsxs(Kt,{children:[e.jsxs(Yt,{className:"flex items-center gap-2 text-red-600",children:[e.jsx(Ws,{className:"h-5 w-5"}),"Delete Account"]}),e.jsx(vs,{children:"This action cannot be undone. This will permanently delete your account and remove all your data from our servers."})]}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(ue,{htmlFor:"delete-confirm",children:["Type ",e.jsx("strong",{children:"DELETE"})," to confirm"]}),e.jsx(we,{id:"delete-confirm",value:Le,onChange:ie=>ot(ie.target.value),placeholder:"DELETE",className:"allow-select"})]}),e.jsxs("div",{className:"bg-red-50 dark:bg-red-950 p-3 rounded-lg",children:[e.jsx("p",{className:"text-sm text-red-800 dark:text-red-200 font-medium",children:"Warning:"}),e.jsxs("ul",{className:"text-xs text-red-700 dark:text-red-300 mt-2 space-y-1 list-disc list-inside",children:[e.jsx("li",{children:"All your profile data will be deleted"}),e.jsx("li",{children:"All your orders and transactions will be removed"}),e.jsx("li",{children:"All your products and inventory will be deleted"}),e.jsx("li",{children:"This action cannot be reversed"})]})]})]}),e.jsxs(ea,{children:[e.jsx(I,{variant:"outline",onClick:()=>{pe(!1),ot("")},disabled:Pt,children:"Cancel"}),e.jsx(I,{variant:"destructive",onClick:Es,disabled:Pt||Le!=="DELETE",children:Pt?e.jsxs(e.Fragment,{children:[e.jsx(Xh,{className:"h-4 w-4 mr-2 animate-spin"}),"Deleting..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Ua,{className:"h-4 w-4 mr-2"}),"Delete Account"]})})]})]})}),e.jsx(Gt,{open:_,onOpenChange:S,children:e.jsxs(qt,{className:"sm:max-w-2xl",children:[e.jsxs(Kt,{children:[e.jsx(Yt,{children:"Edit Profile Picture"}),e.jsx(vs,{children:"Adjust and customize your profile picture"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"relative h-64 bg-gray-100 dark:bg-gray-800 rounded-lg flex items-center justify-center overflow-hidden",children:b&&e.jsx("img",{src:b,alt:"Avatar preview",className:"max-h-56 max-w-56 rounded-full object-cover transition-all",style:{transform:`scale(${E}) rotate(${O}deg)`,filter:`brightness(${$t.brightness}%) contrast(${$t.contrast}%) saturate(${$t.saturation}%)`}})}),e.jsxs("div",{className:"flex justify-center space-x-2",children:[e.jsxs(I,{variant:"outline",size:"sm",onClick:Xe,children:[e.jsx(Xh,{className:"h-4 w-4 mr-1"}),"Rotate"]}),e.jsxs(I,{variant:"outline",size:"sm",onClick:()=>Se("in"),children:[e.jsx(L5,{className:"h-4 w-4 mr-1"}),"Zoom In"]}),e.jsxs(I,{variant:"outline",size:"sm",onClick:()=>Se("out"),children:[e.jsx(I5,{className:"h-4 w-4 mr-1"}),"Zoom Out"]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx(ue,{children:"Brightness"}),e.jsx(vo,{value:[$t.brightness],onValueChange:([ie])=>Ce("brightness",ie),max:200,step:1}),e.jsx(ue,{children:"Contrast"}),e.jsx(vo,{value:[$t.contrast],onValueChange:([ie])=>Ce("contrast",ie),max:200,step:1}),e.jsx(ue,{children:"Saturation"}),e.jsx(vo,{value:[$t.saturation],onValueChange:([ie])=>Ce("saturation",ie),max:200,step:1})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ue,{children:"Avatar Frames"}),e.jsx("div",{className:"flex space-x-2",children:Me.map(ie=>e.jsx(I,{variant:"outline",size:"sm",className:`p-2 ${$s?.id===ie.id?"border-2 border-primary":""}`,onClick:()=>ws(ie),children:e.jsx(ie.icon,{className:"h-4 w-4"})},ie.id))})]}),Hs.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(ue,{children:"Recent Photos"}),e.jsx("div",{className:"flex space-x-2",children:Hs.slice(0,4).map((ie,Re)=>e.jsx("img",{src:ie,alt:`Previous ${Re+1}`,className:"h-12 w-12 rounded-full object-cover cursor-pointer border-2 hover:border-primary transition-colors",onClick:()=>T(ie)},Re))})]})]})]}),e.jsxs(ea,{children:[e.jsx(I,{variant:"outline",onClick:()=>S(!1),children:"Cancel"}),e.jsxs(I,{onClick:Rt,disabled:q,children:[q?e.jsx(Xh,{className:"h-4 w-4 mr-2 animate-spin"}):e.jsx(Ko,{className:"h-4 w-4 mr-2"}),"Save Changes"]})]})]})})]})},cU=()=>{const{user:t,isAuthenticated:s}=qs(),{socket:a,connected:n}=Ra(),[i,c]=N.useState({balance:0,totalIncome:0,totalExpenses:0,pendingPayments:0,availableFunds:0}),[d,h]=N.useState([]),[f,g]=N.useState([]),[p,v]=N.useState(!0),[y,_]=N.useState(!1),[S,b]=N.useState(!0),[T,E]=N.useState("all"),[A,O]=N.useState(!1),[Q,q]=N.useState(!1),[U,D]=N.useState(!1),[M,P]=N.useState(!1),[G,K]=N.useState({amount:"",method:"bank",bankAccount:"",description:""}),[z,J]=N.useState({amount:"",method:"mpesa",reference:"",description:""}),[W,he]=N.useState({amount:"",plan:"fixed",duration:"12",expectedReturn:""}),[V,ae]=N.useState({amount:"",recipient:"",accountNumber:"",description:""}),[ge,Z]=N.useState(!1),[ee,te]=N.useState(""),[X,ce]=N.useState(null),[F,re]=N.useState({daily:5e4,perTransaction:2e4,todaySpent:0}),[de,me]=N.useState(!1),[De,Ne]=N.useState(!1),[pe,Le]=N.useState({amount:"",recipient:"",frequency:"monthly",startDate:""}),[ot,Pt]=N.useState({category:"",limit:"",period:"monthly"}),[Dt,Ct]=N.useState([]),[Lt,yt]=N.useState([]),[ys,Es]=N.useState(!1),[Hs,bs]=N.useState(!1),[$s,ws]=N.useState(!1),[$t,Na]=N.useState([]),[Me,ht]=N.useState({transactionNotifications:!0,emailNotifications:!0,smsNotifications:!1,twoFactorAuth:!1,autoSaveReceipts:!0,currency:"KES",language:"en",theme:"auto"}),[He,Mt]=N.useState({provider:"",accountType:"",phoneNumber:"",email:"",accountNumber:"",accountName:""}),[Rt,xs]=N.useState({provider:"",accountId:"",amount:"",recipient:"",description:""});N.useEffect(()=>{s&&(js(),Ze(),Xe(),Se(),Ce(),rt(),Ks())},[s]);const Ks=()=>{if(a)return a.on("wallet_balance_update",B=>{c(fe=>({...fe,balance:B.balance,availableFunds:B.availableFunds})),R.info("Balance updated",{duration:2e3})}),a.on("wallet_transaction",B=>{h(fe=>[B,...fe]),R.success(`New transaction: ${B.type}`,{duration:3e3}),js()}),a.on("transaction_status_update",B=>{h(fe=>fe.map(je=>je.id===B.transactionId?{...je,status:B.status}:je)),R.info(`Transaction ${B.transactionId} ${B.status}`)}),()=>{a.off("wallet_balance_update"),a.off("wallet_transaction"),a.off("transaction_status_update")}},Ze=async()=>{try{const B=localStorage.getItem("token"),fe=await ke.get("/wallet/limits",{headers:{Authorization:`Bearer ${B}`}});re(fe.data)}catch(B){B.response?.status===404&&re({daily:5e4,perTransaction:2e4,todaySpent:0})}},Xe=async()=>{try{const B=localStorage.getItem("token"),fe=await ke.get("/wallet/budgets",{headers:{Authorization:`Bearer ${B}`}});Ct(fe.data||[])}catch(B){B.response?.status===404&&Ct([])}},Se=async()=>{try{const B=localStorage.getItem("token"),fe=await ke.get("/wallet/recurring",{headers:{Authorization:`Bearer ${B}`}});yt(fe.data||[])}catch(B){B.response?.status===404&&yt([])}},Ce=async()=>{try{const B=localStorage.getItem("token"),fe=await ke.get("/wallet/connected-accounts",{headers:{Authorization:`Bearer ${B}`}});Na(fe.data||[])}catch(B){B.response?.status===404&&Na([])}},rt=async()=>{try{const B=localStorage.getItem("token"),fe=await ke.get("/wallet/settings",{headers:{Authorization:`Bearer ${B}`}});ht(fe.data||Me)}catch(B){if(B.response?.status===404){const fe=localStorage.getItem("walletSettings");if(fe)try{ht(JSON.parse(fe))}catch{}}}},Qe=async()=>{try{const B=localStorage.getItem("token");await ke.put("/wallet/settings",{...Me,userId:t?._id},{headers:{Authorization:`Bearer ${B}`}}),R.success("Wallet settings updated successfully!"),ws(!1)}catch(B){B.response?.status===404?(localStorage.setItem("walletSettings",JSON.stringify(Me)),R.success("Settings saved locally!"),ws(!1)):R.error("Failed to update settings")}},jt=async()=>{if(!He.provider){R.error("Please select a payment provider");return}if(He.provider==="mpesa"&&!He.phoneNumber){R.error("Please enter M-Pesa phone number");return}if(He.provider==="paypal"&&!He.email){R.error("Please enter PayPal email");return}if(He.provider==="bank"&&!He.accountNumber){R.error("Please enter bank account number");return}try{const B=localStorage.getItem("token"),fe=await ke.post("/wallet/connect-account",{type:He.accountType,accountName:He.accountName,accountNumber:He.accountNumber,provider:He.provider},{headers:{Authorization:`Bearer ${B}`}});R.success(`${He.provider.toUpperCase()} account linked successfully!`),Es(!1),Mt({provider:"",accountType:"",phoneNumber:"",email:"",accountNumber:"",accountName:""}),await Ce()}catch(B){console.error("Link account error:",B),R.error("Failed to link account. Please try again.")}},Ot=async()=>{if(!Rt.provider||!Rt.accountId){R.error("Please select a destination account");return}if(!Rt.amount||parseFloat(Rt.amount)<=0){R.error("Please enter a valid amount");return}if(parseFloat(Rt.amount)>i.availableFunds){R.error("Insufficient funds");return}if(Qa(parseFloat(Rt.amount)))try{const B=localStorage.getItem("token"),fe=await ke.post("/wallet/external-transfer",{...Rt,amount:parseFloat(Rt.amount),userId:t?._id},{headers:{Authorization:`Bearer ${B}`}});a&&n&&a.emit("wallet_action",{type:"external_transfer",amount:parseFloat(Rt.amount),provider:Rt.provider,userId:t?._id}),R.success(`Transfer to ${Rt.provider.toUpperCase()} initiated successfully!`),bs(!1),xs({provider:"",accountId:"",amount:"",recipient:"",description:""}),await js(),await Ze()}catch(B){console.error("External transfer error:",B),R.error("Transfer failed. Please try again.")}},ts=async B=>{try{const fe=localStorage.getItem("token");await ke.delete(`/wallet/connected-accounts/${B}`,{headers:{Authorization:`Bearer ${fe}`}}),R.success("Account disconnected successfully"),await Ce()}catch(fe){console.error("Disconnect error:",fe),R.error("Failed to disconnect account")}},js=async()=>{try{v(!0);const fe={Authorization:`Bearer ${localStorage.getItem("token")}`},[je,Ue,Je]=await Promise.allSettled([ke.get("/orders",{headers:fe}),ke.get("/invoices",{headers:fe}),ke.get("/payments",{headers:fe})]),Ve=je.status==="fulfilled"?Array.isArray(je.value?.data)?je.value.data:[]:[],$e=Ue.status==="fulfilled"?Array.isArray(Ue.value?.data)?Ue.value.data:[]:[],We=Je.status==="fulfilled"?Array.isArray(Je.value?.data)?Je.value.data:[]:[],pt=Ve.filter(lt=>lt.status==="completed"||lt.status==="delivered").reduce((lt,ss)=>lt+parseFloat(ss.total||ss.amount||0),0),be=We.filter(lt=>lt.type==="expense"||lt.type==="refund").reduce((lt,ss)=>lt+parseFloat(ss.amount||0),0),st=$e.filter(lt=>lt.status==="pending"||lt.status==="sent").reduce((lt,ss)=>lt+parseFloat(ss.total||0),0),Pe=pt-be,dt=Pe-st;c({balance:Pe,totalIncome:pt,totalExpenses:be,pendingPayments:st,availableFunds:dt});const gt=[...Ve.map(lt=>({id:lt._id,type:"income",category:"sale",description:`Order #${lt.orderNumber||lt._id?.slice(-6)} - ${lt.customerName||"Customer"}`,amount:parseFloat(lt.total||lt.amount||0),currency:lt.currency||"KES",status:lt.status,date:new Date(lt.createdAt),method:lt.paymentMethod||"Card"})),...$e.map(lt=>({id:lt._id,type:lt.status==="paid"?"income":"pending",category:"invoice",description:`Invoice #${lt.invoiceNumber||lt._id?.slice(-6)} - ${lt.clientName||"Client"}`,amount:parseFloat(lt.total||0),currency:lt.currency||"KES",status:lt.status,date:new Date(lt.createdAt),method:lt.paymentMethod||"Bank Transfer"})),...We.map(lt=>({id:lt._id,type:"expense",category:lt.category||"expense",description:lt.description||`Payment ${lt._id?.slice(-6)}`,amount:parseFloat(lt.amount||0),currency:lt.currency||"KES",status:lt.status||"completed",date:new Date(lt.createdAt||lt.date),method:lt.method||"Cash"}))].sort((lt,ss)=>ss.date-lt.date);h(gt);const Ft={};gt.forEach(lt=>{Ft[lt.currency]||(Ft[lt.currency]={income:0,expenses:0,balance:0}),lt.type==="income"?Ft[lt.currency].income+=lt.amount:lt.type==="expense"&&(Ft[lt.currency].expenses+=lt.amount),Ft[lt.currency].balance=Ft[lt.currency].income-Ft[lt.currency].expenses}),g(Object.entries(Ft).map(([lt,ss])=>({code:lt,...ss}))),console.log(" Wallet data loaded:",{balance:Pe,transactions:gt.length,currencies:Object.keys(Ft).length})}catch(B){console.error(" Error fetching wallet data:",B),R.error("Failed to load wallet data")}finally{v(!1)}},Zt=async()=>{_(!0),await js(),_(!1),R.success("Wallet data refreshed!")},Ca=(B,fe)=>{ce({action:B,data:fe}),Z(!0)},Ta=async()=>{if(!ee||ee.length<4){R.error("Please enter a valid PIN");return}try{const B=localStorage.getItem("token");if((await ke.post("/wallet/verify-pin",{pin:ee,userId:t?._id},{headers:{Authorization:`Bearer ${B}`}})).data.verified){if(Z(!1),te(""),X){switch(X.action){case"withdraw":await ie(X.data);break;case"transfer":await rs(X.data);break;case"invest":await wt(X.data);break}ce(null)}}else R.error("Invalid PIN")}catch(B){R.error("Security verification failed"),console.error("PIN verification error:",B)}},Qa=B=>B>F.perTransaction?(R.error(`Transaction limit is KES ${F.perTransaction.toLocaleString()}`),!1):F.todaySpent+B>F.daily?(R.error(`Daily limit exceeded. Remaining: KES ${(F.daily-F.todaySpent).toLocaleString()}`),!1):!0,Ps=async()=>{if(!G.amount||parseFloat(G.amount)<=0){R.error("Please enter a valid amount");return}if(parseFloat(G.amount)>i.availableFunds){R.error("Insufficient funds");return}Qa(parseFloat(G.amount))&&Ca("withdraw",G)},ie=async B=>{try{const fe=localStorage.getItem("token"),je=await ke.post("/wallet/withdraw",{...B,amount:parseFloat(B.amount),userId:t?._id},{headers:{Authorization:`Bearer ${fe}`}});a&&n&&a.emit("wallet_action",{type:"withdraw",amount:parseFloat(B.amount),userId:t?._id}),R.success(`Withdrawal of KES ${B.amount} initiated successfully!`),O(!1),K({amount:"",method:"bank",bankAccount:"",description:""}),await js(),await Ze()}catch(fe){console.error("Withdrawal error:",fe),R.error("Withdrawal failed. Please try again.")}},Re=async()=>{if(!z.amount||parseFloat(z.amount)<=0){R.error("Please enter a valid amount");return}try{const B=localStorage.getItem("token");await ke.post("/wallet/deposit",{...z,amount:parseFloat(z.amount),userId:t?._id},{headers:{Authorization:`Bearer ${B}`}}),R.success(`Deposit of KES ${z.amount} recorded successfully!`),q(!1),J({amount:"",method:"mpesa",reference:"",description:""}),await js()}catch(B){console.error("Deposit error:",B),R.error("Deposit failed. Please try again.")}},tt=async()=>{if(!W.amount||parseFloat(W.amount)<=0){R.error("Please enter a valid amount");return}if(parseFloat(W.amount)>i.availableFunds){R.error("Insufficient funds for investment");return}Ca("invest",W)},wt=async B=>{try{const fe=localStorage.getItem("token"),je=gs(parseFloat(B.amount),B.plan,parseInt(B.duration)),Ue=await ke.post("/wallet/invest",{...B,amount:parseFloat(B.amount),expectedReturn:je,userId:t?._id},{headers:{Authorization:`Bearer ${fe}`}});a&&n&&a.emit("wallet_action",{type:"invest",amount:parseFloat(B.amount),plan:B.plan,userId:t?._id}),R.success(`Investment of KES ${B.amount} created successfully!`),D(!1),he({amount:"",plan:"fixed",duration:"12",expectedReturn:""}),await js()}catch(fe){console.error("Investment error:",fe),R.error("Investment failed. Please try again.")}},bt=async()=>{if(!V.amount||parseFloat(V.amount)<=0){R.error("Please enter a valid amount");return}if(parseFloat(V.amount)>i.availableFunds){R.error("Insufficient funds");return}if(!V.recipient||!V.accountNumber){R.error("Please provide recipient details");return}Qa(parseFloat(V.amount))&&Ca("transfer",V)},rs=async B=>{try{const fe=localStorage.getItem("token"),je=await ke.post("/wallet/transfer",{...B,amount:parseFloat(B.amount),userId:t?._id},{headers:{Authorization:`Bearer ${fe}`}});a&&n&&a.emit("wallet_action",{type:"transfer",amount:parseFloat(B.amount),recipient:B.recipient,userId:t?._id}),R.success(`Transfer of KES ${B.amount} to ${B.recipient} successful!`),P(!1),ae({amount:"",recipient:"",accountNumber:"",description:""}),await js(),await Ze()}catch(fe){console.error("Transfer error:",fe),R.error("Transfer failed. Please try again.")}},gs=(B,fe,je)=>{const Je={fixed:.08,flexible:.06,premium:.12,compound:.1}[fe]||.08,Ve=je/12;return fe==="compound"?B*Math.pow(1+Je,Ve):B*(1+Je*Ve)},Nt=(B,fe)=>B==="income"?e.jsx(y1,{className:"h-4 w-4 text-green-600"}):B==="expense"?e.jsx(j1,{className:"h-4 w-4 text-red-600"}):e.jsx(Cs,{className:"h-4 w-4 text-blue-600"}),ne=B=>{switch(B?.toLowerCase()){case"mpesa":return"";case"paypal":return"";case"bank":return"";case"card":return"";case"stripe":return"";case"flutterwave":return"";case"airtel":return"";case"tkash":return"";case"paystack":return"";case"pesapal":return"";default:return""}},ye=B=>{switch(B?.toLowerCase()){case"completed":case"paid":case"delivered":return"bg-green-100 text-green-800";case"pending":case"processing":return"bg-yellow-100 text-yellow-800";case"failed":case"cancelled":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},ve=d.filter(B=>T==="all"?!0:T==="income"?B.type==="income":T==="expense"?B.type==="expense":T==="pending"?B.type==="pending":!0);return p?e.jsx("div",{className:"p-6 max-w-7xl mx-auto",children:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto"}),e.jsx("p",{className:"text-muted-foreground",children:"Loading wallet data..."})]})})}):e.jsxs("div",{className:"p-6 max-w-7xl mx-auto space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold text-foreground flex items-center gap-3",children:[e.jsx(Uu,{className:"h-8 w-8 text-primary"}),"My Wallet"]}),e.jsx("p",{className:"text-muted-foreground mt-2",children:"Track your financial transactions and manage your funds"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(I,{variant:"outline",onClick:()=>ws(!0),children:[e.jsx(Ya,{className:"mr-2 h-4 w-4"}),"Settings"]}),e.jsxs(I,{variant:"outline",onClick:Zt,disabled:y,children:[e.jsx(Cs,{className:`mr-2 h-4 w-4 ${y?"animate-spin":""}`}),y?"Refreshing...":"Refresh"]}),e.jsxs(I,{variant:"outline",children:[e.jsx(hn,{className:"mr-2 h-4 w-4"}),"Export"]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs(Gt,{open:Q,onOpenChange:q,children:[e.jsx(Za,{asChild:!0,children:e.jsx(se,{className:"cursor-pointer hover:shadow-lg transition-shadow hover:border-green-500",children:e.jsxs(oe,{className:"p-6 text-center",children:[e.jsx("div",{className:"mx-auto w-12 h-12 rounded-full bg-green-100 flex items-center justify-center mb-3",children:e.jsx(ha,{className:"h-6 w-6 text-green-600"})}),e.jsx("h3",{className:"font-semibold",children:"Deposit"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Add funds"})]})})}),e.jsxs(qt,{children:[e.jsxs(Kt,{children:[e.jsx(Yt,{children:"Deposit Funds"}),e.jsx(vs,{children:"Add money to your wallet"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(ue,{htmlFor:"deposit-amount",children:"Amount (KES) *"}),e.jsx(we,{id:"deposit-amount",type:"number",placeholder:"Enter amount",value:z.amount,onChange:B=>J({...z,amount:B.target.value})})]}),e.jsxs("div",{children:[e.jsx(ue,{htmlFor:"deposit-method",children:"Payment Method *"}),e.jsxs(Xt,{value:z.method,onValueChange:B=>J({...z,method:B}),children:[e.jsx(Jt,{children:e.jsx(Qt,{})}),e.jsxs(es,{children:[e.jsx(Ie,{value:"mpesa",children:"M-Pesa"}),e.jsx(Ie,{value:"bank",children:"Bank Transfer"}),e.jsx(Ie,{value:"card",children:"Credit/Debit Card"}),e.jsx(Ie,{value:"paypal",children:"PayPal"})]})]})]}),e.jsxs("div",{children:[e.jsx(ue,{htmlFor:"deposit-reference",children:"Reference Number"}),e.jsx(we,{id:"deposit-reference",placeholder:"Transaction reference",value:z.reference,onChange:B=>J({...z,reference:B.target.value})})]}),e.jsxs("div",{children:[e.jsx(ue,{htmlFor:"deposit-description",children:"Description (Optional)"}),e.jsx(Gs,{id:"deposit-description",placeholder:"Add notes",value:z.description,onChange:B=>J({...z,description:B.target.value})})]})]}),e.jsxs(ea,{children:[e.jsx(I,{variant:"outline",onClick:()=>q(!1),children:"Cancel"}),e.jsx(I,{onClick:Re,children:"Confirm Deposit"})]})]})]}),e.jsxs(Gt,{open:A,onOpenChange:O,children:[e.jsx(Za,{asChild:!0,children:e.jsx(se,{className:"cursor-pointer hover:shadow-lg transition-shadow hover:border-red-500",children:e.jsxs(oe,{className:"p-6 text-center",children:[e.jsx("div",{className:"mx-auto w-12 h-12 rounded-full bg-red-100 flex items-center justify-center mb-3",children:e.jsx(Em,{className:"h-6 w-6 text-red-600"})}),e.jsx("h3",{className:"font-semibold",children:"Withdraw"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Cash out"})]})})}),e.jsxs(qt,{children:[e.jsxs(Kt,{children:[e.jsx(Yt,{children:"Withdraw Funds"}),e.jsxs(vs,{children:["Available: KES ",i.availableFunds.toLocaleString()]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(ue,{htmlFor:"withdraw-amount",children:"Amount (KES) *"}),e.jsx(we,{id:"withdraw-amount",type:"number",placeholder:"Enter amount",value:G.amount,onChange:B=>K({...G,amount:B.target.value})})]}),e.jsxs("div",{children:[e.jsx(ue,{htmlFor:"withdraw-method",children:"Withdrawal Method *"}),e.jsxs(Xt,{value:G.method,onValueChange:B=>K({...G,method:B}),children:[e.jsx(Jt,{children:e.jsx(Qt,{})}),e.jsxs(es,{children:[e.jsx(Ie,{value:"bank",children:"Bank Transfer"}),e.jsx(Ie,{value:"mpesa",children:"M-Pesa"}),e.jsx(Ie,{value:"paypal",children:"PayPal"})]})]})]}),e.jsxs("div",{children:[e.jsx(ue,{htmlFor:"withdraw-account",children:"Bank Account / Phone Number *"}),e.jsx(we,{id:"withdraw-account",placeholder:"Account details",value:G.bankAccount,onChange:B=>K({...G,bankAccount:B.target.value})})]}),e.jsxs("div",{children:[e.jsx(ue,{htmlFor:"withdraw-description",children:"Description (Optional)"}),e.jsx(Gs,{id:"withdraw-description",placeholder:"Add notes",value:G.description,onChange:B=>K({...G,description:B.target.value})})]})]}),e.jsxs(ea,{children:[e.jsx(I,{variant:"outline",onClick:()=>O(!1),children:"Cancel"}),e.jsx(I,{onClick:Ps,variant:"destructive",children:"Confirm Withdrawal"})]})]})]}),e.jsxs(Gt,{open:M,onOpenChange:P,children:[e.jsx(Za,{asChild:!0,children:e.jsx(se,{className:"cursor-pointer hover:shadow-lg transition-shadow hover:border-blue-500",children:e.jsxs(oe,{className:"p-6 text-center",children:[e.jsx("div",{className:"mx-auto w-12 h-12 rounded-full bg-blue-100 flex items-center justify-center mb-3",children:e.jsx(z5,{className:"h-6 w-6 text-blue-600"})}),e.jsx("h3",{className:"font-semibold",children:"Transfer"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Send money"})]})})}),e.jsxs(qt,{children:[e.jsxs(Kt,{children:[e.jsx(Yt,{children:"Transfer Funds"}),e.jsx(vs,{children:"Send money to another account"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(ue,{htmlFor:"transfer-amount",children:"Amount (KES) *"}),e.jsx(we,{id:"transfer-amount",type:"number",placeholder:"Enter amount",value:V.amount,onChange:B=>ae({...V,amount:B.target.value})})]}),e.jsxs("div",{children:[e.jsx(ue,{htmlFor:"transfer-recipient",children:"Recipient Name *"}),e.jsx(we,{id:"transfer-recipient",placeholder:"Full name",value:V.recipient,onChange:B=>ae({...V,recipient:B.target.value})})]}),e.jsxs("div",{children:[e.jsx(ue,{htmlFor:"transfer-account",children:"Account Number *"}),e.jsx(we,{id:"transfer-account",placeholder:"Account or phone number",value:V.accountNumber,onChange:B=>ae({...V,accountNumber:B.target.value})})]}),e.jsxs("div",{children:[e.jsx(ue,{htmlFor:"transfer-description",children:"Description (Optional)"}),e.jsx(Gs,{id:"transfer-description",placeholder:"Add notes",value:V.description,onChange:B=>ae({...V,description:B.target.value})})]})]}),e.jsxs(ea,{children:[e.jsx(I,{variant:"outline",onClick:()=>P(!1),children:"Cancel"}),e.jsx(I,{onClick:bt,children:"Send Transfer"})]})]})]}),e.jsxs(Gt,{open:U,onOpenChange:D,children:[e.jsx(Za,{asChild:!0,children:e.jsx(se,{className:"cursor-pointer hover:shadow-lg transition-shadow hover:border-purple-500",children:e.jsxs(oe,{className:"p-6 text-center",children:[e.jsx("div",{className:"mx-auto w-12 h-12 rounded-full bg-purple-100 flex items-center justify-center mb-3",children:e.jsx(U5,{className:"h-6 w-6 text-purple-600"})}),e.jsx("h3",{className:"font-semibold",children:"Invest"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Grow wealth"})]})})}),e.jsxs(qt,{children:[e.jsxs(Kt,{children:[e.jsx(Yt,{children:"Create Investment"}),e.jsx(vs,{children:"Invest your funds and earn returns"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(ue,{htmlFor:"invest-amount",children:"Amount (KES) *"}),e.jsx(we,{id:"invest-amount",type:"number",placeholder:"Enter amount",value:W.amount,onChange:B=>he({...W,amount:B.target.value})})]}),e.jsxs("div",{children:[e.jsx(ue,{htmlFor:"invest-plan",children:"Investment Plan *"}),e.jsxs(Xt,{value:W.plan,onValueChange:B=>he({...W,plan:B}),children:[e.jsx(Jt,{children:e.jsx(Qt,{})}),e.jsxs(es,{children:[e.jsx(Ie,{value:"fixed",children:"Fixed Deposit (8% p.a.)"}),e.jsx(Ie,{value:"flexible",children:"Flexible Savings (6% p.a.)"}),e.jsx(Ie,{value:"premium",children:"Premium Growth (12% p.a.)"}),e.jsx(Ie,{value:"compound",children:"Compound Interest (10% p.a.)"})]})]})]}),e.jsxs("div",{children:[e.jsx(ue,{htmlFor:"invest-duration",children:"Duration (Months) *"}),e.jsxs(Xt,{value:W.duration,onValueChange:B=>he({...W,duration:B}),children:[e.jsx(Jt,{children:e.jsx(Qt,{})}),e.jsxs(es,{children:[e.jsx(Ie,{value:"3",children:"3 Months"}),e.jsx(Ie,{value:"6",children:"6 Months"}),e.jsx(Ie,{value:"12",children:"12 Months"}),e.jsx(Ie,{value:"24",children:"24 Months"}),e.jsx(Ie,{value:"36",children:"36 Months"})]})]})]}),W.amount&&e.jsxs("div",{className:"p-4 bg-muted rounded-lg",children:[e.jsx("p",{className:"text-sm font-medium mb-1",children:"Expected Return:"}),e.jsxs("p",{className:"text-2xl font-bold text-green-600",children:["KES ",gs(parseFloat(W.amount)||0,W.plan,parseInt(W.duration)).toLocaleString(void 0,{maximumFractionDigits:2})]}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Profit: KES ",(gs(parseFloat(W.amount)||0,W.plan,parseInt(W.duration))-(parseFloat(W.amount)||0)).toLocaleString(void 0,{maximumFractionDigits:2})]})]})]}),e.jsxs(ea,{children:[e.jsx(I,{variant:"outline",onClick:()=>D(!1),children:"Cancel"}),e.jsx(I,{onClick:tt,children:"Start Investment"})]})]})]})]}),e.jsx(Gt,{open:ge,onOpenChange:Z,children:e.jsxs(qt,{children:[e.jsxs(Kt,{children:[e.jsxs(Yt,{className:"flex items-center gap-2",children:[e.jsx(_a,{className:"h-5 w-5 text-primary"}),"Security Verification Required"]}),e.jsx(vs,{children:"Enter your 4-digit security PIN to continue"})]}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{children:[e.jsx(ue,{htmlFor:"security-pin",children:"Security PIN *"}),e.jsx(we,{id:"security-pin",type:"password",placeholder:"Enter 4-digit PIN",maxLength:4,value:ee,onChange:B=>te(B.target.value.replace(/\D/g,"")),className:"text-center text-2xl tracking-widest"})]}),X&&e.jsxs("div",{className:"p-4 bg-muted rounded-lg",children:[e.jsx("p",{className:"text-sm font-medium mb-1",children:"Pending Action:"}),e.jsx("p",{className:"text-lg font-bold capitalize",children:X.action}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Amount: KES ",parseFloat(X.data?.amount||0).toLocaleString()]})]}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:[e.jsx("p",{children:" Your PIN is encrypted and secure"}),e.jsx("p",{children:" Forgot PIN? Contact support"})]})]}),e.jsxs(ea,{children:[e.jsx(I,{variant:"outline",onClick:()=>{Z(!1),te(""),ce(null)},children:"Cancel"}),e.jsxs(I,{onClick:Ta,disabled:ee.length<4,children:[e.jsx(sr,{className:"mr-2 h-4 w-4"}),"Verify & Continue"]})]})]})}),e.jsx(Gt,{open:$s,onOpenChange:ws,children:e.jsxs(qt,{className:"sm:max-w-[600px] max-h-[90vh] overflow-y-auto",children:[e.jsxs(Kt,{children:[e.jsxs(Yt,{className:"flex items-center gap-2",children:[e.jsx(Ya,{className:"h-5 w-5 text-primary"}),"Wallet Settings"]}),e.jsx(vs,{children:"Manage your wallet preferences and security settings"})]}),e.jsxs("div",{className:"space-y-6 py-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-3",children:"Notifications"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(ue,{htmlFor:"tx-notif",children:"Transaction Notifications"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Get notified for all transactions"})]}),e.jsx("input",{type:"checkbox",id:"tx-notif",checked:Me.transactionNotifications,onChange:B=>ht({...Me,transactionNotifications:B.target.checked}),className:"h-4 w-4"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(ue,{htmlFor:"email-notif",children:"Email Notifications"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Receive transaction alerts via email"})]}),e.jsx("input",{type:"checkbox",id:"email-notif",checked:Me.emailNotifications,onChange:B=>ht({...Me,emailNotifications:B.target.checked}),className:"h-4 w-4"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(ue,{htmlFor:"sms-notif",children:"SMS Notifications"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Get SMS alerts for transactions"})]}),e.jsx("input",{type:"checkbox",id:"sms-notif",checked:Me.smsNotifications,onChange:B=>ht({...Me,smsNotifications:B.target.checked}),className:"h-4 w-4"})]})]})]}),e.jsxs("div",{className:"border-t pt-4",children:[e.jsx("h3",{className:"font-semibold mb-3",children:"Security"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(ue,{htmlFor:"2fa",children:"Two-Factor Authentication"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Extra security for your wallet"})]}),e.jsx("input",{type:"checkbox",id:"2fa",checked:Me.twoFactorAuth,onChange:B=>ht({...Me,twoFactorAuth:B.target.checked}),className:"h-4 w-4"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(ue,{htmlFor:"auto-save",children:"Auto-Save Receipts"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Automatically save transaction receipts"})]}),e.jsx("input",{type:"checkbox",id:"auto-save",checked:Me.autoSaveReceipts,onChange:B=>ht({...Me,autoSaveReceipts:B.target.checked}),className:"h-4 w-4"})]})]})]}),e.jsxs("div",{className:"border-t pt-4",children:[e.jsx("h3",{className:"font-semibold mb-3",children:"Preferences"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx(ue,{htmlFor:"currency",children:"Default Currency"}),e.jsxs(Xt,{value:Me.currency,onValueChange:B=>ht({...Me,currency:B}),children:[e.jsx(Jt,{children:e.jsx(Qt,{})}),e.jsxs(es,{children:[e.jsx(Ie,{value:"KES",children:" KES - Kenyan Shilling"}),e.jsx(Ie,{value:"USD",children:" USD - US Dollar"}),e.jsx(Ie,{value:"EUR",children:" EUR - Euro"}),e.jsx(Ie,{value:"GBP",children:" GBP - British Pound"}),e.jsx(Ie,{value:"UGX",children:" UGX - Ugandan Shilling"}),e.jsx(Ie,{value:"TZS",children:" TZS - Tanzanian Shilling"})]})]})]}),e.jsxs("div",{children:[e.jsx(ue,{htmlFor:"language",children:"Language"}),e.jsxs(Xt,{value:Me.language,onValueChange:B=>ht({...Me,language:B}),children:[e.jsx(Jt,{children:e.jsx(Qt,{})}),e.jsxs(es,{children:[e.jsx(Ie,{value:"en",children:"English"}),e.jsx(Ie,{value:"sw",children:"Swahili"}),e.jsx(Ie,{value:"fr",children:"French"})]})]})]}),e.jsxs("div",{children:[e.jsx(ue,{htmlFor:"theme",children:"Theme"}),e.jsxs(Xt,{value:Me.theme,onValueChange:B=>ht({...Me,theme:B}),children:[e.jsx(Jt,{children:e.jsx(Qt,{})}),e.jsxs(es,{children:[e.jsx(Ie,{value:"auto",children:"Auto (System)"}),e.jsx(Ie,{value:"light",children:"Light"}),e.jsx(Ie,{value:"dark",children:"Dark"})]})]})]})]})]}),e.jsxs("div",{className:"border-t pt-4",children:[e.jsx("h3",{className:"font-semibold mb-3",children:"Transaction Limits"}),e.jsxs("div",{className:"p-4 bg-muted rounded-lg space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Daily Limit:"}),e.jsxs("span",{className:"font-medium",children:["KES ",F.daily.toLocaleString()]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Per Transaction:"}),e.jsxs("span",{className:"font-medium",children:["KES ",F.perTransaction.toLocaleString()]})]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:"Contact support to increase limits"})]})]})]}),e.jsxs(ea,{children:[e.jsx(I,{variant:"outline",onClick:()=>ws(!1),children:"Cancel"}),e.jsxs(I,{onClick:Qe,children:[e.jsx(Xi,{className:"mr-2 h-4 w-4"}),"Save Settings"]})]})]})}),e.jsx(Gt,{open:ys,onOpenChange:Es,children:e.jsxs(qt,{className:"sm:max-w-[500px]",children:[e.jsxs(Kt,{children:[e.jsxs(Yt,{className:"flex items-center gap-2",children:[e.jsx(pu,{className:"h-5 w-5 text-primary"}),"Link Payment Account"]}),e.jsx(vs,{children:"Connect your external payment accounts for seamless transfers"})]}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{children:[e.jsx(ue,{htmlFor:"provider",children:"Payment Provider *"}),e.jsxs(Xt,{value:He.provider,onValueChange:B=>Mt({...He,provider:B}),children:[e.jsx(Jt,{children:e.jsx(Qt,{placeholder:"Select provider"})}),e.jsxs(es,{children:[e.jsx(Ie,{value:"mpesa",children:" M-Pesa (Safaricom)"}),e.jsx(Ie,{value:"airtel",children:" Airtel Money"}),e.jsx(Ie,{value:"tkash",children:" T-Kash (Telkom)"}),e.jsx(Ie,{value:"paypal",children:" PayPal"}),e.jsx(Ie,{value:"stripe",children:" Stripe"}),e.jsx(Ie,{value:"flutterwave",children:" Flutterwave"}),e.jsx(Ie,{value:"paystack",children:" Paystack"}),e.jsx(Ie,{value:"pesapal",children:" PesaPal"}),e.jsx(Ie,{value:"bank",children:" Bank Account"}),e.jsx(Ie,{value:"card",children:" Credit/Debit Card"})]})]})]}),He.provider==="mpesa"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx(ue,{htmlFor:"mpesa-phone",children:"M-Pesa Phone Number *"}),e.jsx(we,{id:"mpesa-phone",placeholder:"+254 700 000 000",value:He.phoneNumber,onChange:B=>Mt({...He,phoneNumber:B.target.value})})]}),e.jsxs("div",{children:[e.jsx(ue,{htmlFor:"mpesa-name",children:"Account Name *"}),e.jsx(we,{id:"mpesa-name",placeholder:"Full name as registered",value:He.accountName,onChange:B=>Mt({...He,accountName:B.target.value})})]})]}),He.provider==="paypal"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx(ue,{htmlFor:"paypal-email",children:"PayPal Email *"}),e.jsx(we,{id:"paypal-email",type:"email",placeholder:"your.email@example.com",value:He.email,onChange:B=>Mt({...He,email:B.target.value})})]}),e.jsxs("div",{children:[e.jsx(ue,{htmlFor:"paypal-name",children:"Account Name *"}),e.jsx(we,{id:"paypal-name",placeholder:"Full name",value:He.accountName,onChange:B=>Mt({...He,accountName:B.target.value})})]})]}),He.provider==="airtel"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx(ue,{htmlFor:"airtel-phone",children:"Airtel Money Phone Number *"}),e.jsx(we,{id:"airtel-phone",placeholder:"+254 700 000 000",value:He.phoneNumber,onChange:B=>Mt({...He,phoneNumber:B.target.value})})]}),e.jsxs("div",{children:[e.jsx(ue,{htmlFor:"airtel-name",children:"Account Name *"}),e.jsx(we,{id:"airtel-name",placeholder:"Full name as registered",value:He.accountName,onChange:B=>Mt({...He,accountName:B.target.value})})]})]}),He.provider==="tkash"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx(ue,{htmlFor:"tkash-phone",children:"T-Kash Phone Number *"}),e.jsx(we,{id:"tkash-phone",placeholder:"+254 700 000 000",value:He.phoneNumber,onChange:B=>Mt({...He,phoneNumber:B.target.value})})]}),e.jsxs("div",{children:[e.jsx(ue,{htmlFor:"tkash-name",children:"Account Name *"}),e.jsx(we,{id:"tkash-name",placeholder:"Full name as registered",value:He.accountName,onChange:B=>Mt({...He,accountName:B.target.value})})]})]}),He.provider==="stripe"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx(ue,{htmlFor:"stripe-email",children:"Stripe Email *"}),e.jsx(we,{id:"stripe-email",type:"email",placeholder:"your.email@example.com",value:He.email,onChange:B=>Mt({...He,email:B.target.value})})]}),e.jsxs("div",{children:[e.jsx(ue,{htmlFor:"stripe-account",children:"Stripe Account ID (Optional)"}),e.jsx(we,{id:"stripe-account",placeholder:"acct_xxxxxxxxxxxx",value:He.accountNumber,onChange:B=>Mt({...He,accountNumber:B.target.value})})]}),e.jsxs("div",{children:[e.jsx(ue,{htmlFor:"stripe-name",children:"Account Name *"}),e.jsx(we,{id:"stripe-name",placeholder:"Full name",value:He.accountName,onChange:B=>Mt({...He,accountName:B.target.value})})]})]}),He.provider==="flutterwave"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx(ue,{htmlFor:"flutterwave-email",children:"Flutterwave Email *"}),e.jsx(we,{id:"flutterwave-email",type:"email",placeholder:"your.email@example.com",value:He.email,onChange:B=>Mt({...He,email:B.target.value})})]}),e.jsxs("div",{children:[e.jsx(ue,{htmlFor:"flutterwave-phone",children:"Phone Number *"}),e.jsx(we,{id:"flutterwave-phone",placeholder:"+254 700 000 000",value:He.phoneNumber,onChange:B=>Mt({...He,phoneNumber:B.target.value})})]}),e.jsxs("div",{children:[e.jsx(ue,{htmlFor:"flutterwave-name",children:"Account Name *"}),e.jsx(we,{id:"flutterwave-name",placeholder:"Full name",value:He.accountName,onChange:B=>Mt({...He,accountName:B.target.value})})]})]}),He.provider==="paystack"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx(ue,{htmlFor:"paystack-email",children:"Paystack Email *"}),e.jsx(we,{id:"paystack-email",type:"email",placeholder:"your.email@example.com",value:He.email,onChange:B=>Mt({...He,email:B.target.value})})]}),e.jsxs("div",{children:[e.jsx(ue,{htmlFor:"paystack-name",children:"Account Name *"}),e.jsx(we,{id:"paystack-name",placeholder:"Full name",value:He.accountName,onChange:B=>Mt({...He,accountName:B.target.value})})]})]}),He.provider==="pesapal"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx(ue,{htmlFor:"pesapal-email",children:"PesaPal Email *"}),e.jsx(we,{id:"pesapal-email",type:"email",placeholder:"your.email@example.com",value:He.email,onChange:B=>Mt({...He,email:B.target.value})})]}),e.jsxs("div",{children:[e.jsx(ue,{htmlFor:"pesapal-phone",children:"Phone Number *"}),e.jsx(we,{id:"pesapal-phone",placeholder:"+254 700 000 000",value:He.phoneNumber,onChange:B=>Mt({...He,phoneNumber:B.target.value})})]}),e.jsxs("div",{children:[e.jsx(ue,{htmlFor:"pesapal-name",children:"Account Name *"}),e.jsx(we,{id:"pesapal-name",placeholder:"Full name",value:He.accountName,onChange:B=>Mt({...He,accountName:B.target.value})})]})]}),He.provider==="bank"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx(ue,{htmlFor:"bank-name",children:"Bank Name *"}),e.jsx(we,{id:"bank-name",placeholder:"e.g., Equity Bank",value:He.accountType,onChange:B=>Mt({...He,accountType:B.target.value})})]}),e.jsxs("div",{children:[e.jsx(ue,{htmlFor:"bank-account",children:"Account Number *"}),e.jsx(we,{id:"bank-account",placeholder:"Account number",value:He.accountNumber,onChange:B=>Mt({...He,accountNumber:B.target.value})})]}),e.jsxs("div",{children:[e.jsx(ue,{htmlFor:"bank-account-name",children:"Account Name *"}),e.jsx(we,{id:"bank-account-name",placeholder:"Account holder name",value:He.accountName,onChange:B=>Mt({...He,accountName:B.target.value})})]})]}),He.provider==="card"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx(ue,{htmlFor:"card-number",children:"Card Number *"}),e.jsx(we,{id:"card-number",placeholder:"1234 5678 9012 3456",maxLength:19,value:He.accountNumber,onChange:B=>Mt({...He,accountNumber:B.target.value})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(ue,{htmlFor:"card-expiry",children:"Expiry Date *"}),e.jsx(we,{id:"card-expiry",placeholder:"MM/YY",maxLength:5})]}),e.jsxs("div",{children:[e.jsx(ue,{htmlFor:"card-cvv",children:"CVV *"}),e.jsx(we,{id:"card-cvv",type:"password",placeholder:"123",maxLength:3})]})]}),e.jsxs("div",{children:[e.jsx(ue,{htmlFor:"card-name",children:"Card Holder Name *"}),e.jsx(we,{id:"card-name",placeholder:"Name on card",value:He.accountName,onChange:B=>Mt({...He,accountName:B.target.value})})]})]}),e.jsxs("div",{className:"p-3 bg-blue-50 rounded-lg text-sm text-blue-700",children:[e.jsx("p",{className:"font-medium mb-1",children:" Secure Connection"}),e.jsx("p",{className:"text-xs",children:"Your payment information is encrypted and secure. We never store sensitive data."})]})]}),e.jsxs(ea,{children:[e.jsx(I,{variant:"outline",onClick:()=>Es(!1),children:"Cancel"}),e.jsxs(I,{onClick:jt,children:[e.jsx(pu,{className:"mr-2 h-4 w-4"}),"Link Account"]})]})]})}),e.jsx(Gt,{open:Hs,onOpenChange:bs,children:e.jsxs(qt,{className:"sm:max-w-[500px]",children:[e.jsxs(Kt,{children:[e.jsxs(Yt,{className:"flex items-center gap-2",children:[e.jsx(mn,{className:"h-5 w-5 text-primary"}),"External Transfer"]}),e.jsx(vs,{children:"Transfer funds to your connected payment accounts"})]}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{children:[e.jsx(ue,{htmlFor:"transfer-account",children:"Destination Account *"}),e.jsxs(Xt,{value:Rt.accountId,onValueChange:B=>{const fe=$t.find(je=>je._id===B);xs({...Rt,accountId:B,provider:fe?.provider||""})},children:[e.jsx(Jt,{children:e.jsx(Qt,{placeholder:"Select connected account"})}),e.jsx(es,{children:$t.map(B=>e.jsxs(Ie,{value:B._id,children:[ne(B.provider)," ",B.provider.toUpperCase()," - ",B.accountName||B.phoneNumber||B.email]},B._id))})]})]}),$t.length===0&&e.jsxs("div",{className:"p-4 bg-yellow-50 rounded-lg",children:[e.jsx("p",{className:"text-sm text-yellow-800",children:"No connected accounts found. Please link an account first."}),e.jsx(I,{size:"sm",variant:"outline",className:"mt-2",onClick:()=>{bs(!1),Es(!0)},children:"Link Account"})]}),e.jsxs("div",{children:[e.jsx(ue,{htmlFor:"external-amount",children:"Amount (KES) *"}),e.jsx(we,{id:"external-amount",type:"number",placeholder:"Enter amount",value:Rt.amount,onChange:B=>xs({...Rt,amount:B.target.value})}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Available: KES ",i.availableFunds.toLocaleString()]})]}),e.jsxs("div",{children:[e.jsx(ue,{htmlFor:"external-description",children:"Description (Optional)"}),e.jsx(Gs,{id:"external-description",placeholder:"Add notes about this transfer",value:Rt.description,onChange:B=>xs({...Rt,description:B.target.value})})]}),Rt.provider&&e.jsxs("div",{className:"p-4 bg-muted rounded-lg",children:[e.jsx("p",{className:"text-sm font-medium mb-2",children:"Transfer Summary:"}),e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("p",{children:["Provider: ",Rt.provider.toUpperCase()]}),e.jsxs("p",{children:["Amount: KES ",parseFloat(Rt.amount||0).toLocaleString()]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:"Processing time: 1-24 hours"})]})]})]}),e.jsxs(ea,{children:[e.jsx(I,{variant:"outline",onClick:()=>bs(!1),children:"Cancel"}),e.jsxs(I,{onClick:Ot,disabled:$t.length===0,children:[e.jsx(mn,{className:"mr-2 h-4 w-4"}),"Send Transfer"]})]})]})}),$t.length>0&&e.jsxs(se,{children:[e.jsx(_e,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs(Te,{className:"flex items-center gap-2",children:[e.jsx(pu,{className:"h-5 w-5"}),"Connected Accounts"]}),e.jsx(vt,{children:"Manage your linked payment accounts"})]}),e.jsxs(I,{variant:"outline",size:"sm",onClick:()=>Es(!0),children:[e.jsx(ha,{className:"mr-2 h-4 w-4"}),"Link Account"]})]})}),e.jsx(oe,{children:e.jsx("div",{className:"space-y-3",children:$t.map(B=>e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg hover:bg-muted/50 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"text-3xl",children:ne(B.provider)}),e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium flex items-center gap-2",children:[B.provider.toUpperCase(),B.verified&&e.jsx(Xi,{className:"h-4 w-4 text-green-600"})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:B.accountName||B.phoneNumber||B.email||B.accountNumber}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Linked ",new Date(B.createdAt).toLocaleDateString()]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(I,{size:"sm",variant:"outline",onClick:()=>{xs({...Rt,accountId:B._id,provider:B.provider}),bs(!0)},children:[e.jsx(mn,{className:"h-4 w-4 mr-1"}),"Transfer"]}),e.jsx(I,{size:"sm",variant:"ghost",onClick:()=>ts(B._id),children:e.jsx(V5,{className:"h-4 w-4"})})]})]},B._id))})})]}),$t.length===0&&e.jsx(se,{className:"border-dashed",children:e.jsxs(oe,{className:"p-8 text-center",children:[e.jsx(pu,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),e.jsx("h3",{className:"font-semibold mb-2",children:"Connect Payment Accounts"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Link your M-Pesa, PayPal, or Bank accounts for quick transfers"}),e.jsxs(I,{onClick:()=>Es(!0),children:[e.jsx(ha,{className:"mr-2 h-4 w-4"}),"Link Your First Account"]})]})}),e.jsx(se,{className:"border-l-4 border-l-orange-500",children:e.jsxs(oe,{className:"p-4",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"font-semibold text-sm mb-2 flex items-center gap-2",children:[e.jsx(_a,{className:"h-4 w-4 text-orange-500"}),"Transaction Limits & Security"]}),e.jsxs("div",{className:"space-y-1 text-sm text-muted-foreground",children:[e.jsxs("p",{children:["Daily Limit: KES ",F.daily.toLocaleString()]}),e.jsxs("p",{children:["Per Transaction: KES ",F.perTransaction.toLocaleString()]}),e.jsxs("p",{children:["Today's Spending: KES ",F.todaySpent.toLocaleString()]}),e.jsxs("p",{className:"text-xs text-green-600",children:["Remaining: KES ",(F.daily-F.todaySpent).toLocaleString()]})]})]}),e.jsx(ze,{variant:"outline",className:"bg-green-50 text-green-700 border-green-200",children:n?" Live":" Offline"})]}),e.jsx(dr,{value:F.todaySpent/F.daily*100,className:"mt-3 h-2"})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsxs(se,{className:"relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-gradient-to-br from-primary/20 to-transparent rounded-full -mr-16 -mt-16"}),e.jsx(_e,{className:"pb-2",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(Te,{className:"text-sm font-medium text-muted-foreground",children:"Total Balance"}),e.jsx(I,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:()=>b(!S),children:S?e.jsx(Pa,{className:"h-4 w-4"}):e.jsx(od,{className:"h-4 w-4"})})]})}),e.jsxs(oe,{children:[e.jsx("div",{className:"text-3xl font-bold",children:S?`KES ${i.balance.toLocaleString()}`:""}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-2",children:["Available funds: KES ",i.availableFunds.toLocaleString()]})]})]}),e.jsxs(se,{children:[e.jsx(_e,{className:"pb-2",children:e.jsxs(Te,{className:"text-sm font-medium text-muted-foreground flex items-center gap-2",children:[e.jsx(y1,{className:"h-4 w-4 text-green-600"}),"Total Income"]})}),e.jsxs(oe,{children:[e.jsxs("div",{className:"text-3xl font-bold text-green-600",children:["KES ",i.totalIncome.toLocaleString()]}),e.jsxs("div",{className:"mt-2 flex items-center text-xs text-green-600",children:[e.jsx(aa,{className:"h-3 w-3 mr-1"}),"From sales & payments"]})]})]}),e.jsxs(se,{children:[e.jsx(_e,{className:"pb-2",children:e.jsxs(Te,{className:"text-sm font-medium text-muted-foreground flex items-center gap-2",children:[e.jsx(j1,{className:"h-4 w-4 text-red-600"}),"Total Expenses"]})}),e.jsxs(oe,{children:[e.jsxs("div",{className:"text-3xl font-bold text-red-600",children:["KES ",i.totalExpenses.toLocaleString()]}),e.jsxs("div",{className:"mt-2 flex items-center text-xs text-red-600",children:[e.jsx(No,{className:"h-3 w-3 mr-1"}),"Payments & refunds"]})]})]}),e.jsxs(se,{children:[e.jsx(_e,{className:"pb-2",children:e.jsxs(Te,{className:"text-sm font-medium text-muted-foreground flex items-center gap-2",children:[e.jsx(Gv,{className:"h-4 w-4 text-orange-600"}),"Pending Payments"]})}),e.jsxs(oe,{children:[e.jsxs("div",{className:"text-3xl font-bold text-orange-600",children:["KES ",i.pendingPayments.toLocaleString()]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:"Awaiting payment"})]})]})]}),f.length>0&&e.jsxs(se,{children:[e.jsxs(_e,{children:[e.jsx(Te,{children:"Currency Breakdown"}),e.jsx(vt,{children:"Your balance across different currencies"})]}),e.jsx(oe,{children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:f.map(B=>e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-muted-foreground",children:B.code}),e.jsx(ze,{variant:"outline",children:B.code})]}),e.jsx("div",{className:"text-2xl font-bold mb-1",children:B.balance.toLocaleString()}),e.jsxs("div",{className:"flex items-center justify-between text-xs text-muted-foreground",children:[e.jsxs("span",{className:"text-green-600",children:[" ",B.income.toLocaleString()]}),e.jsxs("span",{className:"text-red-600",children:[" ",B.expenses.toLocaleString()]})]})]},B.code))})})]}),e.jsxs(se,{children:[e.jsx(_e,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(Te,{children:"Transactions"}),e.jsx(vt,{children:"View all your financial activities"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(I,{variant:T==="all"?"default":"outline",size:"sm",onClick:()=>E("all"),children:"All"}),e.jsxs(I,{variant:T==="income"?"default":"outline",size:"sm",onClick:()=>E("income"),children:[e.jsx(ha,{className:"h-3 w-3 mr-1"}),"Income"]}),e.jsxs(I,{variant:T==="expense"?"default":"outline",size:"sm",onClick:()=>E("expense"),children:[e.jsx(Em,{className:"h-3 w-3 mr-1"}),"Expenses"]})]})]})}),e.jsx(oe,{children:e.jsx(xr,{className:"h-[500px]",children:ve.length===0?e.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[e.jsx(Gv,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"No transactions found"})]}):e.jsx("div",{className:"space-y-2",children:ve.map(B=>e.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg border hover:bg-muted/50 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:`p-2 rounded-lg ${B.type==="income"?"bg-green-100":B.type==="expense"?"bg-red-100":"bg-blue-100"}`,children:Nt(B.type,B.category)}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:B.description}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx(ze,{variant:"secondary",className:"text-xs",children:B.category}),e.jsx(ze,{className:`text-xs ${ye(B.status)}`,children:B.status}),e.jsx("span",{className:"text-xs text-muted-foreground",children:B.method})]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:`text-lg font-bold ${B.type==="income"?"text-green-600":B.type==="expense"?"text-red-600":"text-orange-600"}`,children:[B.type==="income"?"+":B.type==="expense"?"-":"",B.currency," ",B.amount.toLocaleString()]}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[B.date.toLocaleDateString()," ",B.date.toLocaleTimeString()]})]})]},B.id))})})})]})]})},K2={Electronics:["Smartphones","Laptops","Tablets","Accessories","Audio","Cameras","Gaming","Wearables","Smart Home"],"Clothing & Fashion":["Men","Women","Kids","Shoes","Accessories","Sportswear","Jewelry","Watches","Bags"],"Home & Garden":["Furniture","Decor","Kitchen","Bedding","Garden","Tools","Lighting","Storage","Bathroom"],"Books & Media":["Fiction","Non-Fiction","Educational","Comics","Magazines","E-books","Audiobooks"],"Sports & Outdoors":["Equipment","Apparel","Outdoor","Fitness","Team Sports","Camping","Cycling","Water Sports"],"Toys & Games":["Action Figures","Educational","Puzzles","Outdoor","Electronic","Board Games","Dolls","Building Sets"],"Beauty & Personal Care":["Skincare","Makeup","Haircare","Fragrances","Tools","Bath & Body","Nail Care","Men Grooming"],"Food & Beverages":["Snacks","Beverages","Bakery","Organic","Frozen","Fresh Produce","Dairy","Meat","Canned Goods"],"Health & Wellness":["Vitamins","Supplements","Personal Care","Medical Supplies","Fitness Equipment","Yoga","Diet"],Automotive:["Parts","Accessories","Maintenance","Electronics","Tires","Oil & Fluids","Tools"],"Baby & Kids":["Diapers","Baby Food","Toys","Clothing","Furniture","Safety","Strollers","Car Seats"],"Pet Supplies":["Pet Food","Toys","Accessories","Health","Grooming","Beds","Leashes","Aquariums"],"Office & Stationery":["Paper","Pens","Notebooks","Furniture","Electronics","Art Supplies","Filing"],"Arts & Crafts":["Painting","Drawing","Sewing","Knitting","Scrapbooking","Jewelry Making","Woodwork"],"Music & Instruments":["Guitars","Keyboards","Drums","Accessories","DJ Equipment","Sheet Music"],"Tools & Hardware":["Hand Tools","Power Tools","Electrical","Plumbing","Safety","Measuring","Fasteners"],"Jewelry & Watches":["Rings","Necklaces","Bracelets","Earrings","Watches","Accessories"],Appliances:["Kitchen","Laundry","Cleaning","Heating","Cooling","Small Appliances"],Furniture:["Living Room","Bedroom","Office","Outdoor","Storage","Kids"],Photography:["Cameras","Lenses","Tripods","Lighting","Bags","Accessories","Drones"],"Party & Events":["Decorations","Supplies","Balloons","Costumes","Tableware"],"Luggage & Travel":["Suitcases","Backpacks","Travel Accessories","Organizers"],"Industrial & Scientific":["Lab Equipment","Safety","Testing","Machinery","Raw Materials"],Other:["Custom Category"]},dU=["piece","kg","g","liter","ml","pack","box","dozen"],uU=["Generic","Samsung","Apple","Sony","Nike","Adidas","HP","Dell","Lenovo","Canon","Nikon","LG","Panasonic","Philips","Xiaomi"],hU=["active","inactive","draft","out-of-stock"],mU=["new","refurbished","used-like-new","used-good","used-acceptable"],Ak=({isOpen:t,onClose:s,onSubmit:a,initialData:n=null,mode:i="add"})=>{const c=()=>({name:"",description:"",price:"",category:"",subcategory:"",brand:"",sku:"",barcode:"",stock:"",minStock:"",unit:"piece",weight:"",dimensions:{length:"",width:"",height:""},condition:"new",status:"active",supplier:"",cost:"",taxRate:"16",featured:!1,freeShipping:!1,allowBackorder:!1,trackInventory:!0,images:[],tags:[],specifications:[],warranty:"",returnPolicy:"30",metaTitle:"",metaDescription:""}),[d,h]=N.useState(n||c()),[f,g]=N.useState(""),[p,v]=N.useState({key:"",value:""}),[y,_]=N.useState([]),[S,b]=N.useState(0),[T,E]=N.useState(0),[A,O]=N.useState(""),[Q,q]=N.useState(!1);N.useEffect(()=>{n&&h({...c(),...n})},[n]),N.useEffect(()=>{d.category&&(d.category==="Other"?(q(!0),_([])):(q(!1),_(K2[d.category]||[])))},[d.category]),N.useEffect(()=>{const W=parseFloat(d.price)||0,he=parseFloat(d.cost)||0,V=parseFloat(d.taxRate)||0;if(W>0&&he>0){const ae=W-he-W*(V/100),ge=(ae/W*100).toFixed(2);b(ae.toFixed(2)),E(ge)}else b(0),E(0)},[d.price,d.cost,d.taxRate]);const U=(W,he)=>{h(V=>({...V,[W]:he}))},D=(W,he,V)=>{h(ae=>({...ae,[W]:{...ae[W],[he]:V}}))},M=()=>{f&&!d.tags.includes(f)&&(h(W=>({...W,tags:[...W.tags,f]})),g(""))},P=W=>{h(he=>({...he,tags:he.tags.filter(V=>V!==W)}))},G=()=>{p.key&&p.value&&(h(W=>({...W,specifications:[...W.specifications,{...p}]})),v({key:"",value:""}))},K=W=>{h(he=>({...he,specifications:he.specifications.filter((V,ae)=>ae!==W)}))},z=()=>{if(!d.name||!d.price||!d.category||!d.supplier){R.error("Please fill in all required fields (Name, Price, Category, Supplier)");return}if(parseFloat(d.price)<=0){R.error("Price must be greater than 0");return}let W=d.sku;if(!W){const V=d.category.substring(0,3).toUpperCase(),ae=Date.now().toString().slice(-6);W=`${V}-${ae}`}const he={name:d.name,description:d.description,price:parseFloat(d.price),category:d.category,subcategory:d.subcategory,brand:d.brand,sku:W,barcode:d.barcode,stockQuantity:d.stock?parseInt(d.stock):0,reorderLevel:d.minStock?parseInt(d.minStock):5,supplierName:d.supplier,status:d.status,unit:d.unit,weight:d.weight,dimensions:d.dimensions,condition:d.condition,cost:d.cost?parseFloat(d.cost):void 0,taxRate:d.taxRate?parseFloat(d.taxRate):16,featured:d.featured,freeShipping:d.freeShipping,allowBackorder:d.allowBackorder,trackInventory:d.trackInventory,image:d.images&&d.images.length>0?d.images[0]:void 0,tags:d.tags,specifications:d.specifications,warranty:d.warranty,returnPolicy:d.returnPolicy,metaTitle:d.metaTitle,metaDescription:d.metaDescription};a(he)},J=()=>{const W=d.category?d.category.substring(0,3).toUpperCase():"PRD",he=Date.now().toString().slice(-6);U("sku",`${W}-${he}`),R.success("SKU generated automatically")};return e.jsx(Gt,{open:t,onOpenChange:s,children:e.jsxs(qt,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(Kt,{children:[e.jsxs(Yt,{className:"flex items-center gap-2",children:[e.jsx(cs,{className:"h-5 w-5"}),i==="add"?"Add New Product":"Edit Product"]}),e.jsx(vs,{children:"Fill in the product details below. Fields marked with * are required."})]}),e.jsxs(Ha,{defaultValue:"basic",className:"w-full",children:[e.jsxs(Xa,{className:"grid w-full grid-cols-4",children:[e.jsx(Tt,{value:"basic",children:"Basic Info"}),e.jsx(Tt,{value:"pricing",children:"Pricing & Stock"}),e.jsx(Tt,{value:"details",children:"Details"}),e.jsx(Tt,{value:"seo",children:"SEO & Meta"})]}),e.jsx(kt,{value:"basic",className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"col-span-2",children:[e.jsx(ue,{htmlFor:"name",children:"Product Name *"}),e.jsx(we,{id:"name",value:d.name,onChange:W=>U("name",W.target.value),placeholder:"Enter product name",className:"font-medium"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx(ue,{htmlFor:"description",children:"Description"}),e.jsx(Gs,{id:"description",value:d.description,onChange:W=>U("description",W.target.value),placeholder:"Detailed product description",rows:4})]}),e.jsxs("div",{children:[e.jsx(ue,{htmlFor:"category",children:"Category *"}),e.jsxs(Xt,{value:d.category,onValueChange:W=>{U("category",W),U("subcategory",""),W!=="Other"&&O("")},children:[e.jsx(Jt,{children:e.jsx(Qt,{placeholder:"Select category"})}),e.jsx(es,{className:"max-h-80",children:Object.keys(K2).map(W=>e.jsx(Ie,{value:W,children:W},W))})]})]}),Q&&e.jsxs("div",{className:"col-span-2",children:[e.jsx(ue,{htmlFor:"customCategory",children:"Custom Category Name *"}),e.jsx(we,{id:"customCategory",value:A,onChange:W=>{O(W.target.value),U("category",W.target.value||"Other")},placeholder:"Enter your custom category name",className:"border-primary/50"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:'Type your own category name (e.g., "Cosmetics", "Agriculture", "Real Estate")'})]}),e.jsxs("div",{children:[e.jsx(ue,{htmlFor:"subcategory",children:"Subcategory"}),e.jsxs(Xt,{value:d.subcategory,onValueChange:W=>U("subcategory",W),disabled:!d.category||Q,children:[e.jsx(Jt,{children:e.jsx(Qt,{placeholder:"Select subcategory"})}),e.jsx(es,{children:y.map(W=>e.jsx(Ie,{value:W,children:W},W))})]})]}),e.jsxs("div",{children:[e.jsx(ue,{htmlFor:"brand",children:"Brand"}),e.jsxs(Xt,{value:d.brand,onValueChange:W=>U("brand",W),children:[e.jsx(Jt,{children:e.jsx(Qt,{placeholder:"Select brand"})}),e.jsx(es,{children:uU.map(W=>e.jsx(Ie,{value:W,children:W},W))})]})]}),e.jsxs("div",{children:[e.jsx(ue,{htmlFor:"condition",children:"Condition"}),e.jsxs(Xt,{value:d.condition,onValueChange:W=>U("condition",W),children:[e.jsx(Jt,{children:e.jsx(Qt,{})}),e.jsx(es,{children:mU.map(W=>e.jsx(Ie,{value:W,children:W.split("-").map(he=>he.charAt(0).toUpperCase()+he.slice(1)).join(" ")},W))})]})]}),e.jsxs("div",{children:[e.jsx(ue,{htmlFor:"status",children:"Status"}),e.jsxs(Xt,{value:d.status,onValueChange:W=>U("status",W),children:[e.jsx(Jt,{children:e.jsx(Qt,{})}),e.jsx(es,{children:hU.map(W=>e.jsx(Ie,{value:W,children:W.charAt(0).toUpperCase()+W.slice(1)},W))})]})]}),e.jsxs("div",{children:[e.jsx(ue,{htmlFor:"supplier",children:"Supplier Name"}),e.jsx(we,{id:"supplier",value:d.supplier,onChange:W=>U("supplier",W.target.value),placeholder:"Supplier or manufacturer"})]})]})}),e.jsx(kt,{value:"pricing",className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(ue,{htmlFor:"price",children:"Selling Price (KES) *"}),e.jsxs("div",{className:"relative",children:[e.jsx(Sa,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),e.jsx(we,{id:"price",type:"number",value:d.price,onChange:W=>U("price",W.target.value),placeholder:"0.00",className:"pl-10"})]})]}),e.jsxs("div",{children:[e.jsx(ue,{htmlFor:"cost",children:"Cost Price (KES)"}),e.jsxs("div",{className:"relative",children:[e.jsx(Sa,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),e.jsx(we,{id:"cost",type:"number",value:d.cost,onChange:W=>U("cost",W.target.value),placeholder:"0.00",className:"pl-10"})]})]}),e.jsxs("div",{children:[e.jsx(ue,{htmlFor:"taxRate",children:"Tax Rate (%)"}),e.jsx(we,{id:"taxRate",type:"number",value:d.taxRate,onChange:W=>U("taxRate",W.target.value),placeholder:"16"})]}),e.jsxs("div",{className:"bg-muted p-4 rounded-lg",children:[e.jsx("p",{className:"text-sm font-medium mb-2",children:"Profit Calculation"}),e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Profit:"}),e.jsxs("span",{className:"font-bold text-green-600",children:["KES ",S]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Margin:"}),e.jsxs("span",{className:"font-bold",children:[T,"%"]})]})]})]}),e.jsxs("div",{children:[e.jsx(ue,{htmlFor:"stock",children:"Stock Quantity *"}),e.jsxs("div",{className:"relative",children:[e.jsx(H5,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),e.jsx(we,{id:"stock",type:"number",value:d.stock,onChange:W=>U("stock",W.target.value),placeholder:"0",className:"pl-10"})]})]}),e.jsxs("div",{children:[e.jsx(ue,{htmlFor:"minStock",children:"Minimum Stock Alert"}),e.jsx(we,{id:"minStock",type:"number",value:d.minStock,onChange:W=>U("minStock",W.target.value),placeholder:"5"})]}),e.jsxs("div",{children:[e.jsx(ue,{htmlFor:"unit",children:"Unit"}),e.jsxs(Xt,{value:d.unit,onValueChange:W=>U("unit",W),children:[e.jsx(Jt,{children:e.jsx(Qt,{})}),e.jsx(es,{children:dU.map(W=>e.jsx(Ie,{value:W,children:W},W))})]})]}),e.jsxs("div",{children:[e.jsx(ue,{htmlFor:"sku",children:"SKU (Stock Keeping Unit)"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(we,{id:"sku",value:d.sku,onChange:W=>U("sku",W.target.value),placeholder:"Auto-generated"}),e.jsx(I,{type:"button",variant:"outline",onClick:J,children:"Generate"})]})]}),e.jsxs("div",{className:"col-span-2 space-y-3 bg-muted p-4 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(ue,{htmlFor:"featured",children:"Featured Product"}),e.jsx(_s,{id:"featured",checked:d.featured,onCheckedChange:W=>U("featured",W)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(ue,{htmlFor:"freeShipping",children:"Free Shipping"}),e.jsx(_s,{id:"freeShipping",checked:d.freeShipping,onCheckedChange:W=>U("freeShipping",W)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(ue,{htmlFor:"allowBackorder",children:"Allow Backorder"}),e.jsx(_s,{id:"allowBackorder",checked:d.allowBackorder,onCheckedChange:W=>U("allowBackorder",W)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(ue,{htmlFor:"trackInventory",children:"Track Inventory"}),e.jsx(_s,{id:"trackInventory",checked:d.trackInventory,onCheckedChange:W=>U("trackInventory",W)})]})]})]})}),e.jsx(kt,{value:"details",className:"space-y-4",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(ue,{htmlFor:"weight",children:"Weight (kg)"}),e.jsx(we,{id:"weight",type:"number",step:"0.01",value:d.weight,onChange:W=>U("weight",W.target.value),placeholder:"0.00"})]}),e.jsxs("div",{children:[e.jsx(ue,{children:"Dimensions (cm)"}),e.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[e.jsx(we,{type:"number",value:d.dimensions.length,onChange:W=>D("dimensions","length",W.target.value),placeholder:"Length"}),e.jsx(we,{type:"number",value:d.dimensions.width,onChange:W=>D("dimensions","width",W.target.value),placeholder:"Width"}),e.jsx(we,{type:"number",value:d.dimensions.height,onChange:W=>D("dimensions","height",W.target.value),placeholder:"Height"})]})]}),e.jsxs("div",{children:[e.jsx(ue,{htmlFor:"barcode",children:"Barcode / EAN"}),e.jsx(we,{id:"barcode",value:d.barcode,onChange:W=>U("barcode",W.target.value),placeholder:"Enter barcode number"})]}),e.jsxs("div",{children:[e.jsx(ue,{children:"Tags"}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsx(we,{value:f,onChange:W=>g(W.target.value),placeholder:"Add a tag",onKeyPress:W=>W.key==="Enter"&&(W.preventDefault(),M())}),e.jsx(I,{type:"button",variant:"outline",onClick:M,children:e.jsx(ha,{className:"h-4 w-4"})})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:d.tags.map((W,he)=>e.jsxs(ze,{variant:"secondary",children:[W,e.jsx(nr,{className:"h-3 w-3 ml-1 cursor-pointer",onClick:()=>P(W)})]},he))})]}),e.jsxs("div",{children:[e.jsx(ue,{children:"Specifications"}),e.jsx("div",{className:"space-y-2 mb-2",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(we,{value:p.key,onChange:W=>v({...p,key:W.target.value}),placeholder:"Key (e.g., Color)"}),e.jsx(we,{value:p.value,onChange:W=>v({...p,value:W.target.value}),placeholder:"Value (e.g., Blue)"}),e.jsx(I,{type:"button",variant:"outline",onClick:G,children:e.jsx(ha,{className:"h-4 w-4"})})]})}),e.jsx("div",{className:"space-y-2",children:d.specifications.map((W,he)=>e.jsxs("div",{className:"flex items-center justify-between p-2 bg-muted rounded",children:[e.jsxs("span",{className:"text-sm",children:[e.jsxs("strong",{children:[W.key,":"]})," ",W.value]}),e.jsx(nr,{className:"h-4 w-4 cursor-pointer text-destructive",onClick:()=>K(he)})]},he))})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(ue,{htmlFor:"warranty",children:"Warranty (months)"}),e.jsx(we,{id:"warranty",type:"number",value:d.warranty,onChange:W=>U("warranty",W.target.value),placeholder:"12"})]}),e.jsxs("div",{children:[e.jsx(ue,{htmlFor:"returnPolicy",children:"Return Policy (days)"}),e.jsx(we,{id:"returnPolicy",type:"number",value:d.returnPolicy,onChange:W=>U("returnPolicy",W.target.value),placeholder:"30"})]})]})]})}),e.jsx(kt,{value:"seo",className:"space-y-4",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(ue,{htmlFor:"metaTitle",children:"Meta Title"}),e.jsx(we,{id:"metaTitle",value:d.metaTitle,onChange:W=>U("metaTitle",W.target.value),placeholder:"SEO optimized title",maxLength:60}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[d.metaTitle.length,"/60 characters"]})]}),e.jsxs("div",{children:[e.jsx(ue,{htmlFor:"metaDescription",children:"Meta Description"}),e.jsx(Gs,{id:"metaDescription",value:d.metaDescription,onChange:W=>U("metaDescription",W.target.value),placeholder:"SEO optimized description",maxLength:160,rows:3}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[d.metaDescription.length,"/160 characters"]})]}),e.jsxs("div",{children:[e.jsx(ue,{htmlFor:"image",children:"Product Image URL"}),e.jsx(we,{id:"image",value:d.image,onChange:W=>U("image",W.target.value),placeholder:"https://example.com/image.jpg"})]}),e.jsx("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-200",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(Ws,{className:"h-5 w-5 text-blue-600 mt-0.5"}),e.jsxs("div",{className:"text-sm",children:[e.jsx("p",{className:"font-medium text-blue-900",children:"SEO Tips"}),e.jsxs("ul",{className:"list-disc list-inside text-blue-700 mt-2 space-y-1",children:[e.jsx("li",{children:"Use descriptive, keyword-rich titles"}),e.jsx("li",{children:"Include product benefits in description"}),e.jsx("li",{children:"Add relevant tags for better searchability"}),e.jsx("li",{children:"Use high-quality product images"})]})]})]})})]})})]}),e.jsxs("div",{className:"flex justify-between items-center pt-4 border-t",children:[e.jsx(I,{variant:"outline",onClick:s,children:"Cancel"}),e.jsxs(I,{onClick:z,className:"px-8",children:[e.jsx(ks,{className:"mr-2 h-4 w-4"}),i==="add"?"Add Product":"Update Product"]})]})]})})},fU=()=>{const t=_n(),[s,a]=N.useState([]),[n,i]=N.useState([]),[c,d]=N.useState(""),[h,f]=N.useState("all"),[g,p]=N.useState("name"),[v,y]=N.useState("grid"),[_,S]=N.useState(!1),[b,T]=N.useState(!1),[E,A]=N.useState(!1),[O,Q]=N.useState("add"),[q,U]=N.useState(null),[D,M]=N.useState([]),[P,G]=N.useState(null),[K,z]=N.useState(!1),[J,W]=N.useState(!1),[he,V]=N.useState({name:"",description:"",price:"",category:"",stock:"",image:"",featured:!1,supplierName:""}),[ae,ge]=N.useState({id:"",name:"",description:"",price:"",category:"",stock:"",image:"",featured:!1,supplierName:""}),Z=async()=>{try{const Le=(await ke.get("/products")).data;if(Le.length===0)R.info("No products found in the database."),a([]),i([]);else{const ot=Le.map(Pt=>({id:Pt._id,name:Pt.name,description:Pt.description||"",price:Pt.price,category:Pt.category,stock:Pt.stockQuantity||0,image:Pt.image||"https://images.unsplash.com/photo-1560472354-b33ff0c44a43?w=400&h=300&fit=crop",featured:Pt.featured||!1,rating:Pt.rating||4.5,reviews:Pt.reviews||Math.floor(Math.random()*100),sku:Pt.sku,supplierName:Pt.supplierName,status:Pt.status}));a(ot),i(ot)}}catch(pe){console.error("Error fetching products:",pe),R.error("Failed to load products. Please try again."),a([]),i([])}},ee=async()=>{W(!0),await Z(),W(!1),R.success("Products refreshed!")};N.useEffect(()=>{Z()},[]),N.useEffect(()=>{let pe=s.filter(Le=>{const ot=Le.name.toLowerCase().includes(c.toLowerCase())||Le.description.toLowerCase().includes(c.toLowerCase()),Pt=h==="all"||Le.category===h;return ot&&Pt});pe.sort((Le,ot)=>{switch(g){case"price-low":return Le.price-ot.price;case"price-high":return ot.price-Le.price;case"rating":return(ot.rating||0)-(Le.rating||0);case"name":default:return Le.name.localeCompare(ot.name)}}),i(pe)},[s,c,h,g]);const te=["all",...new Set(s.map(pe=>pe.category))],X=async pe=>{try{D.find(ot=>ot.id===pe.id)?(M(D.filter(ot=>ot.id!==pe.id)),R.success(`${pe.name} removed from wishlist`),await ke.delete(`/wishlist/${pe.id}`)):(M([...D,pe]),R.success(`${pe.name} added to wishlist!`),await ke.post("/wishlist",{productId:pe.id}))}catch(Le){console.error("Error updating wishlist:",Le),R.error("Failed to update wishlist. Please try again.")}},ce=pe=>D.some(Le=>Le.id===pe),F=async pe=>{try{const Le={name:pe.name,description:pe.description,price:parseFloat(pe.price),category:pe.category,subcategory:pe.subcategory,brand:pe.brand,stockQuantity:parseInt(pe.stock)||0,sku:pe.sku,barcode:pe.barcode,unit:pe.unit,weight:parseFloat(pe.weight)||0,dimensions:pe.dimensions,condition:pe.condition,status:pe.status,supplierName:pe.supplier||"Default Supplier",cost:parseFloat(pe.cost)||0,taxRate:parseFloat(pe.taxRate)||16,featured:pe.featured,freeShipping:pe.freeShipping,allowBackorder:pe.allowBackorder,trackInventory:pe.trackInventory,image:pe.image||"https://images.unsplash.com/photo-1560472354-b33ff0c44a43?w=400&h=300&fit=crop",tags:pe.tags,specifications:pe.specifications,warranty:pe.warranty,returnPolicy:pe.returnPolicy,minStock:parseInt(pe.minStock)||0,metaTitle:pe.metaTitle,metaDescription:pe.metaDescription};O==="edit"&&q?.id?(await ke.put(`/products/${q.id}`,Le),R.success("Product updated successfully!")):(await ke.post("/products",Le),R.success("Product added successfully!")),await Z(),A(!1),U(null)}catch(Le){console.error("Error saving product:",Le),R.error("Failed to save product. Please try again.")}},re=async()=>{if(!he.name||!he.price||!he.category){R.error("Please fill in all required fields");return}try{const pe={name:he.name,description:he.description,price:parseFloat(he.price),category:he.category,stockQuantity:parseInt(he.stock)||0,sku:`SKU-${Date.now()}`,supplierName:he.supplierName||"Default Supplier",image:he.image||"https://images.unsplash.com/photo-1560472354-b33ff0c44a43?w=400&h=300&fit=crop",featured:he.featured};await ke.post("/products",pe),await Z(),V({name:"",description:"",price:"",category:"",stock:"",image:"",featured:!1,supplierName:""}),S(!1),R.success("Product added successfully!")}catch(pe){console.error("Error adding product:",pe),R.error("Failed to add product. Please try again.")}},de=async()=>{if(!ae.name||!ae.price||!ae.category){R.error("Please fill in all required fields");return}try{const pe={name:ae.name,description:ae.description,price:parseFloat(ae.price),category:ae.category,stockQuantity:parseInt(ae.stock)||0,supplierName:ae.supplierName||"Default Supplier",image:ae.image||"https://images.unsplash.com/photo-1560472354-b33ff0c44a43?w=400&h=300&fit=crop",featured:ae.featured};await ke.put(`/products/${ae.id}`,pe),await Z(),ge({id:"",name:"",description:"",price:"",category:"",stock:"",image:"",featured:!1,supplierName:""}),T(!1),R.success("Product updated successfully!")}catch(pe){console.error("Error updating product:",pe),R.error("Failed to update product. Please try again.")}},me=async pe=>{try{await ke.delete(`/products/${pe}`),await Z(),R.success("Product deleted successfully!")}catch(Le){console.error("Error deleting product:",Le),R.error("Failed to delete product. Please try again.")}},De=pe=>{ge({id:pe.id,name:pe.name,description:pe.description,price:pe.price.toString(),category:pe.category,stock:pe.stock.toString(),image:pe.image,featured:pe.featured,supplierName:pe.supplierName}),T(!0)},Ne=({product:pe})=>{const Le=ce(pe.id),ot=Math.floor(pe.rating||0);return e.jsxs(se,{className:"group bg-white/30 backdrop-blur-md border border-green-200 rounded-xl shadow-md hover:shadow-lg transition-all duration-300",children:[e.jsxs("div",{className:"relative overflow-hidden rounded-t-xl",children:[e.jsx("img",{src:pe.image||"/placeholder.jpg",alt:pe.name||"Product image",className:"w-full h-48 object-cover transition-transform duration-300 group-hover:scale-105"}),pe.featured&&e.jsx(ze,{className:"absolute top-2 left-2 bg-green-600 text-white text-xs font-medium",children:"Featured"}),e.jsxs("div",{className:"absolute top-2 right-2 flex gap-1",children:[e.jsx(I,{size:"sm",variant:"ghost",className:`h-8 w-8 p-0 opacity-0 group-hover:opacity-100 transition-opacity ${Le?"bg-green-100 text-green-600":""}`,onClick:()=>X(pe),"aria-label":"Toggle wishlist",children:e.jsx(Zo,{className:`h-4 w-4 ${Le?"fill-current":""}`})}),e.jsx(I,{size:"sm",variant:"ghost",className:"h-8 w-8 p-0 opacity-0 group-hover:opacity-100 transition-opacity",onClick:()=>{G(pe),z(!0)},"aria-label":"View details",children:e.jsx(Pa,{className:"h-4 w-4"})})]})]}),e.jsxs(oe,{className:"p-4 space-y-3",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsx("h3",{className:"font-semibold text-lg line-clamp-1",children:pe.name}),e.jsx(ze,{variant:"outline",className:"text-xs border-green-300 text-green-600",children:pe.category})]}),e.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2",children:pe.description}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"flex items-center",children:[...Array(5)].map((Pt,Dt)=>e.jsx(Dn,{className:`h-4 w-4 ${Dt<ot?"fill-yellow-400 text-yellow-400":"text-gray-300"}`},Dt))}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:["(",pe.reviews||0,")"]})]}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-2xl font-bold text-green-600",children:["KES ",pe.price.toLocaleString()]}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Stock: ",pe.stock]})]}),e.jsxs("div",{className:"flex gap-2 pt-2",children:[e.jsxs(I,{size:"sm",variant:"outline",onClick:()=>De(pe),className:"text-green-600 hover:text-green-700 hover:bg-green-50",children:[e.jsx(sl,{className:"h-4 w-4 mr-1"}),"Edit"]}),e.jsxs(I,{size:"sm",variant:"outline",onClick:()=>me(pe.id),className:"text-red-600 hover:text-red-700 hover:bg-red-50",children:[e.jsx(Ua,{className:"h-4 w-4 mr-1"}),"Delete"]})]})]})]})};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Products"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage your product catalog and inventory"})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsxs(I,{variant:"outline",size:"sm",onClick:()=>t("/dashboard/inventory"),className:"gap-2",children:[e.jsx(z_,{className:"h-4 w-4"}),"Inventory"]}),e.jsxs(I,{variant:"outline",size:"sm",onClick:()=>t("/store"),className:"gap-2",children:[e.jsx($5,{className:"h-4 w-4"}),"Store"]}),e.jsxs(I,{variant:"outline",size:"sm",onClick:()=>t("/dashboard/ecommerce"),className:"gap-2",children:[e.jsx(Bs,{className:"h-4 w-4"}),"Orders"]}),e.jsxs(I,{variant:"outline",size:"sm",onClick:ee,disabled:J,className:"gap-2",children:[e.jsx(Cs,{className:`h-4 w-4 ${J?"animate-spin":""}`}),J?"Refreshing...":"Refresh"]}),e.jsxs(I,{size:"sm",onClick:()=>{Q("add"),U(null),A(!0)},className:"gap-2 bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700",children:[e.jsx(ha,{className:"h-4 w-4"}),"Add Product (Enhanced)"]}),e.jsxs(Gt,{open:_,onOpenChange:S,children:[e.jsx(Za,{asChild:!0,children:e.jsxs(I,{variant:"outline",size:"sm",children:[e.jsx(ha,{className:"mr-2 h-4 w-4"}),"Quick Add"]})}),e.jsxs(qt,{className:"sm:max-w-md",children:[e.jsxs(Kt,{children:[e.jsx(Yt,{children:"Add New Product"}),e.jsx(vs,{children:"Create a new product for your catalog"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(ue,{htmlFor:"name",children:"Product Name *"}),e.jsx(we,{id:"name",value:he.name,onChange:pe=>V({...he,name:pe.target.value}),placeholder:"Enter product name"})]}),e.jsxs("div",{children:[e.jsx(ue,{htmlFor:"description",children:"Description"}),e.jsx(Gs,{id:"description",value:he.description,onChange:pe=>V({...he,description:pe.target.value}),placeholder:"Product description"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(ue,{htmlFor:"price",children:"Price (KES) *"}),e.jsx(we,{id:"price",type:"number",value:he.price,onChange:pe=>V({...he,price:pe.target.value}),placeholder:"0"})]}),e.jsxs("div",{children:[e.jsx(ue,{htmlFor:"stock",children:"Stock"}),e.jsx(we,{id:"stock",type:"number",value:he.stock,onChange:pe=>V({...he,stock:pe.target.value}),placeholder:"0"})]})]}),e.jsxs("div",{children:[e.jsx(ue,{htmlFor:"category",children:"Category *"}),e.jsxs(Xt,{value:he.category,onValueChange:pe=>V({...he,category:pe}),children:[e.jsx(Jt,{children:e.jsx(Qt,{placeholder:"Select category"})}),e.jsxs(es,{children:[e.jsx(Ie,{value:"Beverages",children:"Beverages"}),e.jsx(Ie,{value:"Snacks",children:"Snacks"}),e.jsx(Ie,{value:"Bakery",children:"Bakery"}),e.jsx(Ie,{value:"Electronics",children:"Electronics"}),e.jsx(Ie,{value:"Clothing",children:"Clothing"}),e.jsx(Ie,{value:"Books",children:"Books"})]})]})]}),e.jsxs("div",{children:[e.jsx(ue,{htmlFor:"image",children:"Image URL"}),e.jsx(we,{id:"image",value:he.image,onChange:pe=>V({...he,image:pe.target.value}),placeholder:"https://example.com/image.jpg"})]}),e.jsxs("div",{children:[e.jsx(ue,{htmlFor:"supplierName",children:"Supplier Name"}),e.jsx(we,{id:"supplierName",value:he.supplierName,onChange:pe=>V({...he,supplierName:pe.target.value}),placeholder:"Enter supplier name"})]}),e.jsx(I,{onClick:re,className:"w-full",children:"Add Product"})]})]})]})]})]}),e.jsx(se,{className:"bg-card border-border",children:e.jsx(oe,{className:"p-4",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(Da,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),e.jsx(we,{placeholder:"Search products...",value:c,onChange:pe=>d(pe.target.value),className:"pl-10"})]})}),e.jsxs(Xt,{value:h,onValueChange:f,children:[e.jsx(Jt,{className:"w-full sm:w-48",children:e.jsx(Qt,{placeholder:"Category"})}),e.jsx(es,{children:te.map(pe=>e.jsx(Ie,{value:pe,children:pe==="all"?"All Categories":pe},pe))})]}),e.jsxs(Xt,{value:g,onValueChange:p,children:[e.jsx(Jt,{className:"w-full sm:w-48",children:e.jsx(Qt,{placeholder:"Sort by"})}),e.jsxs(es,{children:[e.jsx(Ie,{value:"name",children:"Name"}),e.jsx(Ie,{value:"price-low",children:"Price: Low to High"}),e.jsx(Ie,{value:"price-high",children:"Price: High to Low"}),e.jsx(Ie,{value:"rating",children:"Rating"})]})]})]})})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:n.map(pe=>e.jsx(Ne,{product:pe},pe.id))}),n.length===0&&e.jsx(se,{className:"bg-card border-border",children:e.jsxs(oe,{className:"p-8 text-center",children:[e.jsx(cs,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No products found"}),e.jsx("p",{className:"text-muted-foreground",children:"Try adjusting your search or filter criteria"})]})}),P&&e.jsx(Gt,{open:K,onOpenChange:z,children:e.jsxs(qt,{className:"sm:max-w-2xl",children:[e.jsxs(Kt,{children:[e.jsx(Yt,{children:P.name}),e.jsx(vs,{children:"Product details and specifications"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx("div",{children:e.jsx("img",{src:P.image,alt:P.name,className:"w-full h-64 object-cover rounded-lg"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(ze,{variant:"outline",children:P.category}),P.featured&&e.jsx(ze,{className:"ml-2",children:"Featured"})]}),e.jsx("p",{className:"text-muted-foreground",children:P.description}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"flex items-center",children:[...Array(5)].map((pe,Le)=>e.jsx(Dn,{className:`h-4 w-4 ${Le<Math.floor(P.rating||0)?"fill-yellow-400 text-yellow-400":"text-gray-300"}`},Le))}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[P.rating," (",P.reviews," reviews)"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("p",{className:"text-3xl font-bold text-primary",children:["KES ",P.price.toLocaleString()]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Stock: ",P.stock," available"]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(I,{onClick:()=>De(P),className:"flex-1",children:[e.jsx(sl,{className:"w-4 h-4 mr-2"}),"Edit Product"]}),e.jsx(I,{variant:"outline",onClick:()=>X(P),className:ce(P.id)?"bg-red-50 text-red-600":"",children:e.jsx(Zo,{className:`w-4 h-4 ${ce(P.id)?"fill-current":""}`})})]})]})]})]})}),e.jsx(Gt,{open:b,onOpenChange:T,children:e.jsxs(qt,{className:"sm:max-w-md",children:[e.jsxs(Kt,{children:[e.jsx(Yt,{children:"Edit Product"}),e.jsx(vs,{children:"Update product details"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(ue,{htmlFor:"edit-name",children:"Product Name *"}),e.jsx(we,{id:"edit-name",value:ae.name,onChange:pe=>ge({...ae,name:pe.target.value}),placeholder:"Enter product name"})]}),e.jsxs("div",{children:[e.jsx(ue,{htmlFor:"edit-description",children:"Description"}),e.jsx(Gs,{id:"edit-description",value:ae.description,onChange:pe=>ge({...ae,description:pe.target.value}),placeholder:"Product description"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(ue,{htmlFor:"edit-price",children:"Price (KES) *"}),e.jsx(we,{id:"edit-price",type:"number",value:ae.price,onChange:pe=>ge({...ae,price:pe.target.value}),placeholder:"0"})]}),e.jsxs("div",{children:[e.jsx(ue,{htmlFor:"edit-stock",children:"Stock"}),e.jsx(we,{id:"edit-stock",type:"number",value:ae.stock,onChange:pe=>ge({...ae,stock:pe.target.value}),placeholder:"0"})]})]}),e.jsxs("div",{children:[e.jsx(ue,{htmlFor:"edit-category",children:"Category *"}),e.jsxs(Xt,{value:ae.category,onValueChange:pe=>ge({...ae,category:pe}),children:[e.jsx(Jt,{children:e.jsx(Qt,{placeholder:"Select category"})}),e.jsxs(es,{children:[e.jsx(Ie,{value:"Beverages",children:"Beverages"}),e.jsx(Ie,{value:"Snacks",children:"Snacks"}),e.jsx(Ie,{value:"Bakery",children:"Bakery"}),e.jsx(Ie,{value:"Electronics",children:"Electronics"}),e.jsx(Ie,{value:"Clothing",children:"Clothing"}),e.jsx(Ie,{value:"Books",children:"Books"})]})]})]}),e.jsxs("div",{children:[e.jsx(ue,{htmlFor:"edit-image",children:"Image URL"}),e.jsx(we,{id:"edit-image",value:ae.image,onChange:pe=>ge({...ae,image:pe.target.value}),placeholder:"https://example.com/image.jpg"})]}),e.jsxs("div",{children:[e.jsx(ue,{htmlFor:"edit-supplierName",children:"Supplier Name"}),e.jsx(we,{id:"edit-supplierName",value:ae.supplierName,onChange:pe=>ge({...ae,supplierName:pe.target.value}),placeholder:"Enter supplier name"})]}),e.jsx(I,{onClick:de,className:"w-full",children:"Update Product"})]})]})}),e.jsx(Ak,{isOpen:E,onClose:()=>{A(!1),U(null)},onSubmit:F,initialData:q,mode:O})]})},Dk=N.createContext(),zj=()=>{const t=N.useContext(Dk);if(!t)throw new Error("useCart must be used within CartProvider");return t},xU=({children:t})=>{const s=()=>{const v=localStorage.getItem("customerToken");if(v)try{const y=JSON.parse(atob(v.split(".")[1]));return`cart_items_${y.id||y.email||"guest"}`}catch{return"cart_items_guest"}return"cart_items_guest"},[a,n]=N.useState(()=>{try{const v=s(),y=localStorage.getItem(v);return y?JSON.parse(y):[]}catch{return[]}});N.useEffect(()=>{const v=s();localStorage.setItem(v,JSON.stringify(a))},[a]),N.useEffect(()=>{const v=s();try{const y=localStorage.getItem(v);n(y?JSON.parse(y):[])}catch{n([])}},[localStorage.getItem("customerToken")]);const i=(v,y=1)=>{const _=v._id||v.id;n(S=>S.find(T=>(T._id||T.id)===_)?S.map(T=>(T._id||T.id)===_?{...T,quantity:T.quantity+y}:T):[...S,{...v,_id:_,id:_,quantity:y}])},c=(v,y)=>{n(_=>_.map(S=>(S._id||S.id)===v?{...S,quantity:Math.max(0,y)}:S).filter(S=>S.quantity>0))},d=v=>n(y=>y.filter(_=>(_._id||_.id)!==v)),h=()=>n([]),f=N.useMemo(()=>a.reduce((v,y)=>v+(y.price||0)*(y.quantity||0),0),[a]),g=N.useMemo(()=>a.reduce((v,y)=>v+(y.quantity||0),0),[a]),p={items:a,add:i,update:c,remove:d,clear:h,total:f,count:g};return e.jsx(Dk.Provider,{value:p,children:t})},pU=()=>{const t=_n(),{items:s,update:a,remove:n,clear:i,total:c,count:d}=zj(),{socket:h,connected:f}=Ra(),{user:g,isAuthenticated:p}=qs(),[v,y]=N.useState(1),[_,S]=N.useState(!1),[b,T]=N.useState(""),[E,A]=N.useState(!1),[O,Q]=N.useState({firstName:"",lastName:"",email:"",phone:"",company:""}),[q,U]=N.useState({address:"",city:"",state:"",zipCode:"",country:"Kenya",deliveryMethod:"standard",specialInstructions:""});N.useEffect(()=>{p&&g&&Q({firstName:g.firstName||g.name?.split(" ")[0]||"",lastName:g.lastName||g.name?.split(" ")[1]||"",email:g.email||"",phone:g.phone||"",company:g.company||""})},[p,g]),N.useEffect(()=>{if(h&&f&&b)return h.on("order_status_updated",te=>{te.orderNumber===b&&R.info(`Order ${b}: ${te.status}`)}),()=>{h.off("order_status_updated")}},[h,f,b]);const D=(te,X)=>{if(X<=0){n(te),R.success("Item removed from cart");return}a(te,X)},M=te=>{n(te),R.success("Item removed from cart")},P=()=>s.reduce((te,X)=>te+X.price*X.quantity,0),G=()=>P()>=1e4?0:q.deliveryMethod==="express"?800:400,K=()=>Math.round(P()*.16),z=()=>P()+G()+K(),J=(te,X)=>{Q(ce=>({...ce,[te]:X}))},W=(te,X)=>{U(ce=>({...ce,[te]:X}))},he=te=>{switch(te){case 1:return s.length>0;case 2:return O.firstName&&O.lastName&&O.email&&O.phone;case 3:return q.address&&q.city&&q.state&&q.zipCode;default:return!0}},V=()=>{he(v)?y(te=>Math.min(te+1,4)):R.error("Please fill in all required fields")},ae=()=>{y(te=>Math.max(te-1,1))},ge=async te=>{A(!0);try{const X=localStorage.getItem("token"),ce={customer:O,shippingAddress:q,items:s.map(de=>({product:de._id||de.id,name:de.name,quantity:de.quantity,price:de.price})),payment:te,subtotal:P(),shippingCost:G(),tax:K(),total:z(),status:"pending"},re=(await ke.post("/orders",ce,{headers:{Authorization:`Bearer ${X}`}})).data.orderNumber||`ORD-${Date.now()}`;T(re),S(!0),y(5),h&&f&&h.emit("order_created",{orderNumber:re,userId:g?._id,total:z()}),i(),R.success("Order placed successfully!")}catch(X){console.error("Order creation error:",X),R.error("Failed to create order. Please try again.")}finally{A(!1)}},Z=te=>{R.error("Payment failed. Please try again.")};if(_)return e.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center p-4",children:e.jsx(se,{className:"w-full max-w-md text-center bg-card border-border",children:e.jsx(oe,{className:"pt-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"mx-auto w-16 h-16 bg-green-100 rounded-full flex items-center justify-center",children:e.jsx(ks,{className:"w-8 h-8 text-green-600"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-foreground",children:"Order Confirmed!"}),e.jsx("p",{className:"text-muted-foreground mt-2",children:"Thank you for your purchase. Your order has been successfully placed."})]}),e.jsxs("div",{className:"bg-muted p-4 rounded-lg",children:[e.jsx("p",{className:"text-sm font-medium",children:"Order Number"}),e.jsx("p",{className:"text-lg font-bold text-primary",children:b})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(I,{onClick:()=>t("/dashboard/products"),className:"w-full",children:"Continue Shopping"}),e.jsx(I,{variant:"outline",onClick:()=>t("/dashboard/ecommerce"),className:"w-full",children:"View Order History"})]})]})})})});const ee=[{number:1,title:"Cart Review",icon:Bs},{number:2,title:"Customer Info",icon:Aa},{number:3,title:"Shipping",icon:Mu},{number:4,title:"Payment",icon:Ba}];return e.jsx("div",{className:"min-h-screen bg-background",children:e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[e.jsxs(I,{variant:"outline",size:"sm",onClick:()=>t("/dashboard/products"),children:[e.jsx(U_,{className:"w-4 h-4 mr-2"}),"Back to Products"]}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Checkout"}),e.jsx("p",{className:"text-muted-foreground",children:"Complete your purchase"})]})]}),e.jsx("div",{className:"mb-8",children:e.jsx("div",{className:"flex items-center justify-between",children:ee.map((te,X)=>e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`flex items-center justify-center w-10 h-10 rounded-full border-2 ${v>=te.number?"bg-primary border-primary text-primary-foreground":"border-muted-foreground text-muted-foreground"}`,children:e.jsx(te.icon,{className:"w-5 h-5"})}),e.jsx("div",{className:"ml-3 hidden sm:block",children:e.jsx("p",{className:`text-sm font-medium ${v>=te.number?"text-foreground":"text-muted-foreground"}`,children:te.title})}),X<ee.length-1&&e.jsx("div",{className:`w-12 h-0.5 mx-4 ${v>te.number?"bg-primary":"bg-muted"}`})]},te.number))})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-2",children:[v===1&&e.jsxs(se,{className:"bg-card border-border",children:[e.jsxs(_e,{children:[e.jsxs(Te,{className:"flex items-center gap-2",children:[e.jsx(Bs,{className:"w-5 h-5"}),"Review Your Cart"]}),e.jsx(vt,{children:"Review your items before proceeding to checkout"})]}),e.jsxs(oe,{className:"space-y-4",children:[s.map(te=>e.jsxs("div",{className:"flex items-center gap-4 p-4 border rounded-lg",children:[e.jsx("img",{src:te.image,alt:te.name,className:"w-16 h-16 object-cover rounded-md"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold",children:te.name}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["KES ",te.price.toLocaleString()," each"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(I,{size:"sm",variant:"outline",onClick:()=>D(te.id,te.quantity-1),children:e.jsx(Em,{className:"w-4 h-4"})}),e.jsx("span",{className:"w-8 text-center",children:te.quantity}),e.jsx(I,{size:"sm",variant:"outline",onClick:()=>D(te.id,te.quantity+1),children:e.jsx(ha,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"font-semibold",children:["KES ",(te.price*te.quantity).toLocaleString()]}),e.jsx(I,{size:"sm",variant:"ghost",onClick:()=>M(te.id),className:"text-red-600 hover:text-red-700",children:e.jsx(Ua,{className:"w-4 h-4"})})]})]},te.id)),s.length===0&&e.jsxs("div",{className:"text-center py-8",children:[e.jsx(cs,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"Your cart is empty"}),e.jsx(I,{onClick:()=>t("/dashboard/products"),className:"mt-4",children:"Continue Shopping"})]})]})]}),v===2&&e.jsxs(se,{className:"bg-card border-border",children:[e.jsxs(_e,{children:[e.jsxs(Te,{className:"flex items-center gap-2",children:[e.jsx(Aa,{className:"w-5 h-5"}),"Customer Information"]}),e.jsx(vt,{children:"Please provide your contact information"})]}),e.jsxs(oe,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(ue,{htmlFor:"firstName",children:"First Name *"}),e.jsx(we,{id:"firstName",value:O.firstName,onChange:te=>J("firstName",te.target.value),placeholder:"John"})]}),e.jsxs("div",{children:[e.jsx(ue,{htmlFor:"lastName",children:"Last Name *"}),e.jsx(we,{id:"lastName",value:O.lastName,onChange:te=>J("lastName",te.target.value),placeholder:"Doe"})]})]}),e.jsxs("div",{children:[e.jsx(ue,{htmlFor:"email",children:"Email Address *"}),e.jsx(we,{id:"email",type:"email",value:O.email,onChange:te=>J("email",te.target.value),placeholder:"john@example.com"})]}),e.jsxs("div",{children:[e.jsx(ue,{htmlFor:"phone",children:"Phone Number *"}),e.jsx(we,{id:"phone",value:O.phone,onChange:te=>J("phone",te.target.value),placeholder:"+254 700 000 000"})]}),e.jsxs("div",{children:[e.jsx(ue,{htmlFor:"company",children:"Company (Optional)"}),e.jsx(we,{id:"company",value:O.company,onChange:te=>J("company",te.target.value),placeholder:"Your Company"})]})]})]}),v===3&&e.jsxs(se,{className:"bg-card border-border",children:[e.jsxs(_e,{children:[e.jsxs(Te,{className:"flex items-center gap-2",children:[e.jsx(Mu,{className:"w-5 h-5"}),"Shipping Information"]}),e.jsx(vt,{children:"Where should we deliver your order?"})]}),e.jsxs(oe,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(ue,{htmlFor:"address",children:"Street Address *"}),e.jsx(we,{id:"address",value:q.address,onChange:te=>W("address",te.target.value),placeholder:"123 Main Street"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(ue,{htmlFor:"city",children:"City *"}),e.jsx(we,{id:"city",value:q.city,onChange:te=>W("city",te.target.value),placeholder:"Nairobi"})]}),e.jsxs("div",{children:[e.jsx(ue,{htmlFor:"state",children:"State/County *"}),e.jsx(we,{id:"state",value:q.state,onChange:te=>W("state",te.target.value),placeholder:"Nairobi County"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(ue,{htmlFor:"zipCode",children:"Postal Code *"}),e.jsx(we,{id:"zipCode",value:q.zipCode,onChange:te=>W("zipCode",te.target.value),placeholder:"00100"})]}),e.jsxs("div",{children:[e.jsx(ue,{htmlFor:"country",children:"Country"}),e.jsxs(Xt,{value:q.country,onValueChange:te=>W("country",te),children:[e.jsx(Jt,{children:e.jsx(Qt,{})}),e.jsxs(es,{children:[e.jsx(Ie,{value:"Kenya",children:"Kenya"}),e.jsx(Ie,{value:"Uganda",children:"Uganda"}),e.jsx(Ie,{value:"Tanzania",children:"Tanzania"})]})]})]})]}),e.jsxs("div",{children:[e.jsx(ue,{htmlFor:"deliveryMethod",children:"Delivery Method"}),e.jsxs(Xt,{value:q.deliveryMethod,onValueChange:te=>W("deliveryMethod",te),children:[e.jsx(Jt,{children:e.jsx(Qt,{})}),e.jsxs(es,{children:[e.jsx(Ie,{value:"standard",children:"Standard Delivery (3-5 days) - KES 400"}),e.jsx(Ie,{value:"express",children:"Express Delivery (1-2 days) - KES 800"})]})]})]}),e.jsxs("div",{children:[e.jsx(ue,{htmlFor:"specialInstructions",children:"Special Instructions (Optional)"}),e.jsx(Gs,{id:"specialInstructions",value:q.specialInstructions,onChange:te=>W("specialInstructions",te.target.value),placeholder:"Any special delivery instructions..."})]})]})]}),v===4&&e.jsxs(se,{className:"bg-card border-border",children:[e.jsxs(_e,{children:[e.jsxs(Te,{className:"flex items-center gap-2",children:[e.jsx(Ba,{className:"w-5 h-5"}),"Payment Method"]}),e.jsx(vt,{children:"Choose your preferred payment method"})]}),e.jsxs(oe,{children:[e.jsx(dk,{amount:z(),description:`Order for ${s.length} items`,currency:"KES",triggerText:`Pay KES ${z().toLocaleString()}`,onSuccess:ge,onError:Z}),e.jsx("div",{className:"mt-6 p-4 bg-muted/50 rounded-lg",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(_a,{className:"w-5 h-5 text-primary mt-0.5"}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-sm font-medium",children:"Secure Payment"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Your payment information is encrypted and secure. We never store your payment details."})]})]})})]})]}),v<4&&e.jsxs("div",{className:"flex justify-between mt-6",children:[e.jsx(I,{variant:"outline",onClick:ae,disabled:v===1,children:"Previous"}),e.jsx(I,{onClick:V,disabled:!he(v),children:v===3?"Proceed to Payment":"Next"})]})]}),e.jsx("div",{className:"lg:col-span-1",children:e.jsxs(se,{className:"bg-card border-border sticky top-4",children:[e.jsx(_e,{children:e.jsx(Te,{children:"Order Summary"})}),e.jsxs(oe,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Subtotal"}),e.jsxs("span",{children:["KES ",P().toLocaleString()]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Shipping"}),e.jsx("span",{children:G()===0?"Free":`KES ${G().toLocaleString()}`})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"VAT (16%)"}),e.jsxs("span",{children:["KES ",K().toLocaleString()]})]}),e.jsx(bi,{}),e.jsxs("div",{className:"flex justify-between font-semibold text-lg",children:[e.jsx("span",{children:"Total"}),e.jsxs("span",{children:["KES ",z().toLocaleString()]})]})]}),G()===0&&e.jsx("div",{className:"p-3 bg-green-50 border border-green-200 rounded-lg",children:e.jsx("p",{className:"text-sm text-green-800 font-medium",children:" Free shipping on orders over KES 10,000!"})}),e.jsxs("div",{className:"space-y-2 text-sm text-muted-foreground",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ps,{className:"w-4 h-4"}),e.jsx("span",{children:"Estimated delivery: 3-5 business days"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(_a,{className:"w-4 h-4"}),e.jsx("span",{children:"Secure checkout"})]})]})]})]})})]})]})})},Uj=N.createContext({});function Vj(t){const s=N.useRef(null);return s.current===null&&(s.current=t()),s.current}const Hj=typeof window<"u",Pk=Hj?N.useLayoutEffect:N.useEffect,ag=N.createContext(null);function $j(t,s){t.indexOf(s)===-1&&t.push(s)}function Wj(t,s){const a=t.indexOf(s);a>-1&&t.splice(a,1)}const rl=(t,s,a)=>a>s?s:a<t?t:a;let Gj=()=>{};const il={},Ok=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function Mk(t){return typeof t=="object"&&t!==null}const Rk=t=>/^0[^.\s]+$/u.test(t);function qj(t){let s;return()=>(s===void 0&&(s=t()),s)}const _i=t=>t,gU=(t,s)=>a=>s(t(a)),af=(...t)=>t.reduce(gU),Bm=(t,s,a)=>{const n=s-t;return n===0?1:(a-t)/n};class Kj{constructor(){this.subscriptions=[]}add(s){return $j(this.subscriptions,s),()=>Wj(this.subscriptions,s)}notify(s,a,n){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](s,a,n);else for(let c=0;c<i;c++){const d=this.subscriptions[c];d&&d(s,a,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const bo=t=>t*1e3,Si=t=>t/1e3;function Lk(t,s){return s?t*(1e3/s):0}const Ik=(t,s,a)=>(((1-3*a+3*s)*t+(3*a-6*s))*t+3*s)*t,vU=1e-7,yU=12;function jU(t,s,a,n,i){let c,d,h=0;do d=s+(a-s)/2,c=Ik(d,n,i)-t,c>0?a=d:s=d;while(Math.abs(c)>vU&&++h<yU);return d}function nf(t,s,a,n){if(t===s&&a===n)return _i;const i=c=>jU(c,0,1,t,a);return c=>c===0||c===1?c:Ik(i(c),s,n)}const Fk=t=>s=>s<=.5?t(2*s)/2:(2-t(2*(1-s)))/2,Bk=t=>s=>1-t(1-s),zk=nf(.33,1.53,.69,.99),Yj=Bk(zk),Uk=Fk(Yj),Vk=t=>(t*=2)<1?.5*Yj(t):.5*(2-Math.pow(2,-10*(t-1))),Zj=t=>1-Math.sin(Math.acos(t)),Hk=Bk(Zj),$k=Fk(Zj),NU=nf(.42,0,1,1),wU=nf(0,0,.58,1),Wk=nf(.42,0,.58,1),bU=t=>Array.isArray(t)&&typeof t[0]!="number",Gk=t=>Array.isArray(t)&&typeof t[0]=="number",SU={linear:_i,easeIn:NU,easeInOut:Wk,easeOut:wU,circIn:Zj,circInOut:$k,circOut:Hk,backIn:Yj,backInOut:Uk,backOut:zk,anticipate:Vk},_U=t=>typeof t=="string",Y2=t=>{if(Gk(t)){Gj(t.length===4);const[s,a,n,i]=t;return nf(s,a,n,i)}else if(_U(t))return SU[t];return t},Vx=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function CU(t,s){let a=new Set,n=new Set,i=!1,c=!1;const d=new WeakSet;let h={delta:0,timestamp:0,isProcessing:!1};function f(p){d.has(p)&&(g.schedule(p),t()),p(h)}const g={schedule:(p,v=!1,y=!1)=>{const S=y&&i?a:n;return v&&d.add(p),S.has(p)||S.add(p),p},cancel:p=>{n.delete(p),d.delete(p)},process:p=>{if(h=p,i){c=!0;return}i=!0,[a,n]=[n,a],a.forEach(f),a.clear(),i=!1,c&&(c=!1,g.process(p))}};return g}const TU=40;function qk(t,s){let a=!1,n=!0;const i={delta:0,timestamp:0,isProcessing:!1},c=()=>a=!0,d=Vx.reduce((O,Q)=>(O[Q]=CU(c),O),{}),{setup:h,read:f,resolveKeyframes:g,preUpdate:p,update:v,preRender:y,render:_,postRender:S}=d,b=()=>{const O=il.useManualTiming?i.timestamp:performance.now();a=!1,il.useManualTiming||(i.delta=n?1e3/60:Math.max(Math.min(O-i.timestamp,TU),1)),i.timestamp=O,i.isProcessing=!0,h.process(i),f.process(i),g.process(i),p.process(i),v.process(i),y.process(i),_.process(i),S.process(i),i.isProcessing=!1,a&&s&&(n=!1,t(b))},T=()=>{a=!0,n=!0,i.isProcessing||t(b)};return{schedule:Vx.reduce((O,Q)=>{const q=d[Q];return O[Q]=(U,D=!1,M=!1)=>(a||T(),q.schedule(U,D,M)),O},{}),cancel:O=>{for(let Q=0;Q<Vx.length;Q++)d[Vx[Q]].cancel(O)},state:i,steps:d}}const{schedule:Va,cancel:ic,state:Qn,steps:wv}=qk(typeof requestAnimationFrame<"u"?requestAnimationFrame:_i,!0);let Jx;function kU(){Jx=void 0}const Ir={now:()=>(Jx===void 0&&Ir.set(Qn.isProcessing||il.useManualTiming?Qn.timestamp:performance.now()),Jx),set:t=>{Jx=t,queueMicrotask(kU)}},Kk=t=>s=>typeof s=="string"&&s.startsWith(t),Xj=Kk("--"),EU=Kk("var(--"),Qj=t=>EU(t)?AU.test(t.split("/*")[0].trim()):!1,AU=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Ju={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},zm={...Ju,transform:t=>rl(0,1,t)},Hx={...Ju,default:1},ym=t=>Math.round(t*1e5)/1e5,Jj=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function DU(t){return t==null}const PU=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,eN=(t,s)=>a=>!!(typeof a=="string"&&PU.test(a)&&a.startsWith(t)||s&&!DU(a)&&Object.prototype.hasOwnProperty.call(a,s)),Yk=(t,s,a)=>n=>{if(typeof n!="string")return n;const[i,c,d,h]=n.match(Jj);return{[t]:parseFloat(i),[s]:parseFloat(c),[a]:parseFloat(d),alpha:h!==void 0?parseFloat(h):1}},OU=t=>rl(0,255,t),bv={...Ju,transform:t=>Math.round(OU(t))},Qc={test:eN("rgb","red"),parse:Yk("red","green","blue"),transform:({red:t,green:s,blue:a,alpha:n=1})=>"rgba("+bv.transform(t)+", "+bv.transform(s)+", "+bv.transform(a)+", "+ym(zm.transform(n))+")"};function MU(t){let s="",a="",n="",i="";return t.length>5?(s=t.substring(1,3),a=t.substring(3,5),n=t.substring(5,7),i=t.substring(7,9)):(s=t.substring(1,2),a=t.substring(2,3),n=t.substring(3,4),i=t.substring(4,5),s+=s,a+=a,n+=n,i+=i),{red:parseInt(s,16),green:parseInt(a,16),blue:parseInt(n,16),alpha:i?parseInt(i,16)/255:1}}const yy={test:eN("#"),parse:MU,transform:Qc.transform},rf=t=>({test:s=>typeof s=="string"&&s.endsWith(t)&&s.split(" ").length===1,parse:parseFloat,transform:s=>`${s}${t}`}),Yl=rf("deg"),So=rf("%"),ms=rf("px"),RU=rf("vh"),LU=rf("vw"),Z2={...So,parse:t=>So.parse(t)/100,transform:t=>So.transform(t*100)},vu={test:eN("hsl","hue"),parse:Yk("hue","saturation","lightness"),transform:({hue:t,saturation:s,lightness:a,alpha:n=1})=>"hsla("+Math.round(t)+", "+So.transform(ym(s))+", "+So.transform(ym(a))+", "+ym(zm.transform(n))+")"},wn={test:t=>Qc.test(t)||yy.test(t)||vu.test(t),parse:t=>Qc.test(t)?Qc.parse(t):vu.test(t)?vu.parse(t):yy.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?Qc.transform(t):vu.transform(t),getAnimatableNone:t=>{const s=wn.parse(t);return s.alpha=0,wn.transform(s)}},IU=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function FU(t){return isNaN(t)&&typeof t=="string"&&(t.match(Jj)?.length||0)+(t.match(IU)?.length||0)>0}const Zk="number",Xk="color",BU="var",zU="var(",X2="${}",UU=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Um(t){const s=t.toString(),a=[],n={color:[],number:[],var:[]},i=[];let c=0;const h=s.replace(UU,f=>(wn.test(f)?(n.color.push(c),i.push(Xk),a.push(wn.parse(f))):f.startsWith(zU)?(n.var.push(c),i.push(BU),a.push(f)):(n.number.push(c),i.push(Zk),a.push(parseFloat(f))),++c,X2)).split(X2);return{values:a,split:h,indexes:n,types:i}}function Qk(t){return Um(t).values}function Jk(t){const{split:s,types:a}=Um(t),n=s.length;return i=>{let c="";for(let d=0;d<n;d++)if(c+=s[d],i[d]!==void 0){const h=a[d];h===Zk?c+=ym(i[d]):h===Xk?c+=wn.transform(i[d]):c+=i[d]}return c}}const VU=t=>typeof t=="number"?0:wn.test(t)?wn.getAnimatableNone(t):t;function HU(t){const s=Qk(t);return Jk(t)(s.map(VU))}const oc={test:FU,parse:Qk,createTransformer:Jk,getAnimatableNone:HU};function Sv(t,s,a){return a<0&&(a+=1),a>1&&(a-=1),a<1/6?t+(s-t)*6*a:a<1/2?s:a<2/3?t+(s-t)*(2/3-a)*6:t}function $U({hue:t,saturation:s,lightness:a,alpha:n}){t/=360,s/=100,a/=100;let i=0,c=0,d=0;if(!s)i=c=d=a;else{const h=a<.5?a*(1+s):a+s-a*s,f=2*a-h;i=Sv(f,h,t+1/3),c=Sv(f,h,t),d=Sv(f,h,t-1/3)}return{red:Math.round(i*255),green:Math.round(c*255),blue:Math.round(d*255),alpha:n}}function Tp(t,s){return a=>a>0?s:t}const qa=(t,s,a)=>t+(s-t)*a,_v=(t,s,a)=>{const n=t*t,i=a*(s*s-n)+n;return i<0?0:Math.sqrt(i)},WU=[yy,Qc,vu],GU=t=>WU.find(s=>s.test(t));function Q2(t){const s=GU(t);if(!s)return!1;let a=s.parse(t);return s===vu&&(a=$U(a)),a}const J2=(t,s)=>{const a=Q2(t),n=Q2(s);if(!a||!n)return Tp(t,s);const i={...a};return c=>(i.red=_v(a.red,n.red,c),i.green=_v(a.green,n.green,c),i.blue=_v(a.blue,n.blue,c),i.alpha=qa(a.alpha,n.alpha,c),Qc.transform(i))},jy=new Set(["none","hidden"]);function qU(t,s){return jy.has(t)?a=>a<=0?t:s:a=>a>=1?s:t}function KU(t,s){return a=>qa(t,s,a)}function tN(t){return typeof t=="number"?KU:typeof t=="string"?Qj(t)?Tp:wn.test(t)?J2:XU:Array.isArray(t)?eE:typeof t=="object"?wn.test(t)?J2:YU:Tp}function eE(t,s){const a=[...t],n=a.length,i=t.map((c,d)=>tN(c)(c,s[d]));return c=>{for(let d=0;d<n;d++)a[d]=i[d](c);return a}}function YU(t,s){const a={...t,...s},n={};for(const i in a)t[i]!==void 0&&s[i]!==void 0&&(n[i]=tN(t[i])(t[i],s[i]));return i=>{for(const c in n)a[c]=n[c](i);return a}}function ZU(t,s){const a=[],n={color:0,var:0,number:0};for(let i=0;i<s.values.length;i++){const c=s.types[i],d=t.indexes[c][n[c]],h=t.values[d]??0;a[i]=h,n[c]++}return a}const XU=(t,s)=>{const a=oc.createTransformer(s),n=Um(t),i=Um(s);return n.indexes.var.length===i.indexes.var.length&&n.indexes.color.length===i.indexes.color.length&&n.indexes.number.length>=i.indexes.number.length?jy.has(t)&&!i.values.length||jy.has(s)&&!n.values.length?qU(t,s):af(eE(ZU(n,i),i.values),a):Tp(t,s)};function tE(t,s,a){return typeof t=="number"&&typeof s=="number"&&typeof a=="number"?qa(t,s,a):tN(t)(t,s)}const QU=t=>{const s=({timestamp:a})=>t(a);return{start:(a=!0)=>Va.update(s,a),stop:()=>ic(s),now:()=>Qn.isProcessing?Qn.timestamp:Ir.now()}},sE=(t,s,a=10)=>{let n="";const i=Math.max(Math.round(s/a),2);for(let c=0;c<i;c++)n+=Math.round(t(c/(i-1))*1e4)/1e4+", ";return`linear(${n.substring(0,n.length-2)})`},kp=2e4;function sN(t){let s=0;const a=50;let n=t.next(s);for(;!n.done&&s<kp;)s+=a,n=t.next(s);return s>=kp?1/0:s}function JU(t,s=100,a){const n=a({...t,keyframes:[0,s]}),i=Math.min(sN(n),kp);return{type:"keyframes",ease:c=>n.next(i*c).value/s,duration:Si(i)}}const eV=5;function aE(t,s,a){const n=Math.max(s-eV,0);return Lk(a-t(n),s-n)}const an={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Cv=.001;function tV({duration:t=an.duration,bounce:s=an.bounce,velocity:a=an.velocity,mass:n=an.mass}){let i,c,d=1-s;d=rl(an.minDamping,an.maxDamping,d),t=rl(an.minDuration,an.maxDuration,Si(t)),d<1?(i=g=>{const p=g*d,v=p*t,y=p-a,_=Ny(g,d),S=Math.exp(-v);return Cv-y/_*S},c=g=>{const v=g*d*t,y=v*a+a,_=Math.pow(d,2)*Math.pow(g,2)*t,S=Math.exp(-v),b=Ny(Math.pow(g,2),d);return(-i(g)+Cv>0?-1:1)*((y-_)*S)/b}):(i=g=>{const p=Math.exp(-g*t),v=(g-a)*t+1;return-Cv+p*v},c=g=>{const p=Math.exp(-g*t),v=(a-g)*(t*t);return p*v});const h=5/t,f=aV(i,c,h);if(t=bo(t),isNaN(f))return{stiffness:an.stiffness,damping:an.damping,duration:t};{const g=Math.pow(f,2)*n;return{stiffness:g,damping:d*2*Math.sqrt(n*g),duration:t}}}const sV=12;function aV(t,s,a){let n=a;for(let i=1;i<sV;i++)n=n-t(n)/s(n);return n}function Ny(t,s){return t*Math.sqrt(1-s*s)}const nV=["duration","bounce"],rV=["stiffness","damping","mass"];function eS(t,s){return s.some(a=>t[a]!==void 0)}function iV(t){let s={velocity:an.velocity,stiffness:an.stiffness,damping:an.damping,mass:an.mass,isResolvedFromDuration:!1,...t};if(!eS(t,rV)&&eS(t,nV))if(t.visualDuration){const a=t.visualDuration,n=2*Math.PI/(a*1.2),i=n*n,c=2*rl(.05,1,1-(t.bounce||0))*Math.sqrt(i);s={...s,mass:an.mass,stiffness:i,damping:c}}else{const a=tV(t);s={...s,...a,mass:an.mass},s.isResolvedFromDuration=!0}return s}function Ep(t=an.visualDuration,s=an.bounce){const a=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:s}:t;let{restSpeed:n,restDelta:i}=a;const c=a.keyframes[0],d=a.keyframes[a.keyframes.length-1],h={done:!1,value:c},{stiffness:f,damping:g,mass:p,duration:v,velocity:y,isResolvedFromDuration:_}=iV({...a,velocity:-Si(a.velocity||0)}),S=y||0,b=g/(2*Math.sqrt(f*p)),T=d-c,E=Si(Math.sqrt(f/p)),A=Math.abs(T)<5;n||(n=A?an.restSpeed.granular:an.restSpeed.default),i||(i=A?an.restDelta.granular:an.restDelta.default);let O;if(b<1){const q=Ny(E,b);O=U=>{const D=Math.exp(-b*E*U);return d-D*((S+b*E*T)/q*Math.sin(q*U)+T*Math.cos(q*U))}}else if(b===1)O=q=>d-Math.exp(-E*q)*(T+(S+E*T)*q);else{const q=E*Math.sqrt(b*b-1);O=U=>{const D=Math.exp(-b*E*U),M=Math.min(q*U,300);return d-D*((S+b*E*T)*Math.sinh(M)+q*T*Math.cosh(M))/q}}const Q={calculatedDuration:_&&v||null,next:q=>{const U=O(q);if(_)h.done=q>=v;else{let D=q===0?S:0;b<1&&(D=q===0?bo(S):aE(O,q,U));const M=Math.abs(D)<=n,P=Math.abs(d-U)<=i;h.done=M&&P}return h.value=h.done?d:U,h},toString:()=>{const q=Math.min(sN(Q),kp),U=sE(D=>Q.next(q*D).value,q,30);return q+"ms "+U},toTransition:()=>{}};return Q}Ep.applyToOptions=t=>{const s=JU(t,100,Ep);return t.ease=s.ease,t.duration=bo(s.duration),t.type="keyframes",t};function wy({keyframes:t,velocity:s=0,power:a=.8,timeConstant:n=325,bounceDamping:i=10,bounceStiffness:c=500,modifyTarget:d,min:h,max:f,restDelta:g=.5,restSpeed:p}){const v=t[0],y={done:!1,value:v},_=M=>h!==void 0&&M<h||f!==void 0&&M>f,S=M=>h===void 0?f:f===void 0||Math.abs(h-M)<Math.abs(f-M)?h:f;let b=a*s;const T=v+b,E=d===void 0?T:d(T);E!==T&&(b=E-v);const A=M=>-b*Math.exp(-M/n),O=M=>E+A(M),Q=M=>{const P=A(M),G=O(M);y.done=Math.abs(P)<=g,y.value=y.done?E:G};let q,U;const D=M=>{_(y.value)&&(q=M,U=Ep({keyframes:[y.value,S(y.value)],velocity:aE(O,M,y.value),damping:i,stiffness:c,restDelta:g,restSpeed:p}))};return D(0),{calculatedDuration:null,next:M=>{let P=!1;return!U&&q===void 0&&(P=!0,Q(M),D(M)),q!==void 0&&M>=q?U.next(M-q):(!P&&Q(M),y)}}}function oV(t,s,a){const n=[],i=a||il.mix||tE,c=t.length-1;for(let d=0;d<c;d++){let h=i(t[d],t[d+1]);if(s){const f=Array.isArray(s)?s[d]||_i:s;h=af(f,h)}n.push(h)}return n}function lV(t,s,{clamp:a=!0,ease:n,mixer:i}={}){const c=t.length;if(Gj(c===s.length),c===1)return()=>s[0];if(c===2&&s[0]===s[1])return()=>s[1];const d=t[0]===t[1];t[0]>t[c-1]&&(t=[...t].reverse(),s=[...s].reverse());const h=oV(s,n,i),f=h.length,g=p=>{if(d&&p<t[0])return s[0];let v=0;if(f>1)for(;v<t.length-2&&!(p<t[v+1]);v++);const y=Bm(t[v],t[v+1],p);return h[v](y)};return a?p=>g(rl(t[0],t[c-1],p)):g}function cV(t,s){const a=t[t.length-1];for(let n=1;n<=s;n++){const i=Bm(0,s,n);t.push(qa(a,1,i))}}function dV(t){const s=[0];return cV(s,t.length-1),s}function uV(t,s){return t.map(a=>a*s)}function hV(t,s){return t.map(()=>s||Wk).splice(0,t.length-1)}function jm({duration:t=300,keyframes:s,times:a,ease:n="easeInOut"}){const i=bU(n)?n.map(Y2):Y2(n),c={done:!1,value:s[0]},d=uV(a&&a.length===s.length?a:dV(s),t),h=lV(d,s,{ease:Array.isArray(i)?i:hV(s,i)});return{calculatedDuration:t,next:f=>(c.value=h(f),c.done=f>=t,c)}}const mV=t=>t!==null;function aN(t,{repeat:s,repeatType:a="loop"},n,i=1){const c=t.filter(mV),h=i<0||s&&a!=="loop"&&s%2===1?0:c.length-1;return!h||n===void 0?c[h]:n}const fV={decay:wy,inertia:wy,tween:jm,keyframes:jm,spring:Ep};function nE(t){typeof t.type=="string"&&(t.type=fV[t.type])}class nN{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(s=>{this.resolve=s})}notifyFinished(){this.resolve()}then(s,a){return this.finished.then(s,a)}}const xV=t=>t/100;class rN extends nN{constructor(s){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:a}=this.options;a&&a.updatedAt!==Ir.now()&&this.tick(Ir.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=s,this.initAnimation(),this.play(),s.autoplay===!1&&this.pause()}initAnimation(){const{options:s}=this;nE(s);const{type:a=jm,repeat:n=0,repeatDelay:i=0,repeatType:c,velocity:d=0}=s;let{keyframes:h}=s;const f=a||jm;f!==jm&&typeof h[0]!="number"&&(this.mixKeyframes=af(xV,tE(h[0],h[1])),h=[0,100]);const g=f({...s,keyframes:h});c==="mirror"&&(this.mirroredGenerator=f({...s,keyframes:[...h].reverse(),velocity:-d})),g.calculatedDuration===null&&(g.calculatedDuration=sN(g));const{calculatedDuration:p}=g;this.calculatedDuration=p,this.resolvedDuration=p+i,this.totalDuration=this.resolvedDuration*(n+1)-i,this.generator=g}updateTime(s){const a=Math.round(s-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=a}tick(s,a=!1){const{generator:n,totalDuration:i,mixKeyframes:c,mirroredGenerator:d,resolvedDuration:h,calculatedDuration:f}=this;if(this.startTime===null)return n.next(0);const{delay:g=0,keyframes:p,repeat:v,repeatType:y,repeatDelay:_,type:S,onUpdate:b,finalKeyframe:T}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,s):this.speed<0&&(this.startTime=Math.min(s-i/this.speed,this.startTime)),a?this.currentTime=s:this.updateTime(s);const E=this.currentTime-g*(this.playbackSpeed>=0?1:-1),A=this.playbackSpeed>=0?E<0:E>i;this.currentTime=Math.max(E,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=i);let O=this.currentTime,Q=n;if(v){const M=Math.min(this.currentTime,i)/h;let P=Math.floor(M),G=M%1;!G&&M>=1&&(G=1),G===1&&P--,P=Math.min(P,v+1),!!(P%2)&&(y==="reverse"?(G=1-G,_&&(G-=_/h)):y==="mirror"&&(Q=d)),O=rl(0,1,G)*h}const q=A?{done:!1,value:p[0]}:Q.next(O);c&&(q.value=c(q.value));let{done:U}=q;!A&&f!==null&&(U=this.playbackSpeed>=0?this.currentTime>=i:this.currentTime<=0);const D=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&U);return D&&S!==wy&&(q.value=aN(p,this.options,T,this.speed)),b&&b(q.value),D&&this.finish(),q}then(s,a){return this.finished.then(s,a)}get duration(){return Si(this.calculatedDuration)}get iterationDuration(){const{delay:s=0}=this.options||{};return this.duration+Si(s)}get time(){return Si(this.currentTime)}set time(s){s=bo(s),this.currentTime=s,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=s:this.driver&&(this.startTime=this.driver.now()-s/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(s){this.updateTime(Ir.now());const a=this.playbackSpeed!==s;this.playbackSpeed=s,a&&(this.time=Si(this.currentTime))}play(){if(this.isStopped)return;const{driver:s=QU,startTime:a}=this.options;this.driver||(this.driver=s(i=>this.tick(i))),this.options.onPlay?.();const n=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=n):this.holdTime!==null?this.startTime=n-this.holdTime:this.startTime||(this.startTime=a??n),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Ir.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(s){return this.startTime=0,this.tick(s,!0)}attachTimeline(s){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),s.observe(this)}}function pV(t){for(let s=1;s<t.length;s++)t[s]??(t[s]=t[s-1])}const Jc=t=>t*180/Math.PI,by=t=>{const s=Jc(Math.atan2(t[1],t[0]));return Sy(s)},gV={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:by,rotateZ:by,skewX:t=>Jc(Math.atan(t[1])),skewY:t=>Jc(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},Sy=t=>(t=t%360,t<0&&(t+=360),t),tS=by,sS=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),aS=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),vV={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:sS,scaleY:aS,scale:t=>(sS(t)+aS(t))/2,rotateX:t=>Sy(Jc(Math.atan2(t[6],t[5]))),rotateY:t=>Sy(Jc(Math.atan2(-t[2],t[0]))),rotateZ:tS,rotate:tS,skewX:t=>Jc(Math.atan(t[4])),skewY:t=>Jc(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function _y(t){return t.includes("scale")?1:0}function Cy(t,s){if(!t||t==="none")return _y(s);const a=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let n,i;if(a)n=vV,i=a;else{const h=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);n=gV,i=h}if(!i)return _y(s);const c=n[s],d=i[1].split(",").map(jV);return typeof c=="function"?c(d):d[c]}const yV=(t,s)=>{const{transform:a="none"}=getComputedStyle(t);return Cy(a,s)};function jV(t){return parseFloat(t.trim())}const eh=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],th=new Set(eh),nS=t=>t===Ju||t===ms,NV=new Set(["x","y","z"]),wV=eh.filter(t=>!NV.has(t));function bV(t){const s=[];return wV.forEach(a=>{const n=t.getValue(a);n!==void 0&&(s.push([a,n.get()]),n.set(a.startsWith("scale")?1:0))}),s}const rd={width:({x:t},{paddingLeft:s="0",paddingRight:a="0"})=>t.max-t.min-parseFloat(s)-parseFloat(a),height:({y:t},{paddingTop:s="0",paddingBottom:a="0"})=>t.max-t.min-parseFloat(s)-parseFloat(a),top:(t,{top:s})=>parseFloat(s),left:(t,{left:s})=>parseFloat(s),bottom:({y:t},{top:s})=>parseFloat(s)+(t.max-t.min),right:({x:t},{left:s})=>parseFloat(s)+(t.max-t.min),x:(t,{transform:s})=>Cy(s,"x"),y:(t,{transform:s})=>Cy(s,"y")};rd.translateX=rd.x;rd.translateY=rd.y;const id=new Set;let Ty=!1,ky=!1,Ey=!1;function rE(){if(ky){const t=Array.from(id).filter(n=>n.needsMeasurement),s=new Set(t.map(n=>n.element)),a=new Map;s.forEach(n=>{const i=bV(n);i.length&&(a.set(n,i),n.render())}),t.forEach(n=>n.measureInitialState()),s.forEach(n=>{n.render();const i=a.get(n);i&&i.forEach(([c,d])=>{n.getValue(c)?.set(d)})}),t.forEach(n=>n.measureEndState()),t.forEach(n=>{n.suspendedScrollY!==void 0&&window.scrollTo(0,n.suspendedScrollY)})}ky=!1,Ty=!1,id.forEach(t=>t.complete(Ey)),id.clear()}function iE(){id.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(ky=!0)})}function SV(){Ey=!0,iE(),rE(),Ey=!1}class iN{constructor(s,a,n,i,c,d=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...s],this.onComplete=a,this.name=n,this.motionValue=i,this.element=c,this.isAsync=d}scheduleResolve(){this.state="scheduled",this.isAsync?(id.add(this),Ty||(Ty=!0,Va.read(iE),Va.resolveKeyframes(rE))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:s,name:a,element:n,motionValue:i}=this;if(s[0]===null){const c=i?.get(),d=s[s.length-1];if(c!==void 0)s[0]=c;else if(n&&a){const h=n.readValue(a,d);h!=null&&(s[0]=h)}s[0]===void 0&&(s[0]=d),i&&c===void 0&&i.set(s[0])}pV(s)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(s=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,s),id.delete(this)}cancel(){this.state==="scheduled"&&(id.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const _V=t=>t.startsWith("--");function CV(t,s,a){_V(s)?t.style.setProperty(s,a):t.style[s]=a}const TV=qj(()=>window.ScrollTimeline!==void 0),kV={};function EV(t,s){const a=qj(t);return()=>kV[s]??a()}const oE=EV(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),cm=([t,s,a,n])=>`cubic-bezier(${t}, ${s}, ${a}, ${n})`,rS={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:cm([0,.65,.55,1]),circOut:cm([.55,0,1,.45]),backIn:cm([.31,.01,.66,-.59]),backOut:cm([.33,1.53,.69,.99])};function lE(t,s){if(t)return typeof t=="function"?oE()?sE(t,s):"ease-out":Gk(t)?cm(t):Array.isArray(t)?t.map(a=>lE(a,s)||rS.easeOut):rS[t]}function AV(t,s,a,{delay:n=0,duration:i=300,repeat:c=0,repeatType:d="loop",ease:h="easeOut",times:f}={},g=void 0){const p={[s]:a};f&&(p.offset=f);const v=lE(h,i);Array.isArray(v)&&(p.easing=v);const y={delay:n,duration:i,easing:Array.isArray(v)?"linear":v,fill:"both",iterations:c+1,direction:d==="reverse"?"alternate":"normal"};return g&&(y.pseudoElement=g),t.animate(p,y)}function cE(t){return typeof t=="function"&&"applyToOptions"in t}function DV({type:t,...s}){return cE(t)&&oE()?t.applyToOptions(s):(s.duration??(s.duration=300),s.ease??(s.ease="easeOut"),s)}class PV extends nN{constructor(s){if(super(),this.finishedTime=null,this.isStopped=!1,!s)return;const{element:a,name:n,keyframes:i,pseudoElement:c,allowFlatten:d=!1,finalKeyframe:h,onComplete:f}=s;this.isPseudoElement=!!c,this.allowFlatten=d,this.options=s,Gj(typeof s.type!="string");const g=DV(s);this.animation=AV(a,n,i,g,c),g.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!c){const p=aN(i,this.options,h,this.speed);this.updateMotionValue?this.updateMotionValue(p):CV(a,n,p),this.animation.cancel()}f?.(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:s}=this;s==="idle"||s==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const s=this.animation.effect?.getComputedTiming?.().duration||0;return Si(Number(s))}get iterationDuration(){const{delay:s=0}=this.options||{};return this.duration+Si(s)}get time(){return Si(Number(this.animation.currentTime)||0)}set time(s){this.finishedTime=null,this.animation.currentTime=bo(s)}get speed(){return this.animation.playbackRate}set speed(s){s<0&&(this.finishedTime=null),this.animation.playbackRate=s}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(s){this.animation.startTime=s}attachTimeline({timeline:s,observe:a}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,s&&TV()?(this.animation.timeline=s,_i):a(this)}}const dE={anticipate:Vk,backInOut:Uk,circInOut:$k};function OV(t){return t in dE}function MV(t){typeof t.ease=="string"&&OV(t.ease)&&(t.ease=dE[t.ease])}const iS=10;class RV extends PV{constructor(s){MV(s),nE(s),super(s),s.startTime&&(this.startTime=s.startTime),this.options=s}updateMotionValue(s){const{motionValue:a,onUpdate:n,onComplete:i,element:c,...d}=this.options;if(!a)return;if(s!==void 0){a.set(s);return}const h=new rN({...d,autoplay:!1}),f=bo(this.finishedTime??this.time);a.setWithVelocity(h.sample(f-iS).value,h.sample(f).value,iS),h.stop()}}const oS=(t,s)=>s==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(oc.test(t)||t==="0")&&!t.startsWith("url("));function LV(t){const s=t[0];if(t.length===1)return!0;for(let a=0;a<t.length;a++)if(t[a]!==s)return!0}function IV(t,s,a,n){const i=t[0];if(i===null)return!1;if(s==="display"||s==="visibility")return!0;const c=t[t.length-1],d=oS(i,s),h=oS(c,s);return!d||!h?!1:LV(t)||(a==="spring"||cE(a))&&n}function Ay(t){t.duration=0,t.type="keyframes"}const FV=new Set(["opacity","clipPath","filter","transform"]),BV=qj(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function zV(t){const{motionValue:s,name:a,repeatDelay:n,repeatType:i,damping:c,type:d}=t;if(!(s?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:f,transformTemplate:g}=s.owner.getProps();return BV()&&a&&FV.has(a)&&(a!=="transform"||!g)&&!f&&!n&&i!=="mirror"&&c!==0&&d!=="inertia"}const UV=40;class VV extends nN{constructor({autoplay:s=!0,delay:a=0,type:n="keyframes",repeat:i=0,repeatDelay:c=0,repeatType:d="loop",keyframes:h,name:f,motionValue:g,element:p,...v}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=Ir.now();const y={autoplay:s,delay:a,type:n,repeat:i,repeatDelay:c,repeatType:d,name:f,motionValue:g,element:p,...v},_=p?.KeyframeResolver||iN;this.keyframeResolver=new _(h,(S,b,T)=>this.onKeyframesResolved(S,b,y,!T),f,g,p),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(s,a,n,i){this.keyframeResolver=void 0;const{name:c,type:d,velocity:h,delay:f,isHandoff:g,onUpdate:p}=n;this.resolvedAt=Ir.now(),IV(s,c,d,h)||((il.instantAnimations||!f)&&p?.(aN(s,n,a)),s[0]=s[s.length-1],Ay(n),n.repeat=0);const y={startTime:i?this.resolvedAt?this.resolvedAt-this.createdAt>UV?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:a,...n,keyframes:s},_=!g&&zV(y)?new RV({...y,element:y.motionValue.owner.current}):new rN(y);_.finished.then(()=>this.notifyFinished()).catch(_i),this.pendingTimeline&&(this.stopTimeline=_.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=_}get finished(){return this._animation?this.animation.finished:this._finished}then(s,a){return this.finished.finally(s).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),SV()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(s){this.animation.time=s}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(s){this.animation.speed=s}get startTime(){return this.animation.startTime}attachTimeline(s){return this._animation?this.stopTimeline=this.animation.attachTimeline(s):this.pendingTimeline=s,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}const HV=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function $V(t){const s=HV.exec(t);if(!s)return[,];const[,a,n,i]=s;return[`--${a??n}`,i]}function uE(t,s,a=1){const[n,i]=$V(t);if(!n)return;const c=window.getComputedStyle(s).getPropertyValue(n);if(c){const d=c.trim();return Ok(d)?parseFloat(d):d}return Qj(i)?uE(i,s,a+1):i}function oN(t,s){return t?.[s]??t?.default??t}const hE=new Set(["width","height","top","left","right","bottom",...eh]),WV={test:t=>t==="auto",parse:t=>t},mE=t=>s=>s.test(t),fE=[Ju,ms,So,Yl,LU,RU,WV],lS=t=>fE.find(mE(t));function GV(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||Rk(t):!0}const qV=new Set(["brightness","contrast","saturate","opacity"]);function KV(t){const[s,a]=t.slice(0,-1).split("(");if(s==="drop-shadow")return t;const[n]=a.match(Jj)||[];if(!n)return t;const i=a.replace(n,"");let c=qV.has(s)?1:0;return n!==a&&(c*=100),s+"("+c+i+")"}const YV=/\b([a-z-]*)\(.*?\)/gu,Dy={...oc,getAnimatableNone:t=>{const s=t.match(YV);return s?s.map(KV).join(" "):t}},cS={...Ju,transform:Math.round},ZV={rotate:Yl,rotateX:Yl,rotateY:Yl,rotateZ:Yl,scale:Hx,scaleX:Hx,scaleY:Hx,scaleZ:Hx,skew:Yl,skewX:Yl,skewY:Yl,distance:ms,translateX:ms,translateY:ms,translateZ:ms,x:ms,y:ms,z:ms,perspective:ms,transformPerspective:ms,opacity:zm,originX:Z2,originY:Z2,originZ:ms},lN={borderWidth:ms,borderTopWidth:ms,borderRightWidth:ms,borderBottomWidth:ms,borderLeftWidth:ms,borderRadius:ms,radius:ms,borderTopLeftRadius:ms,borderTopRightRadius:ms,borderBottomRightRadius:ms,borderBottomLeftRadius:ms,width:ms,maxWidth:ms,height:ms,maxHeight:ms,top:ms,right:ms,bottom:ms,left:ms,padding:ms,paddingTop:ms,paddingRight:ms,paddingBottom:ms,paddingLeft:ms,margin:ms,marginTop:ms,marginRight:ms,marginBottom:ms,marginLeft:ms,backgroundPositionX:ms,backgroundPositionY:ms,...ZV,zIndex:cS,fillOpacity:zm,strokeOpacity:zm,numOctaves:cS},XV={...lN,color:wn,backgroundColor:wn,outlineColor:wn,fill:wn,stroke:wn,borderColor:wn,borderTopColor:wn,borderRightColor:wn,borderBottomColor:wn,borderLeftColor:wn,filter:Dy,WebkitFilter:Dy},xE=t=>XV[t];function pE(t,s){let a=xE(t);return a!==Dy&&(a=oc),a.getAnimatableNone?a.getAnimatableNone(s):void 0}const QV=new Set(["auto","none","0"]);function JV(t,s,a){let n=0,i;for(;n<t.length&&!i;){const c=t[n];typeof c=="string"&&!QV.has(c)&&Um(c).values.length&&(i=t[n]),n++}if(i&&a)for(const c of s)t[c]=pE(a,i)}class eH extends iN{constructor(s,a,n,i,c){super(s,a,n,i,c,!0)}readKeyframes(){const{unresolvedKeyframes:s,element:a,name:n}=this;if(!a||!a.current)return;super.readKeyframes();for(let f=0;f<s.length;f++){let g=s[f];if(typeof g=="string"&&(g=g.trim(),Qj(g))){const p=uE(g,a.current);p!==void 0&&(s[f]=p),f===s.length-1&&(this.finalKeyframe=g)}}if(this.resolveNoneKeyframes(),!hE.has(n)||s.length!==2)return;const[i,c]=s,d=lS(i),h=lS(c);if(d!==h)if(nS(d)&&nS(h))for(let f=0;f<s.length;f++){const g=s[f];typeof g=="string"&&(s[f]=parseFloat(g))}else rd[n]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:s,name:a}=this,n=[];for(let i=0;i<s.length;i++)(s[i]===null||GV(s[i]))&&n.push(i);n.length&&JV(s,n,a)}measureInitialState(){const{element:s,unresolvedKeyframes:a,name:n}=this;if(!s||!s.current)return;n==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=rd[n](s.measureViewportBox(),window.getComputedStyle(s.current)),a[0]=this.measuredOrigin;const i=a[a.length-1];i!==void 0&&s.getValue(n,i).jump(i,!1)}measureEndState(){const{element:s,name:a,unresolvedKeyframes:n}=this;if(!s||!s.current)return;const i=s.getValue(a);i&&i.jump(this.measuredOrigin,!1);const c=n.length-1,d=n[c];n[c]=rd[a](s.measureViewportBox(),window.getComputedStyle(s.current)),d!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=d),this.removedTransforms?.length&&this.removedTransforms.forEach(([h,f])=>{s.getValue(h).set(f)}),this.resolveNoneKeyframes()}}function tH(t,s,a){if(t instanceof EventTarget)return[t];if(typeof t=="string"){let n=document;const i=a?.[t]??n.querySelectorAll(t);return i?Array.from(i):[]}return Array.from(t)}const gE=(t,s)=>s&&typeof t=="number"?s.transform(t):t;function vE(t){return Mk(t)&&"offsetHeight"in t}const dS=30,sH=t=>!isNaN(parseFloat(t));class aH{constructor(s,a={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=n=>{const i=Ir.now();if(this.updatedAt!==i&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(n),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const c of this.dependents)c.dirty()},this.hasAnimated=!1,this.setCurrent(s),this.owner=a.owner}setCurrent(s){this.current=s,this.updatedAt=Ir.now(),this.canTrackVelocity===null&&s!==void 0&&(this.canTrackVelocity=sH(this.current))}setPrevFrameValue(s=this.current){this.prevFrameValue=s,this.prevUpdatedAt=this.updatedAt}onChange(s){return this.on("change",s)}on(s,a){this.events[s]||(this.events[s]=new Kj);const n=this.events[s].add(a);return s==="change"?()=>{n(),Va.read(()=>{this.events.change.getSize()||this.stop()})}:n}clearListeners(){for(const s in this.events)this.events[s].clear()}attach(s,a){this.passiveEffect=s,this.stopPassiveEffect=a}set(s){this.passiveEffect?this.passiveEffect(s,this.updateAndNotify):this.updateAndNotify(s)}setWithVelocity(s,a,n){this.set(a),this.prev=void 0,this.prevFrameValue=s,this.prevUpdatedAt=this.updatedAt-n}jump(s,a=!0){this.updateAndNotify(s),this.prev=s,this.prevUpdatedAt=this.prevFrameValue=void 0,a&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(s){this.dependents||(this.dependents=new Set),this.dependents.add(s)}removeDependent(s){this.dependents&&this.dependents.delete(s)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const s=Ir.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||s-this.updatedAt>dS)return 0;const a=Math.min(this.updatedAt-this.prevUpdatedAt,dS);return Lk(parseFloat(this.current)-parseFloat(this.prevFrameValue),a)}start(s){return this.stop(),new Promise(a=>{this.hasAnimated=!0,this.animation=s(a),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Bu(t,s){return new aH(t,s)}const{schedule:cN}=qk(queueMicrotask,!1),zi={x:!1,y:!1};function yE(){return zi.x||zi.y}function nH(t){return t==="x"||t==="y"?zi[t]?null:(zi[t]=!0,()=>{zi[t]=!1}):zi.x||zi.y?null:(zi.x=zi.y=!0,()=>{zi.x=zi.y=!1})}function jE(t,s){const a=tH(t),n=new AbortController,i={passive:!0,...s,signal:n.signal};return[a,i,()=>n.abort()]}function uS(t){return!(t.pointerType==="touch"||yE())}function rH(t,s,a={}){const[n,i,c]=jE(t,a),d=h=>{if(!uS(h))return;const{target:f}=h,g=s(f,h);if(typeof g!="function"||!f)return;const p=v=>{uS(v)&&(g(v),f.removeEventListener("pointerleave",p))};f.addEventListener("pointerleave",p,i)};return n.forEach(h=>{h.addEventListener("pointerenter",d,i)}),c}const NE=(t,s)=>s?t===s?!0:NE(t,s.parentElement):!1,dN=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,iH=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function oH(t){return iH.has(t.tagName)||t.tabIndex!==-1}const ep=new WeakSet;function hS(t){return s=>{s.key==="Enter"&&t(s)}}function Tv(t,s){t.dispatchEvent(new PointerEvent("pointer"+s,{isPrimary:!0,bubbles:!0}))}const lH=(t,s)=>{const a=t.currentTarget;if(!a)return;const n=hS(()=>{if(ep.has(a))return;Tv(a,"down");const i=hS(()=>{Tv(a,"up")}),c=()=>Tv(a,"cancel");a.addEventListener("keyup",i,s),a.addEventListener("blur",c,s)});a.addEventListener("keydown",n,s),a.addEventListener("blur",()=>a.removeEventListener("keydown",n),s)};function mS(t){return dN(t)&&!yE()}function cH(t,s,a={}){const[n,i,c]=jE(t,a),d=h=>{const f=h.currentTarget;if(!mS(h))return;ep.add(f);const g=s(f,h),p=(_,S)=>{window.removeEventListener("pointerup",v),window.removeEventListener("pointercancel",y),ep.has(f)&&ep.delete(f),mS(_)&&typeof g=="function"&&g(_,{success:S})},v=_=>{p(_,f===window||f===document||a.useGlobalTarget||NE(f,_.target))},y=_=>{p(_,!1)};window.addEventListener("pointerup",v,i),window.addEventListener("pointercancel",y,i)};return n.forEach(h=>{(a.useGlobalTarget?window:h).addEventListener("pointerdown",d,i),vE(h)&&(h.addEventListener("focus",g=>lH(g,i)),!oH(h)&&!h.hasAttribute("tabindex")&&(h.tabIndex=0))}),c}function wE(t){return Mk(t)&&"ownerSVGElement"in t}function dH(t){return wE(t)&&t.tagName==="svg"}const fr=t=>!!(t&&t.getVelocity),uH=[...fE,wn,oc],hH=t=>uH.find(mE(t)),uN=N.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});function fS(t,s){if(typeof t=="function")return t(s);t!=null&&(t.current=s)}function mH(...t){return s=>{let a=!1;const n=t.map(i=>{const c=fS(i,s);return!a&&typeof c=="function"&&(a=!0),c});if(a)return()=>{for(let i=0;i<n.length;i++){const c=n[i];typeof c=="function"?c():fS(t[i],null)}}}}function fH(...t){return N.useCallback(mH(...t),t)}class xH extends N.Component{getSnapshotBeforeUpdate(s){const a=this.props.childRef.current;if(a&&s.isPresent&&!this.props.isPresent){const n=a.offsetParent,i=vE(n)&&n.offsetWidth||0,c=this.props.sizeRef.current;c.height=a.offsetHeight||0,c.width=a.offsetWidth||0,c.top=a.offsetTop,c.left=a.offsetLeft,c.right=i-c.width-c.left}return null}componentDidUpdate(){}render(){return this.props.children}}function pH({children:t,isPresent:s,anchorX:a,root:n}){const i=N.useId(),c=N.useRef(null),d=N.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:h}=N.useContext(uN),f=fH(c,t?.ref);return N.useInsertionEffect(()=>{const{width:g,height:p,top:v,left:y,right:_}=d.current;if(s||!c.current||!g||!p)return;const S=a==="left"?`left: ${y}`:`right: ${_}`;c.current.dataset.motionPopId=i;const b=document.createElement("style");h&&(b.nonce=h);const T=n??document.head;return T.appendChild(b),b.sheet&&b.sheet.insertRule(`
          [data-motion-pop-id="${i}"] {
            position: absolute !important;
            width: ${g}px !important;
            height: ${p}px !important;
            ${S}px !important;
            top: ${v}px !important;
          }
        `),()=>{T.contains(b)&&T.removeChild(b)}},[s]),e.jsx(xH,{isPresent:s,childRef:c,sizeRef:d,children:N.cloneElement(t,{ref:f})})}const gH=({children:t,initial:s,isPresent:a,onExitComplete:n,custom:i,presenceAffectsLayout:c,mode:d,anchorX:h,root:f})=>{const g=Vj(vH),p=N.useId();let v=!0,y=N.useMemo(()=>(v=!1,{id:p,initial:s,isPresent:a,custom:i,onExitComplete:_=>{g.set(_,!0);for(const S of g.values())if(!S)return;n&&n()},register:_=>(g.set(_,!1),()=>g.delete(_))}),[a,g,n]);return c&&v&&(y={...y}),N.useMemo(()=>{g.forEach((_,S)=>g.set(S,!1))},[a]),N.useEffect(()=>{!a&&!g.size&&n&&n()},[a]),d==="popLayout"&&(t=e.jsx(pH,{isPresent:a,anchorX:h,root:f,children:t})),e.jsx(ag.Provider,{value:y,children:t})};function vH(){return new Map}function bE(t=!0){const s=N.useContext(ag);if(s===null)return[!0,null];const{isPresent:a,onExitComplete:n,register:i}=s,c=N.useId();N.useEffect(()=>{if(t)return i(c)},[t]);const d=N.useCallback(()=>t&&n&&n(c),[c,n,t]);return!a&&n?[!1,d]:[!0]}const $x=t=>t.key||"";function xS(t){const s=[];return N.Children.forEach(t,a=>{N.isValidElement(a)&&s.push(a)}),s}const SE=({children:t,custom:s,initial:a=!0,onExitComplete:n,presenceAffectsLayout:i=!0,mode:c="sync",propagate:d=!1,anchorX:h="left",root:f})=>{const[g,p]=bE(d),v=N.useMemo(()=>xS(t),[t]),y=d&&!g?[]:v.map($x),_=N.useRef(!0),S=N.useRef(v),b=Vj(()=>new Map),[T,E]=N.useState(v),[A,O]=N.useState(v);Pk(()=>{_.current=!1,S.current=v;for(let U=0;U<A.length;U++){const D=$x(A[U]);y.includes(D)?b.delete(D):b.get(D)!==!0&&b.set(D,!1)}},[A,y.length,y.join("-")]);const Q=[];if(v!==T){let U=[...v];for(let D=0;D<A.length;D++){const M=A[D],P=$x(M);y.includes(P)||(U.splice(D,0,M),Q.push(M))}return c==="wait"&&Q.length&&(U=Q),O(xS(U)),E(v),null}const{forceRender:q}=N.useContext(Uj);return e.jsx(e.Fragment,{children:A.map(U=>{const D=$x(U),M=d&&!g?!1:v===A||y.includes(D),P=()=>{if(b.has(D))b.set(D,!0);else return;let G=!0;b.forEach(K=>{K||(G=!1)}),G&&(q?.(),O(S.current),d&&p?.(),n&&n())};return e.jsx(gH,{isPresent:M,initial:!_.current||a?void 0:!1,custom:s,presenceAffectsLayout:i,mode:c,root:f,onExitComplete:M?void 0:P,anchorX:h,children:U},D)})})},_E=N.createContext({strict:!1}),pS={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},zu={};for(const t in pS)zu[t]={isEnabled:s=>pS[t].some(a=>!!s[a])};function yH(t){for(const s in t)zu[s]={...zu[s],...t[s]}}const jH=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Ap(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||jH.has(t)}let CE=t=>!Ap(t);function NH(t){typeof t=="function"&&(CE=s=>s.startsWith("on")?!Ap(s):t(s))}try{NH(require("@emotion/is-prop-valid").default)}catch{}function wH(t,s,a){const n={};for(const i in t)i==="values"&&typeof t.values=="object"||(CE(i)||a===!0&&Ap(i)||!s&&!Ap(i)||t.draggable&&i.startsWith("onDrag"))&&(n[i]=t[i]);return n}const ng=N.createContext({});function rg(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function Vm(t){return typeof t=="string"||Array.isArray(t)}const hN=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],mN=["initial",...hN];function ig(t){return rg(t.animate)||mN.some(s=>Vm(t[s]))}function TE(t){return!!(ig(t)||t.variants)}function bH(t,s){if(ig(t)){const{initial:a,animate:n}=t;return{initial:a===!1||Vm(a)?a:void 0,animate:Vm(n)?n:void 0}}return t.inherit!==!1?s:{}}function SH(t){const{initial:s,animate:a}=bH(t,N.useContext(ng));return N.useMemo(()=>({initial:s,animate:a}),[gS(s),gS(a)])}function gS(t){return Array.isArray(t)?t.join(" "):t}const Hm={};function _H(t){for(const s in t)Hm[s]=t[s],Xj(s)&&(Hm[s].isCSSVariable=!0)}function kE(t,{layout:s,layoutId:a}){return th.has(t)||t.startsWith("origin")||(s||a!==void 0)&&(!!Hm[t]||t==="opacity")}const CH={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},TH=eh.length;function kH(t,s,a){let n="",i=!0;for(let c=0;c<TH;c++){const d=eh[c],h=t[d];if(h===void 0)continue;let f=!0;if(typeof h=="number"?f=h===(d.startsWith("scale")?1:0):f=parseFloat(h)===0,!f||a){const g=gE(h,lN[d]);if(!f){i=!1;const p=CH[d]||d;n+=`${p}(${g}) `}a&&(s[d]=g)}}return n=n.trim(),a?n=a(s,i?"":n):i&&(n="none"),n}function fN(t,s,a){const{style:n,vars:i,transformOrigin:c}=t;let d=!1,h=!1;for(const f in s){const g=s[f];if(th.has(f)){d=!0;continue}else if(Xj(f)){i[f]=g;continue}else{const p=gE(g,lN[f]);f.startsWith("origin")?(h=!0,c[f]=p):n[f]=p}}if(s.transform||(d||a?n.transform=kH(s,t.transform,a):n.transform&&(n.transform="none")),h){const{originX:f="50%",originY:g="50%",originZ:p=0}=c;n.transformOrigin=`${f} ${g} ${p}`}}const xN=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function EE(t,s,a){for(const n in s)!fr(s[n])&&!kE(n,a)&&(t[n]=s[n])}function EH({transformTemplate:t},s){return N.useMemo(()=>{const a=xN();return fN(a,s,t),Object.assign({},a.vars,a.style)},[s])}function AH(t,s){const a=t.style||{},n={};return EE(n,a,t),Object.assign(n,EH(t,s)),n}function DH(t,s){const a={},n=AH(t,s);return t.drag&&t.dragListener!==!1&&(a.draggable=!1,n.userSelect=n.WebkitUserSelect=n.WebkitTouchCallout="none",n.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(a.tabIndex=0),a.style=n,a}const PH={offset:"stroke-dashoffset",array:"stroke-dasharray"},OH={offset:"strokeDashoffset",array:"strokeDasharray"};function MH(t,s,a=1,n=0,i=!0){t.pathLength=1;const c=i?PH:OH;t[c.offset]=ms.transform(-n);const d=ms.transform(s),h=ms.transform(a);t[c.array]=`${d} ${h}`}function AE(t,{attrX:s,attrY:a,attrScale:n,pathLength:i,pathSpacing:c=1,pathOffset:d=0,...h},f,g,p){if(fN(t,h,g),f){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:v,style:y}=t;v.transform&&(y.transform=v.transform,delete v.transform),(y.transform||v.transformOrigin)&&(y.transformOrigin=v.transformOrigin??"50% 50%",delete v.transformOrigin),y.transform&&(y.transformBox=p?.transformBox??"fill-box",delete v.transformBox),s!==void 0&&(v.x=s),a!==void 0&&(v.y=a),n!==void 0&&(v.scale=n),i!==void 0&&MH(v,i,c,d,!1)}const DE=()=>({...xN(),attrs:{}}),PE=t=>typeof t=="string"&&t.toLowerCase()==="svg";function RH(t,s,a,n){const i=N.useMemo(()=>{const c=DE();return AE(c,s,PE(n),t.transformTemplate,t.style),{...c.attrs,style:{...c.style}}},[s]);if(t.style){const c={};EE(c,t.style,t),i.style={...c,...i.style}}return i}const LH=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function pN(t){return typeof t!="string"||t.includes("-")?!1:!!(LH.indexOf(t)>-1||/[A-Z]/u.test(t))}function IH(t,s,a,{latestValues:n},i,c=!1){const h=(pN(t)?RH:DH)(s,n,i,t),f=wH(s,typeof t=="string",c),g=t!==N.Fragment?{...f,...h,ref:a}:{},{children:p}=s,v=N.useMemo(()=>fr(p)?p.get():p,[p]);return N.createElement(t,{...g,children:v})}function vS(t){const s=[{},{}];return t?.values.forEach((a,n)=>{s[0][n]=a.get(),s[1][n]=a.getVelocity()}),s}function gN(t,s,a,n){if(typeof s=="function"){const[i,c]=vS(n);s=s(a!==void 0?a:t.custom,i,c)}if(typeof s=="string"&&(s=t.variants&&t.variants[s]),typeof s=="function"){const[i,c]=vS(n);s=s(a!==void 0?a:t.custom,i,c)}return s}function tp(t){return fr(t)?t.get():t}function FH({scrapeMotionValuesFromProps:t,createRenderState:s},a,n,i){return{latestValues:BH(a,n,i,t),renderState:s()}}function BH(t,s,a,n){const i={},c=n(t,{});for(const y in c)i[y]=tp(c[y]);let{initial:d,animate:h}=t;const f=ig(t),g=TE(t);s&&g&&!f&&t.inherit!==!1&&(d===void 0&&(d=s.initial),h===void 0&&(h=s.animate));let p=a?a.initial===!1:!1;p=p||d===!1;const v=p?h:d;if(v&&typeof v!="boolean"&&!rg(v)){const y=Array.isArray(v)?v:[v];for(let _=0;_<y.length;_++){const S=gN(t,y[_]);if(S){const{transitionEnd:b,transition:T,...E}=S;for(const A in E){let O=E[A];if(Array.isArray(O)){const Q=p?O.length-1:0;O=O[Q]}O!==null&&(i[A]=O)}for(const A in b)i[A]=b[A]}}}return i}const OE=t=>(s,a)=>{const n=N.useContext(ng),i=N.useContext(ag),c=()=>FH(t,s,n,i);return a?c():Vj(c)};function vN(t,s,a){const{style:n}=t,i={};for(const c in n)(fr(n[c])||s.style&&fr(s.style[c])||kE(c,t)||a?.getValue(c)?.liveStyle!==void 0)&&(i[c]=n[c]);return i}const zH=OE({scrapeMotionValuesFromProps:vN,createRenderState:xN});function ME(t,s,a){const n=vN(t,s,a);for(const i in t)if(fr(t[i])||fr(s[i])){const c=eh.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;n[c]=t[i]}return n}const UH=OE({scrapeMotionValuesFromProps:ME,createRenderState:DE}),VH=Symbol.for("motionComponentSymbol");function yu(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function HH(t,s,a){return N.useCallback(n=>{n&&t.onMount&&t.onMount(n),s&&(n?s.mount(n):s.unmount()),a&&(typeof a=="function"?a(n):yu(a)&&(a.current=n))},[s])}const yN=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),$H="framerAppearId",RE="data-"+yN($H),LE=N.createContext({});function WH(t,s,a,n,i){const{visualElement:c}=N.useContext(ng),d=N.useContext(_E),h=N.useContext(ag),f=N.useContext(uN).reducedMotion,g=N.useRef(null);n=n||d.renderer,!g.current&&n&&(g.current=n(t,{visualState:s,parent:c,props:a,presenceContext:h,blockInitialAnimation:h?h.initial===!1:!1,reducedMotionConfig:f}));const p=g.current,v=N.useContext(LE);p&&!p.projection&&i&&(p.type==="html"||p.type==="svg")&&GH(g.current,a,i,v);const y=N.useRef(!1);N.useInsertionEffect(()=>{p&&y.current&&p.update(a,h)});const _=a[RE],S=N.useRef(!!_&&!window.MotionHandoffIsComplete?.(_)&&window.MotionHasOptimisedAnimation?.(_));return Pk(()=>{p&&(y.current=!0,window.MotionIsMounted=!0,p.updateFeatures(),p.scheduleRenderMicrotask(),S.current&&p.animationState&&p.animationState.animateChanges())}),N.useEffect(()=>{p&&(!S.current&&p.animationState&&p.animationState.animateChanges(),S.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(_)}),S.current=!1),p.enteringChildren=void 0)}),p}function GH(t,s,a,n){const{layoutId:i,layout:c,drag:d,dragConstraints:h,layoutScroll:f,layoutRoot:g,layoutCrossfade:p}=s;t.projection=new a(t.latestValues,s["data-framer-portal-id"]?void 0:IE(t.parent)),t.projection.setOptions({layoutId:i,layout:c,alwaysMeasureLayout:!!d||h&&yu(h),visualElement:t,animationType:typeof c=="string"?c:"both",initialPromotionConfig:n,crossfade:p,layoutScroll:f,layoutRoot:g})}function IE(t){if(t)return t.options.allowProjection!==!1?t.projection:IE(t.parent)}function kv(t,{forwardMotionProps:s=!1}={},a,n){a&&yH(a);const i=pN(t)?UH:zH;function c(h,f){let g;const p={...N.useContext(uN),...h,layoutId:qH(h)},{isStatic:v}=p,y=SH(h),_=i(h,v);if(!v&&Hj){KH();const S=YH(p);g=S.MeasureLayout,y.visualElement=WH(t,_,p,n,S.ProjectionNode)}return e.jsxs(ng.Provider,{value:y,children:[g&&y.visualElement?e.jsx(g,{visualElement:y.visualElement,...p}):null,IH(t,h,HH(_,y.visualElement,f),_,v,s)]})}c.displayName=`motion.${typeof t=="string"?t:`create(${t.displayName??t.name??""})`}`;const d=N.forwardRef(c);return d[VH]=t,d}function qH({layoutId:t}){const s=N.useContext(Uj).id;return s&&t!==void 0?s+"-"+t:t}function KH(t,s){N.useContext(_E).strict}function YH(t){const{drag:s,layout:a}=zu;if(!s&&!a)return{};const n={...s,...a};return{MeasureLayout:s?.isEnabled(t)||a?.isEnabled(t)?n.MeasureLayout:void 0,ProjectionNode:n.ProjectionNode}}function ZH(t,s){if(typeof Proxy>"u")return kv;const a=new Map,n=(c,d)=>kv(c,d,t,s),i=(c,d)=>n(c,d);return new Proxy(i,{get:(c,d)=>d==="create"?n:(a.has(d)||a.set(d,kv(d,void 0,t,s)),a.get(d))})}function FE({top:t,left:s,right:a,bottom:n}){return{x:{min:s,max:a},y:{min:t,max:n}}}function XH({x:t,y:s}){return{top:s.min,right:t.max,bottom:s.max,left:t.min}}function QH(t,s){if(!s)return t;const a=s({x:t.left,y:t.top}),n=s({x:t.right,y:t.bottom});return{top:a.y,left:a.x,bottom:n.y,right:n.x}}function Ev(t){return t===void 0||t===1}function Py({scale:t,scaleX:s,scaleY:a}){return!Ev(t)||!Ev(s)||!Ev(a)}function Yc(t){return Py(t)||BE(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function BE(t){return yS(t.x)||yS(t.y)}function yS(t){return t&&t!=="0%"}function Dp(t,s,a){const n=t-a,i=s*n;return a+i}function jS(t,s,a,n,i){return i!==void 0&&(t=Dp(t,i,n)),Dp(t,a,n)+s}function Oy(t,s=0,a=1,n,i){t.min=jS(t.min,s,a,n,i),t.max=jS(t.max,s,a,n,i)}function zE(t,{x:s,y:a}){Oy(t.x,s.translate,s.scale,s.originPoint),Oy(t.y,a.translate,a.scale,a.originPoint)}const NS=.999999999999,wS=1.0000000000001;function JH(t,s,a,n=!1){const i=a.length;if(!i)return;s.x=s.y=1;let c,d;for(let h=0;h<i;h++){c=a[h],d=c.projectionDelta;const{visualElement:f}=c.options;f&&f.props.style&&f.props.style.display==="contents"||(n&&c.options.layoutScroll&&c.scroll&&c!==c.root&&Nu(t,{x:-c.scroll.offset.x,y:-c.scroll.offset.y}),d&&(s.x*=d.x.scale,s.y*=d.y.scale,zE(t,d)),n&&Yc(c.latestValues)&&Nu(t,c.latestValues))}s.x<wS&&s.x>NS&&(s.x=1),s.y<wS&&s.y>NS&&(s.y=1)}function ju(t,s){t.min=t.min+s,t.max=t.max+s}function bS(t,s,a,n,i=.5){const c=qa(t.min,t.max,i);Oy(t,s,a,c,n)}function Nu(t,s){bS(t.x,s.x,s.scaleX,s.scale,s.originX),bS(t.y,s.y,s.scaleY,s.scale,s.originY)}function UE(t,s){return FE(QH(t.getBoundingClientRect(),s))}function e$(t,s,a){const n=UE(t,a),{scroll:i}=s;return i&&(ju(n.x,i.offset.x),ju(n.y,i.offset.y)),n}const SS=()=>({translate:0,scale:1,origin:0,originPoint:0}),wu=()=>({x:SS(),y:SS()}),_S=()=>({min:0,max:0}),un=()=>({x:_S(),y:_S()}),My={current:null},VE={current:!1};function t$(){if(VE.current=!0,!!Hj)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),s=()=>My.current=t.matches;t.addEventListener("change",s),s()}else My.current=!1}const s$=new WeakMap;function a$(t,s,a){for(const n in s){const i=s[n],c=a[n];if(fr(i))t.addValue(n,i);else if(fr(c))t.addValue(n,Bu(i,{owner:t}));else if(c!==i)if(t.hasValue(n)){const d=t.getValue(n);d.liveStyle===!0?d.jump(i):d.hasAnimated||d.set(i)}else{const d=t.getStaticValue(n);t.addValue(n,Bu(d!==void 0?d:i,{owner:t}))}}for(const n in a)s[n]===void 0&&t.removeValue(n);return s}const CS=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class n${scrapeMotionValuesFromProps(s,a,n){return{}}constructor({parent:s,props:a,presenceContext:n,reducedMotionConfig:i,blockInitialAnimation:c,visualState:d},h={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=iN,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const y=Ir.now();this.renderScheduledAt<y&&(this.renderScheduledAt=y,Va.render(this.render,!1,!0))};const{latestValues:f,renderState:g}=d;this.latestValues=f,this.baseTarget={...f},this.initialValues=a.initial?{...f}:{},this.renderState=g,this.parent=s,this.props=a,this.presenceContext=n,this.depth=s?s.depth+1:0,this.reducedMotionConfig=i,this.options=h,this.blockInitialAnimation=!!c,this.isControllingVariants=ig(a),this.isVariantNode=TE(a),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(s&&s.current);const{willChange:p,...v}=this.scrapeMotionValuesFromProps(a,{},this);for(const y in v){const _=v[y];f[y]!==void 0&&fr(_)&&_.set(f[y])}}mount(s){this.current=s,s$.set(s,this),this.projection&&!this.projection.instance&&this.projection.mount(s),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((a,n)=>this.bindToMotionValue(n,a)),VE.current||t$(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:My.current,this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),ic(this.notifyUpdate),ic(this.render),this.valueSubscriptions.forEach(s=>s()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const s in this.events)this.events[s].clear();for(const s in this.features){const a=this.features[s];a&&(a.unmount(),a.isMounted=!1)}this.current=null}addChild(s){this.children.add(s),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(s)}removeChild(s){this.children.delete(s),this.enteringChildren&&this.enteringChildren.delete(s)}bindToMotionValue(s,a){this.valueSubscriptions.has(s)&&this.valueSubscriptions.get(s)();const n=th.has(s);n&&this.onBindTransform&&this.onBindTransform();const i=a.on("change",d=>{this.latestValues[s]=d,this.props.onUpdate&&Va.preRender(this.notifyUpdate),n&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let c;window.MotionCheckAppearSync&&(c=window.MotionCheckAppearSync(this,s,a)),this.valueSubscriptions.set(s,()=>{i(),c&&c(),a.owner&&a.stop()})}sortNodePosition(s){return!this.current||!this.sortInstanceNodePosition||this.type!==s.type?0:this.sortInstanceNodePosition(this.current,s.current)}updateFeatures(){let s="animation";for(s in zu){const a=zu[s];if(!a)continue;const{isEnabled:n,Feature:i}=a;if(!this.features[s]&&i&&n(this.props)&&(this.features[s]=new i(this)),this.features[s]){const c=this.features[s];c.isMounted?c.update():(c.mount(),c.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):un()}getStaticValue(s){return this.latestValues[s]}setStaticValue(s,a){this.latestValues[s]=a}update(s,a){(s.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=s,this.prevPresenceContext=this.presenceContext,this.presenceContext=a;for(let n=0;n<CS.length;n++){const i=CS[n];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const c="on"+i,d=s[c];d&&(this.propEventSubscriptions[i]=this.on(i,d))}this.prevMotionValues=a$(this,this.scrapeMotionValuesFromProps(s,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(s){return this.props.variants?this.props.variants[s]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(s){const a=this.getClosestVariantNode();if(a)return a.variantChildren&&a.variantChildren.add(s),()=>a.variantChildren.delete(s)}addValue(s,a){const n=this.values.get(s);a!==n&&(n&&this.removeValue(s),this.bindToMotionValue(s,a),this.values.set(s,a),this.latestValues[s]=a.get())}removeValue(s){this.values.delete(s);const a=this.valueSubscriptions.get(s);a&&(a(),this.valueSubscriptions.delete(s)),delete this.latestValues[s],this.removeValueFromRenderState(s,this.renderState)}hasValue(s){return this.values.has(s)}getValue(s,a){if(this.props.values&&this.props.values[s])return this.props.values[s];let n=this.values.get(s);return n===void 0&&a!==void 0&&(n=Bu(a===null?void 0:a,{owner:this}),this.addValue(s,n)),n}readValue(s,a){let n=this.latestValues[s]!==void 0||!this.current?this.latestValues[s]:this.getBaseTargetFromProps(this.props,s)??this.readValueFromInstance(this.current,s,this.options);return n!=null&&(typeof n=="string"&&(Ok(n)||Rk(n))?n=parseFloat(n):!hH(n)&&oc.test(a)&&(n=pE(s,a)),this.setBaseTarget(s,fr(n)?n.get():n)),fr(n)?n.get():n}setBaseTarget(s,a){this.baseTarget[s]=a}getBaseTarget(s){const{initial:a}=this.props;let n;if(typeof a=="string"||typeof a=="object"){const c=gN(this.props,a,this.presenceContext?.custom);c&&(n=c[s])}if(a&&n!==void 0)return n;const i=this.getBaseTargetFromProps(this.props,s);return i!==void 0&&!fr(i)?i:this.initialValues[s]!==void 0&&n===void 0?void 0:this.baseTarget[s]}on(s,a){return this.events[s]||(this.events[s]=new Kj),this.events[s].add(a)}notify(s,...a){this.events[s]&&this.events[s].notify(...a)}scheduleRenderMicrotask(){cN.render(this.render)}}class HE extends n${constructor(){super(...arguments),this.KeyframeResolver=eH}sortInstanceNodePosition(s,a){return s.compareDocumentPosition(a)&2?1:-1}getBaseTargetFromProps(s,a){return s.style?s.style[a]:void 0}removeValueFromRenderState(s,{vars:a,style:n}){delete a[s],delete n[s]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:s}=this.props;fr(s)&&(this.childSubscription=s.on("change",a=>{this.current&&(this.current.textContent=`${a}`)}))}}function $E(t,{style:s,vars:a},n,i){const c=t.style;let d;for(d in s)c[d]=s[d];i?.applyProjectionStyles(c,n);for(d in a)c.setProperty(d,a[d])}function r$(t){return window.getComputedStyle(t)}class i$ extends HE{constructor(){super(...arguments),this.type="html",this.renderInstance=$E}readValueFromInstance(s,a){if(th.has(a))return this.projection?.isProjecting?_y(a):yV(s,a);{const n=r$(s),i=(Xj(a)?n.getPropertyValue(a):n[a])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(s,{transformPagePoint:a}){return UE(s,a)}build(s,a,n){fN(s,a,n.transformTemplate)}scrapeMotionValuesFromProps(s,a,n){return vN(s,a,n)}}const WE=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function o$(t,s,a,n){$E(t,s,void 0,n);for(const i in s.attrs)t.setAttribute(WE.has(i)?i:yN(i),s.attrs[i])}class l$ extends HE{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=un}getBaseTargetFromProps(s,a){return s[a]}readValueFromInstance(s,a){if(th.has(a)){const n=xE(a);return n&&n.default||0}return a=WE.has(a)?a:yN(a),s.getAttribute(a)}scrapeMotionValuesFromProps(s,a,n){return ME(s,a,n)}build(s,a,n){AE(s,a,this.isSVGTag,n.transformTemplate,n.style)}renderInstance(s,a,n,i){o$(s,a,n,i)}mount(s){this.isSVGTag=PE(s.tagName),super.mount(s)}}const c$=(t,s)=>pN(t)?new l$(s):new i$(s,{allowProjection:t!==N.Fragment});function Du(t,s,a){const n=t.getProps();return gN(n,s,a!==void 0?a:n.custom,t)}const Ry=t=>Array.isArray(t);function d$(t,s,a){t.hasValue(s)?t.getValue(s).set(a):t.addValue(s,Bu(a))}function u$(t){return Ry(t)?t[t.length-1]||0:t}function h$(t,s){const a=Du(t,s);let{transitionEnd:n={},transition:i={},...c}=a||{};c={...c,...n};for(const d in c){const h=u$(c[d]);d$(t,d,h)}}function m$(t){return!!(fr(t)&&t.add)}function Ly(t,s){const a=t.getValue("willChange");if(m$(a))return a.add(s);if(!a&&il.WillChange){const n=new il.WillChange("auto");t.addValue("willChange",n),n.add(s)}}function GE(t){return t.props[RE]}const f$=t=>t!==null;function x$(t,{repeat:s,repeatType:a="loop"},n){const i=t.filter(f$),c=s&&a!=="loop"&&s%2===1?0:i.length-1;return i[c]}const p$={type:"spring",stiffness:500,damping:25,restSpeed:10},g$=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),v$={type:"keyframes",duration:.8},y$={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},j$=(t,{keyframes:s})=>s.length>2?v$:th.has(t)?t.startsWith("scale")?g$(s[1]):p$:y$;function N$({when:t,delay:s,delayChildren:a,staggerChildren:n,staggerDirection:i,repeat:c,repeatType:d,repeatDelay:h,from:f,elapsed:g,...p}){return!!Object.keys(p).length}const jN=(t,s,a,n={},i,c)=>d=>{const h=oN(n,t)||{},f=h.delay||n.delay||0;let{elapsed:g=0}=n;g=g-bo(f);const p={keyframes:Array.isArray(a)?a:[null,a],ease:"easeOut",velocity:s.getVelocity(),...h,delay:-g,onUpdate:y=>{s.set(y),h.onUpdate&&h.onUpdate(y)},onComplete:()=>{d(),h.onComplete&&h.onComplete()},name:t,motionValue:s,element:c?void 0:i};N$(h)||Object.assign(p,j$(t,p)),p.duration&&(p.duration=bo(p.duration)),p.repeatDelay&&(p.repeatDelay=bo(p.repeatDelay)),p.from!==void 0&&(p.keyframes[0]=p.from);let v=!1;if((p.type===!1||p.duration===0&&!p.repeatDelay)&&(Ay(p),p.delay===0&&(v=!0)),(il.instantAnimations||il.skipAnimations)&&(v=!0,Ay(p),p.delay=0),p.allowFlatten=!h.type&&!h.ease,v&&!c&&s.get()!==void 0){const y=x$(p.keyframes,h);if(y!==void 0){Va.update(()=>{p.onUpdate(y),p.onComplete()});return}}return h.isSync?new rN(p):new VV(p)};function w$({protectedKeys:t,needsAnimating:s},a){const n=t.hasOwnProperty(a)&&s[a]!==!0;return s[a]=!1,n}function qE(t,s,{delay:a=0,transitionOverride:n,type:i}={}){let{transition:c=t.getDefaultTransition(),transitionEnd:d,...h}=s;n&&(c=n);const f=[],g=i&&t.animationState&&t.animationState.getState()[i];for(const p in h){const v=t.getValue(p,t.latestValues[p]??null),y=h[p];if(y===void 0||g&&w$(g,p))continue;const _={delay:a,...oN(c||{},p)},S=v.get();if(S!==void 0&&!v.isAnimating&&!Array.isArray(y)&&y===S&&!_.velocity)continue;let b=!1;if(window.MotionHandoffAnimation){const E=GE(t);if(E){const A=window.MotionHandoffAnimation(E,p,Va);A!==null&&(_.startTime=A,b=!0)}}Ly(t,p),v.start(jN(p,v,y,t.shouldReduceMotion&&hE.has(p)?{type:!1}:_,t,b));const T=v.animation;T&&f.push(T)}return d&&Promise.all(f).then(()=>{Va.update(()=>{d&&h$(t,d)})}),f}function KE(t,s,a,n=0,i=1){const c=Array.from(t).sort((g,p)=>g.sortNodePosition(p)).indexOf(s),d=t.size,h=(d-1)*n;return typeof a=="function"?a(c,d):i===1?c*n:h-c*n}function Iy(t,s,a={}){const n=Du(t,s,a.type==="exit"?t.presenceContext?.custom:void 0);let{transition:i=t.getDefaultTransition()||{}}=n||{};a.transitionOverride&&(i=a.transitionOverride);const c=n?()=>Promise.all(qE(t,n,a)):()=>Promise.resolve(),d=t.variantChildren&&t.variantChildren.size?(f=0)=>{const{delayChildren:g=0,staggerChildren:p,staggerDirection:v}=i;return b$(t,s,f,g,p,v,a)}:()=>Promise.resolve(),{when:h}=i;if(h){const[f,g]=h==="beforeChildren"?[c,d]:[d,c];return f().then(()=>g())}else return Promise.all([c(),d(a.delay)])}function b$(t,s,a=0,n=0,i=0,c=1,d){const h=[];for(const f of t.variantChildren)f.notify("AnimationStart",s),h.push(Iy(f,s,{...d,delay:a+(typeof n=="function"?0:n)+KE(t.variantChildren,f,n,i,c)}).then(()=>f.notify("AnimationComplete",s)));return Promise.all(h)}function S$(t,s,a={}){t.notify("AnimationStart",s);let n;if(Array.isArray(s)){const i=s.map(c=>Iy(t,c,a));n=Promise.all(i)}else if(typeof s=="string")n=Iy(t,s,a);else{const i=typeof s=="function"?Du(t,s,a.custom):s;n=Promise.all(qE(t,i,a))}return n.then(()=>{t.notify("AnimationComplete",s)})}function YE(t,s){if(!Array.isArray(s))return!1;const a=s.length;if(a!==t.length)return!1;for(let n=0;n<a;n++)if(s[n]!==t[n])return!1;return!0}const _$=mN.length;function ZE(t){if(!t)return;if(!t.isControllingVariants){const a=t.parent?ZE(t.parent)||{}:{};return t.props.initial!==void 0&&(a.initial=t.props.initial),a}const s={};for(let a=0;a<_$;a++){const n=mN[a],i=t.props[n];(Vm(i)||i===!1)&&(s[n]=i)}return s}const C$=[...hN].reverse(),T$=hN.length;function k$(t){return s=>Promise.all(s.map(({animation:a,options:n})=>S$(t,a,n)))}function E$(t){let s=k$(t),a=TS(),n=!0;const i=f=>(g,p)=>{const v=Du(t,p,f==="exit"?t.presenceContext?.custom:void 0);if(v){const{transition:y,transitionEnd:_,...S}=v;g={...g,...S,..._}}return g};function c(f){s=f(t)}function d(f){const{props:g}=t,p=ZE(t.parent)||{},v=[],y=new Set;let _={},S=1/0;for(let T=0;T<T$;T++){const E=C$[T],A=a[E],O=g[E]!==void 0?g[E]:p[E],Q=Vm(O),q=E===f?A.isActive:null;q===!1&&(S=T);let U=O===p[E]&&O!==g[E]&&Q;if(U&&n&&t.manuallyAnimateOnMount&&(U=!1),A.protectedKeys={..._},!A.isActive&&q===null||!O&&!A.prevProp||rg(O)||typeof O=="boolean")continue;const D=A$(A.prevProp,O);let M=D||E===f&&A.isActive&&!U&&Q||T>S&&Q,P=!1;const G=Array.isArray(O)?O:[O];let K=G.reduce(i(E),{});q===!1&&(K={});const{prevResolvedValues:z={}}=A,J={...z,...K},W=ae=>{M=!0,y.has(ae)&&(P=!0,y.delete(ae)),A.needsAnimating[ae]=!0;const ge=t.getValue(ae);ge&&(ge.liveStyle=!1)};for(const ae in J){const ge=K[ae],Z=z[ae];if(_.hasOwnProperty(ae))continue;let ee=!1;Ry(ge)&&Ry(Z)?ee=!YE(ge,Z):ee=ge!==Z,ee?ge!=null?W(ae):y.add(ae):ge!==void 0&&y.has(ae)?W(ae):A.protectedKeys[ae]=!0}A.prevProp=O,A.prevResolvedValues=K,A.isActive&&(_={..._,...K}),n&&t.blockInitialAnimation&&(M=!1);const he=U&&D;M&&(!he||P)&&v.push(...G.map(ae=>{const ge={type:E};if(typeof ae=="string"&&n&&!he&&t.manuallyAnimateOnMount&&t.parent){const{parent:Z}=t,ee=Du(Z,ae);if(Z.enteringChildren&&ee){const{delayChildren:te}=ee.transition||{};ge.delay=KE(Z.enteringChildren,t,te)}}return{animation:ae,options:ge}}))}if(y.size){const T={};if(typeof g.initial!="boolean"){const E=Du(t,Array.isArray(g.initial)?g.initial[0]:g.initial);E&&E.transition&&(T.transition=E.transition)}y.forEach(E=>{const A=t.getBaseTarget(E),O=t.getValue(E);O&&(O.liveStyle=!0),T[E]=A??null}),v.push({animation:T})}let b=!!v.length;return n&&(g.initial===!1||g.initial===g.animate)&&!t.manuallyAnimateOnMount&&(b=!1),n=!1,b?s(v):Promise.resolve()}function h(f,g){if(a[f].isActive===g)return Promise.resolve();t.variantChildren?.forEach(v=>v.animationState?.setActive(f,g)),a[f].isActive=g;const p=d(f);for(const v in a)a[v].protectedKeys={};return p}return{animateChanges:d,setActive:h,setAnimateFunction:c,getState:()=>a,reset:()=>{a=TS()}}}function A$(t,s){return typeof s=="string"?s!==t:Array.isArray(s)?!YE(s,t):!1}function qc(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function TS(){return{animate:qc(!0),whileInView:qc(),whileHover:qc(),whileTap:qc(),whileDrag:qc(),whileFocus:qc(),exit:qc()}}class hc{constructor(s){this.isMounted=!1,this.node=s}update(){}}class D$ extends hc{constructor(s){super(s),s.animationState||(s.animationState=E$(s))}updateAnimationControlsSubscription(){const{animate:s}=this.node.getProps();rg(s)&&(this.unmountControls=s.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:s}=this.node.getProps(),{animate:a}=this.node.prevProps||{};s!==a&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let P$=0;class O$ extends hc{constructor(){super(...arguments),this.id=P$++}update(){if(!this.node.presenceContext)return;const{isPresent:s,onExitComplete:a}=this.node.presenceContext,{isPresent:n}=this.node.prevPresenceContext||{};if(!this.node.animationState||s===n)return;const i=this.node.animationState.setActive("exit",!s);a&&!s&&i.then(()=>{a(this.id)})}mount(){const{register:s,onExitComplete:a}=this.node.presenceContext||{};a&&a(this.id),s&&(this.unmount=s(this.id))}unmount(){}}const M$={animation:{Feature:D$},exit:{Feature:O$}};function $m(t,s,a,n={passive:!0}){return t.addEventListener(s,a,n),()=>t.removeEventListener(s,a)}function of(t){return{point:{x:t.pageX,y:t.pageY}}}const R$=t=>s=>dN(s)&&t(s,of(s));function Nm(t,s,a,n){return $m(t,s,R$(a),n)}const XE=1e-4,L$=1-XE,I$=1+XE,QE=.01,F$=0-QE,B$=0+QE;function br(t){return t.max-t.min}function z$(t,s,a){return Math.abs(t-s)<=a}function kS(t,s,a,n=.5){t.origin=n,t.originPoint=qa(s.min,s.max,t.origin),t.scale=br(a)/br(s),t.translate=qa(a.min,a.max,t.origin)-t.originPoint,(t.scale>=L$&&t.scale<=I$||isNaN(t.scale))&&(t.scale=1),(t.translate>=F$&&t.translate<=B$||isNaN(t.translate))&&(t.translate=0)}function wm(t,s,a,n){kS(t.x,s.x,a.x,n?n.originX:void 0),kS(t.y,s.y,a.y,n?n.originY:void 0)}function ES(t,s,a){t.min=a.min+s.min,t.max=t.min+br(s)}function U$(t,s,a){ES(t.x,s.x,a.x),ES(t.y,s.y,a.y)}function AS(t,s,a){t.min=s.min-a.min,t.max=t.min+br(s)}function bm(t,s,a){AS(t.x,s.x,a.x),AS(t.y,s.y,a.y)}function yi(t){return[t("x"),t("y")]}const JE=({current:t})=>t?t.ownerDocument.defaultView:null,DS=(t,s)=>Math.abs(t-s);function V$(t,s){const a=DS(t.x,s.x),n=DS(t.y,s.y);return Math.sqrt(a**2+n**2)}class eA{constructor(s,a,{transformPagePoint:n,contextWindow:i=window,dragSnapToOrigin:c=!1,distanceThreshold:d=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const y=Dv(this.lastMoveEventInfo,this.history),_=this.startEvent!==null,S=V$(y.offset,{x:0,y:0})>=this.distanceThreshold;if(!_&&!S)return;const{point:b}=y,{timestamp:T}=Qn;this.history.push({...b,timestamp:T});const{onStart:E,onMove:A}=this.handlers;_||(E&&E(this.lastMoveEvent,y),this.startEvent=this.lastMoveEvent),A&&A(this.lastMoveEvent,y)},this.handlePointerMove=(y,_)=>{this.lastMoveEvent=y,this.lastMoveEventInfo=Av(_,this.transformPagePoint),Va.update(this.updatePoint,!0)},this.handlePointerUp=(y,_)=>{this.end();const{onEnd:S,onSessionEnd:b,resumeAnimation:T}=this.handlers;if(this.dragSnapToOrigin&&T&&T(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const E=Dv(y.type==="pointercancel"?this.lastMoveEventInfo:Av(_,this.transformPagePoint),this.history);this.startEvent&&S&&S(y,E),b&&b(y,E)},!dN(s))return;this.dragSnapToOrigin=c,this.handlers=a,this.transformPagePoint=n,this.distanceThreshold=d,this.contextWindow=i||window;const h=of(s),f=Av(h,this.transformPagePoint),{point:g}=f,{timestamp:p}=Qn;this.history=[{...g,timestamp:p}];const{onSessionStart:v}=a;v&&v(s,Dv(f,this.history)),this.removeListeners=af(Nm(this.contextWindow,"pointermove",this.handlePointerMove),Nm(this.contextWindow,"pointerup",this.handlePointerUp),Nm(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(s){this.handlers=s}end(){this.removeListeners&&this.removeListeners(),ic(this.updatePoint)}}function Av(t,s){return s?{point:s(t.point)}:t}function PS(t,s){return{x:t.x-s.x,y:t.y-s.y}}function Dv({point:t},s){return{point:t,delta:PS(t,tA(s)),offset:PS(t,H$(s)),velocity:$$(s,.1)}}function H$(t){return t[0]}function tA(t){return t[t.length-1]}function $$(t,s){if(t.length<2)return{x:0,y:0};let a=t.length-1,n=null;const i=tA(t);for(;a>=0&&(n=t[a],!(i.timestamp-n.timestamp>bo(s)));)a--;if(!n)return{x:0,y:0};const c=Si(i.timestamp-n.timestamp);if(c===0)return{x:0,y:0};const d={x:(i.x-n.x)/c,y:(i.y-n.y)/c};return d.x===1/0&&(d.x=0),d.y===1/0&&(d.y=0),d}function W$(t,{min:s,max:a},n){return s!==void 0&&t<s?t=n?qa(s,t,n.min):Math.max(t,s):a!==void 0&&t>a&&(t=n?qa(a,t,n.max):Math.min(t,a)),t}function OS(t,s,a){return{min:s!==void 0?t.min+s:void 0,max:a!==void 0?t.max+a-(t.max-t.min):void 0}}function G$(t,{top:s,left:a,bottom:n,right:i}){return{x:OS(t.x,a,i),y:OS(t.y,s,n)}}function MS(t,s){let a=s.min-t.min,n=s.max-t.max;return s.max-s.min<t.max-t.min&&([a,n]=[n,a]),{min:a,max:n}}function q$(t,s){return{x:MS(t.x,s.x),y:MS(t.y,s.y)}}function K$(t,s){let a=.5;const n=br(t),i=br(s);return i>n?a=Bm(s.min,s.max-n,t.min):n>i&&(a=Bm(t.min,t.max-i,s.min)),rl(0,1,a)}function Y$(t,s){const a={};return s.min!==void 0&&(a.min=s.min-t.min),s.max!==void 0&&(a.max=s.max-t.min),a}const Fy=.35;function Z$(t=Fy){return t===!1?t=0:t===!0&&(t=Fy),{x:RS(t,"left","right"),y:RS(t,"top","bottom")}}function RS(t,s,a){return{min:LS(t,s),max:LS(t,a)}}function LS(t,s){return typeof t=="number"?t:t[s]||0}const X$=new WeakMap;class Q${constructor(s){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=un(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=s}start(s,{snapToCursor:a=!1,distanceThreshold:n}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const c=v=>{const{dragSnapToOrigin:y}=this.getProps();y?this.pauseAnimation():this.stopAnimation(),a&&this.snapToCursor(of(v).point)},d=(v,y)=>{const{drag:_,dragPropagation:S,onDragStart:b}=this.getProps();if(_&&!S&&(this.openDragLock&&this.openDragLock(),this.openDragLock=nH(_),!this.openDragLock))return;this.latestPointerEvent=v,this.latestPanInfo=y,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),yi(E=>{let A=this.getAxisMotionValue(E).get()||0;if(So.test(A)){const{projection:O}=this.visualElement;if(O&&O.layout){const Q=O.layout.layoutBox[E];Q&&(A=br(Q)*(parseFloat(A)/100))}}this.originPoint[E]=A}),b&&Va.postRender(()=>b(v,y)),Ly(this.visualElement,"transform");const{animationState:T}=this.visualElement;T&&T.setActive("whileDrag",!0)},h=(v,y)=>{this.latestPointerEvent=v,this.latestPanInfo=y;const{dragPropagation:_,dragDirectionLock:S,onDirectionLock:b,onDrag:T}=this.getProps();if(!_&&!this.openDragLock)return;const{offset:E}=y;if(S&&this.currentDirection===null){this.currentDirection=J$(E),this.currentDirection!==null&&b&&b(this.currentDirection);return}this.updateAxis("x",y.point,E),this.updateAxis("y",y.point,E),this.visualElement.render(),T&&T(v,y)},f=(v,y)=>{this.latestPointerEvent=v,this.latestPanInfo=y,this.stop(v,y),this.latestPointerEvent=null,this.latestPanInfo=null},g=()=>yi(v=>this.getAnimationState(v)==="paused"&&this.getAxisMotionValue(v).animation?.play()),{dragSnapToOrigin:p}=this.getProps();this.panSession=new eA(s,{onSessionStart:c,onStart:d,onMove:h,onSessionEnd:f,resumeAnimation:g},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:p,distanceThreshold:n,contextWindow:JE(this.visualElement)})}stop(s,a){const n=s||this.latestPointerEvent,i=a||this.latestPanInfo,c=this.isDragging;if(this.cancel(),!c||!i||!n)return;const{velocity:d}=i;this.startAnimation(d);const{onDragEnd:h}=this.getProps();h&&Va.postRender(()=>h(n,i))}cancel(){this.isDragging=!1;const{projection:s,animationState:a}=this.visualElement;s&&(s.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:n}=this.getProps();!n&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),a&&a.setActive("whileDrag",!1)}updateAxis(s,a,n){const{drag:i}=this.getProps();if(!n||!Wx(s,i,this.currentDirection))return;const c=this.getAxisMotionValue(s);let d=this.originPoint[s]+n[s];this.constraints&&this.constraints[s]&&(d=W$(d,this.constraints[s],this.elastic[s])),c.set(d)}resolveConstraints(){const{dragConstraints:s,dragElastic:a}=this.getProps(),n=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,i=this.constraints;s&&yu(s)?this.constraints||(this.constraints=this.resolveRefConstraints()):s&&n?this.constraints=G$(n.layoutBox,s):this.constraints=!1,this.elastic=Z$(a),i!==this.constraints&&n&&this.constraints&&!this.hasMutatedConstraints&&yi(c=>{this.constraints!==!1&&this.getAxisMotionValue(c)&&(this.constraints[c]=Y$(n.layoutBox[c],this.constraints[c]))})}resolveRefConstraints(){const{dragConstraints:s,onMeasureDragConstraints:a}=this.getProps();if(!s||!yu(s))return!1;const n=s.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const c=e$(n,i.root,this.visualElement.getTransformPagePoint());let d=q$(i.layout.layoutBox,c);if(a){const h=a(XH(d));this.hasMutatedConstraints=!!h,h&&(d=FE(h))}return d}startAnimation(s){const{drag:a,dragMomentum:n,dragElastic:i,dragTransition:c,dragSnapToOrigin:d,onDragTransitionEnd:h}=this.getProps(),f=this.constraints||{},g=yi(p=>{if(!Wx(p,a,this.currentDirection))return;let v=f&&f[p]||{};d&&(v={min:0,max:0});const y=i?200:1e6,_=i?40:1e7,S={type:"inertia",velocity:n?s[p]:0,bounceStiffness:y,bounceDamping:_,timeConstant:750,restDelta:1,restSpeed:10,...c,...v};return this.startAxisValueAnimation(p,S)});return Promise.all(g).then(h)}startAxisValueAnimation(s,a){const n=this.getAxisMotionValue(s);return Ly(this.visualElement,s),n.start(jN(s,n,0,a,this.visualElement,!1))}stopAnimation(){yi(s=>this.getAxisMotionValue(s).stop())}pauseAnimation(){yi(s=>this.getAxisMotionValue(s).animation?.pause())}getAnimationState(s){return this.getAxisMotionValue(s).animation?.state}getAxisMotionValue(s){const a=`_drag${s.toUpperCase()}`,n=this.visualElement.getProps(),i=n[a];return i||this.visualElement.getValue(s,(n.initial?n.initial[s]:void 0)||0)}snapToCursor(s){yi(a=>{const{drag:n}=this.getProps();if(!Wx(a,n,this.currentDirection))return;const{projection:i}=this.visualElement,c=this.getAxisMotionValue(a);if(i&&i.layout){const{min:d,max:h}=i.layout.layoutBox[a];c.set(s[a]-qa(d,h,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:s,dragConstraints:a}=this.getProps(),{projection:n}=this.visualElement;if(!yu(a)||!n||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};yi(d=>{const h=this.getAxisMotionValue(d);if(h&&this.constraints!==!1){const f=h.get();i[d]=K$({min:f,max:f},this.constraints[d])}});const{transformTemplate:c}=this.visualElement.getProps();this.visualElement.current.style.transform=c?c({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),yi(d=>{if(!Wx(d,s,null))return;const h=this.getAxisMotionValue(d),{min:f,max:g}=this.constraints[d];h.set(qa(f,g,i[d]))})}addListeners(){if(!this.visualElement.current)return;X$.set(this.visualElement,this);const s=this.visualElement.current,a=Nm(s,"pointerdown",f=>{const{drag:g,dragListener:p=!0}=this.getProps();g&&p&&this.start(f)}),n=()=>{const{dragConstraints:f}=this.getProps();yu(f)&&f.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,c=i.addEventListener("measure",n);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),Va.read(n);const d=$m(window,"resize",()=>this.scalePositionWithinConstraints()),h=i.addEventListener("didUpdate",(({delta:f,hasLayoutChanged:g})=>{this.isDragging&&g&&(yi(p=>{const v=this.getAxisMotionValue(p);v&&(this.originPoint[p]+=f[p].translate,v.set(v.get()+f[p].translate))}),this.visualElement.render())}));return()=>{d(),a(),c(),h&&h()}}getProps(){const s=this.visualElement.getProps(),{drag:a=!1,dragDirectionLock:n=!1,dragPropagation:i=!1,dragConstraints:c=!1,dragElastic:d=Fy,dragMomentum:h=!0}=s;return{...s,drag:a,dragDirectionLock:n,dragPropagation:i,dragConstraints:c,dragElastic:d,dragMomentum:h}}}function Wx(t,s,a){return(s===!0||s===t)&&(a===null||a===t)}function J$(t,s=10){let a=null;return Math.abs(t.y)>s?a="y":Math.abs(t.x)>s&&(a="x"),a}class eW extends hc{constructor(s){super(s),this.removeGroupControls=_i,this.removeListeners=_i,this.controls=new Q$(s)}mount(){const{dragControls:s}=this.node.getProps();s&&(this.removeGroupControls=s.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||_i}unmount(){this.removeGroupControls(),this.removeListeners()}}const IS=t=>(s,a)=>{t&&Va.postRender(()=>t(s,a))};class tW extends hc{constructor(){super(...arguments),this.removePointerDownListener=_i}onPointerDown(s){this.session=new eA(s,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:JE(this.node)})}createPanHandlers(){const{onPanSessionStart:s,onPanStart:a,onPan:n,onPanEnd:i}=this.node.getProps();return{onSessionStart:IS(s),onStart:IS(a),onMove:n,onEnd:(c,d)=>{delete this.session,i&&Va.postRender(()=>i(c,d))}}}mount(){this.removePointerDownListener=Nm(this.node.current,"pointerdown",s=>this.onPointerDown(s))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const sp={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function FS(t,s){return s.max===s.min?0:t/(s.max-s.min)*100}const am={correct:(t,s)=>{if(!s.target)return t;if(typeof t=="string")if(ms.test(t))t=parseFloat(t);else return t;const a=FS(t,s.target.x),n=FS(t,s.target.y);return`${a}% ${n}%`}},sW={correct:(t,{treeScale:s,projectionDelta:a})=>{const n=t,i=oc.parse(t);if(i.length>5)return n;const c=oc.createTransformer(t),d=typeof i[0]!="number"?1:0,h=a.x.scale*s.x,f=a.y.scale*s.y;i[0+d]/=h,i[1+d]/=f;const g=qa(h,f,.5);return typeof i[2+d]=="number"&&(i[2+d]/=g),typeof i[3+d]=="number"&&(i[3+d]/=g),c(i)}};let Pv=!1;class aW extends N.Component{componentDidMount(){const{visualElement:s,layoutGroup:a,switchLayoutGroup:n,layoutId:i}=this.props,{projection:c}=s;_H(nW),c&&(a.group&&a.group.add(c),n&&n.register&&i&&n.register(c),Pv&&c.root.didUpdate(),c.addEventListener("animationComplete",()=>{this.safeToRemove()}),c.setOptions({...c.options,onExitComplete:()=>this.safeToRemove()})),sp.hasEverUpdated=!0}getSnapshotBeforeUpdate(s){const{layoutDependency:a,visualElement:n,drag:i,isPresent:c}=this.props,{projection:d}=n;return d&&(d.isPresent=c,Pv=!0,i||s.layoutDependency!==a||a===void 0||s.isPresent!==c?d.willUpdate():this.safeToRemove(),s.isPresent!==c&&(c?d.promote():d.relegate()||Va.postRender(()=>{const h=d.getStack();(!h||!h.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:s}=this.props.visualElement;s&&(s.root.didUpdate(),cN.postRender(()=>{!s.currentAnimation&&s.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:s,layoutGroup:a,switchLayoutGroup:n}=this.props,{projection:i}=s;Pv=!0,i&&(i.scheduleCheckAfterUnmount(),a&&a.group&&a.group.remove(i),n&&n.deregister&&n.deregister(i))}safeToRemove(){const{safeToRemove:s}=this.props;s&&s()}render(){return null}}function sA(t){const[s,a]=bE(),n=N.useContext(Uj);return e.jsx(aW,{...t,layoutGroup:n,switchLayoutGroup:N.useContext(LE),isPresent:s,safeToRemove:a})}const nW={borderRadius:{...am,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:am,borderTopRightRadius:am,borderBottomLeftRadius:am,borderBottomRightRadius:am,boxShadow:sW};function rW(t,s,a){const n=fr(t)?t:Bu(t);return n.start(jN("",n,s,a)),n.animation}const iW=(t,s)=>t.depth-s.depth;class oW{constructor(){this.children=[],this.isDirty=!1}add(s){$j(this.children,s),this.isDirty=!0}remove(s){Wj(this.children,s),this.isDirty=!0}forEach(s){this.isDirty&&this.children.sort(iW),this.isDirty=!1,this.children.forEach(s)}}function lW(t,s){const a=Ir.now(),n=({timestamp:i})=>{const c=i-a;c>=s&&(ic(n),t(c-s))};return Va.setup(n,!0),()=>ic(n)}const aA=["TopLeft","TopRight","BottomLeft","BottomRight"],cW=aA.length,BS=t=>typeof t=="string"?parseFloat(t):t,zS=t=>typeof t=="number"||ms.test(t);function dW(t,s,a,n,i,c){i?(t.opacity=qa(0,a.opacity??1,uW(n)),t.opacityExit=qa(s.opacity??1,0,hW(n))):c&&(t.opacity=qa(s.opacity??1,a.opacity??1,n));for(let d=0;d<cW;d++){const h=`border${aA[d]}Radius`;let f=US(s,h),g=US(a,h);if(f===void 0&&g===void 0)continue;f||(f=0),g||(g=0),f===0||g===0||zS(f)===zS(g)?(t[h]=Math.max(qa(BS(f),BS(g),n),0),(So.test(g)||So.test(f))&&(t[h]+="%")):t[h]=g}(s.rotate||a.rotate)&&(t.rotate=qa(s.rotate||0,a.rotate||0,n))}function US(t,s){return t[s]!==void 0?t[s]:t.borderRadius}const uW=nA(0,.5,Hk),hW=nA(.5,.95,_i);function nA(t,s,a){return n=>n<t?0:n>s?1:a(Bm(t,s,n))}function VS(t,s){t.min=s.min,t.max=s.max}function gi(t,s){VS(t.x,s.x),VS(t.y,s.y)}function HS(t,s){t.translate=s.translate,t.scale=s.scale,t.originPoint=s.originPoint,t.origin=s.origin}function $S(t,s,a,n,i){return t-=s,t=Dp(t,1/a,n),i!==void 0&&(t=Dp(t,1/i,n)),t}function mW(t,s=0,a=1,n=.5,i,c=t,d=t){if(So.test(s)&&(s=parseFloat(s),s=qa(d.min,d.max,s/100)-d.min),typeof s!="number")return;let h=qa(c.min,c.max,n);t===c&&(h-=s),t.min=$S(t.min,s,a,h,i),t.max=$S(t.max,s,a,h,i)}function WS(t,s,[a,n,i],c,d){mW(t,s[a],s[n],s[i],s.scale,c,d)}const fW=["x","scaleX","originX"],xW=["y","scaleY","originY"];function GS(t,s,a,n){WS(t.x,s,fW,a?a.x:void 0,n?n.x:void 0),WS(t.y,s,xW,a?a.y:void 0,n?n.y:void 0)}function qS(t){return t.translate===0&&t.scale===1}function rA(t){return qS(t.x)&&qS(t.y)}function KS(t,s){return t.min===s.min&&t.max===s.max}function pW(t,s){return KS(t.x,s.x)&&KS(t.y,s.y)}function YS(t,s){return Math.round(t.min)===Math.round(s.min)&&Math.round(t.max)===Math.round(s.max)}function iA(t,s){return YS(t.x,s.x)&&YS(t.y,s.y)}function ZS(t){return br(t.x)/br(t.y)}function XS(t,s){return t.translate===s.translate&&t.scale===s.scale&&t.originPoint===s.originPoint}class gW{constructor(){this.members=[]}add(s){$j(this.members,s),s.scheduleRender()}remove(s){if(Wj(this.members,s),s===this.prevLead&&(this.prevLead=void 0),s===this.lead){const a=this.members[this.members.length-1];a&&this.promote(a)}}relegate(s){const a=this.members.findIndex(i=>s===i);if(a===0)return!1;let n;for(let i=a;i>=0;i--){const c=this.members[i];if(c.isPresent!==!1){n=c;break}}return n?(this.promote(n),!0):!1}promote(s,a){const n=this.lead;if(s!==n&&(this.prevLead=n,this.lead=s,s.show(),n)){n.instance&&n.scheduleRender(),s.scheduleRender(),s.resumeFrom=n,a&&(s.resumeFrom.preserveOpacity=!0),n.snapshot&&(s.snapshot=n.snapshot,s.snapshot.latestValues=n.animationValues||n.latestValues),s.root&&s.root.isUpdating&&(s.isLayoutDirty=!0);const{crossfade:i}=s.options;i===!1&&n.hide()}}exitAnimationComplete(){this.members.forEach(s=>{const{options:a,resumingFrom:n}=s;a.onExitComplete&&a.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()})}scheduleRender(){this.members.forEach(s=>{s.instance&&s.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function vW(t,s,a){let n="";const i=t.x.translate/s.x,c=t.y.translate/s.y,d=a?.z||0;if((i||c||d)&&(n=`translate3d(${i}px, ${c}px, ${d}px) `),(s.x!==1||s.y!==1)&&(n+=`scale(${1/s.x}, ${1/s.y}) `),a){const{transformPerspective:g,rotate:p,rotateX:v,rotateY:y,skewX:_,skewY:S}=a;g&&(n=`perspective(${g}px) ${n}`),p&&(n+=`rotate(${p}deg) `),v&&(n+=`rotateX(${v}deg) `),y&&(n+=`rotateY(${y}deg) `),_&&(n+=`skewX(${_}deg) `),S&&(n+=`skewY(${S}deg) `)}const h=t.x.scale*s.x,f=t.y.scale*s.y;return(h!==1||f!==1)&&(n+=`scale(${h}, ${f})`),n||"none"}const Ov=["","X","Y","Z"],yW=1e3;let jW=0;function Mv(t,s,a,n){const{latestValues:i}=s;i[t]&&(a[t]=i[t],s.setStaticValue(t,0),n&&(n[t]=0))}function oA(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:s}=t.options;if(!s)return;const a=GE(s);if(window.MotionHasOptimisedAnimation(a,"transform")){const{layout:i,layoutId:c}=t.options;window.MotionCancelOptimisedAnimation(a,"transform",Va,!(i||c))}const{parent:n}=t;n&&!n.hasCheckedOptimisedAppear&&oA(n)}function lA({attachResizeListener:t,defaultParent:s,measureScroll:a,checkIsScrollRoot:n,resetTransform:i}){return class{constructor(d={},h=s?.()){this.id=jW++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(bW),this.nodes.forEach(TW),this.nodes.forEach(kW),this.nodes.forEach(SW)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=d,this.root=h?h.root||h:this,this.path=h?[...h.path,h]:[],this.parent=h,this.depth=h?h.depth+1:0;for(let f=0;f<this.path.length;f++)this.path[f].shouldResetTransform=!0;this.root===this&&(this.nodes=new oW)}addEventListener(d,h){return this.eventHandlers.has(d)||this.eventHandlers.set(d,new Kj),this.eventHandlers.get(d).add(h)}notifyListeners(d,...h){const f=this.eventHandlers.get(d);f&&f.notify(...h)}hasListeners(d){return this.eventHandlers.has(d)}mount(d){if(this.instance)return;this.isSVG=wE(d)&&!dH(d),this.instance=d;const{layoutId:h,layout:f,visualElement:g}=this.options;if(g&&!g.current&&g.mount(d),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(f||h)&&(this.isLayoutDirty=!0),t){let p,v=0;const y=()=>this.root.updateBlockedByResize=!1;Va.read(()=>{v=window.innerWidth}),t(d,()=>{const _=window.innerWidth;_!==v&&(v=_,this.root.updateBlockedByResize=!0,p&&p(),p=lW(y,250),sp.hasAnimatedSinceResize&&(sp.hasAnimatedSinceResize=!1,this.nodes.forEach(e_)))})}h&&this.root.registerSharedNode(h,this),this.options.animate!==!1&&g&&(h||f)&&this.addEventListener("didUpdate",({delta:p,hasLayoutChanged:v,hasRelativeLayoutChanged:y,layout:_})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const S=this.options.transition||g.getDefaultTransition()||OW,{onLayoutAnimationStart:b,onLayoutAnimationComplete:T}=g.getProps(),E=!this.targetLayout||!iA(this.targetLayout,_),A=!v&&y;if(this.options.layoutRoot||this.resumeFrom||A||v&&(E||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const O={...oN(S,"layout"),onPlay:b,onComplete:T};(g.shouldReduceMotion||this.options.layoutRoot)&&(O.delay=0,O.type=!1),this.startAnimation(O),this.setAnimationOrigin(p,A)}else v||e_(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=_})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const d=this.getStack();d&&d.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),ic(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(EW),this.animationId++)}getTransformTemplate(){const{visualElement:d}=this.options;return d&&d.getProps().transformTemplate}willUpdate(d=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&oA(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let p=0;p<this.path.length;p++){const v=this.path[p];v.shouldResetTransform=!0,v.updateScroll("snapshot"),v.options.layoutRoot&&v.willUpdate(!1)}const{layoutId:h,layout:f}=this.options;if(h===void 0&&!f)return;const g=this.getTransformTemplate();this.prevTransformTemplateValue=g?g(this.latestValues,""):void 0,this.updateSnapshot(),d&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(QS);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(JS);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(CW),this.nodes.forEach(NW),this.nodes.forEach(wW)):this.nodes.forEach(JS),this.clearAllSnapshots();const h=Ir.now();Qn.delta=rl(0,1e3/60,h-Qn.timestamp),Qn.timestamp=h,Qn.isProcessing=!0,wv.update.process(Qn),wv.preRender.process(Qn),wv.render.process(Qn),Qn.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,cN.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(_W),this.sharedNodes.forEach(AW)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Va.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Va.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!br(this.snapshot.measuredBox.x)&&!br(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let f=0;f<this.path.length;f++)this.path[f].updateScroll();const d=this.layout;this.layout=this.measure(!1),this.layoutCorrected=un(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:h}=this.options;h&&h.notify("LayoutMeasure",this.layout.layoutBox,d?d.layoutBox:void 0)}updateScroll(d="measure"){let h=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===d&&(h=!1),h&&this.instance){const f=n(this.instance);this.scroll={animationId:this.root.animationId,phase:d,isRoot:f,offset:a(this.instance),wasRoot:this.scroll?this.scroll.isRoot:f}}}resetTransform(){if(!i)return;const d=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,h=this.projectionDelta&&!rA(this.projectionDelta),f=this.getTransformTemplate(),g=f?f(this.latestValues,""):void 0,p=g!==this.prevTransformTemplateValue;d&&this.instance&&(h||Yc(this.latestValues)||p)&&(i(this.instance,g),this.shouldResetTransform=!1,this.scheduleRender())}measure(d=!0){const h=this.measurePageBox();let f=this.removeElementScroll(h);return d&&(f=this.removeTransform(f)),MW(f),{animationId:this.root.animationId,measuredBox:h,layoutBox:f,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:d}=this.options;if(!d)return un();const h=d.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(RW))){const{scroll:g}=this.root;g&&(ju(h.x,g.offset.x),ju(h.y,g.offset.y))}return h}removeElementScroll(d){const h=un();if(gi(h,d),this.scroll?.wasRoot)return h;for(let f=0;f<this.path.length;f++){const g=this.path[f],{scroll:p,options:v}=g;g!==this.root&&p&&v.layoutScroll&&(p.wasRoot&&gi(h,d),ju(h.x,p.offset.x),ju(h.y,p.offset.y))}return h}applyTransform(d,h=!1){const f=un();gi(f,d);for(let g=0;g<this.path.length;g++){const p=this.path[g];!h&&p.options.layoutScroll&&p.scroll&&p!==p.root&&Nu(f,{x:-p.scroll.offset.x,y:-p.scroll.offset.y}),Yc(p.latestValues)&&Nu(f,p.latestValues)}return Yc(this.latestValues)&&Nu(f,this.latestValues),f}removeTransform(d){const h=un();gi(h,d);for(let f=0;f<this.path.length;f++){const g=this.path[f];if(!g.instance||!Yc(g.latestValues))continue;Py(g.latestValues)&&g.updateSnapshot();const p=un(),v=g.measurePageBox();gi(p,v),GS(h,g.latestValues,g.snapshot?g.snapshot.layoutBox:void 0,p)}return Yc(this.latestValues)&&GS(h,this.latestValues),h}setTargetDelta(d){this.targetDelta=d,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(d){this.options={...this.options,...d,crossfade:d.crossfade!==void 0?d.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Qn.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(d=!1){const h=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=h.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=h.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=h.isSharedProjectionDirty);const f=!!this.resumingFrom||this!==h;if(!(d||f&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:p,layoutId:v}=this.options;if(!(!this.layout||!(p||v))){if(this.resolvedRelativeTargetAt=Qn.timestamp,!this.targetDelta&&!this.relativeTarget){const y=this.getClosestProjectingParent();y&&y.layout&&this.animationProgress!==1?(this.relativeParent=y,this.forceRelativeParentToResolveTarget(),this.relativeTarget=un(),this.relativeTargetOrigin=un(),bm(this.relativeTargetOrigin,this.layout.layoutBox,y.layout.layoutBox),gi(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=un(),this.targetWithTransforms=un()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),U$(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):gi(this.target,this.layout.layoutBox),zE(this.target,this.targetDelta)):gi(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const y=this.getClosestProjectingParent();y&&!!y.resumingFrom==!!this.resumingFrom&&!y.options.layoutScroll&&y.target&&this.animationProgress!==1?(this.relativeParent=y,this.forceRelativeParentToResolveTarget(),this.relativeTarget=un(),this.relativeTargetOrigin=un(),bm(this.relativeTargetOrigin,this.target,y.target),gi(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||Py(this.parent.latestValues)||BE(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){const d=this.getLead(),h=!!this.resumingFrom||this!==d;let f=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(f=!1),h&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(f=!1),this.resolvedRelativeTargetAt===Qn.timestamp&&(f=!1),f)return;const{layout:g,layoutId:p}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(g||p))return;gi(this.layoutCorrected,this.layout.layoutBox);const v=this.treeScale.x,y=this.treeScale.y;JH(this.layoutCorrected,this.treeScale,this.path,h),d.layout&&!d.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(d.target=d.layout.layoutBox,d.targetWithTransforms=un());const{target:_}=d;if(!_){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(HS(this.prevProjectionDelta.x,this.projectionDelta.x),HS(this.prevProjectionDelta.y,this.projectionDelta.y)),wm(this.projectionDelta,this.layoutCorrected,_,this.latestValues),(this.treeScale.x!==v||this.treeScale.y!==y||!XS(this.projectionDelta.x,this.prevProjectionDelta.x)||!XS(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",_))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(d=!0){if(this.options.visualElement?.scheduleRender(),d){const h=this.getStack();h&&h.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=wu(),this.projectionDelta=wu(),this.projectionDeltaWithTransform=wu()}setAnimationOrigin(d,h=!1){const f=this.snapshot,g=f?f.latestValues:{},p={...this.latestValues},v=wu();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!h;const y=un(),_=f?f.source:void 0,S=this.layout?this.layout.source:void 0,b=_!==S,T=this.getStack(),E=!T||T.members.length<=1,A=!!(b&&!E&&this.options.crossfade===!0&&!this.path.some(PW));this.animationProgress=0;let O;this.mixTargetDelta=Q=>{const q=Q/1e3;t_(v.x,d.x,q),t_(v.y,d.y,q),this.setTargetDelta(v),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(bm(y,this.layout.layoutBox,this.relativeParent.layout.layoutBox),DW(this.relativeTarget,this.relativeTargetOrigin,y,q),O&&pW(this.relativeTarget,O)&&(this.isProjectionDirty=!1),O||(O=un()),gi(O,this.relativeTarget)),b&&(this.animationValues=p,dW(p,g,this.latestValues,q,A,E)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=q},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(d){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(ic(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Va.update(()=>{sp.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Bu(0)),this.currentAnimation=rW(this.motionValue,[0,1e3],{...d,velocity:0,isSync:!0,onUpdate:h=>{this.mixTargetDelta(h),d.onUpdate&&d.onUpdate(h)},onStop:()=>{},onComplete:()=>{d.onComplete&&d.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const d=this.getStack();d&&d.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(yW),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const d=this.getLead();let{targetWithTransforms:h,target:f,layout:g,latestValues:p}=d;if(!(!h||!f||!g)){if(this!==d&&this.layout&&g&&cA(this.options.animationType,this.layout.layoutBox,g.layoutBox)){f=this.target||un();const v=br(this.layout.layoutBox.x);f.x.min=d.target.x.min,f.x.max=f.x.min+v;const y=br(this.layout.layoutBox.y);f.y.min=d.target.y.min,f.y.max=f.y.min+y}gi(h,f),Nu(h,p),wm(this.projectionDeltaWithTransform,this.layoutCorrected,h,p)}}registerSharedNode(d,h){this.sharedNodes.has(d)||this.sharedNodes.set(d,new gW),this.sharedNodes.get(d).add(h);const g=h.options.initialPromotionConfig;h.promote({transition:g?g.transition:void 0,preserveFollowOpacity:g&&g.shouldPreserveFollowOpacity?g.shouldPreserveFollowOpacity(h):void 0})}isLead(){const d=this.getStack();return d?d.lead===this:!0}getLead(){const{layoutId:d}=this.options;return d?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:d}=this.options;return d?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:d}=this.options;if(d)return this.root.sharedNodes.get(d)}promote({needsReset:d,transition:h,preserveFollowOpacity:f}={}){const g=this.getStack();g&&g.promote(this,f),d&&(this.projectionDelta=void 0,this.needsReset=!0),h&&this.setOptions({transition:h})}relegate(){const d=this.getStack();return d?d.relegate(this):!1}resetSkewAndRotation(){const{visualElement:d}=this.options;if(!d)return;let h=!1;const{latestValues:f}=d;if((f.z||f.rotate||f.rotateX||f.rotateY||f.rotateZ||f.skewX||f.skewY)&&(h=!0),!h)return;const g={};f.z&&Mv("z",d,g,this.animationValues);for(let p=0;p<Ov.length;p++)Mv(`rotate${Ov[p]}`,d,g,this.animationValues),Mv(`skew${Ov[p]}`,d,g,this.animationValues);d.render();for(const p in g)d.setStaticValue(p,g[p]),this.animationValues&&(this.animationValues[p]=g[p]);d.scheduleRender()}applyProjectionStyles(d,h){if(!this.instance||this.isSVG)return;if(!this.isVisible){d.visibility="hidden";return}const f=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,d.visibility="",d.opacity="",d.pointerEvents=tp(h?.pointerEvents)||"",d.transform=f?f(this.latestValues,""):"none";return}const g=this.getLead();if(!this.projectionDelta||!this.layout||!g.target){this.options.layoutId&&(d.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,d.pointerEvents=tp(h?.pointerEvents)||""),this.hasProjected&&!Yc(this.latestValues)&&(d.transform=f?f({},""):"none",this.hasProjected=!1);return}d.visibility="";const p=g.animationValues||g.latestValues;this.applyTransformsToTarget();let v=vW(this.projectionDeltaWithTransform,this.treeScale,p);f&&(v=f(p,v)),d.transform=v;const{x:y,y:_}=this.projectionDelta;d.transformOrigin=`${y.origin*100}% ${_.origin*100}% 0`,g.animationValues?d.opacity=g===this?p.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:p.opacityExit:d.opacity=g===this?p.opacity!==void 0?p.opacity:"":p.opacityExit!==void 0?p.opacityExit:0;for(const S in Hm){if(p[S]===void 0)continue;const{correct:b,applyTo:T,isCSSVariable:E}=Hm[S],A=v==="none"?p[S]:b(p[S],g);if(T){const O=T.length;for(let Q=0;Q<O;Q++)d[T[Q]]=A}else E?this.options.visualElement.renderState.vars[S]=A:d[S]=A}this.options.layoutId&&(d.pointerEvents=g===this?tp(h?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(d=>d.currentAnimation?.stop()),this.root.nodes.forEach(QS),this.root.sharedNodes.clear()}}}function NW(t){t.updateLayout()}function wW(t){const s=t.resumeFrom?.snapshot||t.snapshot;if(t.isLead()&&t.layout&&s&&t.hasListeners("didUpdate")){const{layoutBox:a,measuredBox:n}=t.layout,{animationType:i}=t.options,c=s.source!==t.layout.source;i==="size"?yi(p=>{const v=c?s.measuredBox[p]:s.layoutBox[p],y=br(v);v.min=a[p].min,v.max=v.min+y}):cA(i,s.layoutBox,a)&&yi(p=>{const v=c?s.measuredBox[p]:s.layoutBox[p],y=br(a[p]);v.max=v.min+y,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[p].max=t.relativeTarget[p].min+y)});const d=wu();wm(d,a,s.layoutBox);const h=wu();c?wm(h,t.applyTransform(n,!0),s.measuredBox):wm(h,a,s.layoutBox);const f=!rA(d);let g=!1;if(!t.resumeFrom){const p=t.getClosestProjectingParent();if(p&&!p.resumeFrom){const{snapshot:v,layout:y}=p;if(v&&y){const _=un();bm(_,s.layoutBox,v.layoutBox);const S=un();bm(S,a,y.layoutBox),iA(_,S)||(g=!0),p.options.layoutRoot&&(t.relativeTarget=S,t.relativeTargetOrigin=_,t.relativeParent=p)}}}t.notifyListeners("didUpdate",{layout:a,snapshot:s,delta:h,layoutDelta:d,hasLayoutChanged:f,hasRelativeLayoutChanged:g})}else if(t.isLead()){const{onExitComplete:a}=t.options;a&&a()}t.options.transition=void 0}function bW(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function SW(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function _W(t){t.clearSnapshot()}function QS(t){t.clearMeasurements()}function JS(t){t.isLayoutDirty=!1}function CW(t){const{visualElement:s}=t.options;s&&s.getProps().onBeforeLayoutMeasure&&s.notify("BeforeLayoutMeasure"),t.resetTransform()}function e_(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function TW(t){t.resolveTargetDelta()}function kW(t){t.calcProjection()}function EW(t){t.resetSkewAndRotation()}function AW(t){t.removeLeadSnapshot()}function t_(t,s,a){t.translate=qa(s.translate,0,a),t.scale=qa(s.scale,1,a),t.origin=s.origin,t.originPoint=s.originPoint}function s_(t,s,a,n){t.min=qa(s.min,a.min,n),t.max=qa(s.max,a.max,n)}function DW(t,s,a,n){s_(t.x,s.x,a.x,n),s_(t.y,s.y,a.y,n)}function PW(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const OW={duration:.45,ease:[.4,0,.1,1]},a_=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),n_=a_("applewebkit/")&&!a_("chrome/")?Math.round:_i;function r_(t){t.min=n_(t.min),t.max=n_(t.max)}function MW(t){r_(t.x),r_(t.y)}function cA(t,s,a){return t==="position"||t==="preserve-aspect"&&!z$(ZS(s),ZS(a),.2)}function RW(t){return t!==t.root&&t.scroll?.wasRoot}const LW=lA({attachResizeListener:(t,s)=>$m(t,"resize",s),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Rv={current:void 0},dA=lA({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!Rv.current){const t=new LW({});t.mount(window),t.setOptions({layoutScroll:!0}),Rv.current=t}return Rv.current},resetTransform:(t,s)=>{t.style.transform=s!==void 0?s:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),IW={pan:{Feature:tW},drag:{Feature:eW,ProjectionNode:dA,MeasureLayout:sA}};function i_(t,s,a){const{props:n}=t;t.animationState&&n.whileHover&&t.animationState.setActive("whileHover",a==="Start");const i="onHover"+a,c=n[i];c&&Va.postRender(()=>c(s,of(s)))}class FW extends hc{mount(){const{current:s}=this.node;s&&(this.unmount=rH(s,(a,n)=>(i_(this.node,n,"Start"),i=>i_(this.node,i,"End"))))}unmount(){}}class BW extends hc{constructor(){super(...arguments),this.isActive=!1}onFocus(){let s=!1;try{s=this.node.current.matches(":focus-visible")}catch{s=!0}!s||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=af($m(this.node.current,"focus",()=>this.onFocus()),$m(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function o_(t,s,a){const{props:n}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&n.whileTap&&t.animationState.setActive("whileTap",a==="Start");const i="onTap"+(a==="End"?"":a),c=n[i];c&&Va.postRender(()=>c(s,of(s)))}class zW extends hc{mount(){const{current:s}=this.node;s&&(this.unmount=cH(s,(a,n)=>(o_(this.node,n,"Start"),(i,{success:c})=>o_(this.node,i,c?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const By=new WeakMap,Lv=new WeakMap,UW=t=>{const s=By.get(t.target);s&&s(t)},VW=t=>{t.forEach(UW)};function HW({root:t,...s}){const a=t||document;Lv.has(a)||Lv.set(a,{});const n=Lv.get(a),i=JSON.stringify(s);return n[i]||(n[i]=new IntersectionObserver(VW,{root:t,...s})),n[i]}function $W(t,s,a){const n=HW(s);return By.set(t,a),n.observe(t),()=>{By.delete(t),n.unobserve(t)}}const WW={some:0,all:1};class GW extends hc{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:s={}}=this.node.getProps(),{root:a,margin:n,amount:i="some",once:c}=s,d={root:a?a.current:void 0,rootMargin:n,threshold:typeof i=="number"?i:WW[i]},h=f=>{const{isIntersecting:g}=f;if(this.isInView===g||(this.isInView=g,c&&!g&&this.hasEnteredView))return;g&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",g);const{onViewportEnter:p,onViewportLeave:v}=this.node.getProps(),y=g?p:v;y&&y(f)};return $W(this.node.current,d,h)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:s,prevProps:a}=this.node;["amount","margin","root"].some(qW(s,a))&&this.startObserver()}unmount(){}}function qW({viewport:t={}},{viewport:s={}}={}){return a=>t[a]!==s[a]}const KW={inView:{Feature:GW},tap:{Feature:zW},focus:{Feature:BW},hover:{Feature:FW}},YW={layout:{ProjectionNode:dA,MeasureLayout:sA}},ZW={...M$,...KW,...IW,...YW},Nn=ZH(ZW,c$),XW=({onComplete:t,duration:s=3e3})=>{const[a,n]=N.useState(0),[i,c]=N.useState(0),[d,h]=N.useState(!0),f=[{label:"Initializing ominbiz...",duration:800},{label:"Loading your workspace...",duration:600},{label:"Connecting to services...",duration:700},{label:"Preparing dashboard...",duration:500},{label:"Almost ready...",duration:400}];return N.useEffect(()=>{let g,p,v=0;return(()=>{g=setInterval(()=>{n(S=>{const b=S+100/(s/50);return b>=100?100:b})},50);const _=()=>{i<f.length-1&&(p=setTimeout(()=>{c(S=>S+1),v+=f[i].duration,v<s-500&&_()},f[i].duration))};_(),setTimeout(()=>{n(100),setTimeout(()=>{h(!1),setTimeout(()=>{t?.()},500)},300)},s)})(),()=>{g&&clearInterval(g),p&&clearTimeout(p)}},[s,t,i]),e.jsx(SE,{children:d&&e.jsxs(Nn.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0,scale:1.1},transition:{duration:.5},className:"fixed inset-0 z-50 flex items-center justify-center bg-gradient-to-br from-green-50 via-white to-green-50 dark:from-gray-900 dark:via-gray-800 dark:to-gray-900",children:[e.jsx("div",{className:"absolute inset-0 opacity-5",children:e.jsx("div",{className:"absolute inset-0",style:{backgroundImage:`url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23059669' fill-opacity='0.1'%3E%3Ccircle cx='30' cy='30' r='2'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E")`}})}),e.jsxs("div",{className:"relative flex flex-col items-center space-y-8 p-8",children:[e.jsx(Nn.div,{initial:{scale:.5,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.8,ease:"easeOut",delay:.2},children:e.jsx(HO,{size:"2xl",variant:"full",animated:!0,className:"mb-4"})}),e.jsxs(Nn.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{duration:.6,delay:.8},className:"text-center space-y-2",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Welcome to ominbiz"}),e.jsx("p",{className:"text-lg text-gray-600 dark:text-gray-300",children:"Your Complete Business Management Solution"})]}),e.jsxs(Nn.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{duration:.6,delay:1.2},className:"w-full max-w-md space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(dr,{value:a,className:"h-2 bg-gray-200 dark:bg-gray-700"}),e.jsxs("div",{className:"flex justify-between text-xs text-gray-500 dark:text-gray-400",children:[e.jsx("span",{children:"Loading..."}),e.jsxs("span",{children:[Math.round(a),"%"]})]})]}),e.jsx(Nn.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.3},className:"text-center",children:e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:f[i]?.label})},i)]}),e.jsx(Nn.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{duration:.6,delay:1.6},className:"grid grid-cols-3 gap-6 mt-8",children:[{icon:"",label:"Analytics"},{icon:"",label:"Orders"},{icon:"",label:"Customers"}].map((g,p)=>e.jsxs(Nn.div,{initial:{scale:0},animate:{scale:1},transition:{duration:.4,delay:1.8+p*.1,type:"spring",stiffness:200},className:"flex flex-col items-center space-y-2 p-4 rounded-lg bg-white/50 dark:bg-gray-800/50 backdrop-blur-sm",children:[e.jsx("span",{className:"text-2xl",children:g.icon}),e.jsx("span",{className:"text-xs font-medium text-gray-700 dark:text-gray-300",children:g.label})]},g.label))}),e.jsx("div",{className:"absolute inset-0 pointer-events-none",children:[...Array(6)].map((g,p)=>e.jsx(Nn.div,{className:"absolute w-2 h-2 bg-green-400 rounded-full opacity-20",style:{left:`${20+p*15}%`,top:`${30+p%2*40}%`},animate:{y:[-10,10,-10],opacity:[.2,.5,.2]},transition:{duration:2+p*.5,repeat:1/0,ease:"easeInOut"}},p))})]}),e.jsxs(Nn.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.6,delay:2},className:"absolute bottom-8 text-center",children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Powered by ominbiz Technology"}),e.jsx("p",{className:"text-xs text-gray-400 dark:text-gray-500 mt-1",children:"Version 2.0.0"})]})]})})};function QW(){const t=[{icon:Ga,title:"Boost Productivity",description:"Automate routine tasks and streamline workflows to increase team efficiency by up to 40%."},{icon:Mn,title:"Data-Driven Insights",description:"Make informed decisions with real-time analytics and comprehensive business intelligence."},{icon:fs,title:"Team Collaboration",description:"Enable seamless collaboration across departments with integrated communication tools."},{icon:_a,title:"Enterprise Security",description:"Bank-level security with end-to-end encryption and compliance with global standards."}],s=["QuickBooks","Xero","Shopify","WooCommerce","Stripe","PayPal","Mailchimp","Slack","Google Workspace","Microsoft 365","Zapier","API Access"],a=[{name:"Retail & E-commerce",description:"Manage inventory, process orders, and track sales across multiple channels.",features:["Multi-channel inventory","Order management","Customer analytics"]},{name:"Professional Services",description:"Schedule appointments, track time, and manage client relationships.",features:["Appointment booking","Time tracking","Client portal"]},{name:"Manufacturing",description:"Optimize production, manage supply chain, and track quality metrics.",features:["Production planning","Supply chain","Quality control"]},{name:"Healthcare",description:"Manage patient records, schedule appointments, and handle billing.",features:["Patient management","Appointment scheduling","Billing integration"]}];return e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx(bd,{}),e.jsx("section",{className:"py-20 bg-gradient-to-br from-green-50 to-blue-50",children:e.jsxs("div",{className:"container mx-auto px-4 text-center",children:[e.jsxs("h1",{className:"text-5xl font-bold text-foreground mb-6",children:["Powerful ",e.jsx("span",{className:"text-green-500",children:"Features"})," for Modern Business"]}),e.jsx("p",{className:"text-xl text-muted-foreground max-w-3xl mx-auto mb-8",children:"Discover how ominbiz can transform your business operations with our comprehensive suite of integrated tools and intelligent automation."}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[e.jsx(is,{to:"/signup",children:e.jsx(I,{size:"lg",className:"bg-green-500 hover:bg-green-600",children:"Start Free Trial"})}),e.jsx(is,{to:"/pricing",children:e.jsx(I,{size:"lg",variant:"outline",children:"View Pricing"})})]})]})}),e.jsx(sk,{}),e.jsx("section",{className:"py-16 bg-muted/30",children:e.jsxs("div",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h2",{className:"text-3xl font-bold text-foreground mb-4",children:"Why Businesses Choose ominbiz"}),e.jsx("p",{className:"text-muted-foreground max-w-2xl mx-auto",children:"Join thousands of businesses that have transformed their operations with our platform."})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:t.map((n,i)=>{const c=n.icon;return e.jsxs(se,{className:"text-center hover:shadow-md transition-shadow",children:[e.jsxs(_e,{children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx("div",{className:"p-3 bg-green-100 rounded-full",children:e.jsx(c,{className:"h-6 w-6 text-green-600"})})}),e.jsx(Te,{className:"text-lg",children:n.title})]}),e.jsx(oe,{children:e.jsx("p",{className:"text-sm text-muted-foreground",children:n.description})})]},i)})})]})}),e.jsx("section",{className:"py-16",children:e.jsxs("div",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h2",{className:"text-3xl font-bold text-foreground mb-4",children:"Tailored for Your Industry"}),e.jsx("p",{className:"text-muted-foreground max-w-2xl mx-auto",children:"ominbiz adapts to your specific industry needs with customizable workflows and features."})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 max-w-4xl mx-auto",children:a.map((n,i)=>e.jsxs(se,{className:"hover:shadow-md transition-shadow",children:[e.jsxs(_e,{children:[e.jsx(Te,{className:"text-xl",children:n.name}),e.jsx(vt,{children:n.description})]}),e.jsx(oe,{children:e.jsx("div",{className:"space-y-2",children:n.features.map((c,d)=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ks,{className:"h-4 w-4 text-green-500"}),e.jsx("span",{className:"text-sm text-muted-foreground",children:c})]},d))})})]},i))})]})}),e.jsx("section",{className:"py-16 bg-muted/30",children:e.jsxs("div",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h2",{className:"text-3xl font-bold text-foreground mb-4",children:"Seamless Integrations"}),e.jsx("p",{className:"text-muted-foreground max-w-2xl mx-auto",children:"Connect ominbiz with your favorite tools and services for a unified business ecosystem."})]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4 max-w-4xl mx-auto",children:s.map((n,i)=>e.jsx(se,{className:"text-center p-4 hover:shadow-md transition-shadow",children:e.jsx(oe,{className:"p-2",children:e.jsx("span",{className:"text-sm font-medium text-muted-foreground",children:n})})},i))}),e.jsxs("div",{className:"text-center mt-8",children:[e.jsx("p",{className:"text-muted-foreground mb-4",children:"Don't see your tool? We offer custom integrations and a powerful API."}),e.jsx(is,{to:"/contact",children:e.jsxs(I,{variant:"outline",children:["Request Integration",e.jsx(Zy,{className:"h-4 w-4 ml-2"})]})})]})]})}),e.jsx("section",{className:"py-16",children:e.jsxs("div",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h2",{className:"text-3xl font-bold text-foreground mb-4",children:"Built for Scale and Performance"}),e.jsx("p",{className:"text-muted-foreground max-w-2xl mx-auto",children:"Enterprise-grade infrastructure that grows with your business."})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsxs(se,{className:"text-center",children:[e.jsxs(_e,{children:[e.jsx(W5,{className:"h-8 w-8 text-green-600 mx-auto mb-2"}),e.jsx(Te,{className:"text-lg",children:"Cloud-Native"})]}),e.jsx(oe,{children:e.jsx("p",{className:"text-sm text-muted-foreground",children:"Built on modern cloud infrastructure for reliability and scalability."})})]}),e.jsxs(se,{className:"text-center",children:[e.jsxs(_e,{children:[e.jsx(Lr,{className:"h-8 w-8 text-green-600 mx-auto mb-2"}),e.jsx(Te,{className:"text-lg",children:"Mobile-First"})]}),e.jsx(oe,{children:e.jsx("p",{className:"text-sm text-muted-foreground",children:"Responsive design that works perfectly on all devices and screen sizes."})})]}),e.jsxs(se,{className:"text-center",children:[e.jsxs(_e,{children:[e.jsx(cd,{className:"h-8 w-8 text-green-600 mx-auto mb-2"}),e.jsx(Te,{className:"text-lg",children:"Global CDN"})]}),e.jsx(oe,{children:e.jsx("p",{className:"text-sm text-muted-foreground",children:"Fast loading times worldwide with our global content delivery network."})})]}),e.jsxs(se,{className:"text-center",children:[e.jsxs(_e,{children:[e.jsx(Rp,{className:"h-8 w-8 text-green-600 mx-auto mb-2"}),e.jsx(Te,{className:"text-lg",children:"24/7 Support"})]}),e.jsx(oe,{children:e.jsx("p",{className:"text-sm text-muted-foreground",children:"Round-the-clock customer support to help you succeed."})})]})]})]})}),e.jsx("section",{className:"py-16 bg-green-50",children:e.jsxs("div",{className:"container mx-auto px-4 text-center",children:[e.jsx("h2",{className:"text-3xl font-bold text-foreground mb-4",children:"Ready to Transform Your Business?"}),e.jsx("p",{className:"text-muted-foreground mb-8 max-w-2xl mx-auto",children:"Join thousands of businesses that have streamlined their operations with ominbiz. Start your free trial today and experience the difference."}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[e.jsx(is,{to:"/signup",children:e.jsx(I,{size:"lg",className:"bg-green-500 hover:bg-green-600",children:"Start Free Trial - No Credit Card Required"})}),e.jsx(is,{to:"/contact",children:e.jsx(I,{size:"lg",variant:"outline",children:"Schedule a Demo"})})]})]})}),e.jsx(wd,{})]})}function JW(){const{user:t}=qs(),s=_n(),[a,n]=N.useState(!1),[i,c]=N.useState(null),[d,h]=N.useState(!1),[f,g]=N.useState(!1),[p,v]=N.useState(null),[y,_]=N.useState({cardNumber:"",expiryDate:"",cvv:"",cardholderName:"",billingAddress:{street:"",city:"",state:"",zipCode:"",country:"US"}});N.useEffect(()=>{if(t){S();const q=setInterval(S,3e4);return()=>clearInterval(q)}},[t]);const S=async()=>{try{const q=await ke.get("/subscriptions/current");v(q.data.subscription)}catch(q){console.error("Error fetching subscription:",q)}},b=[{id:"starter",name:"Starter",price:0,originalPrice:0,period:"forever",description:"Perfect for small businesses just getting started",icon:Dn,popular:!1,features:["Up to 100 products","Basic inventory tracking","5 team members","Email support","Basic reports","Mobile app access"],limitations:["Limited integrations","Basic analytics only","No custom branding"],buttonText:"Get Started Free",buttonVariant:"outline",trialDays:0},{id:"professional",name:"Professional",price:a?24:29,originalPrice:29,period:a?"per month (billed annually)":"per month",description:"Ideal for growing businesses with advanced needs",icon:Ga,popular:!0,features:["Unlimited products","Advanced inventory management","Unlimited team members","Priority support","Advanced analytics","API access","Custom integrations","Multi-location support","Automated workflows","Custom reports","Real-time AI insights","Interactive maps"],limitations:[],buttonText:p?.plan==="professional"?"Current Plan":"Start Free Trial",buttonVariant:p?.plan==="professional"?"outline":"default",trialDays:14},{id:"enterprise",name:"Enterprise",price:"Custom",originalPrice:"Custom",period:"contact us",description:"For large organizations with complex requirements",icon:F_,popular:!1,features:["Everything in Professional","Dedicated account manager","Custom development","On-premise deployment","Advanced security features","SLA guarantee","Training & onboarding","24/7 phone support","Custom integrations","White-label options","Advanced compliance","Custom reporting"],limitations:[],buttonText:"Contact Sales",buttonVariant:"outline",trialDays:30}],T=async q=>{if(!t){R.info("Please sign in to subscribe to a plan"),s("/login");return}if(q.id==="starter"){try{h(!0),await ke.post("/subscriptions/activate",{planId:q.id}),R.success("Welcome to ominbiz Starter!"),S()}catch{R.error("Failed to activate plan. Please try again.")}finally{h(!1)}return}if(q.id==="enterprise"){s("/contact");return}c(q),g(!0)},E=async()=>{if(i)try{if(h(!0),!y.cardNumber||!y.expiryDate||!y.cvv||!y.cardholderName){R.error("Please fill in all payment details");return}const q={planId:i.id,isAnnual:a,amount:a?i.price*12*.8:i.price,paymentMethod:{cardNumber:y.cardNumber.replace(/\s/g,""),expiryDate:y.expiryDate,cvv:y.cvv,cardholderName:y.cardholderName,billingAddress:y.billingAddress}};(await ke.post("/subscriptions/subscribe",q)).data.success&&(R.success(`Successfully subscribed to ${i.name}!`),g(!1),S(),setTimeout(()=>{s("/dashboard")},2e3))}catch(q){R.error(q.response?.data?.message||"Payment failed. Please try again.")}finally{h(!1)}},A=(q,U)=>{if(q.includes(".")){const[D,M]=q.split(".");_(P=>({...P,[D]:{...P[D],[M]:U}}))}else _(D=>({...D,[q]:U}))},O=q=>{const U=q.replace(/\s+/g,"").replace(/[^0-9]/gi,""),D=U.match(/\d{4,16}/g),M=D&&D[0]||"",P=[];for(let G=0,K=M.length;G<K;G+=4)P.push(M.substring(G,G+4));return P.length?P.join(" "):U},Q=[{question:"Can I change my plan at any time?",answer:"Yes, you can upgrade or downgrade your plan at any time. Changes take effect immediately and billing is prorated."},{question:"Is there a free trial?",answer:"Yes, we offer a 14-day free trial for all paid plans. No credit card required to start."},{question:"What payment methods do you accept?",answer:"We accept all major credit cards, PayPal, and bank transfers for annual plans."},{question:"Can I cancel anytime?",answer:"Absolutely. You can cancel your subscription at any time with no cancellation fees."}];return e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx(bd,{}),e.jsx("section",{className:"py-20 bg-gradient-to-br from-green-50 to-blue-50",children:e.jsxs("div",{className:"container mx-auto px-4 text-center",children:[e.jsxs("h1",{className:"text-5xl font-bold text-foreground mb-6",children:["Simple, Transparent ",e.jsx("span",{className:"text-green-500",children:"Pricing"})]}),e.jsx("p",{className:"text-xl text-muted-foreground max-w-3xl mx-auto mb-8",children:"Choose the perfect plan for your business. Start free and scale as you grow."}),e.jsxs("div",{className:"flex justify-center items-center gap-4 mb-8",children:[e.jsx("span",{className:`text-sm ${a?"text-muted-foreground":"text-foreground font-medium"}`,children:"Monthly"}),e.jsx(_s,{checked:a,onCheckedChange:n,className:"data-[state=checked]:bg-green-500"}),e.jsxs("span",{className:`text-sm ${a?"text-foreground font-medium":"text-muted-foreground"}`,children:["Annual ",e.jsx(ze,{variant:"secondary",className:"ml-2",children:"Save 20%"})]})]}),p&&e.jsx("div",{className:"max-w-md mx-auto mb-8",children:e.jsx(se,{className:"border-green-200 bg-green-50",children:e.jsxs(oe,{className:"pt-6",children:[e.jsxs("div",{className:"flex items-center justify-center gap-2 text-green-700",children:[e.jsx(_a,{className:"h-5 w-5"}),e.jsxs("span",{className:"font-medium",children:["Current Plan: ",p.plan.charAt(0).toUpperCase()+p.plan.slice(1)]})]}),e.jsx("div",{className:"text-center text-sm text-green-600 mt-2",children:p.status==="active"?e.jsxs(e.Fragment,{children:["Next billing: ",new Date(p.nextBilling).toLocaleDateString()]}):e.jsxs(e.Fragment,{children:["Status: ",p.status]})})]})})})]})}),e.jsx("section",{className:"py-16",children:e.jsx("div",{className:"container mx-auto px-4",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 max-w-6xl mx-auto",children:b.map((q,U)=>{const D=q.icon;return e.jsxs(se,{className:`relative ${q.popular?"border-green-500 shadow-lg scale-105":""}`,children:[q.popular&&e.jsx(ze,{className:"absolute -top-3 left-1/2 transform -translate-x-1/2 bg-green-500",children:"Most Popular"}),e.jsxs(_e,{className:"text-center pb-4",children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx("div",{className:"p-3 bg-green-100 rounded-full",children:e.jsx(D,{className:"h-8 w-8 text-green-600"})})}),e.jsx(Te,{className:"text-2xl",children:q.name}),e.jsx(vt,{className:"text-sm",children:q.description}),e.jsxs("div",{className:"mt-4",children:[e.jsxs("div",{className:"flex items-baseline justify-center gap-2",children:[e.jsx("span",{className:"text-4xl font-bold text-foreground",children:typeof q.price=="number"?`$${q.price}`:q.price}),a&&q.originalPrice!==q.price&&typeof q.price=="number"&&e.jsxs("span",{className:"text-lg text-muted-foreground line-through",children:["$",q.originalPrice]})]}),q.period&&e.jsxs("div",{className:"text-muted-foreground text-sm mt-1",children:[q.period,q.trialDays>0&&e.jsxs("div",{className:"text-green-600 font-medium mt-1",children:[q.trialDays,"-day free trial"]})]})]})]}),e.jsxs(oe,{className:"space-y-4",children:[e.jsx(I,{className:`w-full ${q.popular?"bg-green-500 hover:bg-green-600":""}`,variant:q.buttonVariant,onClick:()=>T(q),disabled:d||p?.plan===q.id&&p?.status==="active",children:d?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Processing..."]}):q.buttonText}),e.jsxs("div",{className:"flex items-center justify-center gap-4 text-xs text-muted-foreground",children:[q.id!=="starter"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(fs,{className:"h-3 w-3"}),e.jsx("span",{children:"Unlimited users"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(_a,{className:"h-3 w-3"}),e.jsx("span",{children:"Secure"})]})]}),q.trialDays>0&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(ps,{className:"h-3 w-3"}),e.jsxs("span",{children:[q.trialDays,"-day trial"]})]})]}),e.jsxs("div",{className:"space-y-3",children:[q.features.map((M,P)=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(To,{className:"h-4 w-4 text-green-500 flex-shrink-0"}),e.jsx("span",{className:"text-sm text-foreground",children:M})]},P)),q.limitations.map((M,P)=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(nr,{className:"h-4 w-4 text-red-400 flex-shrink-0"}),e.jsx("span",{className:"text-sm text-muted-foreground",children:M})]},P))]})]})]},U)})})})}),e.jsx("section",{className:"py-16 bg-muted/30",children:e.jsxs("div",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h2",{className:"text-3xl font-bold text-foreground mb-4",children:"Frequently Asked Questions"}),e.jsx("p",{className:"text-muted-foreground max-w-2xl mx-auto",children:"Have questions? We have answers. If you can't find what you're looking for, contact our support team."})]}),e.jsx("div",{className:"max-w-3xl mx-auto space-y-6",children:Q.map((q,U)=>e.jsxs(se,{children:[e.jsx(_e,{children:e.jsx(Te,{className:"text-lg",children:q.question})}),e.jsx(oe,{children:e.jsx("p",{className:"text-muted-foreground",children:q.answer})})]},U))})]})}),e.jsx("section",{className:"py-16",children:e.jsxs("div",{className:"container mx-auto px-4 text-center",children:[e.jsx("h2",{className:"text-3xl font-bold text-foreground mb-4",children:"Ready to Get Started?"}),e.jsx("p",{className:"text-muted-foreground mb-8 max-w-2xl mx-auto",children:"Join thousands of businesses that trust ominbiz to manage their operations."}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[e.jsx(is,{to:"/signup",children:e.jsx(I,{size:"lg",className:"bg-green-500 hover:bg-green-600",children:"Start Free Trial"})}),e.jsx(is,{to:"/contact",children:e.jsx(I,{size:"lg",variant:"outline",children:"Contact Sales"})})]})]})}),e.jsx(Gt,{open:f,onOpenChange:g,children:e.jsxs(qt,{className:"max-w-md",children:[e.jsxs(Kt,{children:[e.jsxs(Yt,{children:["Subscribe to ",i?.name]}),e.jsx(vs,{children:"Complete your subscription to unlock all features"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-muted/30 p-4 rounded-lg",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("span",{className:"font-medium",children:[i?.name," Plan"]}),e.jsxs("span",{className:"font-bold",children:["$",a?i?.price*12*.8:i?.price,a?"/year":"/month"]})]}),a&&e.jsxs("div",{className:"text-sm text-green-600 mt-1",children:["Save $",i?.price*12*.2,"/year with annual billing"]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(ue,{htmlFor:"cardholderName",children:"Cardholder Name"}),e.jsx(we,{id:"cardholderName",value:y.cardholderName,onChange:q=>A("cardholderName",q.target.value),placeholder:"John Doe"})]}),e.jsxs("div",{children:[e.jsx(ue,{htmlFor:"cardNumber",children:"Card Number"}),e.jsx(we,{id:"cardNumber",value:y.cardNumber,onChange:q=>A("cardNumber",O(q.target.value)),placeholder:"1234 5678 9012 3456",maxLength:19})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(ue,{htmlFor:"expiryDate",children:"Expiry Date"}),e.jsx(we,{id:"expiryDate",value:y.expiryDate,onChange:q=>A("expiryDate",q.target.value),placeholder:"MM/YY",maxLength:5})]}),e.jsxs("div",{children:[e.jsx(ue,{htmlFor:"cvv",children:"CVV"}),e.jsx(we,{id:"cvv",value:y.cvv,onChange:q=>A("cvv",q.target.value),placeholder:"123",maxLength:4})]})]}),e.jsxs("div",{children:[e.jsx(ue,{htmlFor:"billingAddress",children:"Billing Address"}),e.jsx(we,{id:"billingAddress",value:y.billingAddress.street,onChange:q=>A("billingAddress.street",q.target.value),placeholder:"123 Main St",className:"mb-2"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx(we,{value:y.billingAddress.city,onChange:q=>A("billingAddress.city",q.target.value),placeholder:"City"}),e.jsx(we,{value:y.billingAddress.zipCode,onChange:q=>A("billingAddress.zipCode",q.target.value),placeholder:"ZIP Code"})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[e.jsx(_a,{className:"h-4 w-4"}),e.jsx("span",{children:"Your payment information is secure and encrypted"})]}),e.jsxs("div",{className:"flex gap-2 pt-4",children:[e.jsx(I,{variant:"outline",onClick:()=>g(!1),className:"flex-1",disabled:d,children:"Cancel"}),e.jsx(I,{onClick:E,className:"flex-1 bg-green-500 hover:bg-green-600",disabled:d,children:d?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Processing..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Ba,{className:"h-4 w-4 mr-2"}),"Subscribe Now"]})})]})]})]})}),e.jsx(wd,{})]})}function eG(){const[t,s]=N.useState({name:"",email:"",company:"",subject:"",message:"",inquiryType:""}),[a,n]=N.useState(!1),i=g=>{const{name:p,value:v}=g.target;s(y=>({...y,[p]:v}))},c=g=>{s(p=>({...p,inquiryType:g}))},d=async g=>{g.preventDefault(),n(!0);try{await new Promise(p=>setTimeout(p,2e3)),R.success("Message sent successfully! We'll get back to you soon."),s({name:"",email:"",company:"",subject:"",message:"",inquiryType:""})}catch{R.error("Failed to send message. Please try again.")}finally{n(!1)}},h=[{icon:fa,title:"Email Us",description:"Send us an email anytime",contact:"hello@ominbiz.com",action:"mailto:hello@ominbiz.com"},{icon:ia,title:"Call Us",description:"Mon-Fri from 8am to 6pm",contact:"+254 700 123 456",action:"tel:+254700123456"},{icon:Fr,title:"Visit Us",description:"Come say hello at our office",contact:"Nairobi, Kenya",action:"#"},{icon:ps,title:"Working Hours",description:"Monday - Friday",contact:"8:00 AM - 6:00 PM",action:"#"}],f=[{icon:wo,title:"Live Chat",description:"Chat with our support team",available:"Available 24/7"},{icon:Rp,title:"Phone Support",description:"Call our support hotline",available:"Mon-Fri 8AM-6PM"},{icon:fs,title:"Community",description:"Join our user community",available:"Always active"}];return e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx(bd,{}),e.jsx("section",{className:"py-20 bg-gradient-to-br from-green-50 to-blue-50",children:e.jsxs("div",{className:"container mx-auto px-4 text-center",children:[e.jsxs("h1",{className:"text-5xl font-bold text-foreground mb-6",children:["Get in ",e.jsx("span",{className:"text-green-500",children:"Touch"})]}),e.jsx("p",{className:"text-xl text-muted-foreground max-w-3xl mx-auto",children:"Have questions about ominbiz? We're here to help. Reach out to our team and we'll get back to you as soon as possible."})]})}),e.jsx("section",{className:"py-16",children:e.jsx("div",{className:"container mx-auto px-4",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-16",children:h.map((g,p)=>{const v=g.icon;return e.jsxs(se,{className:"text-center hover:shadow-md transition-shadow",children:[e.jsxs(_e,{children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx("div",{className:"p-3 bg-green-100 rounded-full",children:e.jsx(v,{className:"h-6 w-6 text-green-600"})})}),e.jsx(Te,{className:"text-lg",children:g.title}),e.jsx(vt,{children:g.description})]}),e.jsx(oe,{children:e.jsx("a",{href:g.action,className:"text-green-600 hover:text-green-700 font-medium",children:g.contact})})]},p)})})})}),e.jsx("section",{className:"py-16 bg-muted/30",children:e.jsx("div",{className:"container mx-auto px-4",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-12 max-w-6xl mx-auto",children:[e.jsxs(se,{children:[e.jsxs(_e,{children:[e.jsx(Te,{className:"text-2xl",children:"Send us a Message"}),e.jsx(vt,{children:"Fill out the form below and we'll get back to you within 24 hours."})]}),e.jsx(oe,{children:e.jsxs("form",{onSubmit:d,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(ue,{htmlFor:"name",children:"Full Name *"}),e.jsx(we,{id:"name",name:"name",value:t.name,onChange:i,required:!0,placeholder:"Your full name"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ue,{htmlFor:"email",children:"Email *"}),e.jsx(we,{id:"email",name:"email",type:"email",value:t.email,onChange:i,required:!0,placeholder:"your@email.com"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(ue,{htmlFor:"company",children:"Company"}),e.jsx(we,{id:"company",name:"company",value:t.company,onChange:i,placeholder:"Your company name"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ue,{htmlFor:"inquiryType",children:"Inquiry Type"}),e.jsxs(Xt,{onValueChange:c,children:[e.jsx(Jt,{children:e.jsx(Qt,{placeholder:"Select inquiry type"})}),e.jsxs(es,{children:[e.jsx(Ie,{value:"sales",children:"Sales Inquiry"}),e.jsx(Ie,{value:"support",children:"Technical Support"}),e.jsx(Ie,{value:"billing",children:"Billing Question"}),e.jsx(Ie,{value:"partnership",children:"Partnership"}),e.jsx(Ie,{value:"other",children:"Other"})]})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ue,{htmlFor:"subject",children:"Subject *"}),e.jsx(we,{id:"subject",name:"subject",value:t.subject,onChange:i,required:!0,placeholder:"Brief description of your inquiry"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ue,{htmlFor:"message",children:"Message *"}),e.jsx(Gs,{id:"message",name:"message",value:t.message,onChange:i,required:!0,placeholder:"Tell us more about your inquiry...",rows:5})]}),e.jsx(I,{type:"submit",className:"w-full bg-green-500 hover:bg-green-600",disabled:a,children:a?e.jsx(e.Fragment,{children:"Sending..."}):e.jsxs(e.Fragment,{children:[e.jsx(mn,{className:"h-4 w-4 mr-2"}),"Send Message"]})})]})})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-foreground mb-4",children:"Other Ways to Reach Us"}),e.jsx("p",{className:"text-muted-foreground mb-6",children:"Choose the support option that works best for you."})]}),e.jsx("div",{className:"space-y-4",children:f.map((g,p)=>{const v=g.icon;return e.jsx(se,{className:"hover:shadow-md transition-shadow",children:e.jsxs(oe,{className:"flex items-center p-6",children:[e.jsx("div",{className:"p-3 bg-green-100 rounded-full mr-4",children:e.jsx(v,{className:"h-6 w-6 text-green-600"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-foreground",children:g.title}),e.jsx("p",{className:"text-sm text-muted-foreground",children:g.description}),e.jsx("p",{className:"text-sm text-green-600 font-medium",children:g.available})]})]})},p)})}),e.jsxs(se,{className:"bg-green-50 border-green-200",children:[e.jsx(_e,{children:e.jsx(Te,{className:"text-green-800",children:"Office Hours"})}),e.jsx(oe,{className:"text-green-700",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Monday - Friday:"}),e.jsx("span",{children:"8:00 AM - 6:00 PM"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Saturday:"}),e.jsx("span",{children:"9:00 AM - 2:00 PM"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Sunday:"}),e.jsx("span",{children:"Closed"})]})]})})]})]})]})})}),e.jsx(wd,{})]})}const tG="/assets/glorison-CRlH09PY.jpg",sG="/assets/dan-Yi6WQeZ9.jpg";function aG(){const t=[{icon:_o,title:"Mission-Driven",description:"We're committed to empowering businesses with tools that drive real growth and success."},{icon:fs,title:"Customer-Centric",description:"Every decision we make is guided by what's best for our customers and their businesses."},{icon:km,title:"Innovation",description:"We continuously innovate to stay ahead of business needs and technological advances."},{icon:Zo,title:"Passion",description:"We're passionate about helping businesses thrive in an increasingly digital world."}],s=[{number:"10,000+",label:"Active Businesses"},{number:"50+",label:"Countries Served"},{number:"99.9%",label:"Uptime Guarantee"},{number:"24/7",label:"Customer Support"}],a=[{name:"Daniel Ndk",role:"CEO & Founder",image:sG,bio:"Visionary leader driving innovation and growth in business management solutions."},{name:"Glorison Ouma",role:"CTO & Co-Founder",image:tG,bio:"Technology expert passionate about building scalable, intelligent solutions for businesses."},{name:"Mr Timothy Ndala",role:"Head of Operations",image:"https://tse1.mm.bing.net/th/id/OIP.w-L3HP_7QYalYXw7apT2tAHaHx?cb=12&rs=1&pid=ImgDetMain&o=7&rm=3",bio:"Operations strategist ensuring seamless business workflows and customer success."},{name:"David Kamau",role:"Head of Product Development",image:"https://th.bing.com/th/id/R.9a5877425188cdd10fd29f9178b680f6?rik=F%2fI%2bWzCaY1cPrw&riu=http%3a%2f%2fart.beopenfuture.com%2fwp-content%2fuploads%2fAlex-Ayivi.jpg&ehk=L0n3vEqGR9PpE9zPHHwZvTSZYPdDlCzbovMdLkQPoyI%3d&risl=&pid=ImgRaw&r=0",bio:"Product innovator focused on delivering exceptional user experiences and features."}],n=[{year:"2020",title:"Company Founded",description:"Started with a vision to simplify business operations for SMEs"},{year:"2021",title:"First 1,000 Customers",description:"Reached our first major milestone with businesses across 10 countries"},{year:"2022",title:"Series A Funding",description:"Raised $10M to accelerate product development and global expansion"},{year:"2023",title:"AI Integration",description:"Launched AI-powered insights and automation features"},{year:"2024",title:"Global Expansion",description:"Now serving 10,000+ businesses across 50+ countries"}];return e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx(bd,{}),e.jsx("section",{className:"py-20 bg-gradient-to-br from-green-50 to-blue-50",children:e.jsxs("div",{className:"container mx-auto px-4 text-center",children:[e.jsxs("h1",{className:"text-5xl font-bold text-foreground mb-6",children:["About ",e.jsx("span",{className:"text-green-500",children:"ominbiz"})]}),e.jsx("p",{className:"text-xl text-muted-foreground max-w-3xl mx-auto mb-8",children:"We're on a mission to empower businesses worldwide with intelligent, integrated solutions that drive growth and operational excellence."}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[e.jsx(is,{to:"/contact",children:e.jsx(I,{size:"lg",className:"bg-green-500 hover:bg-green-600",children:"Get in Touch"})}),e.jsx(is,{to:"/pricing",children:e.jsx(I,{size:"lg",variant:"outline",children:"View Pricing"})})]})]})}),e.jsx("section",{className:"py-16",children:e.jsx("div",{className:"container mx-auto px-4",children:e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-8 text-center",children:s.map((i,c)=>e.jsxs("div",{children:[e.jsx("div",{className:"text-4xl font-bold text-green-600 mb-2",children:i.number}),e.jsx("div",{className:"text-muted-foreground",children:i.label})]},c))})})}),e.jsx("section",{className:"py-16 bg-muted/30",children:e.jsx("div",{className:"container mx-auto px-4",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-12 max-w-6xl mx-auto",children:[e.jsxs(se,{children:[e.jsx(_e,{children:e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:e.jsx(_o,{className:"h-6 w-6 text-green-600"})}),e.jsx(Te,{className:"text-2xl",children:"Our Mission"})]})}),e.jsx(oe,{children:e.jsx("p",{className:"text-muted-foreground leading-relaxed",children:"To democratize access to enterprise-grade business management tools, enabling businesses of all sizes to operate efficiently, make data-driven decisions, and achieve sustainable growth in the digital economy."})})]}),e.jsxs(se,{children:[e.jsx(_e,{children:e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx(cd,{className:"h-6 w-6 text-blue-600"})}),e.jsx(Te,{className:"text-2xl",children:"Our Vision"})]})}),e.jsx(oe,{children:e.jsx("p",{className:"text-muted-foreground leading-relaxed",children:"To become the world's most trusted business management platform, powering millions of businesses globally and fostering economic growth through technology innovation and exceptional user experiences."})})]})]})})}),e.jsx("section",{className:"py-16",children:e.jsxs("div",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h2",{className:"text-3xl font-bold text-foreground mb-4",children:"Our Values"}),e.jsx("p",{className:"text-muted-foreground max-w-2xl mx-auto",children:"The principles that guide everything we do and shape our company culture."})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:t.map((i,c)=>{const d=i.icon;return e.jsxs(se,{className:"text-center hover:shadow-md transition-shadow",children:[e.jsxs(_e,{children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx("div",{className:"p-3 bg-green-100 rounded-full",children:e.jsx(d,{className:"h-6 w-6 text-green-600"})})}),e.jsx(Te,{className:"text-lg",children:i.title})]}),e.jsx(oe,{children:e.jsx("p",{className:"text-sm text-muted-foreground",children:i.description})})]},c)})})]})}),e.jsx("section",{className:"py-16 bg-muted/30",children:e.jsxs("div",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h2",{className:"text-3xl font-bold text-foreground mb-4",children:"Meet Our Team"}),e.jsx("p",{className:"text-muted-foreground max-w-2xl mx-auto",children:"The passionate individuals behind OminBiz, dedicated to your business success."})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8",children:a.map((i,c)=>e.jsxs(se,{className:"text-center hover:shadow-md transition-shadow",children:[e.jsxs(_e,{children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx("img",{src:i.image,alt:i.name,className:"w-20 h-20 rounded-full object-cover"})}),e.jsx(Te,{className:"text-lg",children:i.name}),e.jsx(vt,{className:"text-green-600 font-medium",children:i.role})]}),e.jsx(oe,{children:e.jsx("p",{className:"text-sm text-muted-foreground",children:i.bio})})]},c))})]})}),e.jsx("section",{className:"py-16",children:e.jsxs("div",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h2",{className:"text-3xl font-bold text-foreground mb-4",children:"Our Journey"}),e.jsx("p",{className:"text-muted-foreground max-w-2xl mx-auto",children:"Key milestones in our mission to transform business operations worldwide."})]}),e.jsx("div",{className:"max-w-4xl mx-auto",children:e.jsx("div",{className:"space-y-8",children:n.map((i,c)=>e.jsxs("div",{className:"flex items-start gap-6",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-12 h-12 bg-green-500 rounded-full flex items-center justify-center text-white font-bold",children:i.year.slice(-2)})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("h3",{className:"text-xl font-semibold text-foreground",children:i.title}),e.jsx("span",{className:"text-sm text-green-600 font-medium",children:i.year})]}),e.jsx("p",{className:"text-muted-foreground",children:i.description})]})]},c))})})]})}),e.jsx("section",{className:"py-16 bg-green-50",children:e.jsxs("div",{className:"container mx-auto px-4 text-center",children:[e.jsx("h2",{className:"text-3xl font-bold text-foreground mb-4",children:"Ready to Join Our Journey?"}),e.jsx("p",{className:"text-muted-foreground mb-8 max-w-2xl mx-auto",children:"Whether you're looking to streamline your business operations or join our team, we'd love to hear from you."}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[e.jsx(is,{to:"/signup",children:e.jsx(I,{size:"lg",className:"bg-green-500 hover:bg-green-600",children:"Start Your Free Trial"})}),e.jsx(is,{to:"/contact",children:e.jsx(I,{size:"lg",variant:"outline",children:"Contact Us"})})]})]})}),e.jsx(wd,{})]})}function nG(){const t=[{icon:Ka,title:"Information We Collect",content:["Personal information (name, email, phone number, business details)","Account credentials and authentication data","Payment and billing information","Business data (inventory, orders, customers, transactions)","Usage data and analytics","Device information and IP addresses","Cookies and tracking technologies"]},{icon:Pa,title:"How We Use Your Information",content:["Provide and maintain our services","Process transactions and payments","Send important updates and notifications","Improve and optimize our platform","Provide customer support","Detect and prevent fraud","Comply with legal obligations","Personalize your experience"]},{icon:_a,title:"Data Security",content:["Industry-standard encryption (SSL/TLS)","Secure data centers with 24/7 monitoring","Regular security audits and updates","Access controls and authentication","Data backup and disaster recovery","Employee training on data protection","Compliance with GDPR and data protection laws"]},{icon:sr,title:"Your Rights",content:["Access your personal data","Correct inaccurate information","Request data deletion","Export your data","Opt-out of marketing communications","Withdraw consent","Lodge a complaint with supervisory authorities"]}];return e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx(bd,{}),e.jsx("section",{className:"py-20 bg-gradient-to-br from-green-50 to-blue-50",children:e.jsxs("div",{className:"container mx-auto px-4 text-center",children:[e.jsx("div",{className:"flex justify-center mb-6",children:e.jsx("div",{className:"p-4 bg-green-100 rounded-full",children:e.jsx(_a,{className:"h-12 w-12 text-green-600"})})}),e.jsxs("h1",{className:"text-5xl font-bold text-foreground mb-6",children:["Privacy ",e.jsx("span",{className:"text-green-500",children:"Policy"})]}),e.jsx("p",{className:"text-xl text-muted-foreground max-w-3xl mx-auto mb-4",children:"Your privacy is important to us. This policy explains how we collect, use, and protect your information."}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Last updated: ",new Date().toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"})]})]})}),e.jsx("section",{className:"py-16",children:e.jsxs("div",{className:"container mx-auto px-4 max-w-4xl",children:[e.jsx(se,{className:"mb-8",children:e.jsx(oe,{className:"pt-6",children:e.jsx("p",{className:"text-muted-foreground leading-relaxed",children:"At ominbiz, we are committed to protecting your privacy and ensuring the security of your personal and business data. This Privacy Policy describes how we collect, use, store, and share information when you use our platform. By using ominbiz, you agree to the practices described in this policy."})})}),e.jsx("div",{className:"space-y-6",children:t.map((s,a)=>{const n=s.icon;return e.jsxs(se,{children:[e.jsx(_e,{children:e.jsxs(Te,{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:e.jsx(n,{className:"h-5 w-5 text-green-600"})}),s.title]})}),e.jsx(oe,{children:e.jsx("ul",{className:"space-y-3",children:s.content.map((i,c)=>e.jsxs("li",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-green-500 rounded-full mt-2 flex-shrink-0"}),e.jsx("span",{className:"text-muted-foreground",children:i})]},c))})})]},a)})}),e.jsxs(se,{className:"mt-6",children:[e.jsx(_e,{children:e.jsxs(Te,{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:e.jsx(Ka,{className:"h-5 w-5 text-green-600"})}),"Information Sharing"]})}),e.jsxs(oe,{className:"space-y-4",children:[e.jsx("p",{className:"text-muted-foreground",children:"We do not sell your personal information. We may share your information only in the following circumstances:"}),e.jsxs("ul",{className:"space-y-2",children:[e.jsxs("li",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-green-500 rounded-full mt-2 flex-shrink-0"}),e.jsxs("span",{className:"text-muted-foreground",children:[e.jsx("strong",{children:"Service Providers:"})," With trusted third-party vendors who help us provide our services (payment processors, hosting providers, analytics services)"]})]}),e.jsxs("li",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-green-500 rounded-full mt-2 flex-shrink-0"}),e.jsxs("span",{className:"text-muted-foreground",children:[e.jsx("strong",{children:"Legal Requirements:"})," When required by law or to protect our rights and safety"]})]}),e.jsxs("li",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-green-500 rounded-full mt-2 flex-shrink-0"}),e.jsxs("span",{className:"text-muted-foreground",children:[e.jsx("strong",{children:"Business Transfers:"})," In connection with a merger, acquisition, or sale of assets"]})]})]})]})]}),e.jsxs(se,{className:"mt-6",children:[e.jsx(_e,{children:e.jsx(Te,{children:"Cookies and Tracking"})}),e.jsxs(oe,{className:"space-y-4",children:[e.jsx("p",{className:"text-muted-foreground",children:"We use cookies and similar tracking technologies to enhance your experience, analyze usage, and provide personalized content. You can control cookies through your browser settings."}),e.jsxs("div",{className:"bg-muted/30 p-4 rounded-lg",children:[e.jsx("p",{className:"text-sm font-medium mb-2",children:"Types of cookies we use:"}),e.jsxs("ul",{className:"space-y-1 text-sm text-muted-foreground",children:[e.jsx("li",{children:" Essential cookies (required for platform functionality)"}),e.jsx("li",{children:" Analytics cookies (help us understand usage patterns)"}),e.jsx("li",{children:" Preference cookies (remember your settings)"}),e.jsx("li",{children:" Marketing cookies (deliver relevant content)"})]})]})]})]}),e.jsxs(se,{className:"mt-6",children:[e.jsx(_e,{children:e.jsx(Te,{children:"Data Retention"})}),e.jsx(oe,{children:e.jsx("p",{className:"text-muted-foreground mb-4",children:"We retain your information for as long as necessary to provide our services and comply with legal obligations. When you close your account, we will delete or anonymize your data within 90 days, except where we are required to retain it for legal or regulatory purposes."})})]}),e.jsxs(se,{className:"mt-6",children:[e.jsx(_e,{children:e.jsx(Te,{children:"Children's Privacy"})}),e.jsx(oe,{children:e.jsx("p",{className:"text-muted-foreground",children:"Our services are not intended for individuals under the age of 18. We do not knowingly collect personal information from children. If you believe we have collected information from a child, please contact us immediately."})})]}),e.jsxs(se,{className:"mt-6",children:[e.jsx(_e,{children:e.jsx(Te,{children:"International Data Transfers"})}),e.jsx(oe,{children:e.jsx("p",{className:"text-muted-foreground",children:"Your information may be transferred to and processed in countries other than your own. We ensure appropriate safeguards are in place to protect your data in accordance with this Privacy Policy and applicable laws."})})]}),e.jsxs(se,{className:"mt-6",children:[e.jsx(_e,{children:e.jsx(Te,{children:"Policy Updates"})}),e.jsx(oe,{children:e.jsx("p",{className:"text-muted-foreground",children:"We may update this Privacy Policy from time to time. We will notify you of significant changes by email or through our platform. Your continued use of ominbiz after changes constitutes acceptance of the updated policy."})})]}),e.jsxs(se,{className:"mt-6 border-green-200 bg-green-50",children:[e.jsx(_e,{children:e.jsx(Te,{className:"text-green-900",children:"Contact Us"})}),e.jsxs(oe,{className:"space-y-3",children:[e.jsx("p",{className:"text-green-800",children:"If you have questions about this Privacy Policy or how we handle your data, please contact us:"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-3 text-green-800",children:[e.jsx(fa,{className:"h-4 w-4"}),e.jsx("span",{children:"privacy@ominbiz.com"})]}),e.jsxs("div",{className:"flex items-center gap-3 text-green-800",children:[e.jsx(ia,{className:"h-4 w-4"}),e.jsx("span",{children:"+254 700 000 000"})]}),e.jsxs("div",{className:"flex items-center gap-3 text-green-800",children:[e.jsx(Ka,{className:"h-4 w-4"}),e.jsx("span",{children:"Data Protection Officer: dpo@ominbiz.com"})]})]})]})]})]})}),e.jsx(wd,{})]})}function rG(){return e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx(bd,{}),e.jsx("section",{className:"py-20 bg-gradient-to-br from-green-50 to-blue-50",children:e.jsxs("div",{className:"container mx-auto px-4 text-center",children:[e.jsx("div",{className:"flex justify-center mb-6",children:e.jsx("div",{className:"p-4 bg-green-100 rounded-full",children:e.jsx(Ka,{className:"h-12 w-12 text-green-600"})})}),e.jsxs("h1",{className:"text-5xl font-bold text-foreground mb-6",children:["Terms of ",e.jsx("span",{className:"text-green-500",children:"Service"})]}),e.jsx("p",{className:"text-xl text-muted-foreground max-w-3xl mx-auto mb-4",children:"Please read these terms carefully before using ominbiz platform."}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Last updated: ",new Date().toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"})]})]})}),e.jsx("section",{className:"py-16",children:e.jsxs("div",{className:"container mx-auto px-4 max-w-4xl",children:[e.jsxs(Im,{className:"mb-8 border-green-200 bg-green-50",children:[e.jsx(mr,{className:"h-4 w-4 text-green-600"}),e.jsx(Fm,{className:"text-green-800",children:"By accessing and using ominbiz, you agree to be bound by these Terms of Service and all applicable laws and regulations. If you do not agree with any of these terms, you are prohibited from using this platform."})]}),e.jsxs(se,{className:"mb-6",children:[e.jsx(_e,{children:e.jsxs(Te,{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:e.jsx(ks,{className:"h-5 w-5 text-green-600"})}),"1. Acceptance of Terms"]})}),e.jsxs(oe,{className:"space-y-4",children:[e.jsx("p",{className:"text-muted-foreground",children:'These Terms of Service ("Terms") govern your use of the ominbiz platform and services ("Services"). By creating an account or using our Services, you acknowledge that you have read, understood, and agree to be bound by these Terms.'}),e.jsx("p",{className:"text-muted-foreground",children:"We reserve the right to modify these Terms at any time. Continued use of the Services after changes constitutes acceptance of the modified Terms."})]})]}),e.jsxs(se,{className:"mb-6",children:[e.jsx(_e,{children:e.jsxs(Te,{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:e.jsx(fs,{className:"h-5 w-5 text-green-600"})}),"2. Eligibility"]})}),e.jsx(oe,{children:e.jsxs("ul",{className:"space-y-3",children:[e.jsxs("li",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-green-500 rounded-full mt-2 flex-shrink-0"}),e.jsx("span",{className:"text-muted-foreground",children:"You must be at least 18 years old to use ominbiz"})]}),e.jsxs("li",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-green-500 rounded-full mt-2 flex-shrink-0"}),e.jsx("span",{className:"text-muted-foreground",children:"You must have the authority to enter into these Terms on behalf of your business"})]}),e.jsxs("li",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-green-500 rounded-full mt-2 flex-shrink-0"}),e.jsx("span",{className:"text-muted-foreground",children:"You must provide accurate and complete information during registration"})]}),e.jsxs("li",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-green-500 rounded-full mt-2 flex-shrink-0"}),e.jsx("span",{className:"text-muted-foreground",children:"You must comply with all applicable laws and regulations"})]})]})})]}),e.jsxs(se,{className:"mb-6",children:[e.jsx(_e,{children:e.jsx(Te,{children:"3. Account Registration and Security"})}),e.jsxs(oe,{className:"space-y-4",children:[e.jsx("p",{className:"text-muted-foreground",children:"To access certain features, you must create an account. You agree to:"}),e.jsxs("ul",{className:"space-y-3",children:[e.jsxs("li",{className:"flex items-start gap-3",children:[e.jsx(ks,{className:"h-4 w-4 text-green-500 mt-1 flex-shrink-0"}),e.jsx("span",{className:"text-muted-foreground",children:"Provide accurate, current, and complete information"})]}),e.jsxs("li",{className:"flex items-start gap-3",children:[e.jsx(ks,{className:"h-4 w-4 text-green-500 mt-1 flex-shrink-0"}),e.jsx("span",{className:"text-muted-foreground",children:"Maintain and update your information to keep it accurate"})]}),e.jsxs("li",{className:"flex items-start gap-3",children:[e.jsx(ks,{className:"h-4 w-4 text-green-500 mt-1 flex-shrink-0"}),e.jsx("span",{className:"text-muted-foreground",children:"Maintain the security of your password and account"})]}),e.jsxs("li",{className:"flex items-start gap-3",children:[e.jsx(ks,{className:"h-4 w-4 text-green-500 mt-1 flex-shrink-0"}),e.jsx("span",{className:"text-muted-foreground",children:"Immediately notify us of any unauthorized access"})]}),e.jsxs("li",{className:"flex items-start gap-3",children:[e.jsx(ks,{className:"h-4 w-4 text-green-500 mt-1 flex-shrink-0"}),e.jsx("span",{className:"text-muted-foreground",children:"Be responsible for all activities under your account"})]})]})]})]}),e.jsxs(se,{className:"mb-6",children:[e.jsx(_e,{children:e.jsxs(Te,{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:e.jsx(Ba,{className:"h-5 w-5 text-green-600"})}),"4. Subscription and Payment Terms"]})}),e.jsxs(oe,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-2",children:"Subscription Plans"}),e.jsx("p",{className:"text-muted-foreground mb-3",children:"ominbiz offers various subscription tiers (Client, Standard, Professional, Premium, Enterprise) with different features and pricing."})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-2",children:"Billing"}),e.jsxs("ul",{className:"space-y-2",children:[e.jsxs("li",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-green-500 rounded-full mt-2 flex-shrink-0"}),e.jsx("span",{className:"text-muted-foreground",children:"Subscription fees are billed in advance on a monthly or annual basis"})]}),e.jsxs("li",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-green-500 rounded-full mt-2 flex-shrink-0"}),e.jsx("span",{className:"text-muted-foreground",children:"All fees are non-refundable except as required by law"})]}),e.jsxs("li",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-green-500 rounded-full mt-2 flex-shrink-0"}),e.jsx("span",{className:"text-muted-foreground",children:"You authorize us to charge your payment method automatically"})]}),e.jsxs("li",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-green-500 rounded-full mt-2 flex-shrink-0"}),e.jsx("span",{className:"text-muted-foreground",children:"Failure to pay may result in service suspension or termination"})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-2",children:"Free Trial"}),e.jsx("p",{className:"text-muted-foreground",children:"Free trials are available for eligible plans. You will be charged automatically at the end of the trial period unless you cancel before it ends."})]})]})]}),e.jsxs(se,{className:"mb-6",children:[e.jsx(_e,{children:e.jsxs(Te,{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:e.jsx(G5,{className:"h-5 w-5 text-green-600"})}),"5. Acceptable Use Policy"]})}),e.jsxs(oe,{className:"space-y-4",children:[e.jsx("p",{className:"text-muted-foreground",children:"You agree NOT to:"}),e.jsxs("ul",{className:"space-y-3",children:[e.jsxs("li",{className:"flex items-start gap-3",children:[e.jsx(cr,{className:"h-4 w-4 text-red-500 mt-1 flex-shrink-0"}),e.jsx("span",{className:"text-muted-foreground",children:"Violate any laws or regulations"})]}),e.jsxs("li",{className:"flex items-start gap-3",children:[e.jsx(cr,{className:"h-4 w-4 text-red-500 mt-1 flex-shrink-0"}),e.jsx("span",{className:"text-muted-foreground",children:"Infringe on intellectual property rights"})]}),e.jsxs("li",{className:"flex items-start gap-3",children:[e.jsx(cr,{className:"h-4 w-4 text-red-500 mt-1 flex-shrink-0"}),e.jsx("span",{className:"text-muted-foreground",children:"Upload malicious code, viruses, or harmful content"})]}),e.jsxs("li",{className:"flex items-start gap-3",children:[e.jsx(cr,{className:"h-4 w-4 text-red-500 mt-1 flex-shrink-0"}),e.jsx("span",{className:"text-muted-foreground",children:"Attempt to gain unauthorized access to our systems"})]}),e.jsxs("li",{className:"flex items-start gap-3",children:[e.jsx(cr,{className:"h-4 w-4 text-red-500 mt-1 flex-shrink-0"}),e.jsx("span",{className:"text-muted-foreground",children:"Interfere with the operation of the Services"})]}),e.jsxs("li",{className:"flex items-start gap-3",children:[e.jsx(cr,{className:"h-4 w-4 text-red-500 mt-1 flex-shrink-0"}),e.jsx("span",{className:"text-muted-foreground",children:"Use the Services for illegal or fraudulent activities"})]}),e.jsxs("li",{className:"flex items-start gap-3",children:[e.jsx(cr,{className:"h-4 w-4 text-red-500 mt-1 flex-shrink-0"}),e.jsx("span",{className:"text-muted-foreground",children:"Share your account credentials with unauthorized parties"})]}),e.jsxs("li",{className:"flex items-start gap-3",children:[e.jsx(cr,{className:"h-4 w-4 text-red-500 mt-1 flex-shrink-0"}),e.jsx("span",{className:"text-muted-foreground",children:"Reverse engineer, decompile, or disassemble the platform"})]})]})]})]}),e.jsxs(se,{className:"mb-6",children:[e.jsx(_e,{children:e.jsx(Te,{children:"6. Data Ownership and License"})}),e.jsxs(oe,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-2",children:"Your Data"}),e.jsx("p",{className:"text-muted-foreground",children:"You retain all rights to your business data. By using ominbiz, you grant us a limited license to use, store, and process your data solely to provide and improve our Services."})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-2",children:"Our Platform"}),e.jsx("p",{className:"text-muted-foreground",children:"ominbiz and all intellectual property rights in the platform remain our property. You are granted a limited, non-exclusive, non-transferable license to use the Services."})]})]})]}),e.jsxs(se,{className:"mb-6",children:[e.jsx(_e,{children:e.jsx(Te,{children:"7. Service Availability and Support"})}),e.jsxs(oe,{className:"space-y-4",children:[e.jsx("p",{className:"text-muted-foreground",children:"We strive to provide 99.9% uptime but do not guarantee uninterrupted access. We may perform maintenance, updates, or improvements that may temporarily affect service availability."}),e.jsx("p",{className:"text-muted-foreground",children:"Support is provided according to your subscription tier. Response times and support channels vary by plan."})]})]}),e.jsxs(se,{className:"mb-6",children:[e.jsx(_e,{children:e.jsx(Te,{children:"8. Termination"})}),e.jsxs(oe,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-2",children:"By You"}),e.jsx("p",{className:"text-muted-foreground",children:"You may cancel your subscription at any time through your account settings. Cancellation takes effect at the end of your current billing period."})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-2",children:"By Us"}),e.jsx("p",{className:"text-muted-foreground mb-3",children:"We may suspend or terminate your account if you:"}),e.jsxs("ul",{className:"space-y-2",children:[e.jsxs("li",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-green-500 rounded-full mt-2 flex-shrink-0"}),e.jsx("span",{className:"text-muted-foreground",children:"Violate these Terms"})]}),e.jsxs("li",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-green-500 rounded-full mt-2 flex-shrink-0"}),e.jsx("span",{className:"text-muted-foreground",children:"Fail to pay fees"})]}),e.jsxs("li",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-green-500 rounded-full mt-2 flex-shrink-0"}),e.jsx("span",{className:"text-muted-foreground",children:"Engage in fraudulent or illegal activity"})]}),e.jsxs("li",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-green-500 rounded-full mt-2 flex-shrink-0"}),e.jsx("span",{className:"text-muted-foreground",children:"Pose a security risk to our platform"})]})]})]})]})]}),e.jsxs(se,{className:"mb-6",children:[e.jsx(_e,{children:e.jsx(Te,{children:"9. Disclaimers and Limitations of Liability"})}),e.jsxs(oe,{className:"space-y-4",children:[e.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 p-4 rounded-lg",children:[e.jsx("p",{className:"text-sm font-medium text-yellow-900 mb-2",children:"IMPORTANT LEGAL NOTICE"}),e.jsx("p",{className:"text-sm text-yellow-800",children:'THE SERVICES ARE PROVIDED "AS IS" AND "AS AVAILABLE" WITHOUT WARRANTIES OF ANY KIND, EITHER EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE, OR NON-INFRINGEMENT.'})]}),e.jsx("p",{className:"text-muted-foreground",children:"TO THE MAXIMUM EXTENT PERMITTED BY LAW, ominbiz SHALL NOT BE LIABLE FOR ANY INDIRECT, INCIDENTAL, SPECIAL, CONSEQUENTIAL, OR PUNITIVE DAMAGES, OR ANY LOSS OF PROFITS OR REVENUES, WHETHER INCURRED DIRECTLY OR INDIRECTLY, OR ANY LOSS OF DATA, USE, GOODWILL, OR OTHER INTANGIBLE LOSSES."})]})]}),e.jsxs(se,{className:"mb-6",children:[e.jsx(_e,{children:e.jsx(Te,{children:"10. Indemnification"})}),e.jsx(oe,{children:e.jsx("p",{className:"text-muted-foreground",children:"You agree to indemnify and hold ominbiz harmless from any claims, damages, losses, liabilities, and expenses (including legal fees) arising from your use of the Services, violation of these Terms, or infringement of any third-party rights."})})]}),e.jsxs(se,{className:"mb-6",children:[e.jsx(_e,{children:e.jsx(Te,{children:"11. Governing Law and Dispute Resolution"})}),e.jsx(oe,{className:"space-y-4",children:e.jsx("p",{className:"text-muted-foreground",children:"These Terms are governed by the laws of Kenya. Any disputes arising from these Terms or the Services shall be resolved through arbitration in Nairobi, Kenya, or through the courts of Kenya."})})]}),e.jsxs(se,{className:"mb-6",children:[e.jsx(_e,{children:e.jsx(Te,{children:"12. Changes to Terms"})}),e.jsx(oe,{children:e.jsx("p",{className:"text-muted-foreground",children:"We reserve the right to modify these Terms at any time. We will notify you of material changes via email or through the platform. Your continued use of the Services after such notification constitutes acceptance of the modified Terms."})})]}),e.jsxs(se,{className:"border-green-200 bg-green-50",children:[e.jsx(_e,{children:e.jsx(Te,{className:"text-green-900",children:"13. Contact Information"})}),e.jsxs(oe,{className:"space-y-3",children:[e.jsx("p",{className:"text-green-800",children:"For questions about these Terms of Service, please contact us:"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-3 text-green-800",children:[e.jsx(Ka,{className:"h-4 w-4"}),e.jsx("span",{children:"legal@ominbiz.com"})]}),e.jsxs("div",{className:"flex items-center gap-3 text-green-800",children:[e.jsx(fs,{className:"h-4 w-4"}),e.jsx("span",{children:"ominbiz Limited, Nairobi, Kenya"})]})]}),e.jsx("div",{className:"mt-4 pt-4 border-t border-green-200",children:e.jsx("p",{className:"text-sm text-green-800",children:"By using ominbiz, you acknowledge that you have read and understood these Terms of Service and agree to be bound by them. Thank you for choosing ominbiz!"})})]})]}),e.jsxs("div",{className:"mt-8 p-6 bg-muted/30 rounded-lg",children:[e.jsx("h3",{className:"font-semibold mb-4",children:"Related Documents"}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsx(is,{to:"/privacy",className:"text-green-600 hover:text-green-700 font-medium",children:" Privacy Policy"}),e.jsx(is,{to:"/contact",className:"text-green-600 hover:text-green-700 font-medium",children:" Contact Support"}),e.jsx(is,{to:"/pricing",className:"text-green-600 hover:text-green-700 font-medium",children:" View Pricing"})]})]})]})}),e.jsx(wd,{})]})}const iG=()=>{const[t,s]=N.useState(""),[a,n]=N.useState({subject:"",category:"",message:"",priority:"medium"}),i=[{id:"getting-started",title:"Getting Started",icon:go,faqs:[{question:"How do I set up my ominbiz account?",answer:"To set up your account, click on Sign Up, fill in your business details, verify your email, and complete the onboarding process."},{question:"What features are included in the free plan?",answer:"The free plan includes basic inventory management, up to 100 products, basic reporting, and email support."},{question:"How do I add my first product?",answer:"Go to Products > Add Product, fill in the product details including name, price, category, and stock quantity."}]},{id:"inventory",title:"Inventory Management",icon:cs,faqs:[{question:"How do I track stock levels?",answer:"Stock levels are automatically updated when you make sales or receive inventory. You can also manually adjust stock in the Inventory section."},{question:"Can I set up low stock alerts?",answer:"Yes, you can set reorder levels for each product. When stock falls below this level, you'll receive notifications."},{question:"How do I manage multiple locations?",answer:"Go to Locations to add and manage multiple business locations. Each location can have separate inventory tracking."}]},{id:"payments",title:"Payments & Billing",icon:Ba,faqs:[{question:"What payment methods do you accept?",answer:"We accept M-Pesa, PayPal, Visa, Mastercard, and bank transfers for subscription payments."},{question:"How do I set up M-Pesa integration?",answer:"Go to Settings > Payment Integration, enter your M-Pesa business details, and follow the verification process."},{question:"Can I process customer payments through the system?",answer:"Yes, you can process payments through our integrated payment gateway for both online and in-person sales."}]},{id:"reports",title:"Reports & Analytics",icon:Mn,faqs:[{question:"How do I generate sales reports?",answer:"Go to Finances > Reports to generate various sales reports including daily, weekly, monthly, and custom date ranges."},{question:"Can I export data to Excel?",answer:"Yes, all reports can be exported to Excel, PDF, or CSV formats for further analysis."},{question:"How do I track business performance?",answer:"Use the Dashboard overview and AI Insights section to monitor key performance indicators and business trends."}]}],c=[{title:"Live Chat",description:"Get instant help from our support team",icon:wo,action:"Start Chat",available:"24/7"},{title:"Phone Support",description:"Speak directly with our experts",icon:ia,action:"Call Now",available:"Mon-Fri 8AM-6PM"},{title:"Email Support",description:"Send us a detailed message",icon:fa,action:"Send Email",available:"Response within 24hrs"},{title:"Video Tutorial",description:"Watch step-by-step guides",icon:za,action:"Watch Now",available:"On-demand"}],d=f=>{if(f.preventDefault(),!a.subject||!a.message){R.error("Please fill in all required fields");return}R.success("Support ticket submitted successfully! We'll get back to you within 24 hours."),n({subject:"",category:"",message:"",priority:"medium"})},h=i.map(f=>({...f,faqs:f.faqs.filter(g=>g.question.toLowerCase().includes(t.toLowerCase())||g.answer.toLowerCase().includes(t.toLowerCase()))})).filter(f=>f.faqs.length>0);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Help & Support"}),e.jsx("p",{className:"text-muted-foreground",children:"Get help with ominbiz features and find answers to common questions"})]}),e.jsx(ze,{variant:"outline",className:"text-xs",children:"Support Center"})]}),e.jsx(se,{children:e.jsx(oe,{className:"p-6",children:e.jsxs("div",{className:"relative",children:[e.jsx(Da,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),e.jsx(we,{placeholder:"Search for help articles, features, or common issues...",value:t,onChange:f=>s(f.target.value),className:"pl-10"})]})})}),e.jsxs(Ha,{defaultValue:"faq",className:"space-y-6",children:[e.jsxs(Xa,{className:"grid w-full grid-cols-3",children:[e.jsx(Tt,{value:"faq",children:"FAQ"}),e.jsx(Tt,{value:"support",children:"Contact Support"}),e.jsx(Tt,{value:"resources",children:"Resources"})]}),e.jsxs(kt,{value:"faq",className:"space-y-6",children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:c.map((f,g)=>e.jsx(se,{className:"hover:shadow-md transition-shadow",children:e.jsxs(oe,{className:"p-4 text-center",children:[e.jsx(f.icon,{className:"h-8 w-8 mx-auto mb-2 text-primary"}),e.jsx("h3",{className:"font-semibold mb-1",children:f.title}),e.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:f.description}),e.jsx(ze,{variant:"outline",className:"text-xs mb-3",children:f.available}),e.jsx(I,{size:"sm",className:"w-full",onClick:()=>{switch(f.title){case"Live Chat":R.success("Opening live chat..."),window.open("https://tawk.to/chat/ominbiz","_blank");break;case"Phone Support":window.location.href="tel:+254758175275",R.success("Opening phone dialer...");break;case"Email Support":window.location.href="mailto:ominbizsolutions@gmail.com?subject=Support Request",R.success("Opening email client...");break;case"Video Tutorial":window.open("/tutorials","_blank"),R.success("Opening video tutorials...");break;default:R.info(`${f.title} feature coming soon!`)}},children:f.action})]})},g))}),e.jsx("div",{className:"space-y-6",children:(t?h:i).map(f=>e.jsxs(se,{children:[e.jsx(_e,{children:e.jsxs(Te,{className:"flex items-center gap-2",children:[e.jsx(f.icon,{className:"h-5 w-5"}),f.title]})}),e.jsx(oe,{className:"space-y-4",children:f.faqs.map((g,p)=>e.jsxs("div",{className:"border-b pb-4 last:border-b-0",children:[e.jsxs("h4",{className:"font-medium mb-2 flex items-center gap-2",children:[e.jsx(Xy,{className:"h-4 w-4 text-primary"}),g.question]}),e.jsx("p",{className:"text-muted-foreground text-sm pl-6",children:g.answer})]},p))})]},f.id))})]}),e.jsx(kt,{value:"support",className:"space-y-6",children:e.jsxs(se,{children:[e.jsxs(_e,{children:[e.jsx(Te,{children:"Submit a Support Ticket"}),e.jsx(vt,{children:"Can't find what you're looking for? Send us a message and we'll help you out."})]}),e.jsx(oe,{children:e.jsxs("form",{onSubmit:d,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Subject *"}),e.jsx(we,{value:a.subject,onChange:f=>n({...a,subject:f.target.value}),placeholder:"Brief description of your issue"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Category"}),e.jsxs("select",{className:"w-full p-2 border rounded-md",value:a.category,onChange:f=>n({...a,category:f.target.value}),children:[e.jsx("option",{value:"",children:"Select a category"}),e.jsx("option",{value:"technical",children:"Technical Issue"}),e.jsx("option",{value:"billing",children:"Billing & Payments"}),e.jsx("option",{value:"feature",children:"Feature Request"}),e.jsx("option",{value:"general",children:"General Question"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Priority"}),e.jsxs("select",{className:"w-full p-2 border rounded-md",value:a.priority,onChange:f=>n({...a,priority:f.target.value}),children:[e.jsx("option",{value:"low",children:"Low"}),e.jsx("option",{value:"medium",children:"Medium"}),e.jsx("option",{value:"high",children:"High"}),e.jsx("option",{value:"urgent",children:"Urgent"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Message *"}),e.jsx(Gs,{value:a.message,onChange:f=>n({...a,message:f.target.value}),placeholder:"Please describe your issue in detail...",rows:5})]}),e.jsxs(I,{type:"submit",className:"w-full",children:[e.jsx(mn,{className:"h-4 w-4 mr-2"}),"Submit Support Ticket"]})]})})]})}),e.jsx(kt,{value:"resources",className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[e.jsxs(se,{children:[e.jsx(_e,{children:e.jsxs(Te,{className:"flex items-center gap-2",children:[e.jsx(za,{className:"h-5 w-5"}),"Video Tutorials"]})}),e.jsxs(oe,{children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Step-by-step video guides for all ominbiz features"}),e.jsx(I,{variant:"outline",className:"w-full",children:"Watch Tutorials"})]})]}),e.jsxs(se,{children:[e.jsx(_e,{children:e.jsxs(Te,{className:"flex items-center gap-2",children:[e.jsx(Ka,{className:"h-5 w-5"}),"Documentation"]})}),e.jsxs(oe,{children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Comprehensive guides and API documentation"}),e.jsx(I,{variant:"outline",className:"w-full",children:"Read Docs"})]})]}),e.jsxs(se,{children:[e.jsx(_e,{children:e.jsxs(Te,{className:"flex items-center gap-2",children:[e.jsx(fs,{className:"h-5 w-5"}),"Community"]})}),e.jsxs(oe,{children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Connect with other ominbiz users and share tips"}),e.jsx(I,{variant:"outline",className:"w-full",children:"Join Community"})]})]})]})})]})]})},Kc=(t="trend",s=30)=>{const a=[];for(let i=0;i<s;i++){const c=new Date;c.setDate(c.getDate()-(s-i-1));const d=t==="growth"?i*20:t==="decline"?-i*10:Math.sin(i/5)*100,h=(Math.random()-.5)*200;a.push({name:c.toLocaleDateString("en-US",{month:"short",day:"numeric"}),date:c.toISOString().split("T")[0],value:Math.max(0,1e3+d+h),revenue:Math.max(0,1e3+d+h),profit:Math.max(0,(1e3+d+h)*.3),loss:Math.max(0,(1e3+d+h)*.1),orders:Math.floor(20+Math.random()*50+i*2),customers:Math.floor(10+Math.random()*30+i),products:Math.floor(5+Math.random()*15)})}return a},oG=()=>{const{isAuthenticated:t}=qs(),[s,a]=N.useState(!0),[n,i]=N.useState(null),[c,d]=N.useState({orders:[],products:[],salesData:[],customerData:[]}),[h,f]=N.useState({overview:{totalRevenue:0,totalOrders:0,totalCustomers:0,averageOrderValue:0,growthRate:0,conversionRate:3.2},salesTrends:{daily:[],topProducts:[]},customerInsights:{demographics:{ageGroups:[],locations:[]},behavior:{averageSessionTime:"0m 0s",bounceRate:0,repeatCustomers:0,customerLifetimeValue:0}},performance:{goals:[{name:"Monthly Revenue",target:15e4,current:0,percentage:0},{name:"New Customers",target:200,current:0,percentage:0},{name:"Order Volume",target:1500,current:0,percentage:0},{name:"Customer Satisfaction",target:95,current:92,percentage:96.8}],kpis:{revenueGrowth:0,customerGrowth:0,orderGrowth:0,profitMargin:0}}}),[g,p]=N.useState(!1),[v,y]=N.useState("7d"),_=async()=>{if(t){a(!0),i(null);try{const D={Authorization:`Bearer ${localStorage.getItem("token")}`},[M,P,G]=await Promise.all([ke.get("/orders",{headers:D}).catch(()=>({data:[]})),ke.get("/products",{headers:D}).catch(()=>({data:[]})),ke.get("/transactions",{headers:D}).catch(()=>({data:[]}))]),K=M.data||[],z=P.data||[],J=G.data||[];console.log(" Analytics data loaded:",{orders:K.length,products:z.length,transactions:J.length}),S(K,z,J),d({orders:K,products:z,salesData:T(K),customerData:E(K)})}catch(U){console.error(" Error fetching analytics:",U),i(U.message),R.error("Failed to load analytics data")}finally{a(!1)}}},S=(U,D,M)=>{const P=U.reduce((ce,F)=>ce+(Number(F.total)||0),0),G=U.length,K=new Set(U.map(ce=>ce.customer?.email).filter(Boolean)).size,z=G>0?P/G:0,J=new Date,W=new Date(J.getFullYear(),J.getMonth()-1,1),he=new Date(J.getFullYear(),J.getMonth(),1),V=U.filter(ce=>{const F=new Date(ce.date||ce.createdAt);return F>=W&&F<he}),ae=U.filter(ce=>new Date(ce.date||ce.createdAt)>=he),ge=V.reduce((ce,F)=>ce+(Number(F.total)||0),0),Z=ae.reduce((ce,F)=>ce+(Number(F.total)||0),0),ee=ge>0?(Z-ge)/ge*100:0,te={};U.forEach(ce=>{ce.items?.forEach(F=>{const re=F.product||F.name;te[re]||(te[re]={name:F.name||"Unknown",sales:0,revenue:0}),te[re].sales+=F.quantity||1,te[re].revenue+=(F.price||0)*(F.quantity||1)})});const X=Object.values(te).sort((ce,F)=>F.revenue-ce.revenue).slice(0,5);f({overview:{totalRevenue:P,totalOrders:G,totalCustomers:K,averageOrderValue:z,growthRate:ee,conversionRate:3.2},salesTrends:{daily:b(U),topProducts:X.length>0?X:h.salesTrends.topProducts},customerInsights:h.customerInsights,performance:{...h.performance,goals:[{name:"Monthly Revenue",target:15e4,current:Z,percentage:Z/15e4*100},{name:"New Customers",target:200,current:K,percentage:K/200*100},{name:"Order Volume",target:1500,current:G,percentage:G/1500*100},{name:"Customer Satisfaction",target:95,current:92,percentage:96.8}],kpis:{revenueGrowth:ee,customerGrowth:(()=>{const ce=new Set(V.map(re=>re.customer?.email).filter(Boolean)).size,F=new Set(ae.map(re=>re.customer?.email).filter(Boolean)).size;return ce>0?(F-ce)/ce*100:0})(),orderGrowth:(ae.length-V.length)/Math.max(V.length,1)*100,profitMargin:P>0?P*.25/P*100:0}}})},b=U=>{const D=[],M=new Date;for(let P=6;P>=0;P--){const G=new Date(M);G.setDate(G.getDate()-P);const K=G.toISOString().split("T")[0],z=U.filter(W=>new Date(W.date||W.createdAt).toISOString().split("T")[0]===K),J=z.reduce((W,he)=>W+(Number(he.total)||0),0);D.push({date:K,revenue:J,orders:z.length})}return D},T=U=>{const D=[],M=new Date;for(let P=29;P>=0;P--){const G=new Date(M);G.setDate(G.getDate()-P);const K=G.toISOString().split("T")[0],z=U.filter(W=>new Date(W.date||W.createdAt).toISOString().split("T")[0]===K),J=z.reduce((W,he)=>W+(Number(he.total)||0),0);D.push({date:K,name:G.toLocaleDateString("en-US",{month:"short",day:"numeric"}),value:J,orders:z.length})}return D},E=U=>{const D=[],M=new Date;for(let P=29;P>=0;P--){const G=new Date(M);G.setDate(G.getDate()-P);const K=G.toISOString().split("T")[0],z=U.filter(W=>new Date(W.date||W.createdAt).toISOString().split("T")[0]===K),J=new Set(z.map(W=>W.customer?.email).filter(Boolean)).size;D.push({date:K,name:G.toLocaleDateString("en-US",{month:"short",day:"numeric"}),value:J})}return D};N.useEffect(()=>{_();const U=setInterval(_,12e4);return()=>clearInterval(U)},[t]);const A=async()=>{p(!0),await _(),p(!1),R.success("Analytics data refreshed!")},O=U=>{R.info(`Generating ${U} report...`,{duration:2e3});const D={reportType:U,generatedAt:new Date().toISOString(),period:v,data:{overview:h.overview,salesTrends:h.salesTrends,customerInsights:h.customerInsights,performance:h.performance}},M=JSON.stringify(D,null,2),P=new Blob([M],{type:"application/json"}),G=URL.createObjectURL(P),K=document.createElement("a");K.href=G,K.download=`${U.toLowerCase().replace(/\s+/g,"-")}-report-${Date.now()}.json`,document.body.appendChild(K),K.click(),document.body.removeChild(K),URL.revokeObjectURL(G),R.success(`${U} report downloaded!`)},Q=U=>new Intl.NumberFormat("en-KE",{style:"currency",currency:"KES"}).format(U),q=U=>`${U.toFixed(1)}%`;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Analytics Dashboard"}),e.jsx("p",{className:"text-muted-foreground",children:"Comprehensive business insights and performance metrics"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("select",{value:v,onChange:U=>y(U.target.value),className:"px-3 py-2 border rounded-md",children:[e.jsx("option",{value:"7d",children:"Last 7 days"}),e.jsx("option",{value:"30d",children:"Last 30 days"}),e.jsx("option",{value:"90d",children:"Last 90 days"}),e.jsx("option",{value:"1y",children:"Last year"})]}),e.jsxs(I,{onClick:A,disabled:g,variant:"outline",children:[e.jsx(Cs,{className:`h-4 w-4 mr-2 ${g?"animate-spin":""}`}),"Refresh"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx(se,{children:e.jsx(oe,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Total Revenue"}),e.jsx("p",{className:"text-2xl font-bold",children:Q(h.overview.totalRevenue)}),e.jsxs("p",{className:"text-xs text-green-600 flex items-center mt-1",children:[e.jsx(aa,{className:"h-3 w-3 mr-1"}),"+",q(h.overview.growthRate)," from last month"]})]}),e.jsx(Sa,{className:"h-8 w-8 text-green-600"})]})})}),e.jsx(se,{children:e.jsx(oe,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Total Orders"}),e.jsx("p",{className:"text-2xl font-bold",children:h.overview.totalOrders.toLocaleString()}),e.jsxs("p",{className:`text-xs flex items-center mt-1 ${h.performance.kpis.orderGrowth>=0?"text-green-600":"text-red-600"}`,children:[h.performance.kpis.orderGrowth>=0?e.jsx(aa,{className:"h-3 w-3 mr-1"}):e.jsx(No,{className:"h-3 w-3 mr-1"}),h.performance.kpis.orderGrowth>=0?"+":"",q(Math.abs(h.performance.kpis.orderGrowth))," from last month"]})]}),e.jsx(Bs,{className:"h-8 w-8 text-blue-600"})]})})}),e.jsx(se,{children:e.jsx(oe,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Total Customers"}),e.jsx("p",{className:"text-2xl font-bold",children:h.overview.totalCustomers.toLocaleString()}),e.jsxs("p",{className:`text-xs flex items-center mt-1 ${h.performance.kpis.customerGrowth>=0?"text-green-600":"text-red-600"}`,children:[h.performance.kpis.customerGrowth>=0?e.jsx(aa,{className:"h-3 w-3 mr-1"}):e.jsx(No,{className:"h-3 w-3 mr-1"}),h.performance.kpis.customerGrowth>=0?"+":"",q(Math.abs(h.performance.kpis.customerGrowth))," from last month"]})]}),e.jsx(fs,{className:"h-8 w-8 text-purple-600"})]})})}),e.jsx(se,{children:e.jsx(oe,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Avg Order Value"}),e.jsx("p",{className:"text-2xl font-bold",children:Q(h.overview.averageOrderValue)}),h.overview.totalOrders>0?e.jsxs("p",{className:"text-xs text-muted-foreground flex items-center mt-1",children:["Based on ",h.overview.totalOrders," orders"]}):e.jsx("p",{className:"text-xs text-muted-foreground flex items-center mt-1",children:"No orders yet"})]}),e.jsx(_o,{className:"h-8 w-8 text-orange-600"})]})})})]}),e.jsxs(Ha,{defaultValue:"sales",className:"space-y-6",children:[e.jsxs(Xa,{className:"grid w-full grid-cols-4",children:[e.jsx(Tt,{value:"sales",children:"Sales Analytics"}),e.jsx(Tt,{value:"customers",children:"Customer Insights"}),e.jsx(Tt,{value:"performance",children:"Performance"}),e.jsx(Tt,{value:"reports",children:"Reports"})]}),e.jsx(kt,{value:"sales",className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx(Ns,{title:"Sales Revenue Trends",description:"Last 30 days of revenue from real orders",type:"area",data:s?Kc("growth",30):c.salesData,height:350,autoRefresh:!0,refreshInterval:12e4}),e.jsx(Ns,{title:"Order Volume Trends",description:"Daily order count from database",type:"line",data:s?Kc("trend",30):c.salesData,height:350,autoRefresh:!0,refreshInterval:12e4}),e.jsxs(se,{children:[e.jsxs(_e,{children:[e.jsxs(Te,{className:"flex items-center gap-2",children:[e.jsx(cs,{className:"h-5 w-5"}),"Top Products"]}),e.jsx(vt,{children:"Best performing products by revenue"})]}),e.jsx(oe,{children:e.jsx("div",{className:"space-y-4",children:h.salesTrends.topProducts.map((U,D)=>e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium",children:U.name}),e.jsx("span",{className:"text-sm",children:Q(U.revenue)})]}),e.jsxs("div",{className:"flex items-center justify-between text-xs text-muted-foreground",children:[e.jsxs("span",{children:[U.sales," sales"]}),e.jsx(dr,{value:U.sales/250*100,className:"w-20 h-2"})]})]},D))})})]})]})}),e.jsx(kt,{value:"customers",className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx(Ns,{title:"Customer Demographics",description:"Customer distribution from real orders",type:"pie",data:s?[{name:"18-25",value:25},{name:"26-35",value:35},{name:"36-45",value:20},{name:"46-55",value:15},{name:"55+",value:5}]:[{name:"Active Customers",value:h.overview.totalCustomers},{name:"One-time Buyers",value:Math.floor(h.overview.totalCustomers*.3)},{name:"Repeat Customers",value:Math.floor(h.overview.totalCustomers*.7)}],height:350,showControls:!1}),e.jsx(Ns,{title:"Customer Acquisition",description:"Daily unique customers from database",type:"bar",data:s?Kc("growth",30):c.customerData,height:350,autoRefresh:!0,refreshInterval:12e4}),e.jsxs(se,{children:[e.jsxs(_e,{children:[e.jsxs(Te,{className:"flex items-center gap-2",children:[e.jsx(rn,{className:"h-5 w-5"}),"Customer Behavior"]}),e.jsx(vt,{children:"Calculated from order data"})]}),e.jsx(oe,{children:s?e.jsx("div",{className:"space-y-4",children:[1,2,3,4].map(U=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"h-4 w-32 bg-gray-200 rounded animate-pulse"}),e.jsx("div",{className:"h-4 w-20 bg-gray-200 rounded animate-pulse"})]},U))}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm",children:"Total Customers"}),e.jsx("span",{className:"text-sm font-medium",children:h.overview.totalCustomers})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm",children:"Avg Orders per Customer"}),e.jsx("span",{className:"text-sm font-medium",children:h.overview.totalCustomers>0?(h.overview.totalOrders/h.overview.totalCustomers).toFixed(1):"0"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm",children:"Customer Lifetime Value"}),e.jsx("span",{className:"text-sm font-medium",children:Q(h.overview.averageOrderValue*1.5)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm",children:"Repeat Purchase Rate"}),e.jsx("span",{className:"text-sm font-medium",children:(()=>{if(h.overview.totalCustomers===0)return"0%";const U=(h.overview.totalOrders-h.overview.totalCustomers)/h.overview.totalCustomers*100;return U>0?`${U.toFixed(1)}%`:"0%"})()})]})]})})]})]})}),e.jsxs(kt,{value:"performance",className:"space-y-6",children:[e.jsxs(se,{children:[e.jsxs(_e,{children:[e.jsxs(Te,{className:"flex items-center gap-2",children:[e.jsx(_o,{className:"h-5 w-5"}),"Goals & Targets"]}),e.jsx(vt,{children:"Track progress towards monthly goals"})]}),e.jsx(oe,{children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:h.performance.goals.map((U,D)=>e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium",children:U.name}),e.jsxs("span",{className:"text-sm",children:[U.current.toLocaleString()," / ",U.target.toLocaleString()]})]}),e.jsx(dr,{value:U.percentage,className:"h-3"}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[U.percentage.toFixed(1),"% of target achieved"]})]},D))})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(se,{children:e.jsxs(oe,{className:"p-4 text-center",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Revenue Growth"}),e.jsxs("p",{className:"text-2xl font-bold text-green-600",children:["+",h.performance.kpis.revenueGrowth,"%"]})]})}),e.jsx(se,{children:e.jsxs(oe,{className:"p-4 text-center",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Customer Growth"}),e.jsxs("p",{className:"text-2xl font-bold text-blue-600",children:["+",h.performance.kpis.customerGrowth,"%"]})]})}),e.jsx(se,{children:e.jsxs(oe,{className:"p-4 text-center",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Order Growth"}),e.jsxs("p",{className:"text-2xl font-bold text-purple-600",children:["+",h.performance.kpis.orderGrowth,"%"]})]})}),e.jsx(se,{children:e.jsxs(oe,{className:"p-4 text-center",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Profit Margin"}),e.jsxs("p",{className:"text-2xl font-bold text-orange-600",children:[h.performance.kpis.profitMargin,"%"]})]})})]})]}),e.jsx(kt,{value:"reports",className:"space-y-6",children:e.jsxs(se,{children:[e.jsxs(_e,{children:[e.jsxs(Te,{className:"flex items-center gap-2",children:[e.jsx(Mn,{className:"h-5 w-5"}),"Generate Reports"]}),e.jsx(vt,{children:"Export detailed analytics reports"})]}),e.jsx(oe,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.jsxs(I,{variant:"outline",className:"h-20 flex-col hover:bg-blue-50 hover:border-blue-500 transition-colors",onClick:()=>O("Monthly Report"),children:[e.jsx(Ms,{className:"h-6 w-6 mb-2"}),"Monthly Report"]}),e.jsxs(I,{variant:"outline",className:"h-20 flex-col hover:bg-purple-50 hover:border-purple-500 transition-colors",onClick:()=>O("Customer Report"),children:[e.jsx(fs,{className:"h-6 w-6 mb-2"}),"Customer Report"]}),e.jsxs(I,{variant:"outline",className:"h-20 flex-col hover:bg-orange-50 hover:border-orange-500 transition-colors",onClick:()=>O("Product Report"),children:[e.jsx(cs,{className:"h-6 w-6 mb-2"}),"Product Report"]}),e.jsxs(I,{variant:"outline",className:"h-20 flex-col hover:bg-green-50 hover:border-green-500 transition-colors",onClick:()=>O("Financial Report"),children:[e.jsx(Sa,{className:"h-6 w-6 mb-2"}),"Financial Report"]}),e.jsxs(I,{variant:"outline",className:"h-20 flex-col hover:bg-cyan-50 hover:border-cyan-500 transition-colors",onClick:()=>O("Growth Report"),children:[e.jsx(aa,{className:"h-6 w-6 mb-2"}),"Growth Report"]}),e.jsxs(I,{variant:"outline",className:"h-20 flex-col hover:bg-pink-50 hover:border-pink-500 transition-colors",onClick:()=>O("Performance Report"),children:[e.jsx(rn,{className:"h-6 w-6 mb-2"}),"Performance Report"]})]})})]})})]}),e.jsxs("div",{className:"mt-8 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Advanced Analytics"}),e.jsx(ze,{variant:"secondary",children:"Real-time Data"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx(Ns,{title:"Sales Revenue Trends",description:"Real-time revenue from orders",defaultType:"line",data:s?Kc("growth",30):c.salesData,height:350,autoRefresh:!0,refreshInterval:12e4}),e.jsx(Ns,{title:"Order Volume Analysis",description:"Daily order counts from database",defaultType:"bar",data:s?Kc("trend",30):c.salesData,height:350,autoRefresh:!0,refreshInterval:12e4})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx(Ns,{title:"Customer Demographics",description:"Customer segmentation from orders",defaultType:"pie",data:s?[{name:"Segment A",value:30},{name:"Segment B",value:40},{name:"Segment C",value:30}]:[{name:"Active",value:h.overview.totalCustomers},{name:"New",value:Math.floor(h.overview.totalCustomers*.4)},{name:"Returning",value:Math.floor(h.overview.totalCustomers*.6)}],height:350,autoRefresh:!1,refreshInterval:12e4}),e.jsx(Ns,{title:"Customer Acquisition",description:"Daily new customers",defaultType:"area",data:s?Kc("growth",30):c.customerData,height:350,autoRefresh:!0,refreshInterval:12e4})]}),e.jsx("div",{className:"w-full",children:e.jsx(Ns,{title:"Comprehensive Business Analytics",description:"Combined metrics from all data sources",defaultType:"composed",data:s?Kc("growth",30):c.salesData,height:400,autoRefresh:!0,refreshInterval:12e4,fullscreen:!1})})]})]})},lG=()=>{const{user:t,isAuthenticated:s}=qs(),{socket:a,connected:n}=Ra(),[i,c]=N.useState(!0),[d,h]=N.useState(!0),f=N.useRef(null),[g,p]=N.useState({locations:[{id:1,name:"Main Store",address:"123 Business Street, Nairobi",coordinates:{lat:-1.2921,lng:36.8219},status:"active",employees:12,dailyRevenue:15420,customers:156,type:"store"},{id:2,name:"Westlands Branch",address:"456 Westlands Avenue, Nairobi",coordinates:{lat:-1.2676,lng:36.8108},status:"active",employees:8,dailyRevenue:12300,customers:98,type:"branch"},{id:3,name:"Kisumu Branch",address:"789 Kisumu Road, Kisumu",coordinates:{lat:-.0917,lng:34.768},status:"active",employees:10,dailyRevenue:9800,customers:87,type:"branch"},{id:4,name:"Delivery Hub",address:"321 Industrial Area, Nairobi",coordinates:{lat:-1.3197,lng:36.851},status:"active",employees:5,dailyRevenue:0,customers:0,type:"warehouse"}],deliveries:[{id:1,orderId:"ORD-001",customer:"John Doe",address:"Kilimani, Nairobi",coordinates:{lat:-1.2884,lng:36.7856},status:"in_transit",estimatedTime:"15 mins",driver:"Peter Kamau"},{id:2,orderId:"ORD-002",customer:"Jane Smith",address:"Karen, Nairobi",coordinates:{lat:-1.3197,lng:36.7076},status:"delivered",estimatedTime:"Delivered",driver:"Mary Wanjiku"},{id:3,orderId:"ORD-003",customer:"Bob Johnson",address:"Eastleigh, Nairobi",coordinates:{lat:-1.2921,lng:36.857},status:"pending",estimatedTime:"30 mins",driver:"James Mwangi"}],analytics:{totalLocations:4,activeDeliveries:2,completedToday:15,averageDeliveryTime:"22 mins",coverage:"85%"}}),[v,y]=N.useState(null),[_,S]=N.useState(""),[b,T]=N.useState("locations"),[E,A]=N.useState(!1),[O,Q]=N.useState(!1),[q,U]=N.useState(!1),D=async()=>{try{const W=localStorage.getItem("token"),he=await ke.get("/locations",{headers:{Authorization:`Bearer ${W}`}});if(he.data&&Array.isArray(he.data)){const V=he.data.map(ae=>({id:ae._id||ae.id,name:ae.name,address:`${ae.address}, ${ae.city||""}`,coordinates:ae.coordinates||{lat:-1.2921,lng:36.8219},status:ae.status||"active",employees:ae.employees||0,dailyRevenue:ae.revenue||0,customers:ae.customers||0,type:ae.type||"branch",phone:ae.phone,manager:ae.manager,operatingHours:ae.operatingHours}));return p(ae=>({...ae,locations:V,analytics:{...ae.analytics,totalLocations:V.length}})),h(!1),V}}catch(W){console.error("Error fetching locations:",W),R.error("Failed to fetch locations from database"),h(!1)}},M=async()=>{try{const W=localStorage.getItem("token"),he=await ke.get("/orders?status=in_transit,pending",{headers:{Authorization:`Bearer ${W}`}});if(he.data&&Array.isArray(he.data)){const V=he.data.map(ae=>({id:ae._id||ae.id,orderId:ae.orderNumber||`ORD-${ae.id}`,customer:ae.customerName||ae.customer?.name||"Customer",address:ae.deliveryAddress||ae.address,coordinates:ae.deliveryCoordinates||{lat:-1.2921,lng:36.8219},status:ae.status||"pending",estimatedTime:ae.estimatedDelivery||"30 mins",driver:ae.driver||"Assigned"}));p(ae=>({...ae,deliveries:V,analytics:{...ae.analytics,activeDeliveries:V.filter(ge=>ge.status==="in_transit").length}}))}}catch(W){console.error("Error fetching deliveries:",W)}};N.useEffect(()=>{if(a&&n&&i)return a.emit("join_maps",{userId:t?._id}),a.on("location_updated",W=>{p(he=>({...he,locations:he.locations.map(V=>V.id===W.id?{...V,...W}:V)})),R.info(`Location "${W.name}" updated`)}),a.on("location_added",W=>{p(he=>({...he,locations:[...he.locations,W],analytics:{...he.analytics,totalLocations:he.analytics.totalLocations+1}})),R.success(`New location "${W.name}" added`)}),a.on("delivery_updated",W=>{p(he=>({...he,deliveries:he.deliveries.map(V=>V.id===W.id?{...V,...W}:V)}))}),a.on("delivery_started",W=>{p(he=>({...he,deliveries:[...he.deliveries,W],analytics:{...he.analytics,activeDeliveries:he.analytics.activeDeliveries+1}})),R.info(`New delivery started: ${W.orderId}`)}),()=>{a.off("location_updated"),a.off("location_added"),a.off("delivery_updated"),a.off("delivery_started")}},[a,n,i,t]),N.useEffect(()=>{s&&(D(),M())},[s]),N.useEffect(()=>{if(!i&&s)return f.current=setInterval(()=>{D(),M()},3e4),()=>{f.current&&clearInterval(f.current)}},[i,s]);const P=async()=>{A(!0),await Promise.all([D(),M()]),A(!1),R.success("Map data refreshed!")},G=W=>{switch(W){case"active":return"bg-green-500";case"inactive":return"bg-gray-500";case"maintenance":return"bg-yellow-500";case"in_transit":return"bg-blue-500";case"delivered":return"bg-green-500";case"pending":return"bg-orange-500";default:return"bg-gray-500"}},K=W=>{switch(W){case"store":return"";case"branch":return"";case"warehouse":return"";default:return""}},z=g.locations.filter(W=>W.name.toLowerCase().includes(_.toLowerCase())||W.address.toLowerCase().includes(_.toLowerCase())),J=g.deliveries.filter(W=>W.customer.toLowerCase().includes(_.toLowerCase())||W.orderId.toLowerCase().includes(_.toLowerCase()));return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Maps & Locations"}),e.jsxs("p",{className:"text-muted-foreground",children:["Track locations, deliveries, and geographic analytics ",n?e.jsx("span",{className:"text-green-600",children:"  Real-time Connected"}):e.jsx("span",{className:"text-red-600",children:"  Offline Mode"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 border rounded-lg bg-background",children:[e.jsx(Ga,{className:`h-4 w-4 ${i?"text-green-500":"text-gray-400"}`}),e.jsx(ue,{htmlFor:"realtime-sync",className:"text-sm cursor-pointer",children:"Real-time Sync"}),e.jsx(_s,{id:"realtime-sync",checked:i,onCheckedChange:W=>{c(W),R.info(W?"Real-time sync enabled":"Real-time sync disabled")}})]}),e.jsxs(I,{onClick:P,disabled:E||d,variant:"outline",children:[e.jsx(Cs,{className:`h-4 w-4 mr-2 ${E?"animate-spin":""}`}),"Refresh"]}),e.jsxs(I,{variant:"outline",onClick:()=>R.info("Full screen mode - Coming soon"),children:[e.jsx(q5,{className:"h-4 w-4 mr-2"}),"Full Screen"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:[e.jsx(se,{children:e.jsxs(oe,{className:"p-4 text-center",children:[e.jsx(Fr,{className:"h-6 w-6 mx-auto mb-2 text-blue-600"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Locations"}),e.jsx("p",{className:"text-2xl font-bold",children:g.analytics.totalLocations})]})}),e.jsx(se,{children:e.jsxs(oe,{className:"p-4 text-center",children:[e.jsx(N1,{className:"h-6 w-6 mx-auto mb-2 text-green-600"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Active Deliveries"}),e.jsx("p",{className:"text-2xl font-bold",children:g.analytics.activeDeliveries})]})}),e.jsx(se,{children:e.jsxs(oe,{className:"p-4 text-center",children:[e.jsx(cs,{className:"h-6 w-6 mx-auto mb-2 text-purple-600"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Completed Today"}),e.jsx("p",{className:"text-2xl font-bold",children:g.analytics.completedToday})]})}),e.jsx(se,{children:e.jsxs(oe,{className:"p-4 text-center",children:[e.jsx(ps,{className:"h-6 w-6 mx-auto mb-2 text-orange-600"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Avg Delivery Time"}),e.jsx("p",{className:"text-2xl font-bold",children:g.analytics.averageDeliveryTime})]})}),e.jsx(se,{children:e.jsxs(oe,{className:"p-4 text-center",children:[e.jsx(rn,{className:"h-6 w-6 mx-auto mb-2 text-red-600"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Coverage"}),e.jsx("p",{className:"text-2xl font-bold",children:g.analytics.coverage})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsxs(se,{children:[e.jsx(_e,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(Te,{className:"flex items-center gap-2",children:[e.jsx(K5,{className:"h-5 w-5"}),"Interactive Map"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(I,{variant:b==="locations"?"default":"outline",size:"sm",onClick:()=>T("locations"),children:"Locations"}),e.jsx(I,{variant:b==="deliveries"?"default":"outline",size:"sm",onClick:()=>T("deliveries"),children:"Deliveries"})]})]})}),e.jsx(oe,{children:e.jsxs("div",{className:"h-96 bg-gray-100 rounded-lg flex items-center justify-center relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-50 to-green-50"}),e.jsxs("div",{className:"relative z-10 text-center",children:[e.jsx(Fr,{className:"h-12 w-12 mx-auto mb-4 text-blue-600"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Interactive Map View"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:b==="locations"?"Showing business locations":"Showing active deliveries"}),e.jsx(ze,{variant:"outline",children:"Map integration ready - Connect your preferred map service"})]}),b==="locations"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"absolute top-20 left-32 w-6 h-6 bg-red-500 rounded-full flex items-center justify-center text-white text-xs font-bold animate-pulse",children:"1"}),e.jsx("div",{className:"absolute top-32 right-40 w-6 h-6 bg-blue-500 rounded-full flex items-center justify-center text-white text-xs font-bold animate-pulse",children:"2"}),e.jsx("div",{className:"absolute bottom-20 left-20 w-6 h-6 bg-green-500 rounded-full flex items-center justify-center text-white text-xs font-bold animate-pulse",children:"3"})]}),b==="deliveries"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"absolute top-24 right-32 w-4 h-4 bg-orange-500 rounded-full animate-bounce"}),e.jsx("div",{className:"absolute bottom-32 left-40 w-4 h-4 bg-green-500 rounded-full"}),e.jsx("div",{className:"absolute top-40 left-24 w-4 h-4 bg-blue-500 rounded-full animate-pulse"})]})]})})]})}),e.jsxs("div",{className:"space-y-6",children:[e.jsx(se,{children:e.jsx(oe,{className:"p-4",children:e.jsxs("div",{className:"relative",children:[e.jsx(Da,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),e.jsx(we,{placeholder:"Search locations or deliveries...",value:_,onChange:W=>S(W.target.value),className:"pl-10"})]})})}),e.jsxs(Ha,{defaultValue:"locations",className:"space-y-4",children:[e.jsxs(Xa,{className:"grid w-full grid-cols-2",children:[e.jsx(Tt,{value:"locations",children:"Locations"}),e.jsx(Tt,{value:"deliveries",children:"Deliveries"})]}),e.jsx(kt,{value:"locations",className:"space-y-4",children:e.jsxs(se,{children:[e.jsxs(_e,{children:[e.jsx(Te,{className:"text-lg",children:"Business Locations"}),e.jsx(vt,{children:"Manage your business locations"})]}),e.jsx(oe,{className:"space-y-4",children:z.map(W=>e.jsx("div",{className:`p-3 border rounded-lg cursor-pointer transition-colors ${v?.id===W.id?"bg-blue-50 border-blue-200":"hover:bg-gray-50"}`,onClick:()=>y(W),children:e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"text-lg",children:K(W.type)}),e.jsx("h4",{className:"font-medium",children:W.name}),e.jsx("div",{className:`w-2 h-2 rounded-full ${G(W.status)}`})]}),e.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:W.address}),e.jsxs("div",{className:"flex items-center gap-4 text-xs",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(fs,{className:"h-3 w-3"}),W.employees]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Sa,{className:"h-3 w-3"}),"KES ",W.dailyRevenue.toLocaleString()]})]})]})})},W.id))})]})}),e.jsx(kt,{value:"deliveries",className:"space-y-4",children:e.jsxs(se,{children:[e.jsxs(_e,{children:[e.jsx(Te,{className:"text-lg",children:"Active Deliveries"}),e.jsx(vt,{children:"Track ongoing deliveries"})]}),e.jsx(oe,{className:"space-y-4",children:J.map(W=>e.jsxs("div",{className:"p-3 border rounded-lg",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:W.orderId}),e.jsx("p",{className:"text-sm text-muted-foreground",children:W.customer})]}),e.jsx(ze,{variant:"outline",className:`${G(W.status)} text-white border-none`,children:W.status.replace("_"," ")})]}),e.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:W.address}),e.jsxs("div",{className:"flex items-center justify-between text-xs",children:[e.jsxs("span",{children:["Driver: ",W.driver]}),e.jsx("span",{className:"font-medium",children:W.estimatedTime})]})]},W.id))})]})})]}),e.jsxs(se,{children:[e.jsx(_e,{children:e.jsx(Te,{className:"text-lg",children:"Quick Actions"})}),e.jsxs(oe,{className:"space-y-2",children:[e.jsxs(I,{variant:"outline",className:"w-full justify-start",onClick:()=>window.open("/dashboard/locations","_blank"),children:[e.jsx(Fr,{className:"h-4 w-4 mr-2"}),"Manage Locations"]}),e.jsxs(I,{variant:"outline",className:"w-full justify-start",onClick:()=>R.info("Route planning - Coming soon"),children:[e.jsx(N1,{className:"h-4 w-4 mr-2"}),"Plan Route"]}),e.jsxs(I,{variant:"outline",className:"w-full justify-start",onClick:()=>T("deliveries"),children:[e.jsx(qv,{className:"h-4 w-4 mr-2"}),"Track Deliveries"]}),e.jsxs(I,{variant:"outline",className:"w-full justify-start",onClick:()=>{Q(!O),R.info(O?"Heatmap disabled":"Heatmap enabled")},children:[e.jsx(_o,{className:"h-4 w-4 mr-2"}),O?"Hide":"Show"," Heatmap"]})]})]}),e.jsxs(se,{children:[e.jsx(_e,{children:e.jsx(Te,{className:"text-lg",children:"Map Settings"})}),e.jsxs(oe,{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(ue,{htmlFor:"show-routes",className:"text-sm",children:"Show Routes"}),e.jsx(_s,{id:"show-routes",checked:q,onCheckedChange:U})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(ue,{htmlFor:"show-heatmap",className:"text-sm",children:"Revenue Heatmap"}),e.jsx(_s,{id:"show-heatmap",checked:O,onCheckedChange:Q})]}),e.jsx(I,{variant:"outline",size:"sm",className:"w-full",onClick:()=>{S(""),T("locations"),Q(!1),U(!1),R.success("Map view reset")},children:"Reset View"})]})]}),d?e.jsx(se,{children:e.jsxs(oe,{className:"p-6 text-center",children:[e.jsx(Cs,{className:"h-8 w-8 mx-auto mb-2 animate-spin text-primary"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Loading map data..."})]})}):e.jsxs(se,{children:[e.jsx(_e,{children:e.jsxs(Te,{className:"text-lg flex items-center gap-2",children:[e.jsx(Y5,{className:"h-4 w-4"}),"Sync Status"]})}),e.jsxs(oe,{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Connection"}),e.jsx(ze,{variant:n?"default":"secondary",children:n?" Connected":" Disconnected"})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Real-time"}),e.jsx(ze,{variant:i?"default":"outline",children:i?"Enabled":"Disabled"})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Last Updated"}),e.jsx("span",{className:"text-xs",children:new Date().toLocaleTimeString()})]})]})]})]})]})]})},cG=()=>{const{socket:t,connected:s}=Ra(),{user:a}=qs(),[n,i]=N.useState([]),[c,d]=N.useState([]),[h,f]=N.useState(!1),[g,p]=N.useState(!1),[v,y]=N.useState(!1),[_,S]=N.useState(null),[b,T]=N.useState(null),[E,A]=N.useState(!1),[O,Q]=N.useState(!0),[q,U]=N.useState([]);N.useRef(null);const[D,M]=N.useState({supplier:"",items:[{product:"",quantity:1,unitPrice:0}],expectedDelivery:"",notes:"",priority:"medium"}),[P,G]=N.useState({name:"",contact:"",email:"",address:""}),K=[{id:1,orderNumber:"PO-001",supplier:"ABC Suppliers Ltd",totalAmount:25e3,status:"pending",orderDate:"2024-01-15",expectedDelivery:"2024-01-22",items:[{product:"Office Chairs",quantity:10,unitPrice:2e3},{product:"Desk Lamps",quantity:5,unitPrice:1e3}]},{id:2,orderNumber:"PO-002",supplier:"XYZ Trading Co",totalAmount:18500,status:"approved",orderDate:"2024-01-14",expectedDelivery:"2024-01-20",items:[{product:"Laptops",quantity:3,unitPrice:5500},{product:"Keyboards",quantity:10,unitPrice:250}]},{id:3,orderNumber:"PO-003",supplier:"Tech Solutions Inc",totalAmount:45e3,status:"delivered",orderDate:"2024-01-10",expectedDelivery:"2024-01-18",items:[{product:"Servers",quantity:1,unitPrice:45e3}]}],z=[{id:1,name:"ABC Suppliers Ltd",contact:"+254 700 123 456",email:"info@abcsuppliers.com"},{id:2,name:"XYZ Trading Co",contact:"+254 700 789 012",email:"sales@xyztrading.com"},{id:3,name:"Tech Solutions Inc",contact:"+254 700 345 678",email:"orders@techsolutions.com"}];N.useEffect(()=>{J()},[]);const J=async()=>{Q(!0);try{const F=localStorage.getItem("token"),[re,de]=await Promise.allSettled([ke.get("/purchasing/orders",{headers:{Authorization:`Bearer ${F}`}}),ke.get("/purchasing/suppliers",{headers:{Authorization:`Bearer ${F}`}})]);re.status==="fulfilled"&&re.value?.data?i(re.value.data):i(K),de.status==="fulfilled"&&de.value?.data?d(de.value.data):d(z),Q(!1)}catch(F){console.error("Error fetching purchase data:",F),R.error("Error loading purchase data"),i(K),d(z),Q(!1)}};N.useEffect(()=>{if(t&&s)return t.emit("join_purchasing",{userId:a?._id}),t.on("purchase_order_updated",F=>{i(re=>re.map(de=>de.id===F.id?{...de,...F}:de)),R.info(`Purchase order ${F.orderNumber}: ${F.status}`),U(re=>[{id:Date.now(),type:"order_update",message:`PO ${F.orderNumber} status changed to ${F.status}`,timestamp:new Date},...re])}),t.on("delivery_status_updated",F=>{i(re=>re.map(de=>de.id===F.orderId?{...de,deliveryStatus:F.status}:de)),R.success(`Delivery update: ${F.status}`)}),t.on("payment_processed",F=>{i(re=>re.map(de=>de.id===F.orderId?{...de,paymentStatus:F.status}:de)),R.success(`Payment ${F.status} for ${F.orderNumber}`),U(re=>[{id:Date.now(),type:"payment",message:`Payment ${F.status} - ${F.amount}`,timestamp:new Date},...re])}),()=>{t.off("purchase_order_updated"),t.off("delivery_status_updated"),t.off("payment_processed")}},[t,s,a]);const W=async()=>{A(!0),await J(),A(!1),R.success("Purchase data refreshed!")},he=async()=>{if(!D.supplier||D.items.length===0){R.error("Please fill in all required fields");return}try{const F=D.items.reduce((de,me)=>de+me.quantity*me.unitPrice,0),re={...D,orderNumber:`PO-${String(n.length+1).padStart(3,"0")}`,totalAmount:F,status:"pending",orderDate:new Date().toISOString().split("T")[0]};i([re,...n]),f(!1),M({supplier:"",items:[{product:"",quantity:1,unitPrice:0}],expectedDelivery:"",notes:"",priority:"medium"}),R.success("Purchase order created successfully!")}catch(F){console.error("Error creating purchase order:",F),R.error("Error creating purchase order")}},V=()=>{M({...D,items:[...D.items,{product:"",quantity:1,unitPrice:0}]})},ae=F=>{const re=D.items.filter((de,me)=>me!==F);M({...D,items:re})},ge=(F,re,de)=>{const me=D.items.map((De,Ne)=>Ne===F?{...De,[re]:de}:De);M({...D,items:me})},Z=F=>{const re={pending:{variant:"outline",color:"text-yellow-600",icon:ps},approved:{variant:"outline",color:"text-blue-600",icon:ks},delivered:{variant:"outline",color:"text-green-600",icon:cs},cancelled:{variant:"outline",color:"text-red-600",icon:Ws}},de=re[F]||re.pending,me=de.icon;return e.jsxs(ze,{variant:de.variant,className:de.color,children:[e.jsx(me,{className:"h-3 w-3 mr-1"}),F.charAt(0).toUpperCase()+F.slice(1)]})},ee=F=>new Intl.NumberFormat("en-KE",{style:"currency",currency:"KES"}).format(F),te=n.filter(F=>F.status==="pending").length,X=n.filter(F=>F.status==="approved").length,ce=n.reduce((F,re)=>F+re.totalAmount,0);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Purchasing"}),e.jsxs("p",{className:"text-muted-foreground",children:["Manage purchase orders and supplier relationships ",s?e.jsx("span",{className:"text-green-600",children:"  Real-time Connected"}):e.jsx("span",{className:"text-red-600",children:"  Offline Mode"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(I,{onClick:W,disabled:E||O,variant:"outline",children:[e.jsx(Cs,{className:`h-4 w-4 mr-2 ${E?"animate-spin":""}`}),"Refresh"]}),e.jsxs(Gt,{open:h,onOpenChange:f,children:[e.jsx(Za,{asChild:!0,children:e.jsxs(I,{className:"bg-green-500 hover:bg-green-400",children:[e.jsx(ha,{className:"h-4 w-4 mr-2"}),"New Purchase Order"]})}),e.jsxs(qt,{className:"max-w-4xl max-h-[80vh] overflow-y-auto",children:[e.jsxs(Kt,{children:[e.jsx(Yt,{children:"Create Purchase Order"}),e.jsx(vs,{children:"Create a new purchase order for your suppliers"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(ue,{children:"Supplier *"}),e.jsxs(Xt,{value:D.supplier,onValueChange:F=>M({...D,supplier:F}),children:[e.jsx(Jt,{children:e.jsx(Qt,{placeholder:"Select supplier"})}),e.jsx(es,{children:c.map(F=>e.jsx(Ie,{value:F.name,children:F.name},F.id))})]})]}),e.jsxs("div",{children:[e.jsx(ue,{children:"Expected Delivery"}),e.jsx(we,{type:"date",value:D.expectedDelivery,onChange:F=>M({...D,expectedDelivery:F.target.value})})]})]}),e.jsxs("div",{children:[e.jsx(ue,{children:"Priority"}),e.jsxs(Xt,{value:D.priority,onValueChange:F=>M({...D,priority:F}),children:[e.jsx(Jt,{children:e.jsx(Qt,{})}),e.jsxs(es,{children:[e.jsx(Ie,{value:"low",children:"Low"}),e.jsx(Ie,{value:"medium",children:"Medium"}),e.jsx(Ie,{value:"high",children:"High"}),e.jsx(Ie,{value:"urgent",children:"Urgent"})]})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx(ue,{children:"Items *"}),e.jsxs(I,{type:"button",variant:"outline",size:"sm",onClick:V,children:[e.jsx(ha,{className:"h-4 w-4 mr-1"}),"Add Item"]})]}),e.jsx("div",{className:"space-y-2",children:D.items.map((F,re)=>e.jsxs("div",{className:"grid grid-cols-12 gap-2 items-end",children:[e.jsx("div",{className:"col-span-5",children:e.jsx(we,{placeholder:"Product name",value:F.product,onChange:de=>ge(re,"product",de.target.value)})}),e.jsx("div",{className:"col-span-2",children:e.jsx(we,{type:"number",placeholder:"Qty",value:F.quantity,onChange:de=>ge(re,"quantity",parseInt(de.target.value)||1)})}),e.jsx("div",{className:"col-span-3",children:e.jsx(we,{type:"number",placeholder:"Unit price",value:F.unitPrice,onChange:de=>ge(re,"unitPrice",parseFloat(de.target.value)||0)})}),e.jsx("div",{className:"col-span-1",children:e.jsx("p",{className:"text-sm font-medium",children:ee(F.quantity*F.unitPrice)})}),e.jsx("div",{className:"col-span-1",children:D.items.length>1&&e.jsx(I,{type:"button",variant:"outline",size:"sm",onClick:()=>ae(re),children:e.jsx(Ua,{className:"h-4 w-4"})})})]},re))}),e.jsx("div",{className:"text-right mt-2",children:e.jsxs("p",{className:"text-lg font-semibold",children:["Total: ",ee(D.items.reduce((F,re)=>F+re.quantity*re.unitPrice,0))]})})]}),e.jsxs("div",{children:[e.jsx(ue,{children:"Notes"}),e.jsx(Gs,{placeholder:"Additional notes or requirements",value:D.notes,onChange:F=>M({...D,notes:F.target.value})})]})]}),e.jsxs(ea,{children:[e.jsx(I,{variant:"outline",onClick:()=>f(!1),children:"Cancel"}),e.jsx(I,{onClick:he,children:"Create Purchase Order"})]})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsx(se,{children:e.jsx(oe,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Total Orders"}),e.jsx("p",{className:"text-2xl font-bold",children:n.length})]}),e.jsx(Bs,{className:"h-8 w-8 text-blue-600"})]})})}),e.jsx(se,{children:e.jsx(oe,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Pending Orders"}),e.jsx("p",{className:"text-2xl font-bold",children:te})]}),e.jsx(ps,{className:"h-8 w-8 text-yellow-600"})]})})}),e.jsx(se,{children:e.jsx(oe,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Approved Orders"}),e.jsx("p",{className:"text-2xl font-bold",children:X})]}),e.jsx(ks,{className:"h-8 w-8 text-green-600"})]})})}),e.jsx(se,{children:e.jsx(oe,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Total Value"}),e.jsx("p",{className:"text-2xl font-bold",children:ee(ce)})]}),e.jsx(Sa,{className:"h-8 w-8 text-purple-600"})]})})})]}),e.jsxs(Ha,{defaultValue:"orders",className:"space-y-6",children:[e.jsxs(Xa,{className:"grid w-full grid-cols-3",children:[e.jsx(Tt,{value:"orders",children:"Purchase Orders"}),e.jsx(Tt,{value:"suppliers",children:"Suppliers"}),e.jsx(Tt,{value:"activity",children:"Activity & Payments"})]}),e.jsx(kt,{value:"orders",children:e.jsxs(se,{children:[e.jsxs(_e,{children:[e.jsx(Te,{children:"Purchase Orders"}),e.jsx(vt,{children:"Manage and track all purchase orders"})]}),e.jsx(oe,{children:e.jsxs(Gi,{children:[e.jsx(qi,{children:e.jsxs(Fa,{children:[e.jsx(Bt,{children:"Order Number"}),e.jsx(Bt,{children:"Supplier"}),e.jsx(Bt,{children:"Order Date"}),e.jsx(Bt,{children:"Expected Delivery"}),e.jsx(Bt,{children:"Total Amount"}),e.jsx(Bt,{children:"Status"}),e.jsx(Bt,{children:"Actions"})]})}),e.jsx(Ki,{children:n.map(F=>e.jsxs(Fa,{children:[e.jsx(It,{className:"font-medium",children:F.orderNumber}),e.jsx(It,{children:F.supplier}),e.jsx(It,{children:new Date(F.orderDate).toLocaleDateString()}),e.jsx(It,{children:new Date(F.expectedDelivery).toLocaleDateString()}),e.jsx(It,{children:ee(F.totalAmount)}),e.jsx(It,{children:Z(F.status)}),e.jsx(It,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(I,{variant:"outline",size:"sm",onClick:()=>{S(F),p(!0)},children:e.jsx(Pa,{className:"h-4 w-4"})}),e.jsx(I,{variant:"outline",size:"sm",children:e.jsx(sl,{className:"h-4 w-4"})})]})})]},F.id))})]})})]})}),e.jsx(kt,{value:"suppliers",children:e.jsxs(se,{children:[e.jsx(_e,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(Te,{children:"Suppliers"}),e.jsx(vt,{children:"Manage supplier contacts and information"})]}),e.jsxs(I,{onClick:()=>y(!0),children:[e.jsx(ha,{className:"h-4 w-4 mr-2"}),"Add Supplier"]})]})}),e.jsx(oe,{children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:c.map(F=>e.jsxs(se,{className:"hover:shadow-md transition-shadow",children:[e.jsx(_e,{children:e.jsxs(Te,{className:"text-lg flex items-center gap-2",children:[e.jsx(Ou,{className:"h-5 w-5 text-blue-600"}),F.name]})}),e.jsxs(oe,{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(ia,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{children:F.contact})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(fa,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"truncate",children:F.email})]}),e.jsxs("div",{className:"flex gap-2 mt-4",children:[e.jsxs(I,{variant:"outline",size:"sm",className:"flex-1",onClick:()=>{window.location.href=`tel:${F.contact}`,R.info(`Calling ${F.name}...`)},children:[e.jsx(ia,{className:"h-4 w-4 mr-1"}),"Call"]}),e.jsxs(I,{variant:"outline",size:"sm",className:"flex-1",onClick:()=>{window.location.href=`mailto:${F.email}`,R.info(`Opening email to ${F.name}...`)},children:[e.jsx(fa,{className:"h-4 w-4 mr-1"}),"Email"]})]})]})]},F.id))})})]})}),e.jsx(kt,{value:"activity",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(se,{children:[e.jsxs(_e,{children:[e.jsxs(Te,{className:"flex items-center gap-2",children:[e.jsx(rn,{className:"h-5 w-5"}),"Recent Activity"]}),e.jsx(vt,{children:"Track purchasing activities in real-time"})]}),e.jsx(oe,{children:e.jsx("div",{className:"space-y-4",children:q.length>0?q.slice(0,10).map(F=>e.jsxs("div",{className:"flex items-start gap-3 pb-3 border-b last:border-0",children:[e.jsx("div",{className:`mt-1 rounded-full p-2 ${F.type==="payment"?"bg-green-100":F.type==="order_update"?"bg-blue-100":"bg-gray-100"}`,children:F.type==="payment"?e.jsx(Ba,{className:"h-4 w-4 text-green-600"}):e.jsx(Ka,{className:"h-4 w-4 text-blue-600"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium",children:F.message}),e.jsx("p",{className:"text-xs text-muted-foreground",children:new Date(F.timestamp).toLocaleString()})]})]},F.id)):e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(rn,{className:"h-12 w-12 mx-auto mb-2 opacity-20"}),e.jsx("p",{children:"No recent activities"})]})})})]}),e.jsxs(se,{children:[e.jsxs(_e,{children:[e.jsxs(Te,{className:"flex items-center gap-2",children:[e.jsx(Ba,{className:"h-5 w-5"}),"Payment Tracking"]}),e.jsx(vt,{children:"Monitor payment status for purchase orders"})]}),e.jsx(oe,{children:e.jsx("div",{className:"space-y-4",children:n.filter(F=>F.status!=="cancelled").map(F=>e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-sm",children:F.orderNumber}),e.jsx("p",{className:"text-xs text-muted-foreground",children:F.supplier})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"font-semibold text-sm",children:ee(F.totalAmount)}),e.jsx(ze,{variant:F.paymentStatus==="paid"?"default":F.paymentStatus==="pending"?"secondary":"outline",className:"text-xs",children:F.paymentStatus||"Pending"})]})]},F.id))})})]}),e.jsxs(se,{className:"lg:col-span-2",children:[e.jsxs(_e,{children:[e.jsxs(Te,{className:"flex items-center gap-2",children:[e.jsx(Mu,{className:"h-5 w-5"}),"Delivery Status"]}),e.jsx(vt,{children:"Track delivery status after purchase orders"})]}),e.jsx(oe,{children:e.jsxs(Gi,{children:[e.jsx(qi,{children:e.jsxs(Fa,{children:[e.jsx(Bt,{children:"Order Number"}),e.jsx(Bt,{children:"Supplier"}),e.jsx(Bt,{children:"Expected Delivery"}),e.jsx(Bt,{children:"Delivery Status"}),e.jsx(Bt,{children:"Payment Status"})]})}),e.jsx(Ki,{children:n.filter(F=>F.status==="approved"||F.status==="delivered").map(F=>e.jsxs(Fa,{children:[e.jsx(It,{className:"font-medium",children:F.orderNumber}),e.jsx(It,{children:F.supplier}),e.jsx(It,{children:new Date(F.expectedDelivery).toLocaleDateString()}),e.jsx(It,{children:e.jsx(ze,{variant:F.status==="delivered"?"default":"secondary",children:F.deliveryStatus||F.status})}),e.jsx(It,{children:e.jsx(ze,{variant:F.paymentStatus==="paid"?"default":"outline",children:F.paymentStatus||"Pending"})})]},F.id))})]})})]})]})})]}),e.jsx(Gt,{open:g,onOpenChange:p,children:e.jsxs(qt,{className:"max-w-2xl",children:[e.jsxs(Kt,{children:[e.jsx(Yt,{children:"Purchase Order Details"}),e.jsxs(vs,{children:[_?.orderNumber," - ",_?.supplier]})]}),_&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(ue,{children:"Order Date"}),e.jsx("p",{className:"text-sm",children:new Date(_.orderDate).toLocaleDateString()})]}),e.jsxs("div",{children:[e.jsx(ue,{children:"Expected Delivery"}),e.jsx("p",{className:"text-sm",children:new Date(_.expectedDelivery).toLocaleDateString()})]}),e.jsxs("div",{children:[e.jsx(ue,{children:"Status"}),e.jsx("div",{className:"mt-1",children:Z(_.status)})]}),e.jsxs("div",{children:[e.jsx(ue,{children:"Total Amount"}),e.jsx("p",{className:"text-sm font-semibold",children:ee(_.totalAmount)})]})]}),e.jsxs("div",{children:[e.jsx(ue,{children:"Items"}),e.jsxs(Gi,{children:[e.jsx(qi,{children:e.jsxs(Fa,{children:[e.jsx(Bt,{children:"Product"}),e.jsx(Bt,{children:"Quantity"}),e.jsx(Bt,{children:"Unit Price"}),e.jsx(Bt,{children:"Total"})]})}),e.jsx(Ki,{children:_.items.map((F,re)=>e.jsxs(Fa,{children:[e.jsx(It,{children:F.product}),e.jsx(It,{children:F.quantity}),e.jsx(It,{children:ee(F.unitPrice)}),e.jsx(It,{children:ee(F.quantity*F.unitPrice)})]},re))})]})]})]}),e.jsx(ea,{children:e.jsx(I,{variant:"outline",onClick:()=>p(!1),children:"Close"})})]})}),e.jsx(Gt,{open:v,onOpenChange:y,children:e.jsxs(qt,{className:"max-w-md",children:[e.jsxs(Kt,{children:[e.jsx(Yt,{children:"Add New Supplier"}),e.jsx(vs,{children:"Add a new supplier contact to your database"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(ue,{children:"Supplier Name *"}),e.jsx(we,{placeholder:"e.g., ABC Suppliers Ltd",value:P.name,onChange:F=>G({...P,name:F.target.value})})]}),e.jsxs("div",{children:[e.jsx(ue,{children:"Contact Number *"}),e.jsx(we,{placeholder:"e.g., +254 700 123 456",value:P.contact,onChange:F=>G({...P,contact:F.target.value})})]}),e.jsxs("div",{children:[e.jsx(ue,{children:"Email Address *"}),e.jsx(we,{type:"email",placeholder:"e.g., info@supplier.com",value:P.email,onChange:F=>G({...P,email:F.target.value})})]}),e.jsxs("div",{children:[e.jsx(ue,{children:"Address (Optional)"}),e.jsx(Gs,{placeholder:"Business address",value:P.address,onChange:F=>G({...P,address:F.target.value})})]})]}),e.jsxs(ea,{children:[e.jsx(I,{variant:"outline",onClick:()=>{y(!1),G({name:"",contact:"",email:"",address:""})},children:"Cancel"}),e.jsx(I,{onClick:async()=>{if(!P.name||!P.contact||!P.email){R.error("Please fill in all required fields");return}try{const F=localStorage.getItem("token"),re=await ke.post("/purchasing/suppliers",P,{headers:{Authorization:`Bearer ${F}`}});d(de=>[...de,re.data]),y(!1),G({name:"",contact:"",email:"",address:""}),R.success("Supplier added successfully!")}catch(F){console.error("Error adding supplier:",F),R.error("Failed to add supplier")}},children:"Add Supplier"})]})]})})]})};function uA({date:t,setDate:s,className:a,...n}){const[i,c]=N.useState(!1),d=v=>v?v.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"",h=()=>t?t.from&&t.to?`${d(t.from)} - ${d(t.to)}`:t.from?`${d(t.from)} - ...`:"Pick a date range":"Pick a date range",f=(v,y)=>{const _={...t};_[v]=new Date(y),_.from&&_.to&&_.from>_.to&&(v==="from"?_.to=_.from:_.from=_.to),s(_)},g=v=>v?v.toISOString().split("T")[0]:"",p=[{label:"Last 7 days",range:{from:new Date(Date.now()-10080*60*1e3),to:new Date}},{label:"Last 30 days",range:{from:new Date(Date.now()-720*60*60*1e3),to:new Date}},{label:"Last 90 days",range:{from:new Date(Date.now()-2160*60*60*1e3),to:new Date}},{label:"This month",range:{from:new Date(new Date().getFullYear(),new Date().getMonth(),1),to:new Date}}];return e.jsxs("div",{className:ut("relative",a),...n,children:[e.jsxs(I,{variant:"outline",className:ut("w-full justify-start text-left font-normal",!t&&"text-muted-foreground"),onClick:()=>c(!i),children:[e.jsx(Ms,{className:"mr-2 h-4 w-4"}),h(),e.jsx(Lp,{className:"ml-auto h-4 w-4"})]}),i&&e.jsxs("div",{className:"absolute top-full left-0 z-50 mt-1 w-full min-w-[300px] rounded-md border bg-white p-4 shadow-lg dark:bg-gray-800",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("h4",{className:"text-sm font-medium mb-2",children:"Quick Select"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:p.map(v=>e.jsx(I,{variant:"outline",size:"sm",className:"text-xs",onClick:()=>{s(v.range),c(!1)},children:v.label},v.label))})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-1 block",children:"From Date"}),e.jsx("input",{type:"date",value:g(t?.from),onChange:v=>f("from",v.target.value),className:"w-full px-3 py-2 border rounded-md text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-1 block",children:"To Date"}),e.jsx("input",{type:"date",value:g(t?.to),onChange:v=>f("to",v.target.value),className:"w-full px-3 py-2 border rounded-md text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600"})]})]}),e.jsxs("div",{className:"flex justify-between mt-4 pt-3 border-t",children:[e.jsx(I,{variant:"outline",size:"sm",onClick:()=>{s(null),c(!1)},children:"Clear"}),e.jsx(I,{size:"sm",onClick:()=>c(!1),children:"Done"})]})]}),i&&e.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>c(!1)})]})}const dm=({userId:t=null,showFilters:s=!0,limit:a=20})=>{const{user:n}=qs(),[i,c]=N.useState([]),[d,h]=N.useState(!0),[f,g]=N.useState({currentPage:1,totalPages:1,totalCount:0,hasNext:!1,hasPrev:!1}),[p,v]=N.useState({category:"all",action:"all",search:"",dateRange:null,page:1}),[y,_]=N.useState({summary:{totalActivities:0,successRate:100,timeframe:"30d",categoriesBreakdown:[]},trends:[],highRiskActivities:[]});N.useEffect(()=>{S(),b()},[p,t]);const S=async()=>{try{h(!0);const M=new URLSearchParams;p.category&&p.category!=="all"&&M.append("category",p.category),p.action&&p.action!=="all"&&M.append("action",p.action),p.search&&M.append("search",p.search),p.dateRange?.from&&M.append("startDate",p.dateRange.from.toISOString()),p.dateRange?.to&&M.append("endDate",p.dateRange.to.toISOString()),M.append("page",p.page.toString()),M.append("limit",a.toString());const P=await ke.get(`/activities/history?${M}`);c(P.data.activities),g(P.data.pagination)}catch(M){console.error("Error fetching activities:",M),R.error("Failed to load activity history")}finally{h(!1)}},b=async()=>{try{const M=await ke.get("/activities/stats?timeframe=30d");_(M.data)}catch(M){console.error("Error fetching activity stats:",M)}},T=(M,P)=>{v(G=>({...G,[M]:P,page:1}))},E=M=>{v(P=>({...P,page:M}))},A=async()=>{try{const M={format:"json",startDate:p.dateRange?.from?.toISOString(),endDate:p.dateRange?.to?.toISOString(),categories:p.category?[p.category]:[],includeMetadata:!1},P=await ke.post("/activities/export",M),G=new Blob([JSON.stringify(P.data,null,2)],{type:"application/json"}),K=window.URL.createObjectURL(G),z=document.createElement("a");z.href=K,z.download=`activity-history-${Date.now()}.json`,document.body.appendChild(z),z.click(),window.URL.revokeObjectURL(K),document.body.removeChild(z),R.success("Activity history exported successfully")}catch(M){console.error("Error exporting activities:",M),R.error("Failed to export activity history")}},O=(M,P)=>{switch(M){case"authentication":return e.jsx(Aa,{className:"h-4 w-4"});case"orders":return e.jsx(Bs,{className:"h-4 w-4"});case"services":return e.jsx(Ka,{className:"h-4 w-4"});case"financial":return e.jsx(Sa,{className:"h-4 w-4"});case"admin":return e.jsx(Ya,{className:"h-4 w-4"});case"system":return e.jsx(Pa,{className:"h-4 w-4"});default:return e.jsx(ps,{className:"h-4 w-4"})}},Q=(M,P)=>{if(!P)return"text-red-600 bg-red-50";switch(M){case"authentication":return"text-blue-600 bg-blue-50";case"orders":return"text-green-600 bg-green-50";case"services":return"text-purple-600 bg-purple-50";case"financial":return"text-yellow-600 bg-yellow-50";case"admin":return"text-red-600 bg-red-50";case"system":return"text-gray-600 bg-gray-50";default:return"text-gray-600 bg-gray-50"}},q=M=>{const P={low:"bg-green-100 text-green-800",medium:"bg-yellow-100 text-yellow-800",high:"bg-orange-100 text-orange-800",critical:"bg-red-100 text-red-800"};return e.jsx(ze,{className:`${P[M]||P.low} text-xs`,children:M})},U=M=>new Date(M).toLocaleString(),D=[{value:"all",label:"All Categories"},{value:"authentication",label:"Authentication"},{value:"orders",label:"Orders"},{value:"services",label:"Services"},{value:"financial",label:"Financial"},{value:"admin",label:"Admin"},{value:"system",label:"System"}];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(se,{children:e.jsx(oe,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Activities"}),e.jsx("p",{className:"text-2xl font-bold",children:y.summary.totalActivities})]}),e.jsx(ps,{className:"h-8 w-8 text-blue-600"})]})})}),e.jsx(se,{children:e.jsx(oe,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Success Rate"}),e.jsxs("p",{className:"text-2xl font-bold text-green-600",children:[y.summary.successRate,"%"]})]}),e.jsx(ks,{className:"h-8 w-8 text-green-600"})]})})}),e.jsx(se,{children:e.jsx(oe,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"High Risk Events"}),e.jsx("p",{className:"text-2xl font-bold text-orange-600",children:y.highRiskActivities.length})]}),e.jsx(mr,{className:"h-8 w-8 text-orange-600"})]})})})]}),s&&e.jsxs(se,{children:[e.jsx(_e,{children:e.jsxs(Te,{className:"flex items-center gap-2",children:[e.jsx(ll,{className:"h-5 w-5"}),"Filters"]})}),e.jsx(oe,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Category"}),e.jsxs(Xt,{value:p.category,onValueChange:M=>T("category",M),children:[e.jsx(Jt,{children:e.jsx(Qt,{placeholder:"Select category"})}),e.jsx(es,{children:D.map(M=>e.jsx(Ie,{value:M.value,children:M.label},M.value))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Search"}),e.jsxs("div",{className:"relative",children:[e.jsx(Da,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(we,{placeholder:"Search activities...",value:p.search,onChange:M=>T("search",M.target.value),className:"pl-10"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Date Range"}),e.jsx(uA,{date:p.dateRange,setDate:M=>T("dateRange",M)})]}),e.jsx("div",{className:"flex items-end",children:e.jsxs(I,{onClick:A,variant:"outline",className:"w-full",children:[e.jsx(hn,{className:"h-4 w-4 mr-2"}),"Export"]})})]})})]}),e.jsxs(se,{children:[e.jsx(_e,{children:e.jsx(Te,{children:"Activity History"})}),e.jsxs(oe,{children:[d?e.jsx("div",{className:"flex items-center justify-center h-32",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900"})}):i.length===0?e.jsx("div",{className:"text-center py-8 text-gray-500",children:"No activities found for the selected criteria."}):e.jsx("div",{className:"space-y-4",children:i.map(M=>e.jsxs("div",{className:"flex items-start space-x-4 p-4 border rounded-lg hover:bg-gray-50",children:[e.jsx("div",{className:`p-2 rounded-full ${Q(M.category,M.metadata?.success)}`,children:O(M.category,M.action)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:M.description}),e.jsxs("div",{className:"flex items-center space-x-2",children:[q(M.riskLevel),M.metadata?.success===!1&&e.jsx(cr,{className:"h-4 w-4 text-red-600"})]})]}),e.jsxs("div",{className:"mt-1 flex items-center space-x-4 text-xs text-gray-500",children:[e.jsxs("span",{className:"flex items-center",children:[e.jsx(Ms,{className:"h-3 w-3 mr-1"}),U(M.timestamp)]}),e.jsx(ze,{variant:"outline",className:"text-xs",children:M.category}),e.jsx(ze,{variant:"outline",className:"text-xs",children:M.action}),M.metadata?.ipAddress&&e.jsxs("span",{children:["IP: ",M.metadata.ipAddress]})]})]})]},M._id))}),f.totalPages>1&&e.jsxs("div",{className:"flex items-center justify-between mt-6",children:[e.jsxs("div",{className:"text-sm text-gray-500",children:["Showing ",(f.currentPage-1)*a+1," to ",Math.min(f.currentPage*a,f.totalCount)," of ",f.totalCount," activities"]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(I,{variant:"outline",size:"sm",onClick:()=>E(f.currentPage-1),disabled:!f.hasPrev,children:"Previous"}),e.jsx(I,{variant:"outline",size:"sm",onClick:()=>E(f.currentPage+1),disabled:!f.hasNext,children:"Next"})]})]})]})]})]})},dG=()=>{const{user:t,isAuthenticated:s}=qs(),a=_n(),[n,i]=N.useState(!1),[c,d]=N.useState(!0),[h,f]=N.useState(!1),[g,p]=N.useState(null),[v,y]=N.useState([{title:"Total Activities",value:"0",change:"0%",trend:"up",icon:rn,description:"from last month"},{title:"User Actions",value:"0",change:"0%",trend:"up",icon:fs,description:"from last month"},{title:"System Events",value:"0",change:"0%",trend:"up",icon:Ya,description:"from last month"},{title:"Critical Events",value:"0",change:"0%",trend:"down",icon:Ka,description:"from last month"}]),_=N.useCallback(async(O=!1)=>{if(s)try{O?(f(!0),R.info("Refreshing activity data...")):d(!0),p(null);const q={Authorization:`Bearer ${localStorage.getItem("token")}`},[U,D,M,P]=await Promise.all([ke.get("/orders",{headers:q}).catch(()=>({data:[]})),ke.get("/invoices",{headers:q}).catch(()=>({data:[]})),ke.get("/expenses",{headers:q}).catch(()=>({data:[]})),ke.get("/transactions",{headers:q}).catch(()=>({data:[]}))]),G=Array.isArray(U.data)?U.data:[],K=Array.isArray(D.data)?D.data:[],z=Array.isArray(M.data)?M.data:[],J=Array.isArray(P.data)?P.data:[];console.log(" Fetched data:",{orders:G.length,invoices:K.length,expenses:z.length,transactions:J.length});const W=new Date,he=new Date(W.getFullYear(),W.getMonth()-1,1),V=new Date(W.getFullYear(),W.getMonth(),1),ae=(G?.filter(Ne=>Ne.createdAt&&new Date(Ne.createdAt)>=V)||[]).length+(K?.filter(Ne=>Ne.createdAt&&new Date(Ne.createdAt)>=V)||[]).length+(z?.filter(Ne=>Ne.createdAt&&new Date(Ne.createdAt)>=V)||[]).length+(J?.filter(Ne=>Ne.createdAt&&new Date(Ne.createdAt)>=V)||[]).length,ge=(G?.filter(Ne=>Ne.createdAt&&new Date(Ne.createdAt)>=he&&new Date(Ne.createdAt)<V)||[]).length+(K?.filter(Ne=>Ne.createdAt&&new Date(Ne.createdAt)>=he&&new Date(Ne.createdAt)<V)||[]).length+(z?.filter(Ne=>Ne.createdAt&&new Date(Ne.createdAt)>=he&&new Date(Ne.createdAt)<V)||[]).length+(J?.filter(Ne=>Ne.createdAt&&new Date(Ne.createdAt)>=he&&new Date(Ne.createdAt)<V)||[]).length,Z=ge>0?((ae-ge)/ge*100).toFixed(1):0,ee=(G?.filter(Ne=>Ne.createdAt&&new Date(Ne.createdAt)>=V)||[]).length+(K?.filter(Ne=>Ne.createdAt&&new Date(Ne.createdAt)>=V)||[]).length,te=(G?.filter(Ne=>Ne.createdAt&&new Date(Ne.createdAt)>=he&&new Date(Ne.createdAt)<V)||[]).length+(K?.filter(Ne=>Ne.createdAt&&new Date(Ne.createdAt)>=he&&new Date(Ne.createdAt)<V)||[]).length,X=te>0?((ee-te)/te*100).toFixed(1):0,ce=(J?.filter(Ne=>Ne.createdAt&&new Date(Ne.createdAt)>=V)||[]).length+(z?.filter(Ne=>Ne.createdAt&&new Date(Ne.createdAt)>=V)||[]).length,F=(J?.filter(Ne=>Ne.createdAt&&new Date(Ne.createdAt)>=he&&new Date(Ne.createdAt)<V)||[]).length+(z?.filter(Ne=>Ne.createdAt&&new Date(Ne.createdAt)>=he&&new Date(Ne.createdAt)<V)||[]).length,re=F>0?((ce-F)/F*100).toFixed(1):0,de=(J?.filter(Ne=>Ne.createdAt&&new Date(Ne.createdAt)>=V&&(Ne.status==="failed"||Ne.status==="error"))||[]).length+(K?.filter(Ne=>Ne.createdAt&&new Date(Ne.createdAt)>=V&&Ne.paymentStatus==="overdue")||[]).length,me=(J?.filter(Ne=>Ne.createdAt&&new Date(Ne.createdAt)>=he&&new Date(Ne.createdAt)<V&&(Ne.status==="failed"||Ne.status==="error"))||[]).length+(K?.filter(Ne=>Ne.createdAt&&new Date(Ne.createdAt)>=he&&new Date(Ne.createdAt)<V&&Ne.paymentStatus==="overdue")||[]).length,De=me>0?((de-me)/me*100).toFixed(1):0;y([{title:"Total Activities",value:ae.toLocaleString(),change:`${Z>=0?"+":""}${Z}%`,trend:Z>=0?"up":"down",icon:rn,description:"from last month"},{title:"User Actions",value:ee.toLocaleString(),change:`${X>=0?"+":""}${X}%`,trend:X>=0?"up":"down",icon:fs,description:"from last month"},{title:"System Events",value:ce.toLocaleString(),change:`${re>=0?"+":""}${re}%`,trend:re>=0?"up":"down",icon:Ya,description:"from last month"},{title:"Critical Events",value:de.toLocaleString(),change:`${De>=0?"+":""}${De}%`,trend:De>=0?"up":"down",icon:Ka,description:"from last month"}]),console.log(" Activity stats loaded:",{total:ae,user:ee,system:ce,critical:de}),O&&R.success("Activity data refreshed!")}catch(Q){console.error(" Error fetching activity stats:",Q),p(Q.message||"Failed to load activity data"),O&&R.error("Failed to refresh activity data")}finally{d(!1),f(!1)}},[s]);N.useEffect(()=>{if(s){_();const O=setInterval(()=>_(),18e4);return()=>clearInterval(O)}},[s,_]);const S=async()=>{try{i(!0);const O=await fetch("/api/activities/export?format=csv",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(O.ok){const Q=await O.blob(),q=window.URL.createObjectURL(Q),U=document.createElement("a");U.href=q,U.download=`activity-history-${Date.now()}.csv`,document.body.appendChild(U),U.click(),window.URL.revokeObjectURL(q),document.body.removeChild(U),R.success("History exported successfully!")}else throw new Error("Export failed")}catch{R.error("Failed to export history. Please try again.")}finally{i(!1)}},b=()=>{R.info("Opening schedule settings..."),a("/dashboard/reports")},T=()=>{R.info("Opening alert configuration..."),a("/dashboard/settings")},E=()=>{R.info("Archive feature coming soon!")},A=()=>{_(!0)};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold text-foreground flex items-center gap-2",children:[e.jsx(Zl,{className:"h-8 w-8 text-green-600"}),"Activity History"]}),e.jsx("p",{className:"text-muted-foreground",children:"Comprehensive tracking of all system activities and user actions"})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs(I,{variant:"outline",onClick:A,disabled:h,children:[e.jsx(Cs,{className:`mr-2 h-4 w-4 ${h?"animate-spin":""}`}),"Refresh"]}),e.jsxs(I,{variant:"outline",onClick:S,disabled:n,children:[e.jsx(hn,{className:"mr-2 h-4 w-4"}),n?"Exporting...":"Export History"]}),e.jsxs(I,{onClick:()=>{R.info("Advanced filters feature coming soon!")},children:[e.jsx(ll,{className:"mr-2 h-4 w-4"}),"Advanced Filters"]})]})]}),g?e.jsx(se,{className:"border-red-200 bg-red-50",children:e.jsx(oe,{className:"flex items-center justify-center py-12",children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx(Ws,{className:"h-12 w-12 text-red-500 mx-auto"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-red-700",children:"Failed to Load Activity Data"}),e.jsx("p",{className:"text-sm text-red-600",children:g})]}),e.jsxs(I,{onClick:()=>_(),variant:"outline",children:[e.jsx(Cs,{className:"mr-2 h-4 w-4"}),"Retry"]})]})})}):c?e.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-4",children:[1,2,3,4].map(O=>e.jsxs(se,{children:[e.jsx(_e,{className:"pb-2",children:e.jsx("div",{className:"h-4 w-32 bg-gray-200 rounded animate-pulse"})}),e.jsxs(oe,{children:[e.jsx("div",{className:"h-8 w-20 bg-gray-200 rounded animate-pulse mb-2"}),e.jsx("div",{className:"h-3 w-24 bg-gray-200 rounded animate-pulse"})]})]},O))}):e.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-4",children:v.map(O=>{const Q=O.icon;return e.jsxs(se,{children:[e.jsxs(_e,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(Te,{className:"text-sm font-medium",children:O.title}),e.jsx(Q,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(oe,{children:[e.jsx("div",{className:"text-2xl font-bold",children:O.value}),e.jsxs("div",{className:"flex items-center text-xs text-muted-foreground",children:[O.trend==="up"?e.jsx(aa,{className:"mr-1 h-3 w-3 text-green-600"}):e.jsx(aa,{className:"mr-1 h-3 w-3 text-red-600 rotate-180"}),e.jsx("span",{className:O.trend==="up"?"text-green-600":"text-red-600",children:O.change}),e.jsx("span",{className:"ml-1",children:O.description})]})]})]},O.title)})}),e.jsxs(Ha,{defaultValue:"all",className:"space-y-4",children:[e.jsxs(Xa,{children:[e.jsx(Tt,{value:"all",children:"All Activities"}),e.jsx(Tt,{value:"user",children:"User Actions"}),e.jsx(Tt,{value:"system",children:"System Events"}),e.jsx(Tt,{value:"critical",children:"Critical"})]}),e.jsx(kt,{value:"all",className:"space-y-4",children:e.jsxs(se,{children:[e.jsxs(_e,{children:[e.jsx(Te,{children:"Complete Activity Log"}),e.jsx(vt,{children:"All system activities and user actions in chronological order"})]}),e.jsx(oe,{children:e.jsx(dm,{showFilters:!0,limit:50})})]})}),e.jsx(kt,{value:"user",className:"space-y-4",children:e.jsxs(se,{children:[e.jsxs(_e,{children:[e.jsx(Te,{children:"User Actions"}),e.jsx(vt,{children:"Activities performed by users in the system"})]}),e.jsx(oe,{children:e.jsx(dm,{showFilters:!0,limit:50,filterCategory:"user"})})]})}),e.jsx(kt,{value:"system",className:"space-y-4",children:e.jsxs(se,{children:[e.jsxs(_e,{children:[e.jsx(Te,{children:"System Events"}),e.jsx(vt,{children:"Automated system activities and background processes"})]}),e.jsx(oe,{children:e.jsx(dm,{showFilters:!0,limit:50,filterCategory:"system"})})]})}),e.jsx(kt,{value:"critical",className:"space-y-4",children:e.jsxs(se,{children:[e.jsxs(_e,{children:[e.jsx(Te,{children:"Critical Events"}),e.jsx(vt,{children:"High-priority events that require attention"})]}),e.jsx(oe,{children:e.jsx(dm,{showFilters:!0,limit:50,filterPriority:"critical"})})]})})]}),e.jsxs(se,{children:[e.jsxs(_e,{children:[e.jsx(Te,{children:"Quick Actions"}),e.jsx(vt,{children:"Common history-related tasks and utilities"})]}),e.jsx(oe,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs(I,{variant:"outline",className:"h-auto flex-col py-4 hover:bg-blue-50 hover:border-blue-500 transition-colors",onClick:b,children:[e.jsx(Ms,{className:"h-6 w-6 mb-2 text-blue-600"}),e.jsx("span",{className:"text-sm font-medium",children:"Schedule Report"}),e.jsx("span",{className:"text-xs text-muted-foreground mt-1",children:"Automate activity reports"})]}),e.jsxs(I,{variant:"outline",className:"h-auto flex-col py-4 hover:bg-orange-50 hover:border-orange-500 transition-colors",onClick:T,children:[e.jsx(ps,{className:"h-6 w-6 mb-2 text-orange-600"}),e.jsx("span",{className:"text-sm font-medium",children:"Set Alerts"}),e.jsx("span",{className:"text-xs text-muted-foreground mt-1",children:"Configure notifications"})]}),e.jsxs(I,{variant:"outline",className:"h-auto flex-col py-4 hover:bg-purple-50 hover:border-purple-500 transition-colors",onClick:E,children:[e.jsx(Ka,{className:"h-6 w-6 mb-2 text-purple-600"}),e.jsx("span",{className:"text-sm font-medium",children:"Archive Data"}),e.jsx("span",{className:"text-xs text-muted-foreground mt-1",children:"Store old records"})]})]})})]})]})},Iv={search:async(t,s={})=>{try{return(await ke.get("/search",{params:{q:t,...s}})).data}catch(a){return console.error("Error searching:",a),R.error("Search failed. Please try again."),{products:[],orders:[],customers:[],transactions:[],locations:[],appointments:[],documents:[]}}},searchByCategory:async(t,s)=>{try{return(await ke.get(`/search/${t}`,{params:{q:s}})).data}catch(a){return console.error(`Error searching ${t}:`,a),[]}}},fu={createTicket:async t=>{try{const s=await ke.post("/support/tickets",t);return R.success("Support ticket created!"),s.data}catch(s){throw R.error("Failed to create ticket"),s}},getTickets:async()=>{try{return(await ke.get("/support/tickets")).data}catch(t){return console.error("Error fetching tickets:",t),[]}},getTicketById:async t=>{try{return(await ke.get(`/support/tickets/${t}`)).data}catch(s){throw console.error("Error fetching ticket:",s),s}},updateTicket:async(t,s)=>{try{const a=await ke.put(`/support/tickets/${t}`,s);return R.success("Ticket updated!"),a.data}catch(a){throw R.error("Failed to update ticket"),a}},getFAQs:async()=>{try{return(await ke.get("/support/faqs")).data}catch(t){return console.error("Error fetching FAQs:",t),[]}},getSupportAgents:async()=>{try{return(await ke.get("/support/agents")).data}catch(t){return console.error("Error fetching support agents:",t),[{id:1,name:"Support Team",role:"Customer Support",avatar:"/api/placeholder/40/40",status:"online",rating:4.9,specialties:["General Support","Technical Help"]}]}},sendMessage:async(t,s)=>{try{return(await ke.post(`/support/tickets/${t}/messages`,{message:s})).data}catch(a){throw R.error("Failed to send message"),a}}},uG=()=>{const[t]=p5(),s=_n(),[a,n]=N.useState(t.get("q")||""),[i,c]=N.useState({products:[],orders:[],customers:[],transactions:[],locations:[],appointments:[],documents:[]}),[d,h]=N.useState(!1),[f,g]=N.useState("all"),[p,v]=N.useState(0),[y,_]=N.useState(null),[S,b]=N.useState(!1),[T,E]=N.useState({products:{loaded:!1,count:0,error:null},orders:{loaded:!1,count:0,error:null},customers:{loaded:!1,count:0,error:null}});N.useEffect(()=>{const D=t.get("q");D&&(n(D),A(D))},[t]),N.useEffect(()=>{if(!a.trim()){c({products:[],orders:[],customers:[],transactions:[],locations:[],appointments:[],documents:[]}),v(0),b(!1);return}const D=setTimeout(()=>{A(a)},500);return()=>clearTimeout(D)},[a]);const A=async D=>{if(D.trim()){h(!0),_(null),b(!0);try{const M=localStorage.getItem("token"),[P,G,K]=await Promise.allSettled([Iv.searchByCategory("products",D),Iv.searchByCategory("orders",D),Iv.searchByCategory("customers",D)]),z={products:{loaded:P.status==="fulfilled",count:P.status==="fulfilled"&&P.value?.length||0,error:P.status==="rejected"?P.reason?.message:null},orders:{loaded:G.status==="fulfilled",count:G.status==="fulfilled"&&G.value?.length||0,error:G.status==="rejected"?G.reason?.message:null},customers:{loaded:K.status==="fulfilled",count:K.status==="fulfilled"&&K.value?.length||0,error:K.status==="rejected"?K.reason?.message:null}};E(z);const J={products:P.status==="fulfilled"?P.value||[]:[],orders:G.status==="fulfilled"?G.value||[]:[],customers:K.status==="fulfilled"?K.value||[]:[],transactions:[],locations:[],appointments:[],documents:[]};c(J);const W=Object.values(J).reduce((ae,ge)=>ae+(ge?.length||0),0);v(W);const he=Object.values(z).filter(ae=>!ae.loaded).length,V=Object.values(z).filter(ae=>ae.loaded).length;console.log(" Search completed:",{query:D,total:W,sources:{success:V,failed:he},breakdown:{products:z.products.count,orders:z.orders.count,customers:z.customers.count}}),W>0?R.success(`Found ${W} results for "${D}" from ${V} sources`):he>0?R.warning(`No results found. ${he} source(s) unavailable.`):R.info("No results found. Try different keywords.")}catch(M){console.error(" Search error:",M),_(M.message||"Search failed"),R.error("Search failed. Please check your connection and try again."),c({products:[],orders:[],customers:[],transactions:[],locations:[],appointments:[],documents:[]}),v(0)}finally{h(!1)}}},O=D=>{D.preventDefault(),a.trim()&&(A(a),s(`/dashboard/search?q=${encodeURIComponent(a.trim())}`,{replace:!0}))},Q=[{id:"all",label:"All Results",icon:Da,count:p},{id:"products",label:"Products",icon:cs,count:i.products?.length||0},{id:"orders",label:"Orders",icon:Bs,count:i.orders?.length||0},{id:"customers",label:"Customers",icon:fs,count:i.customers?.length||0},{id:"transactions",label:"Transactions",icon:Sa,count:i.transactions?.length||0},{id:"locations",label:"Locations",icon:Fr,count:i.locations?.length||0},{id:"appointments",label:"Appointments",icon:Ms,count:i.appointments?.length||0},{id:"documents",label:"Documents",icon:Ka,count:i.documents?.length||0}],q=(D,M)=>{switch(M){case"products":s("/dashboard/inventory"),R.success(`Viewing product: ${D.name}`);break;case"orders":s("/dashboard/ecommerce"),R.success(`Viewing order: ${D.id}`);break;case"customers":s("/dashboard/ecommerce"),R.success(`Viewing customer: ${D.name}`);break;case"transactions":s("/dashboard/finances"),R.success(`Viewing transaction: ${D.id}`);break;case"locations":s("/dashboard/locations"),R.success(`Viewing location: ${D.name}`);break;case"appointments":s("/dashboard/appointments"),R.success(`Viewing appointment with ${D.client}`);break;case"documents":s("/dashboard/reports"),R.success(`Viewing document: ${D.name}`);break;default:R.info("Opening details...")}},U=({item:D,type:M})=>e.jsx(se,{className:"hover:shadow-md transition-shadow cursor-pointer",onClick:()=>q(D,M),children:e.jsx(oe,{className:"p-4",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-sm mb-1",children:D.name||D.client||D.customer?.name||D.customer?.email||`${M.toUpperCase()} #${D.id}`}),e.jsxs("p",{className:"text-xs text-muted-foreground mb-2",children:[M==="products"&&`${D.category}  $${D.price}  Stock: ${D.stock}`,M==="orders"&&`${D.customer?.name||D.customer?.email||"Unknown"}  $${D.total}  ${D.status}`,M==="customers"&&`${D.email}  ${D.orders} orders  $${D.totalSpent}`,M==="transactions"&&`${D.type}  $${Math.abs(D.amount)}  ${D.description}`,M==="locations"&&`${D.address}, ${D.city}  ${D.status}`,M==="appointments"&&`${D.service}  ${D.date} at ${D.time}`,M==="documents"&&`${D.type}  ${D.date}  ${D.size}`]})]}),e.jsx(Xl,{className:"h-4 w-4 text-muted-foreground"})]})})});return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold text-foreground flex items-center gap-2",children:[e.jsx(Da,{className:"h-8 w-8 text-green-600"}),"Search Results"]}),e.jsx("p",{className:"text-muted-foreground",children:a?`Results for "${a}"`:"Search across all modules and data"})]})}),e.jsx(se,{children:e.jsxs(oe,{className:"p-4",children:[e.jsxs("form",{onSubmit:O,className:"flex gap-2",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(Da,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(we,{value:a,onChange:D=>n(D.target.value),placeholder:"Search products, orders, customers, and more...",className:"pl-10"})]}),e.jsx(I,{type:"submit",disabled:d,children:d?"Searching...":"Search"})]}),S&&!d&&e.jsxs("div",{className:"mt-4 space-y-2",children:[e.jsx("p",{className:"text-xs font-medium text-muted-foreground",children:"Data Sources:"}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:Object.entries(T).map(([D,M])=>e.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[M.loaded?e.jsx(Xi,{className:"h-3 w-3 text-green-600"}):e.jsx(Ws,{className:"h-3 w-3 text-red-600"}),e.jsx("span",{className:M.loaded?"text-green-600":"text-red-600",children:D.charAt(0).toUpperCase()+D.slice(1)}),M.loaded&&M.count>0&&e.jsx(ze,{variant:"secondary",className:"text-xs px-1 py-0",children:M.count})]},D))})]})]})}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-8 gap-2",children:Q.map(D=>{const M=D.icon;return e.jsxs(I,{variant:f===D.id?"default":"outline",className:"h-auto p-3 flex flex-col items-center gap-1",onClick:()=>g(D.id),children:[e.jsx(M,{className:"h-4 w-4"}),e.jsx("span",{className:"text-xs",children:D.label}),e.jsx(ze,{variant:"secondary",className:"text-xs",children:D.count})]},D.id)})}),p>0?e.jsxs(Ha,{value:f,onValueChange:g,children:[e.jsx(kt,{value:"all",className:"space-y-4",children:Object.entries(i).map(([D,M])=>M.length>0&&e.jsxs(se,{children:[e.jsx(_e,{children:e.jsxs(Te,{className:"capitalize",children:[D," (",M.length,")"]})}),e.jsxs(oe,{className:"space-y-2",children:[M.slice(0,3).map((P,G)=>e.jsx(U,{item:P,type:D},G)),M.length>3&&e.jsxs(I,{variant:"outline",size:"sm",className:"w-full",children:["View all ",M.length," ",D]})]})]},D))}),Object.entries(i).map(([D,M])=>e.jsxs(kt,{value:D,className:"space-y-2",children:[M.map((P,G)=>e.jsx(U,{item:P,type:D},G)),M.length===0&&e.jsx(se,{children:e.jsxs(oe,{className:"p-8 text-center",children:[e.jsx(Da,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),e.jsxs("h3",{className:"text-lg font-semibold mb-2",children:["No ",D," found"]}),e.jsx("p",{className:"text-muted-foreground",children:"Try adjusting your search terms or check your filters"})]})})]},D))]}):y?e.jsx(se,{className:"border-red-200 bg-red-50",children:e.jsxs(oe,{className:"p-8 text-center",children:[e.jsx(Ws,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-red-700 mb-2",children:"Search Error"}),e.jsx("p",{className:"text-red-600 mb-4",children:y}),e.jsx(I,{onClick:()=>A(a),variant:"outline",children:"Try Again"})]})}):a&&!d?e.jsx(se,{children:e.jsxs(oe,{className:"p-8 text-center",children:[e.jsx(Da,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No results found"}),e.jsx("p",{className:"text-muted-foreground",children:"Try different keywords or check your spelling"})]})}):null]})},hG=()=>{const{socket:t,connected:s}=Ra(),{isAuthenticated:a}=qs(),[n,i]=N.useState(0),[c,d]=N.useState(!0),[h,f]=N.useState({revenue:[],sales:[],categories:[],traffic:[],performance:[]});N.useEffect(()=>{(async()=>{if(a){d(!0);try{const y={Authorization:`Bearer ${localStorage.getItem("token")}`},[_,S]=await Promise.all([ke.get("/orders",{headers:y}).catch(()=>({data:[]})),ke.get("/products",{headers:y}).catch(()=>({data:[]}))]),b=_.data||[],T=S.data||[],E=[];for(let M=29;M>=0;M--){const P=new Date;P.setDate(P.getDate()-M);const G=b.filter(K=>new Date(K.date||K.createdAt).toDateString()===P.toDateString());E.push({name:P.toLocaleDateString("en-US",{month:"short",day:"numeric"}),value:G.reduce((K,z)=>K+(Number(z.total)||0),0),orders:G.length})}const A={};T.forEach(M=>{const P=M.category||"Other";A[P]=(A[P]||0)+M.price*(M.stockQuantity||0)});const O=Object.entries(A).map(([M,P])=>({name:M,value:P})),Q={Online:0,"Walk-in":0,Mobile:0};b.forEach(M=>{const P=M.source||"Online";Q[P]=(Q[P]||0)+1});const q=Object.entries(Q).map(([M,P])=>({name:M,value:P})),U={};b.forEach(M=>{const P=M.status||"Pending";U[P]=(U[P]||0)+1});const D=Object.entries(U).map(([M,P])=>({name:M,value:P}));f({revenue:E,sales:E,categories:O.length>0?O:[{name:"No Data",value:1}],traffic:q,performance:D.length>0?D:[{name:"No Data",value:1}]})}catch(v){console.error("Error fetching graph data:",v)}finally{d(!1)}}})()},[a,n]);const g=()=>{i(p=>p+1),R.success("All graphs refreshed successfully!")};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold text-foreground flex items-center gap-2",children:[e.jsx(Mn,{className:"h-8 w-8 text-green-600"}),"Real-Time Business Analytics"]}),e.jsx("p",{className:"text-muted-foreground",children:"Live data from your business operations"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ze,{variant:s?"default":"secondary",children:s?" Live":"Offline"}),e.jsxs(I,{onClick:g,className:"gap-2",disabled:c,children:[e.jsx(Cs,{className:`h-4 w-4 ${c?"animate-spin":""}`}),"Refresh All"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(se,{children:e.jsx(oe,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(rn,{className:"h-5 w-5 text-blue-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:"Real-time Updates"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Auto-refresh capabilities"})]})]})})}),e.jsx(se,{children:e.jsx(oe,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(_o,{className:"h-5 w-5 text-green-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:"Interactive Controls"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Chart type switching"})]})]})})}),e.jsx(se,{children:e.jsx(oe,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ga,{className:"h-5 w-5 text-yellow-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:"Export Ready"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"CSV data export"})]})]})})}),e.jsx(se,{children:e.jsx(oe,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Mn,{className:"h-5 w-5 text-purple-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:"Multiple Types"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Line, Bar, Pie, Area"})]})]})})})]}),e.jsxs(Ha,{defaultValue:"trends",className:"space-y-6",children:[e.jsxs(Xa,{className:"grid w-full grid-cols-5",children:[e.jsx(Tt,{value:"trends",children:"Trends"}),e.jsx(Tt,{value:"comparisons",children:"Comparisons"}),e.jsx(Tt,{value:"distributions",children:"Distributions"}),e.jsx(Tt,{value:"performance",children:"Performance"}),e.jsx(Tt,{value:"realtime",children:"Real-time"})]}),e.jsxs(kt,{value:"trends",className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx(Ns,{title:"Revenue Growth Trends",description:`Last 30 days - KES ${h.revenue.reduce((p,v)=>p+v.value,0).toLocaleString()}`,type:"area",data:h.revenue,height:350},`trend-1-${n}`),e.jsx(Ns,{title:"Daily Sales Performance",description:`${h.sales.reduce((p,v)=>p+v.orders,0)} total orders`,type:"line",data:h.sales,height:350},`trend-2-${n}`)]}),e.jsx(Ns,{title:"Sales Performance Timeline",description:"Real-time sales data with order metrics",type:"composed",data:h.sales,height:400},`trend-3-${n}`)]}),e.jsx(kt,{value:"comparisons",className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx(Ns,{title:"Daily Revenue Comparison",description:"Day-by-day performance analysis",type:"bar",data:h.revenue,height:350},`comp-1-${n}`),e.jsx(Ns,{title:"Product Category Performance",description:`${h.categories.length} categories`,type:"bar",data:h.categories,height:350,showControls:!1},`comp-2-${n}`)]})}),e.jsx(kt,{value:"distributions",className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx(Ns,{title:"Order Sources",description:"Order source distribution",type:"pie",data:h.traffic,height:300,showControls:!1},`dist-1-${n}`),e.jsx(Ns,{title:"Product Categories",description:"Sales by product category",type:"pie",data:h.categories,height:300,showControls:!1},`dist-2-${n}`),e.jsx(Ns,{title:"Order Status",description:"Current order distribution",type:"pie",data:h.performance,height:300,showControls:!1},`dist-3-${n}`)]})}),e.jsx(kt,{value:"performance",className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx(Ns,{title:"Sales KPI Dashboard",description:"Real-time sales performance",type:"composed",data:h.sales,height:350},`perf-1-${n}`),e.jsx(Ns,{title:"Revenue Efficiency",description:"Revenue generation over time",type:"area",data:h.revenue,height:350},`perf-2-${n}`)]})}),e.jsxs(kt,{value:"realtime",className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx(Ns,{title:"Live Sales Data",description:"Last 7 days real-time sales",type:"line",data:h.sales.slice(-7),height:350,autoRefresh:!0,refreshInterval:3e4},`rt-1-${n}`),e.jsx(Ns,{title:"Revenue Tracking",description:"Real-time revenue monitoring",type:"area",data:h.revenue.slice(-7),height:350,autoRefresh:!0,refreshInterval:3e4},`rt-2-${n}`)]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx(Ns,{title:"Recent Activity",description:"Last 10 days",type:"line",data:h.sales.slice(-10),height:250,autoRefresh:!0,refreshInterval:3e4},`rt-3-${n}`),e.jsx(Ns,{title:"Category Distribution",description:"Live category breakdown",type:"bar",data:h.categories.slice(0,5),height:250,autoRefresh:!0,refreshInterval:6e4},`rt-4-${n}`),e.jsx(Ns,{title:"Order Status",description:"Current order status",type:"pie",data:h.performance,height:250,autoRefresh:!0,refreshInterval:3e4,showControls:!1},`rt-5-${n}`)]})]})]}),e.jsxs(se,{children:[e.jsxs(_e,{children:[e.jsx(Te,{children:"How to Use Comprehensive Graphs"}),e.jsx(vt,{children:"Interactive features and customization options"})]}),e.jsx(oe,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-2",children:"Interactive Features"}),e.jsxs("ul",{className:"text-sm space-y-1 text-muted-foreground",children:[e.jsx("li",{children:" Switch between chart types (Line, Bar, Area, Pie)"}),e.jsx("li",{children:" Adjust time ranges (7d, 30d, 90d, 1y)"}),e.jsx("li",{children:" Real-time data refresh capabilities"}),e.jsx("li",{children:" Export data to CSV format"}),e.jsx("li",{children:" Hover tooltips for detailed information"})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-2",children:"Customization Options"}),e.jsxs("ul",{className:"text-sm space-y-1 text-muted-foreground",children:[e.jsx("li",{children:" Custom color schemes for different data types"}),e.jsx("li",{children:" Configurable auto-refresh intervals"}),e.jsx("li",{children:" Responsive design for all screen sizes"}),e.jsx("li",{children:" Data transformation and filtering"}),e.jsx("li",{children:" Integration with existing API endpoints"})]})]})]})})]})]})},mG=({userId:t=null,showFilters:s=!0,limit:a=20})=>{const{user:n}=qs(),[i,c]=N.useState([]),[d,h]=N.useState(!0),[f,g]=N.useState({currentPage:1,totalPages:1,totalCount:0,hasNext:!1,hasPrev:!1}),[p,v]=N.useState({status:"all",orderType:"all",priority:"all",search:"",dateRange:null,minAmount:"",maxAmount:"",page:1}),[y,_]=N.useState({totalOrders:0,totalValue:0,averageOrderValue:0,statusBreakdown:{},monthlyTrends:[]});N.useEffect(()=>{S(),b()},[p,t]);const S=async()=>{try{h(!0);const K=new URLSearchParams;p.status&&p.status!=="all"&&K.append("status",p.status),p.orderType&&p.orderType!=="all"&&K.append("orderType",p.orderType),p.priority&&p.priority!=="all"&&K.append("priority",p.priority),p.search&&K.append("search",p.search),p.dateRange?.from&&K.append("startDate",p.dateRange.from.toISOString()),p.dateRange?.to&&K.append("endDate",p.dateRange.to.toISOString()),p.minAmount&&K.append("minAmount",p.minAmount),p.maxAmount&&K.append("maxAmount",p.maxAmount),K.append("page",p.page.toString()),K.append("limit",a.toString());const z=n.role==="client"?"/client/orders":"/admin/orders",J=await ke.get(`${z}?${K}`);c(J.data.orders||[]),g(J.data.pagination||{})}catch(K){console.error("Error fetching orders:",K),R.error("Failed to load order history")}finally{h(!1)}},b=async()=>{try{const K=await ke.get("/dashboard/analytics/orders?timeframe=12m");_(K.data.data||{})}catch(K){console.error("Error fetching order stats:",K)}},T=(K,z)=>{v(J=>({...J,[K]:z,page:1}))},E=K=>{v(z=>({...z,page:K}))},A=K=>{window.open(`/dashboard/orders/${K}`,"_blank")},O=async()=>{try{const K=new URLSearchParams;p.status&&K.append("status",p.status),p.dateRange?.from&&K.append("startDate",p.dateRange.from.toISOString()),p.dateRange?.to&&K.append("endDate",p.dateRange.to.toISOString()),K.append("format","csv");const z=n.role==="client"?"/client/orders/export":"/admin/orders/export",J=await ke.get(`${z}?${K}`,{responseType:"blob"}),W=new Blob([J.data],{type:"text/csv"}),he=window.URL.createObjectURL(W),V=document.createElement("a");V.href=he,V.download=`orders-export-${Date.now()}.csv`,document.body.appendChild(V),V.click(),window.URL.revokeObjectURL(he),document.body.removeChild(V),R.success("Orders exported successfully")}catch(K){console.error("Error exporting orders:",K),R.error("Failed to export orders")}},Q=K=>{const z={Draft:{color:"bg-gray-100 text-gray-800",icon:ps},Submitted:{color:"bg-blue-100 text-blue-800",icon:ps},Under_Review:{color:"bg-yellow-100 text-yellow-800",icon:mr},Approved:{color:"bg-green-100 text-green-800",icon:ks},Rejected:{color:"bg-red-100 text-red-800",icon:cr},Completed:{color:"bg-green-100 text-green-800",icon:ks},Cancelled:{color:"bg-red-100 text-red-800",icon:cr}},J=z[K]||z.Draft,W=J.icon;return e.jsxs(ze,{className:`${J.color} flex items-center gap-1`,children:[e.jsx(W,{className:"h-3 w-3"}),K.replace("_"," ")]})},q=K=>{const z={low:"bg-green-100 text-green-800",normal:"bg-blue-100 text-blue-800",high:"bg-orange-100 text-orange-800",urgent:"bg-red-100 text-red-800"};return e.jsx(ze,{className:`${z[K]||z.normal} text-xs`,children:K})},U=K=>new Intl.NumberFormat("en-KE",{style:"currency",currency:"KES"}).format(K),D=K=>new Date(K).toLocaleDateString("en-KE",{year:"numeric",month:"short",day:"numeric"}),M=[{value:"all",label:"All Statuses"},{value:"Draft",label:"Draft"},{value:"Submitted",label:"Submitted"},{value:"Under_Review",label:"Under Review"},{value:"Approved",label:"Approved"},{value:"Rejected",label:"Rejected"},{value:"Completed",label:"Completed"},{value:"Cancelled",label:"Cancelled"}],P=[{value:"all",label:"All Types"},{value:"standard",label:"Standard"},{value:"bulk",label:"Bulk"},{value:"custom",label:"Custom"},{value:"urgent",label:"Urgent"}],G=[{value:"all",label:"All Priorities"},{value:"low",label:"Low"},{value:"normal",label:"Normal"},{value:"high",label:"High"},{value:"urgent",label:"Urgent"}];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx(se,{children:e.jsx(oe,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Orders"}),e.jsx("p",{className:"text-2xl font-bold",children:y.totalOrders||0})]}),e.jsx(cs,{className:"h-8 w-8 text-blue-600"})]})})}),e.jsx(se,{children:e.jsx(oe,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Value"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:U(y.totalValue||0)})]}),e.jsx(Sa,{className:"h-8 w-8 text-green-600"})]})})}),e.jsx(se,{children:e.jsx(oe,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Average Order"}),e.jsx("p",{className:"text-2xl font-bold text-purple-600",children:U(y.averageOrderValue||0)})]}),e.jsx(aa,{className:"h-8 w-8 text-purple-600"})]})})}),e.jsx(se,{children:e.jsx(oe,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"This Month"}),e.jsx("p",{className:"text-2xl font-bold text-orange-600",children:y.monthlyTrends?.[0]?.count||0})]}),e.jsx(Ms,{className:"h-8 w-8 text-orange-600"})]})})})]}),s&&e.jsxs(se,{children:[e.jsx(_e,{children:e.jsxs(Te,{className:"flex items-center gap-2",children:[e.jsx(ll,{className:"h-5 w-5"}),"Filters"]})}),e.jsxs(oe,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-5 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Status"}),e.jsxs(Xt,{value:p.status,onValueChange:K=>T("status",K),children:[e.jsx(Jt,{children:e.jsx(Qt,{placeholder:"Select status"})}),e.jsx(es,{children:M.map(K=>e.jsx(Ie,{value:K.value,children:K.label},K.value))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Type"}),e.jsxs(Xt,{value:p.orderType,onValueChange:K=>T("orderType",K),children:[e.jsx(Jt,{children:e.jsx(Qt,{placeholder:"Select type"})}),e.jsx(es,{children:P.map(K=>e.jsx(Ie,{value:K.value,children:K.label},K.value))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Priority"}),e.jsxs(Xt,{value:p.priority,onValueChange:K=>T("priority",K),children:[e.jsx(Jt,{children:e.jsx(Qt,{placeholder:"Select priority"})}),e.jsx(es,{children:G.map(K=>e.jsx(Ie,{value:K.value,children:K.label},K.value))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Search"}),e.jsxs("div",{className:"relative",children:[e.jsx(Da,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(we,{placeholder:"Order ID, customer...",value:p.search,onChange:K=>T("search",K.target.value),className:"pl-10"})]})]}),e.jsx("div",{className:"flex items-end",children:e.jsxs(I,{onClick:O,variant:"outline",className:"w-full",children:[e.jsx(hn,{className:"h-4 w-4 mr-2"}),"Export"]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mt-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Date Range"}),e.jsx(uA,{date:p.dateRange,setDate:K=>T("dateRange",K)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Min Amount"}),e.jsx(we,{type:"number",placeholder:"0",value:p.minAmount,onChange:K=>T("minAmount",K.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Max Amount"}),e.jsx(we,{type:"number",placeholder:"No limit",value:p.maxAmount,onChange:K=>T("maxAmount",K.target.value)})]})]})]})]}),e.jsxs(se,{children:[e.jsx(_e,{children:e.jsx(Te,{children:"Order History"})}),e.jsxs(oe,{children:[d?e.jsx("div",{className:"flex items-center justify-center h-32",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900"})}):i.length===0?e.jsx("div",{className:"text-center py-8 text-gray-500",children:"No orders found for the selected criteria."}):e.jsx("div",{className:"space-y-4",children:i.map(K=>e.jsxs("div",{className:"border rounded-lg p-4 hover:bg-gray-50 transition-colors",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("h3",{className:"font-semibold text-lg",children:K.orderId}),Q(K.status),q(K.priority)]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-lg font-bold text-green-600",children:U(K.total)}),e.jsxs(I,{variant:"outline",size:"sm",onClick:()=>A(K._id),children:[e.jsx(Pa,{className:"h-4 w-4 mr-1"}),"View"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm text-gray-600",children:[e.jsxs("div",{children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Customer:"})," ",K.customer?.name||"N/A"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Type:"})," ",K.orderType]})]}),e.jsxs("div",{children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Items:"})," ",K.items?.length||0," items"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Created:"})," ",D(K.createdAt)]})]}),e.jsxs("div",{children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Delivery:"})," ",K.deliveryInfo?.address||"N/A"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Updated:"})," ",D(K.updatedAt)]})]})]}),K.clientNotes&&e.jsx("div",{className:"mt-3 p-3 bg-gray-50 rounded",children:e.jsxs("p",{className:"text-sm",children:[e.jsx("strong",{children:"Notes:"})," ",K.clientNotes]})})]},K._id))}),f.totalPages>1&&e.jsxs("div",{className:"flex items-center justify-between mt-6",children:[e.jsxs("div",{className:"text-sm text-gray-500",children:["Showing ",(f.currentPage-1)*a+1," to ",Math.min(f.currentPage*a,f.totalCount)," of ",f.totalCount," orders"]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(I,{variant:"outline",size:"sm",onClick:()=>E(f.currentPage-1),disabled:!f.hasPrev,children:"Previous"}),e.jsx(I,{variant:"outline",size:"sm",onClick:()=>E(f.currentPage+1),disabled:!f.hasNext,children:"Next"})]})]})]})]})]})},fG=()=>{const{user:t,isAuthenticated:s}=qs(),[a,n]=N.useState(!0),[i,c]=N.useState(null),[d,h]=N.useState(!1),[f,g]=N.useState({overview:{},trends:{},analytics:{}}),[p,v]=N.useState({timeframe:"30d",reportType:"overview",dateRange:null}),[y,_]=N.useState([]);N.useEffect(()=>{s&&(S(),b())},[p.timeframe,s]);const S=N.useCallback(async(U=!1)=>{if(s)try{U?(h(!0),R.info("Refreshing reports...")):n(!0),c(null);const M={Authorization:`Bearer ${localStorage.getItem("token")}`},[P,G,K]=await Promise.allSettled([ke.get("/orders",{headers:M}),ke.get("/invoices",{headers:M}),ke.get("/expenses",{headers:M})]),z=P.status==="fulfilled"?P.value?.data||[]:[],J=G.status==="fulfilled"?G.value?.data||[]:[],W=K.status==="fulfilled"?K.value?.data||[]:[],he=Array.isArray(z)?z:[],V=Array.isArray(J)?J:[],ae=Array.isArray(W)?W:[],ge=he.reduce((Ct,Lt)=>Ct+(Number(Lt.total)||0),0),Z=he.length,ee=new Set(he.map(Ct=>Ct.customer?.email).filter(Boolean)).size,te=V.filter(Ct=>Ct.paymentStatus==="pending").length,X=new Date,ce=p.timeframe==="7d"?7:p.timeframe==="30d"?30:p.timeframe==="90d"?90:365,F=new Date(X.getTime()-ce*24*60*60*1e3),re=new Date(F.getTime()-ce*24*60*60*1e3),de=he.filter(Ct=>new Date(Ct.createdAt)>=F),me=he.filter(Ct=>new Date(Ct.createdAt)>=re&&new Date(Ct.createdAt)<F),De=de.reduce((Ct,Lt)=>Ct+(Number(Lt.total)||0),0),Ne=me.reduce((Ct,Lt)=>Ct+(Number(Lt.total)||0),0),pe=Ne>0?((De-Ne)/Ne*100).toFixed(1):0,Le=me.length>0?((de.length-me.length)/me.length*100).toFixed(1):0,ot=new Set(de.map(Ct=>Ct.customer?.email).filter(Boolean)).size,Pt=new Set(me.map(Ct=>Ct.customer?.email).filter(Boolean)).size,Dt=Pt>0?((ot-Pt)/Pt*100).toFixed(1):0;g({overview:{totalRevenue:ge,totalOrders:Z,totalUsers:ee,activeServiceRequests:te,growthRates:{revenue:Number(pe),orders:Number(Le),users:Number(Dt)}},analytics:{orders:he,invoices:V,expenses:ae}}),console.log(" Report data loaded:",{orders:he.length,invoices:V.length,expenses:ae.length,totalRevenue:ge,growthRates:{revenueGrowth:pe,ordersGrowth:Le,usersGrowth:Dt}}),U&&R.success("Reports refreshed!")}catch(D){console.error(" Error fetching report data:",D),c(D.message||"Failed to load report data"),R.error("Failed to load report data")}finally{n(!1),h(!1)}},[p.timeframe,s]),b=()=>{const U=[{id:"sales-summary",name:"Sales Summary Report",description:"Comprehensive sales performance and revenue analysis",icon:Sa,category:"Financial",permissions:["canViewReports","admin"]},{id:"order-analysis",name:"Order Analysis Report",description:"Detailed order trends, status breakdown, and customer insights",icon:Bs,category:"Operations",permissions:["canViewAllOrders"]},{id:"customer-insights",name:"Customer Insights Report",description:"Customer behavior, demographics, and engagement metrics",icon:fs,category:"Marketing",permissions:["canViewAllClients"]},{id:"activity-audit",name:"Activity Audit Report",description:"User activity logs, security events, and system usage",icon:Ka,category:"Security",permissions:["canViewReports"]},{id:"performance-metrics",name:"Performance Metrics Report",description:"System performance, response times, and efficiency metrics",icon:aa,category:"Technical",permissions:["canManageSettings"]}],D=t?.permissions||{},M=t?.role||"user",P=U.filter(G=>M==="admin"||G.permissions.some(K=>D[K]||K===M));_(P.length>0?P:U)},T=async U=>{try{n(!0),R.info(`Generating ${U} report...`);const D=localStorage.getItem("token"),M={reportType:U,timeframe:p.timeframe,format:"pdf"};p.dateRange?.from&&(M.startDate=p.dateRange.from.toISOString()),p.dateRange?.to&&(M.endDate=p.dateRange.to.toISOString());const P=await ke.post("/reports/generate",M,{headers:{Authorization:`Bearer ${D}`},responseType:"blob"});if(P.data){const G=new Blob([P.data],{type:"application/pdf"}),K=window.URL.createObjectURL(G),z=document.createElement("a");z.href=K,z.download=`${U}-${new Date().toISOString().split("T")[0]}.pdf`,document.body.appendChild(z),z.click(),window.URL.revokeObjectURL(K),document.body.removeChild(z),R.success("Report downloaded successfully!")}else throw new Error("No data received")}catch(D){console.error("Error generating report:",D),R.error(D.response?.data?.message||"Report generation is currently unavailable. Please try again later.")}finally{n(!1)}},E=async(U="csv")=>{try{R.info(`Preparing ${U.toUpperCase()} export...`);const D=localStorage.getItem("token"),M=await ke.post("/reports/export",{format:U,timeframe:p.timeframe,dateRange:p.dateRange,includeCharts:U==="pdf"},{headers:{Authorization:`Bearer ${D}`},responseType:"blob"}),P=new Blob([M.data],{type:U==="pdf"?"application/pdf":"text/csv"}),G=window.URL.createObjectURL(P),K=document.createElement("a");K.href=G,K.download=`ominbiz-report-${new Date().toISOString().split("T")[0]}.${U}`,document.body.appendChild(K),K.click(),window.URL.revokeObjectURL(G),document.body.removeChild(K),R.success(`Data exported as ${U.toUpperCase()}`)}catch(D){console.error("Error exporting data:",D),R.error("Export feature is currently unavailable. Please contact support.")}},A=async(U,D)=>{try{const M=localStorage.getItem("token");await ke.post("/reports/schedule",{reportId:U,schedule:D,recipients:[t?.email||"admin@ominbiz.com"],format:"pdf"},{headers:{Authorization:`Bearer ${M}`}}),R.success(`${U} report scheduled to be sent ${D}`)}catch(M){console.error("Error scheduling report:",M),R.error("Report scheduling is currently unavailable. Feature coming soon!")}},O=U=>new Intl.NumberFormat("en-KE",{style:"currency",currency:"KES"}).format(U),Q=U=>new Intl.NumberFormat().format(U),q=[{value:"7d",label:"Last 7 Days"},{value:"30d",label:"Last 30 Days"},{value:"90d",label:"Last 90 Days"},{value:"1y",label:"Last Year"}];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Reports & Analytics"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Generate comprehensive reports and analyze business performance"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(I,{variant:"outline",onClick:()=>S(!0),disabled:d||a,children:[e.jsx(Cs,{className:`h-4 w-4 mr-2 ${d?"animate-spin":""}`}),d?"Refreshing...":"Refresh"]}),e.jsxs(I,{onClick:()=>E("csv"),disabled:a,children:[e.jsx(hn,{className:"h-4 w-4 mr-2"}),"Export CSV"]})]})]}),e.jsxs(se,{children:[e.jsx(_e,{children:e.jsxs(Te,{className:"flex items-center gap-2",children:[e.jsx(ll,{className:"h-5 w-5"}),"Report Filters"]})}),e.jsx(oe,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Timeframe"}),e.jsxs(Xt,{value:p.timeframe,onValueChange:U=>v(D=>({...D,timeframe:U})),children:[e.jsx(Jt,{children:e.jsx(Qt,{placeholder:"Select timeframe"})}),e.jsx(es,{children:q.map(U=>e.jsx(Ie,{value:U.value,children:U.label},U.value))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Report Type"}),e.jsxs(Xt,{value:p.reportType,onValueChange:U=>v(D=>({...D,reportType:U})),children:[e.jsx(Jt,{children:e.jsx(Qt,{placeholder:"Select type"})}),e.jsxs(es,{children:[e.jsx(Ie,{value:"overview",children:"Overview"}),e.jsx(Ie,{value:"detailed",children:"Detailed"}),e.jsx(Ie,{value:"summary",children:"Summary"})]})]})]}),e.jsx("div",{className:"flex items-end",children:e.jsxs(I,{onClick:()=>S(!0),className:"w-full",disabled:a||d,children:[e.jsx(Mn,{className:"h-4 w-4 mr-2"}),a?"Loading...":"Update Reports"]})})]})})]}),e.jsxs(Ha,{defaultValue:"overview",className:"space-y-6",children:[e.jsxs(Xa,{className:"grid w-full grid-cols-5",children:[e.jsx(Tt,{value:"overview",children:"Overview"}),e.jsx(Tt,{value:"reports",children:"Reports"}),e.jsx(Tt,{value:"orders",children:"Orders"}),e.jsx(Tt,{value:"activities",children:"Activities"}),e.jsx(Tt,{value:"analytics",children:"Analytics"})]}),e.jsx(kt,{value:"overview",className:"space-y-6",children:i?e.jsx(se,{className:"border-red-200 bg-red-50",children:e.jsx(oe,{className:"flex items-center justify-center py-12",children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx(Ws,{className:"h-12 w-12 text-red-500 mx-auto"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-red-700",children:"Failed to Load Report Data"}),e.jsx("p",{className:"text-sm text-red-600",children:i})]}),e.jsxs(I,{onClick:()=>S(),variant:"outline",children:[e.jsx(Cs,{className:"mr-2 h-4 w-4"}),"Retry"]})]})})}):a?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[1,2,3,4].map(U=>e.jsx(se,{children:e.jsx(oe,{className:"p-6",children:e.jsxs("div",{className:"space-y-2 animate-pulse",children:[e.jsx("div",{className:"h-4 w-24 bg-gray-200 rounded"}),e.jsx("div",{className:"h-8 w-32 bg-gray-200 rounded"}),e.jsx("div",{className:"h-3 w-20 bg-gray-200 rounded"})]})})},U))}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx(se,{children:e.jsx(oe,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Revenue"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:O(f.overview?.totalRevenue||0)}),e.jsx("div",{className:"flex items-center mt-1",children:(f.overview?.growthRates?.revenue||0)>=0?e.jsxs(e.Fragment,{children:[e.jsx(aa,{className:"h-3 w-3 text-green-600 mr-1"}),e.jsxs("span",{className:"text-xs text-green-600",children:["+",Math.abs(f.overview?.growthRates?.revenue||0),"%"]})]}):e.jsxs(e.Fragment,{children:[e.jsx(No,{className:"h-3 w-3 text-red-600 mr-1"}),e.jsxs("span",{className:"text-xs text-red-600",children:[f.overview?.growthRates?.revenue,"%"]})]})})]}),e.jsx(Sa,{className:"h-8 w-8 text-green-600"})]})})}),e.jsx(se,{children:e.jsx(oe,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Orders"}),e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:Q(f.overview?.totalOrders||0)}),e.jsx("div",{className:"flex items-center mt-1",children:(f.overview?.growthRates?.orders||0)>=0?e.jsxs(e.Fragment,{children:[e.jsx(aa,{className:"h-3 w-3 text-green-600 mr-1"}),e.jsxs("span",{className:"text-xs text-green-600",children:["+",Math.abs(f.overview?.growthRates?.orders||0),"%"]})]}):e.jsxs(e.Fragment,{children:[e.jsx(No,{className:"h-3 w-3 text-red-600 mr-1"}),e.jsxs("span",{className:"text-xs text-red-600",children:[f.overview?.growthRates?.orders,"%"]})]})})]}),e.jsx(Bs,{className:"h-8 w-8 text-blue-600"})]})})}),e.jsx(se,{children:e.jsx(oe,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Users"}),e.jsx("p",{className:"text-2xl font-bold text-purple-600",children:Q(f.overview?.totalUsers||0)}),e.jsx("div",{className:"flex items-center mt-1",children:(f.overview?.growthRates?.users||0)>=0?e.jsxs(e.Fragment,{children:[e.jsx(aa,{className:"h-3 w-3 text-green-600 mr-1"}),e.jsxs("span",{className:"text-xs text-green-600",children:["+",Math.abs(f.overview?.growthRates?.users||0),"%"]})]}):e.jsxs(e.Fragment,{children:[e.jsx(No,{className:"h-3 w-3 text-red-600 mr-1"}),e.jsxs("span",{className:"text-xs text-red-600",children:[f.overview?.growthRates?.users,"%"]})]})})]}),e.jsx(fs,{className:"h-8 w-8 text-purple-600"})]})})}),e.jsx(se,{children:e.jsx(oe,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Active Requests"}),e.jsx("p",{className:"text-2xl font-bold text-orange-600",children:Q(f.overview?.activeServiceRequests||0)}),e.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Service requests"})]}),e.jsx(Ka,{className:"h-8 w-8 text-orange-600"})]})})})]}),e.jsxs(se,{children:[e.jsx(_e,{children:e.jsx(Te,{children:"Quick Report Actions"})}),e.jsx(oe,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs(I,{variant:"outline",className:"h-20 flex-col",onClick:()=>E("pdf"),children:[e.jsx(hn,{className:"h-6 w-6 mb-2"}),e.jsx("span",{className:"text-sm",children:"Export PDF Report"})]}),e.jsxs(I,{variant:"outline",className:"h-20 flex-col",onClick:()=>E("csv"),children:[e.jsx(Ka,{className:"h-6 w-6 mb-2"}),e.jsx("span",{className:"text-sm",children:"Export Data CSV"})]}),e.jsxs(I,{variant:"outline",className:"h-20 flex-col",onClick:()=>A("overview","weekly"),children:[e.jsx(fa,{className:"h-6 w-6 mb-2"}),e.jsx("span",{className:"text-sm",children:"Schedule Weekly Report"})]})]})})]})]})}),e.jsx(kt,{value:"reports",className:"space-y-6",children:y.length===0?e.jsx(se,{children:e.jsx(oe,{className:"flex items-center justify-center py-12",children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx(Ka,{className:"h-12 w-12 text-muted-foreground mx-auto"}),e.jsx("p",{className:"text-muted-foreground",children:"No reports available"})]})})}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:y.map(U=>{const D=U.icon;return e.jsxs(se,{className:"hover:shadow-lg transition-shadow",children:[e.jsxs(_e,{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(D,{className:"h-8 w-8 text-blue-600"}),e.jsx(ze,{variant:"outline",children:U.category})]}),e.jsx(Te,{className:"text-lg",children:U.name})]}),e.jsxs(oe,{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:U.description}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs(I,{size:"sm",onClick:()=>T(U.id),disabled:a,children:[e.jsx(hn,{className:"h-4 w-4 mr-1"}),"Generate"]}),e.jsxs(I,{size:"sm",variant:"outline",onClick:()=>A(U.id,"monthly"),children:[e.jsx(ps,{className:"h-4 w-4 mr-1"}),"Schedule"]})]})]})]},U.id)})})}),e.jsx(kt,{value:"orders",children:e.jsx(mG,{showFilters:!0,limit:20})}),e.jsx(kt,{value:"activities",children:e.jsx(dm,{showFilters:!0,limit:20})}),e.jsx(kt,{value:"analytics",className:"space-y-6",children:e.jsxs(se,{children:[e.jsx(_e,{children:e.jsx(Te,{children:"Advanced Analytics"})}),e.jsx(oe,{children:e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(Mn,{className:"h-16 w-16 mx-auto mb-4 text-gray-300"}),e.jsx("p",{children:"Advanced analytics charts and visualizations will be displayed here."}),e.jsx("p",{className:"text-sm mt-2",children:"Integration with charting libraries like Chart.js or D3.js recommended."})]})})]})})]})]})},xG=()=>{const{user:t}=qs(),{socket:s,connected:a}=Ra(),n=_n(),[i,c]=N.useState("chat"),[d,h]=N.useState([]),[f,g]=N.useState(""),[p,v]=N.useState(!1),[y,_]=N.useState([]),[S,b]=N.useState(null),[T,E]=N.useState("offline"),[A,O]=N.useState(""),[Q,q]=N.useState([]),[U,D]=N.useState([]),[M,P]=N.useState(!1),[G,K]=N.useState(!1),[z,J]=N.useState(!1),[W,he]=N.useState({subject:"",description:"",priority:"medium"}),[V,ae]=N.useState(!0),[ge,Z]=N.useState(null),[ee,te]=N.useState(null),[X,ce]=N.useState(null),[F,re]=N.useState(null),[de,me]=N.useState(!0),[De,Ne]=N.useState(!0),pe=N.useRef(null),Le=N.useRef(null),ot=N.useRef(null),Pt=N.useRef(null);N.useEffect(()=>(Ct(),Lt(),yt(),Dt(),()=>{ws()}),[s]);const Dt=()=>{if(s)return s.emit("join_support_chat",{userId:t?._id,userName:t?.name}),s.on("support_message_received",Se=>{h(Ce=>[...Ce,Se]),v(!1)}),s.on("agent_typing",Se=>{v(Se.isTyping)}),s.on("agent_status_update",Se=>{_(Ce=>Ce.map(rt=>rt.id===Se.agentId?{...rt,status:Se.status}:rt)),Se.agentId===S?.id&&E(Se.status)}),s.on("ticket_status_update",Se=>{D(Ce=>Ce.map(rt=>rt.id===Se.ticketId?{...rt,status:Se.status,lastUpdate:new Date}:rt)),R.info(`Ticket ${Se.ticketId} updated: ${Se.status}`)}),s.on("video_offer",Me),s.on("video_answer",ht),s.on("ice_candidate",He),s.on("call_ended",Mt),()=>{s.off("support_message_received"),s.off("agent_typing"),s.off("agent_status_update"),s.off("ticket_status_update"),s.off("video_offer"),s.off("video_answer"),s.off("ice_candidate"),s.off("call_ended")}};N.useEffect(()=>{Es()},[d]);const Ct=async()=>{try{ae(!0),Z(null);const Se=await fu.getSupportAgents().catch(()=>[{id:1,name:"Support Team",role:"Customer Support",avatar:"/api/placeholder/40/40",status:"online",rating:4.9,specialties:["General Support","Technical Help"]}]);_(Se),b(Se[0]),E(Se[0]?.status||"online");const Ce={id:1,sender:"agent",message:`Hi ${t?.name||"there"}! I'm ${Se[0]?.name}, your support specialist. How can I help you today?`,timestamp:new Date,agent:Se[0]};h([Ce]),console.log(" Support initialized:",{agents:Se.length,activeAgent:Se[0]?.name})}catch(Se){console.error(" Error initializing support:",Se),Z("Failed to connect to support. Please try again later."),R.error("Failed to initialize support system")}finally{ae(!1)}},Lt=async()=>{try{const Se=await fu.getFAQs();q(Array.isArray(Se)?Se:[]),console.log(" FAQs loaded:",Se.length)}catch(Se){console.error(" Error loading FAQs:",Se),q([{id:1,question:"How do I reset my password?",answer:'You can reset your password by clicking on "Forgot Password" on the login page. Enter your email and follow the instructions sent to your inbox.',category:"Account",helpful:45,views:234},{id:2,question:"How to integrate with third-party APIs?",answer:"Our API integration guide provides step-by-step instructions. Visit the Developer section in Settings for API keys and documentation.",category:"Technical",helpful:38,views:189},{id:3,question:"What payment methods do you accept?",answer:"We accept all major credit cards (Visa, Mastercard, Amex), PayPal, M-Pesa, and bank transfers. All transactions are encrypted and secure.",category:"Billing",helpful:52,views:312},{id:4,question:"How do I export my data?",answer:"Navigate to Reports > Export Data. Choose your format (CSV, PDF, Excel) and date range. Your export will download automatically.",category:"Data",helpful:29,views:156},{id:5,question:"Can I customize my dashboard?",answer:"Yes! Click the Settings icon on your dashboard. You can rearrange widgets, choose themes, and customize which metrics to display.",category:"Customization",helpful:67,views:421}])}},yt=async()=>{try{const Se=await fu.getTickets();D(Array.isArray(Se)?Se:[]),console.log(" Tickets loaded:",Se.length)}catch(Se){console.error(" Error loading tickets:",Se),D([])}},ys=async()=>{if(!f.trim())return;const Se={id:Date.now(),sender:"user",senderName:t?.name,message:f,timestamp:new Date,userId:t?._id,agentId:S?.id};h(Ce=>[...Ce,Se]),g(""),s&&a&&s.emit("send_support_message",Se);try{await fu.sendMessage(S?.id,f)}catch(Ce){console.error("Failed to save message:",Ce)}},Es=()=>{pe.current?.scrollIntoView({behavior:"smooth"})},Hs=Se=>{const Ce=Se.target.files[0];if(Ce){const rt={id:Date.now(),sender:"user",message:`Uploaded file: ${Ce.name}`,timestamp:new Date,attachment:{name:Ce.name,size:Ce.size,type:Ce.type}};h(Qe=>[...Qe,rt]),R.success("File uploaded successfully")}},bs=async()=>{try{const Se=await navigator.mediaDevices.getUserMedia({video:{width:1280,height:720},audio:!0});te(Se),K(!0),ot.current&&(ot.current.srcObject=Se);const Ce=new RTCPeerConnection({iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:"stun:stun1.l.google.com:19302"}]});Se.getTracks().forEach(Qe=>{Ce.addTrack(Qe,Se)}),Ce.ontrack=Qe=>{ce(Qe.streams[0]),Pt.current&&(Pt.current.srcObject=Qe.streams[0])},Ce.onicecandidate=Qe=>{Qe.candidate&&s&&s.emit("ice_candidate",{candidate:Qe.candidate,userId:t?._id,agentId:S?.id})},re(Ce);const rt=await Ce.createOffer();await Ce.setLocalDescription(rt),s&&s.emit("video_call_offer",{offer:rt,userId:t?._id,agentId:S?.id}),R.success("Video call started with "+S?.name)}catch(Se){console.error("Error starting video call:",Se),R.error("Failed to access camera/microphone. Please check permissions.")}},$s=()=>{ws(),s&&s.emit("end_video_call",{userId:t?._id,agentId:S?.id}),K(!1),R.info("Video call ended")},ws=()=>{ee&&(ee.getTracks().forEach(Se=>Se.stop()),te(null)),F&&(F.close(),re(null)),ce(null),me(!0),Ne(!0)},$t=()=>{if(ee){const Se=ee.getVideoTracks()[0];Se&&(Se.enabled=!Se.enabled,me(Se.enabled),R.info(Se.enabled?"Camera on":"Camera off"))}},Na=()=>{if(ee){const Se=ee.getAudioTracks()[0];Se&&(Se.enabled=!Se.enabled,Ne(Se.enabled),R.info(Se.enabled?"Microphone on":"Microphone off"))}},Me=async Se=>{if(F)try{await F.setRemoteDescription(new RTCSessionDescription(Se.offer));const Ce=await F.createAnswer();await F.setLocalDescription(Ce),s&&s.emit("video_call_answer",{answer:Ce,userId:t?._id,agentId:Se.userId})}catch(Ce){console.error("Error handling video offer:",Ce)}},ht=async Se=>{if(F)try{await F.setRemoteDescription(new RTCSessionDescription(Se.answer))}catch(Ce){console.error("Error handling video answer:",Ce)}},He=async Se=>{if(F)try{await F.addIceCandidate(new RTCIceCandidate(Se.candidate))}catch(Ce){console.error("Error adding ICE candidate:",Ce)}},Mt=()=>{ws(),K(!1),R.info("Call ended by agent")},Rt=()=>{P(!M),R.info(M?"Recording stopped":"Recording started")},xs=async()=>{if(!W.subject.trim()||!W.description.trim()){R.error("Please fill in all required fields");return}try{const Se=await fu.createTicket({subject:W.subject,description:W.description,priority:W.priority,userId:t?._id});D(Ce=>[Se,...Ce]),he({subject:"",description:"",priority:"medium"}),J(!1),R.success("Support ticket created successfully!")}catch(Se){console.error("Error creating ticket:",Se);const Ce={id:`TKT-${Date.now()}`,subject:W.subject,status:"open",priority:W.priority,created:new Date,lastUpdate:new Date,agent:"Unassigned"};D(rt=>[Ce,...rt]),he({subject:"",description:"",priority:"medium"}),J(!1),R.success("Support ticket created successfully!")}},Ks=(Se,Ce)=>{q(rt=>rt.map(Qe=>Qe.id===Se?{...Qe,helpful:Qe.helpful+(Ce?1:-1)}:Qe)),R.success(Ce?"Marked as helpful!":"Feedback recorded")},Ze=async Se=>{Se.preventDefault();const Ce=new FormData(Se.target),rt=Ce.get("subject"),Qe=Ce.get("message");try{await fu.createTicket({subject:rt,description:Qe,priority:"medium",userId:t?._id}),R.success("Message sent! We'll respond shortly."),Se.target.reset()}catch{const Ot={id:`TKT-${Date.now()}`,subject:rt,status:"open",priority:"medium",created:new Date,lastUpdate:new Date,agent:"Unassigned"};D(ts=>[Ot,...ts]),R.success("Message sent! We'll respond shortly."),Se.target.reset()}},Xe=Q.filter(Se=>Se.question.toLowerCase().includes(A.toLowerCase())||Se.answer.toLowerCase().includes(A.toLowerCase()));return V?e.jsx("div",{className:"p-6 max-w-7xl mx-auto",children:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto"}),e.jsx("p",{className:"text-muted-foreground",children:"Loading support system..."})]})})}):ge?e.jsx("div",{className:"p-6 max-w-7xl mx-auto",children:e.jsx(se,{className:"border-red-200 bg-red-50",children:e.jsx(oe,{className:"flex items-center justify-center py-12",children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx(Ws,{className:"h-12 w-12 text-red-500 mx-auto"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-red-700",children:"Support System Error"}),e.jsx("p",{className:"text-sm text-red-600",children:ge})]}),e.jsxs(I,{onClick:Ct,variant:"outline",children:[e.jsx(Cs,{className:"mr-2 h-4 w-4"}),"Try Again"]})]})})})}):e.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Help & Support"}),e.jsxs("p",{className:"text-muted-foreground mt-2",children:["Get instant help from our support team  ",a?" Connected":" Offline"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-8",children:[e.jsx(se,{className:"cursor-pointer hover:shadow-lg transition-all hover:border-primary group",onClick:()=>n("/dashboard/sessions"),children:e.jsxs(oe,{className:"p-6",children:[e.jsx("div",{className:"bg-blue-50 dark:bg-blue-950 rounded-lg p-3 w-fit mb-3 group-hover:scale-110 transition-transform",children:e.jsx(za,{className:"h-6 w-6 text-blue-500"})}),e.jsxs("h3",{className:"font-semibold mb-1 flex items-center gap-2",children:["Live Sessions",e.jsx(ze,{className:"bg-green-500 text-white text-[10px] px-1.5 py-0",children:"New"})]}),e.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Schedule video meetings & webinars"}),e.jsx(I,{variant:"link",className:"p-0 h-auto text-sm",children:"Schedule Now "})]})}),e.jsx(se,{className:"cursor-pointer hover:shadow-lg transition-all hover:border-primary",onClick:()=>n("/dashboard/messages"),children:e.jsxs(oe,{className:"p-6",children:[e.jsx("div",{className:"bg-purple-50 dark:bg-purple-950 rounded-lg p-3 w-fit mb-3",children:e.jsx(ja,{className:"h-6 w-6 text-purple-500"})}),e.jsx("h3",{className:"font-semibold mb-1",children:"Messages"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Direct messaging with team"}),e.jsx(I,{variant:"link",className:"p-0 h-auto text-sm",children:"Open Messages "})]})}),e.jsx(se,{className:"cursor-pointer hover:shadow-lg transition-all hover:border-primary",children:e.jsxs(oe,{className:"p-6",children:[e.jsx("div",{className:"bg-green-50 dark:bg-green-950 rounded-lg p-3 w-fit mb-3",children:e.jsx(Ka,{className:"h-6 w-6 text-green-500"})}),e.jsx("h3",{className:"font-semibold mb-1",children:"Support Tickets"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Track your support requests"}),e.jsx(I,{variant:"link",className:"p-0 h-auto text-sm",onClick:()=>c("tickets"),children:"View Tickets "})]})}),e.jsx(se,{className:"cursor-pointer hover:shadow-lg transition-all hover:border-primary",children:e.jsxs(oe,{className:"p-6",children:[e.jsx("div",{className:"bg-orange-50 dark:bg-orange-950 rounded-lg p-3 w-fit mb-3",children:e.jsx(ia,{className:"h-6 w-6 text-orange-500"})}),e.jsx("h3",{className:"font-semibold mb-1",children:"Contact Us"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Phone, email & social media"}),e.jsx(I,{variant:"link",className:"p-0 h-auto text-sm",onClick:()=>c("contact"),children:"Get in Touch "})]})})]}),e.jsxs(Ha,{value:i,onValueChange:c,className:"space-y-6",children:[e.jsxs(Xa,{className:"grid w-full grid-cols-4",children:[e.jsxs(Tt,{value:"chat",className:"flex items-center gap-2",children:[e.jsx(ja,{className:"h-4 w-4"}),"Live Chat"]}),e.jsxs(Tt,{value:"faq",className:"flex items-center gap-2",children:[e.jsx(Xy,{className:"h-4 w-4"}),"FAQ"]}),e.jsxs(Tt,{value:"tickets",className:"flex items-center gap-2",children:[e.jsx(Ka,{className:"h-4 w-4"}),"Support Tickets"]}),e.jsxs(Tt,{value:"contact",className:"flex items-center gap-2",children:[e.jsx(ia,{className:"h-4 w-4"}),"Contact"]})]}),e.jsx(kt,{value:"chat",className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[e.jsxs(se,{className:"lg:col-span-1",children:[e.jsx(_e,{children:e.jsxs(Te,{className:"flex items-center gap-2",children:[e.jsx(fs,{className:"h-5 w-5"}),"Support Team"]})}),e.jsx(oe,{className:"space-y-4",children:y.map(Se=>e.jsxs("div",{className:`p-3 rounded-lg cursor-pointer transition-colors border ${S?.id===Se.id?"bg-primary/10 border-primary":"hover:bg-muted border-transparent"}`,onClick:()=>b(Se),children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"relative",children:[e.jsxs(Pn,{className:"h-10 w-10",children:[e.jsx(Rr,{src:Se.avatar}),e.jsx(On,{children:Se.name.split(" ").map(Ce=>Ce[0]).join("")})]}),e.jsx("div",{className:`absolute -bottom-1 -right-1 w-3 h-3 rounded-full border-2 border-white ${Se.status==="online"?"bg-green-500":Se.status==="busy"?"bg-yellow-500":"bg-gray-400"}`})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-medium text-sm",children:Se.name}),e.jsx("p",{className:"text-xs text-muted-foreground",children:Se.role}),e.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[e.jsx(Dn,{className:"h-3 w-3 text-yellow-500 fill-current"}),e.jsx("span",{className:"text-xs text-muted-foreground",children:Se.rating})]})]})]}),e.jsx("div",{className:"mt-2",children:Se.specialties&&Array.isArray(Se.specialties)&&Se.specialties.map(Ce=>e.jsx(ze,{variant:"secondary",className:"text-xs mr-1 mb-1",children:Ce},Ce))})]},Se.id))})]}),e.jsxs(se,{className:"lg:col-span-3",children:[e.jsx(_e,{className:"border-b",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(Pn,{className:"h-10 w-10",children:[e.jsx(Rr,{src:S?.avatar}),e.jsx(On,{children:S?.name.split(" ").map(Se=>Se[0]).join("")})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:S?.name}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${T==="online"?"bg-green-500":"bg-muted-foreground"}`}),e.jsx("span",{className:"text-sm text-muted-foreground capitalize",children:T})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(I,{variant:"outline",size:"sm",onClick:bs,className:"flex items-center gap-2",children:[e.jsx(za,{className:"h-4 w-4"}),"Video Call"]}),e.jsxs(I,{variant:"outline",size:"sm",onClick:Rt,className:`flex items-center gap-2 ${M?"text-red-600":""}`,children:[M?e.jsx(Tm,{className:"h-4 w-4"}):e.jsx(Cm,{className:"h-4 w-4"}),M?"Stop":"Record"]})]})]})}),e.jsxs(oe,{className:"p-0",children:[e.jsx(xr,{className:"h-96 p-4",children:e.jsxs("div",{className:"space-y-4",children:[d.map(Se=>e.jsx("div",{className:`flex ${Se.sender==="user"?"justify-end":"justify-start"}`,children:e.jsxs("div",{className:`max-w-xs lg:max-w-md px-4 py-2 rounded-lg ${Se.sender==="user"?"bg-primary text-primary-foreground":"bg-muted text-foreground"}`,children:[Se.sender==="agent"&&e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsxs(Pn,{className:"h-6 w-6",children:[e.jsx(Rr,{src:Se.agent?.avatar}),e.jsx(On,{className:"text-xs",children:Se.agent?.name.split(" ").map(Ce=>Ce[0]).join("")})]}),e.jsx("span",{className:"text-xs font-medium",children:Se.agent?.name})]}),e.jsx("p",{className:"text-sm",children:Se.message}),Se.attachment&&e.jsxs("div",{className:"mt-2 p-2 bg-white bg-opacity-20 rounded flex items-center gap-2",children:[e.jsx(Ru,{className:"h-4 w-4"}),e.jsx("span",{className:"text-xs",children:Se.attachment.name})]}),e.jsx("p",{className:"text-xs opacity-70 mt-1",children:Se.timestamp.toLocaleTimeString()})]})},Se.id)),p&&e.jsx("div",{className:"flex justify-start",children:e.jsx("div",{className:"bg-muted px-4 py-2 rounded-lg",children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-2 h-2 bg-muted-foreground rounded-full animate-bounce"}),e.jsx("div",{className:"w-2 h-2 bg-muted-foreground rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),e.jsx("div",{className:"w-2 h-2 bg-muted-foreground rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})})}),e.jsx("div",{ref:pe})]})}),e.jsx("div",{className:"border-t p-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"file",ref:Le,onChange:Hs,className:"hidden"}),e.jsx(I,{variant:"outline",size:"sm",onClick:()=>Le.current?.click(),children:e.jsx(Ru,{className:"h-4 w-4"})}),e.jsx(we,{value:f,onChange:Se=>g(Se.target.value),placeholder:"Type your message...",onKeyPress:Se=>Se.key==="Enter"&&ys(),className:"flex-1"}),e.jsx(I,{onClick:ys,disabled:!f.trim(),children:e.jsx(mn,{className:"h-4 w-4"})})]})})]})]})]})}),e.jsx(kt,{value:"faq",className:"space-y-6",children:e.jsxs(se,{children:[e.jsxs(_e,{children:[e.jsx(Te,{children:"Frequently Asked Questions"}),e.jsxs("div",{className:"relative",children:[e.jsx(Da,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(we,{placeholder:"Search FAQs...",value:A,onChange:Se=>O(Se.target.value),className:"pl-10"})]})]}),e.jsx(oe,{children:e.jsx("div",{className:"space-y-4",children:Xe.map(Se=>e.jsx("div",{className:"border rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-medium text-foreground mb-2",children:Se.question}),e.jsx("p",{className:"text-muted-foreground text-sm mb-3",children:Se.answer}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[e.jsx(ze,{variant:"secondary",children:Se.category}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(ld,{className:"h-4 w-4"}),Se.helpful]}),e.jsxs("span",{children:[Se.views," views"]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(I,{variant:"ghost",size:"sm",onClick:()=>Ks(Se.id,!0),children:e.jsx(ld,{className:"h-4 w-4"})}),e.jsx(I,{variant:"ghost",size:"sm",onClick:()=>Ks(Se.id,!1),children:e.jsx(I_,{className:"h-4 w-4"})})]})]})},Se.id))})})]})}),e.jsxs(kt,{value:"tickets",className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Support Tickets"}),e.jsxs(Gt,{open:z,onOpenChange:J,children:[e.jsx(Za,{asChild:!0,children:e.jsxs(I,{className:"flex items-center gap-2",children:[e.jsx(ha,{className:"h-4 w-4"}),"Create New Ticket"]})}),e.jsxs(qt,{className:"sm:max-w-[500px]",children:[e.jsxs(Kt,{children:[e.jsx(Yt,{children:"Create Support Ticket"}),e.jsx(vs,{children:"Describe your issue and we'll get back to you as soon as possible."})]}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(ue,{htmlFor:"ticket-subject",children:"Subject *"}),e.jsx(we,{id:"ticket-subject",placeholder:"Brief description of your issue",value:W.subject,onChange:Se=>he(Ce=>({...Ce,subject:Se.target.value}))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ue,{htmlFor:"ticket-priority",children:"Priority"}),e.jsxs(Xt,{value:W.priority,onValueChange:Se=>he(Ce=>({...Ce,priority:Se})),children:[e.jsx(Jt,{children:e.jsx(Qt,{placeholder:"Select priority"})}),e.jsxs(es,{children:[e.jsx(Ie,{value:"low",children:"Low"}),e.jsx(Ie,{value:"medium",children:"Medium"}),e.jsx(Ie,{value:"high",children:"High"}),e.jsx(Ie,{value:"urgent",children:"Urgent"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ue,{htmlFor:"ticket-description",children:"Description *"}),e.jsx(Gs,{id:"ticket-description",placeholder:"Provide detailed information about your issue",rows:5,value:W.description,onChange:Se=>he(Ce=>({...Ce,description:Se.target.value}))})]})]}),e.jsxs(ea,{children:[e.jsx(I,{variant:"outline",onClick:()=>J(!1),children:"Cancel"}),e.jsx(I,{onClick:xs,children:"Create Ticket"})]})]})]})]}),e.jsx("div",{className:"grid gap-4",children:U.map(Se=>e.jsx(se,{children:e.jsx(oe,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium",children:Se.subject}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Ticket #",Se.id]})]}),e.jsx(ze,{variant:Se.status==="open"?"destructive":"default",children:Se.status}),e.jsx(ze,{variant:Se.priority==="high"?"destructive":"secondary",children:Se.priority})]}),e.jsxs("div",{className:"text-right text-sm text-muted-foreground",children:[e.jsxs("p",{children:["Assigned to: ",Se.agent]}),e.jsxs("p",{children:["Last update: ",Se.lastUpdate.toLocaleDateString()]})]})]})})},Se.id))})]}),e.jsx(kt,{value:"contact",className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(se,{children:[e.jsx(_e,{children:e.jsx(Te,{children:"Contact Information"})}),e.jsxs(oe,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ia,{className:"h-5 w-5 text-blue-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Phone Support"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"+254 758 175 275"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Available 24/7"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(fa,{className:"h-5 w-5 text-green-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Email Support"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"ominbizsolutions@gmail.com"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Response within 2 hours"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(za,{className:"h-5 w-5 text-purple-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Video Support"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Schedule a call"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Mon-Fri 9AM-6PM EST"})]})]})]})]}),e.jsxs(se,{children:[e.jsxs(_e,{children:[e.jsx(Te,{children:"Quick Contact"}),e.jsx(vt,{children:"Send us a message and we'll create a ticket for you"})]}),e.jsx(oe,{children:e.jsxs("form",{onSubmit:Ze,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(ue,{htmlFor:"contact-subject",children:"Subject *"}),e.jsx(we,{id:"contact-subject",name:"subject",placeholder:"How can we help?",required:!0})]}),e.jsxs("div",{children:[e.jsx(ue,{htmlFor:"contact-message",children:"Message *"}),e.jsx(Gs,{id:"contact-message",name:"message",placeholder:"Describe your issue...",rows:4,required:!0})]}),e.jsxs(I,{type:"submit",className:"w-full",children:[e.jsx(mn,{className:"h-4 w-4 mr-2"}),"Send Message"]})]})})]})]})})]}),G&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-95 flex items-center justify-center z-50",children:e.jsxs("div",{className:"w-full max-w-6xl mx-4 h-[90vh] flex flex-col",children:[e.jsxs("div",{className:"bg-gray-900 text-white p-4 rounded-t-lg flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"relative",children:[e.jsxs(Pn,{className:"h-10 w-10",children:[e.jsx(Rr,{src:S?.avatar}),e.jsx(On,{children:S?.name.split(" ").map(Se=>Se[0]).join("")})]}),e.jsx("div",{className:"absolute -bottom-1 -right-1 w-3 h-3 rounded-full bg-green-500 border-2 border-gray-900 animate-pulse"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:S?.name}),e.jsx("p",{className:"text-xs text-gray-400",children:"In call"})]})]}),e.jsxs(I,{variant:"destructive",onClick:$s,children:[e.jsx(nr,{className:"h-4 w-4 mr-2"}),"End Call"]})]}),e.jsxs("div",{className:"flex-1 relative bg-gray-800 rounded-b-lg overflow-hidden",children:[e.jsx("video",{ref:Pt,autoPlay:!0,playsInline:!0,className:"w-full h-full object-cover"}),!X&&e.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center bg-gray-800",children:[e.jsxs(Pn,{className:"h-32 w-32 mb-4",children:[e.jsx(Rr,{src:S?.avatar}),e.jsx(On,{className:"text-4xl",children:S?.name.split(" ").map(Se=>Se[0]).join("")})]}),e.jsxs("p",{className:"text-white text-lg",children:["Connecting to ",S?.name,"..."]}),e.jsxs("div",{className:"flex gap-2 mt-4",children:[e.jsx("div",{className:"w-2 h-2 bg-white rounded-full animate-bounce"}),e.jsx("div",{className:"w-2 h-2 bg-white rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),e.jsx("div",{className:"w-2 h-2 bg-white rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})]}),e.jsxs("div",{className:"absolute bottom-4 right-4 w-64 h-48 bg-gray-900 rounded-lg overflow-hidden border-2 border-gray-600 shadow-2xl",children:[e.jsx("video",{ref:ot,autoPlay:!0,playsInline:!0,muted:!0,className:"w-full h-full object-cover"}),e.jsx("div",{className:"absolute bottom-2 left-2 bg-black bg-opacity-70 px-2 py-1 rounded text-xs text-white",children:"You"}),!de&&e.jsx("div",{className:"absolute inset-0 bg-gray-900 flex items-center justify-center",children:e.jsx(lp,{className:"h-12 w-12 text-gray-500"})})]}),e.jsxs("div",{className:"absolute bottom-4 left-1/2 transform -translate-x-1/2 flex items-center gap-3 bg-gray-900 bg-opacity-90 px-6 py-3 rounded-full",children:[e.jsx(I,{variant:De?"secondary":"destructive",size:"icon",className:"rounded-full w-12 h-12",onClick:Na,children:De?e.jsx(Cm,{className:"h-5 w-5"}):e.jsx(Tm,{className:"h-5 w-5"})}),e.jsx(I,{variant:de?"secondary":"destructive",size:"icon",className:"rounded-full w-12 h-12",onClick:$t,children:de?e.jsx(za,{className:"h-5 w-5"}):e.jsx(lp,{className:"h-5 w-5"})}),e.jsx(I,{variant:"destructive",size:"icon",className:"rounded-full w-14 h-14",onClick:$s,children:e.jsx(ia,{className:"h-6 w-6 rotate-135"})})]}),e.jsxs("div",{className:"absolute top-4 left-4 flex items-center gap-2 bg-black bg-opacity-70 px-3 py-2 rounded-full",children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${a?"bg-green-500 animate-pulse":"bg-red-500"}`}),e.jsx("span",{className:"text-xs text-white",children:a?"Connected":"Connecting..."})]})]})]})})]})},pG=()=>{const[t,s]=N.useState([]),[a,n]=N.useState(!0),[i,c]=N.useState(!1),[d,h]=N.useState(null),{socket:f,connected:g}=Ra(),[p,v]=N.useState({type:"feedback",category:"general",subject:"",message:"",name:"",email:"",phone:"",priority:"normal",contactMethod:"email"});N.useEffect(()=>{y()},[]),N.useEffect(()=>{if(!(!f||!g))return f.on("feedback_created",A=>{s(O=>[A.feedback,...O]),R.success("New feedback received")}),f.on("feedback_updated",A=>{s(O=>O.map(Q=>Q._id===A.feedback._id?A.feedback:Q)),d?._id===A.feedback._id&&h(A.feedback)}),()=>{f.off("feedback_created"),f.off("feedback_updated")}},[f,g,d]);const y=async()=>{try{n(!0);const A=localStorage.getItem("token"),{data:O}=await ke.get("/feedback",{headers:{Authorization:`Bearer ${A}`}});s(O.feedback||[])}catch(A){console.error("Error fetching feedback:",A),R.error("Failed to load feedback")}finally{n(!1)}},_=async A=>{if(A.preventDefault(),!p.subject||!p.message||!p.email){R.error("Please fill in all required fields");return}try{const O=localStorage.getItem("token"),{data:Q}=await ke.post("/feedback",p,{headers:{Authorization:`Bearer ${O}`}});R.success("Feedback submitted successfully!"),s(q=>[Q.feedback,...q]),c(!1),b()}catch(O){R.error("Failed to submit feedback"),console.error("Error:",O)}},S=async(A,O)=>{try{const Q=localStorage.getItem("token");await ke.post(`/feedback/${A}/response`,{response:O,status:"resolved"},{headers:{Authorization:`Bearer ${Q}`}}),R.success("Response sent successfully"),y()}catch{R.error("Failed to send response")}},b=()=>{v({type:"feedback",category:"general",subject:"",message:"",name:"",email:"",phone:"",priority:"normal",contactMethod:"email"})},T=A=>{const O={pending:"bg-yellow-100 text-yellow-800",in_progress:"bg-blue-100 text-blue-800",resolved:"bg-green-100 text-green-800",closed:"bg-gray-100 text-gray-800"};return e.jsx(ze,{className:O[A]||O.pending,children:A})},E=A=>{switch(A){case"complaint":return e.jsx(Ws,{className:"h-5 w-5 text-red-600"});case"feedback":return e.jsx(wo,{className:"h-5 w-5 text-blue-600"});case"suggestion":return e.jsx(ld,{className:"h-5 w-5 text-green-600"});case"question":return e.jsx(Ka,{className:"h-5 w-5 text-purple-600"});default:return e.jsx(wo,{className:"h-5 w-5"})}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Support & Feedback System"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage client feedback, complaints, and support requests"})]}),e.jsxs(I,{onClick:()=>c(!0),children:[e.jsx(mn,{className:"mr-2 h-4 w-4"}),"New Feedback"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx(se,{children:e.jsx(oe,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Total"}),e.jsx("p",{className:"text-2xl font-bold",children:t.length})]}),e.jsx(wo,{className:"h-8 w-8 text-blue-600"})]})})}),e.jsx(se,{children:e.jsx(oe,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Pending"}),e.jsx("p",{className:"text-2xl font-bold",children:t.filter(A=>A.status==="pending").length})]}),e.jsx(ps,{className:"h-8 w-8 text-yellow-600"})]})})}),e.jsx(se,{children:e.jsx(oe,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"In Progress"}),e.jsx("p",{className:"text-2xl font-bold",children:t.filter(A=>A.status==="in_progress").length})]}),e.jsx(Ws,{className:"h-8 w-8 text-blue-600"})]})})}),e.jsx(se,{children:e.jsx(oe,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Resolved"}),e.jsx("p",{className:"text-2xl font-bold",children:t.filter(A=>A.status==="resolved").length})]}),e.jsx(ks,{className:"h-8 w-8 text-green-600"})]})})})]}),e.jsxs(se,{children:[e.jsxs(_e,{children:[e.jsx(Te,{children:"Feedback & Support Requests"}),e.jsxs(vt,{children:["Real-time updates  ",g?" Connected":" Disconnected"]})]}),e.jsx(oe,{children:e.jsxs(Ha,{defaultValue:"all",children:[e.jsxs(Xa,{children:[e.jsx(Tt,{value:"all",children:"All"}),e.jsx(Tt,{value:"feedback",children:"Feedback"}),e.jsx(Tt,{value:"complaint",children:"Complaints"}),e.jsx(Tt,{value:"suggestion",children:"Suggestions"})]}),e.jsx(kt,{value:"all",className:"space-y-4",children:t.map(A=>e.jsx(se,{className:"cursor-pointer hover:shadow-md transition-shadow",onClick:()=>h(A),children:e.jsx(oe,{className:"p-4",children:e.jsxs("div",{className:"flex items-start gap-4",children:[E(A.type),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h3",{className:"font-semibold",children:A.subject}),T(A.status)]}),e.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2 mb-2",children:A.message}),e.jsxs("div",{className:"flex items-center gap-4 text-xs text-muted-foreground",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Aa,{className:"h-3 w-3"}),A.name||A.email]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(fa,{className:"h-3 w-3"}),A.email]}),A.phone&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(ia,{className:"h-3 w-3"}),A.phone]}),e.jsx("span",{children:new Date(A.createdAt).toLocaleDateString()})]})]})]})})},A._id))})]})})]}),e.jsx(Gt,{open:i,onOpenChange:c,children:e.jsxs(qt,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsx(Kt,{children:e.jsx(Yt,{children:"Submit Feedback"})}),e.jsxs("form",{onSubmit:_,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(ue,{children:"Type *"}),e.jsxs(Xt,{value:p.type,onValueChange:A=>v({...p,type:A}),children:[e.jsx(Jt,{children:e.jsx(Qt,{})}),e.jsxs(es,{children:[e.jsx(Ie,{value:"feedback",children:"Feedback"}),e.jsx(Ie,{value:"complaint",children:"Complaint"}),e.jsx(Ie,{value:"suggestion",children:"Suggestion"}),e.jsx(Ie,{value:"question",children:"Question"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ue,{children:"Priority"}),e.jsxs(Xt,{value:p.priority,onValueChange:A=>v({...p,priority:A}),children:[e.jsx(Jt,{children:e.jsx(Qt,{})}),e.jsxs(es,{children:[e.jsx(Ie,{value:"low",children:"Low"}),e.jsx(Ie,{value:"normal",children:"Normal"}),e.jsx(Ie,{value:"high",children:"High"}),e.jsx(Ie,{value:"urgent",children:"Urgent"})]})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ue,{children:"Subject *"}),e.jsx(we,{value:p.subject,onChange:A=>v({...p,subject:A.target.value}),placeholder:"Brief description of your feedback",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ue,{children:"Message *"}),e.jsx(Gs,{value:p.message,onChange:A=>v({...p,message:A.target.value}),placeholder:"Detailed message...",rows:5,required:!0})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(ue,{children:"Name"}),e.jsx(we,{value:p.name,onChange:A=>v({...p,name:A.target.value}),placeholder:"Your name"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ue,{children:"Email *"}),e.jsx(we,{type:"email",value:p.email,onChange:A=>v({...p,email:A.target.value}),placeholder:"your@email.com",required:!0})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ue,{children:"Phone (Optional)"}),e.jsx(we,{type:"tel",value:p.phone,onChange:A=>v({...p,phone:A.target.value}),placeholder:"+254 XXX XXX XXX"})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(I,{type:"button",variant:"outline",onClick:()=>c(!1),children:"Cancel"}),e.jsxs(I,{type:"submit",children:[e.jsx(mn,{className:"mr-2 h-4 w-4"}),"Submit Feedback"]})]})]})]})}),d&&e.jsx(Gt,{open:!!d,onOpenChange:()=>h(null),children:e.jsxs(qt,{className:"max-w-3xl",children:[e.jsx(Kt,{children:e.jsxs(Yt,{className:"flex items-center gap-2",children:[E(d.type),d.subject]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[T(d.status),e.jsxs(ze,{variant:"outline",children:[d.priority," priority"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-semibold",children:"Message:"}),e.jsx("p",{className:"text-muted-foreground",children:d.message})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 p-4 bg-muted rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Contact Information:"}),e.jsx("p",{className:"text-sm",children:d.name}),e.jsx("p",{className:"text-sm",children:d.email}),d.phone&&e.jsx("p",{className:"text-sm",children:d.phone})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Submitted:"}),e.jsx("p",{className:"text-sm",children:new Date(d.createdAt).toLocaleString()})]})]}),d.response&&e.jsxs("div",{className:"p-4 bg-green-50 rounded-lg",children:[e.jsx("h4",{className:"font-semibold text-green-800 mb-2",children:"Response:"}),e.jsx("p",{className:"text-sm text-green-700",children:d.response})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(I,{variant:"outline",onClick:()=>h(null),children:"Close"}),d.status!=="resolved"&&e.jsx(I,{onClick:()=>{const A=prompt("Enter your response:");A&&(S(d._id,A),h(null))},children:"Send Response"})]})]})]})})]})},gG=()=>{const[t,s]=N.useState(""),[a,n]=N.useState("discussions"),i=[{id:1,title:"How to integrate payment gateway?",author:"John Doe",avatar:"JD",replies:12,likes:24,status:"answered",category:"Integration",timestamp:"2 hours ago"},{id:2,title:"Best practices for inventory management",author:"Jane Smith",avatar:"JS",replies:8,likes:15,status:"open",category:"Best Practices",timestamp:"5 hours ago"},{id:3,title:"Video call feature not working",author:"Mike Johnson",avatar:"MJ",replies:5,likes:7,status:"resolved",category:"Technical",timestamp:"1 day ago"}],c=[{name:"Sarah Wilson",posts:145,reputation:2840,avatar:"SW"},{name:"David Brown",posts:128,reputation:2350,avatar:"DB"},{name:"Emma Davis",posts:98,reputation:1920,avatar:"ED"}],d=[{title:"Getting Started Guide",type:"Documentation",icon:go,link:"#",description:"Complete guide to get started with OmniBiz"},{title:"Video Tutorials",type:"Video",icon:za,link:"#",description:"Step-by-step video tutorials"},{title:"GitHub Repository",type:"Code",icon:_u,link:"https://github.com/omnibiz",description:"Contribute to our open-source project"},{title:"API Documentation",type:"Technical",icon:go,link:"#",description:"Complete API reference and examples"}],h=[{name:"GitHub",icon:_u,link:"https://github.com/omnibiz-solutions",color:"text-gray-800"},{name:"Twitter",icon:sj,link:"https://twitter.com/omnibiz_solutions",color:"text-blue-500"},{name:"LinkedIn",icon:tj,link:"https://linkedin.com/company/omnibiz-solutions",color:"text-blue-700"},{name:"Email",icon:fa,link:"mailto:ominbizsolutions@gmail.com",color:"text-red-600"}],f=g=>{const p={answered:"bg-green-100 text-green-800",open:"bg-blue-100 text-blue-800",resolved:"bg-purple-100 text-purple-800"};return e.jsx(ze,{className:p[g],children:g})};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row items-start md:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold",children:"Community Support"}),e.jsx("p",{className:"text-muted-foreground",children:"Connect with other users, share knowledge, and get help"})]}),e.jsxs(I,{children:[e.jsx(ja,{className:"mr-2 h-4 w-4"}),"Start Discussion"]})]}),e.jsx(se,{children:e.jsx(oe,{className:"pt-6",children:e.jsxs("div",{className:"relative",children:[e.jsx(Da,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),e.jsx(we,{placeholder:"Search discussions, documentation, and more...",className:"pl-10",value:t,onChange:g=>s(g.target.value)})]})})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx(se,{children:e.jsx(oe,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Active Users"}),e.jsx("p",{className:"text-2xl font-bold",children:"1,234"})]}),e.jsx(fs,{className:"h-8 w-8 text-blue-600"})]})})}),e.jsx(se,{children:e.jsx(oe,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Discussions"}),e.jsx("p",{className:"text-2xl font-bold",children:"892"})]}),e.jsx(wo,{className:"h-8 w-8 text-green-600"})]})})}),e.jsx(se,{children:e.jsx(oe,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Resources"}),e.jsx("p",{className:"text-2xl font-bold",children:"156"})]}),e.jsx(go,{className:"h-8 w-8 text-purple-600"})]})})}),e.jsx(se,{children:e.jsx(oe,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Contributors"}),e.jsx("p",{className:"text-2xl font-bold",children:"342"})]}),e.jsx(ej,{className:"h-8 w-8 text-orange-600"})]})})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"lg:col-span-2 space-y-6",children:e.jsxs(se,{children:[e.jsxs(_e,{children:[e.jsx(Te,{children:"Community Discussions"}),e.jsx(vt,{children:"Join the conversation and help others"})]}),e.jsx(oe,{children:e.jsxs(Ha,{value:a,onValueChange:n,children:[e.jsxs(Xa,{className:"grid w-full grid-cols-3",children:[e.jsx(Tt,{value:"discussions",children:"Discussions"}),e.jsx(Tt,{value:"resources",children:"Resources"}),e.jsx(Tt,{value:"videos",children:"Videos"})]}),e.jsx(kt,{value:"discussions",className:"space-y-4",children:i.map(g=>e.jsx(se,{className:"hover:shadow-md transition-shadow cursor-pointer",children:e.jsx(oe,{className:"p-4",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx(Pn,{children:e.jsx(On,{children:g.avatar})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold hover:text-primary",children:g.title}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["by ",g.author,"  ",g.timestamp]})]}),f(g.status)]}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[e.jsx(ze,{variant:"outline",children:g.category}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(ja,{className:"h-3 w-3"}),g.replies," replies"]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(ld,{className:"h-3 w-3"}),g.likes," likes"]})]})]})]})})},g.id))}),e.jsx(kt,{value:"resources",className:"space-y-4",children:d.map((g,p)=>{const v=g.icon;return e.jsx(se,{className:"hover:shadow-md transition-shadow cursor-pointer",children:e.jsx(oe,{className:"p-4",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"p-2 bg-primary/10 rounded-lg",children:e.jsx(v,{className:"h-6 w-6 text-primary"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h4",{className:"font-semibold",children:g.title}),e.jsx(Xl,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:g.description}),e.jsx(ze,{variant:"outline",className:"mt-2",children:g.type})]})]})})},p)})}),e.jsx(kt,{value:"videos",className:"space-y-4",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[1,2,3,4].map(g=>e.jsxs(se,{className:"overflow-hidden",children:[e.jsx("div",{className:"aspect-video bg-gradient-to-br from-primary/20 to-secondary/20 flex items-center justify-center",children:e.jsx(za,{className:"h-12 w-12 text-primary"})}),e.jsxs(oe,{className:"p-4",children:[e.jsxs("h4",{className:"font-semibold mb-1",children:["Video Tutorial ",g]}),e.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Learn how to use OmniBiz effectively"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-xs text-muted-foreground",children:"12:34"}),e.jsx(I,{size:"sm",variant:"ghost",children:"Watch"})]})]})]},g))})})]})})]})}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(se,{children:[e.jsx(_e,{children:e.jsx(Te,{className:"text-lg",children:"Top Contributors"})}),e.jsx(oe,{className:"space-y-4",children:c.map((g,p)=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Pn,{children:e.jsx(On,{children:g.avatar})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-sm",children:g.name}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[g.posts," posts  ",g.reputation," rep"]})]}),e.jsx(Dn,{className:"h-4 w-4 text-yellow-500"})]},p))})]}),e.jsxs(se,{children:[e.jsx(_e,{children:e.jsx(Te,{className:"text-lg",children:"Connect With Us"})}),e.jsx(oe,{className:"space-y-3",children:h.map((g,p)=>{const v=g.icon;return e.jsxs(I,{variant:"outline",className:"w-full justify-start",onClick:()=>window.open(g.link,"_blank"),children:[e.jsx(v,{className:`mr-2 h-4 w-4 ${g.color}`}),g.name]},p)})})]}),e.jsxs(se,{children:[e.jsx(_e,{children:e.jsx(Te,{className:"text-lg",children:"Quick Actions"})}),e.jsxs(oe,{className:"space-y-2",children:[e.jsxs(I,{variant:"outline",className:"w-full justify-start",children:[e.jsx(ja,{className:"mr-2 h-4 w-4"}),"Ask a Question"]}),e.jsxs(I,{variant:"outline",className:"w-full justify-start",children:[e.jsx(go,{className:"mr-2 h-4 w-4"}),"Read Documentation"]}),e.jsxs(I,{variant:"outline",className:"w-full justify-start",children:[e.jsx(_u,{className:"mr-2 h-4 w-4"}),"View on GitHub"]})]})]})]})]})]})},vG=()=>{const[t,s]=N.useState(""),[a,n]=N.useState(null),[i,c]=N.useState("all"),d=[{id:"all",name:"All Videos",icon:za,count:24},{id:"getting-started",name:"Getting Started",icon:Ga,count:8},{id:"features",name:"Features",icon:Dn,count:12},{id:"integration",name:"Integration",icon:B_,count:4}],h=[{id:1,title:"Getting Started with OmniBiz",description:"Complete walkthrough of OmniBiz platform setup and configuration",thumbnail:"https://via.placeholder.com/640x360?text=Getting+Started",duration:"12:34",views:1234,likes:98,category:"getting-started",level:"Beginner",videoUrl:"https://www.youtube.com/embed/dQw4w9WgXcQ",tags:["setup","basics","tutorial"],publishedAt:"2024-01-15"},{id:2,title:"Inventory Management Tutorial",description:"Learn how to effectively manage your inventory with real-time tracking",thumbnail:"https://via.placeholder.com/640x360?text=Inventory+Management",duration:"18:45",views:2456,likes:156,category:"features",level:"Intermediate",videoUrl:"https://www.youtube.com/embed/dQw4w9WgXcQ",tags:["inventory","products","management"],publishedAt:"2024-01-20"},{id:3,title:"Setting Up Payment Integration",description:"Step-by-step guide to integrate payment gateways",thumbnail:"https://via.placeholder.com/640x360?text=Payment+Setup",duration:"15:20",views:3421,likes:234,category:"integration",level:"Advanced",videoUrl:"https://www.youtube.com/embed/dQw4w9WgXcQ",tags:["payments","integration","api"],publishedAt:"2024-02-01"},{id:4,title:"Client Storefront Customization",description:"Customize your client-facing storefront with themes and branding",thumbnail:"https://via.placeholder.com/640x360?text=Storefront+Custom",duration:"10:15",views:1876,likes:142,category:"features",level:"Intermediate",videoUrl:"https://www.youtube.com/embed/dQw4w9WgXcQ",tags:["storefront","customization","branding"],publishedAt:"2024-02-05"},{id:5,title:"Advanced Analytics Dashboard",description:"Master the analytics dashboard and generate insightful reports",thumbnail:"https://via.placeholder.com/640x360?text=Analytics",duration:"22:10",views:2987,likes:198,category:"features",level:"Advanced",videoUrl:"https://www.youtube.com/embed/dQw4w9WgXcQ",tags:["analytics","reports","insights"],publishedAt:"2024-02-10"},{id:6,title:"Service Booking System",description:"Set up and manage service bookings with calendar integration",thumbnail:"https://via.placeholder.com/640x360?text=Booking+System",duration:"16:30",views:2145,likes:167,category:"features",level:"Intermediate",videoUrl:"https://www.youtube.com/embed/dQw4w9WgXcQ",tags:["services","bookings","appointments"],publishedAt:"2024-02-12"},{id:7,title:"Real-time Notifications Setup",description:"Configure real-time notifications for orders, bookings, and updates",thumbnail:"https://via.placeholder.com/640x360?text=Notifications",duration:"08:45",views:1654,likes:123,category:"features",level:"Beginner",videoUrl:"https://www.youtube.com/embed/dQw4w9WgXcQ",tags:["notifications","realtime","setup"],publishedAt:"2024-02-15"},{id:8,title:"API Integration Guide",description:"Complete guide to integrating external services via API",thumbnail:"https://via.placeholder.com/640x360?text=API+Integration",duration:"25:00",views:4321,likes:289,category:"integration",level:"Advanced",videoUrl:"https://www.youtube.com/embed/dQw4w9WgXcQ",tags:["api","integration","development"],publishedAt:"2024-02-18"}],f=[{id:1,title:"Quick Start Guide",description:"5-minute guide to get started",duration:"5:00",icon:Ga},{id:2,title:"Security Best Practices",description:"Secure your business data",duration:"12:00",icon:_a},{id:3,title:"Team Collaboration",description:"Work efficiently with your team",duration:"10:00",icon:fs},{id:4,title:"Sales Optimization",description:"Boost your sales with analytics",duration:"15:00",icon:aa}],g=h.filter(v=>{const y=v.title.toLowerCase().includes(t.toLowerCase())||v.description.toLowerCase().includes(t.toLowerCase()),_=i==="all"||v.category===i;return y&&_}),p=v=>{const y={Beginner:"bg-green-100 text-green-800",Intermediate:"bg-yellow-100 text-yellow-800",Advanced:"bg-red-100 text-red-800"};return e.jsx(ze,{className:y[v],children:v})};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row items-start md:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold",children:"Video Tutorials & Demos"}),e.jsx("p",{className:"text-muted-foreground",children:"Learn OmniBiz with step-by-step video guides"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(I,{variant:"outline",children:[e.jsx(hn,{className:"mr-2 h-4 w-4"}),"Resources"]}),e.jsxs(I,{children:[e.jsx(go,{className:"mr-2 h-4 w-4"}),"Documentation"]})]})]}),e.jsx(se,{children:e.jsx(oe,{className:"pt-6",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(Da,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),e.jsx(we,{placeholder:"Search videos...",className:"pl-10",value:t,onChange:v=>s(v.target.value)})]}),e.jsxs(I,{variant:"outline",children:[e.jsx(ll,{className:"mr-2 h-4 w-4"}),"Filter"]})]})})}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:d.map(v=>{const y=v.icon;return e.jsx(se,{className:`cursor-pointer transition-all hover:shadow-md ${i===v.id?"ring-2 ring-primary":""}`,onClick:()=>c(v.id),children:e.jsx(oe,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-primary/10 rounded-lg",children:e.jsx(y,{className:"h-5 w-5 text-primary"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:v.name}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[v.count," videos"]})]})]})})},v.id)})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsxs(se,{children:[e.jsxs(_e,{children:[e.jsx(Te,{children:"Video Library"}),e.jsxs(vt,{children:[g.length," videos available"]})]}),e.jsx(oe,{children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:g.map(v=>e.jsxs(se,{className:"overflow-hidden cursor-pointer hover:shadow-lg transition-shadow",onClick:()=>n(v),children:[e.jsxs("div",{className:"relative aspect-video bg-gradient-to-br from-primary/20 to-secondary/20",children:[e.jsx("div",{className:"absolute inset-0 flex items-center justify-center group",children:e.jsx("div",{className:"bg-black/60 rounded-full p-4 group-hover:scale-110 transition-transform",children:e.jsx(Cu,{className:"h-8 w-8 text-white"})})}),e.jsx("div",{className:"absolute bottom-2 right-2 bg-black/80 text-white px-2 py-1 rounded text-xs",children:v.duration}),p(v.level)]}),e.jsxs(oe,{className:"p-4",children:[e.jsx("h4",{className:"font-semibold mb-2 line-clamp-2",children:v.title}),e.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2 mb-3",children:v.description}),e.jsxs("div",{className:"flex items-center gap-4 text-xs text-muted-foreground",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Pa,{className:"h-3 w-3"}),v.views]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(ld,{className:"h-3 w-3"}),v.likes]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(ps,{className:"h-3 w-3"}),v.duration]})]}),e.jsx("div",{className:"flex gap-2 mt-3",children:v.tags.slice(0,2).map((y,_)=>e.jsx(ze,{variant:"outline",className:"text-xs",children:y},_))})]})]},v.id))})})]})}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(se,{children:[e.jsx(_e,{children:e.jsx(Te,{className:"text-lg",children:"Quick Tutorials"})}),e.jsx(oe,{className:"space-y-3",children:f.map(v=>{const y=v.icon;return e.jsx("div",{className:"p-3 border rounded-lg cursor-pointer hover:bg-muted transition-colors",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(y,{className:"h-5 w-5 text-primary mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h5",{className:"font-medium text-sm",children:v.title}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:v.description}),e.jsx("span",{className:"text-xs text-primary mt-1 inline-block",children:v.duration})]})]})},v.id)})})]}),e.jsxs(se,{children:[e.jsx(_e,{children:e.jsx(Te,{className:"text-lg",children:"Most Popular"})}),e.jsx(oe,{className:"space-y-3",children:h.slice(0,3).sort((v,y)=>y.views-v.views).map(v=>e.jsxs("div",{className:"flex gap-3 cursor-pointer hover:bg-muted p-2 rounded transition-colors",onClick:()=>n(v),children:[e.jsx("div",{className:"w-20 h-12 bg-gradient-to-br from-primary/20 to-secondary/20 rounded flex items-center justify-center",children:e.jsx(Cu,{className:"h-4 w-4"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium line-clamp-2",children:v.title}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[v.views," views"]})]})]},v.id))})]})]})]}),a&&e.jsx(Gt,{open:!!a,onOpenChange:()=>n(null),children:e.jsxs(qt,{className:"max-w-4xl",children:[e.jsx(Kt,{children:e.jsx(Yt,{children:a.title})}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"aspect-video bg-black rounded-lg overflow-hidden",children:e.jsx("iframe",{className:"w-full h-full",src:a.videoUrl,title:a.title,frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[p(a.level),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[a.views," views  ",a.publishedAt]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(I,{variant:"outline",size:"sm",children:[e.jsx(ld,{className:"h-4 w-4 mr-1"}),a.likes]}),e.jsx(I,{variant:"outline",size:"sm",children:e.jsx(Pu,{className:"h-4 w-4"})})]})]}),e.jsx("p",{className:"text-muted-foreground",children:a.description}),e.jsx("div",{className:"flex gap-2",children:a.tags.map((v,y)=>e.jsx(ze,{variant:"secondary",children:v},y))})]})]})]})})]})},yG=()=>{const[t,s]=N.useState("videos"),a=[{title:"Video Tutorials",value:"24+",icon:za,color:"text-purple-600",bgColor:"bg-purple-100"},{title:"Community Members",value:"1,234",icon:fs,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"Resources",value:"156",icon:go,color:"text-green-600",bgColor:"bg-green-100"},{title:"Feedback Received",value:"89",icon:wo,color:"text-orange-600",bgColor:"bg-orange-100"}];return e.jsxs("div",{className:"space-y-6 p-6 max-w-7xl mx-auto",children:[e.jsxs("div",{className:"flex flex-col md:flex-row items-start md:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[e.jsx(go,{className:"h-8 w-8 text-primary"}),"Learning & Resources Center"]}),e.jsx("p",{className:"text-muted-foreground mt-2",children:"Explore tutorials, join the community, and share your feedback"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(I,{variant:"outline",children:[e.jsx(_u,{className:"mr-2 h-4 w-4"}),"GitHub"]}),e.jsxs(I,{children:[e.jsx(Dn,{className:"mr-2 h-4 w-4"}),"Rate Us"]})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:a.map((n,i)=>{const c=n.icon;return e.jsx(se,{className:"hover:shadow-md transition-shadow",children:e.jsx(oe,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:n.title}),e.jsx("p",{className:"text-2xl font-bold mt-1",children:n.value})]}),e.jsx("div",{className:`p-3 rounded-full ${n.bgColor}`,children:e.jsx(c,{className:`h-6 w-6 ${n.color}`})})]})})},i)})}),e.jsxs(se,{className:"shadow-lg",children:[e.jsxs(_e,{children:[e.jsxs(Te,{className:"flex items-center gap-2",children:[e.jsx(aa,{className:"h-5 w-5"}),"Explore Resources"]}),e.jsx(vt,{children:"Learn, connect, and grow with OmniBiz"})]}),e.jsx(oe,{children:e.jsxs(Ha,{value:t,onValueChange:s,children:[e.jsxs(Xa,{className:"grid w-full grid-cols-3",children:[e.jsxs(Tt,{value:"videos",className:"gap-2",children:[e.jsx(za,{className:"h-4 w-4"}),"Video Tutorials"]}),e.jsxs(Tt,{value:"community",className:"gap-2",children:[e.jsx(fs,{className:"h-4 w-4"}),"Community"]}),e.jsxs(Tt,{value:"feedback",className:"gap-2",children:[e.jsx(wo,{className:"h-4 w-4"}),"Feedback"]})]}),e.jsx(kt,{value:"videos",className:"mt-6",children:e.jsx(vG,{})}),e.jsx(kt,{value:"community",className:"mt-6",children:e.jsx(gG,{})}),e.jsx(kt,{value:"feedback",className:"mt-6",children:e.jsx(pG,{})})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(se,{className:"hover:shadow-md transition-shadow cursor-pointer",children:e.jsx(oe,{className:"pt-6",children:e.jsxs("div",{className:"text-center space-y-3",children:[e.jsx("div",{className:"mx-auto w-12 h-12 bg-purple-100 rounded-full flex items-center justify-center",children:e.jsx(go,{className:"h-6 w-6 text-purple-600"})}),e.jsx("h3",{className:"font-semibold",children:"Documentation"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Complete guides and API docs"}),e.jsx(ze,{variant:"outline",children:"Updated Daily"})]})})}),e.jsx(se,{className:"hover:shadow-md transition-shadow cursor-pointer",children:e.jsx(oe,{className:"pt-6",children:e.jsxs("div",{className:"text-center space-y-3",children:[e.jsx("div",{className:"mx-auto w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsx(fs,{className:"h-6 w-6 text-blue-600"})}),e.jsx("h3",{className:"font-semibold",children:"Join Community"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Connect with 1,200+ users"}),e.jsx(ze,{variant:"outline",children:"Active Now"})]})})}),e.jsx(se,{className:"hover:shadow-md transition-shadow cursor-pointer",children:e.jsx(oe,{className:"pt-6",children:e.jsxs("div",{className:"text-center space-y-3",children:[e.jsx("div",{className:"mx-auto w-12 h-12 bg-green-100 rounded-full flex items-center justify-center",children:e.jsx(ej,{className:"h-6 w-6 text-green-600"})}),e.jsx("h3",{className:"font-semibold",children:"Contribute"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Help improve OmniBiz"}),e.jsx(ze,{variant:"outline",children:"Open Source"})]})})})]}),e.jsx(se,{children:e.jsx(oe,{className:"pt-6",children:e.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Stay Connected"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Follow us on social media for updates and tips"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(I,{variant:"outline",size:"icon",children:e.jsx(_u,{className:"h-4 w-4"})}),e.jsx(I,{variant:"outline",size:"icon",children:e.jsx(sj,{className:"h-4 w-4"})}),e.jsx(I,{variant:"outline",size:"icon",children:e.jsx(tj,{className:"h-4 w-4"})}),e.jsx(I,{variant:"outline",size:"icon",children:e.jsx(fa,{className:"h-4 w-4"})})]})]})})})]})};function jG(){const[t,s]=N.useState([]),[a,n]=N.useState(!0),[i,c]=N.useState(!1),[d,h]=N.useState(null),[f,g]=N.useState([]),[p,v]=N.useState([]),{socket:y,connected:_}=Ra(),[S,b]=N.useState({name:"",description:"",type:"percentage",value:"",code:"",isActive:!0,isSeasonalPromotion:!1,seasonalDetails:{seasonName:"",bannerImage:"",bannerText:"",priority:0},applicableTo:"all",applicableProducts:[],applicableServices:[],minPurchaseAmount:0,maxDiscountAmount:"",usageLimit:{total:"",perCustomer:1},validFrom:"",validUntil:"",showOnStorefront:!0,showNewArrivalsBadge:!1,customerSegment:"all"});N.useEffect(()=>{T(),E(),A()},[]);const T=async()=>{try{n(!0);const{data:G}=await ke.get("/discounts");s(G.discounts||[])}catch(G){console.error("Error fetching discounts:",G),R.error("Failed to load discounts")}finally{n(!1)}},E=async()=>{try{const G=localStorage.getItem("token"),{data:K}=await ke.get("/products",{headers:{Authorization:`Bearer ${G}`}});g(K||[])}catch(G){console.error("Error fetching products:",G)}},A=async()=>{try{const G=localStorage.getItem("token"),{data:K}=await ke.get("/services",{headers:{Authorization:`Bearer ${G}`}});v(Array.isArray(K)?K:K?.services||[])}catch(G){console.error("Error fetching services:",G)}};N.useEffect(()=>{if(!(!y||!_))return y.on("discount_created",()=>{T(),R.success("New discount created")}),y.on("discount_sync",G=>{G.type==="update"?s(K=>K.map(z=>z._id===G.discount._id?G.discount:z)):G.type==="delete"&&s(K=>K.filter(z=>z._id!==G.discount._id))}),()=>{y.off("discount_created"),y.off("discount_sync")}},[y,_]);const O=(G,K)=>{if(G.includes(".")){const[z,J]=G.split(".");b(W=>({...W,[z]:{...W[z],[J]:K}}))}else b(z=>({...z,[G]:K}))},Q=()=>{b({name:"",description:"",type:"percentage",value:"",code:"",isActive:!0,isSeasonalPromotion:!1,seasonalDetails:{seasonName:"",bannerImage:"",bannerText:"",priority:0},applicableTo:"all",applicableProducts:[],applicableServices:[],minPurchaseAmount:0,maxDiscountAmount:"",usageLimit:{total:"",perCustomer:1},validFrom:"",validUntil:"",showOnStorefront:!0,showNewArrivalsBadge:!1,customerSegment:"all"}),h(null)},q=async()=>{try{if(!S.name||!S.value||!S.validFrom||!S.validUntil){R.error("Please fill in all required fields");return}const G={...S,value:parseFloat(S.value),minPurchaseAmount:parseFloat(S.minPurchaseAmount)||0,maxDiscountAmount:S.maxDiscountAmount?parseFloat(S.maxDiscountAmount):void 0,usageLimit:{total:S.usageLimit.total?parseInt(S.usageLimit.total):void 0,perCustomer:parseInt(S.usageLimit.perCustomer)||1}};d?(await ke.put(`/discounts/${d._id}`,G),R.success("Discount updated successfully")):(await ke.post("/discounts",G),R.success("Discount created successfully")),T(),c(!1),Q()}catch(G){console.error("Error saving discount:",G),R.error(G.response?.data?.message||"Failed to save discount")}},U=G=>{h(G),b({name:G.name||"",description:G.description||"",type:G.type||"percentage",value:G.value?.toString()||"",code:G.code||"",isActive:G.isActive??!0,isSeasonalPromotion:G.isSeasonalPromotion||!1,seasonalDetails:G.seasonalDetails||{seasonName:"",bannerImage:"",bannerText:"",priority:0},applicableTo:G.applicableTo||"all",minPurchaseAmount:G.minPurchaseAmount||0,maxDiscountAmount:G.maxDiscountAmount?.toString()||"",usageLimit:{total:G.usageLimit?.total?.toString()||"",perCustomer:G.usageLimit?.perCustomer||1},validFrom:G.validFrom?new Date(G.validFrom).toISOString().split("T")[0]:"",validUntil:G.validUntil?new Date(G.validUntil).toISOString().split("T")[0]:"",showOnStorefront:G.showOnStorefront??!0,showNewArrivalsBadge:G.showNewArrivalsBadge||!1,customerSegment:G.customerSegment||"all"}),c(!0)},D=async(G,K)=>{try{await ke.patch(`/discounts/${G}/toggle`),R.success(`Discount ${K?"deactivated":"activated"}`),T()}catch{R.error("Failed to toggle discount status")}},M=async G=>{if(confirm("Are you sure you want to delete this discount?"))try{await ke.delete(`/discounts/${G}`),R.success("Discount deleted successfully"),T()}catch{R.error("Failed to delete discount")}},P={total:t.length,active:t.filter(G=>G.isActive).length,totalRedemptions:t.reduce((G,K)=>G+(K.stats?.redemptions||0),0),totalRevenue:t.reduce((G,K)=>G+(K.stats?.revenue||0),0)};return a?e.jsx("div",{className:"flex items-center justify-center h-96",children:"Loading..."}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Discounts & Promotions"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage discounts and seasonal campaigns"})]}),e.jsxs(Gt,{open:i,onOpenChange:G=>{c(G),G||Q()},children:[e.jsx(Za,{asChild:!0,children:e.jsxs(I,{children:[e.jsx(ha,{className:"mr-2 h-4 w-4"}),"Create Discount"]})}),e.jsxs(qt,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsx(Kt,{children:e.jsx(Yt,{children:d?"Edit Discount":"Create New Discount"})}),e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(ue,{children:"Name *"}),e.jsx(we,{value:S.name,onChange:G=>O("name",G.target.value),placeholder:"e.g., Summer Sale 2024"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(ue,{children:"Description"}),e.jsx(Gs,{value:S.description,onChange:G=>O("description",G.target.value),placeholder:"Discount description..."})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(ue,{children:"Type *"}),e.jsxs(Xt,{value:S.type,onValueChange:G=>O("type",G),children:[e.jsx(Jt,{children:e.jsx(Qt,{})}),e.jsxs(es,{children:[e.jsx(Ie,{value:"percentage",children:"Percentage (%)"}),e.jsx(Ie,{value:"fixed",children:"Fixed Amount (KES)"}),e.jsx(Ie,{value:"buy_x_get_y",children:"Buy X Get Y"}),e.jsx(Ie,{value:"seasonal",children:"Seasonal"})]})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(ue,{children:"Value *"}),e.jsx(we,{type:"number",value:S.value,onChange:G=>O("value",G.target.value),placeholder:S.type==="percentage"?"20":"500"})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(ue,{children:"Discount Code (Optional)"}),e.jsx(we,{value:S.code,onChange:G=>O("code",G.target.value.toUpperCase()),placeholder:"SUMMER20"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_s,{checked:S.isSeasonalPromotion,onCheckedChange:G=>O("isSeasonalPromotion",G)}),e.jsx(ue,{children:"Seasonal Promotion"})]}),S.isSeasonalPromotion&&e.jsxs("div",{className:"border p-4 rounded space-y-3",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(ue,{children:"Season Name"}),e.jsx(we,{value:S.seasonalDetails.seasonName,onChange:G=>O("seasonalDetails.seasonName",G.target.value),placeholder:"Black Friday Sale"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(ue,{children:"Banner Image URL"}),e.jsx(we,{value:S.seasonalDetails.bannerImage,onChange:G=>O("seasonalDetails.bannerImage",G.target.value),placeholder:"https://..."})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(ue,{children:"Banner Text"}),e.jsx(we,{value:S.seasonalDetails.bannerText,onChange:G=>O("seasonalDetails.bannerText",G.target.value),placeholder:"Up to 50% OFF on all items!"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(ue,{children:"Valid From *"}),e.jsx(we,{type:"date",value:S.validFrom,onChange:G=>O("validFrom",G.target.value)})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(ue,{children:"Valid Until *"}),e.jsx(we,{type:"date",value:S.validUntil,onChange:G=>O("validUntil",G.target.value)})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(ue,{children:"Min Purchase Amount"}),e.jsx(we,{type:"number",value:S.minPurchaseAmount,onChange:G=>O("minPurchaseAmount",G.target.value),placeholder:"0"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(ue,{children:"Max Discount (Optional)"}),e.jsx(we,{type:"number",value:S.maxDiscountAmount,onChange:G=>O("maxDiscountAmount",G.target.value),placeholder:"No limit"})]})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_s,{checked:S.showOnStorefront,onCheckedChange:G=>O("showOnStorefront",G)}),e.jsx(ue,{children:"Show on Storefront"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_s,{checked:S.isActive,onCheckedChange:G=>O("isActive",G)}),e.jsx(ue,{children:"Active"})]})]})]}),e.jsxs(ea,{children:[e.jsx(I,{variant:"outline",onClick:()=>c(!1),children:"Cancel"}),e.jsxs(I,{onClick:q,children:[d?"Update":"Create"," Discount"]})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[e.jsxs(se,{children:[e.jsxs(_e,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(Te,{className:"text-sm font-medium",children:"Total Discounts"}),e.jsx(tc,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(oe,{children:[e.jsx("div",{className:"text-2xl font-bold",children:P.total}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"All discount campaigns"})]})]}),e.jsxs(se,{children:[e.jsxs(_e,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(Te,{className:"text-sm font-medium",children:"Active"}),e.jsx(tc,{className:"h-4 w-4 text-green-600"})]}),e.jsxs(oe,{children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:P.active}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Currently running"})]})]}),e.jsxs(se,{children:[e.jsxs(_e,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(Te,{className:"text-sm font-medium",children:"Redemptions"}),e.jsx(aa,{className:"h-4 w-4 text-blue-600"})]}),e.jsxs(oe,{children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:P.totalRedemptions}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Times used"})]})]}),e.jsxs(se,{children:[e.jsxs(_e,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(Te,{className:"text-sm font-medium",children:"Revenue Impact"}),e.jsx(Sa,{className:"h-4 w-4 text-purple-600"})]}),e.jsxs(oe,{children:[e.jsxs("div",{className:"text-2xl font-bold text-purple-600",children:["KES ",P.totalRevenue.toLocaleString()]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Generated"})]})]})]}),e.jsxs(se,{children:[e.jsxs(_e,{children:[e.jsx(Te,{children:"All Discounts"}),e.jsxs(vt,{children:["Manage your discount campaigns ",_&&e.jsx(ze,{variant:"outline",className:"ml-2 bg-green-100 text-green-800",children:" Live"})]})]}),e.jsx(oe,{children:e.jsxs(Gi,{children:[e.jsx(qi,{children:e.jsxs(Fa,{children:[e.jsx(Bt,{children:"Name"}),e.jsx(Bt,{children:"Type"}),e.jsx(Bt,{children:"Value"}),e.jsx(Bt,{children:"Code"}),e.jsx(Bt,{children:"Valid Period"}),e.jsx(Bt,{children:"Status"}),e.jsx(Bt,{children:"Stats"}),e.jsx(Bt,{children:"Actions"})]})}),e.jsx(Ki,{children:t.length===0?e.jsx(Fa,{children:e.jsx(It,{colSpan:8,className:"text-center py-8",children:e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsx(tc,{className:"h-12 w-12 text-muted-foreground"}),e.jsx("p",{className:"text-muted-foreground",children:"No discounts yet"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Create your first discount campaign"})]})})}):t.map(G=>e.jsxs(Fa,{children:[e.jsx(It,{children:e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:G.name}),G.isSeasonalPromotion&&e.jsx(ze,{variant:"secondary",className:"mt-1",children:"Seasonal"})]})}),e.jsx(It,{className:"capitalize",children:G.type.replace("_"," ")}),e.jsx(It,{className:"font-semibold",children:G.type==="percentage"?`${G.value}%`:`KES ${G.value}`}),e.jsx(It,{children:G.code?e.jsx(ze,{variant:"outline",children:G.code}):e.jsx("span",{className:"text-muted-foreground",children:"-"})}),e.jsxs(It,{className:"text-sm",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Ms,{className:"h-3 w-3"}),new Date(G.validFrom).toLocaleDateString()]}),e.jsxs("div",{className:"text-muted-foreground",children:["to ",new Date(G.validUntil).toLocaleDateString()]})]}),e.jsx(It,{children:e.jsx(_s,{checked:G.isActive,onCheckedChange:()=>D(G._id,G.isActive)})}),e.jsx(It,{className:"text-sm",children:e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Pa,{className:"h-3 w-3"}),G.stats?.views||0," views"]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(aa,{className:"h-3 w-3"}),G.stats?.redemptions||0," used"]})]})}),e.jsx(It,{children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(I,{variant:"outline",size:"sm",onClick:()=>U(G),children:e.jsx(sl,{className:"h-3 w-3"})}),e.jsx(I,{variant:"ghost",size:"sm",className:"text-red-600 hover:text-red-700 hover:bg-red-50",onClick:()=>M(G._id),children:e.jsx(Ua,{className:"h-3 w-3"})})]})})]},G._id))})]})})]})]})}const NG=()=>{const{socket:t,connected:s}=Ra(),{theme:a}=Gu(),[n,i]=N.useState([]),[c,d]=N.useState(navigator.onLine),[h,f]=N.useState(0),[g,p]=N.useState(0),[v,y]=N.useState(100),[_,S]=N.useState(!1),[b,T]=N.useState(4),[E,A]=N.useState([75]),[O,Q]=N.useState(!1),[q,U]=N.useState(!1),[D,M]=N.useState(""),[P,G]=N.useState(0),[K,z]=N.useState(0),[J,W]=N.useState([1e3]),[he,V]=N.useState([5]),[ae,ge]=N.useState(!0),[Z,ee]=N.useState(!0),[te,X]=N.useState(!1),[ce,F]=N.useState(!1),[re,de]=N.useState("downloads"),[me,De]=N.useState(0),[Ne,pe]=N.useState(0),[Le,ot]=N.useState(0),[Pt,Dt]=N.useState("4g"),[Ct,Lt]=N.useState([]),[yt,ys]=N.useState([]),[Es,Hs]=N.useState(""),[bs,$s]=N.useState(""),[ws,$t]=N.useState(0),[Na,Me]=N.useState(0),ht=N.useRef(null),[He,Mt]=N.useState(new Date().toLocaleTimeString()),[Rt,xs]=N.useState("ominbiz_Network"),[Ks,Ze]=N.useState(""),[Xe,Se]=N.useState(0),[Ce,rt]=N.useState(10240),[Qe,jt]=N.useState([75]),[Ot,ts]=N.useState([]),[js,Zt]=N.useState([]),[Ca,Ta]=N.useState(0),Qa=N.useRef(null),Ps=N.useRef(new Audio),ie=N.useRef(null);N.useEffect(()=>{const be=()=>d(!0),st=()=>d(!1);if(window.addEventListener("online",be),window.addEventListener("offline",st),"connection"in navigator){const gt=navigator.connection||navigator.mozConnection||navigator.webkitConnection,Ft=()=>{gt.effectiveType&&Dt(gt.effectiveType),gt.downlink&&f(gt.downlink*1024)};Ft(),gt.addEventListener("change",Ft)}"getBattery"in navigator&&navigator.getBattery().then(gt=>{const Ft=()=>{y(gt.level*100),S(gt.charging)};Ft(),gt.addEventListener("levelchange",Ft),gt.addEventListener("chargingchange",Ft)});const Pe=setInterval(()=>{if(performance.memory){const lt=performance.memory.usedJSHeapSize/performance.memory.jsHeapSizeLimit*100;pe(lt)}De(lt=>Math.min(100,Math.max(0,lt+(Math.random()-.5)*10))),ot(lt=>Math.min(100,Math.max(20,lt+(Math.random()-.5)*2))),(!("connection"in navigator)||Math.random()>.7)&&T(lt=>{const ss=Math.random()>.5?1:-1;return Math.min(4,Math.max(0,lt+ss))}),p(lt=>{const ss=h*(.1+Math.random()*.2);return Math.max(0,ss)});const gt=h/1024,Ft=g/1024;Se(lt=>Math.min(Ce,lt+gt+Ft)),ts(lt=>[...lt.slice(-29),h]),Zt(lt=>[...lt.slice(-29),g]),Ta(Math.floor(10+Math.random()*40))},2e3),dt=setInterval(()=>{i(gt=>gt.map(Ft=>{if(Ft.status==="downloading"&&Ft.progress<100){const lt=Math.min(100,Ft.progress+Math.random()*3),ss=Math.random()*1e3,xn=Ft.size*(1-lt/100),Rn=ss>0?Je(xn/ss):"00:00:00";return{...Ft,progress:lt,speed:ss,eta:Rn,...lt>=100&&{status:"completed"}}}return Ft}))},1e3);return()=>{window.removeEventListener("online",be),window.removeEventListener("offline",st),clearInterval(Pe),clearInterval(dt)}},[]),N.useEffect(()=>{if(t)return t.on("download_update",be=>{i(st=>st.map(Pe=>Pe.id===be.id?{...Pe,...be}:Pe))}),t.on("system_notification",be=>{Ve(be)}),()=>{t.off("download_update"),t.off("system_notification")}},[t]),N.useEffect(()=>{const be=Ps.current,st=()=>{be.duration&&(G(be.currentTime/be.duration*100),z(be.duration))},Pe=()=>{U(!1),G(0)};return be.addEventListener("timeupdate",st),be.addEventListener("ended",Pe),be.addEventListener("loadedmetadata",st),()=>{be.removeEventListener("timeupdate",st),be.removeEventListener("ended",Pe),be.removeEventListener("loadedmetadata",st)}},[]),N.useEffect(()=>{Ps.current.volume=O?0:E[0]/100},[E,O]),N.useEffect(()=>{const be=setInterval(()=>{Mt(new Date().toLocaleTimeString())},1e3);return()=>clearInterval(be)},[]),N.useEffect(()=>{if(yt.length===0)return;const be=setInterval(()=>{const st=new Date().getTime();yt.forEach(Pe=>{const gt=new Date(Pe.scheduledTime).getTime()-st;if(Pe.status==="scheduled"&&gt<=5e3&&gt>=-5e3){console.log(" Auto-starting scheduled download:",Pe.filename),Re(Pe.url),ys(lt=>lt.map(ss=>ss.id===Pe.id?{...ss,status:"started"}:ss));const Ft={id:Date.now(),title:"Scheduled Download Started",message:`${Pe.filename} is now downloading`,type:"info"};Lt(lt=>[...lt,Ft]),R.success(` Starting scheduled download: ${Pe.filename}`),setTimeout(()=>{ys(lt=>lt.filter(ss=>ss.id!==Pe.id))},3e3)}})},5e3);return()=>clearInterval(be)},[yt]);const Re=async(be,st=null)=>{try{const Pe={id:Date.now(),url:be,filename:st||be.split("/").pop()||`file_${Date.now()}`,progress:0,speed:0,size:0,status:"downloading",protocol:be.includes("magnet:")?"BitTorrent":"HTTP",eta:"Calculating...",startTime:Date.now()};i(dt=>[...dt,Pe]),R.success(`Download started: ${Pe.filename}`),t&&s&&t.emit("start_download",Pe);try{const dt=await fetch(be,{mode:"cors"});if(!dt.ok)throw new Error(`HTTP ${dt.status}`);const gt=+dt.headers.get("Content-Length"),Ft=dt.body.getReader(),lt=[];let ss=0;for(;;){const{done:Wn,value:Ln}=await Ft.read();if(Wn)break;lt.push(Ln),ss+=Ln.length;const ds=gt?ss/gt*100:0,na=(Date.now()-Pe.startTime)/1e3,In=ss/na/1024,ln=gt-ss,Ti=In>0?Je(ln/In/1024):"00:00:00";i(mc=>mc.map(hs=>hs.id===Pe.id?{...hs,progress:ds,speed:In,size:gt/(1024*1024),eta:Ti}:hs))}const xn=new Blob(lt),Rn=window.URL.createObjectURL(xn),$n=document.createElement("a");$n.href=Rn,$n.download=Pe.filename,document.body.appendChild($n),$n.click(),document.body.removeChild($n),window.URL.revokeObjectURL(Rn),i(Wn=>Wn.map(Ln=>Ln.id===Pe.id?{...Ln,status:"completed",progress:100}:Ln)),R.success(`Download completed: ${Pe.filename}`),Ve({title:"Download Complete",message:`${Pe.filename} has been downloaded successfully`,type:"success"})}catch(dt){console.error("Download error:",dt),i(gt=>gt.map(Ft=>Ft.id===Pe.id?{...Ft,status:"error",progress:0}:Ft)),R.error(`Download failed: ${dt.message}`)}}catch(Pe){console.error("Error starting download:",Pe),R.error("Failed to start download")}},tt=be=>{i(st=>st.map(Pe=>Pe.id===be?{...Pe,status:"paused"}:Pe))},wt=be=>{i(st=>st.map(Pe=>Pe.id===be?{...Pe,status:"downloading"}:Pe))},bt=be=>{i(st=>st.filter(Pe=>Pe.id!==be)),R.info("Download cancelled")},rs=()=>{switch(b){case 0:return e.jsx(Su,{className:"h-4 w-4 text-red-500"});case 1:return e.jsx(aD,{className:"h-4 w-4 text-red-500"});case 2:return e.jsx(sD,{className:"h-4 w-4 text-yellow-500"});case 3:return e.jsx(tD,{className:"h-4 w-4 text-green-500"});case 4:return e.jsx(eD,{className:"h-4 w-4 text-green-500"});default:return e.jsx(Su,{className:"h-4 w-4 text-gray-500"})}},gs=()=>v<20?e.jsx(nD,{className:"h-4 w-4 text-red-500"}):e.jsx(rD,{className:"h-4 w-4 text-green-500"}),Nt=be=>be<1024?`${be.toFixed(1)} KB/s`:`${(be/1024).toFixed(1)} MB/s`,ne=be=>be<1024?`${be} MB`:`${(be/1024).toFixed(1)} GB`,ye=be=>{Array.from(be.target.files).forEach(Pe=>{const dt=URL.createObjectURL(Pe),gt={id:Date.now()+Math.random(),url:dt,filename:Pe.name,progress:100,speed:0,size:Pe.size/(1024*1024),status:"completed",protocol:"Local",eta:"00:00:00"};i(Ft=>[...Ft,gt]),R.success(`Added: ${Pe.name}`)})},ve=be=>{const st=be.target.files[0];if(st){const Pe=URL.createObjectURL(st);Ps.current.src=Pe,M(st.name),G(0),R.success(`Loaded: ${st.name}`)}},B=()=>{const be=Ps.current;q?be.pause():be.play(),U(!q)},fe=()=>{Ps.current.currentTime=Math.min(Ps.current.duration,Ps.current.currentTime+10)},je=()=>{Ps.current.currentTime=Math.max(0,Ps.current.currentTime-10)},Ue=be=>{Ps.current.currentTime=be/100*Ps.current.duration},Je=be=>{if(!be||isNaN(be))return"00:00";const st=Math.floor(be/60),Pe=Math.floor(be%60);return`${st.toString().padStart(2,"0")}:${Pe.toString().padStart(2,"0")}`},Ve=be=>{const st={id:Date.now(),timestamp:new Date,...be};Lt(Pe=>[st,...Pe].slice(0,50))},$e=(be,st,Pe)=>{const dt={id:Date.now(),url:be,filename:st,scheduledTime:Pe,status:"scheduled"};ys(gt=>[...gt,dt]),R.success(`Download scheduled for ${new Date(Pe).toLocaleString()}`)},We=()=>{const be=JSON.stringify(n,null,2),st=new Blob([be],{type:"application/json"}),Pe=URL.createObjectURL(st),dt=document.createElement("a");dt.href=Pe,dt.download=`download-history-${Date.now()}.json`,dt.click(),URL.revokeObjectURL(Pe),R.success("Download history exported")},pt=be=>{const st=be.target.files[0];if(st){const Pe=new FileReader;Pe.onload=dt=>{try{const gt=JSON.parse(dt.target.result);i(Ft=>[...Ft,...gt]),R.success(`Imported ${gt.length} downloads`)}catch{R.error("Invalid file format")}},Pe.readAsText(st)}};return e.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:"DAS - Data Analytics System"}),e.jsx("p",{className:"text-muted-foreground mt-2",children:"Real-Time Network Monitor & Download Manager with Live System Analytics"})]}),e.jsx(se,{className:"mb-6 bg-gradient-to-r from-blue-50 to-purple-50",children:e.jsxs(oe,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsx("div",{className:"flex items-center gap-2 transition-all duration-300",children:c?e.jsxs(e.Fragment,{children:[e.jsx(cp,{className:"h-4 w-4 text-green-500 animate-pulse"}),e.jsx("span",{className:"text-sm font-medium text-green-700",children:Pt.toUpperCase()})]}):e.jsxs(e.Fragment,{children:[e.jsx(Su,{className:"h-4 w-4 text-red-500 animate-bounce"}),e.jsx("span",{className:"text-sm font-medium text-red-700",children:"Disconnected"})]})}),e.jsxs("div",{className:"flex items-center gap-2 transition-all duration-500",children:[e.jsx("div",{className:"animate-pulse",children:rs()}),e.jsxs("span",{className:"text-sm font-medium transition-colors duration-300",children:["Signal: ",e.jsxs("span",{className:`font-bold ${b>=3?"text-green-600":b>=2?"text-yellow-600":"text-red-600"}`,children:[b,"/4"]})]})]}),e.jsxs("div",{className:"flex items-center gap-2 transition-all duration-300",children:[gs(),e.jsxs("span",{className:`text-sm font-medium ${_?"text-green-600":v<20?"text-red-600":"text-gray-700"}`,children:[v.toFixed(0),"%",_&&e.jsx(Ga,{className:"inline h-3 w-3 ml-1 text-yellow-500 animate-pulse"})]})]})]}),e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsxs("div",{className:"flex items-center gap-2 transition-all duration-300",children:[e.jsx(hn,{className:"h-4 w-4 text-blue-500 animate-bounce",style:{animationDuration:h>500?"0.5s":"1s"}}),e.jsxs("span",{className:"text-sm font-mono font-bold text-blue-600",children:[" ",Nt(h)]})]}),e.jsxs("div",{className:"flex items-center gap-2 transition-all duration-300",children:[e.jsx(Yo,{className:"h-4 w-4 text-green-500",style:{animation:g>50?"pulse 1s infinite":"none"}}),e.jsxs("span",{className:"text-sm font-mono font-bold text-green-600",children:[" ",Nt(g)]})]}),e.jsxs("div",{className:"flex items-center gap-2 transition-all duration-200",children:[O?e.jsx(Kx,{className:"h-4 w-4 text-red-500"}):e.jsx(rm,{className:"h-4 w-4 text-gray-600"}),e.jsxs("span",{className:"text-sm font-medium",children:[E[0],"%"]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium text-gray-600",children:[e.jsx(ps,{className:"h-4 w-4 animate-spin",style:{animationDuration:"60s"}}),e.jsx("span",{className:"font-mono tabular-nums",children:He})]})]})]}),e.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[e.jsx(rn,{className:"h-3 w-3 text-blue-500 animate-pulse"}),e.jsxs("span",{className:"text-xs text-gray-500",children:[s?"WebSocket Connected":"Offline Mode"," "," ",n.filter(be=>be.status==="downloading").length," Active Downloads "," ","CPU: ",me.toFixed(0),"% "," ","Memory: ",Ne.toFixed(0),"%"]})]})]})}),e.jsxs(Ha,{value:re,onValueChange:de,className:"space-y-6",children:[e.jsxs(Xa,{className:"grid w-full grid-cols-6 bg-card",children:[e.jsxs(Tt,{value:"downloads",className:"data-[state=active]:bg-primary data-[state=active]:text-primary-foreground",children:[e.jsx(hn,{className:"h-4 w-4 mr-2"}),"Downloads"]}),e.jsxs(Tt,{value:"settings",className:"data-[state=active]:bg-primary data-[state=active]:text-primary-foreground",children:[e.jsx(Ya,{className:"h-4 w-4 mr-2"}),"Settings"]}),e.jsxs(Tt,{value:"media",className:"data-[state=active]:bg-primary data-[state=active]:text-primary-foreground",children:[e.jsx(ev,{className:"h-4 w-4 mr-2"}),"Media"]}),e.jsxs(Tt,{value:"system",className:"data-[state=active]:bg-primary data-[state=active]:text-primary-foreground",children:[e.jsx(M_,{className:"h-4 w-4 mr-2"}),"System"]}),e.jsxs(Tt,{value:"schedule",className:"data-[state=active]:bg-primary data-[state=active]:text-primary-foreground",children:[e.jsx(Ms,{className:"h-4 w-4 mr-2"}),"Schedule"]}),e.jsxs(Tt,{value:"database",className:"data-[state=active]:bg-primary data-[state=active]:text-primary-foreground",children:[e.jsx(hm,{className:"h-4 w-4 mr-2"}),"Database"]})]}),e.jsx(kt,{value:"downloads",className:"space-y-6",children:e.jsxs(se,{className:"border-primary/20",children:[e.jsx(_e,{className:"bg-gradient-to-r from-blue-50 to-cyan-50 dark:from-blue-950 dark:to-cyan-950",children:e.jsxs(Te,{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(hn,{className:"h-5 w-5 text-primary"}),"Download Manager"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(ze,{variant:"secondary",children:[n.filter(be=>be.status==="downloading").length," Active"]}),e.jsxs(ze,{variant:"outline",children:[n.length," Total"]})]})]})}),e.jsxs(oe,{className:"space-y-4 pt-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(cd,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(we,{placeholder:"Enter URL, magnet link, or paste from clipboard...",className:"pl-10 border-primary/30 focus:border-primary",onKeyPress:be=>{be.key==="Enter"&&be.target.value&&(Re(be.target.value),be.target.value="")}})]}),e.jsx("input",{type:"file",ref:Qa,onChange:ye,multiple:!0,className:"hidden"}),e.jsxs(I,{onClick:()=>Qa.current?.click(),className:"gap-2",children:[e.jsx(Yo,{className:"h-4 w-4"}),"Add Files"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(I,{variant:"outline",size:"sm",onClick:async()=>{try{const be=await navigator.clipboard.readText();be&&(be.startsWith("http")||be.startsWith("magnet"))?(Re(be),R.success("URL added from clipboard")):R.error("No valid URL in clipboard")}catch{R.error("Could not read clipboard")}},children:[e.jsx(Ru,{className:"h-3 w-3 mr-1"}),"Paste from Clipboard"]}),e.jsxs(I,{variant:"outline",size:"sm",onClick:()=>{const be=n.filter(st=>st.status==="downloading");if(be.length===0){R.info("No active downloads");return}be.forEach(st=>tt(st.id)),R.success(`Paused ${be.length} downloads`)},disabled:n.filter(be=>be.status==="downloading").length===0,children:[e.jsx(tv,{className:"h-3 w-3 mr-1"}),"Pause All"]}),e.jsxs(I,{variant:"outline",size:"sm",onClick:()=>{const be=n.filter(st=>st.status==="paused");if(be.length===0){R.info("No paused downloads");return}be.forEach(st=>wt(st.id)),R.success(`Resumed ${be.length} downloads`)},disabled:n.filter(be=>be.status==="paused").length===0,children:[e.jsx(Cu,{className:"h-3 w-3 mr-1"}),"Resume All"]})]})]}),e.jsxs("div",{className:"flex items-center gap-2 border-b pb-2",children:[e.jsxs(I,{variant:n.length===n.length?"default":"ghost",size:"sm",onClick:()=>{},children:["All (",n.length,")"]}),e.jsxs(I,{variant:"ghost",size:"sm",children:["Downloading (",n.filter(be=>be.status==="downloading").length,")"]}),e.jsxs(I,{variant:"ghost",size:"sm",children:["Completed (",n.filter(be=>be.status==="completed").length,")"]})]}),e.jsx(xr,{className:"h-96",children:e.jsxs("div",{className:"space-y-3",children:[n.map(be=>e.jsxs(se,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(w1,{className:"h-5 w-5 text-blue-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-sm",children:be.filename}),e.jsx("p",{className:"text-xs text-gray-500",children:be.url})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ze,{variant:be.status==="downloading"?"default":"secondary",children:be.status}),e.jsx(ze,{variant:"outline",children:be.protocol})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(dr,{value:be.progress,className:"h-2"}),e.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[e.jsxs("span",{children:[be.progress.toFixed(1),"% of ",ne(be.size)]}),e.jsxs("span",{children:[Nt(be.speed),"  ETA: ",be.eta]})]})]}),e.jsxs("div",{className:"flex items-center gap-2 mt-3",children:[be.status==="downloading"?e.jsx(I,{size:"sm",variant:"outline",onClick:()=>tt(be.id),children:e.jsx(tv,{className:"h-3 w-3"})}):e.jsx(I,{size:"sm",variant:"outline",onClick:()=>wt(be.id),children:e.jsx(Cu,{className:"h-3 w-3"})}),e.jsx(I,{size:"sm",variant:"outline",onClick:()=>bt(be.id),children:e.jsx(nr,{className:"h-3 w-3"})}),e.jsx(I,{size:"sm",variant:"outline",children:e.jsx(Cs,{className:"h-3 w-3"})})]})]},be.id)),n.length===0&&e.jsxs("div",{className:"text-center py-12 text-gray-500",children:[e.jsx(hn,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"No downloads yet. Add a URL or file to get started."})]})]})})]})]})}),e.jsx(kt,{value:"settings",className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(se,{className:"border-primary/20",children:[e.jsx(_e,{className:"bg-gradient-to-r from-yellow-50 to-orange-50 dark:from-yellow-950 dark:to-orange-950",children:e.jsxs(Te,{className:"flex items-center gap-2",children:[e.jsx(Ga,{className:"h-5 w-5 text-primary"}),"Speed & Connection Limits"]})}),e.jsxs(oe,{className:"space-y-6 pt-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("label",{className:"text-sm font-medium",children:"Max Download Speed"}),e.jsxs(ze,{variant:"secondary",children:[J[0]," KB/s"]})]}),e.jsx(vo,{value:J,onValueChange:be=>{W(be),R.info(`Speed limit: ${be[0]} KB/s`)},max:1e4,min:100,step:100,className:"w-full"}),e.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground",children:[e.jsx("span",{children:"100 KB/s"}),e.jsx("span",{children:"10 MB/s"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("label",{className:"text-sm font-medium",children:"Max Connections"}),e.jsxs(ze,{variant:"secondary",children:[he[0]," connections"]})]}),e.jsx(vo,{value:he,onValueChange:be=>{V(be),R.info(`Max connections: ${be[0]}`)},max:20,min:1,step:1,className:"w-full"}),e.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground",children:[e.jsx("span",{children:"1"}),e.jsx("span",{children:"20"})]})]}),e.jsxs(I,{variant:"outline",size:"sm",className:"w-full",onClick:()=>{W([1e3]),V([5]),R.success("Reset to default values")},children:[e.jsx(Kv,{className:"h-4 w-4 mr-2"}),"Reset to Defaults"]})]})]}),e.jsxs(se,{className:"border-primary/20",children:[e.jsx(_e,{className:"bg-gradient-to-r from-purple-50 to-pink-50 dark:from-purple-950 dark:to-pink-950",children:e.jsxs(Te,{className:"flex items-center gap-2",children:[e.jsx(Ya,{className:"h-5 w-5 text-primary"}),"Advanced Features"]})}),e.jsxs(oe,{className:"space-y-4 pt-6",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border hover:bg-accent transition-colors",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Cs,{className:"h-4 w-4 text-primary"}),e.jsx("p",{className:"font-medium",children:"Auto Retry"})]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Automatically retry failed downloads"})]}),e.jsx(_s,{checked:ae,onCheckedChange:be=>{ge(be),R.info(`Auto retry ${be?"enabled":"disabled"}`)}})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border hover:bg-accent transition-colors",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ks,{className:"h-4 w-4 text-primary"}),e.jsx("p",{className:"font-medium",children:"File Validation"})]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Verify file integrity after download"})]}),e.jsx(_s,{checked:Z,onCheckedChange:be=>{ee(be),R.info(`File validation ${be?"enabled":"disabled"}`)}})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border hover:bg-accent transition-colors",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Z5,{className:"h-4 w-4 text-primary"}),e.jsx("p",{className:"font-medium",children:"Compression"})]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Enable compression for transfers"})]}),e.jsx(_s,{checked:te,onCheckedChange:be=>{X(be),R.info(`Compression ${be?"enabled":"disabled"}`)}})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border hover:bg-accent transition-colors",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(sr,{className:"h-4 w-4 text-primary"}),e.jsx("p",{className:"font-medium",children:"Encryption"})]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Encrypt downloads for security"})]}),e.jsx(_s,{checked:ce,onCheckedChange:be=>{F(be),R.info(`Encryption ${be?"enabled":"disabled"}`)}})]})]})]})]})}),e.jsx(kt,{value:"media",className:"space-y-6",children:e.jsxs(se,{className:"bg-gradient-to-br from-purple-50 to-pink-50 dark:from-purple-950 dark:to-pink-950 border-primary/20",children:[e.jsx(_e,{children:e.jsxs(Te,{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(ev,{className:"h-5 w-5 text-purple-600"}),"Media Player"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"file",ref:ie,onChange:ve,accept:"audio/*,video/*",className:"hidden"}),e.jsxs(I,{size:"sm",variant:"outline",onClick:()=>ie.current?.click(),children:[e.jsx(Yo,{className:"h-4 w-4 mr-2"}),"Load Media"]})]})]})}),e.jsxs(oe,{className:"space-y-4",children:[e.jsxs("div",{className:"text-center py-8 bg-white rounded-lg",children:[e.jsxs("div",{className:"w-32 h-32 bg-gradient-to-br from-purple-100 to-pink-100 rounded-full mx-auto mb-4 flex items-center justify-center relative overflow-hidden",children:[q?e.jsx("div",{className:"absolute inset-0 bg-purple-400 opacity-20 animate-ping"}):null,e.jsx(ev,{className:`h-16 w-16 ${q?"text-purple-600 animate-bounce":"text-purple-400"}`})]}),e.jsx("p",{className:"font-bold text-lg text-primary",children:D||"No media selected"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:D?q?"Now Playing":"Paused":'Click "Load Media" to select a file'}),K>0&&e.jsxs("div",{className:"flex items-center justify-center gap-2 mt-2 text-sm text-muted-foreground",children:[e.jsx(ps,{className:"h-4 w-4"}),e.jsxs("span",{children:[Je(Ps.current.currentTime)," / ",Je(K)]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"relative cursor-pointer group",onClick:be=>{if(K>0){const st=be.currentTarget.getBoundingClientRect(),Pe=(be.clientX-st.left)/st.width*100;Ue(Pe)}},children:[e.jsx(dr,{value:P,className:"h-3 cursor-pointer transition-all group-hover:h-4"}),e.jsxs("div",{className:"absolute -top-1 flex justify-between w-full px-1 text-xs text-muted-foreground",children:[e.jsx("span",{children:Je(Ps.current.currentTime)}),e.jsx("span",{children:Je(K)})]})]}),e.jsxs("div",{className:"flex items-center justify-center gap-4",children:[e.jsxs(I,{variant:"outline",size:"sm",onClick:je,disabled:!D,className:"hover:bg-purple-100",children:[e.jsx(X5,{className:"h-4 w-4"}),e.jsx("span",{className:"ml-1 text-xs",children:"10s"})]}),e.jsx(I,{size:"lg",onClick:B,disabled:!D,className:`w-16 h-16 rounded-full ${q?"bg-purple-600 hover:bg-purple-700":"bg-purple-500 hover:bg-purple-600"}`,children:q?e.jsx(tv,{className:"h-6 w-6"}):e.jsx(Cu,{className:"h-6 w-6 ml-1"})}),e.jsxs(I,{variant:"outline",size:"sm",onClick:fe,disabled:!D,className:"hover:bg-purple-100",children:[e.jsx("span",{className:"mr-1 text-xs",children:"10s"}),e.jsx(Q5,{className:"h-4 w-4"})]})]}),e.jsxs("div",{className:"flex items-center gap-4 p-4 bg-white rounded-lg",children:[e.jsx(I,{variant:"ghost",size:"sm",onClick:()=>Q(!O),className:"hover:bg-purple-100",children:O?e.jsx(Kx,{className:"h-5 w-5 text-destructive"}):e.jsx(rm,{className:"h-5 w-5 text-primary"})}),e.jsx(vo,{value:E,onValueChange:A,max:100,min:0,step:1,className:"flex-1"}),e.jsxs("span",{className:"text-sm font-bold text-primary w-12",children:[E[0],"%"]})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-white rounded-lg",children:[e.jsxs(I,{variant:"outline",size:"sm",onClick:()=>{Ps.current.currentTime>0&&(Ps.current.currentTime=0,G(0),R.info("Restarted from beginning"))},disabled:!D,children:[e.jsx(Kv,{className:"h-4 w-4 mr-2"}),"Restart"]}),e.jsxs(I,{variant:"outline",size:"sm",onClick:()=>{Ps.current.playbackRate=Ps.current.playbackRate===1?1.5:Ps.current.playbackRate===1.5?2:1,R.info(`Speed: ${Ps.current.playbackRate}x`)},disabled:!D,children:[e.jsx(Ga,{className:"h-4 w-4 mr-2"}),Ps.current.playbackRate,"x Speed"]}),e.jsxs(I,{variant:"outline",size:"sm",onClick:()=>{M(""),Ps.current.src="",U(!1),G(0),R.success("Media cleared")},disabled:!D,children:[e.jsx(nr,{className:"h-4 w-4 mr-2"}),"Clear"]})]})]})]})]})}),e.jsx(kt,{value:"schedule",className:"space-y-6",children:e.jsxs(se,{className:"bg-gradient-to-br from-cyan-50 to-blue-50 dark:from-cyan-950 dark:to-blue-950 border-primary/20",children:[e.jsx(_e,{children:e.jsxs(Te,{className:"flex items-center gap-2",children:[e.jsx(Ms,{className:"h-5 w-5 text-primary"}),"Scheduled Downloads"]})}),e.jsx(oe,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"p-4 bg-card rounded-lg border-2 border-primary/30",children:[e.jsx("h3",{className:"text-sm font-semibold mb-3 text-primary",children:"Schedule New Download"}),e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-muted-foreground mb-1 block",children:"Download URL *"}),e.jsx(we,{placeholder:"https://example.com/file.zip",className:"flex-1",value:Es,onChange:be=>Hs(be.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-muted-foreground mb-1 block",children:"Schedule Date & Time *"}),e.jsx(we,{type:"datetime-local",className:"w-full",value:bs,onChange:be=>$s(be.target.value),min:new Date().toISOString().slice(0,16)})]}),e.jsxs(I,{className:"w-full",onClick:()=>{if(!Es.trim()){R.error("Please enter a URL");return}if(!bs){R.error("Please select date and time");return}if(new Date(bs)<=new Date){R.error("Please select a future date and time");return}const st=Es.split("/").pop()||`scheduled_${Date.now()}`;$e(Es,st,bs),Hs(""),$s("")},disabled:!Es||!bs,children:[e.jsx(ps,{className:"h-4 w-4 mr-2"}),"Schedule Download"]})]})]}),yt.length===0?e.jsxs("div",{className:"text-center py-12 text-muted-foreground bg-card rounded-lg",children:[e.jsx(Ms,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{className:"font-medium",children:"No scheduled downloads"}),e.jsx("p",{className:"text-xs mt-2",children:"Schedule downloads to start automatically at a specific time"})]}):e.jsxs("div",{className:"space-y-2",children:[e.jsxs("h3",{className:"text-sm font-semibold flex items-center gap-2",children:[e.jsx(ur,{className:"h-4 w-4"}),"Scheduled (",yt.length,")"]}),yt.map(be=>e.jsx(se,{className:"p-3 hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(w1,{className:"h-4 w-4 text-primary"}),e.jsx("p",{className:"font-medium text-sm",children:be.filename})]}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1 flex items-center gap-1",children:[e.jsx(ps,{className:"h-3 w-3"}),new Date(be.scheduledTime).toLocaleString()]}),e.jsx("p",{className:"text-xs text-primary mt-1",children:be.url})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ze,{variant:be.status==="scheduled"?"secondary":"default",children:be.status}),e.jsx(I,{variant:"ghost",size:"sm",onClick:()=>{ys(st=>st.filter(Pe=>Pe.id!==be.id)),R.success("Scheduled download removed")},children:e.jsx(Ua,{className:"h-4 w-4 text-destructive"})})]})]})},be.id))]})]})})]})}),e.jsx(kt,{value:"system",className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(se,{className:"bg-gradient-to-br from-blue-50 to-cyan-50 dark:from-blue-950 dark:to-cyan-950 border-primary/20",children:[e.jsx(_e,{children:e.jsxs(Te,{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(cp,{className:`h-5 w-5 ${c?"text-green-500 animate-pulse":"text-red-500"}`}),"WiFi Connection"]}),e.jsx(ze,{variant:c?"default":"destructive",className:"animate-pulse",children:c?"Online":"Offline"})]})}),e.jsx(oe,{className:"space-y-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium",children:"Network Name:"}),e.jsx("span",{className:"text-sm font-bold text-blue-600",children:Rt})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium",children:"Security:"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(sr,{className:"h-4 w-4 text-green-600"}),e.jsx("span",{className:"text-sm",children:"WPA2-PSK"})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium",children:"Signal Strength:"}),e.jsxs("div",{className:"flex items-center gap-2",children:[rs(),e.jsx(dr,{value:b*25,className:"w-24 h-2"}),e.jsxs("span",{className:"text-sm font-bold",children:[b*25,"%"]})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium",children:"Connection Type:"}),e.jsx(ze,{variant:"secondary",className:"font-bold",children:Pt.toUpperCase()})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium",children:"IP Address:"}),e.jsxs("span",{className:"text-sm font-mono",children:["192.168.1.",Math.floor(Math.random()*255)]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium",children:"Ping/Latency:"}),e.jsxs("span",{className:`text-sm font-bold ${Ca<20?"text-green-600":Ca<40?"text-yellow-600":"text-red-600"}`,children:[Ca,"ms"]})]})]})})]}),e.jsxs(se,{className:"bg-gradient-to-br from-purple-50 to-pink-50 dark:from-purple-950 dark:to-pink-950 border-primary/20",children:[e.jsx(_e,{children:e.jsxs(Te,{className:"flex items-center gap-2",children:[e.jsx(rm,{className:"h-5 w-5 text-purple-600"}),"System Volume"]})}),e.jsxs(oe,{className:"space-y-6",children:[e.jsx("div",{className:"text-center",children:e.jsxs("div",{className:"relative w-32 h-32 mx-auto mb-4",children:[e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsxs("div",{className:"text-4xl font-bold text-purple-600",children:[Qe[0],"%"]})}),e.jsxs("svg",{className:"w-full h-full transform -rotate-90",children:[e.jsx("circle",{cx:"64",cy:"64",r:"56",fill:"none",stroke:"#e5e7eb",strokeWidth:"8"}),e.jsx("circle",{cx:"64",cy:"64",r:"56",fill:"none",stroke:"#9333ea",strokeWidth:"8",strokeDasharray:`${Qe[0]*3.51} 351`,className:"transition-all duration-300"})]})]})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(vo,{value:Qe,onValueChange:be=>{jt(be),R.info(`Volume: ${be[0]}%`)},max:100,min:0,step:1,className:"w-full"}),e.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-600",children:[e.jsx(Kx,{className:"h-4 w-4"}),e.jsx(rm,{className:"h-4 w-4"})]})]})]})]}),e.jsxs(se,{className:"lg:col-span-2 bg-gradient-to-br from-green-50 to-emerald-50 dark:from-green-950 dark:to-emerald-950 border-primary/20",children:[e.jsx(_e,{children:e.jsxs(Te,{className:"flex items-center gap-2",children:[e.jsx(rn,{className:"h-5 w-5 text-green-600 animate-pulse"}),"Network Speed Monitor (Real-Time)"]})}),e.jsx(oe,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"h-48 relative bg-white rounded-lg p-4 border-2 border-green-200 dark:border-green-800",children:[e.jsxs("div",{className:"absolute top-2 left-4 flex gap-4 text-xs",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-3 h-3 bg-blue-500 rounded-full animate-pulse"}),"Download"]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full animate-pulse"}),"Upload"]})]}),e.jsx("div",{className:"h-full flex items-end justify-between gap-1 pt-6",children:Ot.map((be,st)=>e.jsxs("div",{className:"flex-1 flex flex-col items-center gap-1",children:[e.jsx("div",{className:"w-full bg-blue-500 rounded-t transition-all duration-300 hover:bg-blue-600",style:{height:`${Math.min(100,be/10)}%`}}),e.jsx("div",{className:"w-full bg-green-500 rounded-t transition-all duration-300 hover:bg-green-600",style:{height:`${Math.min(100,js[st]/2)}%`}})]},st))})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"p-4 bg-blue-100 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx(hn,{className:"h-5 w-5 text-blue-600 animate-bounce"}),e.jsx("span",{className:"text-xs text-blue-600 font-medium",children:"Download"})]}),e.jsx("div",{className:"text-2xl font-bold text-blue-700",children:Nt(h)}),e.jsxs("div",{className:"text-xs text-blue-600 mt-1",children:["Peak: ",Nt(Math.max(...Ot))]})]}),e.jsxs("div",{className:"p-4 bg-green-100 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx(Yo,{className:"h-5 w-5 text-green-600 animate-bounce"}),e.jsx("span",{className:"text-xs text-green-600 font-medium",children:"Upload"})]}),e.jsx("div",{className:"text-2xl font-bold text-green-700",children:Nt(g)}),e.jsxs("div",{className:"text-xs text-green-600 mt-1",children:["Peak: ",Nt(Math.max(...js))]})]})]})]})})]}),e.jsxs(se,{className:"bg-gradient-to-br from-orange-50 to-amber-50 dark:from-orange-950 dark:to-amber-950 border-primary/20",children:[e.jsx(_e,{children:e.jsxs(Te,{className:"flex items-center gap-2",children:[e.jsx(J5,{className:"h-5 w-5 text-orange-600"}),"Data Usage"]})}),e.jsxs(oe,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium",children:"Used:"}),e.jsxs("span",{className:"text-sm font-bold text-orange-600",children:[(Xe/1024).toFixed(2)," GB"]})]}),e.jsx(dr,{value:Xe/Ce*100,className:"h-3"}),e.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-600",children:[e.jsx("span",{children:"0 GB"}),e.jsxs("span",{children:[(Ce/1024).toFixed(0)," GB Total"]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[e.jsxs("div",{className:"p-2 bg-white rounded border",children:[e.jsx("div",{className:"text-xs text-gray-600",children:"Downloaded"}),e.jsxs("div",{className:"font-bold text-blue-600",children:[(Xe*.7/1024).toFixed(2)," GB"]})]}),e.jsxs("div",{className:"p-2 bg-white rounded border",children:[e.jsx("div",{className:"text-xs text-gray-600",children:"Uploaded"}),e.jsxs("div",{className:"font-bold text-green-600",children:[(Xe*.3/1024).toFixed(2)," GB"]})]})]}),e.jsxs(I,{variant:"outline",size:"sm",className:"w-full",onClick:()=>{Se(0),R.success("Data usage reset")},children:[e.jsx(Cs,{className:"h-4 w-4 mr-2"}),"Reset Usage"]})]})]}),e.jsxs(se,{className:"bg-gradient-to-br from-indigo-50 to-blue-50 dark:from-indigo-950 dark:to-blue-950 border-primary/20",children:[e.jsx(_e,{children:e.jsxs(Te,{className:"flex items-center gap-2",children:[e.jsx(V_,{className:"h-5 w-5 text-indigo-600"}),"System Resources"]})}),e.jsxs(oe,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("span",{className:"text-sm font-medium",children:"CPU Usage"}),e.jsxs("span",{className:`text-sm font-bold ${me>80?"text-red-600":me>50?"text-yellow-600":"text-green-600"}`,children:[me.toFixed(0),"%"]})]}),e.jsx(dr,{value:me,className:"h-2"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("span",{className:"text-sm font-medium",children:"Memory"}),e.jsxs("span",{className:`text-sm font-bold ${Ne>80?"text-red-600":Ne>50?"text-yellow-600":"text-green-600"}`,children:[Ne.toFixed(0),"%"]})]}),e.jsx(dr,{value:Ne,className:"h-2"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("span",{className:"text-sm font-medium",children:"Disk Space"}),e.jsxs("span",{className:`text-sm font-bold ${Le>80?"text-red-600":Le>50?"text-yellow-600":"text-green-600"}`,children:[Le.toFixed(0),"%"]})]}),e.jsx(dr,{value:Le,className:"h-2"})]})]}),e.jsx("div",{className:"pt-3 border-t",children:e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Status:"}),e.jsx(ze,{variant:me<70&&Ne<70?"default":"destructive",children:me<70&&Ne<70?"Optimal":"High Load"})]})})]})]})]})}),e.jsx(kt,{value:"database",className:"space-y-6",children:e.jsxs(se,{className:"bg-gradient-to-br from-slate-50 to-gray-50 dark:from-slate-950 dark:to-gray-950 border-primary/20",children:[e.jsx(_e,{children:e.jsxs(Te,{className:"flex items-center gap-2",children:[e.jsx(hm,{className:"h-5 w-5 text-slate-600"}),"Download History Database"]})}),e.jsxs(oe,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[e.jsxs("div",{className:"text-center p-4 bg-blue-50 dark:bg-blue-950 rounded-lg border-2 border-blue-200 dark:border-blue-800 hover:shadow-md transition-shadow",children:[e.jsx(hm,{className:"h-8 w-8 text-blue-600 dark:text-blue-400 mx-auto mb-2 animate-pulse"}),e.jsx("p",{className:"font-medium text-sm text-muted-foreground",children:"Total Downloads"}),e.jsx("p",{className:"text-3xl font-bold text-blue-600 dark:text-blue-400 mt-1",children:n.length+ws}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"All time"})]}),e.jsxs("div",{className:"text-center p-4 bg-green-50 dark:bg-green-950 rounded-lg border-2 border-green-200 dark:border-green-800 hover:shadow-md transition-shadow",children:[e.jsx(ks,{className:"h-8 w-8 text-green-600 dark:text-green-400 mx-auto mb-2"}),e.jsx("p",{className:"font-medium text-sm text-muted-foreground",children:"Completed"}),e.jsx("p",{className:"text-3xl font-bold text-green-600 dark:text-green-400 mt-1",children:n.filter(be=>be.status==="completed").length+ws}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[(n.filter(be=>be.status==="completed").length/Math.max(n.length,1)*100).toFixed(0),"% success rate"]})]}),e.jsxs("div",{className:"text-center p-4 bg-red-50 dark:bg-red-950 rounded-lg border-2 border-red-200 dark:border-red-800 hover:shadow-md transition-shadow",children:[e.jsx(Ws,{className:"h-8 w-8 text-red-600 dark:text-red-400 mx-auto mb-2"}),e.jsx("p",{className:"font-medium text-sm text-muted-foreground",children:"Failed"}),e.jsx("p",{className:"text-3xl font-bold text-red-600 dark:text-red-400 mt-1",children:n.filter(be=>be.status==="error").length+Na}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[(n.filter(be=>be.status==="error").length/Math.max(n.length,1)*100).toFixed(0),"% error rate"]})]})]}),n.length>0&&e.jsxs("div",{className:"mb-6 p-4 bg-card rounded-lg border",children:[e.jsxs("h3",{className:"text-sm font-semibold mb-3 flex items-center gap-2",children:[e.jsx(rn,{className:"h-4 w-4 text-primary"}),"Recent Downloads"]}),e.jsx(xr,{className:"h-32",children:e.jsx("div",{className:"space-y-2",children:n.slice(-5).reverse().map(be=>e.jsxs("div",{className:"flex items-center justify-between text-xs p-2 hover:bg-accent rounded",children:[e.jsx("span",{className:"font-medium truncate flex-1",children:be.filename}),e.jsx(ze,{variant:be.status==="completed"?"default":be.status==="error"?"destructive":"secondary",className:"text-xs",children:be.status})]},be.id))})})]}),e.jsxs("div",{className:"flex flex-wrap gap-3",children:[e.jsx("input",{type:"file",ref:ht,onChange:pt,accept:".json",className:"hidden"}),e.jsxs(I,{variant:"outline",onClick:We,className:"hover:bg-blue-50",children:[e.jsx(hn,{className:"h-4 w-4 mr-2"}),"Export History"]}),e.jsxs(I,{variant:"outline",onClick:()=>ht.current?.click(),className:"hover:bg-green-50",children:[e.jsx(Yo,{className:"h-4 w-4 mr-2"}),"Import History"]}),e.jsxs(I,{variant:"outline",onClick:()=>{$t(be=>be+n.filter(st=>st.status==="completed").length),Me(be=>be+n.filter(st=>st.status==="error").length),R.success("Database refreshed")},className:"hover:bg-purple-50",children:[e.jsx(Cs,{className:"h-4 w-4 mr-2"}),"Refresh Database"]}),e.jsxs(I,{variant:"outline",onClick:()=>{if(n.length===0){R.info("No downloads to clear");return}confirm("Are you sure you want to clear all download history?")&&(i([]),$t(0),Me(0),R.success("Download history cleared"))},className:"hover:bg-red-50",children:[e.jsx(Ua,{className:"h-4 w-4 mr-2"}),"Clear History"]})]})]})]})})]})]})},wG="2.0.0",bG={version:wG};class SG{constructor(){this.isInitialized=!1,this.updateCheckInterval=null,this.currentVersion=bG.version,this.updateCheckUrl=null,this.checkInterval=parseInt(void 0)||18e5,this.autoUpdate=!1,this.enableUpdateNotifications=!0}start(){return console.log("Update service started"),this.isInitialized=!0,this}stop(){return console.log("Update service stopped"),this.updateCheckInterval&&(clearInterval(this.updateCheckInterval),this.updateCheckInterval=null),this.isInitialized=!1,this}initialize(){return this.isInitialized?(console.log(" Initializing automatic updates..."),console.log(` Current version: ${this.currentVersion}`),console.log(` Check interval: ${this.checkInterval/1e3/60} minutes`),this.updateCheckInterval=setInterval(()=>{this.checkForUpdates()},this.checkInterval),setTimeout(()=>{this.checkForUpdates()},5e3),this.registerServiceWorkerListener(),this):(console.warn("Update service not started. Call start() first."),this)}async checkForUpdates(){if(!this.enableUpdateNotifications)return console.log(" Update notifications disabled"),this;console.log(" Checking for updates...");try{if(this.updateCheckUrl){const a=await(await fetch(this.updateCheckUrl)).json();a.latestVersion&&this.isNewerVersion(a.latestVersion,this.currentVersion)?this.notifyUpdate(a):console.log(" App is up to date")}else this.checkServiceWorkerUpdate()}catch(s){console.error(" Update check failed:",s)}return this}isNewerVersion(s,a){const n=s.split(".").map(Number),i=a.split(".").map(Number);for(let c=0;c<Math.max(n.length,i.length);c++){const d=n[c]||0,h=i[c]||0;if(d>h)return!0;if(d<h)return!1}return!1}checkServiceWorkerUpdate(){"serviceWorker"in navigator&&navigator.serviceWorker.getRegistration().then(s=>{s&&s.update()})}registerServiceWorkerListener(){"serviceWorker"in navigator&&navigator.serviceWorker.addEventListener("controllerchange",()=>{this.notifyUpdate({latestVersion:"New version",message:"A new version of the app is available.",updateType:"service-worker"})})}showWelcomeMessage(){if(!this.enableUpdateNotifications)return this;console.log(" Checking for welcome message...");const s=localStorage.getItem("app_version");return s?s!==this.currentVersion&&R.info(`Updated to v${this.currentVersion}`,{description:"Check out the new features and improvements!",duration:5e3,action:{label:"See What's New",onClick:()=>this.showChangelogModal()}}):R.success("Welcome to ominbiz!",{description:"Your all-in-one business management platform is ready!",duration:5e3,action:{label:"Get Started",onClick:()=>console.log("Welcome acknowledged")}}),localStorage.setItem("app_version",this.currentVersion),this}showChangelogModal(){const s=this.getChangelog();console.log(" Changelog:",s),R.info("Changelog",{description:s.slice(0,2).join(`
`),duration:8e3})}getChangelog(){return[" Enhanced AI chat with dashboard-specific responses"," Added voice input support"," New settings panel with AI personality options"," Real-time data integration"," Conversation history with search & export"," Improved UI with maximizable interface"]}notifyUpdate(s={}){const{latestVersion:a,message:n,updateType:i}=s;if(console.log(" Update available:",a||"New version"),this.autoUpdate)R.info("Auto-updating...",{description:"The app will refresh in 3 seconds",duration:3e3}),setTimeout(()=>{window.location.reload()},3e3);else{const c=a?`v${a}`:"New version";R.success("Update Available!",{description:n||`${c} is ready. Refresh to update.`,duration:0,action:{label:"Update Now",onClick:()=>window.location.reload()},cancel:{label:"Later",onClick:()=>{console.log("Update postponed"),setTimeout(()=>{this.notifyUpdate(s)},36e5)}}})}return this}triggerUpdate(){return R.loading("Updating app...",{duration:1e3}),setTimeout(()=>{window.location.reload()},1e3),this}checkNetworkStatus(){return navigator.onLine?!0:(R.error("No internet connection",{description:"Updates require an internet connection",duration:5e3}),!1)}forceUpdateCheck(){return this.checkNetworkStatus()?(R.info("Checking for updates...",{duration:2e3}),this.checkForUpdates(),this):this}destroy(){return console.log(" Destroying update service..."),this.stop(),this.isInitialized=!1,this}getStatus(){return{isInitialized:this.isInitialized,hasActiveInterval:!!this.updateCheckInterval,currentVersion:this.currentVersion,checkInterval:this.checkInterval,autoUpdate:this.autoUpdate,notificationsEnabled:this.enableUpdateNotifications,hasUpdateUrl:!!this.updateCheckUrl}}getVersion(){return this.currentVersion}setNotificationsEnabled(s){return this.enableUpdateNotifications=s,console.log(` Update notifications ${s?"enabled":"disabled"}`),this}}const nm=new SG,_G=()=>{const{theme:t,setTheme:s}=Bj(),{theme:a,setTheme:n,compactMode:i,highContrast:c,reducedMotion:d,animations:h,customAccentColor:f,fontSize:g,borderRadius:p,soundEnabled:v,availableThemes:y}=Gu();return N.useEffect(()=>{a!==t&&s(a)},[a,t,s]),N.useEffect(()=>{const T=document.documentElement,E=document.body;E.className=E.className.replace(/theme-\w+/g,""),E.classList.add(`theme-${a}`);const A=y[a];A&&A.colors&&Object.entries(A.colors).forEach(([q,U])=>{T.style.setProperty(`--color-${q}`,U)}),f&&(T.style.setProperty("--color-accent",f),T.style.setProperty("--color-primary",f)),i?(E.classList.add("compact-mode"),T.style.setProperty("--spacing-scale","0.75")):(E.classList.remove("compact-mode"),T.style.setProperty("--spacing-scale","1")),c?E.classList.add("high-contrast"):E.classList.remove("high-contrast"),d?E.classList.add("reduce-motion"):E.classList.remove("reduce-motion"),h?E.classList.remove("no-animations"):E.classList.add("no-animations");const O={small:"14px",medium:"16px",large:"18px","extra-large":"20px"};T.style.setProperty("--font-size-base",O[g]||"16px");const Q={none:"0px",small:"0.25rem",medium:"0.5rem",large:"0.75rem","extra-large":"1rem"};T.style.setProperty("--border-radius-base",Q[p]||"0.5rem")},[a,i,c,d,h,f,g,p,v,y]),{resetToDefaults:()=>{n("light"),R.success("Theme settings reset to defaults")},exportSettings:()=>{const T={theme:a,compactMode:i,highContrast:c,reducedMotion:d,animations:h,customAccentColor:f,fontSize:g,borderRadius:p,soundEnabled:v,exportedAt:new Date().toISOString()},E=new Blob([JSON.stringify(T,null,2)],{type:"application/json"}),A=URL.createObjectURL(E),O=document.createElement("a");O.href=A,O.download="ominbiz-theme-settings.json",O.click(),URL.revokeObjectURL(A),R.success("Theme settings exported successfully")},importSettings:T=>{const E=new FileReader;E.onload=A=>{try{const O=JSON.parse(A.target.result);O.theme&&y[O.theme]?(n(O.theme),R.success("Theme settings imported successfully")):R.error("Invalid theme settings file")}catch{R.error("Failed to import theme settings")}},E.readAsText(T)}}},CG=()=>(_G(),null),hA=N.createContext(),TG=()=>{const t=N.useContext(hA);if(!t)throw new Error("usePWA must be used within a PWAProvider");return t},kG=({children:t})=>{const[s,a]=N.useState(navigator.onLine),[n,i]=N.useState(!1),[c,d]=N.useState(!1),[h,f]=N.useState(null);N.useEffect(()=>{const y=()=>{const T=window.matchMedia("(display-mode: standalone)").matches||window.navigator.standalone===!0;i(T)},_=()=>a(!0),S=()=>a(!1),b=async()=>{if("serviceWorker"in navigator)try{const T=await navigator.serviceWorker.register("/sw.js",{type:"module",scope:"/"});f(T),T.addEventListener("updatefound",()=>{const E=T.installing;E&&E.addEventListener("statechange",()=>{E.state==="installed"&&navigator.serviceWorker.controller&&d(!0)})}),navigator.serviceWorker.addEventListener("message",E=>{E.data&&E.data.type==="SKIP_WAITING"&&window.location.reload()})}catch(T){console.error("Service Worker registration failed:",T)}};return window.addEventListener("online",_),window.addEventListener("offline",S),y(),b(),()=>{window.removeEventListener("online",_),window.removeEventListener("offline",S)}},[]);const v={isOnline:s,isInstalled:n,updateAvailable:c,updateApp:()=>{h&&h.waiting&&h.waiting.postMessage({type:"SKIP_WAITING"})},dismissUpdate:()=>{d(!1)},registration:h};return e.jsx(hA.Provider,{value:v,children:t})},EG=({...t})=>{const{theme:s="system"}=Bj();return e.jsx(iD,{theme:s,className:"toaster group",position:"top-center",toastOptions:{style:{background:"#000000",color:"#ffffff",border:"1px solid #10b981"},className:"sonner-toast",success:{style:{background:"#000000",color:"#10b981",border:"1px solid #10b981"},iconTheme:{primary:"#10b981",secondary:"#000000"}},error:{style:{background:"#000000",color:"#ef4444",border:"1px solid #ef4444"}},warning:{style:{background:"#000000",color:"#f59e0b",border:"1px solid #f59e0b"}},info:{style:{background:"#000000",color:"#10b981",border:"1px solid #10b981"}}},limit:1,...t})};class AG extends At.Component{constructor(s){super(s),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(s){return{hasError:!0}}componentDidCatch(s,a){console.error("Error caught by boundary:",s,a),this.setState({error:s,errorInfo:a})}handleReload=()=>{window.location.reload()};handleReset=()=>{this.setState({hasError:!1,error:null,errorInfo:null})};render(){return this.state.hasError?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background p-4",children:e.jsxs(se,{className:"w-full max-w-md",children:[e.jsxs(_e,{className:"text-center",children:[e.jsx("div",{className:"mx-auto mb-4 flex h-12 w-12 items-center justify-center rounded-full bg-red-100 dark:bg-red-900/20",children:e.jsx(mr,{className:"h-6 w-6 text-red-600 dark:text-red-400"})}),e.jsx(Te,{className:"text-xl",children:"Something went wrong"}),e.jsx(vt,{children:"An unexpected error occurred. Please try refreshing the page."})]}),e.jsxs(oe,{className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs(I,{onClick:this.handleReload,className:"w-full",children:[e.jsx(Cs,{className:"mr-2 h-4 w-4"}),"Refresh Page"]}),e.jsx(I,{onClick:this.handleReset,variant:"outline",className:"w-full",children:"Try Again"})]}),!1]})]})}):this.props.children}}const DG=()=>{const[t,s]=N.useState(null),[a,n]=N.useState(!1),[i,c]=N.useState(navigator.onLine),[d,h]=N.useState(!1);N.useEffect(()=>{const p=()=>{(window.matchMedia("(display-mode: standalone)").matches||window.navigator.standalone===!0)&&h(!0)},v=b=>{b.preventDefault(),s(b);const T=localStorage.getItem("pwa-install-dismissed"),E=new Date().getTime(),A=1440*60*1e3;(!T||E-parseInt(T)>A*7)&&n(!0)},y=()=>c(!0),_=()=>c(!1),S=()=>{h(!0),n(!1),s(null)};return window.addEventListener("beforeinstallprompt",v),window.addEventListener("appinstalled",S),window.addEventListener("online",y),window.addEventListener("offline",_),p(),()=>{window.removeEventListener("beforeinstallprompt",v),window.removeEventListener("appinstalled",S),window.removeEventListener("online",y),window.removeEventListener("offline",_)}},[]);const f=async()=>{if(t)try{t.prompt();const{outcome:p}=await t.userChoice;p==="accepted"?console.log("User accepted the install prompt"):(console.log("User dismissed the install prompt"),localStorage.setItem("pwa-install-dismissed",new Date().getTime().toString())),s(null),n(!1)}catch(p){console.error("Error during PWA installation:",p)}},g=()=>{n(!1),localStorage.setItem("pwa-install-dismissed",new Date().getTime().toString())};return d?null:e.jsxs(e.Fragment,{children:[!i&&e.jsx("div",{className:"fixed top-0 left-0 right-0 z-50 bg-yellow-500 text-black px-4 py-2 text-center text-sm font-medium",children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(Su,{size:16}),e.jsx("span",{children:"You're offline. Some features may be limited."})]})}),a&&t&&e.jsx("div",{className:"fixed bottom-4 left-4 right-4 md:left-auto md:right-4 md:max-w-sm z-40 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg shadow-lg p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"flex-shrink-0 w-10 h-10 bg-black dark:bg-white rounded-lg flex items-center justify-center",children:e.jsx(hn,{className:"w-5 h-5 text-white dark:text-black"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:"Install ominbiz"}),e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-300 mt-1",children:"Install our app for a better experience with offline access and quick launch."}),e.jsxs("div",{className:"flex gap-2 mt-3",children:[e.jsx("button",{onClick:f,className:"flex-1 bg-black dark:bg-white text-white dark:text-black text-xs font-medium py-2 px-3 rounded-md hover:bg-gray-800 dark:hover:bg-gray-100 transition-colors",children:"Install"}),e.jsx("button",{onClick:g,className:"flex-shrink-0 text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200 p-2",children:e.jsx(nr,{size:14})})]})]})]})}),i&&e.jsx("div",{className:"fixed top-4 right-4 z-30 animate-fade-in",children:e.jsxs("div",{className:"bg-green-500 text-white px-3 py-1 rounded-full text-xs font-medium flex items-center gap-1",children:[e.jsx(cp,{size:12}),e.jsx("span",{children:"Online"})]})})]})},PG=()=>{const{updateAvailable:t,updateApp:s,dismissUpdate:a}=TG();return t?e.jsx("div",{className:"fixed top-4 left-4 right-4 md:left-auto md:right-4 md:max-w-sm z-50 bg-blue-600 text-white rounded-lg shadow-lg p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"flex-shrink-0 w-8 h-8 bg-blue-500 rounded-lg flex items-center justify-center",children:e.jsx(Cs,{className:"w-4 h-4"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"text-sm font-semibold",children:"Update Available"}),e.jsx("p",{className:"text-xs opacity-90 mt-1",children:"A new version of ominbiz is available. Update now for the latest features and improvements."}),e.jsxs("div",{className:"flex gap-2 mt-3",children:[e.jsx("button",{onClick:s,className:"flex-1 bg-white text-blue-600 text-xs font-medium py-2 px-3 rounded-md hover:bg-blue-50 transition-colors",children:"Update Now"}),e.jsx("button",{onClick:a,className:"flex-shrink-0 text-white/80 hover:text-white p-2",children:e.jsx(nr,{size:14})})]})]})]})}):null},OG=()=>{const{inviteCode:t}=ol(),s=_n(),{register:a,customer:n,isAuthenticated:i,loading:c}=pd(),[d,h]=N.useState(!1),[f,g]=N.useState(!1),[p,v]=N.useState(!0),[y,_]=N.useState({name:"",email:"",phone:"",password:""}),[S,b]=N.useState({businessName:"Premium Beauty Store",ownerName:"Loading..."});N.useEffect(()=>{t?v(!1):(R.error("No invite code provided"),s("/"))},[t,s]),N.useEffect(()=>{const A=setTimeout(()=>{if(!c&&i&&n){console.log(" Already logged in, redirecting to storefront");const O=t?`/client/store/${t}`:"/client/store";s(O,{replace:!0})}},100);return()=>clearTimeout(A)},[c,i,n,t,s]);const T=A=>{_({...y,[A.target.name]:A.target.value})},E=async A=>{A.preventDefault(),g(!0);try{(await a({...y,inviteCode:t})).success&&(console.log(" Signup component: Registration successful"),R.success(`Welcome! You now have access to ${S.businessName}`),await new Promise(Q=>setTimeout(Q,400)),console.log(" Navigating to storefront after registration"),s(`/client/store/${t}`,{replace:!0}))}catch(O){console.error("Registration error:",O)}finally{g(!1)}};return p||c?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-primary/5 via-background to-accent/5 flex items-center justify-center p-4",children:e.jsx(se,{className:"w-full max-w-md shadow-lg border-primary/10",children:e.jsxs(oe,{className:"pt-6 text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"Loading..."})]})})}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-primary/5 via-background to-accent/5 flex items-center justify-center p-4",children:e.jsxs(se,{className:"w-full max-w-md shadow-lg border-primary/10",children:[e.jsxs(_e,{className:"space-y-4 text-center",children:[e.jsx("div",{className:"mx-auto h-16 w-16 rounded-full bg-primary/10 flex items-center justify-center",children:e.jsx(b1,{className:"h-8 w-8 text-primary"})}),e.jsxs("div",{children:[e.jsx(Te,{className:"text-2xl",children:"You're Invited!"}),e.jsxs(vt,{className:"mt-2",children:[S.ownerName," has invited you to shop at"," ",e.jsx("span",{className:"font-semibold text-foreground",children:S.businessName})]})]})]}),e.jsx(oe,{children:e.jsxs("form",{onSubmit:E,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(ue,{htmlFor:"name",children:"Full Name"}),e.jsxs("div",{className:"relative",children:[e.jsx(Aa,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(we,{id:"name",name:"name",placeholder:"John Doe",value:y.name,onChange:T,className:"pl-10",required:!0})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ue,{htmlFor:"email",children:"Email"}),e.jsxs("div",{className:"relative",children:[e.jsx(fa,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(we,{id:"email",name:"email",type:"email",placeholder:"john@example.com",value:y.email,onChange:T,className:"pl-10",required:!0})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ue,{htmlFor:"phone",children:"Phone Number"}),e.jsxs("div",{className:"relative",children:[e.jsx(ia,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(we,{id:"phone",name:"phone",type:"tel",placeholder:"+254 712 345 678",value:y.phone,onChange:T,className:"pl-10",required:!0})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ue,{htmlFor:"password",children:"Create Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(sr,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(we,{id:"password",name:"password",type:d?"text":"password",placeholder:"",value:y.password,onChange:T,className:"pl-10 pr-10",required:!0}),e.jsx("button",{type:"button",onClick:()=>h(!d),className:"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground transition-colors",children:d?e.jsx(od,{className:"h-4 w-4"}):e.jsx(Pa,{className:"h-4 w-4"})})]})]}),e.jsx(I,{type:"submit",className:"w-full gap-2",disabled:f,children:f?"Creating Account...":e.jsxs(e.Fragment,{children:[e.jsx(b1,{className:"h-4 w-4"}),"Join Store"]})}),e.jsxs("p",{className:"text-xs text-center text-muted-foreground",children:["By signing up, you agree to our"," ",e.jsx("a",{href:"#",className:"text-primary hover:underline",children:"Terms"})," ","and"," ",e.jsx("a",{href:"#",className:"text-primary hover:underline",children:"Privacy Policy"})]}),e.jsxs("div",{className:"text-xs text-center text-muted-foreground",children:["Already have an account?"," ",e.jsxs(is,{to:`/client/login/${t}`,className:"text-primary hover:underline inline-flex items-center gap-1 ml-1",children:[e.jsx(aj,{className:"h-3 w-3"}),"Log in"]})]}),e.jsx("div",{className:"pt-4 border-t",children:e.jsxs("p",{className:"text-xs text-center text-muted-foreground",children:[e.jsx(sr,{className:"inline h-4 w-4 mr-1"})," Secure & Private  Only ",S.ownerName," can see your orders"]})})]})})]})})};function zy({...t}){return e.jsx(n5,{"data-slot":"sheet",...t})}function Uy({...t}){return e.jsx(r5,{"data-slot":"sheet-trigger",...t})}function MG({...t}){return e.jsx(d5,{"data-slot":"sheet-portal",...t})}function RG({className:t,...s}){return e.jsx(u5,{"data-slot":"sheet-overlay",className:ut("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",t),...s})}function Vy({className:t,children:s,side:a="right",...n}){return e.jsxs(MG,{children:[e.jsx(RG,{}),e.jsxs(i5,{"data-slot":"sheet-content",className:ut("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out fixed z-50 flex flex-col gap-4 shadow-lg transition ease-in-out data-[state=closed]:duration-300 data-[state=open]:duration-500",a==="right"&&"data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right inset-y-0 right-0 h-full w-3/4 border-l sm:max-w-sm",a==="left"&&"data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left inset-y-0 left-0 h-full w-3/4 border-r sm:max-w-sm",a==="top"&&"data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top inset-x-0 top-0 h-auto border-b",a==="bottom"&&"data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom inset-x-0 bottom-0 h-auto border-t",t),...n,children:[s,e.jsxs(o5,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-secondary absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none",children:[e.jsx(nr,{className:"size-4"}),e.jsx("span",{className:"sr-only",children:"Close"})]})]})]})}function Hy({className:t,...s}){return e.jsx("div",{"data-slot":"sheet-header",className:ut("flex flex-col gap-1.5 p-4",t),...s})}function $y({className:t,...s}){return e.jsx(l5,{"data-slot":"sheet-title",className:ut("text-foreground font-semibold",t),...s})}function Wy({className:t,...s}){return e.jsx(c5,{"data-slot":"sheet-description",className:ut("text-muted-foreground text-sm",t),...s})}const LG=({product:t,open:s,onClose:a,onAddToCart:n})=>{const[i,c]=N.useState(1),[d,h]=N.useState(!1);if(!t)return null;const f=t.rating||4.5,g=t.reviews?.length||12;return e.jsx(Gt,{open:s,onOpenChange:a,children:e.jsxs(qt,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsx(Kt,{children:e.jsx(Yt,{className:"sr-only",children:t.name})}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"aspect-square bg-gradient-to-br from-secondary/30 to-primary/10 rounded-xl flex items-center justify-center overflow-hidden",children:e.jsx(cs,{className:"h-32 w-32 text-primary/40"})}),e.jsx("div",{className:"grid grid-cols-4 gap-2",children:[1,2,3,4].map(p=>e.jsx("div",{className:"aspect-square bg-muted rounded-lg flex items-center justify-center",children:e.jsx(cs,{className:"h-8 w-8 text-muted-foreground"})},p))})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsx("h2",{className:"text-2xl font-bold text-foreground",children:t.name}),e.jsx(I,{variant:"ghost",size:"icon",onClick:()=>h(!d),className:"text-muted-foreground hover:text-primary",children:e.jsx(Zo,{className:`h-5 w-5 ${d?"fill-primary text-primary":""}`})})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx("div",{className:"flex items-center",children:[...Array(5)].map((p,v)=>e.jsx(Dn,{className:`h-4 w-4 ${v<Math.floor(f)?"fill-warning text-warning":"text-muted-foreground"}`},v))}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[f," (",g," reviews)"]})]}),e.jsxs("p",{className:"text-3xl font-bold text-primary",children:["KES ",(Number(t.price)||0).toFixed(2)]})]}),e.jsx(bi,{}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-2 text-foreground",children:"Description"}),e.jsx("p",{className:"text-muted-foreground",children:t.description})]}),t.specs&&t.specs.length>0&&e.jsxs(e.Fragment,{children:[e.jsx(bi,{}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-2 text-foreground",children:"Specifications"}),e.jsx("ul",{className:"space-y-1",children:t.specs.map((p,v)=>e.jsxs("li",{className:"text-sm text-muted-foreground flex items-center gap-2",children:[e.jsx("span",{className:"h-1.5 w-1.5 rounded-full bg-primary"}),p]},v))})]})]}),e.jsx(bi,{}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(cs,{className:"h-4 w-4 text-success"}),e.jsx("span",{className:(t.stockQuantity||t.stock||0)>10?"text-success":"text-warning",children:(t.stockQuantity||t.stock||0)>10?"In Stock":`Only ${t.stockQuantity||t.stock||0} left`})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[e.jsx(Mu,{className:"h-4 w-4"}),e.jsx("span",{children:"Free delivery on orders over KES 1,000"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[e.jsx(_a,{className:"h-4 w-4"}),e.jsx("span",{children:"Secure payment & 7-day return policy"})]})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsxs("div",{className:"flex items-center border border-border rounded-lg",children:[e.jsx(I,{variant:"ghost",size:"sm",onClick:()=>c(Math.max(1,i-1)),className:"rounded-r-none",children:"-"}),e.jsx("span",{className:"px-4 font-semibold",children:i}),e.jsx(I,{variant:"ghost",size:"sm",onClick:()=>c(Math.min(t.stockQuantity||t.stock||0,i+1)),className:"rounded-l-none",children:"+"})]}),e.jsxs(I,{className:"flex-1 gap-2",onClick:()=>{for(let p=0;p<i;p++)n(t);a()},disabled:(t.stockQuantity||t.stock||0)===0,children:[e.jsx(Bs,{className:"h-4 w-4"}),"Add to Cart"]})]})]})]}),t.reviews&&t.reviews.length>0&&e.jsxs(e.Fragment,{children:[e.jsx(bi,{className:"my-6"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold mb-4 text-foreground",children:"Customer Reviews"}),e.jsx("div",{className:"space-y-4",children:t.reviews.slice(0,3).map(p=>e.jsxs("div",{className:"border border-border rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"h-8 w-8 rounded-full bg-primary/10 flex items-center justify-center",children:e.jsx("span",{className:"text-sm font-semibold text-primary",children:p.author.charAt(0)})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-sm text-foreground",children:p.author}),e.jsx("p",{className:"text-xs text-muted-foreground",children:p.date})]})]}),e.jsx("div",{className:"flex items-center",children:[...Array(5)].map((v,y)=>e.jsx(Dn,{className:`h-3 w-3 ${y<p.rating?"fill-warning text-warning":"text-muted-foreground"}`},y))})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:p.comment})]},p.id))})]})]})]})})},IG=1,FG=1e6;let Fv=0;function BG(){return Fv=(Fv+1)%Number.MAX_SAFE_INTEGER,Fv.toString()}const Bv=new Map,l_=t=>{if(Bv.has(t))return;const s=setTimeout(()=>{Bv.delete(t),Sm({type:"REMOVE_TOAST",toastId:t})},FG);Bv.set(t,s)},zG=(t,s)=>{switch(s.type){case"ADD_TOAST":return{...t,toasts:[s.toast,...t.toasts].slice(0,IG)};case"UPDATE_TOAST":return{...t,toasts:t.toasts.map(a=>a.id===s.toast.id?{...a,...s.toast}:a)};case"DISMISS_TOAST":{const{toastId:a}=s;return a?l_(a):t.toasts.forEach(n=>{l_(n.id)}),{...t,toasts:t.toasts.map(n=>n.id===a||a===void 0?{...n,open:!1}:n)}}case"REMOVE_TOAST":return s.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(a=>a.id!==s.toastId)}}},ap=[];let np={toasts:[]};function Sm(t){np=zG(np,t),ap.forEach(s=>{s(np)})}function UG(t){const s=BG(),a=i=>Sm({type:"UPDATE_TOAST",toast:{...i,id:s}}),n=()=>Sm({type:"DISMISS_TOAST",toastId:s});return Sm({type:"ADD_TOAST",toast:{...t,id:s,open:!0,onOpenChange:i=>{i||n()}}}),{id:s,dismiss:n,update:a}}function mA(){const[t,s]=N.useState(np);return N.useEffect(()=>(ap.push(s),()=>{const a=ap.indexOf(s);a>-1&&ap.splice(a,1)}),[t]),{...t,toast:UG,dismiss:a=>Sm({type:"DISMISS_TOAST",toastId:a})}}const VG=({open:t,onClose:s,cartItems:a,cartTotal:n,onClearCart:i})=>{const{toast:c}=mA(),{inviteCode:d}=ol(),[h,f]=N.useState(1),[g,p]=N.useState(""),[v,y]=N.useState(!1),[_,S]=N.useState("cash"),[b,T]=N.useState("mpesa"),[E,A]=N.useState({name:"",email:"",phone:"",address:"",city:""}),O=M=>{A({...E,[M.target.name]:M.target.value})},Q=async(M=null)=>{try{const P=`ORD-${Date.now()}-${Math.floor(Math.random()*1e3)}`,G={orderId:P,customer:{name:E.name,email:E.email,phone:E.phone},items:a.map(he=>({product:he._id||he.id,name:he.name,price:he.price,quantity:he.quantity,currency:he.currency||"USD",image:he.image||null})),subtotal:n,total:n,status:_==="cash"||_==="dollar"?"Submitted":"Processing",paymentStatus:M?"Paid":"Pending",deliveryInfo:{address:E.address,city:E.city,method:"delivery",contactPerson:E.name,contactPhone:E.phone},paymentMethod:_,paymentDetails:M||{method:_},orderType:"standard",priority:"medium"},K=localStorage.getItem("customerToken"),z=d||window.location.pathname.split("/").filter(Boolean).pop();if(!z)throw new Error("Store invite code is missing. Please refresh the page and try again.");let J;const W=K?{Authorization:`Bearer ${K}`}:{};return J=await ke.post("/public/orders",{...G,inviteCode:z},{headers:W}),console.log(" Order created successfully:",J.data),{success:!0,orderNum:P,order:J.data}}catch(P){return console.error(" Error creating order:",P),{success:!1,error:P.response?.data?.message||P.message||"Failed to create order. Please try again."}}},q=async M=>{y(!0);const P=await Q(M);y(!1),P.success?(p(P.orderNum),c({title:"Payment & Order Successful!",description:`Your order #${P.orderNum} has been confirmed and saved.`}),i(),f(4)):c({title:"Order Creation Failed",description:P.error,variant:"destructive"})},U=M=>{y(!1),c({title:"Payment Failed",description:M?.message||"Payment could not be processed. Please try again.",variant:"destructive"})},D=()=>{f(1),A({name:"",email:"",phone:"",address:"",city:""}),p(""),y(!1),s()};return e.jsx(Gt,{open:t,onOpenChange:D,children:e.jsxs(qt,{className:"max-w-2xl max-h-[90vh] overflow-y-auto glass-panel",children:[e.jsx(Kt,{children:e.jsx(Yt,{children:"Checkout"})}),e.jsx("div",{className:"flex items-center justify-between mb-6",children:["Cart","Details","Payment","Done"].map((M,P)=>e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`h-8 w-8 rounded-full flex items-center justify-center text-sm font-semibold ${h>P+1?"bg-success text-success-foreground":h===P+1?"bg-primary text-primary-foreground":"bg-muted text-muted-foreground"}`,children:h>P+1?"":P+1}),P<3&&e.jsx("div",{className:`h-1 w-12 mx-2 ${h>P+1?"bg-success":"bg-muted"}`})]},M))}),h===1&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"font-semibold text-foreground",children:"Review Your Order"}),e.jsx("div",{className:"space-y-3",children:a.map(M=>e.jsxs("div",{className:"flex justify-between items-center p-3 bg-secondary/20 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-foreground",children:M.name}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Quantity: ",M.quantity]})]}),e.jsxs("p",{className:"font-semibold text-primary",children:["KES ",(M.price*M.quantity).toFixed(2)]})]},M.id))}),e.jsx(bi,{}),e.jsxs("div",{className:"flex justify-between text-lg font-bold",children:[e.jsx("span",{className:"text-foreground",children:"Total:"}),e.jsxs("span",{className:"text-primary",children:["KES ",n.toFixed(2)]})]}),e.jsx(I,{className:"w-full",onClick:()=>f(2),children:"Continue to Details"})]}),h===2&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"font-semibold text-foreground",children:"Delivery Details"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(ue,{htmlFor:"name",className:"flex items-center gap-2",children:[e.jsx(Aa,{className:"h-4 w-4"}),"Full Name"]}),e.jsx(we,{id:"name",name:"name",value:E.name,onChange:O,placeholder:"John Doe",required:!0})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(ue,{htmlFor:"email",className:"flex items-center gap-2",children:[e.jsx(fa,{className:"h-4 w-4"}),"Email"]}),e.jsx(we,{id:"email",name:"email",type:"email",value:E.email,onChange:O,placeholder:"john@example.com",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(ue,{htmlFor:"phone",className:"flex items-center gap-2",children:[e.jsx(ia,{className:"h-4 w-4"}),"Phone"]}),e.jsx(we,{id:"phone",name:"phone",value:E.phone,onChange:O,placeholder:"+254 700 000000",required:!0})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(ue,{htmlFor:"address",className:"flex items-center gap-2",children:[e.jsx(Fr,{className:"h-4 w-4"}),"Delivery Address"]}),e.jsx(we,{id:"address",name:"address",value:E.address,onChange:O,placeholder:"123 Main Street, Apartment 4B",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ue,{htmlFor:"city",children:"City"}),e.jsx(we,{id:"city",name:"city",value:E.city,onChange:O,placeholder:"Nairobi",required:!0})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(I,{variant:"outline",className:"flex-1",onClick:()=>f(1),children:"Back"}),e.jsx(I,{className:"flex-1",onClick:()=>{if(!E.name||!E.email||!E.phone||!E.address||!E.city){c({title:"Missing Information",description:"Please fill in all required fields before continuing.",variant:"destructive"});return}f(3)},children:"Continue to Payment"})]})]}),h===3&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"font-semibold text-foreground",children:"Complete Payment"}),e.jsxs("div",{className:"bg-secondary/20 p-4 rounded-lg space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Subtotal"}),e.jsxs("span",{className:"text-foreground",children:["KES ",n.toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Delivery Fee"}),e.jsx("span",{className:"text-success",children:"Free"})]}),e.jsx(bi,{}),e.jsxs("div",{className:"flex justify-between font-bold text-lg",children:[e.jsx("span",{className:"text-foreground",children:"Total"}),e.jsxs("span",{className:"text-primary",children:["KES ",n.toFixed(2)]})]})]}),e.jsxs("div",{className:"bg-muted/50 p-4 rounded-lg space-y-2",children:[e.jsxs("h4",{className:"font-semibold text-sm flex items-center gap-2",children:[e.jsx(Aa,{className:"h-4 w-4"}),"Delivery Details"]}),e.jsxs("div",{className:"text-sm text-muted-foreground space-y-1",children:[e.jsx("p",{children:E.name}),e.jsx("p",{children:E.email}),e.jsx("p",{children:E.phone}),e.jsxs("p",{children:[E.address,", ",E.city]})]})]}),e.jsxs("div",{className:"flex items-start gap-2 p-3 bg-blue-50 dark:bg-blue-950/20 border border-blue-200 dark:border-blue-900 rounded-lg",children:[e.jsx(Ws,{className:"h-5 w-5 text-blue-600 dark:text-blue-400 mt-0.5"}),e.jsxs("div",{className:"text-sm text-blue-600 dark:text-blue-400",children:[e.jsx("p",{className:"font-semibold",children:"Secure Payment"}),e.jsx("p",{className:"text-xs",children:"Click below to choose your payment method. You can pay via M-Pesa or credit/debit card."})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-semibold",children:"Choose Payment Method"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("button",{onClick:()=>S("cash"),className:`p-4 rounded-xl border-2 transition-all ${_==="cash"?"border-green-600 bg-green-50 dark:bg-green-950/20":"border-border hover:border-green-300"}`,children:[e.jsx(Uu,{className:"h-8 w-8 mx-auto mb-2 text-green-600"}),e.jsx("div",{className:"font-semibold",children:"Cash on Delivery"}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Pay when you receive"})]}),e.jsxs("button",{onClick:()=>S("paynow"),className:`p-4 rounded-xl border-2 transition-all ${_==="paynow"?"border-blue-600 bg-blue-50 dark:bg-blue-950/20":"border-border hover:border-blue-300"}`,children:[e.jsx(Ba,{className:"h-8 w-8 mx-auto mb-2 text-blue-600"}),e.jsx("div",{className:"font-semibold",children:"Pay Now"}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"M-Pesa or PayPal"})]})]})]}),_==="paynow"&&e.jsxs("div",{className:"space-y-3 animate-in fade-in slide-in-from-top-2",children:[e.jsx("h4",{className:"font-semibold text-sm",children:"Select Payment Gateway"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("button",{onClick:()=>T("mpesa"),className:`p-3 rounded-lg border-2 transition-all ${b==="mpesa"?"border-green-600 bg-green-50 dark:bg-green-950/20":"border-border hover:border-green-300"}`,children:[e.jsx(Lr,{className:"h-6 w-6 mx-auto mb-1 text-green-600"}),e.jsx("div",{className:"font-semibold text-sm",children:"M-Pesa"}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Safaricom STK Push"})]}),e.jsxs("button",{onClick:()=>T("paypal"),className:`p-3 rounded-lg border-2 transition-all ${b==="paypal"?"border-blue-600 bg-blue-50 dark:bg-blue-950/20":"border-border hover:border-blue-300"}`,children:[e.jsx(cd,{className:"h-6 w-6 mx-auto mb-1 text-blue-600"}),e.jsx("div",{className:"font-semibold text-sm",children:"PayPal"}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Cards & PayPal"})]})]})]}),_==="paynow"?e.jsx("div",{className:"flex flex-col items-center justify-center gap-4 py-4",children:e.jsx(dk,{amount:n,description:`Order for ${a.length} items from store`,currency:"KES",onSuccess:q,onError:U,triggerText:"Proceed to Payment",showMpesa:b==="mpesa",showPaypal:b==="paypal",disabled:v||!E.name||!E.email||!E.phone})}):_==="cash"&&e.jsx(I,{className:"w-full h-12 text-lg font-bold",onClick:async()=>{if(!E.name||!E.email||!E.phone||!E.address||!E.city){c({title:"Missing Information",description:"Please go back and fill in all delivery details.",variant:"destructive"});return}y(!0);const M=await Q();y(!1),M.success?(p(M.orderNum),c({title:"Order Placed!",description:`Your order #${M.orderNum} has been confirmed. Payment method: Cash on Delivery.`}),i(),f(4)):c({title:"Order Failed",description:M.error,variant:"destructive"})},disabled:v,children:v?"Processing...":"Place Order (Cash on Delivery)"}),e.jsx("div",{className:"flex gap-3",children:e.jsx(I,{variant:"outline",className:"flex-1",onClick:()=>f(2),disabled:v,children:"Back"})})]}),h===4&&e.jsxs("div",{className:"text-center space-y-4 py-8",children:[e.jsx("div",{className:"h-16 w-16 mx-auto bg-success/10 rounded-full flex items-center justify-center",children:e.jsx(Xi,{className:"h-10 w-10 text-success"})}),e.jsx("h3",{className:"text-2xl font-bold text-foreground",children:"Order Confirmed!"}),e.jsx("p",{className:"text-muted-foreground",children:"Thank you for your order. We'll send you a confirmation email with tracking details shortly."}),e.jsx(I,{className:"w-full",onClick:D,children:"Continue Shopping"})]})]})})};function HG(t,s,a="long"){return new Intl.DateTimeFormat("en-US",{hour:"numeric",timeZone:t,timeZoneName:a}).format(s).split(/\s/g).slice(2).join(" ")}const $G={},um={};function ed(t,s){try{const n=($G[t]||=new Intl.DateTimeFormat("en-US",{timeZone:t,timeZoneName:"longOffset"}).format)(s).split("GMT")[1];return n in um?um[n]:c_(n,n.split(":"))}catch{if(t in um)return um[t];const a=t?.match(WG);return a?c_(t,a.slice(1)):NaN}}const WG=/([+-]\d\d):?(\d\d)?/;function c_(t,s){const a=+(s[0]||0),n=+(s[1]||0),i=+(s[2]||0)/60;return um[t]=a*60+n>0?a*60+n+i:a*60-n-i}class yo extends Date{constructor(...s){super(),s.length>1&&typeof s[s.length-1]=="string"&&(this.timeZone=s.pop()),this.internal=new Date,isNaN(ed(this.timeZone,this))?this.setTime(NaN):s.length?typeof s[0]=="number"&&(s.length===1||s.length===2&&typeof s[1]!="number")?this.setTime(s[0]):typeof s[0]=="string"?this.setTime(+new Date(s[0])):s[0]instanceof Date?this.setTime(+s[0]):(this.setTime(+new Date(...s)),fA(this),Gy(this)):this.setTime(Date.now())}static tz(s,...a){return a.length?new yo(...a,s):new yo(Date.now(),s)}withTimeZone(s){return new yo(+this,s)}getTimezoneOffset(){const s=-ed(this.timeZone,this);return s>0?Math.floor(s):Math.ceil(s)}setTime(s){return Date.prototype.setTime.apply(this,arguments),Gy(this),+this}[Symbol.for("constructDateFrom")](s){return new yo(+new Date(s),this.timeZone)}}const d_=/^(get|set)(?!UTC)/;Object.getOwnPropertyNames(Date.prototype).forEach(t=>{if(!d_.test(t))return;const s=t.replace(d_,"$1UTC");yo.prototype[s]&&(t.startsWith("get")?yo.prototype[t]=function(){return this.internal[s]()}:(yo.prototype[t]=function(){return Date.prototype[s].apply(this.internal,arguments),GG(this),+this},yo.prototype[s]=function(){return Date.prototype[s].apply(this,arguments),Gy(this),+this}))});function Gy(t){t.internal.setTime(+t),t.internal.setUTCSeconds(t.internal.getUTCSeconds()-Math.round(-ed(t.timeZone,t)*60))}function GG(t){Date.prototype.setFullYear.call(t,t.internal.getUTCFullYear(),t.internal.getUTCMonth(),t.internal.getUTCDate()),Date.prototype.setHours.call(t,t.internal.getUTCHours(),t.internal.getUTCMinutes(),t.internal.getUTCSeconds(),t.internal.getUTCMilliseconds()),fA(t)}function fA(t){const s=ed(t.timeZone,t),a=s>0?Math.floor(s):Math.ceil(s),n=new Date(+t);n.setUTCHours(n.getUTCHours()-1);const i=-new Date(+t).getTimezoneOffset(),c=-new Date(+n).getTimezoneOffset(),d=i-c,h=Date.prototype.getHours.apply(t)!==t.internal.getUTCHours();d&&h&&t.internal.setUTCMinutes(t.internal.getUTCMinutes()+d);const f=i-a;f&&Date.prototype.setUTCMinutes.call(t,Date.prototype.getUTCMinutes.call(t)+f);const g=new Date(+t);g.setUTCSeconds(0);const p=i>0?g.getSeconds():(g.getSeconds()-60)%60,v=Math.round(-(ed(t.timeZone,t)*60))%60;(v||p)&&(t.internal.setUTCSeconds(t.internal.getUTCSeconds()+v),Date.prototype.setUTCSeconds.call(t,Date.prototype.getUTCSeconds.call(t)+v+p));const y=ed(t.timeZone,t),_=y>0?Math.floor(y):Math.ceil(y),b=-new Date(+t).getTimezoneOffset()-_,T=_!==a,E=b-f;if(T&&E){Date.prototype.setUTCMinutes.call(t,Date.prototype.getUTCMinutes.call(t)+E);const A=ed(t.timeZone,t),O=A>0?Math.floor(A):Math.ceil(A),Q=_-O;Q&&(t.internal.setUTCMinutes(t.internal.getUTCMinutes()+Q),Date.prototype.setUTCMinutes.call(t,Date.prototype.getUTCMinutes.call(t)+Q))}}class lr extends yo{static tz(s,...a){return a.length?new lr(...a,s):new lr(Date.now(),s)}toISOString(){const[s,a,n]=this.tzComponents(),i=`${s}${a}:${n}`;return this.internal.toISOString().slice(0,-1)+i}toString(){return`${this.toDateString()} ${this.toTimeString()}`}toDateString(){const[s,a,n,i]=this.internal.toUTCString().split(" ");return`${s?.slice(0,-1)} ${n} ${a} ${i}`}toTimeString(){const s=this.internal.toUTCString().split(" ")[4],[a,n,i]=this.tzComponents();return`${s} GMT${a}${n}${i} (${HG(this.timeZone,this)})`}toLocaleString(s,a){return Date.prototype.toLocaleString.call(this,s,{...a,timeZone:a?.timeZone||this.timeZone})}toLocaleDateString(s,a){return Date.prototype.toLocaleDateString.call(this,s,{...a,timeZone:a?.timeZone||this.timeZone})}toLocaleTimeString(s,a){return Date.prototype.toLocaleTimeString.call(this,s,{...a,timeZone:a?.timeZone||this.timeZone})}tzComponents(){const s=this.getTimezoneOffset(),a=s>0?"-":"+",n=String(Math.floor(Math.abs(s)/60)).padStart(2,"0"),i=String(Math.abs(s)%60).padStart(2,"0");return[a,n,i]}withTimeZone(s){return new lr(+this,s)}[Symbol.for("constructDateFrom")](s){return new lr(+new Date(s),this.timeZone)}}const u_=5,qG=4;function KG(t,s){const a=s.startOfMonth(t),n=a.getDay()>0?a.getDay():7,i=s.addDays(t,-n+1),c=s.addDays(i,u_*7-1);return s.getMonth(t)===s.getMonth(c)?u_:qG}function xA(t,s){const a=s.startOfMonth(t),n=a.getDay();return n===1?a:n===0?s.addDays(a,-6):s.addDays(a,-1*(n-1))}function YG(t,s){const a=xA(t,s),n=KG(t,s);return s.addDays(a,n*7-1)}class ri{constructor(s,a){this.Date=Date,this.today=()=>this.overrides?.today?this.overrides.today():this.options.timeZone?lr.tz(this.options.timeZone):new this.Date,this.newDate=(n,i,c)=>this.overrides?.newDate?this.overrides.newDate(n,i,c):this.options.timeZone?new lr(n,i,c,this.options.timeZone):new Date(n,i,c),this.addDays=(n,i)=>this.overrides?.addDays?this.overrides.addDays(n,i):oD(n,i),this.addMonths=(n,i)=>this.overrides?.addMonths?this.overrides.addMonths(n,i):lD(n,i),this.addWeeks=(n,i)=>this.overrides?.addWeeks?this.overrides.addWeeks(n,i):cD(n,i),this.addYears=(n,i)=>this.overrides?.addYears?this.overrides.addYears(n,i):dD(n,i),this.differenceInCalendarDays=(n,i)=>this.overrides?.differenceInCalendarDays?this.overrides.differenceInCalendarDays(n,i):uD(n,i),this.differenceInCalendarMonths=(n,i)=>this.overrides?.differenceInCalendarMonths?this.overrides.differenceInCalendarMonths(n,i):hD(n,i),this.eachMonthOfInterval=n=>this.overrides?.eachMonthOfInterval?this.overrides.eachMonthOfInterval(n):mD(n),this.eachYearOfInterval=n=>{const i=this.overrides?.eachYearOfInterval?this.overrides.eachYearOfInterval(n):fD(n),c=new Set(i.map(h=>this.getYear(h)));if(c.size===i.length)return i;const d=[];return c.forEach(h=>{d.push(new Date(h,0,1))}),d},this.endOfBroadcastWeek=n=>this.overrides?.endOfBroadcastWeek?this.overrides.endOfBroadcastWeek(n):YG(n,this),this.endOfISOWeek=n=>this.overrides?.endOfISOWeek?this.overrides.endOfISOWeek(n):xD(n),this.endOfMonth=n=>this.overrides?.endOfMonth?this.overrides.endOfMonth(n):pD(n),this.endOfWeek=(n,i)=>this.overrides?.endOfWeek?this.overrides.endOfWeek(n,i):gD(n,this.options),this.endOfYear=n=>this.overrides?.endOfYear?this.overrides.endOfYear(n):vD(n),this.format=(n,i,c)=>{const d=this.overrides?.format?this.overrides.format(n,i,this.options):Yv(n,i,this.options);return this.options.numerals&&this.options.numerals!=="latn"?this.replaceDigits(d):d},this.getISOWeek=n=>this.overrides?.getISOWeek?this.overrides.getISOWeek(n):yD(n),this.getMonth=(n,i)=>this.overrides?.getMonth?this.overrides.getMonth(n,this.options):jD(n,this.options),this.getYear=(n,i)=>this.overrides?.getYear?this.overrides.getYear(n,this.options):ND(n,this.options),this.getWeek=(n,i)=>this.overrides?.getWeek?this.overrides.getWeek(n,this.options):wD(n,this.options),this.isAfter=(n,i)=>this.overrides?.isAfter?this.overrides.isAfter(n,i):bD(n,i),this.isBefore=(n,i)=>this.overrides?.isBefore?this.overrides.isBefore(n,i):SD(n,i),this.isDate=n=>this.overrides?.isDate?this.overrides.isDate(n):_D(n),this.isSameDay=(n,i)=>this.overrides?.isSameDay?this.overrides.isSameDay(n,i):CD(n,i),this.isSameMonth=(n,i)=>this.overrides?.isSameMonth?this.overrides.isSameMonth(n,i):TD(n,i),this.isSameYear=(n,i)=>this.overrides?.isSameYear?this.overrides.isSameYear(n,i):kD(n,i),this.max=n=>this.overrides?.max?this.overrides.max(n):ED(n),this.min=n=>this.overrides?.min?this.overrides.min(n):AD(n),this.setMonth=(n,i)=>this.overrides?.setMonth?this.overrides.setMonth(n,i):DD(n,i),this.setYear=(n,i)=>this.overrides?.setYear?this.overrides.setYear(n,i):PD(n,i),this.startOfBroadcastWeek=(n,i)=>this.overrides?.startOfBroadcastWeek?this.overrides.startOfBroadcastWeek(n,this):xA(n,this),this.startOfDay=n=>this.overrides?.startOfDay?this.overrides.startOfDay(n):OD(n),this.startOfISOWeek=n=>this.overrides?.startOfISOWeek?this.overrides.startOfISOWeek(n):MD(n),this.startOfMonth=n=>this.overrides?.startOfMonth?this.overrides.startOfMonth(n):RD(n),this.startOfWeek=(n,i)=>this.overrides?.startOfWeek?this.overrides.startOfWeek(n,this.options):LD(n,this.options),this.startOfYear=n=>this.overrides?.startOfYear?this.overrides.startOfYear(n):ID(n),this.options={locale:H_,...s},this.overrides=a}getDigitMap(){const{numerals:s="latn"}=this.options,a=new Intl.NumberFormat("en-US",{numberingSystem:s}),n={};for(let i=0;i<10;i++)n[i.toString()]=a.format(i);return n}replaceDigits(s){const a=this.getDigitMap();return s.replace(/\d/g,n=>a[n]||n)}formatNumber(s){return this.replaceDigits(s.toString())}getMonthYearOrder(){const s=this.options.locale?.code;return s&&ri.yearFirstLocales.has(s)?"year-first":"month-first"}formatMonthYear(s){const{locale:a,timeZone:n,numerals:i}=this.options,c=a?.code;if(c&&ri.yearFirstLocales.has(c))try{return new Intl.DateTimeFormat(c,{month:"long",year:"numeric",timeZone:n,numberingSystem:i}).format(s)}catch{}const d=this.getMonthYearOrder()==="year-first"?"y LLLL":"LLLL y";return this.format(s,d)}}ri.yearFirstLocales=new Set(["eu","hu","ja","ja-Hira","ja-JP","ko","ko-KR","lt","lt-LT","lv","lv-LV","mn","mn-MN","zh","zh-CN","zh-HK","zh-TW"]);const ko=new ri;class pA{constructor(s,a,n=ko){this.date=s,this.displayMonth=a,this.outside=!!(a&&!n.isSameMonth(s,a)),this.dateLib=n}isEqualTo(s){return this.dateLib.isSameDay(s.date,this.date)&&this.dateLib.isSameMonth(s.displayMonth,this.displayMonth)}}class ZG{constructor(s,a){this.date=s,this.weeks=a}}class XG{constructor(s,a){this.days=a,this.weekNumber=s}}function QG(t){return At.createElement("button",{...t})}function JG(t){return At.createElement("span",{...t})}function eq(t){const{size:s=24,orientation:a="left",className:n}=t;return At.createElement("svg",{className:n,width:s,height:s,viewBox:"0 0 24 24"},a==="up"&&At.createElement("polygon",{points:"6.77 17 12.5 11.43 18.24 17 20 15.28 12.5 8 5 15.28"}),a==="down"&&At.createElement("polygon",{points:"6.77 8 12.5 13.57 18.24 8 20 9.72 12.5 17 5 9.72"}),a==="left"&&At.createElement("polygon",{points:"16 18.112 9.81111111 12 16 5.87733333 14.0888889 4 6 12 14.0888889 20"}),a==="right"&&At.createElement("polygon",{points:"8 18.112 14.18888889 12 8 5.87733333 9.91111111 4 18 12 9.91111111 20"}))}function tq(t){const{day:s,modifiers:a,...n}=t;return At.createElement("td",{...n})}function sq(t){const{day:s,modifiers:a,...n}=t,i=At.useRef(null);return At.useEffect(()=>{a.focused&&i.current?.focus()},[a.focused]),At.createElement("button",{ref:i,...n})}var as;(function(t){t.Root="root",t.Chevron="chevron",t.Day="day",t.DayButton="day_button",t.CaptionLabel="caption_label",t.Dropdowns="dropdowns",t.Dropdown="dropdown",t.DropdownRoot="dropdown_root",t.Footer="footer",t.MonthGrid="month_grid",t.MonthCaption="month_caption",t.MonthsDropdown="months_dropdown",t.Month="month",t.Months="months",t.Nav="nav",t.NextMonthButton="button_next",t.PreviousMonthButton="button_previous",t.Week="week",t.Weeks="weeks",t.Weekday="weekday",t.Weekdays="weekdays",t.WeekNumber="week_number",t.WeekNumberHeader="week_number_header",t.YearsDropdown="years_dropdown"})(as||(as={}));var Wa;(function(t){t.disabled="disabled",t.hidden="hidden",t.outside="outside",t.focused="focused",t.today="today"})(Wa||(Wa={}));var Wi;(function(t){t.range_end="range_end",t.range_middle="range_middle",t.range_start="range_start",t.selected="selected"})(Wi||(Wi={}));var ei;(function(t){t.weeks_before_enter="weeks_before_enter",t.weeks_before_exit="weeks_before_exit",t.weeks_after_enter="weeks_after_enter",t.weeks_after_exit="weeks_after_exit",t.caption_after_enter="caption_after_enter",t.caption_after_exit="caption_after_exit",t.caption_before_enter="caption_before_enter",t.caption_before_exit="caption_before_exit"})(ei||(ei={}));function aq(t){const{options:s,className:a,components:n,classNames:i,...c}=t,d=[i[as.Dropdown],a].join(" "),h=s?.find(({value:f})=>f===c.value);return At.createElement("span",{"data-disabled":c.disabled,className:i[as.DropdownRoot]},At.createElement(n.Select,{className:d,...c},s?.map(({value:f,label:g,disabled:p})=>At.createElement(n.Option,{key:f,value:f,disabled:p},g))),At.createElement("span",{className:i[as.CaptionLabel],"aria-hidden":!0},h?.label,At.createElement(n.Chevron,{orientation:"down",size:18,className:i[as.Chevron]})))}function nq(t){return At.createElement("div",{...t})}function rq(t){return At.createElement("div",{...t})}function iq(t){const{calendarMonth:s,displayIndex:a,...n}=t;return At.createElement("div",{...n},t.children)}function oq(t){const{calendarMonth:s,displayIndex:a,...n}=t;return At.createElement("div",{...n})}function lq(t){return At.createElement("table",{...t})}function cq(t){return At.createElement("div",{...t})}const gA=N.createContext(void 0);function lf(){const t=N.useContext(gA);if(t===void 0)throw new Error("useDayPicker() must be used within a custom component.");return t}function dq(t){const{components:s}=lf();return At.createElement(s.Dropdown,{...t})}function uq(t){const{onPreviousClick:s,onNextClick:a,previousMonth:n,nextMonth:i,...c}=t,{components:d,classNames:h,labels:{labelPrevious:f,labelNext:g}}=lf(),p=N.useCallback(y=>{i&&a?.(y)},[i,a]),v=N.useCallback(y=>{n&&s?.(y)},[n,s]);return At.createElement("nav",{...c},At.createElement(d.PreviousMonthButton,{type:"button",className:h[as.PreviousMonthButton],tabIndex:n?void 0:-1,"aria-disabled":n?void 0:!0,"aria-label":f(n),onClick:v},At.createElement(d.Chevron,{disabled:n?void 0:!0,className:h[as.Chevron],orientation:"left"})),At.createElement(d.NextMonthButton,{type:"button",className:h[as.NextMonthButton],tabIndex:i?void 0:-1,"aria-disabled":i?void 0:!0,"aria-label":g(i),onClick:p},At.createElement(d.Chevron,{disabled:i?void 0:!0,orientation:"right",className:h[as.Chevron]})))}function hq(t){const{components:s}=lf();return At.createElement(s.Button,{...t})}function mq(t){return At.createElement("option",{...t})}function fq(t){const{components:s}=lf();return At.createElement(s.Button,{...t})}function xq(t){const{rootRef:s,...a}=t;return At.createElement("div",{...a,ref:s})}function pq(t){return At.createElement("select",{...t})}function gq(t){const{week:s,...a}=t;return At.createElement("tr",{...a})}function vq(t){return At.createElement("th",{...t})}function yq(t){return At.createElement("thead",{"aria-hidden":!0},At.createElement("tr",{...t}))}function jq(t){const{week:s,...a}=t;return At.createElement("th",{...a})}function Nq(t){return At.createElement("th",{...t})}function wq(t){return At.createElement("tbody",{...t})}function bq(t){const{components:s}=lf();return At.createElement(s.Dropdown,{...t})}const Sq=Object.freeze(Object.defineProperty({__proto__:null,Button:QG,CaptionLabel:JG,Chevron:eq,Day:tq,DayButton:sq,Dropdown:aq,DropdownNav:nq,Footer:rq,Month:iq,MonthCaption:oq,MonthGrid:lq,Months:cq,MonthsDropdown:dq,Nav:uq,NextMonthButton:hq,Option:mq,PreviousMonthButton:fq,Root:xq,Select:pq,Week:gq,WeekNumber:jq,WeekNumberHeader:Nq,Weekday:vq,Weekdays:yq,Weeks:wq,YearsDropdown:bq},Symbol.toStringTag,{value:"Module"}));function Xo(t,s,a=!1,n=ko){let{from:i,to:c}=t;const{differenceInCalendarDays:d,isSameDay:h}=n;return i&&c?(d(c,i)<0&&([i,c]=[c,i]),d(s,i)>=(a?1:0)&&d(c,s)>=(a?1:0)):!a&&c?h(c,s):!a&&i?h(i,s):!1}function vA(t){return!!(t&&typeof t=="object"&&"before"in t&&"after"in t)}function NN(t){return!!(t&&typeof t=="object"&&"from"in t)}function yA(t){return!!(t&&typeof t=="object"&&"after"in t)}function jA(t){return!!(t&&typeof t=="object"&&"before"in t)}function NA(t){return!!(t&&typeof t=="object"&&"dayOfWeek"in t)}function wA(t,s){return Array.isArray(t)&&t.every(s.isDate)}function Qo(t,s,a=ko){const n=Array.isArray(s)?s:[s],{isSameDay:i,differenceInCalendarDays:c,isAfter:d}=a;return n.some(h=>{if(typeof h=="boolean")return h;if(a.isDate(h))return i(t,h);if(wA(h,a))return h.includes(t);if(NN(h))return Xo(h,t,!1,a);if(NA(h))return Array.isArray(h.dayOfWeek)?h.dayOfWeek.includes(t.getDay()):h.dayOfWeek===t.getDay();if(vA(h)){const f=c(h.before,t),g=c(h.after,t),p=f>0,v=g<0;return d(h.before,h.after)?v&&p:p||v}return yA(h)?c(t,h.after)>0:jA(h)?c(h.before,t)>0:typeof h=="function"?h(t):!1})}function _q(t,s,a,n,i){const{disabled:c,hidden:d,modifiers:h,showOutsideDays:f,broadcastCalendar:g,today:p}=s,{isSameDay:v,isSameMonth:y,startOfMonth:_,isBefore:S,endOfMonth:b,isAfter:T}=i,E=a&&_(a),A=n&&b(n),O={[Wa.focused]:[],[Wa.outside]:[],[Wa.disabled]:[],[Wa.hidden]:[],[Wa.today]:[]},Q={};for(const q of t){const{date:U,displayMonth:D}=q,M=!!(D&&!y(U,D)),P=!!(E&&S(U,E)),G=!!(A&&T(U,A)),K=!!(c&&Qo(U,c,i)),z=!!(d&&Qo(U,d,i))||P||G||!g&&!f&&M||g&&f===!1&&M,J=v(U,p??i.today());M&&O.outside.push(q),K&&O.disabled.push(q),z&&O.hidden.push(q),J&&O.today.push(q),h&&Object.keys(h).forEach(W=>{const he=h?.[W];he&&Qo(U,he,i)&&(Q[W]?Q[W].push(q):Q[W]=[q])})}return q=>{const U={[Wa.focused]:!1,[Wa.disabled]:!1,[Wa.hidden]:!1,[Wa.outside]:!1,[Wa.today]:!1},D={};for(const M in O){const P=O[M];U[M]=P.some(G=>G===q)}for(const M in Q)D[M]=Q[M].some(P=>P===q);return{...U,...D}}}function Cq(t,s,a={}){return Object.entries(t).filter(([,i])=>i===!0).reduce((i,[c])=>(a[c]?i.push(a[c]):s[Wa[c]]?i.push(s[Wa[c]]):s[Wi[c]]&&i.push(s[Wi[c]]),i),[s[as.Day]])}function Tq(t){return{...Sq,...t}}function kq(t){const s={"data-mode":t.mode??void 0,"data-required":"required"in t?t.required:void 0,"data-multiple-months":t.numberOfMonths&&t.numberOfMonths>1||void 0,"data-week-numbers":t.showWeekNumber||void 0,"data-broadcast-calendar":t.broadcastCalendar||void 0,"data-nav-layout":t.navLayout||void 0};return Object.entries(t).forEach(([a,n])=>{a.startsWith("data-")&&(s[a]=n)}),s}function wN(){const t={};for(const s in as)t[as[s]]=`rdp-${as[s]}`;for(const s in Wa)t[Wa[s]]=`rdp-${Wa[s]}`;for(const s in Wi)t[Wi[s]]=`rdp-${Wi[s]}`;for(const s in ei)t[ei[s]]=`rdp-${ei[s]}`;return t}function bA(t,s,a){return(a??new ri(s)).formatMonthYear(t)}const Eq=bA;function Aq(t,s,a){return(a??new ri(s)).format(t,"d")}function Dq(t,s=ko){return s.format(t,"LLLL")}function Pq(t,s,a){return(a??new ri(s)).format(t,"cccccc")}function Oq(t,s=ko){return t<10?s.formatNumber(`0${t.toLocaleString()}`):s.formatNumber(`${t.toLocaleString()}`)}function Mq(){return""}function SA(t,s=ko){return s.format(t,"yyyy")}const Rq=SA,Lq=Object.freeze(Object.defineProperty({__proto__:null,formatCaption:bA,formatDay:Aq,formatMonthCaption:Eq,formatMonthDropdown:Dq,formatWeekNumber:Oq,formatWeekNumberHeader:Mq,formatWeekdayName:Pq,formatYearCaption:Rq,formatYearDropdown:SA},Symbol.toStringTag,{value:"Module"}));function Iq(t){return t?.formatMonthCaption&&!t.formatCaption&&(t.formatCaption=t.formatMonthCaption),t?.formatYearCaption&&!t.formatYearDropdown&&(t.formatYearDropdown=t.formatYearCaption),{...Lq,...t}}function Fq(t,s,a,n,i){const{startOfMonth:c,startOfYear:d,endOfYear:h,eachMonthOfInterval:f,getMonth:g}=i;return f({start:d(t),end:h(t)}).map(y=>{const _=n.formatMonthDropdown(y,i),S=g(y),b=s&&y<c(s)||a&&y>c(a)||!1;return{value:S,label:_,disabled:b}})}function Bq(t,s={},a={}){let n={...s?.[as.Day]};return Object.entries(t).filter(([,i])=>i===!0).forEach(([i])=>{n={...n,...a?.[i]}}),n}function zq(t,s,a){const n=t.today(),i=s?t.startOfISOWeek(n):t.startOfWeek(n),c=[];for(let d=0;d<7;d++){const h=t.addDays(i,d);c.push(h)}return c}function Uq(t,s,a,n,i=!1){if(!t||!s)return;const{startOfYear:c,endOfYear:d,eachYearOfInterval:h,getYear:f}=n,g=c(t),p=d(s),v=h({start:g,end:p});return i&&v.reverse(),v.map(y=>{const _=a.formatYearDropdown(y,n);return{value:f(y),label:_,disabled:!1}})}function _A(t,s,a,n){let i=(n??new ri(a)).format(t,"PPPP");return s.today&&(i=`Today, ${i}`),s.selected&&(i=`${i}, selected`),i}const Vq=_A;function CA(t,s,a){return(a??new ri(s)).formatMonthYear(t)}const Hq=CA;function $q(t,s,a,n){let i=(n??new ri(a)).format(t,"PPPP");return s?.today&&(i=`Today, ${i}`),i}function Wq(t){return"Choose the Month"}function Gq(){return""}function qq(t){return"Go to the Next Month"}function Kq(t){return"Go to the Previous Month"}function Yq(t,s,a){return(a??new ri(s)).format(t,"cccc")}function Zq(t,s){return`Week ${t}`}function Xq(t){return"Week Number"}function Qq(t){return"Choose the Year"}const Jq=Object.freeze(Object.defineProperty({__proto__:null,labelCaption:Hq,labelDay:Vq,labelDayButton:_A,labelGrid:CA,labelGridcell:$q,labelMonthDropdown:Wq,labelNav:Gq,labelNext:qq,labelPrevious:Kq,labelWeekNumber:Zq,labelWeekNumberHeader:Xq,labelWeekday:Yq,labelYearDropdown:Qq},Symbol.toStringTag,{value:"Module"})),cf=t=>t instanceof HTMLElement?t:null,zv=t=>[...t.querySelectorAll("[data-animated-month]")??[]],eK=t=>cf(t.querySelector("[data-animated-month]")),Uv=t=>cf(t.querySelector("[data-animated-caption]")),Vv=t=>cf(t.querySelector("[data-animated-weeks]")),tK=t=>cf(t.querySelector("[data-animated-nav]")),sK=t=>cf(t.querySelector("[data-animated-weekdays]"));function aK(t,s,{classNames:a,months:n,focused:i,dateLib:c}){const d=N.useRef(null),h=N.useRef(n),f=N.useRef(!1);N.useLayoutEffect(()=>{const g=h.current;if(h.current=n,!s||!t.current||!(t.current instanceof HTMLElement)||n.length===0||g.length===0||n.length!==g.length)return;const p=c.isSameMonth(n[0].date,g[0].date),v=c.isAfter(n[0].date,g[0].date),y=v?a[ei.caption_after_enter]:a[ei.caption_before_enter],_=v?a[ei.weeks_after_enter]:a[ei.weeks_before_enter],S=d.current,b=t.current.cloneNode(!0);if(b instanceof HTMLElement?(zv(b).forEach(O=>{if(!(O instanceof HTMLElement))return;const Q=eK(O);Q&&O.contains(Q)&&O.removeChild(Q);const q=Uv(O);q&&q.classList.remove(y);const U=Vv(O);U&&U.classList.remove(_)}),d.current=b):d.current=null,f.current||p||i)return;const T=S instanceof HTMLElement?zv(S):[],E=zv(t.current);if(E?.every(A=>A instanceof HTMLElement)&&T&&T.every(A=>A instanceof HTMLElement)){f.current=!0,t.current.style.isolation="isolate";const A=tK(t.current);A&&(A.style.zIndex="1"),E.forEach((O,Q)=>{const q=T[Q];if(!q)return;O.style.position="relative",O.style.overflow="hidden";const U=Uv(O);U&&U.classList.add(y);const D=Vv(O);D&&D.classList.add(_);const M=()=>{f.current=!1,t.current&&(t.current.style.isolation=""),A&&(A.style.zIndex=""),U&&U.classList.remove(y),D&&D.classList.remove(_),O.style.position="",O.style.overflow="",O.contains(q)&&O.removeChild(q)};q.style.pointerEvents="none",q.style.position="absolute",q.style.overflow="hidden",q.setAttribute("aria-hidden","true");const P=sK(q);P&&(P.style.opacity="0");const G=Uv(q);G&&(G.classList.add(v?a[ei.caption_before_exit]:a[ei.caption_after_exit]),G.addEventListener("animationend",M));const K=Vv(q);K&&K.classList.add(v?a[ei.weeks_before_exit]:a[ei.weeks_after_exit]),O.insertBefore(q,O.firstChild)})}})}function nK(t,s,a,n){const i=t[0],c=t[t.length-1],{ISOWeek:d,fixedWeeks:h,broadcastCalendar:f}=a??{},{addDays:g,differenceInCalendarDays:p,differenceInCalendarMonths:v,endOfBroadcastWeek:y,endOfISOWeek:_,endOfMonth:S,endOfWeek:b,isAfter:T,startOfBroadcastWeek:E,startOfISOWeek:A,startOfWeek:O}=n,Q=f?E(i,n):d?A(i):O(i),q=f?y(c):d?_(S(c)):b(S(c)),U=p(q,Q),D=v(c,i)+1,M=[];for(let K=0;K<=U;K++){const z=g(Q,K);if(s&&T(z,s))break;M.push(z)}const G=(f?35:42)*D;if(h&&M.length<G){const K=G-M.length;for(let z=0;z<K;z++){const J=g(M[M.length-1],1);M.push(J)}}return M}function rK(t){const s=[];return t.reduce((a,n)=>{const i=n.weeks.reduce((c,d)=>c.concat(d.days.slice()),s.slice());return a.concat(i.slice())},s.slice())}function iK(t,s,a,n){const{numberOfMonths:i=1}=a,c=[];for(let d=0;d<i;d++){const h=n.addMonths(t,d);if(s&&h>s)break;c.push(h)}return c}function h_(t,s,a,n){const{month:i,defaultMonth:c,today:d=n.today(),numberOfMonths:h=1}=t;let f=i||c||d;const{differenceInCalendarMonths:g,addMonths:p,startOfMonth:v}=n;if(a&&g(a,f)<h-1){const y=-1*(h-1);f=p(a,y)}return s&&g(f,s)<0&&(f=s),v(f)}function oK(t,s,a,n){const{addDays:i,endOfBroadcastWeek:c,endOfISOWeek:d,endOfMonth:h,endOfWeek:f,getISOWeek:g,getWeek:p,startOfBroadcastWeek:v,startOfISOWeek:y,startOfWeek:_}=n,S=t.reduce((b,T)=>{const E=a.broadcastCalendar?v(T,n):a.ISOWeek?y(T):_(T),A=a.broadcastCalendar?c(T):a.ISOWeek?d(h(T)):f(h(T)),O=s.filter(D=>D>=E&&D<=A),Q=a.broadcastCalendar?35:42;if(a.fixedWeeks&&O.length<Q){const D=s.filter(M=>{const P=Q-O.length;return M>A&&M<=i(A,P)});O.push(...D)}const q=O.reduce((D,M)=>{const P=a.ISOWeek?g(M):p(M),G=D.find(z=>z.weekNumber===P),K=new pA(M,T,n);return G?G.days.push(K):D.push(new XG(P,[K])),D},[]),U=new ZG(T,q);return b.push(U),b},[]);return a.reverseMonths?S.reverse():S}function lK(t,s){let{startMonth:a,endMonth:n}=t;const{startOfYear:i,startOfDay:c,startOfMonth:d,endOfMonth:h,addYears:f,endOfYear:g,newDate:p,today:v}=s,{fromYear:y,toYear:_,fromMonth:S,toMonth:b}=t;!a&&S&&(a=S),!a&&y&&(a=s.newDate(y,0,1)),!n&&b&&(n=b),!n&&_&&(n=p(_,11,31));const T=t.captionLayout==="dropdown"||t.captionLayout==="dropdown-years";return a?a=d(a):y?a=p(y,0,1):!a&&T&&(a=i(f(t.today??v(),-100))),n?n=h(n):_?n=p(_,11,31):!n&&T&&(n=g(t.today??v())),[a&&c(a),n&&c(n)]}function cK(t,s,a,n){if(a.disableNavigation)return;const{pagedNavigation:i,numberOfMonths:c=1}=a,{startOfMonth:d,addMonths:h,differenceInCalendarMonths:f}=n,g=i?c:1,p=d(t);if(!s)return h(p,g);if(!(f(s,t)<c))return h(p,g)}function dK(t,s,a,n){if(a.disableNavigation)return;const{pagedNavigation:i,numberOfMonths:c}=a,{startOfMonth:d,addMonths:h,differenceInCalendarMonths:f}=n,g=i?c??1:1,p=d(t);if(!s)return h(p,-g);if(!(f(p,s)<=0))return h(p,-g)}function uK(t){const s=[];return t.reduce((a,n)=>a.concat(n.weeks.slice()),s.slice())}function og(t,s){const[a,n]=N.useState(t);return[s===void 0?a:s,n]}function hK(t,s){const[a,n]=lK(t,s),{startOfMonth:i,endOfMonth:c}=s,d=h_(t,a,n,s),[h,f]=og(d,t.month?d:void 0);N.useEffect(()=>{const U=h_(t,a,n,s);f(U)},[t.timeZone]);const g=iK(h,n,t,s),p=nK(g,t.endMonth?c(t.endMonth):void 0,t,s),v=oK(g,p,t,s),y=uK(v),_=rK(v),S=dK(h,a,t,s),b=cK(h,n,t,s),{disableNavigation:T,onMonthChange:E}=t,A=U=>y.some(D=>D.days.some(M=>M.isEqualTo(U))),O=U=>{if(T)return;let D=i(U);a&&D<i(a)&&(D=i(a)),n&&D>i(n)&&(D=i(n)),f(D),E?.(D)};return{months:v,weeks:y,days:_,navStart:a,navEnd:n,previousMonth:S,nextMonth:b,goToMonth:O,goToDay:U=>{A(U)||O(U.date)}}}var po;(function(t){t[t.Today=0]="Today",t[t.Selected=1]="Selected",t[t.LastFocused=2]="LastFocused",t[t.FocusedModifier=3]="FocusedModifier"})(po||(po={}));function m_(t){return!t[Wa.disabled]&&!t[Wa.hidden]&&!t[Wa.outside]}function mK(t,s,a,n){let i,c=-1;for(const d of t){const h=s(d);m_(h)&&(h[Wa.focused]&&c<po.FocusedModifier?(i=d,c=po.FocusedModifier):n?.isEqualTo(d)&&c<po.LastFocused?(i=d,c=po.LastFocused):a(d.date)&&c<po.Selected?(i=d,c=po.Selected):h[Wa.today]&&c<po.Today&&(i=d,c=po.Today))}return i||(i=t.find(d=>m_(s(d)))),i}function fK(t,s,a,n,i,c,d){const{ISOWeek:h,broadcastCalendar:f}=c,{addDays:g,addMonths:p,addWeeks:v,addYears:y,endOfBroadcastWeek:_,endOfISOWeek:S,endOfWeek:b,max:T,min:E,startOfBroadcastWeek:A,startOfISOWeek:O,startOfWeek:Q}=d;let U={day:g,week:v,month:p,year:y,startOfWeek:D=>f?A(D,d):h?O(D):Q(D),endOfWeek:D=>f?_(D):h?S(D):b(D)}[t](a,s==="after"?1:-1);return s==="before"&&n?U=T([n,U]):s==="after"&&i&&(U=E([i,U])),U}function TA(t,s,a,n,i,c,d,h=0){if(h>365)return;const f=fK(t,s,a.date,n,i,c,d),g=!!(c.disabled&&Qo(f,c.disabled,d)),p=!!(c.hidden&&Qo(f,c.hidden,d)),v=f,y=new pA(f,v,d);return!g&&!p?y:TA(t,s,y,n,i,c,d,h+1)}function xK(t,s,a,n,i){const{autoFocus:c}=t,[d,h]=N.useState(),f=mK(s.days,a,n||(()=>!1),d),[g,p]=N.useState(c?f:void 0);return{isFocusTarget:b=>!!f?.isEqualTo(b),setFocused:p,focused:g,blur:()=>{h(g),p(void 0)},moveFocus:(b,T)=>{if(!g)return;const E=TA(b,T,g,s.navStart,s.navEnd,t,i);E&&(t.disableNavigation&&!s.days.some(O=>O.isEqualTo(E))||(s.goToDay(E),p(E)))}}}function pK(t,s){const{selected:a,required:n,onSelect:i}=t,[c,d]=og(a,i?a:void 0),h=i?a:c,{isSameDay:f}=s,g=_=>h?.some(S=>f(S,_))??!1,{min:p,max:v}=t;return{selected:h,select:(_,S,b)=>{let T=[...h??[]];if(g(_)){if(h?.length===p||n&&h?.length===1)return;T=h?.filter(E=>!f(E,_))}else h?.length===v?T=[_]:T=[...T,_];return i||d(T),i?.(T,_,S,b),T},isSelected:g}}function gK(t,s,a=0,n=0,i=!1,c=ko){const{from:d,to:h}=s||{},{isSameDay:f,isAfter:g,isBefore:p}=c;let v;if(!d&&!h)v={from:t,to:a>0?void 0:t};else if(d&&!h)f(d,t)?a===0?v={from:d,to:t}:i?v={from:d,to:void 0}:v=void 0:p(t,d)?v={from:t,to:d}:v={from:d,to:t};else if(d&&h)if(f(d,t)&&f(h,t))i?v={from:d,to:h}:v=void 0;else if(f(d,t))v={from:d,to:a>0?void 0:t};else if(f(h,t))v={from:t,to:a>0?void 0:t};else if(p(t,d))v={from:t,to:h};else if(g(t,d))v={from:d,to:t};else if(g(t,h))v={from:d,to:t};else throw new Error("Invalid range");if(v?.from&&v?.to){const y=c.differenceInCalendarDays(v.to,v.from);n>0&&y>n?v={from:t,to:void 0}:a>1&&y<a&&(v={from:t,to:void 0})}return v}function vK(t,s,a=ko){const n=Array.isArray(s)?s:[s];let i=t.from;const c=a.differenceInCalendarDays(t.to,t.from),d=Math.min(c,6);for(let h=0;h<=d;h++){if(n.includes(i.getDay()))return!0;i=a.addDays(i,1)}return!1}function f_(t,s,a=ko){return Xo(t,s.from,!1,a)||Xo(t,s.to,!1,a)||Xo(s,t.from,!1,a)||Xo(s,t.to,!1,a)}function yK(t,s,a=ko){const n=Array.isArray(s)?s:[s];if(n.filter(h=>typeof h!="function").some(h=>typeof h=="boolean"?h:a.isDate(h)?Xo(t,h,!1,a):wA(h,a)?h.some(f=>Xo(t,f,!1,a)):NN(h)?h.from&&h.to?f_(t,{from:h.from,to:h.to},a):!1:NA(h)?vK(t,h.dayOfWeek,a):vA(h)?a.isAfter(h.before,h.after)?f_(t,{from:a.addDays(h.after,1),to:a.addDays(h.before,-1)},a):Qo(t.from,h,a)||Qo(t.to,h,a):yA(h)||jA(h)?Qo(t.from,h,a)||Qo(t.to,h,a):!1))return!0;const d=n.filter(h=>typeof h=="function");if(d.length){let h=t.from;const f=a.differenceInCalendarDays(t.to,t.from);for(let g=0;g<=f;g++){if(d.some(p=>p(h)))return!0;h=a.addDays(h,1)}}return!1}function jK(t,s){const{disabled:a,excludeDisabled:n,selected:i,required:c,onSelect:d}=t,[h,f]=og(i,d?i:void 0),g=d?i:h;return{selected:g,select:(y,_,S)=>{const{min:b,max:T}=t,E=y?gK(y,g,b,T,c,s):void 0;return n&&a&&E?.from&&E.to&&yK({from:E.from,to:E.to},a,s)&&(E.from=y,E.to=void 0),d||f(E),d?.(E,y,_,S),E},isSelected:y=>g&&Xo(g,y,!1,s)}}function NK(t,s){const{selected:a,required:n,onSelect:i}=t,[c,d]=og(a,i?a:void 0),h=i?a:c,{isSameDay:f}=s;return{selected:h,select:(v,y,_)=>{let S=v;return!n&&h&&h&&f(v,h)&&(S=void 0),i||d(S),i?.(S,v,y,_),S},isSelected:v=>h?f(h,v):!1}}function wK(t,s){const a=NK(t,s),n=pK(t,s),i=jK(t,s);switch(t.mode){case"single":return a;case"multiple":return n;case"range":return i;default:return}}function bK(t){let s=t;s.timeZone&&(s={...t},s.today&&(s.today=new lr(s.today,s.timeZone)),s.month&&(s.month=new lr(s.month,s.timeZone)),s.defaultMonth&&(s.defaultMonth=new lr(s.defaultMonth,s.timeZone)),s.startMonth&&(s.startMonth=new lr(s.startMonth,s.timeZone)),s.endMonth&&(s.endMonth=new lr(s.endMonth,s.timeZone)),s.mode==="single"&&s.selected?s.selected=new lr(s.selected,s.timeZone):s.mode==="multiple"&&s.selected?s.selected=s.selected?.map(Qe=>new lr(Qe,s.timeZone)):s.mode==="range"&&s.selected&&(s.selected={from:s.selected.from?new lr(s.selected.from,s.timeZone):void 0,to:s.selected.to?new lr(s.selected.to,s.timeZone):void 0}));const{components:a,formatters:n,labels:i,dateLib:c,locale:d,classNames:h}=N.useMemo(()=>{const Qe={...H_,...s.locale};return{dateLib:new ri({locale:Qe,weekStartsOn:s.broadcastCalendar?1:s.weekStartsOn,firstWeekContainsDate:s.firstWeekContainsDate,useAdditionalWeekYearTokens:s.useAdditionalWeekYearTokens,useAdditionalDayOfYearTokens:s.useAdditionalDayOfYearTokens,timeZone:s.timeZone,numerals:s.numerals},s.dateLib),components:Tq(s.components),formatters:Iq(s.formatters),labels:{...Jq,...s.labels},locale:Qe,classNames:{...wN(),...s.classNames}}},[s.locale,s.broadcastCalendar,s.weekStartsOn,s.firstWeekContainsDate,s.useAdditionalWeekYearTokens,s.useAdditionalDayOfYearTokens,s.timeZone,s.numerals,s.dateLib,s.components,s.formatters,s.labels,s.classNames]),{captionLayout:f,mode:g,navLayout:p,numberOfMonths:v=1,onDayBlur:y,onDayClick:_,onDayFocus:S,onDayKeyDown:b,onDayMouseEnter:T,onDayMouseLeave:E,onNextClick:A,onPrevClick:O,showWeekNumber:Q,styles:q}=s,{formatCaption:U,formatDay:D,formatMonthDropdown:M,formatWeekNumber:P,formatWeekNumberHeader:G,formatWeekdayName:K,formatYearDropdown:z}=n,J=hK(s,c),{days:W,months:he,navStart:V,navEnd:ae,previousMonth:ge,nextMonth:Z,goToMonth:ee}=J,te=_q(W,s,V,ae,c),{isSelected:X,select:ce,selected:F}=wK(s,c)??{},{blur:re,focused:de,isFocusTarget:me,moveFocus:De,setFocused:Ne}=xK(s,J,te,X??(()=>!1),c),{labelDayButton:pe,labelGridcell:Le,labelGrid:ot,labelMonthDropdown:Pt,labelNav:Dt,labelPrevious:Ct,labelNext:Lt,labelWeekday:yt,labelWeekNumber:ys,labelWeekNumberHeader:Es,labelYearDropdown:Hs}=i,bs=N.useMemo(()=>zq(c,s.ISOWeek),[c,s.ISOWeek]),$s=g!==void 0||_!==void 0,ws=N.useCallback(()=>{ge&&(ee(ge),O?.(ge))},[ge,ee,O]),$t=N.useCallback(()=>{Z&&(ee(Z),A?.(Z))},[ee,Z,A]),Na=N.useCallback((Qe,jt)=>Ot=>{Ot.preventDefault(),Ot.stopPropagation(),Ne(Qe),ce?.(Qe.date,jt,Ot),_?.(Qe.date,jt,Ot)},[ce,_,Ne]),Me=N.useCallback((Qe,jt)=>Ot=>{Ne(Qe),S?.(Qe.date,jt,Ot)},[S,Ne]),ht=N.useCallback((Qe,jt)=>Ot=>{re(),y?.(Qe.date,jt,Ot)},[re,y]),He=N.useCallback((Qe,jt)=>Ot=>{const ts={ArrowLeft:[Ot.shiftKey?"month":"day",s.dir==="rtl"?"after":"before"],ArrowRight:[Ot.shiftKey?"month":"day",s.dir==="rtl"?"before":"after"],ArrowDown:[Ot.shiftKey?"year":"week","after"],ArrowUp:[Ot.shiftKey?"year":"week","before"],PageUp:[Ot.shiftKey?"year":"month","before"],PageDown:[Ot.shiftKey?"year":"month","after"],Home:["startOfWeek","before"],End:["endOfWeek","after"]};if(ts[Ot.key]){Ot.preventDefault(),Ot.stopPropagation();const[js,Zt]=ts[Ot.key];De(js,Zt)}b?.(Qe.date,jt,Ot)},[De,b,s.dir]),Mt=N.useCallback((Qe,jt)=>Ot=>{T?.(Qe.date,jt,Ot)},[T]),Rt=N.useCallback((Qe,jt)=>Ot=>{E?.(Qe.date,jt,Ot)},[E]),xs=N.useCallback(Qe=>jt=>{const Ot=Number(jt.target.value),ts=c.setMonth(c.startOfMonth(Qe),Ot);ee(ts)},[c,ee]),Ks=N.useCallback(Qe=>jt=>{const Ot=Number(jt.target.value),ts=c.setYear(c.startOfMonth(Qe),Ot);ee(ts)},[c,ee]),{className:Ze,style:Xe}=N.useMemo(()=>({className:[h[as.Root],s.className].filter(Boolean).join(" "),style:{...q?.[as.Root],...s.style}}),[h,s.className,s.style,q]),Se=kq(s),Ce=N.useRef(null);aK(Ce,!!s.animate,{classNames:h,months:he,focused:de,dateLib:c});const rt={dayPickerProps:s,selected:F,select:ce,isSelected:X,months:he,nextMonth:Z,previousMonth:ge,goToMonth:ee,getModifiers:te,components:a,classNames:h,styles:q,labels:i,formatters:n};return At.createElement(gA.Provider,{value:rt},At.createElement(a.Root,{rootRef:s.animate?Ce:void 0,className:Ze,style:Xe,dir:s.dir,id:s.id,lang:s.lang,nonce:s.nonce,title:s.title,role:s.role,"aria-label":s["aria-label"],"aria-labelledby":s["aria-labelledby"],...Se},At.createElement(a.Months,{className:h[as.Months],style:q?.[as.Months]},!s.hideNavigation&&!p&&At.createElement(a.Nav,{"data-animated-nav":s.animate?"true":void 0,className:h[as.Nav],style:q?.[as.Nav],"aria-label":Dt(),onPreviousClick:ws,onNextClick:$t,previousMonth:ge,nextMonth:Z}),he.map((Qe,jt)=>At.createElement(a.Month,{"data-animated-month":s.animate?"true":void 0,className:h[as.Month],style:q?.[as.Month],key:jt,displayIndex:jt,calendarMonth:Qe},p==="around"&&!s.hideNavigation&&jt===0&&At.createElement(a.PreviousMonthButton,{type:"button",className:h[as.PreviousMonthButton],tabIndex:ge?void 0:-1,"aria-disabled":ge?void 0:!0,"aria-label":Ct(ge),onClick:ws,"data-animated-button":s.animate?"true":void 0},At.createElement(a.Chevron,{disabled:ge?void 0:!0,className:h[as.Chevron],orientation:s.dir==="rtl"?"right":"left"})),At.createElement(a.MonthCaption,{"data-animated-caption":s.animate?"true":void 0,className:h[as.MonthCaption],style:q?.[as.MonthCaption],calendarMonth:Qe,displayIndex:jt},f?.startsWith("dropdown")?At.createElement(a.DropdownNav,{className:h[as.Dropdowns],style:q?.[as.Dropdowns]},(()=>{const Ot=f==="dropdown"||f==="dropdown-months"?At.createElement(a.MonthsDropdown,{key:"month",className:h[as.MonthsDropdown],"aria-label":Pt(),classNames:h,components:a,disabled:!!s.disableNavigation,onChange:xs(Qe.date),options:Fq(Qe.date,V,ae,n,c),style:q?.[as.Dropdown],value:c.getMonth(Qe.date)}):At.createElement("span",{key:"month"},M(Qe.date,c)),ts=f==="dropdown"||f==="dropdown-years"?At.createElement(a.YearsDropdown,{key:"year",className:h[as.YearsDropdown],"aria-label":Hs(c.options),classNames:h,components:a,disabled:!!s.disableNavigation,onChange:Ks(Qe.date),options:Uq(V,ae,n,c,!!s.reverseYears),style:q?.[as.Dropdown],value:c.getYear(Qe.date)}):At.createElement("span",{key:"year"},z(Qe.date,c));return c.getMonthYearOrder()==="year-first"?[ts,Ot]:[Ot,ts]})(),At.createElement("span",{role:"status","aria-live":"polite",style:{border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"absolute",width:"1px",whiteSpace:"nowrap",wordWrap:"normal"}},U(Qe.date,c.options,c))):At.createElement(a.CaptionLabel,{className:h[as.CaptionLabel],role:"status","aria-live":"polite"},U(Qe.date,c.options,c))),p==="around"&&!s.hideNavigation&&jt===v-1&&At.createElement(a.NextMonthButton,{type:"button",className:h[as.NextMonthButton],tabIndex:Z?void 0:-1,"aria-disabled":Z?void 0:!0,"aria-label":Lt(Z),onClick:$t,"data-animated-button":s.animate?"true":void 0},At.createElement(a.Chevron,{disabled:Z?void 0:!0,className:h[as.Chevron],orientation:s.dir==="rtl"?"left":"right"})),jt===v-1&&p==="after"&&!s.hideNavigation&&At.createElement(a.Nav,{"data-animated-nav":s.animate?"true":void 0,className:h[as.Nav],style:q?.[as.Nav],"aria-label":Dt(),onPreviousClick:ws,onNextClick:$t,previousMonth:ge,nextMonth:Z}),At.createElement(a.MonthGrid,{role:"grid","aria-multiselectable":g==="multiple"||g==="range","aria-label":ot(Qe.date,c.options,c)||void 0,className:h[as.MonthGrid],style:q?.[as.MonthGrid]},!s.hideWeekdays&&At.createElement(a.Weekdays,{"data-animated-weekdays":s.animate?"true":void 0,className:h[as.Weekdays],style:q?.[as.Weekdays]},Q&&At.createElement(a.WeekNumberHeader,{"aria-label":Es(c.options),className:h[as.WeekNumberHeader],style:q?.[as.WeekNumberHeader],scope:"col"},G()),bs.map(Ot=>At.createElement(a.Weekday,{"aria-label":yt(Ot,c.options,c),className:h[as.Weekday],key:String(Ot),style:q?.[as.Weekday],scope:"col"},K(Ot,c.options,c)))),At.createElement(a.Weeks,{"data-animated-weeks":s.animate?"true":void 0,className:h[as.Weeks],style:q?.[as.Weeks]},Qe.weeks.map(Ot=>At.createElement(a.Week,{className:h[as.Week],key:Ot.weekNumber,style:q?.[as.Week],week:Ot},Q&&At.createElement(a.WeekNumber,{week:Ot,style:q?.[as.WeekNumber],"aria-label":ys(Ot.weekNumber,{locale:d}),className:h[as.WeekNumber],scope:"row",role:"rowheader"},P(Ot.weekNumber,c)),Ot.days.map(ts=>{const{date:js}=ts,Zt=te(ts);if(Zt[Wa.focused]=!Zt.hidden&&!!de?.isEqualTo(ts),Zt[Wi.selected]=X?.(js)||Zt.selected,NN(F)){const{from:Ps,to:ie}=F;Zt[Wi.range_start]=!!(Ps&&ie&&c.isSameDay(js,Ps)),Zt[Wi.range_end]=!!(Ps&&ie&&c.isSameDay(js,ie)),Zt[Wi.range_middle]=Xo(F,js,!0,c)}const Ca=Bq(Zt,q,s.modifiersStyles),Ta=Cq(Zt,h,s.modifiersClassNames),Qa=!$s&&!Zt.hidden?Le(js,Zt,c.options,c):void 0;return At.createElement(a.Day,{key:`${c.format(js,"yyyy-MM-dd")}_${c.format(ts.displayMonth,"yyyy-MM")}`,day:ts,modifiers:Zt,className:Ta.join(" "),style:Ca,role:"gridcell","aria-selected":Zt.selected||void 0,"aria-label":Qa,"data-day":c.format(js,"yyyy-MM-dd"),"data-month":ts.outside?c.format(js,"yyyy-MM"):void 0,"data-selected":Zt.selected||void 0,"data-disabled":Zt.disabled||void 0,"data-hidden":Zt.hidden||void 0,"data-outside":ts.outside||void 0,"data-focused":Zt.focused||void 0,"data-today":Zt.today||void 0},!Zt.hidden&&$s?At.createElement(a.DayButton,{className:h[as.DayButton],style:q?.[as.DayButton],type:"button",day:ts,modifiers:Zt,disabled:Zt.disabled||void 0,tabIndex:me(ts)?0:-1,"aria-label":pe(js,Zt,c.options,c),onClick:Na(ts,Zt),onBlur:ht(ts,Zt),onFocus:Me(ts,Zt),onKeyDown:He(ts,Zt),onMouseEnter:Mt(ts,Zt),onMouseLeave:Rt(ts,Zt)},D(js,c.options,c)):!Zt.hidden&&D(ts.date,c.options,c))})))))))),s.footer&&At.createElement(a.Footer,{className:h[as.Footer],style:q?.[as.Footer],role:"status","aria-live":"polite"},s.footer)))}function kA({className:t,classNames:s,showOutsideDays:a=!0,captionLayout:n="label",buttonVariant:i="ghost",formatters:c,components:d,...h}){const f=wN();return e.jsx(bK,{showOutsideDays:a,className:ut("bg-background group/calendar p-3 [--cell-size:--spacing(8)] [[data-slot=card-content]_&]:bg-transparent [[data-slot=popover-content]_&]:bg-transparent",String.raw`rtl:**:[.rdp-button\_next>svg]:rotate-180`,String.raw`rtl:**:[.rdp-button\_previous>svg]:rotate-180`,t),captionLayout:n,formatters:{formatMonthDropdown:g=>g.toLocaleString("default",{month:"short"}),...c},classNames:{root:ut("w-fit",f.root),months:ut("flex gap-4 flex-col md:flex-row relative",f.months),month:ut("flex flex-col w-full gap-4",f.month),nav:ut("flex items-center gap-1 w-full absolute top-0 inset-x-0 justify-between",f.nav),button_previous:ut(Jv({variant:i}),"size-(--cell-size) aria-disabled:opacity-50 p-0 select-none",f.button_previous),button_next:ut(Jv({variant:i}),"size-(--cell-size) aria-disabled:opacity-50 p-0 select-none",f.button_next),month_caption:ut("flex items-center justify-center h-(--cell-size) w-full px-(--cell-size)",f.month_caption),dropdowns:ut("w-full flex items-center text-sm font-medium justify-center h-(--cell-size) gap-1.5",f.dropdowns),dropdown_root:ut("relative has-focus:border-ring border border-input shadow-xs has-focus:ring-ring/50 has-focus:ring-[3px] rounded-md",f.dropdown_root),dropdown:ut("absolute bg-popover inset-0 opacity-0",f.dropdown),caption_label:ut("select-none font-medium",n==="label"?"text-sm":"rounded-md pl-2 pr-1 flex items-center gap-1 text-sm h-8 [&>svg]:text-muted-foreground [&>svg]:size-3.5",f.caption_label),table:"w-full border-collapse",weekdays:ut("flex",f.weekdays),weekday:ut("text-muted-foreground rounded-md flex-1 font-normal text-[0.8rem] select-none",f.weekday),week:ut("flex w-full mt-2",f.week),week_number_header:ut("select-none w-(--cell-size)",f.week_number_header),week_number:ut("text-[0.8rem] select-none text-muted-foreground",f.week_number),day:ut("relative w-full h-full p-0 text-center [&:first-child[data-selected=true]_button]:rounded-l-md [&:last-child[data-selected=true]_button]:rounded-r-md group/day aspect-square select-none",f.day),range_start:ut("rounded-l-md bg-accent",f.range_start),range_middle:ut("rounded-none",f.range_middle),range_end:ut("rounded-r-md bg-accent",f.range_end),today:ut("bg-accent text-accent-foreground rounded-md data-[selected=true]:rounded-none",f.today),outside:ut("text-muted-foreground aria-selected:text-muted-foreground",f.outside),disabled:ut("text-muted-foreground opacity-50",f.disabled),hidden:ut("invisible",f.hidden),...s},components:{Root:({className:g,rootRef:p,...v})=>e.jsx("div",{"data-slot":"calendar",ref:p,className:ut(g),...v}),Chevron:({className:g,orientation:p,...v})=>p==="left"?e.jsx($_,{className:ut("size-4",g),...v}):p==="right"?e.jsx(Qy,{className:ut("size-4",g),...v}):e.jsx(Lp,{className:ut("size-4",g),...v}),DayButton:SK,WeekNumber:({children:g,...p})=>e.jsx("td",{...p,children:e.jsx("div",{className:"flex size-(--cell-size) items-center justify-center text-center",children:g})}),...d},...h})}function SK({className:t,day:s,modifiers:a,...n}){const i=wN(),c=N.useRef(null);return N.useEffect(()=>{a.focused&&c.current?.focus()},[a.focused]),e.jsx(I,{ref:c,variant:"ghost",size:"icon","data-day":s.date.toLocaleDateString(),"data-selected-single":a.selected&&!a.range_start&&!a.range_end&&!a.range_middle,"data-range-start":a.range_start,"data-range-end":a.range_end,"data-range-middle":a.range_middle,className:ut("data-[selected-single=true]:bg-primary data-[selected-single=true]:text-primary-foreground data-[range-middle=true]:bg-accent data-[range-middle=true]:text-accent-foreground data-[range-start=true]:bg-primary data-[range-start=true]:text-primary-foreground data-[range-end=true]:bg-primary data-[range-end=true]:text-primary-foreground group-data-[focused=true]/day:border-ring group-data-[focused=true]/day:ring-ring/50 dark:hover:text-accent-foreground flex aspect-square size-auto w-full min-w-(--cell-size) flex-col gap-1 leading-none font-normal group-data-[focused=true]/day:relative group-data-[focused=true]/day:z-10 group-data-[focused=true]/day:ring-[3px] data-[range-end=true]:rounded-md data-[range-end=true]:rounded-r-md data-[range-middle=true]:rounded-none data-[range-start=true]:rounded-md data-[range-start=true]:rounded-l-md [&>span]:text-xs [&>span]:opacity-70",i.day,t),...n})}const _K=({open:t,onClose:s,service:a})=>{const{toast:n}=mA(),{inviteCode:i}=ol(),[c,d]=N.useState(1),[h,f]=N.useState(""),[g,p]=N.useState(!1),[v,y]=N.useState(null),[_,S]=N.useState(""),[b,T]=N.useState({name:"",email:"",phone:"",notes:""}),E=["09:00 AM","10:00 AM","11:00 AM","12:00 PM","01:00 PM","02:00 PM","03:00 PM","04:00 PM","05:00 PM"],A=U=>{T({...b,[U.target.name]:U.target.value})},O=async()=>{try{if(!v||!_)throw new Error("Please select a date and time");const[U,D]=_.split(" ");let[M,P]=U.split(":").map(Number);D==="PM"&&M!==12&&(M+=12),D==="AM"&&M===12&&(M=0);const G=new Date(v);G.setHours(M,P,0,0);const K=ae=>{if(!ae)return 60;const ge=ae.match(/\d+/);if(!ge)return 60;const Z=parseInt(ge[0]);return ae.toLowerCase().includes("hour")?Z*60:Z},z={inviteCode:i||window.location.pathname.split("/").filter(Boolean).pop(),customerName:b.name,customerEmail:b.email,customerPhone:b.phone,service:a.name,serviceId:a._id||a.id,time:G.toISOString(),durationMinutes:K(a.duration),notes:b.notes,price:a.price},J=localStorage.getItem("customerToken"),W=J?{Authorization:`Bearer ${J}`}:{},he=await ke.post("/public/appointments",z,{headers:W}),V=`BOOK-${Date.now()}`;return f(V),{success:!0,bookingNum:V,data:he.data}}catch(U){return console.error(" Booking error:",U),console.error("Error response:",U.response?.data),console.error("Booking data sent:",bookingData),{success:!1,error:U.response?.data?.message||U.message||"Failed to create booking"}}},Q=async()=>{if(!b.name||!b.email||!b.phone){n({title:"Missing Information",description:"Please fill in all required fields.",variant:"destructive"});return}if(!v){n({title:"Select Date",description:"Please select a date for your appointment.",variant:"destructive"});return}if(!_){n({title:"Select Time",description:"Please select a time slot for your appointment.",variant:"destructive"});return}p(!0);const U=await O();p(!1),U.success?(n({title:"Booking Confirmed!",description:`Your appointment for ${a.name} has been booked successfully.`}),d(3)):n({title:"Booking Failed",description:U.error,variant:"destructive"})},q=()=>{d(1),y(null),S(""),T({name:"",email:"",phone:"",notes:""}),f(""),p(!1),s()};return a?e.jsx(Gt,{open:t,onOpenChange:q,children:e.jsxs(qt,{className:"max-w-2xl max-h-[90vh] overflow-y-auto glass-panel",children:[e.jsx(Kt,{children:e.jsx(Yt,{children:"Book Service"})}),e.jsx("div",{className:"flex items-center justify-between mb-6",children:["Details","Schedule","Confirmed"].map((U,D)=>e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`h-8 w-8 rounded-full flex items-center justify-center text-sm font-semibold ${c>D+1?"bg-success text-success-foreground":c===D+1?"bg-primary text-primary-foreground":"bg-muted text-muted-foreground"}`,children:c>D+1?"":D+1}),D<2&&e.jsx("div",{className:`h-1 w-12 mx-2 ${c>D+1?"bg-success":"bg-muted"}`})]},U))}),c===1&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"font-semibold text-foreground",children:"Service Details"}),e.jsxs("div",{className:"bg-secondary/20 p-4 rounded-lg space-y-3",children:[a.image&&e.jsx("img",{src:a.image,alt:a.name,className:"w-full h-32 object-cover rounded-lg"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-lg",children:a.name}),e.jsx("p",{className:"text-sm text-muted-foreground",children:a.description})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(ps,{className:"h-4 w-4"}),a.duration]}),e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(Sa,{className:"h-4 w-4"}),"KES ",a.price?.toLocaleString()]})]})]}),e.jsx(bi,{}),e.jsx("h3",{className:"font-semibold text-foreground",children:"Your Information"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(ue,{htmlFor:"name",className:"flex items-center gap-2",children:[e.jsx(Aa,{className:"h-4 w-4"}),"Full Name *"]}),e.jsx(we,{id:"name",name:"name",value:b.name,onChange:A,placeholder:"John Doe",required:!0})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(ue,{htmlFor:"email",className:"flex items-center gap-2",children:[e.jsx(fa,{className:"h-4 w-4"}),"Email *"]}),e.jsx(we,{id:"email",name:"email",type:"email",value:b.email,onChange:A,placeholder:"john@example.com",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(ue,{htmlFor:"phone",className:"flex items-center gap-2",children:[e.jsx(ia,{className:"h-4 w-4"}),"Phone *"]}),e.jsx(we,{id:"phone",name:"phone",value:b.phone,onChange:A,placeholder:"+254 700 000000",required:!0})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ue,{htmlFor:"notes",children:"Special Requests (Optional)"}),e.jsx(Gs,{id:"notes",name:"notes",value:b.notes,onChange:A,placeholder:"Any special requests or preferences...",rows:3})]})]}),e.jsx(I,{className:"w-full",onClick:()=>{if(!b.name||!b.email||!b.phone){n({title:"Missing Information",description:"Please fill in all required fields.",variant:"destructive"});return}d(2)},children:"Continue to Schedule"})]}),c===2&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"font-semibold text-foreground",children:"Choose Date & Time"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(ue,{className:"flex items-center gap-2",children:[e.jsx(Ms,{className:"h-4 w-4"}),"Select Date"]}),e.jsx(kA,{mode:"single",selected:v,onSelect:y,disabled:U=>U<new Date||U<new Date().setHours(0,0,0,0),className:"rounded-md border"})]}),v&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs(ue,{className:"flex items-center gap-2",children:[e.jsx(ps,{className:"h-4 w-4"}),"Select Time Slot"]}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:E.map(U=>e.jsx(I,{variant:_===U?"default":"outline",size:"sm",onClick:()=>S(U),className:"w-full",children:U},U))})]}),v&&_&&e.jsxs("div",{className:"bg-blue-50 dark:bg-blue-950/20 p-4 rounded-lg border border-blue-200 dark:border-blue-900",children:[e.jsx(Ws,{className:"h-5 w-5 text-blue-600 dark:text-blue-400 mb-2"}),e.jsxs("p",{className:"text-sm text-blue-600 dark:text-blue-400",children:[e.jsx("strong",{children:"Appointment Summary:"}),e.jsx("br",{}),a.name,e.jsx("br",{}),v.toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),e.jsx("br",{}),"Time: ",_,e.jsx("br",{}),"Duration: ",a.duration,e.jsx("br",{}),"Price: KES ",a.price?.toLocaleString()]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(I,{variant:"outline",className:"flex-1",onClick:()=>d(1),children:"Back"}),e.jsx(I,{className:"flex-1",onClick:Q,disabled:g||!v||!_,children:g?"Processing...":"Confirm Booking"})]})]}),c===3&&e.jsxs("div",{className:"text-center space-y-4 py-8",children:[e.jsx("div",{className:"h-16 w-16 mx-auto bg-success/10 rounded-full flex items-center justify-center",children:e.jsx(Xi,{className:"h-10 w-10 text-success"})}),e.jsx("h3",{className:"text-2xl font-bold text-foreground",children:"Booking Confirmed!"}),e.jsxs("p",{className:"text-muted-foreground",children:["Your appointment for ",e.jsx("strong",{children:a.name})," has been successfully booked."]}),v&&_&&e.jsx("div",{className:"bg-secondary/20 p-4 rounded-lg inline-block",children:e.jsxs("p",{className:"text-sm",children:[e.jsx("strong",{children:"Date:"})," ",v.toLocaleDateString(),e.jsx("br",{}),e.jsx("strong",{children:"Time:"})," ",_,e.jsx("br",{}),e.jsx("strong",{children:"Duration:"})," ",a.duration]})}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["A confirmation email has been sent to ",b.email]}),e.jsx(I,{className:"w-full",onClick:q,children:"Done"})]})]})}):null},CK=()=>{const[t,s]=N.useState([]),[a,n]=N.useState(!0),[i,c]=N.useState(null),[d,h]=N.useState(!1),{socket:f}=Ra(),{inviteCode:g}=ol(),p=_n();N.useEffect(()=>{localStorage.getItem("customerToken")?v():(n(!1),s([]))},[]),N.useEffect(()=>{if(!f||!localStorage.getItem("customerToken"))return;const b=()=>{localStorage.getItem("customerToken")&&v()};return f.on("order_updated",b),()=>{f.off("order_updated",b)}},[f]);const v=async()=>{n(!0),c(null),h(!1);try{const S=localStorage.getItem("customerToken");if(!S){s([]),n(!1);return}const T=(await ke.get("/customer/orders",{headers:{Authorization:`Bearer ${S}`}})).data,E=Array.isArray(T)?T:T.orders||[];s(E),console.log(` Loaded ${E.length} orders for current customer`)}catch(S){if(console.error("Error fetching orders:",S),S.response?.status===401)c("Please log in to view your orders"),h(!0);else if(S.response?.status===400&&S.response?.data?.requiresRelogin)c("Your session has expired. Please log in again to view your orders."),h(!0),localStorage.removeItem("customerToken");else if(S.response?.status===400){const b=S.response?.data?.message||"Unable to load orders";c(b),(b.toLowerCase().includes("email")||b.toLowerCase().includes("login"))&&h(!0)}else c("Failed to load orders. Please try again.")}finally{n(!1)}},y=S=>{switch(S){case"pending":return e.jsx(ps,{className:"h-4 w-4"});case"processing":return e.jsx(cs,{className:"h-4 w-4"});case"shipped":return e.jsx(Mu,{className:"h-4 w-4"});case"delivered":return e.jsx(Xi,{className:"h-4 w-4"})}},_=S=>{switch(S?.toLowerCase()){case"draft":case"pending":return"secondary";case"submitted":case"processing":case"under_review":return"default";case"approved":case"shipped":return"default";case"delivered":return"outline";case"cancelled":case"rejected":return"destructive";default:return"secondary"}};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-2xl font-bold text-foreground",children:"Order History"}),e.jsx(I,{variant:"outline",size:"sm",onClick:v,disabled:a,children:a?"Refreshing...":"Refresh"})]}),a?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"Loading your orders..."})]}):i?e.jsx(se,{className:"glass-card",children:e.jsxs(oe,{className:"p-8 text-center",children:[e.jsx(Ws,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:i}),e.jsx("div",{className:"flex gap-2 justify-center",children:d?e.jsxs(I,{onClick:()=>{p(g?`/client/login/${g}`:"/client/login")},children:[e.jsx(aj,{className:"h-4 w-4 mr-2"}),"Log In Again"]}):e.jsx(I,{onClick:v,children:"Try Again"})})]})}):t.length===0?e.jsx(se,{className:"glass-card",children:e.jsxs(oe,{className:"p-8 text-center",children:[e.jsx(cs,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No orders yet"}),e.jsx("p",{className:"text-muted-foreground",children:"Your order history will appear here"})]})}):t.map(S=>e.jsxs(se,{className:"glass-card",children:[e.jsxs(_e,{className:"pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(Te,{className:"text-base",children:["Order ",S.orderId]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(ze,{variant:_(S.status?.toLowerCase()),className:"gap-1",children:[y(S.status?.toLowerCase()),S.status]}),e.jsx(ze,{variant:S.paymentStatus==="Paid"?"default":"secondary",children:S.paymentStatus})]})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm text-muted-foreground",children:[e.jsx("span",{children:new Date(S.date||S.createdAt).toLocaleDateString()}),e.jsx("span",{children:S.customer?.name})]})]}),e.jsxs(oe,{className:"space-y-3",children:[e.jsx("div",{className:"space-y-2",children:S.items&&S.items.length>0?S.items.map((b,T)=>e.jsxs("div",{className:"text-sm flex justify-between",children:[e.jsxs("span",{className:"text-foreground",children:[b.name||"Product","  ",b.quantity]}),e.jsxs("span",{className:"text-muted-foreground",children:["KES ",(b.price*b.quantity).toLocaleString("en-KE",{minimumFractionDigits:2,maximumFractionDigits:2})]})]},T)):e.jsx("p",{className:"text-sm text-muted-foreground",children:"No items"})}),S.deliveryInfo?.address&&e.jsxs("div",{className:"text-xs text-muted-foreground pt-2 border-t border-border",children:[e.jsx("strong",{children:"Delivery:"})," ",S.deliveryInfo.address,", ",S.deliveryInfo.city]}),e.jsxs("div",{className:"flex items-center justify-between pt-2 border-t border-border",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold text-foreground",children:"Total: "}),e.jsxs("span",{className:"text-lg font-bold text-green-600",children:["KES ",S.total?.toLocaleString("en-KE",{minimumFractionDigits:2,maximumFractionDigits:2})||"0.00"]})]}),e.jsxs("div",{className:"flex gap-2",children:[S.trackingNumber&&e.jsx(I,{variant:"outline",size:"sm",children:"Track"}),e.jsx(I,{variant:"ghost",size:"sm",children:"Details"})]})]})]})]},S._id))]})},TK=()=>{const[t,s]=N.useState([]),[a,n]=N.useState(!0),[i,c]=N.useState(null),[d,h]=N.useState(!1),{socket:f}=Ra(),{inviteCode:g}=ol(),p=_n();N.useEffect(()=>{localStorage.getItem("customerToken")?v():(n(!1),s([]))},[]),N.useEffect(()=>{if(!f||!localStorage.getItem("customerToken"))return;const b=()=>{localStorage.getItem("customerToken")&&v()};return f.on("appointment_updated",b),()=>{f.off("appointment_updated",b)}},[f]);const v=async()=>{n(!0),c(null),h(!1);try{const S=localStorage.getItem("customerToken");if(!S){s([]),n(!1);return}try{const T=(await ke.get("/customer/appointments",{headers:{Authorization:`Bearer ${S}`}})).data,E=Array.isArray(T)?T:T.appointments||[];s(E),console.log(` Loaded ${E.length} bookings for current customer`)}catch(b){if(b.response?.status===404)s([]);else throw b}}catch(S){if(console.error("Error fetching bookings:",S),S.response?.status===401)c("Please log in to view your bookings"),h(!0);else if(S.response?.status===400&&S.response?.data?.requiresRelogin)c("Your session has expired. Please log in again to view your bookings."),h(!0),localStorage.removeItem("customerToken");else if(S.response?.status===400){const b=S.response?.data?.message||"Unable to load bookings";c(b),(b.toLowerCase().includes("email")||b.toLowerCase().includes("login"))&&h(!0)}else c("Failed to load bookings. Please try again.")}finally{n(!1)}},y=S=>{switch(S?.toLowerCase()){case"confirmed":case"completed":return"default";case"pending":return"secondary";case"cancelled":case"rejected":return"destructive";default:return"secondary"}},_=S=>{switch(S?.toLowerCase()){case"confirmed":return e.jsx(Xi,{className:"h-4 w-4"});case"pending":return e.jsx(ps,{className:"h-4 w-4"});case"completed":return e.jsx(Xi,{className:"h-4 w-4"});case"cancelled":case"rejected":return e.jsx(cr,{className:"h-4 w-4"});default:return e.jsx(Ms,{className:"h-4 w-4"})}};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-2xl font-bold text-foreground",children:"Booking History"}),e.jsx(I,{variant:"outline",size:"sm",onClick:v,disabled:a,children:a?"Refreshing...":"Refresh"})]}),a?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"Loading your bookings..."})]}):i?e.jsx(se,{className:"glass-card",children:e.jsxs(oe,{className:"p-8 text-center",children:[e.jsx(Ws,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:i}),e.jsx("div",{className:"flex gap-2 justify-center",children:d?e.jsxs(I,{onClick:()=>{p(g?`/client/login/${g}`:"/client/login")},children:[e.jsx(aj,{className:"h-4 w-4 mr-2"}),"Log In Again"]}):e.jsx(I,{onClick:v,children:"Try Again"})})]})}):t.length===0?e.jsx(se,{className:"glass-card",children:e.jsxs(oe,{className:"p-8 text-center",children:[e.jsx(Ms,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No bookings yet"}),e.jsx("p",{className:"text-muted-foreground",children:"Your service bookings will appear here"})]})}):t.map(S=>e.jsxs(se,{className:"glass-card",children:[e.jsxs(_e,{className:"pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(Te,{className:"text-base flex items-center gap-2",children:[e.jsx(Ms,{className:"h-4 w-4"}),S.service||"Service Booking"]}),e.jsxs(ze,{variant:y(S.status),className:"gap-1",children:[_(S.status),S.status||"Pending"]})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm text-muted-foreground",children:[e.jsx("span",{children:new Date(S.time||S.createdAt).toLocaleDateString()}),e.jsx("span",{children:new Date(S.time||S.createdAt).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})]}),e.jsxs(oe,{className:"space-y-3",children:[e.jsxs("div",{className:"space-y-2",children:[S.customerName&&e.jsxs("div",{className:"text-sm flex items-center gap-2",children:[e.jsx(Aa,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"text-foreground",children:S.customerName})]}),S.durationMinutes&&e.jsxs("div",{className:"text-sm flex items-center gap-2",children:[e.jsx(ps,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("span",{className:"text-muted-foreground",children:[S.durationMinutes," minutes"]})]}),S.notes&&e.jsxs("div",{className:"text-xs text-muted-foreground pt-2 border-t border-border",children:[e.jsx("strong",{children:"Notes:"})," ",S.notes]})]}),S.price&&e.jsxs("div",{className:"flex items-center justify-between pt-2 border-t border-border",children:[e.jsx("span",{className:"font-semibold text-foreground",children:"Price:"}),e.jsxs("span",{className:"text-lg font-bold text-green-600",children:["KES ",S.price?.toLocaleString()]})]})]})]},S._id))]})},EA=N.createContext(),AA=()=>{const t=N.useContext(EA);if(!t)throw new Error("useNotifications must be used within a NotificationProvider");return t},kK=({children:t})=>{const{socket:s,connected:a}=Ra(),{customer:n}=pd(),[i,c]=N.useState([]),[d,h]=N.useState(0),[f,g]=N.useState(0);N.useEffect(()=>{if(!(!s||!n))return s.on("new_message_notification",E=>{const A=new Date,O={id:Date.now(),type:"message",title:"New Message",message:`${E.from}: ${E.preview}`,preview:E.preview,from:E.from,timestamp:A,read:!1,data:E};p(O),g(Q=>Q+1),R.info(e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(ja,{className:"h-5 w-5 text-blue-500 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:"font-semibold",children:E.from}),e.jsx("span",{className:"text-xs text-muted-foreground",children:A.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"})})]}),e.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2",children:E.preview})]})]}),{duration:5e3})}),s.on("order_updated",E=>{const A={id:Date.now(),type:"order",title:"Order Update",message:`Order #${E.orderNumber||"N/A"} - ${E.status||"Updated"}`,timestamp:new Date,read:!1,data:E};p(A),R.success(e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Bs,{className:"h-5 w-5 text-green-500 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:"Order Update"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:A.message})]})]}),{duration:5e3})}),s.on("appointment_updated",E=>{const A={id:Date.now(),type:"appointment",title:"Appointment Update",message:`Your appointment - ${E.status||"Updated"}`,timestamp:new Date,read:!1,data:E};p(A),R.info(e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Ms,{className:"h-5 w-5 text-purple-500 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:"Appointment Update"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:A.message})]})]}),{duration:5e3})}),s.on("notification",E=>{const A={id:Date.now(),type:E.type||"general",title:E.title||"Notification",message:E.message,timestamp:new Date,read:!1,data:E};p(A),R(e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(ur,{className:"h-5 w-5 text-blue-500 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:A.title}),e.jsx("p",{className:"text-sm text-muted-foreground",children:A.message})]})]}),{duration:5e3})}),()=>{s.off("new_message_notification"),s.off("order_updated"),s.off("appointment_updated"),s.off("notification")}},[s,n]);const p=E=>{c(A=>[E,...A].slice(0,50)),h(A=>A+1)},T={notifications:i,unreadCount:d,messageUnreadCount:f,addNotification:p,markAsRead:E=>{c(A=>A.map(O=>O.id===E?{...O,read:!0}:O)),h(A=>Math.max(0,A-1))},markAllAsRead:()=>{c(E=>E.map(A=>({...A,read:!0}))),h(0)},clearNotification:E=>{c(O=>O.filter(Q=>Q.id!==E));const A=i.find(O=>O.id===E);A&&!A.read&&h(O=>Math.max(0,O-1))},clearAllNotifications:()=>{c([]),h(0)},resetMessageUnreadCount:()=>{g(0)},connected:a};return e.jsx(EA.Provider,{value:T,children:t})},EK=()=>{const{customer:t}=pd(),{socket:s,connected:a}=Ra(),{resetMessageUnreadCount:n}=AA(),[i,c]=N.useState(null),[d,h]=N.useState([]),[f,g]=N.useState(""),[p,v]=N.useState(!1),[y,_]=N.useState({}),[S,b]=N.useState(!0),[T,E]=N.useState(!1),[A,O]=N.useState("connecting"),Q=N.useRef(null),q=N.useRef(null);N.useEffect(()=>{t&&(D(),n())},[t]),N.useEffect(()=>{O(s?a?"connected":"connecting":"disconnected")},[s,a]),N.useEffect(()=>(i?.id&&s&&a&&(s.emit("join_conversation",i.id),U()),()=>{i?.id&&s&&(s.emit("leave_conversation",i.id),s.off("message_received"),s.off("user_typing"),s.off("user_stopped_typing"),s.off("message_sent"))}),[i,s,a]),N.useEffect(()=>{K()},[d]);const U=()=>{s&&(s.on("message_received",W=>{i&&W.conversationId===i.id&&h(he=>he.some(V=>V.id===W.id)?he:[...he,W])}),s.on("user_typing",({conversationId:W,userId:he,userName:V})=>{i?.id===W&&he!==t._id&&_(ae=>({...ae,[he]:V}))}),s.on("user_stopped_typing",({conversationId:W,userId:he})=>{i?.id===W&&_(V=>{const ae={...V};return delete ae[he],ae})}),s.on("message_sent",W=>{h(he=>he.map(V=>V.tempId&&V.content===W.content?{...W,status:"delivered"}:V))}))},D=async()=>{try{b(!0);const W=localStorage.getItem("customerToken");if(!W){c({id:null,name:"Business Owner",isOnline:!1}),b(!1);return}const he=await ke.get("/messages/conversations",{headers:{Authorization:`Bearer ${W}`}});if(he.data.conversations&&he.data.conversations.length>0){const V=he.data.conversations[0];c(V),M(V.id)}else c({id:null,name:"Business Owner",isOnline:!1}),b(!1)}catch(W){console.error("Error loading conversation:",W),c({id:null,name:"Business Owner",isOnline:!1}),b(!1)}},M=async W=>{try{const he=localStorage.getItem("customerToken"),V=await ke.get(`/messages/conversations/${W}`,{headers:{Authorization:`Bearer ${he}`}});h(V.data.messages||[]),b(!1)}catch(he){console.error("Error loading messages:",he),b(!1)}},P=async W=>{if(W.preventDefault(),!f.trim()||!t||T)return;const he=f.trim(),V=`temp_${Date.now()}`,ae={id:V,tempId:V,conversationId:i?.id,senderId:t._id,senderName:t.name,content:he,timestamp:new Date,status:"sending"};h(ge=>[...ge,ae]),g(""),E(!0);try{const ge=localStorage.getItem("customerToken");if(i?.id)s&&a?(s.emit("send_message",{conversationId:i.id,message:he,senderId:t._id,senderName:t.name}),h(Z=>Z.map(ee=>ee.tempId===V?{...ee,status:"sent"}:ee))):(await ke.post("/messages/send",{conversationId:i.id,content:he},{headers:{Authorization:`Bearer ${ge}`}}),h(Z=>Z.map(ee=>ee.tempId===V?{...ee,status:"sent"}:ee)));else{const Z=await ke.post("/messages/conversations",{},{headers:{Authorization:`Bearer ${ge}`}});if(Z.data.success){console.log(" Conversation created successfully");const ee=Z.data.conversation;c({id:ee.id,name:"Business Owner",isOnline:!1}),await ke.post("/messages/send",{conversationId:ee.id,content:he},{headers:{Authorization:`Bearer ${ge}`}}),h(te=>te.map(X=>X.tempId===V?{...X,status:"sent",conversationId:ee.id}:X)),s&&a&&(s.emit("join_conversation",ee.id),U())}}}catch(ge){console.error("Error sending message:",ge);const Z=ge.response?.data?.message||"Failed to send message";R.error(Z),h(ee=>ee.map(te=>te.tempId===V?{...te,status:"failed"}:te)),setTimeout(()=>{h(ee=>ee.filter(te=>te.tempId!==V))},3e3)}finally{E(!1)}},G=()=>{!p&&i?.id&&s&&a&&(v(!0),s.emit("typing_start",{conversationId:i.id,userId:t._id,userName:t.name}),setTimeout(()=>{v(!1),s.emit("typing_stop",{conversationId:i.id,userId:t._id})},3e3))},K=()=>{Q.current?.scrollIntoView({behavior:"smooth"})},z=W=>{switch(W){case"sent":return e.jsx(To,{className:"h-3 w-3"});case"delivered":return e.jsx(Zi,{className:"h-3 w-3"});case"read":return e.jsx(Zi,{className:"h-3 w-3 text-blue-500"});case"failed":return e.jsx(Ws,{className:"h-3 w-3 text-red-500"});default:return e.jsx(ps,{className:"h-3 w-3"})}},J=W=>{const he=new Date(W);return new Date-he<864e5?Yv(he,"HH:mm"):Yv(he,"MMM d, HH:mm")};return t?e.jsxs(se,{className:"h-[600px] flex flex-col",children:[e.jsx(_e,{className:"border-b py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Pn,{className:"h-10 w-10",children:e.jsx(On,{className:"bg-primary text-primary-foreground",children:i?.name?.[0]||"B"})}),e.jsxs("div",{children:[e.jsx(Te,{className:"text-base",children:i?.name||"Business Owner"}),e.jsx("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:A==="connecting"?e.jsxs(e.Fragment,{children:[e.jsx(Hi,{className:"h-3 w-3 animate-spin"}),e.jsx("span",{children:"Connecting..."})]}):A==="connected"?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"h-2 w-2 bg-green-500 rounded-full animate-pulse"}),e.jsx("span",{children:"Connected"})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"h-2 w-2 bg-red-500 rounded-full"}),e.jsx("span",{children:"Disconnected"})]})})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(I,{variant:"ghost",size:"icon",onClick:()=>R.info("Voice call - Coming soon"),children:e.jsx(ia,{className:"h-4 w-4"})}),e.jsx(I,{variant:"ghost",size:"icon",onClick:()=>R.info("Video call - Coming soon"),children:e.jsx(za,{className:"h-4 w-4"})}),e.jsx(I,{variant:"ghost",size:"icon",children:e.jsx(nj,{className:"h-4 w-4"})})]})]})}),e.jsx(oe,{className:"flex-1 p-4 overflow-hidden",children:S?e.jsx("div",{className:"h-full flex items-center justify-center",children:e.jsx(Hi,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):e.jsx(xr,{className:"h-full pr-4",children:e.jsxs("div",{className:"space-y-4",children:[d.length===0?e.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-center py-12",children:[e.jsx(ja,{className:"h-12 w-12 text-muted-foreground mb-3"}),e.jsx("p",{className:"text-muted-foreground mb-1",children:"No messages yet"}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Start a conversation with ",i?.name]})]}):d.map((W,he)=>{const V=W.senderId===t._id,ae=he===0||new Date(W.timestamp)-new Date(d[he-1].timestamp)>36e5;return e.jsxs("div",{children:[ae&&e.jsx("div",{className:"text-center text-xs text-muted-foreground my-4",children:Wm(new Date(W.timestamp),{addSuffix:!0})}),e.jsx("div",{className:`flex ${V?"justify-end":"justify-start"}`,children:e.jsxs("div",{className:`max-w-[75%] rounded-2xl px-4 py-2 ${V?"bg-primary text-primary-foreground rounded-br-sm":"bg-muted rounded-bl-sm"}`,children:[!V&&e.jsx("p",{className:"text-xs font-semibold mb-1 opacity-70",children:W.senderName}),e.jsx("p",{className:"text-sm break-words",children:W.content}),e.jsxs("div",{className:"flex items-center gap-1 mt-1 justify-end",children:[e.jsx("span",{className:"text-xs opacity-70",children:J(W.timestamp)}),V&&z(W.status)]})]})})]},W.id||W.tempId)}),Object.keys(y).length>0&&e.jsx("div",{className:"flex justify-start",children:e.jsx("div",{className:"bg-muted rounded-2xl rounded-bl-sm px-4 py-3",children:e.jsxs("div",{className:"flex gap-1",children:[e.jsx("div",{className:"w-2 h-2 bg-gray-500 rounded-full animate-bounce"}),e.jsx("div",{className:"w-2 h-2 bg-gray-500 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),e.jsx("div",{className:"w-2 h-2 bg-gray-500 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})})}),e.jsx("div",{ref:Q})]})})}),e.jsxs("div",{className:"border-t p-4",children:[e.jsxs("form",{onSubmit:P,className:"flex gap-2",children:[e.jsx(I,{type:"button",variant:"ghost",size:"icon",disabled:!0,children:e.jsx(Ru,{className:"h-5 w-5"})}),e.jsx(we,{ref:q,value:f,onChange:W=>{g(W.target.value),G()},onKeyPress:W=>{W.key==="Enter"&&!W.shiftKey&&(W.preventDefault(),P(W))},placeholder:"Type a message...",className:"flex-1",disabled:!a||T}),e.jsx(I,{type:"button",variant:"ghost",size:"icon",disabled:!0,children:e.jsx(rj,{className:"h-5 w-5"})}),e.jsx(I,{type:"submit",disabled:!f.trim()||T,children:T?e.jsx(Hi,{className:"h-4 w-4 animate-spin"}):e.jsx(mn,{className:"h-4 w-4"})})]}),A==="connecting"&&e.jsxs("div",{className:"flex items-center justify-center gap-2 text-xs text-muted-foreground mt-2",children:[e.jsx(Hi,{className:"h-3 w-3 animate-spin"}),e.jsx("span",{children:"Connecting to chat server..."})]}),A==="disconnected"&&e.jsxs("div",{className:"flex items-center justify-center gap-2 text-xs text-red-500 mt-2",children:[e.jsx(Ws,{className:"h-3 w-3"}),e.jsx("span",{children:"Connection lost. Retrying..."})]})]})]}):e.jsx(se,{className:"h-full flex items-center justify-center",children:e.jsxs(oe,{className:"p-12 text-center",children:[e.jsx(ja,{className:"h-16 w-16 text-muted-foreground mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Please Login"}),e.jsx("p",{className:"text-muted-foreground",children:"Sign in to chat with the business owner"})]})})},AK=()=>{const{notifications:t,unreadCount:s,markAsRead:a,markAllAsRead:n,clearNotification:i,clearAllNotifications:c}=AA(),[d,h]=N.useState(!1),f=p=>{switch(p){case"message":return e.jsx(ja,{className:"h-5 w-5 text-blue-500"});case"order":return e.jsx(Bs,{className:"h-5 w-5 text-green-500"});case"appointment":return e.jsx(Ms,{className:"h-5 w-5 text-purple-500"});default:return e.jsx(ur,{className:"h-5 w-5 text-gray-500"})}},g=p=>{p.read||a(p.id)};return e.jsxs(zy,{open:d,onOpenChange:h,children:[e.jsx(Uy,{asChild:!0,children:e.jsxs(I,{variant:"ghost",size:"icon",className:"relative",children:[e.jsx(ur,{className:"h-5 w-5"}),s>0&&e.jsx(ze,{className:"absolute -top-1 -right-1 h-5 w-5 flex items-center justify-center p-0 text-xs",variant:"destructive",children:s>9?"9+":s})]})}),e.jsxs(Vy,{children:[e.jsxs(Hy,{children:[e.jsxs($y,{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Notifications"}),t.length>0&&e.jsxs("div",{className:"flex gap-2",children:[s>0&&e.jsxs(I,{variant:"ghost",size:"sm",onClick:n,className:"text-xs",children:[e.jsx(Zi,{className:"h-4 w-4 mr-1"}),"Mark all read"]}),e.jsxs(I,{variant:"ghost",size:"sm",onClick:c,className:"text-xs",children:[e.jsx(Ua,{className:"h-4 w-4 mr-1"}),"Clear all"]})]})]}),e.jsx(Wy,{children:s>0?`You have ${s} unread notification${s>1?"s":""}`:"All caught up!"})]}),e.jsx("div",{className:"mt-6",children:t.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[e.jsx(ur,{className:"h-12 w-12 text-muted-foreground mb-3"}),e.jsx("p",{className:"text-muted-foreground mb-1",children:"No notifications"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"You're all caught up!"})]}):e.jsx(xr,{className:"h-[calc(100vh-12rem)]",children:e.jsx("div",{className:"space-y-2",children:t.map(p=>e.jsxs("div",{onClick:()=>g(p),className:`p-4 rounded-lg border cursor-pointer transition-colors ${p.read?"bg-background hover:bg-accent":"bg-primary/5 border-primary/20 hover:bg-primary/10"}`,children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"mt-0.5",children:f(p.type)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-semibold text-sm",children:p.title}),p.from&&e.jsx("p",{className:"text-xs text-muted-foreground",children:p.from})]}),e.jsx(I,{variant:"ghost",size:"icon",className:"h-6 w-6 -mr-2",onClick:v=>{v.stopPropagation(),i(p.id)},children:e.jsx(Ua,{className:"h-3 w-3"})})]}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1 line-clamp-2",children:p.preview||p.message}),e.jsxs("div",{className:"flex items-center justify-between mt-2",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:Wm(new Date(p.timestamp),{addSuffix:!0})}),!p.read&&e.jsx(ze,{variant:"secondary",className:"text-xs",children:"New"})]})]})]}),!p.read&&e.jsx("div",{className:"absolute right-2 top-2 h-2 w-2 bg-primary rounded-full"})]},p.id))})})})]})]})},DK=({discounts:t=[]})=>{const[s,a]=N.useState(0),[n,i]=N.useState(!1);if(N.useEffect(()=>{if(t.length<=1||n)return;const p=setInterval(()=>{a(v=>(v+1)%t.length)},5e3);return()=>clearInterval(p)},[t.length,n]),!t||t.length===0)return null;const c=t[s],d=()=>{a(p=>(p+1)%t.length)},h=()=>{a(p=>(p-1+t.length)%t.length)},f=p=>p.type==="percentage"?`${p.value}% OFF`:p.type==="fixed"?`KSH ${p.value} OFF`:p.type==="buy_x_get_y"?"SPECIAL OFFER":"DISCOUNT",g=p=>new Date(p).toLocaleDateString("en-US",{month:"short",day:"numeric"});return e.jsxs("div",{className:"relative w-full overflow-hidden rounded-2xl shadow-2xl mb-6 border-2 border-primary/20 group",children:[e.jsx("div",{className:"absolute top-4 right-4 z-30",children:e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 bg-green-500 rounded-full blur-md animate-pulse"}),e.jsxs("div",{className:"relative bg-gradient-to-r from-green-500 to-emerald-600 text-white px-4 py-2 rounded-full shadow-lg flex items-center gap-2 border-2 border-white/30",children:[e.jsxs("span",{className:"relative flex h-3 w-3",children:[e.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-white opacity-75"}),e.jsx("span",{className:"relative inline-flex rounded-full h-3 w-3 bg-white"})]}),e.jsx("span",{className:"text-xs font-bold uppercase tracking-wider",children:"Live Discount"})]})]})}),e.jsx("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:e.jsx("div",{className:"absolute top-0 left-0 w-full h-full bg-gradient-to-br from-primary/5 via-transparent to-secondary/5 animate-pulse"})}),e.jsx(SE,{mode:"wait",children:e.jsxs(Nn.div,{initial:{opacity:0,x:100},animate:{opacity:1,x:0},exit:{opacity:0,x:-100},transition:{duration:.5},className:"relative w-full h-52 sm:h-60 md:h-72 lg:h-80",onMouseEnter:()=>i(!0),onMouseLeave:()=>i(!1),children:[e.jsxs("div",{className:"absolute inset-0 bg-cover bg-center transform scale-105",style:{backgroundImage:c.seasonalDetails?.bannerImage?`url(${c.seasonalDetails.bannerImage})`:c.products?.[0]?.image?`url(${c.products[0].image})`:c.services?.[0]?.image?`url(${c.services[0].image})`:"linear-gradient(135deg, #667eea 0%, #764ba2 50%, #f093fb 100%)",filter:"brightness(0.9) contrast(1.1)",transition:"transform 0.5s ease-out"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-purple-900/80 via-blue-900/60 to-pink-900/40"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-transparent via-black/30 to-black/70"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-tr from-orange-500/20 via-transparent to-cyan-500/20"})]}),e.jsx("div",{className:"relative h-full flex items-center px-6 md:px-12",children:e.jsxs("div",{className:"max-w-2xl space-y-4",children:[c.isSeasonalPromotion&&c.seasonalDetails?.seasonName&&e.jsx(Nn.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.2},children:e.jsxs(ze,{className:"bg-yellow-500 text-black font-bold px-4 py-1 text-sm",children:[e.jsx(wi,{className:"h-4 w-4 mr-1 inline"}),c.seasonalDetails.seasonName]})}),e.jsx(Nn.div,{initial:{y:20,opacity:0,scale:.8},animate:{y:0,opacity:1,scale:1},transition:{delay:.3,type:"spring",stiffness:200},className:"flex items-center gap-4",children:e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-red-500 to-orange-500 rounded-lg blur-xl opacity-50 animate-pulse"}),e.jsx("div",{className:"relative bg-gradient-to-br from-red-600 via-red-500 to-orange-600 text-white px-6 py-3 rounded-lg shadow-2xl transform -rotate-2 border-2 border-white/20",children:e.jsx("p",{className:"text-4xl md:text-6xl font-black bg-clip-text text-transparent bg-gradient-to-r from-white to-yellow-200",children:f(c)})})]})}),e.jsxs(Nn.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.4},className:"space-y-2",children:[e.jsx("h2",{className:"text-3xl md:text-5xl font-black text-white drop-shadow-2xl",style:{textShadow:"0 0 20px rgba(255,255,255,0.3), 0 0 40px rgba(255,255,255,0.2), 2px 2px 8px rgba(0,0,0,0.8)"},children:c.seasonalDetails?.bannerText||c.name}),c.description&&e.jsx("p",{className:"text-lg md:text-xl text-white/95 max-w-xl drop-shadow-lg font-medium",children:c.description})]}),e.jsxs(Nn.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.5},className:"flex flex-wrap items-center gap-4 text-white",children:[c.code&&e.jsxs("div",{className:"flex items-center gap-2 bg-white/20 backdrop-blur-sm px-4 py-2 rounded-full",children:[e.jsx(tc,{className:"h-4 w-4"}),e.jsx("span",{className:"font-mono font-bold",children:c.code})]}),e.jsxs("div",{className:"flex items-center gap-2 bg-white/20 backdrop-blur-sm px-4 py-2 rounded-full",children:[e.jsx(ps,{className:"h-4 w-4"}),e.jsxs("span",{className:"text-sm",children:["Valid until ",g(c.validUntil)]})]}),c.minPurchaseAmount>0&&e.jsxs("div",{className:"flex items-center gap-2 bg-white/20 backdrop-blur-sm px-4 py-2 rounded-full",children:[e.jsx(FD,{className:"h-4 w-4"}),e.jsxs("span",{className:"text-sm",children:["Min. KSH ",c.minPurchaseAmount]})]})]}),(c.products?.length>0||c.services?.length>0)&&e.jsxs(Nn.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.6},className:"flex gap-3 mt-4",children:[c.products?.slice(0,3).map((p,v)=>e.jsxs(Nn.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.7+v*.1,type:"spring"},className:"relative group",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-400 to-purple-500 rounded-xl blur-md opacity-0 group-hover:opacity-75 transition-opacity duration-300"}),e.jsxs("div",{className:"relative w-20 h-20 rounded-xl overflow-hidden border-3 border-white shadow-2xl transform group-hover:scale-110 transition-transform duration-300",children:[e.jsx("img",{src:p.image||"https://images.unsplash.com/photo-1505740420928-5e560c06d30e?w=200",alt:p.name,className:"w-full h-full object-cover"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/50 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"})]})]},v)),c.services?.slice(0,3).map((p,v)=>e.jsxs(Nn.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.7+v*.1,type:"spring"},className:"relative group",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-pink-400 to-red-500 rounded-xl blur-md opacity-0 group-hover:opacity-75 transition-opacity duration-300"}),e.jsxs("div",{className:"relative w-20 h-20 rounded-xl overflow-hidden border-3 border-white shadow-2xl transform group-hover:scale-110 transition-transform duration-300",children:[e.jsx("img",{src:p.image||"https://images.unsplash.com/photo-1540555700478-4be289fbecef?w=200",alt:p.name,className:"w-full h-full object-cover"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/50 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"})]})]},v))]})]})}),t.length>1&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:h,className:"absolute left-4 top-1/2 -translate-y-1/2 bg-white/20 hover:bg-white/30 backdrop-blur-sm text-white p-2 rounded-full transition-all","aria-label":"Previous banner",children:e.jsx($_,{className:"h-6 w-6"})}),e.jsx("button",{onClick:d,className:"absolute right-4 top-1/2 -translate-y-1/2 bg-white/20 hover:bg-white/30 backdrop-blur-sm text-white p-2 rounded-full transition-all","aria-label":"Next banner",children:e.jsx(Qy,{className:"h-6 w-6"})})]}),t.length>1&&e.jsx("div",{className:"absolute bottom-4 left-1/2 -translate-x-1/2 flex gap-2",children:t.map((p,v)=>e.jsx("button",{onClick:()=>a(v),className:`w-2 h-2 rounded-full transition-all ${v===s?"bg-white w-8":"bg-white/50 hover:bg-white/75"}`,"aria-label":`Go to banner ${v+1}`},v))})]},s)}),e.jsx(Nn.div,{className:"absolute top-10 right-10",animate:{y:[0,-15,0],rotate:[0,15,0],scale:[1,1.2,1]},transition:{duration:3,repeat:1/0,ease:"easeInOut"},children:e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 bg-yellow-300 rounded-full blur-xl opacity-50"}),e.jsx(wi,{className:"relative h-10 w-10 text-yellow-300 drop-shadow-lg"})]})}),e.jsx(Nn.div,{className:"absolute bottom-20 right-20",animate:{y:[0,-20,0],rotate:[0,-15,0],scale:[1,1.3,1]},transition:{duration:4,repeat:1/0,ease:"easeInOut",delay:1},children:e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 bg-pink-300 rounded-full blur-lg opacity-50"}),e.jsx(wi,{className:"relative h-7 w-7 text-pink-300 drop-shadow-lg"})]})}),e.jsx(Nn.div,{className:"absolute top-1/2 left-10",animate:{y:[0,-10,0],x:[0,5,0],rotate:[0,10,0],scale:[1,1.1,1]},transition:{duration:5,repeat:1/0,ease:"easeInOut",delay:2},children:e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 bg-blue-300 rounded-full blur-lg opacity-40"}),e.jsx(wi,{className:"relative h-6 w-6 text-blue-300 drop-shadow-lg"})]})})]})},PK=({onThemeChange:t,currentTheme:s})=>{const[a,n]=N.useState("all");Object.entries(Ni).reduce((h,[f,g])=>{const p=g.category||"other";return h[p]||(h[p]=[]),h[p].push({key:f,...g}),h},{});const i=Object.entries(Ni).map(([h,f])=>({key:h,...f})),c=h=>h==="all"?i:i.filter(f=>f.category===h),d=[{key:"all",name:"All Themes",icon:bu},{key:"default",name:"Default",icon:null},{key:"color",name:"Colors",icon:null},{key:"neutral",name:"Neutral",icon:null},{key:"special",name:"Special",icon:wi},{key:"auto",name:"Auto",icon:null}];return e.jsxs("div",{className:"space-y-4",children:[e.jsxs(Ha,{value:a,onValueChange:n,className:"w-full",children:[e.jsx(Xa,{className:"grid w-full grid-cols-3 lg:grid-cols-6",children:d.map(h=>e.jsxs(Tt,{value:h.key,className:"text-xs",children:[h.icon&&e.jsx(h.icon,{className:"h-3 w-3 mr-1"}),h.name]},h.key))}),e.jsx(kt,{value:a,className:"mt-4",children:e.jsx(xr,{className:"h-[400px] w-full pr-4",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:c(a).map(h=>e.jsxs(se,{className:`cursor-pointer transition-all hover:shadow-lg ${s===h.key?"ring-2 ring-primary shadow-lg":"hover:ring-1 hover:ring-primary/50"}`,onClick:()=>t(h.key),children:[e.jsx(_e,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(Te,{className:"text-sm font-medium",children:h.name}),e.jsx(vt,{className:"text-xs mt-1",children:h.description})]}),s===h.key&&e.jsxs(ze,{variant:"default",className:"gap-1",children:[e.jsx(To,{className:"h-3 w-3"}),"Active"]})]})}),e.jsxs(oe,{className:"p-4 pt-0",children:[e.jsx("div",{className:`h-16 rounded-md ${h.preview} p-3 flex items-center justify-center`,children:e.jsx("div",{className:"text-xs font-medium opacity-90",children:"Preview"})}),h.category&&e.jsx(ze,{variant:"outline",className:"mt-2 text-xs",children:h.category})]})]},h.key))})})})]}),e.jsxs(se,{children:[e.jsx(_e,{children:e.jsx(Te,{className:"text-sm",children:"Current Theme"})}),e.jsx(oe,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:Ni[s]?.name||"Light"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:Ni[s]?.description||"Default theme"})]}),e.jsx("div",{className:`h-10 w-10 rounded-full ${Ni[s]?.preview||"bg-white"}`})]})})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx(I,{size:"sm",variant:s==="light"?"default":"outline",onClick:()=>t("light"),children:"Light"}),e.jsx(I,{size:"sm",variant:s==="dark"?"default":"outline",onClick:()=>t("dark"),children:"Dark"}),e.jsx(I,{size:"sm",variant:s==="blue"?"default":"outline",onClick:()=>t("blue"),children:"Blue"}),e.jsx(I,{size:"sm",variant:s==="purple"?"default":"outline",onClick:()=>t("purple"),children:"Purple"}),e.jsx(I,{size:"sm",variant:s==="cyberpunk"?"default":"outline",onClick:()=>t("cyberpunk"),children:"Cyberpunk"}),e.jsx(I,{size:"sm",variant:s==="matrix"?"default":"outline",onClick:()=>t("matrix"),children:"Matrix"})]})]})},Gx=[{id:"sample-1",name:"Professional Haircut & Styling",description:"Expert haircut and styling service tailored to your preferences. Includes wash, cut, and blow-dry.",price:1500,duration:"45 min",category:"Hair & Beauty",bookings:156,rating:4.9,staff:3,image:"https://images.unsplash.com/photo-1562322140-8baeececf3df?w=500"},{id:"sample-2",name:"Full Body Massage",description:"Relaxing full body massage to relieve stress and tension. Perfect for unwinding after a long day.",price:3500,duration:"90 min",category:"Wellness & Spa",bookings:89,rating:5,staff:2,image:"https://images.unsplash.com/photo-1544367567-0f2fcb009e0b?w=500"},{id:"sample-3",name:"Manicure & Pedicure",description:"Complete nail care service including filing, buffing, cuticle care, and polish application.",price:2e3,duration:"60 min",category:"Hair & Beauty",bookings:234,rating:4.8,staff:4,image:"https://images.unsplash.com/photo-1604654894610-df63bc536371?w=500"},{id:"sample-4",name:"Personal Training Session",description:"One-on-one fitness training with certified personal trainer. Customized workout plan included.",price:2500,duration:"60 min",category:"Fitness & Health",bookings:67,rating:4.9,staff:5,image:"https://images.unsplash.com/photo-1571019614242-c5c5dee9f50b?w=500"},{id:"sample-5",name:"Deep Tissue Massage",description:"Therapeutic massage targeting deep muscle layers to relieve chronic pain and muscle tension.",price:4e3,duration:"75 min",category:"Wellness & Spa",bookings:112,rating:5,staff:2,image:"https://images.unsplash.com/photo-1519823551278-64ac92734fb1?w=500"},{id:"sample-6",name:"Facial Treatment",description:"Rejuvenating facial treatment with deep cleansing, exfoliation, and hydration for glowing skin.",price:3e3,duration:"60 min",category:"Hair & Beauty",bookings:145,rating:4.8,staff:3,image:"https://images.unsplash.com/photo-1570172619644-dfd03ed5d881?w=500"},{id:"sample-7",name:"Yoga Class",description:"Group or private yoga session for flexibility, strength, and mindfulness. All levels welcome.",price:1200,duration:"60 min",category:"Fitness & Health",bookings:198,rating:4.9,staff:2,image:"https://images.unsplash.com/photo-1588286840104-8957b019727f?w=500"},{id:"sample-8",name:"Hair Coloring Service",description:"Professional hair coloring with premium products. Includes consultation, application, and styling.",price:4500,duration:"120 min",category:"Hair & Beauty",bookings:78,rating:4.7,staff:3,image:"https://images.unsplash.com/photo-1522337360788-8b13dee7a37e?w=500"},{id:"sample-9",name:"Nutritional Consultation",description:"Personalized nutrition plan and dietary guidance from certified nutritionist.",price:2800,duration:"45 min",category:"Fitness & Health",bookings:45,rating:4.8,staff:1,image:"https://images.unsplash.com/photo-1490645935967-10de6ba17061?w=500"},{id:"sample-10",name:"Hot Stone Massage",description:"Luxurious massage using heated stones to melt away tension and promote deep relaxation.",price:4500,duration:"90 min",category:"Wellness & Spa",bookings:91,rating:5,staff:2,image:"https://images.unsplash.com/photo-1583416750470-965b2707b355?w=500"},{id:"sample-11",name:"Makeup Application",description:"Professional makeup for events, photoshoots, or special occasions. Includes consultation.",price:3500,duration:"60 min",category:"Hair & Beauty",bookings:123,rating:4.9,staff:2,image:"https://images.unsplash.com/photo-1487412947147-5cebf100ffc2?w=500"},{id:"sample-12",name:"Aromatherapy Session",description:"Therapeutic treatment using essential oils to enhance physical and emotional well-being.",price:3200,duration:"60 min",category:"Wellness & Spa",bookings:67,rating:4.8,staff:2,image:"https://images.unsplash.com/photo-1600334089648-b0d9d3028eb2?w=500"},{id:"sample-13",name:"Group Fitness Class",description:"High-energy group workout including cardio, strength training, and flexibility exercises.",price:800,duration:"45 min",category:"Fitness & Health",bookings:312,rating:4.7,staff:3,image:"https://images.unsplash.com/photo-1571902943202-507ec2618e8f?w=500"},{id:"sample-14",name:"Reflexology Treatment",description:"Foot reflexology targeting pressure points to promote healing and relaxation throughout the body.",price:2500,duration:"60 min",category:"Wellness & Spa",bookings:89,rating:4.9,staff:2,image:"https://images.unsplash.com/photo-1544367567-0f2fcb009e0b?w=500"},{id:"sample-15",name:"Bridal Hair & Makeup",description:"Complete bridal beauty package including hair styling, makeup, and trial session.",price:8500,duration:"150 min",category:"Hair & Beauty",bookings:34,rating:5,staff:2,image:"https://images.unsplash.com/photo-1519699047748-de8e457a634e?w=500"}],OK=()=>{const{inviteCode:t}=ol(),s=_n(),{customer:a,isAuthenticated:n,logout:i,loading:c}=pd(),{socket:d,connected:h}=Ra(),[f,g]=N.useState(!1),[p,v]=N.useState(!1),[y,_]=N.useState(()=>localStorage.getItem("storefront-theme")||"light"),[S,b]=N.useState(""),[T,E]=N.useState("all"),{items:A,add:O,update:Q,remove:q,clear:U,total:D,count:M}=zj(),[P,G]=N.useState(null),[K,z]=N.useState(null),[J,W]=N.useState(!1),[he,V]=N.useState(!1),[ae,ge]=N.useState("shop"),[Z,ee]=N.useState([]),[te,X]=N.useState([]),[ce,F]=N.useState([]),[re,de]=N.useState(null),[me,De]=N.useState([]),[Ne,pe]=N.useState(null),[Le,ot]=N.useState([]),[Pt,Dt]=N.useState([]),[Ct,Lt]=N.useState([]),[yt,ys]=N.useState(!1),[Es,Hs]=N.useState([]),[bs,$s]=N.useState(!1),[ws,$t]=N.useState({name:"",phone:""}),[Na,Me]=N.useState(!1),[ht,He]=N.useState([]),[Mt,Rt]=N.useState(!0),[xs,Ks]=N.useState({businessName:"ominbiz Store",ownerName:"Store Owner"});N.useEffect(()=>{(async()=>{if(t)try{const Re=await ke.get(`/public/store-owner/${t}`);Ks({businessName:Re.data.businessName||Re.data.name,ownerName:Re.data.name,email:Re.data.businessEmail,phone:Re.data.businessPhone,address:Re.data.businessAddress})}catch(Re){console.error("Error fetching store owner:",Re),R.error("Could not load store information")}})()},[t]),N.useEffect(()=>{const ie=async()=>{Rt(!0);try{const tt=localStorage.getItem("customerToken"),wt=tt?{Authorization:`Bearer ${tt}`}:{},[bt,rs,gs,Nt,ne]=await Promise.allSettled([ke.get("/products",{headers:wt,params:{inviteCode:t}}),ke.get("/locations",{headers:wt}),ke.get("/team",{headers:wt}),ke.get("/public/services",{params:{inviteCode:t}}),ke.get("/public/discounts",{params:{inviteCode:t,active:!0}})]);if(bt.status==="fulfilled"&&bt.value.data?.length>0?(He(bt.value.data),console.log(" Loaded",bt.value.data.length,"products from store")):t?(He([]),console.log(" Store has no products yet")):(He(Qe),console.warn(" No invite code - showing sample products")),rs.status==="fulfilled"&&(ee(rs.value.data||[]),rs.value.data?.length>0&&pe(rs.value.data[0])),gs.status==="fulfilled"&&X(gs.value.data||[]),ne.status==="fulfilled"&&ne.value.data?.length>0){ot(ne.value.data);const ye=ne.value.data.filter(B=>B.active&&B.applicableProducts?.length>0).flatMap(B=>B.applicableProducts.map(fe=>({productId:fe,discount:B})));Dt(ye);const ve=ne.value.data.filter(B=>B.active&&B.applicableServices?.length>0).flatMap(B=>B.applicableServices.map(fe=>({serviceId:fe,discount:B})));Lt(ve)}if(Nt.status==="fulfilled"&&Nt.value.data?.length>0){const ye=Nt.value.data.map(ve=>({_id:ve._id,id:ve._id,name:ve.name,description:ve.description||"Professional service",price:ve.price||0,duration:ve.duration||"60 min",category:ve.category||"General",bookings:ve.bookings||0,rating:ve.rating||5,staff:ve.availableTeamMembers?.length||te.length||1,image:ve.image}));F(ye),console.log(" Loaded",ye.length,"services from database")}else t?(F(Gx),console.log(" No services in database, showing",Gx.length,"sample services")):(F(Gx),console.log(" Showing",Gx.length,"sample services (demo mode)"))}catch(tt){console.error("Error fetching data:",tt),R.error("Could not load some information. Please refresh."),He(Qe)}finally{Rt(!1)}};ie();const Re=setInterval(ie,3e4);return()=>clearInterval(Re)},[t,te.length]);const Ze=ie=>Ct.find(tt=>tt.serviceId===ie||tt.serviceId===ie.toString())?.discount||null,Xe=(ie,Re)=>{const tt=Number(ie)||0;if(!Re||!Re.value)return tt;const wt=Number(Re.value)||0;let bt=tt;if(Re.type==="percentage"){const rs=tt*wt/100;bt=tt-rs}else Re.type==="fixed"&&(bt=Math.max(0,tt-wt));return isNaN(bt)?tt:bt};N.useEffect(()=>{(async()=>{try{const Re=localStorage.getItem("customerToken")||localStorage.getItem("token"),tt=localStorage.getItem("guestId")||`guest_${Date.now()}`;let wt;Re?wt=await ke.get("/api/wishlist",{headers:{"x-customer-token":Re}}):(localStorage.setItem("guestId",tt),wt=await ke.get(`/api/wishlist?guestId=${tt}`)),De(wt.data||[])}catch(Re){console.error("Error loading wishlist:",Re)}})()},[t]),N.useEffect(()=>{if(!(!d||!h||!t))return d.emit("join_storefront",t),d.on("product_sync",ie=>{console.log("Product sync:",ie),ie.type==="insert"?(He(Re=>[ie.product,...Re]),R.success(`New product: ${ie.product.name}`)):ie.type==="update"?(He(Re=>Re.map(tt=>tt._id===ie.product._id?ie.product:tt)),R.info(`Product updated: ${ie.product.name}`)):ie.type==="delete"&&(He(Re=>Re.filter(tt=>tt._id!==ie.product._id)),R.info("Product removed"))}),d.on("service_sync",ie=>{console.log("Service sync:",ie),ie.type==="insert"?(F(Re=>[ie.service,...Re]),R.success(`New service: ${ie.service.name}`)):ie.type==="update"?(F(Re=>Re.map(tt=>tt._id===ie.service._id?ie.service:tt)),R.info(`Service updated: ${ie.service.name}`)):ie.type==="delete"&&(F(Re=>Re.filter(tt=>tt._id!==ie.service._id)),R.info("Service removed"))}),d.on("location_sync",ie=>{console.log("Location sync:",ie),ie.type==="insert"?(ee(Re=>[ie.location,...Re]),R.success(`New location: ${ie.location.name}`)):ie.type==="update"?(ee(Re=>Re.map(tt=>tt._id===ie.location._id?ie.location:tt)),R.info(`Location updated: ${ie.location.name}`)):ie.type==="delete"&&(ee(Re=>Re.filter(tt=>tt._id!==ie.location._id)),R.info("Location removed"))}),d.on("team_sync",ie=>{console.log("Team sync:",ie),ie.type==="insert"?(X(Re=>[ie.team,...Re]),R.success(`New team member: ${ie.team.name}`)):ie.type==="update"?(X(Re=>Re.map(tt=>tt._id===ie.team._id?ie.team:tt)),R.info(`Team member updated: ${ie.team.name}`)):ie.type==="delete"&&(X(Re=>Re.filter(tt=>tt._id!==ie.team._id)),R.info("Team member removed"))}),d.on("stock_alert",ie=>{ie.alertType==="out_of_stock"&&R.error(`Out of Stock: ${ie.product.name} is currently unavailable`)}),d.on("order_updated",ie=>{ie.order.customer?.email===a?.email&&R.info(`Order Update: Your order status is ${ie.order.status}`)}),()=>{d&&h&&(d.emit("leave_storefront",t),d.off("product_sync"),d.off("service_sync"),d.off("location_sync"),d.off("team_sync"),d.off("stock_alert"),d.off("order_updated"))}},[d,h,t,a]);const Se=()=>{a?(ge("account"),R.success(`Welcome ${a.name}!`)):(console.log(" Storefront: No customer yet, just setting tab"),ge("account"))},Ce=()=>{a?(i(),U(),De([]),R.success("You have been successfully logged out"),s(`/client/login/${t}`)):R.info("You are not currently logged in")},rt=ie=>{_(ie),localStorage.setItem("storefront-theme",ie),ys(!1),R.success(`Storefront theme: ${ie}`)};N.useEffect(()=>{(()=>{try{const Re=Ni[y];if(!Re||!Re.colors){console.warn("Theme not found:",y);return}const tt=bt=>{try{bt=bt.replace("#","");const rs=parseInt(bt.substring(0,2),16)/255,gs=parseInt(bt.substring(2,4),16)/255,Nt=parseInt(bt.substring(4,6),16)/255,ne=Math.max(rs,gs,Nt),ye=Math.min(rs,gs,Nt);let ve,B,fe=(ne+ye)/2;if(ne===ye)ve=B=0;else{const je=ne-ye;switch(B=fe>.5?je/(2-ne-ye):je/(ne+ye),ne){case rs:ve=((gs-Nt)/je+(gs<Nt?6:0))/6;break;case gs:ve=((Nt-rs)/je+2)/6;break;case Nt:ve=((rs-gs)/je+4)/6;break}}return`${Math.round(ve*360)} ${Math.round(B*100)}% ${Math.round(fe*100)}%`}catch(rs){return console.error("Error converting hex to HSL:",bt,rs),"0 0% 50%"}},wt=()=>{const bt=document.querySelector(".storefront-container");if(!bt){console.warn("Storefront container not found, retrying..."),setTimeout(wt,100);return}const rs=tt(Re.colors.primary),gs=tt(Re.colors.secondary),Nt=tt(Re.colors.accent),ne=Re.colors.background.startsWith("#")?tt(Re.colors.background):"0 0% 100%",ye=tt(Re.colors.foreground);bt.style.setProperty("--primary",rs),bt.style.setProperty("--primary-foreground","0 0% 100%"),bt.style.setProperty("--secondary",gs),bt.style.setProperty("--secondary-foreground",ye),bt.style.setProperty("--accent",Nt),bt.style.setProperty("--accent-foreground",ye),bt.style.setProperty("--background",ne),bt.style.setProperty("--foreground",ye),bt.style.setProperty("--card",ne),bt.style.setProperty("--card-foreground",ye),bt.style.setProperty("--popover",ne),bt.style.setProperty("--popover-foreground",ye),bt.style.setProperty("--muted",gs),bt.style.setProperty("--muted-foreground","0 0% 45%"),bt.style.setProperty("--border",`${rs.split(" ")[0]} 30% 80%`),bt.style.setProperty("--input",`${rs.split(" ")[0]} 30% 80%`),bt.style.setProperty("--ring",rs),bt.style.backgroundColor=Re.colors.background,bt.style.color=Re.colors.foreground,bt.style.minHeight="100vh",console.log(" Storefront theme applied (INDEPENDENT from dashboard):",y)};wt()}catch(Re){console.error("Error applying storefront theme:",Re)}})()},[y]);const Qe=[{id:"1",name:"Premium Hair Shampoo",description:"Nourishing shampoo for all hair types with natural ingredients",price:30,category:"Hair Care",stock:25,image:"/placeholder.svg",rating:4.8,specs:["250ml bottle","Sulfate-free","pH balanced","Natural ingredients"],reviews:[{id:"r1",author:"Jane Doe",rating:5,comment:"Best shampoo I've ever used!",date:"2025-10-10"},{id:"r2",author:"John Smith",rating:4,comment:"Great product, will buy again",date:"2025-10-08"}]},{id:"2",name:"Hair Styling Gel",description:"Strong hold gel with natural finish and no residue",price:16,category:"Hair Care",stock:40,image:"/placeholder.svg",rating:4.5,specs:["150ml","Water-based","Easy wash out","Long-lasting hold"],reviews:[{id:"r3",author:"Mike Johnson",rating:5,comment:"Perfect hold without being sticky",date:"2025-10-12"}]},{id:"3",name:"Organic Face Mask",description:"Deep cleansing and hydrating mask with organic ingredients",price:45,category:"Skincare",stock:15,image:"/placeholder.svg",rating:4.9,specs:["100ml","Organic certified","Vegan","Cruelty-free"],reviews:[{id:"r4",author:"Sarah Lee",rating:5,comment:"My skin feels amazing!",date:"2025-10-11"}]},{id:"4",name:"Professional Hair Dryer",description:"Fast drying with heat protection and ionic technology",price:200,category:"Tools",stock:8,image:"/placeholder.svg",rating:4.7,specs:["2200W","Ionic technology","3 heat settings","Cool shot button"],reviews:[{id:"r5",author:"Emily White",rating:5,comment:"Salon quality at home!",date:"2025-10-09"}]},{id:"5",name:"Moisturizing Cream",description:"24-hour hydration with SPF 15 protection",price:35,category:"Skincare",stock:30,image:"/placeholder.svg",rating:4.6,specs:["50ml","SPF 15","Non-greasy","Suitable for all skin types"],reviews:[]},{id:"6",name:"Hair Brush Set",description:"Professional quality brushes for all hair types",price:28,category:"Tools",stock:20,image:"/placeholder.svg",rating:4.4,specs:["3-piece set","Bamboo handle","Anti-static bristles","Ergonomic design"],reviews:[]}],jt=["all",...Array.from(new Set(ht.map(ie=>ie.category)))],Ot=ht.filter(ie=>{const Re=ie.name.toLowerCase().includes(S.toLowerCase())||ie.description.toLowerCase().includes(S.toLowerCase()),tt=T==="all"||ie.category===T;return Re&&tt}),ts=ie=>{const Re=ie._id||ie.id,tt=ie.stockQuantity||ie.stock||0,wt=A.find(bt=>(bt._id||bt.id)===Re);wt?wt.quantity<tt?(Q(Re,wt.quantity+1),R.success(`${ie.name} quantity increased`)):R.error(`Stock limit reached: Only ${tt} available`):(O({...ie,_id:Re,id:Re,stock:tt,stockQuantity:tt},1),R.success(` ${ie.name} added to cart!`))},js=(ie,Re)=>{const tt=A.find(rs=>(rs._id||rs.id)===ie);if(!tt)return;const wt=tt.stockQuantity||tt.stock||0,bt=tt.quantity+Re;if(bt===0){Zt(ie);return}if(bt>wt){R.error(`Stock limit reached: Only ${wt} available`);return}Q(ie,bt)},Zt=ie=>{const Re=A.find(tt=>(tt._id||tt.id)===ie);q(ie),Re&&R.info(`${Re.name} removed from cart`)},Ca=async ie=>{const Re=ie._id||ie.id,tt=me.some(wt=>(wt.productId?._id||wt.productId||wt._id||wt.id)===Re);try{if(tt){De(me.filter(rs=>(rs.productId?._id||rs.productId||rs._id||rs.id)!==Re)),R.info(`${ie.name} removed from wishlist`);const wt=localStorage.getItem("customerToken")||localStorage.getItem("token"),bt=localStorage.getItem("guestId")||`guest_${Date.now()}`;wt?await ke.delete(`/api/wishlist/${Re}`,{headers:wt?{"x-customer-token":wt}:{}}):await ke.delete(`/api/wishlist/${Re}?guestId=${bt}`)}else{De([...me,ie]),R.success(` ${ie.name} added to wishlist`);const wt=localStorage.getItem("customerToken")||localStorage.getItem("token"),bt=localStorage.getItem("guestId")||`guest_${Date.now()}`;localStorage.setItem("guestId",bt),wt?await ke.post("/api/wishlist",{productId:Re},{headers:{"x-customer-token":wt}}):await ke.post("/api/wishlist",{productId:Re,guestId:bt})}}catch(wt){console.error("Error updating wishlist:",wt),R.error("Failed to update wishlist. Please try again."),De(tt?[...me,ie]:me.filter(bt=>(bt.productId?._id||bt.productId||bt._id||bt.id)!==Re))}},Ta=ie=>me.some(Re=>(Re.productId?._id||Re.productId||Re._id||Re.id)===ie),Qa=()=>{W(!0)},Ps=async()=>{if(!ws.name||!ws.phone){R.error("Please fill in all fields");return}try{await Qx.updateProfile(ws),R.success("Profile updated successfully!"),$s(!1);const ie={...a,...ws};localStorage.setItem("customerData",JSON.stringify(ie)),setTimeout(()=>window.location.reload(),500)}catch(ie){console.error("Profile update error:",ie),R.error(ie.response?.data?.message||"Failed to update profile")}};return N.useEffect(()=>(console.log(" ClientStorefront: Mounting..."),v(!0),()=>{console.log(" ClientStorefront: Unmounting..."),v(!1)}),[]),N.useEffect(()=>{console.log(" Storefront: Auth check running...",{mounted:p,authLoading:c,hasCheckedAuth:f,isAuthenticated:n,hasCustomer:!!a}),p&&!c&&!f&&(console.log(" Storefront: Auth check complete",{isAuthenticated:n,hasCustomer:!!a}),g(!0))},[p,c,n,a,f]),!p||c||!f?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-background via-secondary/10 to-background flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-primary mx-auto mb-4"}),e.jsx("p",{className:"text-lg text-muted-foreground",children:"Loading storefront..."}),c&&e.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:"Verifying authentication..."})]})}):e.jsx(kK,{children:e.jsxs("div",{className:"storefront-container min-h-screen bg-gradient-to-br from-background via-secondary/10 to-background smooth-scroll",children:[e.jsx("header",{className:"sticky top-0 z-40 glass-panel",children:e.jsx("div",{className:"container mx-auto px-4 py-4",children:e.jsxs("div",{className:"flex items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"h-10 w-10 rounded-full bg-gradient-to-br from-primary to-primary/60 flex items-center justify-center shadow-md",children:e.jsx(cs,{className:"h-5 w-5 text-primary-foreground"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-lg font-bold text-foreground",children:xs.businessName}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["by ",xs.ownerName]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(I,{variant:ae==="chats"?"default":"ghost",size:"icon",onClick:()=>ge("chats"),className:"hidden sm:flex",title:"Messages",children:e.jsx(ja,{className:"h-5 w-5"})}),e.jsx(AK,{}),e.jsx(I,{variant:ae==="orders"?"default":"ghost",size:"icon",onClick:()=>ge("orders"),className:"hidden sm:flex",children:e.jsx(Zl,{className:"h-5 w-5"})}),e.jsx(I,{variant:"ghost",size:"icon",onClick:Se,title:"My Account",children:e.jsx(Aa,{className:"h-5 w-5"})}),e.jsxs(zy,{open:yt,onOpenChange:ys,children:[e.jsx(Uy,{asChild:!0,children:e.jsx(I,{variant:"ghost",size:"icon",title:"Change Theme",children:e.jsx(Ya,{className:"h-5 w-5"})})}),e.jsxs(Vy,{children:[e.jsxs(Hy,{children:[e.jsx($y,{children:"Theme Settings"}),e.jsx(Wy,{children:"Choose your preferred theme"})]}),e.jsx("div",{className:"mt-6 space-y-4",children:e.jsx(PK,{onThemeChange:rt,currentTheme:y})})]})]}),e.jsx(I,{variant:"ghost",size:"icon",onClick:Ce,title:a?"Logout":"Login",children:e.jsx(op,{className:"h-5 w-5"})})]})]})})}),e.jsx("div",{className:"container mx-auto px-4 py-6",children:e.jsxs(Ha,{value:ae,onValueChange:ge,className:"space-y-6",children:[e.jsxs(Xa,{className:"grid w-full max-w-3xl mx-auto grid-cols-5",children:[e.jsxs(Tt,{value:"shop",className:"gap-1",children:[e.jsx(Bs,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Shop"})]}),e.jsxs(Tt,{value:"services",className:"gap-1",children:[e.jsx(Ms,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Services"})]}),e.jsxs(Tt,{value:"chats",className:"gap-1 relative",children:[e.jsx(ja,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Chats"})]}),e.jsxs(Tt,{value:"orders",className:"gap-1",children:[e.jsx(Zl,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Orders"})]}),e.jsxs(Tt,{value:"account",className:"gap-1",children:[e.jsx(Aa,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Account"})]})]}),(ae==="shop"||ae==="services")&&Le.length>0&&e.jsx("div",{className:"mb-6 animate-in fade-in slide-in-from-top-4 duration-500",children:e.jsx(DK,{discounts:Le})}),e.jsxs(kt,{value:"shop",className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-wrap items-center justify-center gap-4 py-4",children:[e.jsxs(ze,{variant:"outline",className:"gap-2 px-4 py-2",children:[e.jsx(ip,{className:"h-4 w-4 text-success"}),"Secure Payment"]}),e.jsxs(ze,{variant:"outline",className:"gap-2 px-4 py-2",children:[e.jsx(cs,{className:"h-4 w-4 text-primary"}),"Fast Delivery"]}),e.jsxs(ze,{variant:"outline",className:"gap-2 px-4 py-2",children:[e.jsx(ip,{className:"h-4 w-4 text-warning"}),"7-Day Returns"]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(Da,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(we,{placeholder:"Search products...",value:S,onChange:ie=>b(ie.target.value),className:"pl-10 glass-panel"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(Xt,{value:T,onValueChange:E,children:[e.jsxs(Jt,{className:"w-[180px] glass-panel",children:[e.jsx(ll,{className:"h-4 w-4 mr-2"}),e.jsx(Qt,{placeholder:"Category"})]}),e.jsx(es,{className:"bg-background/95 backdrop-blur-lg border-white/20",children:jt.map(ie=>e.jsx(Ie,{value:ie,children:ie==="all"?"All Categories":ie},ie))})]}),e.jsxs(zy,{children:[e.jsx(Uy,{asChild:!0,children:e.jsxs(I,{className:"gap-2 relative",children:[e.jsx(Bs,{className:"h-4 w-4"}),"Cart",M>0&&e.jsx(ze,{className:"absolute -top-2 -right-2 h-5 w-5 p-0 flex items-center justify-center badge-pulse",children:M})]})}),e.jsxs(Vy,{className:"w-full sm:max-w-md overflow-y-auto glass-panel",children:[e.jsxs(Hy,{children:[e.jsx($y,{children:"Shopping Cart"}),e.jsxs(Wy,{children:[M," ",M===1?"item":"items"," in your cart"]})]}),e.jsx("div",{className:"mt-6 space-y-4",children:A.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Bs,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"Your cart is empty"})]}):e.jsxs(e.Fragment,{children:[A.map(ie=>e.jsx(se,{className:"glass-card",children:e.jsx(oe,{className:"p-4",children:e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:"h-16 w-16 rounded bg-muted flex items-center justify-center",children:e.jsx(cs,{className:"h-8 w-8 text-muted-foreground"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-semibold text-sm",children:ie.name}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["KES ",ie.price.toFixed(2)]}),e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsx(I,{size:"icon",variant:"outline",className:"h-7 w-7",onClick:()=>js(ie.id,-1),children:e.jsx(Em,{className:"h-3 w-3"})}),e.jsx("span",{className:"text-sm font-medium w-8 text-center",children:ie.quantity}),e.jsx(I,{size:"icon",variant:"outline",className:"h-7 w-7",onClick:()=>js(ie.id,1),children:e.jsx(ha,{className:"h-3 w-3"})}),e.jsx(I,{size:"icon",variant:"ghost",className:"h-7 w-7 ml-auto",onClick:()=>Zt(ie.id),children:e.jsx(Ua,{className:"h-3 w-3"})})]})]})]})})},ie._id||ie.id)),e.jsxs("div",{className:"border-t pt-4",children:[e.jsxs("div",{className:"flex justify-between text-lg font-bold mb-4",children:[e.jsx("span",{children:"Total:"}),e.jsxs("span",{children:["KES ",D.toFixed(2)]})]}),e.jsx(I,{className:"w-full",size:"lg",onClick:Qa,children:"Proceed to Checkout"})]})]})})]})]})]})]}),Mt?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-primary mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"Loading products..."})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:Ot.map(ie=>e.jsxs(se,{className:"group glass-card cursor-pointer relative overflow-hidden hover:shadow-xl transition-all duration-300",onClick:()=>G(ie),children:[e.jsx(I,{size:"icon",variant:"ghost",className:"absolute top-2 right-2 z-10 h-8 w-8 rounded-full bg-background/80 backdrop-blur-sm hover:bg-background",onClick:Re=>{Re.stopPropagation(),Ca(ie)},children:e.jsx(Zo,{className:`h-4 w-4 transition-all ${Ta(ie._id||ie.id)?"fill-red-500 text-red-500":"text-muted-foreground"}`})}),e.jsx(_e,{className:"p-0",children:e.jsxs("div",{className:"aspect-square bg-gradient-to-br from-secondary/30 to-primary/10 rounded-t-lg flex items-center justify-center overflow-hidden relative group-hover:scale-105 transition-transform duration-300",children:[ie.image?e.jsx("img",{src:ie.image,alt:ie.name,className:"w-full h-full object-cover"}):e.jsx(cs,{className:"h-20 w-20 text-primary/40 product-card-image"}),e.jsx("div",{className:"absolute bottom-2 left-2",children:e.jsx(ze,{variant:(ie.stockQuantity||ie.stock)>10?"default":(ie.stockQuantity||ie.stock)===0?"destructive":"secondary",className:"shadow-lg",children:(ie.stockQuantity||ie.stock)===0?"Out of Stock":`${ie.stockQuantity||ie.stock} left`})})]})}),e.jsxs(oe,{className:"p-4",children:[e.jsxs("div",{className:"mb-2",children:[e.jsx("div",{className:"flex items-center justify-between mb-1",children:e.jsx(Te,{className:"text-base line-clamp-1 flex-1",children:ie.name})}),e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("div",{className:"flex items-center gap-0.5",children:[...Array(5)].map((Re,tt)=>e.jsx(Dn,{className:`h-3 w-3 ${tt<Math.floor(ie.rating||4.5)?"fill-yellow-500 text-yellow-500":"text-muted-foreground"}`},tt))}),e.jsx("span",{className:"text-xs text-muted-foreground",children:ie.rating||4.5})]})]}),e.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2 mb-3",children:ie.description}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{children:(()=>{const Re=Pt.find(tt=>tt.productId===(ie._id||ie.id));if(Re){const tt=Re.discount,wt=tt.discountType==="percentage"?ie.price*tt.discountValue/100:tt.discountValue,bt=ie.price-wt;return e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-lg font-bold text-primary",children:["KES ",bt.toFixed(2)]}),e.jsxs(ze,{variant:"destructive",className:"text-xs animate-pulse",children:["-",tt.discountType==="percentage"?`${tt.discountValue}%`:`KES ${tt.discountValue}`]})]}),e.jsxs("span",{className:"text-xs text-muted-foreground line-through",children:["KES ",ie.price.toFixed(2)]})]})}return e.jsxs("span",{className:"text-lg font-bold text-primary",children:["KES ",(ie.price||0).toFixed(2)]})})()}),e.jsx(ze,{variant:"outline",className:"text-xs",children:ie.category||"General"})]})]}),e.jsxs(sd,{className:"p-4 pt-0 gap-2",children:[e.jsxs(I,{className:"flex-1 gap-2",onClick:Re=>{Re.stopPropagation(),ts(ie)},disabled:(ie.stockQuantity||ie.stock)===0,children:[e.jsx(Bs,{className:"h-4 w-4"}),(ie.stockQuantity||ie.stock)===0?"Out of Stock":"Add to Cart"]}),e.jsx(I,{variant:"outline",size:"icon",onClick:Re=>{Re.stopPropagation(),G(ie)},children:e.jsx(Pa,{className:"h-4 w-4"})})]})]},ie._id||ie.id))}),Ot.length===0&&!Mt&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(cs,{className:"h-16 w-16 mx-auto text-muted-foreground mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No products found"}),e.jsx("p",{className:"text-muted-foreground",children:"Try adjusting your search or filters"})]})]})]}),e.jsx(kt,{value:"services",className:"space-y-6",children:e.jsxs("div",{className:"space-y-4",children:[Z.length>0&&e.jsx(se,{className:"glass-card",children:e.jsxs(oe,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Fr,{className:"h-5 w-5 text-primary"}),e.jsxs("div",{className:"flex-1",children:[e.jsx(ue,{children:"Select Location"}),e.jsxs(Xt,{value:Ne?._id||Ne?.id,onValueChange:ie=>{const Re=Z.find(tt=>(tt._id||tt.id)===ie);pe(Re)},children:[e.jsx(Jt,{className:"mt-1",children:e.jsx(Qt,{placeholder:"Choose a location"})}),e.jsx(es,{children:Z.map(ie=>e.jsx(Ie,{value:ie._id||ie.id,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ou,{className:"h-4 w-4"}),ie.name," - ",ie.city]})},ie._id||ie.id))})]})]})]}),Ne&&e.jsxs("div",{className:"mt-3 p-3 bg-accent/20 rounded-lg",children:[e.jsx("p",{className:"text-sm font-medium",children:Ne.name}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[Ne.address,", ",Ne.city]}),Ne.phone&&e.jsxs("p",{className:"text-xs text-muted-foreground flex items-center gap-1 mt-1",children:[e.jsx(ia,{className:"h-3 w-3"})," ",Ne.phone]}),Ne.operatingHours&&e.jsxs("p",{className:"text-xs text-muted-foreground flex items-center gap-1",children:[e.jsx(ps,{className:"h-3 w-3"})," ",Ne.operatingHours]})]})]})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold text-foreground",children:"Our Services"}),e.jsxs("p",{className:"text-muted-foreground mt-1",children:["Professional services delivered by our expert team ",ce.length>0&&` ${ce.length} available`]})]}),ce.length>0&&e.jsxs(ze,{variant:"default",className:"text-sm px-4 py-2 animate-pulse",children:[e.jsx(Ms,{className:"h-4 w-4 mr-1"}),ce.length," Live Services"]})]}),Mt?e.jsx(se,{className:"glass-card",children:e.jsxs(oe,{className:"p-12 text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"Loading services..."})]})}):ce.length===0?e.jsx(se,{className:"glass-card",children:e.jsxs(oe,{className:"p-12 text-center",children:[e.jsx(Ms,{className:"h-16 w-16 mx-auto mb-4 text-muted-foreground"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No Services Available Yet"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"Services will appear here once the store owner adds them."}),e.jsx(I,{variant:"outline",onClick:()=>{window.location.reload()},children:"Refresh Page"})]})}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:ce.map(ie=>e.jsxs(se,{className:"glass-card hover:shadow-xl transition-all duration-300 group overflow-hidden",children:[e.jsxs("div",{className:"aspect-video bg-gradient-to-br from-primary/20 to-secondary/20 relative overflow-hidden",children:[ie.image?e.jsx("img",{src:ie.image,alt:ie.name,className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-300"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx(Ms,{className:"h-16 w-16 text-primary/40"})}),ie.category&&e.jsx("div",{className:"absolute top-3 right-3",children:e.jsx(ze,{className:"bg-white/90 text-foreground backdrop-blur-sm",children:ie.category})})]}),e.jsxs(_e,{className:"pb-3",children:[e.jsx(Te,{className:"text-xl mb-2 group-hover:text-primary transition-colors",children:ie.name}),e.jsxs(vt,{className:"flex items-center gap-2 justify-between",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(ps,{className:"h-4 w-4"}),ie.duration]}),e.jsxs(ze,{variant:"secondary",className:"gap-1",children:[e.jsx(fs,{className:"h-3 w-3"}),ie.staff," staff"]})]})]}),e.jsxs(oe,{children:[ie.description&&e.jsx("p",{className:"text-sm text-muted-foreground mb-3 line-clamp-2",children:ie.description}),e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[(()=>{const Re=Ze(ie._id||ie.id),tt=Number(ie.price)||0,wt=Re?Xe(tt,Re):null,bt=wt!==null?wt:tt,rs=isNaN(tt)?0:tt,gs=isNaN(bt)?0:bt;return e.jsxs("div",{className:"flex flex-col gap-1",children:[Re&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-sm text-muted-foreground line-through",children:["KES ",rs.toLocaleString()]}),e.jsxs(ze,{variant:"destructive",className:"text-xs",children:["-",Number(Re.value)||0,Re.type==="percentage"?"%":" KES"," OFF"]})]}),e.jsxs("span",{className:`text-2xl font-bold ${Re?"text-green-600":"text-primary"}`,children:["KES ",gs.toLocaleString()]})]})})(),e.jsx("div",{className:"flex items-center gap-1 text-yellow-500",children:[...Array(5)].map((Re,tt)=>e.jsx(Dn,{className:`h-4 w-4 ${tt<Math.floor(ie.rating||5)?"fill-current":"text-muted-foreground"}`},tt))})]}),ie.bookings>0&&e.jsxs("p",{className:"text-xs text-muted-foreground mb-3",children:[ie.bookings," bookings completed"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs(I,{variant:"outline",onClick:()=>{z(ie),R.info("Service details opened")},children:[e.jsx(Pa,{className:"h-4 w-4 mr-2"}),"Details"]}),e.jsxs(I,{onClick:()=>{z(ie),V(!0)},children:[e.jsx(Ms,{className:"h-4 w-4 mr-2"}),"Book Now"]})]})]})]},ie._id||ie.id))})]}),te.length>0&&e.jsxs("div",{children:[e.jsxs("h3",{className:"text-xl font-semibold mb-4 flex items-center gap-2",children:[e.jsx(fs,{className:"h-5 w-5"}),"Our Team"]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:te.slice(0,8).map(ie=>e.jsx(se,{className:"text-center glass-card",children:e.jsxs(oe,{className:"p-4",children:[e.jsx("div",{className:"h-16 w-16 rounded-full bg-gradient-to-br from-primary to-accent mx-auto mb-3 flex items-center justify-center",children:e.jsx(Aa,{className:"h-8 w-8 text-primary-foreground"})}),e.jsx("p",{className:"font-medium text-sm",children:ie.name}),e.jsx("p",{className:"text-xs text-muted-foreground",children:ie.role})]})},ie._id||ie.id))})]})]})}),e.jsx(kt,{value:"chats",className:"space-y-6",children:a?e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Messages"}),e.jsxs("p",{className:"text-muted-foreground",children:["Chat with ",xs.businessName]})]}),e.jsx(EK,{})]}):e.jsx(se,{className:"glass-card max-w-md mx-auto",children:e.jsxs(oe,{className:"p-12 text-center",children:[e.jsx(ja,{className:"h-16 w-16 mx-auto mb-4 text-muted-foreground"}),e.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Login Required"}),e.jsxs("p",{className:"text-muted-foreground mb-6",children:["Please sign in to chat with ",xs.businessName]}),e.jsxs(I,{onClick:()=>s("/client/login"),className:"gap-2",children:[e.jsx(Aa,{className:"h-4 w-4"}),"Sign In"]})]})})}),e.jsx(kt,{value:"orders",children:e.jsx(CK,{})}),e.jsx(kt,{value:"account",className:"space-y-6",children:a?e.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[e.jsxs(se,{className:"glass-card",children:[e.jsxs(_e,{children:[e.jsxs(Te,{className:"flex items-center gap-2",children:[e.jsx(Aa,{className:"h-5 w-5"}),"My Account"]}),e.jsx(vt,{children:"Manage your profile and preferences"})]}),e.jsx(oe,{className:"space-y-4",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"h-20 w-20 rounded-full bg-gradient-to-br from-primary to-accent flex items-center justify-center",children:e.jsx(Aa,{className:"h-10 w-10 text-primary-foreground"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-xl font-bold",children:a?.name||"Guest User"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:a?.email||"Not logged in"}),e.jsx(ze,{className:"mt-1",children:a?"Premium Member":"Guest"})]}),e.jsxs(I,{variant:"outline",size:"sm",onClick:()=>{a?($t({name:a.name||"",phone:a.phone||""}),$s(!0)):console.log("No customer to edit, just showing account tab")},children:[e.jsx(S1,{className:"h-4 w-4 mr-2"}),"Edit"]})]})})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsx(se,{className:"glass-card",children:e.jsxs(oe,{className:"p-4 text-center",children:[e.jsx(Bs,{className:"h-8 w-8 mx-auto mb-2 text-primary"}),e.jsx("p",{className:"text-2xl font-bold",children:A.length}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Cart Items"})]})}),e.jsx(se,{className:"glass-card",children:e.jsxs(oe,{className:"p-4 text-center",children:[e.jsx(Zo,{className:"h-8 w-8 mx-auto mb-2 text-red-500"}),e.jsx("p",{className:"text-2xl font-bold",children:me.length}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Wishlist"})]})}),e.jsx(se,{className:"glass-card",children:e.jsxs(oe,{className:"p-4 text-center",children:[e.jsx(Zl,{className:"h-8 w-8 mx-auto mb-2 text-accent"}),e.jsx("p",{className:"text-2xl font-bold",children:"0"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Orders"})]})}),e.jsx(se,{className:"glass-card",children:e.jsxs(oe,{className:"p-4 text-center",children:[e.jsx(Dn,{className:"h-8 w-8 mx-auto mb-2 text-yellow-500"}),e.jsx("p",{className:"text-2xl font-bold",children:"100"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Reward Points"})]})})]}),e.jsxs(se,{className:"glass-card",children:[e.jsx(_e,{children:e.jsx(Te,{className:"text-lg",children:"Quick Actions"})}),e.jsx(oe,{children:e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[e.jsxs(I,{variant:"outline",className:"h-auto flex-col gap-2 py-4",onClick:()=>ge("orders"),children:[e.jsx(Bs,{className:"h-6 w-6"}),e.jsx("span",{className:"text-sm",children:"View Orders"})]}),e.jsxs(I,{variant:"outline",className:"h-auto flex-col gap-2 py-4",onClick:()=>ge("shop"),children:[e.jsx(cs,{className:"h-6 w-6"}),e.jsx("span",{className:"text-sm",children:"Shop Products"})]}),e.jsxs(I,{variant:"outline",className:"h-auto flex-col gap-2 py-4",onClick:()=>ge("services"),children:[e.jsx(Ms,{className:"h-6 w-6"}),e.jsx("span",{className:"text-sm",children:"Book Service"})]}),e.jsxs(I,{variant:"outline",className:"h-auto flex-col gap-2 py-4",onClick:()=>s("/client/messages"),children:[e.jsx(ja,{className:"h-6 w-6"}),e.jsx("span",{className:"text-sm",children:"Messages"})]}),e.jsxs(I,{variant:"outline",className:"h-auto flex-col gap-2 py-4",onClick:()=>{$s(!0)},children:[e.jsx(Ya,{className:"h-6 w-6"}),e.jsx("span",{className:"text-sm",children:"Settings"})]})]})})]}),me.length>0&&e.jsxs(se,{className:"glass-card",children:[e.jsx(_e,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(Te,{className:"flex items-center gap-2",children:[e.jsx(Zo,{className:"h-5 w-5 text-red-500"}),"My Wishlist"]}),e.jsxs(ze,{children:[me.length," items"]})]})}),e.jsxs(oe,{children:[e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:me.slice(0,4).map(ie=>e.jsx(se,{className:"group cursor-pointer",onClick:()=>G(ie),children:e.jsxs(oe,{className:"p-3",children:[e.jsx("div",{className:"aspect-square bg-gradient-to-br from-secondary/30 to-primary/10 rounded-lg flex items-center justify-center mb-2 group-hover:scale-105 transition-transform",children:e.jsx(cs,{className:"h-8 w-8 text-primary/40"})}),e.jsx("p",{className:"text-sm font-medium line-clamp-1",children:ie.name}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["KES ",(ie.price||0).toLocaleString()]})]})},ie._id||ie.id))}),me.length>4&&e.jsxs(I,{variant:"outline",className:"w-full mt-4",onClick:()=>ge("shop"),children:["View All ",me.length," Items"]})]})]}),e.jsxs(se,{className:"glass-card bg-gradient-to-br from-primary/5 to-accent/5",children:[e.jsx(_e,{children:e.jsxs(Te,{className:"flex items-center gap-2",children:[e.jsx(Dn,{className:"h-5 w-5 text-yellow-500"}),"Rewards & Loyalty"]})}),e.jsxs(oe,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Current Points"}),e.jsx("span",{className:"text-2xl font-bold text-primary",children:"100"})]}),e.jsx("div",{className:"w-full bg-secondary rounded-full h-2",children:e.jsx("div",{className:"bg-primary h-2 rounded-full",style:{width:"20%"}})}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"400 more points to next reward"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"p-3 bg-card rounded-lg border",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Lifetime Points"}),e.jsx("p",{className:"text-lg font-bold",children:"100"})]}),e.jsxs("div",{className:"p-3 bg-card rounded-lg border",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Member Since"}),e.jsx("p",{className:"text-lg font-bold",children:"2025"})]})]})]})]}),e.jsxs(se,{className:"glass-card",children:[e.jsx(_e,{children:e.jsxs(Te,{className:"flex items-center gap-2",children:[e.jsx(ps,{className:"h-5 w-5"}),"Recent Activity"]})}),e.jsx(oe,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-accent/10 rounded-lg",children:[e.jsx(Bs,{className:"h-5 w-5 text-primary"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium",children:"Cart updated"}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[A.length," items in cart"]})]}),e.jsx(ze,{variant:"secondary",children:"Now"})]}),me.length>0&&e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-accent/10 rounded-lg",children:[e.jsx(Zo,{className:"h-5 w-5 text-red-500"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium",children:"Wishlist updated"}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[me.length," items saved"]})]}),e.jsx(ze,{variant:"secondary",children:"Recent"})]})]})})]}),e.jsx(TK,{}),e.jsxs(se,{className:"glass-card",children:[e.jsx(_e,{children:e.jsx(Te,{className:"text-lg",children:"Account Settings"})}),e.jsxs(oe,{className:"space-y-3",children:[e.jsxs(I,{variant:"outline",className:"w-full justify-between",onClick:()=>$s(!0),children:[e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(Aa,{className:"h-4 w-4"}),"Edit Profile"]}),e.jsx(S1,{className:"h-4 w-4"})]}),e.jsxs(I,{variant:"outline",className:"w-full justify-between",onClick:()=>ge("orders"),children:[e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(Zl,{className:"h-4 w-4"}),"Order History"]}),e.jsx(Pa,{className:"h-4 w-4"})]}),e.jsxs(I,{variant:"outline",className:"w-full justify-between",onClick:()=>ys(!0),children:[e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(Ya,{className:"h-4 w-4"}),"Theme Preferences"]}),e.jsx(Ya,{className:"h-4 w-4"})]}),e.jsx(I,{variant:"destructive",className:"w-full justify-between",onClick:Ce,children:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(op,{className:"h-4 w-4"}),"Logout"]})})]})]})]}):e.jsx(se,{className:"glass-card",children:e.jsxs(oe,{className:"p-12 text-center",children:[e.jsx(Aa,{className:"h-16 w-16 mx-auto mb-4 text-muted-foreground"}),e.jsx("h3",{className:"text-xl font-bold mb-2",children:"Sign In Required"}),e.jsx("p",{className:"text-muted-foreground mb-6",children:"Please log in to access your account, orders, and personalized features"}),e.jsxs("div",{className:"flex gap-3 justify-center",children:[e.jsx(I,{onClick:()=>ge("account"),children:"Sign In"}),e.jsx(I,{variant:"outline",onClick:()=>s(`/client/register/${t}`),children:"Create Account"})]})]})})})]})}),e.jsx(LG,{product:P,open:!!P,onClose:()=>G(null),onAddToCart:ts}),K&&e.jsx(Gt,{open:!!K,onOpenChange:()=>z(null),children:e.jsxs(qt,{className:"max-w-2xl",children:[e.jsxs(Kt,{children:[e.jsx(Yt,{className:"text-2xl",children:K.name}),e.jsx(vs,{children:"Complete service details and booking information"})]}),e.jsxs("div",{className:"space-y-4",children:[K.image&&e.jsx("div",{className:"aspect-video rounded-lg overflow-hidden",children:e.jsx("img",{src:K.image,alt:K.name,className:"w-full h-full object-cover"})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(se,{children:e.jsxs(oe,{className:"p-4 flex items-center gap-3",children:[e.jsx(Sa,{className:"h-8 w-8 text-green-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Price"}),e.jsxs("p",{className:"text-xl font-bold",children:["KES ",(K.price||0).toLocaleString()]})]})]})}),e.jsx(se,{children:e.jsxs(oe,{className:"p-4 flex items-center gap-3",children:[e.jsx(ps,{className:"h-8 w-8 text-blue-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Duration"}),e.jsx("p",{className:"text-xl font-bold",children:K.duration})]})]})})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-2",children:"Description"}),e.jsx("p",{className:"text-muted-foreground",children:K.description||"Professional service provided by our expert team."})]}),e.jsxs("div",{className:"flex items-center gap-6 pt-2 border-t",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Dn,{className:"h-5 w-5 text-yellow-500 fill-yellow-500"}),e.jsxs("span",{className:"font-semibold",children:[K.rating||5,"/5"]})]}),K.bookings>0&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ms,{className:"h-5 w-5 text-primary"}),e.jsxs("span",{className:"font-semibold",children:[K.bookings," bookings"]})]})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx(I,{variant:"outline",className:"flex-1",onClick:()=>z(null),children:"Close"}),e.jsxs(I,{className:"flex-1",onClick:()=>{ge("services"),R.success(`Selected: ${K.name}`),z(null)},children:[e.jsx(Ms,{className:"h-4 w-4 mr-2"}),"Book Service"]})]})]})]})}),e.jsx(Gt,{open:bs,onOpenChange:$s,children:e.jsxs(qt,{className:"sm:max-w-md",children:[e.jsxs(Kt,{children:[e.jsx(Yt,{children:"Edit Profile"}),e.jsx(vs,{children:"Update your personal information"})]}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(ue,{htmlFor:"edit-name",children:"Full Name"}),e.jsxs("div",{className:"relative",children:[e.jsx(Aa,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(we,{id:"edit-name",value:ws.name,onChange:ie=>$t({...ws,name:ie.target.value}),className:"pl-10",placeholder:"Your full name"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ue,{htmlFor:"edit-phone",children:"Phone Number"}),e.jsxs("div",{className:"relative",children:[e.jsx(ia,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(we,{id:"edit-phone",value:ws.phone,onChange:ie=>$t({...ws,phone:ie.target.value}),className:"pl-10",placeholder:"+254 700 000 000"})]})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx(I,{variant:"outline",className:"flex-1",onClick:()=>$s(!1),children:"Cancel"}),e.jsxs(I,{className:"flex-1 gap-2",onClick:Ps,children:[e.jsx(Ko,{className:"h-4 w-4"}),"Save Changes"]})]})]})]})}),e.jsx(VG,{open:J,onClose:()=>W(!1),cartItems:A,cartTotal:D,onClearCart:U}),e.jsx(_K,{open:he,onClose:()=>{V(!1),z(null)},service:K}),e.jsx(K4,{})]})})},MK=({product:t,isOpen:s,onClose:a})=>{const[n,i]=N.useState(1),[c,d]=N.useState(!1);if(!t)return null;const f=(E=>E>20?{label:"In Stock",variant:"default",color:"text-green-600",icon:Xi}:E>0?{label:"Low Stock",variant:"secondary",color:"text-orange-600",icon:Ws}:{label:"Out of Stock",variant:"destructive",color:"text-red-600",icon:Ws})(t.stockQuantity||0),g=f.icon,v=(t.currency||"USD")==="KES"?"KES":"$",y=(t.price*n).toFixed(2),_=Math.min(t.stockQuantity||0,99),S=()=>{R.success(`Added ${n} ${t.name} to cart`,{description:`Total: $${y}`,icon:""}),a()},b=()=>{navigator.share?navigator.share({title:t.name,text:`Check out ${t.name} - $${t.price}`,url:window.location.href}).catch(()=>{navigator.clipboard.writeText(window.location.href),R.success("Link copied to clipboard!")}):(navigator.clipboard.writeText(window.location.href),R.success("Link copied to clipboard!"))},T=()=>{d(!c),R.success(c?"Removed from favorites":"Added to favorites",{icon:c?"":""})};return e.jsx(Gt,{open:s,onOpenChange:a,children:e.jsxs(qt,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(Kt,{children:[e.jsxs(Yt,{className:"text-2xl font-bold flex items-center gap-2",children:[e.jsx(cs,{className:"h-6 w-6 text-primary"}),"Product Details"]}),e.jsx(vs,{children:"Complete information about this product"})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6 py-4",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"aspect-square relative overflow-hidden rounded-xl border-2 border-primary/20 bg-primary/10 shadow-2xl",children:[e.jsx("img",{src:t.image||`https://via.placeholder.com/500x500?text=${encodeURIComponent(t.name)}`,alt:t.name,className:"object-cover w-full h-full hover:scale-110 transition-all duration-500"}),e.jsx("div",{className:"absolute inset-0 bg-black/10 opacity-0 hover:opacity-100 transition-opacity duration-300"}),t.featured&&e.jsxs(ze,{className:"absolute top-4 right-4 bg-yellow-500 text-white border-0 shadow-lg animate-pulse",children:[e.jsx(Ga,{className:"h-3 w-3 mr-1"}),"Featured"]}),t.stockQuantity>0&&t.stockQuantity<=5&&e.jsxs(ze,{className:"absolute top-4 left-4 bg-red-500 text-white border-0 shadow-lg",children:[e.jsx(Ws,{className:"h-3 w-3 mr-1"}),"Only ",t.stockQuantity," left!"]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(I,{variant:"outline",className:"flex-1",onClick:T,children:[e.jsx(Zo,{className:ut("h-4 w-4 mr-2",c&&"fill-red-500 text-red-500")}),c?"Favorited":"Add to Favorites"]}),e.jsx(I,{variant:"outline",onClick:b,children:e.jsx(Pu,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx("h3",{className:"text-4xl font-bold text-foreground leading-tight",children:t.name}),e.jsxs("div",{className:"flex items-center gap-4 flex-wrap",children:[e.jsxs("div",{className:"bg-green-600 text-white px-6 py-3 rounded-xl shadow-lg",children:[e.jsx("span",{className:"text-sm font-medium opacity-90",children:"Price"}),e.jsxs("div",{className:"text-3xl font-bold",children:[v," ",t.price?.toFixed(2)||"0.00"]})]}),e.jsxs(ze,{variant:f.variant,className:"gap-2 px-4 py-2 text-base",children:[e.jsx(g,{className:"h-4 w-4"}),f.label]})]}),t.description&&e.jsx("p",{className:"text-lg text-muted-foreground leading-relaxed",children:t.description})]}),e.jsx(bi,{}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"flex items-start gap-3 p-4 rounded-xl bg-primary/10 border border-primary/20 hover:shadow-md transition-shadow",children:[e.jsx(tc,{className:"h-5 w-5 text-primary mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Category"}),e.jsx("p",{className:"font-semibold",children:t.category||"Uncategorized"})]})]}),e.jsxs("div",{className:"flex items-start gap-3 p-4 rounded-xl bg-primary/10 border border-primary/20 hover:shadow-md transition-shadow",children:[e.jsx(cs,{className:"h-5 w-5 text-primary mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"SKU"}),e.jsx("p",{className:"font-semibold font-mono",children:t.sku||"N/A"})]})]}),e.jsxs("div",{className:"flex items-start gap-3 p-4 rounded-xl bg-primary/10 border border-primary/20 hover:shadow-md transition-shadow",children:[e.jsx(z_,{className:"h-5 w-5 text-primary mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Available Stock"}),e.jsxs("p",{className:ut("font-semibold text-lg",f.color),children:[t.stockQuantity||0," units"]})]})]}),e.jsxs("div",{className:"flex items-start gap-3 p-4 rounded-xl bg-primary/10 border border-primary/20 hover:shadow-md transition-shadow",children:[e.jsx(Ws,{className:"h-5 w-5 text-primary mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Reorder Level"}),e.jsxs("p",{className:"font-semibold",children:[t.reorderLevel||5," units"]})]})]})]}),t.supplierName&&e.jsxs("div",{className:"flex items-start gap-3 p-4 rounded-lg border bg-card",children:[e.jsx(Mu,{className:"h-5 w-5 text-primary mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Supplier"}),e.jsx("p",{className:"font-semibold",children:t.supplierName})]})]}),e.jsx(bi,{}),t.stockQuantity>0&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("label",{className:"text-sm font-medium",children:"Quantity:"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(I,{variant:"outline",size:"sm",onClick:()=>i(Math.max(1,n-1)),disabled:n<=1,children:"-"}),e.jsx("span",{className:"w-12 text-center font-semibold",children:n}),e.jsx(I,{variant:"outline",size:"sm",onClick:()=>i(Math.min(_,n+1)),disabled:n>=_,children:"+"})]}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:["(Max: ",_,")"]})]}),e.jsxs("div",{className:"flex items-center justify-between p-5 bg-primary/15 rounded-xl border-2 border-primary/30 shadow-inner",children:[e.jsx("span",{className:"text-lg font-semibold",children:"Total Price:"}),e.jsxs("span",{className:"text-3xl font-bold text-green-600",children:[v," ",y]})]}),e.jsxs(I,{className:"w-full gap-2 h-14 text-lg font-bold bg-green-600 hover:bg-green-700 shadow-lg hover:shadow-xl transition-all duration-300",onClick:S,children:[e.jsx(Bs,{className:"h-5 w-5"}),"Add to Cart"]})]}),t.stockQuantity===0&&e.jsxs("div",{className:"p-4 bg-red-50 dark:bg-red-950/20 border border-red-200 dark:border-red-900 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 text-red-600 dark:text-red-400",children:[e.jsx(Ws,{className:"h-5 w-5"}),e.jsx("p",{className:"font-semibold",children:"This product is currently out of stock"})]}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Please check back later or contact us for availability."})]}),t.createdAt&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground pt-2",children:[e.jsx(Ms,{className:"h-4 w-4"}),e.jsxs("span",{children:["Added on ",new Date(t.createdAt).toLocaleDateString()]})]})]})]}),e.jsx(ea,{children:e.jsx(I,{variant:"outline",onClick:a,children:"Close"})})]})})},RK=()=>{const t=_n(),{isAuthenticated:s}=qs(),{add:a,count:n}=zj(),[i,c]=N.useState([]),[d,h]=N.useState(!0),[f,g]=N.useState(""),[p,v]=N.useState("all"),[y,_]=N.useState("grid"),[S,b]=N.useState(null),[T,E]=N.useState(!1),[A,O]=N.useState(null);N.useEffect(()=>{Q()},[]);const Q=async()=>{h(!0);try{const z=localStorage.getItem("token"),J=await ke.get("/products",{headers:z?{Authorization:`Bearer ${z}`}:{}});c(J.data||[]),(!J.data||J.data.length===0)&&R.info("No products found. Add products to get started!")}catch(z){console.error("Error fetching products:",z),R.error("Failed to load products. Please check your connection."),c([])}finally{h(!1)}},q=["all",...new Set(i.map(z=>z.category))],U=i.filter(z=>{const J=z.name?.toLowerCase().includes(f.toLowerCase())||z.description?.toLowerCase().includes(f.toLowerCase()),W=p==="all"||z.category===p;return J&&W}),D=z=>z>20?{label:"In Stock",variant:"default"}:z>0?{label:"Low Stock",variant:"secondary"}:{label:"Out of Stock",variant:"destructive"},M=z=>{b(z),E(!0)},P=()=>{E(!1),setTimeout(()=>b(null),300)},G=z=>{O(z._id||z.id),a(z,1),R.success(e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Xi,{className:"h-4 w-4 text-green-500"}),e.jsxs("span",{children:[z.name," added to cart"]})]})),setTimeout(()=>O(null),1e3)},K=()=>{t("/dashboard/checkout")};return e.jsxs("div",{className:"space-y-6 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(I,{variant:"outline",size:"sm",onClick:()=>t(-1),children:[e.jsx(U_,{className:"h-4 w-4 mr-2"}),"Back"]}),e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold text-foreground flex items-center gap-2",children:[e.jsx(cs,{className:"h-8 w-8 text-green-600"}),"Product Store"]}),e.jsx("p",{className:"text-muted-foreground",children:"Browse and manage all available products"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(I,{variant:"outline",onClick:K,className:"relative",children:[e.jsx(Bs,{className:"h-4 w-4 mr-2"}),"Cart",n>0&&e.jsx("span",{className:"absolute -top-2 -right-2 bg-green-600 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:n})]}),e.jsx(I,{variant:y==="grid"?"default":"outline",size:"sm",onClick:()=>_("grid"),children:e.jsx(BD,{className:"h-4 w-4"})}),e.jsx(I,{variant:y==="list"?"default":"outline",size:"sm",onClick:()=>_("list"),children:e.jsx(zD,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{className:"grid gap-6 md:grid-cols-4",children:[e.jsxs(se,{children:[e.jsxs(_e,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(Te,{className:"text-sm font-medium",children:"Total Products"}),e.jsx(cs,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(oe,{children:[e.jsx("div",{className:"text-2xl font-bold",children:i.length}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[U.length," shown"]})]})]}),e.jsxs(se,{children:[e.jsxs(_e,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(Te,{className:"text-sm font-medium",children:"Total Value"}),e.jsx(Sa,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(oe,{children:[e.jsxs("div",{className:"text-2xl font-bold",children:["KES ",i.reduce((z,J)=>z+(J.price*J.stockQuantity||0),0).toLocaleString()]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Inventory value"})]})]}),e.jsxs(se,{children:[e.jsxs(_e,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(Te,{className:"text-sm font-medium",children:"Categories"}),e.jsx(ll,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(oe,{children:[e.jsx("div",{className:"text-2xl font-bold",children:q.length-1}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Product categories"})]})]}),e.jsxs(se,{children:[e.jsxs(_e,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(Te,{className:"text-sm font-medium",children:"Low Stock Items"}),e.jsx(cs,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(oe,{children:[e.jsx("div",{className:"text-2xl font-bold text-orange-600",children:i.filter(z=>z.stockQuantity<20&&z.stockQuantity>0).length}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Need restocking"})]})]})]}),e.jsx(se,{children:e.jsx(oe,{className:"pt-6",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(Da,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(we,{placeholder:"Search products by name or description...",value:f,onChange:z=>g(z.target.value),className:"pl-10"})]}),e.jsxs(Xt,{value:p,onValueChange:v,children:[e.jsx(Jt,{className:"w-full md:w-[200px]",children:e.jsx(Qt,{placeholder:"Filter by category"})}),e.jsx(es,{children:q.map(z=>e.jsx(Ie,{value:z,children:z==="all"?"All Categories":z},z))})]})]})})}),d?e.jsx(se,{children:e.jsxs(oe,{className:"p-8 text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"Loading products..."})]})}):U.length===0?e.jsx(se,{children:e.jsxs(oe,{className:"p-8 text-center",children:[e.jsx(cs,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No products found"}),e.jsx("p",{className:"text-muted-foreground",children:f||p!=="all"?"Try adjusting your search or filters":"No products available in the store"})]})}):e.jsx("div",{className:y==="grid"?"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6":"space-y-4",children:U.map(z=>{const J=D(z.stockQuantity||0);return y==="grid"?e.jsxs(se,{className:"hover:shadow-lg transition-shadow",children:[e.jsxs(_e,{children:[e.jsx("div",{className:"aspect-square relative overflow-hidden rounded-md bg-muted mb-4",children:e.jsx("img",{src:z.image||`https://via.placeholder.com/300x300?text=${encodeURIComponent(z.name)}`,alt:z.name,className:"object-cover w-full h-full"})}),e.jsx(Te,{className:"line-clamp-1",children:z.name}),e.jsx(vt,{className:"line-clamp-2",children:z.description||"No description available"})]}),e.jsx(oe,{children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"text-2xl font-bold text-green-600",children:["KES ",z.price?.toLocaleString()||"0"]}),e.jsx(ze,{variant:J.variant,children:J.label})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm text-muted-foreground",children:[e.jsx("span",{children:z.category||"Uncategorized"}),e.jsxs("span",{children:["Stock: ",z.stockQuantity||0]})]})]})}),e.jsxs(sd,{className:"flex gap-2",children:[e.jsxs(I,{className:"flex-1",variant:"outline",onClick:()=>M(z),children:[e.jsx(Pa,{className:"h-4 w-4 mr-2"}),"Details"]}),e.jsx(I,{className:"flex-1",onClick:()=>G(z),disabled:z.stockQuantity<=0||A===(z._id||z.id),children:A===(z._id||z.id)?e.jsxs(e.Fragment,{children:[e.jsx(Xi,{className:"h-4 w-4 mr-2"}),"Added!"]}):e.jsxs(e.Fragment,{children:[e.jsx(Bs,{className:"h-4 w-4 mr-2"}),"Add to Cart"]})})]})]},z._id||z.id):e.jsx(se,{className:"hover:shadow-md transition-shadow",children:e.jsx(oe,{className:"p-6",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-24 h-24 relative overflow-hidden rounded-md bg-muted flex-shrink-0",children:e.jsx("img",{src:z.image||`https://via.placeholder.com/100x100?text=${encodeURIComponent(z.name)}`,alt:z.name,className:"object-cover w-full h-full"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-lg mb-1",children:z.name}),e.jsx("p",{className:"text-sm text-muted-foreground mb-2 line-clamp-1",children:z.description||"No description available"}),e.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[e.jsx(ze,{variant:"outline",children:z.category||"Uncategorized"}),e.jsxs("span",{className:"text-muted-foreground",children:["Stock: ",z.stockQuantity||0]}),e.jsx(ze,{variant:J.variant,children:J.label})]})]}),e.jsxs("div",{className:"flex flex-col items-end gap-2",children:[e.jsxs("span",{className:"text-2xl font-bold text-green-600",children:["KES ",z.price?.toLocaleString()||"0"]}),e.jsxs(I,{variant:"outline",size:"sm",onClick:()=>M(z),children:[e.jsx(Pa,{className:"h-4 w-4 mr-2"}),"View"]})]})]})})},z._id||z.id)})}),e.jsx(MK,{product:S,isOpen:T,onClose:P})]})},LK=[{id:1,name:"Premium Hair Treatment",category:"Services",price:2500,image:"",description:"Professional hair treatment with organic products",stock:"Available"},{id:2,name:"Manicure & Pedicure",category:"Services",price:1500,image:"",description:"Complete nail care service",stock:"Available"},{id:3,name:"Organic Shampoo",category:"Products",price:800,image:"",description:"Natural ingredients for healthy hair",stock:"In Stock"},{id:4,name:"Face Massage",category:"Services",price:2e3,image:"",description:"Relaxing facial massage therapy",stock:"Available"},{id:5,name:"Hair Dryer Pro",category:"Products",price:3500,image:"",description:"Professional grade hair dryer",stock:"In Stock"},{id:6,name:"Spa Package",category:"Services",price:5e3,image:"",description:"Full day spa experience",stock:"Available"}],IK=()=>{const[t,s]=N.useState(""),[a,n]=N.useState("all"),[i,c]=N.useState([]),d=LK.filter(v=>{const y=v.name.toLowerCase().includes(t.toLowerCase()),_=a==="all"||v.category===a;return y&&_}),h=v=>{c(y=>y.find(S=>S.id===v.id)?y.map(S=>S.id===v.id?{...S,quantity:S.quantity+1}:S):[...y,{id:v.id,name:v.name,price:v.price,quantity:1}]),R.success(`${v.name} added to cart`)},f=(v,y)=>{c(_=>_.map(S=>S.id===v?{...S,quantity:Math.max(0,S.quantity+y)}:S).filter(S=>S.quantity>0))},g=i.reduce((v,y)=>v+y.price*y.quantity,0),p=i.reduce((v,y)=>v+y.quantity,0);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Product Catalog"}),e.jsx("p",{className:"text-muted-foreground",children:"Browse our products and services"})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs(ze,{variant:"secondary",className:"text-lg py-2 px-4",children:[e.jsx(Bs,{className:"h-4 w-4 mr-2"}),p," items"]})})]}),e.jsx(se,{children:e.jsx(oe,{className:"p-4",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(Da,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),e.jsx(we,{placeholder:"Search products or services...",value:t,onChange:v=>s(v.target.value),className:"pl-10"})]}),e.jsxs(Xt,{value:a,onValueChange:n,children:[e.jsxs(Jt,{className:"w-full sm:w-48",children:[e.jsx(ll,{className:"h-4 w-4 mr-2"}),e.jsx(Qt,{placeholder:"Category"})]}),e.jsxs(es,{children:[e.jsx(Ie,{value:"all",children:"All Categories"}),e.jsx(Ie,{value:"Services",children:"Services"}),e.jsx(Ie,{value:"Products",children:"Products"})]})]})]})})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:d.map(v=>e.jsxs(se,{className:"card-hover",children:[e.jsxs(_e,{children:[e.jsx("div",{className:"text-5xl mb-4 text-center",children:v.image}),e.jsx(Te,{children:v.name}),e.jsx(vt,{children:v.description})]}),e.jsxs(oe,{children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"text-2xl font-bold text-primary",children:["KES ",v.price.toLocaleString()]}),e.jsx(ze,{variant:"outline",children:v.stock})]}),e.jsx(ze,{className:"mt-2",children:v.category})]}),e.jsx(sd,{children:e.jsxs(I,{onClick:()=>h(v),className:"w-full",children:[e.jsx(Bs,{className:"h-4 w-4 mr-2"}),"Add to Cart"]})})]},v.id))}),i.length>0&&e.jsxs(se,{className:"border-primary",children:[e.jsx(_e,{children:e.jsxs(Te,{children:["Shopping Cart (",p," items)"]})}),e.jsx(oe,{className:"space-y-4",children:i.map(v=>e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium",children:v.name}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["KES ",v.price.toLocaleString()," each"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(I,{variant:"outline",size:"icon",onClick:()=>f(v.id,-1),children:e.jsx(Em,{className:"h-4 w-4"})}),e.jsx("span",{className:"w-8 text-center font-medium",children:v.quantity}),e.jsx(I,{variant:"outline",size:"icon",onClick:()=>f(v.id,1),children:e.jsx(ha,{className:"h-4 w-4"})}),e.jsxs("div",{className:"w-32 text-right font-bold",children:["KES ",(v.price*v.quantity).toLocaleString()]})]})]},v.id))}),e.jsxs(sd,{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"w-full flex justify-between items-center text-xl font-bold",children:[e.jsx("span",{children:"Total:"}),e.jsxs("span",{className:"text-primary",children:["KES ",g.toLocaleString()]})]}),e.jsx(I,{className:"w-full",size:"lg",children:"Proceed to Checkout"})]})]})]})},qx=[{id:1,name:"Premium Hair Treatment",duration:"1 hour",price:2500},{id:2,name:"Manicure & Pedicure",duration:"45 min",price:1500},{id:3,name:"Face Massage",duration:"30 min",price:2e3},{id:4,name:"Spa Package",duration:"2 hours",price:5e3}],FK=["09:00 AM","10:00 AM","11:00 AM","12:00 PM","01:00 PM","02:00 PM","03:00 PM","04:00 PM","05:00 PM"],BK=()=>{const[t,s]=N.useState(),[a,n]=N.useState(""),[i,c]=N.useState(""),[d,h]=N.useState({name:"",phone:"",email:"",notes:""}),[f,g]=N.useState(1),p=async y=>{if(y.preventDefault(),!a||!t||!i){R.error("Please complete all required fields");return}try{const _={customerName:d.name,service:qx.find(T=>T.id.toString()===a)?.name||a,time:new Date(`${t?.toISOString().split("T")[0]}T${i.replace(" ","")}`),durationMinutes:parseInt((qx.find(T=>T.id.toString()===a)?.duration||"0").replace(/[^0-9]/g,""),10)||60,notes:d.notes,email:d.email},S=localStorage.getItem("token"),b=window.location.pathname.split("/").pop();S?await ke.post("/appointments",_):await ke.post("/public/appointments",{..._,inviteCode:b}),R.success("Appointment booked successfully! We'll send you a confirmation shortly.",{icon:e.jsx(ks,{className:"h-5 w-5"})}),g(1),s(void 0),n(""),c(""),h({name:"",phone:"",email:"",notes:""})}catch(_){console.error("Failed to book appointment",_),R.error("Failed to book appointment. Please try again.")}},v=qx.find(y=>y.id.toString()===a);return e.jsxs("div",{className:"space-y-6 max-w-4xl mx-auto",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Book an Appointment"}),e.jsx("p",{className:"text-muted-foreground",children:"Schedule your service in 3 easy steps"})]}),e.jsx("div",{className:"flex justify-between items-center mb-8",children:[1,2,3].map(y=>e.jsxs("div",{className:"flex items-center flex-1",children:[e.jsx("div",{className:`flex items-center justify-center w-10 h-10 rounded-full font-bold ${f>=y?"bg-primary text-primary-foreground":"bg-muted text-muted-foreground"}`,children:y}),y<3&&e.jsx("div",{className:`flex-1 h-1 mx-2 ${f>y?"bg-primary":"bg-muted"}`})]},y))}),e.jsxs("form",{onSubmit:p,className:"space-y-6",children:[f===1&&e.jsxs(se,{children:[e.jsxs(_e,{children:[e.jsxs(Te,{className:"flex items-center gap-2",children:[e.jsx(Aa,{className:"h-5 w-5"}),"Choose Your Service"]}),e.jsx(vt,{children:"Select the service you'd like to book"})]}),e.jsx(oe,{className:"space-y-4",children:e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:qx.map(y=>e.jsx(se,{className:`cursor-pointer transition-all ${a===y.id.toString()?"border-primary ring-2 ring-primary":"hover:border-primary/50"}`,onClick:()=>n(y.id.toString()),children:e.jsxs(_e,{children:[e.jsx(Te,{className:"text-lg",children:y.name}),e.jsxs(vt,{className:"flex justify-between",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(ps,{className:"h-4 w-4"}),y.duration]}),e.jsxs("span",{className:"font-bold text-primary",children:["KES ",y.price.toLocaleString()]})]})]})},y.id))})}),e.jsx(sd,{children:e.jsx(I,{type:"button",onClick:()=>g(2),disabled:!a,className:"w-full",children:"Continue to Date & Time"})})]}),f===2&&e.jsxs(se,{children:[e.jsxs(_e,{children:[e.jsxs(Te,{className:"flex items-center gap-2",children:[e.jsx(Ms,{className:"h-5 w-5"}),"Select Date & Time"]}),e.jsx(vt,{children:"Choose your preferred appointment slot"})]}),e.jsx(oe,{className:"space-y-6",children:e.jsxs("div",{className:"flex flex-col lg:flex-row gap-6",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx(ue,{children:"Select Date"}),e.jsx(kA,{mode:"single",selected:t,onSelect:s,disabled:y=>y<new Date,className:"rounded-md border mt-2"})]}),e.jsxs("div",{className:"flex-1 space-y-4",children:[e.jsxs("div",{children:[e.jsx(ue,{children:"Select Time"}),e.jsxs(Xt,{value:i,onValueChange:c,children:[e.jsx(Jt,{className:"mt-2",children:e.jsx(Qt,{placeholder:"Choose a time slot"})}),e.jsx(es,{children:FK.map(y=>e.jsx(Ie,{value:y,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ps,{className:"h-4 w-4"}),y]})},y))})]})]}),v&&t&&i&&e.jsxs(se,{className:"bg-accent",children:[e.jsx(_e,{children:e.jsx(Te,{className:"text-base",children:"Booking Summary"})}),e.jsxs(oe,{className:"space-y-2 text-sm",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Service:"})," ",v.name]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Date:"})," ",t.toLocaleDateString()]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Time:"})," ",i]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Duration:"})," ",v.duration]}),e.jsxs("p",{className:"text-lg font-bold text-primary mt-2",children:["Total: KES ",v.price.toLocaleString()]})]})]})]})]})}),e.jsxs(sd,{className:"flex gap-4",children:[e.jsx(I,{type:"button",variant:"outline",onClick:()=>g(1),className:"flex-1",children:"Back"}),e.jsx(I,{type:"button",onClick:()=>g(3),disabled:!t||!i,className:"flex-1",children:"Continue to Contact Info"})]})]}),f===3&&e.jsxs(se,{children:[e.jsxs(_e,{children:[e.jsxs(Te,{className:"flex items-center gap-2",children:[e.jsx(Aa,{className:"h-5 w-5"}),"Your Contact Information"]}),e.jsx(vt,{children:"We'll use this to confirm your appointment"})]}),e.jsxs(oe,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(ue,{htmlFor:"name",children:"Full Name *"}),e.jsx(we,{id:"name",placeholder:"John Doe",value:d.name,onChange:y=>h({...d,name:y.target.value}),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ue,{htmlFor:"phone",children:"Phone Number *"}),e.jsxs("div",{className:"relative",children:[e.jsx(ia,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),e.jsx(we,{id:"phone",placeholder:"0712345678",className:"pl-10",value:d.phone,onChange:y=>h({...d,phone:y.target.value}),required:!0})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ue,{htmlFor:"email",children:"Email Address *"}),e.jsxs("div",{className:"relative",children:[e.jsx(fa,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),e.jsx(we,{id:"email",type:"email",placeholder:"john@example.com",className:"pl-10",value:d.email,onChange:y=>h({...d,email:y.target.value}),required:!0})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ue,{htmlFor:"notes",children:"Additional Notes (Optional)"}),e.jsx(Gs,{id:"notes",placeholder:"Any special requests or requirements...",value:d.notes,onChange:y=>h({...d,notes:y.target.value}),rows:4})]})]}),e.jsxs(sd,{className:"flex gap-4",children:[e.jsx(I,{type:"button",variant:"outline",onClick:()=>g(2),className:"flex-1",children:"Back"}),e.jsxs(I,{type:"submit",className:"flex-1",children:[e.jsx(ks,{className:"h-4 w-4 mr-2"}),"Confirm Booking"]})]})]})]})]})},x_=[{id:1,service:"Premium Hair Treatment",date:"2025-10-15",time:"10:00 AM",duration:"1 hour",status:"confirmed",price:2500,location:"Main Branch",staff:"Sarah Johnson"},{id:2,service:"Spa Package",date:"2025-10-20",time:"02:00 PM",duration:"2 hours",status:"pending",price:5e3,location:"Downtown Branch",staff:"Michael Chen"},{id:3,service:"Manicure & Pedicure",date:"2025-09-28",time:"11:00 AM",duration:"45 min",status:"completed",price:1500,location:"Main Branch",staff:"Emily Davis"}],zK=()=>{const t=c=>{switch(c){case"confirmed":return e.jsxs(ze,{className:"bg-success",children:[e.jsx(ks,{className:"h-3 w-3 mr-1"}),"Confirmed"]});case"pending":return e.jsxs(ze,{variant:"secondary",children:[e.jsx(Ws,{className:"h-3 w-3 mr-1"}),"Pending"]});case"completed":return e.jsxs(ze,{variant:"outline",children:[e.jsx(ks,{className:"h-3 w-3 mr-1"}),"Completed"]});case"cancelled":return e.jsxs(ze,{variant:"destructive",children:[e.jsx(cr,{className:"h-3 w-3 mr-1"}),"Cancelled"]});default:return e.jsx(ze,{children:c})}},s=c=>{R.success("Booking cancelled successfully")},a=c=>{R.info("Reschedule feature coming soon!")},n=x_.filter(c=>c.status!=="completed"&&c.status!=="cancelled"),i=x_.filter(c=>c.status==="completed"||c.status==="cancelled");return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"My Bookings"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage your appointments and view history"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h2",{className:"text-xl font-semibold text-foreground",children:"Upcoming Appointments"}),n.length>0?e.jsx("div",{className:"grid grid-cols-1 gap-4",children:n.map(c=>e.jsxs(se,{className:"card-hover",children:[e.jsx(_e,{children:e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsxs("div",{children:[e.jsx(Te,{className:"text-xl",children:c.service}),e.jsxs(vt,{className:"mt-1",children:["Booking ID: #",c.id.toString().padStart(4,"0")]})]}),t(c.status)]})}),e.jsxs(oe,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[e.jsx(Ms,{className:"h-4 w-4"}),e.jsx("span",{children:new Date(c.date).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]}),e.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[e.jsx(ps,{className:"h-4 w-4"}),e.jsxs("span",{children:[c.time," (",c.duration,")"]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[e.jsx(Fr,{className:"h-4 w-4"}),e.jsx("span",{children:c.location})]}),e.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[e.jsx(ia,{className:"h-4 w-4"}),e.jsxs("span",{children:["Staff: ",c.staff]})]})]}),e.jsx(bi,{}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsxs("div",{className:"text-xl font-bold text-primary",children:["Total: KES ",c.price.toLocaleString()]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(I,{variant:"outline",onClick:()=>a(c.id),children:"Reschedule"}),c.status!=="completed"&&e.jsx(I,{variant:"destructive",onClick:()=>s(c.id),children:"Cancel"})]})]})]})]},c.id))}):e.jsx(se,{children:e.jsxs(oe,{className:"py-12 text-center",children:[e.jsx(Ms,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"No upcoming bookings"}),e.jsx(I,{className:"mt-4",children:"Book an Appointment"})]})})]}),i.length>0&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("h2",{className:"text-xl font-semibold text-foreground",children:"Past Appointments"}),e.jsx("div",{className:"grid grid-cols-1 gap-4",children:i.map(c=>e.jsxs(se,{className:"opacity-75",children:[e.jsx(_e,{children:e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsxs("div",{children:[e.jsx(Te,{className:"text-lg",children:c.service}),e.jsxs(vt,{children:[new Date(c.date).toLocaleDateString()," at ",c.time]})]}),t(c.status)]})}),e.jsx(oe,{children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:c.location}),e.jsxs("span",{className:"font-semibold",children:["KES ",c.price.toLocaleString()]})]})})]},c.id))})]})]})},UK=()=>{const t=_n(),{inviteCode:s}=ol(),{login:a,customer:n,isAuthenticated:i,loading:c}=pd(),d=N.useRef(!1),[h,f]=N.useState(!1),[g,p]=N.useState(!1),[v,y]=N.useState({email:"",password:""});N.useEffect(()=>{if(!d.current&&!c&&i&&n){d.current=!0,console.log(" Already logged in, redirecting to storefront");const b=s?`/client/store/${s}`:"/client/store";t(b,{replace:!0})}},[c,i,n,s,t]);const _=b=>{y({...v,[b.target.name]:b.target.value})},S=async b=>{b.preventDefault(),p(!0);try{console.log(" Attempting login...");const T=await a(v);if(T.success){console.log(" Login component: Login successful"),R.success(`Welcome Back ${T.customer?.name||""}!`),await new Promise(A=>setTimeout(A,400));const E=s?`/client/store/${s}`:"/client/store";console.log(" Navigating to:",E),t(E,{replace:!0})}else R.error(T.error||"Login failed")}catch(T){console.error(" Login error:",T),R.error("Login failed. Please try again.")}finally{p(!1)}};return c?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-primary/5 via-background to-accent/5 flex items-center justify-center p-4",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"Loading..."})]})}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-primary/5 via-background to-accent/5 flex items-center justify-center p-4",children:e.jsxs(se,{className:"w-full max-w-md shadow-lg border-primary/10",children:[e.jsxs(_e,{className:"space-y-4 text-center",children:[e.jsx("div",{className:"mx-auto h-16 w-16 rounded-full bg-primary/10 flex items-center justify-center",children:e.jsx(sr,{className:"h-8 w-8 text-primary"})}),e.jsxs("div",{children:[e.jsx(Te,{className:"text-2xl",children:"Welcome Back! "}),e.jsx(vt,{className:"mt-2",children:"Log in to continue shopping"})]})]}),e.jsx(oe,{children:e.jsxs("form",{onSubmit:S,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(ue,{htmlFor:"email",children:"Email"}),e.jsxs("div",{className:"relative",children:[e.jsx(fa,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-500"}),e.jsx(we,{id:"email",name:"email",type:"email",placeholder:"john@example.com",value:v.email,onChange:_,className:"pl-10",required:!0})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ue,{htmlFor:"password",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(sr,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-500"}),e.jsx(we,{id:"password",name:"password",type:h?"text":"password",placeholder:"",value:v.password,onChange:_,className:"pl-10 pr-10",required:!0}),e.jsx("button",{type:"button",onClick:()=>f(!h),className:"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground transition-colors",children:h?e.jsx(od,{className:"h-4 w-4"}):e.jsx(Pa,{className:"h-4 w-4"})})]})]}),e.jsx(I,{type:"submit",className:"w-full gap-2",disabled:g,children:g?"Logging In...":e.jsxs(e.Fragment,{children:[e.jsx(sr,{className:"h-4 w-4"}),"Log In"]})}),e.jsxs("div",{className:"text-xs text-center text-muted-foreground",children:["Don't have an account?"," ",e.jsxs(is,{to:`/client/signup/${s}`,className:"text-primary hover:underline inline-flex items-center gap-1 ml-1",children:[e.jsx(td,{className:"h-3 w-3"}),"Sign Up"]})]}),e.jsx("div",{className:"pt-4 border-t",children:e.jsxs("p",{className:"text-xs text-center text-muted-foreground",children:[e.jsx(sr,{className:"inline h-3 w-3 mr-1"})," Secure Login  Your data is protected"]})})]})})]})})},VK=()=>{const{customer:t}=pd(),{socket:s,connected:a}=Ra(),[n,i]=N.useState(null),[c,d]=N.useState([]),[h,f]=N.useState(""),[g,p]=N.useState(!1),[v,y]=N.useState({}),_=N.useRef(null);N.useEffect(()=>{t&&b()},[t]),N.useEffect(()=>(n&&s&&a&&(s.emit("join_conversation",n.id),S()),()=>{n&&s&&(s.emit("leave_conversation",n.id),s.off("message_received"),s.off("user_typing"),s.off("user_stopped_typing"))}),[n,s,a]),N.useEffect(()=>{O()},[c]);const S=()=>{s&&(s.on("message_received",q=>{n&&q.conversationId===n.id&&d(U=>[...U,q])}),s.on("user_typing",({conversationId:q,userId:U,userName:D})=>{n?.id===q&&U!==t._id&&y(M=>({...M,[U]:D}))}),s.on("user_stopped_typing",({conversationId:q,userId:U})=>{n?.id===q&&y(D=>{const M={...D};return delete M[U],M})}))},b=async()=>{try{const q=localStorage.getItem("customerToken");if(!q){console.log("No customer token found");return}const U=await ke.get("/messages/conversations",{headers:{Authorization:`Bearer ${q}`}});if(U.data.conversations&&U.data.conversations.length>0){const D=U.data.conversations[0];i(D),T(D.id)}else i({id:null,name:"Business Owner",isOnline:!1})}catch(q){console.error("Error loading conversation:",q),i({id:null,name:"Business Owner",isOnline:!1})}},T=async q=>{try{const U=localStorage.getItem("customerToken"),D=await ke.get(`/messages/conversations/${q}`,{headers:{Authorization:`Bearer ${U}`}});d(D.data.messages||[])}catch(U){console.error("Error loading messages:",U)}},E=async q=>{if(q.preventDefault(),!h.trim()||!t)return;const U=h.trim(),D=Date.now(),M={id:D,conversationId:n?.id,senderId:t._id,senderName:t.name,content:U,timestamp:new Date,status:"sending"};d(P=>[...P,M]),f("");try{const P=localStorage.getItem("customerToken");if(n?.id)s&&a?s.emit("send_message",{conversationId:n.id,message:U,senderId:t._id,senderName:t.name}):await ke.post("/messages/send",{conversationId:n.id,content:U},{headers:{Authorization:`Bearer ${P}`}}),d(G=>G.map(K=>K.id===D?{...K,status:"sent"}:K));else{const G=await ke.post("/messages/conversations",{businessOwnerId:t.invitedBy,customerName:t.name,customerEmail:t.email,customerPhone:t.phone},{headers:{Authorization:`Bearer ${P}`}});if(G.data.success){const K=G.data.conversation;i({id:K.id,name:"Business Owner",isOnline:!1}),await ke.post("/messages/send",{conversationId:K.id,content:U},{headers:{Authorization:`Bearer ${P}`}}),d(z=>z.map(J=>J.id===D?{...J,status:"sent",conversationId:K.id}:J)),s&&a&&s.emit("join_conversation",K.id)}}}catch(P){console.error("Error sending message:",P),R.error("Failed to send message"),d(G=>G.map(K=>K.id===D?{...K,status:"failed"}:K))}},A=()=>{!g&&n&&s&&(p(!0),s.emit("typing_start",{conversationId:n.id,userId:t._id,userName:t.name}),setTimeout(()=>{p(!1),s.emit("typing_stop",{conversationId:n.id,userId:t._id})},3e3))},O=()=>{_.current?.scrollIntoView({behavior:"smooth"})},Q=q=>{switch(q){case"sent":return e.jsx(To,{className:"h-3 w-3"});case"delivered":return e.jsx(Zi,{className:"h-3 w-3"});case"read":return e.jsx(Zi,{className:"h-3 w-3 text-blue-500"});default:return e.jsx(ps,{className:"h-3 w-3"})}};return t?e.jsxs("div",{className:"h-screen p-4 md:p-6",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("h1",{className:"text-2xl md:text-3xl font-bold",children:"Messages"}),e.jsxs("p",{className:"text-muted-foreground",children:["Chat with ",n?.name||"Business Owner","  ",a?" Connected":" Offline"]})]}),e.jsx(se,{className:"h-[calc(100vh-12rem)] flex flex-col",children:n?e.jsxs(e.Fragment,{children:[e.jsx(_e,{className:"border-b py-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Pn,{className:"h-10 w-10",children:e.jsx(On,{children:n.name[0]})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:n.name}),e.jsx("p",{className:"text-xs text-muted-foreground",children:n.isOnline?"Active now":"Offline"})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(I,{variant:"ghost",size:"icon",onClick:()=>R.info("Voice call - Coming soon"),children:e.jsx(ia,{className:"h-4 w-4"})}),e.jsx(I,{variant:"ghost",size:"icon",onClick:()=>R.info("Video call - Coming soon"),children:e.jsx(za,{className:"h-4 w-4"})}),e.jsx(I,{variant:"ghost",size:"icon",children:e.jsx(nj,{className:"h-4 w-4"})})]})]})}),e.jsx(oe,{className:"flex-1 p-4 overflow-hidden",children:e.jsx(xr,{className:"h-full pr-4",children:e.jsxs("div",{className:"space-y-4",children:[c.map(q=>{const U=q.senderId===t._id;return e.jsx("div",{className:`flex ${U?"justify-end":"justify-start"}`,children:e.jsxs("div",{className:`max-w-[70%] rounded-lg p-3 ${U?"bg-primary text-primary-foreground":"bg-muted"}`,children:[!U&&e.jsx("p",{className:"text-xs font-semibold mb-1",children:q.senderName}),e.jsx("p",{className:"text-sm",children:q.content}),e.jsxs("div",{className:"flex items-center gap-1 mt-1 justify-end",children:[e.jsx("span",{className:"text-xs opacity-70",children:new Date(q.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}),U&&Q(q.status)]})]})},q.id)}),Object.keys(v).length>0&&e.jsx("div",{className:"flex justify-start",children:e.jsx("div",{className:"bg-muted rounded-lg p-3",children:e.jsxs("div",{className:"flex gap-1",children:[e.jsx("div",{className:"w-2 h-2 bg-gray-500 rounded-full animate-bounce"}),e.jsx("div",{className:"w-2 h-2 bg-gray-500 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),e.jsx("div",{className:"w-2 h-2 bg-gray-500 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})})}),e.jsx("div",{ref:_})]})})}),e.jsx("div",{className:"border-t p-4",children:e.jsxs("form",{onSubmit:E,className:"flex gap-2",children:[e.jsx(I,{type:"button",variant:"ghost",size:"icon",children:e.jsx(Ru,{className:"h-5 w-5"})}),e.jsx(we,{value:h,onChange:q=>{f(q.target.value),A()},placeholder:"Type a message...",className:"flex-1"}),e.jsx(I,{type:"button",variant:"ghost",size:"icon",children:e.jsx(rj,{className:"h-5 w-5"})}),e.jsx(I,{type:"submit",disabled:!h.trim(),children:e.jsx(mn,{className:"h-4 w-4"})})]})})]}):e.jsx("div",{className:"flex-1 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(ja,{className:"h-16 w-16 text-muted-foreground mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No Conversation"}),e.jsx("p",{className:"text-muted-foreground",children:"Start a conversation with the business owner"})]})})})]}):e.jsx("div",{className:"flex items-center justify-center h-screen",children:e.jsx(se,{className:"p-6",children:e.jsx("p",{className:"text-muted-foreground",children:"Please log in to access messages"})})})},HK=()=>{const{socket:t}=Ra(),[s,a]=N.useState([]),[n,i]=N.useState(!0),[c,d]=N.useState(!1),[h,f]=N.useState(null),[g,p]=N.useState({title:"",description:"",sessionType:"meeting",scheduledStartTime:"",scheduledEndTime:"",participants:[],maxParticipants:100,enableRecording:!1,waitingRoomEnabled:!1}),[v,y]=N.useState({email:"",name:""});N.useEffect(()=>{_()},[]),N.useEffect(()=>{if(t)return t.on("session_started",q),t.on("session_ended",U),t.on("participant_joined",D),()=>{t.off("session_started"),t.off("session_ended"),t.off("participant_joined")}},[t]);const _=async()=>{try{const z=localStorage.getItem("token"),J=await ke.get("/sessions",{headers:{Authorization:`Bearer ${z}`}});a(J.data)}catch(z){console.error("Fetch sessions error:",z),R.error("Failed to load sessions")}finally{i(!1)}},S=async()=>{try{if(!g.title||!g.scheduledStartTime||!g.scheduledEndTime){R.error("Title, start time, and end time are required");return}const z=new Date(g.scheduledStartTime),J=new Date(g.scheduledEndTime);if(isNaN(z.getTime())||isNaN(J.getTime())){R.error("Invalid date format for start or end time");return}if(J<=z){R.error("End time must be after start time");return}const W=localStorage.getItem("token"),he={...g,maxParticipants:parseInt(g.maxParticipants,10)||100,scheduledStartTime:z.toISOString(),scheduledEndTime:J.toISOString()},V=await ke.post("/sessions",he,{headers:{Authorization:`Bearer ${W}`}});a([V.data,...s]),d(!1),Q(),R.success("Session created and invitations sent!")}catch(z){console.error("Create session error:",z),R.error(z.response?.data?.error||"Failed to create session")}},b=async z=>{try{const J=localStorage.getItem("token"),W=await ke.post(`/sessions/${z}/start`,{},{headers:{Authorization:`Bearer ${J}`}});a(s.map(he=>he._id===z?W.data:he)),R.success("Session started! Participants have been notified.")}catch(J){R.error(J.response?.data?.error||"Failed to start session")}},T=async z=>{try{const J=localStorage.getItem("token"),W=await ke.post(`/sessions/${z}/end`,{},{headers:{Authorization:`Bearer ${J}`}});a(s.map(he=>he._id===z?W.data:he)),R.success("Session ended")}catch(J){R.error(J.response?.data?.error||"Failed to end session")}},E=z=>{const W=`${window.location.origin}/session/join/${z.accessLink}`;navigator.clipboard.writeText(W),f(z._id),R.success("Link copied to clipboard!"),setTimeout(()=>f(null),2e3)},A=()=>{if(!v.email||!v.name){R.error("Email and name are required");return}p({...g,participants:[...g.participants,v]}),y({email:"",name:""})},O=z=>{p({...g,participants:g.participants.filter((J,W)=>W!==z)})},Q=()=>{p({title:"",description:"",sessionType:"meeting",scheduledStartTime:"",scheduledEndTime:"",participants:[],maxParticipants:100,enableRecording:!1,waitingRoomEnabled:!1})},q=z=>{R.success(`Session "${z.title}" has started!`),_()},U=z=>{R.info("Session has ended"),_()},D=z=>{R.info(`${z.participant.name} joined the session`)},M=z=>{const J={scheduled:"default",live:"destructive",ended:"secondary",cancelled:"outline"};return e.jsx(ze,{variant:J[z],children:z.toUpperCase()})},P=s.filter(z=>z.status==="scheduled"&&new Date(z.scheduledStartTime)>new Date),G=s.filter(z=>z.status==="live"),K=s.filter(z=>z.status==="ended");return e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Live Sessions & Webinars"}),e.jsx("p",{className:"text-muted-foreground",children:"Schedule and manage video sessions with clients"})]}),e.jsxs(I,{onClick:()=>d(!0),children:[e.jsx(za,{className:"w-4 h-4 mr-2"}),"Schedule Session"]})]}),e.jsx("div",{className:"mb-4",children:e.jsxs(is,{to:"/dashboard/security-dashboard",className:"inline-flex items-center px-4 py-2 bg-blue-100 text-blue-700 rounded hover:bg-blue-200 font-medium",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2 text-blue-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 2l7 4v6c0 5.25-3.5 10-7 10s-7-4.75-7-10V6l7-4z"})}),"Security Dashboard"]})}),e.jsxs(Ha,{defaultValue:"upcoming",children:[e.jsxs(Xa,{children:[e.jsxs(Tt,{value:"upcoming",children:["Upcoming (",P.length,")"]}),e.jsxs(Tt,{value:"live",children:["Live (",G.length,")"]}),e.jsxs(Tt,{value:"past",children:["Past (",K.length,")"]})]}),e.jsxs(kt,{value:"upcoming",className:"space-y-4",children:[P.map(z=>e.jsxs(se,{children:[e.jsx(_e,{children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx(Te,{children:z.title}),e.jsx(vt,{children:z.description})]}),M(z.status)]})}),e.jsxs(oe,{children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ms,{className:"w-4 h-4"}),e.jsx("span",{children:new Date(z.scheduledStartTime).toLocaleDateString()})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ps,{className:"w-4 h-4"}),e.jsx("span",{children:new Date(z.scheduledStartTime).toLocaleTimeString()})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(fs,{className:"w-4 h-4"}),e.jsxs("span",{children:[z.participants.length," participants"]})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx(ze,{variant:"outline",children:z.sessionType})})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(I,{variant:"default",onClick:()=>b(z._id),disabled:!$K(z),children:[e.jsx(Cu,{className:"w-4 h-4 mr-2"}),"Start Session"]}),e.jsxs(I,{variant:"outline",onClick:()=>E(z),children:[h===z._id?e.jsx(To,{className:"w-4 h-4 mr-2"}):e.jsx(Wv,{className:"w-4 h-4 mr-2"}),"Copy Link"]})]})]})]},z._id)),P.length===0&&e.jsx(se,{children:e.jsxs(oe,{className:"text-center py-12",children:[e.jsx(Ms,{className:"w-12 h-12 mx-auto text-muted-foreground mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"No upcoming sessions"})]})})]}),e.jsxs(kt,{value:"live",className:"space-y-4",children:[G.map(z=>e.jsxs(se,{className:"border-green-500",children:[e.jsx(_e,{children:e.jsx("div",{className:"flex justify-between items-start",children:e.jsx("div",{children:e.jsxs(Te,{className:"flex items-center gap-2",children:[z.title,e.jsx(ze,{variant:"destructive",className:"animate-pulse",children:"LIVE"})]})})})}),e.jsx(oe,{children:e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(I,{variant:"default",onClick:()=>window.open(`/session/join/${z.accessLink}`,"_blank"),children:[e.jsx(za,{className:"w-4 h-4 mr-2"}),"Join Session"]}),e.jsxs(I,{variant:"destructive",onClick:()=>T(z._id),children:[e.jsx(UD,{className:"w-4 h-4 mr-2"}),"End Session"]}),e.jsxs(I,{variant:"outline",onClick:()=>E(z),children:[e.jsx(Pu,{className:"w-4 h-4 mr-2"}),"Share"]})]})})]},z._id)),G.length===0&&e.jsx(se,{children:e.jsxs(oe,{className:"text-center py-12",children:[e.jsx(za,{className:"w-12 h-12 mx-auto text-muted-foreground mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"No live sessions"})]})})]}),e.jsx(kt,{value:"past",className:"space-y-4",children:K.slice(0,10).map(z=>e.jsxs(se,{children:[e.jsxs(_e,{children:[e.jsx(Te,{children:z.title}),e.jsxs(vt,{children:[new Date(z.actualStartTime).toLocaleString()," - ",z.totalDuration?`${Math.floor(z.totalDuration/60)} min`:"N/A"]})]}),e.jsx(oe,{children:e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Peak participants: ",z.peakParticipants]})})]},z._id))})]}),e.jsx(Gt,{open:c,onOpenChange:d,children:e.jsxs(qt,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(Kt,{children:[e.jsx(Yt,{children:"Schedule a Live Session"}),e.jsx(vs,{children:"Create a video session or webinar with clients"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(ue,{children:"Title *"}),e.jsx(we,{value:g.title,onChange:z=>p({...g,title:z.target.value}),placeholder:"e.g., Product Demo, Support Call, Training"})]}),e.jsxs("div",{children:[e.jsx(ue,{children:"Description"}),e.jsx(Gs,{value:g.description,onChange:z=>p({...g,description:z.target.value}),placeholder:"What is this session about?",rows:3})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(ue,{children:"Session Type"}),e.jsxs(Xt,{value:g.sessionType,onValueChange:z=>p({...g,sessionType:z}),children:[e.jsx(Jt,{children:e.jsx(Qt,{})}),e.jsxs(es,{children:[e.jsx(Ie,{value:"meeting",children:"Meeting"}),e.jsx(Ie,{value:"webinar",children:"Webinar"}),e.jsx(Ie,{value:"support_call",children:"Support Call"}),e.jsx(Ie,{value:"training",children:"Training"}),e.jsx(Ie,{value:"demo",children:"Demo"}),e.jsx(Ie,{value:"consultation",children:"Consultation"})]})]})]}),e.jsxs("div",{children:[e.jsx(ue,{children:"Max Participants"}),e.jsx(we,{type:"number",min:"1",value:g.maxParticipants||"",onChange:z=>p({...g,maxParticipants:z.target.value?parseInt(z.target.value,10):100})})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(ue,{children:"Start Time *"}),e.jsx(we,{type:"datetime-local",value:g.scheduledStartTime,onChange:z=>p({...g,scheduledStartTime:z.target.value})})]}),e.jsxs("div",{children:[e.jsx(ue,{children:"End Time *"}),e.jsx(we,{type:"datetime-local",value:g.scheduledEndTime,onChange:z=>p({...g,scheduledEndTime:z.target.value})})]})]}),e.jsxs("div",{children:[e.jsx(ue,{children:"Add Participants"}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsx(we,{placeholder:"Email",value:v.email,onChange:z=>y({...v,email:z.target.value})}),e.jsx(we,{placeholder:"Name",value:v.name,onChange:z=>y({...v,name:z.target.value})}),e.jsx(I,{onClick:A,children:e.jsx(td,{className:"w-4 h-4"})})]}),g.participants.length>0&&e.jsx("div",{className:"space-y-2",children:g.participants.map((z,J)=>e.jsxs("div",{className:"flex justify-between items-center p-2 bg-secondary rounded",children:[e.jsxs("span",{children:[z.name," (",z.email,")"]}),e.jsx(I,{variant:"ghost",size:"sm",onClick:()=>O(J),children:""})]},J))})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs(I,{onClick:S,className:"flex-1",children:[e.jsx(fa,{className:"w-4 h-4 mr-2"}),"Create & Send Invites"]}),e.jsx(I,{variant:"outline",onClick:()=>d(!1),children:"Cancel"})]})]})]})})]})},$K=t=>{const s=new Date,a=new Date(t.scheduledStartTime),n=new Date(a.getTime()-900*1e3);return s>=n&&t.status==="scheduled"},WK=()=>{const{accessLink:t}=ol(),s=_n(),{socket:a}=Ra(),[n,i]=N.useState(null),[c,d]=N.useState(!0),[h,f]=N.useState(!1),[g,p]=N.useState(!1),[v,y]=N.useState({email:"",name:"",password:""}),[_,S]=N.useState({videoEnabled:!0,audioEnabled:!0}),b=N.useRef(null),T=N.useRef({}),E=N.useRef({}),A=N.useRef(null);N.useEffect(()=>{O()},[t]),N.useEffect(()=>(g&&a&&(q(),U()),()=>{ge()}),[g,a]);const O=async()=>{try{const Z=await ke.get(`/sessions/join/${t}`);i(Z.data),d(!1)}catch(Z){console.error("Fetch session error:",Z),R.error("Session not found"),d(!1)}},Q=async()=>{if(!v.email||!v.name){R.error("Email and name are required");return}f(!0);try{const Z=await ke.post(`/sessions/${t}/join`,v);if(Z.data.status==="waiting"){R.info(Z.data.message),f(!1);return}Z.data.status==="joined"&&(p(!0),i(ee=>({...ee,...Z.data.session})),R.success("Joined session successfully!"))}catch(Z){console.error("Join session error:",Z),R.error(Z.response?.data?.error||"Failed to join session")}finally{f(!1)}},q=async()=>{try{const Z=await navigator.mediaDevices.getUserMedia({video:_.videoEnabled,audio:_.audioEnabled});A.current=Z,b.current&&(b.current.srcObject=Z),a.emit("webrtc:join-room",{roomId:n.webrtcRoomId,userId:v.email,userName:v.name,callType:"video"})}catch(Z){console.error("Media access error:",Z),R.error("Failed to access camera/microphone")}},U=()=>{a.on("webrtc:joined-room",D),a.on("webrtc:user-joined",M),a.on("webrtc:offer",G),a.on("webrtc:answer",K),a.on("webrtc:ice-candidate",z),a.on("webrtc:user-left",J),a.on("session_ended",W)},D=Z=>{console.log("Joined room:",Z),Z.participants.forEach(ee=>{P(ee.socketId,!0)})},M=Z=>{console.log("User joined:",Z),R.info(`${Z.userName} joined`),P(Z.socketId,!1)},P=async(Z,ee)=>{const te=new RTCPeerConnection({iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:"stun:stun1.l.google.com:19302"}]});if(E.current[Z]=te,A.current&&A.current.getTracks().forEach(X=>{te.addTrack(X,A.current)}),te.ontrack=X=>{const[ce]=X.streams;if(!T.current[Z]){const F=document.createElement("video");F.autoplay=!0,F.srcObject=ce,F.className="w-full h-full object-cover rounded",document.getElementById("remote-videos")?.appendChild(F),T.current[Z]=F}},te.onicecandidate=X=>{X.candidate&&a.emit("webrtc:ice-candidate",{to:Z,candidate:X.candidate,roomId:n.webrtcRoomId})},ee){const X=await te.createOffer();await te.setLocalDescription(X),a.emit("webrtc:offer",{to:Z,offer:X,roomId:n.webrtcRoomId})}},G=async Z=>{const ee=E.current[Z.from];if(ee){await ee.setRemoteDescription(new RTCSessionDescription(Z.offer));const te=await ee.createAnswer();await ee.setLocalDescription(te),a.emit("webrtc:answer",{to:Z.from,answer:te,roomId:n.webrtcRoomId})}},K=async Z=>{const ee=E.current[Z.from];ee&&await ee.setRemoteDescription(new RTCSessionDescription(Z.answer))},z=async Z=>{const ee=E.current[Z.from];ee&&Z.candidate&&await ee.addIceCandidate(new RTCIceCandidate(Z.candidate))},J=Z=>{console.log("User left:",Z),E.current[Z.socketId]&&(E.current[Z.socketId].close(),delete E.current[Z.socketId]),T.current[Z.socketId]&&(T.current[Z.socketId].remove(),delete T.current[Z.socketId])},W=()=>{R.info("Session has ended"),ge(),s("/")},he=()=>{if(A.current){const Z=A.current.getVideoTracks()[0];Z&&(Z.enabled=!Z.enabled,S(ee=>({...ee,videoEnabled:Z.enabled})),a.emit("webrtc:toggle-video",{enabled:Z.enabled}))}},V=()=>{if(A.current){const Z=A.current.getAudioTracks()[0];Z&&(Z.enabled=!Z.enabled,S(ee=>({...ee,audioEnabled:Z.enabled})),a.emit("webrtc:toggle-audio",{enabled:Z.enabled}))}},ae=()=>{a.emit("webrtc:end-call"),ge(),s("/")},ge=()=>{A.current&&(A.current.getTracks().forEach(Z=>Z.stop()),A.current=null),Object.values(E.current).forEach(Z=>Z.close()),E.current={},Object.values(T.current).forEach(Z=>Z.remove()),T.current={}};return c?e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsx(Hi,{className:"w-8 h-8 animate-spin"})}):n?g?e.jsxs("div",{className:"h-screen bg-black flex flex-col",children:[e.jsxs("div",{className:"flex-1 grid grid-cols-2 gap-2 p-4",children:[e.jsxs("div",{className:"relative bg-gray-900 rounded-lg overflow-hidden",children:[e.jsx("video",{ref:b,autoPlay:!0,muted:!0,playsInline:!0,className:"w-full h-full object-cover"}),e.jsx("div",{className:"absolute bottom-2 left-2 bg-black/50 px-2 py-1 rounded text-white text-sm",children:"You"})]}),e.jsx("div",{id:"remote-videos",className:"grid grid-cols-2 gap-2"})]}),e.jsxs("div",{className:"bg-gray-900 p-4 flex items-center justify-between",children:[e.jsxs("div",{className:"text-white",children:[e.jsx("h3",{className:"font-semibold",children:n.title}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Hosted by ",n.host?.name]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(I,{variant:_.audioEnabled?"default":"destructive",size:"icon",onClick:V,children:_.audioEnabled?e.jsx(Cm,{className:"w-4 h-4"}):e.jsx(Tm,{className:"w-4 h-4"})}),e.jsx(I,{variant:_.videoEnabled?"default":"destructive",size:"icon",onClick:he,children:_.videoEnabled?e.jsx(za,{className:"w-4 h-4"}):e.jsx(lp,{className:"w-4 h-4"})}),e.jsxs(I,{variant:"destructive",onClick:ae,children:[e.jsx(ia,{className:"w-4 h-4 mr-2"}),"Leave"]})]})]})]}):e.jsx("div",{className:"flex items-center justify-center min-h-screen p-4",children:e.jsxs(se,{className:"max-w-md w-full",children:[e.jsxs(_e,{children:[e.jsx(Te,{children:n.title}),e.jsx(vt,{children:n.description})]}),e.jsxs(oe,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(ps,{className:"w-4 h-4"}),e.jsx("span",{children:new Date(n.scheduledStartTime).toLocaleString()})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(fs,{className:"w-4 h-4"}),e.jsxs("span",{children:[n.currentParticipants," / ",n.maxParticipants," participants"]})]}),e.jsx(ze,{children:n.sessionType}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx(ue,{children:"Your Name *"}),e.jsx(we,{value:v.name,onChange:Z=>y({...v,name:Z.target.value}),placeholder:"Enter your name"})]}),e.jsxs("div",{children:[e.jsx(ue,{children:"Your Email *"}),e.jsx(we,{type:"email",value:v.email,onChange:Z=>y({...v,email:Z.target.value}),placeholder:"your@email.com"})]}),n.requiresPassword&&e.jsxs("div",{children:[e.jsx(ue,{children:"Session Password"}),e.jsx(we,{type:"password",value:v.password,onChange:Z=>y({...v,password:Z.target.value}),placeholder:"Enter password"})]}),e.jsxs(I,{onClick:Q,disabled:h,className:"w-full",children:[h?e.jsx(Hi,{className:"w-4 h-4 mr-2 animate-spin"}):e.jsx(za,{className:"w-4 h-4 mr-2"}),"Join Session"]})]})]})]})}):e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsx(se,{className:"max-w-md",children:e.jsxs(_e,{children:[e.jsx(Ws,{className:"w-12 h-12 mx-auto text-destructive mb-4"}),e.jsx(Te,{children:"Session Not Found"}),e.jsx(vt,{children:"This session link is invalid or has expired"})]})})})},GK=()=>{const{socket:t,connected:s}=Ra(),{user:a}=qs(),[n,i]=N.useState([]),[c,d]=N.useState(0),[h,f]=N.useState(!1);N.useEffect(()=>{if(!(!t||!a))return t.on("new_message_notification",T=>{const E={id:Date.now(),type:"message",title:"New Message",message:`${T.from}: ${T.preview}`,timestamp:new Date,read:!1,data:T};g(E),R.info(e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(ja,{className:"h-5 w-5 text-blue-500 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:T.from}),e.jsx("p",{className:"text-sm text-muted-foreground",children:T.preview})]})]}),{duration:5e3})}),t.on("message_received",T=>{if(T.senderId!==a._id){const E={id:Date.now(),type:"message",title:"Message Reply",message:`${T.senderName}: ${T.content.substring(0,50)}${T.content.length>50?"...":""}`,timestamp:new Date(T.timestamp),read:!1,data:{conversationId:T.conversationId,messageId:T.id}};g(E),R.info(e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(ja,{className:"h-5 w-5 text-blue-500 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:T.senderName}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[T.content.substring(0,50),T.content.length>50?"...":""]})]})]}),{duration:5e3})}}),t.on("order_notification",T=>{const E={id:Date.now(),type:"order",title:"Order Update",message:`Order #${T.orderNumber||"N/A"} - ${T.status||"Updated"}`,timestamp:new Date,read:!1,data:T};g(E),R.success(e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Bs,{className:"h-5 w-5 text-green-500 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:"Order Update"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:E.message})]})]}),{duration:5e3})}),t.on("system_notification",T=>{const E={id:Date.now(),type:"system",title:T.title||"System Alert",message:T.message,timestamp:new Date,read:!1,data:T};g(E),R(e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(ur,{className:"h-5 w-5 text-orange-500 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:E.title}),e.jsx("p",{className:"text-sm text-muted-foreground",children:E.message})]})]}),{duration:5e3})}),t.on("role_updated",async T=>{console.log(" Role updated:",T);const E={id:Date.now(),type:"role_update",title:" Admin Privileges Granted!",message:`Your account has been upgraded to ${T.newRole.toUpperCase()}. Refreshing your session...`,timestamp:new Date,read:!1,data:T};g(E);try{const{refreshUserProfile:A}=await dl(async()=>{const{refreshUserProfile:O}=await Promise.resolve().then(()=>vO);return{refreshUserProfile:O}},void 0);A&&(await A(),console.log(" User profile refreshed with new role"))}catch(A){console.error("Error refreshing user profile:",A)}R.success(e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(ur,{className:"h-5 w-5 text-green-500 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:E.title}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Your privileges have been updated! Refreshing page..."})]})]}),{duration:3e3,action:{label:"Refresh Now",onClick:()=>window.location.reload()}}),setTimeout(()=>{window.location.reload()},3e3)}),()=>{t.off("new_message_notification"),t.off("message_received"),t.off("order_notification"),t.off("system_notification"),t.off("role_updated")}},[t,a]);const g=T=>{i(E=>[T,...E].slice(0,50)),d(E=>E+1)},p=T=>{i(E=>E.map(A=>A.id===T?{...A,read:!0}:A)),d(E=>Math.max(0,E-1))},v=()=>{i(T=>T.map(E=>({...E,read:!0}))),d(0)},y=T=>{const E=n.find(A=>A.id===T);i(A=>A.filter(O=>O.id!==T)),E&&!E.read&&d(A=>Math.max(0,A-1))},_=()=>{i([]),d(0)},S=T=>{switch(T){case"message":return e.jsx(ja,{className:"h-5 w-5 text-blue-500"});case"order":return e.jsx(Bs,{className:"h-5 w-5 text-green-500"});case"appointment":return e.jsx(Ms,{className:"h-5 w-5 text-purple-500"});default:return e.jsx(ur,{className:"h-5 w-5 text-orange-500"})}},b=T=>{T.read||p(T.id)};return e.jsxs($4,{open:h,onOpenChange:f,children:[e.jsx(W4,{asChild:!0,children:e.jsxs(I,{variant:"ghost",size:"icon",className:"relative",children:[e.jsx(ur,{className:"h-5 w-5"}),c>0&&e.jsx(ze,{className:"absolute -top-1 -right-1 h-5 w-5 flex items-center justify-center p-0 text-xs",variant:"destructive",children:c>9?"9+":c})]})}),e.jsxs(mj,{className:"w-[380px] p-0",align:"end",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:"Notifications"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:c>0?`${c} unread`:"All caught up!"})]}),e.jsxs("div",{className:"flex gap-1",children:[c>0&&e.jsx(I,{variant:"ghost",size:"sm",onClick:v,className:"h-8 px-2 text-xs",children:e.jsx(Zi,{className:"h-3 w-3"})}),n.length>0&&e.jsx(I,{variant:"ghost",size:"sm",onClick:_,className:"h-8 px-2 text-xs",children:e.jsx(Ua,{className:"h-3 w-3"})}),e.jsx(I,{variant:"ghost",size:"sm",onClick:()=>f(!1),className:"h-8 px-2",children:e.jsx(nr,{className:"h-4 w-4"})})]})]}),n.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[e.jsx(ur,{className:"h-12 w-12 text-muted-foreground mb-3 opacity-50"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"No notifications"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"You're all caught up!"})]}):e.jsx(xr,{className:"h-[400px]",children:e.jsx("div",{className:"p-2",children:n.map(T=>e.jsxs("div",{onClick:()=>b(T),className:`relative p-3 rounded-lg mb-2 cursor-pointer transition-colors ${T.read?"bg-background hover:bg-accent":"bg-primary/5 hover:bg-primary/10"}`,children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"mt-0.5",children:S(T.type)}),e.jsxs("div",{className:"flex-1 min-w-0 pr-6",children:[e.jsx("p",{className:"font-semibold text-sm",children:T.title}),e.jsx("p",{className:"text-sm text-muted-foreground mt-0.5 line-clamp-2",children:T.message}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:Wm(new Date(T.timestamp),{addSuffix:!0})})]}),e.jsx(I,{variant:"ghost",size:"icon",className:"absolute top-2 right-2 h-6 w-6",onClick:E=>{E.stopPropagation(),y(T.id)},children:e.jsx(nr,{className:"h-3 w-3"})})]}),!T.read&&e.jsx("div",{className:"absolute right-2 top-2 h-2 w-2 bg-primary rounded-full"})]},T.id))})})]})]})},qK=()=>{const{user:t,token:s}=qs(),{socket:a,connected:n}=Ra(),[i,c]=N.useState([]),[d,h]=N.useState([]),[f,g]=N.useState(null),[p,v]=N.useState([]),[y,_]=N.useState(""),[S,b]=N.useState(""),[T,E]=N.useState(!1),[A,O]=N.useState({}),[Q,q]=N.useState("conversations"),[U,D]=N.useState(!1),[M,P]=N.useState(!1),[G,K]=N.useState("video"),z=N.useRef(null),J=N.useRef(null);N.useEffect(()=>(V(),he(),W(),()=>{a&&(a.off("message_received"),a.off("user_typing"),a.off("user_stopped_typing"),a.off("message_sent"),a.off("new_message_notification"))}),[a]),N.useEffect(()=>(f&&(ae(f.id),a&&n&&a.emit("join_conversation",f.id)),()=>{f&&a&&a.emit("leave_conversation",f.id)}),[f,a,n]),N.useEffect(()=>{X()},[p]);const W=()=>{a&&(a.on("message_received",me=>{f&&me.conversationId===f.id&&(v(De=>[...De,me]),ee(me.id)),te(me)}),a.on("user_typing",({conversationId:me,userId:De,userName:Ne})=>{f?.id===me&&O(pe=>({...pe,[De]:Ne}))}),a.on("user_stopped_typing",({conversationId:me,userId:De})=>{f?.id===me&&O(Ne=>{const pe={...Ne};return delete pe[De],pe})}),a.on("message_sent",me=>{v(De=>De.map(Ne=>Ne.id===me.id?{...Ne,status:"delivered"}:Ne))}),a.on("new_message_notification",me=>{R.info(`New message from ${me.from}`),V()}))},he=async()=>{try{const me=localStorage.getItem("token"),De=await ke.get("/messages/customers",{headers:{Authorization:`Bearer ${me}`}});h(De.data.customers||[])}catch(me){console.error("Error fetching customers:",me),R.error("Failed to load customers")}},V=async()=>{try{const me=localStorage.getItem("token"),De=[{id:1,name:"Support Team",avatar:"",lastMessage:"How can we help you today?",lastMessageTime:new Date,unreadCount:0,isOnline:!0,type:"support"},{id:2,name:"Sales Department",avatar:"",lastMessage:"Your order has been processed",lastMessageTime:new Date(Date.now()-36e5),unreadCount:2,isOnline:!0,type:"team"},{id:3,name:"Team Chat",avatar:"",lastMessage:"Meeting at 3 PM",lastMessageTime:new Date(Date.now()-72e5),unreadCount:5,isOnline:!1,type:"group"}];try{const Ne=await ke.get("/messages/conversations",{headers:{Authorization:`Bearer ${me}`}});c(Ne.data.conversations||[])}catch(Ne){console.error("Error loading conversations:",Ne),c([])}}catch(me){console.error("Error fetching conversations:",me),R.error("Failed to load conversations")}},ae=async me=>{try{const De=localStorage.getItem("token"),Ne=[{id:1,conversationId:me,senderId:"other",senderName:i.find(pe=>pe.id===me)?.name||"Support",content:"Hello! How can I help you today?",timestamp:new Date(Date.now()-36e5),status:"read"},{id:2,conversationId:me,senderId:t._id,senderName:t.name,content:"Hi! I need some assistance.",timestamp:new Date(Date.now()-3e6),status:"read"},{id:3,conversationId:me,senderId:"other",senderName:i.find(pe=>pe.id===me)?.name||"Support",content:"Of course! What do you need help with?",timestamp:new Date(Date.now()-24e5),status:"delivered"}];try{const pe=await ke.get(`/messages/conversations/${me}`,{headers:{Authorization:`Bearer ${De}`}});v(pe.data.messages||Ne)}catch{console.log("Using demo messages"),v(Ne)}}catch(De){console.error("Error fetching messages:",De),R.error("Failed to load messages")}},ge=async me=>{if(me.preventDefault(),!y.trim()||!f)return;const De={id:Date.now(),conversationId:f.id,senderId:t._id,senderName:t.name,content:y,timestamp:new Date,status:"sending"};v(Ne=>[...Ne,De]),_("");try{const Ne=localStorage.getItem("token");a&&n?a.emit("send_message",{conversationId:f.id,message:y,senderId:t._id,senderName:t.name}):await ke.post("/messages/send",{conversationId:f.id,content:y},{headers:{Authorization:`Bearer ${Ne}`}}),v(pe=>pe.map(Le=>Le.id===De.id?{...Le,status:"sent"}:Le))}catch(Ne){console.error("Error sending message:",Ne),R.error("Failed to send message"),v(pe=>pe.map(Le=>Le.id===De.id?{...Le,status:"failed"}:Le))}},Z=()=>{!T&&f&&a&&(E(!0),a.emit("typing_start",{conversationId:f.id,userId:t._id,userName:t.name}),setTimeout(()=>{E(!1),a.emit("typing_stop",{conversationId:f.id,userId:t._id})},3e3))},ee=async me=>{try{const De=localStorage.getItem("token");await ke.post(`/messages/${me}/read`,{},{headers:{Authorization:`Bearer ${De}`}})}catch(De){console.error("Error marking message as read:",De)}},te=me=>{c(De=>De.map(Ne=>Ne.id===me.conversationId?{...Ne,lastMessage:me.content,lastMessageTime:me.timestamp,unreadCount:Ne.id===f?.id?0:Ne.unreadCount+1}:Ne))},X=()=>{z.current?.scrollIntoView({behavior:"smooth"})},ce=me=>{switch(me){case"sent":return e.jsx(To,{className:"h-3 w-3"});case"delivered":return e.jsx(Zi,{className:"h-3 w-3"});case"read":return e.jsx(Zi,{className:"h-3 w-3 text-blue-500"});default:return e.jsx(ps,{className:"h-3 w-3"})}},F=async me=>{try{D(!0);const De=localStorage.getItem("token");if(me.hasConversation&&me.conversationId){const pe=i.find(Le=>Le.id===me.conversationId);if(pe){g(pe),q("conversations");return}}const Ne=await ke.post("/messages/conversations",{customerId:me.id,customerName:me.name,customerEmail:me.email,customerPhone:me.phone},{headers:{Authorization:`Bearer ${De}`}});if(Ne.data.success){R.success(`Started conversation with ${me.name}`),await V(),q("conversations");const pe={id:Ne.data.conversation.id,name:me.name,email:me.email,phone:me.phone,lastMessage:"",lastMessageTime:new Date,unreadCount:0,isOnline:!1,type:"direct"};g(pe)}}catch(De){console.error("Error starting conversation:",De),R.error("Failed to start conversation")}finally{D(!1)}},re=i.filter(me=>me.name.toLowerCase().includes(S.toLowerCase())),de=d.filter(me=>me.name.toLowerCase().includes(S.toLowerCase())||me.email.toLowerCase().includes(S.toLowerCase()));return e.jsxs("div",{className:"h-[calc(100vh-4rem)] p-6",children:[e.jsxs("div",{className:"mb-6 flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Messages"}),e.jsxs("p",{className:"text-muted-foreground",children:["Chat with your customers and support  ",n?" Connected":" Offline"]})]}),e.jsx(GK,{})]}),e.jsxs("div",{className:"grid grid-cols-12 gap-6 h-[calc(100%-5rem)]",children:[e.jsxs(se,{className:"col-span-12 lg:col-span-4 h-full flex flex-col",children:[e.jsxs(_e,{className:"pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs(Te,{className:"flex items-center gap-2",children:[e.jsx(ja,{className:"h-5 w-5"}),"Messages"]}),e.jsxs(ze,{variant:"secondary",children:[d.length," customers"]})]}),e.jsxs("div",{className:"relative",children:[e.jsx(Da,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(we,{placeholder:"Search...",value:S,onChange:me=>b(me.target.value),className:"pl-9"})]})]}),e.jsxs(Ha,{value:Q,onValueChange:q,className:"flex-1 flex flex-col",children:[e.jsxs(Xa,{className:"grid w-full grid-cols-2 mx-4",children:[e.jsxs(Tt,{value:"conversations",className:"gap-2",children:[e.jsx(ja,{className:"h-4 w-4"}),"Chats (",i.length,")"]}),e.jsxs(Tt,{value:"customers",className:"gap-2",children:[e.jsx(fs,{className:"h-4 w-4"}),"Customers (",d.length,")"]})]}),e.jsx(kt,{value:"conversations",className:"flex-1 mt-0 overflow-hidden",children:e.jsx(xr,{className:"h-full",children:re.length===0?e.jsxs("div",{className:"p-8 text-center text-muted-foreground",children:[e.jsx(ja,{className:"h-12 w-12 mx-auto mb-3 opacity-50"}),e.jsx("p",{children:"No conversations yet"}),e.jsx("p",{className:"text-sm mt-1",children:"Start a chat with a customer"})]}):re.map(me=>e.jsx("div",{onClick:()=>g(me),className:`p-4 cursor-pointer hover:bg-accent transition-colors border-b ${f?.id===me.id?"bg-accent":""}`,children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsxs("div",{className:"relative",children:[e.jsxs(Pn,{className:"h-12 w-12",children:[e.jsx(Rr,{src:me.avatar}),e.jsx(On,{children:me.type==="group"?e.jsx(fs,{className:"h-6 w-6"}):me.name[0]})]}),me.isOnline&&e.jsx("div",{className:"absolute bottom-0 right-0 h-3 w-3 bg-green-500 border-2 border-white rounded-full"})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"font-semibold truncate",children:me.name}),e.jsx("span",{className:"text-xs text-muted-foreground",children:Wm(new Date(me.lastMessageTime),{addSuffix:!0})})]}),e.jsx("p",{className:"text-sm text-muted-foreground truncate",children:me.lastMessage}),me.unreadCount>0&&e.jsx(ze,{className:"mt-1 bg-primary text-primary-foreground",children:me.unreadCount})]})]})},me.id))})}),e.jsx(kt,{value:"customers",className:"flex-1 mt-0 overflow-hidden",children:e.jsx(xr,{className:"h-full",children:de.length===0?e.jsxs("div",{className:"p-8 text-center text-muted-foreground",children:[e.jsx(fs,{className:"h-12 w-12 mx-auto mb-3 opacity-50"}),e.jsx("p",{children:"No customers found"})]}):de.map(me=>e.jsx("div",{className:"p-4 hover:bg-accent transition-colors border-b",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Pn,{className:"h-12 w-12",children:e.jsx(On,{className:"bg-primary/10 text-primary",children:me.name[0]})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("h3",{className:"font-semibold truncate",children:me.name}),me.unreadCount>0&&e.jsx(ze,{className:"bg-primary text-primary-foreground",children:me.unreadCount})]}),e.jsx("p",{className:"text-sm text-muted-foreground truncate",children:me.email}),me.phone&&e.jsx("p",{className:"text-xs text-muted-foreground",children:me.phone}),e.jsxs("div",{className:"flex items-center gap-3 mt-2 text-xs text-muted-foreground",children:[e.jsxs("span",{children:[me.totalOrders||0," orders"]}),e.jsx("span",{children:""}),e.jsxs("span",{children:["KES ",(me.totalSpent||0).toLocaleString()]})]})]}),e.jsx(I,{size:"sm",variant:me.hasConversation?"outline":"default",onClick:()=>F(me),disabled:U,className:"gap-2",children:me.hasConversation?e.jsxs(e.Fragment,{children:[e.jsx(ja,{className:"h-4 w-4"}),"Open"]}):e.jsxs(e.Fragment,{children:[e.jsx(td,{className:"h-4 w-4"}),"Chat"]})})]})},me.id))})})]})]}),e.jsx(se,{className:"col-span-12 lg:col-span-8 h-full flex flex-col",children:f?e.jsxs(e.Fragment,{children:[e.jsx(_e,{className:"border-b",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(Pn,{className:"h-10 w-10",children:[e.jsx(Rr,{src:f.avatar}),e.jsx(On,{children:f.type==="group"?e.jsx(fs,{className:"h-5 w-5"}):f.name[0]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:f.name}),e.jsx("p",{className:"text-xs text-muted-foreground",children:f.isOnline?"Active now":"Offline"})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(I,{variant:"ghost",size:"icon",onClick:()=>{K("audio"),P(!0)},title:"Start voice call",children:e.jsx(ia,{className:"h-4 w-4"})}),e.jsx(I,{variant:"ghost",size:"icon",onClick:()=>{K("video"),P(!0)},title:"Start video call",children:e.jsx(za,{className:"h-4 w-4"})}),e.jsx(I,{variant:"ghost",size:"icon",children:e.jsx(nj,{className:"h-4 w-4"})})]})]})}),e.jsx(oe,{className:"flex-1 p-4 overflow-hidden",children:e.jsx(xr,{className:"h-full pr-4",children:e.jsxs("div",{className:"space-y-4",children:[p.map(me=>{const De=me.senderId===t._id;return e.jsx("div",{className:`flex ${De?"justify-end":"justify-start"}`,children:e.jsxs("div",{className:`max-w-[70%] rounded-lg p-3 ${De?"bg-primary text-primary-foreground":"bg-muted"}`,children:[!De&&e.jsx("p",{className:"text-xs font-semibold mb-1",children:me.senderName}),e.jsx("p",{className:"text-sm",children:me.content}),e.jsxs("div",{className:"flex items-center gap-1 mt-1 justify-end",children:[e.jsx("span",{className:"text-xs opacity-70",children:new Date(me.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}),De&&ce(me.status)]})]})},me.id)}),Object.keys(A).length>0&&e.jsx("div",{className:"flex justify-start",children:e.jsx("div",{className:"bg-muted rounded-lg p-3",children:e.jsxs("div",{className:"flex gap-1",children:[e.jsx("div",{className:"w-2 h-2 bg-gray-500 rounded-full animate-bounce"}),e.jsx("div",{className:"w-2 h-2 bg-gray-500 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),e.jsx("div",{className:"w-2 h-2 bg-gray-500 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})})}),e.jsx("div",{ref:z})]})})}),e.jsx("div",{className:"border-t p-4",children:e.jsxs("form",{onSubmit:ge,className:"flex gap-2",children:[e.jsx(I,{type:"button",variant:"ghost",size:"icon",children:e.jsx(ha,{className:"h-5 w-5"})}),e.jsx(I,{type:"button",variant:"ghost",size:"icon",onClick:()=>J.current?.click(),children:e.jsx(Ru,{className:"h-5 w-5"})}),e.jsx("input",{type:"file",ref:J,className:"hidden"}),e.jsx(we,{value:y,onChange:me=>{_(me.target.value),Z()},placeholder:"Type a message...",className:"flex-1"}),e.jsx(I,{type:"button",variant:"ghost",size:"icon",children:e.jsx(rj,{className:"h-5 w-5"})}),e.jsx(I,{type:"submit",disabled:!y.trim(),children:e.jsx(mn,{className:"h-4 w-4"})})]})})]}):e.jsx("div",{className:"flex-1 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(ja,{className:"h-16 w-16 text-muted-foreground mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No Conversation Selected"}),e.jsx("p",{className:"text-muted-foreground",children:"Choose a conversation to start messaging"})]})})})]}),f&&e.jsx(q4,{isOpen:M,onClose:()=>P(!1),callType:G,participant:{id:f.customerId||f.id,name:f.name,email:f.email,avatar:f.avatar},user:t,token:s})]})},KK=()=>{const{socket:t,connected:s}=Ra(),[a,n]=N.useState([]),[i,c]=N.useState([]),[d,h]=N.useState(null),[f,g]=N.useState(!0),[p,v]=N.useState("all"),[y,_]=N.useState(""),[S,b]=N.useState({autoFix:!0,aiAnalysis:!0,realTimeMonitoring:!0,threatPrediction:!0,behavioralLearning:!0,anomalyThreshold:"medium"}),[T,E]=N.useState(null),[A,O]=N.useState("low");N.useEffect(()=>{D(),Q()},[]),N.useEffect(()=>{if(!(!t||!s))return t.on("security_alert",q),t.on("new_security_event",U),()=>{t.off("security_alert"),t.off("new_security_event")}},[t,s]);const Q=()=>{t&&s&&t.emit("join_security_dashboard")},q=z=>{c(W=>{const he=Array.isArray(W)?W:[];return[z,...he]}),(z.severity==="critical"?R.error:z.severity==="high"?R.warning:R.info)(e.jsxs("div",{children:[e.jsx("strong",{children:z.title}),e.jsx("p",{className:"text-sm",children:z.message}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["IP: ",z.ipAddress," | User: ",z.user]})]}))},U=z=>{n(J=>{const W=Array.isArray(J)?J:[];return[z.securityLog,...W].slice(0,100)})},D=async()=>{g(!0);try{const z=localStorage.getItem("token"),[J,W,he]=await Promise.all([ke.get("/security/logs",{headers:{Authorization:`Bearer ${z}`}}),ke.get("/security/stats",{headers:{Authorization:`Bearer ${z}`}}),ke.get("/security/alerts",{headers:{Authorization:`Bearer ${z}`}})]);n(J.data.logs||[]),h(W.data||{}),c(he.data||[])}catch(z){console.error("Error fetching security data:",z),R.error("Failed to load security data")}finally{g(!1)}},M=async z=>{try{const J=localStorage.getItem("token");await ke.patch(`/security/logs/${z}/resolve`,{},{headers:{Authorization:`Bearer ${J}`}}),R.success("Alert marked as resolved"),D()}catch(J){console.error("Error resolving alert:",J),R.error("Failed to resolve alert")}},P=z=>{switch(z){case"critical":return"bg-red-100 text-red-800 border-red-300";case"high":return"bg-orange-100 text-orange-800 border-orange-300";case"medium":return"bg-yellow-100 text-yellow-800 border-yellow-300";case"low":return"bg-green-100 text-green-800 border-green-300";default:return"bg-gray-100 text-gray-800 border-gray-300"}},G=z=>{switch(z){case"critical":case"high":return e.jsx(mr,{className:"h-4 w-4"});case"medium":return e.jsx(rn,{className:"h-4 w-4"});case"low":return e.jsx(ks,{className:"h-4 w-4"});default:return e.jsx(_a,{className:"h-4 w-4"})}},K=(Array.isArray(a)?a:[]).filter(z=>{if(p!=="all"&&z.severity!==p)return!1;if(y){const J=y.toLowerCase();return z.description?.toLowerCase().includes(J)||z.userEmail?.toLowerCase().includes(J)||z.ipAddress?.toLowerCase().includes(J)}return!0});return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold text-foreground flex items-center gap-2",children:[e.jsx(_a,{className:"h-8 w-8 text-green-600"}),"AI Security Monitoring"]}),e.jsxs("p",{className:"text-muted-foreground",children:["Real-time threat detection and automated response ",s?e.jsx("span",{className:"text-green-600",children:"  Live Monitoring"}):e.jsx("span",{className:"text-red-600",children:"  Offline"})]})]}),e.jsxs(I,{onClick:D,disabled:f,children:[e.jsx(Cs,{className:`h-4 w-4 mr-2 ${f?"animate-spin":""}`}),"Refresh"]})]}),e.jsxs("div",{className:"grid gap-6 md:grid-cols-4",children:[e.jsx(se,{children:e.jsx(oe,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Total Events (24h)"}),e.jsx("p",{className:"text-2xl font-bold",children:d?.totalEvents||0})]}),e.jsx(rn,{className:"h-8 w-8 text-blue-600"})]})})}),e.jsx(se,{children:e.jsx(oe,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Critical Alerts"}),e.jsx("p",{className:"text-2xl font-bold text-red-600",children:d?.bySeverity?.critical||0})]}),e.jsx(mr,{className:"h-8 w-8 text-red-600"})]})})}),e.jsx(se,{children:e.jsx(oe,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Blocked IPs"}),e.jsx("p",{className:"text-2xl font-bold",children:d?.blockedIPs||0})]}),e.jsx(VD,{className:"h-8 w-8 text-orange-600"})]})})}),e.jsx(se,{children:e.jsx(oe,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Auto-Fixed"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:d?.autoFixed||0})]}),e.jsx(Ga,{className:"h-8 w-8 text-green-600"})]})})})]}),e.jsxs(Ha,{defaultValue:"alerts",className:"space-y-6",children:[e.jsxs(Xa,{children:[e.jsxs(Tt,{value:"alerts",children:[e.jsx(mr,{className:"h-4 w-4 mr-2"}),"Active Alerts (",i.length,")"]}),e.jsxs(Tt,{value:"logs",children:[e.jsx(rn,{className:"h-4 w-4 mr-2"}),"Security Logs"]}),e.jsxs(Tt,{value:"suggestions",children:[e.jsx(Ga,{className:"h-4 w-4 mr-2"}),"AI Suggestions"]}),e.jsxs(Tt,{value:"config",children:[e.jsx(Ya,{className:"h-4 w-4 mr-2"}),"Configuration"]}),e.jsxs(Tt,{value:"intelligence",children:[e.jsx(jo,{className:"h-4 w-4 mr-2"}),"AI Intelligence"]})]}),e.jsx(kt,{value:"alerts",className:"space-y-4",children:e.jsxs(se,{children:[e.jsxs(_e,{children:[e.jsx(Te,{children:"Active Security Alerts"}),e.jsx(vt,{children:"Real-time security threats detected by AI"})]}),e.jsx(oe,{children:i.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(_a,{className:"h-12 w-12 text-green-600 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"All Clear!"}),e.jsx("p",{className:"text-muted-foreground",children:"No active security alerts"})]}):e.jsx("div",{className:"space-y-4",children:i.map((z,J)=>e.jsx("div",{className:"border rounded-lg p-4 hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs(ze,{className:P(z.severity),children:[G(z.severity),z.severity]}),e.jsx("span",{className:"text-xs text-muted-foreground",children:new Date(z.timestamp).toLocaleString()})]}),e.jsx("h4",{className:"font-semibold text-lg mb-2",children:z.title}),e.jsx("p",{className:"text-sm text-foreground mb-2",children:z.message}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(fs,{className:"h-4 w-4"}),z.user]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(cd,{className:"h-4 w-4"}),z.ipAddress]})]}),z.suggestion&&e.jsxs("div",{className:"mt-3 p-3 bg-blue-50 rounded-lg",children:[e.jsxs("p",{className:"text-sm font-medium text-blue-900 flex items-center gap-2",children:[e.jsx(Ga,{className:"h-4 w-4"}),"AI Suggestion:"]}),e.jsx("p",{className:"text-sm text-blue-800 mt-1",children:z.suggestion})]})]}),e.jsx("div",{className:"flex gap-2 ml-4",children:z.logId&&e.jsxs(I,{size:"sm",variant:"outline",onClick:()=>M(z.logId),children:[e.jsx(ks,{className:"h-4 w-4 mr-1"}),"Resolve"]})})]})},J))})})]})}),e.jsx(kt,{value:"logs",children:e.jsxs(se,{children:[e.jsx(_e,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(Te,{children:"Security Event Logs"}),e.jsx(vt,{children:"Comprehensive activity tracking"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(we,{placeholder:"Search logs...",value:y,onChange:z=>_(z.target.value),className:"w-64"}),e.jsxs("select",{value:p,onChange:z=>v(z.target.value),className:"border rounded-md px-3 py-2",children:[e.jsx("option",{value:"all",children:"All Severity"}),e.jsx("option",{value:"critical",children:"Critical"}),e.jsx("option",{value:"high",children:"High"}),e.jsx("option",{value:"medium",children:"Medium"}),e.jsx("option",{value:"low",children:"Low"})]})]})]})}),e.jsx(oe,{children:e.jsxs(Gi,{children:[e.jsx(qi,{children:e.jsxs(Fa,{children:[e.jsx(Bt,{children:"Time"}),e.jsx(Bt,{children:"Severity"}),e.jsx(Bt,{children:"Event Type"}),e.jsx(Bt,{children:"Description"}),e.jsx(Bt,{children:"User/IP"}),e.jsx(Bt,{children:"Status"})]})}),e.jsx(Ki,{children:K.slice(0,50).map(z=>e.jsxs(Fa,{children:[e.jsx(It,{className:"text-xs",children:new Date(z.timestamp).toLocaleString()}),e.jsx(It,{children:e.jsx(ze,{className:P(z.severity),variant:"outline",children:z.severity})}),e.jsx(It,{className:"text-sm",children:z.eventType}),e.jsx(It,{className:"text-sm max-w-xs truncate",children:z.description}),e.jsxs(It,{className:"text-xs",children:[e.jsx("div",{children:z.userEmail||"Unknown"}),e.jsx("div",{className:"text-muted-foreground",children:z.ipAddress})]}),e.jsx(It,{children:z.resolved?e.jsxs(ze,{variant:"outline",className:"bg-green-100 text-green-800",children:[e.jsx(ks,{className:"h-3 w-3 mr-1"}),"Resolved"]}):e.jsxs(ze,{variant:"outline",className:"bg-yellow-100 text-yellow-800",children:[e.jsx(ps,{className:"h-3 w-3 mr-1"}),"Open"]})})]},z._id))})]})})]})}),e.jsx(kt,{value:"suggestions",children:e.jsxs(se,{children:[e.jsxs(_e,{children:[e.jsx(Te,{children:"AI Security Recommendations"}),e.jsx(vt,{children:"Automated security improvements and best practices"})]}),e.jsx(oe,{children:e.jsxs("div",{className:"space-y-4",children:[i.filter(z=>z.suggestion).map((z,J)=>e.jsx("div",{className:"border-l-4 border-blue-500 bg-blue-50 p-4 rounded-r-lg",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Ga,{className:"h-5 w-5 text-blue-600 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-semibold text-blue-900 mb-1",children:z.title}),e.jsx("p",{className:"text-sm text-blue-800 mb-2",children:z.suggestion}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-blue-700",children:[e.jsxs(ze,{variant:"outline",className:"bg-white",children:["Priority: ",z.severity]}),e.jsx("span",{children:new Date(z.timestamp).toLocaleString()})]})]})]})},J)),i.filter(z=>z.suggestion).length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(ks,{className:"h-12 w-12 text-green-600 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No Recommendations"}),e.jsx("p",{className:"text-muted-foreground",children:"Your security posture is excellent!"})]})]})})]})}),e.jsx(kt,{value:"config",children:e.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[e.jsxs(se,{children:[e.jsxs(_e,{children:[e.jsxs(Te,{className:"flex items-center gap-2",children:[e.jsx(Ya,{className:"h-5 w-5"}),"AI Security Settings"]}),e.jsx(vt,{children:"Configure automated security responses"})]}),e.jsxs(oe,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsxs("h4",{className:"font-medium flex items-center gap-2",children:[e.jsx(Ga,{className:"h-4 w-4 text-yellow-600"}),"Auto-Fix Enabled"]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Automatically fix detected threats"})]}),e.jsx("input",{type:"checkbox",checked:S.autoFix,onChange:z=>b({...S,autoFix:z.target.checked}),className:"h-5 w-5 rounded"})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsxs("h4",{className:"font-medium flex items-center gap-2",children:[e.jsx(jo,{className:"h-4 w-4 text-purple-600"}),"AI Analysis"]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Use AI for threat pattern recognition"})]}),e.jsx("input",{type:"checkbox",checked:S.aiAnalysis,onChange:z=>b({...S,aiAnalysis:z.target.checked}),className:"h-5 w-5 rounded"})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsxs("h4",{className:"font-medium flex items-center gap-2",children:[e.jsx(rn,{className:"h-4 w-4 text-green-600"}),"Real-Time Monitoring"]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Continuous threat monitoring"})]}),e.jsx("input",{type:"checkbox",checked:S.realTimeMonitoring,onChange:z=>b({...S,realTimeMonitoring:z.target.checked}),className:"h-5 w-5 rounded"})]}),e.jsxs("div",{className:"p-4 border rounded-lg space-y-3",children:[e.jsx("h4",{className:"font-medium",children:"Anomaly Detection Threshold"}),e.jsxs("select",{value:S.anomalyThreshold,onChange:z=>b({...S,anomalyThreshold:z.target.value}),className:"w-full p-2 border rounded-md",children:[e.jsx("option",{value:"low",children:"Low (More Alerts)"}),e.jsx("option",{value:"medium",children:"Medium (Balanced)"}),e.jsx("option",{value:"high",children:"High (Critical Only)"})]})]}),e.jsx(I,{onClick:()=>R.success("AI Configuration saved"),className:"w-full",children:"Save Configuration"})]})]}),e.jsxs(se,{children:[e.jsxs(_e,{children:[e.jsx(Te,{children:"Threat Detection Rules"}),e.jsx(vt,{children:"Configure detection thresholds"})]}),e.jsxs(oe,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Failed Login Attempts"}),e.jsx(we,{type:"number",defaultValue:"5",min:"1",max:"10"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Current: 5 attempts in 5 minutes"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"API Rate Limit (requests/minute)"}),e.jsx(we,{type:"number",defaultValue:"100",min:"10",max:"1000"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Account Lock Duration (minutes)"}),e.jsx(we,{type:"number",defaultValue:"30",min:"5",max:"120"})]}),e.jsx(I,{onClick:()=>R.success("Thresholds updated"),className:"w-full",variant:"outline",children:"Update Thresholds"})]})]})]})}),e.jsx(kt,{value:"intelligence",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs(se,{children:[e.jsx(_e,{children:e.jsxs(Te,{className:"flex items-center gap-2",children:[e.jsx(V_,{className:"h-5 w-5 text-blue-600"}),"AI Intelligence System Status"]})}),e.jsx(oe,{children:e.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsx("span",{className:"text-sm font-medium",children:"AI Model Status"}),e.jsx(ze,{className:"bg-green-100 text-green-800 ml-2",children:"Active"}),e.jsx("p",{className:"text-2xl font-bold mt-2",children:"99.8%"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Uptime"})]}),e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsx("span",{className:"text-sm font-medium",children:"Detection Accuracy"}),e.jsx("p",{className:"text-2xl font-bold mt-2",children:"96.5%"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Last 24h"})]}),e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsx("span",{className:"text-sm font-medium",children:"Response Time"}),e.jsx("p",{className:"text-2xl font-bold mt-2",children:"342ms"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Average"})]})]})})]}),e.jsxs(se,{children:[e.jsx(_e,{children:e.jsxs(Te,{className:"flex items-center gap-2",children:[e.jsx(_a,{className:"h-5 w-5 text-red-600"}),"Threat Intelligence Feed"]})}),e.jsx(oe,{children:e.jsx("div",{className:"space-y-3",children:[{type:"SQL Injection",detected:142,severity:"critical"},{type:"XSS Attempts",detected:89,severity:"high"},{type:"Brute Force",detected:67,severity:"high"},{type:"API Abuse",detected:234,severity:"medium"}].map((z,J)=>e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(mr,{className:`h-4 w-4 ${z.severity==="critical"?"text-red-600":z.severity==="high"?"text-orange-600":"text-yellow-600"}`}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-sm",children:z.type}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Detected: ",z.detected]})]})]}),e.jsx(ze,{className:z.severity==="critical"?"bg-red-100 text-red-800":"bg-orange-100 text-orange-800",children:z.severity})]},J))})})]}),e.jsxs(se,{children:[e.jsx(_e,{children:e.jsxs(Te,{className:"flex items-center gap-2",children:[e.jsx(jo,{className:"h-5 w-5 text-purple-600"}),"AI Pattern Recognition"]})}),e.jsx(oe,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"p-4 bg-blue-50 border-l-4 border-blue-500 rounded-r-lg",children:[e.jsx("h4",{className:"font-semibold text-blue-900 mb-2",children:"Normal User Behavior"}),e.jsxs("ul",{className:"text-sm text-blue-800 space-y-1",children:[e.jsx("li",{children:" Session duration: 15-25 minutes"}),e.jsx("li",{children:" Peak activity: 9 AM - 6 PM"}),e.jsx("li",{children:" API calls: 20-40 per session"})]})]}),e.jsxs("div",{className:"p-4 bg-green-50 border-l-4 border-green-500 rounded-r-lg",children:[e.jsx("h4",{className:"font-semibold text-green-900 mb-2",children:"AI Learning Progress"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[e.jsx("span",{children:"User Behavior Models"}),e.jsx("span",{children:"87%"})]}),e.jsx("div",{className:"w-full bg-green-200 rounded-full h-2",children:e.jsx("div",{className:"bg-green-600 h-2 rounded-full",style:{width:"87%"}})})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[e.jsx("span",{children:"Attack Pattern Database"}),e.jsx("span",{children:"94%"})]}),e.jsx("div",{className:"w-full bg-green-200 rounded-full h-2",children:e.jsx("div",{className:"bg-green-600 h-2 rounded-full",style:{width:"94%"}})})]})]})]})]})})]})]})})]})]})};function YK(){const[t,s]=N.useState(!0),[a,n]=N.useState(!1);N.useEffect(()=>{const c=setTimeout(()=>{s(!1),n(!0),nm.start()},3e3);return()=>{clearTimeout(c),nm.stop()}},[]),N.useEffect(()=>{if(a)return nm.initialize(),nm.showWelcomeMessage(),()=>{nm.destroy()}},[a]);const i=()=>{s(!1),n(!0)};return t||!a?e.jsx(e2,{children:e.jsx(XW,{onComplete:i})}):e.jsx(AG,{children:e.jsx(e2,{children:e.jsx(kG,{children:e.jsx(D4,{children:e.jsx(pO,{children:e.jsx(gO,{children:e.jsx(Y7,{children:e.jsx(xU,{children:e.jsxs(g5,{children:[e.jsx(CG,{}),e.jsxs(v5,{children:[e.jsx(ls,{path:"/",element:e.jsx(G7,{})}),e.jsx(ls,{path:"/features",element:e.jsx(QW,{})}),e.jsx(ls,{path:"/pricing",element:e.jsx(JW,{})}),e.jsx(ls,{path:"/contact",element:e.jsx(eG,{})}),e.jsx(ls,{path:"/about",element:e.jsx(aG,{})}),e.jsx(ls,{path:"/privacy",element:e.jsx(nG,{})}),e.jsx(ls,{path:"/terms",element:e.jsx(rG,{})}),e.jsx(ls,{path:"/loginpage",element:e.jsx(jO,{})}),e.jsx(ls,{path:"/signup",element:e.jsx(wO,{})}),e.jsx(ls,{path:"/client/signup/:inviteCode",element:e.jsx(OG,{})}),e.jsx(ls,{path:"/client/login/:inviteCode",element:e.jsx(UK,{})}),e.jsx(ls,{path:"/client/store/:inviteCode",element:e.jsx(OK,{})}),e.jsx(ls,{path:"/client/catalog",element:e.jsx(IK,{})}),e.jsx(ls,{path:"/store",element:e.jsx(RK,{})}),e.jsx(ls,{path:"/client/book",element:e.jsx(BK,{})}),e.jsx(ls,{path:"/client/my-bookings",element:e.jsx(zK,{})}),e.jsx(ls,{path:"/client/messages",element:e.jsx(VK,{})}),e.jsx(ls,{path:"/session/join/:accessLink",element:e.jsx(WK,{})}),e.jsxs(ls,{path:"/dashboard",element:e.jsx(JO,{}),children:[e.jsx(ls,{index:!0,element:e.jsx(D7,{})}),e.jsx(ls,{path:"inventory",element:e.jsx(BM,{})}),e.jsx(ls,{path:"ecommerce",element:e.jsx(u9,{})}),e.jsx(ls,{path:"discounts",element:e.jsx(jG,{})}),e.jsx(ls,{path:"services",element:e.jsx(m9,{})}),e.jsx(ls,{path:"appointments",element:e.jsx(h9,{})}),e.jsx(ls,{path:"finances",element:e.jsx(T9,{})}),e.jsx(ls,{path:"subscriptions",element:e.jsx(k9,{})}),e.jsx(ls,{path:"team",element:e.jsx(j9,{})}),e.jsx(ls,{path:"ai-insights",element:e.jsx(A9,{})}),e.jsx(ls,{path:"locations",element:e.jsx(M9,{})}),e.jsx(ls,{path:"settings",element:e.jsx(aU,{})}),e.jsx(ls,{path:"profile",element:e.jsx(lU,{})}),e.jsx(ls,{path:"wallet",element:e.jsx(cU,{})}),e.jsx(ls,{path:"products",element:e.jsx(fU,{})}),e.jsx(ls,{path:"checkout",element:e.jsx(pU,{})}),e.jsx(ls,{path:"help",element:e.jsx(iG,{})}),e.jsx(ls,{path:"support",element:e.jsx(xG,{})}),e.jsx(ls,{path:"resources",element:e.jsx(yG,{})}),e.jsx(ls,{path:"analytics",element:e.jsx(oG,{})}),e.jsx(ls,{path:"maps",element:e.jsx(lG,{})}),e.jsx(ls,{path:"purchasing",element:e.jsx(cG,{})}),e.jsx(ls,{path:"history",element:e.jsx(dG,{})}),e.jsx(ls,{path:"search",element:e.jsx(uG,{})}),e.jsx(ls,{path:"graphs",element:e.jsx(hG,{})}),e.jsx(ls,{path:"reports",element:e.jsx(fG,{})}),e.jsx(ls,{path:"gui",element:e.jsx(NG,{})}),e.jsx(ls,{path:"sessions",element:e.jsx(HK,{})}),e.jsx(ls,{path:"messages",element:e.jsx(qK,{})}),e.jsx(ls,{path:"security-dashboard",element:e.jsx(KK,{})})]}),e.jsx(ls,{path:"*",element:e.jsx(bO,{})})]}),e.jsx(DG,{}),e.jsx(PG,{}),e.jsx(EG,{position:"top-center",expand:!0,toastOptions:{classNames:{toast:"group-[.toaster]:bg-white group-[.toaster]:text-slate-900 group-[.toaster]:border-green-200 group-[.toaster]:shadow-xl group-[.toaster]:backdrop-blur-sm",description:"group-[.toast]:text-slate-600",actionButton:"group-[.toast]:bg-green-600 group-[.toast]:text-white group-[.toast]:hover:bg-green-700",cancelButton:"group-[.toast]:bg-slate-100 group-[.toast]:text-slate-700 group-[.toast]:hover:bg-slate-200",error:"group-[.toaster]:bg-white group-[.toaster]:text-red-900 group-[.toaster]:border-red-200",success:"group-[.toaster]:bg-white group-[.toaster]:text-green-900 group-[.toaster]:border-green-300",warning:"group-[.toaster]:bg-white group-[.toaster]:text-amber-900 group-[.toaster]:border-amber-200",info:"group-[.toaster]:bg-white group-[.toaster]:text-blue-900 group-[.toaster]:border-blue-200"},style:{borderWidth:"2px"},duration:4e3}})]})})})})})})})})})}sP.createRoot(document.getElementById("root")).render(e.jsx(N.StrictMode,{children:e.jsx(YK,{})}));const ZK=Object.freeze(Object.defineProperty({__proto__:null,default:Ak},Symbol.toStringTag,{value:"Module"}));export{Gs as A,I as B,se as C,ny as D,ea as E,Ra as F,ut as G,we as I,ue as L,xr as S,Gi as T,_e as a,Te as b,vt as c,oe as d,ry as e,iy as f,CO as g,J1 as h,Ui as i,qi as j,Fa as k,Bt as l,Ki as m,It as n,ze as o,Gt as p,qt as q,Kt as r,Yt as s,vs as t,bi as u,Xt as v,Jt as w,Qt as x,es as y,Ie as z};
