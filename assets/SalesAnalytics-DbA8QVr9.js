import{j as e}from"./radix-vendor-B3KJ3-F4.js";import{r as T}from"./react-vendor-DyCm8Hca.js";import{C as h,a as g,b as v,c as C,d as j,o as G}from"./index-QRwVLPK4.js";import{D as F,e as M,f as V,U as k,P as q,d as D,g as A,h as B}from"./ui-vendor-7Lw9ZtLE.js";import"./socket-vendor-CA1CrNgP.js";import"./chart-vendor-DSBLL5zb.js";const L=({orders:p=[],timeFrame:m="month"})=>{const n=T.useMemo(()=>{const t=new Date,l=new Date;switch(m){case"week":l.setDate(t.getDate()-7);break;case"month":l.setMonth(t.getMonth()-1);break;case"year":l.setFullYear(t.getFullYear()-1);break;default:l.setMonth(t.getMonth()-1)}const a=p.filter(s=>new Date(s.date)>=l),c=new Date(l);c.setTime(c.getTime()-(t.getTime()-l.getTime()));const i=p.filter(s=>{const r=new Date(s.date);return r>=c&&r<l}),o=a.reduce((s,r)=>s+(Number(r.total)||0),0),d=i.reduce((s,r)=>s+(Number(r.total)||0),0),f=d>0?(o-d)/d*100:100,R=i.length>0?(a.length-i.length)/i.length*100:100,w=a.length>0?o/a.length:0,N=i.length>0?d/i.length:0,S=N>0?(w-N)/N*100:100,y=new Set(a.map(s=>s.customer?.email).filter(Boolean)).size,b=new Set(i.map(s=>s.customer?.email).filter(Boolean)).size,$=b>0?(y-b)/b*100:100,O=a.reduce((s,r)=>(s[r.status]=(s[r.status]||0)+1,s),{}),u={};a.forEach(s=>{Array.isArray(s.items)&&s.items.forEach(r=>{u[r.name]||(u[r.name]={count:0,revenue:0}),u[r.name].count+=r.quantity||1,u[r.name].revenue+=r.price*r.quantity||0})});const P=Object.entries(u).map(([s,r])=>({name:s,...r})).sort((s,r)=>r.revenue-s.revenue).slice(0,5);return{currentRevenue:o,revenueGrowth:f,ordersCount:a.length,ordersGrowth:R,avgOrderValue:w,avgValueGrowth:S,uniqueCustomers:y,customerGrowth:$,statusDistribution:O,topProducts:P,conversionRate:3.2,fulfillmentRate:a.length>0?a.filter(s=>s.status==="Delivered").length/a.length*100:0}},[p,m]),x=({title:t,value:l,icon:a,growth:c,subtitle:i,variant:o="default"})=>{const d=c>=0,f=d?D:B;return e.jsxs(h,{className:"hover:shadow-lg transition-shadow border-primary/10",children:[e.jsxs(g,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(v,{className:"text-sm font-medium",children:t}),e.jsx(a,{className:`h-4 w-4 ${o==="revenue"?"text-green-600":o==="orders"?"text-blue-600":o==="customers"?"text-purple-600":"text-muted-foreground"}`})]}),e.jsxs(j,{children:[e.jsx("div",{className:"text-2xl font-bold",children:l}),c!==void 0&&e.jsxs("div",{className:`flex items-center gap-1 text-xs ${d?"text-green-600":"text-red-600"}`,children:[e.jsx(f,{className:"h-3 w-3"}),Math.abs(c).toFixed(1),"% from last ",m]}),i&&e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:i})]})]})};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[e.jsx(x,{title:"Total Revenue",value:`$${n.currentRevenue.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}`,icon:F,growth:n.revenueGrowth,variant:"revenue"}),e.jsx(x,{title:"Orders",value:n.ordersCount,icon:M,growth:n.ordersGrowth,subtitle:`${n.statusDistribution.Delivered||0} delivered`,variant:"orders"}),e.jsx(x,{title:"Avg. Order Value",value:`$${n.avgOrderValue.toFixed(2)}`,icon:V,growth:n.avgValueGrowth}),e.jsx(x,{title:"Customers",value:n.uniqueCustomers,icon:k,growth:n.customerGrowth,subtitle:`${n.conversionRate}% conversion`,variant:"customers"})]}),e.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[e.jsxs(h,{className:"border-primary/10",children:[e.jsxs(g,{children:[e.jsxs(v,{className:"flex items-center gap-2",children:[e.jsx(q,{className:"h-5 w-5 text-primary"}),"Order Status"]}),e.jsxs(C,{children:["Current ",m," breakdown"]})]}),e.jsx(j,{children:e.jsx("div",{className:"space-y-3",children:Object.entries(n.statusDistribution).map(([t,l])=>{const a=(l/n.ordersCount*100).toFixed(1);return e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"flex items-center gap-2",children:e.jsx(G,{variant:t==="Delivered"?"default":t==="Shipped"?"secondary":t==="Cancelled"?"destructive":"outline",children:t})}),e.jsxs("span",{className:"font-semibold",children:[l," (",a,"%)"]})]}),e.jsx("div",{className:"h-2 bg-secondary rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full transition-all ${t==="Delivered"?"bg-green-500":t==="Shipped"?"bg-blue-500":t==="Cancelled"?"bg-red-500":"bg-yellow-500"}`,style:{width:`${a}%`}})})]},t)})})})]}),e.jsxs(h,{className:"border-primary/10",children:[e.jsxs(g,{children:[e.jsxs(v,{className:"flex items-center gap-2",children:[e.jsx(D,{className:"h-5 w-5 text-primary"}),"Top Performing Products"]}),e.jsxs(C,{children:["By revenue this ",m]})]}),e.jsx(j,{children:e.jsx("div",{className:"space-y-4",children:n.topProducts.length===0?e.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"No product data available"}):n.topProducts.map((t,l)=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex items-center justify-center w-8 h-8 rounded-full bg-primary/10 text-primary font-semibold text-sm",children:l+1}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:t.name}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[t.count," units sold"]})]})]}),e.jsx("div",{className:"text-right",children:e.jsxs("p",{className:"text-sm font-semibold text-green-600",children:["$",t.revenue.toFixed(2)]})})]},t.name))})})]})]}),e.jsxs(h,{className:"border-primary/10",children:[e.jsx(g,{children:e.jsxs(v,{className:"flex items-center gap-2",children:[e.jsx(A,{className:"h-5 w-5 text-primary"}),"Performance Metrics"]})}),e.jsx(j,{children:e.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[e.jsxs("div",{className:"p-4 bg-accent/50 rounded-lg",children:[e.jsx("div",{className:"text-sm text-muted-foreground mb-1",children:"Fulfillment Rate"}),e.jsxs("div",{className:"text-2xl font-bold text-green-600",children:[n.fulfillmentRate.toFixed(1),"%"]}),e.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:"Orders delivered successfully"})]}),e.jsxs("div",{className:"p-4 bg-accent/50 rounded-lg",children:[e.jsx("div",{className:"text-sm text-muted-foreground mb-1",children:"Conversion Rate"}),e.jsxs("div",{className:"text-2xl font-bold text-blue-600",children:[n.conversionRate,"%"]}),e.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:"Visitors to customers"})]}),e.jsxs("div",{className:"p-4 bg-accent/50 rounded-lg",children:[e.jsx("div",{className:"text-sm text-muted-foreground mb-1",children:"Revenue per Customer"}),e.jsxs("div",{className:"text-2xl font-bold text-purple-600",children:["$",n.uniqueCustomers>0?(n.currentRevenue/n.uniqueCustomers).toFixed(2):"0.00"]}),e.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:"Average customer value"})]})]})})]})]})};export{L as default};
