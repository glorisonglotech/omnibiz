const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/ProductCatalog-BxMIszID.js","assets/radix-vendor-DkpkUZpN.js","assets/react-vendor-Cbs3PWxE.js","assets/ui-vendor-DppydI0L.js","assets/socket-vendor-CA1CrNgP.js","assets/chart-vendor-E9DvB3AA.js","assets/SalesAnalytics-B5yWMCGm.js","assets/OrderTimeline-ClJzW7w7.js","assets/QuickActions-GZtS0ntb.js","assets/EnhancedOrderForm-D_Hr0zTj.js","assets/RealTimeSync-C_rZjjrJ.js","assets/ModernOrderCard-Bk9d0lvV.js"])))=>i.map(i=>d[i]);
import{j as e,S as uv,P as ma,R as P5,T as M5,a as F5,C as L5,L as I5,b as B5,I as z5,c as NS,V as U5,d as V5,e as bS,f as $5,g as Df,h as wS,i as SS,k as Of,u as qa,l as CS,m as TS,n as ES,o as Hs,p as kS,F as AS,D as _S,q as DS,r as Ou,s as OS,t as Rf,A as mv,v as RS,w as PS,x as MS,y as Ml,z as H5,B as sf,E as FS,G as W5,H as G5,J as q5,K as K5,M as Y5,N as X5,O as Q5,Q as Z5}from"./radix-vendor-DkpkUZpN.js";import{b as J5,e as e_,r as v,R as xt,u as Ka,L as qt,f as hv,h as el,O as t_,c as LS,i as s_,B as a_,j as r_,k as Kt}from"./react-vendor-Cbs3PWxE.js";import{X as jr,t as D,A as Rl,G as af,M as Ks,L as gr,H as ko,a as ca,I as fv,J as yo,u as la,v as Ws,K as Pl,N as n_,f as er,d as Is,O as IS,Q as i_,P as Yt,e as ws,V as No,g as gs,D as ra,Y as pa,Z as Aa,_ as ta,$ as Pf,U as Zt,a0 as bo,w as Yr,a1 as da,r as ba,a2 as Al,S as oa,a3 as ui,a4 as l_,s as Wa,a5 as td,a6 as xv,a7 as rf,B as Pr,a8 as ei,T as ga,a9 as Xu,j as ks,p as Vi,aa as qn,y as yi,ab as ng,ac as o_,ad as Lc,ae as BS,af as zS,ag as f0,R as cs,ah as c_,ai as d_,q as Ma,aj as u_,ak as pv,al as Ao,am as US,an as _a,ao as Ja,ap as Ru,aq as nf,ar as lf,as as Fa,at as Mf,au as m_,av as ig,o as Gs,c as Fr,F as tl,aw as _l,h as fi,ax as qr,i as ts,ay as h_,az as f_,aA as x_,aB as lg,aC as Gc,C as us,k as Sr,b as Yi,x as xi,aD as La,aE as p_,aF as g_,aG as v_,aH as og,aI as vi,aJ as cg,aK as qc,aL as j_,aM as dg,aN as y_,aO as Ui,aP as mu,aQ as Gh,aR as wb,aS as ju,aT as x0,aU as Ic,W as of,aV as N_,aW as _c,aX as gv,aY as Sb,aZ as _o,a_ as vv,a$ as Bc,b0 as jv,b1 as ru,b2 as b_,b3 as w_,b4 as S_,b5 as VS,b6 as C_,b7 as $S,b8 as T_,b9 as Pu,ba as E_,bb as k_,z as ti,bc as A_,bd as Cb,be as Tb,bf as __,bg as HS,bh as D_,bi as $i,bj as WS,l as Kc,bk as O_,bl as R_,bm as P_,bn as Eb,bo as M_,bp as F_,bq as Yc,br as ug,bs as zc,bt as p0,bu as g0,bv as kb,bw as L_,bx as I_,by as B_,bz as z_,bA as U_,bB as V_,bC as $_,bD as H_,bE as W_,bF as G_,bG as q_,bH as K_,m as Ab,bI as yv,bJ as Y_,bK as X_,bL as Q_,bM as Z_,bN as J_,bO as e6,bP as t6,bQ as s6,bR as a6,bS as r6,bT as n6,bU as i6,bV as mg,bW as l6,bX as o6,bY as c6,bZ as d6,b_ as u6,b$ as m6,c0 as h6,c1 as f6,c2 as x6,c3 as p6,c4 as g6,c5 as v6,c6 as j6,c7 as y6,c8 as N6,c9 as b6,ca as w6,cb as S6,cc as C6,cd as GS,ce as T6,E as Nv,cf as bv,cg as _b,ch as E6,ci as k6,cj as A6,ck as _6}from"./ui-vendor-DppydI0L.js";import{l as D6}from"./socket-vendor-CA1CrNgP.js";import{c as qS,R as O6,C as R6,a as Ch,X as Th,Y as Eh,T as nu,L as kh,B as Db,b as Ob,P as P6,d as M6,e as F6,f as L6,A as I6,g as B6,h as z6}from"./chart-vendor-E9DvB3AA.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function a(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=a(i);fetch(i.href,o)}})();var v0={exports:{}},iu={},j0={exports:{}},y0={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Rb;function U6(){return Rb||(Rb=1,(function(t){function s(U,Z){var de=U.length;U.push(Z);e:for(;0<de;){var H=de-1>>>1,se=U[H];if(0<i(se,Z))U[H]=Z,U[de]=se,de=H;else break e}}function a(U){return U.length===0?null:U[0]}function r(U){if(U.length===0)return null;var Z=U[0],de=U.pop();if(de!==Z){U[0]=de;e:for(var H=0,se=U.length,ee=se>>>1;H<ee;){var L=2*(H+1)-1,X=U[L],O=L+1,J=U[O];if(0>i(X,de))O<se&&0>i(J,X)?(U[H]=J,U[O]=de,H=O):(U[H]=X,U[L]=de,H=L);else if(O<se&&0>i(J,de))U[H]=J,U[O]=de,H=O;else break e}}return Z}function i(U,Z){var de=U.sortIndex-Z.sortIndex;return de!==0?de:U.id-Z.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var c=Date,u=c.now();t.unstable_now=function(){return c.now()-u}}var f=[],x=[],h=1,p=null,g=3,y=!1,b=!1,N=!1,S=!1,C=typeof setTimeout=="function"?setTimeout:null,k=typeof clearTimeout=="function"?clearTimeout:null,A=typeof setImmediate<"u"?setImmediate:null;function G(U){for(var Z=a(x);Z!==null;){if(Z.callback===null)r(x);else if(Z.startTime<=U)r(x),Z.sortIndex=Z.expirationTime,s(f,Z);else break;Z=a(x)}}function F(U){if(N=!1,G(U),!b)if(a(f)!==null)b=!0,E||(E=!0,W());else{var Z=a(x);Z!==null&&ae(F,Z.startTime-U)}}var E=!1,T=-1,_=5,P=-1;function z(){return S?!0:!(t.unstable_now()-P<_)}function V(){if(S=!1,E){var U=t.unstable_now();P=U;var Z=!0;try{e:{b=!1,N&&(N=!1,k(T),T=-1),y=!0;var de=g;try{t:{for(G(U),p=a(f);p!==null&&!(p.expirationTime>U&&z());){var H=p.callback;if(typeof H=="function"){p.callback=null,g=p.priorityLevel;var se=H(p.expirationTime<=U);if(U=t.unstable_now(),typeof se=="function"){p.callback=se,G(U),Z=!0;break t}p===a(f)&&r(f),G(U)}else r(f);p=a(f)}if(p!==null)Z=!0;else{var ee=a(x);ee!==null&&ae(F,ee.startTime-U),Z=!1}}break e}finally{p=null,g=de,y=!1}Z=void 0}}finally{Z?W():E=!1}}}var W;if(typeof A=="function")W=function(){A(V)};else if(typeof MessageChannel<"u"){var q=new MessageChannel,B=q.port2;q.port1.onmessage=V,W=function(){B.postMessage(null)}}else W=function(){C(V,0)};function ae(U,Z){T=C(function(){U(t.unstable_now())},Z)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(U){U.callback=null},t.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):_=0<U?Math.floor(1e3/U):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_next=function(U){switch(g){case 1:case 2:case 3:var Z=3;break;default:Z=g}var de=g;g=Z;try{return U()}finally{g=de}},t.unstable_requestPaint=function(){S=!0},t.unstable_runWithPriority=function(U,Z){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var de=g;g=U;try{return Z()}finally{g=de}},t.unstable_scheduleCallback=function(U,Z,de){var H=t.unstable_now();switch(typeof de=="object"&&de!==null?(de=de.delay,de=typeof de=="number"&&0<de?H+de:H):de=H,U){case 1:var se=-1;break;case 2:se=250;break;case 5:se=1073741823;break;case 4:se=1e4;break;default:se=5e3}return se=de+se,U={id:h++,callback:Z,priorityLevel:U,startTime:de,expirationTime:se,sortIndex:-1},de>H?(U.sortIndex=de,s(x,U),a(f)===null&&U===a(x)&&(N?(k(T),T=-1):N=!0,ae(F,de-H))):(U.sortIndex=se,s(f,U),b||y||(b=!0,E||(E=!0,W()))),U},t.unstable_shouldYield=z,t.unstable_wrapCallback=function(U){var Z=g;return function(){var de=g;g=Z;try{return U.apply(this,arguments)}finally{g=de}}}})(y0)),y0}var Pb;function V6(){return Pb||(Pb=1,j0.exports=U6()),j0.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mb;function $6(){if(Mb)return iu;Mb=1;var t=V6(),s=J5(),a=e_();function r(n){var l="https://react.dev/errors/"+n;if(1<arguments.length){l+="?args[]="+encodeURIComponent(arguments[1]);for(var d=2;d<arguments.length;d++)l+="&args[]="+encodeURIComponent(arguments[d])}return"Minified React error #"+n+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function o(n){var l=n,d=n;if(n.alternate)for(;l.return;)l=l.return;else{n=l;do l=n,(l.flags&4098)!==0&&(d=l.return),n=l.return;while(n)}return l.tag===3?d:null}function c(n){if(n.tag===13){var l=n.memoizedState;if(l===null&&(n=n.alternate,n!==null&&(l=n.memoizedState)),l!==null)return l.dehydrated}return null}function u(n){if(n.tag===31){var l=n.memoizedState;if(l===null&&(n=n.alternate,n!==null&&(l=n.memoizedState)),l!==null)return l.dehydrated}return null}function f(n){if(o(n)!==n)throw Error(r(188))}function x(n){var l=n.alternate;if(!l){if(l=o(n),l===null)throw Error(r(188));return l!==n?null:n}for(var d=n,m=l;;){var j=d.return;if(j===null)break;var w=j.alternate;if(w===null){if(m=j.return,m!==null){d=m;continue}break}if(j.child===w.child){for(w=j.child;w;){if(w===d)return f(j),n;if(w===m)return f(j),l;w=w.sibling}throw Error(r(188))}if(d.return!==m.return)d=j,m=w;else{for(var I=!1,re=j.child;re;){if(re===d){I=!0,d=j,m=w;break}if(re===m){I=!0,m=j,d=w;break}re=re.sibling}if(!I){for(re=w.child;re;){if(re===d){I=!0,d=w,m=j;break}if(re===m){I=!0,m=w,d=j;break}re=re.sibling}if(!I)throw Error(r(189))}}if(d.alternate!==m)throw Error(r(190))}if(d.tag!==3)throw Error(r(188));return d.stateNode.current===d?n:l}function h(n){var l=n.tag;if(l===5||l===26||l===27||l===6)return n;for(n=n.child;n!==null;){if(l=h(n),l!==null)return l;n=n.sibling}return null}var p=Object.assign,g=Symbol.for("react.element"),y=Symbol.for("react.transitional.element"),b=Symbol.for("react.portal"),N=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),k=Symbol.for("react.consumer"),A=Symbol.for("react.context"),G=Symbol.for("react.forward_ref"),F=Symbol.for("react.suspense"),E=Symbol.for("react.suspense_list"),T=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),P=Symbol.for("react.activity"),z=Symbol.for("react.memo_cache_sentinel"),V=Symbol.iterator;function W(n){return n===null||typeof n!="object"?null:(n=V&&n[V]||n["@@iterator"],typeof n=="function"?n:null)}var q=Symbol.for("react.client.reference");function B(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===q?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case N:return"Fragment";case C:return"Profiler";case S:return"StrictMode";case F:return"Suspense";case E:return"SuspenseList";case P:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case b:return"Portal";case A:return n.displayName||"Context";case k:return(n._context.displayName||"Context")+".Consumer";case G:var l=n.render;return n=n.displayName,n||(n=l.displayName||l.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case T:return l=n.displayName||null,l!==null?l:B(n.type)||"Memo";case _:l=n._payload,n=n._init;try{return B(n(l))}catch{}}return null}var ae=Array.isArray,U=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Z=a.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,de={pending:!1,data:null,method:null,action:null},H=[],se=-1;function ee(n){return{current:n}}function L(n){0>se||(n.current=H[se],H[se]=null,se--)}function X(n,l){se++,H[se]=n.current,n.current=l}var O=ee(null),J=ee(null),ie=ee(null),be=ee(null);function Le(n,l){switch(X(ie,l),X(J,n),X(O,null),l.nodeType){case 9:case 11:n=(n=l.documentElement)&&(n=n.namespaceURI)?G1(n):0;break;default:if(n=l.tagName,l=l.namespaceURI)l=G1(l),n=q1(l,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}L(O),X(O,n)}function ve(){L(O),L(J),L(ie)}function oe(n){n.memoizedState!==null&&X(be,n);var l=O.current,d=q1(l,n.type);l!==d&&(X(J,n),X(O,d))}function Pe(n){J.current===n&&(L(O),L(J)),be.current===n&&(L(be),eu._currentValue=de)}var Xe,yt;function vt(n){if(Xe===void 0)try{throw Error()}catch(d){var l=d.stack.trim().match(/\n( *(at )?)/);Xe=l&&l[1]||"",yt=-1<d.stack.indexOf(`
    at`)?" (<anonymous>)":-1<d.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Xe+n+yt}var gt=!1;function bt(n,l){if(!n||gt)return"";gt=!0;var d=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var m={DetermineComponentFrameRoot:function(){try{if(l){var et=function(){throw Error()};if(Object.defineProperty(et.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(et,[])}catch(He){var ze=He}Reflect.construct(n,[],et)}else{try{et.call()}catch(He){ze=He}n.call(et.prototype)}}else{try{throw Error()}catch(He){ze=He}(et=n())&&typeof et.catch=="function"&&et.catch(function(){})}}catch(He){if(He&&ze&&typeof He.stack=="string")return[He.stack,ze.stack]}return[null,null]}};m.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var j=Object.getOwnPropertyDescriptor(m.DetermineComponentFrameRoot,"name");j&&j.configurable&&Object.defineProperty(m.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var w=m.DetermineComponentFrameRoot(),I=w[0],re=w[1];if(I&&re){var ye=I.split(`
`),Be=re.split(`
`);for(j=m=0;m<ye.length&&!ye[m].includes("DetermineComponentFrameRoot");)m++;for(;j<Be.length&&!Be[j].includes("DetermineComponentFrameRoot");)j++;if(m===ye.length||j===Be.length)for(m=ye.length-1,j=Be.length-1;1<=m&&0<=j&&ye[m]!==Be[j];)j--;for(;1<=m&&0<=j;m--,j--)if(ye[m]!==Be[j]){if(m!==1||j!==1)do if(m--,j--,0>j||ye[m]!==Be[j]){var qe=`
`+ye[m].replace(" at new "," at ");return n.displayName&&qe.includes("<anonymous>")&&(qe=qe.replace("<anonymous>",n.displayName)),qe}while(1<=m&&0<=j);break}}}finally{gt=!1,Error.prepareStackTrace=d}return(d=n?n.displayName||n.name:"")?vt(d):""}function lt(n,l){switch(n.tag){case 26:case 27:case 5:return vt(n.type);case 16:return vt("Lazy");case 13:return n.child!==l&&l!==null?vt("Suspense Fallback"):vt("Suspense");case 19:return vt("SuspenseList");case 0:case 15:return bt(n.type,!1);case 11:return bt(n.type.render,!1);case 1:return bt(n.type,!0);case 31:return vt("Activity");default:return""}}function ms(n){try{var l="",d=null;do l+=lt(n,d),d=n,n=n.return;while(n);return l}catch(m){return`
Error generating stack: `+m.message+`
`+m.stack}}var is=Object.prototype.hasOwnProperty,Ms=t.unstable_scheduleCallback,ys=t.unstable_cancelCallback,Xs=t.unstable_shouldYield,xs=t.unstable_requestPaint,Rt=t.unstable_now,sa=t.unstable_getCurrentPriorityLevel,Te=t.unstable_ImmediatePriority,je=t.unstable_UserBlockingPriority,fe=t.unstable_NormalPriority,Ue=t.unstable_LowPriority,st=t.unstable_IdlePriority,Dt=t.log,Pt=t.unstable_setDisableYieldValue,Jt=null,as=null;function ke(n){if(typeof Dt=="function"&&Pt(n),as&&typeof as.setStrictMode=="function")try{as.setStrictMode(Jt,n)}catch{}}var we=Math.clz32?Math.clz32:jt,nt=Math.log,Ke=Math.LN2;function jt(n){return n>>>=0,n===0?32:31-(nt(n)/Ke|0)|0}var wt=256,Xt=262144,ss=4194304;function ge(n){var l=n&42;if(l!==0)return l;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return n&261888;case 262144:case 524288:case 1048576:case 2097152:return n&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function tt(n,l,d){var m=n.pendingLanes;if(m===0)return 0;var j=0,w=n.suspendedLanes,I=n.pingedLanes;n=n.warmLanes;var re=m&134217727;return re!==0?(m=re&~w,m!==0?j=ge(m):(I&=re,I!==0?j=ge(I):d||(d=re&~n,d!==0&&(j=ge(d))))):(re=m&~w,re!==0?j=ge(re):I!==0?j=ge(I):d||(d=m&~n,d!==0&&(j=ge(d)))),j===0?0:l!==0&&l!==j&&(l&w)===0&&(w=j&-j,d=l&-l,w>=d||w===32&&(d&4194048)!==0)?l:j}function ct(n,l){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&l)===0}function ns(n,l){switch(n){case 1:case 2:case 4:case 8:case 64:return l+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ht(){var n=ss;return ss<<=1,(ss&62914560)===0&&(ss=4194304),n}function Se(n){for(var l=[],d=0;31>d;d++)l.push(n);return l}function dt(n,l){n.pendingLanes|=l,l!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function Ct(n,l,d,m,j,w){var I=n.pendingLanes;n.pendingLanes=d,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=d,n.entangledLanes&=d,n.errorRecoveryDisabledLanes&=d,n.shellSuspendCounter=0;var re=n.entanglements,ye=n.expirationTimes,Be=n.hiddenUpdates;for(d=I&~d;0<d;){var qe=31-we(d),et=1<<qe;re[qe]=0,ye[qe]=-1;var ze=Be[qe];if(ze!==null)for(Be[qe]=null,qe=0;qe<ze.length;qe++){var He=ze[qe];He!==null&&(He.lane&=-536870913)}d&=~et}m!==0&&Et(n,m,0),w!==0&&j===0&&n.tag!==0&&(n.suspendedLanes|=w&~(I&~l))}function Et(n,l,d){n.pendingLanes|=l,n.suspendedLanes&=~l;var m=31-we(l);n.entangledLanes|=l,n.entanglements[m]=n.entanglements[m]|1073741824|d&261930}function hs(n,l){var d=n.entangledLanes|=l;for(n=n.entanglements;d;){var m=31-we(d),j=1<<m;j&l|n[m]&l&&(n[m]|=l),d&=~j}}function vs(n,l){var d=l&-l;return d=(d&42)!==0?1:Ts(d),(d&(n.suspendedLanes|l))!==0?0:d}function Ts(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function Bs(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function Q(){var n=Z.p;return n!==0?n:(n=window.event,n===void 0?32:pb(n.type))}function ue(n,l){var d=Z.p;try{return Z.p=n,l()}finally{Z.p=d}}var le=Math.random().toString(36).slice(2),M="__reactFiber$"+le,ne="__reactProps$"+le,ce="__reactContainer$"+le,Re="__reactEvents$"+le,$e="__reactListeners$"+le,Oe="__reactHandles$"+le,Me="__reactResources$"+le,Ie="__reactMarker$"+le;function rt(n){delete n[M],delete n[ne],delete n[Re],delete n[$e],delete n[Oe]}function he(n){var l=n[M];if(l)return l;for(var d=n.parentNode;d;){if(l=d[ce]||d[M]){if(d=l.alternate,l.child!==null||d!==null&&d.child!==null)for(n=eb(n);n!==null;){if(d=n[M])return d;n=eb(n)}return l}n=d,d=n.parentNode}return null}function We(n){if(n=n[M]||n[ce]){var l=n.tag;if(l===5||l===6||l===13||l===31||l===26||l===27||l===3)return n}return null}function Ee(n){var l=n.tag;if(l===5||l===26||l===27||l===6)return n.stateNode;throw Error(r(33))}function Je(n){var l=n[Me];return l||(l=n[Me]={hoistableStyles:new Map,hoistableScripts:new Map}),l}function it(n){n[Ie]=!0}var kt=new Set,Qe={};function Wt(n,l){Nr(n,l),Nr(n+"Capture",l)}function Nr(n,l){for(Qe[n]=l,n=0;n<l.length;n++)kt.add(l[n])}var gn=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ir={},Br={};function vn(n){return is.call(Br,n)?!0:is.call(Ir,n)?!1:gn.test(n)?Br[n]=!0:(Ir[n]=!0,!1)}function br(n,l,d){if(vn(l))if(d===null)n.removeAttribute(l);else{switch(typeof d){case"undefined":case"function":case"symbol":n.removeAttribute(l);return;case"boolean":var m=l.toLowerCase().slice(0,5);if(m!=="data-"&&m!=="aria-"){n.removeAttribute(l);return}}n.setAttribute(l,""+d)}}function Ho(n,l,d){if(d===null)n.removeAttribute(l);else{switch(typeof d){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(l);return}n.setAttribute(l,""+d)}}function tn(n,l,d,m){if(m===null)n.removeAttribute(d);else{switch(typeof m){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(d);return}n.setAttributeNS(l,d,""+m)}}function zr(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function fm(n){var l=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(l==="checkbox"||l==="radio")}function lx(n,l,d){var m=Object.getOwnPropertyDescriptor(n.constructor.prototype,l);if(!n.hasOwnProperty(l)&&typeof m<"u"&&typeof m.get=="function"&&typeof m.set=="function"){var j=m.get,w=m.set;return Object.defineProperty(n,l,{configurable:!0,get:function(){return j.call(this)},set:function(I){d=""+I,w.call(this,I)}}),Object.defineProperty(n,l,{enumerable:m.enumerable}),{getValue:function(){return d},setValue:function(I){d=""+I},stopTracking:function(){n._valueTracker=null,delete n[l]}}}}function ql(n){if(!n._valueTracker){var l=fm(n)?"checked":"value";n._valueTracker=lx(n,l,""+n[l])}}function Bj(n){if(!n)return!1;var l=n._valueTracker;if(!l)return!0;var d=l.getValue(),m="";return n&&(m=fm(n)?n.checked?"true":"false":n.value),n=m,n!==d?(l.setValue(n),!0):!1}function xm(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var kA=/[\n"\\]/g;function jn(n){return n.replace(kA,function(l){return"\\"+l.charCodeAt(0).toString(16)+" "})}function ox(n,l,d,m,j,w,I,re){n.name="",I!=null&&typeof I!="function"&&typeof I!="symbol"&&typeof I!="boolean"?n.type=I:n.removeAttribute("type"),l!=null?I==="number"?(l===0&&n.value===""||n.value!=l)&&(n.value=""+zr(l)):n.value!==""+zr(l)&&(n.value=""+zr(l)):I!=="submit"&&I!=="reset"||n.removeAttribute("value"),l!=null?cx(n,I,zr(l)):d!=null?cx(n,I,zr(d)):m!=null&&n.removeAttribute("value"),j==null&&w!=null&&(n.defaultChecked=!!w),j!=null&&(n.checked=j&&typeof j!="function"&&typeof j!="symbol"),re!=null&&typeof re!="function"&&typeof re!="symbol"&&typeof re!="boolean"?n.name=""+zr(re):n.removeAttribute("name")}function zj(n,l,d,m,j,w,I,re){if(w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"&&(n.type=w),l!=null||d!=null){if(!(w!=="submit"&&w!=="reset"||l!=null)){ql(n);return}d=d!=null?""+zr(d):"",l=l!=null?""+zr(l):d,re||l===n.value||(n.value=l),n.defaultValue=l}m=m??j,m=typeof m!="function"&&typeof m!="symbol"&&!!m,n.checked=re?n.checked:!!m,n.defaultChecked=!!m,I!=null&&typeof I!="function"&&typeof I!="symbol"&&typeof I!="boolean"&&(n.name=I),ql(n)}function cx(n,l,d){l==="number"&&xm(n.ownerDocument)===n||n.defaultValue===""+d||(n.defaultValue=""+d)}function Wo(n,l,d,m){if(n=n.options,l){l={};for(var j=0;j<d.length;j++)l["$"+d[j]]=!0;for(d=0;d<n.length;d++)j=l.hasOwnProperty("$"+n[d].value),n[d].selected!==j&&(n[d].selected=j),j&&m&&(n[d].defaultSelected=!0)}else{for(d=""+zr(d),l=null,j=0;j<n.length;j++){if(n[j].value===d){n[j].selected=!0,m&&(n[j].defaultSelected=!0);return}l!==null||n[j].disabled||(l=n[j])}l!==null&&(l.selected=!0)}}function Uj(n,l,d){if(l!=null&&(l=""+zr(l),l!==n.value&&(n.value=l),d==null)){n.defaultValue!==l&&(n.defaultValue=l);return}n.defaultValue=d!=null?""+zr(d):""}function Vj(n,l,d,m){if(l==null){if(m!=null){if(d!=null)throw Error(r(92));if(ae(m)){if(1<m.length)throw Error(r(93));m=m[0]}d=m}d==null&&(d=""),l=d}d=zr(l),n.defaultValue=d,m=n.textContent,m===d&&m!==""&&m!==null&&(n.value=m),ql(n)}function Go(n,l){if(l){var d=n.firstChild;if(d&&d===n.lastChild&&d.nodeType===3){d.nodeValue=l;return}}n.textContent=l}var AA=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function $j(n,l,d){var m=l.indexOf("--")===0;d==null||typeof d=="boolean"||d===""?m?n.setProperty(l,""):l==="float"?n.cssFloat="":n[l]="":m?n.setProperty(l,d):typeof d!="number"||d===0||AA.has(l)?l==="float"?n.cssFloat=d:n[l]=(""+d).trim():n[l]=d+"px"}function Hj(n,l,d){if(l!=null&&typeof l!="object")throw Error(r(62));if(n=n.style,d!=null){for(var m in d)!d.hasOwnProperty(m)||l!=null&&l.hasOwnProperty(m)||(m.indexOf("--")===0?n.setProperty(m,""):m==="float"?n.cssFloat="":n[m]="");for(var j in l)m=l[j],l.hasOwnProperty(j)&&d[j]!==m&&$j(n,j,m)}else for(var w in l)l.hasOwnProperty(w)&&$j(n,w,l[w])}function dx(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var _A=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),DA=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function pm(n){return DA.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}function bi(){}var ux=null;function mx(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var qo=null,Ko=null;function Wj(n){var l=We(n);if(l&&(n=l.stateNode)){var d=n[ne]||null;e:switch(n=l.stateNode,l.type){case"input":if(ox(n,d.value,d.defaultValue,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name),l=d.name,d.type==="radio"&&l!=null){for(d=n;d.parentNode;)d=d.parentNode;for(d=d.querySelectorAll('input[name="'+jn(""+l)+'"][type="radio"]'),l=0;l<d.length;l++){var m=d[l];if(m!==n&&m.form===n.form){var j=m[ne]||null;if(!j)throw Error(r(90));ox(m,j.value,j.defaultValue,j.defaultValue,j.checked,j.defaultChecked,j.type,j.name)}}for(l=0;l<d.length;l++)m=d[l],m.form===n.form&&Bj(m)}break e;case"textarea":Uj(n,d.value,d.defaultValue);break e;case"select":l=d.value,l!=null&&Wo(n,!!d.multiple,l,!1)}}}var hx=!1;function Gj(n,l,d){if(hx)return n(l,d);hx=!0;try{var m=n(l);return m}finally{if(hx=!1,(qo!==null||Ko!==null)&&(ah(),qo&&(l=qo,n=Ko,Ko=qo=null,Wj(l),n)))for(l=0;l<n.length;l++)Wj(n[l])}}function gd(n,l){var d=n.stateNode;if(d===null)return null;var m=d[ne]||null;if(m===null)return null;d=m[l];e:switch(l){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(m=!m.disabled)||(n=n.type,m=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!m;break e;default:n=!1}if(n)return null;if(d&&typeof d!="function")throw Error(r(231,l,typeof d));return d}var wi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),fx=!1;if(wi)try{var vd={};Object.defineProperty(vd,"passive",{get:function(){fx=!0}}),window.addEventListener("test",vd,vd),window.removeEventListener("test",vd,vd)}catch{fx=!1}var al=null,xx=null,gm=null;function qj(){if(gm)return gm;var n,l=xx,d=l.length,m,j="value"in al?al.value:al.textContent,w=j.length;for(n=0;n<d&&l[n]===j[n];n++);var I=d-n;for(m=1;m<=I&&l[d-m]===j[w-m];m++);return gm=j.slice(n,1<m?1-m:void 0)}function vm(n){var l=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&l===13&&(n=13)):n=l,n===10&&(n=13),32<=n||n===13?n:0}function jm(){return!0}function Kj(){return!1}function Ur(n){function l(d,m,j,w,I){this._reactName=d,this._targetInst=j,this.type=m,this.nativeEvent=w,this.target=I,this.currentTarget=null;for(var re in n)n.hasOwnProperty(re)&&(d=n[re],this[re]=d?d(w):w[re]);return this.isDefaultPrevented=(w.defaultPrevented!=null?w.defaultPrevented:w.returnValue===!1)?jm:Kj,this.isPropagationStopped=Kj,this}return p(l.prototype,{preventDefault:function(){this.defaultPrevented=!0;var d=this.nativeEvent;d&&(d.preventDefault?d.preventDefault():typeof d.returnValue!="unknown"&&(d.returnValue=!1),this.isDefaultPrevented=jm)},stopPropagation:function(){var d=this.nativeEvent;d&&(d.stopPropagation?d.stopPropagation():typeof d.cancelBubble!="unknown"&&(d.cancelBubble=!0),this.isPropagationStopped=jm)},persist:function(){},isPersistent:jm}),l}var Kl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ym=Ur(Kl),jd=p({},Kl,{view:0,detail:0}),OA=Ur(jd),px,gx,yd,Nm=p({},jd,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:jx,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==yd&&(yd&&n.type==="mousemove"?(px=n.screenX-yd.screenX,gx=n.screenY-yd.screenY):gx=px=0,yd=n),px)},movementY:function(n){return"movementY"in n?n.movementY:gx}}),Yj=Ur(Nm),RA=p({},Nm,{dataTransfer:0}),PA=Ur(RA),MA=p({},jd,{relatedTarget:0}),vx=Ur(MA),FA=p({},Kl,{animationName:0,elapsedTime:0,pseudoElement:0}),LA=Ur(FA),IA=p({},Kl,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),BA=Ur(IA),zA=p({},Kl,{data:0}),Xj=Ur(zA),UA={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},VA={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},$A={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function HA(n){var l=this.nativeEvent;return l.getModifierState?l.getModifierState(n):(n=$A[n])?!!l[n]:!1}function jx(){return HA}var WA=p({},jd,{key:function(n){if(n.key){var l=UA[n.key]||n.key;if(l!=="Unidentified")return l}return n.type==="keypress"?(n=vm(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?VA[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:jx,charCode:function(n){return n.type==="keypress"?vm(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?vm(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),GA=Ur(WA),qA=p({},Nm,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Qj=Ur(qA),KA=p({},jd,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:jx}),YA=Ur(KA),XA=p({},Kl,{propertyName:0,elapsedTime:0,pseudoElement:0}),QA=Ur(XA),ZA=p({},Nm,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),JA=Ur(ZA),e3=p({},Kl,{newState:0,oldState:0}),t3=Ur(e3),s3=[9,13,27,32],yx=wi&&"CompositionEvent"in window,Nd=null;wi&&"documentMode"in document&&(Nd=document.documentMode);var a3=wi&&"TextEvent"in window&&!Nd,Zj=wi&&(!yx||Nd&&8<Nd&&11>=Nd),Jj=" ",ey=!1;function ty(n,l){switch(n){case"keyup":return s3.indexOf(l.keyCode)!==-1;case"keydown":return l.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function sy(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Yo=!1;function r3(n,l){switch(n){case"compositionend":return sy(l);case"keypress":return l.which!==32?null:(ey=!0,Jj);case"textInput":return n=l.data,n===Jj&&ey?null:n;default:return null}}function n3(n,l){if(Yo)return n==="compositionend"||!yx&&ty(n,l)?(n=qj(),gm=xx=al=null,Yo=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(l.ctrlKey||l.altKey||l.metaKey)||l.ctrlKey&&l.altKey){if(l.char&&1<l.char.length)return l.char;if(l.which)return String.fromCharCode(l.which)}return null;case"compositionend":return Zj&&l.locale!=="ko"?null:l.data;default:return null}}var i3={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ay(n){var l=n&&n.nodeName&&n.nodeName.toLowerCase();return l==="input"?!!i3[n.type]:l==="textarea"}function ry(n,l,d,m){qo?Ko?Ko.push(m):Ko=[m]:qo=m,l=dh(l,"onChange"),0<l.length&&(d=new ym("onChange","change",null,d,m),n.push({event:d,listeners:l}))}var bd=null,wd=null;function l3(n){z1(n,0)}function bm(n){var l=Ee(n);if(Bj(l))return n}function ny(n,l){if(n==="change")return l}var iy=!1;if(wi){var Nx;if(wi){var bx="oninput"in document;if(!bx){var ly=document.createElement("div");ly.setAttribute("oninput","return;"),bx=typeof ly.oninput=="function"}Nx=bx}else Nx=!1;iy=Nx&&(!document.documentMode||9<document.documentMode)}function oy(){bd&&(bd.detachEvent("onpropertychange",cy),wd=bd=null)}function cy(n){if(n.propertyName==="value"&&bm(wd)){var l=[];ry(l,wd,n,mx(n)),Gj(l3,l)}}function o3(n,l,d){n==="focusin"?(oy(),bd=l,wd=d,bd.attachEvent("onpropertychange",cy)):n==="focusout"&&oy()}function c3(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return bm(wd)}function d3(n,l){if(n==="click")return bm(l)}function u3(n,l){if(n==="input"||n==="change")return bm(l)}function m3(n,l){return n===l&&(n!==0||1/n===1/l)||n!==n&&l!==l}var sn=typeof Object.is=="function"?Object.is:m3;function Sd(n,l){if(sn(n,l))return!0;if(typeof n!="object"||n===null||typeof l!="object"||l===null)return!1;var d=Object.keys(n),m=Object.keys(l);if(d.length!==m.length)return!1;for(m=0;m<d.length;m++){var j=d[m];if(!is.call(l,j)||!sn(n[j],l[j]))return!1}return!0}function dy(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function uy(n,l){var d=dy(n);n=0;for(var m;d;){if(d.nodeType===3){if(m=n+d.textContent.length,n<=l&&m>=l)return{node:d,offset:l-n};n=m}e:{for(;d;){if(d.nextSibling){d=d.nextSibling;break e}d=d.parentNode}d=void 0}d=dy(d)}}function my(n,l){return n&&l?n===l?!0:n&&n.nodeType===3?!1:l&&l.nodeType===3?my(n,l.parentNode):"contains"in n?n.contains(l):n.compareDocumentPosition?!!(n.compareDocumentPosition(l)&16):!1:!1}function hy(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var l=xm(n.document);l instanceof n.HTMLIFrameElement;){try{var d=typeof l.contentWindow.location.href=="string"}catch{d=!1}if(d)n=l.contentWindow;else break;l=xm(n.document)}return l}function wx(n){var l=n&&n.nodeName&&n.nodeName.toLowerCase();return l&&(l==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||l==="textarea"||n.contentEditable==="true")}var h3=wi&&"documentMode"in document&&11>=document.documentMode,Xo=null,Sx=null,Cd=null,Cx=!1;function fy(n,l,d){var m=d.window===d?d.document:d.nodeType===9?d:d.ownerDocument;Cx||Xo==null||Xo!==xm(m)||(m=Xo,"selectionStart"in m&&wx(m)?m={start:m.selectionStart,end:m.selectionEnd}:(m=(m.ownerDocument&&m.ownerDocument.defaultView||window).getSelection(),m={anchorNode:m.anchorNode,anchorOffset:m.anchorOffset,focusNode:m.focusNode,focusOffset:m.focusOffset}),Cd&&Sd(Cd,m)||(Cd=m,m=dh(Sx,"onSelect"),0<m.length&&(l=new ym("onSelect","select",null,l,d),n.push({event:l,listeners:m}),l.target=Xo)))}function Yl(n,l){var d={};return d[n.toLowerCase()]=l.toLowerCase(),d["Webkit"+n]="webkit"+l,d["Moz"+n]="moz"+l,d}var Qo={animationend:Yl("Animation","AnimationEnd"),animationiteration:Yl("Animation","AnimationIteration"),animationstart:Yl("Animation","AnimationStart"),transitionrun:Yl("Transition","TransitionRun"),transitionstart:Yl("Transition","TransitionStart"),transitioncancel:Yl("Transition","TransitionCancel"),transitionend:Yl("Transition","TransitionEnd")},Tx={},xy={};wi&&(xy=document.createElement("div").style,"AnimationEvent"in window||(delete Qo.animationend.animation,delete Qo.animationiteration.animation,delete Qo.animationstart.animation),"TransitionEvent"in window||delete Qo.transitionend.transition);function Xl(n){if(Tx[n])return Tx[n];if(!Qo[n])return n;var l=Qo[n],d;for(d in l)if(l.hasOwnProperty(d)&&d in xy)return Tx[n]=l[d];return n}var py=Xl("animationend"),gy=Xl("animationiteration"),vy=Xl("animationstart"),f3=Xl("transitionrun"),x3=Xl("transitionstart"),p3=Xl("transitioncancel"),jy=Xl("transitionend"),yy=new Map,Ex="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Ex.push("scrollEnd");function In(n,l){yy.set(n,l),Wt(l,[n])}var wm=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var l=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(l))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)},yn=[],Zo=0,kx=0;function Sm(){for(var n=Zo,l=kx=Zo=0;l<n;){var d=yn[l];yn[l++]=null;var m=yn[l];yn[l++]=null;var j=yn[l];yn[l++]=null;var w=yn[l];if(yn[l++]=null,m!==null&&j!==null){var I=m.pending;I===null?j.next=j:(j.next=I.next,I.next=j),m.pending=j}w!==0&&Ny(d,j,w)}}function Cm(n,l,d,m){yn[Zo++]=n,yn[Zo++]=l,yn[Zo++]=d,yn[Zo++]=m,kx|=m,n.lanes|=m,n=n.alternate,n!==null&&(n.lanes|=m)}function Ax(n,l,d,m){return Cm(n,l,d,m),Tm(n)}function Ql(n,l){return Cm(n,null,null,l),Tm(n)}function Ny(n,l,d){n.lanes|=d;var m=n.alternate;m!==null&&(m.lanes|=d);for(var j=!1,w=n.return;w!==null;)w.childLanes|=d,m=w.alternate,m!==null&&(m.childLanes|=d),w.tag===22&&(n=w.stateNode,n===null||n._visibility&1||(j=!0)),n=w,w=w.return;return n.tag===3?(w=n.stateNode,j&&l!==null&&(j=31-we(d),n=w.hiddenUpdates,m=n[j],m===null?n[j]=[l]:m.push(l),l.lane=d|536870912),w):null}function Tm(n){if(50<qd)throw qd=0,Ip=null,Error(r(185));for(var l=n.return;l!==null;)n=l,l=n.return;return n.tag===3?n.stateNode:null}var Jo={};function g3(n,l,d,m){this.tag=n,this.key=d,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=m,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function an(n,l,d,m){return new g3(n,l,d,m)}function _x(n){return n=n.prototype,!(!n||!n.isReactComponent)}function Si(n,l){var d=n.alternate;return d===null?(d=an(n.tag,l,n.key,n.mode),d.elementType=n.elementType,d.type=n.type,d.stateNode=n.stateNode,d.alternate=n,n.alternate=d):(d.pendingProps=l,d.type=n.type,d.flags=0,d.subtreeFlags=0,d.deletions=null),d.flags=n.flags&65011712,d.childLanes=n.childLanes,d.lanes=n.lanes,d.child=n.child,d.memoizedProps=n.memoizedProps,d.memoizedState=n.memoizedState,d.updateQueue=n.updateQueue,l=n.dependencies,d.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext},d.sibling=n.sibling,d.index=n.index,d.ref=n.ref,d.refCleanup=n.refCleanup,d}function by(n,l){n.flags&=65011714;var d=n.alternate;return d===null?(n.childLanes=0,n.lanes=l,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=d.childLanes,n.lanes=d.lanes,n.child=d.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=d.memoizedProps,n.memoizedState=d.memoizedState,n.updateQueue=d.updateQueue,n.type=d.type,l=d.dependencies,n.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext}),n}function Em(n,l,d,m,j,w){var I=0;if(m=n,typeof n=="function")_x(n)&&(I=1);else if(typeof n=="string")I=b5(n,d,O.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case P:return n=an(31,d,l,j),n.elementType=P,n.lanes=w,n;case N:return Zl(d.children,j,w,l);case S:I=8,j|=24;break;case C:return n=an(12,d,l,j|2),n.elementType=C,n.lanes=w,n;case F:return n=an(13,d,l,j),n.elementType=F,n.lanes=w,n;case E:return n=an(19,d,l,j),n.elementType=E,n.lanes=w,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case A:I=10;break e;case k:I=9;break e;case G:I=11;break e;case T:I=14;break e;case _:I=16,m=null;break e}I=29,d=Error(r(130,n===null?"null":typeof n,"")),m=null}return l=an(I,d,l,j),l.elementType=n,l.type=m,l.lanes=w,l}function Zl(n,l,d,m){return n=an(7,n,m,l),n.lanes=d,n}function Dx(n,l,d){return n=an(6,n,null,l),n.lanes=d,n}function wy(n){var l=an(18,null,null,0);return l.stateNode=n,l}function Ox(n,l,d){return l=an(4,n.children!==null?n.children:[],n.key,l),l.lanes=d,l.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},l}var Sy=new WeakMap;function Nn(n,l){if(typeof n=="object"&&n!==null){var d=Sy.get(n);return d!==void 0?d:(l={value:n,source:l,stack:ms(l)},Sy.set(n,l),l)}return{value:n,source:l,stack:ms(l)}}var ec=[],tc=0,km=null,Td=0,bn=[],wn=0,rl=null,ai=1,ri="";function Ci(n,l){ec[tc++]=Td,ec[tc++]=km,km=n,Td=l}function Cy(n,l,d){bn[wn++]=ai,bn[wn++]=ri,bn[wn++]=rl,rl=n;var m=ai;n=ri;var j=32-we(m)-1;m&=~(1<<j),d+=1;var w=32-we(l)+j;if(30<w){var I=j-j%5;w=(m&(1<<I)-1).toString(32),m>>=I,j-=I,ai=1<<32-we(l)+j|d<<j|m,ri=w+n}else ai=1<<w|d<<j|m,ri=n}function Rx(n){n.return!==null&&(Ci(n,1),Cy(n,1,0))}function Px(n){for(;n===km;)km=ec[--tc],ec[tc]=null,Td=ec[--tc],ec[tc]=null;for(;n===rl;)rl=bn[--wn],bn[wn]=null,ri=bn[--wn],bn[wn]=null,ai=bn[--wn],bn[wn]=null}function Ty(n,l){bn[wn++]=ai,bn[wn++]=ri,bn[wn++]=rl,ai=l.id,ri=l.overflow,rl=n}var nr=null,na=null,Es=!1,nl=null,Sn=!1,Mx=Error(r(519));function il(n){var l=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Ed(Nn(l,n)),Mx}function Ey(n){var l=n.stateNode,d=n.type,m=n.memoizedProps;switch(l[M]=n,l[ne]=m,d){case"dialog":bs("cancel",l),bs("close",l);break;case"iframe":case"object":case"embed":bs("load",l);break;case"video":case"audio":for(d=0;d<Yd.length;d++)bs(Yd[d],l);break;case"source":bs("error",l);break;case"img":case"image":case"link":bs("error",l),bs("load",l);break;case"details":bs("toggle",l);break;case"input":bs("invalid",l),zj(l,m.value,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name,!0);break;case"select":bs("invalid",l);break;case"textarea":bs("invalid",l),Vj(l,m.value,m.defaultValue,m.children)}d=m.children,typeof d!="string"&&typeof d!="number"&&typeof d!="bigint"||l.textContent===""+d||m.suppressHydrationWarning===!0||H1(l.textContent,d)?(m.popover!=null&&(bs("beforetoggle",l),bs("toggle",l)),m.onScroll!=null&&bs("scroll",l),m.onScrollEnd!=null&&bs("scrollend",l),m.onClick!=null&&(l.onclick=bi),l=!0):l=!1,l||il(n,!0)}function ky(n){for(nr=n.return;nr;)switch(nr.tag){case 5:case 31:case 13:Sn=!1;return;case 27:case 3:Sn=!0;return;default:nr=nr.return}}function sc(n){if(n!==nr)return!1;if(!Es)return ky(n),Es=!0,!1;var l=n.tag,d;if((d=l!==3&&l!==27)&&((d=l===5)&&(d=n.type,d=!(d!=="form"&&d!=="button")||Jp(n.type,n.memoizedProps)),d=!d),d&&na&&il(n),ky(n),l===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(r(317));na=J1(n)}else if(l===31){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(r(317));na=J1(n)}else l===27?(l=na,yl(n.type)?(n=r0,r0=null,na=n):na=l):na=nr?Tn(n.stateNode.nextSibling):null;return!0}function Jl(){na=nr=null,Es=!1}function Fx(){var n=nl;return n!==null&&(Wr===null?Wr=n:Wr.push.apply(Wr,n),nl=null),n}function Ed(n){nl===null?nl=[n]:nl.push(n)}var Lx=ee(null),eo=null,Ti=null;function ll(n,l,d){X(Lx,l._currentValue),l._currentValue=d}function Ei(n){n._currentValue=Lx.current,L(Lx)}function Ix(n,l,d){for(;n!==null;){var m=n.alternate;if((n.childLanes&l)!==l?(n.childLanes|=l,m!==null&&(m.childLanes|=l)):m!==null&&(m.childLanes&l)!==l&&(m.childLanes|=l),n===d)break;n=n.return}}function Bx(n,l,d,m){var j=n.child;for(j!==null&&(j.return=n);j!==null;){var w=j.dependencies;if(w!==null){var I=j.child;w=w.firstContext;e:for(;w!==null;){var re=w;w=j;for(var ye=0;ye<l.length;ye++)if(re.context===l[ye]){w.lanes|=d,re=w.alternate,re!==null&&(re.lanes|=d),Ix(w.return,d,n),m||(I=null);break e}w=re.next}}else if(j.tag===18){if(I=j.return,I===null)throw Error(r(341));I.lanes|=d,w=I.alternate,w!==null&&(w.lanes|=d),Ix(I,d,n),I=null}else I=j.child;if(I!==null)I.return=j;else for(I=j;I!==null;){if(I===n){I=null;break}if(j=I.sibling,j!==null){j.return=I.return,I=j;break}I=I.return}j=I}}function ac(n,l,d,m){n=null;for(var j=l,w=!1;j!==null;){if(!w){if((j.flags&524288)!==0)w=!0;else if((j.flags&262144)!==0)break}if(j.tag===10){var I=j.alternate;if(I===null)throw Error(r(387));if(I=I.memoizedProps,I!==null){var re=j.type;sn(j.pendingProps.value,I.value)||(n!==null?n.push(re):n=[re])}}else if(j===be.current){if(I=j.alternate,I===null)throw Error(r(387));I.memoizedState.memoizedState!==j.memoizedState.memoizedState&&(n!==null?n.push(eu):n=[eu])}j=j.return}n!==null&&Bx(l,n,d,m),l.flags|=262144}function Am(n){for(n=n.firstContext;n!==null;){if(!sn(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function to(n){eo=n,Ti=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function ir(n){return Ay(eo,n)}function _m(n,l){return eo===null&&to(n),Ay(n,l)}function Ay(n,l){var d=l._currentValue;if(l={context:l,memoizedValue:d,next:null},Ti===null){if(n===null)throw Error(r(308));Ti=l,n.dependencies={lanes:0,firstContext:l},n.flags|=524288}else Ti=Ti.next=l;return d}var v3=typeof AbortController<"u"?AbortController:function(){var n=[],l=this.signal={aborted:!1,addEventListener:function(d,m){n.push(m)}};this.abort=function(){l.aborted=!0,n.forEach(function(d){return d()})}},j3=t.unstable_scheduleCallback,y3=t.unstable_NormalPriority,Ba={$$typeof:A,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function zx(){return{controller:new v3,data:new Map,refCount:0}}function kd(n){n.refCount--,n.refCount===0&&j3(y3,function(){n.controller.abort()})}var Ad=null,Ux=0,rc=0,nc=null;function N3(n,l){if(Ad===null){var d=Ad=[];Ux=0,rc=Hp(),nc={status:"pending",value:void 0,then:function(m){d.push(m)}}}return Ux++,l.then(_y,_y),l}function _y(){if(--Ux===0&&Ad!==null){nc!==null&&(nc.status="fulfilled");var n=Ad;Ad=null,rc=0,nc=null;for(var l=0;l<n.length;l++)(0,n[l])()}}function b3(n,l){var d=[],m={status:"pending",value:null,reason:null,then:function(j){d.push(j)}};return n.then(function(){m.status="fulfilled",m.value=l;for(var j=0;j<d.length;j++)(0,d[j])(l)},function(j){for(m.status="rejected",m.reason=j,j=0;j<d.length;j++)(0,d[j])(void 0)}),m}var Dy=U.S;U.S=function(n,l){f1=Rt(),typeof l=="object"&&l!==null&&typeof l.then=="function"&&N3(n,l),Dy!==null&&Dy(n,l)};var so=ee(null);function Vx(){var n=so.current;return n!==null?n:aa.pooledCache}function Dm(n,l){l===null?X(so,so.current):X(so,l.pool)}function Oy(){var n=Vx();return n===null?null:{parent:Ba._currentValue,pool:n}}var ic=Error(r(460)),$x=Error(r(474)),Om=Error(r(542)),Rm={then:function(){}};function Ry(n){return n=n.status,n==="fulfilled"||n==="rejected"}function Py(n,l,d){switch(d=n[d],d===void 0?n.push(l):d!==l&&(l.then(bi,bi),l=d),l.status){case"fulfilled":return l.value;case"rejected":throw n=l.reason,Fy(n),n;default:if(typeof l.status=="string")l.then(bi,bi);else{if(n=aa,n!==null&&100<n.shellSuspendCounter)throw Error(r(482));n=l,n.status="pending",n.then(function(m){if(l.status==="pending"){var j=l;j.status="fulfilled",j.value=m}},function(m){if(l.status==="pending"){var j=l;j.status="rejected",j.reason=m}})}switch(l.status){case"fulfilled":return l.value;case"rejected":throw n=l.reason,Fy(n),n}throw ro=l,ic}}function ao(n){try{var l=n._init;return l(n._payload)}catch(d){throw d!==null&&typeof d=="object"&&typeof d.then=="function"?(ro=d,ic):d}}var ro=null;function My(){if(ro===null)throw Error(r(459));var n=ro;return ro=null,n}function Fy(n){if(n===ic||n===Om)throw Error(r(483))}var lc=null,_d=0;function Pm(n){var l=_d;return _d+=1,lc===null&&(lc=[]),Py(lc,n,l)}function Dd(n,l){l=l.props.ref,n.ref=l!==void 0?l:null}function Mm(n,l){throw l.$$typeof===g?Error(r(525)):(n=Object.prototype.toString.call(l),Error(r(31,n==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":n)))}function Ly(n){function l(_e,Ce){if(n){var Fe=_e.deletions;Fe===null?(_e.deletions=[Ce],_e.flags|=16):Fe.push(Ce)}}function d(_e,Ce){if(!n)return null;for(;Ce!==null;)l(_e,Ce),Ce=Ce.sibling;return null}function m(_e){for(var Ce=new Map;_e!==null;)_e.key!==null?Ce.set(_e.key,_e):Ce.set(_e.index,_e),_e=_e.sibling;return Ce}function j(_e,Ce){return _e=Si(_e,Ce),_e.index=0,_e.sibling=null,_e}function w(_e,Ce,Fe){return _e.index=Fe,n?(Fe=_e.alternate,Fe!==null?(Fe=Fe.index,Fe<Ce?(_e.flags|=67108866,Ce):Fe):(_e.flags|=67108866,Ce)):(_e.flags|=1048576,Ce)}function I(_e){return n&&_e.alternate===null&&(_e.flags|=67108866),_e}function re(_e,Ce,Fe,Ye){return Ce===null||Ce.tag!==6?(Ce=Dx(Fe,_e.mode,Ye),Ce.return=_e,Ce):(Ce=j(Ce,Fe),Ce.return=_e,Ce)}function ye(_e,Ce,Fe,Ye){var Ht=Fe.type;return Ht===N?qe(_e,Ce,Fe.props.children,Ye,Fe.key):Ce!==null&&(Ce.elementType===Ht||typeof Ht=="object"&&Ht!==null&&Ht.$$typeof===_&&ao(Ht)===Ce.type)?(Ce=j(Ce,Fe.props),Dd(Ce,Fe),Ce.return=_e,Ce):(Ce=Em(Fe.type,Fe.key,Fe.props,null,_e.mode,Ye),Dd(Ce,Fe),Ce.return=_e,Ce)}function Be(_e,Ce,Fe,Ye){return Ce===null||Ce.tag!==4||Ce.stateNode.containerInfo!==Fe.containerInfo||Ce.stateNode.implementation!==Fe.implementation?(Ce=Ox(Fe,_e.mode,Ye),Ce.return=_e,Ce):(Ce=j(Ce,Fe.children||[]),Ce.return=_e,Ce)}function qe(_e,Ce,Fe,Ye,Ht){return Ce===null||Ce.tag!==7?(Ce=Zl(Fe,_e.mode,Ye,Ht),Ce.return=_e,Ce):(Ce=j(Ce,Fe),Ce.return=_e,Ce)}function et(_e,Ce,Fe){if(typeof Ce=="string"&&Ce!==""||typeof Ce=="number"||typeof Ce=="bigint")return Ce=Dx(""+Ce,_e.mode,Fe),Ce.return=_e,Ce;if(typeof Ce=="object"&&Ce!==null){switch(Ce.$$typeof){case y:return Fe=Em(Ce.type,Ce.key,Ce.props,null,_e.mode,Fe),Dd(Fe,Ce),Fe.return=_e,Fe;case b:return Ce=Ox(Ce,_e.mode,Fe),Ce.return=_e,Ce;case _:return Ce=ao(Ce),et(_e,Ce,Fe)}if(ae(Ce)||W(Ce))return Ce=Zl(Ce,_e.mode,Fe,null),Ce.return=_e,Ce;if(typeof Ce.then=="function")return et(_e,Pm(Ce),Fe);if(Ce.$$typeof===A)return et(_e,_m(_e,Ce),Fe);Mm(_e,Ce)}return null}function ze(_e,Ce,Fe,Ye){var Ht=Ce!==null?Ce.key:null;if(typeof Fe=="string"&&Fe!==""||typeof Fe=="number"||typeof Fe=="bigint")return Ht!==null?null:re(_e,Ce,""+Fe,Ye);if(typeof Fe=="object"&&Fe!==null){switch(Fe.$$typeof){case y:return Fe.key===Ht?ye(_e,Ce,Fe,Ye):null;case b:return Fe.key===Ht?Be(_e,Ce,Fe,Ye):null;case _:return Fe=ao(Fe),ze(_e,Ce,Fe,Ye)}if(ae(Fe)||W(Fe))return Ht!==null?null:qe(_e,Ce,Fe,Ye,null);if(typeof Fe.then=="function")return ze(_e,Ce,Pm(Fe),Ye);if(Fe.$$typeof===A)return ze(_e,Ce,_m(_e,Fe),Ye);Mm(_e,Fe)}return null}function He(_e,Ce,Fe,Ye,Ht){if(typeof Ye=="string"&&Ye!==""||typeof Ye=="number"||typeof Ye=="bigint")return _e=_e.get(Fe)||null,re(Ce,_e,""+Ye,Ht);if(typeof Ye=="object"&&Ye!==null){switch(Ye.$$typeof){case y:return _e=_e.get(Ye.key===null?Fe:Ye.key)||null,ye(Ce,_e,Ye,Ht);case b:return _e=_e.get(Ye.key===null?Fe:Ye.key)||null,Be(Ce,_e,Ye,Ht);case _:return Ye=ao(Ye),He(_e,Ce,Fe,Ye,Ht)}if(ae(Ye)||W(Ye))return _e=_e.get(Fe)||null,qe(Ce,_e,Ye,Ht,null);if(typeof Ye.then=="function")return He(_e,Ce,Fe,Pm(Ye),Ht);if(Ye.$$typeof===A)return He(_e,Ce,Fe,_m(Ce,Ye),Ht);Mm(Ce,Ye)}return null}function Tt(_e,Ce,Fe,Ye){for(var Ht=null,Ds=null,Ot=Ce,fs=Ce=0,Cs=null;Ot!==null&&fs<Fe.length;fs++){Ot.index>fs?(Cs=Ot,Ot=null):Cs=Ot.sibling;var Os=ze(_e,Ot,Fe[fs],Ye);if(Os===null){Ot===null&&(Ot=Cs);break}n&&Ot&&Os.alternate===null&&l(_e,Ot),Ce=w(Os,Ce,fs),Ds===null?Ht=Os:Ds.sibling=Os,Ds=Os,Ot=Cs}if(fs===Fe.length)return d(_e,Ot),Es&&Ci(_e,fs),Ht;if(Ot===null){for(;fs<Fe.length;fs++)Ot=et(_e,Fe[fs],Ye),Ot!==null&&(Ce=w(Ot,Ce,fs),Ds===null?Ht=Ot:Ds.sibling=Ot,Ds=Ot);return Es&&Ci(_e,fs),Ht}for(Ot=m(Ot);fs<Fe.length;fs++)Cs=He(Ot,_e,fs,Fe[fs],Ye),Cs!==null&&(n&&Cs.alternate!==null&&Ot.delete(Cs.key===null?fs:Cs.key),Ce=w(Cs,Ce,fs),Ds===null?Ht=Cs:Ds.sibling=Cs,Ds=Cs);return n&&Ot.forEach(function(Cl){return l(_e,Cl)}),Es&&Ci(_e,fs),Ht}function Gt(_e,Ce,Fe,Ye){if(Fe==null)throw Error(r(151));for(var Ht=null,Ds=null,Ot=Ce,fs=Ce=0,Cs=null,Os=Fe.next();Ot!==null&&!Os.done;fs++,Os=Fe.next()){Ot.index>fs?(Cs=Ot,Ot=null):Cs=Ot.sibling;var Cl=ze(_e,Ot,Os.value,Ye);if(Cl===null){Ot===null&&(Ot=Cs);break}n&&Ot&&Cl.alternate===null&&l(_e,Ot),Ce=w(Cl,Ce,fs),Ds===null?Ht=Cl:Ds.sibling=Cl,Ds=Cl,Ot=Cs}if(Os.done)return d(_e,Ot),Es&&Ci(_e,fs),Ht;if(Ot===null){for(;!Os.done;fs++,Os=Fe.next())Os=et(_e,Os.value,Ye),Os!==null&&(Ce=w(Os,Ce,fs),Ds===null?Ht=Os:Ds.sibling=Os,Ds=Os);return Es&&Ci(_e,fs),Ht}for(Ot=m(Ot);!Os.done;fs++,Os=Fe.next())Os=He(Ot,_e,fs,Os.value,Ye),Os!==null&&(n&&Os.alternate!==null&&Ot.delete(Os.key===null?fs:Os.key),Ce=w(Os,Ce,fs),Ds===null?Ht=Os:Ds.sibling=Os,Ds=Os);return n&&Ot.forEach(function(R5){return l(_e,R5)}),Es&&Ci(_e,fs),Ht}function Js(_e,Ce,Fe,Ye){if(typeof Fe=="object"&&Fe!==null&&Fe.type===N&&Fe.key===null&&(Fe=Fe.props.children),typeof Fe=="object"&&Fe!==null){switch(Fe.$$typeof){case y:e:{for(var Ht=Fe.key;Ce!==null;){if(Ce.key===Ht){if(Ht=Fe.type,Ht===N){if(Ce.tag===7){d(_e,Ce.sibling),Ye=j(Ce,Fe.props.children),Ye.return=_e,_e=Ye;break e}}else if(Ce.elementType===Ht||typeof Ht=="object"&&Ht!==null&&Ht.$$typeof===_&&ao(Ht)===Ce.type){d(_e,Ce.sibling),Ye=j(Ce,Fe.props),Dd(Ye,Fe),Ye.return=_e,_e=Ye;break e}d(_e,Ce);break}else l(_e,Ce);Ce=Ce.sibling}Fe.type===N?(Ye=Zl(Fe.props.children,_e.mode,Ye,Fe.key),Ye.return=_e,_e=Ye):(Ye=Em(Fe.type,Fe.key,Fe.props,null,_e.mode,Ye),Dd(Ye,Fe),Ye.return=_e,_e=Ye)}return I(_e);case b:e:{for(Ht=Fe.key;Ce!==null;){if(Ce.key===Ht)if(Ce.tag===4&&Ce.stateNode.containerInfo===Fe.containerInfo&&Ce.stateNode.implementation===Fe.implementation){d(_e,Ce.sibling),Ye=j(Ce,Fe.children||[]),Ye.return=_e,_e=Ye;break e}else{d(_e,Ce);break}else l(_e,Ce);Ce=Ce.sibling}Ye=Ox(Fe,_e.mode,Ye),Ye.return=_e,_e=Ye}return I(_e);case _:return Fe=ao(Fe),Js(_e,Ce,Fe,Ye)}if(ae(Fe))return Tt(_e,Ce,Fe,Ye);if(W(Fe)){if(Ht=W(Fe),typeof Ht!="function")throw Error(r(150));return Fe=Ht.call(Fe),Gt(_e,Ce,Fe,Ye)}if(typeof Fe.then=="function")return Js(_e,Ce,Pm(Fe),Ye);if(Fe.$$typeof===A)return Js(_e,Ce,_m(_e,Fe),Ye);Mm(_e,Fe)}return typeof Fe=="string"&&Fe!==""||typeof Fe=="number"||typeof Fe=="bigint"?(Fe=""+Fe,Ce!==null&&Ce.tag===6?(d(_e,Ce.sibling),Ye=j(Ce,Fe),Ye.return=_e,_e=Ye):(d(_e,Ce),Ye=Dx(Fe,_e.mode,Ye),Ye.return=_e,_e=Ye),I(_e)):d(_e,Ce)}return function(_e,Ce,Fe,Ye){try{_d=0;var Ht=Js(_e,Ce,Fe,Ye);return lc=null,Ht}catch(Ot){if(Ot===ic||Ot===Om)throw Ot;var Ds=an(29,Ot,null,_e.mode);return Ds.lanes=Ye,Ds.return=_e,Ds}finally{}}}var no=Ly(!0),Iy=Ly(!1),ol=!1;function Hx(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Wx(n,l){n=n.updateQueue,l.updateQueue===n&&(l.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function cl(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function dl(n,l,d){var m=n.updateQueue;if(m===null)return null;if(m=m.shared,(Fs&2)!==0){var j=m.pending;return j===null?l.next=l:(l.next=j.next,j.next=l),m.pending=l,l=Tm(n),Ny(n,null,d),l}return Cm(n,m,l,d),Tm(n)}function Od(n,l,d){if(l=l.updateQueue,l!==null&&(l=l.shared,(d&4194048)!==0)){var m=l.lanes;m&=n.pendingLanes,d|=m,l.lanes=d,hs(n,d)}}function Gx(n,l){var d=n.updateQueue,m=n.alternate;if(m!==null&&(m=m.updateQueue,d===m)){var j=null,w=null;if(d=d.firstBaseUpdate,d!==null){do{var I={lane:d.lane,tag:d.tag,payload:d.payload,callback:null,next:null};w===null?j=w=I:w=w.next=I,d=d.next}while(d!==null);w===null?j=w=l:w=w.next=l}else j=w=l;d={baseState:m.baseState,firstBaseUpdate:j,lastBaseUpdate:w,shared:m.shared,callbacks:m.callbacks},n.updateQueue=d;return}n=d.lastBaseUpdate,n===null?d.firstBaseUpdate=l:n.next=l,d.lastBaseUpdate=l}var qx=!1;function Rd(){if(qx){var n=nc;if(n!==null)throw n}}function Pd(n,l,d,m){qx=!1;var j=n.updateQueue;ol=!1;var w=j.firstBaseUpdate,I=j.lastBaseUpdate,re=j.shared.pending;if(re!==null){j.shared.pending=null;var ye=re,Be=ye.next;ye.next=null,I===null?w=Be:I.next=Be,I=ye;var qe=n.alternate;qe!==null&&(qe=qe.updateQueue,re=qe.lastBaseUpdate,re!==I&&(re===null?qe.firstBaseUpdate=Be:re.next=Be,qe.lastBaseUpdate=ye))}if(w!==null){var et=j.baseState;I=0,qe=Be=ye=null,re=w;do{var ze=re.lane&-536870913,He=ze!==re.lane;if(He?(Ss&ze)===ze:(m&ze)===ze){ze!==0&&ze===rc&&(qx=!0),qe!==null&&(qe=qe.next={lane:0,tag:re.tag,payload:re.payload,callback:null,next:null});e:{var Tt=n,Gt=re;ze=l;var Js=d;switch(Gt.tag){case 1:if(Tt=Gt.payload,typeof Tt=="function"){et=Tt.call(Js,et,ze);break e}et=Tt;break e;case 3:Tt.flags=Tt.flags&-65537|128;case 0:if(Tt=Gt.payload,ze=typeof Tt=="function"?Tt.call(Js,et,ze):Tt,ze==null)break e;et=p({},et,ze);break e;case 2:ol=!0}}ze=re.callback,ze!==null&&(n.flags|=64,He&&(n.flags|=8192),He=j.callbacks,He===null?j.callbacks=[ze]:He.push(ze))}else He={lane:ze,tag:re.tag,payload:re.payload,callback:re.callback,next:null},qe===null?(Be=qe=He,ye=et):qe=qe.next=He,I|=ze;if(re=re.next,re===null){if(re=j.shared.pending,re===null)break;He=re,re=He.next,He.next=null,j.lastBaseUpdate=He,j.shared.pending=null}}while(!0);qe===null&&(ye=et),j.baseState=ye,j.firstBaseUpdate=Be,j.lastBaseUpdate=qe,w===null&&(j.shared.lanes=0),xl|=I,n.lanes=I,n.memoizedState=et}}function By(n,l){if(typeof n!="function")throw Error(r(191,n));n.call(l)}function zy(n,l){var d=n.callbacks;if(d!==null)for(n.callbacks=null,n=0;n<d.length;n++)By(d[n],l)}var oc=ee(null),Fm=ee(0);function Uy(n,l){n=Fi,X(Fm,n),X(oc,l),Fi=n|l.baseLanes}function Kx(){X(Fm,Fi),X(oc,oc.current)}function Yx(){Fi=Fm.current,L(oc),L(Fm)}var rn=ee(null),Cn=null;function ul(n){var l=n.alternate;X(Oa,Oa.current&1),X(rn,n),Cn===null&&(l===null||oc.current!==null||l.memoizedState!==null)&&(Cn=n)}function Xx(n){X(Oa,Oa.current),X(rn,n),Cn===null&&(Cn=n)}function Vy(n){n.tag===22?(X(Oa,Oa.current),X(rn,n),Cn===null&&(Cn=n)):ml()}function ml(){X(Oa,Oa.current),X(rn,rn.current)}function nn(n){L(rn),Cn===n&&(Cn=null),L(Oa)}var Oa=ee(0);function Lm(n){for(var l=n;l!==null;){if(l.tag===13){var d=l.memoizedState;if(d!==null&&(d=d.dehydrated,d===null||s0(d)||a0(d)))return l}else if(l.tag===19&&(l.memoizedProps.revealOrder==="forwards"||l.memoizedProps.revealOrder==="backwards"||l.memoizedProps.revealOrder==="unstable_legacy-backwards"||l.memoizedProps.revealOrder==="together")){if((l.flags&128)!==0)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===n)break;for(;l.sibling===null;){if(l.return===null||l.return===n)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}var ki=0,ls=null,Qs=null,za=null,Im=!1,cc=!1,io=!1,Bm=0,Md=0,dc=null,w3=0;function Ca(){throw Error(r(321))}function Qx(n,l){if(l===null)return!1;for(var d=0;d<l.length&&d<n.length;d++)if(!sn(n[d],l[d]))return!1;return!0}function Zx(n,l,d,m,j,w){return ki=w,ls=l,l.memoizedState=null,l.updateQueue=null,l.lanes=0,U.H=n===null||n.memoizedState===null?CN:hp,io=!1,w=d(m,j),io=!1,cc&&(w=Hy(l,d,m,j)),$y(n),w}function $y(n){U.H=Id;var l=Qs!==null&&Qs.next!==null;if(ki=0,za=Qs=ls=null,Im=!1,Md=0,dc=null,l)throw Error(r(300));n===null||Ua||(n=n.dependencies,n!==null&&Am(n)&&(Ua=!0))}function Hy(n,l,d,m){ls=n;var j=0;do{if(cc&&(dc=null),Md=0,cc=!1,25<=j)throw Error(r(301));if(j+=1,za=Qs=null,n.updateQueue!=null){var w=n.updateQueue;w.lastEffect=null,w.events=null,w.stores=null,w.memoCache!=null&&(w.memoCache.index=0)}U.H=TN,w=l(d,m)}while(cc);return w}function S3(){var n=U.H,l=n.useState()[0];return l=typeof l.then=="function"?Fd(l):l,n=n.useState()[0],(Qs!==null?Qs.memoizedState:null)!==n&&(ls.flags|=1024),l}function Jx(){var n=Bm!==0;return Bm=0,n}function ep(n,l,d){l.updateQueue=n.updateQueue,l.flags&=-2053,n.lanes&=~d}function tp(n){if(Im){for(n=n.memoizedState;n!==null;){var l=n.queue;l!==null&&(l.pending=null),n=n.next}Im=!1}ki=0,za=Qs=ls=null,cc=!1,Md=Bm=0,dc=null}function Dr(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return za===null?ls.memoizedState=za=n:za=za.next=n,za}function Ra(){if(Qs===null){var n=ls.alternate;n=n!==null?n.memoizedState:null}else n=Qs.next;var l=za===null?ls.memoizedState:za.next;if(l!==null)za=l,Qs=n;else{if(n===null)throw ls.alternate===null?Error(r(467)):Error(r(310));Qs=n,n={memoizedState:Qs.memoizedState,baseState:Qs.baseState,baseQueue:Qs.baseQueue,queue:Qs.queue,next:null},za===null?ls.memoizedState=za=n:za=za.next=n}return za}function zm(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Fd(n){var l=Md;return Md+=1,dc===null&&(dc=[]),n=Py(dc,n,l),l=ls,(za===null?l.memoizedState:za.next)===null&&(l=l.alternate,U.H=l===null||l.memoizedState===null?CN:hp),n}function Um(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return Fd(n);if(n.$$typeof===A)return ir(n)}throw Error(r(438,String(n)))}function sp(n){var l=null,d=ls.updateQueue;if(d!==null&&(l=d.memoCache),l==null){var m=ls.alternate;m!==null&&(m=m.updateQueue,m!==null&&(m=m.memoCache,m!=null&&(l={data:m.data.map(function(j){return j.slice()}),index:0})))}if(l==null&&(l={data:[],index:0}),d===null&&(d=zm(),ls.updateQueue=d),d.memoCache=l,d=l.data[l.index],d===void 0)for(d=l.data[l.index]=Array(n),m=0;m<n;m++)d[m]=z;return l.index++,d}function Ai(n,l){return typeof l=="function"?l(n):l}function Vm(n){var l=Ra();return ap(l,Qs,n)}function ap(n,l,d){var m=n.queue;if(m===null)throw Error(r(311));m.lastRenderedReducer=d;var j=n.baseQueue,w=m.pending;if(w!==null){if(j!==null){var I=j.next;j.next=w.next,w.next=I}l.baseQueue=j=w,m.pending=null}if(w=n.baseState,j===null)n.memoizedState=w;else{l=j.next;var re=I=null,ye=null,Be=l,qe=!1;do{var et=Be.lane&-536870913;if(et!==Be.lane?(Ss&et)===et:(ki&et)===et){var ze=Be.revertLane;if(ze===0)ye!==null&&(ye=ye.next={lane:0,revertLane:0,gesture:null,action:Be.action,hasEagerState:Be.hasEagerState,eagerState:Be.eagerState,next:null}),et===rc&&(qe=!0);else if((ki&ze)===ze){Be=Be.next,ze===rc&&(qe=!0);continue}else et={lane:0,revertLane:Be.revertLane,gesture:null,action:Be.action,hasEagerState:Be.hasEagerState,eagerState:Be.eagerState,next:null},ye===null?(re=ye=et,I=w):ye=ye.next=et,ls.lanes|=ze,xl|=ze;et=Be.action,io&&d(w,et),w=Be.hasEagerState?Be.eagerState:d(w,et)}else ze={lane:et,revertLane:Be.revertLane,gesture:Be.gesture,action:Be.action,hasEagerState:Be.hasEagerState,eagerState:Be.eagerState,next:null},ye===null?(re=ye=ze,I=w):ye=ye.next=ze,ls.lanes|=et,xl|=et;Be=Be.next}while(Be!==null&&Be!==l);if(ye===null?I=w:ye.next=re,!sn(w,n.memoizedState)&&(Ua=!0,qe&&(d=nc,d!==null)))throw d;n.memoizedState=w,n.baseState=I,n.baseQueue=ye,m.lastRenderedState=w}return j===null&&(m.lanes=0),[n.memoizedState,m.dispatch]}function rp(n){var l=Ra(),d=l.queue;if(d===null)throw Error(r(311));d.lastRenderedReducer=n;var m=d.dispatch,j=d.pending,w=l.memoizedState;if(j!==null){d.pending=null;var I=j=j.next;do w=n(w,I.action),I=I.next;while(I!==j);sn(w,l.memoizedState)||(Ua=!0),l.memoizedState=w,l.baseQueue===null&&(l.baseState=w),d.lastRenderedState=w}return[w,m]}function Wy(n,l,d){var m=ls,j=Ra(),w=Es;if(w){if(d===void 0)throw Error(r(407));d=d()}else d=l();var I=!sn((Qs||j).memoizedState,d);if(I&&(j.memoizedState=d,Ua=!0),j=j.queue,lp(Ky.bind(null,m,j,n),[n]),j.getSnapshot!==l||I||za!==null&&za.memoizedState.tag&1){if(m.flags|=2048,uc(9,{destroy:void 0},qy.bind(null,m,j,d,l),null),aa===null)throw Error(r(349));w||(ki&127)!==0||Gy(m,l,d)}return d}function Gy(n,l,d){n.flags|=16384,n={getSnapshot:l,value:d},l=ls.updateQueue,l===null?(l=zm(),ls.updateQueue=l,l.stores=[n]):(d=l.stores,d===null?l.stores=[n]:d.push(n))}function qy(n,l,d,m){l.value=d,l.getSnapshot=m,Yy(l)&&Xy(n)}function Ky(n,l,d){return d(function(){Yy(l)&&Xy(n)})}function Yy(n){var l=n.getSnapshot;n=n.value;try{var d=l();return!sn(n,d)}catch{return!0}}function Xy(n){var l=Ql(n,2);l!==null&&Gr(l,n,2)}function np(n){var l=Dr();if(typeof n=="function"){var d=n;if(n=d(),io){ke(!0);try{d()}finally{ke(!1)}}}return l.memoizedState=l.baseState=n,l.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ai,lastRenderedState:n},l}function Qy(n,l,d,m){return n.baseState=d,ap(n,Qs,typeof m=="function"?m:Ai)}function C3(n,l,d,m,j){if(Wm(n))throw Error(r(485));if(n=l.action,n!==null){var w={payload:j,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(I){w.listeners.push(I)}};U.T!==null?d(!0):w.isTransition=!1,m(w),d=l.pending,d===null?(w.next=l.pending=w,Zy(l,w)):(w.next=d.next,l.pending=d.next=w)}}function Zy(n,l){var d=l.action,m=l.payload,j=n.state;if(l.isTransition){var w=U.T,I={};U.T=I;try{var re=d(j,m),ye=U.S;ye!==null&&ye(I,re),Jy(n,l,re)}catch(Be){ip(n,l,Be)}finally{w!==null&&I.types!==null&&(w.types=I.types),U.T=w}}else try{w=d(j,m),Jy(n,l,w)}catch(Be){ip(n,l,Be)}}function Jy(n,l,d){d!==null&&typeof d=="object"&&typeof d.then=="function"?d.then(function(m){eN(n,l,m)},function(m){return ip(n,l,m)}):eN(n,l,d)}function eN(n,l,d){l.status="fulfilled",l.value=d,tN(l),n.state=d,l=n.pending,l!==null&&(d=l.next,d===l?n.pending=null:(d=d.next,l.next=d,Zy(n,d)))}function ip(n,l,d){var m=n.pending;if(n.pending=null,m!==null){m=m.next;do l.status="rejected",l.reason=d,tN(l),l=l.next;while(l!==m)}n.action=null}function tN(n){n=n.listeners;for(var l=0;l<n.length;l++)(0,n[l])()}function sN(n,l){return l}function aN(n,l){if(Es){var d=aa.formState;if(d!==null){e:{var m=ls;if(Es){if(na){t:{for(var j=na,w=Sn;j.nodeType!==8;){if(!w){j=null;break t}if(j=Tn(j.nextSibling),j===null){j=null;break t}}w=j.data,j=w==="F!"||w==="F"?j:null}if(j){na=Tn(j.nextSibling),m=j.data==="F!";break e}}il(m)}m=!1}m&&(l=d[0])}}return d=Dr(),d.memoizedState=d.baseState=l,m={pending:null,lanes:0,dispatch:null,lastRenderedReducer:sN,lastRenderedState:l},d.queue=m,d=bN.bind(null,ls,m),m.dispatch=d,m=np(!1),w=mp.bind(null,ls,!1,m.queue),m=Dr(),j={state:l,dispatch:null,action:n,pending:null},m.queue=j,d=C3.bind(null,ls,j,w,d),j.dispatch=d,m.memoizedState=n,[l,d,!1]}function rN(n){var l=Ra();return nN(l,Qs,n)}function nN(n,l,d){if(l=ap(n,l,sN)[0],n=Vm(Ai)[0],typeof l=="object"&&l!==null&&typeof l.then=="function")try{var m=Fd(l)}catch(I){throw I===ic?Om:I}else m=l;l=Ra();var j=l.queue,w=j.dispatch;return d!==l.memoizedState&&(ls.flags|=2048,uc(9,{destroy:void 0},T3.bind(null,j,d),null)),[m,w,n]}function T3(n,l){n.action=l}function iN(n){var l=Ra(),d=Qs;if(d!==null)return nN(l,d,n);Ra(),l=l.memoizedState,d=Ra();var m=d.queue.dispatch;return d.memoizedState=n,[l,m,!1]}function uc(n,l,d,m){return n={tag:n,create:d,deps:m,inst:l,next:null},l=ls.updateQueue,l===null&&(l=zm(),ls.updateQueue=l),d=l.lastEffect,d===null?l.lastEffect=n.next=n:(m=d.next,d.next=n,n.next=m,l.lastEffect=n),n}function lN(){return Ra().memoizedState}function $m(n,l,d,m){var j=Dr();ls.flags|=n,j.memoizedState=uc(1|l,{destroy:void 0},d,m===void 0?null:m)}function Hm(n,l,d,m){var j=Ra();m=m===void 0?null:m;var w=j.memoizedState.inst;Qs!==null&&m!==null&&Qx(m,Qs.memoizedState.deps)?j.memoizedState=uc(l,w,d,m):(ls.flags|=n,j.memoizedState=uc(1|l,w,d,m))}function oN(n,l){$m(8390656,8,n,l)}function lp(n,l){Hm(2048,8,n,l)}function E3(n){ls.flags|=4;var l=ls.updateQueue;if(l===null)l=zm(),ls.updateQueue=l,l.events=[n];else{var d=l.events;d===null?l.events=[n]:d.push(n)}}function cN(n){var l=Ra().memoizedState;return E3({ref:l,nextImpl:n}),function(){if((Fs&2)!==0)throw Error(r(440));return l.impl.apply(void 0,arguments)}}function dN(n,l){return Hm(4,2,n,l)}function uN(n,l){return Hm(4,4,n,l)}function mN(n,l){if(typeof l=="function"){n=n();var d=l(n);return function(){typeof d=="function"?d():l(null)}}if(l!=null)return n=n(),l.current=n,function(){l.current=null}}function hN(n,l,d){d=d!=null?d.concat([n]):null,Hm(4,4,mN.bind(null,l,n),d)}function op(){}function fN(n,l){var d=Ra();l=l===void 0?null:l;var m=d.memoizedState;return l!==null&&Qx(l,m[1])?m[0]:(d.memoizedState=[n,l],n)}function xN(n,l){var d=Ra();l=l===void 0?null:l;var m=d.memoizedState;if(l!==null&&Qx(l,m[1]))return m[0];if(m=n(),io){ke(!0);try{n()}finally{ke(!1)}}return d.memoizedState=[m,l],m}function cp(n,l,d){return d===void 0||(ki&1073741824)!==0&&(Ss&261930)===0?n.memoizedState=l:(n.memoizedState=d,n=p1(),ls.lanes|=n,xl|=n,d)}function pN(n,l,d,m){return sn(d,l)?d:oc.current!==null?(n=cp(n,d,m),sn(n,l)||(Ua=!0),n):(ki&42)===0||(ki&1073741824)!==0&&(Ss&261930)===0?(Ua=!0,n.memoizedState=d):(n=p1(),ls.lanes|=n,xl|=n,l)}function gN(n,l,d,m,j){var w=Z.p;Z.p=w!==0&&8>w?w:8;var I=U.T,re={};U.T=re,mp(n,!1,l,d);try{var ye=j(),Be=U.S;if(Be!==null&&Be(re,ye),ye!==null&&typeof ye=="object"&&typeof ye.then=="function"){var qe=b3(ye,m);Ld(n,l,qe,cn(n))}else Ld(n,l,m,cn(n))}catch(et){Ld(n,l,{then:function(){},status:"rejected",reason:et},cn())}finally{Z.p=w,I!==null&&re.types!==null&&(I.types=re.types),U.T=I}}function k3(){}function dp(n,l,d,m){if(n.tag!==5)throw Error(r(476));var j=vN(n).queue;gN(n,j,l,de,d===null?k3:function(){return jN(n),d(m)})}function vN(n){var l=n.memoizedState;if(l!==null)return l;l={memoizedState:de,baseState:de,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ai,lastRenderedState:de},next:null};var d={};return l.next={memoizedState:d,baseState:d,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ai,lastRenderedState:d},next:null},n.memoizedState=l,n=n.alternate,n!==null&&(n.memoizedState=l),l}function jN(n){var l=vN(n);l.next===null&&(l=n.alternate.memoizedState),Ld(n,l.next.queue,{},cn())}function up(){return ir(eu)}function yN(){return Ra().memoizedState}function NN(){return Ra().memoizedState}function A3(n){for(var l=n.return;l!==null;){switch(l.tag){case 24:case 3:var d=cn();n=cl(d);var m=dl(l,n,d);m!==null&&(Gr(m,l,d),Od(m,l,d)),l={cache:zx()},n.payload=l;return}l=l.return}}function _3(n,l,d){var m=cn();d={lane:m,revertLane:0,gesture:null,action:d,hasEagerState:!1,eagerState:null,next:null},Wm(n)?wN(l,d):(d=Ax(n,l,d,m),d!==null&&(Gr(d,n,m),SN(d,l,m)))}function bN(n,l,d){var m=cn();Ld(n,l,d,m)}function Ld(n,l,d,m){var j={lane:m,revertLane:0,gesture:null,action:d,hasEagerState:!1,eagerState:null,next:null};if(Wm(n))wN(l,j);else{var w=n.alternate;if(n.lanes===0&&(w===null||w.lanes===0)&&(w=l.lastRenderedReducer,w!==null))try{var I=l.lastRenderedState,re=w(I,d);if(j.hasEagerState=!0,j.eagerState=re,sn(re,I))return Cm(n,l,j,0),aa===null&&Sm(),!1}catch{}finally{}if(d=Ax(n,l,j,m),d!==null)return Gr(d,n,m),SN(d,l,m),!0}return!1}function mp(n,l,d,m){if(m={lane:2,revertLane:Hp(),gesture:null,action:m,hasEagerState:!1,eagerState:null,next:null},Wm(n)){if(l)throw Error(r(479))}else l=Ax(n,d,m,2),l!==null&&Gr(l,n,2)}function Wm(n){var l=n.alternate;return n===ls||l!==null&&l===ls}function wN(n,l){cc=Im=!0;var d=n.pending;d===null?l.next=l:(l.next=d.next,d.next=l),n.pending=l}function SN(n,l,d){if((d&4194048)!==0){var m=l.lanes;m&=n.pendingLanes,d|=m,l.lanes=d,hs(n,d)}}var Id={readContext:ir,use:Um,useCallback:Ca,useContext:Ca,useEffect:Ca,useImperativeHandle:Ca,useLayoutEffect:Ca,useInsertionEffect:Ca,useMemo:Ca,useReducer:Ca,useRef:Ca,useState:Ca,useDebugValue:Ca,useDeferredValue:Ca,useTransition:Ca,useSyncExternalStore:Ca,useId:Ca,useHostTransitionStatus:Ca,useFormState:Ca,useActionState:Ca,useOptimistic:Ca,useMemoCache:Ca,useCacheRefresh:Ca};Id.useEffectEvent=Ca;var CN={readContext:ir,use:Um,useCallback:function(n,l){return Dr().memoizedState=[n,l===void 0?null:l],n},useContext:ir,useEffect:oN,useImperativeHandle:function(n,l,d){d=d!=null?d.concat([n]):null,$m(4194308,4,mN.bind(null,l,n),d)},useLayoutEffect:function(n,l){return $m(4194308,4,n,l)},useInsertionEffect:function(n,l){$m(4,2,n,l)},useMemo:function(n,l){var d=Dr();l=l===void 0?null:l;var m=n();if(io){ke(!0);try{n()}finally{ke(!1)}}return d.memoizedState=[m,l],m},useReducer:function(n,l,d){var m=Dr();if(d!==void 0){var j=d(l);if(io){ke(!0);try{d(l)}finally{ke(!1)}}}else j=l;return m.memoizedState=m.baseState=j,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:j},m.queue=n,n=n.dispatch=_3.bind(null,ls,n),[m.memoizedState,n]},useRef:function(n){var l=Dr();return n={current:n},l.memoizedState=n},useState:function(n){n=np(n);var l=n.queue,d=bN.bind(null,ls,l);return l.dispatch=d,[n.memoizedState,d]},useDebugValue:op,useDeferredValue:function(n,l){var d=Dr();return cp(d,n,l)},useTransition:function(){var n=np(!1);return n=gN.bind(null,ls,n.queue,!0,!1),Dr().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,l,d){var m=ls,j=Dr();if(Es){if(d===void 0)throw Error(r(407));d=d()}else{if(d=l(),aa===null)throw Error(r(349));(Ss&127)!==0||Gy(m,l,d)}j.memoizedState=d;var w={value:d,getSnapshot:l};return j.queue=w,oN(Ky.bind(null,m,w,n),[n]),m.flags|=2048,uc(9,{destroy:void 0},qy.bind(null,m,w,d,l),null),d},useId:function(){var n=Dr(),l=aa.identifierPrefix;if(Es){var d=ri,m=ai;d=(m&~(1<<32-we(m)-1)).toString(32)+d,l="_"+l+"R_"+d,d=Bm++,0<d&&(l+="H"+d.toString(32)),l+="_"}else d=w3++,l="_"+l+"r_"+d.toString(32)+"_";return n.memoizedState=l},useHostTransitionStatus:up,useFormState:aN,useActionState:aN,useOptimistic:function(n){var l=Dr();l.memoizedState=l.baseState=n;var d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return l.queue=d,l=mp.bind(null,ls,!0,d),d.dispatch=l,[n,l]},useMemoCache:sp,useCacheRefresh:function(){return Dr().memoizedState=A3.bind(null,ls)},useEffectEvent:function(n){var l=Dr(),d={impl:n};return l.memoizedState=d,function(){if((Fs&2)!==0)throw Error(r(440));return d.impl.apply(void 0,arguments)}}},hp={readContext:ir,use:Um,useCallback:fN,useContext:ir,useEffect:lp,useImperativeHandle:hN,useInsertionEffect:dN,useLayoutEffect:uN,useMemo:xN,useReducer:Vm,useRef:lN,useState:function(){return Vm(Ai)},useDebugValue:op,useDeferredValue:function(n,l){var d=Ra();return pN(d,Qs.memoizedState,n,l)},useTransition:function(){var n=Vm(Ai)[0],l=Ra().memoizedState;return[typeof n=="boolean"?n:Fd(n),l]},useSyncExternalStore:Wy,useId:yN,useHostTransitionStatus:up,useFormState:rN,useActionState:rN,useOptimistic:function(n,l){var d=Ra();return Qy(d,Qs,n,l)},useMemoCache:sp,useCacheRefresh:NN};hp.useEffectEvent=cN;var TN={readContext:ir,use:Um,useCallback:fN,useContext:ir,useEffect:lp,useImperativeHandle:hN,useInsertionEffect:dN,useLayoutEffect:uN,useMemo:xN,useReducer:rp,useRef:lN,useState:function(){return rp(Ai)},useDebugValue:op,useDeferredValue:function(n,l){var d=Ra();return Qs===null?cp(d,n,l):pN(d,Qs.memoizedState,n,l)},useTransition:function(){var n=rp(Ai)[0],l=Ra().memoizedState;return[typeof n=="boolean"?n:Fd(n),l]},useSyncExternalStore:Wy,useId:yN,useHostTransitionStatus:up,useFormState:iN,useActionState:iN,useOptimistic:function(n,l){var d=Ra();return Qs!==null?Qy(d,Qs,n,l):(d.baseState=n,[n,d.queue.dispatch])},useMemoCache:sp,useCacheRefresh:NN};TN.useEffectEvent=cN;function fp(n,l,d,m){l=n.memoizedState,d=d(m,l),d=d==null?l:p({},l,d),n.memoizedState=d,n.lanes===0&&(n.updateQueue.baseState=d)}var xp={enqueueSetState:function(n,l,d){n=n._reactInternals;var m=cn(),j=cl(m);j.payload=l,d!=null&&(j.callback=d),l=dl(n,j,m),l!==null&&(Gr(l,n,m),Od(l,n,m))},enqueueReplaceState:function(n,l,d){n=n._reactInternals;var m=cn(),j=cl(m);j.tag=1,j.payload=l,d!=null&&(j.callback=d),l=dl(n,j,m),l!==null&&(Gr(l,n,m),Od(l,n,m))},enqueueForceUpdate:function(n,l){n=n._reactInternals;var d=cn(),m=cl(d);m.tag=2,l!=null&&(m.callback=l),l=dl(n,m,d),l!==null&&(Gr(l,n,d),Od(l,n,d))}};function EN(n,l,d,m,j,w,I){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(m,w,I):l.prototype&&l.prototype.isPureReactComponent?!Sd(d,m)||!Sd(j,w):!0}function kN(n,l,d,m){n=l.state,typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(d,m),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(d,m),l.state!==n&&xp.enqueueReplaceState(l,l.state,null)}function lo(n,l){var d=l;if("ref"in l){d={};for(var m in l)m!=="ref"&&(d[m]=l[m])}if(n=n.defaultProps){d===l&&(d=p({},d));for(var j in n)d[j]===void 0&&(d[j]=n[j])}return d}function AN(n){wm(n)}function _N(n){console.error(n)}function DN(n){wm(n)}function Gm(n,l){try{var d=n.onUncaughtError;d(l.value,{componentStack:l.stack})}catch(m){setTimeout(function(){throw m})}}function ON(n,l,d){try{var m=n.onCaughtError;m(d.value,{componentStack:d.stack,errorBoundary:l.tag===1?l.stateNode:null})}catch(j){setTimeout(function(){throw j})}}function pp(n,l,d){return d=cl(d),d.tag=3,d.payload={element:null},d.callback=function(){Gm(n,l)},d}function RN(n){return n=cl(n),n.tag=3,n}function PN(n,l,d,m){var j=d.type.getDerivedStateFromError;if(typeof j=="function"){var w=m.value;n.payload=function(){return j(w)},n.callback=function(){ON(l,d,m)}}var I=d.stateNode;I!==null&&typeof I.componentDidCatch=="function"&&(n.callback=function(){ON(l,d,m),typeof j!="function"&&(pl===null?pl=new Set([this]):pl.add(this));var re=m.stack;this.componentDidCatch(m.value,{componentStack:re!==null?re:""})})}function D3(n,l,d,m,j){if(d.flags|=32768,m!==null&&typeof m=="object"&&typeof m.then=="function"){if(l=d.alternate,l!==null&&ac(l,d,j,!0),d=rn.current,d!==null){switch(d.tag){case 31:case 13:return Cn===null?rh():d.alternate===null&&Ta===0&&(Ta=3),d.flags&=-257,d.flags|=65536,d.lanes=j,m===Rm?d.flags|=16384:(l=d.updateQueue,l===null?d.updateQueue=new Set([m]):l.add(m),Up(n,m,j)),!1;case 22:return d.flags|=65536,m===Rm?d.flags|=16384:(l=d.updateQueue,l===null?(l={transitions:null,markerInstances:null,retryQueue:new Set([m])},d.updateQueue=l):(d=l.retryQueue,d===null?l.retryQueue=new Set([m]):d.add(m)),Up(n,m,j)),!1}throw Error(r(435,d.tag))}return Up(n,m,j),rh(),!1}if(Es)return l=rn.current,l!==null?((l.flags&65536)===0&&(l.flags|=256),l.flags|=65536,l.lanes=j,m!==Mx&&(n=Error(r(422),{cause:m}),Ed(Nn(n,d)))):(m!==Mx&&(l=Error(r(423),{cause:m}),Ed(Nn(l,d))),n=n.current.alternate,n.flags|=65536,j&=-j,n.lanes|=j,m=Nn(m,d),j=pp(n.stateNode,m,j),Gx(n,j),Ta!==4&&(Ta=2)),!1;var w=Error(r(520),{cause:m});if(w=Nn(w,d),Gd===null?Gd=[w]:Gd.push(w),Ta!==4&&(Ta=2),l===null)return!0;m=Nn(m,d),d=l;do{switch(d.tag){case 3:return d.flags|=65536,n=j&-j,d.lanes|=n,n=pp(d.stateNode,m,n),Gx(d,n),!1;case 1:if(l=d.type,w=d.stateNode,(d.flags&128)===0&&(typeof l.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(pl===null||!pl.has(w))))return d.flags|=65536,j&=-j,d.lanes|=j,j=RN(j),PN(j,n,d,m),Gx(d,j),!1}d=d.return}while(d!==null);return!1}var gp=Error(r(461)),Ua=!1;function lr(n,l,d,m){l.child=n===null?Iy(l,null,d,m):no(l,n.child,d,m)}function MN(n,l,d,m,j){d=d.render;var w=l.ref;if("ref"in m){var I={};for(var re in m)re!=="ref"&&(I[re]=m[re])}else I=m;return to(l),m=Zx(n,l,d,I,w,j),re=Jx(),n!==null&&!Ua?(ep(n,l,j),_i(n,l,j)):(Es&&re&&Rx(l),l.flags|=1,lr(n,l,m,j),l.child)}function FN(n,l,d,m,j){if(n===null){var w=d.type;return typeof w=="function"&&!_x(w)&&w.defaultProps===void 0&&d.compare===null?(l.tag=15,l.type=w,LN(n,l,w,m,j)):(n=Em(d.type,null,m,l,l.mode,j),n.ref=l.ref,n.return=l,l.child=n)}if(w=n.child,!Cp(n,j)){var I=w.memoizedProps;if(d=d.compare,d=d!==null?d:Sd,d(I,m)&&n.ref===l.ref)return _i(n,l,j)}return l.flags|=1,n=Si(w,m),n.ref=l.ref,n.return=l,l.child=n}function LN(n,l,d,m,j){if(n!==null){var w=n.memoizedProps;if(Sd(w,m)&&n.ref===l.ref)if(Ua=!1,l.pendingProps=m=w,Cp(n,j))(n.flags&131072)!==0&&(Ua=!0);else return l.lanes=n.lanes,_i(n,l,j)}return vp(n,l,d,m,j)}function IN(n,l,d,m){var j=m.children,w=n!==null?n.memoizedState:null;if(n===null&&l.stateNode===null&&(l.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),m.mode==="hidden"){if((l.flags&128)!==0){if(w=w!==null?w.baseLanes|d:d,n!==null){for(m=l.child=n.child,j=0;m!==null;)j=j|m.lanes|m.childLanes,m=m.sibling;m=j&~w}else m=0,l.child=null;return BN(n,l,w,d,m)}if((d&536870912)!==0)l.memoizedState={baseLanes:0,cachePool:null},n!==null&&Dm(l,w!==null?w.cachePool:null),w!==null?Uy(l,w):Kx(),Vy(l);else return m=l.lanes=536870912,BN(n,l,w!==null?w.baseLanes|d:d,d,m)}else w!==null?(Dm(l,w.cachePool),Uy(l,w),ml(),l.memoizedState=null):(n!==null&&Dm(l,null),Kx(),ml());return lr(n,l,j,d),l.child}function Bd(n,l){return n!==null&&n.tag===22||l.stateNode!==null||(l.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.sibling}function BN(n,l,d,m,j){var w=Vx();return w=w===null?null:{parent:Ba._currentValue,pool:w},l.memoizedState={baseLanes:d,cachePool:w},n!==null&&Dm(l,null),Kx(),Vy(l),n!==null&&ac(n,l,m,!0),l.childLanes=j,null}function qm(n,l){return l=Ym({mode:l.mode,children:l.children},n.mode),l.ref=n.ref,n.child=l,l.return=n,l}function zN(n,l,d){return no(l,n.child,null,d),n=qm(l,l.pendingProps),n.flags|=2,nn(l),l.memoizedState=null,n}function O3(n,l,d){var m=l.pendingProps,j=(l.flags&128)!==0;if(l.flags&=-129,n===null){if(Es){if(m.mode==="hidden")return n=qm(l,m),l.lanes=536870912,Bd(null,n);if(Xx(l),(n=na)?(n=Z1(n,Sn),n=n!==null&&n.data==="&"?n:null,n!==null&&(l.memoizedState={dehydrated:n,treeContext:rl!==null?{id:ai,overflow:ri}:null,retryLane:536870912,hydrationErrors:null},d=wy(n),d.return=l,l.child=d,nr=l,na=null)):n=null,n===null)throw il(l);return l.lanes=536870912,null}return qm(l,m)}var w=n.memoizedState;if(w!==null){var I=w.dehydrated;if(Xx(l),j)if(l.flags&256)l.flags&=-257,l=zN(n,l,d);else if(l.memoizedState!==null)l.child=n.child,l.flags|=128,l=null;else throw Error(r(558));else if(Ua||ac(n,l,d,!1),j=(d&n.childLanes)!==0,Ua||j){if(m=aa,m!==null&&(I=vs(m,d),I!==0&&I!==w.retryLane))throw w.retryLane=I,Ql(n,I),Gr(m,n,I),gp;rh(),l=zN(n,l,d)}else n=w.treeContext,na=Tn(I.nextSibling),nr=l,Es=!0,nl=null,Sn=!1,n!==null&&Ty(l,n),l=qm(l,m),l.flags|=4096;return l}return n=Si(n.child,{mode:m.mode,children:m.children}),n.ref=l.ref,l.child=n,n.return=l,n}function Km(n,l){var d=l.ref;if(d===null)n!==null&&n.ref!==null&&(l.flags|=4194816);else{if(typeof d!="function"&&typeof d!="object")throw Error(r(284));(n===null||n.ref!==d)&&(l.flags|=4194816)}}function vp(n,l,d,m,j){return to(l),d=Zx(n,l,d,m,void 0,j),m=Jx(),n!==null&&!Ua?(ep(n,l,j),_i(n,l,j)):(Es&&m&&Rx(l),l.flags|=1,lr(n,l,d,j),l.child)}function UN(n,l,d,m,j,w){return to(l),l.updateQueue=null,d=Hy(l,m,d,j),$y(n),m=Jx(),n!==null&&!Ua?(ep(n,l,w),_i(n,l,w)):(Es&&m&&Rx(l),l.flags|=1,lr(n,l,d,w),l.child)}function VN(n,l,d,m,j){if(to(l),l.stateNode===null){var w=Jo,I=d.contextType;typeof I=="object"&&I!==null&&(w=ir(I)),w=new d(m,w),l.memoizedState=w.state!==null&&w.state!==void 0?w.state:null,w.updater=xp,l.stateNode=w,w._reactInternals=l,w=l.stateNode,w.props=m,w.state=l.memoizedState,w.refs={},Hx(l),I=d.contextType,w.context=typeof I=="object"&&I!==null?ir(I):Jo,w.state=l.memoizedState,I=d.getDerivedStateFromProps,typeof I=="function"&&(fp(l,d,I,m),w.state=l.memoizedState),typeof d.getDerivedStateFromProps=="function"||typeof w.getSnapshotBeforeUpdate=="function"||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(I=w.state,typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount(),I!==w.state&&xp.enqueueReplaceState(w,w.state,null),Pd(l,m,w,j),Rd(),w.state=l.memoizedState),typeof w.componentDidMount=="function"&&(l.flags|=4194308),m=!0}else if(n===null){w=l.stateNode;var re=l.memoizedProps,ye=lo(d,re);w.props=ye;var Be=w.context,qe=d.contextType;I=Jo,typeof qe=="object"&&qe!==null&&(I=ir(qe));var et=d.getDerivedStateFromProps;qe=typeof et=="function"||typeof w.getSnapshotBeforeUpdate=="function",re=l.pendingProps!==re,qe||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(re||Be!==I)&&kN(l,w,m,I),ol=!1;var ze=l.memoizedState;w.state=ze,Pd(l,m,w,j),Rd(),Be=l.memoizedState,re||ze!==Be||ol?(typeof et=="function"&&(fp(l,d,et,m),Be=l.memoizedState),(ye=ol||EN(l,d,ye,m,ze,Be,I))?(qe||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount()),typeof w.componentDidMount=="function"&&(l.flags|=4194308)):(typeof w.componentDidMount=="function"&&(l.flags|=4194308),l.memoizedProps=m,l.memoizedState=Be),w.props=m,w.state=Be,w.context=I,m=ye):(typeof w.componentDidMount=="function"&&(l.flags|=4194308),m=!1)}else{w=l.stateNode,Wx(n,l),I=l.memoizedProps,qe=lo(d,I),w.props=qe,et=l.pendingProps,ze=w.context,Be=d.contextType,ye=Jo,typeof Be=="object"&&Be!==null&&(ye=ir(Be)),re=d.getDerivedStateFromProps,(Be=typeof re=="function"||typeof w.getSnapshotBeforeUpdate=="function")||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(I!==et||ze!==ye)&&kN(l,w,m,ye),ol=!1,ze=l.memoizedState,w.state=ze,Pd(l,m,w,j),Rd();var He=l.memoizedState;I!==et||ze!==He||ol||n!==null&&n.dependencies!==null&&Am(n.dependencies)?(typeof re=="function"&&(fp(l,d,re,m),He=l.memoizedState),(qe=ol||EN(l,d,qe,m,ze,He,ye)||n!==null&&n.dependencies!==null&&Am(n.dependencies))?(Be||typeof w.UNSAFE_componentWillUpdate!="function"&&typeof w.componentWillUpdate!="function"||(typeof w.componentWillUpdate=="function"&&w.componentWillUpdate(m,He,ye),typeof w.UNSAFE_componentWillUpdate=="function"&&w.UNSAFE_componentWillUpdate(m,He,ye)),typeof w.componentDidUpdate=="function"&&(l.flags|=4),typeof w.getSnapshotBeforeUpdate=="function"&&(l.flags|=1024)):(typeof w.componentDidUpdate!="function"||I===n.memoizedProps&&ze===n.memoizedState||(l.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||I===n.memoizedProps&&ze===n.memoizedState||(l.flags|=1024),l.memoizedProps=m,l.memoizedState=He),w.props=m,w.state=He,w.context=ye,m=qe):(typeof w.componentDidUpdate!="function"||I===n.memoizedProps&&ze===n.memoizedState||(l.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||I===n.memoizedProps&&ze===n.memoizedState||(l.flags|=1024),m=!1)}return w=m,Km(n,l),m=(l.flags&128)!==0,w||m?(w=l.stateNode,d=m&&typeof d.getDerivedStateFromError!="function"?null:w.render(),l.flags|=1,n!==null&&m?(l.child=no(l,n.child,null,j),l.child=no(l,null,d,j)):lr(n,l,d,j),l.memoizedState=w.state,n=l.child):n=_i(n,l,j),n}function $N(n,l,d,m){return Jl(),l.flags|=256,lr(n,l,d,m),l.child}var jp={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function yp(n){return{baseLanes:n,cachePool:Oy()}}function Np(n,l,d){return n=n!==null?n.childLanes&~d:0,l&&(n|=on),n}function HN(n,l,d){var m=l.pendingProps,j=!1,w=(l.flags&128)!==0,I;if((I=w)||(I=n!==null&&n.memoizedState===null?!1:(Oa.current&2)!==0),I&&(j=!0,l.flags&=-129),I=(l.flags&32)!==0,l.flags&=-33,n===null){if(Es){if(j?ul(l):ml(),(n=na)?(n=Z1(n,Sn),n=n!==null&&n.data!=="&"?n:null,n!==null&&(l.memoizedState={dehydrated:n,treeContext:rl!==null?{id:ai,overflow:ri}:null,retryLane:536870912,hydrationErrors:null},d=wy(n),d.return=l,l.child=d,nr=l,na=null)):n=null,n===null)throw il(l);return a0(n)?l.lanes=32:l.lanes=536870912,null}var re=m.children;return m=m.fallback,j?(ml(),j=l.mode,re=Ym({mode:"hidden",children:re},j),m=Zl(m,j,d,null),re.return=l,m.return=l,re.sibling=m,l.child=re,m=l.child,m.memoizedState=yp(d),m.childLanes=Np(n,I,d),l.memoizedState=jp,Bd(null,m)):(ul(l),bp(l,re))}var ye=n.memoizedState;if(ye!==null&&(re=ye.dehydrated,re!==null)){if(w)l.flags&256?(ul(l),l.flags&=-257,l=wp(n,l,d)):l.memoizedState!==null?(ml(),l.child=n.child,l.flags|=128,l=null):(ml(),re=m.fallback,j=l.mode,m=Ym({mode:"visible",children:m.children},j),re=Zl(re,j,d,null),re.flags|=2,m.return=l,re.return=l,m.sibling=re,l.child=m,no(l,n.child,null,d),m=l.child,m.memoizedState=yp(d),m.childLanes=Np(n,I,d),l.memoizedState=jp,l=Bd(null,m));else if(ul(l),a0(re)){if(I=re.nextSibling&&re.nextSibling.dataset,I)var Be=I.dgst;I=Be,m=Error(r(419)),m.stack="",m.digest=I,Ed({value:m,source:null,stack:null}),l=wp(n,l,d)}else if(Ua||ac(n,l,d,!1),I=(d&n.childLanes)!==0,Ua||I){if(I=aa,I!==null&&(m=vs(I,d),m!==0&&m!==ye.retryLane))throw ye.retryLane=m,Ql(n,m),Gr(I,n,m),gp;s0(re)||rh(),l=wp(n,l,d)}else s0(re)?(l.flags|=192,l.child=n.child,l=null):(n=ye.treeContext,na=Tn(re.nextSibling),nr=l,Es=!0,nl=null,Sn=!1,n!==null&&Ty(l,n),l=bp(l,m.children),l.flags|=4096);return l}return j?(ml(),re=m.fallback,j=l.mode,ye=n.child,Be=ye.sibling,m=Si(ye,{mode:"hidden",children:m.children}),m.subtreeFlags=ye.subtreeFlags&65011712,Be!==null?re=Si(Be,re):(re=Zl(re,j,d,null),re.flags|=2),re.return=l,m.return=l,m.sibling=re,l.child=m,Bd(null,m),m=l.child,re=n.child.memoizedState,re===null?re=yp(d):(j=re.cachePool,j!==null?(ye=Ba._currentValue,j=j.parent!==ye?{parent:ye,pool:ye}:j):j=Oy(),re={baseLanes:re.baseLanes|d,cachePool:j}),m.memoizedState=re,m.childLanes=Np(n,I,d),l.memoizedState=jp,Bd(n.child,m)):(ul(l),d=n.child,n=d.sibling,d=Si(d,{mode:"visible",children:m.children}),d.return=l,d.sibling=null,n!==null&&(I=l.deletions,I===null?(l.deletions=[n],l.flags|=16):I.push(n)),l.child=d,l.memoizedState=null,d)}function bp(n,l){return l=Ym({mode:"visible",children:l},n.mode),l.return=n,n.child=l}function Ym(n,l){return n=an(22,n,null,l),n.lanes=0,n}function wp(n,l,d){return no(l,n.child,null,d),n=bp(l,l.pendingProps.children),n.flags|=2,l.memoizedState=null,n}function WN(n,l,d){n.lanes|=l;var m=n.alternate;m!==null&&(m.lanes|=l),Ix(n.return,l,d)}function Sp(n,l,d,m,j,w){var I=n.memoizedState;I===null?n.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:m,tail:d,tailMode:j,treeForkCount:w}:(I.isBackwards=l,I.rendering=null,I.renderingStartTime=0,I.last=m,I.tail=d,I.tailMode=j,I.treeForkCount=w)}function GN(n,l,d){var m=l.pendingProps,j=m.revealOrder,w=m.tail;m=m.children;var I=Oa.current,re=(I&2)!==0;if(re?(I=I&1|2,l.flags|=128):I&=1,X(Oa,I),lr(n,l,m,d),m=Es?Td:0,!re&&n!==null&&(n.flags&128)!==0)e:for(n=l.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&WN(n,d,l);else if(n.tag===19)WN(n,d,l);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===l)break e;for(;n.sibling===null;){if(n.return===null||n.return===l)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}switch(j){case"forwards":for(d=l.child,j=null;d!==null;)n=d.alternate,n!==null&&Lm(n)===null&&(j=d),d=d.sibling;d=j,d===null?(j=l.child,l.child=null):(j=d.sibling,d.sibling=null),Sp(l,!1,j,d,w,m);break;case"backwards":case"unstable_legacy-backwards":for(d=null,j=l.child,l.child=null;j!==null;){if(n=j.alternate,n!==null&&Lm(n)===null){l.child=j;break}n=j.sibling,j.sibling=d,d=j,j=n}Sp(l,!0,d,null,w,m);break;case"together":Sp(l,!1,null,null,void 0,m);break;default:l.memoizedState=null}return l.child}function _i(n,l,d){if(n!==null&&(l.dependencies=n.dependencies),xl|=l.lanes,(d&l.childLanes)===0)if(n!==null){if(ac(n,l,d,!1),(d&l.childLanes)===0)return null}else return null;if(n!==null&&l.child!==n.child)throw Error(r(153));if(l.child!==null){for(n=l.child,d=Si(n,n.pendingProps),l.child=d,d.return=l;n.sibling!==null;)n=n.sibling,d=d.sibling=Si(n,n.pendingProps),d.return=l;d.sibling=null}return l.child}function Cp(n,l){return(n.lanes&l)!==0?!0:(n=n.dependencies,!!(n!==null&&Am(n)))}function R3(n,l,d){switch(l.tag){case 3:Le(l,l.stateNode.containerInfo),ll(l,Ba,n.memoizedState.cache),Jl();break;case 27:case 5:oe(l);break;case 4:Le(l,l.stateNode.containerInfo);break;case 10:ll(l,l.type,l.memoizedProps.value);break;case 31:if(l.memoizedState!==null)return l.flags|=128,Xx(l),null;break;case 13:var m=l.memoizedState;if(m!==null)return m.dehydrated!==null?(ul(l),l.flags|=128,null):(d&l.child.childLanes)!==0?HN(n,l,d):(ul(l),n=_i(n,l,d),n!==null?n.sibling:null);ul(l);break;case 19:var j=(n.flags&128)!==0;if(m=(d&l.childLanes)!==0,m||(ac(n,l,d,!1),m=(d&l.childLanes)!==0),j){if(m)return GN(n,l,d);l.flags|=128}if(j=l.memoizedState,j!==null&&(j.rendering=null,j.tail=null,j.lastEffect=null),X(Oa,Oa.current),m)break;return null;case 22:return l.lanes=0,IN(n,l,d,l.pendingProps);case 24:ll(l,Ba,n.memoizedState.cache)}return _i(n,l,d)}function qN(n,l,d){if(n!==null)if(n.memoizedProps!==l.pendingProps)Ua=!0;else{if(!Cp(n,d)&&(l.flags&128)===0)return Ua=!1,R3(n,l,d);Ua=(n.flags&131072)!==0}else Ua=!1,Es&&(l.flags&1048576)!==0&&Cy(l,Td,l.index);switch(l.lanes=0,l.tag){case 16:e:{var m=l.pendingProps;if(n=ao(l.elementType),l.type=n,typeof n=="function")_x(n)?(m=lo(n,m),l.tag=1,l=VN(null,l,n,m,d)):(l.tag=0,l=vp(null,l,n,m,d));else{if(n!=null){var j=n.$$typeof;if(j===G){l.tag=11,l=MN(null,l,n,m,d);break e}else if(j===T){l.tag=14,l=FN(null,l,n,m,d);break e}}throw l=B(n)||n,Error(r(306,l,""))}}return l;case 0:return vp(n,l,l.type,l.pendingProps,d);case 1:return m=l.type,j=lo(m,l.pendingProps),VN(n,l,m,j,d);case 3:e:{if(Le(l,l.stateNode.containerInfo),n===null)throw Error(r(387));m=l.pendingProps;var w=l.memoizedState;j=w.element,Wx(n,l),Pd(l,m,null,d);var I=l.memoizedState;if(m=I.cache,ll(l,Ba,m),m!==w.cache&&Bx(l,[Ba],d,!0),Rd(),m=I.element,w.isDehydrated)if(w={element:m,isDehydrated:!1,cache:I.cache},l.updateQueue.baseState=w,l.memoizedState=w,l.flags&256){l=$N(n,l,m,d);break e}else if(m!==j){j=Nn(Error(r(424)),l),Ed(j),l=$N(n,l,m,d);break e}else{switch(n=l.stateNode.containerInfo,n.nodeType){case 9:n=n.body;break;default:n=n.nodeName==="HTML"?n.ownerDocument.body:n}for(na=Tn(n.firstChild),nr=l,Es=!0,nl=null,Sn=!0,d=Iy(l,null,m,d),l.child=d;d;)d.flags=d.flags&-3|4096,d=d.sibling}else{if(Jl(),m===j){l=_i(n,l,d);break e}lr(n,l,m,d)}l=l.child}return l;case 26:return Km(n,l),n===null?(d=rb(l.type,null,l.pendingProps,null))?l.memoizedState=d:Es||(d=l.type,n=l.pendingProps,m=uh(ie.current).createElement(d),m[M]=l,m[ne]=n,or(m,d,n),it(m),l.stateNode=m):l.memoizedState=rb(l.type,n.memoizedProps,l.pendingProps,n.memoizedState),null;case 27:return oe(l),n===null&&Es&&(m=l.stateNode=tb(l.type,l.pendingProps,ie.current),nr=l,Sn=!0,j=na,yl(l.type)?(r0=j,na=Tn(m.firstChild)):na=j),lr(n,l,l.pendingProps.children,d),Km(n,l),n===null&&(l.flags|=4194304),l.child;case 5:return n===null&&Es&&((j=m=na)&&(m=c5(m,l.type,l.pendingProps,Sn),m!==null?(l.stateNode=m,nr=l,na=Tn(m.firstChild),Sn=!1,j=!0):j=!1),j||il(l)),oe(l),j=l.type,w=l.pendingProps,I=n!==null?n.memoizedProps:null,m=w.children,Jp(j,w)?m=null:I!==null&&Jp(j,I)&&(l.flags|=32),l.memoizedState!==null&&(j=Zx(n,l,S3,null,null,d),eu._currentValue=j),Km(n,l),lr(n,l,m,d),l.child;case 6:return n===null&&Es&&((n=d=na)&&(d=d5(d,l.pendingProps,Sn),d!==null?(l.stateNode=d,nr=l,na=null,n=!0):n=!1),n||il(l)),null;case 13:return HN(n,l,d);case 4:return Le(l,l.stateNode.containerInfo),m=l.pendingProps,n===null?l.child=no(l,null,m,d):lr(n,l,m,d),l.child;case 11:return MN(n,l,l.type,l.pendingProps,d);case 7:return lr(n,l,l.pendingProps,d),l.child;case 8:return lr(n,l,l.pendingProps.children,d),l.child;case 12:return lr(n,l,l.pendingProps.children,d),l.child;case 10:return m=l.pendingProps,ll(l,l.type,m.value),lr(n,l,m.children,d),l.child;case 9:return j=l.type._context,m=l.pendingProps.children,to(l),j=ir(j),m=m(j),l.flags|=1,lr(n,l,m,d),l.child;case 14:return FN(n,l,l.type,l.pendingProps,d);case 15:return LN(n,l,l.type,l.pendingProps,d);case 19:return GN(n,l,d);case 31:return O3(n,l,d);case 22:return IN(n,l,d,l.pendingProps);case 24:return to(l),m=ir(Ba),n===null?(j=Vx(),j===null&&(j=aa,w=zx(),j.pooledCache=w,w.refCount++,w!==null&&(j.pooledCacheLanes|=d),j=w),l.memoizedState={parent:m,cache:j},Hx(l),ll(l,Ba,j)):((n.lanes&d)!==0&&(Wx(n,l),Pd(l,null,null,d),Rd()),j=n.memoizedState,w=l.memoizedState,j.parent!==m?(j={parent:m,cache:m},l.memoizedState=j,l.lanes===0&&(l.memoizedState=l.updateQueue.baseState=j),ll(l,Ba,m)):(m=w.cache,ll(l,Ba,m),m!==j.cache&&Bx(l,[Ba],d,!0))),lr(n,l,l.pendingProps.children,d),l.child;case 29:throw l.pendingProps}throw Error(r(156,l.tag))}function Di(n){n.flags|=4}function Tp(n,l,d,m,j){if((l=(n.mode&32)!==0)&&(l=!1),l){if(n.flags|=16777216,(j&335544128)===j)if(n.stateNode.complete)n.flags|=8192;else if(y1())n.flags|=8192;else throw ro=Rm,$x}else n.flags&=-16777217}function KN(n,l){if(l.type!=="stylesheet"||(l.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!cb(l))if(y1())n.flags|=8192;else throw ro=Rm,$x}function Xm(n,l){l!==null&&(n.flags|=4),n.flags&16384&&(l=n.tag!==22?ht():536870912,n.lanes|=l,xc|=l)}function zd(n,l){if(!Es)switch(n.tailMode){case"hidden":l=n.tail;for(var d=null;l!==null;)l.alternate!==null&&(d=l),l=l.sibling;d===null?n.tail=null:d.sibling=null;break;case"collapsed":d=n.tail;for(var m=null;d!==null;)d.alternate!==null&&(m=d),d=d.sibling;m===null?l||n.tail===null?n.tail=null:n.tail.sibling=null:m.sibling=null}}function ia(n){var l=n.alternate!==null&&n.alternate.child===n.child,d=0,m=0;if(l)for(var j=n.child;j!==null;)d|=j.lanes|j.childLanes,m|=j.subtreeFlags&65011712,m|=j.flags&65011712,j.return=n,j=j.sibling;else for(j=n.child;j!==null;)d|=j.lanes|j.childLanes,m|=j.subtreeFlags,m|=j.flags,j.return=n,j=j.sibling;return n.subtreeFlags|=m,n.childLanes=d,l}function P3(n,l,d){var m=l.pendingProps;switch(Px(l),l.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ia(l),null;case 1:return ia(l),null;case 3:return d=l.stateNode,m=null,n!==null&&(m=n.memoizedState.cache),l.memoizedState.cache!==m&&(l.flags|=2048),Ei(Ba),ve(),d.pendingContext&&(d.context=d.pendingContext,d.pendingContext=null),(n===null||n.child===null)&&(sc(l)?Di(l):n===null||n.memoizedState.isDehydrated&&(l.flags&256)===0||(l.flags|=1024,Fx())),ia(l),null;case 26:var j=l.type,w=l.memoizedState;return n===null?(Di(l),w!==null?(ia(l),KN(l,w)):(ia(l),Tp(l,j,null,m,d))):w?w!==n.memoizedState?(Di(l),ia(l),KN(l,w)):(ia(l),l.flags&=-16777217):(n=n.memoizedProps,n!==m&&Di(l),ia(l),Tp(l,j,n,m,d)),null;case 27:if(Pe(l),d=ie.current,j=l.type,n!==null&&l.stateNode!=null)n.memoizedProps!==m&&Di(l);else{if(!m){if(l.stateNode===null)throw Error(r(166));return ia(l),null}n=O.current,sc(l)?Ey(l):(n=tb(j,m,d),l.stateNode=n,Di(l))}return ia(l),null;case 5:if(Pe(l),j=l.type,n!==null&&l.stateNode!=null)n.memoizedProps!==m&&Di(l);else{if(!m){if(l.stateNode===null)throw Error(r(166));return ia(l),null}if(w=O.current,sc(l))Ey(l);else{var I=uh(ie.current);switch(w){case 1:w=I.createElementNS("http://www.w3.org/2000/svg",j);break;case 2:w=I.createElementNS("http://www.w3.org/1998/Math/MathML",j);break;default:switch(j){case"svg":w=I.createElementNS("http://www.w3.org/2000/svg",j);break;case"math":w=I.createElementNS("http://www.w3.org/1998/Math/MathML",j);break;case"script":w=I.createElement("div"),w.innerHTML="<script><\/script>",w=w.removeChild(w.firstChild);break;case"select":w=typeof m.is=="string"?I.createElement("select",{is:m.is}):I.createElement("select"),m.multiple?w.multiple=!0:m.size&&(w.size=m.size);break;default:w=typeof m.is=="string"?I.createElement(j,{is:m.is}):I.createElement(j)}}w[M]=l,w[ne]=m;e:for(I=l.child;I!==null;){if(I.tag===5||I.tag===6)w.appendChild(I.stateNode);else if(I.tag!==4&&I.tag!==27&&I.child!==null){I.child.return=I,I=I.child;continue}if(I===l)break e;for(;I.sibling===null;){if(I.return===null||I.return===l)break e;I=I.return}I.sibling.return=I.return,I=I.sibling}l.stateNode=w;e:switch(or(w,j,m),j){case"button":case"input":case"select":case"textarea":m=!!m.autoFocus;break e;case"img":m=!0;break e;default:m=!1}m&&Di(l)}}return ia(l),Tp(l,l.type,n===null?null:n.memoizedProps,l.pendingProps,d),null;case 6:if(n&&l.stateNode!=null)n.memoizedProps!==m&&Di(l);else{if(typeof m!="string"&&l.stateNode===null)throw Error(r(166));if(n=ie.current,sc(l)){if(n=l.stateNode,d=l.memoizedProps,m=null,j=nr,j!==null)switch(j.tag){case 27:case 5:m=j.memoizedProps}n[M]=l,n=!!(n.nodeValue===d||m!==null&&m.suppressHydrationWarning===!0||H1(n.nodeValue,d)),n||il(l,!0)}else n=uh(n).createTextNode(m),n[M]=l,l.stateNode=n}return ia(l),null;case 31:if(d=l.memoizedState,n===null||n.memoizedState!==null){if(m=sc(l),d!==null){if(n===null){if(!m)throw Error(r(318));if(n=l.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(r(557));n[M]=l}else Jl(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;ia(l),n=!1}else d=Fx(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=d),n=!0;if(!n)return l.flags&256?(nn(l),l):(nn(l),null);if((l.flags&128)!==0)throw Error(r(558))}return ia(l),null;case 13:if(m=l.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(j=sc(l),m!==null&&m.dehydrated!==null){if(n===null){if(!j)throw Error(r(318));if(j=l.memoizedState,j=j!==null?j.dehydrated:null,!j)throw Error(r(317));j[M]=l}else Jl(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;ia(l),j=!1}else j=Fx(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=j),j=!0;if(!j)return l.flags&256?(nn(l),l):(nn(l),null)}return nn(l),(l.flags&128)!==0?(l.lanes=d,l):(d=m!==null,n=n!==null&&n.memoizedState!==null,d&&(m=l.child,j=null,m.alternate!==null&&m.alternate.memoizedState!==null&&m.alternate.memoizedState.cachePool!==null&&(j=m.alternate.memoizedState.cachePool.pool),w=null,m.memoizedState!==null&&m.memoizedState.cachePool!==null&&(w=m.memoizedState.cachePool.pool),w!==j&&(m.flags|=2048)),d!==n&&d&&(l.child.flags|=8192),Xm(l,l.updateQueue),ia(l),null);case 4:return ve(),n===null&&Kp(l.stateNode.containerInfo),ia(l),null;case 10:return Ei(l.type),ia(l),null;case 19:if(L(Oa),m=l.memoizedState,m===null)return ia(l),null;if(j=(l.flags&128)!==0,w=m.rendering,w===null)if(j)zd(m,!1);else{if(Ta!==0||n!==null&&(n.flags&128)!==0)for(n=l.child;n!==null;){if(w=Lm(n),w!==null){for(l.flags|=128,zd(m,!1),n=w.updateQueue,l.updateQueue=n,Xm(l,n),l.subtreeFlags=0,n=d,d=l.child;d!==null;)by(d,n),d=d.sibling;return X(Oa,Oa.current&1|2),Es&&Ci(l,m.treeForkCount),l.child}n=n.sibling}m.tail!==null&&Rt()>th&&(l.flags|=128,j=!0,zd(m,!1),l.lanes=4194304)}else{if(!j)if(n=Lm(w),n!==null){if(l.flags|=128,j=!0,n=n.updateQueue,l.updateQueue=n,Xm(l,n),zd(m,!0),m.tail===null&&m.tailMode==="hidden"&&!w.alternate&&!Es)return ia(l),null}else 2*Rt()-m.renderingStartTime>th&&d!==536870912&&(l.flags|=128,j=!0,zd(m,!1),l.lanes=4194304);m.isBackwards?(w.sibling=l.child,l.child=w):(n=m.last,n!==null?n.sibling=w:l.child=w,m.last=w)}return m.tail!==null?(n=m.tail,m.rendering=n,m.tail=n.sibling,m.renderingStartTime=Rt(),n.sibling=null,d=Oa.current,X(Oa,j?d&1|2:d&1),Es&&Ci(l,m.treeForkCount),n):(ia(l),null);case 22:case 23:return nn(l),Yx(),m=l.memoizedState!==null,n!==null?n.memoizedState!==null!==m&&(l.flags|=8192):m&&(l.flags|=8192),m?(d&536870912)!==0&&(l.flags&128)===0&&(ia(l),l.subtreeFlags&6&&(l.flags|=8192)):ia(l),d=l.updateQueue,d!==null&&Xm(l,d.retryQueue),d=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(d=n.memoizedState.cachePool.pool),m=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(m=l.memoizedState.cachePool.pool),m!==d&&(l.flags|=2048),n!==null&&L(so),null;case 24:return d=null,n!==null&&(d=n.memoizedState.cache),l.memoizedState.cache!==d&&(l.flags|=2048),Ei(Ba),ia(l),null;case 25:return null;case 30:return null}throw Error(r(156,l.tag))}function M3(n,l){switch(Px(l),l.tag){case 1:return n=l.flags,n&65536?(l.flags=n&-65537|128,l):null;case 3:return Ei(Ba),ve(),n=l.flags,(n&65536)!==0&&(n&128)===0?(l.flags=n&-65537|128,l):null;case 26:case 27:case 5:return Pe(l),null;case 31:if(l.memoizedState!==null){if(nn(l),l.alternate===null)throw Error(r(340));Jl()}return n=l.flags,n&65536?(l.flags=n&-65537|128,l):null;case 13:if(nn(l),n=l.memoizedState,n!==null&&n.dehydrated!==null){if(l.alternate===null)throw Error(r(340));Jl()}return n=l.flags,n&65536?(l.flags=n&-65537|128,l):null;case 19:return L(Oa),null;case 4:return ve(),null;case 10:return Ei(l.type),null;case 22:case 23:return nn(l),Yx(),n!==null&&L(so),n=l.flags,n&65536?(l.flags=n&-65537|128,l):null;case 24:return Ei(Ba),null;case 25:return null;default:return null}}function YN(n,l){switch(Px(l),l.tag){case 3:Ei(Ba),ve();break;case 26:case 27:case 5:Pe(l);break;case 4:ve();break;case 31:l.memoizedState!==null&&nn(l);break;case 13:nn(l);break;case 19:L(Oa);break;case 10:Ei(l.type);break;case 22:case 23:nn(l),Yx(),n!==null&&L(so);break;case 24:Ei(Ba)}}function Ud(n,l){try{var d=l.updateQueue,m=d!==null?d.lastEffect:null;if(m!==null){var j=m.next;d=j;do{if((d.tag&n)===n){m=void 0;var w=d.create,I=d.inst;m=w(),I.destroy=m}d=d.next}while(d!==j)}}catch(re){Us(l,l.return,re)}}function hl(n,l,d){try{var m=l.updateQueue,j=m!==null?m.lastEffect:null;if(j!==null){var w=j.next;m=w;do{if((m.tag&n)===n){var I=m.inst,re=I.destroy;if(re!==void 0){I.destroy=void 0,j=l;var ye=d,Be=re;try{Be()}catch(qe){Us(j,ye,qe)}}}m=m.next}while(m!==w)}}catch(qe){Us(l,l.return,qe)}}function XN(n){var l=n.updateQueue;if(l!==null){var d=n.stateNode;try{zy(l,d)}catch(m){Us(n,n.return,m)}}}function QN(n,l,d){d.props=lo(n.type,n.memoizedProps),d.state=n.memoizedState;try{d.componentWillUnmount()}catch(m){Us(n,l,m)}}function Vd(n,l){try{var d=n.ref;if(d!==null){switch(n.tag){case 26:case 27:case 5:var m=n.stateNode;break;case 30:m=n.stateNode;break;default:m=n.stateNode}typeof d=="function"?n.refCleanup=d(m):d.current=m}}catch(j){Us(n,l,j)}}function ni(n,l){var d=n.ref,m=n.refCleanup;if(d!==null)if(typeof m=="function")try{m()}catch(j){Us(n,l,j)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof d=="function")try{d(null)}catch(j){Us(n,l,j)}else d.current=null}function ZN(n){var l=n.type,d=n.memoizedProps,m=n.stateNode;try{e:switch(l){case"button":case"input":case"select":case"textarea":d.autoFocus&&m.focus();break e;case"img":d.src?m.src=d.src:d.srcSet&&(m.srcset=d.srcSet)}}catch(j){Us(n,n.return,j)}}function Ep(n,l,d){try{var m=n.stateNode;a5(m,n.type,d,l),m[ne]=l}catch(j){Us(n,n.return,j)}}function JN(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&yl(n.type)||n.tag===4}function kp(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||JN(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&yl(n.type)||n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Ap(n,l,d){var m=n.tag;if(m===5||m===6)n=n.stateNode,l?(d.nodeType===9?d.body:d.nodeName==="HTML"?d.ownerDocument.body:d).insertBefore(n,l):(l=d.nodeType===9?d.body:d.nodeName==="HTML"?d.ownerDocument.body:d,l.appendChild(n),d=d._reactRootContainer,d!=null||l.onclick!==null||(l.onclick=bi));else if(m!==4&&(m===27&&yl(n.type)&&(d=n.stateNode,l=null),n=n.child,n!==null))for(Ap(n,l,d),n=n.sibling;n!==null;)Ap(n,l,d),n=n.sibling}function Qm(n,l,d){var m=n.tag;if(m===5||m===6)n=n.stateNode,l?d.insertBefore(n,l):d.appendChild(n);else if(m!==4&&(m===27&&yl(n.type)&&(d=n.stateNode),n=n.child,n!==null))for(Qm(n,l,d),n=n.sibling;n!==null;)Qm(n,l,d),n=n.sibling}function e1(n){var l=n.stateNode,d=n.memoizedProps;try{for(var m=n.type,j=l.attributes;j.length;)l.removeAttributeNode(j[0]);or(l,m,d),l[M]=n,l[ne]=d}catch(w){Us(n,n.return,w)}}var Oi=!1,Va=!1,_p=!1,t1=typeof WeakSet=="function"?WeakSet:Set,tr=null;function F3(n,l){if(n=n.containerInfo,Qp=vh,n=hy(n),wx(n)){if("selectionStart"in n)var d={start:n.selectionStart,end:n.selectionEnd};else e:{d=(d=n.ownerDocument)&&d.defaultView||window;var m=d.getSelection&&d.getSelection();if(m&&m.rangeCount!==0){d=m.anchorNode;var j=m.anchorOffset,w=m.focusNode;m=m.focusOffset;try{d.nodeType,w.nodeType}catch{d=null;break e}var I=0,re=-1,ye=-1,Be=0,qe=0,et=n,ze=null;t:for(;;){for(var He;et!==d||j!==0&&et.nodeType!==3||(re=I+j),et!==w||m!==0&&et.nodeType!==3||(ye=I+m),et.nodeType===3&&(I+=et.nodeValue.length),(He=et.firstChild)!==null;)ze=et,et=He;for(;;){if(et===n)break t;if(ze===d&&++Be===j&&(re=I),ze===w&&++qe===m&&(ye=I),(He=et.nextSibling)!==null)break;et=ze,ze=et.parentNode}et=He}d=re===-1||ye===-1?null:{start:re,end:ye}}else d=null}d=d||{start:0,end:0}}else d=null;for(Zp={focusedElem:n,selectionRange:d},vh=!1,tr=l;tr!==null;)if(l=tr,n=l.child,(l.subtreeFlags&1028)!==0&&n!==null)n.return=l,tr=n;else for(;tr!==null;){switch(l=tr,w=l.alternate,n=l.flags,l.tag){case 0:if((n&4)!==0&&(n=l.updateQueue,n=n!==null?n.events:null,n!==null))for(d=0;d<n.length;d++)j=n[d],j.ref.impl=j.nextImpl;break;case 11:case 15:break;case 1:if((n&1024)!==0&&w!==null){n=void 0,d=l,j=w.memoizedProps,w=w.memoizedState,m=d.stateNode;try{var Tt=lo(d.type,j);n=m.getSnapshotBeforeUpdate(Tt,w),m.__reactInternalSnapshotBeforeUpdate=n}catch(Gt){Us(d,d.return,Gt)}}break;case 3:if((n&1024)!==0){if(n=l.stateNode.containerInfo,d=n.nodeType,d===9)t0(n);else if(d===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":t0(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(r(163))}if(n=l.sibling,n!==null){n.return=l.return,tr=n;break}tr=l.return}}function s1(n,l,d){var m=d.flags;switch(d.tag){case 0:case 11:case 15:Pi(n,d),m&4&&Ud(5,d);break;case 1:if(Pi(n,d),m&4)if(n=d.stateNode,l===null)try{n.componentDidMount()}catch(I){Us(d,d.return,I)}else{var j=lo(d.type,l.memoizedProps);l=l.memoizedState;try{n.componentDidUpdate(j,l,n.__reactInternalSnapshotBeforeUpdate)}catch(I){Us(d,d.return,I)}}m&64&&XN(d),m&512&&Vd(d,d.return);break;case 3:if(Pi(n,d),m&64&&(n=d.updateQueue,n!==null)){if(l=null,d.child!==null)switch(d.child.tag){case 27:case 5:l=d.child.stateNode;break;case 1:l=d.child.stateNode}try{zy(n,l)}catch(I){Us(d,d.return,I)}}break;case 27:l===null&&m&4&&e1(d);case 26:case 5:Pi(n,d),l===null&&m&4&&ZN(d),m&512&&Vd(d,d.return);break;case 12:Pi(n,d);break;case 31:Pi(n,d),m&4&&n1(n,d);break;case 13:Pi(n,d),m&4&&i1(n,d),m&64&&(n=d.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(d=W3.bind(null,d),u5(n,d))));break;case 22:if(m=d.memoizedState!==null||Oi,!m){l=l!==null&&l.memoizedState!==null||Va,j=Oi;var w=Va;Oi=m,(Va=l)&&!w?Mi(n,d,(d.subtreeFlags&8772)!==0):Pi(n,d),Oi=j,Va=w}break;case 30:break;default:Pi(n,d)}}function a1(n){var l=n.alternate;l!==null&&(n.alternate=null,a1(l)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(l=n.stateNode,l!==null&&rt(l)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var fa=null,Vr=!1;function Ri(n,l,d){for(d=d.child;d!==null;)r1(n,l,d),d=d.sibling}function r1(n,l,d){if(as&&typeof as.onCommitFiberUnmount=="function")try{as.onCommitFiberUnmount(Jt,d)}catch{}switch(d.tag){case 26:Va||ni(d,l),Ri(n,l,d),d.memoizedState?d.memoizedState.count--:d.stateNode&&(d=d.stateNode,d.parentNode.removeChild(d));break;case 27:Va||ni(d,l);var m=fa,j=Vr;yl(d.type)&&(fa=d.stateNode,Vr=!1),Ri(n,l,d),Qd(d.stateNode),fa=m,Vr=j;break;case 5:Va||ni(d,l);case 6:if(m=fa,j=Vr,fa=null,Ri(n,l,d),fa=m,Vr=j,fa!==null)if(Vr)try{(fa.nodeType===9?fa.body:fa.nodeName==="HTML"?fa.ownerDocument.body:fa).removeChild(d.stateNode)}catch(w){Us(d,l,w)}else try{fa.removeChild(d.stateNode)}catch(w){Us(d,l,w)}break;case 18:fa!==null&&(Vr?(n=fa,X1(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,d.stateNode),wc(n)):X1(fa,d.stateNode));break;case 4:m=fa,j=Vr,fa=d.stateNode.containerInfo,Vr=!0,Ri(n,l,d),fa=m,Vr=j;break;case 0:case 11:case 14:case 15:hl(2,d,l),Va||hl(4,d,l),Ri(n,l,d);break;case 1:Va||(ni(d,l),m=d.stateNode,typeof m.componentWillUnmount=="function"&&QN(d,l,m)),Ri(n,l,d);break;case 21:Ri(n,l,d);break;case 22:Va=(m=Va)||d.memoizedState!==null,Ri(n,l,d),Va=m;break;default:Ri(n,l,d)}}function n1(n,l){if(l.memoizedState===null&&(n=l.alternate,n!==null&&(n=n.memoizedState,n!==null))){n=n.dehydrated;try{wc(n)}catch(d){Us(l,l.return,d)}}}function i1(n,l){if(l.memoizedState===null&&(n=l.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{wc(n)}catch(d){Us(l,l.return,d)}}function L3(n){switch(n.tag){case 31:case 13:case 19:var l=n.stateNode;return l===null&&(l=n.stateNode=new t1),l;case 22:return n=n.stateNode,l=n._retryCache,l===null&&(l=n._retryCache=new t1),l;default:throw Error(r(435,n.tag))}}function Zm(n,l){var d=L3(n);l.forEach(function(m){if(!d.has(m)){d.add(m);var j=G3.bind(null,n,m);m.then(j,j)}})}function $r(n,l){var d=l.deletions;if(d!==null)for(var m=0;m<d.length;m++){var j=d[m],w=n,I=l,re=I;e:for(;re!==null;){switch(re.tag){case 27:if(yl(re.type)){fa=re.stateNode,Vr=!1;break e}break;case 5:fa=re.stateNode,Vr=!1;break e;case 3:case 4:fa=re.stateNode.containerInfo,Vr=!0;break e}re=re.return}if(fa===null)throw Error(r(160));r1(w,I,j),fa=null,Vr=!1,w=j.alternate,w!==null&&(w.return=null),j.return=null}if(l.subtreeFlags&13886)for(l=l.child;l!==null;)l1(l,n),l=l.sibling}var Bn=null;function l1(n,l){var d=n.alternate,m=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:$r(l,n),Hr(n),m&4&&(hl(3,n,n.return),Ud(3,n),hl(5,n,n.return));break;case 1:$r(l,n),Hr(n),m&512&&(Va||d===null||ni(d,d.return)),m&64&&Oi&&(n=n.updateQueue,n!==null&&(m=n.callbacks,m!==null&&(d=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=d===null?m:d.concat(m))));break;case 26:var j=Bn;if($r(l,n),Hr(n),m&512&&(Va||d===null||ni(d,d.return)),m&4){var w=d!==null?d.memoizedState:null;if(m=n.memoizedState,d===null)if(m===null)if(n.stateNode===null){e:{m=n.type,d=n.memoizedProps,j=j.ownerDocument||j;t:switch(m){case"title":w=j.getElementsByTagName("title")[0],(!w||w[Ie]||w[M]||w.namespaceURI==="http://www.w3.org/2000/svg"||w.hasAttribute("itemprop"))&&(w=j.createElement(m),j.head.insertBefore(w,j.querySelector("head > title"))),or(w,m,d),w[M]=n,it(w),m=w;break e;case"link":var I=lb("link","href",j).get(m+(d.href||""));if(I){for(var re=0;re<I.length;re++)if(w=I[re],w.getAttribute("href")===(d.href==null||d.href===""?null:d.href)&&w.getAttribute("rel")===(d.rel==null?null:d.rel)&&w.getAttribute("title")===(d.title==null?null:d.title)&&w.getAttribute("crossorigin")===(d.crossOrigin==null?null:d.crossOrigin)){I.splice(re,1);break t}}w=j.createElement(m),or(w,m,d),j.head.appendChild(w);break;case"meta":if(I=lb("meta","content",j).get(m+(d.content||""))){for(re=0;re<I.length;re++)if(w=I[re],w.getAttribute("content")===(d.content==null?null:""+d.content)&&w.getAttribute("name")===(d.name==null?null:d.name)&&w.getAttribute("property")===(d.property==null?null:d.property)&&w.getAttribute("http-equiv")===(d.httpEquiv==null?null:d.httpEquiv)&&w.getAttribute("charset")===(d.charSet==null?null:d.charSet)){I.splice(re,1);break t}}w=j.createElement(m),or(w,m,d),j.head.appendChild(w);break;default:throw Error(r(468,m))}w[M]=n,it(w),m=w}n.stateNode=m}else ob(j,n.type,n.stateNode);else n.stateNode=ib(j,m,n.memoizedProps);else w!==m?(w===null?d.stateNode!==null&&(d=d.stateNode,d.parentNode.removeChild(d)):w.count--,m===null?ob(j,n.type,n.stateNode):ib(j,m,n.memoizedProps)):m===null&&n.stateNode!==null&&Ep(n,n.memoizedProps,d.memoizedProps)}break;case 27:$r(l,n),Hr(n),m&512&&(Va||d===null||ni(d,d.return)),d!==null&&m&4&&Ep(n,n.memoizedProps,d.memoizedProps);break;case 5:if($r(l,n),Hr(n),m&512&&(Va||d===null||ni(d,d.return)),n.flags&32){j=n.stateNode;try{Go(j,"")}catch(Tt){Us(n,n.return,Tt)}}m&4&&n.stateNode!=null&&(j=n.memoizedProps,Ep(n,j,d!==null?d.memoizedProps:j)),m&1024&&(_p=!0);break;case 6:if($r(l,n),Hr(n),m&4){if(n.stateNode===null)throw Error(r(162));m=n.memoizedProps,d=n.stateNode;try{d.nodeValue=m}catch(Tt){Us(n,n.return,Tt)}}break;case 3:if(fh=null,j=Bn,Bn=mh(l.containerInfo),$r(l,n),Bn=j,Hr(n),m&4&&d!==null&&d.memoizedState.isDehydrated)try{wc(l.containerInfo)}catch(Tt){Us(n,n.return,Tt)}_p&&(_p=!1,o1(n));break;case 4:m=Bn,Bn=mh(n.stateNode.containerInfo),$r(l,n),Hr(n),Bn=m;break;case 12:$r(l,n),Hr(n);break;case 31:$r(l,n),Hr(n),m&4&&(m=n.updateQueue,m!==null&&(n.updateQueue=null,Zm(n,m)));break;case 13:$r(l,n),Hr(n),n.child.flags&8192&&n.memoizedState!==null!=(d!==null&&d.memoizedState!==null)&&(eh=Rt()),m&4&&(m=n.updateQueue,m!==null&&(n.updateQueue=null,Zm(n,m)));break;case 22:j=n.memoizedState!==null;var ye=d!==null&&d.memoizedState!==null,Be=Oi,qe=Va;if(Oi=Be||j,Va=qe||ye,$r(l,n),Va=qe,Oi=Be,Hr(n),m&8192)e:for(l=n.stateNode,l._visibility=j?l._visibility&-2:l._visibility|1,j&&(d===null||ye||Oi||Va||oo(n)),d=null,l=n;;){if(l.tag===5||l.tag===26){if(d===null){ye=d=l;try{if(w=ye.stateNode,j)I=w.style,typeof I.setProperty=="function"?I.setProperty("display","none","important"):I.display="none";else{re=ye.stateNode;var et=ye.memoizedProps.style,ze=et!=null&&et.hasOwnProperty("display")?et.display:null;re.style.display=ze==null||typeof ze=="boolean"?"":(""+ze).trim()}}catch(Tt){Us(ye,ye.return,Tt)}}}else if(l.tag===6){if(d===null){ye=l;try{ye.stateNode.nodeValue=j?"":ye.memoizedProps}catch(Tt){Us(ye,ye.return,Tt)}}}else if(l.tag===18){if(d===null){ye=l;try{var He=ye.stateNode;j?Q1(He,!0):Q1(ye.stateNode,!1)}catch(Tt){Us(ye,ye.return,Tt)}}}else if((l.tag!==22&&l.tag!==23||l.memoizedState===null||l===n)&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===n)break e;for(;l.sibling===null;){if(l.return===null||l.return===n)break e;d===l&&(d=null),l=l.return}d===l&&(d=null),l.sibling.return=l.return,l=l.sibling}m&4&&(m=n.updateQueue,m!==null&&(d=m.retryQueue,d!==null&&(m.retryQueue=null,Zm(n,d))));break;case 19:$r(l,n),Hr(n),m&4&&(m=n.updateQueue,m!==null&&(n.updateQueue=null,Zm(n,m)));break;case 30:break;case 21:break;default:$r(l,n),Hr(n)}}function Hr(n){var l=n.flags;if(l&2){try{for(var d,m=n.return;m!==null;){if(JN(m)){d=m;break}m=m.return}if(d==null)throw Error(r(160));switch(d.tag){case 27:var j=d.stateNode,w=kp(n);Qm(n,w,j);break;case 5:var I=d.stateNode;d.flags&32&&(Go(I,""),d.flags&=-33);var re=kp(n);Qm(n,re,I);break;case 3:case 4:var ye=d.stateNode.containerInfo,Be=kp(n);Ap(n,Be,ye);break;default:throw Error(r(161))}}catch(qe){Us(n,n.return,qe)}n.flags&=-3}l&4096&&(n.flags&=-4097)}function o1(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var l=n;o1(l),l.tag===5&&l.flags&1024&&l.stateNode.reset(),n=n.sibling}}function Pi(n,l){if(l.subtreeFlags&8772)for(l=l.child;l!==null;)s1(n,l.alternate,l),l=l.sibling}function oo(n){for(n=n.child;n!==null;){var l=n;switch(l.tag){case 0:case 11:case 14:case 15:hl(4,l,l.return),oo(l);break;case 1:ni(l,l.return);var d=l.stateNode;typeof d.componentWillUnmount=="function"&&QN(l,l.return,d),oo(l);break;case 27:Qd(l.stateNode);case 26:case 5:ni(l,l.return),oo(l);break;case 22:l.memoizedState===null&&oo(l);break;case 30:oo(l);break;default:oo(l)}n=n.sibling}}function Mi(n,l,d){for(d=d&&(l.subtreeFlags&8772)!==0,l=l.child;l!==null;){var m=l.alternate,j=n,w=l,I=w.flags;switch(w.tag){case 0:case 11:case 15:Mi(j,w,d),Ud(4,w);break;case 1:if(Mi(j,w,d),m=w,j=m.stateNode,typeof j.componentDidMount=="function")try{j.componentDidMount()}catch(Be){Us(m,m.return,Be)}if(m=w,j=m.updateQueue,j!==null){var re=m.stateNode;try{var ye=j.shared.hiddenCallbacks;if(ye!==null)for(j.shared.hiddenCallbacks=null,j=0;j<ye.length;j++)By(ye[j],re)}catch(Be){Us(m,m.return,Be)}}d&&I&64&&XN(w),Vd(w,w.return);break;case 27:e1(w);case 26:case 5:Mi(j,w,d),d&&m===null&&I&4&&ZN(w),Vd(w,w.return);break;case 12:Mi(j,w,d);break;case 31:Mi(j,w,d),d&&I&4&&n1(j,w);break;case 13:Mi(j,w,d),d&&I&4&&i1(j,w);break;case 22:w.memoizedState===null&&Mi(j,w,d),Vd(w,w.return);break;case 30:break;default:Mi(j,w,d)}l=l.sibling}}function Dp(n,l){var d=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(d=n.memoizedState.cachePool.pool),n=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(n=l.memoizedState.cachePool.pool),n!==d&&(n!=null&&n.refCount++,d!=null&&kd(d))}function Op(n,l){n=null,l.alternate!==null&&(n=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==n&&(l.refCount++,n!=null&&kd(n))}function zn(n,l,d,m){if(l.subtreeFlags&10256)for(l=l.child;l!==null;)c1(n,l,d,m),l=l.sibling}function c1(n,l,d,m){var j=l.flags;switch(l.tag){case 0:case 11:case 15:zn(n,l,d,m),j&2048&&Ud(9,l);break;case 1:zn(n,l,d,m);break;case 3:zn(n,l,d,m),j&2048&&(n=null,l.alternate!==null&&(n=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==n&&(l.refCount++,n!=null&&kd(n)));break;case 12:if(j&2048){zn(n,l,d,m),n=l.stateNode;try{var w=l.memoizedProps,I=w.id,re=w.onPostCommit;typeof re=="function"&&re(I,l.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(ye){Us(l,l.return,ye)}}else zn(n,l,d,m);break;case 31:zn(n,l,d,m);break;case 13:zn(n,l,d,m);break;case 23:break;case 22:w=l.stateNode,I=l.alternate,l.memoizedState!==null?w._visibility&2?zn(n,l,d,m):$d(n,l):w._visibility&2?zn(n,l,d,m):(w._visibility|=2,mc(n,l,d,m,(l.subtreeFlags&10256)!==0||!1)),j&2048&&Dp(I,l);break;case 24:zn(n,l,d,m),j&2048&&Op(l.alternate,l);break;default:zn(n,l,d,m)}}function mc(n,l,d,m,j){for(j=j&&((l.subtreeFlags&10256)!==0||!1),l=l.child;l!==null;){var w=n,I=l,re=d,ye=m,Be=I.flags;switch(I.tag){case 0:case 11:case 15:mc(w,I,re,ye,j),Ud(8,I);break;case 23:break;case 22:var qe=I.stateNode;I.memoizedState!==null?qe._visibility&2?mc(w,I,re,ye,j):$d(w,I):(qe._visibility|=2,mc(w,I,re,ye,j)),j&&Be&2048&&Dp(I.alternate,I);break;case 24:mc(w,I,re,ye,j),j&&Be&2048&&Op(I.alternate,I);break;default:mc(w,I,re,ye,j)}l=l.sibling}}function $d(n,l){if(l.subtreeFlags&10256)for(l=l.child;l!==null;){var d=n,m=l,j=m.flags;switch(m.tag){case 22:$d(d,m),j&2048&&Dp(m.alternate,m);break;case 24:$d(d,m),j&2048&&Op(m.alternate,m);break;default:$d(d,m)}l=l.sibling}}var Hd=8192;function hc(n,l,d){if(n.subtreeFlags&Hd)for(n=n.child;n!==null;)d1(n,l,d),n=n.sibling}function d1(n,l,d){switch(n.tag){case 26:hc(n,l,d),n.flags&Hd&&n.memoizedState!==null&&w5(d,Bn,n.memoizedState,n.memoizedProps);break;case 5:hc(n,l,d);break;case 3:case 4:var m=Bn;Bn=mh(n.stateNode.containerInfo),hc(n,l,d),Bn=m;break;case 22:n.memoizedState===null&&(m=n.alternate,m!==null&&m.memoizedState!==null?(m=Hd,Hd=16777216,hc(n,l,d),Hd=m):hc(n,l,d));break;default:hc(n,l,d)}}function u1(n){var l=n.alternate;if(l!==null&&(n=l.child,n!==null)){l.child=null;do l=n.sibling,n.sibling=null,n=l;while(n!==null)}}function Wd(n){var l=n.deletions;if((n.flags&16)!==0){if(l!==null)for(var d=0;d<l.length;d++){var m=l[d];tr=m,h1(m,n)}u1(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)m1(n),n=n.sibling}function m1(n){switch(n.tag){case 0:case 11:case 15:Wd(n),n.flags&2048&&hl(9,n,n.return);break;case 3:Wd(n);break;case 12:Wd(n);break;case 22:var l=n.stateNode;n.memoizedState!==null&&l._visibility&2&&(n.return===null||n.return.tag!==13)?(l._visibility&=-3,Jm(n)):Wd(n);break;default:Wd(n)}}function Jm(n){var l=n.deletions;if((n.flags&16)!==0){if(l!==null)for(var d=0;d<l.length;d++){var m=l[d];tr=m,h1(m,n)}u1(n)}for(n=n.child;n!==null;){switch(l=n,l.tag){case 0:case 11:case 15:hl(8,l,l.return),Jm(l);break;case 22:d=l.stateNode,d._visibility&2&&(d._visibility&=-3,Jm(l));break;default:Jm(l)}n=n.sibling}}function h1(n,l){for(;tr!==null;){var d=tr;switch(d.tag){case 0:case 11:case 15:hl(8,d,l);break;case 23:case 22:if(d.memoizedState!==null&&d.memoizedState.cachePool!==null){var m=d.memoizedState.cachePool.pool;m!=null&&m.refCount++}break;case 24:kd(d.memoizedState.cache)}if(m=d.child,m!==null)m.return=d,tr=m;else e:for(d=n;tr!==null;){m=tr;var j=m.sibling,w=m.return;if(a1(m),m===d){tr=null;break e}if(j!==null){j.return=w,tr=j;break e}tr=w}}}var I3={getCacheForType:function(n){var l=ir(Ba),d=l.data.get(n);return d===void 0&&(d=n(),l.data.set(n,d)),d},cacheSignal:function(){return ir(Ba).controller.signal}},B3=typeof WeakMap=="function"?WeakMap:Map,Fs=0,aa=null,Ns=null,Ss=0,zs=0,ln=null,fl=!1,fc=!1,Rp=!1,Fi=0,Ta=0,xl=0,co=0,Pp=0,on=0,xc=0,Gd=null,Wr=null,Mp=!1,eh=0,f1=0,th=1/0,sh=null,pl=null,Xa=0,gl=null,pc=null,Li=0,Fp=0,Lp=null,x1=null,qd=0,Ip=null;function cn(){return(Fs&2)!==0&&Ss!==0?Ss&-Ss:U.T!==null?Hp():Q()}function p1(){if(on===0)if((Ss&536870912)===0||Es){var n=Xt;Xt<<=1,(Xt&3932160)===0&&(Xt=262144),on=n}else on=536870912;return n=rn.current,n!==null&&(n.flags|=32),on}function Gr(n,l,d){(n===aa&&(zs===2||zs===9)||n.cancelPendingCommit!==null)&&(gc(n,0),vl(n,Ss,on,!1)),dt(n,d),((Fs&2)===0||n!==aa)&&(n===aa&&((Fs&2)===0&&(co|=d),Ta===4&&vl(n,Ss,on,!1)),ii(n))}function g1(n,l,d){if((Fs&6)!==0)throw Error(r(327));var m=!d&&(l&127)===0&&(l&n.expiredLanes)===0||ct(n,l),j=m?V3(n,l):zp(n,l,!0),w=m;do{if(j===0){fc&&!m&&vl(n,l,0,!1);break}else{if(d=n.current.alternate,w&&!z3(d)){j=zp(n,l,!1),w=!1;continue}if(j===2){if(w=l,n.errorRecoveryDisabledLanes&w)var I=0;else I=n.pendingLanes&-536870913,I=I!==0?I:I&536870912?536870912:0;if(I!==0){l=I;e:{var re=n;j=Gd;var ye=re.current.memoizedState.isDehydrated;if(ye&&(gc(re,I).flags|=256),I=zp(re,I,!1),I!==2){if(Rp&&!ye){re.errorRecoveryDisabledLanes|=w,co|=w,j=4;break e}w=Wr,Wr=j,w!==null&&(Wr===null?Wr=w:Wr.push.apply(Wr,w))}j=I}if(w=!1,j!==2)continue}}if(j===1){gc(n,0),vl(n,l,0,!0);break}e:{switch(m=n,w=j,w){case 0:case 1:throw Error(r(345));case 4:if((l&4194048)!==l)break;case 6:vl(m,l,on,!fl);break e;case 2:Wr=null;break;case 3:case 5:break;default:throw Error(r(329))}if((l&62914560)===l&&(j=eh+300-Rt(),10<j)){if(vl(m,l,on,!fl),tt(m,0,!0)!==0)break e;Li=l,m.timeoutHandle=K1(v1.bind(null,m,d,Wr,sh,Mp,l,on,co,xc,fl,w,"Throttled",-0,0),j);break e}v1(m,d,Wr,sh,Mp,l,on,co,xc,fl,w,null,-0,0)}}break}while(!0);ii(n)}function v1(n,l,d,m,j,w,I,re,ye,Be,qe,et,ze,He){if(n.timeoutHandle=-1,et=l.subtreeFlags,et&8192||(et&16785408)===16785408){et={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:bi},d1(l,w,et);var Tt=(w&62914560)===w?eh-Rt():(w&4194048)===w?f1-Rt():0;if(Tt=S5(et,Tt),Tt!==null){Li=w,n.cancelPendingCommit=Tt(T1.bind(null,n,l,w,d,m,j,I,re,ye,qe,et,null,ze,He)),vl(n,w,I,!Be);return}}T1(n,l,w,d,m,j,I,re,ye)}function z3(n){for(var l=n;;){var d=l.tag;if((d===0||d===11||d===15)&&l.flags&16384&&(d=l.updateQueue,d!==null&&(d=d.stores,d!==null)))for(var m=0;m<d.length;m++){var j=d[m],w=j.getSnapshot;j=j.value;try{if(!sn(w(),j))return!1}catch{return!1}}if(d=l.child,l.subtreeFlags&16384&&d!==null)d.return=l,l=d;else{if(l===n)break;for(;l.sibling===null;){if(l.return===null||l.return===n)return!0;l=l.return}l.sibling.return=l.return,l=l.sibling}}return!0}function vl(n,l,d,m){l&=~Pp,l&=~co,n.suspendedLanes|=l,n.pingedLanes&=~l,m&&(n.warmLanes|=l),m=n.expirationTimes;for(var j=l;0<j;){var w=31-we(j),I=1<<w;m[w]=-1,j&=~I}d!==0&&Et(n,d,l)}function ah(){return(Fs&6)===0?(Kd(0),!1):!0}function Bp(){if(Ns!==null){if(zs===0)var n=Ns.return;else n=Ns,Ti=eo=null,tp(n),lc=null,_d=0,n=Ns;for(;n!==null;)YN(n.alternate,n),n=n.return;Ns=null}}function gc(n,l){var d=n.timeoutHandle;d!==-1&&(n.timeoutHandle=-1,i5(d)),d=n.cancelPendingCommit,d!==null&&(n.cancelPendingCommit=null,d()),Li=0,Bp(),aa=n,Ns=d=Si(n.current,null),Ss=l,zs=0,ln=null,fl=!1,fc=ct(n,l),Rp=!1,xc=on=Pp=co=xl=Ta=0,Wr=Gd=null,Mp=!1,(l&8)!==0&&(l|=l&32);var m=n.entangledLanes;if(m!==0)for(n=n.entanglements,m&=l;0<m;){var j=31-we(m),w=1<<j;l|=n[j],m&=~w}return Fi=l,Sm(),d}function j1(n,l){ls=null,U.H=Id,l===ic||l===Om?(l=My(),zs=3):l===$x?(l=My(),zs=4):zs=l===gp?8:l!==null&&typeof l=="object"&&typeof l.then=="function"?6:1,ln=l,Ns===null&&(Ta=1,Gm(n,Nn(l,n.current)))}function y1(){var n=rn.current;return n===null?!0:(Ss&4194048)===Ss?Cn===null:(Ss&62914560)===Ss||(Ss&536870912)!==0?n===Cn:!1}function N1(){var n=U.H;return U.H=Id,n===null?Id:n}function b1(){var n=U.A;return U.A=I3,n}function rh(){Ta=4,fl||(Ss&4194048)!==Ss&&rn.current!==null||(fc=!0),(xl&134217727)===0&&(co&134217727)===0||aa===null||vl(aa,Ss,on,!1)}function zp(n,l,d){var m=Fs;Fs|=2;var j=N1(),w=b1();(aa!==n||Ss!==l)&&(sh=null,gc(n,l)),l=!1;var I=Ta;e:do try{if(zs!==0&&Ns!==null){var re=Ns,ye=ln;switch(zs){case 8:Bp(),I=6;break e;case 3:case 2:case 9:case 6:rn.current===null&&(l=!0);var Be=zs;if(zs=0,ln=null,vc(n,re,ye,Be),d&&fc){I=0;break e}break;default:Be=zs,zs=0,ln=null,vc(n,re,ye,Be)}}U3(),I=Ta;break}catch(qe){j1(n,qe)}while(!0);return l&&n.shellSuspendCounter++,Ti=eo=null,Fs=m,U.H=j,U.A=w,Ns===null&&(aa=null,Ss=0,Sm()),I}function U3(){for(;Ns!==null;)w1(Ns)}function V3(n,l){var d=Fs;Fs|=2;var m=N1(),j=b1();aa!==n||Ss!==l?(sh=null,th=Rt()+500,gc(n,l)):fc=ct(n,l);e:do try{if(zs!==0&&Ns!==null){l=Ns;var w=ln;t:switch(zs){case 1:zs=0,ln=null,vc(n,l,w,1);break;case 2:case 9:if(Ry(w)){zs=0,ln=null,S1(l);break}l=function(){zs!==2&&zs!==9||aa!==n||(zs=7),ii(n)},w.then(l,l);break e;case 3:zs=7;break e;case 4:zs=5;break e;case 7:Ry(w)?(zs=0,ln=null,S1(l)):(zs=0,ln=null,vc(n,l,w,7));break;case 5:var I=null;switch(Ns.tag){case 26:I=Ns.memoizedState;case 5:case 27:var re=Ns;if(I?cb(I):re.stateNode.complete){zs=0,ln=null;var ye=re.sibling;if(ye!==null)Ns=ye;else{var Be=re.return;Be!==null?(Ns=Be,nh(Be)):Ns=null}break t}}zs=0,ln=null,vc(n,l,w,5);break;case 6:zs=0,ln=null,vc(n,l,w,6);break;case 8:Bp(),Ta=6;break e;default:throw Error(r(462))}}$3();break}catch(qe){j1(n,qe)}while(!0);return Ti=eo=null,U.H=m,U.A=j,Fs=d,Ns!==null?0:(aa=null,Ss=0,Sm(),Ta)}function $3(){for(;Ns!==null&&!Xs();)w1(Ns)}function w1(n){var l=qN(n.alternate,n,Fi);n.memoizedProps=n.pendingProps,l===null?nh(n):Ns=l}function S1(n){var l=n,d=l.alternate;switch(l.tag){case 15:case 0:l=UN(d,l,l.pendingProps,l.type,void 0,Ss);break;case 11:l=UN(d,l,l.pendingProps,l.type.render,l.ref,Ss);break;case 5:tp(l);default:YN(d,l),l=Ns=by(l,Fi),l=qN(d,l,Fi)}n.memoizedProps=n.pendingProps,l===null?nh(n):Ns=l}function vc(n,l,d,m){Ti=eo=null,tp(l),lc=null,_d=0;var j=l.return;try{if(D3(n,j,l,d,Ss)){Ta=1,Gm(n,Nn(d,n.current)),Ns=null;return}}catch(w){if(j!==null)throw Ns=j,w;Ta=1,Gm(n,Nn(d,n.current)),Ns=null;return}l.flags&32768?(Es||m===1?n=!0:fc||(Ss&536870912)!==0?n=!1:(fl=n=!0,(m===2||m===9||m===3||m===6)&&(m=rn.current,m!==null&&m.tag===13&&(m.flags|=16384))),C1(l,n)):nh(l)}function nh(n){var l=n;do{if((l.flags&32768)!==0){C1(l,fl);return}n=l.return;var d=P3(l.alternate,l,Fi);if(d!==null){Ns=d;return}if(l=l.sibling,l!==null){Ns=l;return}Ns=l=n}while(l!==null);Ta===0&&(Ta=5)}function C1(n,l){do{var d=M3(n.alternate,n);if(d!==null){d.flags&=32767,Ns=d;return}if(d=n.return,d!==null&&(d.flags|=32768,d.subtreeFlags=0,d.deletions=null),!l&&(n=n.sibling,n!==null)){Ns=n;return}Ns=n=d}while(n!==null);Ta=6,Ns=null}function T1(n,l,d,m,j,w,I,re,ye){n.cancelPendingCommit=null;do ih();while(Xa!==0);if((Fs&6)!==0)throw Error(r(327));if(l!==null){if(l===n.current)throw Error(r(177));if(w=l.lanes|l.childLanes,w|=kx,Ct(n,d,w,I,re,ye),n===aa&&(Ns=aa=null,Ss=0),pc=l,gl=n,Li=d,Fp=w,Lp=j,x1=m,(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,q3(fe,function(){return D1(),null})):(n.callbackNode=null,n.callbackPriority=0),m=(l.flags&13878)!==0,(l.subtreeFlags&13878)!==0||m){m=U.T,U.T=null,j=Z.p,Z.p=2,I=Fs,Fs|=4;try{F3(n,l,d)}finally{Fs=I,Z.p=j,U.T=m}}Xa=1,E1(),k1(),A1()}}function E1(){if(Xa===1){Xa=0;var n=gl,l=pc,d=(l.flags&13878)!==0;if((l.subtreeFlags&13878)!==0||d){d=U.T,U.T=null;var m=Z.p;Z.p=2;var j=Fs;Fs|=4;try{l1(l,n);var w=Zp,I=hy(n.containerInfo),re=w.focusedElem,ye=w.selectionRange;if(I!==re&&re&&re.ownerDocument&&my(re.ownerDocument.documentElement,re)){if(ye!==null&&wx(re)){var Be=ye.start,qe=ye.end;if(qe===void 0&&(qe=Be),"selectionStart"in re)re.selectionStart=Be,re.selectionEnd=Math.min(qe,re.value.length);else{var et=re.ownerDocument||document,ze=et&&et.defaultView||window;if(ze.getSelection){var He=ze.getSelection(),Tt=re.textContent.length,Gt=Math.min(ye.start,Tt),Js=ye.end===void 0?Gt:Math.min(ye.end,Tt);!He.extend&&Gt>Js&&(I=Js,Js=Gt,Gt=I);var _e=uy(re,Gt),Ce=uy(re,Js);if(_e&&Ce&&(He.rangeCount!==1||He.anchorNode!==_e.node||He.anchorOffset!==_e.offset||He.focusNode!==Ce.node||He.focusOffset!==Ce.offset)){var Fe=et.createRange();Fe.setStart(_e.node,_e.offset),He.removeAllRanges(),Gt>Js?(He.addRange(Fe),He.extend(Ce.node,Ce.offset)):(Fe.setEnd(Ce.node,Ce.offset),He.addRange(Fe))}}}}for(et=[],He=re;He=He.parentNode;)He.nodeType===1&&et.push({element:He,left:He.scrollLeft,top:He.scrollTop});for(typeof re.focus=="function"&&re.focus(),re=0;re<et.length;re++){var Ye=et[re];Ye.element.scrollLeft=Ye.left,Ye.element.scrollTop=Ye.top}}vh=!!Qp,Zp=Qp=null}finally{Fs=j,Z.p=m,U.T=d}}n.current=l,Xa=2}}function k1(){if(Xa===2){Xa=0;var n=gl,l=pc,d=(l.flags&8772)!==0;if((l.subtreeFlags&8772)!==0||d){d=U.T,U.T=null;var m=Z.p;Z.p=2;var j=Fs;Fs|=4;try{s1(n,l.alternate,l)}finally{Fs=j,Z.p=m,U.T=d}}Xa=3}}function A1(){if(Xa===4||Xa===3){Xa=0,xs();var n=gl,l=pc,d=Li,m=x1;(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?Xa=5:(Xa=0,pc=gl=null,_1(n,n.pendingLanes));var j=n.pendingLanes;if(j===0&&(pl=null),Bs(d),l=l.stateNode,as&&typeof as.onCommitFiberRoot=="function")try{as.onCommitFiberRoot(Jt,l,void 0,(l.current.flags&128)===128)}catch{}if(m!==null){l=U.T,j=Z.p,Z.p=2,U.T=null;try{for(var w=n.onRecoverableError,I=0;I<m.length;I++){var re=m[I];w(re.value,{componentStack:re.stack})}}finally{U.T=l,Z.p=j}}(Li&3)!==0&&ih(),ii(n),j=n.pendingLanes,(d&261930)!==0&&(j&42)!==0?n===Ip?qd++:(qd=0,Ip=n):qd=0,Kd(0)}}function _1(n,l){(n.pooledCacheLanes&=l)===0&&(l=n.pooledCache,l!=null&&(n.pooledCache=null,kd(l)))}function ih(){return E1(),k1(),A1(),D1()}function D1(){if(Xa!==5)return!1;var n=gl,l=Fp;Fp=0;var d=Bs(Li),m=U.T,j=Z.p;try{Z.p=32>d?32:d,U.T=null,d=Lp,Lp=null;var w=gl,I=Li;if(Xa=0,pc=gl=null,Li=0,(Fs&6)!==0)throw Error(r(331));var re=Fs;if(Fs|=4,m1(w.current),c1(w,w.current,I,d),Fs=re,Kd(0,!1),as&&typeof as.onPostCommitFiberRoot=="function")try{as.onPostCommitFiberRoot(Jt,w)}catch{}return!0}finally{Z.p=j,U.T=m,_1(n,l)}}function O1(n,l,d){l=Nn(d,l),l=pp(n.stateNode,l,2),n=dl(n,l,2),n!==null&&(dt(n,2),ii(n))}function Us(n,l,d){if(n.tag===3)O1(n,n,d);else for(;l!==null;){if(l.tag===3){O1(l,n,d);break}else if(l.tag===1){var m=l.stateNode;if(typeof l.type.getDerivedStateFromError=="function"||typeof m.componentDidCatch=="function"&&(pl===null||!pl.has(m))){n=Nn(d,n),d=RN(2),m=dl(l,d,2),m!==null&&(PN(d,m,l,n),dt(m,2),ii(m));break}}l=l.return}}function Up(n,l,d){var m=n.pingCache;if(m===null){m=n.pingCache=new B3;var j=new Set;m.set(l,j)}else j=m.get(l),j===void 0&&(j=new Set,m.set(l,j));j.has(d)||(Rp=!0,j.add(d),n=H3.bind(null,n,l,d),l.then(n,n))}function H3(n,l,d){var m=n.pingCache;m!==null&&m.delete(l),n.pingedLanes|=n.suspendedLanes&d,n.warmLanes&=~d,aa===n&&(Ss&d)===d&&(Ta===4||Ta===3&&(Ss&62914560)===Ss&&300>Rt()-eh?(Fs&2)===0&&gc(n,0):Pp|=d,xc===Ss&&(xc=0)),ii(n)}function R1(n,l){l===0&&(l=ht()),n=Ql(n,l),n!==null&&(dt(n,l),ii(n))}function W3(n){var l=n.memoizedState,d=0;l!==null&&(d=l.retryLane),R1(n,d)}function G3(n,l){var d=0;switch(n.tag){case 31:case 13:var m=n.stateNode,j=n.memoizedState;j!==null&&(d=j.retryLane);break;case 19:m=n.stateNode;break;case 22:m=n.stateNode._retryCache;break;default:throw Error(r(314))}m!==null&&m.delete(l),R1(n,d)}function q3(n,l){return Ms(n,l)}var lh=null,jc=null,Vp=!1,oh=!1,$p=!1,jl=0;function ii(n){n!==jc&&n.next===null&&(jc===null?lh=jc=n:jc=jc.next=n),oh=!0,Vp||(Vp=!0,Y3())}function Kd(n,l){if(!$p&&oh){$p=!0;do for(var d=!1,m=lh;m!==null;){if(n!==0){var j=m.pendingLanes;if(j===0)var w=0;else{var I=m.suspendedLanes,re=m.pingedLanes;w=(1<<31-we(42|n)+1)-1,w&=j&~(I&~re),w=w&201326741?w&201326741|1:w?w|2:0}w!==0&&(d=!0,L1(m,w))}else w=Ss,w=tt(m,m===aa?w:0,m.cancelPendingCommit!==null||m.timeoutHandle!==-1),(w&3)===0||ct(m,w)||(d=!0,L1(m,w));m=m.next}while(d);$p=!1}}function K3(){P1()}function P1(){oh=Vp=!1;var n=0;jl!==0&&n5()&&(n=jl);for(var l=Rt(),d=null,m=lh;m!==null;){var j=m.next,w=M1(m,l);w===0?(m.next=null,d===null?lh=j:d.next=j,j===null&&(jc=d)):(d=m,(n!==0||(w&3)!==0)&&(oh=!0)),m=j}Xa!==0&&Xa!==5||Kd(n),jl!==0&&(jl=0)}function M1(n,l){for(var d=n.suspendedLanes,m=n.pingedLanes,j=n.expirationTimes,w=n.pendingLanes&-62914561;0<w;){var I=31-we(w),re=1<<I,ye=j[I];ye===-1?((re&d)===0||(re&m)!==0)&&(j[I]=ns(re,l)):ye<=l&&(n.expiredLanes|=re),w&=~re}if(l=aa,d=Ss,d=tt(n,n===l?d:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),m=n.callbackNode,d===0||n===l&&(zs===2||zs===9)||n.cancelPendingCommit!==null)return m!==null&&m!==null&&ys(m),n.callbackNode=null,n.callbackPriority=0;if((d&3)===0||ct(n,d)){if(l=d&-d,l===n.callbackPriority)return l;switch(m!==null&&ys(m),Bs(d)){case 2:case 8:d=je;break;case 32:d=fe;break;case 268435456:d=st;break;default:d=fe}return m=F1.bind(null,n),d=Ms(d,m),n.callbackPriority=l,n.callbackNode=d,l}return m!==null&&m!==null&&ys(m),n.callbackPriority=2,n.callbackNode=null,2}function F1(n,l){if(Xa!==0&&Xa!==5)return n.callbackNode=null,n.callbackPriority=0,null;var d=n.callbackNode;if(ih()&&n.callbackNode!==d)return null;var m=Ss;return m=tt(n,n===aa?m:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),m===0?null:(g1(n,m,l),M1(n,Rt()),n.callbackNode!=null&&n.callbackNode===d?F1.bind(null,n):null)}function L1(n,l){if(ih())return null;g1(n,l,!0)}function Y3(){l5(function(){(Fs&6)!==0?Ms(Te,K3):P1()})}function Hp(){if(jl===0){var n=rc;n===0&&(n=wt,wt<<=1,(wt&261888)===0&&(wt=256)),jl=n}return jl}function I1(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:pm(""+n)}function B1(n,l){var d=l.ownerDocument.createElement("input");return d.name=l.name,d.value=l.value,n.id&&d.setAttribute("form",n.id),l.parentNode.insertBefore(d,l),n=new FormData(n),d.parentNode.removeChild(d),n}function X3(n,l,d,m,j){if(l==="submit"&&d&&d.stateNode===j){var w=I1((j[ne]||null).action),I=m.submitter;I&&(l=(l=I[ne]||null)?I1(l.formAction):I.getAttribute("formAction"),l!==null&&(w=l,I=null));var re=new ym("action","action",null,m,j);n.push({event:re,listeners:[{instance:null,listener:function(){if(m.defaultPrevented){if(jl!==0){var ye=I?B1(j,I):new FormData(j);dp(d,{pending:!0,data:ye,method:j.method,action:w},null,ye)}}else typeof w=="function"&&(re.preventDefault(),ye=I?B1(j,I):new FormData(j),dp(d,{pending:!0,data:ye,method:j.method,action:w},w,ye))},currentTarget:j}]})}}for(var Wp=0;Wp<Ex.length;Wp++){var Gp=Ex[Wp],Q3=Gp.toLowerCase(),Z3=Gp[0].toUpperCase()+Gp.slice(1);In(Q3,"on"+Z3)}In(py,"onAnimationEnd"),In(gy,"onAnimationIteration"),In(vy,"onAnimationStart"),In("dblclick","onDoubleClick"),In("focusin","onFocus"),In("focusout","onBlur"),In(f3,"onTransitionRun"),In(x3,"onTransitionStart"),In(p3,"onTransitionCancel"),In(jy,"onTransitionEnd"),Nr("onMouseEnter",["mouseout","mouseover"]),Nr("onMouseLeave",["mouseout","mouseover"]),Nr("onPointerEnter",["pointerout","pointerover"]),Nr("onPointerLeave",["pointerout","pointerover"]),Wt("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Wt("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Wt("onBeforeInput",["compositionend","keypress","textInput","paste"]),Wt("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Wt("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Wt("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Yd="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),J3=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Yd));function z1(n,l){l=(l&4)!==0;for(var d=0;d<n.length;d++){var m=n[d],j=m.event;m=m.listeners;e:{var w=void 0;if(l)for(var I=m.length-1;0<=I;I--){var re=m[I],ye=re.instance,Be=re.currentTarget;if(re=re.listener,ye!==w&&j.isPropagationStopped())break e;w=re,j.currentTarget=Be;try{w(j)}catch(qe){wm(qe)}j.currentTarget=null,w=ye}else for(I=0;I<m.length;I++){if(re=m[I],ye=re.instance,Be=re.currentTarget,re=re.listener,ye!==w&&j.isPropagationStopped())break e;w=re,j.currentTarget=Be;try{w(j)}catch(qe){wm(qe)}j.currentTarget=null,w=ye}}}}function bs(n,l){var d=l[Re];d===void 0&&(d=l[Re]=new Set);var m=n+"__bubble";d.has(m)||(U1(l,n,2,!1),d.add(m))}function qp(n,l,d){var m=0;l&&(m|=4),U1(d,n,m,l)}var ch="_reactListening"+Math.random().toString(36).slice(2);function Kp(n){if(!n[ch]){n[ch]=!0,kt.forEach(function(d){d!=="selectionchange"&&(J3.has(d)||qp(d,!1,n),qp(d,!0,n))});var l=n.nodeType===9?n:n.ownerDocument;l===null||l[ch]||(l[ch]=!0,qp("selectionchange",!1,l))}}function U1(n,l,d,m){switch(pb(l)){case 2:var j=E5;break;case 8:j=k5;break;default:j=c0}d=j.bind(null,l,d,n),j=void 0,!fx||l!=="touchstart"&&l!=="touchmove"&&l!=="wheel"||(j=!0),m?j!==void 0?n.addEventListener(l,d,{capture:!0,passive:j}):n.addEventListener(l,d,!0):j!==void 0?n.addEventListener(l,d,{passive:j}):n.addEventListener(l,d,!1)}function Yp(n,l,d,m,j){var w=m;if((l&1)===0&&(l&2)===0&&m!==null)e:for(;;){if(m===null)return;var I=m.tag;if(I===3||I===4){var re=m.stateNode.containerInfo;if(re===j)break;if(I===4)for(I=m.return;I!==null;){var ye=I.tag;if((ye===3||ye===4)&&I.stateNode.containerInfo===j)return;I=I.return}for(;re!==null;){if(I=he(re),I===null)return;if(ye=I.tag,ye===5||ye===6||ye===26||ye===27){m=w=I;continue e}re=re.parentNode}}m=m.return}Gj(function(){var Be=w,qe=mx(d),et=[];e:{var ze=yy.get(n);if(ze!==void 0){var He=ym,Tt=n;switch(n){case"keypress":if(vm(d)===0)break e;case"keydown":case"keyup":He=GA;break;case"focusin":Tt="focus",He=vx;break;case"focusout":Tt="blur",He=vx;break;case"beforeblur":case"afterblur":He=vx;break;case"click":if(d.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":He=Yj;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":He=PA;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":He=YA;break;case py:case gy:case vy:He=LA;break;case jy:He=QA;break;case"scroll":case"scrollend":He=OA;break;case"wheel":He=JA;break;case"copy":case"cut":case"paste":He=BA;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":He=Qj;break;case"toggle":case"beforetoggle":He=t3}var Gt=(l&4)!==0,Js=!Gt&&(n==="scroll"||n==="scrollend"),_e=Gt?ze!==null?ze+"Capture":null:ze;Gt=[];for(var Ce=Be,Fe;Ce!==null;){var Ye=Ce;if(Fe=Ye.stateNode,Ye=Ye.tag,Ye!==5&&Ye!==26&&Ye!==27||Fe===null||_e===null||(Ye=gd(Ce,_e),Ye!=null&&Gt.push(Xd(Ce,Ye,Fe))),Js)break;Ce=Ce.return}0<Gt.length&&(ze=new He(ze,Tt,null,d,qe),et.push({event:ze,listeners:Gt}))}}if((l&7)===0){e:{if(ze=n==="mouseover"||n==="pointerover",He=n==="mouseout"||n==="pointerout",ze&&d!==ux&&(Tt=d.relatedTarget||d.fromElement)&&(he(Tt)||Tt[ce]))break e;if((He||ze)&&(ze=qe.window===qe?qe:(ze=qe.ownerDocument)?ze.defaultView||ze.parentWindow:window,He?(Tt=d.relatedTarget||d.toElement,He=Be,Tt=Tt?he(Tt):null,Tt!==null&&(Js=o(Tt),Gt=Tt.tag,Tt!==Js||Gt!==5&&Gt!==27&&Gt!==6)&&(Tt=null)):(He=null,Tt=Be),He!==Tt)){if(Gt=Yj,Ye="onMouseLeave",_e="onMouseEnter",Ce="mouse",(n==="pointerout"||n==="pointerover")&&(Gt=Qj,Ye="onPointerLeave",_e="onPointerEnter",Ce="pointer"),Js=He==null?ze:Ee(He),Fe=Tt==null?ze:Ee(Tt),ze=new Gt(Ye,Ce+"leave",He,d,qe),ze.target=Js,ze.relatedTarget=Fe,Ye=null,he(qe)===Be&&(Gt=new Gt(_e,Ce+"enter",Tt,d,qe),Gt.target=Fe,Gt.relatedTarget=Js,Ye=Gt),Js=Ye,He&&Tt)t:{for(Gt=e5,_e=He,Ce=Tt,Fe=0,Ye=_e;Ye;Ye=Gt(Ye))Fe++;Ye=0;for(var Ht=Ce;Ht;Ht=Gt(Ht))Ye++;for(;0<Fe-Ye;)_e=Gt(_e),Fe--;for(;0<Ye-Fe;)Ce=Gt(Ce),Ye--;for(;Fe--;){if(_e===Ce||Ce!==null&&_e===Ce.alternate){Gt=_e;break t}_e=Gt(_e),Ce=Gt(Ce)}Gt=null}else Gt=null;He!==null&&V1(et,ze,He,Gt,!1),Tt!==null&&Js!==null&&V1(et,Js,Tt,Gt,!0)}}e:{if(ze=Be?Ee(Be):window,He=ze.nodeName&&ze.nodeName.toLowerCase(),He==="select"||He==="input"&&ze.type==="file")var Ds=ny;else if(ay(ze))if(iy)Ds=u3;else{Ds=c3;var Ot=o3}else He=ze.nodeName,!He||He.toLowerCase()!=="input"||ze.type!=="checkbox"&&ze.type!=="radio"?Be&&dx(Be.elementType)&&(Ds=ny):Ds=d3;if(Ds&&(Ds=Ds(n,Be))){ry(et,Ds,d,qe);break e}Ot&&Ot(n,ze,Be),n==="focusout"&&Be&&ze.type==="number"&&Be.memoizedProps.value!=null&&cx(ze,"number",ze.value)}switch(Ot=Be?Ee(Be):window,n){case"focusin":(ay(Ot)||Ot.contentEditable==="true")&&(Xo=Ot,Sx=Be,Cd=null);break;case"focusout":Cd=Sx=Xo=null;break;case"mousedown":Cx=!0;break;case"contextmenu":case"mouseup":case"dragend":Cx=!1,fy(et,d,qe);break;case"selectionchange":if(h3)break;case"keydown":case"keyup":fy(et,d,qe)}var fs;if(yx)e:{switch(n){case"compositionstart":var Cs="onCompositionStart";break e;case"compositionend":Cs="onCompositionEnd";break e;case"compositionupdate":Cs="onCompositionUpdate";break e}Cs=void 0}else Yo?ty(n,d)&&(Cs="onCompositionEnd"):n==="keydown"&&d.keyCode===229&&(Cs="onCompositionStart");Cs&&(Zj&&d.locale!=="ko"&&(Yo||Cs!=="onCompositionStart"?Cs==="onCompositionEnd"&&Yo&&(fs=qj()):(al=qe,xx="value"in al?al.value:al.textContent,Yo=!0)),Ot=dh(Be,Cs),0<Ot.length&&(Cs=new Xj(Cs,n,null,d,qe),et.push({event:Cs,listeners:Ot}),fs?Cs.data=fs:(fs=sy(d),fs!==null&&(Cs.data=fs)))),(fs=a3?r3(n,d):n3(n,d))&&(Cs=dh(Be,"onBeforeInput"),0<Cs.length&&(Ot=new Xj("onBeforeInput","beforeinput",null,d,qe),et.push({event:Ot,listeners:Cs}),Ot.data=fs)),X3(et,n,Be,d,qe)}z1(et,l)})}function Xd(n,l,d){return{instance:n,listener:l,currentTarget:d}}function dh(n,l){for(var d=l+"Capture",m=[];n!==null;){var j=n,w=j.stateNode;if(j=j.tag,j!==5&&j!==26&&j!==27||w===null||(j=gd(n,d),j!=null&&m.unshift(Xd(n,j,w)),j=gd(n,l),j!=null&&m.push(Xd(n,j,w))),n.tag===3)return m;n=n.return}return[]}function e5(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function V1(n,l,d,m,j){for(var w=l._reactName,I=[];d!==null&&d!==m;){var re=d,ye=re.alternate,Be=re.stateNode;if(re=re.tag,ye!==null&&ye===m)break;re!==5&&re!==26&&re!==27||Be===null||(ye=Be,j?(Be=gd(d,w),Be!=null&&I.unshift(Xd(d,Be,ye))):j||(Be=gd(d,w),Be!=null&&I.push(Xd(d,Be,ye)))),d=d.return}I.length!==0&&n.push({event:l,listeners:I})}var t5=/\r\n?/g,s5=/\u0000|\uFFFD/g;function $1(n){return(typeof n=="string"?n:""+n).replace(t5,`
`).replace(s5,"")}function H1(n,l){return l=$1(l),$1(n)===l}function Zs(n,l,d,m,j,w){switch(d){case"children":typeof m=="string"?l==="body"||l==="textarea"&&m===""||Go(n,m):(typeof m=="number"||typeof m=="bigint")&&l!=="body"&&Go(n,""+m);break;case"className":Ho(n,"class",m);break;case"tabIndex":Ho(n,"tabindex",m);break;case"dir":case"role":case"viewBox":case"width":case"height":Ho(n,d,m);break;case"style":Hj(n,m,w);break;case"data":if(l!=="object"){Ho(n,"data",m);break}case"src":case"href":if(m===""&&(l!=="a"||d!=="href")){n.removeAttribute(d);break}if(m==null||typeof m=="function"||typeof m=="symbol"||typeof m=="boolean"){n.removeAttribute(d);break}m=pm(""+m),n.setAttribute(d,m);break;case"action":case"formAction":if(typeof m=="function"){n.setAttribute(d,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof w=="function"&&(d==="formAction"?(l!=="input"&&Zs(n,l,"name",j.name,j,null),Zs(n,l,"formEncType",j.formEncType,j,null),Zs(n,l,"formMethod",j.formMethod,j,null),Zs(n,l,"formTarget",j.formTarget,j,null)):(Zs(n,l,"encType",j.encType,j,null),Zs(n,l,"method",j.method,j,null),Zs(n,l,"target",j.target,j,null)));if(m==null||typeof m=="symbol"||typeof m=="boolean"){n.removeAttribute(d);break}m=pm(""+m),n.setAttribute(d,m);break;case"onClick":m!=null&&(n.onclick=bi);break;case"onScroll":m!=null&&bs("scroll",n);break;case"onScrollEnd":m!=null&&bs("scrollend",n);break;case"dangerouslySetInnerHTML":if(m!=null){if(typeof m!="object"||!("__html"in m))throw Error(r(61));if(d=m.__html,d!=null){if(j.children!=null)throw Error(r(60));n.innerHTML=d}}break;case"multiple":n.multiple=m&&typeof m!="function"&&typeof m!="symbol";break;case"muted":n.muted=m&&typeof m!="function"&&typeof m!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(m==null||typeof m=="function"||typeof m=="boolean"||typeof m=="symbol"){n.removeAttribute("xlink:href");break}d=pm(""+m),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",d);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":m!=null&&typeof m!="function"&&typeof m!="symbol"?n.setAttribute(d,""+m):n.removeAttribute(d);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":m&&typeof m!="function"&&typeof m!="symbol"?n.setAttribute(d,""):n.removeAttribute(d);break;case"capture":case"download":m===!0?n.setAttribute(d,""):m!==!1&&m!=null&&typeof m!="function"&&typeof m!="symbol"?n.setAttribute(d,m):n.removeAttribute(d);break;case"cols":case"rows":case"size":case"span":m!=null&&typeof m!="function"&&typeof m!="symbol"&&!isNaN(m)&&1<=m?n.setAttribute(d,m):n.removeAttribute(d);break;case"rowSpan":case"start":m==null||typeof m=="function"||typeof m=="symbol"||isNaN(m)?n.removeAttribute(d):n.setAttribute(d,m);break;case"popover":bs("beforetoggle",n),bs("toggle",n),br(n,"popover",m);break;case"xlinkActuate":tn(n,"http://www.w3.org/1999/xlink","xlink:actuate",m);break;case"xlinkArcrole":tn(n,"http://www.w3.org/1999/xlink","xlink:arcrole",m);break;case"xlinkRole":tn(n,"http://www.w3.org/1999/xlink","xlink:role",m);break;case"xlinkShow":tn(n,"http://www.w3.org/1999/xlink","xlink:show",m);break;case"xlinkTitle":tn(n,"http://www.w3.org/1999/xlink","xlink:title",m);break;case"xlinkType":tn(n,"http://www.w3.org/1999/xlink","xlink:type",m);break;case"xmlBase":tn(n,"http://www.w3.org/XML/1998/namespace","xml:base",m);break;case"xmlLang":tn(n,"http://www.w3.org/XML/1998/namespace","xml:lang",m);break;case"xmlSpace":tn(n,"http://www.w3.org/XML/1998/namespace","xml:space",m);break;case"is":br(n,"is",m);break;case"innerText":case"textContent":break;default:(!(2<d.length)||d[0]!=="o"&&d[0]!=="O"||d[1]!=="n"&&d[1]!=="N")&&(d=_A.get(d)||d,br(n,d,m))}}function Xp(n,l,d,m,j,w){switch(d){case"style":Hj(n,m,w);break;case"dangerouslySetInnerHTML":if(m!=null){if(typeof m!="object"||!("__html"in m))throw Error(r(61));if(d=m.__html,d!=null){if(j.children!=null)throw Error(r(60));n.innerHTML=d}}break;case"children":typeof m=="string"?Go(n,m):(typeof m=="number"||typeof m=="bigint")&&Go(n,""+m);break;case"onScroll":m!=null&&bs("scroll",n);break;case"onScrollEnd":m!=null&&bs("scrollend",n);break;case"onClick":m!=null&&(n.onclick=bi);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Qe.hasOwnProperty(d))e:{if(d[0]==="o"&&d[1]==="n"&&(j=d.endsWith("Capture"),l=d.slice(2,j?d.length-7:void 0),w=n[ne]||null,w=w!=null?w[d]:null,typeof w=="function"&&n.removeEventListener(l,w,j),typeof m=="function")){typeof w!="function"&&w!==null&&(d in n?n[d]=null:n.hasAttribute(d)&&n.removeAttribute(d)),n.addEventListener(l,m,j);break e}d in n?n[d]=m:m===!0?n.setAttribute(d,""):br(n,d,m)}}}function or(n,l,d){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":bs("error",n),bs("load",n);var m=!1,j=!1,w;for(w in d)if(d.hasOwnProperty(w)){var I=d[w];if(I!=null)switch(w){case"src":m=!0;break;case"srcSet":j=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,l));default:Zs(n,l,w,I,d,null)}}j&&Zs(n,l,"srcSet",d.srcSet,d,null),m&&Zs(n,l,"src",d.src,d,null);return;case"input":bs("invalid",n);var re=w=I=j=null,ye=null,Be=null;for(m in d)if(d.hasOwnProperty(m)){var qe=d[m];if(qe!=null)switch(m){case"name":j=qe;break;case"type":I=qe;break;case"checked":ye=qe;break;case"defaultChecked":Be=qe;break;case"value":w=qe;break;case"defaultValue":re=qe;break;case"children":case"dangerouslySetInnerHTML":if(qe!=null)throw Error(r(137,l));break;default:Zs(n,l,m,qe,d,null)}}zj(n,w,re,ye,Be,I,j,!1);return;case"select":bs("invalid",n),m=I=w=null;for(j in d)if(d.hasOwnProperty(j)&&(re=d[j],re!=null))switch(j){case"value":w=re;break;case"defaultValue":I=re;break;case"multiple":m=re;default:Zs(n,l,j,re,d,null)}l=w,d=I,n.multiple=!!m,l!=null?Wo(n,!!m,l,!1):d!=null&&Wo(n,!!m,d,!0);return;case"textarea":bs("invalid",n),w=j=m=null;for(I in d)if(d.hasOwnProperty(I)&&(re=d[I],re!=null))switch(I){case"value":m=re;break;case"defaultValue":j=re;break;case"children":w=re;break;case"dangerouslySetInnerHTML":if(re!=null)throw Error(r(91));break;default:Zs(n,l,I,re,d,null)}Vj(n,m,j,w);return;case"option":for(ye in d)if(d.hasOwnProperty(ye)&&(m=d[ye],m!=null))switch(ye){case"selected":n.selected=m&&typeof m!="function"&&typeof m!="symbol";break;default:Zs(n,l,ye,m,d,null)}return;case"dialog":bs("beforetoggle",n),bs("toggle",n),bs("cancel",n),bs("close",n);break;case"iframe":case"object":bs("load",n);break;case"video":case"audio":for(m=0;m<Yd.length;m++)bs(Yd[m],n);break;case"image":bs("error",n),bs("load",n);break;case"details":bs("toggle",n);break;case"embed":case"source":case"link":bs("error",n),bs("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Be in d)if(d.hasOwnProperty(Be)&&(m=d[Be],m!=null))switch(Be){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,l));default:Zs(n,l,Be,m,d,null)}return;default:if(dx(l)){for(qe in d)d.hasOwnProperty(qe)&&(m=d[qe],m!==void 0&&Xp(n,l,qe,m,d,void 0));return}}for(re in d)d.hasOwnProperty(re)&&(m=d[re],m!=null&&Zs(n,l,re,m,d,null))}function a5(n,l,d,m){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var j=null,w=null,I=null,re=null,ye=null,Be=null,qe=null;for(He in d){var et=d[He];if(d.hasOwnProperty(He)&&et!=null)switch(He){case"checked":break;case"value":break;case"defaultValue":ye=et;default:m.hasOwnProperty(He)||Zs(n,l,He,null,m,et)}}for(var ze in m){var He=m[ze];if(et=d[ze],m.hasOwnProperty(ze)&&(He!=null||et!=null))switch(ze){case"type":w=He;break;case"name":j=He;break;case"checked":Be=He;break;case"defaultChecked":qe=He;break;case"value":I=He;break;case"defaultValue":re=He;break;case"children":case"dangerouslySetInnerHTML":if(He!=null)throw Error(r(137,l));break;default:He!==et&&Zs(n,l,ze,He,m,et)}}ox(n,I,re,ye,Be,qe,w,j);return;case"select":He=I=re=ze=null;for(w in d)if(ye=d[w],d.hasOwnProperty(w)&&ye!=null)switch(w){case"value":break;case"multiple":He=ye;default:m.hasOwnProperty(w)||Zs(n,l,w,null,m,ye)}for(j in m)if(w=m[j],ye=d[j],m.hasOwnProperty(j)&&(w!=null||ye!=null))switch(j){case"value":ze=w;break;case"defaultValue":re=w;break;case"multiple":I=w;default:w!==ye&&Zs(n,l,j,w,m,ye)}l=re,d=I,m=He,ze!=null?Wo(n,!!d,ze,!1):!!m!=!!d&&(l!=null?Wo(n,!!d,l,!0):Wo(n,!!d,d?[]:"",!1));return;case"textarea":He=ze=null;for(re in d)if(j=d[re],d.hasOwnProperty(re)&&j!=null&&!m.hasOwnProperty(re))switch(re){case"value":break;case"children":break;default:Zs(n,l,re,null,m,j)}for(I in m)if(j=m[I],w=d[I],m.hasOwnProperty(I)&&(j!=null||w!=null))switch(I){case"value":ze=j;break;case"defaultValue":He=j;break;case"children":break;case"dangerouslySetInnerHTML":if(j!=null)throw Error(r(91));break;default:j!==w&&Zs(n,l,I,j,m,w)}Uj(n,ze,He);return;case"option":for(var Tt in d)if(ze=d[Tt],d.hasOwnProperty(Tt)&&ze!=null&&!m.hasOwnProperty(Tt))switch(Tt){case"selected":n.selected=!1;break;default:Zs(n,l,Tt,null,m,ze)}for(ye in m)if(ze=m[ye],He=d[ye],m.hasOwnProperty(ye)&&ze!==He&&(ze!=null||He!=null))switch(ye){case"selected":n.selected=ze&&typeof ze!="function"&&typeof ze!="symbol";break;default:Zs(n,l,ye,ze,m,He)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Gt in d)ze=d[Gt],d.hasOwnProperty(Gt)&&ze!=null&&!m.hasOwnProperty(Gt)&&Zs(n,l,Gt,null,m,ze);for(Be in m)if(ze=m[Be],He=d[Be],m.hasOwnProperty(Be)&&ze!==He&&(ze!=null||He!=null))switch(Be){case"children":case"dangerouslySetInnerHTML":if(ze!=null)throw Error(r(137,l));break;default:Zs(n,l,Be,ze,m,He)}return;default:if(dx(l)){for(var Js in d)ze=d[Js],d.hasOwnProperty(Js)&&ze!==void 0&&!m.hasOwnProperty(Js)&&Xp(n,l,Js,void 0,m,ze);for(qe in m)ze=m[qe],He=d[qe],!m.hasOwnProperty(qe)||ze===He||ze===void 0&&He===void 0||Xp(n,l,qe,ze,m,He);return}}for(var _e in d)ze=d[_e],d.hasOwnProperty(_e)&&ze!=null&&!m.hasOwnProperty(_e)&&Zs(n,l,_e,null,m,ze);for(et in m)ze=m[et],He=d[et],!m.hasOwnProperty(et)||ze===He||ze==null&&He==null||Zs(n,l,et,ze,m,He)}function W1(n){switch(n){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function r5(){if(typeof performance.getEntriesByType=="function"){for(var n=0,l=0,d=performance.getEntriesByType("resource"),m=0;m<d.length;m++){var j=d[m],w=j.transferSize,I=j.initiatorType,re=j.duration;if(w&&re&&W1(I)){for(I=0,re=j.responseEnd,m+=1;m<d.length;m++){var ye=d[m],Be=ye.startTime;if(Be>re)break;var qe=ye.transferSize,et=ye.initiatorType;qe&&W1(et)&&(ye=ye.responseEnd,I+=qe*(ye<re?1:(re-Be)/(ye-Be)))}if(--m,l+=8*(w+I)/(j.duration/1e3),n++,10<n)break}}if(0<n)return l/n/1e6}return navigator.connection&&(n=navigator.connection.downlink,typeof n=="number")?n:5}var Qp=null,Zp=null;function uh(n){return n.nodeType===9?n:n.ownerDocument}function G1(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function q1(n,l){if(n===0)switch(l){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&l==="foreignObject"?0:n}function Jp(n,l){return n==="textarea"||n==="noscript"||typeof l.children=="string"||typeof l.children=="number"||typeof l.children=="bigint"||typeof l.dangerouslySetInnerHTML=="object"&&l.dangerouslySetInnerHTML!==null&&l.dangerouslySetInnerHTML.__html!=null}var e0=null;function n5(){var n=window.event;return n&&n.type==="popstate"?n===e0?!1:(e0=n,!0):(e0=null,!1)}var K1=typeof setTimeout=="function"?setTimeout:void 0,i5=typeof clearTimeout=="function"?clearTimeout:void 0,Y1=typeof Promise=="function"?Promise:void 0,l5=typeof queueMicrotask=="function"?queueMicrotask:typeof Y1<"u"?function(n){return Y1.resolve(null).then(n).catch(o5)}:K1;function o5(n){setTimeout(function(){throw n})}function yl(n){return n==="head"}function X1(n,l){var d=l,m=0;do{var j=d.nextSibling;if(n.removeChild(d),j&&j.nodeType===8)if(d=j.data,d==="/$"||d==="/&"){if(m===0){n.removeChild(j),wc(l);return}m--}else if(d==="$"||d==="$?"||d==="$~"||d==="$!"||d==="&")m++;else if(d==="html")Qd(n.ownerDocument.documentElement);else if(d==="head"){d=n.ownerDocument.head,Qd(d);for(var w=d.firstChild;w;){var I=w.nextSibling,re=w.nodeName;w[Ie]||re==="SCRIPT"||re==="STYLE"||re==="LINK"&&w.rel.toLowerCase()==="stylesheet"||d.removeChild(w),w=I}}else d==="body"&&Qd(n.ownerDocument.body);d=j}while(d);wc(l)}function Q1(n,l){var d=n;n=0;do{var m=d.nextSibling;if(d.nodeType===1?l?(d._stashedDisplay=d.style.display,d.style.display="none"):(d.style.display=d._stashedDisplay||"",d.getAttribute("style")===""&&d.removeAttribute("style")):d.nodeType===3&&(l?(d._stashedText=d.nodeValue,d.nodeValue=""):d.nodeValue=d._stashedText||""),m&&m.nodeType===8)if(d=m.data,d==="/$"){if(n===0)break;n--}else d!=="$"&&d!=="$?"&&d!=="$~"&&d!=="$!"||n++;d=m}while(d)}function t0(n){var l=n.firstChild;for(l&&l.nodeType===10&&(l=l.nextSibling);l;){var d=l;switch(l=l.nextSibling,d.nodeName){case"HTML":case"HEAD":case"BODY":t0(d),rt(d);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(d.rel.toLowerCase()==="stylesheet")continue}n.removeChild(d)}}function c5(n,l,d,m){for(;n.nodeType===1;){var j=d;if(n.nodeName.toLowerCase()!==l.toLowerCase()){if(!m&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(m){if(!n[Ie])switch(l){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(w=n.getAttribute("rel"),w==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(w!==j.rel||n.getAttribute("href")!==(j.href==null||j.href===""?null:j.href)||n.getAttribute("crossorigin")!==(j.crossOrigin==null?null:j.crossOrigin)||n.getAttribute("title")!==(j.title==null?null:j.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(w=n.getAttribute("src"),(w!==(j.src==null?null:j.src)||n.getAttribute("type")!==(j.type==null?null:j.type)||n.getAttribute("crossorigin")!==(j.crossOrigin==null?null:j.crossOrigin))&&w&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(l==="input"&&n.type==="hidden"){var w=j.name==null?null:""+j.name;if(j.type==="hidden"&&n.getAttribute("name")===w)return n}else return n;if(n=Tn(n.nextSibling),n===null)break}return null}function d5(n,l,d){if(l==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!d||(n=Tn(n.nextSibling),n===null))return null;return n}function Z1(n,l){for(;n.nodeType!==8;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!l||(n=Tn(n.nextSibling),n===null))return null;return n}function s0(n){return n.data==="$?"||n.data==="$~"}function a0(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState!=="loading"}function u5(n,l){var d=n.ownerDocument;if(n.data==="$~")n._reactRetry=l;else if(n.data!=="$?"||d.readyState!=="loading")l();else{var m=function(){l(),d.removeEventListener("DOMContentLoaded",m)};d.addEventListener("DOMContentLoaded",m),n._reactRetry=m}}function Tn(n){for(;n!=null;n=n.nextSibling){var l=n.nodeType;if(l===1||l===3)break;if(l===8){if(l=n.data,l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"||l==="F!"||l==="F")break;if(l==="/$"||l==="/&")return null}}return n}var r0=null;function J1(n){n=n.nextSibling;for(var l=0;n;){if(n.nodeType===8){var d=n.data;if(d==="/$"||d==="/&"){if(l===0)return Tn(n.nextSibling);l--}else d!=="$"&&d!=="$!"&&d!=="$?"&&d!=="$~"&&d!=="&"||l++}n=n.nextSibling}return null}function eb(n){n=n.previousSibling;for(var l=0;n;){if(n.nodeType===8){var d=n.data;if(d==="$"||d==="$!"||d==="$?"||d==="$~"||d==="&"){if(l===0)return n;l--}else d!=="/$"&&d!=="/&"||l++}n=n.previousSibling}return null}function tb(n,l,d){switch(l=uh(d),n){case"html":if(n=l.documentElement,!n)throw Error(r(452));return n;case"head":if(n=l.head,!n)throw Error(r(453));return n;case"body":if(n=l.body,!n)throw Error(r(454));return n;default:throw Error(r(451))}}function Qd(n){for(var l=n.attributes;l.length;)n.removeAttributeNode(l[0]);rt(n)}var En=new Map,sb=new Set;function mh(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var Ii=Z.d;Z.d={f:m5,r:h5,D:f5,C:x5,L:p5,m:g5,X:j5,S:v5,M:y5};function m5(){var n=Ii.f(),l=ah();return n||l}function h5(n){var l=We(n);l!==null&&l.tag===5&&l.type==="form"?jN(l):Ii.r(n)}var yc=typeof document>"u"?null:document;function ab(n,l,d){var m=yc;if(m&&typeof l=="string"&&l){var j=jn(l);j='link[rel="'+n+'"][href="'+j+'"]',typeof d=="string"&&(j+='[crossorigin="'+d+'"]'),sb.has(j)||(sb.add(j),n={rel:n,crossOrigin:d,href:l},m.querySelector(j)===null&&(l=m.createElement("link"),or(l,"link",n),it(l),m.head.appendChild(l)))}}function f5(n){Ii.D(n),ab("dns-prefetch",n,null)}function x5(n,l){Ii.C(n,l),ab("preconnect",n,l)}function p5(n,l,d){Ii.L(n,l,d);var m=yc;if(m&&n&&l){var j='link[rel="preload"][as="'+jn(l)+'"]';l==="image"&&d&&d.imageSrcSet?(j+='[imagesrcset="'+jn(d.imageSrcSet)+'"]',typeof d.imageSizes=="string"&&(j+='[imagesizes="'+jn(d.imageSizes)+'"]')):j+='[href="'+jn(n)+'"]';var w=j;switch(l){case"style":w=Nc(n);break;case"script":w=bc(n)}En.has(w)||(n=p({rel:"preload",href:l==="image"&&d&&d.imageSrcSet?void 0:n,as:l},d),En.set(w,n),m.querySelector(j)!==null||l==="style"&&m.querySelector(Zd(w))||l==="script"&&m.querySelector(Jd(w))||(l=m.createElement("link"),or(l,"link",n),it(l),m.head.appendChild(l)))}}function g5(n,l){Ii.m(n,l);var d=yc;if(d&&n){var m=l&&typeof l.as=="string"?l.as:"script",j='link[rel="modulepreload"][as="'+jn(m)+'"][href="'+jn(n)+'"]',w=j;switch(m){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":w=bc(n)}if(!En.has(w)&&(n=p({rel:"modulepreload",href:n},l),En.set(w,n),d.querySelector(j)===null)){switch(m){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(d.querySelector(Jd(w)))return}m=d.createElement("link"),or(m,"link",n),it(m),d.head.appendChild(m)}}}function v5(n,l,d){Ii.S(n,l,d);var m=yc;if(m&&n){var j=Je(m).hoistableStyles,w=Nc(n);l=l||"default";var I=j.get(w);if(!I){var re={loading:0,preload:null};if(I=m.querySelector(Zd(w)))re.loading=5;else{n=p({rel:"stylesheet",href:n,"data-precedence":l},d),(d=En.get(w))&&n0(n,d);var ye=I=m.createElement("link");it(ye),or(ye,"link",n),ye._p=new Promise(function(Be,qe){ye.onload=Be,ye.onerror=qe}),ye.addEventListener("load",function(){re.loading|=1}),ye.addEventListener("error",function(){re.loading|=2}),re.loading|=4,hh(I,l,m)}I={type:"stylesheet",instance:I,count:1,state:re},j.set(w,I)}}}function j5(n,l){Ii.X(n,l);var d=yc;if(d&&n){var m=Je(d).hoistableScripts,j=bc(n),w=m.get(j);w||(w=d.querySelector(Jd(j)),w||(n=p({src:n,async:!0},l),(l=En.get(j))&&i0(n,l),w=d.createElement("script"),it(w),or(w,"link",n),d.head.appendChild(w)),w={type:"script",instance:w,count:1,state:null},m.set(j,w))}}function y5(n,l){Ii.M(n,l);var d=yc;if(d&&n){var m=Je(d).hoistableScripts,j=bc(n),w=m.get(j);w||(w=d.querySelector(Jd(j)),w||(n=p({src:n,async:!0,type:"module"},l),(l=En.get(j))&&i0(n,l),w=d.createElement("script"),it(w),or(w,"link",n),d.head.appendChild(w)),w={type:"script",instance:w,count:1,state:null},m.set(j,w))}}function rb(n,l,d,m){var j=(j=ie.current)?mh(j):null;if(!j)throw Error(r(446));switch(n){case"meta":case"title":return null;case"style":return typeof d.precedence=="string"&&typeof d.href=="string"?(l=Nc(d.href),d=Je(j).hoistableStyles,m=d.get(l),m||(m={type:"style",instance:null,count:0,state:null},d.set(l,m)),m):{type:"void",instance:null,count:0,state:null};case"link":if(d.rel==="stylesheet"&&typeof d.href=="string"&&typeof d.precedence=="string"){n=Nc(d.href);var w=Je(j).hoistableStyles,I=w.get(n);if(I||(j=j.ownerDocument||j,I={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},w.set(n,I),(w=j.querySelector(Zd(n)))&&!w._p&&(I.instance=w,I.state.loading=5),En.has(n)||(d={rel:"preload",as:"style",href:d.href,crossOrigin:d.crossOrigin,integrity:d.integrity,media:d.media,hrefLang:d.hrefLang,referrerPolicy:d.referrerPolicy},En.set(n,d),w||N5(j,n,d,I.state))),l&&m===null)throw Error(r(528,""));return I}if(l&&m!==null)throw Error(r(529,""));return null;case"script":return l=d.async,d=d.src,typeof d=="string"&&l&&typeof l!="function"&&typeof l!="symbol"?(l=bc(d),d=Je(j).hoistableScripts,m=d.get(l),m||(m={type:"script",instance:null,count:0,state:null},d.set(l,m)),m):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,n))}}function Nc(n){return'href="'+jn(n)+'"'}function Zd(n){return'link[rel="stylesheet"]['+n+"]"}function nb(n){return p({},n,{"data-precedence":n.precedence,precedence:null})}function N5(n,l,d,m){n.querySelector('link[rel="preload"][as="style"]['+l+"]")?m.loading=1:(l=n.createElement("link"),m.preload=l,l.addEventListener("load",function(){return m.loading|=1}),l.addEventListener("error",function(){return m.loading|=2}),or(l,"link",d),it(l),n.head.appendChild(l))}function bc(n){return'[src="'+jn(n)+'"]'}function Jd(n){return"script[async]"+n}function ib(n,l,d){if(l.count++,l.instance===null)switch(l.type){case"style":var m=n.querySelector('style[data-href~="'+jn(d.href)+'"]');if(m)return l.instance=m,it(m),m;var j=p({},d,{"data-href":d.href,"data-precedence":d.precedence,href:null,precedence:null});return m=(n.ownerDocument||n).createElement("style"),it(m),or(m,"style",j),hh(m,d.precedence,n),l.instance=m;case"stylesheet":j=Nc(d.href);var w=n.querySelector(Zd(j));if(w)return l.state.loading|=4,l.instance=w,it(w),w;m=nb(d),(j=En.get(j))&&n0(m,j),w=(n.ownerDocument||n).createElement("link"),it(w);var I=w;return I._p=new Promise(function(re,ye){I.onload=re,I.onerror=ye}),or(w,"link",m),l.state.loading|=4,hh(w,d.precedence,n),l.instance=w;case"script":return w=bc(d.src),(j=n.querySelector(Jd(w)))?(l.instance=j,it(j),j):(m=d,(j=En.get(w))&&(m=p({},d),i0(m,j)),n=n.ownerDocument||n,j=n.createElement("script"),it(j),or(j,"link",m),n.head.appendChild(j),l.instance=j);case"void":return null;default:throw Error(r(443,l.type))}else l.type==="stylesheet"&&(l.state.loading&4)===0&&(m=l.instance,l.state.loading|=4,hh(m,d.precedence,n));return l.instance}function hh(n,l,d){for(var m=d.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),j=m.length?m[m.length-1]:null,w=j,I=0;I<m.length;I++){var re=m[I];if(re.dataset.precedence===l)w=re;else if(w!==j)break}w?w.parentNode.insertBefore(n,w.nextSibling):(l=d.nodeType===9?d.head:d,l.insertBefore(n,l.firstChild))}function n0(n,l){n.crossOrigin==null&&(n.crossOrigin=l.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=l.referrerPolicy),n.title==null&&(n.title=l.title)}function i0(n,l){n.crossOrigin==null&&(n.crossOrigin=l.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=l.referrerPolicy),n.integrity==null&&(n.integrity=l.integrity)}var fh=null;function lb(n,l,d){if(fh===null){var m=new Map,j=fh=new Map;j.set(d,m)}else j=fh,m=j.get(d),m||(m=new Map,j.set(d,m));if(m.has(n))return m;for(m.set(n,null),d=d.getElementsByTagName(n),j=0;j<d.length;j++){var w=d[j];if(!(w[Ie]||w[M]||n==="link"&&w.getAttribute("rel")==="stylesheet")&&w.namespaceURI!=="http://www.w3.org/2000/svg"){var I=w.getAttribute(l)||"";I=n+I;var re=m.get(I);re?re.push(w):m.set(I,[w])}}return m}function ob(n,l,d){n=n.ownerDocument||n,n.head.insertBefore(d,l==="title"?n.querySelector("head > title"):null)}function b5(n,l,d){if(d===1||l.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof l.precedence!="string"||typeof l.href!="string"||l.href==="")break;return!0;case"link":if(typeof l.rel!="string"||typeof l.href!="string"||l.href===""||l.onLoad||l.onError)break;switch(l.rel){case"stylesheet":return n=l.disabled,typeof l.precedence=="string"&&n==null;default:return!0}case"script":if(l.async&&typeof l.async!="function"&&typeof l.async!="symbol"&&!l.onLoad&&!l.onError&&l.src&&typeof l.src=="string")return!0}return!1}function cb(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}function w5(n,l,d,m){if(d.type==="stylesheet"&&(typeof m.media!="string"||matchMedia(m.media).matches!==!1)&&(d.state.loading&4)===0){if(d.instance===null){var j=Nc(m.href),w=l.querySelector(Zd(j));if(w){l=w._p,l!==null&&typeof l=="object"&&typeof l.then=="function"&&(n.count++,n=xh.bind(n),l.then(n,n)),d.state.loading|=4,d.instance=w,it(w);return}w=l.ownerDocument||l,m=nb(m),(j=En.get(j))&&n0(m,j),w=w.createElement("link"),it(w);var I=w;I._p=new Promise(function(re,ye){I.onload=re,I.onerror=ye}),or(w,"link",m),d.instance=w}n.stylesheets===null&&(n.stylesheets=new Map),n.stylesheets.set(d,l),(l=d.state.preload)&&(d.state.loading&3)===0&&(n.count++,d=xh.bind(n),l.addEventListener("load",d),l.addEventListener("error",d))}}var l0=0;function S5(n,l){return n.stylesheets&&n.count===0&&gh(n,n.stylesheets),0<n.count||0<n.imgCount?function(d){var m=setTimeout(function(){if(n.stylesheets&&gh(n,n.stylesheets),n.unsuspend){var w=n.unsuspend;n.unsuspend=null,w()}},6e4+l);0<n.imgBytes&&l0===0&&(l0=62500*r5());var j=setTimeout(function(){if(n.waitingForImages=!1,n.count===0&&(n.stylesheets&&gh(n,n.stylesheets),n.unsuspend)){var w=n.unsuspend;n.unsuspend=null,w()}},(n.imgBytes>l0?50:800)+l);return n.unsuspend=d,function(){n.unsuspend=null,clearTimeout(m),clearTimeout(j)}}:null}function xh(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)gh(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var ph=null;function gh(n,l){n.stylesheets=null,n.unsuspend!==null&&(n.count++,ph=new Map,l.forEach(C5,n),ph=null,xh.call(n))}function C5(n,l){if(!(l.state.loading&4)){var d=ph.get(n);if(d)var m=d.get(null);else{d=new Map,ph.set(n,d);for(var j=n.querySelectorAll("link[data-precedence],style[data-precedence]"),w=0;w<j.length;w++){var I=j[w];(I.nodeName==="LINK"||I.getAttribute("media")!=="not all")&&(d.set(I.dataset.precedence,I),m=I)}m&&d.set(null,m)}j=l.instance,I=j.getAttribute("data-precedence"),w=d.get(I)||m,w===m&&d.set(null,j),d.set(I,j),this.count++,m=xh.bind(this),j.addEventListener("load",m),j.addEventListener("error",m),w?w.parentNode.insertBefore(j,w.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(j,n.firstChild)),l.state.loading|=4}}var eu={$$typeof:A,Provider:null,Consumer:null,_currentValue:de,_currentValue2:de,_threadCount:0};function T5(n,l,d,m,j,w,I,re,ye){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Se(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Se(0),this.hiddenUpdates=Se(null),this.identifierPrefix=m,this.onUncaughtError=j,this.onCaughtError=w,this.onRecoverableError=I,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=ye,this.incompleteTransitions=new Map}function db(n,l,d,m,j,w,I,re,ye,Be,qe,et){return n=new T5(n,l,d,I,ye,Be,qe,et,re),l=1,w===!0&&(l|=24),w=an(3,null,null,l),n.current=w,w.stateNode=n,l=zx(),l.refCount++,n.pooledCache=l,l.refCount++,w.memoizedState={element:m,isDehydrated:d,cache:l},Hx(w),n}function ub(n){return n?(n=Jo,n):Jo}function mb(n,l,d,m,j,w){j=ub(j),m.context===null?m.context=j:m.pendingContext=j,m=cl(l),m.payload={element:d},w=w===void 0?null:w,w!==null&&(m.callback=w),d=dl(n,m,l),d!==null&&(Gr(d,n,l),Od(d,n,l))}function hb(n,l){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var d=n.retryLane;n.retryLane=d!==0&&d<l?d:l}}function o0(n,l){hb(n,l),(n=n.alternate)&&hb(n,l)}function fb(n){if(n.tag===13||n.tag===31){var l=Ql(n,67108864);l!==null&&Gr(l,n,67108864),o0(n,67108864)}}function xb(n){if(n.tag===13||n.tag===31){var l=cn();l=Ts(l);var d=Ql(n,l);d!==null&&Gr(d,n,l),o0(n,l)}}var vh=!0;function E5(n,l,d,m){var j=U.T;U.T=null;var w=Z.p;try{Z.p=2,c0(n,l,d,m)}finally{Z.p=w,U.T=j}}function k5(n,l,d,m){var j=U.T;U.T=null;var w=Z.p;try{Z.p=8,c0(n,l,d,m)}finally{Z.p=w,U.T=j}}function c0(n,l,d,m){if(vh){var j=d0(m);if(j===null)Yp(n,l,m,jh,d),gb(n,m);else if(_5(j,n,l,d,m))m.stopPropagation();else if(gb(n,m),l&4&&-1<A5.indexOf(n)){for(;j!==null;){var w=We(j);if(w!==null)switch(w.tag){case 3:if(w=w.stateNode,w.current.memoizedState.isDehydrated){var I=ge(w.pendingLanes);if(I!==0){var re=w;for(re.pendingLanes|=2,re.entangledLanes|=2;I;){var ye=1<<31-we(I);re.entanglements[1]|=ye,I&=~ye}ii(w),(Fs&6)===0&&(th=Rt()+500,Kd(0))}}break;case 31:case 13:re=Ql(w,2),re!==null&&Gr(re,w,2),ah(),o0(w,2)}if(w=d0(m),w===null&&Yp(n,l,m,jh,d),w===j)break;j=w}j!==null&&m.stopPropagation()}else Yp(n,l,m,null,d)}}function d0(n){return n=mx(n),u0(n)}var jh=null;function u0(n){if(jh=null,n=he(n),n!==null){var l=o(n);if(l===null)n=null;else{var d=l.tag;if(d===13){if(n=c(l),n!==null)return n;n=null}else if(d===31){if(n=u(l),n!==null)return n;n=null}else if(d===3){if(l.stateNode.current.memoizedState.isDehydrated)return l.tag===3?l.stateNode.containerInfo:null;n=null}else l!==n&&(n=null)}}return jh=n,null}function pb(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(sa()){case Te:return 2;case je:return 8;case fe:case Ue:return 32;case st:return 268435456;default:return 32}default:return 32}}var m0=!1,Nl=null,bl=null,wl=null,tu=new Map,su=new Map,Sl=[],A5="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function gb(n,l){switch(n){case"focusin":case"focusout":Nl=null;break;case"dragenter":case"dragleave":bl=null;break;case"mouseover":case"mouseout":wl=null;break;case"pointerover":case"pointerout":tu.delete(l.pointerId);break;case"gotpointercapture":case"lostpointercapture":su.delete(l.pointerId)}}function au(n,l,d,m,j,w){return n===null||n.nativeEvent!==w?(n={blockedOn:l,domEventName:d,eventSystemFlags:m,nativeEvent:w,targetContainers:[j]},l!==null&&(l=We(l),l!==null&&fb(l)),n):(n.eventSystemFlags|=m,l=n.targetContainers,j!==null&&l.indexOf(j)===-1&&l.push(j),n)}function _5(n,l,d,m,j){switch(l){case"focusin":return Nl=au(Nl,n,l,d,m,j),!0;case"dragenter":return bl=au(bl,n,l,d,m,j),!0;case"mouseover":return wl=au(wl,n,l,d,m,j),!0;case"pointerover":var w=j.pointerId;return tu.set(w,au(tu.get(w)||null,n,l,d,m,j)),!0;case"gotpointercapture":return w=j.pointerId,su.set(w,au(su.get(w)||null,n,l,d,m,j)),!0}return!1}function vb(n){var l=he(n.target);if(l!==null){var d=o(l);if(d!==null){if(l=d.tag,l===13){if(l=c(d),l!==null){n.blockedOn=l,ue(n.priority,function(){xb(d)});return}}else if(l===31){if(l=u(d),l!==null){n.blockedOn=l,ue(n.priority,function(){xb(d)});return}}else if(l===3&&d.stateNode.current.memoizedState.isDehydrated){n.blockedOn=d.tag===3?d.stateNode.containerInfo:null;return}}}n.blockedOn=null}function yh(n){if(n.blockedOn!==null)return!1;for(var l=n.targetContainers;0<l.length;){var d=d0(n.nativeEvent);if(d===null){d=n.nativeEvent;var m=new d.constructor(d.type,d);ux=m,d.target.dispatchEvent(m),ux=null}else return l=We(d),l!==null&&fb(l),n.blockedOn=d,!1;l.shift()}return!0}function jb(n,l,d){yh(n)&&d.delete(l)}function D5(){m0=!1,Nl!==null&&yh(Nl)&&(Nl=null),bl!==null&&yh(bl)&&(bl=null),wl!==null&&yh(wl)&&(wl=null),tu.forEach(jb),su.forEach(jb)}function Nh(n,l){n.blockedOn===l&&(n.blockedOn=null,m0||(m0=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,D5)))}var bh=null;function yb(n){bh!==n&&(bh=n,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){bh===n&&(bh=null);for(var l=0;l<n.length;l+=3){var d=n[l],m=n[l+1],j=n[l+2];if(typeof m!="function"){if(u0(m||d)===null)continue;break}var w=We(d);w!==null&&(n.splice(l,3),l-=3,dp(w,{pending:!0,data:j,method:d.method,action:m},m,j))}}))}function wc(n){function l(ye){return Nh(ye,n)}Nl!==null&&Nh(Nl,n),bl!==null&&Nh(bl,n),wl!==null&&Nh(wl,n),tu.forEach(l),su.forEach(l);for(var d=0;d<Sl.length;d++){var m=Sl[d];m.blockedOn===n&&(m.blockedOn=null)}for(;0<Sl.length&&(d=Sl[0],d.blockedOn===null);)vb(d),d.blockedOn===null&&Sl.shift();if(d=(n.ownerDocument||n).$$reactFormReplay,d!=null)for(m=0;m<d.length;m+=3){var j=d[m],w=d[m+1],I=j[ne]||null;if(typeof w=="function")I||yb(d);else if(I){var re=null;if(w&&w.hasAttribute("formAction")){if(j=w,I=w[ne]||null)re=I.formAction;else if(u0(j)!==null)continue}else re=I.action;typeof re=="function"?d[m+1]=re:(d.splice(m,3),m-=3),yb(d)}}}function Nb(){function n(w){w.canIntercept&&w.info==="react-transition"&&w.intercept({handler:function(){return new Promise(function(I){return j=I})},focusReset:"manual",scroll:"manual"})}function l(){j!==null&&(j(),j=null),m||setTimeout(d,20)}function d(){if(!m&&!navigation.transition){var w=navigation.currentEntry;w&&w.url!=null&&navigation.navigate(w.url,{state:w.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var m=!1,j=null;return navigation.addEventListener("navigate",n),navigation.addEventListener("navigatesuccess",l),navigation.addEventListener("navigateerror",l),setTimeout(d,100),function(){m=!0,navigation.removeEventListener("navigate",n),navigation.removeEventListener("navigatesuccess",l),navigation.removeEventListener("navigateerror",l),j!==null&&(j(),j=null)}}}function h0(n){this._internalRoot=n}wh.prototype.render=h0.prototype.render=function(n){var l=this._internalRoot;if(l===null)throw Error(r(409));var d=l.current,m=cn();mb(d,m,n,l,null,null)},wh.prototype.unmount=h0.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var l=n.containerInfo;mb(n.current,2,null,n,null,null),ah(),l[ce]=null}};function wh(n){this._internalRoot=n}wh.prototype.unstable_scheduleHydration=function(n){if(n){var l=Q();n={blockedOn:null,target:n,priority:l};for(var d=0;d<Sl.length&&l!==0&&l<Sl[d].priority;d++);Sl.splice(d,0,n),d===0&&vb(n)}};var bb=s.version;if(bb!=="19.2.0")throw Error(r(527,bb,"19.2.0"));Z.findDOMNode=function(n){var l=n._reactInternals;if(l===void 0)throw typeof n.render=="function"?Error(r(188)):(n=Object.keys(n).join(","),Error(r(268,n)));return n=x(l),n=n!==null?h(n):null,n=n===null?null:n.stateNode,n};var O5={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:U,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Sh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Sh.isDisabled&&Sh.supportsFiber)try{Jt=Sh.inject(O5),as=Sh}catch{}}return iu.createRoot=function(n,l){if(!i(n))throw Error(r(299));var d=!1,m="",j=AN,w=_N,I=DN;return l!=null&&(l.unstable_strictMode===!0&&(d=!0),l.identifierPrefix!==void 0&&(m=l.identifierPrefix),l.onUncaughtError!==void 0&&(j=l.onUncaughtError),l.onCaughtError!==void 0&&(w=l.onCaughtError),l.onRecoverableError!==void 0&&(I=l.onRecoverableError)),l=db(n,1,!1,null,null,d,m,null,j,w,I,Nb),n[ce]=l.current,Kp(n),new h0(l)},iu.hydrateRoot=function(n,l,d){if(!i(n))throw Error(r(299));var m=!1,j="",w=AN,I=_N,re=DN,ye=null;return d!=null&&(d.unstable_strictMode===!0&&(m=!0),d.identifierPrefix!==void 0&&(j=d.identifierPrefix),d.onUncaughtError!==void 0&&(w=d.onUncaughtError),d.onCaughtError!==void 0&&(I=d.onCaughtError),d.onRecoverableError!==void 0&&(re=d.onRecoverableError),d.formState!==void 0&&(ye=d.formState)),l=db(n,1,!0,l,d??null,m,j,ye,w,I,re,Nb),l.context=ub(null),d=l.current,m=cn(),m=Ts(m),j=cl(m),j.callback=null,dl(d,j,m),d=m,l.current.lanes=d,dt(l,d),ii(l),n[ce]=l.current,Kp(n),new wh(l)},iu.version="19.2.0",iu}var Fb;function H6(){if(Fb)return v0.exports;Fb=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(s){console.error(s)}}return t(),v0.exports=$6(),v0.exports}var W6=H6();const wv="-",G6=t=>{const s=K6(t),{conflictingClassGroups:a,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:c=>{const u=c.split(wv);return u[0]===""&&u.length!==1&&u.shift(),KS(u,s)||q6(c)},getConflictingClassGroupIds:(c,u)=>{const f=a[c]||[];return u&&r[c]?[...f,...r[c]]:f}}},KS=(t,s)=>{if(t.length===0)return s.classGroupId;const a=t[0],r=s.nextPart.get(a),i=r?KS(t.slice(1),r):void 0;if(i)return i;if(s.validators.length===0)return;const o=t.join(wv);return s.validators.find(({validator:c})=>c(o))?.classGroupId},Lb=/^\[(.+)\]$/,q6=t=>{if(Lb.test(t)){const s=Lb.exec(t)[1],a=s?.substring(0,s.indexOf(":"));if(a)return"arbitrary.."+a}},K6=t=>{const{theme:s,classGroups:a}=t,r={nextPart:new Map,validators:[]};for(const i in a)hg(a[i],r,i,s);return r},hg=(t,s,a,r)=>{t.forEach(i=>{if(typeof i=="string"){const o=i===""?s:Ib(s,i);o.classGroupId=a;return}if(typeof i=="function"){if(Y6(i)){hg(i(r),s,a,r);return}s.validators.push({validator:i,classGroupId:a});return}Object.entries(i).forEach(([o,c])=>{hg(c,Ib(s,o),a,r)})})},Ib=(t,s)=>{let a=t;return s.split(wv).forEach(r=>{a.nextPart.has(r)||a.nextPart.set(r,{nextPart:new Map,validators:[]}),a=a.nextPart.get(r)}),a},Y6=t=>t.isThemeGetter,X6=t=>{if(t<1)return{get:()=>{},set:()=>{}};let s=0,a=new Map,r=new Map;const i=(o,c)=>{a.set(o,c),s++,s>t&&(s=0,r=a,a=new Map)};return{get(o){let c=a.get(o);if(c!==void 0)return c;if((c=r.get(o))!==void 0)return i(o,c),c},set(o,c){a.has(o)?a.set(o,c):i(o,c)}}},fg="!",xg=":",Q6=xg.length,Z6=t=>{const{prefix:s,experimentalParseClassName:a}=t;let r=i=>{const o=[];let c=0,u=0,f=0,x;for(let b=0;b<i.length;b++){let N=i[b];if(c===0&&u===0){if(N===xg){o.push(i.slice(f,b)),f=b+Q6;continue}if(N==="/"){x=b;continue}}N==="["?c++:N==="]"?c--:N==="("?u++:N===")"&&u--}const h=o.length===0?i:i.substring(f),p=J6(h),g=p!==h,y=x&&x>f?x-f:void 0;return{modifiers:o,hasImportantModifier:g,baseClassName:p,maybePostfixModifierPosition:y}};if(s){const i=s+xg,o=r;r=c=>c.startsWith(i)?o(c.substring(i.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:c,maybePostfixModifierPosition:void 0}}if(a){const i=r;r=o=>a({className:o,parseClassName:i})}return r},J6=t=>t.endsWith(fg)?t.substring(0,t.length-1):t.startsWith(fg)?t.substring(1):t,eD=t=>{const s=Object.fromEntries(t.orderSensitiveModifiers.map(r=>[r,!0]));return r=>{if(r.length<=1)return r;const i=[];let o=[];return r.forEach(c=>{c[0]==="["||s[c]?(i.push(...o.sort(),c),o=[]):o.push(c)}),i.push(...o.sort()),i}},tD=t=>({cache:X6(t.cacheSize),parseClassName:Z6(t),sortModifiers:eD(t),...G6(t)}),sD=/\s+/,aD=(t,s)=>{const{parseClassName:a,getClassGroupId:r,getConflictingClassGroupIds:i,sortModifiers:o}=s,c=[],u=t.trim().split(sD);let f="";for(let x=u.length-1;x>=0;x-=1){const h=u[x],{isExternal:p,modifiers:g,hasImportantModifier:y,baseClassName:b,maybePostfixModifierPosition:N}=a(h);if(p){f=h+(f.length>0?" "+f:f);continue}let S=!!N,C=r(S?b.substring(0,N):b);if(!C){if(!S){f=h+(f.length>0?" "+f:f);continue}if(C=r(b),!C){f=h+(f.length>0?" "+f:f);continue}S=!1}const k=o(g).join(":"),A=y?k+fg:k,G=A+C;if(c.includes(G))continue;c.push(G);const F=i(C,S);for(let E=0;E<F.length;++E){const T=F[E];c.push(A+T)}f=h+(f.length>0?" "+f:f)}return f};function rD(){let t=0,s,a,r="";for(;t<arguments.length;)(s=arguments[t++])&&(a=YS(s))&&(r&&(r+=" "),r+=a);return r}const YS=t=>{if(typeof t=="string")return t;let s,a="";for(let r=0;r<t.length;r++)t[r]&&(s=YS(t[r]))&&(a&&(a+=" "),a+=s);return a};function nD(t,...s){let a,r,i,o=c;function c(f){const x=s.reduce((h,p)=>p(h),t());return a=tD(x),r=a.cache.get,i=a.cache.set,o=u,u(f)}function u(f){const x=r(f);if(x)return x;const h=aD(f,a);return i(f,h),h}return function(){return o(rD.apply(null,arguments))}}const Qa=t=>{const s=a=>a[t]||[];return s.isThemeGetter=!0,s},XS=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,QS=/^\((?:(\w[\w-]*):)?(.+)\)$/i,iD=/^\d+\/\d+$/,lD=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,oD=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,cD=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,dD=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,uD=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Sc=t=>iD.test(t),js=t=>!!t&&!Number.isNaN(Number(t)),Tl=t=>!!t&&Number.isInteger(Number(t)),N0=t=>t.endsWith("%")&&js(t.slice(0,-1)),Bi=t=>lD.test(t),mD=()=>!0,hD=t=>oD.test(t)&&!cD.test(t),ZS=()=>!1,fD=t=>dD.test(t),xD=t=>uD.test(t),pD=t=>!At(t)&&!_t(t),gD=t=>sd(t,t4,ZS),At=t=>XS.test(t),uo=t=>sd(t,s4,hD),b0=t=>sd(t,bD,js),Bb=t=>sd(t,JS,ZS),vD=t=>sd(t,e4,xD),Ah=t=>sd(t,a4,fD),_t=t=>QS.test(t),lu=t=>ad(t,s4),jD=t=>ad(t,wD),zb=t=>ad(t,JS),yD=t=>ad(t,t4),ND=t=>ad(t,e4),_h=t=>ad(t,a4,!0),sd=(t,s,a)=>{const r=XS.exec(t);return r?r[1]?s(r[1]):a(r[2]):!1},ad=(t,s,a=!1)=>{const r=QS.exec(t);return r?r[1]?s(r[1]):a:!1},JS=t=>t==="position"||t==="percentage",e4=t=>t==="image"||t==="url",t4=t=>t==="length"||t==="size"||t==="bg-size",s4=t=>t==="length",bD=t=>t==="number",wD=t=>t==="family-name",a4=t=>t==="shadow",SD=()=>{const t=Qa("color"),s=Qa("font"),a=Qa("text"),r=Qa("font-weight"),i=Qa("tracking"),o=Qa("leading"),c=Qa("breakpoint"),u=Qa("container"),f=Qa("spacing"),x=Qa("radius"),h=Qa("shadow"),p=Qa("inset-shadow"),g=Qa("text-shadow"),y=Qa("drop-shadow"),b=Qa("blur"),N=Qa("perspective"),S=Qa("aspect"),C=Qa("ease"),k=Qa("animate"),A=()=>["auto","avoid","all","avoid-page","page","left","right","column"],G=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],F=()=>[...G(),_t,At],E=()=>["auto","hidden","clip","visible","scroll"],T=()=>["auto","contain","none"],_=()=>[_t,At,f],P=()=>[Sc,"full","auto",..._()],z=()=>[Tl,"none","subgrid",_t,At],V=()=>["auto",{span:["full",Tl,_t,At]},Tl,_t,At],W=()=>[Tl,"auto",_t,At],q=()=>["auto","min","max","fr",_t,At],B=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],ae=()=>["start","end","center","stretch","center-safe","end-safe"],U=()=>["auto",..._()],Z=()=>[Sc,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",..._()],de=()=>[t,_t,At],H=()=>[...G(),zb,Bb,{position:[_t,At]}],se=()=>["no-repeat",{repeat:["","x","y","space","round"]}],ee=()=>["auto","cover","contain",yD,gD,{size:[_t,At]}],L=()=>[N0,lu,uo],X=()=>["","none","full",x,_t,At],O=()=>["",js,lu,uo],J=()=>["solid","dashed","dotted","double"],ie=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],be=()=>[js,N0,zb,Bb],Le=()=>["","none",b,_t,At],ve=()=>["none",js,_t,At],oe=()=>["none",js,_t,At],Pe=()=>[js,_t,At],Xe=()=>[Sc,"full",..._()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[Bi],breakpoint:[Bi],color:[mD],container:[Bi],"drop-shadow":[Bi],ease:["in","out","in-out"],font:[pD],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[Bi],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[Bi],shadow:[Bi],spacing:["px",js],text:[Bi],"text-shadow":[Bi],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",Sc,At,_t,S]}],container:["container"],columns:[{columns:[js,At,_t,u]}],"break-after":[{"break-after":A()}],"break-before":[{"break-before":A()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:F()}],overflow:[{overflow:E()}],"overflow-x":[{"overflow-x":E()}],"overflow-y":[{"overflow-y":E()}],overscroll:[{overscroll:T()}],"overscroll-x":[{"overscroll-x":T()}],"overscroll-y":[{"overscroll-y":T()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:P()}],"inset-x":[{"inset-x":P()}],"inset-y":[{"inset-y":P()}],start:[{start:P()}],end:[{end:P()}],top:[{top:P()}],right:[{right:P()}],bottom:[{bottom:P()}],left:[{left:P()}],visibility:["visible","invisible","collapse"],z:[{z:[Tl,"auto",_t,At]}],basis:[{basis:[Sc,"full","auto",u,..._()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[js,Sc,"auto","initial","none",At]}],grow:[{grow:["",js,_t,At]}],shrink:[{shrink:["",js,_t,At]}],order:[{order:[Tl,"first","last","none",_t,At]}],"grid-cols":[{"grid-cols":z()}],"col-start-end":[{col:V()}],"col-start":[{"col-start":W()}],"col-end":[{"col-end":W()}],"grid-rows":[{"grid-rows":z()}],"row-start-end":[{row:V()}],"row-start":[{"row-start":W()}],"row-end":[{"row-end":W()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":q()}],"auto-rows":[{"auto-rows":q()}],gap:[{gap:_()}],"gap-x":[{"gap-x":_()}],"gap-y":[{"gap-y":_()}],"justify-content":[{justify:[...B(),"normal"]}],"justify-items":[{"justify-items":[...ae(),"normal"]}],"justify-self":[{"justify-self":["auto",...ae()]}],"align-content":[{content:["normal",...B()]}],"align-items":[{items:[...ae(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...ae(),{baseline:["","last"]}]}],"place-content":[{"place-content":B()}],"place-items":[{"place-items":[...ae(),"baseline"]}],"place-self":[{"place-self":["auto",...ae()]}],p:[{p:_()}],px:[{px:_()}],py:[{py:_()}],ps:[{ps:_()}],pe:[{pe:_()}],pt:[{pt:_()}],pr:[{pr:_()}],pb:[{pb:_()}],pl:[{pl:_()}],m:[{m:U()}],mx:[{mx:U()}],my:[{my:U()}],ms:[{ms:U()}],me:[{me:U()}],mt:[{mt:U()}],mr:[{mr:U()}],mb:[{mb:U()}],ml:[{ml:U()}],"space-x":[{"space-x":_()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":_()}],"space-y-reverse":["space-y-reverse"],size:[{size:Z()}],w:[{w:[u,"screen",...Z()]}],"min-w":[{"min-w":[u,"screen","none",...Z()]}],"max-w":[{"max-w":[u,"screen","none","prose",{screen:[c]},...Z()]}],h:[{h:["screen","lh",...Z()]}],"min-h":[{"min-h":["screen","lh","none",...Z()]}],"max-h":[{"max-h":["screen","lh",...Z()]}],"font-size":[{text:["base",a,lu,uo]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[r,_t,b0]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",N0,At]}],"font-family":[{font:[jD,At,s]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[i,_t,At]}],"line-clamp":[{"line-clamp":[js,"none",_t,b0]}],leading:[{leading:[o,..._()]}],"list-image":[{"list-image":["none",_t,At]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",_t,At]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:de()}],"text-color":[{text:de()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...J(),"wavy"]}],"text-decoration-thickness":[{decoration:[js,"from-font","auto",_t,uo]}],"text-decoration-color":[{decoration:de()}],"underline-offset":[{"underline-offset":[js,"auto",_t,At]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:_()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",_t,At]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",_t,At]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:H()}],"bg-repeat":[{bg:se()}],"bg-size":[{bg:ee()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},Tl,_t,At],radial:["",_t,At],conic:[Tl,_t,At]},ND,vD]}],"bg-color":[{bg:de()}],"gradient-from-pos":[{from:L()}],"gradient-via-pos":[{via:L()}],"gradient-to-pos":[{to:L()}],"gradient-from":[{from:de()}],"gradient-via":[{via:de()}],"gradient-to":[{to:de()}],rounded:[{rounded:X()}],"rounded-s":[{"rounded-s":X()}],"rounded-e":[{"rounded-e":X()}],"rounded-t":[{"rounded-t":X()}],"rounded-r":[{"rounded-r":X()}],"rounded-b":[{"rounded-b":X()}],"rounded-l":[{"rounded-l":X()}],"rounded-ss":[{"rounded-ss":X()}],"rounded-se":[{"rounded-se":X()}],"rounded-ee":[{"rounded-ee":X()}],"rounded-es":[{"rounded-es":X()}],"rounded-tl":[{"rounded-tl":X()}],"rounded-tr":[{"rounded-tr":X()}],"rounded-br":[{"rounded-br":X()}],"rounded-bl":[{"rounded-bl":X()}],"border-w":[{border:O()}],"border-w-x":[{"border-x":O()}],"border-w-y":[{"border-y":O()}],"border-w-s":[{"border-s":O()}],"border-w-e":[{"border-e":O()}],"border-w-t":[{"border-t":O()}],"border-w-r":[{"border-r":O()}],"border-w-b":[{"border-b":O()}],"border-w-l":[{"border-l":O()}],"divide-x":[{"divide-x":O()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":O()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...J(),"hidden","none"]}],"divide-style":[{divide:[...J(),"hidden","none"]}],"border-color":[{border:de()}],"border-color-x":[{"border-x":de()}],"border-color-y":[{"border-y":de()}],"border-color-s":[{"border-s":de()}],"border-color-e":[{"border-e":de()}],"border-color-t":[{"border-t":de()}],"border-color-r":[{"border-r":de()}],"border-color-b":[{"border-b":de()}],"border-color-l":[{"border-l":de()}],"divide-color":[{divide:de()}],"outline-style":[{outline:[...J(),"none","hidden"]}],"outline-offset":[{"outline-offset":[js,_t,At]}],"outline-w":[{outline:["",js,lu,uo]}],"outline-color":[{outline:de()}],shadow:[{shadow:["","none",h,_h,Ah]}],"shadow-color":[{shadow:de()}],"inset-shadow":[{"inset-shadow":["none",p,_h,Ah]}],"inset-shadow-color":[{"inset-shadow":de()}],"ring-w":[{ring:O()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:de()}],"ring-offset-w":[{"ring-offset":[js,uo]}],"ring-offset-color":[{"ring-offset":de()}],"inset-ring-w":[{"inset-ring":O()}],"inset-ring-color":[{"inset-ring":de()}],"text-shadow":[{"text-shadow":["none",g,_h,Ah]}],"text-shadow-color":[{"text-shadow":de()}],opacity:[{opacity:[js,_t,At]}],"mix-blend":[{"mix-blend":[...ie(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":ie()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[js]}],"mask-image-linear-from-pos":[{"mask-linear-from":be()}],"mask-image-linear-to-pos":[{"mask-linear-to":be()}],"mask-image-linear-from-color":[{"mask-linear-from":de()}],"mask-image-linear-to-color":[{"mask-linear-to":de()}],"mask-image-t-from-pos":[{"mask-t-from":be()}],"mask-image-t-to-pos":[{"mask-t-to":be()}],"mask-image-t-from-color":[{"mask-t-from":de()}],"mask-image-t-to-color":[{"mask-t-to":de()}],"mask-image-r-from-pos":[{"mask-r-from":be()}],"mask-image-r-to-pos":[{"mask-r-to":be()}],"mask-image-r-from-color":[{"mask-r-from":de()}],"mask-image-r-to-color":[{"mask-r-to":de()}],"mask-image-b-from-pos":[{"mask-b-from":be()}],"mask-image-b-to-pos":[{"mask-b-to":be()}],"mask-image-b-from-color":[{"mask-b-from":de()}],"mask-image-b-to-color":[{"mask-b-to":de()}],"mask-image-l-from-pos":[{"mask-l-from":be()}],"mask-image-l-to-pos":[{"mask-l-to":be()}],"mask-image-l-from-color":[{"mask-l-from":de()}],"mask-image-l-to-color":[{"mask-l-to":de()}],"mask-image-x-from-pos":[{"mask-x-from":be()}],"mask-image-x-to-pos":[{"mask-x-to":be()}],"mask-image-x-from-color":[{"mask-x-from":de()}],"mask-image-x-to-color":[{"mask-x-to":de()}],"mask-image-y-from-pos":[{"mask-y-from":be()}],"mask-image-y-to-pos":[{"mask-y-to":be()}],"mask-image-y-from-color":[{"mask-y-from":de()}],"mask-image-y-to-color":[{"mask-y-to":de()}],"mask-image-radial":[{"mask-radial":[_t,At]}],"mask-image-radial-from-pos":[{"mask-radial-from":be()}],"mask-image-radial-to-pos":[{"mask-radial-to":be()}],"mask-image-radial-from-color":[{"mask-radial-from":de()}],"mask-image-radial-to-color":[{"mask-radial-to":de()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":G()}],"mask-image-conic-pos":[{"mask-conic":[js]}],"mask-image-conic-from-pos":[{"mask-conic-from":be()}],"mask-image-conic-to-pos":[{"mask-conic-to":be()}],"mask-image-conic-from-color":[{"mask-conic-from":de()}],"mask-image-conic-to-color":[{"mask-conic-to":de()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:H()}],"mask-repeat":[{mask:se()}],"mask-size":[{mask:ee()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",_t,At]}],filter:[{filter:["","none",_t,At]}],blur:[{blur:Le()}],brightness:[{brightness:[js,_t,At]}],contrast:[{contrast:[js,_t,At]}],"drop-shadow":[{"drop-shadow":["","none",y,_h,Ah]}],"drop-shadow-color":[{"drop-shadow":de()}],grayscale:[{grayscale:["",js,_t,At]}],"hue-rotate":[{"hue-rotate":[js,_t,At]}],invert:[{invert:["",js,_t,At]}],saturate:[{saturate:[js,_t,At]}],sepia:[{sepia:["",js,_t,At]}],"backdrop-filter":[{"backdrop-filter":["","none",_t,At]}],"backdrop-blur":[{"backdrop-blur":Le()}],"backdrop-brightness":[{"backdrop-brightness":[js,_t,At]}],"backdrop-contrast":[{"backdrop-contrast":[js,_t,At]}],"backdrop-grayscale":[{"backdrop-grayscale":["",js,_t,At]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[js,_t,At]}],"backdrop-invert":[{"backdrop-invert":["",js,_t,At]}],"backdrop-opacity":[{"backdrop-opacity":[js,_t,At]}],"backdrop-saturate":[{"backdrop-saturate":[js,_t,At]}],"backdrop-sepia":[{"backdrop-sepia":["",js,_t,At]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":_()}],"border-spacing-x":[{"border-spacing-x":_()}],"border-spacing-y":[{"border-spacing-y":_()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",_t,At]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[js,"initial",_t,At]}],ease:[{ease:["linear","initial",C,_t,At]}],delay:[{delay:[js,_t,At]}],animate:[{animate:["none",k,_t,At]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[N,_t,At]}],"perspective-origin":[{"perspective-origin":F()}],rotate:[{rotate:ve()}],"rotate-x":[{"rotate-x":ve()}],"rotate-y":[{"rotate-y":ve()}],"rotate-z":[{"rotate-z":ve()}],scale:[{scale:oe()}],"scale-x":[{"scale-x":oe()}],"scale-y":[{"scale-y":oe()}],"scale-z":[{"scale-z":oe()}],"scale-3d":["scale-3d"],skew:[{skew:Pe()}],"skew-x":[{"skew-x":Pe()}],"skew-y":[{"skew-y":Pe()}],transform:[{transform:[_t,At,"","none","gpu","cpu"]}],"transform-origin":[{origin:F()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:Xe()}],"translate-x":[{"translate-x":Xe()}],"translate-y":[{"translate-y":Xe()}],"translate-z":[{"translate-z":Xe()}],"translate-none":["translate-none"],accent:[{accent:de()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:de()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",_t,At]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":_()}],"scroll-mx":[{"scroll-mx":_()}],"scroll-my":[{"scroll-my":_()}],"scroll-ms":[{"scroll-ms":_()}],"scroll-me":[{"scroll-me":_()}],"scroll-mt":[{"scroll-mt":_()}],"scroll-mr":[{"scroll-mr":_()}],"scroll-mb":[{"scroll-mb":_()}],"scroll-ml":[{"scroll-ml":_()}],"scroll-p":[{"scroll-p":_()}],"scroll-px":[{"scroll-px":_()}],"scroll-py":[{"scroll-py":_()}],"scroll-ps":[{"scroll-ps":_()}],"scroll-pe":[{"scroll-pe":_()}],"scroll-pt":[{"scroll-pt":_()}],"scroll-pr":[{"scroll-pr":_()}],"scroll-pb":[{"scroll-pb":_()}],"scroll-pl":[{"scroll-pl":_()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",_t,At]}],fill:[{fill:["none",...de()]}],"stroke-w":[{stroke:[js,lu,uo,b0]}],stroke:[{stroke:["none",...de()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},CD=nD(SD);function Ze(...t){return CD(qS(t))}const Ub=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,Vb=qS,Sv=(t,s)=>a=>{var r;if(s?.variants==null)return Vb(t,a?.class,a?.className);const{variants:i,defaultVariants:o}=s,c=Object.keys(i).map(x=>{const h=a?.[x],p=o?.[x];if(h===null)return null;const g=Ub(h)||Ub(p);return i[x][g]}),u=a&&Object.entries(a).reduce((x,h)=>{let[p,g]=h;return g===void 0||(x[p]=g),x},{}),f=s==null||(r=s.compoundVariants)===null||r===void 0?void 0:r.reduce((x,h)=>{let{class:p,className:g,...y}=h;return Object.entries(y).every(b=>{let[N,S]=b;return Array.isArray(S)?S.includes({...o,...u}[N]):{...o,...u}[N]===S})?[...x,p,g]:x},[]);return Vb(t,c,f,a?.class,a?.className)},pg=Sv("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function R({className:t,variant:s,size:a,asChild:r=!1,...i}){const o=r?uv:"button";return e.jsx(o,{"data-slot":"button",className:Ze(pg({variant:s,size:a,className:t})),...i})}function K({className:t,...s}){return e.jsx("div",{"data-slot":"card",className:Ze("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",t),...s})}function xe({className:t,...s}){return e.jsx("div",{"data-slot":"card-header",className:Ze("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",t),...s})}function pe({className:t,...s}){return e.jsx("div",{"data-slot":"card-title",className:Ze("leading-none font-semibold",t),...s})}function ot({className:t,...s}){return e.jsx("div",{"data-slot":"card-description",className:Ze("text-muted-foreground text-sm",t),...s})}function Y({className:t,...s}){return e.jsx("div",{"data-slot":"card-content",className:Ze("px-6",t),...s})}function wo({className:t,...s}){return e.jsx("div",{"data-slot":"card-footer",className:Ze("flex items-center px-6 [.border-t]:pt-6",t),...s})}function me({className:t,type:s,...a}){return e.jsx("input",{type:s,"data-slot":"input",className:Ze("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",t),...a})}var TD="Label",r4=v.forwardRef((t,s)=>e.jsx(ma.label,{...t,ref:s,onMouseDown:a=>{a.target.closest("button, input, select, textarea")||(t.onMouseDown?.(a),!a.defaultPrevented&&a.detail>1&&a.preventDefault())}}));r4.displayName=TD;var ED=r4;function te({className:t,...s}){return e.jsx(ED,{"data-slot":"label",className:Ze("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",t),...s})}const Ff=xt.createContext();function Bt({open:t,onOpenChange:s,children:a,...r}){const[i,o]=v.useState(t||!1);v.useEffect(()=>{t!==void 0&&o(t)},[t]);const c=u=>{o(u),s?.(u)};return e.jsx(Ff.Provider,{value:{isOpen:i,onOpenChange:c},children:a})}function wa({children:t,asChild:s,...a}){const{onOpenChange:r}=xt.useContext(Ff),i=()=>{r?.(!0)};return s&&xt.isValidElement(t)?xt.cloneElement(t,{onClick:i,...a}):e.jsx("button",{onClick:i,...a,children:t})}function kD({children:t}){return t}function AD({className:t,...s}){const{isOpen:a,onOpenChange:r}=xt.useContext(Ff);return a?e.jsx("div",{className:Ze("fixed inset-0 z-50 bg-black/50 backdrop-blur-sm",t),onClick:()=>r?.(!1),...s}):null}function zt({className:t,children:s,showCloseButton:a=!0,...r}){const{isOpen:i,onOpenChange:o}=xt.useContext(Ff);return i?e.jsxs(kD,{children:[e.jsx(AD,{}),e.jsxs("div",{className:Ze("fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border bg-white p-6 shadow-lg duration-200 sm:max-w-lg dark:bg-gray-800",t),onClick:c=>c.stopPropagation(),...r,children:[s,a&&e.jsxs("button",{className:"absolute top-4 right-4 rounded-sm opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-none disabled:pointer-events-none",onClick:()=>o?.(!1),children:[e.jsx(jr,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Close"})]})]})]}):null}function Ut({className:t,...s}){return e.jsx("div",{className:Ze("flex flex-col gap-2 text-center sm:text-left",t),...s})}function Ps({className:t,...s}){return e.jsx("div",{className:Ze("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",t),...s})}function Vt({className:t,...s}){return e.jsx("h2",{className:Ze("text-lg leading-none font-semibold",t),...s})}function es({className:t,...s}){return e.jsx("p",{className:Ze("text-gray-600 dark:text-gray-400 text-sm",t),...s})}function n4(t,s){return function(){return t.apply(s,arguments)}}const{toString:_D}=Object.prototype,{getPrototypeOf:Cv}=Object,{iterator:Lf,toStringTag:i4}=Symbol,If=(t=>s=>{const a=_D.call(s);return t[a]||(t[a]=a.slice(8,-1).toLowerCase())})(Object.create(null)),si=t=>(t=t.toLowerCase(),s=>If(s)===t),Bf=t=>s=>typeof s===t,{isArray:rd}=Array,Xc=Bf("undefined");function Qu(t){return t!==null&&!Xc(t)&&t.constructor!==null&&!Xc(t.constructor)&&Xr(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const l4=si("ArrayBuffer");function DD(t){let s;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?s=ArrayBuffer.isView(t):s=t&&t.buffer&&l4(t.buffer),s}const OD=Bf("string"),Xr=Bf("function"),o4=Bf("number"),Zu=t=>t!==null&&typeof t=="object",RD=t=>t===!0||t===!1,qh=t=>{if(If(t)!=="object")return!1;const s=Cv(t);return(s===null||s===Object.prototype||Object.getPrototypeOf(s)===null)&&!(i4 in t)&&!(Lf in t)},PD=t=>{if(!Zu(t)||Qu(t))return!1;try{return Object.keys(t).length===0&&Object.getPrototypeOf(t)===Object.prototype}catch{return!1}},MD=si("Date"),FD=si("File"),LD=si("Blob"),ID=si("FileList"),BD=t=>Zu(t)&&Xr(t.pipe),zD=t=>{let s;return t&&(typeof FormData=="function"&&t instanceof FormData||Xr(t.append)&&((s=If(t))==="formdata"||s==="object"&&Xr(t.toString)&&t.toString()==="[object FormData]"))},UD=si("URLSearchParams"),[VD,$D,HD,WD]=["ReadableStream","Request","Response","Headers"].map(si),GD=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Ju(t,s,{allOwnKeys:a=!1}={}){if(t===null||typeof t>"u")return;let r,i;if(typeof t!="object"&&(t=[t]),rd(t))for(r=0,i=t.length;r<i;r++)s.call(null,t[r],r,t);else{if(Qu(t))return;const o=a?Object.getOwnPropertyNames(t):Object.keys(t),c=o.length;let u;for(r=0;r<c;r++)u=o[r],s.call(null,t[u],u,t)}}function c4(t,s){if(Qu(t))return null;s=s.toLowerCase();const a=Object.keys(t);let r=a.length,i;for(;r-- >0;)if(i=a[r],s===i.toLowerCase())return i;return null}const po=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,d4=t=>!Xc(t)&&t!==po;function gg(){const{caseless:t,skipUndefined:s}=d4(this)&&this||{},a={},r=(i,o)=>{const c=t&&c4(a,o)||o;qh(a[c])&&qh(i)?a[c]=gg(a[c],i):qh(i)?a[c]=gg({},i):rd(i)?a[c]=i.slice():(!s||!Xc(i))&&(a[c]=i)};for(let i=0,o=arguments.length;i<o;i++)arguments[i]&&Ju(arguments[i],r);return a}const qD=(t,s,a,{allOwnKeys:r}={})=>(Ju(s,(i,o)=>{a&&Xr(i)?t[o]=n4(i,a):t[o]=i},{allOwnKeys:r}),t),KD=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),YD=(t,s,a,r)=>{t.prototype=Object.create(s.prototype,r),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:s.prototype}),a&&Object.assign(t.prototype,a)},XD=(t,s,a,r)=>{let i,o,c;const u={};if(s=s||{},t==null)return s;do{for(i=Object.getOwnPropertyNames(t),o=i.length;o-- >0;)c=i[o],(!r||r(c,t,s))&&!u[c]&&(s[c]=t[c],u[c]=!0);t=a!==!1&&Cv(t)}while(t&&(!a||a(t,s))&&t!==Object.prototype);return s},QD=(t,s,a)=>{t=String(t),(a===void 0||a>t.length)&&(a=t.length),a-=s.length;const r=t.indexOf(s,a);return r!==-1&&r===a},ZD=t=>{if(!t)return null;if(rd(t))return t;let s=t.length;if(!o4(s))return null;const a=new Array(s);for(;s-- >0;)a[s]=t[s];return a},JD=(t=>s=>t&&s instanceof t)(typeof Uint8Array<"u"&&Cv(Uint8Array)),eO=(t,s)=>{const r=(t&&t[Lf]).call(t);let i;for(;(i=r.next())&&!i.done;){const o=i.value;s.call(t,o[0],o[1])}},tO=(t,s)=>{let a;const r=[];for(;(a=t.exec(s))!==null;)r.push(a);return r},sO=si("HTMLFormElement"),aO=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(a,r,i){return r.toUpperCase()+i}),$b=(({hasOwnProperty:t})=>(s,a)=>t.call(s,a))(Object.prototype),rO=si("RegExp"),u4=(t,s)=>{const a=Object.getOwnPropertyDescriptors(t),r={};Ju(a,(i,o)=>{let c;(c=s(i,o,t))!==!1&&(r[o]=c||i)}),Object.defineProperties(t,r)},nO=t=>{u4(t,(s,a)=>{if(Xr(t)&&["arguments","caller","callee"].indexOf(a)!==-1)return!1;const r=t[a];if(Xr(r)){if(s.enumerable=!1,"writable"in s){s.writable=!1;return}s.set||(s.set=()=>{throw Error("Can not rewrite read-only method '"+a+"'")})}})},iO=(t,s)=>{const a={},r=i=>{i.forEach(o=>{a[o]=!0})};return rd(t)?r(t):r(String(t).split(s)),a},lO=()=>{},oO=(t,s)=>t!=null&&Number.isFinite(t=+t)?t:s;function cO(t){return!!(t&&Xr(t.append)&&t[i4]==="FormData"&&t[Lf])}const dO=t=>{const s=new Array(10),a=(r,i)=>{if(Zu(r)){if(s.indexOf(r)>=0)return;if(Qu(r))return r;if(!("toJSON"in r)){s[i]=r;const o=rd(r)?[]:{};return Ju(r,(c,u)=>{const f=a(c,i+1);!Xc(f)&&(o[u]=f)}),s[i]=void 0,o}}return r};return a(t,0)},uO=si("AsyncFunction"),mO=t=>t&&(Zu(t)||Xr(t))&&Xr(t.then)&&Xr(t.catch),m4=((t,s)=>t?setImmediate:s?((a,r)=>(po.addEventListener("message",({source:i,data:o})=>{i===po&&o===a&&r.length&&r.shift()()},!1),i=>{r.push(i),po.postMessage(a,"*")}))(`axios@${Math.random()}`,[]):a=>setTimeout(a))(typeof setImmediate=="function",Xr(po.postMessage)),hO=typeof queueMicrotask<"u"?queueMicrotask.bind(po):typeof process<"u"&&process.nextTick||m4,fO=t=>t!=null&&Xr(t[Lf]),Ve={isArray:rd,isArrayBuffer:l4,isBuffer:Qu,isFormData:zD,isArrayBufferView:DD,isString:OD,isNumber:o4,isBoolean:RD,isObject:Zu,isPlainObject:qh,isEmptyObject:PD,isReadableStream:VD,isRequest:$D,isResponse:HD,isHeaders:WD,isUndefined:Xc,isDate:MD,isFile:FD,isBlob:LD,isRegExp:rO,isFunction:Xr,isStream:BD,isURLSearchParams:UD,isTypedArray:JD,isFileList:ID,forEach:Ju,merge:gg,extend:qD,trim:GD,stripBOM:KD,inherits:YD,toFlatObject:XD,kindOf:If,kindOfTest:si,endsWith:QD,toArray:ZD,forEachEntry:eO,matchAll:tO,isHTMLForm:sO,hasOwnProperty:$b,hasOwnProp:$b,reduceDescriptors:u4,freezeMethods:nO,toObjectSet:iO,toCamelCase:aO,noop:lO,toFiniteNumber:oO,findKey:c4,global:po,isContextDefined:d4,isSpecCompliantForm:cO,toJSONObject:dO,isAsyncFn:uO,isThenable:mO,setImmediate:m4,asap:hO,isIterable:fO};function ds(t,s,a,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",s&&(this.code=s),a&&(this.config=a),r&&(this.request=r),i&&(this.response=i,this.status=i.status?i.status:null)}Ve.inherits(ds,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Ve.toJSONObject(this.config),code:this.code,status:this.status}}});const h4=ds.prototype,f4={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{f4[t]={value:t}});Object.defineProperties(ds,f4);Object.defineProperty(h4,"isAxiosError",{value:!0});ds.from=(t,s,a,r,i,o)=>{const c=Object.create(h4);Ve.toFlatObject(t,c,function(h){return h!==Error.prototype},x=>x!=="isAxiosError");const u=t&&t.message?t.message:"Error",f=s==null&&t?t.code:s;return ds.call(c,u,f,a,r,i),t&&c.cause==null&&Object.defineProperty(c,"cause",{value:t,configurable:!0}),c.name=t&&t.name||"Error",o&&Object.assign(c,o),c};const xO=null;function vg(t){return Ve.isPlainObject(t)||Ve.isArray(t)}function x4(t){return Ve.endsWith(t,"[]")?t.slice(0,-2):t}function Hb(t,s,a){return t?t.concat(s).map(function(i,o){return i=x4(i),!a&&o?"["+i+"]":i}).join(a?".":""):s}function pO(t){return Ve.isArray(t)&&!t.some(vg)}const gO=Ve.toFlatObject(Ve,{},null,function(s){return/^is[A-Z]/.test(s)});function zf(t,s,a){if(!Ve.isObject(t))throw new TypeError("target must be an object");s=s||new FormData,a=Ve.toFlatObject(a,{metaTokens:!0,dots:!1,indexes:!1},!1,function(N,S){return!Ve.isUndefined(S[N])});const r=a.metaTokens,i=a.visitor||h,o=a.dots,c=a.indexes,f=(a.Blob||typeof Blob<"u"&&Blob)&&Ve.isSpecCompliantForm(s);if(!Ve.isFunction(i))throw new TypeError("visitor must be a function");function x(b){if(b===null)return"";if(Ve.isDate(b))return b.toISOString();if(Ve.isBoolean(b))return b.toString();if(!f&&Ve.isBlob(b))throw new ds("Blob is not supported. Use a Buffer instead.");return Ve.isArrayBuffer(b)||Ve.isTypedArray(b)?f&&typeof Blob=="function"?new Blob([b]):Buffer.from(b):b}function h(b,N,S){let C=b;if(b&&!S&&typeof b=="object"){if(Ve.endsWith(N,"{}"))N=r?N:N.slice(0,-2),b=JSON.stringify(b);else if(Ve.isArray(b)&&pO(b)||(Ve.isFileList(b)||Ve.endsWith(N,"[]"))&&(C=Ve.toArray(b)))return N=x4(N),C.forEach(function(A,G){!(Ve.isUndefined(A)||A===null)&&s.append(c===!0?Hb([N],G,o):c===null?N:N+"[]",x(A))}),!1}return vg(b)?!0:(s.append(Hb(S,N,o),x(b)),!1)}const p=[],g=Object.assign(gO,{defaultVisitor:h,convertValue:x,isVisitable:vg});function y(b,N){if(!Ve.isUndefined(b)){if(p.indexOf(b)!==-1)throw Error("Circular reference detected in "+N.join("."));p.push(b),Ve.forEach(b,function(C,k){(!(Ve.isUndefined(C)||C===null)&&i.call(s,C,Ve.isString(k)?k.trim():k,N,g))===!0&&y(C,N?N.concat(k):[k])}),p.pop()}}if(!Ve.isObject(t))throw new TypeError("data must be an object");return y(t),s}function Wb(t){const s={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(r){return s[r]})}function Tv(t,s){this._pairs=[],t&&zf(t,this,s)}const p4=Tv.prototype;p4.append=function(s,a){this._pairs.push([s,a])};p4.toString=function(s){const a=s?function(r){return s.call(this,r,Wb)}:Wb;return this._pairs.map(function(i){return a(i[0])+"="+a(i[1])},"").join("&")};function vO(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function g4(t,s,a){if(!s)return t;const r=a&&a.encode||vO;Ve.isFunction(a)&&(a={serialize:a});const i=a&&a.serialize;let o;if(i?o=i(s,a):o=Ve.isURLSearchParams(s)?s.toString():new Tv(s,a).toString(r),o){const c=t.indexOf("#");c!==-1&&(t=t.slice(0,c)),t+=(t.indexOf("?")===-1?"?":"&")+o}return t}class Gb{constructor(){this.handlers=[]}use(s,a,r){return this.handlers.push({fulfilled:s,rejected:a,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(s){this.handlers[s]&&(this.handlers[s]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(s){Ve.forEach(this.handlers,function(r){r!==null&&s(r)})}}const v4={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},jO=typeof URLSearchParams<"u"?URLSearchParams:Tv,yO=typeof FormData<"u"?FormData:null,NO=typeof Blob<"u"?Blob:null,bO={isBrowser:!0,classes:{URLSearchParams:jO,FormData:yO,Blob:NO},protocols:["http","https","file","blob","url","data"]},Ev=typeof window<"u"&&typeof document<"u",jg=typeof navigator=="object"&&navigator||void 0,wO=Ev&&(!jg||["ReactNative","NativeScript","NS"].indexOf(jg.product)<0),SO=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",CO=Ev&&window.location.href||"http://localhost",TO=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Ev,hasStandardBrowserEnv:wO,hasStandardBrowserWebWorkerEnv:SO,navigator:jg,origin:CO},Symbol.toStringTag,{value:"Module"})),Tr={...TO,...bO};function EO(t,s){return zf(t,new Tr.classes.URLSearchParams,{visitor:function(a,r,i,o){return Tr.isNode&&Ve.isBuffer(a)?(this.append(r,a.toString("base64")),!1):o.defaultVisitor.apply(this,arguments)},...s})}function kO(t){return Ve.matchAll(/\w+|\[(\w*)]/g,t).map(s=>s[0]==="[]"?"":s[1]||s[0])}function AO(t){const s={},a=Object.keys(t);let r;const i=a.length;let o;for(r=0;r<i;r++)o=a[r],s[o]=t[o];return s}function j4(t){function s(a,r,i,o){let c=a[o++];if(c==="__proto__")return!0;const u=Number.isFinite(+c),f=o>=a.length;return c=!c&&Ve.isArray(i)?i.length:c,f?(Ve.hasOwnProp(i,c)?i[c]=[i[c],r]:i[c]=r,!u):((!i[c]||!Ve.isObject(i[c]))&&(i[c]=[]),s(a,r,i[c],o)&&Ve.isArray(i[c])&&(i[c]=AO(i[c])),!u)}if(Ve.isFormData(t)&&Ve.isFunction(t.entries)){const a={};return Ve.forEachEntry(t,(r,i)=>{s(kO(r),i,a,0)}),a}return null}function _O(t,s,a){if(Ve.isString(t))try{return(s||JSON.parse)(t),Ve.trim(t)}catch(r){if(r.name!=="SyntaxError")throw r}return(a||JSON.stringify)(t)}const em={transitional:v4,adapter:["xhr","http","fetch"],transformRequest:[function(s,a){const r=a.getContentType()||"",i=r.indexOf("application/json")>-1,o=Ve.isObject(s);if(o&&Ve.isHTMLForm(s)&&(s=new FormData(s)),Ve.isFormData(s))return i?JSON.stringify(j4(s)):s;if(Ve.isArrayBuffer(s)||Ve.isBuffer(s)||Ve.isStream(s)||Ve.isFile(s)||Ve.isBlob(s)||Ve.isReadableStream(s))return s;if(Ve.isArrayBufferView(s))return s.buffer;if(Ve.isURLSearchParams(s))return a.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),s.toString();let u;if(o){if(r.indexOf("application/x-www-form-urlencoded")>-1)return EO(s,this.formSerializer).toString();if((u=Ve.isFileList(s))||r.indexOf("multipart/form-data")>-1){const f=this.env&&this.env.FormData;return zf(u?{"files[]":s}:s,f&&new f,this.formSerializer)}}return o||i?(a.setContentType("application/json",!1),_O(s)):s}],transformResponse:[function(s){const a=this.transitional||em.transitional,r=a&&a.forcedJSONParsing,i=this.responseType==="json";if(Ve.isResponse(s)||Ve.isReadableStream(s))return s;if(s&&Ve.isString(s)&&(r&&!this.responseType||i)){const c=!(a&&a.silentJSONParsing)&&i;try{return JSON.parse(s,this.parseReviver)}catch(u){if(c)throw u.name==="SyntaxError"?ds.from(u,ds.ERR_BAD_RESPONSE,this,null,this.response):u}}return s}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Tr.classes.FormData,Blob:Tr.classes.Blob},validateStatus:function(s){return s>=200&&s<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Ve.forEach(["delete","get","head","post","put","patch"],t=>{em.headers[t]={}});const DO=Ve.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),OO=t=>{const s={};let a,r,i;return t&&t.split(`
`).forEach(function(c){i=c.indexOf(":"),a=c.substring(0,i).trim().toLowerCase(),r=c.substring(i+1).trim(),!(!a||s[a]&&DO[a])&&(a==="set-cookie"?s[a]?s[a].push(r):s[a]=[r]:s[a]=s[a]?s[a]+", "+r:r)}),s},qb=Symbol("internals");function ou(t){return t&&String(t).trim().toLowerCase()}function Kh(t){return t===!1||t==null?t:Ve.isArray(t)?t.map(Kh):String(t)}function RO(t){const s=Object.create(null),a=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=a.exec(t);)s[r[1]]=r[2];return s}const PO=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function w0(t,s,a,r,i){if(Ve.isFunction(r))return r.call(this,s,a);if(i&&(s=a),!!Ve.isString(s)){if(Ve.isString(r))return s.indexOf(r)!==-1;if(Ve.isRegExp(r))return r.test(s)}}function MO(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(s,a,r)=>a.toUpperCase()+r)}function FO(t,s){const a=Ve.toCamelCase(" "+s);["get","set","has"].forEach(r=>{Object.defineProperty(t,r+a,{value:function(i,o,c){return this[r].call(this,s,i,o,c)},configurable:!0})})}let Qr=class{constructor(s){s&&this.set(s)}set(s,a,r){const i=this;function o(u,f,x){const h=ou(f);if(!h)throw new Error("header name must be a non-empty string");const p=Ve.findKey(i,h);(!p||i[p]===void 0||x===!0||x===void 0&&i[p]!==!1)&&(i[p||f]=Kh(u))}const c=(u,f)=>Ve.forEach(u,(x,h)=>o(x,h,f));if(Ve.isPlainObject(s)||s instanceof this.constructor)c(s,a);else if(Ve.isString(s)&&(s=s.trim())&&!PO(s))c(OO(s),a);else if(Ve.isObject(s)&&Ve.isIterable(s)){let u={},f,x;for(const h of s){if(!Ve.isArray(h))throw TypeError("Object iterator must return a key-value pair");u[x=h[0]]=(f=u[x])?Ve.isArray(f)?[...f,h[1]]:[f,h[1]]:h[1]}c(u,a)}else s!=null&&o(a,s,r);return this}get(s,a){if(s=ou(s),s){const r=Ve.findKey(this,s);if(r){const i=this[r];if(!a)return i;if(a===!0)return RO(i);if(Ve.isFunction(a))return a.call(this,i,r);if(Ve.isRegExp(a))return a.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(s,a){if(s=ou(s),s){const r=Ve.findKey(this,s);return!!(r&&this[r]!==void 0&&(!a||w0(this,this[r],r,a)))}return!1}delete(s,a){const r=this;let i=!1;function o(c){if(c=ou(c),c){const u=Ve.findKey(r,c);u&&(!a||w0(r,r[u],u,a))&&(delete r[u],i=!0)}}return Ve.isArray(s)?s.forEach(o):o(s),i}clear(s){const a=Object.keys(this);let r=a.length,i=!1;for(;r--;){const o=a[r];(!s||w0(this,this[o],o,s,!0))&&(delete this[o],i=!0)}return i}normalize(s){const a=this,r={};return Ve.forEach(this,(i,o)=>{const c=Ve.findKey(r,o);if(c){a[c]=Kh(i),delete a[o];return}const u=s?MO(o):String(o).trim();u!==o&&delete a[o],a[u]=Kh(i),r[u]=!0}),this}concat(...s){return this.constructor.concat(this,...s)}toJSON(s){const a=Object.create(null);return Ve.forEach(this,(r,i)=>{r!=null&&r!==!1&&(a[i]=s&&Ve.isArray(r)?r.join(", "):r)}),a}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([s,a])=>s+": "+a).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(s){return s instanceof this?s:new this(s)}static concat(s,...a){const r=new this(s);return a.forEach(i=>r.set(i)),r}static accessor(s){const r=(this[qb]=this[qb]={accessors:{}}).accessors,i=this.prototype;function o(c){const u=ou(c);r[u]||(FO(i,c),r[u]=!0)}return Ve.isArray(s)?s.forEach(o):o(s),this}};Qr.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Ve.reduceDescriptors(Qr.prototype,({value:t},s)=>{let a=s[0].toUpperCase()+s.slice(1);return{get:()=>t,set(r){this[a]=r}}});Ve.freezeMethods(Qr);function S0(t,s){const a=this||em,r=s||a,i=Qr.from(r.headers);let o=r.data;return Ve.forEach(t,function(u){o=u.call(a,o,i.normalize(),s?s.status:void 0)}),i.normalize(),o}function y4(t){return!!(t&&t.__CANCEL__)}function nd(t,s,a){ds.call(this,t??"canceled",ds.ERR_CANCELED,s,a),this.name="CanceledError"}Ve.inherits(nd,ds,{__CANCEL__:!0});function N4(t,s,a){const r=a.config.validateStatus;!a.status||!r||r(a.status)?t(a):s(new ds("Request failed with status code "+a.status,[ds.ERR_BAD_REQUEST,ds.ERR_BAD_RESPONSE][Math.floor(a.status/100)-4],a.config,a.request,a))}function LO(t){const s=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return s&&s[1]||""}function IO(t,s){t=t||10;const a=new Array(t),r=new Array(t);let i=0,o=0,c;return s=s!==void 0?s:1e3,function(f){const x=Date.now(),h=r[o];c||(c=x),a[i]=f,r[i]=x;let p=o,g=0;for(;p!==i;)g+=a[p++],p=p%t;if(i=(i+1)%t,i===o&&(o=(o+1)%t),x-c<s)return;const y=h&&x-h;return y?Math.round(g*1e3/y):void 0}}function BO(t,s){let a=0,r=1e3/s,i,o;const c=(x,h=Date.now())=>{a=h,i=null,o&&(clearTimeout(o),o=null),t(...x)};return[(...x)=>{const h=Date.now(),p=h-a;p>=r?c(x,h):(i=x,o||(o=setTimeout(()=>{o=null,c(i)},r-p)))},()=>i&&c(i)]}const cf=(t,s,a=3)=>{let r=0;const i=IO(50,250);return BO(o=>{const c=o.loaded,u=o.lengthComputable?o.total:void 0,f=c-r,x=i(f),h=c<=u;r=c;const p={loaded:c,total:u,progress:u?c/u:void 0,bytes:f,rate:x||void 0,estimated:x&&u&&h?(u-c)/x:void 0,event:o,lengthComputable:u!=null,[s?"download":"upload"]:!0};t(p)},a)},Kb=(t,s)=>{const a=t!=null;return[r=>s[0]({lengthComputable:a,total:t,loaded:r}),s[1]]},Yb=t=>(...s)=>Ve.asap(()=>t(...s)),zO=Tr.hasStandardBrowserEnv?((t,s)=>a=>(a=new URL(a,Tr.origin),t.protocol===a.protocol&&t.host===a.host&&(s||t.port===a.port)))(new URL(Tr.origin),Tr.navigator&&/(msie|trident)/i.test(Tr.navigator.userAgent)):()=>!0,UO=Tr.hasStandardBrowserEnv?{write(t,s,a,r,i,o){const c=[t+"="+encodeURIComponent(s)];Ve.isNumber(a)&&c.push("expires="+new Date(a).toGMTString()),Ve.isString(r)&&c.push("path="+r),Ve.isString(i)&&c.push("domain="+i),o===!0&&c.push("secure"),document.cookie=c.join("; ")},read(t){const s=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return s?decodeURIComponent(s[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function VO(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function $O(t,s){return s?t.replace(/\/?\/$/,"")+"/"+s.replace(/^\/+/,""):t}function b4(t,s,a){let r=!VO(s);return t&&(r||a==!1)?$O(t,s):s}const Xb=t=>t instanceof Qr?{...t}:t;function Do(t,s){s=s||{};const a={};function r(x,h,p,g){return Ve.isPlainObject(x)&&Ve.isPlainObject(h)?Ve.merge.call({caseless:g},x,h):Ve.isPlainObject(h)?Ve.merge({},h):Ve.isArray(h)?h.slice():h}function i(x,h,p,g){if(Ve.isUndefined(h)){if(!Ve.isUndefined(x))return r(void 0,x,p,g)}else return r(x,h,p,g)}function o(x,h){if(!Ve.isUndefined(h))return r(void 0,h)}function c(x,h){if(Ve.isUndefined(h)){if(!Ve.isUndefined(x))return r(void 0,x)}else return r(void 0,h)}function u(x,h,p){if(p in s)return r(x,h);if(p in t)return r(void 0,x)}const f={url:o,method:o,data:o,baseURL:c,transformRequest:c,transformResponse:c,paramsSerializer:c,timeout:c,timeoutMessage:c,withCredentials:c,withXSRFToken:c,adapter:c,responseType:c,xsrfCookieName:c,xsrfHeaderName:c,onUploadProgress:c,onDownloadProgress:c,decompress:c,maxContentLength:c,maxBodyLength:c,beforeRedirect:c,transport:c,httpAgent:c,httpsAgent:c,cancelToken:c,socketPath:c,responseEncoding:c,validateStatus:u,headers:(x,h,p)=>i(Xb(x),Xb(h),p,!0)};return Ve.forEach(Object.keys({...t,...s}),function(h){const p=f[h]||i,g=p(t[h],s[h],h);Ve.isUndefined(g)&&p!==u||(a[h]=g)}),a}const w4=t=>{const s=Do({},t);let{data:a,withXSRFToken:r,xsrfHeaderName:i,xsrfCookieName:o,headers:c,auth:u}=s;if(s.headers=c=Qr.from(c),s.url=g4(b4(s.baseURL,s.url,s.allowAbsoluteUrls),t.params,t.paramsSerializer),u&&c.set("Authorization","Basic "+btoa((u.username||"")+":"+(u.password?unescape(encodeURIComponent(u.password)):""))),Ve.isFormData(a)){if(Tr.hasStandardBrowserEnv||Tr.hasStandardBrowserWebWorkerEnv)c.setContentType(void 0);else if(Ve.isFunction(a.getHeaders)){const f=a.getHeaders(),x=["content-type","content-length"];Object.entries(f).forEach(([h,p])=>{x.includes(h.toLowerCase())&&c.set(h,p)})}}if(Tr.hasStandardBrowserEnv&&(r&&Ve.isFunction(r)&&(r=r(s)),r||r!==!1&&zO(s.url))){const f=i&&o&&UO.read(o);f&&c.set(i,f)}return s},HO=typeof XMLHttpRequest<"u",WO=HO&&function(t){return new Promise(function(a,r){const i=w4(t);let o=i.data;const c=Qr.from(i.headers).normalize();let{responseType:u,onUploadProgress:f,onDownloadProgress:x}=i,h,p,g,y,b;function N(){y&&y(),b&&b(),i.cancelToken&&i.cancelToken.unsubscribe(h),i.signal&&i.signal.removeEventListener("abort",h)}let S=new XMLHttpRequest;S.open(i.method.toUpperCase(),i.url,!0),S.timeout=i.timeout;function C(){if(!S)return;const A=Qr.from("getAllResponseHeaders"in S&&S.getAllResponseHeaders()),F={data:!u||u==="text"||u==="json"?S.responseText:S.response,status:S.status,statusText:S.statusText,headers:A,config:t,request:S};N4(function(T){a(T),N()},function(T){r(T),N()},F),S=null}"onloadend"in S?S.onloadend=C:S.onreadystatechange=function(){!S||S.readyState!==4||S.status===0&&!(S.responseURL&&S.responseURL.indexOf("file:")===0)||setTimeout(C)},S.onabort=function(){S&&(r(new ds("Request aborted",ds.ECONNABORTED,t,S)),S=null)},S.onerror=function(G){const F=G&&G.message?G.message:"Network Error",E=new ds(F,ds.ERR_NETWORK,t,S);E.event=G||null,r(E),S=null},S.ontimeout=function(){let G=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const F=i.transitional||v4;i.timeoutErrorMessage&&(G=i.timeoutErrorMessage),r(new ds(G,F.clarifyTimeoutError?ds.ETIMEDOUT:ds.ECONNABORTED,t,S)),S=null},o===void 0&&c.setContentType(null),"setRequestHeader"in S&&Ve.forEach(c.toJSON(),function(G,F){S.setRequestHeader(F,G)}),Ve.isUndefined(i.withCredentials)||(S.withCredentials=!!i.withCredentials),u&&u!=="json"&&(S.responseType=i.responseType),x&&([g,b]=cf(x,!0),S.addEventListener("progress",g)),f&&S.upload&&([p,y]=cf(f),S.upload.addEventListener("progress",p),S.upload.addEventListener("loadend",y)),(i.cancelToken||i.signal)&&(h=A=>{S&&(r(!A||A.type?new nd(null,t,S):A),S.abort(),S=null)},i.cancelToken&&i.cancelToken.subscribe(h),i.signal&&(i.signal.aborted?h():i.signal.addEventListener("abort",h)));const k=LO(i.url);if(k&&Tr.protocols.indexOf(k)===-1){r(new ds("Unsupported protocol "+k+":",ds.ERR_BAD_REQUEST,t));return}S.send(o||null)})},GO=(t,s)=>{const{length:a}=t=t?t.filter(Boolean):[];if(s||a){let r=new AbortController,i;const o=function(x){if(!i){i=!0,u();const h=x instanceof Error?x:this.reason;r.abort(h instanceof ds?h:new nd(h instanceof Error?h.message:h))}};let c=s&&setTimeout(()=>{c=null,o(new ds(`timeout ${s} of ms exceeded`,ds.ETIMEDOUT))},s);const u=()=>{t&&(c&&clearTimeout(c),c=null,t.forEach(x=>{x.unsubscribe?x.unsubscribe(o):x.removeEventListener("abort",o)}),t=null)};t.forEach(x=>x.addEventListener("abort",o));const{signal:f}=r;return f.unsubscribe=()=>Ve.asap(u),f}},qO=function*(t,s){let a=t.byteLength;if(a<s){yield t;return}let r=0,i;for(;r<a;)i=r+s,yield t.slice(r,i),r=i},KO=async function*(t,s){for await(const a of YO(t))yield*qO(a,s)},YO=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const s=t.getReader();try{for(;;){const{done:a,value:r}=await s.read();if(a)break;yield r}}finally{await s.cancel()}},Qb=(t,s,a,r)=>{const i=KO(t,s);let o=0,c,u=f=>{c||(c=!0,r&&r(f))};return new ReadableStream({async pull(f){try{const{done:x,value:h}=await i.next();if(x){u(),f.close();return}let p=h.byteLength;if(a){let g=o+=p;a(g)}f.enqueue(new Uint8Array(h))}catch(x){throw u(x),x}},cancel(f){return u(f),i.return()}},{highWaterMark:2})},Zb=64*1024,{isFunction:Dh}=Ve,XO=(({Request:t,Response:s})=>({Request:t,Response:s}))(Ve.global),{ReadableStream:Jb,TextEncoder:ew}=Ve.global,tw=(t,...s)=>{try{return!!t(...s)}catch{return!1}},QO=t=>{t=Ve.merge.call({skipUndefined:!0},XO,t);const{fetch:s,Request:a,Response:r}=t,i=s?Dh(s):typeof fetch=="function",o=Dh(a),c=Dh(r);if(!i)return!1;const u=i&&Dh(Jb),f=i&&(typeof ew=="function"?(b=>N=>b.encode(N))(new ew):async b=>new Uint8Array(await new a(b).arrayBuffer())),x=o&&u&&tw(()=>{let b=!1;const N=new a(Tr.origin,{body:new Jb,method:"POST",get duplex(){return b=!0,"half"}}).headers.has("Content-Type");return b&&!N}),h=c&&u&&tw(()=>Ve.isReadableStream(new r("").body)),p={stream:h&&(b=>b.body)};i&&["text","arrayBuffer","blob","formData","stream"].forEach(b=>{!p[b]&&(p[b]=(N,S)=>{let C=N&&N[b];if(C)return C.call(N);throw new ds(`Response type '${b}' is not supported`,ds.ERR_NOT_SUPPORT,S)})});const g=async b=>{if(b==null)return 0;if(Ve.isBlob(b))return b.size;if(Ve.isSpecCompliantForm(b))return(await new a(Tr.origin,{method:"POST",body:b}).arrayBuffer()).byteLength;if(Ve.isArrayBufferView(b)||Ve.isArrayBuffer(b))return b.byteLength;if(Ve.isURLSearchParams(b)&&(b=b+""),Ve.isString(b))return(await f(b)).byteLength},y=async(b,N)=>{const S=Ve.toFiniteNumber(b.getContentLength());return S??g(N)};return async b=>{let{url:N,method:S,data:C,signal:k,cancelToken:A,timeout:G,onDownloadProgress:F,onUploadProgress:E,responseType:T,headers:_,withCredentials:P="same-origin",fetchOptions:z}=w4(b),V=s||fetch;T=T?(T+"").toLowerCase():"text";let W=GO([k,A&&A.toAbortSignal()],G),q=null;const B=W&&W.unsubscribe&&(()=>{W.unsubscribe()});let ae;try{if(E&&x&&S!=="get"&&S!=="head"&&(ae=await y(_,C))!==0){let ee=new a(N,{method:"POST",body:C,duplex:"half"}),L;if(Ve.isFormData(C)&&(L=ee.headers.get("content-type"))&&_.setContentType(L),ee.body){const[X,O]=Kb(ae,cf(Yb(E)));C=Qb(ee.body,Zb,X,O)}}Ve.isString(P)||(P=P?"include":"omit");const U=o&&"credentials"in a.prototype,Z={...z,signal:W,method:S.toUpperCase(),headers:_.normalize().toJSON(),body:C,duplex:"half",credentials:U?P:void 0};q=o&&new a(N,Z);let de=await(o?V(q,z):V(N,Z));const H=h&&(T==="stream"||T==="response");if(h&&(F||H&&B)){const ee={};["status","statusText","headers"].forEach(J=>{ee[J]=de[J]});const L=Ve.toFiniteNumber(de.headers.get("content-length")),[X,O]=F&&Kb(L,cf(Yb(F),!0))||[];de=new r(Qb(de.body,Zb,X,()=>{O&&O(),B&&B()}),ee)}T=T||"text";let se=await p[Ve.findKey(p,T)||"text"](de,b);return!H&&B&&B(),await new Promise((ee,L)=>{N4(ee,L,{data:se,headers:Qr.from(de.headers),status:de.status,statusText:de.statusText,config:b,request:q})})}catch(U){throw B&&B(),U&&U.name==="TypeError"&&/Load failed|fetch/i.test(U.message)?Object.assign(new ds("Network Error",ds.ERR_NETWORK,b,q),{cause:U.cause||U}):ds.from(U,U&&U.code,b,q)}}},ZO=new Map,S4=t=>{let s=t?t.env:{};const{fetch:a,Request:r,Response:i}=s,o=[r,i,a];let c=o.length,u=c,f,x,h=ZO;for(;u--;)f=o[u],x=h.get(f),x===void 0&&h.set(f,x=u?new Map:QO(s)),h=x;return x};S4();const yg={http:xO,xhr:WO,fetch:{get:S4}};Ve.forEach(yg,(t,s)=>{if(t){try{Object.defineProperty(t,"name",{value:s})}catch{}Object.defineProperty(t,"adapterName",{value:s})}});const sw=t=>`- ${t}`,JO=t=>Ve.isFunction(t)||t===null||t===!1,C4={getAdapter:(t,s)=>{t=Ve.isArray(t)?t:[t];const{length:a}=t;let r,i;const o={};for(let c=0;c<a;c++){r=t[c];let u;if(i=r,!JO(r)&&(i=yg[(u=String(r)).toLowerCase()],i===void 0))throw new ds(`Unknown adapter '${u}'`);if(i&&(Ve.isFunction(i)||(i=i.get(s))))break;o[u||"#"+c]=i}if(!i){const c=Object.entries(o).map(([f,x])=>`adapter ${f} `+(x===!1?"is not supported by the environment":"is not available in the build"));let u=a?c.length>1?`since :
`+c.map(sw).join(`
`):" "+sw(c[0]):"as no adapter specified";throw new ds("There is no suitable adapter to dispatch the request "+u,"ERR_NOT_SUPPORT")}return i},adapters:yg};function C0(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new nd(null,t)}function aw(t){return C0(t),t.headers=Qr.from(t.headers),t.data=S0.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),C4.getAdapter(t.adapter||em.adapter,t)(t).then(function(r){return C0(t),r.data=S0.call(t,t.transformResponse,r),r.headers=Qr.from(r.headers),r},function(r){return y4(r)||(C0(t),r&&r.response&&(r.response.data=S0.call(t,t.transformResponse,r.response),r.response.headers=Qr.from(r.response.headers))),Promise.reject(r)})}const T4="1.12.2",Uf={};["object","boolean","number","function","string","symbol"].forEach((t,s)=>{Uf[t]=function(r){return typeof r===t||"a"+(s<1?"n ":" ")+t}});const rw={};Uf.transitional=function(s,a,r){function i(o,c){return"[Axios v"+T4+"] Transitional option '"+o+"'"+c+(r?". "+r:"")}return(o,c,u)=>{if(s===!1)throw new ds(i(c," has been removed"+(a?" in "+a:"")),ds.ERR_DEPRECATED);return a&&!rw[c]&&(rw[c]=!0,console.warn(i(c," has been deprecated since v"+a+" and will be removed in the near future"))),s?s(o,c,u):!0}};Uf.spelling=function(s){return(a,r)=>(console.warn(`${r} is likely a misspelling of ${s}`),!0)};function eR(t,s,a){if(typeof t!="object")throw new ds("options must be an object",ds.ERR_BAD_OPTION_VALUE);const r=Object.keys(t);let i=r.length;for(;i-- >0;){const o=r[i],c=s[o];if(c){const u=t[o],f=u===void 0||c(u,o,t);if(f!==!0)throw new ds("option "+o+" must be "+f,ds.ERR_BAD_OPTION_VALUE);continue}if(a!==!0)throw new ds("Unknown option "+o,ds.ERR_BAD_OPTION)}}const Yh={assertOptions:eR,validators:Uf},li=Yh.validators;let So=class{constructor(s){this.defaults=s||{},this.interceptors={request:new Gb,response:new Gb}}async request(s,a){try{return await this._request(s,a)}catch(r){if(r instanceof Error){let i={};Error.captureStackTrace?Error.captureStackTrace(i):i=new Error;const o=i.stack?i.stack.replace(/^.+\n/,""):"";try{r.stack?o&&!String(r.stack).endsWith(o.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+o):r.stack=o}catch{}}throw r}}_request(s,a){typeof s=="string"?(a=a||{},a.url=s):a=s||{},a=Do(this.defaults,a);const{transitional:r,paramsSerializer:i,headers:o}=a;r!==void 0&&Yh.assertOptions(r,{silentJSONParsing:li.transitional(li.boolean),forcedJSONParsing:li.transitional(li.boolean),clarifyTimeoutError:li.transitional(li.boolean)},!1),i!=null&&(Ve.isFunction(i)?a.paramsSerializer={serialize:i}:Yh.assertOptions(i,{encode:li.function,serialize:li.function},!0)),a.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?a.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:a.allowAbsoluteUrls=!0),Yh.assertOptions(a,{baseUrl:li.spelling("baseURL"),withXsrfToken:li.spelling("withXSRFToken")},!0),a.method=(a.method||this.defaults.method||"get").toLowerCase();let c=o&&Ve.merge(o.common,o[a.method]);o&&Ve.forEach(["delete","get","head","post","put","patch","common"],b=>{delete o[b]}),a.headers=Qr.concat(c,o);const u=[];let f=!0;this.interceptors.request.forEach(function(N){typeof N.runWhen=="function"&&N.runWhen(a)===!1||(f=f&&N.synchronous,u.unshift(N.fulfilled,N.rejected))});const x=[];this.interceptors.response.forEach(function(N){x.push(N.fulfilled,N.rejected)});let h,p=0,g;if(!f){const b=[aw.bind(this),void 0];for(b.unshift(...u),b.push(...x),g=b.length,h=Promise.resolve(a);p<g;)h=h.then(b[p++],b[p++]);return h}g=u.length;let y=a;for(;p<g;){const b=u[p++],N=u[p++];try{y=b(y)}catch(S){N.call(this,S);break}}try{h=aw.call(this,y)}catch(b){return Promise.reject(b)}for(p=0,g=x.length;p<g;)h=h.then(x[p++],x[p++]);return h}getUri(s){s=Do(this.defaults,s);const a=b4(s.baseURL,s.url,s.allowAbsoluteUrls);return g4(a,s.params,s.paramsSerializer)}};Ve.forEach(["delete","get","head","options"],function(s){So.prototype[s]=function(a,r){return this.request(Do(r||{},{method:s,url:a,data:(r||{}).data}))}});Ve.forEach(["post","put","patch"],function(s){function a(r){return function(o,c,u){return this.request(Do(u||{},{method:s,headers:r?{"Content-Type":"multipart/form-data"}:{},url:o,data:c}))}}So.prototype[s]=a(),So.prototype[s+"Form"]=a(!0)});let tR=class E4{constructor(s){if(typeof s!="function")throw new TypeError("executor must be a function.");let a;this.promise=new Promise(function(o){a=o});const r=this;this.promise.then(i=>{if(!r._listeners)return;let o=r._listeners.length;for(;o-- >0;)r._listeners[o](i);r._listeners=null}),this.promise.then=i=>{let o;const c=new Promise(u=>{r.subscribe(u),o=u}).then(i);return c.cancel=function(){r.unsubscribe(o)},c},s(function(o,c,u){r.reason||(r.reason=new nd(o,c,u),a(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(s){if(this.reason){s(this.reason);return}this._listeners?this._listeners.push(s):this._listeners=[s]}unsubscribe(s){if(!this._listeners)return;const a=this._listeners.indexOf(s);a!==-1&&this._listeners.splice(a,1)}toAbortSignal(){const s=new AbortController,a=r=>{s.abort(r)};return this.subscribe(a),s.signal.unsubscribe=()=>this.unsubscribe(a),s.signal}static source(){let s;return{token:new E4(function(i){s=i}),cancel:s}}};function sR(t){return function(a){return t.apply(null,a)}}function aR(t){return Ve.isObject(t)&&t.isAxiosError===!0}const Ng={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Ng).forEach(([t,s])=>{Ng[s]=t});function k4(t){const s=new So(t),a=n4(So.prototype.request,s);return Ve.extend(a,So.prototype,s,{allOwnKeys:!0}),Ve.extend(a,s,null,{allOwnKeys:!0}),a.create=function(i){return k4(Do(t,i))},a}const Ia=k4(em);Ia.Axios=So;Ia.CanceledError=nd;Ia.CancelToken=tR;Ia.isCancel=y4;Ia.VERSION=T4;Ia.toFormData=zf;Ia.AxiosError=ds;Ia.Cancel=Ia.CanceledError;Ia.all=function(s){return Promise.all(s)};Ia.spread=sR;Ia.isAxiosError=aR;Ia.mergeConfig=Do;Ia.AxiosHeaders=Qr;Ia.formToJSON=t=>j4(Ve.isHTMLForm(t)?new FormData(t):t);Ia.getAdapter=C4.getAdapter;Ia.HttpStatusCode=Ng;Ia.default=Ia;const{Axios:VK,AxiosError:$K,CanceledError:HK,isCancel:WK,CancelToken:GK,VERSION:qK,all:KK,Cancel:YK,isAxiosError:XK,spread:QK,toFormData:ZK,AxiosHeaders:JK,HttpStatusCode:eY,formToJSON:tY,getAdapter:sY,mergeConfig:aY}=Ia,Ne=Ia.create({baseURL:"http://localhost:5000/api",headers:{"Content-Type":"application/json"},timeout:1e4});Ne.interceptors.request.use(t=>{const a=t.url?.includes("/customers/auth")?localStorage.getItem("customerToken"):localStorage.getItem("token");return a&&(t.headers.Authorization=`Bearer ${a}`),t},t=>Promise.reject(t));Ne.interceptors.response.use(t=>t,t=>{if(t.code==="ECONNABORTED"||t.message.includes("timeout"))D.error("Request timeout. Please check your connection.");else if(t.code==="ERR_NETWORK"||t.message.includes("Network Error"))D.error("Network error. Please check if the server is running.");else if(t.response){const s=t.response.status;s===401?(localStorage.removeItem("token"),window.location.pathname!=="/loginpage"&&(window.location.href="/loginpage")):s===403?D.error("Access denied."):s===404?D.error("Resource not found."):s>=500&&D.error("Server error. Please try again later.")}return Promise.reject(t)});const hu={register:t=>Ne.post("/customers/auth/register",t),login:t=>Ne.post("/customers/auth/login",t),getProfile:()=>Ne.get("/customers/auth/profile"),updateProfile:t=>Ne.put("/customers/auth/profile",t),changePassword:t=>Ne.put("/customers/auth/change-password",t),forgotPassword:t=>Ne.post("/customers/auth/forgot-password",{email:t}),resetPassword:t=>Ne.post("/customers/auth/reset-password",t),verifyEmail:t=>Ne.get(`/customers/auth/verify-email/${t}`)},A4=v.createContext(),_s=()=>v.useContext(A4),rR=({children:t})=>{const[s,a]=v.useState(null),[r,i]=v.useState(!1),[o,c]=v.useState(!0);v.useEffect(()=>{const h=localStorage.getItem("token");h?Ne.get("/auth/profile",{headers:{Authorization:`Bearer ${h}`}}).then(p=>{a(p.data),i(!0)}).catch(p=>{console.error("Error checking authentication:",p),p.response&&p.response.status===401&&localStorage.removeItem("token"),i(!1)}).finally(()=>{c(!1)}):c(!1)},[]);const x={user:s,isAuthenticated:r,loading:o,login:async(h,p)=>{try{const g=await Ne.post("/auth/login",{email:h,password:p}),{token:y,user:b}=g.data;return localStorage.setItem("token",y),a(b),i(!0),window.dispatchEvent(new CustomEvent("userLoggedIn",{detail:{user:b}})),{success:!0}}catch(g){return console.error("Login failed",g),{success:!1,error:g.response?.data?.message||"Login failed. Please try again."}}},logout:()=>{localStorage.removeItem("token"),a(null),i(!1)}};return o?e.jsx("div",{children:"Loading..."}):e.jsx(A4.Provider,{value:x,children:t})};function nR({className:t,...s}){const{login:a}=_s(),[r,i]=v.useState(""),[o,c]=v.useState(""),[u,f]=v.useState(!1),[x,h]=v.useState(!1),[p,g]=v.useState(!1),[y,b]=v.useState(""),[N,S]=v.useState(!1),[C,k]=v.useState(null),A=Ka(),G=async _=>{if(_.preventDefault(),h(!0),!r||!o){D.error("Please enter both email and password."),h(!1);return}try{const P=await a(r,o);P.success?(D.success("Login successful! Welcome to ominbiz Pro."),A("/dashboard"),window.location.reload()):D.error(P.error||"Login failed. Please try again.")}finally{h(!1)}},F=async _=>{if(_.preventDefault(),!y){D.error("Please enter your email address.");return}S(!0);try{await Ne.post("/auth/forgot-password",{email:y}),D.success("Password reset link sent! Check your email."),g(!1),b("")}catch(P){D.error(P.response?.data?.message||"Failed to send reset link. Please try again.")}finally{S(!1)}},E=async()=>{k("google");try{const _=`${window.location.origin}/auth/google/callback`,P="YOUR_GOOGLE_CLIENT_ID";window.location.href="http://localhost:5000/api/auth/google"}catch{D.error("Google login failed. Please try again."),k(null)}},T=async()=>{k("github");try{const _=`${window.location.origin}/auth/github/callback`,P="YOUR_GITHUB_CLIENT_ID";window.location.href="http://localhost:5000/api/auth/github"}catch{D.error("GitHub login failed. Please try again."),k(null)}};return e.jsxs("div",{className:Ze("flex flex-col gap-6 relative",t),...s,children:[e.jsxs("div",{className:"absolute inset-0 -z-10 overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 left-0 w-64 h-64 bg-primary/10 rounded-full blur-3xl animate-pulse"}),e.jsx("div",{className:"absolute bottom-0 right-0 w-96 h-96 bg-accent/10 rounded-full blur-3xl animate-pulse",style:{animationDelay:"1s"}})]}),e.jsxs("div",{className:"text-center mb-4 animate-in fade-in slide-in-from-top-4 duration-700",children:[e.jsxs("div",{className:"inline-flex items-center gap-2 mb-2",children:[e.jsx(Rl,{className:"h-8 w-8 text-primary animate-pulse"}),e.jsx("h1",{className:"text-4xl font-bold text-primary",children:"ominbiz"})]}),e.jsx("p",{className:"text-muted-foreground text-sm",children:"Business Management Platform"})]}),e.jsxs(K,{className:"border-2 shadow-2xl backdrop-blur-sm bg-card/95 animate-in fade-in slide-in-from-bottom-4 duration-700",children:[e.jsxs(xe,{className:"space-y-2",children:[e.jsxs(pe,{className:"text-2xl font-bold flex items-center gap-2",children:[e.jsx(af,{className:"h-6 w-6 text-primary"}),"Welcome Back"]}),e.jsx(ot,{className:"text-base",children:"Enter your credentials to access your account"})]}),e.jsx(Y,{children:e.jsxs("form",{onSubmit:G,children:[e.jsxs("div",{className:"flex flex-col gap-5",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(te,{htmlFor:"email",className:"text-sm font-medium",children:"Email Address"}),e.jsxs("div",{className:"relative",children:[e.jsx(Ks,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(me,{id:"email",type:"email",value:r,onChange:_=>i(_.target.value),placeholder:"you@example.com",required:!0,className:"pl-10 h-11 transition-all allow-select"})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(te,{htmlFor:"password",className:"text-sm font-medium",children:"Password"}),e.jsx(R,{type:"button",variant:"link",onClick:()=>g(!0),className:"text-xs text-primary hover:text-primary/80 p-0 h-auto",children:"Forgot password?"})]}),e.jsxs("div",{className:"relative",children:[e.jsx(gr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(me,{id:"password",type:u?"text":"password",value:o,onChange:_=>c(_.target.value),required:!0,className:"pl-10 pr-10 h-11 transition-all allow-select"}),e.jsx(R,{type:"button",variant:"ghost",size:"icon",className:"absolute right-1 top-1/2 transform -translate-y-1/2 h-8 w-8",onClick:()=>f(!u),children:u?e.jsx(ko,{className:"h-4 w-4"}):e.jsx(ca,{className:"h-4 w-4"})})]})]}),e.jsx(R,{type:"submit",className:"w-full h-11 bg-primary hover:bg-primary/90 transition-all shadow-lg hover:shadow-xl group",disabled:x,children:x?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"h-4 w-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Signing in..."]}):e.jsxs(e.Fragment,{children:["Sign in",e.jsx(fv,{className:"ml-2 h-4 w-4 group-hover:translate-x-1 transition-transform"})]})})]}),e.jsxs("div",{className:"relative my-6",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("span",{className:"w-full border-t"})}),e.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:e.jsx("span",{className:"bg-card px-2 text-muted-foreground",children:"Or continue with"})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs(R,{variant:"outline",type:"button",className:"h-10",onClick:E,disabled:x||C!==null,children:[C==="google"?e.jsx("div",{className:"h-4 w-4 border-2 border-current border-t-transparent rounded-full animate-spin mr-2"}):e.jsxs("svg",{className:"mr-2 h-4 w-4",viewBox:"0 0 24 24",children:[e.jsx("path",{d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z",fill:"#4285F4"}),e.jsx("path",{d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z",fill:"#34A853"}),e.jsx("path",{d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z",fill:"#FBBC05"}),e.jsx("path",{d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z",fill:"#EA4335"})]}),"Google"]}),e.jsxs(R,{variant:"outline",type:"button",className:"h-10",onClick:T,disabled:x||C!==null,children:[C==="github"?e.jsx("div",{className:"h-4 w-4 border-2 border-current border-t-transparent rounded-full animate-spin mr-2"}):e.jsx("svg",{className:"mr-2 h-4 w-4",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 0C4.477 0 0 4.484 0 10.017c0 4.425 2.865 8.18 6.839 9.504.5.092.682-.217.682-.483 0-.237-.008-.868-.013-1.703-2.782.605-3.369-1.343-3.369-1.343-.454-1.158-1.11-1.466-1.11-1.466-.908-.62.069-.608.069-.608 1.003.07 1.531 1.032 1.531 1.032.892 1.53 2.341 1.088 2.91.832.092-.647.35-1.088.636-1.338-2.22-.253-4.555-1.113-4.555-4.951 0-1.093.39-1.988 1.029-2.688-.103-.253-.446-1.272.098-2.65 0 0 .84-.27 2.75 1.026A9.564 9.564 0 0110 4.844c.85.004 1.705.115 2.504.337 1.909-1.296 2.747-1.027 2.747-1.027.546 1.379.203 2.398.1 2.651.64.7 1.028 1.595 1.028 2.688 0 3.848-2.339 4.695-4.566 4.942.359.31.678.921.678 1.856 0 1.338-.012 2.419-.012 2.747 0 .268.18.58.688.482A10.019 10.019 0 0020 10.017C20 4.484 15.522 0 10 0z",clipRule:"evenodd"})}),"GitHub"]})]}),e.jsxs("div",{className:"mt-6 text-center text-sm",children:["Don't have an account?"," ",e.jsx(qt,{to:"/signup",className:"font-medium text-primary hover:underline",children:"Create account"})]})]})})]}),e.jsx(Bt,{open:p,onOpenChange:g,children:e.jsxs(zt,{className:"sm:max-w-md",children:[e.jsxs(Ut,{children:[e.jsxs(Vt,{className:"flex items-center gap-2",children:[e.jsx(Ks,{className:"h-5 w-5 text-primary"}),"Reset Password"]}),e.jsx(es,{children:"Enter your email address and we'll send you a link to reset your password."})]}),e.jsxs("form",{onSubmit:F,children:[e.jsx("div",{className:"grid gap-4 py-4",children:e.jsxs("div",{className:"grid gap-2",children:[e.jsx(te,{htmlFor:"reset-email",children:"Email Address"}),e.jsx(me,{id:"reset-email",type:"email",placeholder:"you@example.com",value:y,onChange:_=>b(_.target.value),required:!0,className:"allow-select"})]})}),e.jsxs(Ps,{children:[e.jsx(R,{type:"button",variant:"outline",onClick:()=>g(!1),children:"Cancel"}),e.jsx(R,{type:"submit",disabled:N,children:N?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"h-4 w-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Sending..."]}):"Send Reset Link"})]})]})]})})]})}function iR(){return e.jsx("main",{className:"min-h-screen bg-background flex items-center justify-center px-4 py-12",children:e.jsx("div",{className:"w-full max-w-md",children:e.jsx(nR,{})})})}function lR({className:t,...s}){const[a,r]=v.useState({name:"",email:"",password:"",confirmPassword:"",phone:"",businessName:""}),[i,o]=v.useState(""),[c,u]=v.useState(!1),[f,x]=v.useState(!1),[h,p]=v.useState(!1),g=Ka(),y=N=>{const{id:S,value:C}=N.target;r(k=>({...k,[S]:C}))},b=async N=>{N.preventDefault(),u(!0),o("");const{name:S,email:C,password:k,confirmPassword:A,phone:G,businessName:F}=a;if(!S||!C||!k||!A||!G||!F){o("All fields are required."),D.error("All fields are required."),u(!1);return}if(k!==A){o("Passwords do not match."),D.error("Passwords do not match."),u(!1);return}try{const E=await Ne.post("/auth/register",{name:S,email:C,password:k,phone:G,businessName:F});localStorage.setItem("token",E.data.token),localStorage.setItem("user",JSON.stringify(E.data.user)),D.success("Signup successful! Redirecting..."),g("/dashboard"),window.location.reload()}catch(E){const T=E.response?.data?.message||"Signup failed. Try again.";o(T),D.error(T)}finally{u(!1)}};return e.jsxs("div",{className:Ze("flex flex-col gap-6 relative",t),...s,children:[e.jsxs("div",{className:"absolute inset-0 -z-10 overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 left-0 w-64 h-64 bg-primary/10 rounded-full blur-3xl animate-pulse"}),e.jsx("div",{className:"absolute bottom-0 right-0 w-96 h-96 bg-accent/10 rounded-full blur-3xl animate-pulse",style:{animationDelay:"1s"}})]}),e.jsxs("div",{className:"text-center mb-4 animate-in fade-in slide-in-from-top-4 duration-700",children:[e.jsxs("div",{className:"inline-flex items-center gap-2 mb-2",children:[e.jsx(Rl,{className:"h-8 w-8 text-primary animate-pulse"}),e.jsx("h1",{className:"text-4xl font-bold text-primary",children:"ominbiz"})]}),e.jsx("p",{className:"text-muted-foreground text-sm",children:"Business Management Platform"})]}),e.jsxs(K,{className:"border-2 shadow-2xl backdrop-blur-sm bg-card/95 animate-in fade-in slide-in-from-bottom-4 duration-700",children:[e.jsxs(xe,{className:"space-y-2",children:[e.jsxs(pe,{className:"text-2xl font-bold flex items-center gap-2",children:[e.jsx(yo,{className:"h-6 w-6 text-primary"}),"Create Your Account"]}),e.jsx(ot,{className:"text-base",children:"Enter your details below to get started"})]}),e.jsx(Y,{children:e.jsxs("form",{onSubmit:b,children:[e.jsxs("div",{className:"flex flex-col gap-5",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(te,{htmlFor:"name",className:"text-sm font-medium",children:"Full Name"}),e.jsxs("div",{className:"relative",children:[e.jsx(la,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(me,{id:"name",type:"text",value:a.name,onChange:y,placeholder:"John Doe",required:!0,className:"pl-10 h-11 transition-all allow-select"})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(te,{htmlFor:"email",className:"text-sm font-medium",children:"Email Address"}),e.jsxs("div",{className:"relative",children:[e.jsx(Ks,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(me,{id:"email",type:"email",value:a.email,onChange:y,placeholder:"you@example.com",required:!0,className:"pl-10 h-11 transition-all allow-select"})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(te,{htmlFor:"phone",className:"text-sm font-medium",children:"Phone Number"}),e.jsxs("div",{className:"relative",children:[e.jsx(Ws,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(me,{id:"phone",type:"tel",value:a.phone,onChange:y,placeholder:"+1 (555) 000-0000",required:!0,className:"pl-10 h-11 transition-all allow-select"})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(te,{htmlFor:"businessName",className:"text-sm font-medium",children:"Business Name"}),e.jsxs("div",{className:"relative",children:[e.jsx(Pl,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(me,{id:"businessName",type:"text",value:a.businessName,onChange:y,placeholder:"Your Business",required:!0,className:"pl-10 h-11 transition-all allow-select"})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(te,{htmlFor:"password",className:"text-sm font-medium",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(gr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(me,{id:"password",type:f?"text":"password",value:a.password,onChange:y,required:!0,className:"pl-10 pr-10 h-11 transition-all allow-select"}),e.jsx(R,{type:"button",variant:"ghost",size:"icon",className:"absolute right-1 top-1/2 transform -translate-y-1/2 h-8 w-8",onClick:()=>x(!f),children:f?e.jsx(ko,{className:"h-4 w-4"}):e.jsx(ca,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(te,{htmlFor:"confirmPassword",className:"text-sm font-medium",children:"Confirm Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(gr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(me,{id:"confirmPassword",type:h?"text":"password",value:a.confirmPassword,onChange:y,required:!0,className:"pl-10 pr-10 h-11 transition-all allow-select"}),e.jsx(R,{type:"button",variant:"ghost",size:"icon",className:"absolute right-1 top-1/2 transform -translate-y-1/2 h-8 w-8",onClick:()=>p(!h),children:h?e.jsx(ko,{className:"h-4 w-4"}):e.jsx(ca,{className:"h-4 w-4"})})]})]}),e.jsx(R,{type:"submit",className:"w-full h-11 bg-primary hover:bg-primary/90 transition-all shadow-lg hover:shadow-xl group",disabled:c,children:c?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"h-4 w-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Creating account..."]}):e.jsxs(e.Fragment,{children:["Sign up",e.jsx(fv,{className:"ml-2 h-4 w-4 group-hover:translate-x-1 transition-transform"})]})})]}),e.jsxs("div",{className:"mt-6 text-center text-sm",children:["Already have an account?"," ",e.jsx(qt,{to:"/loginpage",className:"font-medium text-primary hover:underline",children:"Log in"})]})]})})]})]})}function oR(){return e.jsx("main",{className:"min-h-screen bg-background flex items-center justify-center px-4 py-12",children:e.jsx("div",{className:"w-full max-w-md",children:e.jsx(lR,{})})})}function cR(){return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-white px-4",children:e.jsxs("div",{className:"text-center border border-green-100 rounded-lg p-8 shadow-md max-w-md w-full",children:[e.jsx("h1",{className:"text-6xl font-bold text-green-600 mb-4",children:"404"}),e.jsx("p",{className:"text-lg text-green-700 mb-6",children:"Oops! Page not found."}),e.jsx(qt,{to:"/",className:"inline-block bg-green-600 text-white px-4 py-2 rounded hover:bg-green-500 transition",children:"Go back home"})]})})}const dR=[{name:"Overview",href:"/dashboard",icon:er,section:"main"},{name:"Analytics",href:"/dashboard/analytics",icon:Is,section:"main"},{name:"Graphs",href:"/dashboard/graphs",icon:IS,section:"main"},{name:"Maps",href:"/dashboard/maps",icon:i_,section:"main"},{name:"Inventory",href:"/dashboard/inventory",icon:Yt,section:"business"},{name:"Products",href:"/dashboard/products",icon:Yt,section:"business"},{name:"E-Commerce",href:"/dashboard/ecommerce",icon:ws,section:"business"},{name:"Discounts",href:"/dashboard/discounts",icon:No,section:"business"},{name:"Services",href:"/dashboard/services",icon:Pl,section:"business"},{name:"Appointments",href:"/dashboard/appointments",icon:gs,section:"business"},{name:"Finances",href:"/dashboard/finances",icon:ra,section:"business"},{name:"Purchasing",href:"/dashboard/purchasing",icon:ws,section:"business"},{name:"Subscriptions",href:"/dashboard/subscriptions",icon:pa,section:"business"},{name:"Live Sessions",href:"/dashboard/sessions",icon:Aa,section:"communication",badge:"New"},{name:"Messages",href:"/dashboard/messages",icon:ta,section:"communication"},{name:"Live Support",href:"/dashboard/support",icon:Pf,section:"communication"},{name:"Team",href:"/dashboard/team",icon:Zt,section:"team"},{name:"AI Insights",href:"/dashboard/ai-insights",icon:bo,section:"team"},{name:"Locations",href:"/dashboard/locations",icon:Yr,section:"team"},{name:"Security",href:"/dashboard/security",icon:da,section:"security",badge:"AI",adminOnly:!0},{name:"Reports",href:"/dashboard/reports",icon:ba,section:"tools"},{name:"History",href:"/dashboard/history",icon:Al,section:"tools"},{name:"Search",href:"/dashboard/search",icon:oa,section:"tools"},{name:"Learning Center",href:"/dashboard/resources",icon:ui,section:"tools"},{name:"UI Components",href:"/dashboard/gui",icon:l_,section:"tools"}];function uR(){const{user:t,isAuthenticated:s,logout:a}=_s(),r=hv(),i=Ka(),[o,c]=v.useState(!1),u=s?t?.name:"Guest",f=s?t?.name.split(" ").map(h=>h[0]).join(""):"G",x=()=>{a(),i("/")};return e.jsx("div",{className:Ze("bg-card border-r border-border transition-all duration-300 shadow-sm",o?"w-16":"w-64"),children:e.jsxs("div",{className:"flex h-full flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-border",children:[!o&&e.jsxs(qt,{to:"/dashboard",className:"flex items-center space-x-2",children:[e.jsx("img",{src:"https://2aa832b0f010801d3551c6c63b116063.cdn.bubble.io/cdn-cgi/image/w=48,h=48,f=auto,dpr=1,fit=contain/f1758225569468x933635082935872100/logo.webp",alt:""}),e.jsxs("span",{className:"text-xl font-bold text-primary",children:["Omin",e.jsx("span",{className:"text-accent",children:"Biz"})]})]}),e.jsx(R,{variant:"ghost",size:"icon",onClick:()=>c(!o),className:"h-8 w-8 text-primary hover:text-primary/80",children:o?e.jsx(n_,{className:"h-4 w-4"}):e.jsx(jr,{className:"h-4 w-4"})})]}),e.jsx("nav",{className:"flex-1 overflow-y-auto p-2 space-y-1",children:dR.map(h=>{if(h.adminOnly&&t?.role!=="admin"&&t?.role!=="super_admin")return null;const p=r.pathname===h.href;return e.jsxs(qt,{to:h.href,className:Ze("flex items-center px-3 py-2 rounded-lg text-sm font-medium transition-colors relative group",p?"bg-primary text-primary-foreground shadow-sm":"text-foreground hover:bg-accent hover:text-accent-foreground"),children:[e.jsx(h.icon,{className:Ze("h-5 w-5 flex-shrink-0",o?"mx-auto":"mr-3")}),!o&&e.jsxs("div",{className:"flex items-center justify-between flex-1 min-w-0",children:[e.jsx("span",{className:"truncate",children:h.name}),h.badge&&e.jsx("span",{className:Ze("ml-2 px-1.5 py-0.5 text-[10px] font-semibold rounded-full",p?"bg-primary-foreground text-primary":h.badge==="AI"?"bg-gradient-to-r from-purple-500 to-blue-500 text-white":"bg-green-500 text-white"),children:h.badge})]}),o&&h.badge&&e.jsx("span",{className:Ze("absolute top-1 right-1 h-2 w-2 rounded-full",h.badge==="AI"?"bg-purple-500":"bg-green-500")})]},h.name)})}),e.jsxs("div",{className:"border-t border-border",children:[e.jsxs("div",{className:"p-2 space-y-1",children:[e.jsxs(qt,{to:"/dashboard/settings",className:Ze("flex items-center px-3 py-2 rounded-lg text-sm font-medium transition-colors",r.pathname==="/dashboard/settings"?"bg-primary text-primary-foreground shadow-sm":"text-foreground hover:bg-accent hover:text-accent-foreground"),children:[e.jsx(Wa,{className:Ze("h-5 w-5",o?"mx-auto":"mr-3")}),!o&&e.jsx("span",{children:"Settings"})]}),e.jsxs(qt,{to:"/dashboard/profile",className:Ze("flex items-center px-3 py-2 rounded-lg text-sm font-medium transition-colors",r.pathname==="/dashboard/profile"?"bg-primary text-primary-foreground shadow-sm":"text-foreground hover:bg-accent hover:text-accent-foreground"),children:[e.jsx(la,{className:Ze("h-5 w-5",o?"mx-auto":"mr-3")}),!o&&e.jsx("span",{children:"Profile"})]}),e.jsxs(qt,{to:"/dashboard/wallet",className:Ze("flex items-center px-3 py-2 rounded-lg text-sm font-medium transition-colors",r.pathname==="/dashboard/wallet"?"bg-primary text-primary-foreground shadow-sm":"text-foreground hover:bg-accent hover:text-accent-foreground"),children:[e.jsx(td,{className:Ze("h-5 w-5",o?"mx-auto":"mr-3")}),!o&&e.jsx("span",{children:"Wallet"})]}),e.jsxs(qt,{to:"/dashboard/help",className:Ze("flex items-center px-3 py-2 rounded-lg text-sm font-medium transition-colors",r.pathname==="/dashboard/help"?"bg-primary text-primary-foreground shadow-sm":"text-foreground hover:bg-accent hover:text-accent-foreground"),children:[e.jsx(xv,{className:Ze("h-5 w-5",o?"mx-auto":"mr-3")}),!o&&e.jsx("span",{children:"Help & Support"})]}),e.jsxs(R,{onClick:x,variant:"ghost",className:Ze("flex items-center px-3 py-2 rounded-lg text-sm font-medium transition-colors w-full justify-start","text-destructive hover:bg-destructive/10 hover:text-destructive"),children:[e.jsx(rf,{className:Ze("h-5 w-5",o?"mx-auto":"mr-3")}),!o&&e.jsx("span",{children:"Logout"})]})]}),!o&&e.jsx("div",{className:"p-4 border-t border-border bg-muted/30",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("div",{className:"h-8 w-8 rounded-full bg-primary flex items-center justify-center shadow-sm",children:[e.jsx("span",{className:"text-sm font-medium text-primary-foreground",children:f})," "]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("p",{className:"text-sm font-medium text-foreground truncate",children:[u," "]}),e.jsx("p",{className:"text-xs text-muted-foreground truncate",children:t?.role||"User"})]})]})})]})]})})}function bg({...t}){return e.jsx(P5,{"data-slot":"dropdown-menu",...t})}function wg({...t}){return e.jsx(M5,{"data-slot":"dropdown-menu-trigger",...t})}function Sg({className:t,sideOffset:s=4,...a}){return e.jsx(F5,{children:e.jsx(L5,{"data-slot":"dropdown-menu-content",sideOffset:s,className:Ze("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 max-h-(--radix-dropdown-menu-content-available-height) min-w-[8rem] origin-(--radix-dropdown-menu-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border p-1 shadow-md",t),...a})})}function Wn({className:t,inset:s,variant:a="default",...r}){return e.jsx(z5,{"data-slot":"dropdown-menu-item","data-inset":s,"data-variant":a,className:Ze("focus:bg-accent focus:text-accent-foreground data-[variant=destructive]:text-destructive data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/20 data-[variant=destructive]:focus:text-destructive data-[variant=destructive]:*:[svg]:!text-destructive [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...r})}function mR({className:t,inset:s,...a}){return e.jsx(I5,{"data-slot":"dropdown-menu-label","data-inset":s,className:Ze("px-2 py-1.5 text-sm font-medium data-[inset]:pl-8",t),...a})}function nw({className:t,...s}){return e.jsx(B5,{"data-slot":"dropdown-menu-separator",className:Ze("bg-border -mx-1 my-1 h-px",t),...s})}const hR=Sv("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function De({className:t,variant:s,asChild:a=!1,...r}){const i=a?uv:"span";return e.jsx(i,{"data-slot":"badge",className:Ze(hR({variant:s}),t),...r})}const kr=v.forwardRef(({className:t,children:s,...a},r)=>e.jsxs(NS,{ref:r,className:Ze("relative overflow-hidden",t),...a,children:[e.jsx(U5,{className:"h-full w-full rounded-[inherit]",children:s}),e.jsx(_4,{}),e.jsx(V5,{})]}));kr.displayName=NS.displayName;const _4=v.forwardRef(({className:t,orientation:s="vertical",...a},r)=>e.jsx(bS,{ref:r,orientation:s,className:Ze("flex touch-none select-none transition-colors",s==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",s==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",t),...a,children:e.jsx($5,{className:"relative flex-1 rounded-full bg-border"})}));_4.displayName=bS.displayName;var Vf="Popover",[D4]=Df(Vf,[Of]),tm=Of(),[fR,Ul]=D4(Vf),O4=t=>{const{__scopePopover:s,children:a,open:r,defaultOpen:i,onOpenChange:o,modal:c=!1}=t,u=tm(s),f=v.useRef(null),[x,h]=v.useState(!1),[p,g]=Ou({prop:r,defaultProp:i??!1,onChange:o,caller:Vf});return e.jsx(OS,{...u,children:e.jsx(fR,{scope:s,contentId:Rf(),triggerRef:f,open:p,onOpenChange:g,onOpenToggle:v.useCallback(()=>g(y=>!y),[g]),hasCustomAnchor:x,onCustomAnchorAdd:v.useCallback(()=>h(!0),[]),onCustomAnchorRemove:v.useCallback(()=>h(!1),[]),modal:c,children:a})})};O4.displayName=Vf;var R4="PopoverAnchor",xR=v.forwardRef((t,s)=>{const{__scopePopover:a,...r}=t,i=Ul(R4,a),o=tm(a),{onCustomAnchorAdd:c,onCustomAnchorRemove:u}=i;return v.useEffect(()=>(c(),()=>u()),[c,u]),e.jsx(mv,{...o,...r,ref:s})});xR.displayName=R4;var P4="PopoverTrigger",M4=v.forwardRef((t,s)=>{const{__scopePopover:a,...r}=t,i=Ul(P4,a),o=tm(a),c=qa(s,i.triggerRef),u=e.jsx(ma.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":z4(i.open),...r,ref:c,onClick:Hs(t.onClick,i.onOpenToggle)});return i.hasCustomAnchor?u:e.jsx(mv,{asChild:!0,...o,children:u})});M4.displayName=P4;var kv="PopoverPortal",[pR,gR]=D4(kv,{forceMount:void 0}),F4=t=>{const{__scopePopover:s,forceMount:a,children:r,container:i}=t,o=Ul(kv,s);return e.jsx(pR,{scope:s,forceMount:a,children:e.jsx(wS,{present:a||o.open,children:e.jsx(SS,{asChild:!0,container:i,children:r})})})};F4.displayName=kv;var Qc="PopoverContent",L4=v.forwardRef((t,s)=>{const a=gR(Qc,t.__scopePopover),{forceMount:r=a.forceMount,...i}=t,o=Ul(Qc,t.__scopePopover);return e.jsx(wS,{present:r||o.open,children:o.modal?e.jsx(jR,{...i,ref:s}):e.jsx(yR,{...i,ref:s})})});L4.displayName=Qc;var vR=ES("PopoverContent.RemoveScroll"),jR=v.forwardRef((t,s)=>{const a=Ul(Qc,t.__scopePopover),r=v.useRef(null),i=qa(s,r),o=v.useRef(!1);return v.useEffect(()=>{const c=r.current;if(c)return CS(c)},[]),e.jsx(TS,{as:vR,allowPinchZoom:!0,children:e.jsx(I4,{...t,ref:i,trapFocus:a.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Hs(t.onCloseAutoFocus,c=>{c.preventDefault(),o.current||a.triggerRef.current?.focus()}),onPointerDownOutside:Hs(t.onPointerDownOutside,c=>{const u=c.detail.originalEvent,f=u.button===0&&u.ctrlKey===!0,x=u.button===2||f;o.current=x},{checkForDefaultPrevented:!1}),onFocusOutside:Hs(t.onFocusOutside,c=>c.preventDefault(),{checkForDefaultPrevented:!1})})})}),yR=v.forwardRef((t,s)=>{const a=Ul(Qc,t.__scopePopover),r=v.useRef(!1),i=v.useRef(!1);return e.jsx(I4,{...t,ref:s,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:o=>{t.onCloseAutoFocus?.(o),o.defaultPrevented||(r.current||a.triggerRef.current?.focus(),o.preventDefault()),r.current=!1,i.current=!1},onInteractOutside:o=>{t.onInteractOutside?.(o),o.defaultPrevented||(r.current=!0,o.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const c=o.target;a.triggerRef.current?.contains(c)&&o.preventDefault(),o.detail.originalEvent.type==="focusin"&&i.current&&o.preventDefault()}})}),I4=v.forwardRef((t,s)=>{const{__scopePopover:a,trapFocus:r,onOpenAutoFocus:i,onCloseAutoFocus:o,disableOutsidePointerEvents:c,onEscapeKeyDown:u,onPointerDownOutside:f,onFocusOutside:x,onInteractOutside:h,...p}=t,g=Ul(Qc,a),y=tm(a);return kS(),e.jsx(AS,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:i,onUnmountAutoFocus:o,children:e.jsx(_S,{asChild:!0,disableOutsidePointerEvents:c,onInteractOutside:h,onEscapeKeyDown:u,onPointerDownOutside:f,onFocusOutside:x,onDismiss:()=>g.onOpenChange(!1),children:e.jsx(DS,{"data-state":z4(g.open),role:"dialog",id:g.contentId,...y,...p,ref:s,style:{...p.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),B4="PopoverClose",NR=v.forwardRef((t,s)=>{const{__scopePopover:a,...r}=t,i=Ul(B4,a);return e.jsx(ma.button,{type:"button",...r,ref:s,onClick:Hs(t.onClick,()=>i.onOpenChange(!1))})});NR.displayName=B4;var bR="PopoverArrow",wR=v.forwardRef((t,s)=>{const{__scopePopover:a,...r}=t,i=tm(a);return e.jsx(RS,{...i,...r,ref:s})});wR.displayName=bR;function z4(t){return t?"open":"closed"}var SR=O4,CR=M4,TR=F4,U4=L4;const V4=SR,$4=CR,Av=v.forwardRef(({className:t,align:s="center",sideOffset:a=4,...r},i)=>e.jsx(TR,{children:e.jsx(U4,{ref:i,align:s,sideOffset:a,className:Ze("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...r})}));Av.displayName=U4.displayName;const H4=v.createContext(),ha=()=>{const t=v.useContext(H4);if(!t)throw new Error("useSocket must be used within a SocketProvider");return t},ER=({children:t})=>{const[s,a]=v.useState(null),[r,i]=v.useState(!1),[o,c]=v.useState([]),{user:u,token:f}=_s();v.useEffect(()=>{if(u&&f){const F=D6("http://localhost:5000",{auth:{token:f},autoConnect:!0});return F.on("connect",()=>{console.log("Socket connected:",F.id),i(!0),D.success("Connected to real-time notifications")}),F.on("disconnect",()=>{console.log("Socket disconnected"),i(!1),D.info("Disconnected from real-time notifications")}),F.on("connect_error",E=>{console.error("Socket connection error:",E),i(!1),D.error("Failed to connect to real-time notifications")}),F.on("order_updated",E=>{console.log("Order updated:",E),x({id:Date.now(),type:"order_update",title:"Order Updated",message:E.data.message||`Order ${E.data.orderNumber} has been updated`,data:E.data,timestamp:new Date(E.timestamp),read:!1}),D.success(`Order ${E.data.orderNumber}: ${E.data.message}`)}),F.on("new_order",E=>{console.log("New order:",E),x({id:Date.now(),type:"new_order",title:"New Order Received",message:`New order from ${E.data.clientName} - $${E.data.total}`,data:E.data,timestamp:new Date(E.timestamp),read:!1}),D.info(`New order: ${E.data.orderNumber} from ${E.data.clientName}`)}),F.on("service_request_updated",E=>{console.log("Service request updated:",E),x({id:Date.now(),type:"service_request_update",title:"Service Request Updated",message:E.data.message||`Service request ${E.data.requestNumber} has been updated`,data:E.data,timestamp:new Date(E.timestamp),read:!1}),D.success(`Service Request ${E.data.requestNumber}: ${E.data.message}`)}),F.on("new_service_request",E=>{console.log("New service request:",E),x({id:Date.now(),type:"new_service_request",title:"New Service Request",message:`New ${E.data.serviceType} request from ${E.data.clientName}`,data:E.data,timestamp:new Date(E.timestamp),read:!1}),D.info(`New service request: ${E.data.title} from ${E.data.clientName}`)}),F.on("notification",E=>{console.log("General notification:",E),x({id:Date.now(),type:E.type||"general",title:E.title||"Notification",message:E.message,data:E.data,timestamp:new Date(E.timestamp),read:!1}),E.showToast!==!1&&D.info(E.message)}),F.on("user_typing",E=>{console.log("User typing:",E)}),F.on("user_stopped_typing",E=>{console.log("User stopped typing:",E)}),a(F),()=>{F.close(),a(null),i(!1)}}},[u,f]);const x=F=>{c(E=>[F,...E].slice(0,50))},h=F=>{c(E=>E.map(T=>T.id===F?{...T,read:!0}:T))},p=()=>{c(F=>F.map(E=>({...E,read:!0})))},g=()=>{c([])},y=F=>{c(E=>E.filter(T=>T.id!==F))},b=F=>{s&&s.emit("join_room",F)},N=F=>{s&&s.emit("leave_room",F)},S=F=>{s&&s.emit("typing_start",{room:F})},C=F=>{s&&s.emit("typing_stop",{room:F})},k=(F,E)=>{s&&s.emit(F,E)},A=o.filter(F=>!F.read).length,G={socket:s,connected:r,notifications:o,unreadCount:A,markAsRead:h,markAllAsRead:p,clearNotifications:g,removeNotification:y,joinRoom:b,leaveRoom:N,startTyping:S,stopTyping:C,emit:k};return e.jsx(H4.Provider,{value:G,children:t})},kR=()=>{const[t,s]=v.useState(!1),{notifications:a,unreadCount:r,markAsRead:i,markAllAsRead:o,clearNotifications:c,removeNotification:u,connected:f}=ha(),x=g=>{switch(g){case"order_update":case"new_order":return e.jsx(Yt,{className:"h-4 w-4"});case"service_request_update":case"new_service_request":return e.jsx(Wa,{className:"h-4 w-4"});default:return e.jsx(ks,{className:"h-4 w-4"})}},h=g=>{switch(g){case"order_update":case"new_order":return"text-blue-600 bg-blue-100";case"service_request_update":case"new_service_request":return"text-green-600 bg-green-100";default:return"text-gray-600 bg-gray-100"}},p=g=>{g.read||i(g.id),console.log("Navigate to:",g.type,g.data)};return e.jsxs(V4,{open:t,onOpenChange:s,children:[e.jsx($4,{asChild:!0,children:e.jsxs(R,{variant:"ghost",size:"sm",className:"relative",onClick:()=>s(!t),children:[e.jsx(Pr,{className:`h-5 w-5 ${f?"text-gray-700":"text-gray-400"}`}),r>0&&e.jsx(De,{variant:"destructive",className:"absolute -top-1 -right-1 h-5 w-5 rounded-full p-0 flex items-center justify-center text-xs",children:r>99?"99+":r})]})}),e.jsxs(Av,{className:"w-80 p-0",align:"end",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("h3",{className:"font-semibold",children:"Notifications"}),e.jsx("div",{className:`h-2 w-2 rounded-full ${f?"bg-green-500":"bg-red-500"}`})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[r>0&&e.jsxs(R,{variant:"ghost",size:"sm",onClick:o,className:"text-xs",children:[e.jsx(ei,{className:"h-3 w-3 mr-1"}),"Mark all read"]}),a.length>0&&e.jsx(R,{variant:"ghost",size:"sm",onClick:c,className:"text-xs text-red-600 hover:text-red-700",children:e.jsx(ga,{className:"h-3 w-3"})})]})]}),e.jsx(kr,{className:"h-96",children:a.length===0?e.jsxs("div",{className:"p-8 text-center text-gray-500",children:[e.jsx(Pr,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),e.jsx("p",{className:"text-sm",children:"No notifications yet"}),e.jsx("p",{className:"text-xs mt-1",children:f?"You're connected to real-time updates":"Connecting..."})]}):e.jsx("div",{className:"p-2",children:a.map(g=>e.jsx(K,{className:`mb-2 p-3 cursor-pointer transition-colors hover:bg-gray-50 ${g.read?"":"border-l-4 border-l-blue-500 bg-blue-50/30"}`,onClick:()=>p(g),children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:`p-1 rounded-full ${h(g.type)}`,children:x(g.type)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:g.title}),e.jsxs("div",{className:"flex items-center space-x-1",children:[!g.read&&e.jsx("div",{className:"h-2 w-2 bg-blue-500 rounded-full"}),e.jsx(R,{variant:"ghost",size:"sm",onClick:y=>{y.stopPropagation(),u(g.id)},className:"h-6 w-6 p-0 opacity-0 group-hover:opacity-100",children:e.jsx(jr,{className:"h-3 w-3"})})]})]}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:g.message}),e.jsx("p",{className:"text-xs text-gray-400 mt-2",children:g.timestamp?Xu(new Date(g.timestamp),{addSuffix:!0}):"Just now"})]})]})},g.id))})}),!f&&e.jsx("div",{className:"p-3 bg-yellow-50 border-t border-yellow-200",children:e.jsxs("div",{className:"flex items-center space-x-2 text-yellow-800",children:[e.jsx(ks,{className:"h-4 w-4"}),e.jsx("span",{className:"text-xs",children:"Reconnecting to notifications..."})]})})]})]})},hr=xt.forwardRef(({className:t,...s},a)=>e.jsx("div",{ref:a,className:Ze("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",t),...s}));hr.displayName="Avatar";const On=xt.forwardRef(({className:t,src:s,alt:a,...r},i)=>{const[o,c]=v.useState(!1),[u,f]=v.useState(!1),x=()=>{c(!0),f(!1)},h=()=>{f(!0),c(!1)};return!s||u?null:e.jsx("img",{ref:i,className:Ze("aspect-square h-full w-full object-cover",o?"opacity-100":"opacity-0",t),src:s,alt:a,onLoad:x,onError:h,...r})});On.displayName="AvatarImage";const fr=xt.forwardRef(({className:t,...s},a)=>e.jsx("div",{ref:a,className:Ze("flex h-full w-full items-center justify-center rounded-full bg-muted text-sm font-medium",t),...s}));fr.displayName="AvatarFallback";const AR=({user:t,size:s="md",editable:a=!1,onUpdate:r=null,className:i=""})=>{const[o,c]=v.useState(!1),[u,f]=v.useState(null),[x,h]=v.useState(!1),p=v.useRef(null),g={xs:"w-6 h-6",sm:"w-8 h-8",md:"w-12 h-12",lg:"w-16 h-16",xl:"w-24 h-24","2xl":"w-32 h-32"},y=G=>G?G.split(" ").map(F=>F.charAt(0)).join("").toUpperCase().slice(0,2):"U",b=()=>u||(t?.profilePicture?t.profilePicture:t?.avatar?t.avatar:null),N=G=>{const F=G.target.files[0];if(!F)return;if(!F.type.startsWith("image/")){D.error("Please select a valid image file");return}if(F.size>5*1024*1024){D.error("Image size must be less than 5MB");return}const E=new FileReader;E.onload=T=>{f(T.target.result)},E.readAsDataURL(F)},S=async()=>{if(p.current?.files[0])try{c(!0);const G=p.current.files[0],F=new FormData;F.append("profilePicture",G),F.append("userId",t.id);const E=await Ne.post("/upload/profile-picture",F,{headers:{"Content-Type":"multipart/form-data"}});E.data.success&&(D.success("Profile picture updated successfully"),r?.(E.data.profilePictureUrl),h(!1),f(null))}catch(G){console.error("Error uploading profile picture:",G),D.error("Failed to upload profile picture")}finally{c(!1)}},C=async()=>{try{c(!0),await Ne.delete("/upload/profile-picture"),D.success("Profile picture removed"),r?.(null),h(!1),f(null)}catch(G){console.error("Error removing profile picture:",G),D.error("Failed to remove profile picture")}finally{c(!1)}},k=()=>{f(null),h(!1),p.current&&(p.current.value="")},A=({showEditButton:G=!1})=>e.jsxs("div",{className:`relative ${i}`,children:[e.jsxs(hr,{className:`${g[s]} border-2 border-gray-200 dark:border-gray-700`,children:[e.jsx(On,{src:b(),alt:t?.name||"User",className:"object-cover"}),e.jsx(fr,{className:"bg-gradient-to-br from-green-400 to-green-600 text-white font-semibold",children:y(t?.name)})]}),G&&a&&e.jsx("button",{onClick:()=>h(!0),className:"absolute -bottom-1 -right-1 p-1 bg-green-600 text-white rounded-full shadow-lg hover:bg-green-700 transition-colors",children:e.jsx(ng,{className:"w-3 h-3"})})]});return a?e.jsxs(e.Fragment,{children:[e.jsx(A,{showEditButton:!0}),e.jsx(Bt,{open:x,onOpenChange:h,children:e.jsxs(zt,{className:"sm:max-w-md",children:[e.jsx(Ut,{children:e.jsx(Vt,{children:"Update Profile Picture"})}),e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex justify-center",children:e.jsxs("div",{className:"relative",children:[e.jsxs(hr,{className:"w-32 h-32 border-4 border-gray-200 dark:border-gray-700",children:[e.jsx(On,{src:b(),alt:t?.name||"User",className:"object-cover"}),e.jsx(fr,{className:"bg-gradient-to-br from-green-400 to-green-600 text-white text-2xl font-semibold",children:y(t?.name)})]}),u&&e.jsx("div",{className:"absolute inset-0 bg-black/50 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-white text-xs font-medium",children:"Preview"})})]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("input",{ref:p,type:"file",accept:"image/*",onChange:N,className:"hidden"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs(R,{variant:"outline",onClick:()=>p.current?.click(),disabled:o,className:"w-full",children:[e.jsx(Vi,{className:"w-4 h-4 mr-2"}),"Choose Image"]}),(t?.profilePicture||t?.avatar)&&e.jsxs(R,{variant:"outline",onClick:C,disabled:o,className:"w-full text-red-600 hover:text-red-700",children:[e.jsx(jr,{className:"w-4 h-4 mr-2"}),"Remove"]})]}),u&&e.jsxs("div",{className:"flex space-x-3",children:[e.jsxs(R,{onClick:S,disabled:o,className:"flex-1 bg-green-600 hover:bg-green-700",children:[o?e.jsx(qn,{className:"w-4 h-4 mr-2 animate-spin"}):e.jsx(yi,{className:"w-4 h-4 mr-2"}),o?"Uploading...":"Save"]}),e.jsx(R,{variant:"outline",onClick:k,disabled:o,children:"Cancel"})]})]}),e.jsxs("div",{className:"text-sm text-gray-500 space-y-1",children:[e.jsx("p",{className:"font-medium",children:"Guidelines:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-1 text-xs",children:[e.jsx("li",{children:"Use a clear, professional photo"}),e.jsx("li",{children:"Square images work best"}),e.jsx("li",{children:"Maximum file size: 5MB"}),e.jsx("li",{children:"Supported formats: JPG, PNG, GIF"})]})]})]})]})})]}):e.jsx(A,{})},_R=({size:t="md",variant:s="full",className:a="",showText:r=!0,animated:i=!1})=>{const o={xs:"w-6 h-6",sm:"w-8 h-8",md:"w-12 h-12",lg:"w-16 h-16",xl:"w-24 h-24","2xl":"w-32 h-32"},c={xs:"text-sm",sm:"text-base",md:"text-xl",lg:"text-2xl",xl:"text-3xl","2xl":"text-4xl"},u=({className:f=""})=>e.jsxs("div",{className:`relative ${f} ${i?"animate-pulse":""}`,children:[e.jsx("div",{className:"absolute inset-0 bg-green-500 rounded-full shadow-lg",children:e.jsx("div",{className:"absolute top-1 left-1 w-3 h-3 bg-white/30 rounded-full blur-sm"})}),e.jsx("div",{className:"relative flex items-center justify-center w-full h-full text-white",children:e.jsxs("svg",{viewBox:"0 0 24 24",fill:"currentColor",className:"w-2/3 h-2/3",children:[e.jsx("path",{d:"M12 2L2 7v10c0 5.55 3.84 10 9 11 1.16-.21 2.31-.48 3.38-.84C16.5 26.32 18.74 25.5 21 24.5V7L12 2z"}),e.jsx("path",{d:"M12 2v20c5.16-1 9-5.45 9-11V7L12 2z",opacity:"0.7"}),e.jsx("rect",{x:"6",y:"9",width:"2",height:"2",fill:"currentColor",opacity:"0.8"}),e.jsx("rect",{x:"10",y:"9",width:"2",height:"2",fill:"currentColor",opacity:"0.8"}),e.jsx("rect",{x:"14",y:"9",width:"2",height:"2",fill:"currentColor",opacity:"0.8"}),e.jsx("rect",{x:"6",y:"13",width:"2",height:"2",fill:"currentColor",opacity:"0.8"}),e.jsx("rect",{x:"10",y:"13",width:"2",height:"2",fill:"currentColor",opacity:"0.8"}),e.jsx("rect",{x:"14",y:"13",width:"2",height:"2",fill:"currentColor",opacity:"0.8"})]})}),i&&e.jsx("div",{className:"absolute -inset-1 bg-green-500 rounded-full opacity-20 animate-ping"})]});return s==="icon"?e.jsx(u,{className:`${o[t]} ${a}`}):e.jsxs("div",{className:`flex items-center space-x-3 ${a}`,children:[e.jsx(u,{className:o[t]}),r&&e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:`font-bold text-gray-900 dark:text-white ${c[t]} leading-tight`,children:"ominbiz"}),e.jsx("span",{className:`text-green-600 font-medium ${t==="xs"||t==="sm"?"text-xs":"text-sm"} leading-tight`,children:"Business Pro"})]})]})},W4=v.createContext(),id=()=>{const t=v.useContext(W4);if(!t)throw new Error("useAppTheme must be used within a ThemeProvider");return t},Rn={light:{name:"Light",description:"Clean and bright interface",preview:"bg-white text-gray-900",category:"default",colors:{primary:"#3b82f6",secondary:"#64748b",accent:"#10b981",background:"#ffffff",foreground:"#1f2937"}},dark:{name:"Dark",description:"Easy on the eyes",preview:"bg-gray-900 text-white",category:"default",colors:{primary:"#60a5fa",secondary:"#94a3b8",accent:"#34d399",background:"#111827",foreground:"#f9fafb"}},blue:{name:"Ocean Blue",description:"Professional blue theme",preview:"bg-blue-600 text-white",category:"color",colors:{primary:"#2563eb",secondary:"#1e40af",accent:"#3b82f6",background:"#eff6ff",foreground:"#1e3a8a"}},green:{name:"Forest Green",description:"Nature-inspired green",preview:"bg-green-600 text-white",category:"color",colors:{primary:"#16a34a",secondary:"#15803d",accent:"#22c55e",background:"#f0fdf4",foreground:"#14532d"}},purple:{name:"Royal Purple",description:"Elegant purple theme",preview:"bg-purple-600 text-white",category:"color",colors:{primary:"#9333ea",secondary:"#7c3aed",accent:"#a855f7",background:"#faf5ff",foreground:"#581c87"}},orange:{name:"Sunset Orange",description:"Warm and energetic",preview:"bg-orange-600 text-white",category:"color",colors:{primary:"#ea580c",secondary:"#dc2626",accent:"#f97316",background:"#fff7ed",foreground:"#9a3412"}},rose:{name:"Rose Pink",description:"Soft and modern",preview:"bg-rose-600 text-white",category:"color",colors:{primary:"#e11d48",secondary:"#be185d",accent:"#f43f5e",background:"#fff1f2",foreground:"#881337"}},slate:{name:"Slate Gray",description:"Professional and minimal",preview:"bg-slate-600 text-white",category:"neutral",colors:{primary:"#475569",secondary:"#334155",accent:"#64748b",background:"#f8fafc",foreground:"#0f172a"}},emerald:{name:"Emerald",description:"Fresh and vibrant",preview:"bg-emerald-600 text-white",category:"color",colors:{primary:"#059669",secondary:"#047857",accent:"#10b981",background:"#ecfdf5",foreground:"#064e3b"}},fresh:{name:"Fresh White",description:"Clean white with green accents",preview:"bg-white text-gray-900 border border-green-500",category:"color",colors:{primary:"#10b981",secondary:"#059669",accent:"#34d399",background:"#ffffff",foreground:"#1f2937"}},indigo:{name:"Deep Indigo",description:"Rich and sophisticated",preview:"bg-indigo-600 text-white",category:"color",colors:{primary:"#4f46e5",secondary:"#4338ca",accent:"#6366f1",background:"#f0f9ff",foreground:"#312e81"}},cyberpunk:{name:"Cyberpunk",description:"Neon and futuristic",preview:"bg-black text-cyan-400 border border-pink-500",category:"special",colors:{primary:"#06b6d4",secondary:"#ec4899",accent:"#10b981",background:"#000000",foreground:"#22d3ee"}},sunset:{name:"Sunset",description:"Warm orange theme",preview:"bg-orange-500 text-white",category:"special",colors:{primary:"#f97316",secondary:"#ec4899",accent:"#fbbf24",background:"#fff7ed",foreground:"#9a3412"}},ocean:{name:"Ocean Depths",description:"Deep blue theme",preview:"bg-blue-800 text-white",category:"special",colors:{primary:"#1e40af",secondary:"#312e81",accent:"#3b82f6",background:"#eff6ff",foreground:"#1e3a8a"}},system:{name:"System",description:"Follow system preference",preview:"bg-gray-500 text-white",category:"auto",colors:{primary:"#3b82f6",secondary:"#64748b",accent:"#10b981",background:"var(--background)",foreground:"var(--foreground)"}},dracula:{name:"Dracula",description:"Popular dark theme",preview:"bg-[#282a36] text-[#f8f8f2] border border-[#bd93f9]",category:"special",colors:{primary:"#bd93f9",secondary:"#ff79c6",accent:"#50fa7b",background:"#282a36",foreground:"#f8f8f2"}},nord:{name:"Nord",description:"Arctic nordic theme",preview:"bg-[#2e3440] text-[#eceff4] border border-[#88c0d0]",category:"special",colors:{primary:"#88c0d0",secondary:"#81a1c1",accent:"#a3be8c",background:"#2e3440",foreground:"#eceff4"}},tokyonight:{name:"Tokyo Night",description:"Neon city nights",preview:"bg-[#1a1b26] text-[#c0caf5] border border-[#7aa2f7]",category:"special",colors:{primary:"#7aa2f7",secondary:"#bb9af7",accent:"#9ece6a",background:"#1a1b26",foreground:"#c0caf5"}},corporate:{name:"Corporate Blue",description:"Professional business theme",preview:"bg-blue-700 text-white",category:"business",colors:{primary:"#1e40af",secondary:"#1e3a8a",accent:"#3b82f6",background:"#ffffff",foreground:"#1e293b"}},forest:{name:"Forest Green",description:"Calm forest vibes",preview:"bg-green-700 text-white",category:"nature",colors:{primary:"#047857",secondary:"#065f46",accent:"#10b981",background:"#f0fdf4",foreground:"#064e3b"}},lavender:{name:"Lavender Dreams",description:"Soft lavender theme",preview:"bg-purple-400 text-white",category:"nature",colors:{primary:"#a855f7",secondary:"#ec4899",accent:"#d946ef",background:"#faf5ff",foreground:"#581c87"}},neon:{name:"Neon Lights",description:"Vibrant neon colors",preview:"bg-gradient-to-r from-pink-500 to-purple-500 text-white",category:"modern",colors:{primary:"#ec4899",secondary:"#a855f7",accent:"#06b6d4",background:"#18181b",foreground:"#fafafa"}},minimal:{name:"Minimal Black",description:"Ultra minimal design",preview:"bg-black text-white",category:"modern",colors:{primary:"#18181b",secondary:"#27272a",accent:"#3f3f46",background:"#ffffff",foreground:"#09090b"}},spring:{name:"Spring Bloom",description:"Fresh spring colors",preview:"bg-gradient-to-r from-green-400 to-pink-400 text-white",category:"seasonal",colors:{primary:"#22c55e",secondary:"#f472b6",accent:"#a3e635",background:"#f0fdf4",foreground:"#14532d"}},autumn:{name:"Autumn Leaves",description:"Warm autumn colors",preview:"bg-gradient-to-r from-orange-600 to-red-700 text-white",category:"seasonal",colors:{primary:"#ea580c",secondary:"#dc2626",accent:"#f59e0b",background:"#fffbeb",foreground:"#78350f"}},midnight:{name:"Midnight Blue",description:"Deep midnight theme",preview:"bg-blue-950 text-blue-100",category:"dark",colors:{primary:"#1e3a8a",secondary:"#1e40af",accent:"#3b82f6",background:"#0c1629",foreground:"#dbeafe"}},monokai:{name:"Monokai",description:"Classic code theme",preview:"bg-[#272822] text-[#f8f8f2] border border-[#66d9ef]",category:"special",colors:{primary:"#66d9ef",secondary:"#f92672",accent:"#a6e22e",background:"#272822",foreground:"#f8f8f2"}},matrix:{name:"Matrix",description:"Enter the matrix",preview:"bg-black text-[#00ff00] border border-[#00ff00]",category:"special",colors:{primary:"#00ff00",secondary:"#00cc00",accent:"#00ff41",background:"#000000",foreground:"#00ff00"}},coral:{name:"Coral Reef",description:"Warm coral colors",preview:"bg-[#fff5f5] text-[#c53030]",category:"color",colors:{primary:"#f56565",secondary:"#fc8181",accent:"#feb2b2",background:"#fff5f5",foreground:"#c53030"}},mint:{name:"Fresh Mint",description:"Cool mint theme",preview:"bg-[#f0fdf4] text-[#065f46]",category:"color",colors:{primary:"#10b981",secondary:"#34d399",accent:"#6ee7b7",background:"#f0fdf4",foreground:"#065f46"}},amber:{name:"Amber Glow",description:"Warm amber tones",preview:"bg-[#fffbeb] text-[#78350f]",category:"color",colors:{primary:"#f59e0b",secondary:"#fbbf24",accent:"#fcd34d",background:"#fffbeb",foreground:"#78350f"}},deepForest:{name:"Deep Forest",description:"Dark forest theme",preview:"bg-[#064e3b] text-[#d1fae5]",category:"special",colors:{primary:"#10b981",secondary:"#34d399",accent:"#6ee7b7",background:"#064e3b",foreground:"#d1fae5"}},sakura:{name:"Cherry Blossom",description:"Soft pink sakura",preview:"bg-[#fdf2f8] text-[#831843]",category:"color",colors:{primary:"#ec4899",secondary:"#f472b6",accent:"#f9a8d4",background:"#fdf2f8",foreground:"#831843"}},arctic:{name:"Arctic Ice",description:"Cool icy blue",preview:"bg-[#f0f9ff] text-[#075985]",category:"color",colors:{primary:"#0ea5e9",secondary:"#38bdf8",accent:"#7dd3fc",background:"#f0f9ff",foreground:"#075985"}},volcano:{name:"Volcano",description:"Fiery red theme",preview:"bg-[#450a0a] text-[#fecaca]",category:"special",colors:{primary:"#dc2626",secondary:"#ef4444",accent:"#f87171",background:"#450a0a",foreground:"#fecaca"}}},iw=({children:t})=>{const[s,a]=v.useState("light"),[r,i]=v.useState(!1),[o,c]=v.useState(!0),[u,f]=v.useState(!1),[x,h]=v.useState("medium"),[p,g]=v.useState("medium"),[y,b]=v.useState(!1),[N,S]=v.useState(!1),[C,k]=v.useState("#3b82f6"),[A,G]=v.useState(!0),[F,E]=v.useState(!0),[T,_]=v.useState(!1),P={small:{name:"Small",class:"text-sm",value:"14px"},medium:{name:"Medium",class:"text-base",value:"16px"},large:{name:"Large",class:"text-lg",value:"18px"},xlarge:{name:"Extra Large",class:"text-xl",value:"20px"}},z={none:{name:"None",value:"0px"},small:{name:"Small",value:"4px"},medium:{name:"Medium",value:"8px"},large:{name:"Large",value:"12px"},xlarge:{name:"Extra Large",value:"16px"}};v.useEffect(()=>{const q=document.documentElement;q.setAttribute("data-theme",s),s==="dark"?q.classList.add("dark"):q.classList.remove("dark"),q.style.setProperty("--font-size-base",P[x].value),q.style.setProperty("--radius",z[p].value),!o||u?(q.style.setProperty("--animation-duration","0s"),q.style.setProperty("--transition-duration","0s")):(q.style.setProperty("--animation-duration","0.3s"),q.style.setProperty("--transition-duration","0.2s"))},[s,x,p,o,u]),v.useEffect(()=>{const q=window.matchMedia("(prefers-reduced-motion: reduce)");f(q.matches);const B=ae=>f(ae.matches);return q.addEventListener("change",B),()=>q.removeEventListener("change",B)},[]);const V=q=>{q=q.replace("#","");const B=parseInt(q.substring(0,2),16)/255,ae=parseInt(q.substring(2,4),16)/255,U=parseInt(q.substring(4,6),16)/255,Z=Math.max(B,ae,U),de=Math.min(B,ae,U);let H,se,ee=(Z+de)/2;if(Z===de)H=se=0;else{const L=Z-de;switch(se=ee>.5?L/(2-Z-de):L/(Z+de),Z){case B:H=((ae-U)/L+(ae<U?6:0))/6;break;case ae:H=((U-B)/L+2)/6;break;case U:H=((B-ae)/L+4)/6;break}}return H=Math.round(H*360),se=Math.round(se*100),ee=Math.round(ee*100),`${H} ${se}% ${ee}%`};v.useEffect(()=>{const q=document.documentElement,B=Rn[s];if(B&&B.colors){const Z=V(B.colors.primary),de=V(B.colors.secondary),H=V(B.colors.accent),se=B.colors.background.startsWith("#")?V(B.colors.background):"0 0% 100%",ee=V(B.colors.foreground);q.style.setProperty("--primary",Z),q.style.setProperty("--primary-foreground","0 0% 100%"),q.style.setProperty("--secondary",de),q.style.setProperty("--secondary-foreground",ee),q.style.setProperty("--accent",H),q.style.setProperty("--accent-foreground",ee),q.style.setProperty("--background",se),q.style.setProperty("--foreground",ee),q.style.setProperty("--card",se),q.style.setProperty("--card-foreground",ee),q.style.setProperty("--popover",se),q.style.setProperty("--popover-foreground",ee),q.style.setProperty("--muted",de),q.style.setProperty("--muted-foreground","0 0% 45%"),q.style.setProperty("--border",`${Z.split(" ")[0]} 30% 80%`),q.style.setProperty("--input",`${Z.split(" ")[0]} 30% 80%`),q.style.setProperty("--ring",Z),q.style.setProperty("--color-primary",B.colors.primary),q.style.setProperty("--color-secondary",B.colors.secondary),q.style.setProperty("--color-accent",B.colors.accent),q.style.setProperty("--color-background",B.colors.background),q.style.setProperty("--color-foreground",B.colors.foreground),document.body.style.backgroundColor=B.colors.background,document.body.style.color=B.colors.foreground}if(C){const Z=V(C);q.style.setProperty("--accent",Z),q.style.setProperty("--color-accent",C)}const ae=P[x]?.value||"16px";q.style.setProperty("--font-size-base",ae);const U=z[p]?.value||"0.5rem";q.style.setProperty("--border-radius-base",U),q.style.setProperty("--spacing-scale",y?"0.75":"1"),N?q.classList.add("high-contrast"):q.classList.remove("high-contrast"),u?q.classList.add("reduce-motion"):q.classList.remove("reduce-motion"),o?q.classList.remove("no-animations"):q.classList.add("no-animations")},[s,C,x,p,y,N,u,o]),v.useEffect(()=>{(()=>{try{const B=localStorage.getItem("app-theme"),ae=localStorage.getItem("app-theme-settings");if(B&&a(B),ae){const U=JSON.parse(ae);U.sidebarCollapsed!==void 0&&i(U.sidebarCollapsed),U.compactMode!==void 0&&b(U.compactMode),U.highContrast!==void 0&&S(U.highContrast),U.reducedMotion!==void 0&&f(U.reducedMotion),U.customAccentColor&&k(U.customAccentColor),U.animations!==void 0&&c(U.animations),U.fontSize&&h(U.fontSize),U.borderRadius&&g(U.borderRadius),U.soundEnabled!==void 0&&G(U.soundEnabled),U.autoSave!==void 0&&E(U.autoSave)}}catch(B){console.error("Error loading theme from localStorage:",B)}})()},[]),v.useEffect(()=>{const q=async()=>{try{const ae=localStorage.getItem("token");if(ae){const Z=(await Ne.get("/user/profile",{headers:{Authorization:`Bearer ${ae}`}})).data.themePreferences;Z&&(Z.theme&&a(Z.theme),Z.sidebarCollapsed!==void 0&&i(Z.sidebarCollapsed),Z.compactMode!==void 0&&b(Z.compactMode),Z.highContrast!==void 0&&S(Z.highContrast),Z.reducedMotion!==void 0&&f(Z.reducedMotion),Z.customAccentColor&&k(Z.customAccentColor),Z.animations!==void 0&&c(Z.animations),Z.fontSize&&h(Z.fontSize),Z.borderRadius&&g(Z.borderRadius),Z.soundEnabled!==void 0&&G(Z.soundEnabled),Z.autoSave!==void 0&&E(Z.autoSave),localStorage.setItem("app-theme",Z.theme||"light"),localStorage.setItem("app-theme-settings",JSON.stringify(Z)))}}catch(ae){console.log("Could not load user theme preferences from server:",ae.message)}finally{_(!0)}},B=setTimeout(()=>{q()},100);return()=>clearTimeout(B)},[]),v.useEffect(()=>{if(T)try{localStorage.setItem("app-theme",s),localStorage.setItem("app-theme-settings",JSON.stringify({theme:s,sidebarCollapsed:r,compactMode:y,highContrast:N,reducedMotion:u,customAccentColor:C,animations:o,fontSize:x,borderRadius:p,soundEnabled:A,autoSave:F}))}catch(q){console.error("Error saving theme to localStorage:",q)}},[s,r,y,N,u,C,o,x,p,A,F,T]),v.useEffect(()=>{if(!T)return;const q=setTimeout(async()=>{try{const B=localStorage.getItem("token");B&&await Ne.put("/user/settings",{section:"appearance",settings:{theme:s,sidebarCollapsed:r,compactMode:y,highContrast:N,reducedMotion:u,customAccentColor:C,animations:o,fontSize:x,borderRadius:p,soundEnabled:A,autoSave:F}},{headers:{Authorization:`Bearer ${B}`}})}catch(B){console.log("Could not sync theme preferences:",B.message)}},1e3);return()=>clearTimeout(q)},[T,s,r,y,N,u,C,o,x,p,A,F]);const W={theme:s,setTheme:a,themes:Object.keys(Rn),availableThemes:Rn,sidebarCollapsed:r,setSidebarCollapsed:i,compactMode:y,setCompactMode:b,animations:o,setAnimations:c,reducedMotion:u,setReducedMotion:f,highContrast:N,setHighContrast:S,fontSize:x,setFontSize:h,fontSizes:P,borderRadius:p,setBorderRadius:g,borderRadiusOptions:z,customAccentColor:C,setCustomAccentColor:k,soundEnabled:A,setSoundEnabled:G,autoSave:F,setAutoSave:E};return e.jsx(W4.Provider,{value:W,children:t})},_v=v.createContext();function ja({defaultValue:t,value:s,onValueChange:a,className:r,children:i,...o}){const[c,u]=v.useState(s||t),f=h=>{s===void 0&&u(h),a?.(h)},x=s!==void 0?s:c;return e.jsx(_v.Provider,{value:{value:x,onValueChange:f},children:e.jsx("div",{className:Ze("flex flex-col gap-2",r),...o,children:i})})}function Sa({className:t,children:s,...a}){return e.jsx("div",{className:Ze("inline-flex h-9 w-fit items-center justify-center rounded-lg bg-gray-100 p-1 text-gray-500 dark:bg-gray-800 dark:text-gray-400",t),...a,children:s})}function ft({value:t,className:s,children:a,...r}){const{value:i,onValueChange:o}=v.useContext(_v),c=i===t;return e.jsx("button",{className:Ze("inline-flex h-7 flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-3 py-1 text-sm font-medium whitespace-nowrap transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",c?"bg-white text-gray-900 shadow-sm dark:bg-gray-700 dark:text-gray-100":"hover:bg-white/50 hover:text-gray-700 dark:hover:bg-gray-700/50 dark:hover:text-gray-300",s),onClick:()=>o(t),...r,children:a})}function pt({value:t,className:s,children:a,...r}){const{value:i}=v.useContext(_v);return i!==t?null:e.jsx("div",{className:Ze("flex-1 outline-none",s),...r,children:a})}const DR=()=>{const{theme:t,setTheme:s}=id(),[a,r]=v.useState(!1),i={default:{name:"Default",icon:BS,themes:[]},color:{name:"Colors",icon:Lc,themes:[]},neutral:{name:"Neutral",icon:o_,themes:[]},special:{name:"Special",icon:Rl,themes:[]}};Object.entries(Rn).forEach(([u,f])=>{const x=f.category||"default";i[x]&&i[x].themes.push({key:u,...f})});const o=u=>{s(u),D.success(`Theme changed to ${Rn[u]?.name||u}`)},c=({themeKey:u,themeData:f,isSelected:x})=>e.jsxs(K,{className:`cursor-pointer transition-all duration-200 hover:shadow-md ${x?"ring-2 ring-primary shadow-md":""}`,onClick:()=>o(u),children:[e.jsxs(xe,{className:"pb-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(pe,{className:"text-sm font-medium",children:f.name}),x&&e.jsx(yi,{className:"h-4 w-4 text-primary"})]}),e.jsx(ot,{className:"text-xs",children:f.description})]}),e.jsx(Y,{className:"pt-0",children:e.jsx("div",{className:`h-16 rounded-md border-2 ${f.preview} flex items-center justify-center text-xs font-medium`,style:{backgroundColor:f.colors?.background,color:f.colors?.foreground,borderColor:f.colors?.primary},children:e.jsxs("div",{className:"flex gap-1",children:[e.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:f.colors?.primary}}),e.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:f.colors?.secondary}}),e.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:f.colors?.accent}})]})})})]});return e.jsxs(Bt,{open:a,onOpenChange:r,children:[e.jsx(wa,{asChild:!0,children:e.jsxs(R,{variant:"outline",size:"sm",className:"theme-toggle",children:[e.jsx(Lc,{className:"h-4 w-4 mr-2"}),"Theme"]})}),e.jsxs(zt,{className:"max-w-4xl max-h-[80vh] overflow-y-auto",children:[e.jsxs(Ut,{children:[e.jsxs(Vt,{className:"flex items-center gap-2",children:[e.jsx(Lc,{className:"h-5 w-5"}),"Choose Your Theme"]}),e.jsx(es,{children:"Customize your ominbiz experience with beautiful themes"})]}),e.jsxs(ja,{defaultValue:"default",className:"w-full",children:[e.jsx(Sa,{className:"grid w-full grid-cols-4",children:Object.entries(i).map(([u,f])=>{const x=f.icon;return e.jsxs(ft,{value:u,className:"flex items-center gap-2",children:[e.jsx(x,{className:"h-4 w-4"}),f.name]},u)})}),Object.entries(i).map(([u,f])=>e.jsx(pt,{value:u,className:"mt-4",children:e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:f.themes.map(({key:x,...h})=>e.jsx(c,{themeKey:x,themeData:h,isSelected:t===x},x))})},u))]}),e.jsxs("div",{className:"flex items-center justify-between pt-4 border-t",children:[e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs(De,{variant:"secondary",children:["Current: ",Rn[t]?.name]})}),e.jsx(R,{variant:"outline",onClick:()=>r(!1),children:"Done"})]})]})]})};function OR({...t}){return e.jsx("nav",{"aria-label":"breadcrumb",...t})}function RR({className:t,...s}){return e.jsx("ol",{className:Ze("flex flex-wrap items-center gap-1.5 break-words text-sm text-muted-foreground sm:gap-2.5",t),...s})}function PR({className:t,...s}){return e.jsx("li",{className:Ze("inline-flex items-center gap-1.5",t),...s})}function MR({asChild:t,className:s,...a}){const r=t?uv:"a";return e.jsx(r,{className:Ze("transition-colors hover:text-foreground",s),...a})}function FR({className:t,...s}){return e.jsx("span",{role:"link","aria-disabled":"true","aria-current":"page",className:Ze("font-normal text-foreground",t),...s})}function LR({children:t,className:s,...a}){return e.jsx("li",{role:"presentation","aria-hidden":"true",className:Ze("[&>svg]:size-3.5",s),...a,children:t??e.jsx(zS,{})})}const IR=()=>{const{logout:t,user:s}=_s(),a=Ka(),r=hv(),[i,o]=v.useState(""),c=()=>{t(),a("/")},u=p=>{p.preventDefault(),i.trim()&&(a(`/dashboard/search?q=${encodeURIComponent(i.trim())}`),D.info(`Searching for: "${i.trim()}"`))},x=(()=>{const p=r.pathname.split("/").filter(Boolean),g=[];if(p.length>0&&p[0]==="dashboard"&&(g.push({name:"Dashboard",path:"/dashboard"}),p.length>1)){const y=p[1],b={inventory:"Inventory",ecommerce:"E-Commerce",appointments:"Appointments",finances:"Finances",team:"Team","ai-insights":"AI Insights",locations:"Locations",settings:"Settings",profile:"Profile",products:"Products",help:"Help & Support",analytics:"Analytics",maps:"Maps",purchasing:"Purchasing"};g.push({name:b[y]||y.charAt(0).toUpperCase()+y.slice(1),path:`/dashboard/${y}`,current:!0})}return g})(),h=s?.name||s?.fullName||"Admin";return h.split(" ").map(p=>p[0]).join("").toUpperCase(),e.jsxs("header",{className:"bg-card border-b border-border px-6 py-4 shadow-sm",children:[x.length>0&&e.jsx("div",{className:"mb-4",children:e.jsx(OR,{children:e.jsx(RR,{children:x.map((p,g)=>e.jsxs(xt.Fragment,{children:[e.jsx(PR,{children:p.current?e.jsx(FR,{className:"text-primary font-medium",children:p.name}):e.jsx(MR,{href:p.path,className:"text-foreground hover:text-primary transition-colors",children:p.name})}),g<x.length-1&&e.jsx(LR,{})]},p.path))})})}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center space-x-4 flex-1 max-w-md",children:e.jsxs("form",{onSubmit:u,className:"relative flex-1",children:[e.jsx(oa,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(me,{value:i,onChange:p=>o(p.target.value),placeholder:"Search across modules...",className:"pl-10 bg-accent/50 border-input focus-visible:ring-primary"})]})}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(DR,{}),e.jsx(kR,{}),e.jsxs(bg,{children:[e.jsx(wg,{asChild:!0,children:e.jsxs(R,{variant:"ghost",className:"flex items-center space-x-2 hover:bg-accent",children:[e.jsx(AR,{user:s,size:"sm",editable:!1}),e.jsxs("div",{className:"hidden md:block text-left",children:[e.jsx("p",{className:"text-sm font-medium text-foreground",children:h}),e.jsx("p",{className:"text-xs text-muted-foreground",children:s?.role||"User"})]})]})}),e.jsxs(Sg,{align:"end",className:"border-border",children:[e.jsx(mR,{className:"text-foreground font-medium",children:"My Account"}),e.jsx(nw,{}),e.jsxs(Wn,{className:"text-foreground hover:bg-accent focus:bg-accent cursor-pointer",onClick:()=>a("/dashboard/profile"),children:[e.jsx(la,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"Profile"})]}),e.jsxs(Wn,{className:"text-foreground hover:bg-accent focus:bg-accent cursor-pointer",onClick:()=>a("/dashboard/wallet"),children:[e.jsx(td,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"Wallet"})]}),e.jsxs(Wn,{className:"text-foreground hover:bg-accent focus:bg-accent cursor-pointer",onClick:()=>a("/dashboard/settings"),children:[e.jsx(Wa,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"Settings"})]}),e.jsx(nw,{}),e.jsxs(Wn,{className:"text-destructive hover:bg-destructive/10 focus:bg-destructive/10 cursor-pointer",onClick:c,children:[e.jsx(rf,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"Log out"})]})]})]})]})]})]})};function As({className:t,...s}){return e.jsx("textarea",{"data-slot":"textarea",className:Ze("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),...s})}const G4=()=>{const t=hv(),{inviteCode:s}=el(),{user:a}=_s(),[r,i]=v.useState(!1),[o,c]=v.useState(!1),[u,f]=v.useState("admin"),[x,h]=v.useState([]),[p,g]=v.useState(""),[y,b]=v.useState(!1),[N,S]=v.useState(!1),[C,k]=v.useState([]),[A,G]=v.useState({}),[F,E]=v.useState(!1),[T,_]=v.useState(!1),[P,z]=v.useState(""),[V,W]=v.useState([]),[q,B]=v.useState(!1),[ae,U]=v.useState("professional"),[Z,de]=v.useState(!0),[H,se]=v.useState({}),ee=v.useRef(null);v.useRef(null);const L=v.useRef([]),X=()=>{ee.current?.scrollIntoView({behavior:"smooth"})};v.useEffect(()=>{X()},[x]),v.useEffect(()=>{const je=t.pathname.toLowerCase();je.includes("storefront")||je.includes("client")?f("storefront"):f("admin")},[t.pathname]),v.useEffect(()=>{const je=()=>u==="storefront"?{id:"1",text:"Welcome to our store!  I'm your shopping assistant. I can help you find products, track your orders, book appointments, and answer any questions about our services. How can I assist you today?",sender:"support",timestamp:new Date}:{id:"1",text:`Hello ${a?.name||"there"}!  I'm your ominbiz AI Assistant, powered by advanced machine learning. I can help with analytics, inventory insights, sales trends, financial data, and much more. What would you like to explore?`,sender:"support",timestamp:new Date};x.length===0&&h([je()])},[u,a,x.length]),v.useEffect(()=>{const je=async()=>{try{const Ue=t.pathname.split("/").pop()||"dashboard",st=localStorage.getItem("token"),Dt=localStorage.getItem("customerToken"),Pt={currentPage:Ue,userName:a?.name||"User",userRole:a?.role||(u==="storefront"?"Customer":"Admin"),dashboardType:u,timestamp:new Date().toISOString(),recentActions:JSON.parse(localStorage.getItem("recentActions")||"[]"),aiPersonality:ae};if(st&&u==="admin"){const Jt={Authorization:`Bearer ${st}`};try{const[as,ke,we,nt]=await Promise.allSettled([Ne.get("/orders",{headers:Jt}),Ne.get("/products",{headers:Jt}),Ne.get("/transactions",{headers:Jt}),Ne.get("/appointments",{headers:Jt})]),Ke=as.status==="fulfilled"?as.value?.data||[]:[],jt=ke.status==="fulfilled"?ke.value?.data||[]:[],wt=we.status==="fulfilled"?we.value?.data||[]:[],Xt=nt.status==="fulfilled"?nt.value?.data||[]:[];Pt.totalOrders=Ke.length,Pt.totalProducts=jt.length,Pt.totalRevenue=Array.isArray(wt)?wt.reduce((ss,ge)=>ss+(ge.amount||0),0):0,Pt.pendingOrders=Ke.filter(ss=>ss.status==="pending").length,Pt.lowStockItems=jt.filter(ss=>ss.stock<10).length,Pt.upcomingAppointments=Xt.filter(ss=>new Date(ss.date)>new Date).length,se(Pt)}catch(as){console.error("Error fetching admin data:",as)}}else if(u==="storefront"&&s)try{const Jt=Dt?{Authorization:`Bearer ${Dt}`}:{},[as,ke]=await Promise.allSettled([Ne.get("/public/products",{params:{inviteCode:s}}),Dt?Ne.get("/customer/orders",{headers:Jt}):Promise.resolve({status:"rejected"})]);Pt.availableProducts=as.status==="fulfilled"&&as.value?.data?.length||0,Pt.myOrders=ke.status==="fulfilled"&&ke.value?.data?.orders?.length||0}catch(Jt){console.error("Error fetching storefront data:",Jt)}G(Pt),O(Pt),Z&&Le(Pt)}catch(Ue){console.error("Error gathering context:",Ue)}};je();const fe=setInterval(je,3e4);return()=>clearInterval(fe)},[t.pathname,a,u,ae,Z,s]);const O=je=>{const fe=[];je.dashboardType==="storefront"?je.currentPage==="storefront"||je.currentPage==="products"?fe.push("Show me popular products","What's on sale today?","Help me find a specific item"):je.currentPage==="appointments"||je.currentPage==="book"?fe.push("Book an appointment","Check my booking status","What services are available?"):je.currentPage.includes("order")?fe.push("Track my order","View my order history","What's my delivery status?"):fe.push("Browse products","Check store hours","How can I contact support?"):je.currentPage==="dashboard"?fe.push("Show today's sales summary","Top performing products?",je.lowStockItems>0?`${je.lowStockItems} items need restocking`:"Check inventory status"):je.currentPage==="analytics"?fe.push("Analyze sales trends","Compare monthly performance","Predict next month's revenue"):je.currentPage==="inventory"||je.currentPage==="products"?fe.push("Show low stock alerts","Suggest reorder quantities","Analyze inventory turnover"):je.currentPage==="wallet"||je.currentPage==="finances"?fe.push("Show spending patterns","Revenue breakdown","Cost optimization tips"):je.currentPage==="team"?fe.push("Team performance metrics","Schedule management","Add new team member"):fe.push("Navigate dashboard","Show key metrics","Business insights"),k(fe)},J=async(je=null)=>{const fe=je||p;if(!fe.trim())return;const Ue={id:Date.now().toString(),text:fe,sender:"user",timestamp:new Date};h(Dt=>[...Dt,Ue]),g(""),b(!0),L.current.push({role:"user",content:fe,context:A,timestamp:new Date});const st=JSON.parse(localStorage.getItem("recentActions")||"[]");st.unshift({action:"ai_query",query:fe,timestamp:new Date}),localStorage.setItem("recentActions",JSON.stringify(st.slice(0,10)));try{const Dt=await ie(fe,A,L.current);b(!1);const Pt={id:(Date.now()+1).toString(),text:Dt,sender:"support",timestamp:new Date};h(Jt=>[...Jt,Pt]),L.current.push({role:"assistant",content:Dt,timestamp:new Date}),r||S(!0)}catch(Dt){console.error("AI Response Error:",Dt),b(!1);const Pt={id:(Date.now()+1).toString(),text:"I apologize, but I encountered an issue processing your request. However, based on your context, I can suggest: "+C[0],sender:"support",timestamp:new Date};h(Jt=>[...Jt,Pt])}},ie=async(je,fe,Ue)=>{try{const st=localStorage.getItem("token")||localStorage.getItem("customerToken"),Dt=be(fe,Ue),Pt={...fe,...H,conversationCount:Ue.length,personality:ae,previousQueries:oe(5)},Jt=await Ne.post("/ai/chat",{message:je,context:Pt,history:Ue.slice(-10),systemPrompt:Dt,dashboardType:u},{headers:st?{Authorization:`Bearer ${st}`}:{},timeout:3e4});return Z&&Jt.data.response&&ve(je,Jt.data.response,fe),Jt.data.response}catch(st){return console.error("AI API Error:",st),(st.response?.status===503||st.response?.status===500)&&console.log("AI service unavailable, using intelligent fallback"),Pe(je,fe)}},be=(je,fe)=>{const Ue="You are an intelligent AI assistant for ominbiz, powered by Google Gemini AI.";return je.dashboardType==="storefront"?`${Ue}

You are assisting a CUSTOMER on the storefront:
- User: ${je.userName}
- Role: Customer/Shopper
- Current Page: ${je.currentPage}
- Available Products: ${je.availableProducts||"N/A"}
- Their Orders: ${je.myOrders||0}

Your capabilities:
- Help find and recommend products
- Track orders and deliveries
- Book appointments/services
- Answer questions about products and services
- Provide shopping assistance

Tone: ${ae==="friendly"?"Warm, friendly, and helpful":ae==="professional"?"Professional but approachable":"Clear and informative"}
- Be customer-focused and sales-oriented
- Recommend products when relevant
- Make shopping easy and enjoyable
- Use emojis sparingly for a friendly touch

This is interaction #${fe.length+1}.`:`${Ue}

You are assisting a BUSINESS ADMIN/MANAGER:
- User: ${je.userName} (${je.userRole})
- Dashboard: Admin/Business Management
- Current Page: ${je.currentPage}

Real-time Business Metrics:
- Total Orders: ${je.totalOrders||0}
- Total Products: ${je.totalProducts||0}
- Total Revenue: $${je.totalRevenue||0}
- Pending Orders: ${je.pendingOrders||0}
- Low Stock Items: ${je.lowStockItems||0}
- Upcoming Appointments: ${je.upcomingAppointments||0}

You have access to:
- Analytics & Sales Reports
- Inventory Management
- Order Processing
- Financial Data & Wallet
- Team Management
- AI-powered Insights
- Customer Management

Tone: ${ae==="technical"?"Technical and data-focused":ae==="professional"?"Professional and analytical":"Clear and actionable"}
- Provide data-driven insights
- Offer actionable business recommendations
- Focus on efficiency and growth
- Be concise but comprehensive
- Use business terminology

This is interaction #${fe.length+1} with this user.`},Le=v.useCallback(je=>{try{const fe=JSON.parse(localStorage.getItem("aiTrainingContexts")||"[]");fe.push({...je,timestamp:new Date().toISOString(),sessionId:localStorage.getItem("sessionId")||Date.now().toString()}),localStorage.setItem("aiTrainingContexts",JSON.stringify(fe.slice(-200)))}catch(fe){console.error("Context storage error:",fe)}},[]),ve=(je,fe,Ue)=>{try{const st=JSON.parse(localStorage.getItem("aiSuccessfulInteractions")||"[]");st.push({question:je,answer:fe,context:{page:Ue.currentPage,dashboardType:Ue.dashboardType,userRole:Ue.userRole},timestamp:new Date().toISOString(),rating:null}),localStorage.setItem("aiSuccessfulInteractions",JSON.stringify(st.slice(-500)))}catch(st){console.error("Interaction storage error:",st)}},oe=(je=5)=>{try{return JSON.parse(localStorage.getItem("aiTrainingData")||"[]").slice(-je).map(Ue=>Ue.query)}catch{return[]}},Pe=(je,fe)=>{const Ue=je.toLowerCase(),st=fe.dashboardType==="storefront";if(gt(je,fe),Ue.match(/^(hi|hello|hey|good morning|good afternoon|good evening|greetings)/))if(st){const Pt=["Hello! Welcome to our store. How can I help you find what you're looking for today?","Hi there! I'm here to make your shopping experience amazing. What can I help you with?","Hey! Thanks for visiting. Need help finding products or tracking an order?","Good day! I'm your shopping assistant. How may I assist you?"];return Pt[Math.floor(Math.random()*Pt.length)]}else{const Pt=[`Hello ${fe.userName}! Ready to dive into your business metrics. What would you like to explore?`,`Hi ${fe.userName}! Your dashboard shows ${fe.totalOrders||0} orders and ${fe.totalProducts||0} products. How can I help?`,`Good to see you ${fe.userName}! I can help with analytics, inventory, or any business insights you need.`,`Hey ${fe.userName}! Your business intelligence assistant is ready. What shall we analyze today?`];return Pt[Math.floor(Math.random()*Pt.length)]}if(Ue.includes("how are you")||Ue.includes("how do you do"))return st?"I'm doing great, thanks for asking! I'm here to help you find the perfect products. What are you shopping for today?":"I'm functioning optimally! All systems ready to assist with your business operations. What can I help you analyze today?";if(Ue.includes("what is your name")||Ue.includes("who are you"))return st?"I'm your ominbiz Shopping Assistant, powered by AI! I can help you browse products, track orders, and answer any questions about our store.":`I'm ominbiz Business AI, powered by Google Gemini. I analyze your business data, provide insights, and help optimize operations. I've learned from ${L.current.length} interactions with you!`;if(Ue.includes("thank you")||Ue.includes("thanks"))return"You're welcome! I'm always here to help. Feel free to ask if you need anything else.";if(st){if(Ue.includes("product")||Ue.includes("buy")||Ue.includes("shop"))return`We have ${fe.availableProducts||"many"} products available! I can help you find exactly what you need. Are you looking for something specific, or would you like to browse our categories?`;if(Ue.includes("order")||Ue.includes("delivery")||Ue.includes("track"))return fe.myOrders>0?`You have ${fe.myOrders} order${fe.myOrders!==1?"s":""} with us. Would you like me to help you track your latest order or view your order history?`:"You haven't placed any orders yet. Would you like to browse our products? I can help you find what you're looking for!";if(Ue.includes("appointment")||Ue.includes("book"))return"I can help you book an appointment! What type of service are you interested in? Let me show you available time slots."}else{if(Ue.includes("sales")||Ue.includes("revenue"))return`Your current revenue is $${fe.totalRevenue?.toFixed(2)||0} from ${fe.totalOrders||0} orders. ${fe.pendingOrders>0?`You have ${fe.pendingOrders} pending orders to process. `:""}Navigate to Analytics for detailed sales trends and insights. Shall I guide you there?`;if(Ue.includes("inventory")||Ue.includes("stock"))return`You have ${fe.totalProducts||0} products in inventory. ${fe.lowStockItems>0?` Alert: ${fe.lowStockItems} items are running low on stock!`:"Stock levels look good!"} Check the Inventory page for detailed stock management. Need help?`;if(Ue.includes("appointment"))return`You have ${fe.upcomingAppointments||0} upcoming appointments. Navigate to the Appointments page to view the schedule, manage bookings, and set availability. Would you like help with appointment management?`}if(Ue.includes("navigate")||Ue.includes("go to")||Ue.includes("show me"))return`I can help you navigate! Here are the main sections:

Dashboard - Overview & KPIs
Analytics - Sales & Performance
Inventory - Stock Management
Wallet - Financial Transactions
Team - Staff Management
AI Insights - Intelligent Analysis

Which section would you like to visit?`;if(Ue.includes("insight")||Ue.includes("suggest")||Ue.includes("recommend")){const Pt=fe.currentPage,Jt=bt();return Pt==="dashboard"?`Here are some insights for your dashboard:

- Check your Analytics page for trend analysis
- Review inventory for low stock items
- Monitor your wallet for expense patterns
- Use AI Insights for predictive analytics${Jt?`

Based on your previous interactions, you frequently ask about `+Jt.topQuery:""}

Would you like me to elaborate on any of these?`:`Based on your activity on the ${Pt} page and ${L.current.length} previous interactions, I suggest exploring related features and checking the AI Insights section for personalized recommendations.`}if(Ue.includes("help")||Ue.includes("how")||Ue.includes("what can you"))return`I'm here to help! I can:

- Answer questions about your business data
- Provide analytics insights
- Help navigate the dashboard
- Suggest optimizations
- Analyze trends
- Track finances
- Learn from our interactions

You're currently on the ${fe.currentPage} page with ${fe.totalOrders||0} orders. What specific information would you like?`;if(Ue.includes("what can you do")||Ue.includes("your capabilities"))return`I can assist you with:

1. Data Analysis - Review sales, inventory, and financial data
2. Navigation - Guide you through the platform
3. Insights - Provide business intelligence
4. Recommendations - Suggest optimizations
5. Learning - I adapt to your preferences over time

I've learned from ${L.current.length} interactions with you. How can I help today?`;const Dt=lt(Ue);return Dt?`${Dt} ${st?"How can I help you shop today?":`You're on the ${fe.currentPage} page. ${C[0]?`Try: "${C[0]}"`:""}`}`:st?`I understand you're asking about "${je}". While I process that, you have ${fe.availableProducts||"many"} products to browse and ${fe.myOrders||0} order${fe.myOrders!==1?"s":""}. ${C[0]?`You might want to: "${C[0]}"`:"How else can I help?"}`:`I understand your query about "${je}". Currently on ${fe.currentPage} page - you have ${fe.totalOrders||0} orders, $${fe.totalRevenue?.toFixed(2)||0} revenue, and ${fe.totalProducts||0} products. ${C[0]?`Try: "${C[0]}"`:"What would you like to explore?"}`},Xe=v.useCallback(()=>{if(!("webkitSpeechRecognition"in window)&&!("SpeechRecognition"in window)){alert("Voice input is not supported in your browser. Please use Chrome or Edge.");return}const je=window.SpeechRecognition||window.webkitSpeechRecognition,fe=new je;fe.continuous=!1,fe.interimResults=!1,fe.lang="en-US",fe.onstart=()=>{B(!0)},fe.onresult=Ue=>{const st=Ue.results[0][0].transcript;g(st),B(!1)},fe.onerror=Ue=>{console.error("Speech recognition error:",Ue.error),B(!1),Ue.error==="no-speech"&&alert("No speech detected. Please try again.")},fe.onend=()=>{B(!1)},q?fe.stop():fe.start()},[q]),yt=v.useCallback(je=>{navigator.clipboard.writeText(je).then(()=>{})},[]),vt=v.useCallback((je,fe)=>{try{const Ue=JSON.parse(localStorage.getItem("aiResponseRatings")||"[]");Ue.push({messageId:je,isPositive:fe,timestamp:new Date().toISOString()}),localStorage.setItem("aiResponseRatings",JSON.stringify(Ue))}catch(Ue){console.error("Rating storage error:",Ue)}},[]),gt=(je,fe)=>{try{const Ue=JSON.parse(localStorage.getItem("aiTrainingData")||"[]");Ue.push({query:je.toLowerCase(),context:{page:fe.currentPage,timestamp:new Date().toISOString(),userRole:fe.userRole},sessionId:localStorage.getItem("sessionId")||Date.now().toString()}),localStorage.setItem("aiTrainingData",JSON.stringify(Ue.slice(-100)));const st=JSON.parse(localStorage.getItem("aiQueryFrequency")||"{}"),Dt=je.toLowerCase().substring(0,50);st[Dt]=(st[Dt]||0)+1,localStorage.setItem("aiQueryFrequency",JSON.stringify(st))}catch(Ue){console.error("Learning storage error:",Ue)}},bt=()=>{try{const je=JSON.parse(localStorage.getItem("aiQueryFrequency")||"{}"),fe=Object.entries(je);if(fe.length===0)return null;const Ue=fe.reduce((st,Dt)=>st[1]>Dt[1]?st:Dt);return{topQuery:Ue[0],count:Ue[1]}}catch{return null}},lt=je=>{try{const Ue=JSON.parse(localStorage.getItem("aiTrainingData")||"[]").filter(st=>st.query.includes(je.substring(0,10))||je.includes(st.query.substring(0,10)));return Ue.length>0?`Based on ${Ue.length} similar previous queries, I can help you with that.`:null}catch{return null}};v.useEffect(()=>{const je=localStorage.getItem("ai_conversation_history");if(je)try{const fe=JSON.parse(je);W(fe)}catch(fe){console.error("Error loading history:",fe)}},[]);const ms=()=>{const fe=[{id:Date.now().toString(),date:new Date().toISOString(),messages:x,context:A,summary:x.length>1?x[1].text.substring(0,50)+"...":"New conversation"},...V].slice(0,50);W(fe),localStorage.setItem("ai_conversation_history",JSON.stringify(fe))},is=()=>{const je=JSON.stringify(x,null,2),fe=new Blob([je],{type:"application/json"}),Ue=URL.createObjectURL(fe),st=document.createElement("a");st.href=Ue,st.download=`ominbiz-ai-chat-${new Date().toISOString()}.json`,st.click(),URL.revokeObjectURL(Ue)},Ms=()=>{window.confirm("Are you sure you want to clear this conversation?")&&h([{id:"1",text:"Hello! I'm your AI assistant. How can I help you today?",sender:"support",timestamp:new Date}])},ys=je=>{const fe=V.filter(Ue=>Ue.id!==je);W(fe),localStorage.setItem("ai_conversation_history",JSON.stringify(fe))},Xs=je=>{h(je.messages),E(!1)},xs=V.filter(je=>je.summary.toLowerCase().includes(P.toLowerCase())||je.messages.some(fe=>fe.text.toLowerCase().includes(P.toLowerCase()))),Rt=()=>{i(!0),S(!1)},sa=()=>{c(!o)},Te=v.useCallback(async()=>{G(je=>({...je,timestamp:new Date().toISOString()}))},[]);return e.jsxs(e.Fragment,{children:[!r&&e.jsx("div",{className:"fixed bottom-6 right-6 z-50",children:e.jsxs(R,{onClick:Rt,className:Ze("h-16 w-16 rounded-full shadow-2xl hover:shadow-primary/50 transition-all duration-300 hover:scale-110","bg-gradient-to-r from-primary to-accent animate-pulse-slow relative"),size:"icon",children:[N&&e.jsx(De,{className:"absolute -top-1 -right-1 h-5 w-5 rounded-full bg-red-500 text-white text-xs p-0 flex items-center justify-center animate-bounce",children:"1"}),e.jsx("div",{className:"absolute inset-0 rounded-full bg-gradient-to-r from-primary/20 to-accent/20 animate-ping"}),e.jsx(ta,{className:"h-7 w-7 relative z-10"})]})}),r&&e.jsxs("div",{className:"fixed bottom-6 right-6 z-50",children:[e.jsx("div",{className:"fixed inset-0 bg-black/20 backdrop-blur-sm -z-10",onClick:()=>i(!1)}),e.jsxs(K,{className:Ze("shadow-2xl border-2 border-primary/30 flex flex-col overflow-hidden backdrop-blur-md bg-card/95 animate-in slide-in-from-bottom-5 duration-300 transition-all",o?"w-full h-full m-0 rounded-none":"w-96 sm:w-[480px] h-[650px] rounded-2xl"),children:[e.jsxs("div",{className:"relative bg-gradient-to-r from-primary via-accent to-primary text-primary-foreground p-4 shadow-lg",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/10 to-transparent animate-shimmer"}),e.jsxs("div",{className:"relative flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"h-10 w-10 rounded-full bg-primary-foreground/20 flex items-center justify-center backdrop-blur-sm",children:e.jsx(f0,{className:"h-6 w-6"})}),e.jsx("div",{className:"absolute bottom-0 right-0 h-3 w-3 bg-green-500 rounded-full border-2 border-primary animate-pulse"})]}),e.jsxs("div",{children:[e.jsxs("p",{className:"font-bold text-lg flex items-center gap-2",children:["AI Assistant",e.jsx(Rl,{className:"h-4 w-4 animate-spin-slow"})]}),e.jsx("p",{className:"text-xs opacity-90",children:y?"Typing...":"Online  Ready to help"})]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(R,{variant:"ghost",size:"icon",onClick:Te,className:"text-primary-foreground hover:bg-primary-foreground/20 transition-all duration-300",title:"Refresh Data",children:e.jsx(cs,{className:"h-4 w-4"})}),e.jsx(R,{variant:"ghost",size:"icon",onClick:()=>E(!F),className:"text-primary-foreground hover:bg-primary-foreground/20 transition-all duration-300",title:"Conversation History",children:e.jsx(Al,{className:"h-4 w-4"})}),e.jsx(R,{variant:"ghost",size:"icon",onClick:()=>_(!T),className:"text-primary-foreground hover:bg-primary-foreground/20 transition-all duration-300",title:"Settings",children:e.jsx(Wa,{className:"h-4 w-4"})}),e.jsx(R,{variant:"ghost",size:"icon",onClick:sa,className:"text-primary-foreground hover:bg-primary-foreground/20 transition-all duration-300",title:o?"Minimize":"Maximize",children:o?e.jsx(c_,{className:"h-4 w-4"}):e.jsx(d_,{className:"h-4 w-4"})}),e.jsx(R,{variant:"ghost",size:"icon",onClick:is,className:"text-primary-foreground hover:bg-primary-foreground/20 transition-all duration-300",title:"Export Conversation",children:e.jsx(Ma,{className:"h-4 w-4"})}),e.jsx(R,{variant:"ghost",size:"icon",onClick:Ms,className:"text-primary-foreground hover:bg-primary-foreground/20 transition-all duration-300",title:"Clear Conversation",children:e.jsx(ga,{className:"h-4 w-4"})}),e.jsx(R,{variant:"ghost",size:"icon",onClick:()=>i(!1),className:"text-primary-foreground hover:bg-primary-foreground/20 hover:rotate-90 transition-all duration-300",children:e.jsx(jr,{className:"h-5 w-5"})})]})]}),e.jsxs("div",{className:"relative mt-2 flex items-center justify-between gap-2 flex-wrap",children:[e.jsx("div",{className:"flex items-center gap-2",children:u==="admin"?e.jsxs(e.Fragment,{children:[e.jsxs(De,{variant:"secondary",className:"text-xs bg-primary-foreground/20",children:[e.jsx(er,{className:"h-3 w-3 mr-1"}),"$",H.totalRevenue?.toFixed(0)||0]}),e.jsxs(De,{variant:"secondary",className:"text-xs bg-primary-foreground/20",children:[e.jsx(Yt,{className:"h-3 w-3 mr-1"}),H.totalOrders||0," orders"]}),H.lowStockItems>0&&e.jsxs(De,{variant:"destructive",className:"text-xs animate-pulse",children:[e.jsx(ks,{className:"h-3 w-3 mr-1"}),H.lowStockItems," low stock"]})]}):e.jsxs(e.Fragment,{children:[e.jsxs(De,{variant:"secondary",className:"text-xs bg-primary-foreground/20",children:[e.jsx(ws,{className:"h-3 w-3 mr-1"}),A.availableProducts||0," products"]}),e.jsxs(De,{variant:"secondary",className:"text-xs bg-primary-foreground/20",children:[A.myOrders||0," my orders"]})]})}),L.current.length>2&&e.jsxs(De,{variant:"secondary",className:"text-xs bg-primary-foreground/20",children:[e.jsx(bo,{className:"h-3 w-3 mr-1"}),L.current.length," learned"]})]})]}),T&&e.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 bg-muted/30",children:[e.jsxs("h3",{className:"font-semibold flex items-center gap-2",children:[e.jsx(Wa,{className:"h-4 w-4"}),"AI Assistant Settings"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"AI Personality"}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:["professional","friendly","technical"].map(je=>e.jsx(R,{variant:ae===je?"default":"outline",size:"sm",onClick:()=>U(je),className:"capitalize",children:je},je))})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"AI Training"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Learn from conversations"})]}),e.jsx(R,{variant:Z?"default":"outline",size:"sm",onClick:()=>de(!Z),children:Z?"Enabled":"Disabled"})]}),e.jsxs("div",{className:"border-t pt-3",children:[e.jsx("p",{className:"text-sm font-medium mb-2",children:"Training Statistics"}),e.jsxs("div",{className:"space-y-1 text-xs text-muted-foreground",children:[e.jsxs("p",{children:[" Conversations: ",V.length]}),e.jsxs("p",{children:[" Interactions: ",L.current.length]}),e.jsxs("p",{children:[" Dashboard: ",u==="storefront"?"Customer":"Admin"]}),e.jsxs("p",{children:[" Context Items: ",Object.keys(A).length]})]})]}),e.jsxs(R,{variant:"outline",size:"sm",onClick:ms,className:"w-full",children:[e.jsx(u_,{className:"h-4 w-4 mr-2"}),"Save Current Chat"]})]})]}),F&&e.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-2 bg-muted/30",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(oa,{className:"h-4 w-4 text-muted-foreground"}),e.jsx(me,{value:P,onChange:je=>z(je.target.value),placeholder:"Search conversations...",className:"h-8 text-sm"})]}),xs.length===0?e.jsxs("div",{className:"text-center text-sm text-muted-foreground py-8",children:[e.jsx(Al,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),e.jsx("p",{children:"No conversation history yet"}),e.jsx("p",{className:"text-xs mt-1",children:"Start chatting to build your history"})]}):xs.map(je=>e.jsx("div",{className:"p-3 border rounded-lg hover:bg-accent/50 cursor-pointer transition-colors group",onClick:()=>Xs(je),children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium line-clamp-2",children:je.summary}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:new Date(je.date).toLocaleString()}),e.jsxs(De,{variant:"outline",className:"text-xs mt-1",children:[je.messages.length," messages"]})]}),e.jsx(R,{variant:"ghost",size:"icon",className:"h-6 w-6 opacity-0 group-hover:opacity-100 transition-opacity",onClick:fe=>{fe.stopPropagation(),ys(je.id)},children:e.jsx(ga,{className:"h-3 w-3"})})]})},je.id))]}),!F&&!T&&e.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 bg-gradient-to-b from-accent/5 to-transparent",children:[x.map((je,fe)=>e.jsxs("div",{className:Ze("flex gap-2 items-end animate-in slide-in-from-bottom-3",je.sender==="user"?"justify-end":"justify-start"),style:{animationDelay:`${fe*50}ms`},children:[je.sender==="support"&&e.jsx("div",{className:"h-8 w-8 rounded-full bg-accent/20 flex items-center justify-center flex-shrink-0 border-2 border-accent",children:e.jsx(f0,{className:"h-5 w-5 text-accent"})}),e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:Ze("max-w-[85%] rounded-2xl p-3 shadow-md transition-all duration-200 hover:shadow-lg group relative",je.sender==="user"?"bg-primary text-primary-foreground rounded-br-sm ml-auto":"bg-card border-2 border-accent/30 text-foreground rounded-bl-sm"),children:[e.jsx("p",{className:"text-sm leading-relaxed whitespace-pre-wrap",children:je.text}),e.jsxs("div",{className:"flex items-center justify-between mt-1.5",children:[e.jsx("p",{className:"text-xs opacity-70 flex items-center gap-1",children:je.timestamp.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}),je.sender==="support"&&e.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[e.jsx(R,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:()=>yt(je.text),title:"Copy",children:e.jsx(pv,{className:"h-3 w-3"})}),e.jsx(R,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:()=>vt(je.id,!0),title:"Helpful",children:e.jsx(Ao,{className:"h-3 w-3"})}),e.jsx(R,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:()=>vt(je.id,!1),title:"Not Helpful",children:e.jsx(US,{className:"h-3 w-3"})})]})]})]})}),je.sender==="user"&&e.jsx("div",{className:"h-8 w-8 rounded-full bg-primary flex items-center justify-center flex-shrink-0 border-2 border-primary",children:e.jsx(la,{className:"h-5 w-5 text-primary-foreground"})})]},je.id)),y&&e.jsxs("div",{className:"flex gap-2 items-end animate-in fade-in duration-300",children:[e.jsx("div",{className:"h-8 w-8 rounded-full bg-accent/20 flex items-center justify-center flex-shrink-0 border-2 border-accent",children:e.jsx(f0,{className:"h-5 w-5 text-accent"})}),e.jsxs("div",{className:"bg-card border-2 border-accent/30 rounded-2xl rounded-bl-sm p-3 flex gap-1",children:[e.jsx("div",{className:"h-2 w-2 rounded-full bg-accent animate-bounce",style:{animationDelay:"0ms"}}),e.jsx("div",{className:"h-2 w-2 rounded-full bg-accent animate-bounce",style:{animationDelay:"150ms"}}),e.jsx("div",{className:"h-2 w-2 rounded-full bg-accent animate-bounce",style:{animationDelay:"300ms"}})]})]}),e.jsx("div",{ref:ee})]}),!F&&!T&&x.length<=2&&e.jsxs("div",{className:"px-4 pb-2 border-t border-border/50 bg-gradient-to-b from-accent/5 to-transparent",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2 mt-3",children:[e.jsx(_a,{className:"h-4 w-4 text-accent"}),e.jsx("p",{className:"text-xs font-medium text-accent",children:"Quick Actions:"})]}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:u==="admin"?e.jsxs(e.Fragment,{children:[e.jsxs(R,{variant:"outline",size:"sm",className:"text-xs justify-start",onClick:()=>J("Show sales summary"),children:[e.jsx(ra,{className:"h-3 w-3 mr-1"})," Sales"]}),e.jsxs(R,{variant:"outline",size:"sm",className:"text-xs justify-start",onClick:()=>J("Check inventory"),children:[e.jsx(Yt,{className:"h-3 w-3 mr-1"})," Inventory"]}),e.jsxs(R,{variant:"outline",size:"sm",className:"text-xs justify-start",onClick:()=>J("Business insights"),children:[e.jsx(bo,{className:"h-3 w-3 mr-1"})," Insights"]}),e.jsxs(R,{variant:"outline",size:"sm",className:"text-xs justify-start",onClick:()=>J("Team status"),children:[e.jsx(Zt,{className:"h-3 w-3 mr-1"})," Team"]})]}):e.jsxs(e.Fragment,{children:[e.jsxs(R,{variant:"outline",size:"sm",className:"text-xs justify-start",onClick:()=>J("Show products"),children:[e.jsx(ws,{className:"h-3 w-3 mr-1"})," Browse"]}),e.jsxs(R,{variant:"outline",size:"sm",className:"text-xs justify-start",onClick:()=>J("Track my order"),children:[e.jsx(Yt,{className:"h-3 w-3 mr-1"})," Track Order"]}),e.jsxs(R,{variant:"outline",size:"sm",className:"text-xs justify-start",onClick:()=>J("Book appointment"),children:[e.jsx(Ja,{className:"h-3 w-3 mr-1"})," Book"]}),e.jsxs(R,{variant:"outline",size:"sm",className:"text-xs justify-start",onClick:()=>J("Contact support"),children:[e.jsx(Rl,{className:"h-3 w-3 mr-1"})," Support"]})]})})]}),!F&&!T&&C.length>0&&x.length<=3&&e.jsxs("div",{className:"px-4 pb-2 border-t border-border/50 bg-gradient-to-b from-accent/5 to-transparent",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2 mt-3",children:[e.jsx(Ru,{className:"h-4 w-4 text-accent animate-pulse"}),e.jsx("p",{className:"text-xs font-medium text-accent",children:"Suggested questions:"})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:C.map((je,fe)=>e.jsx(R,{variant:"outline",size:"sm",onClick:()=>J(je),className:"text-xs hover:bg-accent/10 hover:border-accent transition-all",children:je},fe))})]}),e.jsxs("div",{className:"p-4 border-t-2 border-border bg-card/50 backdrop-blur-sm",children:[A.currentPage&&e.jsxs("div",{className:"mb-2 flex items-center justify-between gap-2 text-xs text-muted-foreground flex-wrap",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(bo,{className:"h-3 w-3 text-accent animate-pulse"}),e.jsx("span",{children:u==="storefront"?"Shopping":A.currentPage}),Z&&e.jsxs(De,{variant:"secondary",className:"text-xs px-1.5 py-0",children:[e.jsx(Is,{className:"h-3 w-3 mr-1"}),"Training"]})]}),e.jsx("div",{className:"flex items-center gap-1",children:u==="admin"&&A.pendingOrders>0&&e.jsxs(De,{variant:"destructive",className:"text-xs px-1.5 py-0 animate-pulse",children:[A.pendingOrders," pending"]})})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(As,{value:p,onChange:je=>g(je.target.value),onKeyPress:je=>{je.key==="Enter"&&!je.shiftKey&&(je.preventDefault(),J())},placeholder:u==="storefront"?"Ask me anything about products, orders, or services...":"Ask me about analytics, inventory, sales, or anything else...",className:"flex-1 min-h-[40px] max-h-[120px] border-2 border-input focus:border-primary transition-all bg-background/50 backdrop-blur-sm allow-select resize-none",rows:1}),e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx(R,{onClick:Xe,variant:q?"destructive":"outline",size:"icon",className:Ze("h-10 w-10 transition-all duration-200",q&&"animate-pulse"),title:q?"Stop recording":"Voice input",children:q?e.jsx(nf,{className:"h-4 w-4"}):e.jsx(lf,{className:"h-4 w-4"})}),e.jsx(R,{onClick:()=>J(),size:"icon",disabled:!p.trim()||y,className:Ze("h-10 w-10 transition-all duration-200",p.trim()&&"hover:scale-110 shadow-lg shadow-primary/50"),children:e.jsx(Fa,{className:"h-4 w-4"})})]})]}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-2 text-center flex items-center justify-center gap-1",children:[e.jsx(Rl,{className:"h-3 w-3"}),"Powered by Google Gemini AI  ",u==="storefront"?"Customer":"Business"," Mode  Enter to send"]})]})]})]})]})},BR=()=>e.jsxs("div",{className:"flex h-screen bg-background text-foreground",children:[e.jsx(uR,{}),e.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[e.jsx(IR,{}),e.jsx("main",{className:"flex-1 overflow-auto p-6 bg-background",children:e.jsx(t_,{})})]}),e.jsx(G4,{})]});function Xn({className:t,...s}){return e.jsx("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:e.jsx("table",{"data-slot":"table",className:Ze("w-full caption-bottom text-sm",t),...s})})}function Qn({className:t,...s}){return e.jsx("thead",{"data-slot":"table-header",className:Ze("[&_tr]:border-b",t),...s})}function Zn({className:t,...s}){return e.jsx("tbody",{"data-slot":"table-body",className:Ze("[&_tr:last-child]:border-0",t),...s})}function xa({className:t,...s}){return e.jsx("tr",{"data-slot":"table-row",className:Ze("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",t),...s})}function St({className:t,...s}){return e.jsx("th",{"data-slot":"table-head",className:Ze("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",t),...s})}function Nt({className:t,...s}){return e.jsx("td",{"data-slot":"table-cell",className:Ze("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",t),...s})}function Dv(t){const s=v.useRef({value:t,previous:t});return v.useMemo(()=>(s.current.value!==t&&(s.current.previous=s.current.value,s.current.value=t),s.current.previous),[t])}var q4=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),zR="VisuallyHidden",UR=v.forwardRef((t,s)=>e.jsx(ma.span,{...t,ref:s,style:{...q4,...t.style}}));UR.displayName=zR;var VR=[" ","Enter","ArrowUp","ArrowDown"],$R=[" ","Enter"],Oo="Select",[$f,Hf,HR]=MS(Oo),[ld]=Df(Oo,[HR,Of]),Wf=Of(),[WR,Vl]=ld(Oo),[GR,qR]=ld(Oo),K4=t=>{const{__scopeSelect:s,children:a,open:r,defaultOpen:i,onOpenChange:o,value:c,defaultValue:u,onValueChange:f,dir:x,name:h,autoComplete:p,disabled:g,required:y,form:b}=t,N=Wf(s),[S,C]=v.useState(null),[k,A]=v.useState(null),[G,F]=v.useState(!1),E=PS(x),[T,_]=Ou({prop:r,defaultProp:i??!1,onChange:o,caller:Oo}),[P,z]=Ou({prop:c,defaultProp:u,onChange:f,caller:Oo}),V=v.useRef(null),W=S?b||!!S.closest("form"):!0,[q,B]=v.useState(new Set),ae=Array.from(q).map(U=>U.props.value).join(";");return e.jsx(OS,{...N,children:e.jsxs(WR,{required:y,scope:s,trigger:S,onTriggerChange:C,valueNode:k,onValueNodeChange:A,valueNodeHasChildren:G,onValueNodeHasChildrenChange:F,contentId:Rf(),value:P,onValueChange:z,open:T,onOpenChange:_,dir:E,triggerPointerDownPosRef:V,disabled:g,children:[e.jsx($f.Provider,{scope:s,children:e.jsx(GR,{scope:t.__scopeSelect,onNativeOptionAdd:v.useCallback(U=>{B(Z=>new Set(Z).add(U))},[]),onNativeOptionRemove:v.useCallback(U=>{B(Z=>{const de=new Set(Z);return de.delete(U),de})},[]),children:a})}),W?e.jsxs(pC,{"aria-hidden":!0,required:y,tabIndex:-1,name:h,autoComplete:p,value:P,onChange:U=>z(U.target.value),disabled:g,form:b,children:[P===void 0?e.jsx("option",{value:""}):null,Array.from(q)]},ae):null]})})};K4.displayName=Oo;var Y4="SelectTrigger",X4=v.forwardRef((t,s)=>{const{__scopeSelect:a,disabled:r=!1,...i}=t,o=Wf(a),c=Vl(Y4,a),u=c.disabled||r,f=qa(s,c.onTriggerChange),x=Hf(a),h=v.useRef("touch"),[p,g,y]=vC(N=>{const S=x().filter(A=>!A.disabled),C=S.find(A=>A.value===c.value),k=jC(S,N,C);k!==void 0&&c.onValueChange(k.value)}),b=N=>{u||(c.onOpenChange(!0),y()),N&&(c.triggerPointerDownPosRef.current={x:Math.round(N.pageX),y:Math.round(N.pageY)})};return e.jsx(mv,{asChild:!0,...o,children:e.jsx(ma.button,{type:"button",role:"combobox","aria-controls":c.contentId,"aria-expanded":c.open,"aria-required":c.required,"aria-autocomplete":"none",dir:c.dir,"data-state":c.open?"open":"closed",disabled:u,"data-disabled":u?"":void 0,"data-placeholder":gC(c.value)?"":void 0,...i,ref:f,onClick:Hs(i.onClick,N=>{N.currentTarget.focus(),h.current!=="mouse"&&b(N)}),onPointerDown:Hs(i.onPointerDown,N=>{h.current=N.pointerType;const S=N.target;S.hasPointerCapture(N.pointerId)&&S.releasePointerCapture(N.pointerId),N.button===0&&N.ctrlKey===!1&&N.pointerType==="mouse"&&(b(N),N.preventDefault())}),onKeyDown:Hs(i.onKeyDown,N=>{const S=p.current!=="";!(N.ctrlKey||N.altKey||N.metaKey)&&N.key.length===1&&g(N.key),!(S&&N.key===" ")&&VR.includes(N.key)&&(b(),N.preventDefault())})})})});X4.displayName=Y4;var Q4="SelectValue",Z4=v.forwardRef((t,s)=>{const{__scopeSelect:a,className:r,style:i,children:o,placeholder:c="",...u}=t,f=Vl(Q4,a),{onValueNodeHasChildrenChange:x}=f,h=o!==void 0,p=qa(s,f.onValueNodeChange);return Ml(()=>{x(h)},[x,h]),e.jsx(ma.span,{...u,ref:p,style:{pointerEvents:"none"},children:gC(f.value)?e.jsx(e.Fragment,{children:c}):o})});Z4.displayName=Q4;var KR="SelectIcon",J4=v.forwardRef((t,s)=>{const{__scopeSelect:a,children:r,...i}=t;return e.jsx(ma.span,{"aria-hidden":!0,...i,ref:s,children:r||""})});J4.displayName=KR;var YR="SelectPortal",eC=t=>e.jsx(SS,{asChild:!0,...t});eC.displayName=YR;var Ro="SelectContent",tC=v.forwardRef((t,s)=>{const a=Vl(Ro,t.__scopeSelect),[r,i]=v.useState();if(Ml(()=>{i(new DocumentFragment)},[]),!a.open){const o=r;return o?LS.createPortal(e.jsx(sC,{scope:t.__scopeSelect,children:e.jsx($f.Slot,{scope:t.__scopeSelect,children:e.jsx("div",{children:t.children})})}),o):null}return e.jsx(aC,{...t,ref:s})});tC.displayName=Ro;var $n=10,[sC,$l]=ld(Ro),XR="SelectContentImpl",QR=ES("SelectContent.RemoveScroll"),aC=v.forwardRef((t,s)=>{const{__scopeSelect:a,position:r="item-aligned",onCloseAutoFocus:i,onEscapeKeyDown:o,onPointerDownOutside:c,side:u,sideOffset:f,align:x,alignOffset:h,arrowPadding:p,collisionBoundary:g,collisionPadding:y,sticky:b,hideWhenDetached:N,avoidCollisions:S,...C}=t,k=Vl(Ro,a),[A,G]=v.useState(null),[F,E]=v.useState(null),T=qa(s,be=>G(be)),[_,P]=v.useState(null),[z,V]=v.useState(null),W=Hf(a),[q,B]=v.useState(!1),ae=v.useRef(!1);v.useEffect(()=>{if(A)return CS(A)},[A]),kS();const U=v.useCallback(be=>{const[Le,...ve]=W().map(Xe=>Xe.ref.current),[oe]=ve.slice(-1),Pe=document.activeElement;for(const Xe of be)if(Xe===Pe||(Xe?.scrollIntoView({block:"nearest"}),Xe===Le&&F&&(F.scrollTop=0),Xe===oe&&F&&(F.scrollTop=F.scrollHeight),Xe?.focus(),document.activeElement!==Pe))return},[W,F]),Z=v.useCallback(()=>U([_,A]),[U,_,A]);v.useEffect(()=>{q&&Z()},[q,Z]);const{onOpenChange:de,triggerPointerDownPosRef:H}=k;v.useEffect(()=>{if(A){let be={x:0,y:0};const Le=oe=>{be={x:Math.abs(Math.round(oe.pageX)-(H.current?.x??0)),y:Math.abs(Math.round(oe.pageY)-(H.current?.y??0))}},ve=oe=>{be.x<=10&&be.y<=10?oe.preventDefault():A.contains(oe.target)||de(!1),document.removeEventListener("pointermove",Le),H.current=null};return H.current!==null&&(document.addEventListener("pointermove",Le),document.addEventListener("pointerup",ve,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",Le),document.removeEventListener("pointerup",ve,{capture:!0})}}},[A,de,H]),v.useEffect(()=>{const be=()=>de(!1);return window.addEventListener("blur",be),window.addEventListener("resize",be),()=>{window.removeEventListener("blur",be),window.removeEventListener("resize",be)}},[de]);const[se,ee]=vC(be=>{const Le=W().filter(Pe=>!Pe.disabled),ve=Le.find(Pe=>Pe.ref.current===document.activeElement),oe=jC(Le,be,ve);oe&&setTimeout(()=>oe.ref.current.focus())}),L=v.useCallback((be,Le,ve)=>{const oe=!ae.current&&!ve;(k.value!==void 0&&k.value===Le||oe)&&(P(be),oe&&(ae.current=!0))},[k.value]),X=v.useCallback(()=>A?.focus(),[A]),O=v.useCallback((be,Le,ve)=>{const oe=!ae.current&&!ve;(k.value!==void 0&&k.value===Le||oe)&&V(be)},[k.value]),J=r==="popper"?Cg:rC,ie=J===Cg?{side:u,sideOffset:f,align:x,alignOffset:h,arrowPadding:p,collisionBoundary:g,collisionPadding:y,sticky:b,hideWhenDetached:N,avoidCollisions:S}:{};return e.jsx(sC,{scope:a,content:A,viewport:F,onViewportChange:E,itemRefCallback:L,selectedItem:_,onItemLeave:X,itemTextRefCallback:O,focusSelectedItem:Z,selectedItemText:z,position:r,isPositioned:q,searchRef:se,children:e.jsx(TS,{as:QR,allowPinchZoom:!0,children:e.jsx(AS,{asChild:!0,trapped:k.open,onMountAutoFocus:be=>{be.preventDefault()},onUnmountAutoFocus:Hs(i,be=>{k.trigger?.focus({preventScroll:!0}),be.preventDefault()}),children:e.jsx(_S,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:o,onPointerDownOutside:c,onFocusOutside:be=>be.preventDefault(),onDismiss:()=>k.onOpenChange(!1),children:e.jsx(J,{role:"listbox",id:k.contentId,"data-state":k.open?"open":"closed",dir:k.dir,onContextMenu:be=>be.preventDefault(),...C,...ie,onPlaced:()=>B(!0),ref:T,style:{display:"flex",flexDirection:"column",outline:"none",...C.style},onKeyDown:Hs(C.onKeyDown,be=>{const Le=be.ctrlKey||be.altKey||be.metaKey;if(be.key==="Tab"&&be.preventDefault(),!Le&&be.key.length===1&&ee(be.key),["ArrowUp","ArrowDown","Home","End"].includes(be.key)){let oe=W().filter(Pe=>!Pe.disabled).map(Pe=>Pe.ref.current);if(["ArrowUp","End"].includes(be.key)&&(oe=oe.slice().reverse()),["ArrowUp","ArrowDown"].includes(be.key)){const Pe=be.target,Xe=oe.indexOf(Pe);oe=oe.slice(Xe+1)}setTimeout(()=>U(oe)),be.preventDefault()}})})})})})})});aC.displayName=XR;var ZR="SelectItemAlignedPosition",rC=v.forwardRef((t,s)=>{const{__scopeSelect:a,onPlaced:r,...i}=t,o=Vl(Ro,a),c=$l(Ro,a),[u,f]=v.useState(null),[x,h]=v.useState(null),p=qa(s,T=>h(T)),g=Hf(a),y=v.useRef(!1),b=v.useRef(!0),{viewport:N,selectedItem:S,selectedItemText:C,focusSelectedItem:k}=c,A=v.useCallback(()=>{if(o.trigger&&o.valueNode&&u&&x&&N&&S&&C){const T=o.trigger.getBoundingClientRect(),_=x.getBoundingClientRect(),P=o.valueNode.getBoundingClientRect(),z=C.getBoundingClientRect();if(o.dir!=="rtl"){const Pe=z.left-_.left,Xe=P.left-Pe,yt=T.left-Xe,vt=T.width+yt,gt=Math.max(vt,_.width),bt=window.innerWidth-$n,lt=sf(Xe,[$n,Math.max($n,bt-gt)]);u.style.minWidth=vt+"px",u.style.left=lt+"px"}else{const Pe=_.right-z.right,Xe=window.innerWidth-P.right-Pe,yt=window.innerWidth-T.right-Xe,vt=T.width+yt,gt=Math.max(vt,_.width),bt=window.innerWidth-$n,lt=sf(Xe,[$n,Math.max($n,bt-gt)]);u.style.minWidth=vt+"px",u.style.right=lt+"px"}const V=g(),W=window.innerHeight-$n*2,q=N.scrollHeight,B=window.getComputedStyle(x),ae=parseInt(B.borderTopWidth,10),U=parseInt(B.paddingTop,10),Z=parseInt(B.borderBottomWidth,10),de=parseInt(B.paddingBottom,10),H=ae+U+q+de+Z,se=Math.min(S.offsetHeight*5,H),ee=window.getComputedStyle(N),L=parseInt(ee.paddingTop,10),X=parseInt(ee.paddingBottom,10),O=T.top+T.height/2-$n,J=W-O,ie=S.offsetHeight/2,be=S.offsetTop+ie,Le=ae+U+be,ve=H-Le;if(Le<=O){const Pe=V.length>0&&S===V[V.length-1].ref.current;u.style.bottom="0px";const Xe=x.clientHeight-N.offsetTop-N.offsetHeight,yt=Math.max(J,ie+(Pe?X:0)+Xe+Z),vt=Le+yt;u.style.height=vt+"px"}else{const Pe=V.length>0&&S===V[0].ref.current;u.style.top="0px";const yt=Math.max(O,ae+N.offsetTop+(Pe?L:0)+ie)+ve;u.style.height=yt+"px",N.scrollTop=Le-O+N.offsetTop}u.style.margin=`${$n}px 0`,u.style.minHeight=se+"px",u.style.maxHeight=W+"px",r?.(),requestAnimationFrame(()=>y.current=!0)}},[g,o.trigger,o.valueNode,u,x,N,S,C,o.dir,r]);Ml(()=>A(),[A]);const[G,F]=v.useState();Ml(()=>{x&&F(window.getComputedStyle(x).zIndex)},[x]);const E=v.useCallback(T=>{T&&b.current===!0&&(A(),k?.(),b.current=!1)},[A,k]);return e.jsx(eP,{scope:a,contentWrapper:u,shouldExpandOnScrollRef:y,onScrollButtonChange:E,children:e.jsx("div",{ref:f,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:G},children:e.jsx(ma.div,{...i,ref:p,style:{boxSizing:"border-box",maxHeight:"100%",...i.style}})})})});rC.displayName=ZR;var JR="SelectPopperPosition",Cg=v.forwardRef((t,s)=>{const{__scopeSelect:a,align:r="start",collisionPadding:i=$n,...o}=t,c=Wf(a);return e.jsx(DS,{...c,...o,ref:s,align:r,collisionPadding:i,style:{boxSizing:"border-box",...o.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});Cg.displayName=JR;var[eP,Ov]=ld(Ro,{}),Tg="SelectViewport",nC=v.forwardRef((t,s)=>{const{__scopeSelect:a,nonce:r,...i}=t,o=$l(Tg,a),c=Ov(Tg,a),u=qa(s,o.onViewportChange),f=v.useRef(0);return e.jsxs(e.Fragment,{children:[e.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),e.jsx($f.Slot,{scope:a,children:e.jsx(ma.div,{"data-radix-select-viewport":"",role:"presentation",...i,ref:u,style:{position:"relative",flex:1,overflow:"hidden auto",...i.style},onScroll:Hs(i.onScroll,x=>{const h=x.currentTarget,{contentWrapper:p,shouldExpandOnScrollRef:g}=c;if(g?.current&&p){const y=Math.abs(f.current-h.scrollTop);if(y>0){const b=window.innerHeight-$n*2,N=parseFloat(p.style.minHeight),S=parseFloat(p.style.height),C=Math.max(N,S);if(C<b){const k=C+y,A=Math.min(b,k),G=k-A;p.style.height=A+"px",p.style.bottom==="0px"&&(h.scrollTop=G>0?G:0,p.style.justifyContent="flex-end")}}}f.current=h.scrollTop})})})]})});nC.displayName=Tg;var iC="SelectGroup",[tP,sP]=ld(iC),aP=v.forwardRef((t,s)=>{const{__scopeSelect:a,...r}=t,i=Rf();return e.jsx(tP,{scope:a,id:i,children:e.jsx(ma.div,{role:"group","aria-labelledby":i,...r,ref:s})})});aP.displayName=iC;var lC="SelectLabel",rP=v.forwardRef((t,s)=>{const{__scopeSelect:a,...r}=t,i=sP(lC,a);return e.jsx(ma.div,{id:i.id,...r,ref:s})});rP.displayName=lC;var df="SelectItem",[nP,oC]=ld(df),cC=v.forwardRef((t,s)=>{const{__scopeSelect:a,value:r,disabled:i=!1,textValue:o,...c}=t,u=Vl(df,a),f=$l(df,a),x=u.value===r,[h,p]=v.useState(o??""),[g,y]=v.useState(!1),b=qa(s,k=>f.itemRefCallback?.(k,r,i)),N=Rf(),S=v.useRef("touch"),C=()=>{i||(u.onValueChange(r),u.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return e.jsx(nP,{scope:a,value:r,disabled:i,textId:N,isSelected:x,onItemTextChange:v.useCallback(k=>{p(A=>A||(k?.textContent??"").trim())},[]),children:e.jsx($f.ItemSlot,{scope:a,value:r,disabled:i,textValue:h,children:e.jsx(ma.div,{role:"option","aria-labelledby":N,"data-highlighted":g?"":void 0,"aria-selected":x&&g,"data-state":x?"checked":"unchecked","aria-disabled":i||void 0,"data-disabled":i?"":void 0,tabIndex:i?void 0:-1,...c,ref:b,onFocus:Hs(c.onFocus,()=>y(!0)),onBlur:Hs(c.onBlur,()=>y(!1)),onClick:Hs(c.onClick,()=>{S.current!=="mouse"&&C()}),onPointerUp:Hs(c.onPointerUp,()=>{S.current==="mouse"&&C()}),onPointerDown:Hs(c.onPointerDown,k=>{S.current=k.pointerType}),onPointerMove:Hs(c.onPointerMove,k=>{S.current=k.pointerType,i?f.onItemLeave?.():S.current==="mouse"&&k.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Hs(c.onPointerLeave,k=>{k.currentTarget===document.activeElement&&f.onItemLeave?.()}),onKeyDown:Hs(c.onKeyDown,k=>{f.searchRef?.current!==""&&k.key===" "||($R.includes(k.key)&&C(),k.key===" "&&k.preventDefault())})})})})});cC.displayName=df;var fu="SelectItemText",dC=v.forwardRef((t,s)=>{const{__scopeSelect:a,className:r,style:i,...o}=t,c=Vl(fu,a),u=$l(fu,a),f=oC(fu,a),x=qR(fu,a),[h,p]=v.useState(null),g=qa(s,C=>p(C),f.onItemTextChange,C=>u.itemTextRefCallback?.(C,f.value,f.disabled)),y=h?.textContent,b=v.useMemo(()=>e.jsx("option",{value:f.value,disabled:f.disabled,children:y},f.value),[f.disabled,f.value,y]),{onNativeOptionAdd:N,onNativeOptionRemove:S}=x;return Ml(()=>(N(b),()=>S(b)),[N,S,b]),e.jsxs(e.Fragment,{children:[e.jsx(ma.span,{id:f.textId,...o,ref:g}),f.isSelected&&c.valueNode&&!c.valueNodeHasChildren?LS.createPortal(o.children,c.valueNode):null]})});dC.displayName=fu;var uC="SelectItemIndicator",mC=v.forwardRef((t,s)=>{const{__scopeSelect:a,...r}=t;return oC(uC,a).isSelected?e.jsx(ma.span,{"aria-hidden":!0,...r,ref:s}):null});mC.displayName=uC;var Eg="SelectScrollUpButton",hC=v.forwardRef((t,s)=>{const a=$l(Eg,t.__scopeSelect),r=Ov(Eg,t.__scopeSelect),[i,o]=v.useState(!1),c=qa(s,r.onScrollButtonChange);return Ml(()=>{if(a.viewport&&a.isPositioned){let u=function(){const x=f.scrollTop>0;o(x)};const f=a.viewport;return u(),f.addEventListener("scroll",u),()=>f.removeEventListener("scroll",u)}},[a.viewport,a.isPositioned]),i?e.jsx(xC,{...t,ref:c,onAutoScroll:()=>{const{viewport:u,selectedItem:f}=a;u&&f&&(u.scrollTop=u.scrollTop-f.offsetHeight)}}):null});hC.displayName=Eg;var kg="SelectScrollDownButton",fC=v.forwardRef((t,s)=>{const a=$l(kg,t.__scopeSelect),r=Ov(kg,t.__scopeSelect),[i,o]=v.useState(!1),c=qa(s,r.onScrollButtonChange);return Ml(()=>{if(a.viewport&&a.isPositioned){let u=function(){const x=f.scrollHeight-f.clientHeight,h=Math.ceil(f.scrollTop)<x;o(h)};const f=a.viewport;return u(),f.addEventListener("scroll",u),()=>f.removeEventListener("scroll",u)}},[a.viewport,a.isPositioned]),i?e.jsx(xC,{...t,ref:c,onAutoScroll:()=>{const{viewport:u,selectedItem:f}=a;u&&f&&(u.scrollTop=u.scrollTop+f.offsetHeight)}}):null});fC.displayName=kg;var xC=v.forwardRef((t,s)=>{const{__scopeSelect:a,onAutoScroll:r,...i}=t,o=$l("SelectScrollButton",a),c=v.useRef(null),u=Hf(a),f=v.useCallback(()=>{c.current!==null&&(window.clearInterval(c.current),c.current=null)},[]);return v.useEffect(()=>()=>f(),[f]),Ml(()=>{u().find(h=>h.ref.current===document.activeElement)?.ref.current?.scrollIntoView({block:"nearest"})},[u]),e.jsx(ma.div,{"aria-hidden":!0,...i,ref:s,style:{flexShrink:0,...i.style},onPointerDown:Hs(i.onPointerDown,()=>{c.current===null&&(c.current=window.setInterval(r,50))}),onPointerMove:Hs(i.onPointerMove,()=>{o.onItemLeave?.(),c.current===null&&(c.current=window.setInterval(r,50))}),onPointerLeave:Hs(i.onPointerLeave,()=>{f()})})}),iP="SelectSeparator",lP=v.forwardRef((t,s)=>{const{__scopeSelect:a,...r}=t;return e.jsx(ma.div,{"aria-hidden":!0,...r,ref:s})});lP.displayName=iP;var Ag="SelectArrow",oP=v.forwardRef((t,s)=>{const{__scopeSelect:a,...r}=t,i=Wf(a),o=Vl(Ag,a),c=$l(Ag,a);return o.open&&c.position==="popper"?e.jsx(RS,{...i,...r,ref:s}):null});oP.displayName=Ag;var cP="SelectBubbleInput",pC=v.forwardRef(({__scopeSelect:t,value:s,...a},r)=>{const i=v.useRef(null),o=qa(r,i),c=Dv(s);return v.useEffect(()=>{const u=i.current;if(!u)return;const f=window.HTMLSelectElement.prototype,h=Object.getOwnPropertyDescriptor(f,"value").set;if(c!==s&&h){const p=new Event("change",{bubbles:!0});h.call(u,s),u.dispatchEvent(p)}},[c,s]),e.jsx(ma.select,{...a,style:{...q4,...a.style},ref:o,defaultValue:s})});pC.displayName=cP;function gC(t){return t===""||t===void 0}function vC(t){const s=H5(t),a=v.useRef(""),r=v.useRef(0),i=v.useCallback(c=>{const u=a.current+c;s(u),(function f(x){a.current=x,window.clearTimeout(r.current),x!==""&&(r.current=window.setTimeout(()=>f(""),1e3))})(u)},[s]),o=v.useCallback(()=>{a.current="",window.clearTimeout(r.current)},[]);return v.useEffect(()=>()=>window.clearTimeout(r.current),[]),[a,i,o]}function jC(t,s,a){const i=s.length>1&&Array.from(s).every(x=>x===s[0])?s[0]:s,o=a?t.indexOf(a):-1;let c=dP(t,Math.max(o,0));i.length===1&&(c=c.filter(x=>x!==a));const f=c.find(x=>x.textValue.toLowerCase().startsWith(i.toLowerCase()));return f!==a?f:void 0}function dP(t,s){return t.map((a,r)=>t[(s+r)%t.length])}var uP=K4,mP=X4,hP=Z4,fP=J4,xP=eC,pP=tC,gP=nC,vP=cC,jP=dC,yP=mC,NP=hC,bP=fC;function Mt({...t}){return e.jsx(uP,{"data-slot":"select",...t})}function Ft({...t}){return e.jsx(hP,{"data-slot":"select-value",...t})}function Lt({className:t,size:s="default",children:a,...r}){return e.jsxs(mP,{"data-slot":"select-trigger","data-size":s,className:Ze("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-fit items-center justify-between gap-2 rounded-md border bg-transparent px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...r,children:[a,e.jsx(fP,{asChild:!0,children:e.jsx(Mf,{className:"size-4 opacity-50"})})]})}function It({className:t,children:s,position:a="popper",...r}){return e.jsx(xP,{children:e.jsxs(pP,{"data-slot":"select-content",className:Ze("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md",a==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:a,...r,children:[e.jsx(wP,{}),e.jsx(gP,{className:Ze("p-1",a==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:s}),e.jsx(SP,{})]})})}function Ae({className:t,children:s,...a}){return e.jsxs(vP,{"data-slot":"select-item",className:Ze("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",t),...a,children:[e.jsx("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:e.jsx(yP,{children:e.jsx(yi,{className:"size-4"})})}),e.jsx(jP,{children:s})]})}function wP({className:t,...s}){return e.jsx(NP,{"data-slot":"select-scroll-up-button",className:Ze("flex cursor-default items-center justify-center py-1",t),...s,children:e.jsx(m_,{className:"size-4"})})}function SP({className:t,...s}){return e.jsx(bP,{"data-slot":"select-scroll-down-button",className:Ze("flex cursor-default items-center justify-center py-1",t),...s,children:e.jsx(Mf,{className:"size-4"})})}const CP=()=>{const[t,s]=v.useState(""),[a,r]=v.useState("all"),[i,o]=v.useState(!1),[c,u]=v.useState(!1),[f,x]=v.useState(""),[h,p]=v.useState([]),[g,y]=v.useState({name:"",sku:"",category:"",stockQuantity:"",reorderLevel:"",price:"",supplierName:"",description:""}),b={name:"",sku:"",category:"",stockQuantity:"",reorderLevel:"",price:"",supplierName:"",description:""},[N,S]=v.useState(!1),[C,k]=v.useState(null);v.useEffect(()=>{(async()=>{const L=localStorage.getItem("token");if(!L){D.error("Please log in to view your products.");return}try{const X=await Ne.get("/products",{headers:{Authorization:`Bearer ${L}`}});p(X.data)}catch(X){X.response?.status===401?D.error("Unauthorized: Please log in again."):D.error("Error fetching products. Please try again later."),console.error("Error fetching products:",X)}})()},[]);const A=(ee,L)=>{y(X=>({...X,[ee]:L}))},G=async()=>{if(["name","sku","category","stockQuantity","price","supplierName"].some(O=>!g[O]?.toString().trim())){D.error("Please fill in all required fields.");return}const X={...g,stock:Number(g.stockQuantity),reorderLevel:Number(g.reorderLevel),price:Number(g.price)};try{const O=localStorage.getItem("token"),J=await Ne.post("/products",X,{headers:{Authorization:`Bearer ${O}`,"Content-Type":"application/json"}});p(ie=>[...ie,J.data]),y(b),o(!1),D.success("Product added successfully!")}catch(O){D.error(O.response?.data?.error||"Error adding product."),console.error("Error adding product:",O)}},F=ee=>{k({...ee}),S(!0)},E=(ee,L)=>{k(X=>({...X,[ee]:L}))},T=async()=>{if(!C)return;const ee={...C,stockQuantity:Number(C.stockQuantity),reorderLevel:Number(C.reorderLevel),price:Number(C.price)};try{const L=localStorage.getItem("token"),X=await Ne.put(`/products/${C._id}`,ee,{headers:{Authorization:`Bearer ${L}`,"Content-Type":"application/json"}});p(O=>O.map(J=>J._id===X.data._id?X.data:J)),S(!1),k(null),D.success("Product updated successfully!")}catch(L){D.error(L.response?.data?.error||"Error updating product."),console.error("Error updating product:",L)}},_=async ee=>{if(window.confirm("Are you sure you want to delete this product?"))try{const X=localStorage.getItem("token");await Ne.delete(`/products/${ee}`,{headers:{Authorization:`Bearer ${X}`,"Content-Type":"application/json"}}),p(O=>O.filter(J=>J._id!==ee)),D.success("Product deleted successfully!")}catch(X){D.error(X.response?.data?.error||"Error deleting product."),console.error("Error deleting product:",X)}},P=(ee,L,X)=>L===0?e.jsx(De,{variant:"destructive",children:"Out of Stock"}):L<=X?e.jsx(De,{variant:"secondary",children:"Low Stock"}):e.jsx(De,{variant:"default",children:"In Stock"}),z=h.filter(ee=>{const L=ee.name.toLowerCase().includes(t.toLowerCase())||ee.sku.toLowerCase().includes(t.toLowerCase()),X=a==="all"||ee.category===a;return L&&X}),[V,W]=v.useState([]),[q,B]=v.useState(0);v.useEffect(()=>{(async()=>{const L=localStorage.getItem("token");if(L)try{const X=await Ne.get("/services",{headers:{Authorization:`Bearer ${L}`}});W(X.data||[]);const O=(X.data||[]).reduce((J,ie)=>J+(ie.price||0)*(ie.bookingsCount||0),0);B(O)}catch(X){console.error("Error fetching services:",X)}})()},[]);const ae=z.length,U=h.filter(ee=>ee.stockQuantity<=ee.reorderLevel&&ee.stockQuantity>0).length,Z=h.filter(ee=>ee.stockQuantity===0).length,de=h.reduce((ee,L)=>{const X=Number(L.price)||0,O=Number(L.stockQuantity)||Number(L.stock)||0,J=X*O;return console.log(` Product: ${L.name}`),console.log(`   Price: KES ${X}`),console.log(`   Stock: ${O} units`),console.log(`   Value: KES ${J.toFixed(2)}`),console.log("---"),ee+J},0);console.log(" TOTAL INVENTORY VALUE:",`KES ${de.toFixed(2)}`),console.log(" Total Products:",h.length),console.log("=====================================");const se=(isNaN(de)?0:de).toFixed(2);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Inventory Management"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage your products, stock levels, and suppliers"})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs(R,{variant:"outline",onClick:()=>u(!0),children:[e.jsx(ig,{className:"mr-2 h-4 w-4"}),"Scan Barcode"]}),e.jsxs(Bt,{open:i,onOpenChange:o,children:[e.jsx(wa,{asChild:!0,children:e.jsxs(R,{className:"bg-green-500 cursor-pointer hover:bg-green-400",children:[e.jsx(Gs,{className:"mr-2 h-4 w-4"}),"Add Product"]})}),e.jsxs(zt,{children:[e.jsxs(Ut,{children:[e.jsx(Vt,{children:"Add New Product"}),e.jsx(es,{children:"Register a new product to your inventory"})]}),e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(te,{htmlFor:"product-name",children:"Product Name"}),e.jsx(me,{id:"product-name",placeholder:"Enter product name",value:g.name,onChange:ee=>A("name",ee.target.value)})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(te,{htmlFor:"sku",children:"SKU"}),e.jsx(me,{id:"sku",placeholder:"Product SKU",value:g.sku,onChange:ee=>A("sku",ee.target.value)})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(te,{htmlFor:"category",children:"Category"}),e.jsx(me,{id:"category",placeholder:"Enter category",value:g.category,onChange:ee=>A("category",ee.target.value)})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(te,{htmlFor:"stock",children:"Stock Quantity"}),e.jsx(me,{id:"stock",type:"number",min:"0",placeholder:"e.g. 25",value:g.stockQuantity,onChange:ee=>A("stockQuantity",ee.target.value)})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(te,{htmlFor:"reorderLevel",children:"Reorder Level"}),e.jsx(me,{id:"reorderLevel",type:"number",min:"0",placeholder:"e.g. 10",value:g.reorderLevel,onChange:ee=>A("reorderLevel",ee.target.value)})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(te,{htmlFor:"price",children:"Price (KES)"}),e.jsx(me,{id:"price",type:"number",min:"0",step:"1",placeholder:"e.g. 2500",value:g.price,onChange:ee=>A("price",ee.target.value)})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(te,{htmlFor:"supplier",children:"Supplier"}),e.jsx(me,{id:"supplier",placeholder:"Supplier name",value:g.supplierName,onChange:ee=>A("supplierName",ee.target.value)})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(te,{htmlFor:"description",children:"Description (Optional)"}),e.jsx(As,{id:"description",placeholder:"Product description",value:g.description,onChange:ee=>A("description",ee.target.value),className:"resize-none"})]})]}),e.jsxs(Ps,{children:[e.jsx(R,{variant:"outline",className:"text-red-500 cursor-pointer hover:text-red-400",onClick:()=>o(!1),children:"Cancel"}),e.jsxs(R,{className:"bg-green-500 cursor-pointer hover:bg-green-400",onClick:G,children:[e.jsx(Fa,{className:"mr-2 h-4 w-4"}),"Add Product"]})]})]})]})]})]}),e.jsxs("div",{className:"grid gap-6 md:grid-cols-4",children:[e.jsxs(K,{children:[e.jsxs(xe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(pe,{className:"text-sm font-medium",children:"Total Products"}),e.jsx(Yt,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(Y,{children:[e.jsx("div",{className:"text-2xl font-bold",children:ae}),e.jsx("p",{className:"text-xs text-muted-foreground",children:ae===0?"No products yet":`${ae} total products`})]})]}),e.jsxs(K,{children:[e.jsxs(xe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(pe,{className:"text-sm font-medium",children:"Low Stock Items"}),e.jsx(Fr,{className:"h-4 w-4 text-orange-500"})]}),e.jsxs(Y,{children:[e.jsx("div",{className:"text-2xl font-bold text-orange-600",children:U}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Need immediate attention"})]})]}),e.jsxs(K,{children:[e.jsxs(xe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(pe,{className:"text-sm font-medium",children:"Out of Stock"}),e.jsx(Fr,{className:"h-4 w-4 text-red-500"})]}),e.jsxs(Y,{children:[e.jsx("div",{className:"text-2xl font-bold text-red-600",children:Z}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Require restocking"})]})]}),e.jsxs(K,{children:[e.jsxs(xe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(pe,{className:"text-sm font-medium",children:"Total Value"}),e.jsx(ra,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(Y,{children:[e.jsxs("div",{className:"text-2xl font-bold",children:["KES ",se]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:ae>0?`Value of ${ae} products`:"No inventory value"})]})]})]}),e.jsxs(K,{children:[e.jsxs(xe,{children:[e.jsx(pe,{children:"Product Inventory"}),e.jsx(ot,{children:"View and manage all your products"})]}),e.jsxs(Y,{children:[e.jsxs("div",{className:"flex items-center space-x-4 mb-6",children:[e.jsxs("div",{className:"relative flex-1 max-w-sm",children:[e.jsx(oa,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(me,{placeholder:"Search products...",value:t,onChange:ee=>s(ee.target.value),className:"pl-10"})]}),e.jsxs(Mt,{value:a,onValueChange:r,children:[e.jsx(Lt,{className:"w-[180px]",children:e.jsx(Ft,{placeholder:"Category"})}),e.jsxs(It,{children:[e.jsx(Ae,{value:"all",children:"All Categories"}),e.jsx(Ae,{value:"Hair Care",children:"Hair Care"}),e.jsx(Ae,{value:"Skincare",children:"Skincare"}),e.jsx(Ae,{value:"Equipment",children:"Equipment"})]})]}),e.jsxs(R,{variant:"outline",children:[e.jsx(tl,{className:"mr-2 h-4 w-4"}),"More Filters"]})]}),e.jsxs(Xn,{children:[e.jsx(Qn,{children:e.jsxs(xa,{children:[e.jsx(St,{children:"Product"}),e.jsx(St,{children:"SKU"}),e.jsx(St,{children:"Category"}),e.jsx(St,{children:"Stock"}),e.jsx(St,{children:"Price"}),e.jsx(St,{children:"Supplier"}),e.jsx(St,{children:"Status"}),e.jsx(St,{children:"Actions"})]})}),e.jsx(Zn,{children:z.map((ee,L)=>e.jsxs(xa,{children:[e.jsx(Nt,{className:"font-medium",children:ee.name}),e.jsx(Nt,{children:ee.sku}),e.jsx(Nt,{children:ee.category}),e.jsx(Nt,{children:ee.stockQuantity}),e.jsxs(Nt,{children:["KES ",ee.price?.toLocaleString()||0]}),e.jsx(Nt,{children:ee.supplierName}),e.jsx(Nt,{children:P(ee.status,ee.stock,ee.reorderLevel)}),e.jsx(Nt,{children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(R,{variant:"outline",size:"sm",onClick:()=>F(ee),children:"Edit"}),e.jsx(R,{variant:"destructive",size:"sm",onClick:()=>_(ee._id),children:e.jsx(ga,{className:"h-4 w-4"})})]})})]},ee._id||`product-${L}`))})]})]})]}),N&&C&&e.jsx(Bt,{open:N,onOpenChange:S,children:e.jsxs(zt,{children:[e.jsxs(Ut,{children:[e.jsx(Vt,{children:"Edit Product"}),e.jsx(es,{children:"Update product details"})]}),e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(te,{htmlFor:"edit-product-name",children:"Product Name"}),e.jsx(me,{id:"edit-product-name",placeholder:"Enter product name",value:C?.name??"",onChange:ee=>E("name",ee.target.value)})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(te,{htmlFor:"edit-sku",children:"SKU"}),e.jsx(me,{id:"edit-sku",placeholder:"Product SKU",value:C?.sku??"",onChange:ee=>E("sku",ee.target.value)})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(te,{htmlFor:"edit-category",children:"Category"}),e.jsx(me,{id:"edit-category",placeholder:"Enter category",value:C?.category??"",onChange:ee=>E("category",ee.target.value)})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(te,{htmlFor:"edit-stock",children:"Stock Quantity"}),e.jsx(me,{id:"edit-stock",type:"number",min:"0",placeholder:"e.g. 25",value:C?.stockQuantity??"",onChange:ee=>E("stockQuantity",ee.target.value)})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(te,{htmlFor:"edit-reorderLevel",children:"Reorder Level"}),e.jsx(me,{id:"edit-reorderLevel",type:"number",min:"0",placeholder:"e.g. 10",value:C?.reorderLevel??"",onChange:ee=>E("reorderLevel",ee.target.value)})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(te,{htmlFor:"edit-price",children:"Price (KES)"}),e.jsx(me,{id:"edit-price",type:"number",min:"0",step:"1",placeholder:"e.g. 2500",value:C?.price??"",onChange:ee=>E("price",ee.target.value)})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(te,{htmlFor:"edit-supplier",children:"Supplier"}),e.jsx(me,{id:"edit-supplier",placeholder:"Supplier name",value:C?.supplierName??"",onChange:ee=>E("supplierName",ee.target.value)})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(te,{htmlFor:"edit-description",children:"Description (Optional)"}),e.jsx(As,{id:"edit-description",placeholder:"Product description",value:C?.description??"",onChange:ee=>E("description",ee.target.value),className:"resize-none"})]})]}),e.jsxs(Ps,{children:[e.jsx(R,{variant:"outline",className:"text-red-500 cursor-pointer hover:text-red-400",onClick:()=>S(!1),children:"Cancel"}),e.jsxs(R,{className:"bg-green-500 cursor-pointer hover:bg-green-400",onClick:T,children:[e.jsx(Fa,{className:"mr-2 h-4 w-4"}),"Save Changes"]})]})]})}),e.jsx(Bt,{open:c,onOpenChange:u,children:e.jsxs(zt,{children:[e.jsxs(Ut,{children:[e.jsx(Vt,{children:"Scan Barcode"}),e.jsx(es,{children:"Enter barcode/SKU to search for products"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(te,{htmlFor:"barcode",children:"Barcode / SKU"}),e.jsx(me,{id:"barcode",placeholder:"Enter SKU or barcode...",value:f,onChange:ee=>x(ee.target.value),onKeyPress:ee=>{if(ee.key==="Enter"&&f.trim()){const L=h.find(X=>X.sku?.toLowerCase()===f.trim().toLowerCase());L?(D.success(`Product found: ${L.name}`),k(L),S(!0),u(!1),x("")):D.error("Product not found")}},autoFocus:!0})]}),e.jsx("div",{className:"text-sm text-muted-foreground",children:e.jsx("p",{children:" Enter the product SKU and press Enter to search"})})]}),e.jsxs(Ps,{children:[e.jsx(R,{variant:"outline",onClick:()=>{u(!1),x("")},children:"Cancel"}),e.jsxs(R,{onClick:()=>{if(f.trim()){const ee=h.find(L=>L.sku?.toLowerCase()===f.trim().toLowerCase());ee?(D.success(`Product found: ${ee.name}`),k(ee),S(!0),u(!1),x("")):D.error("Product not found")}},children:[e.jsx(oa,{className:"mr-2 h-4 w-4"}),"Search"]})]})]})})]})},TP=()=>{const{user:t}=_s(),s=f=>t?(Array.isArray(f)?f:[f]).includes(t.role):!1;return{user:t,hasRole:s,hasPermission:f=>!t||!t.permissions?!1:t.permissions[f]===!0,hasAnyPermission:f=>!t||!t.permissions?!1:f.some(x=>t.permissions[x]===!0),hasAllPermissions:f=>!t||!t.permissions?!1:f.every(x=>t.permissions[x]===!0),isAdmin:()=>s(["admin","super_admin"]),isSuperAdmin:()=>s(["super_admin"]),isClient:()=>s(["client"]),permissions:t?.permissions||{}}};/*! xlsx.js (C) 2013-present SheetJS -- http://sheetjs.com */var uf={};uf.version="0.18.5";var yC=1252,EP=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],NC=function(t){EP.indexOf(t)!=-1&&(yC=t)};function kP(){NC(1252)}var Mu=function(t){NC(t)};function AP(){Mu(1200),kP()}var Oh=function(s){return String.fromCharCode(s)},lw=function(s){return String.fromCharCode(s)},mf,Dl="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function Fu(t){for(var s="",a=0,r=0,i=0,o=0,c=0,u=0,f=0,x=0;x<t.length;)a=t.charCodeAt(x++),o=a>>2,r=t.charCodeAt(x++),c=(a&3)<<4|r>>4,i=t.charCodeAt(x++),u=(r&15)<<2|i>>6,f=i&63,isNaN(r)?u=f=64:isNaN(i)&&(f=64),s+=Dl.charAt(o)+Dl.charAt(c)+Dl.charAt(u)+Dl.charAt(f);return s}function Xi(t){var s="",a=0,r=0,i=0,o=0,c=0,u=0,f=0;t=t.replace(/[^\w\+\/\=]/g,"");for(var x=0;x<t.length;)o=Dl.indexOf(t.charAt(x++)),c=Dl.indexOf(t.charAt(x++)),a=o<<2|c>>4,s+=String.fromCharCode(a),u=Dl.indexOf(t.charAt(x++)),r=(c&15)<<4|u>>2,u!==64&&(s+=String.fromCharCode(r)),f=Dl.indexOf(t.charAt(x++)),i=(u&3)<<6|f,f!==64&&(s+=String.fromCharCode(i));return s}var Ls=(function(){return typeof Buffer<"u"&&typeof process<"u"&&typeof process.versions<"u"&&!!process.versions.node})(),sl=(function(){if(typeof Buffer<"u"){var t=!Buffer.from;if(!t)try{Buffer.from("foo","utf8")}catch{t=!0}return t?function(s,a){return a?new Buffer(s,a):new Buffer(s)}:Buffer.from.bind(Buffer)}return function(){}})();function Po(t){return Ls?Buffer.alloc?Buffer.alloc(t):new Buffer(t):typeof Uint8Array<"u"?new Uint8Array(t):new Array(t)}function ow(t){return Ls?Buffer.allocUnsafe?Buffer.allocUnsafe(t):new Buffer(t):typeof Uint8Array<"u"?new Uint8Array(t):new Array(t)}var Gn=function(s){return Ls?sl(s,"binary"):s.split("").map(function(a){return a.charCodeAt(0)&255})};function Gf(t){if(typeof ArrayBuffer>"u")return Gn(t);for(var s=new ArrayBuffer(t.length),a=new Uint8Array(s),r=0;r!=t.length;++r)a[r]=t.charCodeAt(r)&255;return s}function sm(t){if(Array.isArray(t))return t.map(function(r){return String.fromCharCode(r)}).join("");for(var s=[],a=0;a<t.length;++a)s[a]=String.fromCharCode(t[a]);return s.join("")}function _P(t){if(typeof Uint8Array>"u")throw new Error("Unsupported");return new Uint8Array(t)}var xr=Ls?function(t){return Buffer.concat(t.map(function(s){return Buffer.isBuffer(s)?s:sl(s)}))}:function(t){if(typeof Uint8Array<"u"){var s=0,a=0;for(s=0;s<t.length;++s)a+=t[s].length;var r=new Uint8Array(a),i=0;for(s=0,a=0;s<t.length;a+=i,++s)if(i=t[s].length,t[s]instanceof Uint8Array)r.set(t[s],a);else{if(typeof t[s]=="string")throw"wtf";r.set(new Uint8Array(t[s]),a)}return r}return[].concat.apply([],t.map(function(o){return Array.isArray(o)?o:[].slice.call(o)}))};function DP(t){for(var s=[],a=0,r=t.length+250,i=Po(t.length+255),o=0;o<t.length;++o){var c=t.charCodeAt(o);if(c<128)i[a++]=c;else if(c<2048)i[a++]=192|c>>6&31,i[a++]=128|c&63;else if(c>=55296&&c<57344){c=(c&1023)+64;var u=t.charCodeAt(++o)&1023;i[a++]=240|c>>8&7,i[a++]=128|c>>2&63,i[a++]=128|u>>6&15|(c&3)<<4,i[a++]=128|u&63}else i[a++]=224|c>>12&15,i[a++]=128|c>>6&63,i[a++]=128|c&63;a>r&&(s.push(i.slice(0,a)),a=0,i=Po(65535),r=65530)}return s.push(i.slice(0,a)),xr(s)}var yu=/\u0000/g,Rh=/[\u0001-\u0006]/g;function Uc(t){for(var s="",a=t.length-1;a>=0;)s+=t.charAt(a--);return s}function Kn(t,s){var a=""+t;return a.length>=s?a:ka("0",s-a.length)+a}function Rv(t,s){var a=""+t;return a.length>=s?a:ka(" ",s-a.length)+a}function hf(t,s){var a=""+t;return a.length>=s?a:a+ka(" ",s-a.length)}function OP(t,s){var a=""+Math.round(t);return a.length>=s?a:ka("0",s-a.length)+a}function RP(t,s){var a=""+t;return a.length>=s?a:ka("0",s-a.length)+a}var cw=Math.pow(2,32);function Cc(t,s){if(t>cw||t<-cw)return OP(t,s);var a=Math.round(t);return RP(a,s)}function ff(t,s){return s=s||0,t.length>=7+s&&(t.charCodeAt(s)|32)===103&&(t.charCodeAt(s+1)|32)===101&&(t.charCodeAt(s+2)|32)===110&&(t.charCodeAt(s+3)|32)===101&&(t.charCodeAt(s+4)|32)===114&&(t.charCodeAt(s+5)|32)===97&&(t.charCodeAt(s+6)|32)===108}var dw=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],T0=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];function PP(t){return t||(t={}),t[0]="General",t[1]="0",t[2]="0.00",t[3]="#,##0",t[4]="#,##0.00",t[9]="0%",t[10]="0.00%",t[11]="0.00E+00",t[12]="# ?/?",t[13]="# ??/??",t[14]="m/d/yy",t[15]="d-mmm-yy",t[16]="d-mmm",t[17]="mmm-yy",t[18]="h:mm AM/PM",t[19]="h:mm:ss AM/PM",t[20]="h:mm",t[21]="h:mm:ss",t[22]="m/d/yy h:mm",t[37]="#,##0 ;(#,##0)",t[38]="#,##0 ;[Red](#,##0)",t[39]="#,##0.00;(#,##0.00)",t[40]="#,##0.00;[Red](#,##0.00)",t[45]="mm:ss",t[46]="[h]:mm:ss",t[47]="mmss.0",t[48]="##0.0E+0",t[49]="@",t[56]='"/ "hh""mm""ss" "',t}var Da={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"/ "hh""mm""ss" "'},uw={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},MP={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function xf(t,s,a){for(var r=t<0?-1:1,i=t*r,o=0,c=1,u=0,f=1,x=0,h=0,p=Math.floor(i);x<s&&(p=Math.floor(i),u=p*c+o,h=p*x+f,!(i-p<5e-8));)i=1/(i-p),o=c,c=u,f=x,x=h;if(h>s&&(x>s?(h=f,u=o):(h=x,u=c)),!a)return[0,r*u,h];var g=Math.floor(r*u/h);return[g,r*u-g*h,h]}function Ph(t,s,a){if(t>2958465||t<0)return null;var r=t|0,i=Math.floor(86400*(t-r)),o=0,c=[],u={D:r,T:i,u:86400*(t-r)-i,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(u.u)<1e-6&&(u.u=0),s&&s.date1904&&(r+=1462),u.u>.9999&&(u.u=0,++i==86400&&(u.T=i=0,++r,++u.D)),r===60)c=a?[1317,10,29]:[1900,2,29],o=3;else if(r===0)c=a?[1317,8,29]:[1900,1,0],o=6;else{r>60&&--r;var f=new Date(1900,0,1);f.setDate(f.getDate()+r-1),c=[f.getFullYear(),f.getMonth()+1,f.getDate()],o=f.getDay(),r<60&&(o=(o+6)%7),a&&(o=VP(f,c))}return u.y=c[0],u.m=c[1],u.d=c[2],u.S=i%60,i=Math.floor(i/60),u.M=i%60,i=Math.floor(i/60),u.H=i,u.q=o,u}var bC=new Date(1899,11,31,0,0,0),FP=bC.getTime(),LP=new Date(1900,2,1,0,0,0);function wC(t,s){var a=t.getTime();return s?a-=1461*24*60*60*1e3:t>=LP&&(a+=1440*60*1e3),(a-(FP+(t.getTimezoneOffset()-bC.getTimezoneOffset())*6e4))/(1440*60*1e3)}function Pv(t){return t.indexOf(".")==-1?t:t.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function IP(t){return t.indexOf("E")==-1?t:t.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}function BP(t){var s=t<0?12:11,a=Pv(t.toFixed(12));return a.length<=s||(a=t.toPrecision(10),a.length<=s)?a:t.toExponential(5)}function zP(t){var s=Pv(t.toFixed(11));return s.length>(t<0?12:11)||s==="0"||s==="-0"?t.toPrecision(6):s}function UP(t){var s=Math.floor(Math.log(Math.abs(t))*Math.LOG10E),a;return s>=-4&&s<=-1?a=t.toPrecision(10+s):Math.abs(s)<=9?a=BP(t):s===10?a=t.toFixed(10).substr(0,12):a=zP(t),Pv(IP(a.toUpperCase()))}function _g(t,s){switch(typeof t){case"string":return t;case"boolean":return t?"TRUE":"FALSE";case"number":return(t|0)===t?t.toString(10):UP(t);case"undefined":return"";case"object":if(t==null)return"";if(t instanceof Date)return Fl(14,wC(t,s&&s.date1904),s)}throw new Error("unsupported value in General format: "+t)}function VP(t,s){s[0]-=581;var a=t.getDay();return t<60&&(a=(a+6)%7),a}function $P(t,s,a,r){var i="",o=0,c=0,u=a.y,f,x=0;switch(t){case 98:u=a.y+543;case 121:switch(s.length){case 1:case 2:f=u%100,x=2;break;default:f=u%1e4,x=4;break}break;case 109:switch(s.length){case 1:case 2:f=a.m,x=s.length;break;case 3:return T0[a.m-1][1];case 5:return T0[a.m-1][0];default:return T0[a.m-1][2]}break;case 100:switch(s.length){case 1:case 2:f=a.d,x=s.length;break;case 3:return dw[a.q][0];default:return dw[a.q][1]}break;case 104:switch(s.length){case 1:case 2:f=1+(a.H+11)%12,x=s.length;break;default:throw"bad hour format: "+s}break;case 72:switch(s.length){case 1:case 2:f=a.H,x=s.length;break;default:throw"bad hour format: "+s}break;case 77:switch(s.length){case 1:case 2:f=a.M,x=s.length;break;default:throw"bad minute format: "+s}break;case 115:if(s!="s"&&s!="ss"&&s!=".0"&&s!=".00"&&s!=".000")throw"bad second format: "+s;return a.u===0&&(s=="s"||s=="ss")?Kn(a.S,s.length):(r>=2?c=r===3?1e3:100:c=r===1?10:1,o=Math.round(c*(a.S+a.u)),o>=60*c&&(o=0),s==="s"?o===0?"0":""+o/c:(i=Kn(o,2+r),s==="ss"?i.substr(0,2):"."+i.substr(2,s.length-1)));case 90:switch(s){case"[h]":case"[hh]":f=a.D*24+a.H;break;case"[m]":case"[mm]":f=(a.D*24+a.H)*60+a.M;break;case"[s]":case"[ss]":f=((a.D*24+a.H)*60+a.M)*60+Math.round(a.S+a.u);break;default:throw"bad abstime format: "+s}x=s.length===3?1:2;break;case 101:f=u,x=1;break}var h=x>0?Kn(f,x):"";return h}function Ol(t){var s=3;if(t.length<=s)return t;for(var a=t.length%s,r=t.substr(0,a);a!=t.length;a+=s)r+=(r.length>0?",":"")+t.substr(a,s);return r}var SC=/%/g;function HP(t,s,a){var r=s.replace(SC,""),i=s.length-r.length;return Gi(t,r,a*Math.pow(10,2*i))+ka("%",i)}function WP(t,s,a){for(var r=s.length-1;s.charCodeAt(r-1)===44;)--r;return Gi(t,s.substr(0,r),a/Math.pow(10,3*(s.length-r)))}function CC(t,s){var a,r=t.indexOf("E")-t.indexOf(".")-1;if(t.match(/^#+0.0E\+0$/)){if(s==0)return"0.0E+0";if(s<0)return"-"+CC(t,-s);var i=t.indexOf(".");i===-1&&(i=t.indexOf("E"));var o=Math.floor(Math.log(s)*Math.LOG10E)%i;if(o<0&&(o+=i),a=(s/Math.pow(10,o)).toPrecision(r+1+(i+o)%i),a.indexOf("e")===-1){var c=Math.floor(Math.log(s)*Math.LOG10E);for(a.indexOf(".")===-1?a=a.charAt(0)+"."+a.substr(1)+"E+"+(c-a.length+o):a+="E+"+(c-o);a.substr(0,2)==="0.";)a=a.charAt(0)+a.substr(2,i)+"."+a.substr(2+i),a=a.replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");a=a.replace(/\+-/,"-")}a=a.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(u,f,x,h){return f+x+h.substr(0,(i+o)%i)+"."+h.substr(o)+"E"})}else a=s.toExponential(r);return t.match(/E\+00$/)&&a.match(/e[+-]\d$/)&&(a=a.substr(0,a.length-1)+"0"+a.charAt(a.length-1)),t.match(/E\-/)&&a.match(/e\+/)&&(a=a.replace(/e\+/,"e")),a.replace("e","E")}var TC=/# (\?+)( ?)\/( ?)(\d+)/;function GP(t,s,a){var r=parseInt(t[4],10),i=Math.round(s*r),o=Math.floor(i/r),c=i-o*r,u=r;return a+(o===0?"":""+o)+" "+(c===0?ka(" ",t[1].length+1+t[4].length):Rv(c,t[1].length)+t[2]+"/"+t[3]+Kn(u,t[4].length))}function qP(t,s,a){return a+(s===0?"":""+s)+ka(" ",t[1].length+2+t[4].length)}var EC=/^#*0*\.([0#]+)/,kC=/\).*[0#]/,AC=/\(###\) ###\\?-####/;function Or(t){for(var s="",a,r=0;r!=t.length;++r)switch(a=t.charCodeAt(r)){case 35:break;case 63:s+=" ";break;case 48:s+="0";break;default:s+=String.fromCharCode(a)}return s}function mw(t,s){var a=Math.pow(10,s);return""+Math.round(t*a)/a}function hw(t,s){var a=t-Math.floor(t),r=Math.pow(10,s);return s<(""+Math.round(a*r)).length?0:Math.round(a*r)}function KP(t,s){return s<(""+Math.round((t-Math.floor(t))*Math.pow(10,s))).length?1:0}function YP(t){return t<2147483647&&t>-2147483648?""+(t>=0?t|0:t-1|0):""+Math.floor(t)}function An(t,s,a){if(t.charCodeAt(0)===40&&!s.match(kC)){var r=s.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return a>=0?An("n",r,a):"("+An("n",r,-a)+")"}if(s.charCodeAt(s.length-1)===44)return WP(t,s,a);if(s.indexOf("%")!==-1)return HP(t,s,a);if(s.indexOf("E")!==-1)return CC(s,a);if(s.charCodeAt(0)===36)return"$"+An(t,s.substr(s.charAt(1)==" "?2:1),a);var i,o,c,u,f=Math.abs(a),x=a<0?"-":"";if(s.match(/^00+$/))return x+Cc(f,s.length);if(s.match(/^[#?]+$/))return i=Cc(a,0),i==="0"&&(i=""),i.length>s.length?i:Or(s.substr(0,s.length-i.length))+i;if(o=s.match(TC))return GP(o,f,x);if(s.match(/^#+0+$/))return x+Cc(f,s.length-s.indexOf("0"));if(o=s.match(EC))return i=mw(a,o[1].length).replace(/^([^\.]+)$/,"$1."+Or(o[1])).replace(/\.$/,"."+Or(o[1])).replace(/\.(\d*)$/,function(b,N){return"."+N+ka("0",Or(o[1]).length-N.length)}),s.indexOf("0.")!==-1?i:i.replace(/^0\./,".");if(s=s.replace(/^#+([0.])/,"$1"),o=s.match(/^(0*)\.(#*)$/))return x+mw(f,o[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,o[1].length?"0.":".");if(o=s.match(/^#{1,3},##0(\.?)$/))return x+Ol(Cc(f,0));if(o=s.match(/^#,##0\.([#0]*0)$/))return a<0?"-"+An(t,s,-a):Ol(""+(Math.floor(a)+KP(a,o[1].length)))+"."+Kn(hw(a,o[1].length),o[1].length);if(o=s.match(/^#,#*,#0/))return An(t,s.replace(/^#,#*,/,""),a);if(o=s.match(/^([0#]+)(\\?-([0#]+))+$/))return i=Uc(An(t,s.replace(/[\\-]/g,""),a)),c=0,Uc(Uc(s.replace(/\\/g,"")).replace(/[0#]/g,function(b){return c<i.length?i.charAt(c++):b==="0"?"0":""}));if(s.match(AC))return i=An(t,"##########",a),"("+i.substr(0,3)+") "+i.substr(3,3)+"-"+i.substr(6);var h="";if(o=s.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return c=Math.min(o[4].length,7),u=xf(f,Math.pow(10,c)-1,!1),i=""+x,h=Gi("n",o[1],u[1]),h.charAt(h.length-1)==" "&&(h=h.substr(0,h.length-1)+"0"),i+=h+o[2]+"/"+o[3],h=hf(u[2],c),h.length<o[4].length&&(h=Or(o[4].substr(o[4].length-h.length))+h),i+=h,i;if(o=s.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return c=Math.min(Math.max(o[1].length,o[4].length),7),u=xf(f,Math.pow(10,c)-1,!0),x+(u[0]||(u[1]?"":"0"))+" "+(u[1]?Rv(u[1],c)+o[2]+"/"+o[3]+hf(u[2],c):ka(" ",2*c+1+o[2].length+o[3].length));if(o=s.match(/^[#0?]+$/))return i=Cc(a,0),s.length<=i.length?i:Or(s.substr(0,s.length-i.length))+i;if(o=s.match(/^([#0?]+)\.([#0]+)$/)){i=""+a.toFixed(Math.min(o[2].length,10)).replace(/([^0])0+$/,"$1"),c=i.indexOf(".");var p=s.indexOf(".")-c,g=s.length-i.length-p;return Or(s.substr(0,p)+i+s.substr(s.length-g))}if(o=s.match(/^00,000\.([#0]*0)$/))return c=hw(a,o[1].length),a<0?"-"+An(t,s,-a):Ol(YP(a)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(b){return"00,"+(b.length<3?Kn(0,3-b.length):"")+b})+"."+Kn(c,o[1].length);switch(s){case"###,##0.00":return An(t,"#,##0.00",a);case"###,###":case"##,###":case"#,###":var y=Ol(Cc(f,0));return y!=="0"?x+y:"";case"###,###.00":return An(t,"###,##0.00",a).replace(/^0\./,".");case"#,###.00":return An(t,"#,##0.00",a).replace(/^0\./,".")}throw new Error("unsupported format |"+s+"|")}function XP(t,s,a){for(var r=s.length-1;s.charCodeAt(r-1)===44;)--r;return Gi(t,s.substr(0,r),a/Math.pow(10,3*(s.length-r)))}function QP(t,s,a){var r=s.replace(SC,""),i=s.length-r.length;return Gi(t,r,a*Math.pow(10,2*i))+ka("%",i)}function _C(t,s){var a,r=t.indexOf("E")-t.indexOf(".")-1;if(t.match(/^#+0.0E\+0$/)){if(s==0)return"0.0E+0";if(s<0)return"-"+_C(t,-s);var i=t.indexOf(".");i===-1&&(i=t.indexOf("E"));var o=Math.floor(Math.log(s)*Math.LOG10E)%i;if(o<0&&(o+=i),a=(s/Math.pow(10,o)).toPrecision(r+1+(i+o)%i),!a.match(/[Ee]/)){var c=Math.floor(Math.log(s)*Math.LOG10E);a.indexOf(".")===-1?a=a.charAt(0)+"."+a.substr(1)+"E+"+(c-a.length+o):a+="E+"+(c-o),a=a.replace(/\+-/,"-")}a=a.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(u,f,x,h){return f+x+h.substr(0,(i+o)%i)+"."+h.substr(o)+"E"})}else a=s.toExponential(r);return t.match(/E\+00$/)&&a.match(/e[+-]\d$/)&&(a=a.substr(0,a.length-1)+"0"+a.charAt(a.length-1)),t.match(/E\-/)&&a.match(/e\+/)&&(a=a.replace(/e\+/,"e")),a.replace("e","E")}function oi(t,s,a){if(t.charCodeAt(0)===40&&!s.match(kC)){var r=s.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return a>=0?oi("n",r,a):"("+oi("n",r,-a)+")"}if(s.charCodeAt(s.length-1)===44)return XP(t,s,a);if(s.indexOf("%")!==-1)return QP(t,s,a);if(s.indexOf("E")!==-1)return _C(s,a);if(s.charCodeAt(0)===36)return"$"+oi(t,s.substr(s.charAt(1)==" "?2:1),a);var i,o,c,u,f=Math.abs(a),x=a<0?"-":"";if(s.match(/^00+$/))return x+Kn(f,s.length);if(s.match(/^[#?]+$/))return i=""+a,a===0&&(i=""),i.length>s.length?i:Or(s.substr(0,s.length-i.length))+i;if(o=s.match(TC))return qP(o,f,x);if(s.match(/^#+0+$/))return x+Kn(f,s.length-s.indexOf("0"));if(o=s.match(EC))return i=(""+a).replace(/^([^\.]+)$/,"$1."+Or(o[1])).replace(/\.$/,"."+Or(o[1])),i=i.replace(/\.(\d*)$/,function(b,N){return"."+N+ka("0",Or(o[1]).length-N.length)}),s.indexOf("0.")!==-1?i:i.replace(/^0\./,".");if(s=s.replace(/^#+([0.])/,"$1"),o=s.match(/^(0*)\.(#*)$/))return x+(""+f).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,o[1].length?"0.":".");if(o=s.match(/^#{1,3},##0(\.?)$/))return x+Ol(""+f);if(o=s.match(/^#,##0\.([#0]*0)$/))return a<0?"-"+oi(t,s,-a):Ol(""+a)+"."+ka("0",o[1].length);if(o=s.match(/^#,#*,#0/))return oi(t,s.replace(/^#,#*,/,""),a);if(o=s.match(/^([0#]+)(\\?-([0#]+))+$/))return i=Uc(oi(t,s.replace(/[\\-]/g,""),a)),c=0,Uc(Uc(s.replace(/\\/g,"")).replace(/[0#]/g,function(b){return c<i.length?i.charAt(c++):b==="0"?"0":""}));if(s.match(AC))return i=oi(t,"##########",a),"("+i.substr(0,3)+") "+i.substr(3,3)+"-"+i.substr(6);var h="";if(o=s.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return c=Math.min(o[4].length,7),u=xf(f,Math.pow(10,c)-1,!1),i=""+x,h=Gi("n",o[1],u[1]),h.charAt(h.length-1)==" "&&(h=h.substr(0,h.length-1)+"0"),i+=h+o[2]+"/"+o[3],h=hf(u[2],c),h.length<o[4].length&&(h=Or(o[4].substr(o[4].length-h.length))+h),i+=h,i;if(o=s.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return c=Math.min(Math.max(o[1].length,o[4].length),7),u=xf(f,Math.pow(10,c)-1,!0),x+(u[0]||(u[1]?"":"0"))+" "+(u[1]?Rv(u[1],c)+o[2]+"/"+o[3]+hf(u[2],c):ka(" ",2*c+1+o[2].length+o[3].length));if(o=s.match(/^[#0?]+$/))return i=""+a,s.length<=i.length?i:Or(s.substr(0,s.length-i.length))+i;if(o=s.match(/^([#0]+)\.([#0]+)$/)){i=""+a.toFixed(Math.min(o[2].length,10)).replace(/([^0])0+$/,"$1"),c=i.indexOf(".");var p=s.indexOf(".")-c,g=s.length-i.length-p;return Or(s.substr(0,p)+i+s.substr(s.length-g))}if(o=s.match(/^00,000\.([#0]*0)$/))return a<0?"-"+oi(t,s,-a):Ol(""+a).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(b){return"00,"+(b.length<3?Kn(0,3-b.length):"")+b})+"."+Kn(0,o[1].length);switch(s){case"###,###":case"##,###":case"#,###":var y=Ol(""+f);return y!=="0"?x+y:"";default:if(s.match(/\.[0#?]*$/))return oi(t,s.slice(0,s.lastIndexOf(".")),a)+Or(s.slice(s.lastIndexOf(".")))}throw new Error("unsupported format |"+s+"|")}function Gi(t,s,a){return(a|0)===a?oi(t,s,a):An(t,s,a)}function ZP(t){for(var s=[],a=!1,r=0,i=0;r<t.length;++r)switch(t.charCodeAt(r)){case 34:a=!a;break;case 95:case 42:case 92:++r;break;case 59:s[s.length]=t.substr(i,r-i),i=r+1}if(s[s.length]=t.substr(i),a===!0)throw new Error("Format |"+t+"| unterminated string ");return s}var DC=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function OC(t){for(var s=0,a="",r="";s<t.length;)switch(a=t.charAt(s)){case"G":ff(t,s)&&(s+=6),s++;break;case'"':for(;t.charCodeAt(++s)!==34&&s<t.length;);++s;break;case"\\":s+=2;break;case"_":s+=2;break;case"@":++s;break;case"B":case"b":if(t.charAt(s+1)==="1"||t.charAt(s+1)==="2")return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"":if(t.substr(s,3).toUpperCase()==="A/P"||t.substr(s,5).toUpperCase()==="AM/PM"||t.substr(s,5).toUpperCase()==="/")return!0;++s;break;case"[":for(r=a;t.charAt(s++)!=="]"&&s<t.length;)r+=t.charAt(s);if(r.match(DC))return!0;break;case".":case"0":case"#":for(;s<t.length&&("0#?.,E+-%".indexOf(a=t.charAt(++s))>-1||a=="\\"&&t.charAt(s+1)=="-"&&"0#".indexOf(t.charAt(s+2))>-1););break;case"?":for(;t.charAt(++s)===a;);break;case"*":++s,(t.charAt(s)==" "||t.charAt(s)=="*")&&++s;break;case"(":case")":++s;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;s<t.length&&"0123456789".indexOf(t.charAt(++s))>-1;);break;case" ":++s;break;default:++s;break}return!1}function JP(t,s,a,r){for(var i=[],o="",c=0,u="",f="t",x,h,p,g="H";c<t.length;)switch(u=t.charAt(c)){case"G":if(!ff(t,c))throw new Error("unrecognized character "+u+" in "+t);i[i.length]={t:"G",v:"General"},c+=7;break;case'"':for(o="";(p=t.charCodeAt(++c))!==34&&c<t.length;)o+=String.fromCharCode(p);i[i.length]={t:"t",v:o},++c;break;case"\\":var y=t.charAt(++c),b=y==="("||y===")"?y:"t";i[i.length]={t:b,v:y},++c;break;case"_":i[i.length]={t:"t",v:" "},c+=2;break;case"@":i[i.length]={t:"T",v:s},++c;break;case"B":case"b":if(t.charAt(c+1)==="1"||t.charAt(c+1)==="2"){if(x==null&&(x=Ph(s,a,t.charAt(c+1)==="2"),x==null))return"";i[i.length]={t:"X",v:t.substr(c,2)},f=u,c+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":u=u.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(s<0||x==null&&(x=Ph(s,a),x==null))return"";for(o=u;++c<t.length&&t.charAt(c).toLowerCase()===u;)o+=u;u==="m"&&f.toLowerCase()==="h"&&(u="M"),u==="h"&&(u=g),i[i.length]={t:u,v:o},f=u;break;case"A":case"a":case"":var N={t:u,v:u};if(x==null&&(x=Ph(s,a)),t.substr(c,3).toUpperCase()==="A/P"?(x!=null&&(N.v=x.H>=12?"P":"A"),N.t="T",g="h",c+=3):t.substr(c,5).toUpperCase()==="AM/PM"?(x!=null&&(N.v=x.H>=12?"PM":"AM"),N.t="T",c+=5,g="h"):t.substr(c,5).toUpperCase()==="/"?(x!=null&&(N.v=x.H>=12?"":""),N.t="T",c+=5,g="h"):(N.t="t",++c),x==null&&N.t==="T")return"";i[i.length]=N,f=u;break;case"[":for(o=u;t.charAt(c++)!=="]"&&c<t.length;)o+=t.charAt(c);if(o.slice(-1)!=="]")throw'unterminated "[" block: |'+o+"|";if(o.match(DC)){if(x==null&&(x=Ph(s,a),x==null))return"";i[i.length]={t:"Z",v:o.toLowerCase()},f=o.charAt(1)}else o.indexOf("$")>-1&&(o=(o.match(/\$([^-\[\]]*)/)||[])[1]||"$",OC(t)||(i[i.length]={t:"t",v:o}));break;case".":if(x!=null){for(o=u;++c<t.length&&(u=t.charAt(c))==="0";)o+=u;i[i.length]={t:"s",v:o};break}case"0":case"#":for(o=u;++c<t.length&&"0#?.,E+-%".indexOf(u=t.charAt(c))>-1;)o+=u;i[i.length]={t:"n",v:o};break;case"?":for(o=u;t.charAt(++c)===u;)o+=u;i[i.length]={t:u,v:o},f=u;break;case"*":++c,(t.charAt(c)==" "||t.charAt(c)=="*")&&++c;break;case"(":case")":i[i.length]={t:r===1?"t":u,v:u},++c;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(o=u;c<t.length&&"0123456789".indexOf(t.charAt(++c))>-1;)o+=t.charAt(c);i[i.length]={t:"D",v:o};break;case" ":i[i.length]={t:u,v:u},++c;break;case"$":i[i.length]={t:"t",v:"$"},++c;break;default:if(",$-+/():!^&'~{}<>=acfijklopqrtuvwxzP".indexOf(u)===-1)throw new Error("unrecognized character "+u+" in "+t);i[i.length]={t:"t",v:u},++c;break}var S=0,C=0,k;for(c=i.length-1,f="t";c>=0;--c)switch(i[c].t){case"h":case"H":i[c].t=g,f="h",S<1&&(S=1);break;case"s":(k=i[c].v.match(/\.0+$/))&&(C=Math.max(C,k[0].length-1)),S<3&&(S=3);case"d":case"y":case"M":case"e":f=i[c].t;break;case"m":f==="s"&&(i[c].t="M",S<2&&(S=2));break;case"X":break;case"Z":S<1&&i[c].v.match(/[Hh]/)&&(S=1),S<2&&i[c].v.match(/[Mm]/)&&(S=2),S<3&&i[c].v.match(/[Ss]/)&&(S=3)}switch(S){case 0:break;case 1:x.u>=.5&&(x.u=0,++x.S),x.S>=60&&(x.S=0,++x.M),x.M>=60&&(x.M=0,++x.H);break;case 2:x.u>=.5&&(x.u=0,++x.S),x.S>=60&&(x.S=0,++x.M);break}var A="",G;for(c=0;c<i.length;++c)switch(i[c].t){case"t":case"T":case" ":case"D":break;case"X":i[c].v="",i[c].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":i[c].v=$P(i[c].t.charCodeAt(0),i[c].v,x,C),i[c].t="t";break;case"n":case"?":for(G=c+1;i[G]!=null&&((u=i[G].t)==="?"||u==="D"||(u===" "||u==="t")&&i[G+1]!=null&&(i[G+1].t==="?"||i[G+1].t==="t"&&i[G+1].v==="/")||i[c].t==="("&&(u===" "||u==="n"||u===")")||u==="t"&&(i[G].v==="/"||i[G].v===" "&&i[G+1]!=null&&i[G+1].t=="?"));)i[c].v+=i[G].v,i[G]={v:"",t:";"},++G;A+=i[c].v,c=G-1;break;case"G":i[c].t="t",i[c].v=_g(s,a);break}var F="",E,T;if(A.length>0){A.charCodeAt(0)==40?(E=s<0&&A.charCodeAt(0)===45?-s:s,T=Gi("n",A,E)):(E=s<0&&r>1?-s:s,T=Gi("n",A,E),E<0&&i[0]&&i[0].t=="t"&&(T=T.substr(1),i[0].v="-"+i[0].v)),G=T.length-1;var _=i.length;for(c=0;c<i.length;++c)if(i[c]!=null&&i[c].t!="t"&&i[c].v.indexOf(".")>-1){_=c;break}var P=i.length;if(_===i.length&&T.indexOf("E")===-1){for(c=i.length-1;c>=0;--c)i[c]==null||"n?".indexOf(i[c].t)===-1||(G>=i[c].v.length-1?(G-=i[c].v.length,i[c].v=T.substr(G+1,i[c].v.length)):G<0?i[c].v="":(i[c].v=T.substr(0,G+1),G=-1),i[c].t="t",P=c);G>=0&&P<i.length&&(i[P].v=T.substr(0,G+1)+i[P].v)}else if(_!==i.length&&T.indexOf("E")===-1){for(G=T.indexOf(".")-1,c=_;c>=0;--c)if(!(i[c]==null||"n?".indexOf(i[c].t)===-1)){for(h=i[c].v.indexOf(".")>-1&&c===_?i[c].v.indexOf(".")-1:i[c].v.length-1,F=i[c].v.substr(h+1);h>=0;--h)G>=0&&(i[c].v.charAt(h)==="0"||i[c].v.charAt(h)==="#")&&(F=T.charAt(G--)+F);i[c].v=F,i[c].t="t",P=c}for(G>=0&&P<i.length&&(i[P].v=T.substr(0,G+1)+i[P].v),G=T.indexOf(".")+1,c=_;c<i.length;++c)if(!(i[c]==null||"n?(".indexOf(i[c].t)===-1&&c!==_)){for(h=i[c].v.indexOf(".")>-1&&c===_?i[c].v.indexOf(".")+1:0,F=i[c].v.substr(0,h);h<i[c].v.length;++h)G<T.length&&(F+=T.charAt(G++));i[c].v=F,i[c].t="t",P=c}}}for(c=0;c<i.length;++c)i[c]!=null&&"n?".indexOf(i[c].t)>-1&&(E=r>1&&s<0&&c>0&&i[c-1].v==="-"?-s:s,i[c].v=Gi(i[c].t,i[c].v,E),i[c].t="t");var z="";for(c=0;c!==i.length;++c)i[c]!=null&&(z+=i[c].v);return z}var fw=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function xw(t,s){if(s==null)return!1;var a=parseFloat(s[2]);switch(s[1]){case"=":if(t==a)return!0;break;case">":if(t>a)return!0;break;case"<":if(t<a)return!0;break;case"<>":if(t!=a)return!0;break;case">=":if(t>=a)return!0;break;case"<=":if(t<=a)return!0;break}return!1}function eM(t,s){var a=ZP(t),r=a.length,i=a[r-1].indexOf("@");if(r<4&&i>-1&&--r,a.length>4)throw new Error("cannot find right format for |"+a.join("|")+"|");if(typeof s!="number")return[4,a.length===4||i>-1?a[a.length-1]:"@"];switch(a.length){case 1:a=i>-1?["General","General","General",a[0]]:[a[0],a[0],a[0],"@"];break;case 2:a=i>-1?[a[0],a[0],a[0],a[1]]:[a[0],a[1],a[0],"@"];break;case 3:a=i>-1?[a[0],a[1],a[0],a[2]]:[a[0],a[1],a[2],"@"];break}var o=s>0?a[0]:s<0?a[1]:a[2];if(a[0].indexOf("[")===-1&&a[1].indexOf("[")===-1)return[r,o];if(a[0].match(/\[[=<>]/)!=null||a[1].match(/\[[=<>]/)!=null){var c=a[0].match(fw),u=a[1].match(fw);return xw(s,c)?[r,a[0]]:xw(s,u)?[r,a[1]]:[r,a[c!=null&&u!=null?2:1]]}return[r,o]}function Fl(t,s,a){a==null&&(a={});var r="";switch(typeof t){case"string":t=="m/d/yy"&&a.dateNF?r=a.dateNF:r=t;break;case"number":t==14&&a.dateNF?r=a.dateNF:r=(a.table!=null?a.table:Da)[t],r==null&&(r=a.table&&a.table[uw[t]]||Da[uw[t]]),r==null&&(r=MP[t]||"General");break}if(ff(r,0))return _g(s,a);s instanceof Date&&(s=wC(s,a.date1904));var i=eM(r,s);if(ff(i[1]))return _g(s,a);if(s===!0)s="TRUE";else if(s===!1)s="FALSE";else if(s===""||s==null)return"";return JP(i[1],s,a,i[0])}function RC(t,s){if(typeof s!="number"){s=+s||-1;for(var a=0;a<392;++a){if(Da[a]==null){s<0&&(s=a);continue}if(Da[a]==t){s=a;break}}s<0&&(s=391)}return Da[s]=t,s}function qf(t){for(var s=0;s!=392;++s)t[s]!==void 0&&RC(t[s],s)}function Kf(){Da=PP()}var PC=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;function tM(t){var s=typeof t=="number"?Da[t]:t;return s=s.replace(PC,"(\\d+)"),new RegExp("^"+s+"$")}function sM(t,s,a){var r=-1,i=-1,o=-1,c=-1,u=-1,f=-1;(s.match(PC)||[]).forEach(function(p,g){var y=parseInt(a[g+1],10);switch(p.toLowerCase().charAt(0)){case"y":r=y;break;case"d":o=y;break;case"h":c=y;break;case"s":f=y;break;case"m":c>=0?u=y:i=y;break}}),f>=0&&u==-1&&i>=0&&(u=i,i=-1);var x=(""+(r>=0?r:new Date().getFullYear())).slice(-4)+"-"+("00"+(i>=1?i:1)).slice(-2)+"-"+("00"+(o>=1?o:1)).slice(-2);x.length==7&&(x="0"+x),x.length==8&&(x="20"+x);var h=("00"+(c>=0?c:0)).slice(-2)+":"+("00"+(u>=0?u:0)).slice(-2)+":"+("00"+(f>=0?f:0)).slice(-2);return c==-1&&u==-1&&f==-1?x:r==-1&&i==-1&&o==-1?h:x+"T"+h}var aM=(function(){var t={};t.version="1.2.0";function s(){for(var T=0,_=new Array(256),P=0;P!=256;++P)T=P,T=T&1?-306674912^T>>>1:T>>>1,T=T&1?-306674912^T>>>1:T>>>1,T=T&1?-306674912^T>>>1:T>>>1,T=T&1?-306674912^T>>>1:T>>>1,T=T&1?-306674912^T>>>1:T>>>1,T=T&1?-306674912^T>>>1:T>>>1,T=T&1?-306674912^T>>>1:T>>>1,T=T&1?-306674912^T>>>1:T>>>1,_[P]=T;return typeof Int32Array<"u"?new Int32Array(_):_}var a=s();function r(T){var _=0,P=0,z=0,V=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(z=0;z!=256;++z)V[z]=T[z];for(z=0;z!=256;++z)for(P=T[z],_=256+z;_<4096;_+=256)P=V[_]=P>>>8^T[P&255];var W=[];for(z=1;z!=16;++z)W[z-1]=typeof Int32Array<"u"?V.subarray(z*256,z*256+256):V.slice(z*256,z*256+256);return W}var i=r(a),o=i[0],c=i[1],u=i[2],f=i[3],x=i[4],h=i[5],p=i[6],g=i[7],y=i[8],b=i[9],N=i[10],S=i[11],C=i[12],k=i[13],A=i[14];function G(T,_){for(var P=_^-1,z=0,V=T.length;z<V;)P=P>>>8^a[(P^T.charCodeAt(z++))&255];return~P}function F(T,_){for(var P=_^-1,z=T.length-15,V=0;V<z;)P=A[T[V++]^P&255]^k[T[V++]^P>>8&255]^C[T[V++]^P>>16&255]^S[T[V++]^P>>>24]^N[T[V++]]^b[T[V++]]^y[T[V++]]^g[T[V++]]^p[T[V++]]^h[T[V++]]^x[T[V++]]^f[T[V++]]^u[T[V++]]^c[T[V++]]^o[T[V++]]^a[T[V++]];for(z+=15;V<z;)P=P>>>8^a[(P^T[V++])&255];return~P}function E(T,_){for(var P=_^-1,z=0,V=T.length,W=0,q=0;z<V;)W=T.charCodeAt(z++),W<128?P=P>>>8^a[(P^W)&255]:W<2048?(P=P>>>8^a[(P^(192|W>>6&31))&255],P=P>>>8^a[(P^(128|W&63))&255]):W>=55296&&W<57344?(W=(W&1023)+64,q=T.charCodeAt(z++)&1023,P=P>>>8^a[(P^(240|W>>8&7))&255],P=P>>>8^a[(P^(128|W>>2&63))&255],P=P>>>8^a[(P^(128|q>>6&15|(W&3)<<4))&255],P=P>>>8^a[(P^(128|q&63))&255]):(P=P>>>8^a[(P^(224|W>>12&15))&255],P=P>>>8^a[(P^(128|W>>6&63))&255],P=P>>>8^a[(P^(128|W&63))&255]);return~P}return t.table=a,t.bstr=G,t.buf=F,t.str=E,t})(),ea=(function(){var s={};s.version="1.2.1";function a(Q,ue){for(var le=Q.split("/"),M=ue.split("/"),ne=0,ce=0,Re=Math.min(le.length,M.length);ne<Re;++ne){if(ce=le[ne].length-M[ne].length)return ce;if(le[ne]!=M[ne])return le[ne]<M[ne]?-1:1}return le.length-M.length}function r(Q){if(Q.charAt(Q.length-1)=="/")return Q.slice(0,-1).indexOf("/")===-1?Q:r(Q.slice(0,-1));var ue=Q.lastIndexOf("/");return ue===-1?Q:Q.slice(0,ue+1)}function i(Q){if(Q.charAt(Q.length-1)=="/")return i(Q.slice(0,-1));var ue=Q.lastIndexOf("/");return ue===-1?Q:Q.slice(ue+1)}function o(Q,ue){typeof ue=="string"&&(ue=new Date(ue));var le=ue.getHours();le=le<<6|ue.getMinutes(),le=le<<5|ue.getSeconds()>>>1,Q.write_shift(2,le);var M=ue.getFullYear()-1980;M=M<<4|ue.getMonth()+1,M=M<<5|ue.getDate(),Q.write_shift(2,M)}function c(Q){var ue=Q.read_shift(2)&65535,le=Q.read_shift(2)&65535,M=new Date,ne=le&31;le>>>=5;var ce=le&15;le>>>=4,M.setMilliseconds(0),M.setFullYear(le+1980),M.setMonth(ce-1),M.setDate(ne);var Re=ue&31;ue>>>=5;var $e=ue&63;return ue>>>=6,M.setHours(ue),M.setMinutes($e),M.setSeconds(Re<<1),M}function u(Q){mn(Q,0);for(var ue={},le=0;Q.l<=Q.length-4;){var M=Q.read_shift(2),ne=Q.read_shift(2),ce=Q.l+ne,Re={};switch(M){case 21589:le=Q.read_shift(1),le&1&&(Re.mtime=Q.read_shift(4)),ne>5&&(le&2&&(Re.atime=Q.read_shift(4)),le&4&&(Re.ctime=Q.read_shift(4))),Re.mtime&&(Re.mt=new Date(Re.mtime*1e3));break}Q.l=ce,ue[M]=Re}return ue}var f;function x(){return f||(f={})}function h(Q,ue){if(Q[0]==80&&Q[1]==75)return wt(Q,ue);if((Q[0]|32)==109&&(Q[1]|32)==105)return dt(Q,ue);if(Q.length<512)throw new Error("CFB file size "+Q.length+" < 512");var le=3,M=512,ne=0,ce=0,Re=0,$e=0,Oe=0,Me=[],Ie=Q.slice(0,512);mn(Ie,0);var rt=p(Ie);switch(le=rt[0],le){case 3:M=512;break;case 4:M=4096;break;case 0:if(rt[1]==0)return wt(Q,ue);default:throw new Error("Major Version: Expected 3 or 4 saw "+le)}M!==512&&(Ie=Q.slice(0,M),mn(Ie,28));var he=Q.slice(0,M);g(Ie,le);var We=Ie.read_shift(4,"i");if(le===3&&We!==0)throw new Error("# Directory Sectors: Expected 0 saw "+We);Ie.l+=4,Re=Ie.read_shift(4,"i"),Ie.l+=4,Ie.chk("00100000","Mini Stream Cutoff Size: "),$e=Ie.read_shift(4,"i"),ne=Ie.read_shift(4,"i"),Oe=Ie.read_shift(4,"i"),ce=Ie.read_shift(4,"i");for(var Ee=-1,Je=0;Je<109&&(Ee=Ie.read_shift(4,"i"),!(Ee<0));++Je)Me[Je]=Ee;var it=y(Q,M);S(Oe,ce,it,M,Me);var kt=k(it,Re,Me,M);kt[Re].name="!Directory",ne>0&&$e!==q&&(kt[$e].name="!MiniFAT"),kt[Me[0]].name="!FAT",kt.fat_addrs=Me,kt.ssz=M;var Qe={},Wt=[],Nr=[],gn=[];A(Re,kt,it,Wt,ne,Qe,Nr,$e),b(Nr,gn,Wt),Wt.shift();var Ir={FileIndex:Nr,FullPaths:gn};return ue&&ue.raw&&(Ir.raw={header:he,sectors:it}),Ir}function p(Q){if(Q[Q.l]==80&&Q[Q.l+1]==75)return[0,0];Q.chk(B,"Header Signature: "),Q.l+=16;var ue=Q.read_shift(2,"u");return[Q.read_shift(2,"u"),ue]}function g(Q,ue){var le=9;switch(Q.l+=2,le=Q.read_shift(2)){case 9:if(ue!=3)throw new Error("Sector Shift: Expected 9 saw "+le);break;case 12:if(ue!=4)throw new Error("Sector Shift: Expected 12 saw "+le);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+le)}Q.chk("0600","Mini Sector Shift: "),Q.chk("000000000000","Reserved: ")}function y(Q,ue){for(var le=Math.ceil(Q.length/ue)-1,M=[],ne=1;ne<le;++ne)M[ne-1]=Q.slice(ne*ue,(ne+1)*ue);return M[le-1]=Q.slice(le*ue),M}function b(Q,ue,le){for(var M=0,ne=0,ce=0,Re=0,$e=0,Oe=le.length,Me=[],Ie=[];M<Oe;++M)Me[M]=Ie[M]=M,ue[M]=le[M];for(;$e<Ie.length;++$e)M=Ie[$e],ne=Q[M].L,ce=Q[M].R,Re=Q[M].C,Me[M]===M&&(ne!==-1&&Me[ne]!==ne&&(Me[M]=Me[ne]),ce!==-1&&Me[ce]!==ce&&(Me[M]=Me[ce])),Re!==-1&&(Me[Re]=M),ne!==-1&&M!=Me[M]&&(Me[ne]=Me[M],Ie.lastIndexOf(ne)<$e&&Ie.push(ne)),ce!==-1&&M!=Me[M]&&(Me[ce]=Me[M],Ie.lastIndexOf(ce)<$e&&Ie.push(ce));for(M=1;M<Oe;++M)Me[M]===M&&(ce!==-1&&Me[ce]!==ce?Me[M]=Me[ce]:ne!==-1&&Me[ne]!==ne&&(Me[M]=Me[ne]));for(M=1;M<Oe;++M)if(Q[M].type!==0){if($e=M,$e!=Me[$e])do $e=Me[$e],ue[M]=ue[$e]+"/"+ue[M];while($e!==0&&Me[$e]!==-1&&$e!=Me[$e]);Me[M]=-1}for(ue[0]+="/",M=1;M<Oe;++M)Q[M].type!==2&&(ue[M]+="/")}function N(Q,ue,le){for(var M=Q.start,ne=Q.size,ce=[],Re=M;le&&ne>0&&Re>=0;)ce.push(ue.slice(Re*W,Re*W+W)),ne-=W,Re=xo(le,Re*4);return ce.length===0?Ge(0):xr(ce).slice(0,Q.size)}function S(Q,ue,le,M,ne){var ce=q;if(Q===q){if(ue!==0)throw new Error("DIFAT chain shorter than expected")}else if(Q!==-1){var Re=le[Q],$e=(M>>>2)-1;if(!Re)return;for(var Oe=0;Oe<$e&&(ce=xo(Re,Oe*4))!==q;++Oe)ne.push(ce);S(xo(Re,M-4),ue-1,le,M,ne)}}function C(Q,ue,le,M,ne){var ce=[],Re=[];ne||(ne=[]);var $e=M-1,Oe=0,Me=0;for(Oe=ue;Oe>=0;){ne[Oe]=!0,ce[ce.length]=Oe,Re.push(Q[Oe]);var Ie=le[Math.floor(Oe*4/M)];if(Me=Oe*4&$e,M<4+Me)throw new Error("FAT boundary crossed: "+Oe+" 4 "+M);if(!Q[Ie])break;Oe=xo(Q[Ie],Me)}return{nodes:ce,data:ww([Re])}}function k(Q,ue,le,M){var ne=Q.length,ce=[],Re=[],$e=[],Oe=[],Me=M-1,Ie=0,rt=0,he=0,We=0;for(Ie=0;Ie<ne;++Ie)if($e=[],he=Ie+ue,he>=ne&&(he-=ne),!Re[he]){Oe=[];var Ee=[];for(rt=he;rt>=0;){Ee[rt]=!0,Re[rt]=!0,$e[$e.length]=rt,Oe.push(Q[rt]);var Je=le[Math.floor(rt*4/M)];if(We=rt*4&Me,M<4+We)throw new Error("FAT boundary crossed: "+rt+" 4 "+M);if(!Q[Je]||(rt=xo(Q[Je],We),Ee[rt]))break}ce[he]={nodes:$e,data:ww([Oe])}}return ce}function A(Q,ue,le,M,ne,ce,Re,$e){for(var Oe=0,Me=M.length?2:0,Ie=ue[Q].data,rt=0,he=0,We;rt<Ie.length;rt+=128){var Ee=Ie.slice(rt,rt+128);mn(Ee,64),he=Ee.read_shift(2),We=Bv(Ee,0,he-Me),M.push(We);var Je={name:We,type:Ee.read_shift(1),color:Ee.read_shift(1),L:Ee.read_shift(4,"i"),R:Ee.read_shift(4,"i"),C:Ee.read_shift(4,"i"),clsid:Ee.read_shift(16),state:Ee.read_shift(4,"i"),start:0,size:0},it=Ee.read_shift(2)+Ee.read_shift(2)+Ee.read_shift(2)+Ee.read_shift(2);it!==0&&(Je.ct=G(Ee,Ee.l-8));var kt=Ee.read_shift(2)+Ee.read_shift(2)+Ee.read_shift(2)+Ee.read_shift(2);kt!==0&&(Je.mt=G(Ee,Ee.l-8)),Je.start=Ee.read_shift(4,"i"),Je.size=Ee.read_shift(4,"i"),Je.size<0&&Je.start<0&&(Je.size=Je.type=0,Je.start=q,Je.name=""),Je.type===5?(Oe=Je.start,ne>0&&Oe!==q&&(ue[Oe].name="!StreamData")):Je.size>=4096?(Je.storage="fat",ue[Je.start]===void 0&&(ue[Je.start]=C(le,Je.start,ue.fat_addrs,ue.ssz)),ue[Je.start].name=Je.name,Je.content=ue[Je.start].data.slice(0,Je.size)):(Je.storage="minifat",Je.size<0?Je.size=0:Oe!==q&&Je.start!==q&&ue[Oe]&&(Je.content=N(Je,ue[Oe].data,(ue[$e]||{}).data))),Je.content&&mn(Je.content,0),ce[We]=Je,Re.push(Je)}}function G(Q,ue){return new Date((fn(Q,ue+4)/1e7*Math.pow(2,32)+fn(Q,ue)/1e7-11644473600)*1e3)}function F(Q,ue){return x(),h(f.readFileSync(Q),ue)}function E(Q,ue){var le=ue&&ue.type;switch(le||Ls&&Buffer.isBuffer(Q)&&(le="buffer"),le||"base64"){case"file":return F(Q,ue);case"base64":return h(Gn(Xi(Q)),ue);case"binary":return h(Gn(Q),ue)}return h(Q,ue)}function T(Q,ue){var le=ue||{},M=le.root||"Root Entry";if(Q.FullPaths||(Q.FullPaths=[]),Q.FileIndex||(Q.FileIndex=[]),Q.FullPaths.length!==Q.FileIndex.length)throw new Error("inconsistent CFB structure");Q.FullPaths.length===0&&(Q.FullPaths[0]=M+"/",Q.FileIndex[0]={name:M,type:5}),le.CLSID&&(Q.FileIndex[0].clsid=le.CLSID),_(Q)}function _(Q){var ue="Sh33tJ5";if(!ea.find(Q,"/"+ue)){var le=Ge(4);le[0]=55,le[1]=le[3]=50,le[2]=54,Q.FileIndex.push({name:ue,type:2,content:le,size:4,L:69,R:69,C:69}),Q.FullPaths.push(Q.FullPaths[0]+ue),P(Q)}}function P(Q,ue){T(Q);for(var le=!1,M=!1,ne=Q.FullPaths.length-1;ne>=0;--ne){var ce=Q.FileIndex[ne];switch(ce.type){case 0:M?le=!0:(Q.FileIndex.pop(),Q.FullPaths.pop());break;case 1:case 2:case 5:M=!0,isNaN(ce.R*ce.L*ce.C)&&(le=!0),ce.R>-1&&ce.L>-1&&ce.R==ce.L&&(le=!0);break;default:le=!0;break}}if(!(!le&&!ue)){var Re=new Date(1987,1,19),$e=0,Oe=Object.create?Object.create(null):{},Me=[];for(ne=0;ne<Q.FullPaths.length;++ne)Oe[Q.FullPaths[ne]]=!0,Q.FileIndex[ne].type!==0&&Me.push([Q.FullPaths[ne],Q.FileIndex[ne]]);for(ne=0;ne<Me.length;++ne){var Ie=r(Me[ne][0]);M=Oe[Ie],M||(Me.push([Ie,{name:i(Ie).replace("/",""),type:1,clsid:U,ct:Re,mt:Re,content:null}]),Oe[Ie]=!0)}for(Me.sort(function(We,Ee){return a(We[0],Ee[0])}),Q.FullPaths=[],Q.FileIndex=[],ne=0;ne<Me.length;++ne)Q.FullPaths[ne]=Me[ne][0],Q.FileIndex[ne]=Me[ne][1];for(ne=0;ne<Me.length;++ne){var rt=Q.FileIndex[ne],he=Q.FullPaths[ne];if(rt.name=i(he).replace("/",""),rt.L=rt.R=rt.C=-(rt.color=1),rt.size=rt.content?rt.content.length:0,rt.start=0,rt.clsid=rt.clsid||U,ne===0)rt.C=Me.length>1?1:-1,rt.size=0,rt.type=5;else if(he.slice(-1)=="/"){for($e=ne+1;$e<Me.length&&r(Q.FullPaths[$e])!=he;++$e);for(rt.C=$e>=Me.length?-1:$e,$e=ne+1;$e<Me.length&&r(Q.FullPaths[$e])!=r(he);++$e);rt.R=$e>=Me.length?-1:$e,rt.type=1}else r(Q.FullPaths[ne+1]||"")==r(he)&&(rt.R=ne+1),rt.type=2}}}function z(Q,ue){var le=ue||{};if(le.fileType=="mad")return Ct(Q,le);switch(P(Q),le.fileType){case"zip":return ss(Q,le)}var M=(function(We){for(var Ee=0,Je=0,it=0;it<We.FileIndex.length;++it){var kt=We.FileIndex[it];if(kt.content){var Qe=kt.content.length;Qe>0&&(Qe<4096?Ee+=Qe+63>>6:Je+=Qe+511>>9)}}for(var Wt=We.FullPaths.length+3>>2,Nr=Ee+7>>3,gn=Ee+127>>7,Ir=Nr+Je+Wt+gn,Br=Ir+127>>7,vn=Br<=109?0:Math.ceil((Br-109)/127);Ir+Br+vn+127>>7>Br;)vn=++Br<=109?0:Math.ceil((Br-109)/127);var br=[1,vn,Br,gn,Wt,Je,Ee,0];return We.FileIndex[0].size=Ee<<6,br[7]=(We.FileIndex[0].start=br[0]+br[1]+br[2]+br[3]+br[4]+br[5])+(br[6]+7>>3),br})(Q),ne=Ge(M[7]<<9),ce=0,Re=0;{for(ce=0;ce<8;++ce)ne.write_shift(1,ae[ce]);for(ce=0;ce<8;++ce)ne.write_shift(2,0);for(ne.write_shift(2,62),ne.write_shift(2,3),ne.write_shift(2,65534),ne.write_shift(2,9),ne.write_shift(2,6),ce=0;ce<3;++ce)ne.write_shift(2,0);for(ne.write_shift(4,0),ne.write_shift(4,M[2]),ne.write_shift(4,M[0]+M[1]+M[2]+M[3]-1),ne.write_shift(4,0),ne.write_shift(4,4096),ne.write_shift(4,M[3]?M[0]+M[1]+M[2]-1:q),ne.write_shift(4,M[3]),ne.write_shift(-4,M[1]?M[0]-1:q),ne.write_shift(4,M[1]),ce=0;ce<109;++ce)ne.write_shift(-4,ce<M[2]?M[1]+ce:-1)}if(M[1])for(Re=0;Re<M[1];++Re){for(;ce<236+Re*127;++ce)ne.write_shift(-4,ce<M[2]?M[1]+ce:-1);ne.write_shift(-4,Re===M[1]-1?q:Re+1)}var $e=function(We){for(Re+=We;ce<Re-1;++ce)ne.write_shift(-4,ce+1);We&&(++ce,ne.write_shift(-4,q))};for(Re=ce=0,Re+=M[1];ce<Re;++ce)ne.write_shift(-4,Z.DIFSECT);for(Re+=M[2];ce<Re;++ce)ne.write_shift(-4,Z.FATSECT);$e(M[3]),$e(M[4]);for(var Oe=0,Me=0,Ie=Q.FileIndex[0];Oe<Q.FileIndex.length;++Oe)Ie=Q.FileIndex[Oe],Ie.content&&(Me=Ie.content.length,!(Me<4096)&&(Ie.start=Re,$e(Me+511>>9)));for($e(M[6]+7>>3);ne.l&511;)ne.write_shift(-4,Z.ENDOFCHAIN);for(Re=ce=0,Oe=0;Oe<Q.FileIndex.length;++Oe)Ie=Q.FileIndex[Oe],Ie.content&&(Me=Ie.content.length,!(!Me||Me>=4096)&&(Ie.start=Re,$e(Me+63>>6)));for(;ne.l&511;)ne.write_shift(-4,Z.ENDOFCHAIN);for(ce=0;ce<M[4]<<2;++ce){var rt=Q.FullPaths[ce];if(!rt||rt.length===0){for(Oe=0;Oe<17;++Oe)ne.write_shift(4,0);for(Oe=0;Oe<3;++Oe)ne.write_shift(4,-1);for(Oe=0;Oe<12;++Oe)ne.write_shift(4,0);continue}Ie=Q.FileIndex[ce],ce===0&&(Ie.start=Ie.size?Ie.start-1:q);var he=ce===0&&le.root||Ie.name;if(Me=2*(he.length+1),ne.write_shift(64,he,"utf16le"),ne.write_shift(2,Me),ne.write_shift(1,Ie.type),ne.write_shift(1,Ie.color),ne.write_shift(-4,Ie.L),ne.write_shift(-4,Ie.R),ne.write_shift(-4,Ie.C),Ie.clsid)ne.write_shift(16,Ie.clsid,"hex");else for(Oe=0;Oe<4;++Oe)ne.write_shift(4,0);ne.write_shift(4,Ie.state||0),ne.write_shift(4,0),ne.write_shift(4,0),ne.write_shift(4,0),ne.write_shift(4,0),ne.write_shift(4,Ie.start),ne.write_shift(4,Ie.size),ne.write_shift(4,0)}for(ce=1;ce<Q.FileIndex.length;++ce)if(Ie=Q.FileIndex[ce],Ie.size>=4096)if(ne.l=Ie.start+1<<9,Ls&&Buffer.isBuffer(Ie.content))Ie.content.copy(ne,ne.l,0,Ie.size),ne.l+=Ie.size+511&-512;else{for(Oe=0;Oe<Ie.size;++Oe)ne.write_shift(1,Ie.content[Oe]);for(;Oe&511;++Oe)ne.write_shift(1,0)}for(ce=1;ce<Q.FileIndex.length;++ce)if(Ie=Q.FileIndex[ce],Ie.size>0&&Ie.size<4096)if(Ls&&Buffer.isBuffer(Ie.content))Ie.content.copy(ne,ne.l,0,Ie.size),ne.l+=Ie.size+63&-64;else{for(Oe=0;Oe<Ie.size;++Oe)ne.write_shift(1,Ie.content[Oe]);for(;Oe&63;++Oe)ne.write_shift(1,0)}if(Ls)ne.l=ne.length;else for(;ne.l<ne.length;)ne.write_shift(1,0);return ne}function V(Q,ue){var le=Q.FullPaths.map(function(Oe){return Oe.toUpperCase()}),M=le.map(function(Oe){var Me=Oe.split("/");return Me[Me.length-(Oe.slice(-1)=="/"?2:1)]}),ne=!1;ue.charCodeAt(0)===47?(ne=!0,ue=le[0].slice(0,-1)+ue):ne=ue.indexOf("/")!==-1;var ce=ue.toUpperCase(),Re=ne===!0?le.indexOf(ce):M.indexOf(ce);if(Re!==-1)return Q.FileIndex[Re];var $e=!ce.match(Rh);for(ce=ce.replace(yu,""),$e&&(ce=ce.replace(Rh,"!")),Re=0;Re<le.length;++Re)if(($e?le[Re].replace(Rh,"!"):le[Re]).replace(yu,"")==ce||($e?M[Re].replace(Rh,"!"):M[Re]).replace(yu,"")==ce)return Q.FileIndex[Re];return null}var W=64,q=-2,B="d0cf11e0a1b11ae1",ae=[208,207,17,224,161,177,26,225],U="00000000000000000000000000000000",Z={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:q,FREESECT:-1,HEADER_SIGNATURE:B,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:U,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function de(Q,ue,le){x();var M=z(Q,le);f.writeFileSync(ue,M)}function H(Q){for(var ue=new Array(Q.length),le=0;le<Q.length;++le)ue[le]=String.fromCharCode(Q[le]);return ue.join("")}function se(Q,ue){var le=z(Q,ue);switch(ue&&ue.type||"buffer"){case"file":return x(),f.writeFileSync(ue.filename,le),le;case"binary":return typeof le=="string"?le:H(le);case"base64":return Fu(typeof le=="string"?le:H(le));case"buffer":if(Ls)return Buffer.isBuffer(le)?le:sl(le);case"array":return typeof le=="string"?Gn(le):le}return le}var ee;function L(Q){try{var ue=Q.InflateRaw,le=new ue;if(le._processChunk(new Uint8Array([3,0]),le._finishFlushFlag),le.bytesRead)ee=Q;else throw new Error("zlib does not expose bytesRead")}catch(M){console.error("cannot use native zlib: "+(M.message||M))}}function X(Q,ue){if(!ee)return Ke(Q,ue);var le=ee.InflateRaw,M=new le,ne=M._processChunk(Q.slice(Q.l),M._finishFlushFlag);return Q.l+=M.bytesRead,ne}function O(Q){return ee?ee.deflateRawSync(Q):st(Q)}var J=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],ie=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],be=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function Le(Q){var ue=(Q<<1|Q<<11)&139536|(Q<<5|Q<<15)&558144;return(ue>>16|ue>>8|ue)&255}for(var ve=typeof Uint8Array<"u",oe=ve?new Uint8Array(256):[],Pe=0;Pe<256;++Pe)oe[Pe]=Le(Pe);function Xe(Q,ue){var le=oe[Q&255];return ue<=8?le>>>8-ue:(le=le<<8|oe[Q>>8&255],ue<=16?le>>>16-ue:(le=le<<8|oe[Q>>16&255],le>>>24-ue))}function yt(Q,ue){var le=ue&7,M=ue>>>3;return(Q[M]|(le<=6?0:Q[M+1]<<8))>>>le&3}function vt(Q,ue){var le=ue&7,M=ue>>>3;return(Q[M]|(le<=5?0:Q[M+1]<<8))>>>le&7}function gt(Q,ue){var le=ue&7,M=ue>>>3;return(Q[M]|(le<=4?0:Q[M+1]<<8))>>>le&15}function bt(Q,ue){var le=ue&7,M=ue>>>3;return(Q[M]|(le<=3?0:Q[M+1]<<8))>>>le&31}function lt(Q,ue){var le=ue&7,M=ue>>>3;return(Q[M]|(le<=1?0:Q[M+1]<<8))>>>le&127}function ms(Q,ue,le){var M=ue&7,ne=ue>>>3,ce=(1<<le)-1,Re=Q[ne]>>>M;return le<8-M||(Re|=Q[ne+1]<<8-M,le<16-M)||(Re|=Q[ne+2]<<16-M,le<24-M)||(Re|=Q[ne+3]<<24-M),Re&ce}function is(Q,ue,le){var M=ue&7,ne=ue>>>3;return M<=5?Q[ne]|=(le&7)<<M:(Q[ne]|=le<<M&255,Q[ne+1]=(le&7)>>8-M),ue+3}function Ms(Q,ue,le){var M=ue&7,ne=ue>>>3;return le=(le&1)<<M,Q[ne]|=le,ue+1}function ys(Q,ue,le){var M=ue&7,ne=ue>>>3;return le<<=M,Q[ne]|=le&255,le>>>=8,Q[ne+1]=le,ue+8}function Xs(Q,ue,le){var M=ue&7,ne=ue>>>3;return le<<=M,Q[ne]|=le&255,le>>>=8,Q[ne+1]=le&255,Q[ne+2]=le>>>8,ue+16}function xs(Q,ue){var le=Q.length,M=2*le>ue?2*le:ue+5,ne=0;if(le>=ue)return Q;if(Ls){var ce=ow(M);if(Q.copy)Q.copy(ce);else for(;ne<Q.length;++ne)ce[ne]=Q[ne];return ce}else if(ve){var Re=new Uint8Array(M);if(Re.set)Re.set(Q);else for(;ne<le;++ne)Re[ne]=Q[ne];return Re}return Q.length=M,Q}function Rt(Q){for(var ue=new Array(Q),le=0;le<Q;++le)ue[le]=0;return ue}function sa(Q,ue,le){var M=1,ne=0,ce=0,Re=0,$e=0,Oe=Q.length,Me=ve?new Uint16Array(32):Rt(32);for(ce=0;ce<32;++ce)Me[ce]=0;for(ce=Oe;ce<le;++ce)Q[ce]=0;Oe=Q.length;var Ie=ve?new Uint16Array(Oe):Rt(Oe);for(ce=0;ce<Oe;++ce)Me[ne=Q[ce]]++,M<ne&&(M=ne),Ie[ce]=0;for(Me[0]=0,ce=1;ce<=M;++ce)Me[ce+16]=$e=$e+Me[ce-1]<<1;for(ce=0;ce<Oe;++ce)$e=Q[ce],$e!=0&&(Ie[ce]=Me[$e+16]++);var rt=0;for(ce=0;ce<Oe;++ce)if(rt=Q[ce],rt!=0)for($e=Xe(Ie[ce],M)>>M-rt,Re=(1<<M+4-rt)-1;Re>=0;--Re)ue[$e|Re<<rt]=rt&15|ce<<4;return M}var Te=ve?new Uint16Array(512):Rt(512),je=ve?new Uint16Array(32):Rt(32);if(!ve){for(var fe=0;fe<512;++fe)Te[fe]=0;for(fe=0;fe<32;++fe)je[fe]=0}(function(){for(var Q=[],ue=0;ue<32;ue++)Q.push(5);sa(Q,je,32);var le=[];for(ue=0;ue<=143;ue++)le.push(8);for(;ue<=255;ue++)le.push(9);for(;ue<=279;ue++)le.push(7);for(;ue<=287;ue++)le.push(8);sa(le,Te,288)})();var Ue=(function(){for(var ue=ve?new Uint8Array(32768):[],le=0,M=0;le<be.length-1;++le)for(;M<be[le+1];++M)ue[M]=le;for(;M<32768;++M)ue[M]=29;var ne=ve?new Uint8Array(259):[];for(le=0,M=0;le<ie.length-1;++le)for(;M<ie[le+1];++M)ne[M]=le;function ce($e,Oe){for(var Me=0;Me<$e.length;){var Ie=Math.min(65535,$e.length-Me),rt=Me+Ie==$e.length;for(Oe.write_shift(1,+rt),Oe.write_shift(2,Ie),Oe.write_shift(2,~Ie&65535);Ie-- >0;)Oe[Oe.l++]=$e[Me++]}return Oe.l}function Re($e,Oe){for(var Me=0,Ie=0,rt=ve?new Uint16Array(32768):[];Ie<$e.length;){var he=Math.min(65535,$e.length-Ie);if(he<10){for(Me=is(Oe,Me,+(Ie+he==$e.length)),Me&7&&(Me+=8-(Me&7)),Oe.l=Me/8|0,Oe.write_shift(2,he),Oe.write_shift(2,~he&65535);he-- >0;)Oe[Oe.l++]=$e[Ie++];Me=Oe.l*8;continue}Me=is(Oe,Me,+(Ie+he==$e.length)+2);for(var We=0;he-- >0;){var Ee=$e[Ie];We=(We<<5^Ee)&32767;var Je=-1,it=0;if((Je=rt[We])&&(Je|=Ie&-32768,Je>Ie&&(Je-=32768),Je<Ie))for(;$e[Je+it]==$e[Ie+it]&&it<250;)++it;if(it>2){Ee=ne[it],Ee<=22?Me=ys(Oe,Me,oe[Ee+1]>>1)-1:(ys(Oe,Me,3),Me+=5,ys(Oe,Me,oe[Ee-23]>>5),Me+=3);var kt=Ee<8?0:Ee-4>>2;kt>0&&(Xs(Oe,Me,it-ie[Ee]),Me+=kt),Ee=ue[Ie-Je],Me=ys(Oe,Me,oe[Ee]>>3),Me-=3;var Qe=Ee<4?0:Ee-2>>1;Qe>0&&(Xs(Oe,Me,Ie-Je-be[Ee]),Me+=Qe);for(var Wt=0;Wt<it;++Wt)rt[We]=Ie&32767,We=(We<<5^$e[Ie])&32767,++Ie;he-=it-1}else Ee<=143?Ee=Ee+48:Me=Ms(Oe,Me,1),Me=ys(Oe,Me,oe[Ee]),rt[We]=Ie&32767,++Ie}Me=ys(Oe,Me,0)-1}return Oe.l=(Me+7)/8|0,Oe.l}return function(Oe,Me){return Oe.length<8?ce(Oe,Me):Re(Oe,Me)}})();function st(Q){var ue=Ge(50+Math.floor(Q.length*1.1)),le=Ue(Q,ue);return ue.slice(0,le)}var Dt=ve?new Uint16Array(32768):Rt(32768),Pt=ve?new Uint16Array(32768):Rt(32768),Jt=ve?new Uint16Array(128):Rt(128),as=1,ke=1;function we(Q,ue){var le=bt(Q,ue)+257;ue+=5;var M=bt(Q,ue)+1;ue+=5;var ne=gt(Q,ue)+4;ue+=4;for(var ce=0,Re=ve?new Uint8Array(19):Rt(19),$e=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],Oe=1,Me=ve?new Uint8Array(8):Rt(8),Ie=ve?new Uint8Array(8):Rt(8),rt=Re.length,he=0;he<ne;++he)Re[J[he]]=ce=vt(Q,ue),Oe<ce&&(Oe=ce),Me[ce]++,ue+=3;var We=0;for(Me[0]=0,he=1;he<=Oe;++he)Ie[he]=We=We+Me[he-1]<<1;for(he=0;he<rt;++he)(We=Re[he])!=0&&($e[he]=Ie[We]++);var Ee=0;for(he=0;he<rt;++he)if(Ee=Re[he],Ee!=0){We=oe[$e[he]]>>8-Ee;for(var Je=(1<<7-Ee)-1;Je>=0;--Je)Jt[We|Je<<Ee]=Ee&7|he<<3}var it=[];for(Oe=1;it.length<le+M;)switch(We=Jt[lt(Q,ue)],ue+=We&7,We>>>=3){case 16:for(ce=3+yt(Q,ue),ue+=2,We=it[it.length-1];ce-- >0;)it.push(We);break;case 17:for(ce=3+vt(Q,ue),ue+=3;ce-- >0;)it.push(0);break;case 18:for(ce=11+lt(Q,ue),ue+=7;ce-- >0;)it.push(0);break;default:it.push(We),Oe<We&&(Oe=We);break}var kt=it.slice(0,le),Qe=it.slice(le);for(he=le;he<286;++he)kt[he]=0;for(he=M;he<30;++he)Qe[he]=0;return as=sa(kt,Dt,286),ke=sa(Qe,Pt,30),ue}function nt(Q,ue){if(Q[0]==3&&!(Q[1]&3))return[Po(ue),2];for(var le=0,M=0,ne=ow(ue||1<<18),ce=0,Re=ne.length>>>0,$e=0,Oe=0;(M&1)==0;){if(M=vt(Q,le),le+=3,M>>>1)M>>1==1?($e=9,Oe=5):(le=we(Q,le),$e=as,Oe=ke);else{le&7&&(le+=8-(le&7));var Me=Q[le>>>3]|Q[(le>>>3)+1]<<8;if(le+=32,Me>0)for(!ue&&Re<ce+Me&&(ne=xs(ne,ce+Me),Re=ne.length);Me-- >0;)ne[ce++]=Q[le>>>3],le+=8;continue}for(;;){!ue&&Re<ce+32767&&(ne=xs(ne,ce+32767),Re=ne.length);var Ie=ms(Q,le,$e),rt=M>>>1==1?Te[Ie]:Dt[Ie];if(le+=rt&15,rt>>>=4,(rt>>>8&255)===0)ne[ce++]=rt;else{if(rt==256)break;rt-=257;var he=rt<8?0:rt-4>>2;he>5&&(he=0);var We=ce+ie[rt];he>0&&(We+=ms(Q,le,he),le+=he),Ie=ms(Q,le,Oe),rt=M>>>1==1?je[Ie]:Pt[Ie],le+=rt&15,rt>>>=4;var Ee=rt<4?0:rt-2>>1,Je=be[rt];for(Ee>0&&(Je+=ms(Q,le,Ee),le+=Ee),!ue&&Re<We&&(ne=xs(ne,We+100),Re=ne.length);ce<We;)ne[ce]=ne[ce-Je],++ce}}}return ue?[ne,le+7>>>3]:[ne.slice(0,ce),le+7>>>3]}function Ke(Q,ue){var le=Q.slice(Q.l||0),M=nt(le,ue);return Q.l+=M[1],M[0]}function jt(Q,ue){if(Q)typeof console<"u"&&console.error(ue);else throw new Error(ue)}function wt(Q,ue){var le=Q;mn(le,0);var M=[],ne=[],ce={FileIndex:M,FullPaths:ne};T(ce,{root:ue.root});for(var Re=le.length-4;(le[Re]!=80||le[Re+1]!=75||le[Re+2]!=5||le[Re+3]!=6)&&Re>=0;)--Re;le.l=Re+4,le.l+=4;var $e=le.read_shift(2);le.l+=6;var Oe=le.read_shift(4);for(le.l=Oe,Re=0;Re<$e;++Re){le.l+=20;var Me=le.read_shift(4),Ie=le.read_shift(4),rt=le.read_shift(2),he=le.read_shift(2),We=le.read_shift(2);le.l+=8;var Ee=le.read_shift(4),Je=u(le.slice(le.l+rt,le.l+rt+he));le.l+=rt+he+We;var it=le.l;le.l=Ee+4,Xt(le,Me,Ie,ce,Je),le.l=it}return ce}function Xt(Q,ue,le,M,ne){Q.l+=2;var ce=Q.read_shift(2),Re=Q.read_shift(2),$e=c(Q);if(ce&8257)throw new Error("Unsupported ZIP encryption");for(var Oe=Q.read_shift(4),Me=Q.read_shift(4),Ie=Q.read_shift(4),rt=Q.read_shift(2),he=Q.read_shift(2),We="",Ee=0;Ee<rt;++Ee)We+=String.fromCharCode(Q[Q.l++]);if(he){var Je=u(Q.slice(Q.l,Q.l+he));(Je[21589]||{}).mt&&($e=Je[21589].mt),((ne||{})[21589]||{}).mt&&($e=ne[21589].mt)}Q.l+=he;var it=Q.slice(Q.l,Q.l+Me);switch(Re){case 8:it=X(Q,Ie);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+Re)}var kt=!1;ce&8&&(Oe=Q.read_shift(4),Oe==134695760&&(Oe=Q.read_shift(4),kt=!0),Me=Q.read_shift(4),Ie=Q.read_shift(4)),Me!=ue&&jt(kt,"Bad compressed size: "+ue+" != "+Me),Ie!=le&&jt(kt,"Bad uncompressed size: "+le+" != "+Ie),hs(M,We,it,{unsafe:!0,mt:$e})}function ss(Q,ue){var le=ue||{},M=[],ne=[],ce=Ge(1),Re=le.compression?8:0,$e=0,Oe=0,Me=0,Ie=0,rt=0,he=Q.FullPaths[0],We=he,Ee=Q.FileIndex[0],Je=[],it=0;for(Oe=1;Oe<Q.FullPaths.length;++Oe)if(We=Q.FullPaths[Oe].slice(he.length),Ee=Q.FileIndex[Oe],!(!Ee.size||!Ee.content||We=="Sh33tJ5")){var kt=Ie,Qe=Ge(We.length);for(Me=0;Me<We.length;++Me)Qe.write_shift(1,We.charCodeAt(Me)&127);Qe=Qe.slice(0,Qe.l),Je[rt]=aM.buf(Ee.content,0);var Wt=Ee.content;Re==8&&(Wt=O(Wt)),ce=Ge(30),ce.write_shift(4,67324752),ce.write_shift(2,20),ce.write_shift(2,$e),ce.write_shift(2,Re),Ee.mt?o(ce,Ee.mt):ce.write_shift(4,0),ce.write_shift(-4,Je[rt]),ce.write_shift(4,Wt.length),ce.write_shift(4,Ee.content.length),ce.write_shift(2,Qe.length),ce.write_shift(2,0),Ie+=ce.length,M.push(ce),Ie+=Qe.length,M.push(Qe),Ie+=Wt.length,M.push(Wt),ce=Ge(46),ce.write_shift(4,33639248),ce.write_shift(2,0),ce.write_shift(2,20),ce.write_shift(2,$e),ce.write_shift(2,Re),ce.write_shift(4,0),ce.write_shift(-4,Je[rt]),ce.write_shift(4,Wt.length),ce.write_shift(4,Ee.content.length),ce.write_shift(2,Qe.length),ce.write_shift(2,0),ce.write_shift(2,0),ce.write_shift(2,0),ce.write_shift(2,0),ce.write_shift(4,0),ce.write_shift(4,kt),it+=ce.l,ne.push(ce),it+=Qe.length,ne.push(Qe),++rt}return ce=Ge(22),ce.write_shift(4,101010256),ce.write_shift(2,0),ce.write_shift(2,0),ce.write_shift(2,rt),ce.write_shift(2,rt),ce.write_shift(4,it),ce.write_shift(4,Ie),ce.write_shift(2,0),xr([xr(M),xr(ne),ce])}var ge={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function tt(Q,ue){if(Q.ctype)return Q.ctype;var le=Q.name||"",M=le.match(/\.([^\.]+)$/);return M&&ge[M[1]]||ue&&(M=(le=ue).match(/[\.\\]([^\.\\])+$/),M&&ge[M[1]])?ge[M[1]]:"application/octet-stream"}function ct(Q){for(var ue=Fu(Q),le=[],M=0;M<ue.length;M+=76)le.push(ue.slice(M,M+76));return le.join(`\r
`)+`\r
`}function ns(Q){var ue=Q.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function(Me){var Ie=Me.charCodeAt(0).toString(16).toUpperCase();return"="+(Ie.length==1?"0"+Ie:Ie)});ue=ue.replace(/ $/mg,"=20").replace(/\t$/mg,"=09"),ue.charAt(0)==`
`&&(ue="=0D"+ue.slice(1)),ue=ue.replace(/\r(?!\n)/mg,"=0D").replace(/\n\n/mg,`
=0A`).replace(/([^\r\n])\n/mg,"$1=0A");for(var le=[],M=ue.split(`\r
`),ne=0;ne<M.length;++ne){var ce=M[ne];if(ce.length==0){le.push("");continue}for(var Re=0;Re<ce.length;){var $e=76,Oe=ce.slice(Re,Re+$e);Oe.charAt($e-1)=="="?$e--:Oe.charAt($e-2)=="="?$e-=2:Oe.charAt($e-3)=="="&&($e-=3),Oe=ce.slice(Re,Re+$e),Re+=$e,Re<ce.length&&(Oe+="="),le.push(Oe)}}return le.join(`\r
`)}function ht(Q){for(var ue=[],le=0;le<Q.length;++le){for(var M=Q[le];le<=Q.length&&M.charAt(M.length-1)=="=";)M=M.slice(0,M.length-1)+Q[++le];ue.push(M)}for(var ne=0;ne<ue.length;++ne)ue[ne]=ue[ne].replace(/[=][0-9A-Fa-f]{2}/g,function(ce){return String.fromCharCode(parseInt(ce.slice(1),16))});return Gn(ue.join(`\r
`))}function Se(Q,ue,le){for(var M="",ne="",ce="",Re,$e=0;$e<10;++$e){var Oe=ue[$e];if(!Oe||Oe.match(/^\s*$/))break;var Me=Oe.match(/^(.*?):\s*([^\s].*)$/);if(Me)switch(Me[1].toLowerCase()){case"content-location":M=Me[2].trim();break;case"content-type":ce=Me[2].trim();break;case"content-transfer-encoding":ne=Me[2].trim();break}}switch(++$e,ne.toLowerCase()){case"base64":Re=Gn(Xi(ue.slice($e).join("")));break;case"quoted-printable":Re=ht(ue.slice($e));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+ne)}var Ie=hs(Q,M.slice(le.length),Re,{unsafe:!0});ce&&(Ie.ctype=ce)}function dt(Q,ue){if(H(Q.slice(0,13)).toLowerCase()!="mime-version:")throw new Error("Unsupported MAD header");var le=ue&&ue.root||"",M=(Ls&&Buffer.isBuffer(Q)?Q.toString("binary"):H(Q)).split(`\r
`),ne=0,ce="";for(ne=0;ne<M.length;++ne)if(ce=M[ne],!!/^Content-Location:/i.test(ce)&&(ce=ce.slice(ce.indexOf("file")),le||(le=ce.slice(0,ce.lastIndexOf("/")+1)),ce.slice(0,le.length)!=le))for(;le.length>0&&(le=le.slice(0,le.length-1),le=le.slice(0,le.lastIndexOf("/")+1),ce.slice(0,le.length)!=le););var Re=(M[1]||"").match(/boundary="(.*?)"/);if(!Re)throw new Error("MAD cannot find boundary");var $e="--"+(Re[1]||""),Oe=[],Me=[],Ie={FileIndex:Oe,FullPaths:Me};T(Ie);var rt,he=0;for(ne=0;ne<M.length;++ne){var We=M[ne];We!==$e&&We!==$e+"--"||(he++&&Se(Ie,M.slice(rt,ne),le),rt=ne)}return Ie}function Ct(Q,ue){var le=ue||{},M=le.boundary||"SheetJS";M="------="+M;for(var ne=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+M.slice(2)+'"',"","",""],ce=Q.FullPaths[0],Re=ce,$e=Q.FileIndex[0],Oe=1;Oe<Q.FullPaths.length;++Oe)if(Re=Q.FullPaths[Oe].slice(ce.length),$e=Q.FileIndex[Oe],!(!$e.size||!$e.content||Re=="Sh33tJ5")){Re=Re.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(it){return"_x"+it.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(it){return"_u"+it.charCodeAt(0).toString(16)+"_"});for(var Me=$e.content,Ie=Ls&&Buffer.isBuffer(Me)?Me.toString("binary"):H(Me),rt=0,he=Math.min(1024,Ie.length),We=0,Ee=0;Ee<=he;++Ee)(We=Ie.charCodeAt(Ee))>=32&&We<128&&++rt;var Je=rt>=he*4/5;ne.push(M),ne.push("Content-Location: "+(le.root||"file:///C:/SheetJS/")+Re),ne.push("Content-Transfer-Encoding: "+(Je?"quoted-printable":"base64")),ne.push("Content-Type: "+tt($e,Re)),ne.push(""),ne.push(Je?ns(Ie):ct(Ie))}return ne.push(M+`--\r
`),ne.join(`\r
`)}function Et(Q){var ue={};return T(ue,Q),ue}function hs(Q,ue,le,M){var ne=M&&M.unsafe;ne||T(Q);var ce=!ne&&ea.find(Q,ue);if(!ce){var Re=Q.FullPaths[0];ue.slice(0,Re.length)==Re?Re=ue:(Re.slice(-1)!="/"&&(Re+="/"),Re=(Re+ue).replace("//","/")),ce={name:i(ue),type:2},Q.FileIndex.push(ce),Q.FullPaths.push(Re),ne||ea.utils.cfb_gc(Q)}return ce.content=le,ce.size=le?le.length:0,M&&(M.CLSID&&(ce.clsid=M.CLSID),M.mt&&(ce.mt=M.mt),M.ct&&(ce.ct=M.ct)),ce}function vs(Q,ue){T(Q);var le=ea.find(Q,ue);if(le){for(var M=0;M<Q.FileIndex.length;++M)if(Q.FileIndex[M]==le)return Q.FileIndex.splice(M,1),Q.FullPaths.splice(M,1),!0}return!1}function Ts(Q,ue,le){T(Q);var M=ea.find(Q,ue);if(M){for(var ne=0;ne<Q.FileIndex.length;++ne)if(Q.FileIndex[ne]==M)return Q.FileIndex[ne].name=i(le),Q.FullPaths[ne]=le,!0}return!1}function Bs(Q){P(Q,!0)}return s.find=V,s.read=E,s.parse=h,s.write=se,s.writeFile=de,s.utils={cfb_new:Et,cfb_add:hs,cfb_del:vs,cfb_mov:Ts,cfb_gc:Bs,ReadShift:bu,CheckField:ZC,prep_blob:mn,bconcat:xr,use_zlib:L,_deflateRaw:st,_inflateRaw:Ke,consts:Z},s})();function rM(t){return typeof t=="string"?Gf(t):Array.isArray(t)?_P(t):t}function am(t,s,a){if(typeof Deno<"u"){if(a&&typeof s=="string")switch(a){case"utf8":s=new TextEncoder(a).encode(s);break;case"binary":s=Gf(s);break;default:throw new Error("Unsupported encoding "+a)}return Deno.writeFileSync(t,s)}var r=a=="utf8"?Iu(s):s;if(typeof IE_SaveFile<"u")return IE_SaveFile(r,t);if(typeof Blob<"u"){var i=new Blob([rM(r)],{type:"application/octet-stream"});if(typeof navigator<"u"&&navigator.msSaveBlob)return navigator.msSaveBlob(i,t);if(typeof saveAs<"u")return saveAs(i,t);if(typeof URL<"u"&&typeof document<"u"&&document.createElement&&URL.createObjectURL){var o=URL.createObjectURL(i);if(typeof chrome=="object"&&typeof(chrome.downloads||{}).download=="function")return URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(o)},6e4),chrome.downloads.download({url:o,filename:t,saveAs:!0});var c=document.createElement("a");if(c.download!=null)return c.download=t,c.href=o,document.body.appendChild(c),c.click(),document.body.removeChild(c),URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(o)},6e4),o}}if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var u=File(t);return u.open("w"),u.encoding="binary",Array.isArray(s)&&(s=sm(s)),u.write(s),u.close(),s}catch(f){if(!f.message||!f.message.match(/onstruct/))throw f}throw new Error("cannot save file "+t)}function yr(t){for(var s=Object.keys(t),a=[],r=0;r<s.length;++r)Object.prototype.hasOwnProperty.call(t,s[r])&&a.push(s[r]);return a}function pw(t,s){for(var a=[],r=yr(t),i=0;i!==r.length;++i)a[t[r[i]][s]]==null&&(a[t[r[i]][s]]=r[i]);return a}function Mv(t){for(var s=[],a=yr(t),r=0;r!==a.length;++r)s[t[a[r]]]=a[r];return s}function Yf(t){for(var s=[],a=yr(t),r=0;r!==a.length;++r)s[t[a[r]]]=parseInt(a[r],10);return s}function nM(t){for(var s=[],a=yr(t),r=0;r!==a.length;++r)s[t[a[r]]]==null&&(s[t[a[r]]]=[]),s[t[a[r]]].push(a[r]);return s}var pf=new Date(1899,11,30,0,0,0);function Jr(t,s){var a=t.getTime(),r=pf.getTime()+(t.getTimezoneOffset()-pf.getTimezoneOffset())*6e4;return(a-r)/(1440*60*1e3)}var MC=new Date,iM=pf.getTime()+(MC.getTimezoneOffset()-pf.getTimezoneOffset())*6e4,gw=MC.getTimezoneOffset();function FC(t){var s=new Date;return s.setTime(t*24*60*60*1e3+iM),s.getTimezoneOffset()!==gw&&s.setTime(s.getTime()+(s.getTimezoneOffset()-gw)*6e4),s}var vw=new Date("2017-02-19T19:06:09.000Z"),LC=isNaN(vw.getFullYear())?new Date("2/19/17"):vw,lM=LC.getFullYear()==2017;function Lr(t,s){var a=new Date(t);if(lM)return s>0?a.setTime(a.getTime()+a.getTimezoneOffset()*60*1e3):s<0&&a.setTime(a.getTime()-a.getTimezoneOffset()*60*1e3),a;if(t instanceof Date)return t;if(LC.getFullYear()==1917&&!isNaN(a.getFullYear())){var r=a.getFullYear();return t.indexOf(""+r)>-1||a.setFullYear(a.getFullYear()+100),a}var i=t.match(/\d+/g)||["2017","2","19","0","0","0"],o=new Date(+i[0],+i[1]-1,+i[2],+i[3]||0,+i[4]||0,+i[5]||0);return t.indexOf("Z")>-1&&(o=new Date(o.getTime()-o.getTimezoneOffset()*60*1e3)),o}function Xf(t,s){if(Ls&&Buffer.isBuffer(t))return t.toString("binary");if(typeof TextDecoder<"u")try{var a={"":"","":"",:"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"","":"","":"","":"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"",:""};return Array.isArray(t)&&(t=new Uint8Array(t)),new TextDecoder("latin1").decode(t).replace(/[]/g,function(o){return a[o]||o})}catch{}for(var r=[],i=0;i!=t.length;++i)r.push(String.fromCharCode(t[i]));return r.join("")}function en(t){if(typeof JSON<"u"&&!Array.isArray(t))return JSON.parse(JSON.stringify(t));if(typeof t!="object"||t==null)return t;if(t instanceof Date)return new Date(t.getTime());var s={};for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(s[a]=en(t[a]));return s}function ka(t,s){for(var a="";a.length<s;)a+=t;return a}function qi(t){var s=Number(t);if(!isNaN(s))return isFinite(s)?s:NaN;if(!/\d/.test(t))return s;var a=1,r=t.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return a*=100,""});return!isNaN(s=Number(r))||(r=r.replace(/[(](.*)[)]/,function(i,o){return a=-a,o}),!isNaN(s=Number(r)))?s/a:s}var oM=["january","february","march","april","may","june","july","august","september","october","november","december"];function Lu(t){var s=new Date(t),a=new Date(NaN),r=s.getYear(),i=s.getMonth(),o=s.getDate();if(isNaN(o))return a;var c=t.toLowerCase();if(c.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if(c=c.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,""),c.length>3&&oM.indexOf(c)==-1)return a}else if(c.match(/[a-z]/))return a;return r<0||r>8099?a:(i>0||o>1)&&r!=101?s:t.match(/[^-0-9:,\/\\]/)?a:s}function ps(t,s,a){if(t.FullPaths){if(typeof a=="string"){var r;return Ls?r=sl(a):r=DP(a),ea.utils.cfb_add(t,s,r)}ea.utils.cfb_add(t,s,a)}else t.file(s,a)}function Fv(){return ea.utils.cfb_new()}var Ya=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r
`,cM={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},Lv=Mv(cM),Iv=/[&<>'"]/g,dM=/[\u0000-\u0008\u000b-\u001f]/g;function qs(t){var s=t+"";return s.replace(Iv,function(a){return Lv[a]}).replace(dM,function(a){return"_x"+("000"+a.charCodeAt(0).toString(16)).slice(-4)+"_"})}function jw(t){return qs(t).replace(/ /g,"_x0020_")}var IC=/[\u0000-\u001f]/g;function uM(t){var s=t+"";return s.replace(Iv,function(a){return Lv[a]}).replace(/\n/g,"<br/>").replace(IC,function(a){return"&#x"+("000"+a.charCodeAt(0).toString(16)).slice(-4)+";"})}function mM(t){var s=t+"";return s.replace(Iv,function(a){return Lv[a]}).replace(IC,function(a){return"&#x"+a.charCodeAt(0).toString(16).toUpperCase()+";"})}function hM(t){return t.replace(/(\r\n|[\r\n])/g,"&#10;")}function fM(t){switch(t){case 1:case!0:case"1":case"true":case"TRUE":return!0;default:return!1}}function E0(t){for(var s="",a=0,r=0,i=0,o=0,c=0,u=0;a<t.length;){if(r=t.charCodeAt(a++),r<128){s+=String.fromCharCode(r);continue}if(i=t.charCodeAt(a++),r>191&&r<224){c=(r&31)<<6,c|=i&63,s+=String.fromCharCode(c);continue}if(o=t.charCodeAt(a++),r<240){s+=String.fromCharCode((r&15)<<12|(i&63)<<6|o&63);continue}c=t.charCodeAt(a++),u=((r&7)<<18|(i&63)<<12|(o&63)<<6|c&63)-65536,s+=String.fromCharCode(55296+(u>>>10&1023)),s+=String.fromCharCode(56320+(u&1023))}return s}function yw(t){var s=Po(2*t.length),a,r,i=1,o=0,c=0,u;for(r=0;r<t.length;r+=i)i=1,(u=t.charCodeAt(r))<128?a=u:u<224?(a=(u&31)*64+(t.charCodeAt(r+1)&63),i=2):u<240?(a=(u&15)*4096+(t.charCodeAt(r+1)&63)*64+(t.charCodeAt(r+2)&63),i=3):(i=4,a=(u&7)*262144+(t.charCodeAt(r+1)&63)*4096+(t.charCodeAt(r+2)&63)*64+(t.charCodeAt(r+3)&63),a-=65536,c=55296+(a>>>10&1023),a=56320+(a&1023)),c!==0&&(s[o++]=c&255,s[o++]=c>>>8,c=0),s[o++]=a%256,s[o++]=a>>>8;return s.slice(0,o).toString("ucs2")}function Nw(t){return sl(t,"binary").toString("utf8")}var Mh="foo bar baz",Nu=Ls&&(Nw(Mh)==E0(Mh)&&Nw||yw(Mh)==E0(Mh)&&yw)||E0,Iu=Ls?function(t){return sl(t,"utf8").toString("binary")}:function(t){for(var s=[],a=0,r=0,i=0;a<t.length;)switch(r=t.charCodeAt(a++),!0){case r<128:s.push(String.fromCharCode(r));break;case r<2048:s.push(String.fromCharCode(192+(r>>6))),s.push(String.fromCharCode(128+(r&63)));break;case(r>=55296&&r<57344):r-=55296,i=t.charCodeAt(a++)-56320+(r<<10),s.push(String.fromCharCode(240+(i>>18&7))),s.push(String.fromCharCode(144+(i>>12&63))),s.push(String.fromCharCode(128+(i>>6&63))),s.push(String.fromCharCode(128+(i&63)));break;default:s.push(String.fromCharCode(224+(r>>12))),s.push(String.fromCharCode(128+(r>>6&63))),s.push(String.fromCharCode(128+(r&63)))}return s.join("")},xM=(function(){var t=[["nbsp"," "],["middot",""],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(s){return[new RegExp("&"+s[0]+";","ig"),s[1]]});return function(a){for(var r=a.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,`
`).replace(/<[^>]*>/g,""),i=0;i<t.length;++i)r=r.replace(t[i][0],t[i][1]);return r}})(),BC=/(^\s|\s$|\n)/;function pr(t,s){return"<"+t+(s.match(BC)?' xml:space="preserve"':"")+">"+s+"</"+t+">"}function Bu(t){return yr(t).map(function(s){return" "+s+'="'+t[s]+'"'}).join("")}function ut(t,s,a){return"<"+t+(a!=null?Bu(a):"")+(s!=null?(s.match(BC)?' xml:space="preserve"':"")+">"+s+"</"+t:"/")+">"}function Dg(t,s){try{return t.toISOString().replace(/\.\d*/,"")}catch(a){if(s)throw a}return""}function pM(t,s){switch(typeof t){case"string":var a=ut("vt:lpwstr",qs(t));return a=a.replace(/&quot;/g,"_x0022_"),a;case"number":return ut((t|0)==t?"vt:i4":"vt:r8",qs(String(t)));case"boolean":return ut("vt:bool",t?"true":"false")}if(t instanceof Date)return ut("vt:filetime",Dg(t));throw new Error("Unable to serialize "+t)}var sr={CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/metadata/core-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/custom-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties",CT:"http://schemas.openxmlformats.org/package/2006/content-types",RELS:"http://schemas.openxmlformats.org/package/2006/relationships",TCMNT:"http://schemas.microsoft.com/office/spreadsheetml/2018/threadedcomments",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",dcmitype:"http://purl.org/dc/dcmitype/",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",vt:"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes",xsi:"http://www.w3.org/2001/XMLSchema-instance",xsd:"http://www.w3.org/2001/XMLSchema"},od=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"],hn={o:"urn:schemas-microsoft-com:office:office",x:"urn:schemas-microsoft-com:office:excel",ss:"urn:schemas-microsoft-com:office:spreadsheet",dt:"uuid:C2F41010-65B3-11d1-A29F-00AA00C14882",mv:"http://macVmlSchemaUri",v:"urn:schemas-microsoft-com:vml",html:"http://www.w3.org/TR/REC-html40"};function gM(t,s){for(var a=1-2*(t[s+7]>>>7),r=((t[s+7]&127)<<4)+(t[s+6]>>>4&15),i=t[s+6]&15,o=5;o>=0;--o)i=i*256+t[s+o];return r==2047?i==0?a*(1/0):NaN:(r==0?r=-1022:(r-=1023,i+=Math.pow(2,52)),a*Math.pow(2,r-52)*i)}function vM(t,s,a){var r=(s<0||1/s==-1/0?1:0)<<7,i=0,o=0,c=r?-s:s;isFinite(c)?c==0?i=o=0:(i=Math.floor(Math.log(c)/Math.LN2),o=c*Math.pow(2,52-i),i<=-1023&&(!isFinite(o)||o<Math.pow(2,52))?i=-1022:(o-=Math.pow(2,52),i+=1023)):(i=2047,o=isNaN(s)?26985:0);for(var u=0;u<=5;++u,o/=256)t[a+u]=o&255;t[a+6]=(i&15)<<4|o&15,t[a+7]=i>>4|r}var bw=function(t){for(var s=[],a=10240,r=0;r<t[0].length;++r)if(t[0][r])for(var i=0,o=t[0][r].length;i<o;i+=a)s.push.apply(s,t[0][r].slice(i,i+a));return s},ww=Ls?function(t){return t[0].length>0&&Buffer.isBuffer(t[0][0])?Buffer.concat(t[0].map(function(s){return Buffer.isBuffer(s)?s:sl(s)})):bw(t)}:bw,Sw=function(t,s,a){for(var r=[],i=s;i<a;i+=2)r.push(String.fromCharCode(xu(t,i)));return r.join("").replace(yu,"")},Bv=Ls?function(t,s,a){return Buffer.isBuffer(t)?t.toString("utf16le",s,a).replace(yu,""):Sw(t,s,a)}:Sw,Cw=function(t,s,a){for(var r=[],i=s;i<s+a;++i)r.push(("0"+t[i].toString(16)).slice(-2));return r.join("")},zC=Ls?function(t,s,a){return Buffer.isBuffer(t)?t.toString("hex",s,s+a):Cw(t,s,a)}:Cw,Tw=function(t,s,a){for(var r=[],i=s;i<a;i++)r.push(String.fromCharCode(Ac(t,i)));return r.join("")},rm=Ls?function(s,a,r){return Buffer.isBuffer(s)?s.toString("utf8",a,r):Tw(s,a,r)}:Tw,UC=function(t,s){var a=fn(t,s);return a>0?rm(t,s+4,s+4+a-1):""},VC=UC,$C=function(t,s){var a=fn(t,s);return a>0?rm(t,s+4,s+4+a-1):""},HC=$C,WC=function(t,s){var a=2*fn(t,s);return a>0?rm(t,s+4,s+4+a-1):""},GC=WC,qC=function(s,a){var r=fn(s,a);return r>0?Bv(s,a+4,a+4+r):""},KC=qC,YC=function(t,s){var a=fn(t,s);return a>0?rm(t,s+4,s+4+a):""},XC=YC,QC=function(t,s){return gM(t,s)},gf=QC,zv=function(s){return Array.isArray(s)||typeof Uint8Array<"u"&&s instanceof Uint8Array};Ls&&(VC=function(s,a){if(!Buffer.isBuffer(s))return UC(s,a);var r=s.readUInt32LE(a);return r>0?s.toString("utf8",a+4,a+4+r-1):""},HC=function(s,a){if(!Buffer.isBuffer(s))return $C(s,a);var r=s.readUInt32LE(a);return r>0?s.toString("utf8",a+4,a+4+r-1):""},GC=function(s,a){if(!Buffer.isBuffer(s))return WC(s,a);var r=2*s.readUInt32LE(a);return s.toString("utf16le",a+4,a+4+r-1)},KC=function(s,a){if(!Buffer.isBuffer(s))return qC(s,a);var r=s.readUInt32LE(a);return s.toString("utf16le",a+4,a+4+r)},XC=function(s,a){if(!Buffer.isBuffer(s))return YC(s,a);var r=s.readUInt32LE(a);return s.toString("utf8",a+4,a+4+r)},gf=function(s,a){return Buffer.isBuffer(s)?s.readDoubleLE(a):QC(s,a)},zv=function(s){return Buffer.isBuffer(s)||Array.isArray(s)||typeof Uint8Array<"u"&&s instanceof Uint8Array});var Ac=function(t,s){return t[s]},xu=function(t,s){return t[s+1]*256+t[s]},jM=function(t,s){var a=t[s+1]*256+t[s];return a<32768?a:(65535-a+1)*-1},fn=function(t,s){return t[s+3]*(1<<24)+(t[s+2]<<16)+(t[s+1]<<8)+t[s]},xo=function(t,s){return t[s+3]<<24|t[s+2]<<16|t[s+1]<<8|t[s]},yM=function(t,s){return t[s]<<24|t[s+1]<<16|t[s+2]<<8|t[s+3]};function bu(t,s){var a="",r,i,o=[],c,u,f,x;switch(s){case"dbcs":if(x=this.l,Ls&&Buffer.isBuffer(this))a=this.slice(this.l,this.l+2*t).toString("utf16le");else for(f=0;f<t;++f)a+=String.fromCharCode(xu(this,x)),x+=2;t*=2;break;case"utf8":a=rm(this,this.l,this.l+t);break;case"utf16le":t*=2,a=Bv(this,this.l,this.l+t);break;case"wstr":return bu.call(this,t,"dbcs");case"lpstr-ansi":a=VC(this,this.l),t=4+fn(this,this.l);break;case"lpstr-cp":a=HC(this,this.l),t=4+fn(this,this.l);break;case"lpwstr":a=GC(this,this.l),t=4+2*fn(this,this.l);break;case"lpp4":t=4+fn(this,this.l),a=KC(this,this.l),t&2&&(t+=2);break;case"8lpp4":t=4+fn(this,this.l),a=XC(this,this.l),t&3&&(t+=4-(t&3));break;case"cstr":for(t=0,a="";(c=Ac(this,this.l+t++))!==0;)o.push(Oh(c));a=o.join("");break;case"_wstr":for(t=0,a="";(c=xu(this,this.l+t))!==0;)o.push(Oh(c)),t+=2;t+=2,a=o.join("");break;case"dbcs-cont":for(a="",x=this.l,f=0;f<t;++f){if(this.lens&&this.lens.indexOf(x)!==-1)return c=Ac(this,x),this.l=x+1,u=bu.call(this,t-f,c?"dbcs-cont":"sbcs-cont"),o.join("")+u;o.push(Oh(xu(this,x))),x+=2}a=o.join(""),t*=2;break;case"cpstr":case"sbcs-cont":for(a="",x=this.l,f=0;f!=t;++f){if(this.lens&&this.lens.indexOf(x)!==-1)return c=Ac(this,x),this.l=x+1,u=bu.call(this,t-f,c?"dbcs-cont":"sbcs-cont"),o.join("")+u;o.push(Oh(Ac(this,x))),x+=1}a=o.join("");break;default:switch(t){case 1:return r=Ac(this,this.l),this.l++,r;case 2:return r=(s==="i"?jM:xu)(this,this.l),this.l+=2,r;case 4:case-4:return s==="i"||(this[this.l+3]&128)===0?(r=(t>0?xo:yM)(this,this.l),this.l+=4,r):(i=fn(this,this.l),this.l+=4,i);case 8:case-8:if(s==="f")return t==8?i=gf(this,this.l):i=gf([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,i;t=8;case 16:a=zC(this,this.l,t);break}}return this.l+=t,a}var NM=function(t,s,a){t[a]=s&255,t[a+1]=s>>>8&255,t[a+2]=s>>>16&255,t[a+3]=s>>>24&255},bM=function(t,s,a){t[a]=s&255,t[a+1]=s>>8&255,t[a+2]=s>>16&255,t[a+3]=s>>24&255},wM=function(t,s,a){t[a]=s&255,t[a+1]=s>>>8&255};function SM(t,s,a){var r=0,i=0;if(a==="dbcs"){for(i=0;i!=s.length;++i)wM(this,s.charCodeAt(i),this.l+2*i);r=2*s.length}else if(a==="sbcs"){for(s=s.replace(/[^\x00-\x7F]/g,"_"),i=0;i!=s.length;++i)this[this.l+i]=s.charCodeAt(i)&255;r=s.length}else if(a==="hex"){for(;i<t;++i)this[this.l++]=parseInt(s.slice(2*i,2*i+2),16)||0;return this}else if(a==="utf16le"){var o=Math.min(this.l+t,this.length);for(i=0;i<Math.min(s.length,t);++i){var c=s.charCodeAt(i);this[this.l++]=c&255,this[this.l++]=c>>8}for(;this.l<o;)this[this.l++]=0;return this}else switch(t){case 1:r=1,this[this.l]=s&255;break;case 2:r=2,this[this.l]=s&255,s>>>=8,this[this.l+1]=s&255;break;case 3:r=3,this[this.l]=s&255,s>>>=8,this[this.l+1]=s&255,s>>>=8,this[this.l+2]=s&255;break;case 4:r=4,NM(this,s,this.l);break;case 8:if(r=8,a==="f"){vM(this,s,this.l);break}case 16:break;case-4:r=4,bM(this,s,this.l);break}return this.l+=r,this}function ZC(t,s){var a=zC(this,this.l,t.length>>1);if(a!==t)throw new Error(s+"Expected "+t+" saw "+a);this.l+=t.length>>1}function mn(t,s){t.l=s,t.read_shift=bu,t.chk=ZC,t.write_shift=SM}function ji(t,s){t.l+=s}function Ge(t){var s=Po(t);return mn(s,0),s}function Zr(){var t=[],s=Ls?256:2048,a=function(x){var h=Ge(x);return mn(h,0),h},r=a(s),i=function(){r&&(r.length>r.l&&(r=r.slice(0,r.l),r.l=r.length),r.length>0&&t.push(r),r=null)},o=function(x){return r&&x<r.length-r.l?r:(i(),r=a(Math.max(x+1,s)))},c=function(){return i(),xr(t)},u=function(x){i(),r=x,r.l==null&&(r.l=r.length),o(s)};return{next:o,push:u,end:c,_bufs:t}}function at(t,s,a,r){var i=+s,o;if(!isNaN(i)){r||(r=g7[i].p||(a||[]).length||0),o=1+(i>=128?1:0)+1,r>=128&&++o,r>=16384&&++o,r>=2097152&&++o;var c=t.next(o);i<=127?c.write_shift(1,i):(c.write_shift(1,(i&127)+128),c.write_shift(1,i>>7));for(var u=0;u!=4;++u)if(r>=128)c.write_shift(1,(r&127)+128),r>>=7;else{c.write_shift(1,r);break}r>0&&zv(a)&&t.push(a)}}function wu(t,s,a){var r=en(t);if(s.s?(r.cRel&&(r.c+=s.s.c),r.rRel&&(r.r+=s.s.r)):(r.cRel&&(r.c+=s.c),r.rRel&&(r.r+=s.r)),!a||a.biff<12){for(;r.c>=256;)r.c-=256;for(;r.r>=65536;)r.r-=65536}return r}function Ew(t,s,a){var r=en(t);return r.s=wu(r.s,s.s,a),r.e=wu(r.e,s.s,a),r}function Su(t,s){if(t.cRel&&t.c<0)for(t=en(t);t.c<0;)t.c+=s>8?16384:256;if(t.rRel&&t.r<0)for(t=en(t);t.r<0;)t.r+=s>8?1048576:s>5?65536:16384;var a=Ys(t);return!t.cRel&&t.cRel!=null&&(a=EM(a)),!t.rRel&&t.rRel!=null&&(a=CM(a)),a}function k0(t,s){return t.s.r==0&&!t.s.rRel&&t.e.r==(s.biff>=12?1048575:s.biff>=8?65536:16384)&&!t.e.rRel?(t.s.cRel?"":"$")+Ar(t.s.c)+":"+(t.e.cRel?"":"$")+Ar(t.e.c):t.s.c==0&&!t.s.cRel&&t.e.c==(s.biff>=12?16383:255)&&!t.e.cRel?(t.s.rRel?"":"$")+vr(t.s.r)+":"+(t.e.rRel?"":"$")+vr(t.e.r):Su(t.s,s.biff)+":"+Su(t.e,s.biff)}function Uv(t){return parseInt(TM(t),10)-1}function vr(t){return""+(t+1)}function CM(t){return t.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}function TM(t){return t.replace(/\$(\d+)$/,"$1")}function Vv(t){for(var s=kM(t),a=0,r=0;r!==s.length;++r)a=26*a+s.charCodeAt(r)-64;return a-1}function Ar(t){if(t<0)throw new Error("invalid column "+t);var s="";for(++t;t;t=Math.floor((t-1)/26))s=String.fromCharCode((t-1)%26+65)+s;return s}function EM(t){return t.replace(/^([A-Z])/,"$$$1")}function kM(t){return t.replace(/^\$([A-Z])/,"$1")}function AM(t){return t.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")}function ar(t){for(var s=0,a=0,r=0;r<t.length;++r){var i=t.charCodeAt(r);i>=48&&i<=57?s=10*s+(i-48):i>=65&&i<=90&&(a=26*a+(i-64))}return{c:a-1,r:s-1}}function Ys(t){for(var s=t.c+1,a="";s;s=(s-1)/26|0)a=String.fromCharCode((s-1)%26+65)+a;return a+(t.r+1)}function xn(t){var s=t.indexOf(":");return s==-1?{s:ar(t),e:ar(t)}:{s:ar(t.slice(0,s)),e:ar(t.slice(s+1))}}function Ga(t,s){return typeof s>"u"||typeof s=="number"?Ga(t.s,t.e):(typeof t!="string"&&(t=Ys(t)),typeof s!="string"&&(s=Ys(s)),t==s?t:t+":"+s)}function ua(t){var s={s:{c:0,r:0},e:{c:0,r:0}},a=0,r=0,i=0,o=t.length;for(a=0;r<o&&!((i=t.charCodeAt(r)-64)<1||i>26);++r)a=26*a+i;for(s.s.c=--a,a=0;r<o&&!((i=t.charCodeAt(r)-48)<0||i>9);++r)a=10*a+i;if(s.s.r=--a,r===o||i!=10)return s.e.c=s.s.c,s.e.r=s.s.r,s;for(++r,a=0;r!=o&&!((i=t.charCodeAt(r)-64)<1||i>26);++r)a=26*a+i;for(s.e.c=--a,a=0;r!=o&&!((i=t.charCodeAt(r)-48)<0||i>9);++r)a=10*a+i;return s.e.r=--a,s}function kw(t,s){var a=t.t=="d"&&s instanceof Date;if(t.z!=null)try{return t.w=Fl(t.z,a?Jr(s):s)}catch{}try{return t.w=Fl((t.XF||{}).numFmtId||(a?14:0),a?Jr(s):s)}catch{return""+s}}function Qi(t,s,a){return t==null||t.t==null||t.t=="z"?"":t.w!==void 0?t.w:(t.t=="d"&&!t.z&&a&&a.dateNF&&(t.z=a.dateNF),t.t=="e"?nm[t.v]||t.v:s==null?kw(t,t.v):kw(t,s))}function Lo(t,s){var a=s&&s.sheet?s.sheet:"Sheet1",r={};return r[a]=t,{SheetNames:[a],Sheets:r}}function JC(t,s,a){var r=a||{},i=t?Array.isArray(t):r.dense,o=t||(i?[]:{}),c=0,u=0;if(o&&r.origin!=null){if(typeof r.origin=="number")c=r.origin;else{var f=typeof r.origin=="string"?ar(r.origin):r.origin;c=f.r,u=f.c}o["!ref"]||(o["!ref"]="A1:A1")}var x={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(o["!ref"]){var h=ua(o["!ref"]);x.s.c=h.s.c,x.s.r=h.s.r,x.e.c=Math.max(x.e.c,h.e.c),x.e.r=Math.max(x.e.r,h.e.r),c==-1&&(x.e.r=c=h.e.r+1)}for(var p=0;p!=s.length;++p)if(s[p]){if(!Array.isArray(s[p]))throw new Error("aoa_to_sheet expects an array of arrays");for(var g=0;g!=s[p].length;++g)if(!(typeof s[p][g]>"u")){var y={v:s[p][g]},b=c+p,N=u+g;if(x.s.r>b&&(x.s.r=b),x.s.c>N&&(x.s.c=N),x.e.r<b&&(x.e.r=b),x.e.c<N&&(x.e.c=N),s[p][g]&&typeof s[p][g]=="object"&&!Array.isArray(s[p][g])&&!(s[p][g]instanceof Date))y=s[p][g];else if(Array.isArray(y.v)&&(y.f=s[p][g][1],y.v=y.v[0]),y.v===null)if(y.f)y.t="n";else if(r.nullError)y.t="e",y.v=0;else if(r.sheetStubs)y.t="z";else continue;else typeof y.v=="number"?y.t="n":typeof y.v=="boolean"?y.t="b":y.v instanceof Date?(y.z=r.dateNF||Da[14],r.cellDates?(y.t="d",y.w=Fl(y.z,Jr(y.v))):(y.t="n",y.v=Jr(y.v),y.w=Fl(y.z,y.v))):y.t="s";if(i)o[b]||(o[b]=[]),o[b][N]&&o[b][N].z&&(y.z=o[b][N].z),o[b][N]=y;else{var S=Ys({c:N,r:b});o[S]&&o[S].z&&(y.z=o[S].z),o[S]=y}}}return x.s.c<1e7&&(o["!ref"]=Ga(x)),o}function cd(t,s){return JC(null,t,s)}function _M(t){return t.read_shift(4,"i")}function Jn(t,s){return s||(s=Ge(4)),s.write_shift(4,t),s}function _r(t){var s=t.read_shift(4);return s===0?"":t.read_shift(s,"dbcs")}function rr(t,s){var a=!1;return s==null&&(a=!0,s=Ge(4+2*t.length)),s.write_shift(4,t.length),t.length>0&&s.write_shift(0,t,"dbcs"),a?s.slice(0,s.l):s}function DM(t){return{ich:t.read_shift(2),ifnt:t.read_shift(2)}}function OM(t,s){return s||(s=Ge(4)),s.write_shift(2,0),s.write_shift(2,0),s}function $v(t,s){var a=t.l,r=t.read_shift(1),i=_r(t),o=[],c={t:i,h:i};if((r&1)!==0){for(var u=t.read_shift(4),f=0;f!=u;++f)o.push(DM(t));c.r=o}else c.r=[{ich:0,ifnt:0}];return t.l=a+s,c}function RM(t,s){var a=!1;return s==null&&(a=!0,s=Ge(15+4*t.t.length)),s.write_shift(1,0),rr(t.t,s),a?s.slice(0,s.l):s}var PM=$v;function MM(t,s){var a=!1;return s==null&&(a=!0,s=Ge(23+4*t.t.length)),s.write_shift(1,1),rr(t.t,s),s.write_shift(4,1),OM({},s),a?s.slice(0,s.l):s}function Ln(t){var s=t.read_shift(4),a=t.read_shift(2);return a+=t.read_shift(1)<<16,t.l++,{c:s,iStyleRef:a}}function Io(t,s){return s==null&&(s=Ge(8)),s.write_shift(-4,t.c),s.write_shift(3,t.iStyleRef||t.s),s.write_shift(1,0),s}function Bo(t){var s=t.read_shift(2);return s+=t.read_shift(1)<<16,t.l++,{c:-1,iStyleRef:s}}function zo(t,s){return s==null&&(s=Ge(4)),s.write_shift(3,t.iStyleRef||t.s),s.write_shift(1,0),s}var FM=_r,eT=rr;function Hv(t){var s=t.read_shift(4);return s===0||s===4294967295?"":t.read_shift(s,"dbcs")}function vf(t,s){var a=!1;return s==null&&(a=!0,s=Ge(127)),s.write_shift(4,t.length>0?t.length:4294967295),t.length>0&&s.write_shift(0,t,"dbcs"),a?s.slice(0,s.l):s}var LM=_r,Og=Hv,Wv=vf;function tT(t){var s=t.slice(t.l,t.l+4),a=s[0]&1,r=s[0]&2;t.l+=4;var i=r===0?gf([0,0,0,0,s[0]&252,s[1],s[2],s[3]],0):xo(s,0)>>2;return a?i/100:i}function sT(t,s){s==null&&(s=Ge(4));var a=0,r=0,i=t*100;if(t==(t|0)&&t>=-536870912&&t<1<<29?r=1:i==(i|0)&&i>=-536870912&&i<1<<29&&(r=1,a=1),r)s.write_shift(-4,((a?i:t)<<2)+(a+2));else throw new Error("unsupported RkNumber "+t)}function aT(t){var s={s:{},e:{}};return s.s.r=t.read_shift(4),s.e.r=t.read_shift(4),s.s.c=t.read_shift(4),s.e.c=t.read_shift(4),s}function IM(t,s){return s||(s=Ge(16)),s.write_shift(4,t.s.r),s.write_shift(4,t.e.r),s.write_shift(4,t.s.c),s.write_shift(4,t.e.c),s}var Uo=aT,dd=IM;function ud(t){if(t.length-t.l<8)throw"XLS Xnum Buffer underflow";return t.read_shift(8,"f")}function Mo(t,s){return(s||Ge(8)).write_shift(8,t,"f")}function BM(t){var s={},a=t.read_shift(1),r=a>>>1,i=t.read_shift(1),o=t.read_shift(2,"i"),c=t.read_shift(1),u=t.read_shift(1),f=t.read_shift(1);switch(t.l++,r){case 0:s.auto=1;break;case 1:s.index=i;var x=KM[i];x&&(s.rgb=Bw(x));break;case 2:s.rgb=Bw([c,u,f]);break;case 3:s.theme=i;break}return o!=0&&(s.tint=o>0?o/32767:o/32768),s}function jf(t,s){if(s||(s=Ge(8)),!t||t.auto)return s.write_shift(4,0),s.write_shift(4,0),s;t.index!=null?(s.write_shift(1,2),s.write_shift(1,t.index)):t.theme!=null?(s.write_shift(1,6),s.write_shift(1,t.theme)):(s.write_shift(1,5),s.write_shift(1,0));var a=t.tint||0;if(a>0?a*=32767:a<0&&(a*=32768),s.write_shift(2,a),!t.rgb||t.theme!=null)s.write_shift(2,0),s.write_shift(1,0),s.write_shift(1,0);else{var r=t.rgb||"FFFFFF";typeof r=="number"&&(r=("000000"+r.toString(16)).slice(-6)),s.write_shift(1,parseInt(r.slice(0,2),16)),s.write_shift(1,parseInt(r.slice(2,4),16)),s.write_shift(1,parseInt(r.slice(4,6),16)),s.write_shift(1,255)}return s}function zM(t){var s=t.read_shift(1);t.l++;var a={fBold:s&1,fItalic:s&2,fUnderline:s&4,fStrikeout:s&8,fOutline:s&16,fShadow:s&32,fCondense:s&64,fExtend:s&128};return a}function UM(t,s){s||(s=Ge(2));var a=(t.italic?2:0)|(t.strike?8:0)|(t.outline?16:0)|(t.shadow?32:0)|(t.condense?64:0)|(t.extend?128:0);return s.write_shift(1,a),s.write_shift(1,0),s}var rT=2,dn=3,Fh=11,yf=19,Lh=64,VM=65,$M=71,HM=4108,WM=4126,mr=80,Aw={1:{n:"CodePage",t:rT},2:{n:"Category",t:mr},3:{n:"PresentationFormat",t:mr},4:{n:"ByteCount",t:dn},5:{n:"LineCount",t:dn},6:{n:"ParagraphCount",t:dn},7:{n:"SlideCount",t:dn},8:{n:"NoteCount",t:dn},9:{n:"HiddenCount",t:dn},10:{n:"MultimediaClipCount",t:dn},11:{n:"ScaleCrop",t:Fh},12:{n:"HeadingPairs",t:HM},13:{n:"TitlesOfParts",t:WM},14:{n:"Manager",t:mr},15:{n:"Company",t:mr},16:{n:"LinksUpToDate",t:Fh},17:{n:"CharacterCount",t:dn},19:{n:"SharedDoc",t:Fh},22:{n:"HyperlinksChanged",t:Fh},23:{n:"AppVersion",t:dn,p:"version"},24:{n:"DigSig",t:VM},26:{n:"ContentType",t:mr},27:{n:"ContentStatus",t:mr},28:{n:"Language",t:mr},29:{n:"Version",t:mr},255:{},2147483648:{n:"Locale",t:yf},2147483651:{n:"Behavior",t:yf},1919054434:{}},_w={1:{n:"CodePage",t:rT},2:{n:"Title",t:mr},3:{n:"Subject",t:mr},4:{n:"Author",t:mr},5:{n:"Keywords",t:mr},6:{n:"Comments",t:mr},7:{n:"Template",t:mr},8:{n:"LastAuthor",t:mr},9:{n:"RevNumber",t:mr},10:{n:"EditTime",t:Lh},11:{n:"LastPrinted",t:Lh},12:{n:"CreatedDate",t:Lh},13:{n:"ModifiedDate",t:Lh},14:{n:"PageCount",t:dn},15:{n:"WordCount",t:dn},16:{n:"CharCount",t:dn},17:{n:"Thumbnail",t:$M},18:{n:"Application",t:mr},19:{n:"DocSecurity",t:dn},255:{},2147483648:{n:"Locale",t:yf},2147483651:{n:"Behavior",t:yf},1919054434:{}};function GM(t){return t.map(function(s){return[s>>16&255,s>>8&255,s&255]})}var qM=GM([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),KM=en(qM),nm={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},YM={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"},Ih={workbooks:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml",xlsm:"application/vnd.ms-excel.sheet.macroEnabled.main+xml",xlsb:"application/vnd.ms-excel.sheet.binary.macroEnabled.main",xlam:"application/vnd.ms-excel.addin.macroEnabled.main+xml",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml"},strs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml",xlsb:"application/vnd.ms-excel.sharedStrings"},comments:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml",xlsb:"application/vnd.ms-excel.comments"},sheets:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml",xlsb:"application/vnd.ms-excel.worksheet"},charts:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml",xlsb:"application/vnd.ms-excel.chartsheet"},dialogs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml",xlsb:"application/vnd.ms-excel.dialogsheet"},macros:{xlsx:"application/vnd.ms-excel.macrosheet+xml",xlsb:"application/vnd.ms-excel.macrosheet"},metadata:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml",xlsb:"application/vnd.ms-excel.sheetMetadata"},styles:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml",xlsb:"application/vnd.ms-excel.styles"}};function nT(){return{workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""}}function iT(t,s){var a=nM(YM),r=[],i;r[r.length]=Ya,r[r.length]=ut("Types",null,{xmlns:sr.CT,"xmlns:xsd":sr.xsd,"xmlns:xsi":sr.xsi}),r=r.concat([["xml","application/xml"],["bin","application/vnd.ms-excel.sheet.binary.macroEnabled.main"],["vml","application/vnd.openxmlformats-officedocument.vmlDrawing"],["data","application/vnd.openxmlformats-officedocument.model+data"],["bmp","image/bmp"],["png","image/png"],["gif","image/gif"],["emf","image/x-emf"],["wmf","image/x-wmf"],["jpg","image/jpeg"],["jpeg","image/jpeg"],["tif","image/tiff"],["tiff","image/tiff"],["pdf","application/pdf"],["rels","application/vnd.openxmlformats-package.relationships+xml"]].map(function(f){return ut("Default",null,{Extension:f[0],ContentType:f[1]})}));var o=function(f){t[f]&&t[f].length>0&&(i=t[f][0],r[r.length]=ut("Override",null,{PartName:(i[0]=="/"?"":"/")+i,ContentType:Ih[f][s.bookType]||Ih[f].xlsx}))},c=function(f){(t[f]||[]).forEach(function(x){r[r.length]=ut("Override",null,{PartName:(x[0]=="/"?"":"/")+x,ContentType:Ih[f][s.bookType]||Ih[f].xlsx})})},u=function(f){(t[f]||[]).forEach(function(x){r[r.length]=ut("Override",null,{PartName:(x[0]=="/"?"":"/")+x,ContentType:a[f][0]})})};return o("workbooks"),c("sheets"),c("charts"),u("themes"),["strs","styles"].forEach(o),["coreprops","extprops","custprops"].forEach(u),u("vba"),u("comments"),u("threadedcomments"),u("drawings"),c("metadata"),u("people"),r.length>2&&(r[r.length]="</Types>",r[1]=r[1].replace("/>",">")),r.join("")}var Rs={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function lT(t){var s=t.lastIndexOf("/");return t.slice(0,s+1)+"_rels/"+t.slice(s+1)+".rels"}function Vc(t){var s=[Ya,ut("Relationships",null,{xmlns:sr.RELS})];return yr(t["!id"]).forEach(function(a){s[s.length]=ut("Relationship",null,t["!id"][a])}),s.length>2&&(s[s.length]="</Relationships>",s[1]=s[1].replace("/>",">")),s.join("")}function $s(t,s,a,r,i,o){if(i||(i={}),t["!id"]||(t["!id"]={}),t["!idx"]||(t["!idx"]=1),s<0)for(s=t["!idx"];t["!id"]["rId"+s];++s);if(t["!idx"]=s+1,i.Id="rId"+s,i.Type=r,i.Target=a,[Rs.HLINK,Rs.XPATH,Rs.XMISS].indexOf(i.Type)>-1&&(i.TargetMode="External"),t["!id"][i.Id])throw new Error("Cannot rewrite rId "+s);return t["!id"][i.Id]=i,t[("/"+i.Target).replace("//","/")]=i,s}function XM(t){var s=[Ya];s.push(`<manifest:manifest xmlns:manifest="urn:oasis:names:tc:opendocument:xmlns:manifest:1.0" manifest:version="1.2">
`),s.push(`  <manifest:file-entry manifest:full-path="/" manifest:version="1.2" manifest:media-type="application/vnd.oasis.opendocument.spreadsheet"/>
`);for(var a=0;a<t.length;++a)s.push('  <manifest:file-entry manifest:full-path="'+t[a][0]+'" manifest:media-type="'+t[a][1]+`"/>
`);return s.push("</manifest:manifest>"),s.join("")}function Dw(t,s,a){return['  <rdf:Description rdf:about="'+t+`">
`,'    <rdf:type rdf:resource="http://docs.oasis-open.org/ns/office/1.2/meta/'+(a||"odf")+"#"+s+`"/>
`,`  </rdf:Description>
`].join("")}function QM(t,s){return['  <rdf:Description rdf:about="'+t+`">
`,'    <ns0:hasPart xmlns:ns0="http://docs.oasis-open.org/ns/office/1.2/meta/pkg#" rdf:resource="'+s+`"/>
`,`  </rdf:Description>
`].join("")}function ZM(t){var s=[Ya];s.push(`<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
`);for(var a=0;a!=t.length;++a)s.push(Dw(t[a][0],t[a][1])),s.push(QM("",t[a][0]));return s.push(Dw("","Document","pkg")),s.push("</rdf:RDF>"),s.join("")}function oT(){return'<office:document-meta xmlns:office="urn:oasis:names:tc:opendocument:xmlns:office:1.0" xmlns:meta="urn:oasis:names:tc:opendocument:xmlns:meta:1.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:xlink="http://www.w3.org/1999/xlink" office:version="1.2"><office:meta><meta:generator>SheetJS '+uf.version+"</meta:generator></office:meta></office:document-meta>"}var Co=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]];function A0(t,s,a,r,i){i[t]!=null||s==null||s===""||(i[t]=s,s=qs(s),r[r.length]=a?ut(t,s,a):pr(t,s))}function cT(t,s){var a=s||{},r=[Ya,ut("cp:coreProperties",null,{"xmlns:cp":sr.CORE_PROPS,"xmlns:dc":sr.dc,"xmlns:dcterms":sr.dcterms,"xmlns:dcmitype":sr.dcmitype,"xmlns:xsi":sr.xsi})],i={};if(!t&&!a.Props)return r.join("");t&&(t.CreatedDate!=null&&A0("dcterms:created",typeof t.CreatedDate=="string"?t.CreatedDate:Dg(t.CreatedDate,a.WTF),{"xsi:type":"dcterms:W3CDTF"},r,i),t.ModifiedDate!=null&&A0("dcterms:modified",typeof t.ModifiedDate=="string"?t.ModifiedDate:Dg(t.ModifiedDate,a.WTF),{"xsi:type":"dcterms:W3CDTF"},r,i));for(var o=0;o!=Co.length;++o){var c=Co[o],u=a.Props&&a.Props[c[1]]!=null?a.Props[c[1]]:t?t[c[1]]:null;u===!0?u="1":u===!1?u="0":typeof u=="number"&&(u=String(u)),u!=null&&A0(c[0],u,null,r,i)}return r.length>2&&(r[r.length]="</cp:coreProperties>",r[1]=r[1].replace("/>",">")),r.join("")}var $c=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]],dT=["Worksheets","SheetNames","NamedRanges","DefinedNames","Chartsheets","ChartNames"];function uT(t){var s=[],a=ut;return t||(t={}),t.Application="SheetJS",s[s.length]=Ya,s[s.length]=ut("Properties",null,{xmlns:sr.EXT_PROPS,"xmlns:vt":sr.vt}),$c.forEach(function(r){if(t[r[1]]!==void 0){var i;switch(r[2]){case"string":i=qs(String(t[r[1]]));break;case"bool":i=t[r[1]]?"true":"false";break}i!==void 0&&(s[s.length]=a(r[0],i))}}),s[s.length]=a("HeadingPairs",a("vt:vector",a("vt:variant","<vt:lpstr>Worksheets</vt:lpstr>")+a("vt:variant",a("vt:i4",String(t.Worksheets))),{size:2,baseType:"variant"})),s[s.length]=a("TitlesOfParts",a("vt:vector",t.SheetNames.map(function(r){return"<vt:lpstr>"+qs(r)+"</vt:lpstr>"}).join(""),{size:t.Worksheets,baseType:"lpstr"})),s.length>2&&(s[s.length]="</Properties>",s[1]=s[1].replace("/>",">")),s.join("")}function mT(t){var s=[Ya,ut("Properties",null,{xmlns:sr.CUST_PROPS,"xmlns:vt":sr.vt})];if(!t)return s.join("");var a=1;return yr(t).forEach(function(i){++a,s[s.length]=ut("property",pM(t[i]),{fmtid:"{D5CDD505-2E9C-101B-9397-08002B2CF9AE}",pid:a,name:qs(i)})}),s.length>2&&(s[s.length]="</Properties>",s[1]=s[1].replace("/>",">")),s.join("")}var Ow={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"};function JM(t,s){var a=[];return yr(Ow).map(function(r){for(var i=0;i<Co.length;++i)if(Co[i][1]==r)return Co[i];for(i=0;i<$c.length;++i)if($c[i][1]==r)return $c[i];throw r}).forEach(function(r){if(t[r[1]]!=null){var i=s&&s.Props&&s.Props[r[1]]!=null?s.Props[r[1]]:t[r[1]];switch(r[2]){case"date":i=new Date(i).toISOString().replace(/\.\d*Z/,"Z");break}typeof i=="number"?i=String(i):i===!0||i===!1?i=i?"1":"0":i instanceof Date&&(i=new Date(i).toISOString().replace(/\.\d*Z/,"")),a.push(pr(Ow[r[1]]||r[1],i))}}),ut("DocumentProperties",a.join(""),{xmlns:hn.o})}function e8(t,s){var a=["Worksheets","SheetNames"],r="CustomDocumentProperties",i=[];return t&&yr(t).forEach(function(o){if(Object.prototype.hasOwnProperty.call(t,o)){for(var c=0;c<Co.length;++c)if(o==Co[c][1])return;for(c=0;c<$c.length;++c)if(o==$c[c][1])return;for(c=0;c<a.length;++c)if(o==a[c])return;var u=t[o],f="string";typeof u=="number"?(f="float",u=String(u)):u===!0||u===!1?(f="boolean",u=u?"1":"0"):u=String(u),i.push(ut(jw(o),u,{"dt:dt":f}))}}),s&&yr(s).forEach(function(o){if(Object.prototype.hasOwnProperty.call(s,o)&&!(t&&Object.prototype.hasOwnProperty.call(t,o))){var c=s[o],u="string";typeof c=="number"?(u="float",c=String(c)):c===!0||c===!1?(u="boolean",c=c?"1":"0"):c instanceof Date?(u="dateTime.tz",c=c.toISOString()):c=String(c),i.push(ut(jw(o),c,{"dt:dt":u}))}}),"<"+r+' xmlns="'+hn.o+'">'+i.join("")+"</"+r+">"}function t8(t){var s=typeof t=="string"?new Date(Date.parse(t)):t,a=s.getTime()/1e3+11644473600,r=a%Math.pow(2,32),i=(a-r)/Math.pow(2,32);r*=1e7,i*=1e7;var o=r/Math.pow(2,32)|0;o>0&&(r=r%Math.pow(2,32),i+=o);var c=Ge(8);return c.write_shift(4,r),c.write_shift(4,i),c}function Rw(t,s){var a=Ge(4),r=Ge(4);switch(a.write_shift(4,t==80?31:t),t){case 3:r.write_shift(-4,s);break;case 5:r=Ge(8),r.write_shift(8,s,"f");break;case 11:r.write_shift(4,s?1:0);break;case 64:r=t8(s);break;case 31:case 80:for(r=Ge(4+2*(s.length+1)+(s.length%2?0:2)),r.write_shift(4,s.length+1),r.write_shift(0,s,"dbcs");r.l!=r.length;)r.write_shift(1,0);break;default:throw new Error("TypedPropertyValue unrecognized type "+t+" "+s)}return xr([a,r])}var hT=["CodePage","Thumbnail","_PID_LINKBASE","_PID_HLINKS","SystemIdentifier","FMTID"];function s8(t){switch(typeof t){case"boolean":return 11;case"number":return(t|0)==t?3:5;case"string":return 31;case"object":if(t instanceof Date)return 64;break}return-1}function Pw(t,s,a){var r=Ge(8),i=[],o=[],c=8,u=0,f=Ge(8),x=Ge(8);if(f.write_shift(4,2),f.write_shift(4,1200),x.write_shift(4,1),o.push(f),i.push(x),c+=8+f.length,!s){x=Ge(8),x.write_shift(4,0),i.unshift(x);var h=[Ge(4)];for(h[0].write_shift(4,t.length),u=0;u<t.length;++u){var p=t[u][0];for(f=Ge(8+2*(p.length+1)+(p.length%2?0:2)),f.write_shift(4,u+2),f.write_shift(4,p.length+1),f.write_shift(0,p,"dbcs");f.l!=f.length;)f.write_shift(1,0);h.push(f)}f=xr(h),o.unshift(f),c+=8+f.length}for(u=0;u<t.length;++u)if(!(s&&!s[t[u][0]])&&!(hT.indexOf(t[u][0])>-1||dT.indexOf(t[u][0])>-1)&&t[u][1]!=null){var g=t[u][1],y=0;if(s){y=+s[t[u][0]];var b=a[y];if(b.p=="version"&&typeof g=="string"){var N=g.split(".");g=(+N[0]<<16)+(+N[1]||0)}f=Rw(b.t,g)}else{var S=s8(g);S==-1&&(S=31,g=String(g)),f=Rw(S,g)}o.push(f),x=Ge(8),x.write_shift(4,s?y:2+u),i.push(x),c+=8+f.length}var C=8*(o.length+1);for(u=0;u<o.length;++u)i[u].write_shift(4,C),C+=o[u].length;return r.write_shift(4,c),r.write_shift(4,o.length),xr([r].concat(i).concat(o))}function Mw(t,s,a,r,i,o){var c=Ge(i?68:48),u=[c];c.write_shift(2,65534),c.write_shift(2,0),c.write_shift(4,842412599),c.write_shift(16,ea.utils.consts.HEADER_CLSID,"hex"),c.write_shift(4,i?2:1),c.write_shift(16,s,"hex"),c.write_shift(4,i?68:48);var f=Pw(t,a,r);if(u.push(f),i){var x=Pw(i,null,null);c.write_shift(16,o,"hex"),c.write_shift(4,68+f.length),u.push(x)}return xr(u)}function a8(t,s){s||(s=Ge(t));for(var a=0;a<t;++a)s.write_shift(1,0);return s}function r8(t,s){return t.read_shift(s)===1}function Rr(t,s){return s||(s=Ge(2)),s.write_shift(2,+!!t),s}function fT(t){return t.read_shift(2,"u")}function Dn(t,s){return s||(s=Ge(2)),s.write_shift(2,t),s}function xT(t,s,a){return a||(a=Ge(2)),a.write_shift(1,s=="e"?+t:+!!t),a.write_shift(1,s=="e"?1:0),a}function pT(t,s,a){var r=t.read_shift(a&&a.biff>=12?2:1),i="sbcs-cont";if(a&&a.biff>=8,!a||a.biff==8){var o=t.read_shift(1);o&&(i="dbcs-cont")}else a.biff==12&&(i="wstr");a.biff>=2&&a.biff<=5&&(i="cpstr");var c=r?t.read_shift(r,i):"";return c}function n8(t){var s=t.t||"",a=Ge(3);a.write_shift(2,s.length),a.write_shift(1,1);var r=Ge(2*s.length);r.write_shift(2*s.length,s,"utf16le");var i=[a,r];return xr(i)}function i8(t,s,a){var r;if(a){if(a.biff>=2&&a.biff<=5)return t.read_shift(s,"cpstr");if(a.biff>=12)return t.read_shift(s,"dbcs-cont")}var i=t.read_shift(1);return i===0?r=t.read_shift(s,"sbcs-cont"):r=t.read_shift(s,"dbcs-cont"),r}function l8(t,s,a){var r=t.read_shift(a&&a.biff==2?1:2);return r===0?(t.l++,""):i8(t,r,a)}function o8(t,s,a){if(a.biff>5)return l8(t,s,a);var r=t.read_shift(1);return r===0?(t.l++,""):t.read_shift(r,a.biff<=4||!t.lens?"cpstr":"sbcs-cont")}function gT(t,s,a){return a||(a=Ge(3+2*t.length)),a.write_shift(2,t.length),a.write_shift(1,1),a.write_shift(31,t,"utf16le"),a}function Fw(t,s){s||(s=Ge(6+t.length*2)),s.write_shift(4,1+t.length);for(var a=0;a<t.length;++a)s.write_shift(2,t.charCodeAt(a));return s.write_shift(2,0),s}function c8(t){var s=Ge(512),a=0,r=t.Target;r.slice(0,7)=="file://"&&(r=r.slice(7));var i=r.indexOf("#"),o=i>-1?31:23;switch(r.charAt(0)){case"#":o=28;break;case".":o&=-3;break}s.write_shift(4,2),s.write_shift(4,o);var c=[8,6815827,6619237,4849780,83];for(a=0;a<c.length;++a)s.write_shift(4,c[a]);if(o==28)r=r.slice(1),Fw(r,s);else if(o&2){for(c="e0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),a=0;a<c.length;++a)s.write_shift(1,parseInt(c[a],16));var u=i>-1?r.slice(0,i):r;for(s.write_shift(4,2*(u.length+1)),a=0;a<u.length;++a)s.write_shift(2,u.charCodeAt(a));s.write_shift(2,0),o&8&&Fw(i>-1?r.slice(i+1):"",s)}else{for(c="03 03 00 00 00 00 00 00 c0 00 00 00 00 00 00 46".split(" "),a=0;a<c.length;++a)s.write_shift(1,parseInt(c[a],16));for(var f=0;r.slice(f*3,f*3+3)=="../"||r.slice(f*3,f*3+3)=="..\\";)++f;for(s.write_shift(2,f),s.write_shift(4,r.length-3*f+1),a=0;a<r.length-3*f;++a)s.write_shift(1,r.charCodeAt(a+3*f)&255);for(s.write_shift(1,0),s.write_shift(2,65535),s.write_shift(2,57005),a=0;a<6;++a)s.write_shift(4,0)}return s.slice(0,s.l)}function Fo(t,s,a,r){return r||(r=Ge(6)),r.write_shift(2,t),r.write_shift(2,s),r.write_shift(2,a||0),r}function d8(t,s,a){var r=a.biff>8?4:2,i=t.read_shift(r),o=t.read_shift(r,"i"),c=t.read_shift(r,"i");return[i,o,c]}function u8(t){var s=t.read_shift(2),a=t.read_shift(2),r=t.read_shift(2),i=t.read_shift(2);return{s:{c:r,r:s},e:{c:i,r:a}}}function vT(t,s){return s||(s=Ge(8)),s.write_shift(2,t.s.r),s.write_shift(2,t.e.r),s.write_shift(2,t.s.c),s.write_shift(2,t.e.c),s}function Gv(t,s,a){var r=1536,i=16;switch(a.bookType){case"biff8":break;case"biff5":r=1280,i=8;break;case"biff4":r=4,i=6;break;case"biff3":r=3,i=6;break;case"biff2":r=2,i=4;break;case"xla":break;default:throw new Error("unsupported BIFF version")}var o=Ge(i);return o.write_shift(2,r),o.write_shift(2,s),i>4&&o.write_shift(2,29282),i>6&&o.write_shift(2,1997),i>8&&(o.write_shift(2,49161),o.write_shift(2,1),o.write_shift(2,1798),o.write_shift(2,0)),o}function m8(t,s){var a=!s||s.biff==8,r=Ge(a?112:54);for(r.write_shift(s.biff==8?2:1,7),a&&r.write_shift(1,0),r.write_shift(4,859007059),r.write_shift(4,5458548|(a?0:536870912));r.l<r.length;)r.write_shift(1,a?0:32);return r}function h8(t,s){var a=!s||s.biff>=8?2:1,r=Ge(8+a*t.name.length);r.write_shift(4,t.pos),r.write_shift(1,t.hs||0),r.write_shift(1,t.dt),r.write_shift(1,t.name.length),s.biff>=8&&r.write_shift(1,1),r.write_shift(a*t.name.length,t.name,s.biff<8?"sbcs":"utf16le");var i=r.slice(0,r.l);return i.l=r.l,i}function f8(t,s){var a=Ge(8);a.write_shift(4,t.Count),a.write_shift(4,t.Unique);for(var r=[],i=0;i<t.length;++i)r[i]=n8(t[i]);var o=xr([a].concat(r));return o.parts=[a.length].concat(r.map(function(c){return c.length})),o}function x8(){var t=Ge(18);return t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,29280),t.write_shift(2,17600),t.write_shift(2,56),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,1),t.write_shift(2,500),t}function p8(t){var s=Ge(18),a=1718;return t&&t.RTL&&(a|=64),s.write_shift(2,a),s.write_shift(4,0),s.write_shift(4,64),s.write_shift(4,0),s.write_shift(4,0),s}function g8(t,s){var a=t.name||"Arial",r=s&&s.biff==5,i=r?15+a.length:16+2*a.length,o=Ge(i);return o.write_shift(2,t.sz*20),o.write_shift(4,0),o.write_shift(2,400),o.write_shift(4,0),o.write_shift(2,0),o.write_shift(1,a.length),r||o.write_shift(1,1),o.write_shift((r?1:2)*a.length,a,r?"sbcs":"utf16le"),o}function v8(t,s,a,r){var i=Ge(10);return Fo(t,s,r,i),i.write_shift(4,a),i}function j8(t,s,a,r,i){var o=!i||i.biff==8,c=Ge(8+ +o+(1+o)*a.length);return Fo(t,s,r,c),c.write_shift(2,a.length),o&&c.write_shift(1,1),c.write_shift((1+o)*a.length,a,o?"utf16le":"sbcs"),c}function y8(t,s,a,r){var i=a&&a.biff==5;r||(r=Ge(i?3+s.length:5+2*s.length)),r.write_shift(2,t),r.write_shift(i?1:2,s.length),i||r.write_shift(1,1),r.write_shift((i?1:2)*s.length,s,i?"sbcs":"utf16le");var o=r.length>r.l?r.slice(0,r.l):r;return o.l==null&&(o.l=o.length),o}function N8(t,s){var a=s.biff==8||!s.biff?4:2,r=Ge(2*a+6);return r.write_shift(a,t.s.r),r.write_shift(a,t.e.r+1),r.write_shift(2,t.s.c),r.write_shift(2,t.e.c+1),r.write_shift(2,0),r}function Lw(t,s,a,r){var i=a&&a.biff==5;r||(r=Ge(i?16:20)),r.write_shift(2,0),t.style?(r.write_shift(2,t.numFmtId||0),r.write_shift(2,65524)):(r.write_shift(2,t.numFmtId||0),r.write_shift(2,s<<4));var o=0;return t.numFmtId>0&&i&&(o|=1024),r.write_shift(4,o),r.write_shift(4,0),i||r.write_shift(4,0),r.write_shift(2,0),r}function b8(t){var s=Ge(8);return s.write_shift(4,0),s.write_shift(2,0),s.write_shift(2,0),s}function w8(t,s,a,r,i,o){var c=Ge(8);return Fo(t,s,r,c),xT(a,o,c),c}function S8(t,s,a,r){var i=Ge(14);return Fo(t,s,r,i),Mo(a,i),i}function C8(t,s,a){if(a.biff<8)return T8(t,s,a);for(var r=[],i=t.l+s,o=t.read_shift(a.biff>8?4:2);o--!==0;)r.push(d8(t,a.biff>8?12:6,a));if(t.l!=i)throw new Error("Bad ExternSheet: "+t.l+" != "+i);return r}function T8(t,s,a){t[t.l+1]==3&&t[t.l]++;var r=pT(t,s,a);return r.charCodeAt(0)==3?r.slice(1):r}function E8(t){var s=Ge(2+t.length*8);s.write_shift(2,t.length);for(var a=0;a<t.length;++a)vT(t[a],s);return s}function k8(t){var s=Ge(24),a=ar(t[0]);s.write_shift(2,a.r),s.write_shift(2,a.r),s.write_shift(2,a.c),s.write_shift(2,a.c);for(var r="d0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),i=0;i<16;++i)s.write_shift(1,parseInt(r[i],16));return xr([s,c8(t[1])])}function A8(t){var s=t[1].Tooltip,a=Ge(10+2*(s.length+1));a.write_shift(2,2048);var r=ar(t[0]);a.write_shift(2,r.r),a.write_shift(2,r.r),a.write_shift(2,r.c),a.write_shift(2,r.c);for(var i=0;i<s.length;++i)a.write_shift(2,s.charCodeAt(i));return a.write_shift(2,0),a}function _8(t){return t||(t=Ge(4)),t.write_shift(2,1),t.write_shift(2,1),t}function D8(t,s,a){if(!a.cellStyles)return ji(t,s);var r=a&&a.biff>=12?4:2,i=t.read_shift(r),o=t.read_shift(r),c=t.read_shift(r),u=t.read_shift(r),f=t.read_shift(2);r==2&&(t.l+=2);var x={s:i,e:o,w:c,ixfe:u,flags:f};return(a.biff>=5||!a.biff)&&(x.level=f>>8&7),x}function O8(t,s){var a=Ge(12);a.write_shift(2,s),a.write_shift(2,s),a.write_shift(2,t.width*256),a.write_shift(2,0);var r=0;return t.hidden&&(r|=1),a.write_shift(1,r),r=t.level||0,a.write_shift(1,r),a.write_shift(2,0),a}function R8(t){for(var s=Ge(2*t),a=0;a<t;++a)s.write_shift(2,a+1);return s}function P8(t,s,a){var r=Ge(15);return lm(r,t,s),r.write_shift(8,a,"f"),r}function M8(t,s,a){var r=Ge(9);return lm(r,t,s),r.write_shift(2,a),r}var F8=(function(){var t={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},s=Mv({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function a(u,f){var x=[],h=Po(1);switch(f.type){case"base64":h=Gn(Xi(u));break;case"binary":h=Gn(u);break;case"buffer":case"array":h=u;break}mn(h,0);var p=h.read_shift(1),g=!!(p&136),y=!1,b=!1;switch(p){case 2:break;case 3:break;case 48:y=!0,g=!0;break;case 49:y=!0,g=!0;break;case 131:break;case 139:break;case 140:b=!0;break;case 245:break;default:throw new Error("DBF Unsupported Version: "+p.toString(16))}var N=0,S=521;p==2&&(N=h.read_shift(2)),h.l+=3,p!=2&&(N=h.read_shift(4)),N>1048576&&(N=1e6),p!=2&&(S=h.read_shift(2));var C=h.read_shift(2),k=f.codepage||1252;p!=2&&(h.l+=16,h.read_shift(1),h[h.l]!==0&&(k=t[h[h.l]]),h.l+=1,h.l+=2),b&&(h.l+=36);for(var A=[],G={},F=Math.min(h.length,p==2?521:S-10-(y?264:0)),E=b?32:11;h.l<F&&h[h.l]!=13;)switch(G={},G.name=mf.utils.decode(k,h.slice(h.l,h.l+E)).replace(/[\u0000\r\n].*$/g,""),h.l+=E,G.type=String.fromCharCode(h.read_shift(1)),p!=2&&!b&&(G.offset=h.read_shift(4)),G.len=h.read_shift(1),p==2&&(G.offset=h.read_shift(2)),G.dec=h.read_shift(1),G.name.length&&A.push(G),p!=2&&(h.l+=b?13:14),G.type){case"B":(!y||G.len!=8)&&f.WTF&&console.log("Skipping "+G.name+":"+G.type);break;case"G":case"P":f.WTF&&console.log("Skipping "+G.name+":"+G.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+G.type)}if(h[h.l]!==13&&(h.l=S-1),h.read_shift(1)!==13)throw new Error("DBF Terminator not found "+h.l+" "+h[h.l]);h.l=S;var T=0,_=0;for(x[0]=[],_=0;_!=A.length;++_)x[0][_]=A[_].name;for(;N-- >0;){if(h[h.l]===42){h.l+=C;continue}for(++h.l,x[++T]=[],_=0,_=0;_!=A.length;++_){var P=h.slice(h.l,h.l+A[_].len);h.l+=A[_].len,mn(P,0);var z=mf.utils.decode(k,P);switch(A[_].type){case"C":z.trim().length&&(x[T][_]=z.replace(/\s+$/,""));break;case"D":z.length===8?x[T][_]=new Date(+z.slice(0,4),+z.slice(4,6)-1,+z.slice(6,8)):x[T][_]=z;break;case"F":x[T][_]=parseFloat(z.trim());break;case"+":case"I":x[T][_]=b?P.read_shift(-4,"i")^2147483648:P.read_shift(4,"i");break;case"L":switch(z.trim().toUpperCase()){case"Y":case"T":x[T][_]=!0;break;case"N":case"F":x[T][_]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+z+"|")}break;case"M":if(!g)throw new Error("DBF Unexpected MEMO for type "+p.toString(16));x[T][_]="##MEMO##"+(b?parseInt(z.trim(),10):P.read_shift(4));break;case"N":z=z.replace(/\u0000/g,"").trim(),z&&z!="."&&(x[T][_]=+z||0);break;case"@":x[T][_]=new Date(P.read_shift(-8,"f")-621356832e5);break;case"T":x[T][_]=new Date((P.read_shift(4)-2440588)*864e5+P.read_shift(4));break;case"Y":x[T][_]=P.read_shift(4,"i")/1e4+P.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":x[T][_]=-P.read_shift(-8,"f");break;case"B":if(y&&A[_].len==8){x[T][_]=P.read_shift(8,"f");break}case"G":case"P":P.l+=A[_].len;break;case"0":if(A[_].name==="_NullFlags")break;default:throw new Error("DBF Unsupported data type "+A[_].type)}}}if(p!=2&&h.l<h.length&&h[h.l++]!=26)throw new Error("DBF EOF Marker missing "+(h.l-1)+" of "+h.length+" "+h[h.l-1].toString(16));return f&&f.sheetRows&&(x=x.slice(0,f.sheetRows)),f.DBF=A,x}function r(u,f){var x=f||{};x.dateNF||(x.dateNF="yyyymmdd");var h=cd(a(u,x),x);return h["!cols"]=x.DBF.map(function(p){return{wch:p.len,DBF:p}}),delete x.DBF,h}function i(u,f){try{return Lo(r(u,f),f)}catch(x){if(f&&f.WTF)throw x}return{SheetNames:[],Sheets:{}}}var o={B:8,C:250,L:1,D:8,"?":0,"":0};function c(u,f){var x=f||{};if(+x.codepage>=0&&Mu(+x.codepage),x.type=="string")throw new Error("Cannot write DBF to JS string");var h=Zr(),p=Cf(u,{header:1,raw:!0,cellDates:!0}),g=p[0],y=p.slice(1),b=u["!cols"]||[],N=0,S=0,C=0,k=1;for(N=0;N<g.length;++N){if(((b[N]||{}).DBF||{}).name){g[N]=b[N].DBF.name,++C;continue}if(g[N]!=null){if(++C,typeof g[N]=="number"&&(g[N]=g[N].toString(10)),typeof g[N]!="string")throw new Error("DBF Invalid column name "+g[N]+" |"+typeof g[N]+"|");if(g.indexOf(g[N])!==N){for(S=0;S<1024;++S)if(g.indexOf(g[N]+"_"+S)==-1){g[N]+="_"+S;break}}}}var A=ua(u["!ref"]),G=[],F=[],E=[];for(N=0;N<=A.e.c-A.s.c;++N){var T="",_="",P=0,z=[];for(S=0;S<y.length;++S)y[S][N]!=null&&z.push(y[S][N]);if(z.length==0||g[N]==null){G[N]="?";continue}for(S=0;S<z.length;++S){switch(typeof z[S]){case"number":_="B";break;case"string":_="C";break;case"boolean":_="L";break;case"object":_=z[S]instanceof Date?"D":"C";break;default:_="C"}P=Math.max(P,String(z[S]).length),T=T&&T!=_?"C":_}P>250&&(P=250),_=((b[N]||{}).DBF||{}).type,_=="C"&&b[N].DBF.len>P&&(P=b[N].DBF.len),T=="B"&&_=="N"&&(T="N",E[N]=b[N].DBF.dec,P=b[N].DBF.len),F[N]=T=="C"||_=="N"?P:o[T]||0,k+=F[N],G[N]=T}var V=h.next(32);for(V.write_shift(4,318902576),V.write_shift(4,y.length),V.write_shift(2,296+32*C),V.write_shift(2,k),N=0;N<4;++N)V.write_shift(4,0);for(V.write_shift(4,0|(+s[yC]||3)<<8),N=0,S=0;N<g.length;++N)if(g[N]!=null){var W=h.next(32),q=(g[N].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);W.write_shift(1,q,"sbcs"),W.write_shift(1,G[N]=="?"?"C":G[N],"sbcs"),W.write_shift(4,S),W.write_shift(1,F[N]||o[G[N]]||0),W.write_shift(1,E[N]||0),W.write_shift(1,2),W.write_shift(4,0),W.write_shift(1,0),W.write_shift(4,0),W.write_shift(4,0),S+=F[N]||o[G[N]]||0}var B=h.next(264);for(B.write_shift(4,13),N=0;N<65;++N)B.write_shift(4,0);for(N=0;N<y.length;++N){var ae=h.next(k);for(ae.write_shift(1,0),S=0;S<g.length;++S)if(g[S]!=null)switch(G[S]){case"L":ae.write_shift(1,y[N][S]==null?63:y[N][S]?84:70);break;case"B":ae.write_shift(8,y[N][S]||0,"f");break;case"N":var U="0";for(typeof y[N][S]=="number"&&(U=y[N][S].toFixed(E[S]||0)),C=0;C<F[S]-U.length;++C)ae.write_shift(1,32);ae.write_shift(1,U,"sbcs");break;case"D":y[N][S]?(ae.write_shift(4,("0000"+y[N][S].getFullYear()).slice(-4),"sbcs"),ae.write_shift(2,("00"+(y[N][S].getMonth()+1)).slice(-2),"sbcs"),ae.write_shift(2,("00"+y[N][S].getDate()).slice(-2),"sbcs")):ae.write_shift(8,"00000000","sbcs");break;case"C":var Z=String(y[N][S]!=null?y[N][S]:"").slice(0,F[S]);for(ae.write_shift(1,Z,"sbcs"),C=0;C<F[S]-Z.length;++C)ae.write_shift(1,32);break}}return h.next(1).write_shift(1,26),h.end()}return{to_workbook:i,to_sheet:r,from_sheet:c}})(),L8=(function(){var t={AA:"",BA:"",CA:"",DA:195,HA:"",JA:197,AE:"",BE:"",CE:"",HE:"",AI:"",BI:"",CI:"",HI:"",AO:"",BO:"",CO:"",DO:213,HO:"",AU:"",BU:"",CU:"",HU:"",Aa:"",Ba:"",Ca:"",Da:227,Ha:"",Ja:229,Ae:"",Be:"",Ce:"",He:"",Ai:"",Bi:"",Ci:"",Hi:"",Ao:"",Bo:"",Co:"",Do:245,Ho:"",Au:"",Bu:"",Cu:"",Hu:"",KC:"",Kc:"",q:"",z:"",a:"",j:"",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},s=new RegExp("\x1BN("+yr(t).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),a=function(g,y){var b=t[y];return typeof b=="number"?lw(b):b},r=function(g,y,b){var N=y.charCodeAt(0)-32<<4|b.charCodeAt(0)-48;return N==59?g:lw(N)};t["|"]=254;function i(g,y){switch(y.type){case"base64":return o(Xi(g),y);case"binary":return o(g,y);case"buffer":return o(Ls&&Buffer.isBuffer(g)?g.toString("binary"):sm(g),y);case"array":return o(Xf(g),y)}throw new Error("Unrecognized type "+y.type)}function o(g,y){var b=g.split(/[\n\r]+/),N=-1,S=-1,C=0,k=0,A=[],G=[],F=null,E={},T=[],_=[],P=[],z=0,V;for(+y.codepage>=0&&Mu(+y.codepage);C!==b.length;++C){z=0;var W=b[C].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,r).replace(s,a),q=W.replace(/;;/g,"\0").split(";").map(function(J){return J.replace(/\u0000/g,";")}),B=q[0],ae;if(W.length>0)switch(B){case"ID":break;case"E":break;case"B":break;case"O":break;case"W":break;case"P":q[1].charAt(0)=="P"&&G.push(W.slice(3).replace(/;;/g,";"));break;case"C":var U=!1,Z=!1,de=!1,H=!1,se=-1,ee=-1;for(k=1;k<q.length;++k)switch(q[k].charAt(0)){case"A":break;case"X":S=parseInt(q[k].slice(1))-1,Z=!0;break;case"Y":for(N=parseInt(q[k].slice(1))-1,Z||(S=0),V=A.length;V<=N;++V)A[V]=[];break;case"K":ae=q[k].slice(1),ae.charAt(0)==='"'?ae=ae.slice(1,ae.length-1):ae==="TRUE"?ae=!0:ae==="FALSE"?ae=!1:isNaN(qi(ae))?isNaN(Lu(ae).getDate())||(ae=Lr(ae)):(ae=qi(ae),F!==null&&OC(F)&&(ae=FC(ae))),U=!0;break;case"E":H=!0;var L=MF(q[k].slice(1),{r:N,c:S});A[N][S]=[A[N][S],L];break;case"S":de=!0,A[N][S]=[A[N][S],"S5S"];break;case"G":break;case"R":se=parseInt(q[k].slice(1))-1;break;case"C":ee=parseInt(q[k].slice(1))-1;break;default:if(y&&y.WTF)throw new Error("SYLK bad record "+W)}if(U&&(A[N][S]&&A[N][S].length==2?A[N][S][0]=ae:A[N][S]=ae,F=null),de){if(H)throw new Error("SYLK shared formula cannot have own formula");var X=se>-1&&A[se][ee];if(!X||!X[1])throw new Error("SYLK shared formula cannot find base");A[N][S][1]=FF(X[1],{r:N-se,c:S-ee})}break;case"F":var O=0;for(k=1;k<q.length;++k)switch(q[k].charAt(0)){case"X":S=parseInt(q[k].slice(1))-1,++O;break;case"Y":for(N=parseInt(q[k].slice(1))-1,V=A.length;V<=N;++V)A[V]=[];break;case"M":z=parseInt(q[k].slice(1))/20;break;case"F":break;case"G":break;case"P":F=G[parseInt(q[k].slice(1))];break;case"S":break;case"D":break;case"N":break;case"W":for(P=q[k].slice(1).split(" "),V=parseInt(P[0],10);V<=parseInt(P[1],10);++V)z=parseInt(P[2],10),_[V-1]=z===0?{hidden:!0}:{wch:z},qv(_[V-1]);break;case"C":S=parseInt(q[k].slice(1))-1,_[S]||(_[S]={});break;case"R":N=parseInt(q[k].slice(1))-1,T[N]||(T[N]={}),z>0?(T[N].hpt=z,T[N].hpx=wT(z)):z===0&&(T[N].hidden=!0);break;default:if(y&&y.WTF)throw new Error("SYLK bad record "+W)}O<1&&(F=null);break;default:if(y&&y.WTF)throw new Error("SYLK bad record "+W)}}return T.length>0&&(E["!rows"]=T),_.length>0&&(E["!cols"]=_),y&&y.sheetRows&&(A=A.slice(0,y.sheetRows)),[A,E]}function c(g,y){var b=i(g,y),N=b[0],S=b[1],C=cd(N,y);return yr(S).forEach(function(k){C[k]=S[k]}),C}function u(g,y){return Lo(c(g,y),y)}function f(g,y,b,N){var S="C;Y"+(b+1)+";X"+(N+1)+";K";switch(g.t){case"n":S+=g.v||0,g.f&&!g.F&&(S+=";E"+Yv(g.f,{r:b,c:N}));break;case"b":S+=g.v?"TRUE":"FALSE";break;case"e":S+=g.w||g.v;break;case"d":S+='"'+(g.w||g.v)+'"';break;case"s":S+='"'+g.v.replace(/"/g,"").replace(/;/g,";;")+'"';break}return S}function x(g,y){y.forEach(function(b,N){var S="F;W"+(N+1)+" "+(N+1)+" ";b.hidden?S+="0":(typeof b.width=="number"&&!b.wpx&&(b.wpx=Nf(b.width)),typeof b.wpx=="number"&&!b.wch&&(b.wch=bf(b.wpx)),typeof b.wch=="number"&&(S+=Math.round(b.wch))),S.charAt(S.length-1)!=" "&&g.push(S)})}function h(g,y){y.forEach(function(b,N){var S="F;";b.hidden?S+="M0;":b.hpt?S+="M"+20*b.hpt+";":b.hpx&&(S+="M"+20*wf(b.hpx)+";"),S.length>2&&g.push(S+"R"+(N+1))})}function p(g,y){var b=["ID;PWXL;N;E"],N=[],S=ua(g["!ref"]),C,k=Array.isArray(g),A=`\r
`;b.push("P;PGeneral"),b.push("F;P0;DG0G8;M255"),g["!cols"]&&x(b,g["!cols"]),g["!rows"]&&h(b,g["!rows"]),b.push("B;Y"+(S.e.r-S.s.r+1)+";X"+(S.e.c-S.s.c+1)+";D"+[S.s.c,S.s.r,S.e.c,S.e.r].join(" "));for(var G=S.s.r;G<=S.e.r;++G)for(var F=S.s.c;F<=S.e.c;++F){var E=Ys({r:G,c:F});C=k?(g[G]||[])[F]:g[E],!(!C||C.v==null&&(!C.f||C.F))&&N.push(f(C,g,G,F))}return b.join(A)+A+N.join(A)+A+"E"+A}return{to_workbook:u,to_sheet:c,from_sheet:p}})(),I8=(function(){function t(o,c){switch(c.type){case"base64":return s(Xi(o),c);case"binary":return s(o,c);case"buffer":return s(Ls&&Buffer.isBuffer(o)?o.toString("binary"):sm(o),c);case"array":return s(Xf(o),c)}throw new Error("Unrecognized type "+c.type)}function s(o,c){for(var u=o.split(`
`),f=-1,x=-1,h=0,p=[];h!==u.length;++h){if(u[h].trim()==="BOT"){p[++f]=[],x=0;continue}if(!(f<0)){var g=u[h].trim().split(","),y=g[0],b=g[1];++h;for(var N=u[h]||"";(N.match(/["]/g)||[]).length&1&&h<u.length-1;)N+=`
`+u[++h];switch(N=N.trim(),+y){case-1:if(N==="BOT"){p[++f]=[],x=0;continue}else if(N!=="EOD")throw new Error("Unrecognized DIF special command "+N);break;case 0:N==="TRUE"?p[f][x]=!0:N==="FALSE"?p[f][x]=!1:isNaN(qi(b))?isNaN(Lu(b).getDate())?p[f][x]=b:p[f][x]=Lr(b):p[f][x]=qi(b),++x;break;case 1:N=N.slice(1,N.length-1),N=N.replace(/""/g,'"'),N&&N.match(/^=".*"$/)&&(N=N.slice(2,-1)),p[f][x++]=N!==""?N:null;break}if(N==="EOD")break}}return c&&c.sheetRows&&(p=p.slice(0,c.sheetRows)),p}function a(o,c){return cd(t(o,c),c)}function r(o,c){return Lo(a(o,c),c)}var i=(function(){var o=function(f,x,h,p,g){f.push(x),f.push(h+","+p),f.push('"'+g.replace(/"/g,'""')+'"')},c=function(f,x,h,p){f.push(x+","+h),f.push(x==1?'"'+p.replace(/"/g,'""')+'"':p)};return function(f){var x=[],h=ua(f["!ref"]),p,g=Array.isArray(f);o(x,"TABLE",0,1,"sheetjs"),o(x,"VECTORS",0,h.e.r-h.s.r+1,""),o(x,"TUPLES",0,h.e.c-h.s.c+1,""),o(x,"DATA",0,0,"");for(var y=h.s.r;y<=h.e.r;++y){c(x,-1,0,"BOT");for(var b=h.s.c;b<=h.e.c;++b){var N=Ys({r:y,c:b});if(p=g?(f[y]||[])[b]:f[N],!p){c(x,1,0,"");continue}switch(p.t){case"n":var S=p.w;!S&&p.v!=null&&(S=p.v),S==null?p.f&&!p.F?c(x,1,0,"="+p.f):c(x,1,0,""):c(x,0,S,"V");break;case"b":c(x,0,p.v?1:0,p.v?"TRUE":"FALSE");break;case"s":c(x,1,0,isNaN(p.v)?p.v:'="'+p.v+'"');break;case"d":p.w||(p.w=Fl(p.z||Da[14],Jr(Lr(p.v)))),c(x,0,p.w,"V");break;default:c(x,1,0,"")}}}c(x,-1,0,"EOD");var C=`\r
`,k=x.join(C);return k}})();return{to_workbook:r,to_sheet:a,from_sheet:i}})(),jT=(function(){function t(p){return p.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,`
`)}function s(p){return p.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function a(p,g){for(var y=p.split(`
`),b=-1,N=-1,S=0,C=[];S!==y.length;++S){var k=y[S].trim().split(":");if(k[0]==="cell"){var A=ar(k[1]);if(C.length<=A.r)for(b=C.length;b<=A.r;++b)C[b]||(C[b]=[]);switch(b=A.r,N=A.c,k[2]){case"t":C[b][N]=t(k[3]);break;case"v":C[b][N]=+k[3];break;case"vtf":var G=k[k.length-1];case"vtc":switch(k[3]){case"nl":C[b][N]=!!+k[4];break;default:C[b][N]=+k[4];break}k[2]=="vtf"&&(C[b][N]=[C[b][N],G])}}}return g&&g.sheetRows&&(C=C.slice(0,g.sheetRows)),C}function r(p,g){return cd(a(p,g),g)}function i(p,g){return Lo(r(p,g),g)}var o=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join(`
`),c=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join(`
`)+`
`,u=["# SocialCalc Spreadsheet Control Save","part:sheet"].join(`
`),f="--SocialCalcSpreadsheetControlSave--";function x(p){if(!p||!p["!ref"])return"";for(var g=[],y=[],b,N="",S=xn(p["!ref"]),C=Array.isArray(p),k=S.s.r;k<=S.e.r;++k)for(var A=S.s.c;A<=S.e.c;++A)if(N=Ys({r:k,c:A}),b=C?(p[k]||[])[A]:p[N],!(!b||b.v==null||b.t==="z")){switch(y=["cell",N,"t"],b.t){case"s":case"str":y.push(s(b.v));break;case"n":b.f?(y[2]="vtf",y[3]="n",y[4]=b.v,y[5]=s(b.f)):(y[2]="v",y[3]=b.v);break;case"b":y[2]="vt"+(b.f?"f":"c"),y[3]="nl",y[4]=b.v?"1":"0",y[5]=s(b.f||(b.v?"TRUE":"FALSE"));break;case"d":var G=Jr(Lr(b.v));y[2]="vtc",y[3]="nd",y[4]=""+G,y[5]=b.w||Fl(b.z||Da[14],G);break;case"e":continue}g.push(y.join(":"))}return g.push("sheet:c:"+(S.e.c-S.s.c+1)+":r:"+(S.e.r-S.s.r+1)+":tvf:1"),g.push("valueformat:1:text-wiki"),g.join(`
`)}function h(p){return[o,c,u,c,x(p),f].join(`
`)}return{to_workbook:i,to_sheet:r,from_sheet:h}})(),B8=(function(){function t(h,p,g,y,b){b.raw?p[g][y]=h:h===""||(h==="TRUE"?p[g][y]=!0:h==="FALSE"?p[g][y]=!1:isNaN(qi(h))?isNaN(Lu(h).getDate())?p[g][y]=h:p[g][y]=Lr(h):p[g][y]=qi(h))}function s(h,p){var g=p||{},y=[];if(!h||h.length===0)return y;for(var b=h.split(/[\r\n]/),N=b.length-1;N>=0&&b[N].length===0;)--N;for(var S=10,C=0,k=0;k<=N;++k)C=b[k].indexOf(" "),C==-1?C=b[k].length:C++,S=Math.max(S,C);for(k=0;k<=N;++k){y[k]=[];var A=0;for(t(b[k].slice(0,S).trim(),y,k,A,g),A=1;A<=(b[k].length-S)/10+1;++A)t(b[k].slice(S+(A-1)*10,S+A*10).trim(),y,k,A,g)}return g.sheetRows&&(y=y.slice(0,g.sheetRows)),y}var a={44:",",9:"	",59:";",124:"|"},r={44:3,9:2,59:1,124:0};function i(h){for(var p={},g=!1,y=0,b=0;y<h.length;++y)(b=h.charCodeAt(y))==34?g=!g:!g&&b in a&&(p[b]=(p[b]||0)+1);b=[];for(y in p)Object.prototype.hasOwnProperty.call(p,y)&&b.push([p[y],y]);if(!b.length){p=r;for(y in p)Object.prototype.hasOwnProperty.call(p,y)&&b.push([p[y],y])}return b.sort(function(N,S){return N[0]-S[0]||r[N[1]]-r[S[1]]}),a[b.pop()[1]]||44}function o(h,p){var g=p||{},y="",b=g.dense?[]:{},N={s:{c:0,r:0},e:{c:0,r:0}};h.slice(0,4)=="sep="?h.charCodeAt(5)==13&&h.charCodeAt(6)==10?(y=h.charAt(4),h=h.slice(7)):h.charCodeAt(5)==13||h.charCodeAt(5)==10?(y=h.charAt(4),h=h.slice(6)):y=i(h.slice(0,1024)):g&&g.FS?y=g.FS:y=i(h.slice(0,1024));var S=0,C=0,k=0,A=0,G=0,F=y.charCodeAt(0),E=!1,T=0,_=h.charCodeAt(0);h=h.replace(/\r\n/mg,`
`);var P=g.dateNF!=null?tM(g.dateNF):null;function z(){var V=h.slice(A,G),W={};if(V.charAt(0)=='"'&&V.charAt(V.length-1)=='"'&&(V=V.slice(1,-1).replace(/""/g,'"')),V.length===0)W.t="z";else if(g.raw)W.t="s",W.v=V;else if(V.trim().length===0)W.t="s",W.v=V;else if(V.charCodeAt(0)==61)V.charCodeAt(1)==34&&V.charCodeAt(V.length-1)==34?(W.t="s",W.v=V.slice(2,-1).replace(/""/g,'"')):LF(V)?(W.t="n",W.f=V.slice(1)):(W.t="s",W.v=V);else if(V=="TRUE")W.t="b",W.v=!0;else if(V=="FALSE")W.t="b",W.v=!1;else if(!isNaN(k=qi(V)))W.t="n",g.cellText!==!1&&(W.w=V),W.v=k;else if(!isNaN(Lu(V).getDate())||P&&V.match(P)){W.z=g.dateNF||Da[14];var q=0;P&&V.match(P)&&(V=sM(V,g.dateNF,V.match(P)||[]),q=1),g.cellDates?(W.t="d",W.v=Lr(V,q)):(W.t="n",W.v=Jr(Lr(V,q))),g.cellText!==!1&&(W.w=Fl(W.z,W.v instanceof Date?Jr(W.v):W.v)),g.cellNF||delete W.z}else W.t="s",W.v=V;if(W.t=="z"||(g.dense?(b[S]||(b[S]=[]),b[S][C]=W):b[Ys({c:C,r:S})]=W),A=G+1,_=h.charCodeAt(A),N.e.c<C&&(N.e.c=C),N.e.r<S&&(N.e.r=S),T==F)++C;else if(C=0,++S,g.sheetRows&&g.sheetRows<=S)return!0}e:for(;G<h.length;++G)switch(T=h.charCodeAt(G)){case 34:_===34&&(E=!E);break;case F:case 10:case 13:if(!E&&z())break e;break}return G-A>0&&z(),b["!ref"]=Ga(N),b}function c(h,p){return!(p&&p.PRN)||p.FS||h.slice(0,4)=="sep="||h.indexOf("	")>=0||h.indexOf(",")>=0||h.indexOf(";")>=0?o(h,p):cd(s(h,p),p)}function u(h,p){var g="",y=p.type=="string"?[0,0,0,0]:Q7(h,p);switch(p.type){case"base64":g=Xi(h);break;case"binary":g=h;break;case"buffer":p.codepage==65001?g=h.toString("utf8"):p.codepage&&typeof mf<"u"||(g=Ls&&Buffer.isBuffer(h)?h.toString("binary"):sm(h));break;case"array":g=Xf(h);break;case"string":g=h;break;default:throw new Error("Unrecognized type "+p.type)}return y[0]==239&&y[1]==187&&y[2]==191?g=Nu(g.slice(3)):p.type!="string"&&p.type!="buffer"&&p.codepage==65001?g=Nu(g):p.type=="binary"&&typeof mf<"u",g.slice(0,19)=="socialcalc:version:"?jT.to_sheet(p.type=="string"?g:Nu(g),p):c(g,p)}function f(h,p){return Lo(u(h,p),p)}function x(h){for(var p=[],g=ua(h["!ref"]),y,b=Array.isArray(h),N=g.s.r;N<=g.e.r;++N){for(var S=[],C=g.s.c;C<=g.e.c;++C){var k=Ys({r:N,c:C});if(y=b?(h[N]||[])[C]:h[k],!y||y.v==null){S.push("          ");continue}for(var A=(y.w||(Qi(y),y.w)||"").slice(0,10);A.length<10;)A+=" ";S.push(A+(C===0?" ":""))}p.push(S.join(""))}return p.join(`
`)}return{to_workbook:f,to_sheet:u,from_sheet:x}})(),Iw=(function(){function t(L,X,O){if(L){mn(L,L.l||0);for(var J=O.Enum||se;L.l<L.length;){var ie=L.read_shift(2),be=J[ie]||J[65535],Le=L.read_shift(2),ve=L.l+Le,oe=be.f&&be.f(L,Le,O);if(L.l=ve,X(oe,be,ie))return}}}function s(L,X){switch(X.type){case"base64":return a(Gn(Xi(L)),X);case"binary":return a(Gn(L),X);case"buffer":case"array":return a(L,X)}throw"Unsupported type "+X.type}function a(L,X){if(!L)return L;var O=X||{},J=O.dense?[]:{},ie="Sheet1",be="",Le=0,ve={},oe=[],Pe=[],Xe={s:{r:0,c:0},e:{r:0,c:0}},yt=O.sheetRows||0;if(L[2]==0&&(L[3]==8||L[3]==9)&&L.length>=16&&L[14]==5&&L[15]===108)throw new Error("Unsupported Works 3 for Mac file");if(L[2]==2)O.Enum=se,t(L,function(lt,ms,is){switch(is){case 0:O.vers=lt,lt>=4096&&(O.qpro=!0);break;case 6:Xe=lt;break;case 204:lt&&(be=lt);break;case 222:be=lt;break;case 15:case 51:O.qpro||(lt[1].v=lt[1].v.slice(1));case 13:case 14:case 16:is==14&&(lt[2]&112)==112&&(lt[2]&15)>1&&(lt[2]&15)<15&&(lt[1].z=O.dateNF||Da[14],O.cellDates&&(lt[1].t="d",lt[1].v=FC(lt[1].v))),O.qpro&&lt[3]>Le&&(J["!ref"]=Ga(Xe),ve[ie]=J,oe.push(ie),J=O.dense?[]:{},Xe={s:{r:0,c:0},e:{r:0,c:0}},Le=lt[3],ie=be||"Sheet"+(Le+1),be="");var Ms=O.dense?(J[lt[0].r]||[])[lt[0].c]:J[Ys(lt[0])];if(Ms){Ms.t=lt[1].t,Ms.v=lt[1].v,lt[1].z!=null&&(Ms.z=lt[1].z),lt[1].f!=null&&(Ms.f=lt[1].f);break}O.dense?(J[lt[0].r]||(J[lt[0].r]=[]),J[lt[0].r][lt[0].c]=lt[1]):J[Ys(lt[0])]=lt[1];break}},O);else if(L[2]==26||L[2]==14)O.Enum=ee,L[2]==14&&(O.qpro=!0,L.l=0),t(L,function(lt,ms,is){switch(is){case 204:ie=lt;break;case 22:lt[1].v=lt[1].v.slice(1);case 23:case 24:case 25:case 37:case 39:case 40:if(lt[3]>Le&&(J["!ref"]=Ga(Xe),ve[ie]=J,oe.push(ie),J=O.dense?[]:{},Xe={s:{r:0,c:0},e:{r:0,c:0}},Le=lt[3],ie="Sheet"+(Le+1)),yt>0&&lt[0].r>=yt)break;O.dense?(J[lt[0].r]||(J[lt[0].r]=[]),J[lt[0].r][lt[0].c]=lt[1]):J[Ys(lt[0])]=lt[1],Xe.e.c<lt[0].c&&(Xe.e.c=lt[0].c),Xe.e.r<lt[0].r&&(Xe.e.r=lt[0].r);break;case 27:lt[14e3]&&(Pe[lt[14e3][0]]=lt[14e3][1]);break;case 1537:Pe[lt[0]]=lt[1],lt[0]==Le&&(ie=lt[1]);break}},O);else throw new Error("Unrecognized LOTUS BOF "+L[2]);if(J["!ref"]=Ga(Xe),ve[be||ie]=J,oe.push(be||ie),!Pe.length)return{SheetNames:oe,Sheets:ve};for(var vt={},gt=[],bt=0;bt<Pe.length;++bt)ve[oe[bt]]?(gt.push(Pe[bt]||oe[bt]),vt[Pe[bt]]=ve[Pe[bt]]||ve[oe[bt]]):(gt.push(Pe[bt]),vt[Pe[bt]]={"!ref":"A1"});return{SheetNames:gt,Sheets:vt}}function r(L,X){var O=X||{};if(+O.codepage>=0&&Mu(+O.codepage),O.type=="string")throw new Error("Cannot write WK1 to JS string");var J=Zr(),ie=ua(L["!ref"]),be=Array.isArray(L),Le=[];mt(J,0,o(1030)),mt(J,6,f(ie));for(var ve=Math.min(ie.e.r,8191),oe=ie.s.r;oe<=ve;++oe)for(var Pe=vr(oe),Xe=ie.s.c;Xe<=ie.e.c;++Xe){oe===ie.s.r&&(Le[Xe]=Ar(Xe));var yt=Le[Xe]+Pe,vt=be?(L[oe]||[])[Xe]:L[yt];if(!(!vt||vt.t=="z"))if(vt.t=="n")(vt.v|0)==vt.v&&vt.v>=-32768&&vt.v<=32767?mt(J,13,y(oe,Xe,vt.v)):mt(J,14,N(oe,Xe,vt.v));else{var gt=Qi(vt);mt(J,15,p(oe,Xe,gt.slice(0,239)))}}return mt(J,1),J.end()}function i(L,X){var O=X||{};if(+O.codepage>=0&&Mu(+O.codepage),O.type=="string")throw new Error("Cannot write WK3 to JS string");var J=Zr();mt(J,0,c(L));for(var ie=0,be=0;ie<L.SheetNames.length;++ie)(L.Sheets[L.SheetNames[ie]]||{})["!ref"]&&mt(J,27,H(L.SheetNames[ie],be++));var Le=0;for(ie=0;ie<L.SheetNames.length;++ie){var ve=L.Sheets[L.SheetNames[ie]];if(!(!ve||!ve["!ref"])){for(var oe=ua(ve["!ref"]),Pe=Array.isArray(ve),Xe=[],yt=Math.min(oe.e.r,8191),vt=oe.s.r;vt<=yt;++vt)for(var gt=vr(vt),bt=oe.s.c;bt<=oe.e.c;++bt){vt===oe.s.r&&(Xe[bt]=Ar(bt));var lt=Xe[bt]+gt,ms=Pe?(ve[vt]||[])[bt]:ve[lt];if(!(!ms||ms.t=="z"))if(ms.t=="n")mt(J,23,z(vt,bt,Le,ms.v));else{var is=Qi(ms);mt(J,22,T(vt,bt,Le,is.slice(0,239)))}}++Le}}return mt(J,1),J.end()}function o(L){var X=Ge(2);return X.write_shift(2,L),X}function c(L){var X=Ge(26);X.write_shift(2,4096),X.write_shift(2,4),X.write_shift(4,0);for(var O=0,J=0,ie=0,be=0;be<L.SheetNames.length;++be){var Le=L.SheetNames[be],ve=L.Sheets[Le];if(!(!ve||!ve["!ref"])){++ie;var oe=xn(ve["!ref"]);O<oe.e.r&&(O=oe.e.r),J<oe.e.c&&(J=oe.e.c)}}return O>8191&&(O=8191),X.write_shift(2,O),X.write_shift(1,ie),X.write_shift(1,J),X.write_shift(2,0),X.write_shift(2,0),X.write_shift(1,1),X.write_shift(1,2),X.write_shift(4,0),X.write_shift(4,0),X}function u(L,X,O){var J={s:{c:0,r:0},e:{c:0,r:0}};return X==8&&O.qpro?(J.s.c=L.read_shift(1),L.l++,J.s.r=L.read_shift(2),J.e.c=L.read_shift(1),L.l++,J.e.r=L.read_shift(2),J):(J.s.c=L.read_shift(2),J.s.r=L.read_shift(2),X==12&&O.qpro&&(L.l+=2),J.e.c=L.read_shift(2),J.e.r=L.read_shift(2),X==12&&O.qpro&&(L.l+=2),J.s.c==65535&&(J.s.c=J.e.c=J.s.r=J.e.r=0),J)}function f(L){var X=Ge(8);return X.write_shift(2,L.s.c),X.write_shift(2,L.s.r),X.write_shift(2,L.e.c),X.write_shift(2,L.e.r),X}function x(L,X,O){var J=[{c:0,r:0},{t:"n",v:0},0,0];return O.qpro&&O.vers!=20768?(J[0].c=L.read_shift(1),J[3]=L.read_shift(1),J[0].r=L.read_shift(2),L.l+=2):(J[2]=L.read_shift(1),J[0].c=L.read_shift(2),J[0].r=L.read_shift(2)),J}function h(L,X,O){var J=L.l+X,ie=x(L,X,O);if(ie[1].t="s",O.vers==20768){L.l++;var be=L.read_shift(1);return ie[1].v=L.read_shift(be,"utf8"),ie}return O.qpro&&L.l++,ie[1].v=L.read_shift(J-L.l,"cstr"),ie}function p(L,X,O){var J=Ge(7+O.length);J.write_shift(1,255),J.write_shift(2,X),J.write_shift(2,L),J.write_shift(1,39);for(var ie=0;ie<J.length;++ie){var be=O.charCodeAt(ie);J.write_shift(1,be>=128?95:be)}return J.write_shift(1,0),J}function g(L,X,O){var J=x(L,X,O);return J[1].v=L.read_shift(2,"i"),J}function y(L,X,O){var J=Ge(7);return J.write_shift(1,255),J.write_shift(2,X),J.write_shift(2,L),J.write_shift(2,O,"i"),J}function b(L,X,O){var J=x(L,X,O);return J[1].v=L.read_shift(8,"f"),J}function N(L,X,O){var J=Ge(13);return J.write_shift(1,255),J.write_shift(2,X),J.write_shift(2,L),J.write_shift(8,O,"f"),J}function S(L,X,O){var J=L.l+X,ie=x(L,X,O);if(ie[1].v=L.read_shift(8,"f"),O.qpro)L.l=J;else{var be=L.read_shift(2);G(L.slice(L.l,L.l+be),ie),L.l+=be}return ie}function C(L,X,O){var J=X&32768;return X&=-32769,X=(J?L:0)+(X>=8192?X-16384:X),(J?"":"$")+(O?Ar(X):vr(X))}var k={51:["FALSE",0],52:["TRUE",0],70:["LEN",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],111:["T",1]},A=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function G(L,X){mn(L,0);for(var O=[],J=0,ie="",be="",Le="",ve="";L.l<L.length;){var oe=L[L.l++];switch(oe){case 0:O.push(L.read_shift(8,"f"));break;case 1:be=C(X[0].c,L.read_shift(2),!0),ie=C(X[0].r,L.read_shift(2),!1),O.push(be+ie);break;case 2:{var Pe=C(X[0].c,L.read_shift(2),!0),Xe=C(X[0].r,L.read_shift(2),!1);be=C(X[0].c,L.read_shift(2),!0),ie=C(X[0].r,L.read_shift(2),!1),O.push(Pe+Xe+":"+be+ie)}break;case 3:if(L.l<L.length){console.error("WK1 premature formula end");return}break;case 4:O.push("("+O.pop()+")");break;case 5:O.push(L.read_shift(2));break;case 6:{for(var yt="";oe=L[L.l++];)yt+=String.fromCharCode(oe);O.push('"'+yt.replace(/"/g,'""')+'"')}break;case 8:O.push("-"+O.pop());break;case 23:O.push("+"+O.pop());break;case 22:O.push("NOT("+O.pop()+")");break;case 20:case 21:ve=O.pop(),Le=O.pop(),O.push(["AND","OR"][oe-20]+"("+Le+","+ve+")");break;default:if(oe<32&&A[oe])ve=O.pop(),Le=O.pop(),O.push(Le+A[oe]+ve);else if(k[oe]){if(J=k[oe][1],J==69&&(J=L[L.l++]),J>O.length){console.error("WK1 bad formula parse 0x"+oe.toString(16)+":|"+O.join("|")+"|");return}var vt=O.slice(-J);O.length-=J,O.push(k[oe][0]+"("+vt.join(",")+")")}else return oe<=7?console.error("WK1 invalid opcode "+oe.toString(16)):oe<=24?console.error("WK1 unsupported op "+oe.toString(16)):oe<=30?console.error("WK1 invalid opcode "+oe.toString(16)):oe<=115?console.error("WK1 unsupported function opcode "+oe.toString(16)):console.error("WK1 unrecognized opcode "+oe.toString(16))}}O.length==1?X[1].f=""+O[0]:console.error("WK1 bad formula parse |"+O.join("|")+"|")}function F(L){var X=[{c:0,r:0},{t:"n",v:0},0];return X[0].r=L.read_shift(2),X[3]=L[L.l++],X[0].c=L[L.l++],X}function E(L,X){var O=F(L);return O[1].t="s",O[1].v=L.read_shift(X-4,"cstr"),O}function T(L,X,O,J){var ie=Ge(6+J.length);ie.write_shift(2,L),ie.write_shift(1,O),ie.write_shift(1,X),ie.write_shift(1,39);for(var be=0;be<J.length;++be){var Le=J.charCodeAt(be);ie.write_shift(1,Le>=128?95:Le)}return ie.write_shift(1,0),ie}function _(L,X){var O=F(L);O[1].v=L.read_shift(2);var J=O[1].v>>1;if(O[1].v&1)switch(J&7){case 0:J=(J>>3)*5e3;break;case 1:J=(J>>3)*500;break;case 2:J=(J>>3)/20;break;case 3:J=(J>>3)/200;break;case 4:J=(J>>3)/2e3;break;case 5:J=(J>>3)/2e4;break;case 6:J=(J>>3)/16;break;case 7:J=(J>>3)/64;break}return O[1].v=J,O}function P(L,X){var O=F(L),J=L.read_shift(4),ie=L.read_shift(4),be=L.read_shift(2);if(be==65535)return J===0&&ie===3221225472?(O[1].t="e",O[1].v=15):J===0&&ie===3489660928?(O[1].t="e",O[1].v=42):O[1].v=0,O;var Le=be&32768;return be=(be&32767)-16446,O[1].v=(1-Le*2)*(ie*Math.pow(2,be+32)+J*Math.pow(2,be)),O}function z(L,X,O,J){var ie=Ge(14);if(ie.write_shift(2,L),ie.write_shift(1,O),ie.write_shift(1,X),J==0)return ie.write_shift(4,0),ie.write_shift(4,0),ie.write_shift(2,65535),ie;var be=0,Le=0,ve=0,oe=0;return J<0&&(be=1,J=-J),Le=Math.log2(J)|0,J/=Math.pow(2,Le-31),oe=J>>>0,(oe&2147483648)==0&&(J/=2,++Le,oe=J>>>0),J-=oe,oe|=2147483648,oe>>>=0,J*=Math.pow(2,32),ve=J>>>0,ie.write_shift(4,ve),ie.write_shift(4,oe),Le+=16383+(be?32768:0),ie.write_shift(2,Le),ie}function V(L,X){var O=P(L);return L.l+=X-14,O}function W(L,X){var O=F(L),J=L.read_shift(4);return O[1].v=J>>6,O}function q(L,X){var O=F(L),J=L.read_shift(8,"f");return O[1].v=J,O}function B(L,X){var O=q(L);return L.l+=X-10,O}function ae(L,X){return L[L.l+X-1]==0?L.read_shift(X,"cstr"):""}function U(L,X){var O=L[L.l++];O>X-1&&(O=X-1);for(var J="";J.length<O;)J+=String.fromCharCode(L[L.l++]);return J}function Z(L,X,O){if(!(!O.qpro||X<21)){var J=L.read_shift(1);L.l+=17,L.l+=1,L.l+=2;var ie=L.read_shift(X-21,"cstr");return[J,ie]}}function de(L,X){for(var O={},J=L.l+X;L.l<J;){var ie=L.read_shift(2);if(ie==14e3){for(O[ie]=[0,""],O[ie][0]=L.read_shift(2);L[L.l];)O[ie][1]+=String.fromCharCode(L[L.l]),L.l++;L.l++}}return O}function H(L,X){var O=Ge(5+L.length);O.write_shift(2,14e3),O.write_shift(2,X);for(var J=0;J<L.length;++J){var ie=L.charCodeAt(J);O[O.l++]=ie>127?95:ie}return O[O.l++]=0,O}var se={0:{n:"BOF",f:fT},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:u},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f:g},14:{n:"NUMBER",f:b},15:{n:"LABEL",f:h},16:{n:"FORMULA",f:S},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f:h},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:ae},222:{n:"SHEETNAMELP",f:U},65535:{n:""}},ee={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:E},23:{n:"NUMBER17",f:P},24:{n:"NUMBER18",f:_},25:{n:"FORMULA19",f:V},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:de},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:W},38:{n:"??"},39:{n:"NUMBER27",f:q},40:{n:"FORMULA28",f:B},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:ae},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:Z},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};return{sheet_to_wk1:r,book_to_wk3:i,to_workbook:s}})(),z8=/^\s|\s$|[\t\n\r]/;function yT(t,s){if(!s.bookSST)return"";var a=[Ya];a[a.length]=ut("sst",null,{xmlns:od[0],count:t.Count,uniqueCount:t.Unique});for(var r=0;r!=t.length;++r)if(t[r]!=null){var i=t[r],o="<si>";i.r?o+=i.r:(o+="<t",i.t||(i.t=""),i.t.match(z8)&&(o+=' xml:space="preserve"'),o+=">"+qs(i.t)+"</t>"),o+="</si>",a[a.length]=o}return a.length>2&&(a[a.length]="</sst>",a[1]=a[1].replace("/>",">")),a.join("")}function U8(t){return[t.read_shift(4),t.read_shift(4)]}function V8(t,s){return s||(s=Ge(8)),s.write_shift(4,t.Count),s.write_shift(4,t.Unique),s}var $8=RM;function H8(t){var s=Zr();at(s,159,V8(t));for(var a=0;a<t.length;++a)at(s,19,$8(t[a]));return at(s,160),s.end()}function W8(t){for(var s=[],a=t.split(""),r=0;r<a.length;++r)s[r]=a[r].charCodeAt(0);return s}function NT(t){var s=0,a,r=W8(t),i=r.length+1,o,c,u,f,x;for(a=Po(i),a[0]=r.length,o=1;o!=i;++o)a[o]=r[o-1];for(o=i-1;o>=0;--o)c=a[o],u=(s&16384)===0?0:1,f=s<<1&32767,x=u|f,s=x^c;return s^52811}var G8=(function(){function t(i,o){switch(o.type){case"base64":return s(Xi(i),o);case"binary":return s(i,o);case"buffer":return s(Ls&&Buffer.isBuffer(i)?i.toString("binary"):sm(i),o);case"array":return s(Xf(i),o)}throw new Error("Unrecognized type "+o.type)}function s(i,o){var c=o||{},u=c.dense?[]:{},f=i.match(/\\trowd.*?\\row\b/g);if(!f.length)throw new Error("RTF missing table");var x={s:{c:0,r:0},e:{c:0,r:f.length-1}};return f.forEach(function(h,p){Array.isArray(u)&&(u[p]=[]);for(var g=/\\\w+\b/g,y=0,b,N=-1;b=g.exec(h);){switch(b[0]){case"\\cell":var S=h.slice(y,g.lastIndex-b[0].length);if(S[0]==" "&&(S=S.slice(1)),++N,S.length){var C={v:S,t:"s"};Array.isArray(u)?u[p][N]=C:u[Ys({r:p,c:N})]=C}break}y=g.lastIndex}N>x.e.c&&(x.e.c=N)}),u["!ref"]=Ga(x),u}function a(i,o){return Lo(t(i,o),o)}function r(i){for(var o=["{\\rtf1\\ansi"],c=ua(i["!ref"]),u,f=Array.isArray(i),x=c.s.r;x<=c.e.r;++x){o.push("\\trowd\\trautofit1");for(var h=c.s.c;h<=c.e.c;++h)o.push("\\cellx"+(h+1));for(o.push("\\pard\\intbl"),h=c.s.c;h<=c.e.c;++h){var p=Ys({r:x,c:h});u=f?(i[x]||[])[h]:i[p],!(!u||u.v==null&&(!u.f||u.F))&&(o.push(" "+(u.w||(Qi(u),u.w))),o.push("\\cell"))}o.push("\\pard\\intbl\\row")}return o.join("")+"}"}return{to_workbook:a,to_sheet:t,from_sheet:r}})();function Bw(t){for(var s=0,a=1;s!=3;++s)a=a*256+(t[s]>255?255:t[s]<0?0:t[s]);return a.toString(16).toUpperCase().slice(1)}var q8=6,Ki=q8;function Nf(t){return Math.floor((t+Math.round(128/Ki)/256)*Ki)}function bf(t){return Math.floor((t-5)/Ki*100+.5)/100}function Rg(t){return Math.round((t*Ki+5)/Ki*256)/256}function qv(t){t.width?(t.wpx=Nf(t.width),t.wch=bf(t.wpx),t.MDW=Ki):t.wpx?(t.wch=bf(t.wpx),t.width=Rg(t.wch),t.MDW=Ki):typeof t.wch=="number"&&(t.width=Rg(t.wch),t.wpx=Nf(t.width),t.MDW=Ki),t.customWidth&&delete t.customWidth}var K8=96,bT=K8;function wf(t){return t*96/bT}function wT(t){return t*bT/96}function Y8(t){var s=["<numFmts>"];return[[5,8],[23,26],[41,44],[50,392]].forEach(function(a){for(var r=a[0];r<=a[1];++r)t[r]!=null&&(s[s.length]=ut("numFmt",null,{numFmtId:r,formatCode:qs(t[r])}))}),s.length===1?"":(s[s.length]="</numFmts>",s[0]=ut("numFmts",null,{count:s.length-2}).replace("/>",">"),s.join(""))}function X8(t){var s=[];return s[s.length]=ut("cellXfs",null),t.forEach(function(a){s[s.length]=ut("xf",null,a)}),s[s.length]="</cellXfs>",s.length===2?"":(s[0]=ut("cellXfs",null,{count:s.length-2}).replace("/>",">"),s.join(""))}function ST(t,s){var a=[Ya,ut("styleSheet",null,{xmlns:od[0],"xmlns:vt":sr.vt})],r;return t.SSF&&(r=Y8(t.SSF))!=null&&(a[a.length]=r),a[a.length]='<fonts count="1"><font><sz val="12"/><color theme="1"/><name val="Calibri"/><family val="2"/><scheme val="minor"/></font></fonts>',a[a.length]='<fills count="2"><fill><patternFill patternType="none"/></fill><fill><patternFill patternType="gray125"/></fill></fills>',a[a.length]='<borders count="1"><border><left/><right/><top/><bottom/><diagonal/></border></borders>',a[a.length]='<cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0"/></cellStyleXfs>',(r=X8(s.cellXfs))&&(a[a.length]=r),a[a.length]='<cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0"/></cellStyles>',a[a.length]='<dxfs count="0"/>',a[a.length]='<tableStyles count="0" defaultTableStyle="TableStyleMedium9" defaultPivotStyle="PivotStyleMedium4"/>',a.length>2&&(a[a.length]="</styleSheet>",a[1]=a[1].replace("/>",">")),a.join("")}function Q8(t,s){var a=t.read_shift(2),r=_r(t);return[a,r]}function Z8(t,s,a){a||(a=Ge(6+4*s.length)),a.write_shift(2,t),rr(s,a);var r=a.length>a.l?a.slice(0,a.l):a;return a.l==null&&(a.l=a.length),r}function J8(t,s,a){var r={};r.sz=t.read_shift(2)/20;var i=zM(t);i.fItalic&&(r.italic=1),i.fCondense&&(r.condense=1),i.fExtend&&(r.extend=1),i.fShadow&&(r.shadow=1),i.fOutline&&(r.outline=1),i.fStrikeout&&(r.strike=1);var o=t.read_shift(2);switch(o===700&&(r.bold=1),t.read_shift(2)){case 1:r.vertAlign="superscript";break;case 2:r.vertAlign="subscript";break}var c=t.read_shift(1);c!=0&&(r.underline=c);var u=t.read_shift(1);u>0&&(r.family=u);var f=t.read_shift(1);switch(f>0&&(r.charset=f),t.l++,r.color=BM(t),t.read_shift(1)){case 1:r.scheme="major";break;case 2:r.scheme="minor";break}return r.name=_r(t),r}function eF(t,s){s||(s=Ge(153)),s.write_shift(2,t.sz*20),UM(t,s),s.write_shift(2,t.bold?700:400);var a=0;t.vertAlign=="superscript"?a=1:t.vertAlign=="subscript"&&(a=2),s.write_shift(2,a),s.write_shift(1,t.underline||0),s.write_shift(1,t.family||0),s.write_shift(1,t.charset||0),s.write_shift(1,0),jf(t.color,s);var r=0;return r=2,s.write_shift(1,r),rr(t.name,s),s.length>s.l?s.slice(0,s.l):s}var tF=["none","solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"],_0,sF=ji;function zw(t,s){s||(s=Ge(84)),_0||(_0=Mv(tF));var a=_0[t.patternType];a==null&&(a=40),s.write_shift(4,a);var r=0;if(a!=40)for(jf({auto:1},s),jf({auto:1},s);r<12;++r)s.write_shift(4,0);else{for(;r<4;++r)s.write_shift(4,0);for(;r<12;++r)s.write_shift(4,0)}return s.length>s.l?s.slice(0,s.l):s}function aF(t,s){var a=t.l+s,r=t.read_shift(2),i=t.read_shift(2);return t.l=a,{ixfe:r,numFmtId:i}}function CT(t,s,a){a||(a=Ge(16)),a.write_shift(2,s||0),a.write_shift(2,t.numFmtId||0),a.write_shift(2,0),a.write_shift(2,0),a.write_shift(2,0),a.write_shift(1,0),a.write_shift(1,0);var r=0;return a.write_shift(1,r),a.write_shift(1,0),a.write_shift(1,0),a.write_shift(1,0),a}function cu(t,s){return s||(s=Ge(10)),s.write_shift(1,0),s.write_shift(1,0),s.write_shift(4,0),s.write_shift(4,0),s}var rF=ji;function nF(t,s){return s||(s=Ge(51)),s.write_shift(1,0),cu(null,s),cu(null,s),cu(null,s),cu(null,s),cu(null,s),s.length>s.l?s.slice(0,s.l):s}function iF(t,s){return s||(s=Ge(52)),s.write_shift(4,t.xfId),s.write_shift(2,1),s.write_shift(1,0),s.write_shift(1,0),vf(t.name||"",s),s.length>s.l?s.slice(0,s.l):s}function lF(t,s,a){var r=Ge(2052);return r.write_shift(4,t),vf(s,r),vf(a,r),r.length>r.l?r.slice(0,r.l):r}function oF(t,s){if(s){var a=0;[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var i=r[0];i<=r[1];++i)s[i]!=null&&++a}),a!=0&&(at(t,615,Jn(a)),[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var i=r[0];i<=r[1];++i)s[i]!=null&&at(t,44,Z8(i,s[i]))}),at(t,616))}}function cF(t){var s=1;at(t,611,Jn(s)),at(t,43,eF({sz:12,color:{theme:1},name:"Calibri",family:2})),at(t,612)}function dF(t){var s=2;at(t,603,Jn(s)),at(t,45,zw({patternType:"none"})),at(t,45,zw({patternType:"gray125"})),at(t,604)}function uF(t){var s=1;at(t,613,Jn(s)),at(t,46,nF()),at(t,614)}function mF(t){var s=1;at(t,626,Jn(s)),at(t,47,CT({numFmtId:0},65535)),at(t,627)}function hF(t,s){at(t,617,Jn(s.length)),s.forEach(function(a){at(t,47,CT(a,0))}),at(t,618)}function fF(t){var s=1;at(t,619,Jn(s)),at(t,48,iF({xfId:0,name:"Normal"})),at(t,620)}function xF(t){var s=0;at(t,505,Jn(s)),at(t,506)}function pF(t){var s=0;at(t,508,lF(s,"TableStyleMedium9","PivotStyleMedium4")),at(t,509)}function gF(t,s){var a=Zr();return at(a,278),oF(a,t.SSF),cF(a),dF(a),uF(a),mF(a),hF(a,s.cellXfs),fF(a),xF(a),pF(a),at(a,279),a.end()}function TT(t,s){if(s&&s.themeXLSX)return s.themeXLSX;if(t&&typeof t.raw=="string")return t.raw;var a=[Ya];return a[a.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',a[a.length]="<a:themeElements>",a[a.length]='<a:clrScheme name="Office">',a[a.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',a[a.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',a[a.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',a[a.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',a[a.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',a[a.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',a[a.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',a[a.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',a[a.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',a[a.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',a[a.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',a[a.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',a[a.length]="</a:clrScheme>",a[a.length]='<a:fontScheme name="Office">',a[a.length]="<a:majorFont>",a[a.length]='<a:latin typeface="Cambria"/>',a[a.length]='<a:ea typeface=""/>',a[a.length]='<a:cs typeface=""/>',a[a.length]='<a:font script="Jpan" typeface=" "/>',a[a.length]='<a:font script="Hang" typeface=" "/>',a[a.length]='<a:font script="Hans" typeface=""/>',a[a.length]='<a:font script="Hant" typeface=""/>',a[a.length]='<a:font script="Arab" typeface="Times New Roman"/>',a[a.length]='<a:font script="Hebr" typeface="Times New Roman"/>',a[a.length]='<a:font script="Thai" typeface="Tahoma"/>',a[a.length]='<a:font script="Ethi" typeface="Nyala"/>',a[a.length]='<a:font script="Beng" typeface="Vrinda"/>',a[a.length]='<a:font script="Gujr" typeface="Shruti"/>',a[a.length]='<a:font script="Khmr" typeface="MoolBoran"/>',a[a.length]='<a:font script="Knda" typeface="Tunga"/>',a[a.length]='<a:font script="Guru" typeface="Raavi"/>',a[a.length]='<a:font script="Cans" typeface="Euphemia"/>',a[a.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',a[a.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',a[a.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',a[a.length]='<a:font script="Thaa" typeface="MV Boli"/>',a[a.length]='<a:font script="Deva" typeface="Mangal"/>',a[a.length]='<a:font script="Telu" typeface="Gautami"/>',a[a.length]='<a:font script="Taml" typeface="Latha"/>',a[a.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',a[a.length]='<a:font script="Orya" typeface="Kalinga"/>',a[a.length]='<a:font script="Mlym" typeface="Kartika"/>',a[a.length]='<a:font script="Laoo" typeface="DokChampa"/>',a[a.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',a[a.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',a[a.length]='<a:font script="Viet" typeface="Times New Roman"/>',a[a.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',a[a.length]='<a:font script="Geor" typeface="Sylfaen"/>',a[a.length]="</a:majorFont>",a[a.length]="<a:minorFont>",a[a.length]='<a:latin typeface="Calibri"/>',a[a.length]='<a:ea typeface=""/>',a[a.length]='<a:cs typeface=""/>',a[a.length]='<a:font script="Jpan" typeface=" "/>',a[a.length]='<a:font script="Hang" typeface=" "/>',a[a.length]='<a:font script="Hans" typeface=""/>',a[a.length]='<a:font script="Hant" typeface=""/>',a[a.length]='<a:font script="Arab" typeface="Arial"/>',a[a.length]='<a:font script="Hebr" typeface="Arial"/>',a[a.length]='<a:font script="Thai" typeface="Tahoma"/>',a[a.length]='<a:font script="Ethi" typeface="Nyala"/>',a[a.length]='<a:font script="Beng" typeface="Vrinda"/>',a[a.length]='<a:font script="Gujr" typeface="Shruti"/>',a[a.length]='<a:font script="Khmr" typeface="DaunPenh"/>',a[a.length]='<a:font script="Knda" typeface="Tunga"/>',a[a.length]='<a:font script="Guru" typeface="Raavi"/>',a[a.length]='<a:font script="Cans" typeface="Euphemia"/>',a[a.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',a[a.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',a[a.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',a[a.length]='<a:font script="Thaa" typeface="MV Boli"/>',a[a.length]='<a:font script="Deva" typeface="Mangal"/>',a[a.length]='<a:font script="Telu" typeface="Gautami"/>',a[a.length]='<a:font script="Taml" typeface="Latha"/>',a[a.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',a[a.length]='<a:font script="Orya" typeface="Kalinga"/>',a[a.length]='<a:font script="Mlym" typeface="Kartika"/>',a[a.length]='<a:font script="Laoo" typeface="DokChampa"/>',a[a.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',a[a.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',a[a.length]='<a:font script="Viet" typeface="Arial"/>',a[a.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',a[a.length]='<a:font script="Geor" typeface="Sylfaen"/>',a[a.length]="</a:minorFont>",a[a.length]="</a:fontScheme>",a[a.length]='<a:fmtScheme name="Office">',a[a.length]="<a:fillStyleLst>",a[a.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',a[a.length]='<a:gradFill rotWithShape="1">',a[a.length]="<a:gsLst>",a[a.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',a[a.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',a[a.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',a[a.length]="</a:gsLst>",a[a.length]='<a:lin ang="16200000" scaled="1"/>',a[a.length]="</a:gradFill>",a[a.length]='<a:gradFill rotWithShape="1">',a[a.length]="<a:gsLst>",a[a.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',a[a.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',a[a.length]="</a:gsLst>",a[a.length]='<a:lin ang="16200000" scaled="0"/>',a[a.length]="</a:gradFill>",a[a.length]="</a:fillStyleLst>",a[a.length]="<a:lnStyleLst>",a[a.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',a[a.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',a[a.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',a[a.length]="</a:lnStyleLst>",a[a.length]="<a:effectStyleLst>",a[a.length]="<a:effectStyle>",a[a.length]="<a:effectLst>",a[a.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',a[a.length]="</a:effectLst>",a[a.length]="</a:effectStyle>",a[a.length]="<a:effectStyle>",a[a.length]="<a:effectLst>",a[a.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',a[a.length]="</a:effectLst>",a[a.length]="</a:effectStyle>",a[a.length]="<a:effectStyle>",a[a.length]="<a:effectLst>",a[a.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',a[a.length]="</a:effectLst>",a[a.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',a[a.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',a[a.length]="</a:effectStyle>",a[a.length]="</a:effectStyleLst>",a[a.length]="<a:bgFillStyleLst>",a[a.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',a[a.length]='<a:gradFill rotWithShape="1">',a[a.length]="<a:gsLst>",a[a.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',a[a.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',a[a.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',a[a.length]="</a:gsLst>",a[a.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',a[a.length]="</a:gradFill>",a[a.length]='<a:gradFill rotWithShape="1">',a[a.length]="<a:gsLst>",a[a.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',a[a.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',a[a.length]="</a:gsLst>",a[a.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',a[a.length]="</a:gradFill>",a[a.length]="</a:bgFillStyleLst>",a[a.length]="</a:fmtScheme>",a[a.length]="</a:themeElements>",a[a.length]="<a:objectDefaults>",a[a.length]="<a:spDef>",a[a.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',a[a.length]="</a:spDef>",a[a.length]="<a:lnDef>",a[a.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',a[a.length]="</a:lnDef>",a[a.length]="</a:objectDefaults>",a[a.length]="<a:extraClrSchemeLst/>",a[a.length]="</a:theme>",a.join("")}function vF(t,s){return{flags:t.read_shift(4),version:t.read_shift(4),name:_r(t)}}function jF(t){var s=Ge(12+2*t.name.length);return s.write_shift(4,t.flags),s.write_shift(4,t.version),rr(t.name,s),s.slice(0,s.l)}function yF(t){for(var s=[],a=t.read_shift(4);a-- >0;)s.push([t.read_shift(4),t.read_shift(4)]);return s}function NF(t){var s=Ge(4+8*t.length);s.write_shift(4,t.length);for(var a=0;a<t.length;++a)s.write_shift(4,t[a][0]),s.write_shift(4,t[a][1]);return s}function bF(t,s){var a=Ge(8+2*s.length);return a.write_shift(4,t),rr(s,a),a.slice(0,a.l)}function wF(t){return t.l+=4,t.read_shift(4)!=0}function SF(t,s){var a=Ge(8);return a.write_shift(4,t),a.write_shift(4,1),a}function CF(){var t=Zr();return at(t,332),at(t,334,Jn(1)),at(t,335,jF({name:"XLDAPR",version:12e4,flags:3496657072})),at(t,336),at(t,339,bF(1,"XLDAPR")),at(t,52),at(t,35,Jn(514)),at(t,4096,Jn(0)),at(t,4097,Dn(1)),at(t,36),at(t,53),at(t,340),at(t,337,SF(1)),at(t,51,NF([[1,0]])),at(t,338),at(t,333),t.end()}function ET(){var t=[Ya];return t.push(`<metadata xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:xlrd="http://schemas.microsoft.com/office/spreadsheetml/2017/richdata" xmlns:xda="http://schemas.microsoft.com/office/spreadsheetml/2017/dynamicarray">
  <metadataTypes count="1">
    <metadataType name="XLDAPR" minSupportedVersion="120000" copy="1" pasteAll="1" pasteValues="1" merge="1" splitFirst="1" rowColShift="1" clearFormats="1" clearComments="1" assign="1" coerce="1" cellMeta="1"/>
  </metadataTypes>
  <futureMetadata name="XLDAPR" count="1">
    <bk>
      <extLst>
        <ext uri="{bdbb8cdc-fa1e-496e-a857-3c3f30c029c3}">
          <xda:dynamicArrayProperties fDynamic="1" fCollapsed="0"/>
        </ext>
      </extLst>
    </bk>
  </futureMetadata>
  <cellMetadata count="1">
    <bk>
      <rc t="1" v="0"/>
    </bk>
  </cellMetadata>
</metadata>`),t.join("")}function TF(t){var s={};s.i=t.read_shift(4);var a={};a.r=t.read_shift(4),a.c=t.read_shift(4),s.r=Ys(a);var r=t.read_shift(1);return r&2&&(s.l="1"),r&8&&(s.a="1"),s}var Dc=1024;function kT(t,s){for(var a=[21600,21600],r=["m0,0l0",a[1],a[0],a[1],a[0],"0xe"].join(","),i=[ut("xml",null,{"xmlns:v":hn.v,"xmlns:o":hn.o,"xmlns:x":hn.x,"xmlns:mv":hn.mv}).replace(/\/>/,">"),ut("o:shapelayout",ut("o:idmap",null,{"v:ext":"edit",data:t}),{"v:ext":"edit"}),ut("v:shapetype",[ut("v:stroke",null,{joinstyle:"miter"}),ut("v:path",null,{gradientshapeok:"t","o:connecttype":"rect"})].join(""),{id:"_x0000_t202","o:spt":202,coordsize:a.join(","),path:r})];Dc<t*1e3;)Dc+=1e3;return s.forEach(function(o){var c=ar(o[0]),u={color2:"#BEFF82",type:"gradient"};u.type=="gradient"&&(u.angle="-180");var f=u.type=="gradient"?ut("o:fill",null,{type:"gradientUnscaled","v:ext":"view"}):null,x=ut("v:fill",f,u),h={on:"t",obscured:"t"};++Dc,i=i.concat(["<v:shape"+Bu({id:"_x0000_s"+Dc,type:"#_x0000_t202",style:"position:absolute; margin-left:80pt;margin-top:5pt;width:104pt;height:64pt;z-index:10"+(o[1].hidden?";visibility:hidden":""),fillcolor:"#ECFAD4",strokecolor:"#edeaa1"})+">",x,ut("v:shadow",null,h),ut("v:path",null,{"o:connecttype":"none"}),'<v:textbox><div style="text-align:left"></div></v:textbox>','<x:ClientData ObjectType="Note">',"<x:MoveWithCells/>","<x:SizeWithCells/>",pr("x:Anchor",[c.c+1,0,c.r+1,0,c.c+3,20,c.r+5,20].join(",")),pr("x:AutoFill","False"),pr("x:Row",String(c.r)),pr("x:Column",String(c.c)),o[1].hidden?"":"<x:Visible/>","</x:ClientData>","</v:shape>"])}),i.push("</xml>"),i.join("")}function AT(t){var s=[Ya,ut("comments",null,{xmlns:od[0]})],a=[];return s.push("<authors>"),t.forEach(function(r){r[1].forEach(function(i){var o=qs(i.a);a.indexOf(o)==-1&&(a.push(o),s.push("<author>"+o+"</author>")),i.T&&i.ID&&a.indexOf("tc="+i.ID)==-1&&(a.push("tc="+i.ID),s.push("<author>tc="+i.ID+"</author>"))})}),a.length==0&&(a.push("SheetJ5"),s.push("<author>SheetJ5</author>")),s.push("</authors>"),s.push("<commentList>"),t.forEach(function(r){var i=0,o=[];if(r[1][0]&&r[1][0].T&&r[1][0].ID?i=a.indexOf("tc="+r[1][0].ID):r[1].forEach(function(f){f.a&&(i=a.indexOf(qs(f.a))),o.push(f.t||"")}),s.push('<comment ref="'+r[0]+'" authorId="'+i+'"><text>'),o.length<=1)s.push(pr("t",qs(o[0]||"")));else{for(var c=`Comment:
    `+o[0]+`
`,u=1;u<o.length;++u)c+=`Reply:
    `+o[u]+`
`;s.push(pr("t",qs(c)))}s.push("</text></comment>")}),s.push("</commentList>"),s.length>2&&(s[s.length]="</comments>",s[1]=s[1].replace("/>",">")),s.join("")}function EF(t,s,a){var r=[Ya,ut("ThreadedComments",null,{xmlns:sr.TCMNT}).replace(/[\/]>/,">")];return t.forEach(function(i){var o="";(i[1]||[]).forEach(function(c,u){if(!c.T){delete c.ID;return}c.a&&s.indexOf(c.a)==-1&&s.push(c.a);var f={ref:i[0],id:"{54EE7951-7262-4200-6969-"+("000000000000"+a.tcid++).slice(-12)+"}"};u==0?o=f.id:f.parentId=o,c.ID=f.id,c.a&&(f.personId="{54EE7950-7262-4200-6969-"+("000000000000"+s.indexOf(c.a)).slice(-12)+"}"),r.push(ut("threadedComment",pr("text",c.t||""),f))})}),r.push("</ThreadedComments>"),r.join("")}function kF(t){var s=[Ya,ut("personList",null,{xmlns:sr.TCMNT,"xmlns:x":od[0]}).replace(/[\/]>/,">")];return t.forEach(function(a,r){s.push(ut("person",null,{displayName:a,id:"{54EE7950-7262-4200-6969-"+("000000000000"+r).slice(-12)+"}",userId:a,providerId:"None"}))}),s.push("</personList>"),s.join("")}function AF(t){var s={};s.iauthor=t.read_shift(4);var a=Uo(t);return s.rfx=a.s,s.ref=Ys(a.s),t.l+=16,s}function _F(t,s){return s==null&&(s=Ge(36)),s.write_shift(4,t[1].iauthor),dd(t[0],s),s.write_shift(4,0),s.write_shift(4,0),s.write_shift(4,0),s.write_shift(4,0),s}var DF=_r;function OF(t){return rr(t.slice(0,54))}function RF(t){var s=Zr(),a=[];return at(s,628),at(s,630),t.forEach(function(r){r[1].forEach(function(i){a.indexOf(i.a)>-1||(a.push(i.a.slice(0,54)),at(s,632,OF(i.a)))})}),at(s,631),at(s,633),t.forEach(function(r){r[1].forEach(function(i){i.iauthor=a.indexOf(i.a);var o={s:ar(r[0]),e:ar(r[0])};at(s,635,_F([o,i])),i.t&&i.t.length>0&&at(s,637,MM(i)),at(s,636),delete i.iauthor})}),at(s,634),at(s,629),s.end()}function PF(t,s){s.FullPaths.forEach(function(a,r){if(r!=0){var i=a.replace(/[^\/]*[\/]/,"/_VBA_PROJECT_CUR/");i.slice(-1)!=="/"&&ea.utils.cfb_add(t,i,s.FileIndex[r].content)}})}var _T=["xlsb","xlsm","xlam","biff8","xla"],MF=(function(){var t=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,s={r:0,c:0};function a(r,i,o,c){var u=!1,f=!1;o.length==0?f=!0:o.charAt(0)=="["&&(f=!0,o=o.slice(1,-1)),c.length==0?u=!0:c.charAt(0)=="["&&(u=!0,c=c.slice(1,-1));var x=o.length>0?parseInt(o,10)|0:0,h=c.length>0?parseInt(c,10)|0:0;return u?h+=s.c:--h,f?x+=s.r:--x,i+(u?"":"$")+Ar(h)+(f?"":"$")+vr(x)}return function(i,o){return s=o,i.replace(t,a)}})(),Kv=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,Yv=(function(){return function(s,a){return s.replace(Kv,function(r,i,o,c,u,f){var x=Vv(c)-(o?0:a.c),h=Uv(f)-(u?0:a.r),p=h==0?"":u?h+1:"["+h+"]",g=x==0?"":o?x+1:"["+x+"]";return i+"R"+p+"C"+g})}})();function FF(t,s){return t.replace(Kv,function(a,r,i,o,c,u){return r+(i=="$"?i+o:Ar(Vv(o)+s.c))+(c=="$"?c+u:vr(Uv(u)+s.r))})}function LF(t){return t.length!=1}function $a(t){t.l+=1}function Ll(t,s){var a=t.read_shift(2);return[a&16383,a>>14&1,a>>15&1]}function DT(t,s,a){var r=2;if(a){if(a.biff>=2&&a.biff<=5)return OT(t);a.biff==12&&(r=4)}var i=t.read_shift(r),o=t.read_shift(r),c=Ll(t),u=Ll(t);return{s:{r:i,c:c[0],cRel:c[1],rRel:c[2]},e:{r:o,c:u[0],cRel:u[1],rRel:u[2]}}}function OT(t){var s=Ll(t),a=Ll(t),r=t.read_shift(1),i=t.read_shift(1);return{s:{r:s[0],c:r,cRel:s[1],rRel:s[2]},e:{r:a[0],c:i,cRel:a[1],rRel:a[2]}}}function IF(t,s,a){if(a.biff<8)return OT(t);var r=t.read_shift(a.biff==12?4:2),i=t.read_shift(a.biff==12?4:2),o=Ll(t),c=Ll(t);return{s:{r,c:o[0],cRel:o[1],rRel:o[2]},e:{r:i,c:c[0],cRel:c[1],rRel:c[2]}}}function RT(t,s,a){if(a&&a.biff>=2&&a.biff<=5)return BF(t);var r=t.read_shift(a&&a.biff==12?4:2),i=Ll(t);return{r,c:i[0],cRel:i[1],rRel:i[2]}}function BF(t){var s=Ll(t),a=t.read_shift(1);return{r:s[0],c:a,cRel:s[1],rRel:s[2]}}function zF(t){var s=t.read_shift(2),a=t.read_shift(2);return{r:s,c:a&255,fQuoted:!!(a&16384),cRel:a>>15,rRel:a>>15}}function UF(t,s,a){var r=a&&a.biff?a.biff:8;if(r>=2&&r<=5)return VF(t);var i=t.read_shift(r>=12?4:2),o=t.read_shift(2),c=(o&16384)>>14,u=(o&32768)>>15;if(o&=16383,u==1)for(;i>524287;)i-=1048576;if(c==1)for(;o>8191;)o=o-16384;return{r:i,c:o,cRel:c,rRel:u}}function VF(t){var s=t.read_shift(2),a=t.read_shift(1),r=(s&32768)>>15,i=(s&16384)>>14;return s&=16383,r==1&&s>=8192&&(s=s-16384),i==1&&a>=128&&(a=a-256),{r:s,c:a,cRel:i,rRel:r}}function $F(t,s,a){var r=(t[t.l++]&96)>>5,i=DT(t,a.biff>=2&&a.biff<=5?6:8,a);return[r,i]}function HF(t,s,a){var r=(t[t.l++]&96)>>5,i=t.read_shift(2,"i"),o=8;if(a)switch(a.biff){case 5:t.l+=12,o=6;break;case 12:o=12;break}var c=DT(t,o,a);return[r,i,c]}function WF(t,s,a){var r=(t[t.l++]&96)>>5;return t.l+=a&&a.biff>8?12:a.biff<8?6:8,[r]}function GF(t,s,a){var r=(t[t.l++]&96)>>5,i=t.read_shift(2),o=8;if(a)switch(a.biff){case 5:t.l+=12,o=6;break;case 12:o=12;break}return t.l+=o,[r,i]}function qF(t,s,a){var r=(t[t.l++]&96)>>5,i=IF(t,s-1,a);return[r,i]}function KF(t,s,a){var r=(t[t.l++]&96)>>5;return t.l+=a.biff==2?6:a.biff==12?14:7,[r]}function Uw(t){var s=t[t.l+1]&1,a=1;return t.l+=4,[s,a]}function YF(t,s,a){t.l+=2;for(var r=t.read_shift(a&&a.biff==2?1:2),i=[],o=0;o<=r;++o)i.push(t.read_shift(a&&a.biff==2?1:2));return i}function XF(t,s,a){var r=t[t.l+1]&255?1:0;return t.l+=2,[r,t.read_shift(a&&a.biff==2?1:2)]}function QF(t,s,a){var r=t[t.l+1]&255?1:0;return t.l+=2,[r,t.read_shift(a&&a.biff==2?1:2)]}function ZF(t){var s=t[t.l+1]&255?1:0;return t.l+=2,[s,t.read_shift(2)]}function JF(t,s,a){var r=t[t.l+1]&255?1:0;return t.l+=a&&a.biff==2?3:4,[r]}function PT(t){var s=t.read_shift(1),a=t.read_shift(1);return[s,a]}function eL(t){return t.read_shift(2),PT(t)}function tL(t){return t.read_shift(2),PT(t)}function sL(t,s,a){var r=(t[t.l]&96)>>5;t.l+=1;var i=RT(t,0,a);return[r,i]}function aL(t,s,a){var r=(t[t.l]&96)>>5;t.l+=1;var i=UF(t,0,a);return[r,i]}function rL(t,s,a){var r=(t[t.l]&96)>>5;t.l+=1;var i=t.read_shift(2);a&&a.biff==5&&(t.l+=12);var o=RT(t,0,a);return[r,i,o]}function nL(t,s,a){var r=(t[t.l]&96)>>5;t.l+=1;var i=t.read_shift(a&&a.biff<=3?1:2);return[nI[i],LT[i],r]}function iL(t,s,a){var r=t[t.l++],i=t.read_shift(1),o=a&&a.biff<=3?[r==88?-1:0,t.read_shift(1)]:lL(t);return[i,(o[0]===0?LT:rI)[o[1]]]}function lL(t){return[t[t.l+1]>>7,t.read_shift(2)&32767]}function oL(t,s,a){t.l+=a&&a.biff==2?3:4}function cL(t,s,a){if(t.l++,a&&a.biff==12)return[t.read_shift(4,"i"),0];var r=t.read_shift(2),i=t.read_shift(a&&a.biff==2?1:2);return[r,i]}function dL(t){return t.l++,nm[t.read_shift(1)]}function uL(t){return t.l++,t.read_shift(2)}function mL(t){return t.l++,t.read_shift(1)!==0}function hL(t){return t.l++,ud(t)}function fL(t,s,a){return t.l++,pT(t,s-1,a)}function xL(t,s){var a=[t.read_shift(1)];if(s==12)switch(a[0]){case 2:a[0]=4;break;case 4:a[0]=16;break;case 0:a[0]=1;break;case 1:a[0]=2;break}switch(a[0]){case 4:a[1]=r8(t,1)?"TRUE":"FALSE",s!=12&&(t.l+=7);break;case 37:case 16:a[1]=nm[t[t.l]],t.l+=s==12?4:8;break;case 0:t.l+=8;break;case 1:a[1]=ud(t);break;case 2:a[1]=o8(t,0,{biff:s>0&&s<8?2:s});break;default:throw new Error("Bad SerAr: "+a[0])}return a}function pL(t,s,a){for(var r=t.read_shift(a.biff==12?4:2),i=[],o=0;o!=r;++o)i.push((a.biff==12?Uo:u8)(t));return i}function gL(t,s,a){var r=0,i=0;a.biff==12?(r=t.read_shift(4),i=t.read_shift(4)):(i=1+t.read_shift(1),r=1+t.read_shift(2)),a.biff>=2&&a.biff<8&&(--r,--i==0&&(i=256));for(var o=0,c=[];o!=r&&(c[o]=[]);++o)for(var u=0;u!=i;++u)c[o][u]=xL(t,a.biff);return c}function vL(t,s,a){var r=t.read_shift(1)>>>5&3,i=!a||a.biff>=8?4:2,o=t.read_shift(i);switch(a.biff){case 2:t.l+=5;break;case 3:case 4:t.l+=8;break;case 5:t.l+=12;break}return[r,0,o]}function jL(t,s,a){if(a.biff==5)return yL(t);var r=t.read_shift(1)>>>5&3,i=t.read_shift(2),o=t.read_shift(4);return[r,i,o]}function yL(t){var s=t.read_shift(1)>>>5&3,a=t.read_shift(2,"i");t.l+=8;var r=t.read_shift(2);return t.l+=12,[s,a,r]}function NL(t,s,a){var r=t.read_shift(1)>>>5&3;t.l+=a&&a.biff==2?3:4;var i=t.read_shift(a&&a.biff==2?1:2);return[r,i]}function bL(t,s,a){var r=t.read_shift(1)>>>5&3,i=t.read_shift(a&&a.biff==2?1:2);return[r,i]}function wL(t,s,a){var r=t.read_shift(1)>>>5&3;return t.l+=4,a.biff<8&&t.l--,a.biff==12&&(t.l+=2),[r]}function SL(t,s,a){var r=(t[t.l++]&96)>>5,i=t.read_shift(2),o=4;if(a)switch(a.biff){case 5:o=15;break;case 12:o=6;break}return t.l+=o,[r,i]}var CL=ji,TL=ji,EL=ji;function im(t,s,a){return t.l+=2,[zF(t)]}function Xv(t){return t.l+=6,[]}var kL=im,AL=Xv,_L=Xv,DL=im;function MT(t){return t.l+=2,[fT(t),t.read_shift(2)&1]}var OL=im,RL=MT,PL=Xv,ML=im,FL=im,LL=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];function IL(t){t.l+=2;var s=t.read_shift(2),a=t.read_shift(2),r=t.read_shift(4),i=t.read_shift(2),o=t.read_shift(2),c=LL[a>>2&31];return{ixti:s,coltype:a&3,rt:c,idx:r,c:i,C:o}}function BL(t){return t.l+=2,[t.read_shift(4)]}function zL(t,s,a){return t.l+=5,t.l+=2,t.l+=a.biff==2?1:4,["PTGSHEET"]}function UL(t,s,a){return t.l+=a.biff==2?4:5,["PTGENDSHEET"]}function VL(t){var s=t.read_shift(1)>>>5&3,a=t.read_shift(2);return[s,a]}function $L(t){var s=t.read_shift(1)>>>5&3,a=t.read_shift(2);return[s,a]}function HL(t){return t.l+=4,[0,0]}var Vw={1:{n:"PtgExp",f:cL},2:{n:"PtgTbl",f:EL},3:{n:"PtgAdd",f:$a},4:{n:"PtgSub",f:$a},5:{n:"PtgMul",f:$a},6:{n:"PtgDiv",f:$a},7:{n:"PtgPower",f:$a},8:{n:"PtgConcat",f:$a},9:{n:"PtgLt",f:$a},10:{n:"PtgLe",f:$a},11:{n:"PtgEq",f:$a},12:{n:"PtgGe",f:$a},13:{n:"PtgGt",f:$a},14:{n:"PtgNe",f:$a},15:{n:"PtgIsect",f:$a},16:{n:"PtgUnion",f:$a},17:{n:"PtgRange",f:$a},18:{n:"PtgUplus",f:$a},19:{n:"PtgUminus",f:$a},20:{n:"PtgPercent",f:$a},21:{n:"PtgParen",f:$a},22:{n:"PtgMissArg",f:$a},23:{n:"PtgStr",f:fL},26:{n:"PtgSheet",f:zL},27:{n:"PtgEndSheet",f:UL},28:{n:"PtgErr",f:dL},29:{n:"PtgBool",f:mL},30:{n:"PtgInt",f:uL},31:{n:"PtgNum",f:hL},32:{n:"PtgArray",f:KF},33:{n:"PtgFunc",f:nL},34:{n:"PtgFuncVar",f:iL},35:{n:"PtgName",f:vL},36:{n:"PtgRef",f:sL},37:{n:"PtgArea",f:$F},38:{n:"PtgMemArea",f:NL},39:{n:"PtgMemErr",f:CL},40:{n:"PtgMemNoMem",f:TL},41:{n:"PtgMemFunc",f:bL},42:{n:"PtgRefErr",f:wL},43:{n:"PtgAreaErr",f:WF},44:{n:"PtgRefN",f:aL},45:{n:"PtgAreaN",f:qF},46:{n:"PtgMemAreaN",f:VL},47:{n:"PtgMemNoMemN",f:$L},57:{n:"PtgNameX",f:jL},58:{n:"PtgRef3d",f:rL},59:{n:"PtgArea3d",f:HF},60:{n:"PtgRefErr3d",f:SL},61:{n:"PtgAreaErr3d",f:GF},255:{}},WL={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},GL={1:{n:"PtgElfLel",f:MT},2:{n:"PtgElfRw",f:ML},3:{n:"PtgElfCol",f:kL},6:{n:"PtgElfRwV",f:FL},7:{n:"PtgElfColV",f:DL},10:{n:"PtgElfRadical",f:OL},11:{n:"PtgElfRadicalS",f:PL},13:{n:"PtgElfColS",f:AL},15:{n:"PtgElfColSV",f:_L},16:{n:"PtgElfRadicalLel",f:RL},25:{n:"PtgList",f:IL},29:{n:"PtgSxName",f:BL},255:{}},qL={0:{n:"PtgAttrNoop",f:HL},1:{n:"PtgAttrSemi",f:JF},2:{n:"PtgAttrIf",f:QF},4:{n:"PtgAttrChoose",f:YF},8:{n:"PtgAttrGoto",f:XF},16:{n:"PtgAttrSum",f:oL},32:{n:"PtgAttrBaxcel",f:Uw},33:{n:"PtgAttrBaxcel",f:Uw},64:{n:"PtgAttrSpace",f:eL},65:{n:"PtgAttrSpaceSemi",f:tL},128:{n:"PtgAttrIfError",f:ZF},255:{}};function KL(t,s,a,r){if(r.biff<8)return ji(t,s);for(var i=t.l+s,o=[],c=0;c!==a.length;++c)switch(a[c][0]){case"PtgArray":a[c][1]=gL(t,0,r),o.push(a[c][1]);break;case"PtgMemArea":a[c][2]=pL(t,a[c][1],r),o.push(a[c][2]);break;case"PtgExp":r&&r.biff==12&&(a[c][1][1]=t.read_shift(4),o.push(a[c][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+a[c][0]}return s=i-t.l,s!==0&&o.push(ji(t,s)),o}function YL(t,s,a){for(var r=t.l+s,i,o,c=[];r!=t.l;)s=r-t.l,o=t[t.l],i=Vw[o]||Vw[WL[o]],(o===24||o===25)&&(i=(o===24?GL:qL)[t[t.l+1]]),!i||!i.f?ji(t,s):c.push([i.n,i.f(t,s,a)]);return c}function XL(t){for(var s=[],a=0;a<t.length;++a){for(var r=t[a],i=[],o=0;o<r.length;++o){var c=r[o];if(c)switch(c[0]){case 2:i.push('"'+c[1].replace(/"/g,'""')+'"');break;default:i.push(c[1])}else i.push("")}s.push(i.join(","))}return s.join(";")}var QL={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function ZL(t,s){if(!t&&!(s&&s.biff<=5&&s.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(t)?"'"+t+"'":t}function FT(t,s,a){if(!t)return"SH33TJSERR0";if(a.biff>8&&(!t.XTI||!t.XTI[s]))return t.SheetNames[s];if(!t.XTI)return"SH33TJSERR6";var r=t.XTI[s];if(a.biff<8)return s>1e4&&(s-=65536),s<0&&(s=-s),s==0?"":t.XTI[s-1];if(!r)return"SH33TJSERR1";var i="";if(a.biff>8)switch(t[r[0]][0]){case 357:return i=r[1]==-1?"#REF":t.SheetNames[r[1]],r[1]==r[2]?i:i+":"+t.SheetNames[r[2]];case 358:return a.SID!=null?t.SheetNames[a.SID]:"SH33TJSSAME"+t[r[0]][0];case 355:default:return"SH33TJSSRC"+t[r[0]][0]}switch(t[r[0]][0][0]){case 1025:return i=r[1]==-1?"#REF":t.SheetNames[r[1]]||"SH33TJSERR3",r[1]==r[2]?i:i+":"+t.SheetNames[r[2]];case 14849:return t[r[0]].slice(1).map(function(o){return o.Name}).join(";;");default:return t[r[0]][0][3]?(i=r[1]==-1?"#REF":t[r[0]][0][3][r[1]]||"SH33TJSERR4",r[1]==r[2]?i:i+":"+t[r[0]][0][3][r[2]]):"SH33TJSERR2"}}function $w(t,s,a){var r=FT(t,s,a);return r=="#REF"?r:ZL(r,a)}function Zc(t,s,a,r,i){var o=i&&i.biff||8,c={s:{c:0,r:0}},u=[],f,x,h,p=0,g=0,y,b="";if(!t[0]||!t[0][0])return"";for(var N=-1,S="",C=0,k=t[0].length;C<k;++C){var A=t[0][C];switch(A[0]){case"PtgUminus":u.push("-"+u.pop());break;case"PtgUplus":u.push("+"+u.pop());break;case"PtgPercent":u.push(u.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(f=u.pop(),x=u.pop(),N>=0){switch(t[0][N][1][0]){case 0:S=ka(" ",t[0][N][1][1]);break;case 1:S=ka("\r",t[0][N][1][1]);break;default:if(S="",i.WTF)throw new Error("Unexpected PtgAttrSpaceType "+t[0][N][1][0])}x=x+S,N=-1}u.push(x+QL[A[0]]+f);break;case"PtgIsect":f=u.pop(),x=u.pop(),u.push(x+" "+f);break;case"PtgUnion":f=u.pop(),x=u.pop(),u.push(x+","+f);break;case"PtgRange":f=u.pop(),x=u.pop(),u.push(x+":"+f);break;case"PtgAttrChoose":break;case"PtgAttrGoto":break;case"PtgAttrIf":break;case"PtgAttrIfError":break;case"PtgRef":h=wu(A[1][1],c,i),u.push(Su(h,o));break;case"PtgRefN":h=a?wu(A[1][1],a,i):A[1][1],u.push(Su(h,o));break;case"PtgRef3d":p=A[1][1],h=wu(A[1][2],c,i),b=$w(r,p,i),u.push(b+"!"+Su(h,o));break;case"PtgFunc":case"PtgFuncVar":var G=A[1][0],F=A[1][1];G||(G=0),G&=127;var E=G==0?[]:u.slice(-G);u.length-=G,F==="User"&&(F=E.shift()),u.push(F+"("+E.join(",")+")");break;case"PtgBool":u.push(A[1]?"TRUE":"FALSE");break;case"PtgInt":u.push(A[1]);break;case"PtgNum":u.push(String(A[1]));break;case"PtgStr":u.push('"'+A[1].replace(/"/g,'""')+'"');break;case"PtgErr":u.push(A[1]);break;case"PtgAreaN":y=Ew(A[1][1],a?{s:a}:c,i),u.push(k0(y,i));break;case"PtgArea":y=Ew(A[1][1],c,i),u.push(k0(y,i));break;case"PtgArea3d":p=A[1][1],y=A[1][2],b=$w(r,p,i),u.push(b+"!"+k0(y,i));break;case"PtgAttrSum":u.push("SUM("+u.pop()+")");break;case"PtgAttrBaxcel":case"PtgAttrSemi":break;case"PtgName":g=A[1][2];var T=(r.names||[])[g-1]||(r[0]||[])[g],_=T?T.Name:"SH33TJSNAME"+String(g);_&&_.slice(0,6)=="_xlfn."&&!i.xlfn&&(_=_.slice(6)),u.push(_);break;case"PtgNameX":var P=A[1][1];g=A[1][2];var z;if(i.biff<=5)P<0&&(P=-P),r[P]&&(z=r[P][g]);else{var V="";if(((r[P]||[])[0]||[])[0]==14849||(((r[P]||[])[0]||[])[0]==1025?r[P][g]&&r[P][g].itab>0&&(V=r.SheetNames[r[P][g].itab-1]+"!"):V=r.SheetNames[g-1]+"!"),r[P]&&r[P][g])V+=r[P][g].Name;else if(r[0]&&r[0][g])V+=r[0][g].Name;else{var W=(FT(r,P,i)||"").split(";;");W[g-1]?V=W[g-1]:V+="SH33TJSERRX"}u.push(V);break}z||(z={Name:"SH33TJSERRY"}),u.push(z.Name);break;case"PtgParen":var q="(",B=")";if(N>=0){switch(S="",t[0][N][1][0]){case 2:q=ka(" ",t[0][N][1][1])+q;break;case 3:q=ka("\r",t[0][N][1][1])+q;break;case 4:B=ka(" ",t[0][N][1][1])+B;break;case 5:B=ka("\r",t[0][N][1][1])+B;break;default:if(i.WTF)throw new Error("Unexpected PtgAttrSpaceType "+t[0][N][1][0])}N=-1}u.push(q+u.pop()+B);break;case"PtgRefErr":u.push("#REF!");break;case"PtgRefErr3d":u.push("#REF!");break;case"PtgExp":h={c:A[1][1],r:A[1][0]};var ae={c:a.c,r:a.r};if(r.sharedf[Ys(h)]){var U=r.sharedf[Ys(h)];u.push(Zc(U,c,ae,r,i))}else{var Z=!1;for(f=0;f!=r.arrayf.length;++f)if(x=r.arrayf[f],!(h.c<x[0].s.c||h.c>x[0].e.c)&&!(h.r<x[0].s.r||h.r>x[0].e.r)){u.push(Zc(x[1],c,ae,r,i)),Z=!0;break}Z||u.push(A[1])}break;case"PtgArray":u.push("{"+XL(A[1])+"}");break;case"PtgMemArea":break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":N=C;break;case"PtgTbl":break;case"PtgMemErr":break;case"PtgMissArg":u.push("");break;case"PtgAreaErr":u.push("#REF!");break;case"PtgAreaErr3d":u.push("#REF!");break;case"PtgList":u.push("Table"+A[1].idx+"[#"+A[1].rt+"]");break;case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":break;case"PtgMemFunc":break;case"PtgMemNoMem":break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");case"PtgSxName":throw new Error("Unrecognized Formula Token: "+String(A));default:throw new Error("Unrecognized Formula Token: "+String(A))}var de=["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"];if(i.biff!=3&&N>=0&&de.indexOf(t[0][C][0])==-1){A=t[0][N];var H=!0;switch(A[1][0]){case 4:H=!1;case 0:S=ka(" ",A[1][1]);break;case 5:H=!1;case 1:S=ka("\r",A[1][1]);break;default:if(S="",i.WTF)throw new Error("Unexpected PtgAttrSpaceType "+A[1][0])}u.push((H?S:"")+u.pop()+(H?"":S)),N=-1}}if(u.length>1&&i.WTF)throw new Error("bad formula stack");return u[0]}function JL(t){if(t==null){var s=Ge(8);return s.write_shift(1,3),s.write_shift(1,0),s.write_shift(2,0),s.write_shift(2,0),s.write_shift(2,65535),s}else if(typeof t=="number")return Mo(t);return Mo(0)}function eI(t,s,a,r,i){var o=Fo(s,a,i),c=JL(t.v),u=Ge(6),f=33;u.write_shift(2,f),u.write_shift(4,0);for(var x=Ge(t.bf.length),h=0;h<t.bf.length;++h)x[h]=t.bf[h];var p=xr([o,c,u,x]);return p}function Qf(t,s,a){var r=t.read_shift(4),i=YL(t,r,a),o=t.read_shift(4),c=o>0?KL(t,o,i,a):null;return[i,c]}var tI=Qf,Zf=Qf,sI=Qf,aI=Qf,rI={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},LT={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},nI={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function iI(t){var s="of:="+t.replace(Kv,"$1[.$2$3$4$5]").replace(/\]:\[/g,":");return s.replace(/;/g,"|").replace(/,/g,";")}function lI(t){return t.replace(/\./,"!")}var Cu=typeof Map<"u";function Qv(t,s,a){var r=0,i=t.length;if(a){if(Cu?a.has(s):Object.prototype.hasOwnProperty.call(a,s)){for(var o=Cu?a.get(s):a[s];r<o.length;++r)if(t[o[r]].t===s)return t.Count++,o[r]}}else for(;r<i;++r)if(t[r].t===s)return t.Count++,r;return t[i]={t:s},t.Count++,t.Unique++,a&&(Cu?(a.has(s)||a.set(s,[]),a.get(s).push(i)):(Object.prototype.hasOwnProperty.call(a,s)||(a[s]=[]),a[s].push(i))),i}function Jf(t,s){var a={min:t+1,max:t+1},r=-1;return s.MDW&&(Ki=s.MDW),s.width!=null?a.customWidth=1:s.wpx!=null?r=bf(s.wpx):s.wch!=null&&(r=s.wch),r>-1?(a.width=Rg(r),a.customWidth=1):s.width!=null&&(a.width=s.width),s.hidden&&(a.hidden=!0),s.level!=null&&(a.outlineLevel=a.level=s.level),a}function IT(t,s){if(t){var a=[.7,.7,.75,.75,.3,.3];t.left==null&&(t.left=a[0]),t.right==null&&(t.right=a[1]),t.top==null&&(t.top=a[2]),t.bottom==null&&(t.bottom=a[3]),t.header==null&&(t.header=a[4]),t.footer==null&&(t.footer=a[5])}}function Hl(t,s,a){var r=a.revssf[s.z!=null?s.z:"General"],i=60,o=t.length;if(r==null&&a.ssf){for(;i<392;++i)if(a.ssf[i]==null){RC(s.z,i),a.ssf[i]=s.z,a.revssf[s.z]=r=i;break}}for(i=0;i!=o;++i)if(t[i].numFmtId===r)return i;return t[o]={numFmtId:r,fontId:0,fillId:0,borderId:0,xfId:0,applyNumberFormat:1},o}function oI(t,s,a){if(t&&t["!ref"]){var r=ua(t["!ref"]);if(r.e.c<r.s.c||r.e.r<r.s.r)throw new Error("Bad range ("+a+"): "+t["!ref"])}}function cI(t){if(t.length===0)return"";for(var s='<mergeCells count="'+t.length+'">',a=0;a!=t.length;++a)s+='<mergeCell ref="'+Ga(t[a])+'"/>';return s+"</mergeCells>"}function dI(t,s,a,r,i){var o=!1,c={},u=null;if(r.bookType!=="xlsx"&&s.vbaraw){var f=s.SheetNames[a];try{s.Workbook&&(f=s.Workbook.Sheets[a].CodeName||f)}catch{}o=!0,c.codeName=Iu(qs(f))}if(t&&t["!outline"]){var x={summaryBelow:1,summaryRight:1};t["!outline"].above&&(x.summaryBelow=0),t["!outline"].left&&(x.summaryRight=0),u=(u||"")+ut("outlinePr",null,x)}!o&&!u||(i[i.length]=ut("sheetPr",u,c))}var uI=["objects","scenarios","selectLockedCells","selectUnlockedCells"],mI=["formatColumns","formatRows","formatCells","insertColumns","insertRows","insertHyperlinks","deleteColumns","deleteRows","sort","autoFilter","pivotTables"];function hI(t){var s={sheet:1};return uI.forEach(function(a){t[a]!=null&&t[a]&&(s[a]="1")}),mI.forEach(function(a){t[a]!=null&&!t[a]&&(s[a]="0")}),t.password&&(s.password=NT(t.password).toString(16).toUpperCase()),ut("sheetProtection",null,s)}function fI(t){return IT(t),ut("pageMargins",null,t)}function xI(t,s){for(var a=["<cols>"],r,i=0;i!=s.length;++i)(r=s[i])&&(a[a.length]=ut("col",null,Jf(i,r)));return a[a.length]="</cols>",a.join("")}function pI(t,s,a,r){var i=typeof t.ref=="string"?t.ref:Ga(t.ref);a.Workbook||(a.Workbook={Sheets:[]}),a.Workbook.Names||(a.Workbook.Names=[]);var o=a.Workbook.Names,c=xn(i);c.s.r==c.e.r&&(c.e.r=xn(s["!ref"]).e.r,i=Ga(c));for(var u=0;u<o.length;++u){var f=o[u];if(f.Name=="_xlnm._FilterDatabase"&&f.Sheet==r){f.Ref="'"+a.SheetNames[r]+"'!"+i;break}}return u==o.length&&o.push({Name:"_xlnm._FilterDatabase",Sheet:r,Ref:"'"+a.SheetNames[r]+"'!"+i}),ut("autoFilter",null,{ref:i})}function gI(t,s,a,r){var i={workbookViewId:"0"};return(((r||{}).Workbook||{}).Views||[])[0]&&(i.rightToLeft=r.Workbook.Views[0].RTL?"1":"0"),ut("sheetViews",ut("sheetView",null,i),{})}function vI(t,s,a,r){if(t.c&&a["!comments"].push([s,t.c]),t.v===void 0&&typeof t.f!="string"||t.t==="z"&&!t.f)return"";var i="",o=t.t,c=t.v;if(t.t!=="z")switch(t.t){case"b":i=t.v?"1":"0";break;case"n":i=""+t.v;break;case"e":i=nm[t.v];break;case"d":r&&r.cellDates?i=Lr(t.v,-1).toISOString():(t=en(t),t.t="n",i=""+(t.v=Jr(Lr(t.v)))),typeof t.z>"u"&&(t.z=Da[14]);break;default:i=t.v;break}var u=pr("v",qs(i)),f={r:s},x=Hl(r.cellXfs,t,r);switch(x!==0&&(f.s=x),t.t){case"n":break;case"d":f.t="d";break;case"b":f.t="b";break;case"e":f.t="e";break;case"z":break;default:if(t.v==null){delete t.t;break}if(t.v.length>32767)throw new Error("Text length must not exceed 32767 characters");if(r&&r.bookSST){u=pr("v",""+Qv(r.Strings,t.v,r.revStrings)),f.t="s";break}f.t="str";break}if(t.t!=o&&(t.t=o,t.v=c),typeof t.f=="string"&&t.f){var h=t.F&&t.F.slice(0,s.length)==s?{t:"array",ref:t.F}:null;u=ut("f",qs(t.f),h)+(t.v!=null?u:"")}return t.l&&a["!links"].push([s,t.l]),t.D&&(f.cm=1),ut("c",u,f)}function jI(t,s,a,r){var i=[],o=[],c=ua(t["!ref"]),u="",f,x="",h=[],p=0,g=0,y=t["!rows"],b=Array.isArray(t),N={r:x},S,C=-1;for(g=c.s.c;g<=c.e.c;++g)h[g]=Ar(g);for(p=c.s.r;p<=c.e.r;++p){for(o=[],x=vr(p),g=c.s.c;g<=c.e.c;++g){f=h[g]+x;var k=b?(t[p]||[])[g]:t[f];k!==void 0&&(u=vI(k,f,t,s))!=null&&o.push(u)}(o.length>0||y&&y[p])&&(N={r:x},y&&y[p]&&(S=y[p],S.hidden&&(N.hidden=1),C=-1,S.hpx?C=wf(S.hpx):S.hpt&&(C=S.hpt),C>-1&&(N.ht=C,N.customHeight=1),S.level&&(N.outlineLevel=S.level)),i[i.length]=ut("row",o.join(""),N))}if(y)for(;p<y.length;++p)y&&y[p]&&(N={r:p+1},S=y[p],S.hidden&&(N.hidden=1),C=-1,S.hpx?C=wf(S.hpx):S.hpt&&(C=S.hpt),C>-1&&(N.ht=C,N.customHeight=1),S.level&&(N.outlineLevel=S.level),i[i.length]=ut("row","",N));return i.join("")}function BT(t,s,a,r){var i=[Ya,ut("worksheet",null,{xmlns:od[0],"xmlns:r":sr.r})],o=a.SheetNames[t],c=0,u="",f=a.Sheets[o];f==null&&(f={});var x=f["!ref"]||"A1",h=ua(x);if(h.e.c>16383||h.e.r>1048575){if(s.WTF)throw new Error("Range "+x+" exceeds format limit A1:XFD1048576");h.e.c=Math.min(h.e.c,16383),h.e.r=Math.min(h.e.c,1048575),x=Ga(h)}r||(r={}),f["!comments"]=[];var p=[];dI(f,a,t,s,i),i[i.length]=ut("dimension",null,{ref:x}),i[i.length]=gI(f,s,t,a),s.sheetFormat&&(i[i.length]=ut("sheetFormatPr",null,{defaultRowHeight:s.sheetFormat.defaultRowHeight||"16",baseColWidth:s.sheetFormat.baseColWidth||"10",outlineLevelRow:s.sheetFormat.outlineLevelRow||"7"})),f["!cols"]!=null&&f["!cols"].length>0&&(i[i.length]=xI(f,f["!cols"])),i[c=i.length]="<sheetData/>",f["!links"]=[],f["!ref"]!=null&&(u=jI(f,s),u.length>0&&(i[i.length]=u)),i.length>c+1&&(i[i.length]="</sheetData>",i[c]=i[c].replace("/>",">")),f["!protect"]&&(i[i.length]=hI(f["!protect"])),f["!autofilter"]!=null&&(i[i.length]=pI(f["!autofilter"],f,a,t)),f["!merges"]!=null&&f["!merges"].length>0&&(i[i.length]=cI(f["!merges"]));var g=-1,y,b=-1;return f["!links"].length>0&&(i[i.length]="<hyperlinks>",f["!links"].forEach(function(N){N[1].Target&&(y={ref:N[0]},N[1].Target.charAt(0)!="#"&&(b=$s(r,-1,qs(N[1].Target).replace(/#.*$/,""),Rs.HLINK),y["r:id"]="rId"+b),(g=N[1].Target.indexOf("#"))>-1&&(y.location=qs(N[1].Target.slice(g+1))),N[1].Tooltip&&(y.tooltip=qs(N[1].Tooltip)),i[i.length]=ut("hyperlink",null,y))}),i[i.length]="</hyperlinks>"),delete f["!links"],f["!margins"]!=null&&(i[i.length]=fI(f["!margins"])),(!s||s.ignoreEC||s.ignoreEC==null)&&(i[i.length]=pr("ignoredErrors",ut("ignoredError",null,{numberStoredAsText:1,sqref:x}))),p.length>0&&(b=$s(r,-1,"../drawings/drawing"+(t+1)+".xml",Rs.DRAW),i[i.length]=ut("drawing",null,{"r:id":"rId"+b}),f["!drawing"]=p),f["!comments"].length>0&&(b=$s(r,-1,"../drawings/vmlDrawing"+(t+1)+".vml",Rs.VML),i[i.length]=ut("legacyDrawing",null,{"r:id":"rId"+b}),f["!legacy"]=b),i.length>1&&(i[i.length]="</worksheet>",i[1]=i[1].replace("/>",">")),i.join("")}function yI(t,s){var a={},r=t.l+s;a.r=t.read_shift(4),t.l+=4;var i=t.read_shift(2);t.l+=1;var o=t.read_shift(1);return t.l=r,o&7&&(a.level=o&7),o&16&&(a.hidden=!0),o&32&&(a.hpt=i/20),a}function NI(t,s,a){var r=Ge(145),i=(a["!rows"]||[])[t]||{};r.write_shift(4,t),r.write_shift(4,0);var o=320;i.hpx?o=wf(i.hpx)*20:i.hpt&&(o=i.hpt*20),r.write_shift(2,o),r.write_shift(1,0);var c=0;i.level&&(c|=i.level),i.hidden&&(c|=16),(i.hpx||i.hpt)&&(c|=32),r.write_shift(1,c),r.write_shift(1,0);var u=0,f=r.l;r.l+=4;for(var x={r:t,c:0},h=0;h<16;++h)if(!(s.s.c>h+1<<10||s.e.c<h<<10)){for(var p=-1,g=-1,y=h<<10;y<h+1<<10;++y){x.c=y;var b=Array.isArray(a)?(a[x.r]||[])[x.c]:a[Ys(x)];b&&(p<0&&(p=y),g=y)}p<0||(++u,r.write_shift(4,p),r.write_shift(4,g))}var N=r.l;return r.l=f,r.write_shift(4,u),r.l=N,r.length>r.l?r.slice(0,r.l):r}function bI(t,s,a,r){var i=NI(r,a,s);(i.length>17||(s["!rows"]||[])[r])&&at(t,0,i)}var wI=Uo,SI=dd;function CI(){}function TI(t,s){var a={},r=t[t.l];return++t.l,a.above=!(r&64),a.left=!(r&128),t.l+=18,a.name=FM(t),a}function EI(t,s,a){a==null&&(a=Ge(84+4*t.length));var r=192;s&&(s.above&&(r&=-65),s.left&&(r&=-129)),a.write_shift(1,r);for(var i=1;i<3;++i)a.write_shift(1,0);return jf({auto:1},a),a.write_shift(-4,-1),a.write_shift(-4,-1),eT(t,a),a.slice(0,a.l)}function kI(t){var s=Ln(t);return[s]}function AI(t,s,a){return a==null&&(a=Ge(8)),Io(s,a)}function _I(t){var s=Bo(t);return[s]}function DI(t,s,a){return a==null&&(a=Ge(4)),zo(s,a)}function OI(t){var s=Ln(t),a=t.read_shift(1);return[s,a,"b"]}function RI(t,s,a){return a==null&&(a=Ge(9)),Io(s,a),a.write_shift(1,t.v?1:0),a}function PI(t){var s=Bo(t),a=t.read_shift(1);return[s,a,"b"]}function MI(t,s,a){return a==null&&(a=Ge(5)),zo(s,a),a.write_shift(1,t.v?1:0),a}function FI(t){var s=Ln(t),a=t.read_shift(1);return[s,a,"e"]}function LI(t,s,a){return a==null&&(a=Ge(9)),Io(s,a),a.write_shift(1,t.v),a}function II(t){var s=Bo(t),a=t.read_shift(1);return[s,a,"e"]}function BI(t,s,a){return a==null&&(a=Ge(8)),zo(s,a),a.write_shift(1,t.v),a.write_shift(2,0),a.write_shift(1,0),a}function zI(t){var s=Ln(t),a=t.read_shift(4);return[s,a,"s"]}function UI(t,s,a){return a==null&&(a=Ge(12)),Io(s,a),a.write_shift(4,s.v),a}function VI(t){var s=Bo(t),a=t.read_shift(4);return[s,a,"s"]}function $I(t,s,a){return a==null&&(a=Ge(8)),zo(s,a),a.write_shift(4,s.v),a}function HI(t){var s=Ln(t),a=ud(t);return[s,a,"n"]}function WI(t,s,a){return a==null&&(a=Ge(16)),Io(s,a),Mo(t.v,a),a}function GI(t){var s=Bo(t),a=ud(t);return[s,a,"n"]}function qI(t,s,a){return a==null&&(a=Ge(12)),zo(s,a),Mo(t.v,a),a}function KI(t){var s=Ln(t),a=tT(t);return[s,a,"n"]}function YI(t,s,a){return a==null&&(a=Ge(12)),Io(s,a),sT(t.v,a),a}function XI(t){var s=Bo(t),a=tT(t);return[s,a,"n"]}function QI(t,s,a){return a==null&&(a=Ge(8)),zo(s,a),sT(t.v,a),a}function ZI(t){var s=Ln(t),a=$v(t);return[s,a,"is"]}function JI(t){var s=Ln(t),a=_r(t);return[s,a,"str"]}function eB(t,s,a){return a==null&&(a=Ge(12+4*t.v.length)),Io(s,a),rr(t.v,a),a.length>a.l?a.slice(0,a.l):a}function tB(t){var s=Bo(t),a=_r(t);return[s,a,"str"]}function sB(t,s,a){return a==null&&(a=Ge(8+4*t.v.length)),zo(s,a),rr(t.v,a),a.length>a.l?a.slice(0,a.l):a}function aB(t,s,a){var r=t.l+s,i=Ln(t);i.r=a["!row"];var o=t.read_shift(1),c=[i,o,"b"];if(a.cellFormula){t.l+=2;var u=Zf(t,r-t.l,a);c[3]=Zc(u,null,i,a.supbooks,a)}else t.l=r;return c}function rB(t,s,a){var r=t.l+s,i=Ln(t);i.r=a["!row"];var o=t.read_shift(1),c=[i,o,"e"];if(a.cellFormula){t.l+=2;var u=Zf(t,r-t.l,a);c[3]=Zc(u,null,i,a.supbooks,a)}else t.l=r;return c}function nB(t,s,a){var r=t.l+s,i=Ln(t);i.r=a["!row"];var o=ud(t),c=[i,o,"n"];if(a.cellFormula){t.l+=2;var u=Zf(t,r-t.l,a);c[3]=Zc(u,null,i,a.supbooks,a)}else t.l=r;return c}function iB(t,s,a){var r=t.l+s,i=Ln(t);i.r=a["!row"];var o=_r(t),c=[i,o,"str"];if(a.cellFormula){t.l+=2;var u=Zf(t,r-t.l,a);c[3]=Zc(u,null,i,a.supbooks,a)}else t.l=r;return c}var lB=Uo,oB=dd;function cB(t,s){return s==null&&(s=Ge(4)),s.write_shift(4,t),s}function dB(t,s){var a=t.l+s,r=Uo(t),i=Hv(t),o=_r(t),c=_r(t),u=_r(t);t.l=a;var f={rfx:r,relId:i,loc:o,display:u};return c&&(f.Tooltip=c),f}function uB(t,s){var a=Ge(50+4*(t[1].Target.length+(t[1].Tooltip||"").length));dd({s:ar(t[0]),e:ar(t[0])},a),Wv("rId"+s,a);var r=t[1].Target.indexOf("#"),i=r==-1?"":t[1].Target.slice(r+1);return rr(i||"",a),rr(t[1].Tooltip||"",a),rr("",a),a.slice(0,a.l)}function mB(){}function hB(t,s,a){var r=t.l+s,i=aT(t),o=t.read_shift(1),c=[i];if(c[2]=o,a.cellFormula){var u=tI(t,r-t.l,a);c[1]=u}else t.l=r;return c}function fB(t,s,a){var r=t.l+s,i=Uo(t),o=[i];if(a.cellFormula){var c=aI(t,r-t.l,a);o[1]=c,t.l=r}else t.l=r;return o}function xB(t,s,a){a==null&&(a=Ge(18));var r=Jf(t,s);a.write_shift(-4,t),a.write_shift(-4,t),a.write_shift(4,(r.width||10)*256),a.write_shift(4,0);var i=0;return s.hidden&&(i|=1),typeof r.width=="number"&&(i|=2),s.level&&(i|=s.level<<8),a.write_shift(2,i),a}var zT=["left","right","top","bottom","header","footer"];function pB(t){var s={};return zT.forEach(function(a){s[a]=ud(t)}),s}function gB(t,s){return s==null&&(s=Ge(48)),IT(t),zT.forEach(function(a){Mo(t[a],s)}),s}function vB(t){var s=t.read_shift(2);return t.l+=28,{RTL:s&32}}function jB(t,s,a){a==null&&(a=Ge(30));var r=924;return(((s||{}).Views||[])[0]||{}).RTL&&(r|=32),a.write_shift(2,r),a.write_shift(4,0),a.write_shift(4,0),a.write_shift(4,0),a.write_shift(1,0),a.write_shift(1,0),a.write_shift(2,0),a.write_shift(2,100),a.write_shift(2,0),a.write_shift(2,0),a.write_shift(2,0),a.write_shift(4,0),a}function yB(t){var s=Ge(24);return s.write_shift(4,4),s.write_shift(4,1),dd(t,s),s}function NB(t,s){return s==null&&(s=Ge(66)),s.write_shift(2,t.password?NT(t.password):0),s.write_shift(4,1),[["objects",!1],["scenarios",!1],["formatCells",!0],["formatColumns",!0],["formatRows",!0],["insertColumns",!0],["insertRows",!0],["insertHyperlinks",!0],["deleteColumns",!0],["deleteRows",!0],["selectLockedCells",!1],["sort",!0],["autoFilter",!0],["pivotTables",!0],["selectUnlockedCells",!1]].forEach(function(a){a[1]?s.write_shift(4,t[a[0]]!=null&&!t[a[0]]?1:0):s.write_shift(4,t[a[0]]!=null&&t[a[0]]?0:1)}),s}function bB(){}function wB(){}function SB(t,s,a,r,i,o,c){if(s.v===void 0)return!1;var u="";switch(s.t){case"b":u=s.v?"1":"0";break;case"d":s=en(s),s.z=s.z||Da[14],s.v=Jr(Lr(s.v)),s.t="n";break;case"n":case"e":u=""+s.v;break;default:u=s.v;break}var f={r:a,c:r};switch(f.s=Hl(i.cellXfs,s,i),s.l&&o["!links"].push([Ys(f),s.l]),s.c&&o["!comments"].push([Ys(f),s.c]),s.t){case"s":case"str":return i.bookSST?(u=Qv(i.Strings,s.v,i.revStrings),f.t="s",f.v=u,c?at(t,18,$I(s,f)):at(t,7,UI(s,f))):(f.t="str",c?at(t,17,sB(s,f)):at(t,6,eB(s,f))),!0;case"n":return s.v==(s.v|0)&&s.v>-1e3&&s.v<1e3?c?at(t,13,QI(s,f)):at(t,2,YI(s,f)):c?at(t,16,qI(s,f)):at(t,5,WI(s,f)),!0;case"b":return f.t="b",c?at(t,15,MI(s,f)):at(t,4,RI(s,f)),!0;case"e":return f.t="e",c?at(t,14,BI(s,f)):at(t,3,LI(s,f)),!0}return c?at(t,12,DI(s,f)):at(t,1,AI(s,f)),!0}function CB(t,s,a,r){var i=ua(s["!ref"]||"A1"),o,c="",u=[];at(t,145);var f=Array.isArray(s),x=i.e.r;s["!rows"]&&(x=Math.max(i.e.r,s["!rows"].length-1));for(var h=i.s.r;h<=x;++h){c=vr(h),bI(t,s,i,h);var p=!1;if(h<=i.e.r)for(var g=i.s.c;g<=i.e.c;++g){h===i.s.r&&(u[g]=Ar(g)),o=u[g]+c;var y=f?(s[h]||[])[g]:s[o];if(!y){p=!1;continue}p=SB(t,y,h,g,r,s,p)}}at(t,146)}function TB(t,s){!s||!s["!merges"]||(at(t,177,cB(s["!merges"].length)),s["!merges"].forEach(function(a){at(t,176,oB(a))}),at(t,178))}function EB(t,s){!s||!s["!cols"]||(at(t,390),s["!cols"].forEach(function(a,r){a&&at(t,60,xB(r,a))}),at(t,391))}function kB(t,s){!s||!s["!ref"]||(at(t,648),at(t,649,yB(ua(s["!ref"]))),at(t,650))}function AB(t,s,a){s["!links"].forEach(function(r){if(r[1].Target){var i=$s(a,-1,r[1].Target.replace(/#.*$/,""),Rs.HLINK);at(t,494,uB(r,i))}}),delete s["!links"]}function _B(t,s,a,r){if(s["!comments"].length>0){var i=$s(r,-1,"../drawings/vmlDrawing"+(a+1)+".vml",Rs.VML);at(t,551,Wv("rId"+i)),s["!legacy"]=i}}function DB(t,s,a,r){if(s["!autofilter"]){var i=s["!autofilter"],o=typeof i.ref=="string"?i.ref:Ga(i.ref);a.Workbook||(a.Workbook={Sheets:[]}),a.Workbook.Names||(a.Workbook.Names=[]);var c=a.Workbook.Names,u=xn(o);u.s.r==u.e.r&&(u.e.r=xn(s["!ref"]).e.r,o=Ga(u));for(var f=0;f<c.length;++f){var x=c[f];if(x.Name=="_xlnm._FilterDatabase"&&x.Sheet==r){x.Ref="'"+a.SheetNames[r]+"'!"+o;break}}f==c.length&&c.push({Name:"_xlnm._FilterDatabase",Sheet:r,Ref:"'"+a.SheetNames[r]+"'!"+o}),at(t,161,dd(ua(o))),at(t,162)}}function OB(t,s,a){at(t,133),at(t,137,jB(s,a)),at(t,138),at(t,134)}function RB(t,s){s["!protect"]&&at(t,535,NB(s["!protect"]))}function PB(t,s,a,r){var i=Zr(),o=a.SheetNames[t],c=a.Sheets[o]||{},u=o;try{a&&a.Workbook&&(u=a.Workbook.Sheets[t].CodeName||u)}catch{}var f=ua(c["!ref"]||"A1");if(f.e.c>16383||f.e.r>1048575){if(s.WTF)throw new Error("Range "+(c["!ref"]||"A1")+" exceeds format limit A1:XFD1048576");f.e.c=Math.min(f.e.c,16383),f.e.r=Math.min(f.e.c,1048575)}return c["!links"]=[],c["!comments"]=[],at(i,129),(a.vbaraw||c["!outline"])&&at(i,147,EI(u,c["!outline"])),at(i,148,SI(f)),OB(i,c,a.Workbook),EB(i,c),CB(i,c,t,s),RB(i,c),DB(i,c,a,t),TB(i,c),AB(i,c,r),c["!margins"]&&at(i,476,gB(c["!margins"])),(!s||s.ignoreEC||s.ignoreEC==null)&&kB(i,c),_B(i,c,t,r),at(i,130),i.end()}function MB(t,s){t.l+=10;var a=_r(t);return{name:a}}var FB=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]];function LB(t){return!t.Workbook||!t.Workbook.WBProps?"false":fM(t.Workbook.WBProps.date1904)?"true":"false"}var IB="][*?/\\".split("");function UT(t,s){if(t.length>31)throw new Error("Sheet names cannot exceed 31 chars");var a=!0;return IB.forEach(function(r){if(t.indexOf(r)!=-1)throw new Error("Sheet name cannot contain : \\ / ? * [ ]")}),a}function BB(t,s,a){t.forEach(function(r,i){UT(r);for(var o=0;o<i;++o)if(r==t[o])throw new Error("Duplicate Sheet Name: "+r);if(a){var c=s&&s[i]&&s[i].CodeName||r;if(c.charCodeAt(0)==95&&c.length>22)throw new Error("Bad Code Name: Worksheet"+c)}})}function zB(t){if(!t||!t.SheetNames||!t.Sheets)throw new Error("Invalid Workbook");if(!t.SheetNames.length)throw new Error("Workbook is empty");var s=t.Workbook&&t.Workbook.Sheets||[];BB(t.SheetNames,s,!!t.vbaraw);for(var a=0;a<t.SheetNames.length;++a)oI(t.Sheets[t.SheetNames[a]],t.SheetNames[a],a)}function VT(t){var s=[Ya];s[s.length]=ut("workbook",null,{xmlns:od[0],"xmlns:r":sr.r});var a=t.Workbook&&(t.Workbook.Names||[]).length>0,r={codeName:"ThisWorkbook"};t.Workbook&&t.Workbook.WBProps&&(FB.forEach(function(u){t.Workbook.WBProps[u[0]]!=null&&t.Workbook.WBProps[u[0]]!=u[1]&&(r[u[0]]=t.Workbook.WBProps[u[0]])}),t.Workbook.WBProps.CodeName&&(r.codeName=t.Workbook.WBProps.CodeName,delete r.CodeName)),s[s.length]=ut("workbookPr",null,r);var i=t.Workbook&&t.Workbook.Sheets||[],o=0;if(i&&i[0]&&i[0].Hidden){for(s[s.length]="<bookViews>",o=0;o!=t.SheetNames.length&&!(!i[o]||!i[o].Hidden);++o);o==t.SheetNames.length&&(o=0),s[s.length]='<workbookView firstSheet="'+o+'" activeTab="'+o+'"/>',s[s.length]="</bookViews>"}for(s[s.length]="<sheets>",o=0;o!=t.SheetNames.length;++o){var c={name:qs(t.SheetNames[o].slice(0,31))};if(c.sheetId=""+(o+1),c["r:id"]="rId"+(o+1),i[o])switch(i[o].Hidden){case 1:c.state="hidden";break;case 2:c.state="veryHidden";break}s[s.length]=ut("sheet",null,c)}return s[s.length]="</sheets>",a&&(s[s.length]="<definedNames>",t.Workbook&&t.Workbook.Names&&t.Workbook.Names.forEach(function(u){var f={name:u.Name};u.Comment&&(f.comment=u.Comment),u.Sheet!=null&&(f.localSheetId=""+u.Sheet),u.Hidden&&(f.hidden="1"),u.Ref&&(s[s.length]=ut("definedName",qs(u.Ref),f))}),s[s.length]="</definedNames>"),s.length>2&&(s[s.length]="</workbook>",s[1]=s[1].replace("/>",">")),s.join("")}function UB(t,s){var a={};return a.Hidden=t.read_shift(4),a.iTabID=t.read_shift(4),a.strRelID=Og(t),a.name=_r(t),a}function VB(t,s){return s||(s=Ge(127)),s.write_shift(4,t.Hidden),s.write_shift(4,t.iTabID),Wv(t.strRelID,s),rr(t.name.slice(0,31),s),s.length>s.l?s.slice(0,s.l):s}function $B(t,s){var a={},r=t.read_shift(4);a.defaultThemeVersion=t.read_shift(4);var i=s>8?_r(t):"";return i.length>0&&(a.CodeName=i),a.autoCompressPictures=!!(r&65536),a.backupFile=!!(r&64),a.checkCompatibility=!!(r&4096),a.date1904=!!(r&1),a.filterPrivacy=!!(r&8),a.hidePivotFieldList=!!(r&1024),a.promptedSolutions=!!(r&16),a.publishItems=!!(r&2048),a.refreshAllConnections=!!(r&262144),a.saveExternalLinkValues=!!(r&128),a.showBorderUnselectedTables=!!(r&4),a.showInkAnnotation=!!(r&32),a.showObjects=["all","placeholders","none"][r>>13&3],a.showPivotChartFilter=!!(r&32768),a.updateLinks=["userSet","never","always"][r>>8&3],a}function HB(t,s){s||(s=Ge(72));var a=0;return t&&t.filterPrivacy&&(a|=8),s.write_shift(4,a),s.write_shift(4,0),eT(t&&t.CodeName||"ThisWorkbook",s),s.slice(0,s.l)}function WB(t,s,a){var r=t.l+s;t.l+=4,t.l+=1;var i=t.read_shift(4),o=LM(t),c=sI(t,0,a),u=Hv(t);t.l=r;var f={Name:o,Ptg:c};return i<268435455&&(f.Sheet=i),u&&(f.Comment=u),f}function GB(t,s){at(t,143);for(var a=0;a!=s.SheetNames.length;++a){var r=s.Workbook&&s.Workbook.Sheets&&s.Workbook.Sheets[a]&&s.Workbook.Sheets[a].Hidden||0,i={Hidden:r,iTabID:a+1,strRelID:"rId"+(a+1),name:s.SheetNames[a]};at(t,156,VB(i))}at(t,144)}function qB(t,s){s||(s=Ge(127));for(var a=0;a!=4;++a)s.write_shift(4,0);return rr("SheetJS",s),rr(uf.version,s),rr(uf.version,s),rr("7262",s),s.length>s.l?s.slice(0,s.l):s}function KB(t,s){s||(s=Ge(29)),s.write_shift(-4,0),s.write_shift(-4,460),s.write_shift(4,28800),s.write_shift(4,17600),s.write_shift(4,500),s.write_shift(4,t),s.write_shift(4,t);var a=120;return s.write_shift(1,a),s.length>s.l?s.slice(0,s.l):s}function YB(t,s){if(!(!s.Workbook||!s.Workbook.Sheets)){for(var a=s.Workbook.Sheets,r=0,i=-1,o=-1;r<a.length;++r)!a[r]||!a[r].Hidden&&i==-1?i=r:a[r].Hidden==1&&o==-1&&(o=r);o>i||(at(t,135),at(t,158,KB(i)),at(t,136))}}function XB(t,s){var a=Zr();return at(a,131),at(a,128,qB()),at(a,153,HB(t.Workbook&&t.Workbook.WBProps||null)),YB(a,t),GB(a,t),at(a,132),a.end()}function QB(t,s,a){return(s.slice(-4)===".bin"?XB:VT)(t)}function ZB(t,s,a,r,i){return(s.slice(-4)===".bin"?PB:BT)(t,a,r,i)}function JB(t,s,a){return(s.slice(-4)===".bin"?gF:ST)(t,a)}function e7(t,s,a){return(s.slice(-4)===".bin"?H8:yT)(t,a)}function t7(t,s,a){return(s.slice(-4)===".bin"?RF:AT)(t)}function s7(t){return(t.slice(-4)===".bin"?CF:ET)()}function a7(t,s){var a=[];return t.Props&&a.push(JM(t.Props,s)),t.Custprops&&a.push(e8(t.Props,t.Custprops)),a.join("")}function r7(){return""}function n7(t,s){var a=['<Style ss:ID="Default" ss:Name="Normal"><NumberFormat/></Style>'];return s.cellXfs.forEach(function(r,i){var o=[];o.push(ut("NumberFormat",null,{"ss:Format":qs(Da[r.numFmtId])}));var c={"ss:ID":"s"+(21+i)};a.push(ut("Style",o.join(""),c))}),ut("Styles",a.join(""))}function $T(t){return ut("NamedRange",null,{"ss:Name":t.Name,"ss:RefersTo":"="+Yv(t.Ref,{r:0,c:0})})}function i7(t){if(!((t||{}).Workbook||{}).Names)return"";for(var s=t.Workbook.Names,a=[],r=0;r<s.length;++r){var i=s[r];i.Sheet==null&&(i.Name.match(/^_xlfn\./)||a.push($T(i)))}return ut("Names",a.join(""))}function l7(t,s,a,r){if(!t||!((r||{}).Workbook||{}).Names)return"";for(var i=r.Workbook.Names,o=[],c=0;c<i.length;++c){var u=i[c];u.Sheet==a&&(u.Name.match(/^_xlfn\./)||o.push($T(u)))}return o.join("")}function o7(t,s,a,r){if(!t)return"";var i=[];if(t["!margins"]&&(i.push("<PageSetup>"),t["!margins"].header&&i.push(ut("Header",null,{"x:Margin":t["!margins"].header})),t["!margins"].footer&&i.push(ut("Footer",null,{"x:Margin":t["!margins"].footer})),i.push(ut("PageMargins",null,{"x:Bottom":t["!margins"].bottom||"0.75","x:Left":t["!margins"].left||"0.7","x:Right":t["!margins"].right||"0.7","x:Top":t["!margins"].top||"0.75"})),i.push("</PageSetup>")),r&&r.Workbook&&r.Workbook.Sheets&&r.Workbook.Sheets[a])if(r.Workbook.Sheets[a].Hidden)i.push(ut("Visible",r.Workbook.Sheets[a].Hidden==1?"SheetHidden":"SheetVeryHidden",{}));else{for(var o=0;o<a&&!(r.Workbook.Sheets[o]&&!r.Workbook.Sheets[o].Hidden);++o);o==a&&i.push("<Selected/>")}return((((r||{}).Workbook||{}).Views||[])[0]||{}).RTL&&i.push("<DisplayRightToLeft/>"),t["!protect"]&&(i.push(pr("ProtectContents","True")),t["!protect"].objects&&i.push(pr("ProtectObjects","True")),t["!protect"].scenarios&&i.push(pr("ProtectScenarios","True")),t["!protect"].selectLockedCells!=null&&!t["!protect"].selectLockedCells?i.push(pr("EnableSelection","NoSelection")):t["!protect"].selectUnlockedCells!=null&&!t["!protect"].selectUnlockedCells&&i.push(pr("EnableSelection","UnlockedCells")),[["formatCells","AllowFormatCells"],["formatColumns","AllowSizeCols"],["formatRows","AllowSizeRows"],["insertColumns","AllowInsertCols"],["insertRows","AllowInsertRows"],["insertHyperlinks","AllowInsertHyperlinks"],["deleteColumns","AllowDeleteCols"],["deleteRows","AllowDeleteRows"],["sort","AllowSort"],["autoFilter","AllowFilter"],["pivotTables","AllowUsePivotTables"]].forEach(function(c){t["!protect"][c[0]]&&i.push("<"+c[1]+"/>")})),i.length==0?"":ut("WorksheetOptions",i.join(""),{xmlns:hn.x})}function c7(t){return t.map(function(s){var a=hM(s.t||""),r=ut("ss:Data",a,{xmlns:"http://www.w3.org/TR/REC-html40"});return ut("Comment",r,{"ss:Author":s.a})}).join("")}function d7(t,s,a,r,i,o,c){if(!t||t.v==null&&t.f==null)return"";var u={};if(t.f&&(u["ss:Formula"]="="+qs(Yv(t.f,c))),t.F&&t.F.slice(0,s.length)==s){var f=ar(t.F.slice(s.length+1));u["ss:ArrayRange"]="RC:R"+(f.r==c.r?"":"["+(f.r-c.r)+"]")+"C"+(f.c==c.c?"":"["+(f.c-c.c)+"]")}if(t.l&&t.l.Target&&(u["ss:HRef"]=qs(t.l.Target),t.l.Tooltip&&(u["x:HRefScreenTip"]=qs(t.l.Tooltip))),a["!merges"])for(var x=a["!merges"],h=0;h!=x.length;++h)x[h].s.c!=c.c||x[h].s.r!=c.r||(x[h].e.c>x[h].s.c&&(u["ss:MergeAcross"]=x[h].e.c-x[h].s.c),x[h].e.r>x[h].s.r&&(u["ss:MergeDown"]=x[h].e.r-x[h].s.r));var p="",g="";switch(t.t){case"z":if(!r.sheetStubs)return"";break;case"n":p="Number",g=String(t.v);break;case"b":p="Boolean",g=t.v?"1":"0";break;case"e":p="Error",g=nm[t.v];break;case"d":p="DateTime",g=new Date(t.v).toISOString(),t.z==null&&(t.z=t.z||Da[14]);break;case"s":p="String",g=mM(t.v||"");break}var y=Hl(r.cellXfs,t,r);u["ss:StyleID"]="s"+(21+y),u["ss:Index"]=c.c+1;var b=t.v!=null?g:"",N=t.t=="z"?"":'<Data ss:Type="'+p+'">'+b+"</Data>";return(t.c||[]).length>0&&(N+=c7(t.c)),ut("Cell",N,u)}function u7(t,s){var a='<Row ss:Index="'+(t+1)+'"';return s&&(s.hpt&&!s.hpx&&(s.hpx=wT(s.hpt)),s.hpx&&(a+=' ss:AutoFitHeight="0" ss:Height="'+s.hpx+'"'),s.hidden&&(a+=' ss:Hidden="1"')),a+">"}function m7(t,s,a,r){if(!t["!ref"])return"";var i=ua(t["!ref"]),o=t["!merges"]||[],c=0,u=[];t["!cols"]&&t["!cols"].forEach(function(S,C){qv(S);var k=!!S.width,A=Jf(C,S),G={"ss:Index":C+1};k&&(G["ss:Width"]=Nf(A.width)),S.hidden&&(G["ss:Hidden"]="1"),u.push(ut("Column",null,G))});for(var f=Array.isArray(t),x=i.s.r;x<=i.e.r;++x){for(var h=[u7(x,(t["!rows"]||[])[x])],p=i.s.c;p<=i.e.c;++p){var g=!1;for(c=0;c!=o.length;++c)if(!(o[c].s.c>p)&&!(o[c].s.r>x)&&!(o[c].e.c<p)&&!(o[c].e.r<x)){(o[c].s.c!=p||o[c].s.r!=x)&&(g=!0);break}if(!g){var y={r:x,c:p},b=Ys(y),N=f?(t[x]||[])[p]:t[b];h.push(d7(N,b,t,s,a,r,y))}}h.push("</Row>"),h.length>2&&u.push(h.join(""))}return u.join("")}function h7(t,s,a){var r=[],i=a.SheetNames[t],o=a.Sheets[i],c=o?l7(o,s,t,a):"";return c.length>0&&r.push("<Names>"+c+"</Names>"),c=o?m7(o,s,t,a):"",c.length>0&&r.push("<Table>"+c+"</Table>"),r.push(o7(o,s,t,a)),r.join("")}function f7(t,s){s||(s={}),t.SSF||(t.SSF=en(Da)),t.SSF&&(Kf(),qf(t.SSF),s.revssf=Yf(t.SSF),s.revssf[t.SSF[65535]]=0,s.ssf=t.SSF,s.cellXfs=[],Hl(s.cellXfs,{},{revssf:{General:0}}));var a=[];a.push(a7(t,s)),a.push(r7()),a.push(""),a.push("");for(var r=0;r<t.SheetNames.length;++r)a.push(ut("Worksheet",h7(r,s,t),{"ss:Name":qs(t.SheetNames[r])}));return a[2]=n7(t,s),a[3]=i7(t),Ya+ut("Workbook",a.join(""),{xmlns:hn.ss,"xmlns:o":hn.o,"xmlns:x":hn.x,"xmlns:ss":hn.ss,"xmlns:dt":hn.dt,"xmlns:html":hn.html})}var D0={SI:"e0859ff2f94f6810ab9108002b27b3d9",DSI:"02d5cdd59c2e1b10939708002b2cf9ae",UDI:"05d5cdd59c2e1b10939708002b2cf9ae"};function x7(t,s){var a=[],r=[],i=[],o=0,c,u=pw(Aw,"n"),f=pw(_w,"n");if(t.Props)for(c=yr(t.Props),o=0;o<c.length;++o)(Object.prototype.hasOwnProperty.call(u,c[o])?a:Object.prototype.hasOwnProperty.call(f,c[o])?r:i).push([c[o],t.Props[c[o]]]);if(t.Custprops)for(c=yr(t.Custprops),o=0;o<c.length;++o)Object.prototype.hasOwnProperty.call(t.Props||{},c[o])||(Object.prototype.hasOwnProperty.call(u,c[o])?a:Object.prototype.hasOwnProperty.call(f,c[o])?r:i).push([c[o],t.Custprops[c[o]]]);var x=[];for(o=0;o<i.length;++o)hT.indexOf(i[o][0])>-1||dT.indexOf(i[o][0])>-1||i[o][1]!=null&&x.push(i[o]);r.length&&ea.utils.cfb_add(s,"/SummaryInformation",Mw(r,D0.SI,f,_w)),(a.length||x.length)&&ea.utils.cfb_add(s,"/DocumentSummaryInformation",Mw(a,D0.DSI,u,Aw,x.length?x:null,D0.UDI))}function p7(t,s){var a=s||{},r=ea.utils.cfb_new({root:"R"}),i="/Workbook";switch(a.bookType||"xls"){case"xls":a.bookType="biff8";case"xla":a.bookType||(a.bookType="xla");case"biff8":i="/Workbook",a.biff=8;break;case"biff5":i="/Book",a.biff=5;break;default:throw new Error("invalid type "+a.bookType+" for XLS CFB")}return ea.utils.cfb_add(r,i,HT(t,a)),a.biff==8&&(t.Props||t.Custprops)&&x7(t,r),a.biff==8&&t.vbaraw&&PF(r,ea.read(t.vbaraw,{type:typeof t.vbaraw=="string"?"binary":"buffer"})),r}var g7={0:{f:yI},1:{f:kI},2:{f:KI},3:{f:FI},4:{f:OI},5:{f:HI},6:{f:JI},7:{f:zI},8:{f:iB},9:{f:nB},10:{f:aB},11:{f:rB},12:{f:_I},13:{f:XI},14:{f:II},15:{f:PI},16:{f:GI},17:{f:tB},18:{f:VI},19:{f:$v},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:WB},40:{},42:{},43:{f:J8},44:{f:Q8},45:{f:sF},46:{f:rF},47:{f:aF},48:{},49:{f:_M},50:{},51:{f:yF},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:D8},62:{f:ZI},63:{f:TF},64:{f:bB},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:ji,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:vB},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:TI},148:{f:wI,p:16},151:{f:mB},152:{},153:{f:$B},154:{},155:{},156:{f:UB},157:{},158:{},159:{T:1,f:U8},160:{T:-1},161:{T:1,f:Uo},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:lB},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:vF},336:{T:-1},337:{f:wF,T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:Og},357:{},358:{},359:{},360:{T:1},361:{},362:{f:C8},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:hB},427:{f:fB},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:pB},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:CI},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:dB},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:Og},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:DF},633:{T:1},634:{T:-1},635:{T:1,f:AF},636:{T:-1},637:{f:PM},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:MB},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:wB},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}};function mt(t,s,a,r){var i=s;if(!isNaN(i)){var o=r||(a||[]).length||0,c=t.next(4);c.write_shift(2,i),c.write_shift(2,o),o>0&&zv(a)&&t.push(a)}}function v7(t,s,a,r){var i=(a||[]).length||0;if(i<=8224)return mt(t,s,a,i);var o=s;if(!isNaN(o)){for(var c=a.parts||[],u=0,f=0,x=0;x+(c[u]||8224)<=8224;)x+=c[u]||8224,u++;var h=t.next(4);for(h.write_shift(2,o),h.write_shift(2,x),t.push(a.slice(f,f+x)),f+=x;f<i;){for(h=t.next(4),h.write_shift(2,60),x=0;x+(c[u]||8224)<=8224;)x+=c[u]||8224,u++;h.write_shift(2,x),t.push(a.slice(f,f+x)),f+=x}}}function lm(t,s,a){return t||(t=Ge(7)),t.write_shift(2,s),t.write_shift(2,a),t.write_shift(2,0),t.write_shift(1,0),t}function j7(t,s,a,r){var i=Ge(9);return lm(i,t,s),xT(a,r||"b",i),i}function y7(t,s,a){var r=Ge(8+2*a.length);return lm(r,t,s),r.write_shift(1,a.length),r.write_shift(a.length,a,"sbcs"),r.l<r.length?r.slice(0,r.l):r}function N7(t,s,a,r){if(s.v!=null)switch(s.t){case"d":case"n":var i=s.t=="d"?Jr(Lr(s.v)):s.v;i==(i|0)&&i>=0&&i<65536?mt(t,2,M8(a,r,i)):mt(t,3,P8(a,r,i));return;case"b":case"e":mt(t,5,j7(a,r,s.v,s.t));return;case"s":case"str":mt(t,4,y7(a,r,(s.v||"").slice(0,255)));return}mt(t,1,lm(null,a,r))}function b7(t,s,a,r){var i=Array.isArray(s),o=ua(s["!ref"]||"A1"),c,u="",f=[];if(o.e.c>255||o.e.r>16383){if(r.WTF)throw new Error("Range "+(s["!ref"]||"A1")+" exceeds format limit A1:IV16384");o.e.c=Math.min(o.e.c,255),o.e.r=Math.min(o.e.c,16383),c=Ga(o)}for(var x=o.s.r;x<=o.e.r;++x){u=vr(x);for(var h=o.s.c;h<=o.e.c;++h){x===o.s.r&&(f[h]=Ar(h)),c=f[h]+u;var p=i?(s[x]||[])[h]:s[c];p&&N7(t,p,x,h)}}}function w7(t,s){for(var a=s||{},r=Zr(),i=0,o=0;o<t.SheetNames.length;++o)t.SheetNames[o]==a.sheet&&(i=o);if(i==0&&a.sheet&&t.SheetNames[0]!=a.sheet)throw new Error("Sheet not found: "+a.sheet);return mt(r,a.biff==4?1033:a.biff==3?521:9,Gv(t,16,a)),b7(r,t.Sheets[t.SheetNames[i]],i,a),mt(r,10),r.end()}function S7(t,s,a){mt(t,49,g8({sz:12,name:"Arial"},a))}function C7(t,s,a){s&&[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var i=r[0];i<=r[1];++i)s[i]!=null&&mt(t,1054,y8(i,s[i],a))})}function T7(t,s){var a=Ge(19);a.write_shift(4,2151),a.write_shift(4,0),a.write_shift(4,0),a.write_shift(2,3),a.write_shift(1,1),a.write_shift(4,0),mt(t,2151,a),a=Ge(39),a.write_shift(4,2152),a.write_shift(4,0),a.write_shift(4,0),a.write_shift(2,3),a.write_shift(1,0),a.write_shift(4,0),a.write_shift(2,1),a.write_shift(4,4),a.write_shift(2,0),vT(ua(s["!ref"]||"A1"),a),a.write_shift(4,4),mt(t,2152,a)}function E7(t,s){for(var a=0;a<16;++a)mt(t,224,Lw({numFmtId:0,style:!0},0,s));s.cellXfs.forEach(function(r){mt(t,224,Lw(r,0,s))})}function k7(t,s){for(var a=0;a<s["!links"].length;++a){var r=s["!links"][a];mt(t,440,k8(r)),r[1].Tooltip&&mt(t,2048,A8(r))}delete s["!links"]}function A7(t,s){if(s){var a=0;s.forEach(function(r,i){++a<=256&&r&&mt(t,125,O8(Jf(i,r),i))})}}function _7(t,s,a,r,i){var o=16+Hl(i.cellXfs,s,i);if(s.v==null&&!s.bf){mt(t,513,Fo(a,r,o));return}if(s.bf)mt(t,6,eI(s,a,r,i,o));else switch(s.t){case"d":case"n":var c=s.t=="d"?Jr(Lr(s.v)):s.v;mt(t,515,S8(a,r,c,o));break;case"b":case"e":mt(t,517,w8(a,r,s.v,o,i,s.t));break;case"s":case"str":if(i.bookSST){var u=Qv(i.Strings,s.v,i.revStrings);mt(t,253,v8(a,r,u,o))}else mt(t,516,j8(a,r,(s.v||"").slice(0,255),o,i));break;default:mt(t,513,Fo(a,r,o))}}function D7(t,s,a){var r=Zr(),i=a.SheetNames[t],o=a.Sheets[i]||{},c=(a||{}).Workbook||{},u=(c.Sheets||[])[t]||{},f=Array.isArray(o),x=s.biff==8,h,p="",g=[],y=ua(o["!ref"]||"A1"),b=x?65536:16384;if(y.e.c>255||y.e.r>=b){if(s.WTF)throw new Error("Range "+(o["!ref"]||"A1")+" exceeds format limit A1:IV16384");y.e.c=Math.min(y.e.c,255),y.e.r=Math.min(y.e.c,b-1)}mt(r,2057,Gv(a,16,s)),mt(r,13,Dn(1)),mt(r,12,Dn(100)),mt(r,15,Rr(!0)),mt(r,17,Rr(!1)),mt(r,16,Mo(.001)),mt(r,95,Rr(!0)),mt(r,42,Rr(!1)),mt(r,43,Rr(!1)),mt(r,130,Dn(1)),mt(r,128,b8()),mt(r,131,Rr(!1)),mt(r,132,Rr(!1)),x&&A7(r,o["!cols"]),mt(r,512,N8(y,s)),x&&(o["!links"]=[]);for(var N=y.s.r;N<=y.e.r;++N){p=vr(N);for(var S=y.s.c;S<=y.e.c;++S){N===y.s.r&&(g[S]=Ar(S)),h=g[S]+p;var C=f?(o[N]||[])[S]:o[h];C&&(_7(r,C,N,S,s),x&&C.l&&o["!links"].push([h,C.l]))}}var k=u.CodeName||u.name||i;return x&&mt(r,574,p8((c.Views||[])[0])),x&&(o["!merges"]||[]).length&&mt(r,229,E8(o["!merges"])),x&&k7(r,o),mt(r,442,gT(k)),x&&T7(r,o),mt(r,10),r.end()}function O7(t,s,a){var r=Zr(),i=(t||{}).Workbook||{},o=i.Sheets||[],c=i.WBProps||{},u=a.biff==8,f=a.biff==5;if(mt(r,2057,Gv(t,5,a)),a.bookType=="xla"&&mt(r,135),mt(r,225,u?Dn(1200):null),mt(r,193,a8(2)),f&&mt(r,191),f&&mt(r,192),mt(r,226),mt(r,92,m8("SheetJS",a)),mt(r,66,Dn(u?1200:1252)),u&&mt(r,353,Dn(0)),u&&mt(r,448),mt(r,317,R8(t.SheetNames.length)),u&&t.vbaraw&&mt(r,211),u&&t.vbaraw){var x=c.CodeName||"ThisWorkbook";mt(r,442,gT(x))}mt(r,156,Dn(17)),mt(r,25,Rr(!1)),mt(r,18,Rr(!1)),mt(r,19,Dn(0)),u&&mt(r,431,Rr(!1)),u&&mt(r,444,Dn(0)),mt(r,61,x8()),mt(r,64,Rr(!1)),mt(r,141,Dn(0)),mt(r,34,Rr(LB(t)=="true")),mt(r,14,Rr(!0)),u&&mt(r,439,Rr(!1)),mt(r,218,Dn(0)),S7(r,t,a),C7(r,t.SSF,a),E7(r,a),u&&mt(r,352,Rr(!1));var h=r.end(),p=Zr();u&&mt(p,140,_8()),u&&a.Strings&&v7(p,252,f8(a.Strings)),mt(p,10);var g=p.end(),y=Zr(),b=0,N=0;for(N=0;N<t.SheetNames.length;++N)b+=(u?12:11)+(u?2:1)*t.SheetNames[N].length;var S=h.length+b+g.length;for(N=0;N<t.SheetNames.length;++N){var C=o[N]||{};mt(y,133,h8({pos:S,hs:C.Hidden||0,dt:0,name:t.SheetNames[N]},a)),S+=s[N].length}var k=y.end();if(b!=k.length)throw new Error("BS8 "+b+" != "+k.length);var A=[];return h.length&&A.push(h),k.length&&A.push(k),g.length&&A.push(g),xr(A)}function R7(t,s){var a=s||{},r=[];t&&!t.SSF&&(t.SSF=en(Da)),t&&t.SSF&&(Kf(),qf(t.SSF),a.revssf=Yf(t.SSF),a.revssf[t.SSF[65535]]=0,a.ssf=t.SSF),a.Strings=[],a.Strings.Count=0,a.Strings.Unique=0,Zv(a),a.cellXfs=[],Hl(a.cellXfs,{},{revssf:{General:0}}),t.Props||(t.Props={});for(var i=0;i<t.SheetNames.length;++i)r[r.length]=D7(i,a,t);return r.unshift(O7(t,r,a)),xr(r)}function HT(t,s){for(var a=0;a<=t.SheetNames.length;++a){var r=t.Sheets[t.SheetNames[a]];if(!(!r||!r["!ref"])){var i=xn(r["!ref"]);i.e.c>255&&typeof console<"u"&&console.error&&console.error("Worksheet '"+t.SheetNames[a]+"' extends beyond column IV (255).  Data may be lost.")}}var o=s||{};switch(o.biff||2){case 8:case 5:return R7(t,s);case 4:case 3:case 2:return w7(t,s)}throw new Error("invalid type "+o.bookType+" for BIFF")}function P7(t,s,a,r){for(var i=t["!merges"]||[],o=[],c=s.s.c;c<=s.e.c;++c){for(var u=0,f=0,x=0;x<i.length;++x)if(!(i[x].s.r>a||i[x].s.c>c)&&!(i[x].e.r<a||i[x].e.c<c)){if(i[x].s.r<a||i[x].s.c<c){u=-1;break}u=i[x].e.r-i[x].s.r+1,f=i[x].e.c-i[x].s.c+1;break}if(!(u<0)){var h=Ys({r:a,c}),p=r.dense?(t[a]||[])[c]:t[h],g=p&&p.v!=null&&(p.h||uM(p.w||(Qi(p),p.w)||""))||"",y={};u>1&&(y.rowspan=u),f>1&&(y.colspan=f),r.editable?g='<span contenteditable="true">'+g+"</span>":p&&(y["data-t"]=p&&p.t||"z",p.v!=null&&(y["data-v"]=p.v),p.z!=null&&(y["data-z"]=p.z),p.l&&(p.l.Target||"#").charAt(0)!="#"&&(g='<a href="'+p.l.Target+'">'+g+"</a>")),y.id=(r.id||"sjs")+"-"+h,o.push(ut("td",g,y))}}var b="<tr>";return b+o.join("")+"</tr>"}var M7='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',F7="</body></html>";function L7(t,s,a){var r=[];return r.join("")+"<table"+(a&&a.id?' id="'+a.id+'"':"")+">"}function WT(t,s){var a=s||{},r=a.header!=null?a.header:M7,i=a.footer!=null?a.footer:F7,o=[r],c=xn(t["!ref"]);a.dense=Array.isArray(t),o.push(L7(t,c,a));for(var u=c.s.r;u<=c.e.r;++u)o.push(P7(t,c,u,a));return o.push("</table>"+i),o.join("")}function GT(t,s,a){var r=a||{},i=0,o=0;if(r.origin!=null)if(typeof r.origin=="number")i=r.origin;else{var c=typeof r.origin=="string"?ar(r.origin):r.origin;i=c.r,o=c.c}var u=s.getElementsByTagName("tr"),f=Math.min(r.sheetRows||1e7,u.length),x={s:{r:0,c:0},e:{r:i,c:o}};if(t["!ref"]){var h=xn(t["!ref"]);x.s.r=Math.min(x.s.r,h.s.r),x.s.c=Math.min(x.s.c,h.s.c),x.e.r=Math.max(x.e.r,h.e.r),x.e.c=Math.max(x.e.c,h.e.c),i==-1&&(x.e.r=i=h.e.r+1)}var p=[],g=0,y=t["!rows"]||(t["!rows"]=[]),b=0,N=0,S=0,C=0,k=0,A=0;for(t["!cols"]||(t["!cols"]=[]);b<u.length&&N<f;++b){var G=u[b];if(Hw(G)){if(r.display)continue;y[N]={hidden:!0}}var F=G.children;for(S=C=0;S<F.length;++S){var E=F[S];if(!(r.display&&Hw(E))){var T=E.hasAttribute("data-v")?E.getAttribute("data-v"):E.hasAttribute("v")?E.getAttribute("v"):xM(E.innerHTML),_=E.getAttribute("data-z")||E.getAttribute("z");for(g=0;g<p.length;++g){var P=p[g];P.s.c==C+o&&P.s.r<N+i&&N+i<=P.e.r&&(C=P.e.c+1-o,g=-1)}A=+E.getAttribute("colspan")||1,((k=+E.getAttribute("rowspan")||1)>1||A>1)&&p.push({s:{r:N+i,c:C+o},e:{r:N+i+(k||1)-1,c:C+o+(A||1)-1}});var z={t:"s",v:T},V=E.getAttribute("data-t")||E.getAttribute("t")||"";T!=null&&(T.length==0?z.t=V||"z":r.raw||T.trim().length==0||V=="s"||(T==="TRUE"?z={t:"b",v:!0}:T==="FALSE"?z={t:"b",v:!1}:isNaN(qi(T))?isNaN(Lu(T).getDate())||(z={t:"d",v:Lr(T)},r.cellDates||(z={t:"n",v:Jr(z.v)}),z.z=r.dateNF||Da[14]):z={t:"n",v:qi(T)})),z.z===void 0&&_!=null&&(z.z=_);var W="",q=E.getElementsByTagName("A");if(q&&q.length)for(var B=0;B<q.length&&!(q[B].hasAttribute("href")&&(W=q[B].getAttribute("href"),W.charAt(0)!="#"));++B);W&&W.charAt(0)!="#"&&(z.l={Target:W}),r.dense?(t[N+i]||(t[N+i]=[]),t[N+i][C+o]=z):t[Ys({c:C+o,r:N+i})]=z,x.e.c<C+o&&(x.e.c=C+o),C+=A}}++N}return p.length&&(t["!merges"]=(t["!merges"]||[]).concat(p)),x.e.r=Math.max(x.e.r,N-1+i),t["!ref"]=Ga(x),N>=f&&(t["!fullref"]=Ga((x.e.r=u.length-b+N-1+i,x))),t}function qT(t,s){var a=s||{},r=a.dense?[]:{};return GT(r,t,s)}function I7(t,s){return Lo(qT(t,s),s)}function Hw(t){var s="",a=B7(t);return a&&(s=a(t).getPropertyValue("display")),s||(s=t.style&&t.style.display),s==="none"}function B7(t){return t.ownerDocument.defaultView&&typeof t.ownerDocument.defaultView.getComputedStyle=="function"?t.ownerDocument.defaultView.getComputedStyle:typeof getComputedStyle=="function"?getComputedStyle:null}var z7=(function(){var t=["<office:master-styles>",'<style:master-page style:name="mp1" style:page-layout-name="mp1">',"<style:header/>",'<style:header-left style:display="false"/>',"<style:footer/>",'<style:footer-left style:display="false"/>',"</style:master-page>","</office:master-styles>"].join(""),s="<office:document-styles "+Bu({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","office:version":"1.2"})+">"+t+"</office:document-styles>";return function(){return Ya+s}})(),Ww=(function(){var t=function(o){return qs(o).replace(/  +/g,function(c){return'<text:s text:c="'+c.length+'"/>'}).replace(/\t/g,"<text:tab/>").replace(/\n/g,"</text:p><text:p>").replace(/^ /,"<text:s/>").replace(/ $/,"<text:s/>")},s=`          <table:table-cell />
`,a=`          <table:covered-table-cell/>
`,r=function(o,c,u){var f=[];f.push('      <table:table table:name="'+qs(c.SheetNames[u])+`" table:style-name="ta1">
`);var x=0,h=0,p=xn(o["!ref"]||"A1"),g=o["!merges"]||[],y=0,b=Array.isArray(o);if(o["!cols"])for(h=0;h<=p.e.c;++h)f.push("        <table:table-column"+(o["!cols"][h]?' table:style-name="co'+o["!cols"][h].ods+'"':"")+`></table:table-column>
`);var N="",S=o["!rows"]||[];for(x=0;x<p.s.r;++x)N=S[x]?' table:style-name="ro'+S[x].ods+'"':"",f.push("        <table:table-row"+N+`></table:table-row>
`);for(;x<=p.e.r;++x){for(N=S[x]?' table:style-name="ro'+S[x].ods+'"':"",f.push("        <table:table-row"+N+`>
`),h=0;h<p.s.c;++h)f.push(s);for(;h<=p.e.c;++h){var C=!1,k={},A="";for(y=0;y!=g.length;++y)if(!(g[y].s.c>h)&&!(g[y].s.r>x)&&!(g[y].e.c<h)&&!(g[y].e.r<x)){(g[y].s.c!=h||g[y].s.r!=x)&&(C=!0),k["table:number-columns-spanned"]=g[y].e.c-g[y].s.c+1,k["table:number-rows-spanned"]=g[y].e.r-g[y].s.r+1;break}if(C){f.push(a);continue}var G=Ys({r:x,c:h}),F=b?(o[x]||[])[h]:o[G];if(F&&F.f&&(k["table:formula"]=qs(iI(F.f)),F.F&&F.F.slice(0,G.length)==G)){var E=xn(F.F);k["table:number-matrix-columns-spanned"]=E.e.c-E.s.c+1,k["table:number-matrix-rows-spanned"]=E.e.r-E.s.r+1}if(!F){f.push(s);continue}switch(F.t){case"b":A=F.v?"TRUE":"FALSE",k["office:value-type"]="boolean",k["office:boolean-value"]=F.v?"true":"false";break;case"n":A=F.w||String(F.v||0),k["office:value-type"]="float",k["office:value"]=F.v||0;break;case"s":case"str":A=F.v==null?"":F.v,k["office:value-type"]="string";break;case"d":A=F.w||Lr(F.v).toISOString(),k["office:value-type"]="date",k["office:date-value"]=Lr(F.v).toISOString(),k["table:style-name"]="ce1";break;default:f.push(s);continue}var T=t(A);if(F.l&&F.l.Target){var _=F.l.Target;_=_.charAt(0)=="#"?"#"+lI(_.slice(1)):_,_.charAt(0)!="#"&&!_.match(/^\w+:/)&&(_="../"+_),T=ut("text:a",T,{"xlink:href":_.replace(/&/g,"&amp;")})}f.push("          "+ut("table:table-cell",ut("text:p",T,{}),k)+`
`)}f.push(`        </table:table-row>
`)}return f.push(`      </table:table>
`),f.join("")},i=function(o,c){o.push(` <office:automatic-styles>
`),o.push(`  <number:date-style style:name="N37" number:automatic-order="true">
`),o.push(`   <number:month number:style="long"/>
`),o.push(`   <number:text>/</number:text>
`),o.push(`   <number:day number:style="long"/>
`),o.push(`   <number:text>/</number:text>
`),o.push(`   <number:year/>
`),o.push(`  </number:date-style>
`);var u=0;c.SheetNames.map(function(x){return c.Sheets[x]}).forEach(function(x){if(x&&x["!cols"]){for(var h=0;h<x["!cols"].length;++h)if(x["!cols"][h]){var p=x["!cols"][h];if(p.width==null&&p.wpx==null&&p.wch==null)continue;qv(p),p.ods=u;var g=x["!cols"][h].wpx+"px";o.push('  <style:style style:name="co'+u+`" style:family="table-column">
`),o.push('   <style:table-column-properties fo:break-before="auto" style:column-width="'+g+`"/>
`),o.push(`  </style:style>
`),++u}}});var f=0;c.SheetNames.map(function(x){return c.Sheets[x]}).forEach(function(x){if(x&&x["!rows"]){for(var h=0;h<x["!rows"].length;++h)if(x["!rows"][h]){x["!rows"][h].ods=f;var p=x["!rows"][h].hpx+"px";o.push('  <style:style style:name="ro'+f+`" style:family="table-row">
`),o.push('   <style:table-row-properties fo:break-before="auto" style:row-height="'+p+`"/>
`),o.push(`  </style:style>
`),++f}}}),o.push(`  <style:style style:name="ta1" style:family="table" style:master-page-name="mp1">
`),o.push(`   <style:table-properties table:display="true" style:writing-mode="lr-tb"/>
`),o.push(`  </style:style>
`),o.push(`  <style:style style:name="ce1" style:family="table-cell" style:parent-style-name="Default" style:data-style-name="N37"/>
`),o.push(` </office:automatic-styles>
`)};return function(c,u){var f=[Ya],x=Bu({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:meta":"urn:oasis:names:tc:opendocument:xmlns:meta:1.0","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:presentation":"urn:oasis:names:tc:opendocument:xmlns:presentation:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:chart":"urn:oasis:names:tc:opendocument:xmlns:chart:1.0","xmlns:dr3d":"urn:oasis:names:tc:opendocument:xmlns:dr3d:1.0","xmlns:math":"http://www.w3.org/1998/Math/MathML","xmlns:form":"urn:oasis:names:tc:opendocument:xmlns:form:1.0","xmlns:script":"urn:oasis:names:tc:opendocument:xmlns:script:1.0","xmlns:ooo":"http://openoffice.org/2004/office","xmlns:ooow":"http://openoffice.org/2004/writer","xmlns:oooc":"http://openoffice.org/2004/calc","xmlns:dom":"http://www.w3.org/2001/xml-events","xmlns:xforms":"http://www.w3.org/2002/xforms","xmlns:xsd":"http://www.w3.org/2001/XMLSchema","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","xmlns:sheet":"urn:oasis:names:tc:opendocument:sh33tjs:1.0","xmlns:rpt":"http://openoffice.org/2005/report","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","xmlns:xhtml":"http://www.w3.org/1999/xhtml","xmlns:grddl":"http://www.w3.org/2003/g/data-view#","xmlns:tableooo":"http://openoffice.org/2009/table","xmlns:drawooo":"http://openoffice.org/2010/draw","xmlns:calcext":"urn:org:documentfoundation:names:experimental:calc:xmlns:calcext:1.0","xmlns:loext":"urn:org:documentfoundation:names:experimental:office:xmlns:loext:1.0","xmlns:field":"urn:openoffice:names:experimental:ooo-ms-interop:xmlns:field:1.0","xmlns:formx":"urn:openoffice:names:experimental:ooxml-odf-interop:xmlns:form:1.0","xmlns:css3t":"http://www.w3.org/TR/css3-text/","office:version":"1.2"}),h=Bu({"xmlns:config":"urn:oasis:names:tc:opendocument:xmlns:config:1.0","office:mimetype":"application/vnd.oasis.opendocument.spreadsheet"});u.bookType=="fods"?(f.push("<office:document"+x+h+`>
`),f.push(oT().replace(/office:document-meta/g,"office:meta"))):f.push("<office:document-content"+x+`>
`),i(f,c),f.push(`  <office:body>
`),f.push(`    <office:spreadsheet>
`);for(var p=0;p!=c.SheetNames.length;++p)f.push(r(c.Sheets[c.SheetNames[p]],c,p));return f.push(`    </office:spreadsheet>
`),f.push(`  </office:body>
`),u.bookType=="fods"?f.push("</office:document>"):f.push("</office:document-content>"),f.join("")}})();function KT(t,s){if(s.bookType=="fods")return Ww(t,s);var a=Fv(),r="",i=[],o=[];return r="mimetype",ps(a,r,"application/vnd.oasis.opendocument.spreadsheet"),r="content.xml",ps(a,r,Ww(t,s)),i.push([r,"text/xml"]),o.push([r,"ContentFile"]),r="styles.xml",ps(a,r,z7(t,s)),i.push([r,"text/xml"]),o.push([r,"StylesFile"]),r="meta.xml",ps(a,r,Ya+oT()),i.push([r,"text/xml"]),o.push([r,"MetadataFile"]),r="manifest.rdf",ps(a,r,ZM(o)),i.push([r,"application/rdf+xml"]),r="META-INF/manifest.xml",ps(a,r,XM(i)),a}/*! sheetjs (C) 2013-present SheetJS -- http://sheetjs.com */function Sf(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function U7(t){return typeof TextEncoder<"u"?new TextEncoder().encode(t):Gn(Iu(t))}function V7(t,s){e:for(var a=0;a<=t.length-s.length;++a){for(var r=0;r<s.length;++r)if(t[a+r]!=s[r])continue e;return!0}return!1}function Il(t){var s=t.reduce(function(i,o){return i+o.length},0),a=new Uint8Array(s),r=0;return t.forEach(function(i){a.set(i,r),r+=i.length}),a}function $7(t,s,a){var r=Math.floor(a==0?0:Math.LOG10E*Math.log(Math.abs(a)))+6176-20,i=a/Math.pow(10,r-6176);t[s+15]|=r>>7,t[s+14]|=(r&127)<<1;for(var o=0;i>=1;++o,i/=256)t[s+o]=i&255;t[s+15]|=a>=0?0:128}function zu(t,s){var a=s?s[0]:0,r=t[a]&127;e:if(t[a++]>=128&&(r|=(t[a]&127)<<7,t[a++]<128||(r|=(t[a]&127)<<14,t[a++]<128)||(r|=(t[a]&127)<<21,t[a++]<128)||(r+=(t[a]&127)*Math.pow(2,28),++a,t[a++]<128)||(r+=(t[a]&127)*Math.pow(2,35),++a,t[a++]<128)||(r+=(t[a]&127)*Math.pow(2,42),++a,t[a++]<128)))break e;return s&&(s[0]=a),r}function Vs(t){var s=new Uint8Array(7);s[0]=t&127;var a=1;e:if(t>127){if(s[a-1]|=128,s[a]=t>>7&127,++a,t<=16383||(s[a-1]|=128,s[a]=t>>14&127,++a,t<=2097151)||(s[a-1]|=128,s[a]=t>>21&127,++a,t<=268435455)||(s[a-1]|=128,s[a]=t/256>>>21&127,++a,t<=34359738367)||(s[a-1]|=128,s[a]=t/65536>>>21&127,++a,t<=4398046511103))break e;s[a-1]|=128,s[a]=t/16777216>>>21&127,++a}return s.slice(0,a)}function Hc(t){var s=0,a=t[s]&127;e:if(t[s++]>=128){if(a|=(t[s]&127)<<7,t[s++]<128||(a|=(t[s]&127)<<14,t[s++]<128)||(a|=(t[s]&127)<<21,t[s++]<128))break e;a|=(t[s]&127)<<28}return a}function Za(t){for(var s=[],a=[0];a[0]<t.length;){var r=a[0],i=zu(t,a),o=i&7;i=Math.floor(i/8);var c=0,u;if(i==0)break;switch(o){case 0:{for(var f=a[0];t[a[0]++]>=128;);u=t.slice(f,a[0])}break;case 5:c=4,u=t.slice(a[0],a[0]+c),a[0]+=c;break;case 1:c=8,u=t.slice(a[0],a[0]+c),a[0]+=c;break;case 2:c=zu(t,a),u=t.slice(a[0],a[0]+c),a[0]+=c;break;case 3:case 4:default:throw new Error("PB Type ".concat(o," for Field ").concat(i," at offset ").concat(r))}var x={data:u,type:o};s[i]==null?s[i]=[x]:s[i].push(x)}return s}function dr(t){var s=[];return t.forEach(function(a,r){a.forEach(function(i){i.data&&(s.push(Vs(r*8+i.type)),i.type==2&&s.push(Vs(i.data.length)),s.push(i.data))})}),Il(s)}function Un(t){for(var s,a=[],r=[0];r[0]<t.length;){var i=zu(t,r),o=Za(t.slice(r[0],r[0]+i));r[0]+=i;var c={id:Hc(o[1][0].data),messages:[]};o[2].forEach(function(u){var f=Za(u.data),x=Hc(f[3][0].data);c.messages.push({meta:f,data:t.slice(r[0],r[0]+x)}),r[0]+=x}),(s=o[3])!=null&&s[0]&&(c.merge=Hc(o[3][0].data)>>>0>0),a.push(c)}return a}function Tc(t){var s=[];return t.forEach(function(a){var r=[];r[1]=[{data:Vs(a.id),type:0}],r[2]=[],a.merge!=null&&(r[3]=[{data:Vs(+!!a.merge),type:0}]);var i=[];a.messages.forEach(function(c){i.push(c.data),c.meta[3]=[{type:0,data:Vs(c.data.length)}],r[2].push({data:dr(c.meta),type:2})});var o=dr(r);s.push(Vs(o.length)),s.push(o),i.forEach(function(c){return s.push(c)})}),Il(s)}function H7(t,s){if(t!=0)throw new Error("Unexpected Snappy chunk type ".concat(t));for(var a=[0],r=zu(s,a),i=[];a[0]<s.length;){var o=s[a[0]]&3;if(o==0){var c=s[a[0]++]>>2;if(c<60)++c;else{var u=c-59;c=s[a[0]],u>1&&(c|=s[a[0]+1]<<8),u>2&&(c|=s[a[0]+2]<<16),u>3&&(c|=s[a[0]+3]<<24),c>>>=0,c++,a[0]+=u}i.push(s.slice(a[0],a[0]+c)),a[0]+=c;continue}else{var f=0,x=0;if(o==1?(x=(s[a[0]]>>2&7)+4,f=(s[a[0]++]&224)<<3,f|=s[a[0]++]):(x=(s[a[0]++]>>2)+1,o==2?(f=s[a[0]]|s[a[0]+1]<<8,a[0]+=2):(f=(s[a[0]]|s[a[0]+1]<<8|s[a[0]+2]<<16|s[a[0]+3]<<24)>>>0,a[0]+=4)),i=[Il(i)],f==0)throw new Error("Invalid offset 0");if(f>i[0].length)throw new Error("Invalid offset beyond length");if(x>=f)for(i.push(i[0].slice(-f)),x-=f;x>=i[i.length-1].length;)i.push(i[i.length-1]),x-=i[i.length-1].length;i.push(i[0].slice(-f,-f+x))}}var h=Il(i);if(h.length!=r)throw new Error("Unexpected length: ".concat(h.length," != ").concat(r));return h}function Vn(t){for(var s=[],a=0;a<t.length;){var r=t[a++],i=t[a]|t[a+1]<<8|t[a+2]<<16;a+=3,s.push(H7(r,t.slice(a,a+i))),a+=i}if(a!==t.length)throw new Error("data is not a valid framed stream!");return Il(s)}function Ec(t){for(var s=[],a=0;a<t.length;){var r=Math.min(t.length-a,268435455),i=new Uint8Array(4);s.push(i);var o=Vs(r),c=o.length;s.push(o),r<=60?(c++,s.push(new Uint8Array([r-1<<2]))):r<=256?(c+=2,s.push(new Uint8Array([240,r-1&255]))):r<=65536?(c+=3,s.push(new Uint8Array([244,r-1&255,r-1>>8&255]))):r<=16777216?(c+=4,s.push(new Uint8Array([248,r-1&255,r-1>>8&255,r-1>>16&255]))):r<=4294967296&&(c+=5,s.push(new Uint8Array([252,r-1&255,r-1>>8&255,r-1>>16&255,r-1>>>24&255]))),s.push(t.slice(a,a+r)),c+=r,i[0]=0,i[1]=c&255,i[2]=c>>8&255,i[3]=c>>16&255,a+=r}return Il(s)}function O0(t,s){var a=new Uint8Array(32),r=Sf(a),i=12,o=0;switch(a[0]=5,t.t){case"n":a[1]=2,$7(a,i,t.v),o|=1,i+=16;break;case"b":a[1]=6,r.setFloat64(i,t.v?1:0,!0),o|=2,i+=8;break;case"s":if(s.indexOf(t.v)==-1)throw new Error("Value ".concat(t.v," missing from SST!"));a[1]=3,r.setUint32(i,s.indexOf(t.v),!0),o|=8,i+=4;break;default:throw"unsupported cell type "+t.t}return r.setUint32(8,o,!0),a.slice(0,i)}function R0(t,s){var a=new Uint8Array(32),r=Sf(a),i=12,o=0;switch(a[0]=3,t.t){case"n":a[2]=2,r.setFloat64(i,t.v,!0),o|=32,i+=8;break;case"b":a[2]=6,r.setFloat64(i,t.v?1:0,!0),o|=32,i+=8;break;case"s":if(s.indexOf(t.v)==-1)throw new Error("Value ".concat(t.v," missing from SST!"));a[2]=3,r.setUint32(i,s.indexOf(t.v),!0),o|=16,i+=4;break;default:throw"unsupported cell type "+t.t}return r.setUint32(4,o,!0),a.slice(0,i)}function El(t){var s=Za(t);return zu(s[1][0].data)}function W7(t,s,a){var r,i,o,c;if(!((r=t[6])!=null&&r[0])||!((i=t[7])!=null&&i[0]))throw"Mutation only works on post-BNC storages!";var u=((c=(o=t[8])==null?void 0:o[0])==null?void 0:c.data)&&Hc(t[8][0].data)>0||!1;if(u)throw"Math only works with normal offsets";for(var f=0,x=Sf(t[7][0].data),h=0,p=[],g=Sf(t[4][0].data),y=0,b=[],N=0;N<s.length;++N){if(s[N]==null){x.setUint16(N*2,65535,!0),g.setUint16(N*2,65535);continue}x.setUint16(N*2,h,!0),g.setUint16(N*2,y,!0);var S,C;switch(typeof s[N]){case"string":S=O0({t:"s",v:s[N]},a),C=R0({t:"s",v:s[N]},a);break;case"number":S=O0({t:"n",v:s[N]},a),C=R0({t:"n",v:s[N]},a);break;case"boolean":S=O0({t:"b",v:s[N]},a),C=R0({t:"b",v:s[N]},a);break;default:throw new Error("Unsupported value "+s[N])}p.push(S),h+=S.length,b.push(C),y+=C.length,++f}for(t[2][0].data=Vs(f);N<t[7][0].data.length/2;++N)x.setUint16(N*2,65535,!0),g.setUint16(N*2,65535,!0);return t[6][0].data=Il(p),t[3][0].data=Il(b),f}function G7(t,s){if(!s||!s.numbers)throw new Error("Must pass a `numbers` option -- check the README");var a=t.Sheets[t.SheetNames[0]];t.SheetNames.length>1&&console.error("The Numbers writer currently writes only the first table");var r=xn(a["!ref"]);r.s.r=r.s.c=0;var i=!1;r.e.c>9&&(i=!0,r.e.c=9),r.e.r>49&&(i=!0,r.e.r=49),i&&console.error("The Numbers writer is currently limited to ".concat(Ga(r)));var o=Cf(a,{range:r,header:1}),c=["~Sh33tJ5~"];o.forEach(function(X){return X.forEach(function(O){typeof O=="string"&&c.push(O)})});var u={},f=[],x=ea.read(s.numbers,{type:"base64"});x.FileIndex.map(function(X,O){return[X,x.FullPaths[O]]}).forEach(function(X){var O=X[0],J=X[1];if(O.type==2&&O.name.match(/\.iwa/)){var ie=O.content,be=Vn(ie),Le=Un(be);Le.forEach(function(ve){f.push(ve.id),u[ve.id]={deps:[],location:J,type:Hc(ve.messages[0].meta[1][0].data)}})}}),f.sort(function(X,O){return X-O});var h=f.filter(function(X){return X>1}).map(function(X){return[X,Vs(X)]});x.FileIndex.map(function(X,O){return[X,x.FullPaths[O]]}).forEach(function(X){var O=X[0];if(X[1],!!O.name.match(/\.iwa/)){var J=Un(Vn(O.content));J.forEach(function(ie){ie.messages.forEach(function(be){h.forEach(function(Le){ie.messages.some(function(ve){return Hc(ve.meta[1][0].data)!=11006&&V7(ve.data,Le[1])})&&u[Le[0]].deps.push(ie.id)})})})}});for(var p=ea.find(x,u[1].location),g=Un(Vn(p.content)),y,b=0;b<g.length;++b){var N=g[b];N.id==1&&(y=N)}var S=El(Za(y.messages[0].data)[1][0].data);for(p=ea.find(x,u[S].location),g=Un(Vn(p.content)),b=0;b<g.length;++b)N=g[b],N.id==S&&(y=N);for(S=El(Za(y.messages[0].data)[2][0].data),p=ea.find(x,u[S].location),g=Un(Vn(p.content)),b=0;b<g.length;++b)N=g[b],N.id==S&&(y=N);for(S=El(Za(y.messages[0].data)[2][0].data),p=ea.find(x,u[S].location),g=Un(Vn(p.content)),b=0;b<g.length;++b)N=g[b],N.id==S&&(y=N);var C=Za(y.messages[0].data);{C[6][0].data=Vs(r.e.r+1),C[7][0].data=Vs(r.e.c+1);var k=El(C[46][0].data),A=ea.find(x,u[k].location),G=Un(Vn(A.content));{for(var F=0;F<G.length&&G[F].id!=k;++F);if(G[F].id!=k)throw"Bad ColumnRowUIDMapArchive";var E=Za(G[F].messages[0].data);E[1]=[],E[2]=[],E[3]=[];for(var T=0;T<=r.e.c;++T){var _=[];_[1]=_[2]=[{type:0,data:Vs(T+420690)}],E[1].push({type:2,data:dr(_)}),E[2].push({type:0,data:Vs(T)}),E[3].push({type:0,data:Vs(T)})}E[4]=[],E[5]=[],E[6]=[];for(var P=0;P<=r.e.r;++P)_=[],_[1]=_[2]=[{type:0,data:Vs(P+726270)}],E[4].push({type:2,data:dr(_)}),E[5].push({type:0,data:Vs(P)}),E[6].push({type:0,data:Vs(P)});G[F].messages[0].data=dr(E)}A.content=Ec(Tc(G)),A.size=A.content.length,delete C[46];var z=Za(C[4][0].data);{z[7][0].data=Vs(r.e.r+1);var V=Za(z[1][0].data),W=El(V[2][0].data);A=ea.find(x,u[W].location),G=Un(Vn(A.content));{if(G[0].id!=W)throw"Bad HeaderStorageBucket";var q=Za(G[0].messages[0].data);for(P=0;P<o.length;++P){var B=Za(q[2][0].data);B[1][0].data=Vs(P),B[4][0].data=Vs(o[P].length),q[2][P]={type:q[2][0].type,data:dr(B)}}G[0].messages[0].data=dr(q)}A.content=Ec(Tc(G)),A.size=A.content.length;var ae=El(z[2][0].data);A=ea.find(x,u[ae].location),G=Un(Vn(A.content));{if(G[0].id!=ae)throw"Bad HeaderStorageBucket";for(q=Za(G[0].messages[0].data),T=0;T<=r.e.c;++T)B=Za(q[2][0].data),B[1][0].data=Vs(T),B[4][0].data=Vs(r.e.r+1),q[2][T]={type:q[2][0].type,data:dr(B)};G[0].messages[0].data=dr(q)}A.content=Ec(Tc(G)),A.size=A.content.length;var U=El(z[4][0].data);(function(){for(var X=ea.find(x,u[U].location),O=Un(Vn(X.content)),J,ie=0;ie<O.length;++ie){var be=O[ie];be.id==U&&(J=be)}var Le=Za(J.messages[0].data);{Le[3]=[];var ve=[];c.forEach(function(Xe,yt){ve[1]=[{type:0,data:Vs(yt)}],ve[2]=[{type:0,data:Vs(1)}],ve[3]=[{type:2,data:U7(Xe)}],Le[3].push({type:2,data:dr(ve)})})}J.messages[0].data=dr(Le);var oe=Tc(O),Pe=Ec(oe);X.content=Pe,X.size=X.content.length})();var Z=Za(z[3][0].data);{var de=Z[1][0];delete Z[2];var H=Za(de.data);{var se=El(H[2][0].data);(function(){for(var X=ea.find(x,u[se].location),O=Un(Vn(X.content)),J,ie=0;ie<O.length;++ie){var be=O[ie];be.id==se&&(J=be)}var Le=Za(J.messages[0].data);{delete Le[6],delete Z[7];var ve=new Uint8Array(Le[5][0].data);Le[5]=[];for(var oe=0,Pe=0;Pe<=r.e.r;++Pe){var Xe=Za(ve);oe+=W7(Xe,o[Pe],c),Xe[1][0].data=Vs(Pe),Le[5].push({data:dr(Xe),type:2})}Le[1]=[{type:0,data:Vs(r.e.c+1)}],Le[2]=[{type:0,data:Vs(r.e.r+1)}],Le[3]=[{type:0,data:Vs(oe)}],Le[4]=[{type:0,data:Vs(r.e.r+1)}]}J.messages[0].data=dr(Le);var yt=Tc(O),vt=Ec(yt);X.content=vt,X.size=X.content.length})()}de.data=dr(H)}z[3][0].data=dr(Z)}C[4][0].data=dr(z)}y.messages[0].data=dr(C);var ee=Tc(g),L=Ec(ee);return p.content=L,p.size=p.content.length,x}function q7(t){return function(a){for(var r=0;r!=t.length;++r){var i=t[r];a[i[0]]===void 0&&(a[i[0]]=i[1]),i[2]==="n"&&(a[i[0]]=Number(a[i[0]]))}}}function Zv(t){q7([["cellDates",!1],["bookSST",!1],["bookType","xlsx"],["compression",!1],["WTF",!1]])(t)}function K7(t,s){return s.bookType=="ods"?KT(t,s):s.bookType=="numbers"?G7(t,s):s.bookType=="xlsb"?Y7(t,s):X7(t,s)}function Y7(t,s){Dc=1024,t&&!t.SSF&&(t.SSF=en(Da)),t&&t.SSF&&(Kf(),qf(t.SSF),s.revssf=Yf(t.SSF),s.revssf[t.SSF[65535]]=0,s.ssf=t.SSF),s.rels={},s.wbrels={},s.Strings=[],s.Strings.Count=0,s.Strings.Unique=0,Cu?s.revStrings=new Map:(s.revStrings={},s.revStrings.foo=[],delete s.revStrings.foo);var a=s.bookType=="xlsb"?"bin":"xml",r=_T.indexOf(s.bookType)>-1,i=nT();Zv(s=s||{});var o=Fv(),c="",u=0;if(s.cellXfs=[],Hl(s.cellXfs,{},{revssf:{General:0}}),t.Props||(t.Props={}),c="docProps/core.xml",ps(o,c,cT(t.Props,s)),i.coreprops.push(c),$s(s.rels,2,c,Rs.CORE_PROPS),c="docProps/app.xml",!(t.Props&&t.Props.SheetNames))if(!t.Workbook||!t.Workbook.Sheets)t.Props.SheetNames=t.SheetNames;else{for(var f=[],x=0;x<t.SheetNames.length;++x)(t.Workbook.Sheets[x]||{}).Hidden!=2&&f.push(t.SheetNames[x]);t.Props.SheetNames=f}for(t.Props.Worksheets=t.Props.SheetNames.length,ps(o,c,uT(t.Props)),i.extprops.push(c),$s(s.rels,3,c,Rs.EXT_PROPS),t.Custprops!==t.Props&&yr(t.Custprops||{}).length>0&&(c="docProps/custom.xml",ps(o,c,mT(t.Custprops)),i.custprops.push(c),$s(s.rels,4,c,Rs.CUST_PROPS)),u=1;u<=t.SheetNames.length;++u){var h={"!id":{}},p=t.Sheets[t.SheetNames[u-1]],g=(p||{})["!type"]||"sheet";switch(g){case"chart":default:c="xl/worksheets/sheet"+u+"."+a,ps(o,c,ZB(u-1,c,s,t,h)),i.sheets.push(c),$s(s.wbrels,-1,"worksheets/sheet"+u+"."+a,Rs.WS[0])}if(p){var y=p["!comments"],b=!1,N="";y&&y.length>0&&(N="xl/comments"+u+"."+a,ps(o,N,t7(y,N)),i.comments.push(N),$s(h,-1,"../comments"+u+"."+a,Rs.CMNT),b=!0),p["!legacy"]&&b&&ps(o,"xl/drawings/vmlDrawing"+u+".vml",kT(u,p["!comments"])),delete p["!comments"],delete p["!legacy"]}h["!id"].rId1&&ps(o,lT(c),Vc(h))}return s.Strings!=null&&s.Strings.length>0&&(c="xl/sharedStrings."+a,ps(o,c,e7(s.Strings,c,s)),i.strs.push(c),$s(s.wbrels,-1,"sharedStrings."+a,Rs.SST)),c="xl/workbook."+a,ps(o,c,QB(t,c)),i.workbooks.push(c),$s(s.rels,1,c,Rs.WB),c="xl/theme/theme1.xml",ps(o,c,TT(t.Themes,s)),i.themes.push(c),$s(s.wbrels,-1,"theme/theme1.xml",Rs.THEME),c="xl/styles."+a,ps(o,c,JB(t,c,s)),i.styles.push(c),$s(s.wbrels,-1,"styles."+a,Rs.STY),t.vbaraw&&r&&(c="xl/vbaProject.bin",ps(o,c,t.vbaraw),i.vba.push(c),$s(s.wbrels,-1,"vbaProject.bin",Rs.VBA)),c="xl/metadata."+a,ps(o,c,s7(c)),i.metadata.push(c),$s(s.wbrels,-1,"metadata."+a,Rs.XLMETA),ps(o,"[Content_Types].xml",iT(i,s)),ps(o,"_rels/.rels",Vc(s.rels)),ps(o,"xl/_rels/workbook."+a+".rels",Vc(s.wbrels)),delete s.revssf,delete s.ssf,o}function X7(t,s){Dc=1024,t&&!t.SSF&&(t.SSF=en(Da)),t&&t.SSF&&(Kf(),qf(t.SSF),s.revssf=Yf(t.SSF),s.revssf[t.SSF[65535]]=0,s.ssf=t.SSF),s.rels={},s.wbrels={},s.Strings=[],s.Strings.Count=0,s.Strings.Unique=0,Cu?s.revStrings=new Map:(s.revStrings={},s.revStrings.foo=[],delete s.revStrings.foo);var a="xml",r=_T.indexOf(s.bookType)>-1,i=nT();Zv(s=s||{});var o=Fv(),c="",u=0;if(s.cellXfs=[],Hl(s.cellXfs,{},{revssf:{General:0}}),t.Props||(t.Props={}),c="docProps/core.xml",ps(o,c,cT(t.Props,s)),i.coreprops.push(c),$s(s.rels,2,c,Rs.CORE_PROPS),c="docProps/app.xml",!(t.Props&&t.Props.SheetNames))if(!t.Workbook||!t.Workbook.Sheets)t.Props.SheetNames=t.SheetNames;else{for(var f=[],x=0;x<t.SheetNames.length;++x)(t.Workbook.Sheets[x]||{}).Hidden!=2&&f.push(t.SheetNames[x]);t.Props.SheetNames=f}t.Props.Worksheets=t.Props.SheetNames.length,ps(o,c,uT(t.Props)),i.extprops.push(c),$s(s.rels,3,c,Rs.EXT_PROPS),t.Custprops!==t.Props&&yr(t.Custprops||{}).length>0&&(c="docProps/custom.xml",ps(o,c,mT(t.Custprops)),i.custprops.push(c),$s(s.rels,4,c,Rs.CUST_PROPS));var h=["SheetJ5"];for(s.tcid=0,u=1;u<=t.SheetNames.length;++u){var p={"!id":{}},g=t.Sheets[t.SheetNames[u-1]],y=(g||{})["!type"]||"sheet";switch(y){case"chart":default:c="xl/worksheets/sheet"+u+"."+a,ps(o,c,BT(u-1,s,t,p)),i.sheets.push(c),$s(s.wbrels,-1,"worksheets/sheet"+u+"."+a,Rs.WS[0])}if(g){var b=g["!comments"],N=!1,S="";if(b&&b.length>0){var C=!1;b.forEach(function(k){k[1].forEach(function(A){A.T==!0&&(C=!0)})}),C&&(S="xl/threadedComments/threadedComment"+u+"."+a,ps(o,S,EF(b,h,s)),i.threadedcomments.push(S),$s(p,-1,"../threadedComments/threadedComment"+u+"."+a,Rs.TCMNT)),S="xl/comments"+u+"."+a,ps(o,S,AT(b)),i.comments.push(S),$s(p,-1,"../comments"+u+"."+a,Rs.CMNT),N=!0}g["!legacy"]&&N&&ps(o,"xl/drawings/vmlDrawing"+u+".vml",kT(u,g["!comments"])),delete g["!comments"],delete g["!legacy"]}p["!id"].rId1&&ps(o,lT(c),Vc(p))}return s.Strings!=null&&s.Strings.length>0&&(c="xl/sharedStrings."+a,ps(o,c,yT(s.Strings,s)),i.strs.push(c),$s(s.wbrels,-1,"sharedStrings."+a,Rs.SST)),c="xl/workbook."+a,ps(o,c,VT(t)),i.workbooks.push(c),$s(s.rels,1,c,Rs.WB),c="xl/theme/theme1.xml",ps(o,c,TT(t.Themes,s)),i.themes.push(c),$s(s.wbrels,-1,"theme/theme1.xml",Rs.THEME),c="xl/styles."+a,ps(o,c,ST(t,s)),i.styles.push(c),$s(s.wbrels,-1,"styles."+a,Rs.STY),t.vbaraw&&r&&(c="xl/vbaProject.bin",ps(o,c,t.vbaraw),i.vba.push(c),$s(s.wbrels,-1,"vbaProject.bin",Rs.VBA)),c="xl/metadata."+a,ps(o,c,ET()),i.metadata.push(c),$s(s.wbrels,-1,"metadata."+a,Rs.XLMETA),h.length>1&&(c="xl/persons/person.xml",ps(o,c,kF(h)),i.people.push(c),$s(s.wbrels,-1,"persons/person.xml",Rs.PEOPLE)),ps(o,"[Content_Types].xml",iT(i,s)),ps(o,"_rels/.rels",Vc(s.rels)),ps(o,"xl/_rels/workbook."+a+".rels",Vc(s.wbrels)),delete s.revssf,delete s.ssf,o}function Q7(t,s){var a="";switch((s||{}).type||"base64"){case"buffer":return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]];case"base64":a=Xi(t.slice(0,12));break;case"binary":a=t;break;case"array":return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]];default:throw new Error("Unrecognized type "+(s&&s.type||"undefined"))}return[a.charCodeAt(0),a.charCodeAt(1),a.charCodeAt(2),a.charCodeAt(3),a.charCodeAt(4),a.charCodeAt(5),a.charCodeAt(6),a.charCodeAt(7)]}function YT(t,s){switch(s.type){case"base64":case"binary":break;case"buffer":case"array":s.type="";break;case"file":return am(s.file,ea.write(t,{type:Ls?"buffer":""}));case"string":throw new Error("'string' output type invalid for '"+s.bookType+"' files");default:throw new Error("Unrecognized type "+s.type)}return ea.write(t,s)}function Z7(t,s){var a=en(s||{}),r=K7(t,a);return J7(r,a)}function J7(t,s){var a={},r=Ls?"nodebuffer":typeof Uint8Array<"u"?"array":"string";if(s.compression&&(a.compression="DEFLATE"),s.password)a.type=r;else switch(s.type){case"base64":a.type="base64";break;case"binary":a.type="string";break;case"string":throw new Error("'string' output type invalid for '"+s.bookType+"' files");case"buffer":case"file":a.type=r;break;default:throw new Error("Unrecognized type "+s.type)}var i=t.FullPaths?ea.write(t,{fileType:"zip",type:{nodebuffer:"buffer",string:"binary"}[a.type]||a.type,compression:!!s.compression}):t.generate(a);if(typeof Deno<"u"&&typeof i=="string"){if(s.type=="binary"||s.type=="base64")return i;i=new Uint8Array(Gf(i))}return s.password&&typeof encrypt_agile<"u"?YT(encrypt_agile(i,s.password),s):s.type==="file"?am(s.file,i):s.type=="string"?Nu(i):i}function e9(t,s){var a=s||{},r=p7(t,a);return YT(r,a)}function ci(t,s,a){a||(a="");var r=a+t;switch(s.type){case"base64":return Fu(Iu(r));case"binary":return Iu(r);case"string":return t;case"file":return am(s.file,r,"utf8");case"buffer":return Ls?sl(r,"utf8"):typeof TextEncoder<"u"?new TextEncoder().encode(r):ci(r,{type:"binary"}).split("").map(function(i){return i.charCodeAt(0)})}throw new Error("Unrecognized type "+s.type)}function t9(t,s){switch(s.type){case"base64":return Fu(t);case"binary":return t;case"string":return t;case"file":return am(s.file,t,"binary");case"buffer":return Ls?sl(t,"binary"):t.split("").map(function(a){return a.charCodeAt(0)})}throw new Error("Unrecognized type "+s.type)}function Bh(t,s){switch(s.type){case"string":case"base64":case"binary":for(var a="",r=0;r<t.length;++r)a+=String.fromCharCode(t[r]);return s.type=="base64"?Fu(a):s.type=="string"?Nu(a):a;case"file":return am(s.file,t);case"buffer":return t;default:throw new Error("Unrecognized type "+s.type)}}function XT(t,s){AP(),zB(t);var a=en(s||{});if(a.cellStyles&&(a.cellNF=!0,a.sheetStubs=!0),a.type=="array"){a.type="binary";var r=XT(t,a);return a.type="array",Gf(r)}var i=0;if(a.sheet&&(typeof a.sheet=="number"?i=a.sheet:i=t.SheetNames.indexOf(a.sheet),!t.SheetNames[i]))throw new Error("Sheet not found: "+a.sheet+" : "+typeof a.sheet);switch(a.bookType||"xlsb"){case"xml":case"xlml":return ci(f7(t,a),a);case"slk":case"sylk":return ci(L8.from_sheet(t.Sheets[t.SheetNames[i]],a),a);case"htm":case"html":return ci(WT(t.Sheets[t.SheetNames[i]],a),a);case"txt":return t9(QT(t.Sheets[t.SheetNames[i]],a),a);case"csv":return ci(Jv(t.Sheets[t.SheetNames[i]],a),a,"\uFEFF");case"dif":return ci(I8.from_sheet(t.Sheets[t.SheetNames[i]],a),a);case"dbf":return Bh(F8.from_sheet(t.Sheets[t.SheetNames[i]],a),a);case"prn":return ci(B8.from_sheet(t.Sheets[t.SheetNames[i]],a),a);case"rtf":return ci(G8.from_sheet(t.Sheets[t.SheetNames[i]],a),a);case"eth":return ci(jT.from_sheet(t.Sheets[t.SheetNames[i]],a),a);case"fods":return ci(KT(t,a),a);case"wk1":return Bh(Iw.sheet_to_wk1(t.Sheets[t.SheetNames[i]],a),a);case"wk3":return Bh(Iw.book_to_wk3(t,a),a);case"biff2":a.biff||(a.biff=2);case"biff3":a.biff||(a.biff=3);case"biff4":return a.biff||(a.biff=4),Bh(HT(t,a),a);case"biff5":a.biff||(a.biff=5);case"biff8":case"xla":case"xls":return a.biff||(a.biff=8),e9(t,a);case"xlsx":case"xlsm":case"xlam":case"xlsb":case"numbers":case"ods":return Z7(t,a);default:throw new Error("Unrecognized bookType |"+a.bookType+"|")}}function s9(t){if(!t.bookType){var s={xls:"biff8",htm:"html",slk:"sylk",socialcalc:"eth",Sh33tJS:"WTF"},a=t.file.slice(t.file.lastIndexOf(".")).toLowerCase();a.match(/^\.[a-z]+$/)&&(t.bookType=a.slice(1)),t.bookType=s[t.bookType]||t.bookType}}function a9(t,s,a){var r={};return r.type="file",r.file=s,s9(r),XT(t,r)}function r9(t,s,a,r,i,o,c,u){var f=vr(a),x=u.defval,h=u.raw||!Object.prototype.hasOwnProperty.call(u,"raw"),p=!0,g=i===1?[]:{};if(i!==1)if(Object.defineProperty)try{Object.defineProperty(g,"__rowNum__",{value:a,enumerable:!1})}catch{g.__rowNum__=a}else g.__rowNum__=a;if(!c||t[a])for(var y=s.s.c;y<=s.e.c;++y){var b=c?t[a][y]:t[r[y]+f];if(b===void 0||b.t===void 0){if(x===void 0)continue;o[y]!=null&&(g[o[y]]=x);continue}var N=b.v;switch(b.t){case"z":if(N==null)break;continue;case"e":N=N==0?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+b.t)}if(o[y]!=null){if(N==null)if(b.t=="e"&&N===null)g[o[y]]=null;else if(x!==void 0)g[o[y]]=x;else if(h&&N===null)g[o[y]]=null;else continue;else g[o[y]]=h&&(b.t!=="n"||b.t==="n"&&u.rawNumbers!==!1)?N:Qi(b,N,u);N!=null&&(p=!1)}}return{row:g,isempty:p}}function Cf(t,s){if(t==null||t["!ref"]==null)return[];var a={t:"n",v:0},r=0,i=1,o=[],c=0,u="",f={s:{r:0,c:0},e:{r:0,c:0}},x=s||{},h=x.range!=null?x.range:t["!ref"];switch(x.header===1?r=1:x.header==="A"?r=2:Array.isArray(x.header)?r=3:x.header==null&&(r=0),typeof h){case"string":f=ua(h);break;case"number":f=ua(t["!ref"]),f.s.r=h;break;default:f=h}r>0&&(i=0);var p=vr(f.s.r),g=[],y=[],b=0,N=0,S=Array.isArray(t),C=f.s.r,k=0,A={};S&&!t[C]&&(t[C]=[]);var G=x.skipHidden&&t["!cols"]||[],F=x.skipHidden&&t["!rows"]||[];for(k=f.s.c;k<=f.e.c;++k)if(!(G[k]||{}).hidden)switch(g[k]=Ar(k),a=S?t[C][k]:t[g[k]+p],r){case 1:o[k]=k-f.s.c;break;case 2:o[k]=g[k];break;case 3:o[k]=x.header[k-f.s.c];break;default:if(a==null&&(a={w:"__EMPTY",t:"s"}),u=c=Qi(a,null,x),N=A[c]||0,!N)A[c]=1;else{do u=c+"_"+N++;while(A[u]);A[c]=N,A[u]=1}o[k]=u}for(C=f.s.r+i;C<=f.e.r;++C)if(!(F[C]||{}).hidden){var E=r9(t,f,C,g,r,o,S,x);(E.isempty===!1||(r===1?x.blankrows!==!1:x.blankrows))&&(y[b++]=E.row)}return y.length=b,y}var Gw=/"/g;function n9(t,s,a,r,i,o,c,u){for(var f=!0,x=[],h="",p=vr(a),g=s.s.c;g<=s.e.c;++g)if(r[g]){var y=u.dense?(t[a]||[])[g]:t[r[g]+p];if(y==null)h="";else if(y.v!=null){f=!1,h=""+(u.rawNumbers&&y.t=="n"?y.v:Qi(y,null,u));for(var b=0,N=0;b!==h.length;++b)if((N=h.charCodeAt(b))===i||N===o||N===34||u.forceQuotes){h='"'+h.replace(Gw,'""')+'"';break}h=="ID"&&(h='"ID"')}else y.f!=null&&!y.F?(f=!1,h="="+y.f,h.indexOf(",")>=0&&(h='"'+h.replace(Gw,'""')+'"')):h="";x.push(h)}return u.blankrows===!1&&f?null:x.join(c)}function Jv(t,s){var a=[],r=s??{};if(t==null||t["!ref"]==null)return"";var i=ua(t["!ref"]),o=r.FS!==void 0?r.FS:",",c=o.charCodeAt(0),u=r.RS!==void 0?r.RS:`
`,f=u.charCodeAt(0),x=new RegExp((o=="|"?"\\|":o)+"+$"),h="",p=[];r.dense=Array.isArray(t);for(var g=r.skipHidden&&t["!cols"]||[],y=r.skipHidden&&t["!rows"]||[],b=i.s.c;b<=i.e.c;++b)(g[b]||{}).hidden||(p[b]=Ar(b));for(var N=0,S=i.s.r;S<=i.e.r;++S)(y[S]||{}).hidden||(h=n9(t,i,S,p,c,f,o,r),h!=null&&(r.strip&&(h=h.replace(x,"")),(h||r.blankrows!==!1)&&a.push((N++?u:"")+h)));return delete r.dense,a.join("")}function QT(t,s){s||(s={}),s.FS="	",s.RS=`
`;var a=Jv(t,s);return a}function i9(t){var s="",a,r="";if(t==null||t["!ref"]==null)return[];var i=ua(t["!ref"]),o="",c=[],u,f=[],x=Array.isArray(t);for(u=i.s.c;u<=i.e.c;++u)c[u]=Ar(u);for(var h=i.s.r;h<=i.e.r;++h)for(o=vr(h),u=i.s.c;u<=i.e.c;++u)if(s=c[u]+o,a=x?(t[h]||[])[u]:t[s],r="",a!==void 0){if(a.F!=null){if(s=a.F,!a.f)continue;r=a.f,s.indexOf(":")==-1&&(s=s+":"+s)}if(a.f!=null)r=a.f;else{if(a.t=="z")continue;if(a.t=="n"&&a.v!=null)r=""+a.v;else if(a.t=="b")r=a.v?"TRUE":"FALSE";else if(a.w!==void 0)r="'"+a.w;else{if(a.v===void 0)continue;a.t=="s"?r="'"+a.v:r=""+a.v}}f[f.length]=s+"="+r}return f}function ZT(t,s,a){var r=a||{},i=+!r.skipHeader,o=t||{},c=0,u=0;if(o&&r.origin!=null)if(typeof r.origin=="number")c=r.origin;else{var f=typeof r.origin=="string"?ar(r.origin):r.origin;c=f.r,u=f.c}var x,h={s:{c:0,r:0},e:{c:u,r:c+s.length-1+i}};if(o["!ref"]){var p=ua(o["!ref"]);h.e.c=Math.max(h.e.c,p.e.c),h.e.r=Math.max(h.e.r,p.e.r),c==-1&&(c=p.e.r+1,h.e.r=c+s.length-1+i)}else c==-1&&(c=0,h.e.r=s.length-1+i);var g=r.header||[],y=0;s.forEach(function(N,S){yr(N).forEach(function(C){(y=g.indexOf(C))==-1&&(g[y=g.length]=C);var k=N[C],A="z",G="",F=Ys({c:u+y,r:c+S+i});x=Uu(o,F),k&&typeof k=="object"&&!(k instanceof Date)?o[F]=k:(typeof k=="number"?A="n":typeof k=="boolean"?A="b":typeof k=="string"?A="s":k instanceof Date?(A="d",r.cellDates||(A="n",k=Jr(k)),G=r.dateNF||Da[14]):k===null&&r.nullError&&(A="e",k=0),x?(x.t=A,x.v=k,delete x.w,delete x.R,G&&(x.z=G)):o[F]=x={t:A,v:k},G&&(x.z=G))})}),h.e.c=Math.max(h.e.c,u+g.length-1);var b=vr(c);if(i)for(y=0;y<g.length;++y)o[Ar(y+u)+b]={t:"s",v:g[y]};return o["!ref"]=Ga(h),o}function l9(t,s){return ZT(null,t,s)}function Uu(t,s,a){if(typeof s=="string"){if(Array.isArray(t)){var r=ar(s);return t[r.r]||(t[r.r]=[]),t[r.r][r.c]||(t[r.r][r.c]={t:"z"})}return t[s]||(t[s]={t:"z"})}return typeof s!="number"?Uu(t,Ys(s)):Uu(t,Ys({r:s,c:a||0}))}function o9(t,s){if(typeof s=="number"){if(s>=0&&t.SheetNames.length>s)return s;throw new Error("Cannot find sheet # "+s)}else if(typeof s=="string"){var a=t.SheetNames.indexOf(s);if(a>-1)return a;throw new Error("Cannot find sheet name |"+s+"|")}else throw new Error("Cannot find sheet |"+s+"|")}function c9(){return{SheetNames:[],Sheets:{}}}function d9(t,s,a,r){var i=1;if(!a)for(;i<=65535&&t.SheetNames.indexOf(a="Sheet"+i)!=-1;++i,a=void 0);if(!a||t.SheetNames.length>=65535)throw new Error("Too many worksheets");if(r&&t.SheetNames.indexOf(a)>=0){var o=a.match(/(^.*?)(\d+)$/);i=o&&+o[2]||0;var c=o&&o[1]||a;for(++i;i<=65535&&t.SheetNames.indexOf(a=c+i)!=-1;++i);}if(UT(a),t.SheetNames.indexOf(a)>=0)throw new Error("Worksheet with name |"+a+"| already exists!");return t.SheetNames.push(a),t.Sheets[a]=s,a}function u9(t,s,a){t.Workbook||(t.Workbook={}),t.Workbook.Sheets||(t.Workbook.Sheets=[]);var r=o9(t,s);switch(t.Workbook.Sheets[r]||(t.Workbook.Sheets[r]={}),a){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+a)}t.Workbook.Sheets[r].Hidden=a}function m9(t,s){return t.z=s,t}function JT(t,s,a){return s?(t.l={Target:s},a&&(t.l.Tooltip=a)):delete t.l,t}function h9(t,s,a){return JT(t,"#"+s,a)}function f9(t,s,a){t.c||(t.c=[]),t.c.push({t:s,a:a||"SheetJS"})}function x9(t,s,a,r){for(var i=typeof s!="string"?s:ua(s),o=typeof s=="string"?s:Ga(s),c=i.s.r;c<=i.e.r;++c)for(var u=i.s.c;u<=i.e.c;++u){var f=Uu(t,c,u);f.t="n",f.F=o,delete f.v,c==i.s.r&&u==i.s.c&&(f.f=a,r&&(f.D=!0))}return t}var P0={encode_col:Ar,encode_row:vr,encode_cell:Ys,encode_range:Ga,decode_col:Vv,decode_row:Uv,split_cell:AM,decode_cell:ar,decode_range:xn,format_cell:Qi,sheet_add_aoa:JC,sheet_add_json:ZT,sheet_add_dom:GT,aoa_to_sheet:cd,json_to_sheet:l9,table_to_sheet:qT,table_to_book:I7,sheet_to_csv:Jv,sheet_to_txt:QT,sheet_to_json:Cf,sheet_to_html:WT,sheet_to_formulae:i9,sheet_to_row_object_array:Cf,sheet_get_cell:Uu,book_new:c9,book_append_sheet:d9,book_set_sheet_visibility:u9,cell_set_number_format:m9,cell_set_hyperlink:JT,cell_set_internal_link:h9,cell_add_comment:f9,sheet_set_array_formula:x9,consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}};const p9=()=>{const t=Ka(),[s,a]=v.useState({upcomingSessions:0,openTickets:0,unreadMessages:0,todayAppointments:0});v.useEffect(()=>{r()},[]);const r=async()=>{try{const u={Authorization:`Bearer ${localStorage.getItem("token")}`},[f,x,h]=await Promise.allSettled([Ne.get("/sessions?upcoming=true",{headers:u}),Ne.get("/support/tickets?status=open",{headers:u}),Ne.get("/appointments",{headers:u})]);a({upcomingSessions:f.status==="fulfilled"&&f.value?.data?.length||0,openTickets:x.status==="fulfilled"&&x.value?.data?.length||0,unreadMessages:0,todayAppointments:h.status==="fulfilled"&&h.value?.data?.filter(p=>{const g=new Date(p.date),y=new Date;return g.toDateString()===y.toDateString()}).length||0})}catch(c){console.error("Error fetching communication stats:",c)}},i=[{icon:Aa,title:"Live Sessions",description:"Schedule and host video meetings",href:"/dashboard/sessions",color:"text-blue-500",bgColor:"bg-blue-50 dark:bg-blue-950",stat:s.upcomingSessions,statLabel:"upcoming",badge:"New",badgeColor:"bg-green-500"},{icon:Pf,title:"Support Tickets",description:"Manage customer support requests",href:"/dashboard/support",color:"text-purple-500",bgColor:"bg-purple-50 dark:bg-purple-950",stat:s.openTickets,statLabel:"open"},{icon:ta,title:"Messages",description:"Chat with clients and team",href:"/dashboard/messages",color:"text-green-500",bgColor:"bg-green-50 dark:bg-green-950",stat:s.unreadMessages,statLabel:"unread"},{icon:gs,title:"Appointments",description:"View and manage bookings",href:"/dashboard/appointments",color:"text-orange-500",bgColor:"bg-orange-50 dark:bg-orange-950",stat:s.todayAppointments,statLabel:"today"}],o=[{icon:Aa,label:"Schedule Session",onClick:()=>t("/dashboard/sessions"),variant:"default"},{icon:ta,label:"New Ticket",onClick:()=>t("/dashboard/support"),variant:"outline"},{icon:Ks,label:"Send Email",onClick:()=>window.location.href="mailto:",variant:"outline"}];return e.jsxs(K,{className:"w-full",children:[e.jsx(xe,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs(pe,{className:"flex items-center gap-2",children:[e.jsx(Zt,{className:"h-5 w-5"}),"Communication Hub"]}),e.jsx(ot,{children:"Manage all your client communications in one place"})]}),e.jsxs(R,{variant:"ghost",size:"sm",onClick:()=>t("/dashboard/support"),children:["View All",e.jsx(_l,{className:"h-4 w-4 ml-2"})]})]})}),e.jsxs(Y,{className:"space-y-6",children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:i.map(c=>e.jsx(K,{className:"cursor-pointer hover:shadow-md transition-shadow relative overflow-hidden group",onClick:()=>t(c.href),children:e.jsxs(Y,{className:"p-4",children:[e.jsx("div",{className:`${c.bgColor} rounded-lg p-3 w-fit mb-3 group-hover:scale-110 transition-transform`,children:e.jsx(c.icon,{className:`h-6 w-6 ${c.color}`})}),e.jsxs("h3",{className:"font-semibold text-sm mb-1 flex items-center gap-2",children:[c.title,c.badge&&e.jsx(De,{className:`${c.badgeColor} text-white text-[10px] px-1.5 py-0`,children:c.badge})]}),e.jsx("p",{className:"text-xs text-muted-foreground mb-2",children:c.description}),c.stat!==void 0&&e.jsxs("div",{className:"text-lg font-bold",children:[c.stat,e.jsx("span",{className:"text-xs text-muted-foreground font-normal ml-1",children:c.statLabel})]})]})},c.title))}),e.jsxs("div",{className:"border-t pt-4",children:[e.jsx("h4",{className:"text-sm font-semibold mb-3",children:"Quick Actions"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:o.map(c=>e.jsxs(R,{variant:c.variant,size:"sm",onClick:c.onClick,className:"gap-2",children:[e.jsx(c.icon,{className:"h-4 w-4"}),c.label]},c.label))})]}),e.jsxs("div",{className:"bg-muted/50 rounded-lg p-4 space-y-2",children:[e.jsxs("h4",{className:"text-sm font-semibold flex items-center gap-2",children:[e.jsx(Ws,{className:"h-4 w-4"}),"Communication Tips"]}),e.jsxs("ul",{className:"text-xs text-muted-foreground space-y-1",children:[e.jsx("li",{children:" Use Live Sessions for face-to-face client meetings"}),e.jsx("li",{children:" Create support tickets for trackable customer issues"}),e.jsx("li",{children:" Schedule appointments for structured consultations"}),e.jsx("li",{children:" Response time affects customer satisfaction"})]})]})]})]})},M0=async()=>{try{const t=localStorage.getItem("token");if(!t)return null;const s={Authorization:`Bearer ${t}`},[a,r,i,o,c]=await Promise.allSettled([Ne.get("/orders",{headers:s}),Ne.get("/products",{headers:s}),Ne.get("/transactions",{headers:s}),Ne.get("/appointments",{headers:s}),Ne.get("/customers",{headers:s})]),u=a.status==="fulfilled"?a.value?.data||[]:[],f=u.length,x=i.status==="fulfilled"?i.value?.data||[]:[],h=Array.isArray(x)?x.reduce((_,P)=>_+(Number(P.amount)||0),0):0,g=(c.status==="fulfilled"?c.value?.data||[]:[]).length,y=isNaN(h)?0:h,b=isNaN(f)?0:f,N=isNaN(g)?0:g,S=o.status==="fulfilled"?o.value?.data||[]:[],C=new Date;C.setHours(0,0,0,0);const k=new Date(C);k.setDate(k.getDate()+1);const A=S.filter(_=>{const P=new Date(_.time||_.date);return P>=C&&P<k}).length,G=new Date().getMonth(),F=u.filter(_=>new Date(_.createdAt).getMonth()===G).length,E=u.filter(_=>new Date(_.createdAt).getMonth()===G-1).length,T=E>0?((F-E)/E*100).toFixed(1):0;return{stats:[{title:"Total Revenue",value:`KES ${y.toLocaleString()}`,change:"+12.3%",trend:"up",icon:ra,description:"from last month"},{title:"Total Orders",value:b.toString(),change:`${T>0?"+":""}${T}%`,trend:T>=0?"up":"down",icon:ws,description:"from last month"},{title:"Active Customers",value:N.toString(),change:"+5.2%",trend:"up",icon:Zt,description:"total customers"},{title:"Appointments Today",value:(isNaN(A)?0:A).toString(),change:S.length>0?`${S.length} total`:"0 total",trend:A>0?"up":"down",icon:gs,description:"scheduled today"}]}}catch(t){return console.error("Error fetching dashboard data:",t),{stats:[{title:"Total Revenue",value:"KES 0",change:"0%",trend:"up",icon:ra,description:"from last month"},{title:"Total Orders",value:"0",change:"0%",trend:"up",icon:ws,description:"from last month"},{title:"Active Customers",value:"0",change:"0%",trend:"up",icon:Zt,description:"total customers"},{title:"Appointments Today",value:"0",change:"0",trend:"down",icon:gs,description:"scheduled today"}]}}},g9=()=>{const{user:t,isAuthenticated:s,loading:a}=_s();TP();const r=Ka(),[i,o]=v.useState(null),[c,u]=v.useState(!1),[f,x]=v.useState(!1),[h,p]=v.useState(!1),g=async()=>{p(!0);const S=await M0();o(S),p(!1)},y=[{name:"Add Product",icon:Yt,path:"/dashboard/products",color:"text-blue-600"},{name:"Add Service",icon:Pl,path:"/dashboard/services",color:"text-green-600"},{name:"Create Discount",icon:No,path:"/dashboard/discounts",color:"text-purple-600"},{name:"View Analytics",icon:er,path:"/dashboard/analytics",color:"text-orange-600"},{name:"View Reports",icon:ba,path:"/dashboard/reports",color:"text-red-600"},{name:"Settings",icon:Wa,path:"/dashboard/settings",color:"text-gray-600"}];if(v.useEffect(()=>{s&&M0().then(o)},[s]),v.useEffect(()=>{if(!s)return;const S=setInterval(()=>{M0().then(o)},3e4);return()=>clearInterval(S)},[s]),a)return e.jsx("div",{children:"Loading..."});if(!s)return e.jsx("div",{children:"Please log in to view your dashboard."});if(!i)return e.jsx("div",{children:"Loading dashboard data..."});const{stats:b}=i,N=()=>{const S=P0.json_to_sheet(b.map(k=>({Title:k.title,Value:k.value,Change:k.change,Trend:k.trend,Description:k.description}))),C=P0.book_new();P0.book_append_sheet(C,S,"Stats Report"),a9(C,"dashboard_report.xlsx")};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold text-foreground",children:["Welcome back, ",e.jsx("span",{className:"text-green-500",children:t?t.name:"Guest"}),"!"]}),e.jsx("p",{className:"text-muted-foreground",children:"Here's what's happening with your business today."})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs(R,{variant:"outline",onClick:g,disabled:h,children:[e.jsx(cs,{className:`mr-2 h-4 w-4 ${h?"animate-spin":""}`}),h?"Refreshing...":"Refresh"]}),e.jsxs(R,{variant:"outline",onClick:()=>u(!c),children:[e.jsx(ca,{className:"mr-2 h-4 w-4"}),"View Reports"]}),e.jsxs(R,{onClick:()=>x(!0),children:[e.jsx(Gs,{className:"mr-2 h-4 w-4"}),"Quick Action"]})]})]}),c&&e.jsxs("div",{className:"mt-4",children:[e.jsxs(K,{children:[e.jsxs(xe,{children:[e.jsx(pe,{children:"Stats Report"}),e.jsx(ot,{children:"Generated Report of Business Stats"})]}),e.jsx(Y,{children:e.jsxs("table",{className:"min-w-full table-auto",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2 text-left",children:"Title"}),e.jsx("th",{className:"px-4 py-2 text-left",children:"Value"}),e.jsx("th",{className:"px-4 py-2 text-left",children:"Change"}),e.jsx("th",{className:"px-4 py-2 text-left",children:"Trend"}),e.jsx("th",{className:"px-4 py-2 text-left",children:"Description"})]})}),e.jsx("tbody",{children:b.map(S=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-2",children:S.title}),e.jsx("td",{className:"px-4 py-2",children:S.value}),e.jsx("td",{className:"px-4 py-2",children:S.change}),e.jsx("td",{className:"px-4 py-2",children:S.trend==="up"?"":""}),e.jsx("td",{className:"px-4 py-2",children:S.description})]},S.title))})]})})]}),e.jsx(R,{className:"mt-4",onClick:N,children:"Download Report (Excel)"})]}),e.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-4",children:b.map(S=>{const C=S.icon;return e.jsxs(K,{children:[e.jsxs(xe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(pe,{className:"text-sm font-medium",children:S.title}),e.jsx(C,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(Y,{children:[e.jsx("div",{className:"text-2xl font-bold",children:S.value}),e.jsxs("div",{className:"flex items-center text-xs text-muted-foreground",children:[S.trend==="up"?e.jsx(Is,{className:"mr-1 h-3 w-3 text-green-600"}):e.jsx(fi,{className:"mr-1 h-3 w-3 text-red-600"}),e.jsx("span",{className:S.trend==="up"?"text-green-600":"text-red-600",children:S.change}),e.jsx("span",{className:"ml-1",children:S.description})]})]})]},S.title)})}),e.jsx(p9,{}),e.jsxs(K,{children:[e.jsxs(xe,{children:[e.jsx(pe,{children:"Quick Actions"}),e.jsx(ot,{children:"Common tasks and shortcuts"})]}),e.jsx(Y,{children:e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[e.jsxs(R,{variant:"outline",className:"h-auto flex-col py-4",onClick:()=>r("/dashboard/products"),children:[e.jsx(Yt,{className:"h-6 w-6 mb-2"}),e.jsx("span",{className:"text-xs",children:"Add Product"})]}),e.jsxs(R,{variant:"outline",className:"h-auto flex-col py-4",onClick:()=>r("/dashboard/services"),children:[e.jsx(Pl,{className:"h-6 w-6 mb-2"}),e.jsx("span",{className:"text-xs",children:"Add Service"})]}),e.jsxs(R,{variant:"outline",className:"h-auto flex-col py-4",onClick:()=>r("/dashboard/appointments"),children:[e.jsx(gs,{className:"h-6 w-6 mb-2"}),e.jsx("span",{className:"text-xs",children:"Appointments"})]}),e.jsxs(R,{variant:"outline",className:"h-auto flex-col py-4",onClick:()=>r("/dashboard/discounts"),children:[e.jsx(No,{className:"h-6 w-6 mb-2"}),e.jsx("span",{className:"text-xs",children:"Discounts"})]})]})})]}),e.jsx(Bt,{open:f,onOpenChange:x,children:e.jsxs(zt,{className:"sm:max-w-md",children:[e.jsxs(Ut,{children:[e.jsx(Vt,{children:"Quick Actions"}),e.jsx(es,{children:"Choose an action to perform quickly"})]}),e.jsx("div",{className:"grid grid-cols-2 gap-3",children:y.map(S=>{const C=S.icon;return e.jsxs(R,{variant:"outline",className:"h-20 flex-col gap-2",onClick:()=>{r(S.path),x(!1)},children:[e.jsx(C,{className:`h-6 w-6 ${S.color}`}),e.jsx("span",{className:"text-xs",children:S.name})]},S.name)})})]})})]})};function eE(){const t=[{id:1,icon:Yt,title:"Inventory Management",description:"Track stock levels, manage suppliers, and automate reordering with real-time inventory updates.",features:["Real-time tracking","Low stock alerts","Supplier management","Barcode scanning"]},{id:2,icon:ws,title:"E-Commerce Integration",description:"Seamlessly connect your online store with inventory and order management systems.",features:["Multi-platform sync","Order processing","Product catalog","Payment integration"]},{id:3,icon:gs,title:"Appointment Scheduling",description:"Manage bookings, send reminders, and optimize your schedule with intelligent calendar management.",features:["Online booking","SMS reminders","Calendar sync","Staff scheduling"]},{id:4,icon:ra,title:"Financial Management",description:"Handle invoicing, track expenses, and monitor cash flow with comprehensive financial tools.",features:["Invoice generation","Expense tracking","Payment processing","Financial reports"]},{id:5,icon:er,title:"Analytics & Insights",description:"Make data-driven decisions with detailed analytics and AI-powered business insights.",features:["Sales analytics","Performance metrics","Trend analysis","Custom reports"]},{id:6,icon:Zt,title:"Customer Management",description:"Build stronger relationships with comprehensive customer profiles and communication tools.",features:["Customer profiles","Communication history","Loyalty programs","Feedback management"]},{id:7,icon:da,title:"Security & Compliance",description:"Enterprise-grade security with data encryption and compliance with industry standards.",features:["Data encryption","Access controls","Audit trails","GDPR compliance"]},{id:8,icon:qr,title:"Mobile Access",description:"Manage your business on-the-go with our responsive mobile interface and dedicated apps.",features:["Mobile responsive","Offline access","Push notifications","Cross-platform"]}],s=[{icon:ts,title:"24/7 Support",description:"Round-the-clock customer support"},{icon:Is,title:"Scalable",description:"Grows with your business needs"},{icon:ba,title:"Documentation",description:"Comprehensive guides and tutorials"},{icon:Wa,title:"Customizable",description:"Tailor the platform to your workflow"}];return e.jsx("section",{className:"py-16 bg-background",children:e.jsxs("div",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"text-center mb-16",children:[e.jsxs("h2",{className:"text-4xl font-bold text-foreground mb-4",children:["Powerful ",e.jsx("span",{className:"text-green-400",children:"Features "})," for Your Business"]}),e.jsx("p",{className:"text-xl text-muted-foreground max-w-3xl mx-auto",children:"Everything you need to streamline operations, boost productivity, and grow your business in one comprehensive platform."})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-8 mb-16",children:t.map(a=>{const r=a.icon;return e.jsxs("div",{className:"bg-card p-6 rounded-lg border shadow-sm hover:shadow-md transition-shadow duration-300 group",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("div",{className:"p-3 bg-primary/10 rounded-lg mr-4 group-hover:bg-primary/20 transition-colors duration-300",children:e.jsx(r,{className:"h-6 w-6 text-green-500"})}),e.jsx("h3",{className:"text-lg font-semibold text-foreground",children:a.title})]}),e.jsx("p",{className:"text-muted-foreground mb-4 text-sm leading-relaxed",children:a.description}),e.jsx("ul",{className:"space-y-2",children:a.features.map((i,o)=>e.jsxs("li",{className:"flex items-center text-sm text-muted-foreground",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-primary rounded-full mr-2 flex-shrink-0"}),i]},o))})]},a.id)})}),e.jsxs("div",{className:"bg-muted/30 rounded-2xl p-8",children:[e.jsx("h3",{className:"text-2xl font-bold text-center text-foreground mb-8",children:"Why Choose ominbiz?"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:s.map((a,r)=>{const i=a.icon;return e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"inline-flex p-4 bg-primary/10 rounded-full mb-4",children:e.jsx(i,{className:"h-8 w-8 text-green-500"})}),e.jsx("h4",{className:"font-semibold text-foreground mb-2",children:a.title}),e.jsx("p",{className:"text-sm text-muted-foreground",children:a.description})]},r)})})]}),e.jsxs("div",{className:"text-center mt-16",children:[e.jsx("h3",{className:"text-2xl font-bold text-foreground mb-4",children:"Ready to Transform Your Business?"}),e.jsx("p",{className:"text-muted-foreground mb-8 max-w-2xl mx-auto",children:"Join thousands of businesses that have streamlined their operations with ominbiz. Start your free trial today and see the difference."}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[e.jsx(qt,{to:"/signup",children:e.jsx("button",{className:"bg-green-500 text-white px-8 py-3 rounded-lg font-medium cursor-pointer hover:bg-green-400  transition-colors duration-200",children:"Start Free Trial"})}),e.jsx(qt,{to:"/contact",children:e.jsx("button",{className:"border border-input px-8 py-3 rounded-lg  cursor-pointer font-medium text-foreground hover:bg-accent hover:text-accent-foreground transition-colors duration-200",children:"Schedule Demo"})})]})]})]})})}const Vo=()=>{const[t,s]=v.useState({});return e.jsx("div",{className:"footer",children:e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-8",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-3xl font-bold mb-4",children:["Omni",e.jsx("span",{className:"text-green-500",children:"Biz"})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Streamline your business operations with our comprehensive management platform."})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-4",children:"Features"}),e.jsxs("ul",{className:"space-y-2 text-sm",children:[e.jsx("li",{children:e.jsx(qt,{to:"/features",className:"hover:text-primary",children:"Inventory Management"})}),e.jsx("li",{children:e.jsx(qt,{to:"/features",className:"hover:text-primary",children:"E-commerce"})}),e.jsx("li",{children:e.jsx(qt,{to:"/features",className:"hover:text-primary",children:"Appointments"})}),e.jsx("li",{children:e.jsx(qt,{to:"/features",className:"hover:text-primary",children:"Finance"})})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-4",children:"Company"}),e.jsxs("ul",{className:"space-y-2 text-sm",children:[e.jsx("li",{children:e.jsx(qt,{to:"/about",className:"hover:text-primary",children:"About"})}),e.jsx("li",{children:e.jsx(qt,{to:"/contact",className:"hover:text-primary",children:"Contact"})}),e.jsx("li",{children:e.jsx(qt,{to:"/contact",className:"hover:text-primary",children:"Support"})})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-4",children:"Legal"}),e.jsxs("ul",{className:"space-y-2 text-sm",children:[e.jsx("li",{children:e.jsx(qt,{to:"/privacy",className:"hover:text-primary",children:"Privacy Policy"})}),e.jsx("li",{children:e.jsx(qt,{to:"/terms",className:"hover:text-primary",children:"Terms of Service"})})]})]})]}),e.jsx("div",{className:"border-t mt-8 pt-8 text-center text-sm text-muted-foreground",children:e.jsxs("p",{children:[" ",new Date().getFullYear()," ",e.jsxs("span",{className:"text-2xl font-bold",children:["Omni",e.jsx("span",{className:"text-green-500",children:"Biz"})]}),". All rights reserved."]})})]})})};function v9({title:t,titleId:s,...a},r){return v.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":s},a),t?v.createElement("title",{id:s},t):null,v.createElement("path",{fillRule:"evenodd",d:"M12.97 3.97a.75.75 0 0 1 1.06 0l7.5 7.5a.75.75 0 0 1 0 1.06l-7.5 7.5a.75.75 0 1 1-1.06-1.06l6.22-6.22H3a.75.75 0 0 1 0-1.5h16.19l-6.22-6.22a.75.75 0 0 1 0-1.06Z",clipRule:"evenodd"}))}const j9=v.forwardRef(v9);function y9({title:t,titleId:s,...a},r){return v.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":s},a),t?v.createElement("title",{id:s},t):null,v.createElement("path",{fillRule:"evenodd",d:"M15.22 6.268a.75.75 0 0 1 .968-.431l5.942 2.28a.75.75 0 0 1 .431.97l-2.28 5.94a.75.75 0 1 1-1.4-.537l1.63-4.251-1.086.484a11.2 11.2 0 0 0-5.45 5.173.75.75 0 0 1-1.199.19L9 12.312l-6.22 6.22a.75.75 0 0 1-1.06-1.061l6.75-6.75a.75.75 0 0 1 1.06 0l3.606 3.606a12.695 12.695 0 0 1 5.68-4.974l1.086-.483-4.251-1.632a.75.75 0 0 1-.432-.97Z",clipRule:"evenodd"}))}const qw=v.forwardRef(y9);function N9({title:t,titleId:s,...a},r){return v.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":s},a),t?v.createElement("title",{id:s},t):null,v.createElement("path",{fillRule:"evenodd",d:"M3 6.75A.75.75 0 0 1 3.75 6h16.5a.75.75 0 0 1 0 1.5H3.75A.75.75 0 0 1 3 6.75ZM3 12a.75.75 0 0 1 .75-.75h16.5a.75.75 0 0 1 0 1.5H3.75A.75.75 0 0 1 3 12Zm0 5.25a.75.75 0 0 1 .75-.75h16.5a.75.75 0 0 1 0 1.5H3.75a.75.75 0 0 1-.75-.75Z",clipRule:"evenodd"}))}const b9=v.forwardRef(N9);function w9({title:t,titleId:s,...a},r){return v.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":s},a),t?v.createElement("title",{id:s},t):null,v.createElement("path",{fillRule:"evenodd",d:"M12.516 2.17a.75.75 0 0 0-1.032 0 11.209 11.209 0 0 1-7.877 3.08.75.75 0 0 0-.722.515A12.74 12.74 0 0 0 2.25 9.75c0 5.942 4.064 10.933 9.563 12.348a.749.749 0 0 0 .374 0c5.499-1.415 9.563-6.406 9.563-12.348 0-1.39-.223-2.73-.635-3.985a.75.75 0 0 0-.722-.516l-.143.001c-2.996 0-5.717-1.17-7.734-3.08Zm3.094 8.016a.75.75 0 1 0-1.22-.872l-3.236 4.53L9.53 12.22a.75.75 0 0 0-1.06 1.06l2.25 2.25a.75.75 0 0 0 1.14-.094l3.75-5.25Z",clipRule:"evenodd"}))}const S9=v.forwardRef(w9);function C9({title:t,titleId:s,...a},r){return v.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":s},a),t?v.createElement("title",{id:s},t):null,v.createElement("path",{fillRule:"evenodd",d:"M8.25 6.75a3.75 3.75 0 1 1 7.5 0 3.75 3.75 0 0 1-7.5 0ZM15.75 9.75a3 3 0 1 1 6 0 3 3 0 0 1-6 0ZM2.25 9.75a3 3 0 1 1 6 0 3 3 0 0 1-6 0ZM6.31 15.117A6.745 6.745 0 0 1 12 12a6.745 6.745 0 0 1 6.709 7.498.75.75 0 0 1-.372.568A12.696 12.696 0 0 1 12 21.75c-2.305 0-4.47-.612-6.337-1.684a.75.75 0 0 1-.372-.568 6.787 6.787 0 0 1 1.019-4.38Z",clipRule:"evenodd"}),v.createElement("path",{d:"M5.082 14.254a8.287 8.287 0 0 0-1.308 5.135 9.687 9.687 0 0 1-1.764-.44l-.115-.04a.563.563 0 0 1-.373-.487l-.01-.121a3.75 3.75 0 0 1 3.57-4.047ZM20.226 19.389a8.287 8.287 0 0 0-1.308-5.135 3.75 3.75 0 0 1 3.57 4.047l-.01.121a.563.563 0 0 1-.373.486l-.115.04c-.567.2-1.156.349-1.764.441Z"}))}const T9=v.forwardRef(C9);function E9({title:t,titleId:s,...a},r){return v.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":s},a),t?v.createElement("title",{id:s},t):null,v.createElement("path",{fillRule:"evenodd",d:"M5.47 5.47a.75.75 0 0 1 1.06 0L12 10.94l5.47-5.47a.75.75 0 1 1 1.06 1.06L13.06 12l5.47 5.47a.75.75 0 1 1-1.06 1.06L12 13.06l-5.47 5.47a.75.75 0 0 1-1.06-1.06L10.94 12 5.47 6.53a.75.75 0 0 1 0-1.06Z",clipRule:"evenodd"}))}const k9=v.forwardRef(E9);function A9(){return e.jsxs("section",{className:"bg-gray-200 flex flex-col md:flex-row items-center md:h-screen px-4 sm:px-6 lg:px-10 py-10",children:[e.jsxs("div",{className:"space-y-5 w-full md:w-1/2",children:[e.jsxs("p",{className:"bg-green-500 mt-4 text-white flex items-center w-fit px-4 py-2 rounded-md text-sm",children:[e.jsx(qw,{className:"w-5 h-5 text-white mr-2"}),"Trusted by 10,000+ businesses"]}),e.jsxs("h1",{className:"text-3xl sm:text-4xl md:text-6xl font-bold text-gray-800 leading-tight",children:["Complete Business ",e.jsx("span",{className:"text-green-600",children:"Management"})," ","Solution"]}),e.jsx("p",{className:"text-base sm:text-lg md:text-2xl font-medium text-gray-600",children:"Streamline your entire business with our all-in-one platform. Manage inventory, run your e-commerce store, schedule appointments, and track finances  all from one beautiful dashboard."}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4",children:[e.jsxs("p",{className:"flex items-center text-gray-700",children:[e.jsx(T9,{className:"w-8 h-8 text-green-600 mr-2"}),"10,000+ users"]}),e.jsxs("p",{className:"flex items-center text-gray-700",children:[e.jsx(S9,{className:"w-8 h-8 text-green-600 mr-2"}),"Bank-level Security"]}),e.jsxs("p",{className:"flex items-center text-gray-700",children:[e.jsx(qw,{className:"w-8 h-8 text-green-600 mr-2"}),"99.9% Uptime"]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 sm:gap-10",children:[e.jsx(qt,{to:"/signup",children:e.jsxs(R,{className:"bg-green-500 text-white px-10 py-6 hover:bg-green-400 flex items-center justify-center gap-2",children:["Start free trial ",e.jsx(j9,{className:"w-5 h-5"})]})}),e.jsx(qt,{to:"/features",children:e.jsx(R,{className:"px-10 py-6 border border-gray-400 text-gray-200",children:"Learn more"})})]}),e.jsx("p",{className:"text-sm text-gray-500",children:"No credit card required  14-day free trial  Cancel anytime"})]}),e.jsx("div",{className:"mt-10 md:mt-0 md:ml-10 w-full md:w-[60%]",children:e.jsx("img",{src:"https://preview--verdant-manage.lovable.app/assets/hero-dashboard-CKmWT72o.jpg",alt:"Dashboard preview",className:"rounded w-full max-w-md sm:max-w-lg md:max-w-2xl mx-auto"})})]})}const $o=()=>{const[t,s]=v.useState(!1);return v.useEffect(()=>{const a=r=>{t&&!r.target.closest("nav")&&s(!1)};return document.addEventListener("click",a),()=>document.removeEventListener("click",a)},[t]),e.jsx("nav",{className:"bg-background border-b border-border sticky top-0 z-50",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"flex justify-between items-center h-16",children:[e.jsxs(qt,{to:"/",className:"flex items-center space-x-2",children:[e.jsx("img",{src:"https://2aa832b0f010801d3551c6c63b116063.cdn.bubble.io/cdn-cgi/image/w=48,h=48,f=auto,dpr=1,fit=contain/f1758225569468x933635082935872100/logo.webp",alt:"ominbizHub Logo"}),e.jsxs("span",{className:"text-xl font-bold text-foreground",children:["Omin",e.jsx("span",{className:"text-green-500",children:"BIZ"})]})]}),e.jsxs("div",{className:"hidden md:flex items-center space-x-8",children:[e.jsx(qt,{to:"/features",className:"text-foreground hover:text-primary transition-colors",children:"Features"}),e.jsx(qt,{to:"/pricing",className:"text-foreground hover:text-primary transition-colors",children:"Pricing"}),e.jsx(qt,{to:"/about",className:"text-foreground hover:text-primary transition-colors",children:"About"}),e.jsx(qt,{to:"/contact",className:"text-foreground hover:text-primary transition-colors",children:"Contact"})]}),e.jsxs("div",{className:"hidden md:flex items-center space-x-4",children:[e.jsx(qt,{to:"/loginpage",children:e.jsx(R,{variant:"ghost",children:"Login"})}),e.jsx(qt,{to:"/signup",children:e.jsx(R,{className:"bg-green-500 py-6 px-8 cursor-pointer hover:bg-green-400",children:"Start Free Trial"})})]}),e.jsx("div",{className:"md:hidden",children:e.jsx(R,{variant:"ghost",size:"icon",onClick:()=>s(!t),children:t?e.jsx(k9,{className:"h-6 w-6"}):e.jsx(b9,{className:"h-6 w-6"})})})]}),t&&e.jsx("div",{className:"md:hidden",children:e.jsxs("div",{className:"px-2 pt-2 pb-3 space-y-1 bg-background border-t border-border",children:[e.jsx(qt,{to:"/features",className:"block px-3 py-2 text-foreground hover:text-primary transition-colors",onClick:()=>s(!1),children:"Features"}),e.jsx(qt,{to:"/pricing",className:"block px-3 py-2 text-foreground hover:text-primary transition-colors",onClick:()=>s(!1),children:"Pricing"}),e.jsx(qt,{to:"/about",className:"block px-3 py-2 text-foreground hover:text-primary transition-colors",onClick:()=>s(!1),children:"About"}),e.jsx(qt,{to:"/contact",className:"block px-3 py-2 text-foreground hover:text-primary transition-colors",onClick:()=>s(!1),children:"Contact"}),e.jsxs("div",{className:"pt-4 space-y-2",children:[e.jsx(qt,{to:"/loginpage",onClick:()=>s(!1),children:e.jsx(R,{variant:"ghost",className:"w-full",children:"Login"})}),e.jsx(qt,{to:"/signup",onClick:()=>s(!1),children:e.jsx(R,{className:"bg-green-500 py-6 px-8 cursor-pointer w-full",children:"Start Free Trial"})})]})]})})]})})},_9=[{name:"Sarah Chebet",role:"Restaurant Owner",company:"Green Leaf Bistro",content:"BizHub transformed how we manage our restaurant. From inventory tracking to appointment reservations, everything is seamless. Our efficiency increased by 40%!",rating:5,avatar:"SJ"},{name:"Mike Simiyu",role:"Retail Manager",company:"Tech Gadgets Plus",content:"The e-commerce integration is incredible. We went from manual order processing to complete automation. Our online sales doubled in just 3 months.",rating:5,avatar:"MC"},{name:"Emily Wangoi",role:"Salon Owner",company:"Bella Beauty Studio",content:"The appointment scheduling feature is a game-changer. Clients love the automatic reminders, and we've reduced no-shows by 60%. Highly recommended!",rating:5,avatar:"ER"}],D9=()=>e.jsx("section",{className:"py-16 lg:py-24 bg-secondary/30",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"text-center max-w-3xl mx-auto mb-16",children:[e.jsxs("h2",{className:"text-3xl lg:text-5xl font-bold text-foreground mb-6",children:["Trusted by Business Owners",e.jsx("span",{className:"text-green-500 block",children:"Across Industries"})]}),e.jsx("p",{className:"text-xl text-muted-foreground",children:"See how BizHub is helping businesses streamline operations and accelerate growth."})]}),e.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-8",children:_9.map(t=>e.jsxs(K,{className:"relative group hover:shadow-md transition-all duration-200",children:[e.jsx("div",{className:"absolute -top-3 -left-3 w-8 h-8 bg-gray-200 rounded-full flex items-center justify-center opacity-80 group-hover:opacity-100 transition-opacity",children:e.jsx(h_,{className:"h-4 w-4 text-green-700"})}),e.jsxs(Y,{className:"space-y-4 pt-6",children:[e.jsx("div",{className:"flex items-center space-x-1",children:[...Array(t.rating)].map((s,a)=>e.jsx(Ja,{className:"h-4 w-4 fill-amber-400 text-amber-400"},a))}),e.jsxs("p",{className:"text-foreground leading-relaxed",children:['"',t.content,'"']}),e.jsxs("div",{className:"flex items-center space-x-3 pt-4 border-t border-border",children:[e.jsx("div",{className:"w-10 h-10 bg-primary/10 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-sm font-semibold text-primary",children:t.avatar})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-foreground",children:t.name}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:[t.role,", ",t.company]})]})]})]})]},t.name))}),e.jsxs("div",{className:"mt-16 grid grid-cols-2 md:grid-cols-4 gap-8 text-center",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex flex-col items-center justify-center space-y-1",children:[e.jsx(Zt,{className:"h-6 w-6 text-green-500"}),e.jsx("div",{className:"text-3xl font-bold text-green-500",children:"10,000+"})]}),e.jsx("div",{className:"text-muted-foreground",children:"Active Users"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex flex-col items-center justify-center space-y-1",children:[e.jsx(f_,{className:"h-6 w-6 text-green-500"}),e.jsx("div",{className:"text-3xl font-bold text-green-500",children:"99.9%"})]}),e.jsx("div",{className:"text-muted-foreground",children:"Uptime"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex flex-col items-center justify-center space-y-1",children:[e.jsx(x_,{className:"h-6 w-6 text-green-500"}),e.jsx("div",{className:"text-3xl font-bold text-green-500",children:"24/7"})]}),e.jsx("div",{className:"text-muted-foreground",children:"Support"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex flex-col items-center justify-center space-y-1",children:[e.jsx(Ja,{className:"h-6 w-6 text-green-500 fill-green-500"}),e.jsx("div",{className:"text-3xl font-bold text-green-500",children:"4.9/5"})]}),e.jsx("div",{className:"text-muted-foreground",children:"User Rating"})]})]})]})});function O9(){return e.jsxs(e.Fragment,{children:[e.jsx($o,{}),e.jsx(A9,{}),e.jsx(eE,{}),e.jsx(D9,{}),e.jsx(Vo,{})]})}const R9="modulepreload",P9=function(t){return"/"+t},Kw={},Wl=function(s,a,r){let i=Promise.resolve();if(a&&a.length>0){let f=function(x){return Promise.all(x.map(h=>Promise.resolve(h).then(p=>({status:"fulfilled",value:p}),p=>({status:"rejected",reason:p}))))};document.getElementsByTagName("link");const c=document.querySelector("meta[property=csp-nonce]"),u=c?.nonce||c?.getAttribute("nonce");i=f(a.map(x=>{if(x=P9(x),x in Kw)return;Kw[x]=!0;const h=x.endsWith(".css"),p=h?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${x}"]${p}`))return;const g=document.createElement("link");if(g.rel=h?"stylesheet":R9,h||(g.as="script"),g.crossOrigin="",g.href=x,u&&g.setAttribute("nonce",u),document.head.appendChild(g),h)return new Promise((y,b)=>{g.addEventListener("load",y),g.addEventListener("error",()=>b(new Error(`Unable to preload CSS for ${x}`)))})}))}function o(c){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=c,window.dispatchEvent(u),!u.defaultPrevented)throw c}return i.then(c=>{for(const u of c||[])u.status==="rejected"&&o(u.reason);return s().catch(o)})},tE=v.createContext(),sE=()=>v.useContext(tE),M9=({children:t})=>{const{isAuthenticated:s}=_s(),[a,r]=v.useState({summary:null,transactions:[],loading:!0,error:null}),i=async()=>{try{const h=await Ne.get("/financial-summary",{timeout:3e4});r(p=>({...p,summary:h.data,loading:!1,error:null}))}catch(h){console.error("Error fetching financial summary:",h),r(p=>({...p,summary:{totalRevenue:0,totalExpenses:0,netProfit:0,pendingPayments:0},loading:!1,error:null}))}},o=async()=>{try{const h=await Ne.get("/transactions",{timeout:3e4});r(p=>({...p,transactions:h.data||[],error:null}))}catch(h){console.error("Error fetching transactions:",h),r(p=>({...p,transactions:[],error:null}))}},c=async()=>{r(h=>({...h,loading:!0})),await Promise.all([i(),o()])},u=h=>{r(p=>({...p,transactions:[h,...p.transactions]})),i()},f=h=>{r(p=>({...p,transactions:p.transactions.map(g=>g._id===h._id?h:g)})),i()};v.useEffect(()=>{s&&c()},[s]),v.useEffect(()=>{if(!s)return;const h=setInterval(()=>{i(),o()},3e4);return()=>clearInterval(h)},[s]);const x={...a,refreshFinancialData:c,addTransaction:u,updateTransaction:f,fetchFinancialSummary:i,fetchTransactions:o};return e.jsx(tE.Provider,{value:x,children:t})},cr=[];for(let t=0;t<256;++t)cr.push((t+256).toString(16).slice(1));function F9(t,s=0){return(cr[t[s+0]]+cr[t[s+1]]+cr[t[s+2]]+cr[t[s+3]]+"-"+cr[t[s+4]]+cr[t[s+5]]+"-"+cr[t[s+6]]+cr[t[s+7]]+"-"+cr[t[s+8]]+cr[t[s+9]]+"-"+cr[t[s+10]]+cr[t[s+11]]+cr[t[s+12]]+cr[t[s+13]]+cr[t[s+14]]+cr[t[s+15]]).toLowerCase()}let F0;const L9=new Uint8Array(16);function I9(){if(!F0){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");F0=crypto.getRandomValues.bind(crypto)}return F0(L9)}const B9=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Yw={randomUUID:B9};function z9(t,s,a){t=t||{};const r=t.random??t.rng?.()??I9();if(r.length<16)throw new Error("Random bytes length must be >= 16");return r[6]=r[6]&15|64,r[8]=r[8]&63|128,F9(r)}function U9(t,s,a){return Yw.randomUUID&&!t?Yw.randomUUID():z9(t)}const V9=v.lazy(()=>Wl(()=>import("./ProductCatalog-BxMIszID.js"),__vite__mapDeps([0,1,2,3,4,5]))),$9=v.lazy(()=>Wl(()=>import("./SalesAnalytics-B5yWMCGm.js"),__vite__mapDeps([6,1,2,3,4,5]))),H9=v.lazy(()=>Wl(()=>import("./OrderTimeline-ClJzW7w7.js"),__vite__mapDeps([7,1,2,3,4,5]))),W9=v.lazy(()=>Wl(()=>import("./QuickActions-GZtS0ntb.js"),__vite__mapDeps([8,1,2,3,4,5]))),G9=v.lazy(()=>Wl(()=>Promise.resolve().then(()=>PK),void 0)),q9=v.lazy(()=>Wl(()=>import("./EnhancedOrderForm-D_Hr0zTj.js"),__vite__mapDeps([9,1,2,3,4,5]))),K9=v.lazy(()=>Wl(()=>import("./RealTimeSync-C_rZjjrJ.js"),__vite__mapDeps([10,1,2,3,4,5]))),Y9=v.lazy(()=>Wl(()=>import("./ModernOrderCard-Bk9d0lvV.js"),__vite__mapDeps([11,1,2,3,4,5]))),X9={name:"",sku:"",category:"",stockQuantity:"",reorderLevel:"",price:"",supplierName:"",description:"",currency:"KES"},Q9=()=>{const t=Ka(),{isAuthenticated:s,user:a}=_s(),{refreshFinancialData:r}=sE(),[i,o]=v.useState([]),[c,u]=v.useState([]),[f,x]=v.useState(!0),[h,p]=v.useState(!0),[g,y]=v.useState(null),[b,N]=v.useState(null),[S,C]=v.useState(!1),[k,A]=v.useState(null),[G,F]=v.useState(!1),[E,T]=v.useState(null),[_,P]=v.useState(!1),[z,V]=v.useState(null),[W,q]=v.useState("overview"),[B,ae]=v.useState("month"),[U,Z]=v.useState(!1),[de,H]=v.useState(X9),[se,ee]=v.useState(!1),[L,X]=v.useState(""),[O,J]=v.useState(!1),ie=async()=>{if(s){x(!0),y(null);try{const we=await Ne.get("/client/orders",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}),nt=we.data,Ke=Array.isArray(nt)?nt:nt.orders||[];console.log(" Orders loaded:",Ke.length),o(Ke),we.data.length===0&&D.info("No orders yet. Create your first order!",{duration:3e3})}catch(we){console.error(" Error fetching orders:",we),y(we.response?.data?.message||we.message||"Failed to load orders"),D.error("Failed to load orders. Click refresh to retry.")}finally{x(!1)}}};v.useEffect(()=>{ie()},[s]);const be=async()=>{if(s){p(!0),N(null);try{const we=await Ne.get("/products",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});console.log(" Products loaded:",we.data.length),u(we.data||[]),we.data.length===0&&D.info("No products yet. Add your first product!",{duration:3e3})}catch(we){console.error(" Error fetching products:",we),N(we.response?.data?.message||we.message||"Failed to load products"),D.error("Failed to load products. Click refresh to retry.")}finally{p(!1)}}},Le=async()=>{D.info("Refreshing data...",{duration:1e3}),await Promise.all([be(),ie()]),D.success("Data refreshed successfully!")};v.useEffect(()=>{be()},[s]);const ve=we=>{A({...we}),C(!0)},oe=we=>{T(we),F(!0)},Pe=(we,nt)=>{A(we==="customerName"||we==="customerEmail"?Ke=>({...Ke,customer:{...Ke?.customer||{},[we==="customerName"?"name":"email"]:nt}}):Ke=>({...Ke,[we]:nt}))},Xe=async()=>{try{const we=k.id||k._id,nt=await Ne.put(`/orders/${we}`,k,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});o(Ke=>Ke.map(jt=>jt.id===nt.data.id||jt._id===nt.data.id?nt.data:jt)),C(!1),A(null),D.success("The order has been updated successfully."),(nt.data.status==="Paid"||nt.data.paymentStatus==="Paid")&&r?.()}catch(we){D.error("We couldn't update this order."),console.error("Error updating order:",we)}},yt=async we=>{if(window.confirm(`Are you sure you want to delete order ${we.orderId}? This action cannot be undone.`))try{const nt=we._id||we.id;await Ne.delete(`/client/orders/${nt}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}),o(Ke=>Ke.filter(jt=>(jt._id||jt.id)!==nt)),D.success("Order deleted successfully!"),we.paymentStatus==="Paid"&&r?.()}catch(nt){D.error(nt.response?.data?.message||"Failed to delete order"),console.error("Error deleting order:",nt)}},vt=we=>{V(we),P(!0)},gt=async we=>{try{await Ne.delete(`/products/${we._id||we.id}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}),u(nt=>nt.filter(Ke=>(Ke._id||Ke.id)!==(we._id||we.id))),D.success("Product deleted successfully!")}catch{D.error("Failed to delete product")}},bt=we=>{D.info(`Viewing ${we.name}`)},lt=()=>{const we=document.createElement("input");we.type="file",we.accept=".csv,.xlsx",we.onchange=async nt=>{nt.target.files[0]&&D.info("Import feature coming soon!")},we.click()},ms=()=>{try{const we=JSON.stringify({products:c,orders:i},null,2),nt=new Blob([we],{type:"application/json"}),Ke=URL.createObjectURL(nt),jt=document.createElement("a");jt.href=Ke,jt.download=`ecommerce-data-${new Date().toISOString().split("T")[0]}.json`,jt.click(),URL.revokeObjectURL(Ke),D.success("Data exported successfully!")}catch{D.error("Failed to export data")}},is=()=>{D.info("Generating report..."),setTimeout(()=>{D.success("Report generation coming soon!")},1e3)},Ms=we=>{u(nt=>{const Ke=nt.findIndex(jt=>(jt._id||jt.id)===(we._id||we.id));if(Ke!==-1){const jt=[...nt];return jt[Ke]=we,jt}return[...nt,we]})},ys=we=>{o(nt=>{const Ke=nt.findIndex(jt=>(jt._id||jt.id)===(we._id||we.id));if(Ke!==-1){const jt=[...nt];return jt[Ke]=we,jt}return[...nt,we]}),(we.status==="Paid"||we.paymentStatus==="Paid")&&r?.()},Xs=we=>{u(nt=>nt.map(Ke=>Ke._id===we.productId||Ke.id===we.productId?{...Ke,stockQuantity:we.stockQuantity}:Ke))},xs=async we=>{try{const nt=localStorage.getItem("token"),Ke=await Ne.post("/products",we,{headers:{Authorization:`Bearer ${nt}`,"Content-Type":"application/json"}});u(jt=>[...jt,Ke.data]),Z(!1),D.success("Product added successfully with images!")}catch(nt){D.error(nt.response?.data?.error||"Failed to add product")}},Rt=async we=>{try{const nt=localStorage.getItem("token"),Ke=await Ne.post("/client/orders",we,{headers:{Authorization:`Bearer ${nt}`,"Content-Type":"application/json"}});o(jt=>[...jt,Ke.data]),ee(!1),D.success("Order created successfully!"),(Ke.data.status==="Paid"||Ke.data.paymentStatus==="Paid")&&r?.()}catch(nt){D.error(nt.response?.data?.error||"Failed to create order")}},sa=async()=>{J(!0);try{const we=U9().replace(/-/g,"").substring(0,12),nt=localStorage.getItem("token");if(!nt)throw new Error("No authentication token found. Please log in again.");const Ke=await Ne.post("/user/invite-code",{inviteCode:we},{headers:{Authorization:`Bearer ${nt}`}});console.log("Invite code save response:",Ke.data);const jt=`${window.location.origin}/client/signup/${we}`;X(jt),D.success("Invite link generated and saved. Share this link with your clients.")}catch(we){const nt=we.response?.data?.error||we.message;D.error(`Failed to generate invite link: ${nt}`),console.error("Error generating invite code:",we.response?.data||we.message)}finally{J(!1)}},Te=()=>{navigator.clipboard.writeText(L),D.success("Invite link copied to clipboard.")},je=()=>{navigator.share?navigator.share({title:"Join My Store",text:"You've been invited to access my exclusive online store!",url:L}).catch(()=>{}):Te()},fe=we=>{const nt={Pending:{variant:"secondary"},Processing:{variant:"default"},Shipped:{variant:"default"},Delivered:{variant:"default"},Paid:{variant:"default"},Cancelled:{variant:"destructive"}};return e.jsx(De,{variant:nt[we]?.variant||"default",children:we})},Ue=i.length,st=i.reduce((we,nt)=>we+(Number(nt.total)||0),0),Dt=Ue&&st>0?(st/Ue).toFixed(2):"0.00",Pt=isNaN(st)?0:st,Jt=isNaN(parseFloat(Dt))?"0.00":Dt,as=(()=>{const we={};return i.forEach(nt=>{nt.items?.forEach(Ke=>{const jt=Ke.product||Ke.name;we[jt]||(we[jt]={name:Ke.name||"Unknown Product",sales:0,revenue:0}),we[jt].sales+=Ke.quantity||1,we[jt].revenue+=(Ke.price||0)*(Ke.quantity||1)})}),Object.values(we).sort((nt,Ke)=>Ke.revenue-nt.revenue).slice(0,4).map(nt=>({...nt,revenue:`KES ${nt.revenue.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}`}))})(),ke=()=>e.jsx("div",{className:"flex items-center justify-center p-8",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})});return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"E-Commerce Dashboard"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage your online store and orders"}),e.jsx("div",{className:"mt-2",children:e.jsx(v.Suspense,{fallback:null,children:e.jsx(K9,{onProductUpdate:Ms,onOrderUpdate:ys,onStockUpdate:Xs,onManualRefresh:Le})})})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsxs(R,{variant:"default",className:"gap-2 bg-purple-600 hover:bg-purple-700",onClick:()=>ee(!0),children:[e.jsx(ws,{className:"h-4 w-4"}),"Create Order"]}),e.jsxs(R,{variant:"default",className:"gap-2 bg-blue-600 hover:bg-blue-700",onClick:()=>{t("/store"),D.success("Opening store overview...")},children:[e.jsx(Yt,{className:"h-4 w-4"}),"Store Overview"]}),e.jsxs(Bt,{children:[e.jsx(wa,{asChild:!0,children:e.jsxs(R,{variant:"outline",className:"gap-2",children:[e.jsx(lg,{className:"h-4 w-4"}),"Generate Invite Link"]})}),e.jsxs(zt,{className:"sm:max-w-md",children:[e.jsxs(Ut,{children:[e.jsx(Vt,{children:"Invite Clients to Your Store"}),e.jsx(es,{children:"Generate a unique invite link and share it with your clients. They'll sign up and get access to your exclusive store."})]}),e.jsx("div",{className:"space-y-4",children:L?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex items-center space-x-2",children:e.jsx(me,{readOnly:!0,value:L,className:"flex-1 bg-muted"})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(R,{onClick:Te,variant:"outline",className:"flex-1 gap-2",children:[e.jsx(pv,{className:"h-4 w-4"}),"Copy Link"]}),e.jsxs(R,{onClick:je,className:"flex-1 gap-2",children:[e.jsx(Gc,{className:"h-4 w-4"}),"Share"]})]}),e.jsx("p",{className:"text-xs text-muted-foreground text-center",children:" Tip: This link is unique to your store. Clients who use it will only see your products."})]}):e.jsxs(R,{onClick:sa,disabled:O,className:"w-full",children:[e.jsx(lg,{className:"mr-2 h-4 w-4"}),O?"Generating...":"Generate Invite Link"]})})]})]}),e.jsxs(R,{variant:"outline",className:"gap-2",onClick:()=>{a?.inviteCode?(window.open(`/store/${a.inviteCode}`,"_blank"),D.success("Opening your client store in a new tab...")):(window.open("/store","_blank"),D.info("Opening store view..."))},children:[e.jsx(ca,{className:"h-4 w-4"}),"View Store"]}),e.jsxs(R,{className:"gap-2 bg-green-500 hover:bg-green-400",onClick:()=>Z(!0),children:[e.jsx(Gs,{className:"h-4 w-4"}),"Add Product"]})]})]}),e.jsxs("div",{className:"flex items-center gap-2 border-b border-border pb-2",children:[e.jsxs(R,{variant:W==="overview"?"default":"ghost",onClick:()=>q("overview"),className:"gap-2",children:[e.jsx(ws,{className:"h-4 w-4"}),"Overview"]}),e.jsxs(R,{variant:W==="products"?"default":"ghost",onClick:()=>q("products"),className:"gap-2",children:[e.jsx(Yt,{className:"h-4 w-4"}),"Products (",c.length,")"]}),e.jsxs(R,{variant:W==="analytics"?"default":"ghost",onClick:()=>q("analytics"),className:"gap-2",children:[e.jsx(Is,{className:"h-4 w-4"}),"Analytics"]})]}),e.jsx(v.Suspense,{fallback:e.jsx(ke,{}),children:e.jsx(W9,{onAddProduct:()=>Z(!0),onImport:lt,onExport:ms,onGenerateReport:is})}),W==="overview"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid gap-6 md:grid-cols-4",children:[e.jsxs(K,{children:[e.jsxs(xe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(pe,{className:"text-sm font-medium",children:"Total Orders"}),e.jsx(ws,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(Y,{children:f?e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"h-8 w-16 bg-gray-200 rounded animate-pulse"}),e.jsx("div",{className:"h-3 w-24 bg-gray-100 rounded animate-pulse"})]}):g?e.jsxs("div",{children:[e.jsx("div",{className:"text-lg font-bold text-red-600",children:"Error"}),e.jsx(R,{size:"sm",variant:"link",onClick:ie,className:"p-0 h-auto text-xs",children:"Retry"})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-2xl font-bold",children:Ue}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Total orders placed"})]})})]}),e.jsxs(K,{children:[e.jsxs(xe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(pe,{className:"text-sm font-medium",children:"Revenue"}),e.jsx(pa,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(Y,{children:f?e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"h-8 w-24 bg-gray-200 rounded animate-pulse"}),e.jsx("div",{className:"h-3 w-20 bg-gray-100 rounded animate-pulse"})]}):g?e.jsxs("div",{children:[e.jsx("div",{className:"text-lg font-bold text-red-600",children:"Error"}),e.jsx(R,{size:"sm",variant:"link",onClick:ie,className:"p-0 h-auto text-xs",children:"Retry"})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-2xl font-bold",children:["KES ",Pt.toLocaleString()]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Total revenue earned"})]})})]}),e.jsxs(K,{children:[e.jsxs(xe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(pe,{className:"text-sm font-medium",children:"Products"}),e.jsx(Yt,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(Y,{children:h?e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"h-8 w-16 bg-gray-200 rounded animate-pulse"}),e.jsx("div",{className:"h-3 w-24 bg-gray-100 rounded animate-pulse"})]}):b?e.jsxs("div",{children:[e.jsx("div",{className:"text-lg font-bold text-red-600",children:"Error"}),e.jsx(R,{size:"sm",variant:"link",onClick:be,className:"p-0 h-auto text-xs",children:"Retry"})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-2xl font-bold",children:c.length}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Active products"})]})})]}),e.jsxs(K,{children:[e.jsxs(xe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(pe,{className:"text-sm font-medium",children:"Avg. Order Value"}),e.jsx(Is,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(Y,{children:f?e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"h-8 w-20 bg-gray-200 rounded animate-pulse"}),e.jsx("div",{className:"h-3 w-24 bg-gray-100 rounded animate-pulse"})]}):g?e.jsxs("div",{children:[e.jsx("div",{className:"text-lg font-bold text-red-600",children:"Error"}),e.jsx(R,{size:"sm",variant:"link",onClick:ie,className:"p-0 h-auto text-xs",children:"Retry"})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-2xl font-bold",children:["KES ",Jt]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Average per order"})]})})]})]}),e.jsxs("div",{className:"grid gap-6 lg:grid-cols-3",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-4",children:[e.jsx(K,{children:e.jsx(xe,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(pe,{children:"Recent Orders"}),e.jsx(ot,{children:"Latest customer orders with product details"})]}),e.jsxs(R,{variant:"outline",size:"sm",onClick:ie,disabled:f,className:"gap-2",children:[e.jsx(cs,{className:`h-4 w-4 ${f?"animate-spin":""}`}),"Refresh"]})]})})}),f?e.jsx("div",{className:"space-y-4",children:[1,2,3].map(we=>e.jsx(K,{className:"animate-pulse",children:e.jsxs(Y,{className:"p-6 space-y-4",children:[e.jsx("div",{className:"h-6 bg-gray-200 rounded w-1/3"}),e.jsx("div",{className:"h-4 bg-gray-100 rounded w-1/2"}),e.jsx("div",{className:"h-20 bg-gray-100 rounded"})]})},we))}):g?e.jsx(K,{className:"border-red-200",children:e.jsxs(Y,{className:"p-8 text-center",children:[e.jsx(ks,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-red-700 mb-2",children:"Failed to Load Orders"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:g}),e.jsxs(R,{onClick:ie,variant:"outline",children:[e.jsx(cs,{className:"h-4 w-4 mr-2"}),"Try Again"]})]})}):i.length===0?e.jsx(K,{children:e.jsxs(Y,{className:"p-8 text-center",children:[e.jsx(ws,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No Orders Yet"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Create your first order to get started!"}),e.jsxs(R,{onClick:()=>ee(!0),children:[e.jsx(Gs,{className:"h-4 w-4 mr-2"}),"Create Order"]})]})}):e.jsxs("div",{className:"space-y-4",children:[e.jsx(v.Suspense,{fallback:e.jsx(ke,{}),children:i.slice(0,5).map(we=>e.jsx(Y9,{order:we,onView:oe,onEdit:ve,onDelete:yt},we._id||we.id))}),i.length>5&&e.jsx("div",{className:"text-center py-4",children:e.jsxs(R,{variant:"outline",onClick:()=>q("analytics"),children:["View All ",i.length," Orders"]})})]})]}),e.jsxs(K,{children:[e.jsxs(xe,{children:[e.jsx(pe,{children:"Top Products"}),e.jsx(ot,{children:"Best selling items this month"})]}),e.jsx(Y,{children:f?e.jsx("div",{className:"space-y-4",children:[1,2,3,4].map(we=>e.jsxs("div",{className:"flex items-center justify-between animate-pulse",children:[e.jsxs("div",{className:"space-y-2 flex-1",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),e.jsx("div",{className:"h-3 bg-gray-200 rounded w-1/2"})]}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-20"})]},we))}):g?e.jsxs("div",{className:"text-center py-8 text-red-600",children:[e.jsx(ks,{className:"h-8 w-8 mx-auto mb-2"}),e.jsx("p",{className:"text-sm",children:g})]}):as.length===0?e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(Yt,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{className:"text-sm font-medium",children:"No product sales yet"}),e.jsx("p",{className:"text-xs mt-2",children:"Top sellers will appear here"})]}):e.jsx("div",{className:"space-y-4",children:as.map((we,nt)=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-foreground",children:we.name}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[we.sales," sales"]})]}),e.jsx("div",{className:"text-right",children:e.jsx("p",{className:"text-sm font-medium text-foreground",children:we.revenue})})]},nt))})})]})]}),e.jsxs("div",{className:"grid gap-6 lg:grid-cols-4",children:[e.jsxs(K,{children:[e.jsx(xe,{className:"pb-3",children:e.jsx(pe,{className:"text-base",children:"Pending Orders"})}),e.jsxs(Y,{children:[e.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:i.filter(we=>we.status==="Pending").length}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Need processing"})]})]}),e.jsxs(K,{children:[e.jsx(xe,{className:"pb-3",children:e.jsx(pe,{className:"text-base",children:"Processing"})}),e.jsxs(Y,{children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:i.filter(we=>we.status==="Processing").length}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Being prepared"})]})]}),e.jsxs(K,{children:[e.jsx(xe,{className:"pb-3",children:e.jsx(pe,{className:"text-base",children:"Shipped"})}),e.jsxs(Y,{children:[e.jsx("div",{className:"text-2xl font-bold text-purple-600",children:i.filter(we=>we.status==="Shipped").length}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"In transit"})]})]}),e.jsxs(K,{children:[e.jsx(xe,{className:"pb-3",children:e.jsx(pe,{className:"text-base",children:"Delivered"})}),e.jsxs(Y,{children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:i.filter(we=>we.status==="Delivered").length}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"This month"})]})]})]}),e.jsx(v.Suspense,{fallback:e.jsx(ke,{}),children:e.jsx(H9,{orders:i,limit:15})})]}),W==="products"&&e.jsx(v.Suspense,{fallback:e.jsx(ke,{}),children:e.jsx(V9,{products:c,onEdit:vt,onDelete:gt,onView:bt})}),W==="analytics"&&e.jsxs("div",{id:"analytics-section",className:"space-y-4",children:[e.jsx(K,{className:"border-primary/20",children:e.jsx(Y,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Sales Analytics"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"View your sales performance and trends"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(te,{htmlFor:"timeframe",className:"text-sm",children:"Time Period:"}),e.jsxs(Mt,{value:B,onValueChange:ae,children:[e.jsx(Lt,{id:"timeframe",className:"w-32",children:e.jsx(Ft,{})}),e.jsxs(It,{children:[e.jsx(Ae,{value:"week",children:"This Week"}),e.jsx(Ae,{value:"month",children:"This Month"}),e.jsx(Ae,{value:"year",children:"This Year"})]})]})]})]})})}),e.jsx(v.Suspense,{fallback:e.jsx(ke,{}),children:e.jsx($9,{orders:i,timeFrame:B})})]}),G&&E&&e.jsx(Bt,{open:G,onOpenChange:F,children:e.jsxs(zt,{children:[e.jsxs(Ut,{children:[e.jsx(Vt,{children:"Order Details"}),e.jsx(es,{children:"View order information"})]}),e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{children:[e.jsx(te,{children:"Order ID"}),e.jsx("div",{className:"font-medium",children:E.orderId||E.id})]}),e.jsxs("div",{children:[e.jsx(te,{children:"Customer"}),e.jsx("div",{children:E.customer?.name})]}),e.jsxs("div",{children:[e.jsx(te,{children:"Email"}),e.jsx("div",{children:E.customer?.email})]}),e.jsxs("div",{children:[e.jsx(te,{children:"Date"}),e.jsx("div",{children:E.date?new Date(E.date).toLocaleString():""})]}),e.jsxs("div",{children:[e.jsx(te,{children:"Total"}),e.jsxs("div",{children:["KES ",Number(E.total||0).toFixed(2)]})]}),e.jsxs("div",{children:[e.jsx(te,{children:"Status"}),e.jsx("div",{children:fe(E.status)})]}),e.jsxs("div",{children:[e.jsx(te,{children:"Items"}),e.jsx("div",{children:Array.isArray(E.items)?`${E.items.length} items`:E.items})]}),e.jsxs("div",{children:[e.jsx(te,{children:"Notes"}),e.jsx("div",{children:E.notes})]})]}),e.jsx(Ps,{children:e.jsx(R,{variant:"outline",onClick:()=>F(!1),children:"Close"})})]})}),S&&k&&e.jsx(Bt,{open:S,onOpenChange:C,children:e.jsxs(zt,{children:[e.jsxs(Ut,{children:[e.jsx(Vt,{children:"Edit Order"}),e.jsx(es,{children:"Update order details"})]}),e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(te,{htmlFor:"edit-customer",children:"Customer Name"}),e.jsx(me,{id:"edit-customer",value:k.customer?.name||"",onChange:we=>Pe("customerName",we.target.value)})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(te,{htmlFor:"edit-email",children:"Customer Email"}),e.jsx(me,{id:"edit-email",value:k.customer?.email||"",onChange:we=>Pe("customerEmail",we.target.value)})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(te,{htmlFor:"edit-date",children:"Order Date"}),e.jsx(me,{id:"edit-date",type:"date",value:k.date?new Date(k.date).toISOString().slice(0,10):"",onChange:we=>Pe("date",we.target.value)})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(te,{htmlFor:"edit-total",children:"Total Amount (KES)"}),e.jsx(me,{id:"edit-total",type:"number",min:"0",step:"0.01",value:k.total||"",onChange:we=>Pe("total",we.target.value)})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(te,{htmlFor:"edit-items",children:"Number of Items"}),e.jsx(me,{id:"edit-items",type:"number",min:"0",value:Array.isArray(k.items)?k.items.length:k.items||0,onChange:we=>{const nt=parseInt(we.target.value)||0,Ke=Array.from({length:nt},(jt,wt)=>({id:wt+1,name:`Item ${wt+1}`,quantity:1,price:nt>0?Number(k.total||0)/nt:0}));Pe("items",Ke)}})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(te,{htmlFor:"edit-status",children:"Status"}),e.jsxs(Mt,{value:k.status||"Pending",onValueChange:we=>Pe("status",we),children:[e.jsx(Lt,{children:e.jsx(Ft,{placeholder:"Select status"})}),e.jsxs(It,{children:[e.jsx(Ae,{value:"Pending",children:"Pending"}),e.jsx(Ae,{value:"Processing",children:"Processing"}),e.jsx(Ae,{value:"Shipped",children:"Shipped"}),e.jsx(Ae,{value:"Delivered",children:"Delivered"}),e.jsx(Ae,{value:"Paid",children:"Paid"}),e.jsx(Ae,{value:"Cancelled",children:"Cancelled"})]})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(te,{htmlFor:"edit-notes",children:"Notes (Optional)"}),e.jsx(As,{id:"edit-notes",value:k.notes||"",onChange:we=>Pe("notes",we.target.value),className:"resize-none"})]})]}),e.jsxs(Ps,{children:[e.jsx(R,{variant:"outline",onClick:()=>C(!1),children:"Cancel"}),e.jsx(R,{onClick:Xe,children:"Save Changes"})]})]})}),e.jsx(v.Suspense,{fallback:e.jsx(ke,{}),children:e.jsx(G9,{isOpen:U,onClose:()=>Z(!1),onSubmit:xs,initialData:z,mode:z?"edit":"add"})}),e.jsx(v.Suspense,{fallback:e.jsx(ke,{}),children:e.jsx(q9,{isOpen:se,onClose:()=>ee(!1),onSubmit:Rt,products:c,mode:"add"})})]})},Xw=["Pending","Confirmed","Completed","Cancelled","Rejected"],Z9=()=>{const{user:t,isAuthenticated:s,loading:a}=_s(),{socket:r,connected:i}=ha(),o=()=>new Date().toISOString().split("T")[0],[c,u]=v.useState(o()),[f,x]=v.useState([]),[h,p]=v.useState([]),[g,y]=v.useState(0),[b,N]=v.useState(0),[S,C]=v.useState(0),[k,A]=v.useState(0),[G,F]=v.useState(0),[E,T]=v.useState(0),[_,P]=v.useState(0),[z,V]=v.useState("all"),[W,q]=v.useState(""),[B,ae]=v.useState(null),[U,Z]=v.useState(!1),[de,H]=v.useState([]),[se,ee]=v.useState([]),[L,X]=v.useState(!1),[O,J]=v.useState(null),[ie,be]=v.useState({customerName:"",service:"",time:"",durationMinutes:"",status:"Pending",notes:""});v.useEffect(()=>{c&&(async()=>{if(s)try{const{data:je}=await Ne.get(`/appointments?date=${c}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});x(je)}catch(je){D.error("Error fetching appointments."),console.error("Error fetching appointments:",je)}})()},[c,s]),v.useEffect(()=>{(async()=>{if(s)try{const{data:je}=await Ne.get("/team",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});H(je)}catch(je){console.error("Error fetching team members:",je)}})()},[s]),v.useEffect(()=>{if(!(!r||!i))return r.on("appointment_created",Te=>{console.log("New appointment created:",Te),x(je=>[Te.appointment,...je]),D.success(`New appointment from ${Te.appointment.customerName}`),Le()}),r.on("appointment_updated",Te=>{console.log("Appointment updated:",Te),x(je=>je.map(fe=>fe._id===Te.appointment._id?Te.appointment:fe)),D.info("Appointment updated in real-time")}),r.on("appointment_confirmed",Te=>{console.log("Appointment confirmed:",Te),x(je=>je.map(fe=>fe._id===Te.appointment._id?Te.appointment:fe)),D.success(`Appointment confirmed for ${Te.appointment.customerName}`),Le()}),r.on("appointment_rejected",Te=>{console.log("Appointment rejected:",Te),x(je=>je.map(fe=>fe._id===Te.appointment._id?Te.appointment:fe)),D.info("Appointment rejected"),Le()}),r.on("appointment_completed",Te=>{console.log("Appointment completed:",Te),x(je=>je.map(fe=>fe._id===Te.appointment._id?Te.appointment:fe)),D.success("Appointment completed"),Le()}),r.on("appointment_deleted",Te=>{console.log("Appointment deleted:",Te),x(je=>je.filter(fe=>fe._id!==Te.appointmentId)),D.info("Appointment removed"),Le()}),()=>{r.off("appointment_created"),r.off("appointment_updated"),r.off("appointment_confirmed"),r.off("appointment_rejected"),r.off("appointment_completed"),r.off("appointment_deleted")}},[r,i]);const Le=async()=>{try{const{data:Te}=await Ne.get("/appointments/stats/overview",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});ae(Te)}catch(Te){console.error("Error fetching appointment stats:",Te)}};v.useEffect(()=>{s&&Le()},[s]);const ve=Te=>{const je=(Pt="")=>Pt.trim().toLowerCase(),fe=Te.filter(Pt=>je(Pt.status)==="confirmed").length,Ue=Te.filter(Pt=>je(Pt.status)==="pending").length,st=Te.filter(Pt=>je(Pt.status)==="cancelled").length,Dt=Te.filter(Pt=>je(Pt.status)==="completed").length;y(Te.length),A(fe),F(Ue),T(st),P(Dt),C(st)};v.useEffect(()=>{ve(f),Pe(f),oe()},[f,z,W]);const oe=()=>{let Te=[...f];if(z!=="all"&&(Te=Te.filter(je=>je.status.toLowerCase()===z.toLowerCase())),W.trim()){const je=W.toLowerCase();Te=Te.filter(fe=>fe.customerName?.toLowerCase().includes(je)||fe.service?.toLowerCase().includes(je)||fe.customerEmail?.toLowerCase().includes(je))}p(Te)},Pe=Te=>{if(Te.length===0){ee([]);return}const je={};Te.forEach(st=>{const Dt=st.service||"Unknown";je[Dt]=(je[Dt]||0)+1});const fe=Te.length,Ue=Object.entries(je).map(([st,Dt])=>({service:st,count:Dt,percentage:(Dt/fe*100).toFixed(0)})).sort((st,Dt)=>Dt.count-st.count).slice(0,3);ee(Ue)},Xe=(Te,je)=>{be(fe=>({...fe,[Te]:je}))},yt=async()=>{if(!ie.customerName||!ie.service||!ie.time||!ie.durationMinutes){D.error("Please fill in all required fields.");return}const Te=!isNaN(new Date(ie.time).getTime()),je=Number(ie.durationMinutes);if(!Te||isNaN(je)||je<=0){D.error("Invalid time or duration.");return}try{const fe={customerName:ie.customerName,service:ie.service,time:new Date(ie.time),durationMinutes:je,status:ie.status||"Pending",notes:ie.notes},Ue=localStorage.getItem("token"),{data:st}=await Ne.post("/appointments",fe,{headers:{Authorization:`Bearer ${Ue}`,"Content-Type":"application/json"}});x(Dt=>[st,...Dt]),Z(!1),be({customerName:"",service:"",time:o(),durationMinutes:"",status:"Pending",notes:""}),D.success("Appointment added successfully!")}catch(fe){const Ue=fe.response?.data?.error||"Error adding appointment.";D.error(Ue),console.error("Error adding appointment:",Ue)}},vt=Te=>{J({...Te,time:gt(Te.time),durationMinutes:String(Te.durationMinutes??"")}),X(!0)},gt=Te=>{if(!Te)return"";const je=new Date(Te);if(Number.isNaN(je.getTime()))return"";const fe=as=>as.toString().padStart(2,"0"),Ue=je.getFullYear(),st=fe(je.getMonth()+1),Dt=fe(je.getDate()),Pt=fe(je.getHours()),Jt=fe(je.getMinutes());return`${Ue}-${st}-${Dt}T${Pt}:${Jt}`},bt=(Te,je)=>{J(fe=>({...fe,[Te]:je}))},lt=async()=>{try{if(!O?._id)return;const Te=localStorage.getItem("token"),je={...O,time:new Date(O.time),durationMinutes:Number(O.durationMinutes)},{data:fe}=await Ne.put(`/appointments/${O._id}`,je,{headers:{Authorization:`Bearer ${Te}`,"Content-Type":"application/json"}});x(Ue=>Ue.map(st=>st._id===fe._id?fe:st)),X(!1),J(null),D.success("Appointment updated successfully!")}catch(Te){D.error("Error updating appointment."),console.error("Error updating appointment:",Te)}},ms=async Te=>{try{const je=localStorage.getItem("token");await Ne.delete(`/appointments/${Te}`,{headers:{Authorization:`Bearer ${je}`}}),x(fe=>fe.filter(Ue=>Ue._id!==Te)),D.success("Appointment deleted successfully!"),Le()}catch(je){D.error("Error deleting appointment."),console.error("Error deleting appointment:",je)}},is=async Te=>{try{const je=localStorage.getItem("token"),{data:fe}=await Ne.put(`/appointments/${Te}/confirm`,{},{headers:{Authorization:`Bearer ${je}`}});x(Ue=>Ue.map(st=>st._id===Te?fe.appointment:st)),D.success("Appointment confirmed! Email sent to customer."),Le()}catch(je){D.error(je.response?.data?.error||"Error confirming appointment."),console.error("Error confirming appointment:",je)}},Ms=async(Te,je="Time slot unavailable")=>{try{const fe=localStorage.getItem("token"),{data:Ue}=await Ne.put(`/appointments/${Te}/reject`,{reason:je},{headers:{Authorization:`Bearer ${fe}`}});x(st=>st.map(Dt=>Dt._id===Te?Ue.appointment:Dt)),D.success("Appointment rejected. Customer notified."),Le()}catch(fe){D.error(fe.response?.data?.error||"Error rejecting appointment."),console.error("Error rejecting appointment:",fe)}},ys=async Te=>{try{const je=localStorage.getItem("token"),{data:fe}=await Ne.put(`/appointments/${Te}/complete`,{},{headers:{Authorization:`Bearer ${je}`}});x(Ue=>Ue.map(st=>st._id===Te?fe.appointment:st)),D.success("Appointment marked as completed!"),Le()}catch(je){D.error(je.response?.data?.error||"Error completing appointment."),console.error("Error completing appointment:",je)}};if(a)return e.jsx("div",{children:"Loading..."});if(!s)return e.jsx("div",{children:"Please log in to manage your appointments."});const Xs=["09:00","09:30","10:00","10:30","11:00","11:30","12:00","12:30","13:00","13:30","14:00","14:30","15:00","15:30","16:00","16:30","17:00","17:30"],xs=Te=>f.some(je=>{const fe=new Date(je.time);return`${fe.getHours().toString().padStart(2,"0")}:${fe.getMinutes().toString().padStart(2,"0")}`===Te}),Rt=Te=>{const je={Confirmed:{variant:"default",className:"bg-green-100 text-green-800"},Pending:{variant:"secondary",className:"bg-yellow-100 text-yellow-800"},Cancelled:{variant:"destructive",className:"bg-red-100 text-red-800"},Rejected:{variant:"destructive",className:"bg-red-100 text-red-800"},Completed:{variant:"default",className:"bg-blue-100 text-blue-800"}};return e.jsx(De,{variant:je[Te]?.variant||"default",className:je[Te]?.className,children:Te})},sa=Te=>{const je=Te.status==="Pending",fe=Te.status==="Confirmed";return e.jsxs("div",{className:"flex gap-1",children:[je&&e.jsxs(e.Fragment,{children:[e.jsxs(R,{variant:"outline",size:"sm",className:"text-green-600 hover:text-green-700 hover:bg-green-50",onClick:()=>is(Te._id),children:[e.jsx(us,{className:"h-4 w-4 mr-1"}),"Confirm"]}),e.jsxs(R,{variant:"outline",size:"sm",className:"text-red-600 hover:text-red-700 hover:bg-red-50",onClick:()=>Ms(Te._id),children:[e.jsx(Sr,{className:"h-4 w-4 mr-1"}),"Reject"]})]}),fe&&e.jsxs(R,{variant:"outline",size:"sm",className:"text-blue-600 hover:text-blue-700 hover:bg-blue-50",onClick:()=>ys(Te._id),children:[e.jsx(ei,{className:"h-4 w-4 mr-1"}),"Complete"]}),Te.customerEmail&&e.jsx(R,{variant:"ghost",size:"sm",onClick:()=>window.location.href=`mailto:${Te.customerEmail}`,children:e.jsx(Ks,{className:"h-4 w-4"})})]})};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Appointment Scheduling"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage bookings and calendar"})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs("div",{className:"relative",children:[e.jsx(oa,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(me,{placeholder:"Search appointments...",value:W,onChange:Te=>q(Te.target.value),className:"pl-9 w-64"})]}),e.jsxs(Mt,{value:z,onValueChange:V,children:[e.jsx(Lt,{className:"w-[140px]",children:e.jsx(Ft,{placeholder:"Filter status"})}),e.jsxs(It,{children:[e.jsx(Ae,{value:"all",children:"All Status"}),e.jsx(Ae,{value:"pending",children:"Pending"}),e.jsx(Ae,{value:"confirmed",children:"Confirmed"}),e.jsx(Ae,{value:"completed",children:"Completed"}),e.jsx(Ae,{value:"cancelled",children:"Cancelled"}),e.jsx(Ae,{value:"rejected",children:"Rejected"})]})]}),e.jsx(me,{type:"date",value:c,onChange:Te=>u(Te.target.value),className:"w-auto"}),e.jsxs(R,{variant:"outline",onClick:()=>{q(""),V("all")},children:[e.jsx(cs,{className:"mr-2 h-4 w-4"}),"Reset"]}),e.jsxs(Bt,{open:U,onOpenChange:Z,children:[e.jsx(wa,{asChild:!0,children:e.jsxs(R,{className:"bg-green-500 cursor-pointer hover:bg-green-400",children:[e.jsx(Gs,{className:"mr-2 h-4 w-4"}),"New Appointment"]})}),e.jsxs(zt,{children:[e.jsxs(Ut,{children:[e.jsx(Vt,{children:"Add New Appointment"}),e.jsx(es,{children:"Fill in the details to schedule a new appointment."})]}),e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(te,{htmlFor:"customerName",children:"Customer Name"}),e.jsx(me,{id:"customerName",placeholder:"Enter customer name",value:ie.customerName,onChange:Te=>Xe("customerName",Te.target.value)})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(te,{htmlFor:"service",children:"Service"}),e.jsx(me,{id:"service",placeholder:"e.g. Hair Cut",value:ie.service,onChange:Te=>Xe("service",Te.target.value)})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(te,{htmlFor:"time",children:"Date & Time"}),e.jsx(me,{id:"time",type:"datetime-local",value:ie.time,onChange:Te=>Xe("time",Te.target.value)})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(te,{htmlFor:"durationMinutes",children:"Duration (minutes)"}),e.jsx(me,{id:"durationMinutes",type:"number",min:"15",step:"15",placeholder:"e.g. 30",value:ie.durationMinutes,onChange:Te=>Xe("durationMinutes",Te.target.value)})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(te,{htmlFor:"status",children:"Status"}),e.jsx("select",{id:"status",className:"border rounded px-2 py-1",value:ie.status,onChange:Te=>Xe("status",Te.target.value),children:Xw.map(Te=>e.jsx("option",{value:Te,children:Te},Te))})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(te,{htmlFor:"notes",children:"Notes (Optional)"}),e.jsx(As,{id:"notes",placeholder:"Appointment notes",value:ie.notes,onChange:Te=>Xe("notes",Te.target.value),className:"resize-none"})]})]}),e.jsxs(Ps,{children:[e.jsx(R,{variant:"outline",className:"text-red-500",onClick:()=>Z(!1),children:"Cancel"}),e.jsxs(R,{className:"bg-green-500 hover:bg-green-400",onClick:yt,children:[e.jsx(Fa,{className:"mr-2 h-4 w-4"}),"Add Appointment"]})]})]})]})]})]}),e.jsxs("div",{className:"grid gap-6 md:grid-cols-5",children:[e.jsxs(K,{children:[e.jsxs(xe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(pe,{className:"text-sm font-medium",children:"Today's Appointments"}),e.jsx(gs,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(Y,{children:[e.jsx("div",{className:"text-2xl font-bold",children:g}),e.jsx("p",{className:"text-xs text-green-600",children:"appointments"})]})]}),e.jsxs(K,{children:[e.jsxs(xe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(pe,{className:"text-sm font-medium",children:"Pending"}),e.jsx(ts,{className:"h-4 w-4 text-yellow-600"})]}),e.jsxs(Y,{children:[e.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:B?.pending||G}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Awaiting confirmation"})]})]}),e.jsxs(K,{children:[e.jsxs(xe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(pe,{className:"text-sm font-medium",children:"Confirmed"}),e.jsx(us,{className:"h-4 w-4 text-green-600"})]}),e.jsxs(Y,{children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:B?.confirmed||k}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Ready to serve"})]})]}),e.jsxs(K,{children:[e.jsxs(xe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(pe,{className:"text-sm font-medium",children:"Completed"}),e.jsx(ei,{className:"h-4 w-4 text-blue-600"})]}),e.jsxs(Y,{children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:B?.completed||_}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Service done"})]})]}),e.jsxs(K,{children:[e.jsxs(xe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(pe,{className:"text-sm font-medium",children:"Cancelled"}),e.jsx(Sr,{className:"h-4 w-4 text-red-600"})]}),e.jsxs(Y,{children:[e.jsx("div",{className:"text-2xl font-bold text-red-600",children:B?.cancelled||E}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"No-shows/rejected"})]})]})]}),e.jsxs("div",{className:"grid gap-6 lg:grid-cols-3",children:[e.jsxs(K,{className:"lg:col-span-2",children:[e.jsxs(xe,{children:[e.jsxs(pe,{children:["Today's Schedule - ",new Date(c).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})]}),e.jsxs(ot,{children:["View and manage daily appointments ",i&&e.jsx(De,{variant:"outline",className:"ml-2 bg-green-100 text-green-800",children:" Live"})]})]}),e.jsx(Y,{children:e.jsx("div",{className:"space-y-4",children:h.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(gs,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"No appointments found"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:W||z!=="all"?"Try adjusting your filters":"Add a new appointment to get started"})]}):h.map(Te=>e.jsxs("div",{className:"flex items-center space-x-4 p-4 border rounded-lg",children:[e.jsxs("div",{className:"text-center min-w-[80px]",children:[e.jsx("p",{className:"font-semibold text-foreground",children:Te.time?new Date(Te.time).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):""}),e.jsx("p",{className:"text-xs text-muted-foreground",children:Te.durationMinutes||""})]}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("p",{className:"font-medium text-foreground",children:Te.customerName}),Rt(Te.status)]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:Te.service}),Te.customerEmail&&e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:Te.customerEmail})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[sa(Te),e.jsx(R,{variant:"outline",size:"sm",onClick:()=>vt(Te),children:"Edit"}),e.jsx(R,{variant:"ghost",size:"sm",className:"text-red-500 hover:text-red-600",onClick:()=>ms(Te._id),children:e.jsx(ga,{className:"h-4 w-4"})})]})]},Te._id||Te.id))})})]}),e.jsxs(K,{children:[e.jsxs(xe,{children:[e.jsx(pe,{children:"Available Slots"}),e.jsx(ot,{children:"Quick booking slots for today"})]}),e.jsx(Y,{children:e.jsx("div",{className:"grid grid-cols-2 gap-2",children:Xs.map(Te=>e.jsx(R,{variant:xs(Te)?"secondary":"outline",size:"sm",disabled:xs(Te),className:"text-xs",onClick:()=>Xe("time",`${c}T${Te}`),children:Te},Te))})})]})]}),L&&O&&e.jsx(Bt,{open:L,onOpenChange:X,children:e.jsxs(zt,{children:[e.jsxs(Ut,{children:[e.jsx(Vt,{children:"Edit Appointment"}),e.jsx(es,{children:"Update appointment details"})]}),e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(te,{htmlFor:"edit-customerName",children:"Customer Name"}),e.jsx(me,{id:"edit-customerName",placeholder:"Enter customer name",value:O.customerName||"",onChange:Te=>bt("customerName",Te.target.value)})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(te,{htmlFor:"edit-service",children:"Service"}),e.jsx(me,{id:"edit-service",placeholder:"e.g. Hair Cut",value:O.service||"",onChange:Te=>bt("service",Te.target.value)})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(te,{htmlFor:"edit-time",children:"Date & Time"}),e.jsx(me,{id:"edit-time",type:"datetime-local",value:O.time||"",onChange:Te=>bt("time",Te.target.value)})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(te,{htmlFor:"edit-durationMinutes",children:"Duration (minutes)"}),e.jsx(me,{id:"edit-durationMinutes",type:"number",min:"15",step:"15",placeholder:"e.g. 30",value:O.durationMinutes||"",onChange:Te=>bt("durationMinutes",Te.target.value)})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(te,{htmlFor:"edit-status",children:"Status"}),e.jsx("select",{id:"edit-status",className:"border rounded px-2 py-1",value:O.status||"Pending",onChange:Te=>bt("status",Te.target.value),children:Xw.map(Te=>e.jsx("option",{value:Te,children:Te},Te))})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(te,{htmlFor:"edit-notes",children:"Notes (Optional)"}),e.jsx(As,{id:"edit-notes",placeholder:"Appointment notes",className:"resize-none",value:O.notes||"",onChange:Te=>bt("notes",Te.target.value)})]})]}),e.jsxs(Ps,{children:[e.jsx(R,{variant:"outline",className:"text-red-500",onClick:()=>X(!1),children:"Cancel"}),e.jsxs(R,{className:"bg-green-500 hover:bg-green-400",onClick:lt,children:[e.jsx(Fa,{className:"mr-2 h-4 w-4"}),"Save Changes"]})]})]})}),e.jsxs("div",{className:"grid gap-6 lg:grid-cols-3",children:[e.jsxs(K,{children:[e.jsx(xe,{children:e.jsx(pe,{children:"Appointment Status"})}),e.jsx(Y,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm",children:"Confirmed"}),e.jsx(De,{variant:"default",children:k})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm",children:"Pending"}),e.jsx(De,{variant:"secondary",children:G})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm",children:"Cancelled"}),e.jsx(De,{variant:"destructive",children:E})]})]})})]}),e.jsxs(K,{children:[e.jsx(xe,{children:e.jsx(pe,{children:"Popular Services"})}),e.jsx(Y,{children:e.jsx("div",{className:"space-y-3",children:se.length>0?se.map((Te,je)=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm",children:Te.service}),e.jsxs("span",{className:"text-sm font-medium",children:[Te.percentage,"%"]})]},je)):e.jsx("p",{className:"text-sm text-muted-foreground",children:"No service data available"})})})]}),e.jsxs(K,{children:[e.jsx(xe,{children:e.jsx(pe,{children:"Staff Availability"})}),e.jsx(Y,{children:e.jsx("div",{className:"space-y-3",children:de.length>0?de.slice(0,3).map(Te=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm",children:Te.name}),e.jsx(De,{variant:Te.status==="active"?"default":"secondary",children:Te.status==="active"?"Available":Te.status||"Unknown"})]},Te._id)):e.jsx("p",{className:"text-sm text-muted-foreground",children:"No team members found"})})})]})]})]})},L0=[{name:"Professional Haircut & Styling",description:"Expert haircut and styling service tailored to your preferences. Includes wash, cut, and blow-dry.",price:1500,duration:"45 min",category:"Hair & Beauty"},{name:"Full Body Massage",description:"Relaxing full body massage to relieve stress and tension. Perfect for unwinding after a long day.",price:3500,duration:"90 min",category:"Wellness & Spa"},{name:"Manicure & Pedicure",description:"Complete nail care service including filing, buffing, cuticle care, and polish application.",price:2e3,duration:"60 min",category:"Hair & Beauty"},{name:"Personal Training Session",description:"One-on-one fitness training with certified personal trainer. Customized workout plan included.",price:2500,duration:"60 min",category:"Fitness & Health"},{name:"Deep Tissue Massage",description:"Therapeutic massage targeting deep muscle layers to relieve chronic pain and muscle tension.",price:4e3,duration:"75 min",category:"Wellness & Spa"},{name:"Facial Treatment",description:"Rejuvenating facial treatment with deep cleansing, exfoliation, and hydration for glowing skin.",price:3e3,duration:"60 min",category:"Hair & Beauty"},{name:"Yoga Class",description:"Group or private yoga session for flexibility, strength, and mindfulness. All levels welcome.",price:1200,duration:"60 min",category:"Fitness & Health"},{name:"Hair Coloring Service",description:"Professional hair coloring with premium products. Includes consultation, application, and styling.",price:4500,duration:"120 min",category:"Hair & Beauty"},{name:"Nutritional Consultation",description:"Personalized nutrition plan and dietary guidance from certified nutritionist.",price:2800,duration:"45 min",category:"Fitness & Health"},{name:"Hot Stone Massage",description:"Luxurious massage using heated stones to melt away tension and promote deep relaxation.",price:4500,duration:"90 min",category:"Wellness & Spa"},{name:"Makeup Application",description:"Professional makeup for events, photoshoots, or special occasions. Includes consultation.",price:3500,duration:"60 min",category:"Hair & Beauty"},{name:"Aromatherapy Session",description:"Therapeutic treatment using essential oils to enhance physical and emotional well-being.",price:3200,duration:"60 min",category:"Wellness & Spa"},{name:"Group Fitness Class",description:"High-energy group workout including cardio, strength training, and flexibility exercises.",price:800,duration:"45 min",category:"Fitness & Health"},{name:"Reflexology Treatment",description:"Foot reflexology targeting pressure points to promote healing and relaxation throughout the body.",price:2500,duration:"60 min",category:"Wellness & Spa"},{name:"Bridal Hair & Makeup",description:"Complete bridal beauty package including hair styling, makeup, and trial session.",price:8500,duration:"150 min",category:"Hair & Beauty"}],J9=()=>{const[t,s]=v.useState([]),[a,r]=v.useState(!0),[i,o]=v.useState(!1),[c,u]=v.useState(!1),[f,x]=v.useState(null),[h,p]=v.useState(!1),[g,y]=v.useState({name:"",description:"",price:"",duration:"",category:""});v.useEffect(()=>{b()},[]);const b=async()=>{r(!0);try{const k=localStorage.getItem("token"),G=(await Ne.get("/services",{headers:{Authorization:`Bearer ${k}`}})).data,F=Array.isArray(G)?G:G?.services||[];s(F),console.log(` Loaded ${F.length} services`)}catch(k){console.error("Error fetching services:",k),D.error("Failed to load services"),s([])}finally{r(!1)}},N=async()=>{if(!g.name||!g.price){D.error("Please fill in required fields");return}try{const k=localStorage.getItem("token");await Ne.post("/services",g,{headers:{Authorization:`Bearer ${k}`}}),D.success("Service added successfully!"),o(!1),y({name:"",description:"",price:"",duration:"",category:""}),b()}catch(k){console.error("Error adding service:",k),D.error("Failed to add service")}},S=async k=>{if(confirm("Are you sure you want to delete this service?"))try{const A=localStorage.getItem("token");await Ne.delete(`/services/${k}`,{headers:{Authorization:`Bearer ${A}`}}),D.success("Service deleted successfully!"),b()}catch(A){console.error("Error deleting service:",A),D.error("Failed to delete service")}},C=async()=>{p(!0);try{const k=localStorage.getItem("token");let A=0,G=0;for(const F of L0)try{await Ne.post("/services",F,{headers:{Authorization:`Bearer ${k}`}}),A++}catch(E){if(console.error(`Error adding service ${F.name}:`,E),console.error("Error details:",E.response?.data),G++,G===1){const T=E.response?.data?.message||E.message;console.error("First error message:",T)}}if(A>0&&(D.success(`Successfully added ${A} of ${L0.length} sample services!`),b()),G>0){const F=G===L0.length?"All services failed to add. Please check your permissions.":`${G} services failed to add`;D.warning(F)}A===0&&G===0&&D.info("No services were added")}catch(k){console.error("Error loading sample services:",k);const A=k.response?.status===403?"Permission denied. Please ensure you're logged in with proper access.":k.response?.data?.message||"Failed to load sample services";D.error(A)}finally{p(!1)}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Services"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage your service offerings"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(R,{onClick:b,variant:"outline",disabled:a,children:[e.jsx(cs,{className:`h-4 w-4 mr-2 ${a?"animate-spin":""}`}),"Refresh"]}),e.jsxs(R,{onClick:C,variant:"secondary",disabled:h,children:[e.jsx(Vi,{className:`h-4 w-4 mr-2 ${h?"animate-spin":""}`}),h?"Loading...":"Load Sample Services"]}),e.jsxs(Bt,{open:i,onOpenChange:o,children:[e.jsx(wa,{asChild:!0,children:e.jsxs(R,{children:[e.jsx(Gs,{className:"h-4 w-4 mr-2"}),"Add Service"]})}),e.jsxs(zt,{children:[e.jsxs(Ut,{children:[e.jsx(Vt,{children:"Add New Service"}),e.jsx(es,{children:"Create a new service offering"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(te,{children:"Service Name *"}),e.jsx(me,{value:g.name,onChange:k=>y({...g,name:k.target.value}),placeholder:"e.g., Haircut & Styling"})]}),e.jsxs("div",{children:[e.jsx(te,{children:"Description"}),e.jsx(As,{value:g.description,onChange:k=>y({...g,description:k.target.value}),placeholder:"Describe your service"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(te,{children:"Price (KES) *"}),e.jsx(me,{type:"number",value:g.price,onChange:k=>y({...g,price:k.target.value}),placeholder:"1500"})]}),e.jsxs("div",{children:[e.jsx(te,{children:"Duration"}),e.jsx(me,{value:g.duration,onChange:k=>y({...g,duration:k.target.value}),placeholder:"60 min"})]})]}),e.jsxs("div",{children:[e.jsx(te,{children:"Category"}),e.jsxs(Mt,{value:g.category,onValueChange:k=>y({...g,category:k}),children:[e.jsx(Lt,{children:e.jsx(Ft,{placeholder:"Select category"})}),e.jsxs(It,{children:[e.jsx(Ae,{value:"Hair & Beauty",children:"Hair & Beauty"}),e.jsx(Ae,{value:"Wellness & Spa",children:"Wellness & Spa"}),e.jsx(Ae,{value:"Fitness & Health",children:"Fitness & Health"}),e.jsx(Ae,{value:"Professional Services",children:"Professional Services"}),e.jsx(Ae,{value:"Other",children:"Other"})]})]})]})]}),e.jsxs(Ps,{children:[e.jsx(R,{variant:"outline",onClick:()=>o(!1),children:"Cancel"}),e.jsx(R,{onClick:N,children:"Add Service"})]})]})]})]})]}),e.jsx("div",{className:"grid gap-6 md:grid-cols-4",children:e.jsx(K,{children:e.jsx(Y,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Total Services"}),e.jsx("p",{className:"text-2xl font-bold",children:t.length})]}),e.jsx(Pl,{className:"h-8 w-8 text-blue-600"})]})})})}),e.jsxs(K,{children:[e.jsxs(xe,{children:[e.jsx(pe,{children:"All Services"}),e.jsx(ot,{children:"Manage and track all your service offerings"})]}),e.jsx(Y,{children:a?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(cs,{className:"h-12 w-12 animate-spin text-primary mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"Loading services..."})]}):t.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(ks,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No Services Yet"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"Add your first service or load sample services"}),e.jsxs("div",{className:"flex gap-2 justify-center",children:[e.jsxs(R,{onClick:C,disabled:h,children:[e.jsx(Vi,{className:"h-4 w-4 mr-2"}),"Load 15 Sample Services"]}),e.jsxs(R,{onClick:()=>o(!0),variant:"outline",children:[e.jsx(Gs,{className:"h-4 w-4 mr-2"}),"Add Manually"]})]})]}):e.jsxs(Xn,{children:[e.jsx(Qn,{children:e.jsxs(xa,{children:[e.jsx(St,{children:"Service Name"}),e.jsx(St,{children:"Category"}),e.jsx(St,{children:"Duration"}),e.jsx(St,{children:"Price"}),e.jsx(St,{children:"Actions"})]})}),e.jsx(Zn,{children:t.map(k=>e.jsxs(xa,{children:[e.jsx(Nt,{children:e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:k.name}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[k.description?.substring(0,50),"..."]})]})}),e.jsx(Nt,{children:e.jsx(De,{variant:"outline",children:k.category||"Uncategorized"})}),e.jsx(Nt,{children:k.duration||"N/A"}),e.jsxs(Nt,{className:"font-semibold",children:["KES ",k.price?.toLocaleString()]}),e.jsx(Nt,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(R,{variant:"ghost",size:"sm",children:e.jsx(Yi,{className:"h-4 w-4"})}),e.jsx(R,{variant:"ghost",size:"sm",onClick:()=>S(k._id||k.id),children:e.jsx(ga,{className:"h-4 w-4 text-red-500"})})]})})]},k._id||k.id))})]})})]})]})};var ex="Switch",[ez]=Df(ex),[tz,sz]=ez(ex),aE=v.forwardRef((t,s)=>{const{__scopeSwitch:a,name:r,checked:i,defaultChecked:o,required:c,disabled:u,value:f="on",onCheckedChange:x,form:h,...p}=t,[g,y]=v.useState(null),b=qa(s,A=>y(A)),N=v.useRef(!1),S=g?h||!!g.closest("form"):!0,[C,k]=Ou({prop:i,defaultProp:o??!1,onChange:x,caller:ex});return e.jsxs(tz,{scope:a,checked:C,disabled:u,children:[e.jsx(ma.button,{type:"button",role:"switch","aria-checked":C,"aria-required":c,"data-state":lE(C),"data-disabled":u?"":void 0,disabled:u,value:f,...p,ref:b,onClick:Hs(t.onClick,A=>{k(G=>!G),S&&(N.current=A.isPropagationStopped(),N.current||A.stopPropagation())})}),S&&e.jsx(iE,{control:g,bubbles:!N.current,name:r,value:f,checked:C,required:c,disabled:u,form:h,style:{transform:"translateX(-100%)"}})]})});aE.displayName=ex;var rE="SwitchThumb",nE=v.forwardRef((t,s)=>{const{__scopeSwitch:a,...r}=t,i=sz(rE,a);return e.jsx(ma.span,{"data-state":lE(i.checked),"data-disabled":i.disabled?"":void 0,...r,ref:s})});nE.displayName=rE;var az="SwitchBubbleInput",iE=v.forwardRef(({__scopeSwitch:t,control:s,checked:a,bubbles:r=!0,...i},o)=>{const c=v.useRef(null),u=qa(c,o),f=Dv(a),x=FS(s);return v.useEffect(()=>{const h=c.current;if(!h)return;const p=window.HTMLInputElement.prototype,y=Object.getOwnPropertyDescriptor(p,"checked").set;if(f!==a&&y){const b=new Event("click",{bubbles:r});y.call(h,a),h.dispatchEvent(b)}},[f,a,r]),e.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:a,...i,tabIndex:-1,ref:u,style:{...i.style,...x,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});iE.displayName=az;function lE(t){return t?"checked":"unchecked"}var rz=aE,nz=nE;function os({className:t,...s}){return e.jsx(rz,{"data-slot":"switch",className:Ze("peer data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:border-ring focus-visible:ring-ring/50 dark:data-[state=unchecked]:bg-input/80 inline-flex h-[1.15rem] w-8 shrink-0 items-center rounded-full border border-transparent shadow-xs transition-all outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",t),...s,children:e.jsx(nz,{"data-slot":"switch-thumb",className:Ze("bg-background dark:data-[state=unchecked]:bg-foreground dark:data-[state=checked]:bg-primary-foreground pointer-events-none block size-4 rounded-full ring-0 transition-transform data-[state=checked]:translate-x-[calc(100%-2px)] data-[state=unchecked]:translate-x-0")})})}const iz=()=>{const[t,s]=v.useState(""),[a,r]=v.useState("all"),[i,o]=v.useState(!1),[c,u]=v.useState(!1),[f,x]=v.useState(!1),[h,p]=v.useState(null),{user:g,isAuthenticated:y,loading:b}=_s(),N=H=>({_id:H._id||H.id,name:H.name??H.fullName??"",email:H.email??H.contactEmail??"",phone:H.phone??H.phoneNumber??"",role:H.role??"",salary:H.salary??0,status:H.status??"Active",notifications:{sms:H.notifications?.sms??H.notifyBySMS??!1,email:H.notifications?.email??H.notifyByEmail??!1},joinDate:H.joinDate??H.createdAt??null}),[S,C]=v.useState([]),[k,A]=v.useState([]),[G,F]=v.useState({name:"",email:"",phone:"",role:"",salary:"",profilePhoto:"",notifications:{sms:!1,email:!1}}),[E,T]=v.useState({employeeId:"",amount:"",phone:"",message:"",smsReceipt:!1});v.useEffect(()=>{(async()=>{if(y)try{const se=localStorage.getItem("token"),[ee,L]=await Promise.all([Ne.get("/team",{headers:{Authorization:`Bearer ${se}`}}),Ne.get("/expenses",{headers:{Authorization:`Bearer ${se}`}})]);C((ee.data||[]).map(N)),A(L.data||[])}catch(se){D.error("Failed to fetch data"),console.error(se)}})()},[y]);const _=async()=>{const H=localStorage.getItem("token");if(!H)return D.error("Please log in first.");const{name:se,email:ee,phone:L,role:X,salary:O,notifications:J}=G;if(!se||!ee||!X)return D.error("Name, email and role are required.");if(S.find(be=>be.contactEmail?.toLowerCase()===ee.toLowerCase()))return D.error("An employee with this email already exists.");if(L&&S.find(be=>be.phoneNumber===L))return D.error("An employee with this phone number already exists.");try{const be=await Ne.post("/team",{fullName:se,contactEmail:ee,phoneNumber:L,role:X,salary:Number(O)||0,profilePhoto:G.profilePhoto||`https://ui-avatars.com/api/?name=${encodeURIComponent(se)}&background=10b981&color=fff`,notifyBySMS:J.sms,notifyByEmail:J.email},{headers:{Authorization:`Bearer ${H}`}});C(Le=>[...Le,be.data]),o(!1),F({name:"",email:"",phone:"",role:"",salary:"",profilePhoto:"",notifications:{sms:!1,email:!1}}),D.success("Employee added successfully!")}catch(be){D.error(be.response?.data?.message||"Error adding employee."),console.error(be)}},P=H=>{p({...H,salary:String(H.salary??"")}),x(!0)},z=(H,se)=>{p(ee=>({...ee,[H]:se}))},V=async()=>{const H=localStorage.getItem("token");if(!(!H||!h?._id))try{const se=await Ne.put(`/team/${h._id}`,{fullName:h.name,contactEmail:h.email,phoneNumber:h.phone,role:h.role,salary:Number(h.salary)||0,notifyBySMS:h.notifications?.sms,notifyByEmail:h.notifications?.email},{headers:{Authorization:`Bearer ${H}`}});C(ee=>ee.map(L=>L._id===se.data._id?se.data:L)),x(!1),p(null),D.success("Employee updated!")}catch(se){D.error(se.response?.data?.message||"Error updating employee."),console.error(se)}},W=async H=>{const se=localStorage.getItem("token");if(!se)return D.error("Please log in first.");try{await Ne.delete(`/team/${H}`,{headers:{Authorization:`Bearer ${se}`}}),C(ee=>ee.filter(L=>(L._id||L.id)!==H)),D.success("Employee deleted.")}catch(ee){D.error(ee.response?.data?.message||"Error deleting employee."),console.error(ee)}},q=async()=>{const H=localStorage.getItem("token");if(!H){D.error("Please log in first.");return}if(!E.employeeId||!E.amount||!E.phone){D.error("Please fill in all required fields.");return}const se=Number(E.amount);if(isNaN(se)||se<1){D.error("Amount must be a positive number (at least 1 KSh).");return}try{const ee=S.find(X=>X._id===E.employeeId),L=await Ne.post("/mpesa/stkpush",{phone:E.phone,amount:se,accountReference:"Payroll Payment",transactionDesc:`Payroll payment for ${ee?.name||"Employee"} - ${E.message||""}`},{headers:{Authorization:`Bearer ${H}`}});if(L.status===200&&L.data?.data?.checkoutRequestID){const X=L.data.data.checkoutRequestID;await Ne.post("/expenses",{employeeId:E.employeeId,amount:se,phone:E.phone,message:E.message,smsReceipt:E.smsReceipt,paymentMethod:"M-Pesa",transactionId:X,category:"Payroll",description:`Payroll payment via M-Pesa for ${ee?.name||"Employee"}`},{headers:{Authorization:`Bearer ${H}`}}),u(!1),T({employeeId:"",amount:"",phone:"",message:"",smsReceipt:!1});const O=await Ne.get("/expenses",{headers:{Authorization:`Bearer ${H}`}});A(O.data||[]),D.success("M-Pesa STK Push initiated successfully! Employee will receive payment prompt on their phone.")}else throw new Error(L.data?.error||L.data?.message||"M-Pesa STK Push failed")}catch(ee){console.error("Payroll payment error:",ee),D.error(ee.response?.data?.error||ee.response?.data?.message||"Error sending payroll payment. Please try again.")}},B=H=>{switch(H){case"Active":return e.jsx(De,{variant:"default",children:"Active"});case"On Leave":return e.jsx(De,{variant:"secondary",children:"On Leave"});case"Inactive":return e.jsx(De,{variant:"destructive",children:"Inactive"});default:return e.jsx(De,{variant:"outline",children:H})}},ae=H=>{switch(H){case"Completed":return e.jsx(De,{variant:"default",children:"Completed"});case"Pending":return e.jsx(De,{variant:"secondary",children:"Pending"});case"Failed":return e.jsx(De,{variant:"destructive",children:"Failed"});default:return e.jsx(De,{variant:"outline",children:H})}},U=S.filter(H=>{const se=H.name?.toLowerCase().includes(t.toLowerCase())||H.email?.toLowerCase().includes(t.toLowerCase()),ee=a==="all"||H.role===a;return se&&ee}),Z=S.reduce((H,se)=>H+(se.salary||0),0),de=S.filter(H=>H.status==="Active").length;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Team Management"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage employees, payroll, and notifications"})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs(Bt,{open:c,onOpenChange:u,children:[e.jsx(wa,{asChild:!0,children:e.jsxs(R,{variant:"outline",children:[e.jsx(pa,{className:"mr-2 h-4 w-4"}),"M-Pesa Payroll"]})}),e.jsxs(zt,{className:"max-w-2xl",children:[e.jsxs(Ut,{children:[e.jsx(Vt,{children:"M-Pesa Payroll Management"}),e.jsx(es,{children:"Send salaries directly to employee phone numbers via M-Pesa"})]}),e.jsxs(ja,{defaultValue:"pay-salary",className:"w-full",children:[e.jsxs(Sa,{className:"grid w-full grid-cols-2",children:[e.jsx(ft,{value:"pay-salary",children:"Pay Salary"}),e.jsx(ft,{value:"payment-history",children:"Payment History"})]}),e.jsxs(pt,{value:"pay-salary",className:"space-y-4",children:[e.jsxs("div",{className:"grid gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(te,{htmlFor:"employee-select",children:"Select Employee"}),e.jsxs(Mt,{value:E.employeeId,onValueChange:H=>T(se=>({...se,employeeId:H})),children:[e.jsx(Lt,{children:e.jsx(Ft,{placeholder:"Choose employee"})}),e.jsx(It,{children:S.map(H=>e.jsxs(Ae,{value:H._id||H.id,children:[H.name," - KSh ",H.salary?.toLocaleString()]},H._id||H.id))})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(te,{htmlFor:"amount",children:"Amount (KSh)"}),e.jsx(me,{id:"amount",placeholder:"45,000",value:E.amount,onChange:H=>T(se=>({...se,amount:H.target.value})),type:"number",min:"1"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(te,{htmlFor:"phone",children:"Phone Number"}),e.jsx(me,{id:"phone",placeholder:"+254701234567",value:E.phone,onChange:H=>T(se=>({...se,phone:H.target.value}))})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(te,{htmlFor:"message",children:"Payment Message (Optional)"}),e.jsx(As,{id:"message",placeholder:"Salary payment for January 2024",className:"resize-none",value:E.message,onChange:H=>T(se=>({...se,message:H.target.value}))})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(os,{id:"sms-receipt",checked:E.smsReceipt,onCheckedChange:H=>T(se=>({...se,smsReceipt:H}))}),e.jsx(te,{htmlFor:"sms-receipt",children:"Send SMS receipt"})]})]}),e.jsxs(Ps,{children:[e.jsx(R,{variant:"outline",className:"text-red-500 cursor-pointer hover:text-red-500",onClick:()=>u(!1),children:"Cancel"}),e.jsxs(R,{className:"bg-green-500 cursor-pointer hover:bg-green-400",onClick:q,children:[e.jsx(Fa,{className:"mr-2 h-4 w-4"}),"Send Payment"]})]})]}),e.jsx(pt,{value:"payment-history",children:e.jsx("div",{className:"space-y-4",children:e.jsxs(Xn,{children:[e.jsx(Qn,{children:e.jsxs(xa,{children:[e.jsx(St,{children:"Employee"}),e.jsx(St,{children:"Amount"}),e.jsx(St,{children:"Date"}),e.jsx(St,{children:"Status"}),e.jsx(St,{children:"Transaction ID"})]})}),e.jsx(Zn,{children:k.map(H=>e.jsxs(xa,{children:[e.jsx(Nt,{children:H.employeeName}),e.jsxs(Nt,{children:["KSh ",H.amount?.toLocaleString()]}),e.jsx(Nt,{children:H.date?new Date(H.date).toLocaleDateString():""}),e.jsx(Nt,{children:ae(H.status)}),e.jsx(Nt,{className:"font-mono text-xs",children:H.transactionId})]},H._id||H.id))})]})})})]})]})]}),e.jsxs(Bt,{open:i,onOpenChange:o,children:[e.jsx(wa,{asChild:!0,children:e.jsxs(R,{className:"bg-green-500 cursor-pointer hover:bg-green-400",children:[e.jsx(Gs,{className:"mr-2 h-4 w-4"}),"Add Employee"]})}),e.jsxs(zt,{children:[e.jsxs(Ut,{children:[e.jsx(Vt,{children:"Add New Employee"}),e.jsx(es,{children:"Register a new team member to your business"})]}),e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(te,{htmlFor:"name",children:"Full Name"}),e.jsx(me,{id:"name",placeholder:"Enter full name",value:G.name,onChange:H=>F(se=>({...se,name:H.target.value}))})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(te,{htmlFor:"email",children:"Email Address"}),e.jsx(me,{id:"email",type:"email",placeholder:"employee@example.com",value:G.email,onChange:H=>F(se=>({...se,email:H.target.value}))})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(te,{htmlFor:"phone",children:"Phone Number"}),e.jsx(me,{id:"phone",placeholder:"+254701234567",value:G.phone,onChange:H=>F(se=>({...se,phone:H.target.value}))})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(te,{htmlFor:"profilePhoto",children:"Profile Photo URL (Optional)"}),e.jsx(me,{id:"profilePhoto",placeholder:"https://example.com/photo.jpg",value:G.profilePhoto,onChange:H=>F(se=>({...se,profilePhoto:H.target.value}))}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Leave empty to auto-generate an avatar based on the name"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(te,{htmlFor:"role",children:"Role"}),e.jsxs(Mt,{value:G.role,onValueChange:H=>F(se=>({...se,role:H})),children:[e.jsx(Lt,{children:e.jsx(Ft,{placeholder:"Select role"})}),e.jsxs(It,{children:[e.jsx(Ae,{value:"Manager",children:"Manager"}),e.jsx(Ae,{value:"Stylist",children:"Stylist"}),e.jsx(Ae,{value:"Receptionist",children:"Receptionist"}),e.jsx(Ae,{value:"Staff",children:"Staff"})]})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(te,{htmlFor:"salary",children:"Monthly Salary (KSh)"}),e.jsx(me,{id:"salary",placeholder:"35,000",value:G.salary,onChange:H=>F(se=>({...se,salary:H.target.value}))})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(te,{children:"Notification Preferences"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(xi,{className:"h-4 w-4"}),e.jsx(te,{htmlFor:"sms-notifications",children:"SMS Notifications"})]}),e.jsx(os,{id:"sms-notifications",checked:G.notifications.sms,onCheckedChange:H=>F(se=>({...se,notifications:{...se.notifications,sms:H}}))})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ks,{className:"h-4 w-4"}),e.jsx(te,{htmlFor:"email-notifications",children:"Email Notifications"})]}),e.jsx(os,{id:"email-notifications",checked:G.notifications.email,onCheckedChange:H=>F(se=>({...se,notifications:{...se.notifications,email:H}}))})]})]})]}),e.jsxs(Ps,{children:[e.jsx(R,{variant:"outline",className:"text-red-500 cursor-pointer hover:text-red-400",onClick:()=>o(!1),children:"Cancel"}),e.jsx(R,{className:"bg-green-500 cursor-pointer hover:bg-green-400",onClick:_,children:"Add Employee"})]})]})]})]})]}),e.jsxs("div",{className:"grid gap-6 md:grid-cols-4",children:[e.jsxs(K,{children:[e.jsxs(xe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(pe,{className:"text-sm font-medium",children:"Total Employees"}),e.jsx(Zt,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(Y,{children:[e.jsx("div",{className:"text-2xl font-bold",children:S.length}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[de," active"]})]})]}),e.jsxs(K,{children:[e.jsxs(xe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(pe,{className:"text-sm font-medium",children:"Monthly Payroll"}),e.jsx(ra,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(Y,{children:[e.jsxs("div",{className:"text-2xl font-bold",children:["KSh ",Z.toLocaleString()]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Total monthly budget"})]})]}),e.jsxs(K,{children:[e.jsxs(xe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(pe,{className:"text-sm font-medium",children:"Last Payment"}),e.jsx(pa,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(Y,{children:[e.jsx("div",{className:"text-2xl font-bold",children:k[0]?.date?new Date(k[0].date).toLocaleDateString("en-US",{month:"short",day:"numeric"}):"--"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Next due: Feb 1"})]})]}),e.jsxs(K,{children:[e.jsxs(xe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(pe,{className:"text-sm font-medium",children:"Notifications Sent"}),e.jsx(Pr,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(Y,{children:[e.jsx("div",{className:"text-2xl font-bold",children:"47"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"This month"})]})]})]}),e.jsxs(K,{children:[e.jsxs(xe,{children:[e.jsx(pe,{children:"Employee Directory"}),e.jsx(ot,{children:"Manage your team members and their details"})]}),e.jsxs(Y,{children:[e.jsxs("div",{className:"flex items-center space-x-4 mb-6",children:[e.jsxs("div",{className:"relative flex-1 max-w-sm",children:[e.jsx(oa,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(me,{placeholder:"Search employees...",value:t,onChange:H=>s(H.target.value),className:"pl-10"})]}),e.jsxs(Mt,{value:a,onValueChange:r,children:[e.jsx(Lt,{className:"w-[180px]",children:e.jsx(Ft,{placeholder:"Filter by role"})}),e.jsxs(It,{children:[e.jsx(Ae,{value:"all",children:"All Roles"}),e.jsx(Ae,{value:"Manager",children:"Manager"}),e.jsx(Ae,{value:"Stylist",children:"Stylist"}),e.jsx(Ae,{value:"Receptionist",children:"Receptionist"}),e.jsx(Ae,{value:"Staff",children:"Staff"})]})]})]}),e.jsxs(Xn,{children:[e.jsx(Qn,{children:e.jsxs(xa,{children:[e.jsx(St,{children:"Employee"}),e.jsx(St,{children:"Contact"}),e.jsx(St,{children:"Role"}),e.jsx(St,{children:"Salary"}),e.jsx(St,{children:"Status"}),e.jsx(St,{children:"Notifications"}),e.jsx(St,{children:"Actions"})]})}),e.jsx(Zn,{children:U.map(H=>e.jsxs(xa,{children:[e.jsx(Nt,{children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:H.name}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Joined"," ",H.joinDate?new Date(H.joinDate).toLocaleDateString():""]})]})}),e.jsx(Nt,{children:e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center text-sm",children:[e.jsx(Ks,{className:"mr-1 h-3 w-3"}),H.email]}),e.jsxs("div",{className:"flex items-center text-sm",children:[e.jsx(Ws,{className:"mr-1 h-3 w-3"}),H.phone]})]})}),e.jsx(Nt,{children:H.role}),e.jsxs(Nt,{children:["KSh ",H.salary?.toLocaleString()]}),e.jsx(Nt,{children:B(H.status)}),e.jsx(Nt,{children:e.jsxs("div",{className:"flex space-x-1",children:[H.notifications?.sms&&e.jsx(De,{variant:"outline",className:"text-xs",children:"SMS"}),H.notifications?.email&&e.jsx(De,{variant:"outline",className:"text-xs",children:"Email"})]})}),e.jsx(Nt,{children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(R,{variant:"outline",size:"sm",onClick:()=>P(H),children:e.jsx(Yi,{className:"h-3 w-3"})}),e.jsx(R,{variant:"outline",size:"sm",onClick:()=>W(H._id||H.id),children:e.jsx(ga,{className:"h-3 w-3"})})]})})]},H._id||H.id))})]})]})]}),f&&h&&e.jsx(Bt,{open:f,onOpenChange:x,children:e.jsxs(zt,{children:[e.jsxs(Ut,{children:[e.jsx(Vt,{children:"Edit Employee"}),e.jsx(es,{children:"Update employee details"})]}),e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsx(te,{children:"Name"}),e.jsx(me,{value:h.name,onChange:H=>z("name",H.target.value)}),e.jsx(te,{children:"Email"}),e.jsx(me,{type:"email",value:h.email,onChange:H=>z("email",H.target.value)}),e.jsx(te,{children:"Phone"}),e.jsx(me,{value:h.phone,onChange:H=>z("phone",H.target.value)}),e.jsx(te,{children:"Role"}),e.jsx(me,{value:h.role,onChange:H=>z("role",H.target.value)}),e.jsx(te,{children:"Salary"}),e.jsx(me,{type:"number",value:h.salary,onChange:H=>z("salary",H.target.value)})]}),e.jsxs(Ps,{children:[e.jsx(R,{variant:"outline",onClick:()=>x(!1),children:"Cancel"}),e.jsx(R,{className:"bg-green-500 hover:bg-green-400",onClick:V,children:"Save"})]})]})})]})},rs=({data:t=null,type:s="line",title:a="Analytics Chart",description:r="",height:i=300,showControls:o=!0,autoRefresh:c=!1,refreshInterval:u=3e4,className:f="",onDataUpdate:x=null})=>{const[h,p]=v.useState(s),[g,y]=v.useState("7d"),[b,N]=v.useState(t),[S,C]=v.useState(!1),[k,A]=v.useState(new Date),G={primary:["#10b981","#059669","#047857","#065f46"],profit:["#22c55e","#16a34a","#15803d","#166534"],loss:["#ef4444","#dc2626","#b91c1c","#991b1b"],rainbow:["#10b981","#3b82f6","#8b5cf6","#f59e0b","#ef4444","#06b6d4"]},F=(q,B)=>{const ae=B==="7d"?7:B==="30d"?30:B==="90d"?90:365,U=[];for(let Z=0;Z<ae;Z++){const de=new Date;de.setDate(de.getDate()-(ae-Z-1));const H=1e3+Math.random()*500,se=q==="profit"?Z*10:q==="loss"?-Z*5:Math.sin(Z/5)*100;U.push({date:de.toISOString().split("T")[0],name:de.toLocaleDateString("en-US",{month:"short",day:"numeric"}),value:Math.max(0,H+se+(Math.random()-.5)*200),profit:Math.max(0,H*.3+se*.5+(Math.random()-.5)*100),loss:Math.max(0,H*.1-se*.3+(Math.random()-.5)*50),revenue:H+se+(Math.random()-.5)*300,orders:Math.floor(20+Math.random()*50+Z*2),customers:Math.floor(10+Math.random()*30+Z),products:Math.floor(5+Math.random()*15),growth:((Math.random()-.5)*20).toFixed(1)})}return U};v.useEffect(()=>{if(c){const q=setInterval(()=>{E()},u);return()=>clearInterval(q)}},[c,u,g]),v.useEffect(()=>{N(t||F(s,g))},[t,s,g]);const E=async()=>{C(!0);try{await new Promise(B=>setTimeout(B,1e3));const q=t||F(s,g);N(q),A(new Date),x&&x(q),D.success("Chart data updated successfully")}catch{D.error("Failed to update chart data")}finally{C(!1)}},T=()=>{D.info("Exporting chart data...");const q=b.map(Z=>Object.entries(Z).map(([de,H])=>`${de}: ${H}`).join(", ")).join(`
`),B=new Blob([q],{type:"text/csv"}),ae=URL.createObjectURL(B),U=document.createElement("a");U.href=ae,U.download=`${a.replace(/\s+/g,"_")}_${new Date().toISOString().split("T")[0]}.csv`,U.click(),URL.revokeObjectURL(ae)},P=a.toLowerCase().includes("profit")||a.toLowerCase().includes("revenue")?G.profit:a.toLowerCase().includes("loss")||a.toLowerCase().includes("expense")?G.loss:G.primary,z=()=>{if(!b||b.length===0)return e.jsx("div",{className:"flex items-center justify-center h-64 text-muted-foreground",children:e.jsxs("div",{className:"text-center",children:[e.jsx(er,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"No data available"})]})});const q={data:b,margin:{top:5,right:30,left:20,bottom:5}};switch(h){case"line":return e.jsxs(z6,{...q,children:[e.jsx(Ch,{strokeDasharray:"3 3",stroke:"#f0f0f0"}),e.jsx(Th,{dataKey:"name",stroke:"#666"}),e.jsx(Eh,{stroke:"#666"}),e.jsx(nu,{contentStyle:{backgroundColor:"#fff",border:"1px solid #e5e7eb",borderRadius:"8px",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1)"}}),e.jsx(kh,{}),e.jsx(Ob,{type:"monotone",dataKey:"value",stroke:P[0],strokeWidth:3,dot:{fill:P[0],strokeWidth:2,r:4},activeDot:{r:6,stroke:P[0],strokeWidth:2}})]});case"area":return e.jsxs(I6,{...q,children:[e.jsx(Ch,{strokeDasharray:"3 3",stroke:"#f0f0f0"}),e.jsx(Th,{dataKey:"name",stroke:"#666"}),e.jsx(Eh,{stroke:"#666"}),e.jsx(nu,{contentStyle:{backgroundColor:"#fff",border:"1px solid #e5e7eb",borderRadius:"8px",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1)"}}),e.jsx(kh,{}),e.jsx(B6,{type:"monotone",dataKey:"value",stroke:P[0],fill:P[0],fillOpacity:.3,strokeWidth:2})]});case"bar":return e.jsxs(L6,{...q,children:[e.jsx(Ch,{strokeDasharray:"3 3",stroke:"#f0f0f0"}),e.jsx(Th,{dataKey:"name",stroke:"#666"}),e.jsx(Eh,{stroke:"#666"}),e.jsx(nu,{contentStyle:{backgroundColor:"#fff",border:"1px solid #e5e7eb",borderRadius:"8px",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1)"}}),e.jsx(kh,{}),e.jsx(Db,{dataKey:"value",fill:P[0],radius:[4,4,0,0]})]});case"pie":const B=b.slice(0,6).map((ae,U)=>({name:ae.name,value:ae.value,fill:G.rainbow[U%G.rainbow.length]}));return e.jsxs(P6,{children:[e.jsx(M6,{data:B,cx:"50%",cy:"50%",labelLine:!1,label:({name:ae,percent:U})=>`${ae} ${(U*100).toFixed(0)}%`,outerRadius:80,fill:"#8884d8",dataKey:"value",children:B.map((ae,U)=>e.jsx(F6,{fill:ae.fill},`cell-${U}`))}),e.jsx(nu,{})]});case"composed":return e.jsxs(R6,{...q,children:[e.jsx(Ch,{strokeDasharray:"3 3",stroke:"#f0f0f0"}),e.jsx(Th,{dataKey:"name",stroke:"#666"}),e.jsx(Eh,{stroke:"#666"}),e.jsx(nu,{contentStyle:{backgroundColor:"#fff",border:"1px solid #e5e7eb",borderRadius:"8px",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1)"}}),e.jsx(kh,{}),e.jsx(Db,{dataKey:"profit",fill:G.profit[0],radius:[2,2,0,0]}),e.jsx(Ob,{type:"monotone",dataKey:"revenue",stroke:P[0],strokeWidth:3})]});default:return z()}},V=[{value:"line",label:"Line Chart",icon:La},{value:"area",label:"Area Chart",icon:Is},{value:"bar",label:"Bar Chart",icon:er},{value:"pie",label:"Pie Chart",icon:IS},{value:"composed",label:"Combined",icon:er}],W=[{value:"7d",label:"7 Days"},{value:"30d",label:"30 Days"},{value:"90d",label:"90 Days"},{value:"1y",label:"1 Year"}];return e.jsxs(K,{className:f,children:[e.jsxs(xe,{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs(pe,{className:"flex items-center gap-2",children:[e.jsx(er,{className:"h-5 w-5 text-green-600"}),a]}),r&&e.jsx(ot,{children:r})]}),o&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(Mt,{value:h,onValueChange:p,children:[e.jsx(Lt,{className:"w-32",children:e.jsx(Ft,{})}),e.jsx(It,{children:V.map(q=>{const B=q.icon;return e.jsx(Ae,{value:q.value,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(B,{className:"h-4 w-4"}),q.label]})},q.value)})})]}),e.jsxs(Mt,{value:g,onValueChange:y,children:[e.jsx(Lt,{className:"w-24",children:e.jsx(Ft,{})}),e.jsx(It,{children:W.map(q=>e.jsx(Ae,{value:q.value,children:q.label},q.value))})]}),e.jsx(R,{variant:"outline",size:"sm",onClick:E,disabled:S,children:e.jsx(cs,{className:`h-4 w-4 ${S?"animate-spin":""}`})}),e.jsx(R,{variant:"outline",size:"sm",onClick:T,children:e.jsx(Ma,{className:"h-4 w-4"})})]})]}),k&&e.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[e.jsx(ts,{className:"h-3 w-3"}),"Last updated: ",k.toLocaleTimeString(),c&&e.jsx(De,{variant:"secondary",className:"text-xs",children:"Auto-refresh"})]})]}),e.jsx(Y,{children:e.jsx(O6,{width:"100%",height:i,children:z()})})]})},lz=({amount:t,description:s,onSuccess:a,onError:r,disabled:i=!1})=>{const[o,c]=v.useState(!1),[u,f]=v.useState(""),[x,h]=v.useState(!1),[p,g]=v.useState(null),[y,b]=v.useState(""),N=T=>{const _=T.replace(/\D/g,"");return _.startsWith("254")?_:_.startsWith("0")?"254"+_.substring(1):_.length===9?"254"+_:_},S=T=>{const _=N(T);return _.length===12&&_.startsWith("254")},C=async()=>{if(!S(u)){D.error("Please enter a valid Kenyan phone number");return}h(!0),g("pending");try{const T=localStorage.getItem("token"),_=N(u),P=await Ne.post("/payments/mpesa/initiate",{phoneNumber:_,amount:t,description:s||"Payment for ominbiz services"},{headers:{Authorization:`Bearer ${T}`}});if(P.data.success)b(P.data.transactionId),D.success("Payment request sent! Please check your phone for the M-Pesa prompt."),k(P.data.transactionId);else throw new Error(P.data.message||"Payment initiation failed")}catch(T){console.error("M-Pesa payment error:",T),g("failed");const _=T.response?.data?.message||T.message||"Payment failed";D.error(_),r&&r(T)}},k=async T=>{let P=0;const z=async()=>{try{const V=localStorage.getItem("token"),W=await Ne.get(`/payments/mpesa/status/${T}`,{headers:{Authorization:`Bearer ${V}`}}),q=W.data.status;q==="completed"?(g("success"),h(!1),D.success("Payment completed successfully!"),a&&a(W.data),setTimeout(()=>c(!1),2e3)):q==="failed"||q==="cancelled"?(g("failed"),h(!1),D.error("Payment was cancelled or failed"),r&&r(new Error("Payment failed"))):P<30?(P++,setTimeout(z,1e4)):(g("failed"),h(!1),D.error("Payment timeout. Please try again."),r&&r(new Error("Payment timeout")))}catch(V){console.error("Error checking payment status:",V),P<30?(P++,setTimeout(z,1e4)):(g("failed"),h(!1),D.error("Unable to verify payment status"),r&&r(V))}};z()},A=()=>{g(null),h(!1),b(""),f("")},G=()=>{x||(c(!1),A())},F=()=>{switch(p){case"pending":return e.jsx(ts,{className:"h-8 w-8 text-yellow-500"});case"success":return e.jsx(us,{className:"h-8 w-8 text-green-500"});case"failed":return e.jsx(ks,{className:"h-8 w-8 text-red-500"});default:return e.jsx(qr,{className:"h-8 w-8 text-primary"})}},E=()=>{switch(p){case"pending":return"Waiting for payment confirmation...";case"success":return"Payment completed successfully!";case"failed":return"Payment failed. Please try again.";default:return"Enter your M-Pesa number to proceed"}};return e.jsxs(Bt,{open:o,onOpenChange:G,children:[e.jsx(wa,{asChild:!0,children:e.jsxs(R,{onClick:()=>c(!0),disabled:i,className:"bg-green-600 hover:bg-green-700 text-white",children:[e.jsx(qr,{className:"mr-2 h-4 w-4"}),"Pay with M-Pesa"]})}),e.jsxs(zt,{className:"sm:max-w-md",children:[e.jsxs(Ut,{children:[e.jsxs(Vt,{className:"flex items-center gap-2",children:[e.jsx(qr,{className:"h-5 w-5 text-green-600"}),"M-Pesa Payment"]}),e.jsxs(es,{children:["Pay KES ",t?.toLocaleString()," using M-Pesa"]})]}),e.jsx(K,{children:e.jsxs(Y,{className:"pt-6",children:[e.jsxs("div",{className:"text-center space-y-4",children:[F(),e.jsx("p",{className:"text-sm text-muted-foreground",children:E()})]}),!p&&e.jsxs("div",{className:"space-y-4 mt-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(te,{htmlFor:"phone",children:"Phone Number"}),e.jsx(me,{id:"phone",type:"tel",placeholder:"0712345678 or 254712345678",value:u,onChange:T=>f(T.target.value),disabled:x}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Enter your Safaricom M-Pesa number"})]}),e.jsx(R,{onClick:C,disabled:!u||x,className:"w-full bg-green-600 hover:bg-green-700",children:x?e.jsxs(e.Fragment,{children:[e.jsx(qn,{className:"mr-2 h-4 w-4 animate-spin"}),"Processing..."]}):e.jsxs(e.Fragment,{children:[e.jsx(qr,{className:"mr-2 h-4 w-4"}),"Send Payment Request"]})})]}),p==="pending"&&e.jsxs("div",{className:"mt-6 p-4 bg-yellow-50 dark:bg-yellow-900/20 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 text-yellow-800 dark:text-yellow-200",children:[e.jsx(qn,{className:"h-4 w-4 animate-spin"}),e.jsx("span",{className:"text-sm font-medium",children:"Check your phone for M-Pesa prompt"})]}),e.jsxs("p",{className:"text-xs text-yellow-700 dark:text-yellow-300 mt-1",children:["Transaction ID: ",y]})]}),p==="failed"&&e.jsxs("div",{className:"mt-6 space-y-3",children:[e.jsx("div",{className:"p-4 bg-red-50 dark:bg-red-900/20 rounded-lg",children:e.jsx("p",{className:"text-sm text-red-800 dark:text-red-200",children:"Payment was not completed. Please try again."})}),e.jsx(R,{onClick:A,variant:"outline",className:"w-full",children:"Try Again"})]})]})})]})]})},oz=({amount:t,description:s,currency:a="USD",onSuccess:r,onError:i,disabled:o=!1})=>{const[c,u]=v.useState(!1),[f,x]=v.useState(!1),[h,p]=v.useState(null),[g,y]=v.useState(!1),[b,N]=v.useState(null);v.useEffect(()=>{if(typeof window<"u"&&!window.paypal){const E=document.createElement("script"),T="demo_client_id";E.src=`https://www.paypal.com/sdk/js?client-id=${T}&currency=${a}`,E.async=!0,E.onload=()=>{y(!0)},E.onerror=()=>{console.error("Failed to load PayPal SDK"),y(!1)},document.body.appendChild(E)}else window.paypal&&y(!0)},[a]),v.useEffect(()=>{c&&g&&window.paypal&&!b&&S()},[c,g,b]);const S=()=>{if(!window.paypal)return;const E=window.paypal.Buttons({createOrder:async(_,P)=>{try{x(!0);const z=localStorage.getItem("token"),V=await Ne.post("/payments/paypal/create-order",{amount:t,currency:a,description:s||"Payment for ominbiz services"},{headers:{Authorization:`Bearer ${z}`}});if(V.data.success)return V.data.orderID;throw new Error(V.data.message||"Failed to create PayPal order")}catch(z){return console.error("Error creating PayPal order:",z),x(!1),D.error("Failed to create payment order"),i&&i(z),null}},onApprove:async(_,P)=>{try{const z=localStorage.getItem("token"),V=await Ne.post("/payments/paypal/capture-order",{orderID:_.orderID},{headers:{Authorization:`Bearer ${z}`}});if(V.data.success)p("success"),x(!1),D.success("Payment completed successfully!"),r&&r(V.data),setTimeout(()=>u(!1),2e3);else throw new Error(V.data.message||"Payment capture failed")}catch(z){console.error("Error capturing PayPal payment:",z),p("failed"),x(!1),D.error("Payment failed to complete"),i&&i(z)}},onError:_=>{console.error("PayPal error:",_),p("failed"),x(!1),D.error("PayPal payment error occurred"),i&&i(_)},onCancel:_=>{console.log("PayPal payment cancelled:",_),x(!1),D.info("Payment was cancelled")},style:{layout:"vertical",color:"blue",shape:"rect",label:"paypal",height:40}}),T=document.getElementById("paypal-button-container");T&&T.children.length===0&&E.render("#paypal-button-container").then(()=>{N(E)}).catch(_=>{console.error("Error rendering PayPal buttons:",_),D.error("Failed to load PayPal payment options")})},C=()=>{p(null),x(!1);const E=document.getElementById("paypal-button-container");E&&(E.innerHTML=""),N(null)},k=()=>{f||(u(!1),C())},A=E=>{E?(u(!0),C()):k()},G=()=>{switch(h){case"success":return e.jsx(us,{className:"h-8 w-8 text-green-500"});case"failed":return e.jsx(ks,{className:"h-8 w-8 text-red-500"});default:return e.jsx(pa,{className:"h-8 w-8 text-blue-500"})}},F=()=>{switch(h){case"success":return"Payment completed successfully!";case"failed":return"Payment failed. Please try again.";default:return"Choose your payment method below"}};return e.jsxs(Bt,{open:c,onOpenChange:A,children:[e.jsx(wa,{asChild:!0,children:e.jsxs(R,{disabled:o,className:"bg-blue-600 hover:bg-blue-700 text-white",children:[e.jsx(pa,{className:"mr-2 h-4 w-4"}),"Pay with PayPal"]})}),e.jsxs(zt,{className:"sm:max-w-md",children:[e.jsxs(Ut,{children:[e.jsxs(Vt,{className:"flex items-center gap-2",children:[e.jsx(pa,{className:"h-5 w-5 text-blue-600"}),"PayPal Payment"]}),e.jsxs(es,{children:["Pay ",a," ",t?.toLocaleString()," using PayPal"]})]}),e.jsx(K,{children:e.jsxs(Y,{className:"pt-6",children:[e.jsxs("div",{className:"text-center space-y-4",children:[G(),e.jsx("p",{className:"text-sm text-muted-foreground",children:F()})]}),!h&&e.jsx("div",{className:"mt-6 space-y-4",children:g?e.jsxs(e.Fragment,{children:[e.jsx("div",{id:"paypal-button-container",className:"min-h-[50px]"}),f&&e.jsxs("div",{className:"flex items-center justify-center py-4",children:[e.jsx(qn,{className:"h-4 w-4 animate-spin mr-2"}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"Processing payment..."})]})]}):e.jsxs("div",{className:"flex items-center justify-center py-8",children:[e.jsx(qn,{className:"h-6 w-6 animate-spin mr-2"}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"Loading PayPal..."})]})}),h==="failed"&&e.jsxs("div",{className:"mt-6 space-y-3",children:[e.jsx("div",{className:"p-4 bg-red-50 dark:bg-red-900/20 rounded-lg",children:e.jsx("p",{className:"text-sm text-red-800 dark:text-red-200",children:"Payment was not completed. Please try again."})}),e.jsx(R,{onClick:C,variant:"outline",className:"w-full",children:"Try Again"})]}),e.jsxs("div",{className:"mt-6 pt-4 border-t",children:[e.jsxs("div",{className:"flex items-center justify-center space-x-2 text-xs text-muted-foreground",children:[e.jsx(pa,{className:"h-3 w-3"}),e.jsx("span",{children:"Secured by PayPal"})]}),e.jsx("p",{className:"text-center text-xs text-muted-foreground mt-1",children:"Your payment information is encrypted and secure"})]})]})})]})]})},oE=({amount:t,description:s,currency:a="KES",onSuccess:r,onError:i,disabled:o=!1,triggerText:c="Make Payment",showMpesa:u=!0,showPaypal:f=!0})=>{const[x,h]=v.useState(!1),p=b=>{h(!1),r&&r(b)},g=b=>{i&&i(b)},y=(b,N)=>N==="KES"?`KES ${b?.toLocaleString()}`:N==="USD"?`$${b?.toLocaleString()}`:`${N} ${b?.toLocaleString()}`;return e.jsxs(Bt,{open:x,onOpenChange:h,children:[e.jsx(wa,{asChild:!0,children:e.jsxs(R,{disabled:o,className:"bg-primary hover:bg-primary/90",children:[e.jsx(pa,{className:"mr-2 h-4 w-4"}),c]})}),e.jsxs(zt,{className:"sm:max-w-lg",children:[e.jsxs(Ut,{children:[e.jsxs(Vt,{className:"flex items-center gap-2",children:[e.jsx(p_,{className:"h-5 w-5"}),"Payment Options"]}),e.jsxs(es,{children:["Choose your preferred payment method for ",y(t,a)]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(K,{children:[e.jsx(xe,{className:"pb-3",children:e.jsx(pe,{className:"text-lg",children:"Payment Summary"})}),e.jsxs(Y,{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Amount:"}),e.jsx("span",{className:"font-semibold",children:y(t,a)})]}),s&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Description:"}),e.jsx("span",{className:"text-sm",children:s})]})]})]}),e.jsxs(ja,{defaultValue:u?"mpesa":"paypal",className:"w-full",children:[e.jsxs(Sa,{className:"grid w-full grid-cols-2",children:[u&&e.jsxs(ft,{value:"mpesa",className:"flex items-center gap-2",children:[e.jsx(qr,{className:"h-4 w-4"}),"M-Pesa"]}),f&&e.jsxs(ft,{value:"paypal",className:"flex items-center gap-2",children:[e.jsx(pa,{className:"h-4 w-4"}),"PayPal"]})]}),u&&e.jsx(pt,{value:"mpesa",className:"space-y-4",children:e.jsxs(K,{children:[e.jsxs(xe,{className:"pb-3",children:[e.jsxs(pe,{className:"flex items-center gap-2 text-green-600",children:[e.jsx(qr,{className:"h-5 w-5"}),"M-Pesa Payment"]}),e.jsx(ot,{children:"Pay instantly using your Safaricom M-Pesa mobile money"})]}),e.jsxs(Y,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ts,{className:"h-4 w-4 text-green-500"}),e.jsx("span",{children:"Instant payment"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(da,{className:"h-4 w-4 text-green-500"}),e.jsx("span",{children:"Secure & trusted"})]})]}),e.jsx("div",{className:"pt-2",children:e.jsx(lz,{amount:a==="KES"?t:Math.round(t*130),description:s,onSuccess:p,onError:g})})]})]})}),f&&e.jsx(pt,{value:"paypal",className:"space-y-4",children:e.jsxs(K,{children:[e.jsxs(xe,{className:"pb-3",children:[e.jsxs(pe,{className:"flex items-center gap-2 text-blue-600",children:[e.jsx(pa,{className:"h-5 w-5"}),"PayPal Payment"]}),e.jsx(ot,{children:"Pay with PayPal, credit card, or debit card"})]}),e.jsxs(Y,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(da,{className:"h-4 w-4 text-blue-500"}),e.jsx("span",{children:"Buyer protection"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(pa,{className:"h-4 w-4 text-blue-500"}),e.jsx("span",{children:"Cards accepted"})]})]}),e.jsx("div",{className:"pt-2",children:e.jsx(oz,{amount:a==="USD"?t:Math.round(t/130*100)/100,description:s,currency:"USD",onSuccess:p,onError:g})})]})]})})]}),e.jsx("div",{className:"bg-muted/50 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(da,{className:"h-5 w-5 text-primary mt-0.5"}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-sm font-medium",children:"Secure Payment"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Your payment information is encrypted and processed securely. We never store your payment details."})]})]})})]})]})]})};function cz({onBalanceUpdate:t}){const{socket:s,connected:a}=ha(),{user:r}=_s(),[i,o]=v.useState(null),[c,u]=v.useState(!0),[f,x]=v.useState(""),[h,p]=v.useState(!1);v.useEffect(()=>{g()},[]),v.useEffect(()=>{if(!(!s||!a))return s.on("wallet_updated",N=>{o(S=>S?{...S,balance:N.balance}:null),D.success(`Wallet ${N.type}: ${N.transaction?.description}`),t&&t(N.balance)}),s.on("payment_success",N=>{o(S=>S?{...S,balance:N.balance}:null),p(!1),D.success(`Payment successful! Receipt: ${N.receipt}`),t&&t(N.balance)}),s.on("payment_failed",N=>{p(!1),D.error(`Payment failed: ${N.reason}`)}),s.on("mpesa_initiated",N=>{D.info(N.message||"Check your phone for M-Pesa prompt",{duration:1e4})}),()=>{s.off("wallet_updated"),s.off("payment_success"),s.off("payment_failed"),s.off("mpesa_initiated")}},[s,a,t]);const g=async()=>{try{const N=await Ne.get("/wallet");o(N.data)}catch(N){console.error("Error fetching wallet:",N)}finally{u(!1)}},y=async()=>{if(!f||f<=0)return D.error("Please enter a valid amount");try{p(!0);const N=await Ne.post("/mpesa/stk-push",{phone:"",amount:Number(f),accountReference:"WALLET_TOPUP",transactionDesc:"Wallet top-up via M-Pesa"});D.success(N.data.message),x("")}catch(N){D.error(N.response?.data?.error||"Failed to initiate payment"),p(!1)}},b=async(N,S="manual")=>{try{const C=await Ne.post("/wallet/deposit",{amount:Number(N),source:S,description:`Wallet deposit from ${S}`});D.success(C.data.message),await g(),t&&t(C.data.wallet.balance)}catch(C){D.error(C.response?.data?.error||"Failed to deposit")}};return c?e.jsx("div",{className:"animate-pulse space-y-4",children:e.jsx("div",{className:"h-40 bg-muted rounded-lg"})}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs(K,{className:"border-2 border-green-500/20 bg-gradient-to-br from-green-50 to-transparent dark:from-green-950/20",children:[e.jsx(xe,{children:e.jsxs(pe,{className:"flex items-center gap-2",children:[e.jsx(td,{className:"h-5 w-5 text-green-600"}),"Digital Wallet",a&&e.jsxs(De,{variant:"default",className:"gap-1 ml-auto bg-green-600 text-white border-green-600",children:[e.jsx(_a,{className:"h-3 w-3"}),"Live"]})]})}),e.jsxs(Y,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:"Available Balance"}),e.jsxs("div",{className:"text-2xl font-bold text-green-600",children:[i?.currency||"KES"," ",i?.balance?.toLocaleString()||"0.00"]}),e.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground mt-1",children:[e.jsx(da,{className:"h-3 w-3"}),"Secure"]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:"Daily Limit"}),e.jsxs("div",{className:"text-lg font-semibold",children:[i?.currency||"KES"," ",i?.dailyLimit?.toLocaleString()||"100,000"]}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:["Used: ",i?.todaySpent?.toLocaleString()||"0"]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:"Transactions"}),e.jsx("div",{className:"text-lg font-semibold",children:i?.totalTransactions||0}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"All time"})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsxs(Bt,{children:[e.jsx(wa,{asChild:!0,children:e.jsxs(R,{size:"sm",variant:"default",className:"gap-2",children:[e.jsx(g_,{className:"h-4 w-4"}),"Deposit"]})}),e.jsxs(zt,{children:[e.jsx(Ut,{children:e.jsx(Vt,{children:"Deposit Funds"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs(te,{children:["Amount (",i?.currency||"KES",")"]}),e.jsx(me,{type:"number",placeholder:"0.00",id:"deposit-amount"})]}),e.jsx(R,{className:"w-full",onClick:()=>{const N=document.getElementById("deposit-amount").value;N&&b(N)},children:"Deposit"})]})]})]}),e.jsxs(R,{size:"sm",variant:"outline",className:"gap-2",children:[e.jsx(v_,{className:"h-4 w-4"}),"Withdraw"]}),e.jsxs(R,{size:"sm",variant:"outline",className:"gap-2",children:[e.jsx(Fa,{className:"h-4 w-4"}),"Transfer"]})]})]})]}),e.jsxs(K,{className:"border-2 border-green-600/20",children:[e.jsxs(xe,{children:[e.jsxs(pe,{className:"flex items-center gap-2",children:[e.jsx(qr,{className:"h-5 w-5 text-green-600"}),"M-Pesa Quick Top-Up"]}),e.jsxs(ot,{children:["Top up using your registered phone: ",r?.phone||"Not set"]})]}),e.jsxs(Y,{children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx(me,{type:"number",placeholder:"Amount (KES)",value:f,onChange:N=>x(N.target.value),disabled:h,className:"flex-1"}),e.jsx(R,{onClick:y,disabled:h||!f,className:"gap-2",children:h?e.jsxs(e.Fragment,{children:[e.jsx(ts,{className:"h-4 w-4 animate-spin"}),"Processing"]}):e.jsxs(e.Fragment,{children:[e.jsx(qr,{className:"h-4 w-4"}),"Pay"]})})]}),e.jsxs("div",{className:"mt-3 p-3 bg-muted/50 rounded text-xs space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(us,{className:"h-3 w-3 text-green-600"}),"Uses your registered phone number"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(us,{className:"h-3 w-3 text-green-600"}),"Instant wallet credit on payment"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(us,{className:"h-3 w-3 text-green-600"}),"Real-time payment notifications"]})]})]})]})]})}const dz=Sv("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),Vu=v.forwardRef(({className:t,variant:s,...a},r)=>e.jsx("div",{ref:r,role:"alert",className:Ze(dz({variant:s}),t),...a}));Vu.displayName="Alert";const uz=v.forwardRef(({className:t,...s},a)=>e.jsx("h5",{ref:a,className:Ze("mb-1 font-medium leading-none tracking-tight",t),...s}));uz.displayName="AlertTitle";const $u=v.forwardRef(({className:t,...s},a)=>e.jsx("div",{ref:a,className:Ze("text-sm [&_p]:leading-relaxed",t),...s}));$u.displayName="AlertDescription";function mz({onSuccess:t}){const{user:s}=_s(),[a,r]=v.useState(!1),[i,o]=v.useState(!1),[c,u]=v.useState([]),[f,x]=v.useState(null),[h,p]=v.useState({recipientId:"",recipientName:"",recipientPhone:"",amount:"",paymentMethod:"wallet",description:"",category:"salary",pin:""});v.useEffect(()=>{a&&(g(),y())},[a]);const g=async()=>{try{const S=await Ne.get("/team");u(S.data||[])}catch(S){console.error("Error fetching team:",S)}},y=async()=>{try{const S=await Ne.get("/wallet");x(S.data)}catch(S){console.error("Error fetching wallet:",S)}},b=S=>{const C=c.find(k=>k._id===S);C&&p(k=>({...k,recipientId:C._id,recipientName:C.name,recipientPhone:C.phone||""}))},N=async()=>{if(!h.recipientId)return D.error("Please select a recipient");if(!h.amount||h.amount<=0)return D.error("Please enter a valid amount");if(h.paymentMethod==="wallet"&&!h.pin)return D.error("Please enter your wallet PIN");if(h.paymentMethod==="wallet"&&(!f||f.balance<h.amount))return D.error("Insufficient wallet balance");try{o(!0);let S;h.paymentMethod==="wallet"?S=await Ne.post("/wallet/transfer",{amount:Number(h.amount),recipientId:h.recipientId,description:`${h.category}: ${h.description}`,pin:h.pin}):S=await Ne.post("/mpesa/stk-push",{phone:h.recipientPhone,amount:Number(h.amount),accountReference:`PAY_${h.recipientId}`,transactionDesc:`Payment to ${h.recipientName}: ${h.description}`}),await Ne.post("/transactions",{description:`Payment to ${h.recipientName} - ${h.category}`,amount:Number(h.amount),type:"expense",category:"employee_payment",status:"completed",reference:h.recipientId,notes:h.description}),D.success(`Payment initiated successfully to ${h.recipientName}`),r(!1),p({recipientId:"",recipientName:"",recipientPhone:"",amount:"",paymentMethod:"wallet",description:"",category:"salary",pin:""}),t&&t(S.data)}catch(S){console.error("Payment error:",S),D.error(S.response?.data?.error||"Payment failed")}finally{o(!1)}};return e.jsxs(Bt,{open:a,onOpenChange:r,children:[e.jsx(wa,{asChild:!0,children:e.jsxs(R,{className:"gap-2",children:[e.jsx(Zt,{className:"h-4 w-4"}),"Pay Employee/Contractor"]})}),e.jsxs(zt,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsx(Ut,{children:e.jsxs(Vt,{className:"flex items-center gap-2",children:[e.jsx(Fa,{className:"h-5 w-5"}),"Make Payment to Team Member"]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs(Vu,{children:[e.jsx(da,{className:"h-4 w-4"}),e.jsx($u,{children:"All payments are secure, logged, and auditable. Transaction records are maintained for compliance."})]}),f&&h.paymentMethod==="wallet"&&e.jsx("div",{className:"p-3 bg-green-50 dark:bg-green-950/20 rounded-lg border border-green-200 dark:border-green-800",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Available Balance:"}),e.jsxs("span",{className:"text-lg font-semibold text-green-600",children:[f.currency," ",f.balance?.toLocaleString()]})]})}),e.jsxs("div",{children:[e.jsx(te,{children:"Select Recipient *"}),e.jsxs(Mt,{value:h.recipientId,onValueChange:b,children:[e.jsx(Lt,{children:e.jsx(Ft,{placeholder:"Choose team member"})}),e.jsx(It,{children:c.length===0?e.jsx("div",{className:"p-2 text-sm text-muted-foreground",children:"No team members found"}):c.map(S=>e.jsx(Ae,{value:S._id,children:e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsx("span",{children:S.name}),e.jsx(De,{variant:"secondary",className:"text-xs",children:S.role||"Employee"})]})},S._id))})]})]}),e.jsxs("div",{children:[e.jsx(te,{children:"Payment Method *"}),e.jsxs(Mt,{value:h.paymentMethod,onValueChange:S=>p(C=>({...C,paymentMethod:S})),children:[e.jsx(Lt,{children:e.jsx(Ft,{})}),e.jsxs(It,{children:[e.jsx(Ae,{value:"wallet",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(td,{className:"h-4 w-4"}),"From Wallet (Instant Transfer)"]})}),e.jsx(Ae,{value:"mpesa",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(qr,{className:"h-4 w-4"}),"M-Pesa Direct (to recipient phone)"]})})]})]})]}),e.jsxs("div",{children:[e.jsxs(te,{children:["Amount (",f?.currency||"KES",") *"]}),e.jsx(me,{type:"number",placeholder:"0.00",value:h.amount,onChange:S=>p(C=>({...C,amount:S.target.value}))})]}),e.jsxs("div",{children:[e.jsx(te,{children:"Payment Category *"}),e.jsxs(Mt,{value:h.category,onValueChange:S=>p(C=>({...C,category:S})),children:[e.jsx(Lt,{children:e.jsx(Ft,{})}),e.jsxs(It,{children:[e.jsx(Ae,{value:"salary",children:"Salary"}),e.jsx(Ae,{value:"bonus",children:"Bonus"}),e.jsx(Ae,{value:"commission",children:"Commission"}),e.jsx(Ae,{value:"reimbursement",children:"Reimbursement"}),e.jsx(Ae,{value:"allowance",children:"Allowance"}),e.jsx(Ae,{value:"contractor_fee",children:"Contractor Fee"})]})]})]}),e.jsxs("div",{children:[e.jsx(te,{children:"Description/Notes *"}),e.jsx(As,{placeholder:"Payment purpose, period, etc.",value:h.description,onChange:S=>p(C=>({...C,description:S.target.value})),rows:3})]}),h.paymentMethod==="wallet"&&e.jsxs("div",{children:[e.jsx(te,{children:"Wallet PIN *"}),e.jsx(me,{type:"password",placeholder:"Enter your wallet PIN",value:h.pin,onChange:S=>p(C=>({...C,pin:S.target.value})),maxLength:6}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Required for security verification"})]}),h.paymentMethod==="mpesa"&&h.recipientPhone&&e.jsxs(Vu,{children:[e.jsx(ks,{className:"h-4 w-4"}),e.jsxs($u,{children:["M-Pesa prompt will be sent to: ",e.jsx("strong",{children:h.recipientPhone})]})]}),h.amount&&h.recipientName&&e.jsxs("div",{className:"p-4 bg-muted rounded-lg space-y-2",children:[e.jsx("h4",{className:"font-semibold text-sm",children:"Payment Summary"}),e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Recipient:"}),e.jsx("span",{className:"font-medium",children:h.recipientName})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Amount:"}),e.jsxs("span",{className:"font-medium",children:[f?.currency||"KES"," ",Number(h.amount).toLocaleString()]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Method:"}),e.jsx("span",{className:"font-medium capitalize",children:h.paymentMethod})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Category:"}),e.jsx("span",{className:"font-medium capitalize",children:h.category.replace("_"," ")})]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(R,{variant:"outline",className:"flex-1",onClick:()=>r(!1),disabled:i,children:"Cancel"}),e.jsx(R,{className:"flex-1 gap-2",onClick:N,disabled:i,children:i?e.jsx(e.Fragment,{children:"Processing..."}):e.jsxs(e.Fragment,{children:[e.jsx(Fa,{className:"h-4 w-4"}),"Send Payment"]})})]})]})]})]})}const hz=()=>{const{user:t,isAuthenticated:s,loading:a}=_s(),{summary:r,transactions:i,loading:o,refreshFinancialData:c}=sE(),{socket:u,connected:f}=ha(),x=r||{totalRevenue:"KES 0",totalExpenses:"KES 0",netProfit:"KES 0",pendingInvoices:"KES 0"},h=i||[],[p,g]=v.useState(""),[y,b]=v.useState(!1),[N,S]=v.useState(!1),[C,k]=v.useState([]),[A,G]=v.useState([]),[F,E]=v.useState([]),[T,_]=v.useState({revenueGrowth:0,expenseGrowth:0,profitGrowth:0,pendingCount:0}),[P,z]=v.useState({clientName:"",clientEmail:"",amount:"",dueDate:"",description:""}),V=H=>Array.isArray(H)?H:H?.invoices||H?.items||H?.data||[],W=H=>({id:H._id||H.id,customerName:H.customerName??H.clientName??H.customer?.name??"",totalAmount:Number(H.totalAmount??H.amount??0),paymentStatus:H.paymentStatus??H.status??"pending"});v.useEffect(()=>{const H=async()=>{if(s)try{const L={Authorization:`Bearer ${localStorage.getItem("token")}`},[X,O,J]=await Promise.all([Ne.get("/invoices",{headers:L}).catch(()=>({data:[]})),Ne.get("/expenses",{headers:L}).catch(()=>({data:[]})),Ne.get("/orders",{headers:L}).catch(()=>({data:[]}))]),ie=V(X.data).map(W),be=O.data||[],Le=J.data||[];k(ie),G(be),E(Le),ae(ie,be,Le),console.log(" Financial data loaded:",{invoices:ie.length,expenses:be.length,orders:Le.length})}catch(ee){D.error("Error fetching financial data."),console.error("Error fetching financial data:",ee)}};H();const se=setInterval(H,12e4);return()=>clearInterval(se)},[s]);const q=(H,se)=>{const ee={};for(let L=11;L>=0;L--){const X=new Date;X.setMonth(X.getMonth()-L);const O=`${X.getFullYear()}-${String(X.getMonth()+1).padStart(2,"0")}`,J=X.toLocaleDateString("en-US",{month:"short",year:"2-digit"});ee[O]={name:J,revenue:0,expenses:0,profit:0}}return H.forEach(L=>{const X=new Date(L.createdAt||L.date),O=`${X.getFullYear()}-${String(X.getMonth()+1).padStart(2,"0")}`;ee[O]&&(ee[O].revenue+=Number(L.total)||0)}),se.forEach(L=>{const X=new Date(L.createdAt||L.date),O=`${X.getFullYear()}-${String(X.getMonth()+1).padStart(2,"0")}`;ee[O]&&(ee[O].expenses+=Number(L.amount)||0)}),Object.values(ee).forEach(L=>{L.profit=L.revenue-L.expenses}),Object.values(ee)},B=(H,se)=>{const ee=[],L=new Date;for(let X=29;X>=0;X--){const O=new Date(L);O.setDate(O.getDate()-X);const J=O.toISOString().split("T")[0],ie=H.filter(oe=>new Date(oe.createdAt||oe.date).toISOString().split("T")[0]===J),be=se.filter(oe=>new Date(oe.createdAt||oe.date).toISOString().split("T")[0]===J),Le=ie.reduce((oe,Pe)=>oe+(Number(Pe.total)||0),0),ve=be.reduce((oe,Pe)=>oe+(Number(Pe.amount)||0),0);ee.push({date:J,name:O.toLocaleDateString("en-US",{month:"short",day:"numeric"}),value:Le-ve,revenue:Le,expenses:ve})}return ee},ae=(H,se,ee)=>{const L=new Date,X=new Date(L.getFullYear(),L.getMonth()-1,1),O=new Date(L.getFullYear(),L.getMonth(),1),J=ee.filter(gt=>new Date(gt.createdAt)>=X&&new Date(gt.createdAt)<O).reduce((gt,bt)=>gt+(Number(bt.total)||0),0),ie=ee.filter(gt=>new Date(gt.createdAt)>=O).reduce((gt,bt)=>gt+(Number(bt.total)||0),0),be=J>0?((ie-J)/J*100).toFixed(1):0,Le=se.filter(gt=>new Date(gt.createdAt)>=X&&new Date(gt.createdAt)<O).reduce((gt,bt)=>gt+(Number(bt.amount)||0),0),ve=se.filter(gt=>new Date(gt.createdAt)>=O).reduce((gt,bt)=>gt+(Number(bt.amount)||0),0),oe=Le>0?((ve-Le)/Le*100).toFixed(1):0,Pe=J-Le,Xe=ie-ve,yt=Pe>0?((Xe-Pe)/Pe*100).toFixed(1):0,vt=H.filter(gt=>gt.paymentStatus==="pending"||gt.paymentStatus==="unpaid").length;_({revenueGrowth:Number(be),expenseGrowth:Number(oe),profitGrowth:Number(yt),pendingCount:vt})},U=async()=>{try{const H=localStorage.getItem("token"),se=await Ne.post("/expenses",{description:"New expense",amount:1e3,category:"office"},{headers:{Authorization:`Bearer ${H}`}});D.success("Expense added successfully!"),S(!1)}catch(H){D.error("Error adding expense."),console.error("Error adding expense:",H)}},Z=async()=>{const H=localStorage.getItem("token");if(!H)return D.error("Please log in first.");const{clientName:se,clientEmail:ee,amount:L,dueDate:X,description:O}=P;if(!se||!ee||!L||!X)return D.error("Please fill in all required fields.");try{const J=await Ne.post("/invoices",{customerName:se,clientEmail:ee,totalAmount:Number(L),dueDate:X,description:O},{headers:{Authorization:`Bearer ${H}`}});D.success("Invoice created successfully!"),b(!1),z({clientName:"",clientEmail:"",amount:"",dueDate:"",description:""});const ie=W(J.data);k(be=>[ie,...be])}catch(J){D.error(J.response?.data?.error||"Error creating invoice."),console.error("Error creating invoice:",J)}};if(a||o)return e.jsx("div",{children:"Loading..."});if(!s)return e.jsx("div",{children:"Please log in to manage financial data."});const de=H=>{switch(H){case"paid":case"completed":return"bg-success text-success-foreground";case"pending":return"bg-warning text-warning-foreground";case"overdue":return"bg-destructive text-destructive-foreground";default:return"bg-muted text-muted-foreground"}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Financial Management"}),e.jsx("p",{className:"text-muted-foreground",children:"Track wallet, payments, income, expenses, and manage invoices"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(Bt,{open:N,onOpenChange:S,children:[e.jsx(wa,{asChild:!0,children:e.jsxs(R,{variant:"outline",className:"gap-2",children:[e.jsx(og,{className:"h-4 w-4"}),"Add Expense"]})}),e.jsxs(zt,{children:[e.jsx(Ut,{children:e.jsx(Vt,{children:"Record New Expense"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(te,{htmlFor:"expense-description",children:"Description"}),e.jsx(me,{id:"expense-description",placeholder:"Enter expense description"})]}),e.jsxs("div",{children:[e.jsx(te,{htmlFor:"expense-amount",children:"Amount (KES)"}),e.jsx(me,{id:"expense-amount",type:"number",placeholder:"0.00"})]}),e.jsxs("div",{children:[e.jsx(te,{htmlFor:"expense-category",children:"Category"}),e.jsxs(Mt,{children:[e.jsx(Lt,{children:e.jsx(Ft,{placeholder:"Select category"})}),e.jsxs(It,{children:[e.jsx(Ae,{value:"office",children:"Office Supplies"}),e.jsx(Ae,{value:"marketing",children:"Marketing"}),e.jsx(Ae,{value:"transport",children:"Transport"}),e.jsx(Ae,{value:"utilities",children:"Utilities"}),e.jsx(Ae,{value:"other",children:"Other"})]})]})]}),e.jsxs("div",{children:[e.jsx(te,{htmlFor:"expense-notes",children:"Notes"}),e.jsx(As,{id:"expense-notes",placeholder:"Additional notes (optional)"})]}),e.jsx(R,{className:"w-full",onClick:U,children:"Record Expense"})]})]})]}),e.jsxs(Bt,{open:y,onOpenChange:b,children:[e.jsx(wa,{asChild:!0,children:e.jsxs(R,{className:"gap-2",children:[e.jsx(Gs,{className:"h-4 w-4"}),"Create Invoice"]})}),e.jsxs(zt,{children:[e.jsx(Ut,{children:e.jsx(Vt,{children:"Create New Invoice"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(te,{htmlFor:"client-name",children:"Client Name"}),e.jsx(me,{id:"client-name",placeholder:"Enter client name",value:P.clientName,onChange:H=>z({...P,clientName:H.target.value})})]}),e.jsxs("div",{children:[e.jsx(te,{htmlFor:"client-email",children:"Client Email"}),e.jsx(me,{id:"client-email",type:"email",placeholder:"client@example.com",value:P.clientEmail,onChange:H=>z({...P,clientEmail:H.target.value})})]}),e.jsxs("div",{children:[e.jsx(te,{htmlFor:"invoice-amount",children:"Amount (KES)"}),e.jsx(me,{id:"invoice-amount",type:"number",placeholder:"0.00",value:P.amount,onChange:H=>z({...P,amount:H.target.value})})]}),e.jsxs("div",{children:[e.jsx(te,{htmlFor:"due-date",children:"Due Date"}),e.jsx(me,{id:"due-date",type:"date",value:P.dueDate,onChange:H=>z({...P,dueDate:H.target.value})})]}),e.jsxs("div",{children:[e.jsx(te,{htmlFor:"invoice-description",children:"Description"}),e.jsx(As,{id:"invoice-description",placeholder:"Invoice description or items",value:P.description,onChange:H=>z({...P,description:H.target.value})})]}),e.jsx(R,{className:"w-full",onClick:Z,children:"Create Invoice"})]})]})]})]})]}),e.jsx(cz,{onBalanceUpdate:c}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsxs(K,{children:[e.jsxs(xe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(pe,{className:"text-sm font-medium",children:"Total Revenue"}),e.jsx(Is,{className:"h-4 w-4 text-success"})]}),e.jsxs(Y,{children:[e.jsx("div",{className:"text-2xl font-bold text-success",children:x.totalRevenue}),e.jsxs("p",{className:`text-xs ${T.revenueGrowth>=0?"text-green-600":"text-red-600"}`,children:[T.revenueGrowth>=0?"+":"",T.revenueGrowth,"% from last month"]})]})]}),e.jsxs(K,{children:[e.jsxs(xe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(pe,{className:"text-sm font-medium",children:"Total Expenses"}),e.jsx(fi,{className:"h-4 w-4 text-destructive"})]}),e.jsxs(Y,{children:[e.jsx("div",{className:"text-2xl font-bold text-destructive",children:x.totalExpenses}),e.jsxs("p",{className:`text-xs ${T.expenseGrowth>=0?"text-red-600":"text-green-600"}`,children:[T.expenseGrowth>=0?"+":"",T.expenseGrowth,"% from last month"]})]})]}),e.jsxs(K,{children:[e.jsxs(xe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(pe,{className:"text-sm font-medium",children:"Net Profit"}),e.jsx(ra,{className:"h-4 w-4 text-primary"})]}),e.jsxs(Y,{children:[e.jsx("div",{className:"text-2xl font-bold text-primary",children:x.netProfit}),e.jsxs("p",{className:`text-xs ${T.profitGrowth>=0?"text-green-600":"text-red-600"}`,children:[T.profitGrowth>=0?"+":"",T.profitGrowth,"% from last month"]})]})]}),e.jsxs(K,{children:[e.jsxs(xe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(pe,{className:"text-sm font-medium",children:"Pending Invoices"}),e.jsx(pa,{className:"h-4 w-4 text-warning"})]}),e.jsxs(Y,{children:[e.jsx("div",{className:"text-2xl font-bold text-warning",children:x.pendingInvoices}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[T.pendingCount," invoice",T.pendingCount!==1?"s":""," pending"]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx(rs,{title:"Revenue vs Expenses",description:"Last 12 months from real orders and expenses",type:"composed",data:q(F,A),height:350,autoRefresh:!0,refreshInterval:12e4}),e.jsx(rs,{title:"Profit Trends",description:"Net profit calculated from revenue - expenses",type:"area",data:q(F,A).map(H=>({name:H.name,value:H.profit,profit:H.profit})),height:350,autoRefresh:!0,refreshInterval:12e4})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx(rs,{title:"Expense Categories",description:"Breakdown of business expenses from real data",type:"pie",data:(()=>{const H={};return A.forEach(se=>{const ee=se.category||"Other";H[ee]=(H[ee]||0)+(Number(se.amount)||0)}),Object.entries(H).length>0?Object.entries(H).map(([se,ee])=>({name:se,value:ee})):[{name:"No expenses yet",value:1}]})(),height:300,showControls:!1}),e.jsx(rs,{title:"Cash Flow",description:"Last 30 days: Revenue - Expenses",type:"line",data:B(F,A),height:300,autoRefresh:!0,refreshInterval:12e4}),e.jsx(rs,{title:"Invoice Status",description:"Payment status distribution from real invoices",type:"bar",data:(()=>{const H={paid:0,pending:0,overdue:0};return C.forEach(se=>{const ee=se.paymentStatus?.toLowerCase()||"pending";ee==="paid"||ee==="completed"?H.paid++:ee==="overdue"?H.overdue++:H.pending++}),C.length>0?[{name:"Paid",value:H.paid},{name:"Pending",value:H.pending},{name:"Overdue",value:H.overdue}]:[{name:"No invoices yet",value:1}]})(),height:300,showControls:!1})]}),e.jsxs(K,{children:[e.jsxs(xe,{children:[e.jsxs(pe,{className:"flex items-center gap-2",children:[e.jsx(Zt,{className:"h-5 w-5"}),"Pay Employees & Contractors"]}),e.jsx(ot,{children:"Secure payments to team members via wallet or direct transfer"})]}),e.jsx(Y,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Make secure payments to your team members. All transactions are logged and tracked for audit purposes."}),e.jsx(mz,{onSuccess:c})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(K,{children:[e.jsx(xe,{children:e.jsxs(pe,{className:"flex items-center gap-2",children:[e.jsx(pa,{className:"h-5 w-5"}),"Recent Transactions"]})}),e.jsx(Y,{children:e.jsx("div",{className:"space-y-4",children:Array.isArray(h)&&h.length>0?h.map(H=>e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-foreground",children:H.description}),e.jsx("p",{className:"text-sm text-muted-foreground",children:H.date})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:`font-semibold ${H.type==="income"?"text-success":"text-destructive"}`,children:[H.type==="income"?"+":"-",H.amount]}),e.jsx(De,{className:de(H.status),children:H.status})]})]},H.id)):e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{className:"text-muted-foreground",children:"No recent transactions found"})})})})]}),e.jsxs(K,{children:[e.jsx(xe,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(pe,{className:"flex items-center gap-2",children:[e.jsx(ba,{className:"h-5 w-5"}),"Invoice Management"]}),e.jsxs(R,{variant:"outline",size:"sm",className:"gap-2",children:[e.jsx(Ma,{className:"h-4 w-4"}),"Export"]})]})}),e.jsx(Y,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(oa,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),e.jsx(me,{placeholder:"Search invoices...",value:p,onChange:H=>g(H.target.value),className:"pl-8"})]}),e.jsxs(Xn,{children:[e.jsx(Qn,{children:e.jsxs(xa,{children:[e.jsx(St,{children:"Invoice"}),e.jsx(St,{children:"Client"}),e.jsx(St,{children:"Amount"}),e.jsx(St,{children:"Status"})]})}),e.jsx(Zn,{children:C.length===0?e.jsx(xa,{children:e.jsx(Nt,{colSpan:4,className:"text-center text-muted-foreground",children:"No invoices found."})}):C.map(H=>e.jsxs(xa,{children:[e.jsx(Nt,{className:"font-medium",children:H.id}),e.jsx(Nt,{children:H.customerName}),e.jsx(Nt,{children:`KES ${Number(H.totalAmount).toLocaleString()}`}),e.jsx(Nt,{children:e.jsx(De,{className:de(H.paymentStatus),children:H.paymentStatus})})]},H.id))})]})]})})]})]}),e.jsxs("div",{className:"mt-8 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Financial Analytics"}),e.jsx(De,{variant:"secondary",children:"Live Data"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx(rs,{title:"Revenue vs Expenses",description:"Monthly comparison from real data",defaultType:"bar",data:q(F,A),height:350,autoRefresh:!0,refreshInterval:12e4}),e.jsx(rs,{title:"Profit Trends",description:"Net profit over time",defaultType:"line",data:q(F,A).map(H=>({name:H.name,value:H.profit})),height:350,autoRefresh:!0,refreshInterval:12e4})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx(rs,{title:"Expense Categories",description:"Real expense breakdown",defaultType:"pie",data:(()=>{const H={};return A.forEach(se=>{const ee=se.category||"Other";H[ee]=(H[ee]||0)+(Number(se.amount)||0)}),Object.entries(H).length>0?Object.entries(H).map(([se,ee])=>({name:se,value:ee})):[{name:"No data",value:1}]})(),height:350,autoRefresh:!1,refreshInterval:12e4}),e.jsx(rs,{title:"Cash Flow Analysis",description:"Daily cash flow from operations",defaultType:"area",data:B(F,A),height:350,autoRefresh:!0,refreshInterval:12e4})]}),e.jsx("div",{className:"w-full",children:e.jsx(rs,{title:"Invoice Status Overview",description:"Invoice payment status distribution",defaultType:"composed",data:(()=>{const H={paid:0,pending:0,overdue:0};return C.forEach(se=>{const ee=se.paymentStatus?.toLowerCase()||"pending";ee==="paid"||ee==="completed"?H.paid++:ee==="overdue"?H.overdue++:H.pending++}),[{name:"Paid",value:H.paid},{name:"Pending",value:H.pending},{name:"Overdue",value:H.overdue}]})(),height:400,autoRefresh:!0,refreshInterval:12e4})})]})]})},Cr=v.forwardRef(({className:t,value:s,...a},r)=>e.jsx("div",{ref:r,className:Ze("relative h-4 w-full overflow-hidden rounded-full bg-gray-200",t),...a,children:e.jsx("div",{className:"h-full bg-blue-600 transition-all duration-300 ease-in-out",style:{width:`${Math.min(100,Math.max(0,s||0))}%`}})}));Cr.displayName="Progress";const Qw=[{id:"starter",name:"Starter",price:0,billing:"Free Forever",description:"Perfect for getting started",features:["100 Products","5 Team Members","Basic Inventory","Email Support","Standard Features"],limits:{products:100,teamMembers:5},badge:"Free",badgeColor:"bg-green-600"},{id:"professional",name:"Professional",price:2999,billing:"KES 2,999/month",description:"For growing businesses",features:["Unlimited Products","Unlimited Team Members","Advanced Inventory","Priority Support","Advanced Analytics","API Access","Custom Reports"],limits:{products:-1,teamMembers:-1},badge:"Popular",badgeColor:"bg-blue-600",popular:!0},{id:"enterprise",name:"Enterprise",price:"custom",billing:"Custom Pricing",description:"For large organizations",features:["Everything in Professional","Dedicated Support","Custom Features","SLA Guarantee","Training & Onboarding","White Label Options","Advanced Security"],limits:{products:-1,teamMembers:-1},badge:"Enterprise",badgeColor:"bg-purple-600"}];function fz(){const{user:t}=_s(),[s,a]=v.useState(null),[r,i]=v.useState(null),[o,c]=v.useState(!0);v.useEffect(()=>{u()},[]);const u=async()=>{try{const[p,g]=await Promise.all([Ne.get("/subscriptions/current"),Ne.get("/subscriptions/usage")]);a(p.data.subscription),i(g.data)}catch(p){console.error("Error fetching subscription:",p),D.error("Failed to load subscription data")}finally{c(!1)}},f=async p=>{if(p==="starter"){try{await Ne.post("/subscriptions/activate",{planId:"starter"}),D.success("Starter plan activated!"),u()}catch{D.error("Failed to activate plan")}return}if(p==="enterprise"){D.info("Contact sales for Enterprise plan");return}D.info("Subscription payment coming soon")},x=async()=>{if(confirm("Are you sure you want to cancel your subscription?"))try{await Ne.post("/subscriptions/cancel"),D.success("Subscription cancelled. Access continues until end of billing period."),u()}catch{D.error("Failed to cancel subscription")}};if(o)return e.jsx("div",{className:"flex items-center justify-center h-screen",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})});const h=Qw.find(p=>p.id===(s?.plan||"starter"));return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Subscription Management"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage your plan and billing"})]}),e.jsxs(K,{className:"border-2 border-primary/20",children:[e.jsx(xe,{children:e.jsxs(pe,{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(da,{className:"h-5 w-5"}),"Current Plan"]}),e.jsx(De,{className:`${h?.badgeColor} text-white`,children:h?.badge})]})}),e.jsxs(Y,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:"Plan"}),e.jsx("div",{className:"text-2xl font-bold",children:h?.name})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:"Status"}),e.jsx(De,{variant:s?.status==="active"?"default":"destructive",children:s?.status||"Active"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:"Billing"}),e.jsx("div",{className:"text-lg font-semibold",children:h?.billing})]})]}),s?.nextBilling&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[e.jsx(gs,{className:"h-4 w-4"}),"Next billing: ",new Date(s.nextBilling).toLocaleDateString()]}),s?.cancelAtPeriodEnd&&e.jsxs(Vu,{variant:"destructive",children:[e.jsx(ks,{className:"h-4 w-4"}),e.jsxs($u,{children:["Your subscription will end on ",new Date(s.nextBilling).toLocaleDateString()]})]})]})]}),r&&e.jsxs(K,{children:[e.jsxs(xe,{children:[e.jsx(pe,{children:"Usage Statistics"}),e.jsx(ot,{children:"Current usage vs. plan limits"})]}),e.jsxs(Y,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(Yt,{className:"h-4 w-4"}),"Products"]}),e.jsxs("span",{className:"font-medium",children:[r.usage?.products||0,r.limits?.products!==-1?` / ${r.limits?.products}`:" (Unlimited)"]})]}),r.limits?.products!==-1&&e.jsx(Cr,{value:r.usage?.products/r.limits?.products*100,className:"h-2"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(Zt,{className:"h-4 w-4"}),"Team Members"]}),e.jsxs("span",{className:"font-medium",children:[r.usage?.teamMembers||0,r.limits?.teamMembers!==-1?` / ${r.limits?.teamMembers}`:" (Unlimited)"]})]}),r.limits?.teamMembers!==-1&&e.jsx(Cr,{value:r.usage?.teamMembers/r.limits?.teamMembers*100,className:"h-2"})]})]})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Available Plans"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:Qw.map(p=>e.jsxs(K,{className:`relative ${p.popular?"border-2 border-primary shadow-lg":""} ${s?.plan===p.id?"bg-muted/50":""}`,children:[p.popular&&e.jsx("div",{className:"absolute -top-3 left-1/2 -translate-x-1/2",children:e.jsx(De,{className:"bg-primary text-primary-foreground",children:"Most Popular"})}),e.jsxs(xe,{children:[e.jsxs(pe,{className:"flex items-center justify-between",children:[e.jsx("span",{children:p.name}),s?.plan===p.id&&e.jsx(De,{variant:"secondary",children:"Current"})]}),e.jsx(ot,{children:p.description})]}),e.jsxs(Y,{className:"space-y-4",children:[e.jsx("div",{className:"text-center py-4",children:typeof p.price=="number"?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-4xl font-bold",children:["KES ",p.price.toLocaleString()]}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"per month"})]}):e.jsx("div",{className:"text-2xl font-bold",children:p.billing})}),e.jsx("div",{className:"space-y-2",children:p.features.map((g,y)=>e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(yi,{className:"h-4 w-4 text-green-600 flex-shrink-0"}),e.jsx("span",{children:g})]},y))}),e.jsx(R,{className:"w-full",variant:s?.plan===p.id?"outline":"default",disabled:s?.plan===p.id,onClick:()=>f(p.id),children:s?.plan===p.id?"Current Plan":p.id==="enterprise"?"Contact Sales":`Upgrade to ${p.name}`})]})]},p.id))})]}),s?.plan!=="starter"&&e.jsxs(K,{children:[e.jsx(xe,{children:e.jsx(pe,{children:"Manage Subscription"})}),e.jsxs(Y,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(pa,{className:"h-5 w-5 text-muted-foreground"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium",children:"Payment Method"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Manage your payment methods and billing details"})]}),e.jsx(R,{variant:"outline",size:"sm",children:"Update"})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(ks,{className:"h-5 w-5 text-destructive"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium",children:"Cancel Subscription"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"You will continue to have access until the end of your billing period"})]}),e.jsx(R,{variant:"destructive",size:"sm",onClick:x,children:"Cancel Plan"})]})]})]})]})}const xz=()=>{const[t,s]=v.useState([]),[a,r]=v.useState(!1),i=[{id:1,type:"trend",priority:"high",title:"Sales Spike Detected",description:"Your sales have increased by 23% in the last 24 hours compared to the same period last week.",icon:Is,color:"text-green-600",bgColor:"bg-green-50",recommendation:"Consider increasing inventory for top-selling items.",timestamp:new Date(Date.now()-7200*1e3)},{id:2,type:"alert",priority:"medium",title:"Low Stock Warning",description:"5 products are running low on inventory and may need restocking soon.",icon:Fr,color:"text-orange-600",bgColor:"bg-orange-50",recommendation:"Review inventory levels and place orders for affected items.",timestamp:new Date(Date.now()-14400*1e3)},{id:3,type:"opportunity",priority:"medium",title:"Customer Behavior Pattern",description:"Customers who buy Product A are 67% more likely to purchase Product B within 7 days.",icon:Ru,color:"text-blue-600",bgColor:"bg-blue-50",recommendation:"Create a bundle offer or cross-selling campaign for these products.",timestamp:new Date(Date.now()-360*60*1e3)},{id:4,type:"performance",priority:"low",title:"Peak Hours Identified",description:"Your busiest hours are between 2-4 PM and 7-9 PM on weekdays.",icon:er,color:"text-purple-600",bgColor:"bg-purple-50",recommendation:"Schedule staff accordingly and consider targeted promotions during these hours.",timestamp:new Date(Date.now()-480*60*1e3)}],o=()=>{r(!0),setTimeout(()=>{s(i),r(!1)},1e3)};v.useEffect(()=>{o()},[]);const c=f=>{switch(f){case"high":return"bg-red-100 text-red-800";case"medium":return"bg-yellow-100 text-yellow-800";case"low":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}},u=f=>{const h=new Date-f,p=Math.floor(h/(1e3*60*60));return p<1?`${Math.floor(h/6e4)} minutes ago`:p<24?`${p} hours ago`:`${Math.floor(p/24)} days ago`};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"AI Insights"}),e.jsx("p",{className:"text-gray-600",children:"Real-time business intelligence and recommendations"})]}),e.jsxs(R,{onClick:o,disabled:a,variant:"outline",size:"sm",children:[e.jsx(cs,{className:`h-4 w-4 mr-2 ${a?"animate-spin":""}`}),"Refresh"]})]}),e.jsx("div",{className:"grid gap-4",children:a?e.jsxs("div",{className:"flex items-center justify-center py-12",children:[e.jsx(cs,{className:"h-8 w-8 animate-spin text-gray-400"}),e.jsx("span",{className:"ml-2 text-gray-600",children:"Loading insights..."})]}):t.map(f=>{const x=f.icon;return e.jsxs(K,{className:"hover:shadow-md transition-shadow",children:[e.jsx(xe,{className:"pb-3",children:e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:`p-2 rounded-lg ${f.bgColor}`,children:e.jsx(x,{className:`h-5 w-5 ${f.color}`})}),e.jsxs("div",{children:[e.jsx(pe,{className:"text-lg",children:f.title}),e.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[e.jsx(De,{className:c(f.priority),children:f.priority.toUpperCase()}),e.jsx("span",{className:"text-sm text-gray-500",children:u(f.timestamp)})]})]})]})})}),e.jsxs(Y,{children:[e.jsx(ot,{className:"text-base mb-3",children:f.description}),e.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg",children:[e.jsx("p",{className:"text-sm font-medium text-gray-700 mb-1",children:" Recommendation:"}),e.jsx("p",{className:"text-sm text-gray-600",children:f.recommendation})]})]})]},f.id)})}),!a&&t.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Ru,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No insights available"}),e.jsx("p",{className:"text-gray-600",children:"Check back later for AI-powered business insights."})]})]})},pz=()=>{const{user:t,isAuthenticated:s,loading:a}=_s(),{socket:r,connected:i}=ha(),[o,c]=v.useState([]),[u,f]=v.useState([]),[x,h]=v.useState({salesTrend:"neutral",customerSatisfaction:0,inventoryOptimization:0,revenueGrowth:0}),[p,g]=v.useState({orders:[],products:[],transactions:[],salesData:[],customerData:[]}),[y,b]=v.useState(!0),[N,S]=v.useState(null);v.useEffect(()=>{const T=async()=>{if(s){b(!0),S(null);try{const z={Authorization:`Bearer ${localStorage.getItem("token")}`},[V,W,q]=await Promise.all([Ne.get("/orders",{headers:z}).catch(()=>({data:[]})),Ne.get("/products",{headers:z}).catch(()=>({data:[]})),Ne.get("/transactions",{headers:z}).catch(()=>({data:[]}))]);console.log(" Real data loaded:",{orders:V.data.length,products:W.data.length,transactions:q.data.length}),g({orders:V.data||[],products:W.data||[],transactions:q.data||[],salesData:C(V.data||[]),customerData:k(V.data||[])}),A(V.data,W.data,q.data)}catch(P){console.error(" Error fetching real data:",P),S(P.message),D.error("Failed to load AI insights data")}finally{b(!1)}}};T(),r&&i&&r.on("ai_insights_updated",P=>{console.log(" AI insights updated via socket:",P),P.insights&&c(z=>[...P.insights,...z].slice(0,10)),P.recommendations&&f(P.recommendations),D.success("AI insights updated!")});const _=setInterval(T,12e4);return()=>clearInterval(_)},[s]);const C=T=>{const _=[],P=new Date;for(let z=29;z>=0;z--){const V=new Date(P);V.setDate(V.getDate()-z);const W=V.toISOString().split("T")[0],q=T.filter(ae=>new Date(ae.date||ae.createdAt).toISOString().split("T")[0]===W),B=q.reduce((ae,U)=>ae+(Number(U.total)||0),0);_.push({date:W,name:V.toLocaleDateString("en-US",{month:"short",day:"numeric"}),value:B,orders:q.length,customers:new Set(q.map(ae=>ae.customer?.email)).size})}return _},k=T=>{const _=Array(24).fill(0).map((P,z)=>({hour:z,name:`${z}:00`,value:0,orders:0}));return T.forEach(P=>{const V=new Date(P.date||P.createdAt).getHours();_[V].value+=Number(P.total)||0,_[V].orders+=1}),_},A=(T,_,P)=>{const z=new Date,V=new Date(z.getFullYear(),z.getMonth()-1,1),W=new Date(z.getFullYear(),z.getMonth(),1),q=T.filter(O=>{const J=new Date(O.date||O.createdAt);return J>=V&&J<W}),B=T.filter(O=>new Date(O.date||O.createdAt)>=W),ae=q.reduce((O,J)=>O+(Number(J.total)||0),0),U=B.reduce((O,J)=>O+(Number(J.total)||0),0),Z=ae>0?((U-ae)/ae*100).toFixed(1):0,de=_.filter(O=>(O.stockQuantity||0)<=(O.reorderLevel||5)),H={};T.forEach(O=>{const J=new Date(O.date||O.createdAt).getHours();H[J]=(H[J]||0)+1});const se=Object.entries(H).sort((O,J)=>J[1]-O[1]).slice(0,2).map(([O])=>O),ee=[{id:1,type:"sales",title:"Sales Performance Analysis",description:`Your sales have ${Z>=0?"increased":"decreased"} by ${Math.abs(Z)}% this month compared to last month (${B.length} orders vs ${q.length}).`,confidence:95,impact:Math.abs(Z)>20?"high":"medium",trend:Z>=0?"up":"down"},{id:2,type:"inventory",title:"Inventory Optimization",description:de.length>0?`${de.length} products are running low on stock and need immediate restocking.`:"All products are adequately stocked. Inventory levels are optimal.",confidence:92,impact:de.length>5?"high":de.length>0?"medium":"low",trend:de.length>0?"warning":"neutral"},{id:3,type:"customer",title:"Customer Behavior Pattern",description:se.length>0?`Peak sales hours are between ${se[0]}:00-${se[1]||se[0]+2}:00. Consider staffing optimization during these hours.`:"Analyzing customer patterns to identify peak sales periods.",confidence:88,impact:"medium",trend:"neutral"}],L=[];Z>15&&L.push({id:1,title:"Increase Marketing Budget",description:`With ${Z}% growth, increasing marketing spend by 20% could boost revenue further.`,priority:"high",category:"marketing"}),de.length>0&&L.push({id:2,title:"Restock Critical Items",description:`${de.length} products need immediate restocking: ${de.slice(0,3).map(O=>O.name).join(", ")}.`,priority:"high",category:"inventory"});const X=_.map(O=>{const J=T.filter(ie=>ie.items?.some(be=>be.product===O._id||be.name===O.name));return{...O,orderCount:J.length}}).sort((O,J)=>O.orderCount-J.orderCount);if(X.length>0&&X[0].orderCount===0){const O=X.filter(J=>J.orderCount===0).length;L.push({id:3,title:"Optimize Product Pricing",description:`${O} products have no recent sales. Consider price adjustments or promotions.`,priority:"medium",category:"pricing"})}h({salesTrend:Z>=0?"up":"down",customerSatisfaction:T.length>0?85:70,inventoryOptimization:_.length>0?((_.length-de.length)/_.length*100).toFixed(0):78,revenueGrowth:parseFloat(Z)}),c(ee),f(L.length>0?L:[{id:1,title:"Continue Current Strategy",description:"Your business is performing well. Maintain current operations.",priority:"low",category:"general"}])};if(a)return e.jsx("div",{children:"Loading..."});if(!s)return e.jsx("div",{children:"Please log in to view AI insights."});const G=T=>{switch(T){case"sales":return er;case"inventory":return vi;case"customer":return La;default:return bo}},F=T=>{switch(T){case"up":return Is;case"down":return fi;case"warning":return Fr;default:return us}},E=T=>{switch(T){case"high":return"bg-red-100 text-red-800 border-red-200";case"medium":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"low":return"bg-green-100 text-green-800 border-green-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"AI Insights"}),e.jsx("p",{className:"text-muted-foreground",children:"AI-powered analytics and recommendations for your business"})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs(R,{variant:"outline",onClick:()=>{window.location.href="/dashboard/analytics",D.success("Opening detailed analytics reports...")},children:[e.jsx(ca,{className:"mr-2 h-4 w-4"}),"View Reports"]}),e.jsxs(R,{className:"bg-green-500 cursor-pointer hover:bg-green-400",disabled:y,onClick:async()=>{D.info("Analyzing your business data...",{duration:2e3});try{const _={Authorization:`Bearer ${localStorage.getItem("token")}`},[P,z]=await Promise.all([Ne.get("/orders",{headers:_}),Ne.get("/products",{headers:_})]),V=P.data||[],W=z.data||[],q=[],B={};V.forEach(oe=>{oe.items?.forEach(Pe=>{const Xe=Pe.product||Pe.name;B[Xe]=(B[Xe]||0)+(Pe.quantity||1)})});const ae=Object.entries(B).sort((oe,Pe)=>Pe[1]-oe[1]).slice(0,3);if(ae.length>0){const oe=ae.map(([Pe,Xe])=>W.find(vt=>vt._id===Pe||vt.name===Pe)?.name||"Unknown");q.push({id:Date.now()+1,type:"sales",title:"Top Performing Products",description:`Your best sellers are: ${oe.join(", ")}. Focus marketing efforts on these products.`,confidence:96,impact:"high",trend:"up"})}const U=V.filter(oe=>{const Pe=new Date(oe.date||oe.createdAt);return(new Date-Pe)/(1e3*60*60*24)<=7}),Z=V.filter(oe=>{const Pe=new Date(oe.date||oe.createdAt),Xe=(new Date-Pe)/(1e3*60*60*24);return Xe>7&&Xe<=14}),de=U.reduce((oe,Pe)=>oe+(Number(Pe.total)||0),0),H=Z.reduce((oe,Pe)=>oe+(Number(Pe.total)||0),0),se=H>0?((de-H)/H*100).toFixed(1):0;q.push({id:Date.now()+2,type:"sales",title:"Revenue Velocity",description:`Revenue ${se>=0?"accelerated":"decelerated"} by ${Math.abs(se)}% in the last 7 days. ${se>=10?"Excellent momentum!":se<0?"Consider promotional campaigns.":"Steady performance."}`,confidence:93,impact:Math.abs(se)>15?"high":"medium",trend:se>=0?"up":"down"});const ee={};V.forEach(oe=>{const Pe=oe.customer?.email;Pe&&(ee[Pe]=(ee[Pe]||0)+1)});const L=Object.values(ee).filter(oe=>oe>1).length,X=Object.keys(ee).length,O=X>0?(L/X*100).toFixed(1):0;q.push({id:Date.now()+3,type:"customer",title:"Customer Retention Analysis",description:`${O}% of customers are repeat buyers (${L} out of ${X}). ${O>30?"Strong loyalty!":O>15?"Good retention.":"Focus on loyalty programs."}`,confidence:91,impact:"medium",trend:O>25?"up":"neutral"});const ie=W.map(oe=>{const Pe=Object.entries(B).find(([Xe])=>Xe===oe._id||Xe===oe.name);return{...oe,salesCount:Pe?Pe[1]:0,turnoverRate:oe.stockQuantity>0?(Pe?.[1]||0)/oe.stockQuantity:0}}).sort((oe,Pe)=>Pe.turnoverRate-oe.turnoverRate).filter(oe=>oe.salesCount===0&&oe.stockQuantity>0).length;ie>0&&q.push({id:Date.now()+4,type:"inventory",title:"Inventory Turnover Alert",description:`${ie} products have no sales activity. Consider discounts or bundling to improve turnover.`,confidence:89,impact:ie>5?"high":"medium",trend:"warning"});const be=V.length>0?V.reduce((oe,Pe)=>oe+(Number(Pe.total)||0),0)/V.length:0,Le=U.length>0?U.reduce((oe,Pe)=>oe+(Number(Pe.total)||0),0)/U.length:0,ve=be>0?((Le-be)/be*100).toFixed(1):0;q.push({id:Date.now()+5,type:"sales",title:"Average Order Value Trend",description:`Recent avg order value is $${Le.toFixed(2)} (${ve>=0?"+":""}${ve}% vs overall avg of $${be.toFixed(2)}). ${ve>10?"Customers are spending more!":ve<-10?"Consider upselling strategies.":"Stable spending patterns."}`,confidence:90,impact:Math.abs(ve)>15?"high":"medium",trend:ve>=0?"up":"down"}),c([...o,...q]),D.success(`Generated ${q.length} new AI insights!`,{description:"Advanced analysis complete"})}catch(T){console.error("Error generating insights:",T),D.error("Failed to generate insights. Please try again.")}},children:[e.jsx(_a,{className:"mr-2 h-4 w-4"}),y?"Loading...":"Generate Insights"]})]})]}),e.jsxs("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-4",children:[e.jsxs(K,{children:[e.jsxs(xe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(pe,{className:"text-sm font-medium",children:"Sales Trend"}),e.jsx(Is,{className:"h-4 w-4 text-green-600"})]}),e.jsxs(Y,{children:[e.jsxs("div",{className:"text-2xl font-bold text-green-600",children:["+",x.revenueGrowth,"%"]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Revenue growth this month"})]})]}),e.jsxs(K,{children:[e.jsxs(xe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(pe,{className:"text-sm font-medium",children:"Customer Satisfaction"}),e.jsx(La,{className:"h-4 w-4 text-blue-600"})]}),e.jsxs(Y,{children:[e.jsxs("div",{className:"text-2xl font-bold text-blue-600",children:[x.customerSatisfaction,"%"]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Based on feedback analysis"})]})]}),e.jsxs(K,{children:[e.jsxs(xe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(pe,{className:"text-sm font-medium",children:"Inventory Optimization"}),e.jsx(vi,{className:"h-4 w-4 text-orange-600"})]}),e.jsxs(Y,{children:[e.jsxs("div",{className:"text-2xl font-bold text-orange-600",children:[x.inventoryOptimization,"%"]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Efficiency score"})]})]}),e.jsxs(K,{children:[e.jsxs(xe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(pe,{className:"text-sm font-medium",children:"AI Confidence"}),e.jsx(bo,{className:"h-4 w-4 text-purple-600"})]}),e.jsxs(Y,{children:[e.jsx("div",{className:"text-2xl font-bold text-purple-600",children:"89%"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Average prediction accuracy"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx(rs,{title:"Predictive Sales Trends",description:"Real-time sales data and forecasting",type:"area",data:p.salesData.length>0?p.salesData:[{name:"Loading...",value:0}],height:350,autoRefresh:!0,refreshInterval:12e4}),e.jsx(rs,{title:"Customer Behavior Analysis",description:"Hourly sales patterns from actual orders",type:"line",data:p.customerData.length>0?p.customerData:[{name:"Loading...",value:0}],height:350,autoRefresh:!0,refreshInterval:12e4})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx(rs,{title:"Market Opportunities",description:"Monthly revenue trends",type:"bar",data:p.salesData.length>0?p.salesData.slice(-12):[{name:"Loading...",value:0}],height:300}),e.jsx(rs,{title:"Risk Assessment",description:"Business risk analysis by AI",type:"pie",data:[{name:"Low Risk",value:60},{name:"Medium Risk",value:30},{name:"High Risk",value:10}],height:300,showControls:!1}),e.jsx(rs,{title:"Performance Optimization",description:"AI-suggested improvements",type:"composed",data:p.salesData.length>0?p.salesData.slice(-20):[{name:"Loading...",value:0}],height:300})]}),e.jsxs("div",{className:"grid gap-6 lg:grid-cols-2",children:[e.jsxs(K,{children:[e.jsxs(xe,{children:[e.jsxs(pe,{className:"flex items-center gap-2",children:[e.jsx(bo,{className:"h-5 w-5"}),"AI Insights"]}),e.jsx(ot,{children:"Data-driven insights about your business performance"})]}),e.jsx(Y,{children:e.jsx("div",{className:"space-y-4",children:o.map(T=>{const _=G(T.type),P=F(T.trend);return e.jsxs("div",{className:"p-4 border rounded-lg hover:bg-gray-50 transition-colors",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(_,{className:"h-5 w-5 text-blue-600"}),e.jsx("h3",{className:"font-semibold",children:T.title})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(P,{className:"h-4 w-4 text-gray-500"}),e.jsxs(De,{variant:"outline",children:[T.confidence,"% confidence"]})]})]}),e.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:T.description}),e.jsxs(De,{className:T.impact==="high"?"bg-red-100 text-red-800":T.impact==="medium"?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800",children:[T.impact," impact"]})]},T.id)})})})]}),e.jsxs(K,{children:[e.jsxs(xe,{children:[e.jsxs(pe,{className:"flex items-center gap-2",children:[e.jsx(Ru,{className:"h-5 w-5"}),"AI Recommendations"]}),e.jsx(ot,{children:"Actionable suggestions to improve your business"})]}),e.jsx(Y,{children:e.jsx("div",{className:"space-y-4",children:u.map(T=>e.jsxs("div",{className:"p-4 border rounded-lg hover:bg-gray-50 transition-colors",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsx("h3",{className:"font-semibold",children:T.title}),e.jsxs(De,{className:E(T.priority),children:[T.priority," priority"]})]}),e.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:T.description}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(De,{variant:"outline",children:T.category}),e.jsx(R,{size:"sm",variant:"outline",children:"Apply"})]})]},T.id))})})]})]}),e.jsx("div",{className:"mt-8",children:e.jsx(xz,{title:"Advanced AI Business Intelligence",autoStart:!0,showNotifications:!0,updateInterval:2e4})}),e.jsxs("div",{className:"mt-8 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"AI-Powered Analytics"}),e.jsx(De,{variant:"secondary",children:"Predictive Insights"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx(rs,{title:"Predictive Sales Trends",defaultType:"line",height:350,autoRefresh:!0,refreshInterval:25e3}),e.jsx(rs,{title:"Customer Behavior Analysis",defaultType:"area",height:350,autoRefresh:!0,refreshInterval:3e4})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx(rs,{title:"Market Opportunities",defaultType:"bar",height:350,autoRefresh:!0,refreshInterval:45e3}),e.jsx(rs,{title:"Risk Assessment",defaultType:"pie",height:350,autoRefresh:!1,refreshInterval:6e4})]}),e.jsx("div",{className:"w-full",children:e.jsx(rs,{title:"Performance Optimization Insights",defaultType:"composed",height:400,autoRefresh:!0,refreshInterval:15e3})})]})]})},gz=()=>{const{user:t,isAuthenticated:s,loading:a}=_s(),[r,i]=v.useState([]),[o,c]=v.useState({totalLocations:0,activeLocations:0,totalEmployees:0,totalInventory:0,totalRevenue:0,averagePerformance:0}),[u,f]=v.useState(!1),[x,h]=v.useState(!1),[p,g]=v.useState(!1),[y,b]=v.useState(null),[N,S]=v.useState(!1),[C,k]=v.useState({name:"",address:"",city:"",state:"",zipCode:"",phone:"",email:"",manager:"",operatingHours:"",description:""}),A=async()=>{if(s)try{const[U,Z]=await Promise.all([Ne.get("/locations"),Ne.get("/locations/stats")]),de=U.data,H=Z.data;if(de.length===0){i([]),c({totalLocations:0,activeLocations:0,totalEmployees:0,totalInventory:0,totalRevenue:0,averagePerformance:0});return}const se=de.map(ee=>({id:ee._id,name:ee.name,address:ee.address,city:ee.city,state:ee.state,zipCode:ee.zipCode,phone:ee.phone,email:ee.email,manager:ee.manager,operatingHours:ee.operatingHours,status:ee.status,employees:ee.employees,inventory:ee.inventory,description:ee.description,dailyRevenue:ee.dailyRevenue,monthlyRevenue:ee.dailyRevenue*30,performance:ee.performance,todayOrders:ee.dailyOrders,activeCustomers:ee.dailyCustomers,lastUpdated:ee.updatedAt}));i(se),c(H),console.log(" Loaded",se.length,"real-time locations from database")}catch(U){D.error("Error fetching locations data."),console.error("Error fetching locations:",U)}};v.useEffect(()=>{A()},[s]),v.useEffect(()=>{if(!s)return;const U=setInterval(()=>{A()},3e4);return()=>clearInterval(U)},[s]);const G=async()=>{S(!0),await A(),S(!1),D.success("Location data refreshed!")},F=U=>{window.location.href=`tel:${U}`,D.success(`Calling ${U}...`)},E=U=>{window.location.href=`sms:${U}`,D.success(`Opening SMS to ${U}...`)},T=(U,Z)=>{window.location.href=`mailto:${U}?subject=Regarding ${Z}`,D.success(`Opening email to ${U}...`)},_=(U,Z)=>{const de=U.replace(/\s+/g,"").replace("+","");window.open(`https://wa.me/${de}?text=Hello, regarding ${Z}`,"_blank"),D.success("Opening WhatsApp...")},P=(U,Z)=>{const de=encodeURIComponent(`${U}, ${Z}`);window.open(`https://www.google.com/maps/search/?api=1&query=${de}`,"_blank"),D.success("Opening Google Maps...")},z=async()=>{try{S(!0);const U=await Ne.post("/locations/seed");D.success(`${U.data.count} default locations added to database!`),await A()}catch(U){U.response?.status===400?D.error(U.response.data.error):D.error("Error seeding locations. Please try again."),console.error("Error seeding locations:",U)}finally{S(!1)}},V=async()=>{const{name:U,address:Z,city:de,phone:H,manager:se}=C;if(!U||!Z||!de||!H||!se)return D.error("Please fill in all required fields.");try{const ee=await Ne.post("/locations",C);await A(),D.success("Location added successfully!"),f(!1),k({name:"",address:"",city:"",state:"",zipCode:"",phone:"",email:"",manager:"",operatingHours:"",description:""})}catch(ee){D.error("Error adding location. Please try again."),console.error("Error adding location:",ee)}},W=U=>{b(U),k(U),h(!0)},q=async()=>{try{const U=r.map(Z=>Z.id===y.id?{...C}:Z);i(U),D.success("Location updated successfully!"),h(!1),b(null),k({name:"",address:"",city:"",state:"",zipCode:"",phone:"",email:"",manager:"",operatingHours:"",description:""})}catch(U){D.error("Error updating location."),console.error("Error updating location:",U)}},B=async U=>{try{const Z=r.filter(de=>de.id!==U);i(Z),D.success("Location deleted successfully!")}catch(Z){D.error("Error deleting location."),console.error("Error deleting location:",Z)}};if(a)return e.jsx("div",{children:"Loading..."});if(!s)return e.jsx("div",{children:"Please log in to manage locations."});const ae=U=>{switch(U){case"active":return"bg-green-100 text-green-800";case"maintenance":return"bg-yellow-100 text-yellow-800";case"closed":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Locations Overview"}),e.jsx("p",{className:"text-muted-foreground",children:"Real-time monitoring and management of your business locations"})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs(R,{variant:"outline",onClick:G,disabled:N,children:[e.jsx(cs,{className:`mr-2 h-4 w-4 ${N?"animate-spin":""}`}),N?"Refreshing...":"Refresh"]}),e.jsxs(R,{variant:"outline",onClick:()=>{window.location.href="/dashboard/analytics",D.success("Redirecting to analytics dashboard...")},children:[e.jsx(er,{className:"mr-2 h-4 w-4"}),"Analytics"]}),e.jsxs(R,{variant:"outline",onClick:()=>{window.open("https://maps.google.com","_blank"),D.success("Opening map view...")},children:[e.jsx(cg,{className:"mr-2 h-4 w-4"}),"View Map"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-6 gap-4",children:[e.jsxs(K,{children:[e.jsxs(xe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(pe,{className:"text-sm font-medium",children:"Total Locations"}),e.jsx(qc,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(Y,{children:[e.jsx("div",{className:"text-2xl font-bold",children:o.totalLocations}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[o.activeLocations," active"]})]})]}),e.jsxs(K,{children:[e.jsxs(xe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(pe,{className:"text-sm font-medium",children:"Active Locations"}),e.jsx(us,{className:"h-4 w-4 text-green-500"})]}),e.jsxs(Y,{children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:o.activeLocations}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[Math.round(o.activeLocations/o.totalLocations*100),"% operational"]})]})]}),e.jsxs(K,{children:[e.jsxs(xe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(pe,{className:"text-sm font-medium",children:"Total Employees"}),e.jsx(Zt,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(Y,{children:[e.jsx("div",{className:"text-2xl font-bold",children:o.totalEmployees}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Across all locations"})]})]}),e.jsxs(K,{children:[e.jsxs(xe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(pe,{className:"text-sm font-medium",children:"Total Inventory"}),e.jsx(Yt,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(Y,{children:[e.jsx("div",{className:"text-2xl font-bold",children:o.totalInventory.toLocaleString()}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Items in stock"})]})]}),e.jsxs(K,{children:[e.jsxs(xe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(pe,{className:"text-sm font-medium",children:"Today's Revenue"}),e.jsx(ra,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(Y,{children:[e.jsxs("div",{className:"text-2xl font-bold",children:["KES ",o.totalRevenue.toLocaleString()]}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[e.jsx(Is,{className:"inline h-3 w-3 text-green-500 mr-1"}),"+12% from yesterday"]})]})]}),e.jsxs(K,{children:[e.jsxs(xe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(pe,{className:"text-sm font-medium",children:"Avg Performance"}),e.jsx(La,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(Y,{children:[e.jsxs("div",{className:"text-2xl font-bold",children:[o.averagePerformance,"%"]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Overall efficiency"})]})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[r.length===0&&e.jsxs(R,{variant:"outline",onClick:z,disabled:N,className:"border-blue-500 text-blue-600 hover:bg-blue-50",children:[e.jsx(Yt,{className:"mr-2 h-4 w-4"}),N?"Seeding...":"Seed Demo Locations"]}),e.jsxs(Bt,{open:u,onOpenChange:f,children:[e.jsx(wa,{asChild:!0,children:e.jsxs(R,{className:"bg-green-500 cursor-pointer hover:bg-green-400",children:[e.jsx(Gs,{className:"mr-2 h-4 w-4"}),"Add Location"]})}),e.jsxs(zt,{className:"max-w-2xl",children:[e.jsxs(Ut,{children:[e.jsx(Vt,{children:"Add New Location"}),e.jsx(es,{children:"Add a new business location or branch"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(te,{htmlFor:"location-name",children:"Location Name *"}),e.jsx(me,{id:"location-name",placeholder:"Enter location name",value:C.name,onChange:U=>k({...C,name:U.target.value})})]}),e.jsxs("div",{children:[e.jsx(te,{htmlFor:"manager",children:"Manager *"}),e.jsx(me,{id:"manager",placeholder:"Manager name",value:C.manager,onChange:U=>k({...C,manager:U.target.value})})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx(te,{htmlFor:"address",children:"Address *"}),e.jsx(me,{id:"address",placeholder:"Street address",value:C.address,onChange:U=>k({...C,address:U.target.value})})]}),e.jsxs("div",{children:[e.jsx(te,{htmlFor:"city",children:"City *"}),e.jsx(me,{id:"city",placeholder:"City",value:C.city,onChange:U=>k({...C,city:U.target.value})})]}),e.jsxs("div",{children:[e.jsx(te,{htmlFor:"state",children:"State/County"}),e.jsx(me,{id:"state",placeholder:"State or County",value:C.state,onChange:U=>k({...C,state:U.target.value})})]}),e.jsxs("div",{children:[e.jsx(te,{htmlFor:"zipCode",children:"Zip/Postal Code"}),e.jsx(me,{id:"zipCode",placeholder:"Postal code",value:C.zipCode,onChange:U=>k({...C,zipCode:U.target.value})})]}),e.jsxs("div",{children:[e.jsx(te,{htmlFor:"phone",children:"Phone *"}),e.jsx(me,{id:"phone",placeholder:"+254 700 000 000",value:C.phone,onChange:U=>k({...C,phone:U.target.value})})]}),e.jsxs("div",{children:[e.jsx(te,{htmlFor:"email",children:"Email"}),e.jsx(me,{id:"email",type:"email",placeholder:"location@ominbiz.com",value:C.email,onChange:U=>k({...C,email:U.target.value})})]}),e.jsxs("div",{children:[e.jsx(te,{htmlFor:"operatingHours",children:"Operating Hours"}),e.jsx(me,{id:"operatingHours",placeholder:"8:00 AM - 6:00 PM",value:C.operatingHours,onChange:U=>k({...C,operatingHours:U.target.value})})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx(te,{htmlFor:"description",children:"Description"}),e.jsx(As,{id:"description",placeholder:"Location description",value:C.description,onChange:U=>k({...C,description:U.target.value})})]})]}),e.jsxs(Ps,{children:[e.jsx(R,{variant:"outline",onClick:()=>f(!1),children:"Cancel"}),e.jsx(R,{onClick:V,children:"Add Location"})]})]})]})]}),r.length===0&&e.jsx(K,{className:"p-12",children:e.jsxs(Y,{className:"flex flex-col items-center justify-center text-center space-y-4",children:[e.jsx(Yr,{className:"h-16 w-16 text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No Locations Found"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"Get started by adding your first location or seed demo data"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs(R,{onClick:z,disabled:N,children:[e.jsx(Yt,{className:"mr-2 h-4 w-4"}),"Seed Demo Locations"]}),e.jsxs(R,{variant:"outline",onClick:()=>f(!0),children:[e.jsx(Gs,{className:"mr-2 h-4 w-4"}),"Add Your First Location"]})]})]})}),r.length>0&&e.jsxs(K,{children:[e.jsxs(xe,{children:[e.jsxs(pe,{className:"flex items-center justify-between",children:[e.jsx("span",{children:"All Locations"}),e.jsxs(De,{variant:"outline",className:"text-xs",children:["Last updated: ",new Date().toLocaleTimeString()]})]}),e.jsx(ot,{children:"Real-time monitoring and management of your business locations"})]}),e.jsx(Y,{children:e.jsxs(Xn,{children:[e.jsx(Qn,{children:e.jsxs(xa,{children:[e.jsx(St,{children:"Location"}),e.jsx(St,{children:"Performance"}),e.jsx(St,{children:"Today's Metrics"}),e.jsx(St,{children:"Manager"}),e.jsx(St,{children:"Contact"}),e.jsx(St,{children:"Status"}),e.jsx(St,{children:"Actions"})]})}),e.jsx(Zn,{children:r.map(U=>e.jsxs(xa,{children:[e.jsx(Nt,{children:e.jsxs("div",{children:[e.jsxs("div",{className:"font-medium flex items-center gap-2",children:[U.name,U.status==="active"&&e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"})]}),e.jsx("div",{className:"text-sm text-muted-foreground",children:U.description}),e.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:[U.city,", ",U.state]})]})}),e.jsx(Nt,{children:e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"text-sm font-medium",children:[U.performance,"%"]}),U.performance>=90?e.jsx(Is,{className:"h-3 w-3 text-green-500"}):U.performance>=70?e.jsx(La,{className:"h-3 w-3 text-yellow-500"}):e.jsx(fi,{className:"h-3 w-3 text-red-500"})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-1.5",children:e.jsx("div",{className:`h-1.5 rounded-full ${U.performance>=90?"bg-green-500":U.performance>=70?"bg-yellow-500":"bg-red-500"}`,style:{width:`${U.performance}%`}})})]})}),e.jsx(Nt,{children:e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(ra,{className:"h-3 w-3 text-green-600"}),e.jsxs("span",{className:"font-medium",children:["KES ",U.dailyRevenue.toLocaleString()]})]}),e.jsxs("div",{className:"flex items-center gap-1 text-muted-foreground",children:[e.jsx(Yt,{className:"h-3 w-3"}),e.jsxs("span",{children:[U.todayOrders," orders"]})]}),e.jsxs("div",{className:"flex items-center gap-1 text-muted-foreground",children:[e.jsx(Zt,{className:"h-3 w-3"}),e.jsxs("span",{children:[U.activeCustomers," customers"]})]})]})}),e.jsx(Nt,{children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:U.manager}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:[U.employees," staff members"]})]})}),e.jsx(Nt,{children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"text-sm space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Ws,{className:"h-3 w-3"}),U.phone]}),U.email&&e.jsxs("div",{className:"flex items-center gap-1 text-muted-foreground",children:[e.jsx(Ks,{className:"h-3 w-3"}),U.email]}),e.jsxs("div",{className:"flex items-center gap-1 text-muted-foreground",children:[e.jsx(ts,{className:"h-3 w-3"}),U.operatingHours]})]}),e.jsxs("div",{className:"flex gap-1 flex-wrap",children:[e.jsxs(R,{size:"sm",variant:"outline",className:"h-7 px-2 text-xs",onClick:()=>F(U.phone),children:[e.jsx(Ws,{className:"h-3 w-3 mr-1"}),"Call"]}),e.jsxs(R,{size:"sm",variant:"outline",className:"h-7 px-2 text-xs",onClick:()=>E(U.phone),children:[e.jsx(xi,{className:"h-3 w-3 mr-1"}),"SMS"]}),e.jsxs(R,{size:"sm",variant:"outline",className:"h-7 px-2 text-xs",onClick:()=>T(U.email,U.name),children:[e.jsx(Ks,{className:"h-3 w-3 mr-1"}),"Email"]}),e.jsxs(R,{size:"sm",variant:"outline",className:"h-7 px-2 text-xs bg-green-50 hover:bg-green-100",onClick:()=>_(U.phone,U.name),children:[e.jsx(ta,{className:"h-3 w-3 mr-1 text-green-600"}),"WhatsApp"]}),e.jsxs(R,{size:"sm",variant:"outline",className:"h-7 px-2 text-xs",onClick:()=>P(U.address,U.city),children:[e.jsx(cg,{className:"h-3 w-3 mr-1"}),"Map"]})]})]})}),e.jsx(Nt,{children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs(De,{className:ae(U.status),children:[U.status==="active"&&e.jsx(us,{className:"h-3 w-3 mr-1"}),U.status==="maintenance"&&e.jsx(Fr,{className:"h-3 w-3 mr-1"}),U.status==="closed"&&e.jsx(Sr,{className:"h-3 w-3 mr-1"}),U.status]}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:[U.inventory," items"]})]})}),e.jsx(Nt,{children:e.jsxs("div",{className:"flex space-x-1",children:[e.jsx(R,{variant:"outline",size:"sm",onClick:()=>{b(U),g(!0)},children:e.jsx(ca,{className:"h-4 w-4"})}),e.jsx(R,{variant:"outline",size:"sm",onClick:()=>W(U),children:e.jsx(Yi,{className:"h-4 w-4"})}),e.jsx(R,{variant:"outline",size:"sm",onClick:()=>B(U.id),children:e.jsx(ga,{className:"h-4 w-4"})})]})})]},U.id))})]})})]}),e.jsx(Bt,{open:p,onOpenChange:g,children:e.jsxs(zt,{className:"max-w-4xl",children:[e.jsxs(Ut,{children:[e.jsxs(Vt,{className:"flex items-center gap-2",children:[e.jsx(qc,{className:"h-5 w-5"}),y?.name," - Detailed View"]}),e.jsx(es,{children:"Real-time location performance and operational details"})]}),y&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs(K,{children:[e.jsx(xe,{className:"pb-2",children:e.jsx(pe,{className:"text-sm",children:"Performance Score"})}),e.jsxs(Y,{children:[e.jsxs("div",{className:"text-2xl font-bold",children:[y.performance,"%"]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 mt-2",children:e.jsx("div",{className:`h-2 rounded-full ${y.performance>=90?"bg-green-500":y.performance>=70?"bg-yellow-500":"bg-red-500"}`,style:{width:`${y.performance}%`}})})]})]}),e.jsxs(K,{children:[e.jsx(xe,{className:"pb-2",children:e.jsx(pe,{className:"text-sm",children:"Today's Revenue"})}),e.jsxs(Y,{children:[e.jsxs("div",{className:"text-2xl font-bold",children:["KES ",y.dailyRevenue.toLocaleString()]}),e.jsxs("p",{className:"text-xs text-green-600 flex items-center",children:[e.jsx(Is,{className:"h-3 w-3 mr-1"}),"+15% vs yesterday"]})]})]}),e.jsxs(K,{children:[e.jsx(xe,{className:"pb-2",children:e.jsx(pe,{className:"text-sm",children:"Orders Today"})}),e.jsxs(Y,{children:[e.jsx("div",{className:"text-2xl font-bold",children:y.todayOrders}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[y.activeCustomers," active customers"]})]})]}),e.jsxs(K,{children:[e.jsx(xe,{className:"pb-2",children:e.jsx(pe,{className:"text-sm",children:"Inventory Status"})}),e.jsxs(Y,{children:[e.jsx("div",{className:"text-2xl font-bold",children:y.inventory}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Items in stock"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(K,{children:[e.jsx(xe,{children:e.jsx(pe,{className:"text-lg",children:"Location Information"})}),e.jsxs(Y,{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(Yr,{className:"h-4 w-4 mt-1 text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:y.address}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:[y.city,", ",y.state," ",y.zipCode]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ws,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{children:y.phone})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ks,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{children:y.email})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ts,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{children:y.operatingHours})]})]})]}),e.jsxs(K,{children:[e.jsx(xe,{children:e.jsx(pe,{className:"text-lg",children:"Staff & Operations"})}),e.jsxs(Y,{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Zt,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("span",{children:["Manager: ",y.manager]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Zt,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("span",{children:[y.employees," Staff Members"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(La,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{children:"Status: "}),e.jsx(De,{className:ae(y.status),children:y.status})]}),e.jsx("div",{className:"pt-2",children:e.jsx("p",{className:"text-sm text-muted-foreground",children:y.description})})]})]})]})]}),e.jsxs(Ps,{children:[e.jsx(R,{variant:"outline",onClick:()=>g(!1),children:"Close"}),e.jsx(R,{onClick:()=>{g(!1),W(y)},children:"Edit Location"})]})]})}),e.jsx(Bt,{open:x,onOpenChange:h,children:e.jsxs(zt,{className:"max-w-2xl",children:[e.jsxs(Ut,{children:[e.jsx(Vt,{children:"Edit Location"}),e.jsx(es,{children:"Update location information"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(te,{htmlFor:"edit-location-name",children:"Location Name *"}),e.jsx(me,{id:"edit-location-name",placeholder:"Enter location name",value:C.name,onChange:U=>k({...C,name:U.target.value})})]}),e.jsxs("div",{children:[e.jsx(te,{htmlFor:"edit-manager",children:"Manager *"}),e.jsx(me,{id:"edit-manager",placeholder:"Manager name",value:C.manager,onChange:U=>k({...C,manager:U.target.value})})]})]}),e.jsxs(Ps,{children:[e.jsx(R,{variant:"outline",onClick:()=>h(!1),children:"Cancel"}),e.jsx(R,{onClick:q,children:"Update Location"})]})]})})]})};var cE=["PageUp","PageDown"],dE=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],uE={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},md="Slider",[Pg,vz,jz]=MS(md),[mE]=Df(md,[jz]),[yz,tx]=mE(md),hE=v.forwardRef((t,s)=>{const{name:a,min:r=0,max:i=100,step:o=1,orientation:c="horizontal",disabled:u=!1,minStepsBetweenThumbs:f=0,defaultValue:x=[r],value:h,onValueChange:p=()=>{},onValueCommit:g=()=>{},inverted:y=!1,form:b,...N}=t,S=v.useRef(new Set),C=v.useRef(0),A=c==="horizontal"?Nz:bz,[G=[],F]=Ou({prop:h,defaultProp:x,onChange:V=>{[...S.current][C.current]?.focus(),p(V)}}),E=v.useRef(G);function T(V){const W=Ez(G,V);z(V,W)}function _(V){z(V,C.current)}function P(){const V=E.current[C.current];G[C.current]!==V&&g(G)}function z(V,W,{commit:q}={commit:!1}){const B=Dz(o),ae=Oz(Math.round((V-r)/o)*o+r,B),U=sf(ae,[r,i]);F((Z=[])=>{const de=Cz(Z,U,W);if(_z(de,f*o)){C.current=de.indexOf(U);const H=String(de)!==String(Z);return H&&q&&g(de),H?de:Z}else return Z})}return e.jsx(yz,{scope:t.__scopeSlider,name:a,disabled:u,min:r,max:i,valueIndexToChangeRef:C,thumbs:S.current,values:G,orientation:c,form:b,children:e.jsx(Pg.Provider,{scope:t.__scopeSlider,children:e.jsx(Pg.Slot,{scope:t.__scopeSlider,children:e.jsx(A,{"aria-disabled":u,"data-disabled":u?"":void 0,...N,ref:s,onPointerDown:Hs(N.onPointerDown,()=>{u||(E.current=G)}),min:r,max:i,inverted:y,onSlideStart:u?void 0:T,onSlideMove:u?void 0:_,onSlideEnd:u?void 0:P,onHomeKeyDown:()=>!u&&z(r,0,{commit:!0}),onEndKeyDown:()=>!u&&z(i,G.length-1,{commit:!0}),onStepKeyDown:({event:V,direction:W})=>{if(!u){const ae=cE.includes(V.key)||V.shiftKey&&dE.includes(V.key)?10:1,U=C.current,Z=G[U],de=o*ae*W;z(Z+de,U,{commit:!0})}}})})})})});hE.displayName=md;var[fE,xE]=mE(md,{startEdge:"left",endEdge:"right",size:"width",direction:1}),Nz=v.forwardRef((t,s)=>{const{min:a,max:r,dir:i,inverted:o,onSlideStart:c,onSlideMove:u,onSlideEnd:f,onStepKeyDown:x,...h}=t,[p,g]=v.useState(null),y=qa(s,A=>g(A)),b=v.useRef(void 0),N=PS(i),S=N==="ltr",C=S&&!o||!S&&o;function k(A){const G=b.current||p.getBoundingClientRect(),F=[0,G.width],T=ej(F,C?[a,r]:[r,a]);return b.current=G,T(A-G.left)}return e.jsx(fE,{scope:t.__scopeSlider,startEdge:C?"left":"right",endEdge:C?"right":"left",direction:C?1:-1,size:"width",children:e.jsx(pE,{dir:N,"data-orientation":"horizontal",...h,ref:y,style:{...h.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:A=>{const G=k(A.clientX);c?.(G)},onSlideMove:A=>{const G=k(A.clientX);u?.(G)},onSlideEnd:()=>{b.current=void 0,f?.()},onStepKeyDown:A=>{const F=uE[C?"from-left":"from-right"].includes(A.key);x?.({event:A,direction:F?-1:1})}})})}),bz=v.forwardRef((t,s)=>{const{min:a,max:r,inverted:i,onSlideStart:o,onSlideMove:c,onSlideEnd:u,onStepKeyDown:f,...x}=t,h=v.useRef(null),p=qa(s,h),g=v.useRef(void 0),y=!i;function b(N){const S=g.current||h.current.getBoundingClientRect(),C=[0,S.height],A=ej(C,y?[r,a]:[a,r]);return g.current=S,A(N-S.top)}return e.jsx(fE,{scope:t.__scopeSlider,startEdge:y?"bottom":"top",endEdge:y?"top":"bottom",size:"height",direction:y?1:-1,children:e.jsx(pE,{"data-orientation":"vertical",...x,ref:p,style:{...x.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:N=>{const S=b(N.clientY);o?.(S)},onSlideMove:N=>{const S=b(N.clientY);c?.(S)},onSlideEnd:()=>{g.current=void 0,u?.()},onStepKeyDown:N=>{const C=uE[y?"from-bottom":"from-top"].includes(N.key);f?.({event:N,direction:C?-1:1})}})})}),pE=v.forwardRef((t,s)=>{const{__scopeSlider:a,onSlideStart:r,onSlideMove:i,onSlideEnd:o,onHomeKeyDown:c,onEndKeyDown:u,onStepKeyDown:f,...x}=t,h=tx(md,a);return e.jsx(ma.span,{...x,ref:s,onKeyDown:Hs(t.onKeyDown,p=>{p.key==="Home"?(c(p),p.preventDefault()):p.key==="End"?(u(p),p.preventDefault()):cE.concat(dE).includes(p.key)&&(f(p),p.preventDefault())}),onPointerDown:Hs(t.onPointerDown,p=>{const g=p.target;g.setPointerCapture(p.pointerId),p.preventDefault(),h.thumbs.has(g)?g.focus():r(p)}),onPointerMove:Hs(t.onPointerMove,p=>{p.target.hasPointerCapture(p.pointerId)&&i(p)}),onPointerUp:Hs(t.onPointerUp,p=>{const g=p.target;g.hasPointerCapture(p.pointerId)&&(g.releasePointerCapture(p.pointerId),o(p))})})}),gE="SliderTrack",vE=v.forwardRef((t,s)=>{const{__scopeSlider:a,...r}=t,i=tx(gE,a);return e.jsx(ma.span,{"data-disabled":i.disabled?"":void 0,"data-orientation":i.orientation,...r,ref:s})});vE.displayName=gE;var Mg="SliderRange",jE=v.forwardRef((t,s)=>{const{__scopeSlider:a,...r}=t,i=tx(Mg,a),o=xE(Mg,a),c=v.useRef(null),u=qa(s,c),f=i.values.length,x=i.values.map(g=>bE(g,i.min,i.max)),h=f>1?Math.min(...x):0,p=100-Math.max(...x);return e.jsx(ma.span,{"data-orientation":i.orientation,"data-disabled":i.disabled?"":void 0,...r,ref:u,style:{...t.style,[o.startEdge]:h+"%",[o.endEdge]:p+"%"}})});jE.displayName=Mg;var Fg="SliderThumb",yE=v.forwardRef((t,s)=>{const a=vz(t.__scopeSlider),[r,i]=v.useState(null),o=qa(s,u=>i(u)),c=v.useMemo(()=>r?a().findIndex(u=>u.ref.current===r):-1,[a,r]);return e.jsx(wz,{...t,ref:o,index:c})}),wz=v.forwardRef((t,s)=>{const{__scopeSlider:a,index:r,name:i,...o}=t,c=tx(Fg,a),u=xE(Fg,a),[f,x]=v.useState(null),h=qa(s,k=>x(k)),p=f?c.form||!!f.closest("form"):!0,g=FS(f),y=c.values[r],b=y===void 0?0:bE(y,c.min,c.max),N=Tz(r,c.values.length),S=g?.[u.size],C=S?kz(S,b,u.direction):0;return v.useEffect(()=>{if(f)return c.thumbs.add(f),()=>{c.thumbs.delete(f)}},[f,c.thumbs]),e.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[u.startEdge]:`calc(${b}% + ${C}px)`},children:[e.jsx(Pg.ItemSlot,{scope:t.__scopeSlider,children:e.jsx(ma.span,{role:"slider","aria-label":t["aria-label"]||N,"aria-valuemin":c.min,"aria-valuenow":y,"aria-valuemax":c.max,"aria-orientation":c.orientation,"data-orientation":c.orientation,"data-disabled":c.disabled?"":void 0,tabIndex:c.disabled?void 0:0,...o,ref:h,style:y===void 0?{display:"none"}:t.style,onFocus:Hs(t.onFocus,()=>{c.valueIndexToChangeRef.current=r})})}),p&&e.jsx(NE,{name:i??(c.name?c.name+(c.values.length>1?"[]":""):void 0),form:c.form,value:y},r)]})});yE.displayName=Fg;var Sz="RadioBubbleInput",NE=v.forwardRef(({__scopeSlider:t,value:s,...a},r)=>{const i=v.useRef(null),o=qa(i,r),c=Dv(s);return v.useEffect(()=>{const u=i.current;if(!u)return;const f=window.HTMLInputElement.prototype,h=Object.getOwnPropertyDescriptor(f,"value").set;if(c!==s&&h){const p=new Event("input",{bubbles:!0});h.call(u,s),u.dispatchEvent(p)}},[c,s]),e.jsx(ma.input,{style:{display:"none"},...a,ref:o,defaultValue:s})});NE.displayName=Sz;function Cz(t=[],s,a){const r=[...t];return r[a]=s,r.sort((i,o)=>i-o)}function bE(t,s,a){const o=100/(a-s)*(t-s);return sf(o,[0,100])}function Tz(t,s){return s>2?`Value ${t+1} of ${s}`:s===2?["Minimum","Maximum"][t]:void 0}function Ez(t,s){if(t.length===1)return 0;const a=t.map(i=>Math.abs(i-s)),r=Math.min(...a);return a.indexOf(r)}function kz(t,s,a){const r=t/2,o=ej([0,50],[0,r]);return(r-o(s)*a)*a}function Az(t){return t.slice(0,-1).map((s,a)=>t[a+1]-s)}function _z(t,s){if(s>0){const a=Az(t);return Math.min(...a)>=s}return!0}function ej(t,s){return a=>{if(t[0]===t[1]||s[0]===s[1])return s[0];const r=(s[1]-s[0])/(t[1]-t[0]);return s[0]+r*(a-t[0])}}function Dz(t){return(String(t).split(".")[1]||"").length}function Oz(t,s){const a=Math.pow(10,s);return Math.round(t*a)/a}var wE=hE,Rz=vE,Pz=jE,Mz=yE;const mi=v.forwardRef(({className:t,...s},a)=>e.jsxs(wE,{ref:a,className:Ze("relative flex w-full touch-none select-none items-center",t),...s,children:[e.jsx(Rz,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary",children:e.jsx(Pz,{className:"absolute h-full bg-primary"})}),e.jsx(Mz,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]}));mi.displayName=wE.displayName;var Fz=(t,s,a,r,i,o,c,u)=>{let f=document.documentElement,x=["light","dark"];function h(y){(Array.isArray(t)?t:[t]).forEach(b=>{let N=b==="class",S=N&&o?i.map(C=>o[C]||C):i;N?(f.classList.remove(...S),f.classList.add(o&&o[y]?o[y]:y)):f.setAttribute(b,y)}),p(y)}function p(y){u&&x.includes(y)&&(f.style.colorScheme=y)}function g(){return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}if(r)h(r);else try{let y=localStorage.getItem(s)||a,b=c&&y==="system"?g():y;h(b)}catch{}},Lz=v.createContext(void 0),Iz={setTheme:t=>{},themes:[]},tj=()=>{var t;return(t=v.useContext(Lz))!=null?t:Iz};v.memo(({forcedTheme:t,storageKey:s,attribute:a,enableSystem:r,enableColorScheme:i,defaultTheme:o,value:c,themes:u,nonce:f,scriptProps:x})=>{let h=JSON.stringify([a,s,o,t,u,c,r,i]).slice(1,-1);return v.createElement("script",{...x,suppressHydrationWarning:!0,nonce:typeof window>"u"?f:"",dangerouslySetInnerHTML:{__html:`(${Fz.toString()})(${h})`}})});const Bz=()=>{const{theme:t,setTheme:s,sidebarCollapsed:a,setSidebarCollapsed:r,animations:i,setAnimations:o,reducedMotion:c,setReducedMotion:u,fontSize:f,setFontSize:x,borderRadius:h,setBorderRadius:p,compactMode:g,setCompactMode:y,highContrast:b,setHighContrast:N,customAccentColor:S,setCustomAccentColor:C,soundEnabled:k,setSoundEnabled:A,autoSave:G,setAutoSave:F}=id(),[E,T]=v.useState(S),_=[{value:"small",label:"Small (14px)",size:14},{value:"medium",label:"Medium (16px)",size:16},{value:"large",label:"Large (18px)",size:18},{value:"extra-large",label:"Extra Large (20px)",size:20}],P=[{value:"none",label:"None",radius:"0px"},{value:"small",label:"Small",radius:"0.25rem"},{value:"medium",label:"Medium",radius:"0.5rem"},{value:"large",label:"Large",radius:"0.75rem"},{value:"extra-large",label:"Extra Large",radius:"1rem"}],z=q=>{T(q),C(q),D.success("Accent color updated")},V=()=>{s("light"),o(!0),u(!1),x("medium"),p("medium"),y(!1),N(!1),C("#3b82f6"),A(!0),F(!0),T("#3b82f6"),D.success("Settings reset to defaults")},W=()=>{const q={theme:t,animations:i,reducedMotion:c,fontSize:f,borderRadius:h,compactMode:g,highContrast:b,customAccentColor:S,soundEnabled:k,autoSave:G,exportedAt:new Date().toISOString()},B=new Blob([JSON.stringify(q,null,2)],{type:"application/json"}),ae=URL.createObjectURL(B),U=document.createElement("a");U.href=ae,U.download="ominbiz-theme-settings.json",U.click(),URL.revokeObjectURL(ae),D.success("Settings exported successfully")};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs(K,{children:[e.jsxs(xe,{children:[e.jsxs(pe,{className:"flex items-center gap-2",children:[e.jsx(Lc,{className:"h-5 w-5"}),"Appearance"]}),e.jsx(ot,{children:"Customize the visual appearance of your dashboard"})]}),e.jsxs(Y,{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(te,{children:"Custom Accent Color"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(me,{type:"color",value:E,onChange:q=>z(q.target.value),className:"w-16 h-10 p-1 border rounded"}),e.jsx(me,{type:"text",value:E,onChange:q=>z(q.target.value),className:"flex-1",placeholder:"#3b82f6"})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(te,{children:"Font Size"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:_.map(q=>e.jsxs(R,{variant:f===q.value?"default":"outline",size:"sm",onClick:()=>x(q.value),className:"justify-start",children:[e.jsx(j_,{className:"h-4 w-4 mr-2"}),q.label]},q.value))})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(te,{children:"Border Radius"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:P.map(q=>e.jsx(R,{variant:h===q.value?"default":"outline",size:"sm",onClick:()=>p(q.value),className:"justify-start",style:{borderRadius:q.radius},children:q.label},q.value))})]})]})]}),e.jsxs(K,{children:[e.jsxs(xe,{children:[e.jsxs(pe,{className:"flex items-center gap-2",children:[e.jsx(ca,{className:"h-5 w-5"}),"Accessibility"]}),e.jsx(ot,{children:"Settings to improve accessibility and usability"})]}),e.jsxs(Y,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(te,{children:"High Contrast Mode"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Increase contrast for better visibility"})]}),e.jsx(os,{checked:b,onCheckedChange:N})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(te,{children:"Reduced Motion"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Minimize animations and transitions"})]}),e.jsx(os,{checked:c,onCheckedChange:u})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(te,{children:"Compact Mode"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Reduce spacing for more content"})]}),e.jsx(os,{checked:g,onCheckedChange:y})]})]})]}),e.jsxs(K,{children:[e.jsxs(xe,{children:[e.jsxs(pe,{className:"flex items-center gap-2",children:[e.jsx(_a,{className:"h-5 w-5"}),"Performance"]}),e.jsx(ot,{children:"Settings that affect performance and user experience"})]}),e.jsxs(Y,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(te,{children:"Enable Animations"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Show smooth transitions and animations"})]}),e.jsx(os,{checked:i,onCheckedChange:o})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(te,{children:"Sound Effects"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Play sounds for interactions"})]}),e.jsx(os,{checked:k,onCheckedChange:A})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(te,{children:"Auto-save Settings"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Automatically save theme changes"})]}),e.jsx(os,{checked:G,onCheckedChange:F})]})]})]}),e.jsxs(K,{children:[e.jsxs(xe,{children:[e.jsx(pe,{children:"Theme Management"}),e.jsx(ot,{children:"Export, import, or reset your theme settings"})]}),e.jsx(Y,{children:e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsxs(R,{variant:"outline",onClick:W,children:[e.jsx(Ma,{className:"h-4 w-4 mr-2"}),"Export Settings"]}),e.jsxs(R,{variant:"outline",onClick:V,children:[e.jsx(dg,{className:"h-4 w-4 mr-2"}),"Reset to Defaults"]})]})})]})]})},zz=()=>{const{isAuthenticated:t,loading:s,user:a}=_s(),{theme:r,setTheme:i,systemTheme:o}=tj(),{sidebarCollapsed:c,setSidebarCollapsed:u,animations:f,setAnimations:x,fontSize:h,setFontSize:p,fontSizes:g,borderRadius:y,setBorderRadius:b,borderRadiusOptions:N,compactMode:S,setCompactMode:C,highContrast:k,setHighContrast:A,reducedMotion:G,setReducedMotion:F,customAccentColor:E,setCustomAccentColor:T,soundEnabled:_,setSoundEnabled:P,autoSave:z,setAutoSave:V}=id(),[W,q]=v.useState(!1),[B,ae]=v.useState(!1),[U,Z]=v.useState(!1),[de,H]=v.useState("general"),[se,ee]=v.useState({businessName:"ominbiz",businessEmail:"admin@ominbiz.com",businessPhone:"+254 700 123 456",businessAddress:"123 Business Street, Nairobi",timezone:"Africa/Nairobi",currency:"KES",language:"en",emailNotifications:!0,smsNotifications:!1,pushNotifications:!0,marketingEmails:!1,soundNotifications:_,desktopNotifications:!0,twoFactorAuth:!1,sessionTimeout:"30",passwordExpiry:"90",loginAlerts:!0,deviceTracking:!0,theme:r||"light",sidebarCollapsed:c,compactMode:S,highContrast:k,reducedMotion:G,customAccentColor:E,animations:f,fontSize:h,borderRadius:y,dataSharing:!1,analytics:!0,crashReporting:!0,usageStatistics:!1,autoSave:z,cacheSize:100,backgroundSync:!0,currentPassword:"",newPassword:"",confirmPassword:""});v.useEffect(()=>{ee(ie=>({...ie,theme:r,sidebarCollapsed:c,compactMode:S,highContrast:k,reducedMotion:G,customAccentColor:E,animations:f,fontSize:h,borderRadius:y,soundNotifications:_,autoSave:z}))},[r,c,S,k,G,E,f,h,y,_,z]),v.useEffect(()=>{(async()=>{if(t)try{ae(!0);const be=localStorage.getItem("token"),ve=(await Ne.get("/user/profile",{headers:{Authorization:`Bearer ${be}`}})).data;console.log(" Settings loaded from server:",{user:ve.name,email:ve.email}),ee(oe=>({...oe,businessName:ve.businessName||ve.name||oe.businessName,businessEmail:ve.businessEmail||ve.email||oe.businessEmail,businessPhone:ve.businessPhone||ve.phone||oe.businessPhone,businessAddress:ve.businessAddress||ve.address||oe.businessAddress,timezone:ve.timezone||oe.timezone,currency:ve.currency||oe.currency,language:ve.language||oe.language,emailNotifications:ve.emailNotifications??oe.emailNotifications,smsNotifications:ve.smsNotifications??oe.smsNotifications,pushNotifications:ve.pushNotifications??oe.pushNotifications,marketingEmails:ve.marketingEmails??oe.marketingEmails,twoFactorAuth:ve.twoFactorAuth??oe.twoFactorAuth,sessionTimeout:ve.sessionTimeout?.toString()||oe.sessionTimeout,passwordExpiry:ve.passwordExpiry?.toString()||oe.passwordExpiry,dataSharing:ve.dataSharing??oe.dataSharing,analytics:ve.analytics??oe.analytics}))}catch(be){console.error("Error fetching settings:",be),D.error(be.response?.data?.message||"Error fetching settings. Using default settings.")}finally{ae(!1)}})()},[t]);const L=async ie=>{try{ae(!0);const be=localStorage.getItem("token");let Le={},ve="/user/settings",oe="put";switch(ie){case"general":Le={businessName:se.businessName,businessEmail:se.businessEmail,businessPhone:se.businessPhone,businessAddress:se.businessAddress,timezone:se.timezone,currency:se.currency,language:se.language};break;case"notifications":Le={emailNotifications:se.emailNotifications,smsNotifications:se.smsNotifications,pushNotifications:se.pushNotifications,marketingEmails:se.marketingEmails,soundNotifications:se.soundNotifications},P(se.soundNotifications);break;case"security":Le={twoFactorAuth:se.twoFactorAuth,sessionTimeout:parseInt(se.sessionTimeout),passwordExpiry:parseInt(se.passwordExpiry),loginAlerts:se.loginAlerts,deviceTracking:se.deviceTracking};break;case"appearance":Le={theme:se.theme,sidebarCollapsed:se.sidebarCollapsed,compactMode:se.compactMode,highContrast:se.highContrast,reducedMotion:se.reducedMotion,customAccentColor:se.customAccentColor,animations:se.animations,fontSize:se.fontSize,borderRadius:se.borderRadius},i(se.theme),u(se.sidebarCollapsed),C(se.compactMode),A(se.highContrast),F(se.reducedMotion),T(se.customAccentColor),x(se.animations),p(se.fontSize),b(se.borderRadius);break;case"privacy":Le={dataSharing:se.dataSharing,analytics:se.analytics,crashReporting:se.crashReporting,usageStatistics:se.usageStatistics};break;case"performance":Le={autoSave:se.autoSave,cacheSize:se.cacheSize,backgroundSync:se.backgroundSync},V(se.autoSave);break}await Ne[oe](ve,{section:ie,settings:Le},{headers:{Authorization:`Bearer ${be}`}}),Z(!1),console.log(` ${ie.charAt(0).toUpperCase()+ie.slice(1)} settings saved:`,Le),D.success(`${ie.charAt(0).toUpperCase()+ie.slice(1)} settings saved successfully!`),ie==="general"&&(document.title=`${se.businessName} - Dashboard`),ie==="notifications"&&se.soundNotifications&&console.log(" Sound notifications enabled")}catch(be){console.error(`Error saving ${ie} settings:`,be),D.error(be.response?.data?.message||`Error saving ${ie} settings.`)}finally{ae(!1)}},X=async()=>{if(!se.currentPassword||!se.newPassword||!se.confirmPassword)return D.error("Please fill in all password fields.");if(se.newPassword!==se.confirmPassword)return D.error("New passwords do not match.");if(se.newPassword.length<8)return D.error("Password must be at least 8 characters long.");if(!/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]/.test(se.newPassword))return D.error("Password must include uppercase, lowercase, number, and special character.");try{ae(!0);const be=localStorage.getItem("token");await Ne.put("/user/change-password",{currentPassword:se.currentPassword,newPassword:se.newPassword},{headers:{Authorization:`Bearer ${be}`}}),D.success("Password changed successfully!"),ee({...se,currentPassword:"",newPassword:"",confirmPassword:""}),Z(!1)}catch(be){console.error("Error changing password:",be),D.error(be.response?.data?.message||"Error changing password. Please check your current password.")}finally{ae(!1)}},O=(ie,be)=>{ee(Le=>({...Le,[ie]:be})),Z(!0)},J=ie=>{const be={general:{businessName:"ominbiz",businessEmail:"admin@ominbiz.com",businessPhone:"+254 700 123 456",businessAddress:"123 Business Street, Nairobi",timezone:"Africa/Nairobi",currency:"KES",language:"en"},notifications:{emailNotifications:!0,smsNotifications:!1,pushNotifications:!0,marketingEmails:!1,soundNotifications:!0}};be[ie]&&(ee(Le=>({...Le,...be[ie]})),D.info(`${ie} settings reset to defaults`))};return s||B?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"text-center",children:[e.jsx(cs,{className:"h-8 w-8 animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"Loading settings..."})]})}):t?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold text-foreground flex items-center gap-2",children:[e.jsx(Wa,{className:"h-8 w-8"}),"Settings"]}),e.jsx("p",{className:"text-muted-foreground",children:"Manage your account and application preferences"})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[U&&e.jsxs(De,{variant:"outline",className:"text-amber-600 border-amber-200",children:[e.jsx(Fr,{className:"h-3 w-3 mr-1"}),"Unsaved Changes"]}),e.jsxs(De,{variant:"secondary",children:[e.jsx(la,{className:"h-3 w-3 mr-1"}),a?.role||"User"]})]})]}),e.jsxs(ja,{defaultValue:"general",value:de,onValueChange:H,className:"space-y-6",children:[e.jsxs(Sa,{className:"grid w-full grid-cols-6",children:[e.jsxs(ft,{value:"general",className:"flex items-center gap-2",children:[e.jsx(Wa,{className:"h-4 w-4"}),"General"]}),e.jsxs(ft,{value:"notifications",className:"flex items-center gap-2",children:[e.jsx(Pr,{className:"h-4 w-4"}),"Notifications"]}),e.jsxs(ft,{value:"security",className:"flex items-center gap-2",children:[e.jsx(da,{className:"h-4 w-4"}),"Security"]}),e.jsxs(ft,{value:"appearance",className:"flex items-center gap-2",children:[e.jsx(Lc,{className:"h-4 w-4"}),"Appearance"]}),e.jsxs(ft,{value:"privacy",className:"flex items-center gap-2",children:[e.jsx(gr,{className:"h-4 w-4"}),"Privacy"]}),e.jsxs(ft,{value:"performance",className:"flex items-center gap-2",children:[e.jsx(_a,{className:"h-4 w-4"}),"Performance"]})]}),e.jsx(pt,{value:"general",children:e.jsxs(K,{children:[e.jsxs(xe,{children:[e.jsxs(pe,{className:"flex items-center gap-2",children:[e.jsx(qc,{className:"h-5 w-5"}),"Business Information"]}),e.jsx(ot,{children:"Configure your business details and regional preferences"})]}),e.jsxs(Y,{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs(te,{htmlFor:"businessName",className:"flex items-center gap-2",children:[e.jsx(qc,{className:"h-4 w-4"}),"Business Name"]}),e.jsx(me,{id:"businessName",value:se.businessName,onChange:ie=>O("businessName",ie.target.value),placeholder:"Enter your business name"})]}),e.jsxs("div",{children:[e.jsxs(te,{htmlFor:"businessEmail",className:"flex items-center gap-2",children:[e.jsx(Ks,{className:"h-4 w-4"}),"Business Email"]}),e.jsx(me,{id:"businessEmail",type:"email",value:se.businessEmail,onChange:ie=>O("businessEmail",ie.target.value),placeholder:"business@example.com"})]}),e.jsxs("div",{children:[e.jsxs(te,{htmlFor:"businessPhone",className:"flex items-center gap-2",children:[e.jsx(Ws,{className:"h-4 w-4"}),"Business Phone"]}),e.jsx(me,{id:"businessPhone",value:se.businessPhone,onChange:ie=>O("businessPhone",ie.target.value),placeholder:"+254 700 000 000"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs(te,{htmlFor:"timezone",className:"flex items-center gap-2",children:[e.jsx(ts,{className:"h-4 w-4"}),"Timezone"]}),e.jsxs(Mt,{value:se.timezone,onValueChange:ie=>O("timezone",ie),children:[e.jsx(Lt,{children:e.jsx(Ft,{})}),e.jsxs(It,{children:[e.jsx(Ae,{value:"Africa/Nairobi",children:"East Africa Time (Nairobi)"}),e.jsx(Ae,{value:"Africa/Cairo",children:"Eastern European Time (Cairo)"}),e.jsx(Ae,{value:"UTC",children:"Coordinated Universal Time (UTC)"}),e.jsx(Ae,{value:"America/New_York",children:"Eastern Time (New York)"}),e.jsx(Ae,{value:"Europe/London",children:"Greenwich Mean Time (London)"})]})]})]}),e.jsxs("div",{children:[e.jsxs(te,{htmlFor:"currency",className:"flex items-center gap-2",children:[e.jsx(pa,{className:"h-4 w-4"}),"Currency"]}),e.jsxs(Mt,{value:se.currency,onValueChange:ie=>O("currency",ie),children:[e.jsx(Lt,{children:e.jsx(Ft,{})}),e.jsxs(It,{children:[e.jsx(Ae,{value:"KES",children:"KES - Kenyan Shilling"}),e.jsx(Ae,{value:"USD",children:"USD - US Dollar"}),e.jsx(Ae,{value:"EUR",children:"EUR - Euro"}),e.jsx(Ae,{value:"GBP",children:"GBP - British Pound"}),e.jsx(Ae,{value:"UGX",children:"UGX - Ugandan Shilling"}),e.jsx(Ae,{value:"TZS",children:"TZS - Tanzanian Shilling"})]})]})]}),e.jsxs("div",{children:[e.jsxs(te,{htmlFor:"language",className:"flex items-center gap-2",children:[e.jsx(y_,{className:"h-4 w-4"}),"Language"]}),e.jsxs(Mt,{value:se.language,onValueChange:ie=>O("language",ie),children:[e.jsx(Lt,{children:e.jsx(Ft,{})}),e.jsxs(It,{children:[e.jsx(Ae,{value:"en",children:"English"}),e.jsx(Ae,{value:"sw",children:"Swahili"}),e.jsx(Ae,{value:"fr",children:"French"}),e.jsx(Ae,{value:"ar",children:"Arabic"})]})]})]})]})]}),e.jsxs("div",{children:[e.jsxs(te,{htmlFor:"businessAddress",className:"flex items-center gap-2",children:[e.jsx(Yr,{className:"h-4 w-4"}),"Business Address"]}),e.jsx(As,{id:"businessAddress",value:se.businessAddress,onChange:ie=>O("businessAddress",ie.target.value),placeholder:"Enter your business address",rows:3})]}),e.jsxs("div",{className:"flex gap-3 pt-4 border-t",children:[e.jsxs(R,{onClick:()=>L("general"),disabled:B,className:"flex items-center gap-2",children:[B?e.jsx(cs,{className:"h-4 w-4 animate-spin"}):e.jsx(Ui,{className:"h-4 w-4"}),"Save General Settings"]}),e.jsxs(R,{variant:"outline",onClick:()=>J("general"),disabled:B,children:[e.jsx(cs,{className:"h-4 w-4 mr-2"}),"Reset to Defaults"]})]})]})]})}),e.jsx(pt,{value:"notifications",children:e.jsxs(K,{children:[e.jsxs(xe,{children:[e.jsxs(pe,{className:"flex items-center gap-2",children:[e.jsx(Pr,{className:"h-5 w-5"}),"Notification Preferences"]}),e.jsx(ot,{children:"Control how and when you receive notifications"})]}),e.jsxs(Y,{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg border",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsxs(te,{className:"flex items-center gap-2",children:[e.jsx(Ks,{className:"h-4 w-4"}),"Email Notifications"]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Receive important updates via email"})]}),e.jsx(os,{checked:se.emailNotifications,onCheckedChange:ie=>O("emailNotifications",ie)})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg border",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsxs(te,{className:"flex items-center gap-2",children:[e.jsx(qr,{className:"h-4 w-4"}),"SMS Notifications"]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Get urgent alerts via SMS"})]}),e.jsx(os,{checked:se.smsNotifications,onCheckedChange:ie=>O("smsNotifications",ie)})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg border",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsxs(te,{className:"flex items-center gap-2",children:[e.jsx(_a,{className:"h-4 w-4"}),"Push Notifications"]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Real-time notifications in your browser"})]}),e.jsx(os,{checked:se.pushNotifications,onCheckedChange:ie=>O("pushNotifications",ie)})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg border",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsxs(te,{className:"flex items-center gap-2",children:[se.soundNotifications?e.jsx(mu,{className:"h-4 w-4"}):e.jsx(Gh,{className:"h-4 w-4"}),"Sound Notifications"]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Play sounds for new notifications"})]}),e.jsx(os,{checked:se.soundNotifications,onCheckedChange:ie=>O("soundNotifications",ie)})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg border",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsxs(te,{className:"flex items-center gap-2",children:[e.jsx(wb,{className:"h-4 w-4"}),"Marketing Emails"]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Receive promotions and updates"})]}),e.jsx(os,{checked:se.marketingEmails,onCheckedChange:ie=>O("marketingEmails",ie)})]})]}),e.jsxs("div",{className:"flex gap-3 pt-4 border-t",children:[e.jsxs(R,{onClick:()=>L("notifications"),disabled:B,className:"flex items-center gap-2",children:[B?e.jsx(cs,{className:"h-4 w-4 animate-spin"}):e.jsx(Ui,{className:"h-4 w-4"}),"Save Notification Settings"]}),e.jsxs(R,{variant:"outline",onClick:()=>J("notifications"),disabled:B,children:[e.jsx(cs,{className:"h-4 w-4 mr-2"}),"Reset to Defaults"]})]})]})]})}),e.jsx(pt,{value:"security",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs(K,{children:[e.jsxs(xe,{children:[e.jsxs(pe,{className:"flex items-center gap-2",children:[e.jsx(af,{className:"h-5 w-5"}),"Security Preferences"]}),e.jsx(ot,{children:"Enhance your account security with these settings"})]}),e.jsxs(Y,{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg border",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsxs(te,{className:"flex items-center gap-2",children:[e.jsx(gr,{className:"h-4 w-4"}),"Two-Factor Authentication"]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Extra security layer for your account"})]}),e.jsx(os,{checked:se.twoFactorAuth,onCheckedChange:ie=>O("twoFactorAuth",ie)})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs(te,{htmlFor:"sessionTimeout",className:"flex items-center gap-2",children:[e.jsx(ts,{className:"h-4 w-4"}),"Session Timeout (minutes)"]}),e.jsx(me,{id:"sessionTimeout",type:"number",min:"5",max:"1440",value:se.sessionTimeout,onChange:ie=>O("sessionTimeout",ie.target.value)}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Automatic logout after inactivity"})]}),e.jsxs("div",{children:[e.jsxs(te,{htmlFor:"passwordExpiry",className:"flex items-center gap-2",children:[e.jsx(cs,{className:"h-4 w-4"}),"Password Expiry (days)"]}),e.jsx(me,{id:"passwordExpiry",type:"number",min:"1",max:"365",value:se.passwordExpiry,onChange:ie=>O("passwordExpiry",ie.target.value)}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Require password change periodically"})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg border",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsxs(te,{className:"flex items-center gap-2",children:[e.jsx(Pr,{className:"h-4 w-4"}),"Login Alerts"]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Get notified of new sign-ins"})]}),e.jsx(os,{checked:se.loginAlerts,onCheckedChange:ie=>O("loginAlerts",ie)})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg border",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsxs(te,{className:"flex items-center gap-2",children:[e.jsx(qr,{className:"h-4 w-4"}),"Device Tracking"]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Monitor active devices and sessions"})]}),e.jsx(os,{checked:se.deviceTracking,onCheckedChange:ie=>O("deviceTracking",ie)})]})]}),e.jsx("div",{className:"flex gap-3 pt-4 border-t",children:e.jsxs(R,{onClick:()=>L("security"),disabled:B,className:"flex items-center gap-2",children:[B?e.jsx(cs,{className:"h-4 w-4 animate-spin"}):e.jsx(Ui,{className:"h-4 w-4"}),"Save Security Settings"]})})]})]}),e.jsxs(K,{children:[e.jsxs(xe,{children:[e.jsxs(pe,{className:"flex items-center gap-2",children:[e.jsx(gr,{className:"h-5 w-5"}),"Change Password"]}),e.jsx(ot,{children:"Update your account password for enhanced security"})]}),e.jsxs(Y,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(te,{htmlFor:"currentPassword",children:"Current Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(me,{id:"currentPassword",type:W?"text":"password",value:se.currentPassword,onChange:ie=>O("currentPassword",ie.target.value),placeholder:"Enter current password"}),e.jsx(R,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>q(!W),children:W?e.jsx(ko,{className:"h-4 w-4"}):e.jsx(ca,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{children:[e.jsx(te,{htmlFor:"newPassword",children:"New Password"}),e.jsx(me,{id:"newPassword",type:"password",value:se.newPassword,onChange:ie=>O("newPassword",ie.target.value),placeholder:"Enter new password"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Must be at least 8 characters with uppercase, lowercase, number, and special character"})]}),e.jsxs("div",{children:[e.jsx(te,{htmlFor:"confirmPassword",children:"Confirm New Password"}),e.jsx(me,{id:"confirmPassword",type:"password",value:se.confirmPassword,onChange:ie=>O("confirmPassword",ie.target.value),placeholder:"Confirm new password"})]}),e.jsxs(R,{onClick:X,disabled:B||!se.currentPassword||!se.newPassword||!se.confirmPassword,className:"flex items-center gap-2",children:[B?e.jsx(cs,{className:"h-4 w-4 animate-spin"}):e.jsx(gr,{className:"h-4 w-4"}),"Change Password"]})]})]})]})}),e.jsx(pt,{value:"appearance",children:e.jsx(Bz,{})}),e.jsx(pt,{value:"performance",children:e.jsxs(K,{children:[e.jsxs(xe,{children:[e.jsxs(pe,{className:"flex items-center gap-2",children:[e.jsx(_a,{className:"h-5 w-5"}),"Performance & Data Settings"]}),e.jsx(ot,{children:"Optimize application performance and data usage"})]}),e.jsxs(Y,{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg border",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsxs(te,{className:"flex items-center gap-2",children:[e.jsx(Ui,{className:"h-4 w-4"}),"Auto-Save"]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Automatically save changes as you work"})]}),e.jsx(os,{checked:se.autoSave,onCheckedChange:ie=>{O("autoSave",ie),V(ie),console.log(` Auto-save ${ie?"enabled":"disabled"}`),D.success(`Auto-save ${ie?"enabled":"disabled"}`)}})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg border",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsxs(te,{className:"flex items-center gap-2",children:[e.jsx(cs,{className:"h-4 w-4"}),"Background Sync"]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Keep data synchronized in the background"})]}),e.jsx(os,{checked:se.backgroundSync,onCheckedChange:ie=>{O("backgroundSync",ie),console.log(` Background sync ${ie?"enabled":"disabled"}`)}})]}),e.jsxs("div",{children:[e.jsxs(te,{htmlFor:"cacheSize",className:"flex items-center gap-2",children:[e.jsx(ju,{className:"h-4 w-4"}),"Cache Size: ",se.cacheSize," MB"]}),e.jsx(mi,{id:"cacheSize",min:50,max:500,step:50,value:[se.cacheSize],onValueChange:([ie])=>O("cacheSize",ie),className:"mt-2"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Adjust how much data is cached locally (50-500 MB)"})]}),e.jsx("div",{className:"p-4 rounded-lg bg-muted/50",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(x0,{className:"h-5 w-5 text-muted-foreground mt-0.5"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-medium",children:"Performance Tips"}),e.jsxs("ul",{className:"text-sm text-muted-foreground space-y-1",children:[e.jsx("li",{children:" Enable auto-save to prevent data loss"}),e.jsx("li",{children:" Background sync keeps your data up-to-date"}),e.jsx("li",{children:" Increase cache for faster load times"}),e.jsx("li",{children:" Reduce animations if experiencing lag"})]})]})]})})]}),e.jsxs("div",{className:"flex gap-3 pt-4 border-t",children:[e.jsxs(R,{onClick:()=>L("performance"),disabled:B,className:"flex items-center gap-2",children:[B?e.jsx(cs,{className:"h-4 w-4 animate-spin"}):e.jsx(Ui,{className:"h-4 w-4"}),"Save Performance Settings"]}),e.jsxs(R,{variant:"outline",onClick:()=>{localStorage.clear(),D.success("Cache cleared! Refresh to see changes."),console.log(" Cache cleared")},children:[e.jsx(ga,{className:"h-4 w-4 mr-2"}),"Clear Cache"]})]})]})]})}),e.jsx(pt,{value:"privacy",children:e.jsxs(K,{children:[e.jsxs(xe,{children:[e.jsxs(pe,{className:"flex items-center gap-2",children:[e.jsx(ju,{className:"h-5 w-5"}),"Privacy & Data Settings"]}),e.jsx(ot,{children:"Control how your data is collected and used"})]}),e.jsxs(Y,{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg border",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsxs(te,{className:"flex items-center gap-2",children:[e.jsx(Vi,{className:"h-4 w-4"}),"Data Sharing"]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Share anonymized data to help improve our services"})]}),e.jsx(os,{checked:se.dataSharing,onCheckedChange:ie=>O("dataSharing",ie)})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg border",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsxs(te,{className:"flex items-center gap-2",children:[e.jsx(wb,{className:"h-4 w-4"}),"Usage Analytics"]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Help us understand how you use the application"})]}),e.jsx(os,{checked:se.analytics,onCheckedChange:ie=>O("analytics",ie)})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg border",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsxs(te,{className:"flex items-center gap-2",children:[e.jsx(Fr,{className:"h-4 w-4"}),"Crash Reporting"]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Automatically report errors and crashes"})]}),e.jsx(os,{checked:se.crashReporting,onCheckedChange:ie=>O("crashReporting",ie)})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg border",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsxs(te,{className:"flex items-center gap-2",children:[e.jsx(x0,{className:"h-4 w-4"}),"Usage Statistics"]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Collect data about feature usage and performance"})]}),e.jsx(os,{checked:se.usageStatistics,onCheckedChange:ie=>O("usageStatistics",ie)})]})]}),e.jsx("div",{className:"p-4 rounded-lg bg-muted/50",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(x0,{className:"h-5 w-5 text-muted-foreground mt-0.5"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-medium",children:"Data Privacy Information"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"We respect your privacy. All data collection is anonymized and used solely to improve your experience. You can review our privacy policy for more details."}),e.jsxs(R,{variant:"outline",size:"sm",className:"flex items-center gap-2",children:[e.jsx(_l,{className:"h-3 w-3"}),"View Privacy Policy"]})]})]})}),e.jsxs("div",{className:"flex gap-3 pt-4 border-t",children:[e.jsxs(R,{onClick:()=>L("privacy"),disabled:B,className:"flex items-center gap-2",children:[B?e.jsx(cs,{className:"h-4 w-4 animate-spin"}):e.jsx(Ui,{className:"h-4 w-4"}),"Save Privacy Settings"]}),e.jsxs(R,{variant:"outline",className:"flex items-center gap-2",children:[e.jsx(Ma,{className:"h-4 w-4"}),"Export Data"]}),e.jsxs(R,{variant:"outline",className:"flex items-center gap-2 text-red-600 hover:text-red-700",children:[e.jsx(ga,{className:"h-4 w-4"}),"Delete Account"]})]})]})]})})]})]}):e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs(K,{className:"p-6 text-center",children:[e.jsx(Fr,{className:"h-12 w-12 text-yellow-500 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Authentication Required"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"Please log in to access settings"}),e.jsx(R,{onClick:()=>window.location.href="/login",children:"Go to Login"})]})})};var Uz="Separator",Zw="horizontal",Vz=["horizontal","vertical"],SE=v.forwardRef((t,s)=>{const{decorative:a,orientation:r=Zw,...i}=t,o=$z(r)?r:Zw,u=a?{role:"none"}:{"aria-orientation":o==="vertical"?o:void 0,role:"separator"};return e.jsx(ma.div,{"data-orientation":o,...u,...i,ref:s})});SE.displayName=Uz;function $z(t){return Vz.includes(t)}var CE=SE;const Pn=v.forwardRef(({className:t,orientation:s="horizontal",decorative:a=!0,...r},i)=>e.jsx(CE,{ref:i,decorative:a,orientation:s,className:Ze("shrink-0 bg-border",s==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",t),...r}));Pn.displayName=CE.displayName;const TE=()=>{const[t,s]=v.useState(navigator.onLine),[a,r]=v.useState(!1);return v.useEffect(()=>{const i=()=>{s(!0),r(!0),setTimeout(()=>r(!1),5e3)},o=()=>{s(!1)};return window.addEventListener("online",i),window.addEventListener("offline",o),()=>{window.removeEventListener("online",i),window.removeEventListener("offline",o)}},[]),{isOnline:t,wasOffline:a}},Hz=({showBadge:t=!0,className:s=""})=>{const{isOnline:a,wasOffline:r}=TE();return v.useEffect(()=>{r&&D.success("Back online!",{description:"Your internet connection has been restored.",icon:e.jsx(us,{className:"h-4 w-4"})})},[r]),v.useEffect(()=>{a||D.error("No internet connection",{description:"You are currently offline. Some features may not work.",icon:e.jsx(Ic,{className:"h-4 w-4"}),duration:1/0})},[a]),t?e.jsx("div",{className:`flex items-center gap-2 ${s}`,children:a?e.jsxs(De,{variant:"outline",className:"bg-green-50 text-green-700 border-green-200",children:[e.jsx(of,{className:"h-3 w-3 mr-1"}),"Online"]}):e.jsxs(De,{variant:"outline",className:"bg-red-50 text-red-700 border-red-200 animate-pulse",children:[e.jsx(Ic,{className:"h-3 w-3 mr-1"}),"Offline"]})}):null},Wz=()=>{const{user:t,isAuthenticated:s,loading:a}=_s(),{theme:r,customAccentColor:i}=id();TE();const[o,c]=v.useState(!1),[u,f]=v.useState("overview"),[x,h]=v.useState(!1),[p,g]=v.useState("public"),[y,b]=v.useState(!1),[N,S]=v.useState(""),[C,k]=v.useState(1),[A,G]=v.useState(0),[F,E]=v.useState(!1);v.useRef(null);const T=v.useRef(null),_=v.useRef(null),[P,z]=v.useState({firstName:"",lastName:"",email:"",phone:"",address:"",city:"",country:"",dateOfBirth:"",gender:"",jobTitle:"",department:"",bio:"",avatar:"",coverImage:"",website:"",linkedin:"",twitter:"",github:"",instagram:"",skills:[],languages:[],interests:[],timezone:"UTC",emergencyContact:"",emergencyPhone:"",pronouns:"",location:"",workingHours:"9:00 AM - 5:00 PM",availability:"available",customFields:{}}),[V,W]=v.useState({completionRate:0,profileViews:0,connections:0,totalOrders:0,totalRevenue:0,activeProjects:0,teamMembers:0,rating:0,reviewsCount:0,engagements:0,totalSales:0,achievements:[]}),[q,B]=v.useState({emailNotifications:!0,pushNotifications:!0,marketingEmails:!1,weeklyDigest:!0,profileVisibility:"public",showActivity:!0,showStats:!0,allowMessages:!0,showOnlineStatus:!0}),[ae,U]=v.useState({twoFactorEnabled:!1,loginAlerts:!0,sessionTimeout:30,deviceTracking:!0,passwordLastChanged:"2024-01-15"}),[Z,de]=v.useState([]),[H,se]=v.useState([{name:"JavaScript",level:90,category:"Programming"},{name:"React",level:85,category:"Frontend"},{name:"Node.js",level:80,category:"Backend"},{name:"Python",level:75,category:"Programming"},{name:"UI/UX Design",level:70,category:"Design"},{name:"Project Management",level:85,category:"Management"}]),[ee,L]=v.useState([]),[X,O]=v.useState(!1),[J,ie]=v.useState(!1),[be,Le]=v.useState({email:"",message:""}),[ve,oe]=v.useState(!1),[Pe,Xe]=v.useState(""),[yt,vt]=v.useState(!1),gt=async()=>{O(!0);try{const Se=await Ne.get("/connections");L(Se.data.connections||[])}catch(Se){console.error("Error fetching connections:",Se),L([{id:1,name:"Sarah Johnson",role:"Product Manager",email:"sarah@example.com",avatar:"",mutual:12,connected:!0},{id:2,name:"Mike Chen",role:"Developer",email:"mike@example.com",avatar:"",mutual:8,connected:!0},{id:3,name:"Emily Davis",role:"Designer",email:"emily@example.com",avatar:"",mutual:15,connected:!1},{id:4,name:"Alex Rodriguez",role:"Marketing Lead",email:"alex@example.com",avatar:"",mutual:6,connected:!0}])}finally{O(!1)}},bt=async Se=>{try{await Ne.post(`/connections/${Se}/connect`),L(dt=>dt.map(Ct=>Ct.id===Se?{...Ct,connected:!0}:Ct)),D.success("Connection request sent!")}catch(dt){console.error("Error connecting:",dt),D.error("Failed to send connection request")}},lt=async Se=>{try{await Ne.delete(`/connections/${Se}`),L(dt=>dt.map(Ct=>Ct.id===Se?{...Ct,connected:!1}:Ct)),D.success("Connection removed")}catch(dt){console.error("Error disconnecting:",dt),D.error("Failed to remove connection")}},ms=async()=>{if(!be.email){D.error("Please enter an email address");return}try{await Ne.post("/connections/invite",be),D.success("Connection invitation sent!"),ie(!1),Le({email:"",message:""}),gt()}catch(Se){console.error("Error adding connection:",Se),D.error(Se.response?.data?.message||"Failed to send invitation")}},is=async()=>{if(Pe!=="DELETE"){D.error("Please type DELETE to confirm");return}vt(!0);try{const Se=localStorage.getItem("token");await Ne.delete("/user/account",{headers:{Authorization:`Bearer ${Se}`}}),localStorage.clear(),sessionStorage.clear(),D.success("Account deleted successfully. Redirecting..."),setTimeout(()=>{window.location.href="/"},1500)}catch(Se){console.error("Error deleting account:",Se),D.error(Se.response?.data?.message||"Failed to delete account"),vt(!1)}},[Ms,ys]=v.useState([]),[Xs,xs]=v.useState(null),[Rt,sa]=v.useState({brightness:100,contrast:100,saturation:100}),Te=[{id:1,name:"Gold Crown",icon:VS,color:"border-yellow-400"},{id:2,name:"Silver Diamond",icon:C_,color:"border-gray-300"},{id:3,name:"Blue Tech",icon:$S,color:"border-blue-500"},{id:4,name:"Green Nature",icon:Rl,color:"border-green-500"},{id:5,name:"Red Flame",icon:T_,color:"border-red-500"}];v.useEffect(()=>{(async()=>{if(s)try{const dt=localStorage.getItem("token"),Et=(await Ne.get("/user/profile",{headers:{Authorization:`Bearer ${dt}`}})).data,hs={firstName:Et.firstName||Et.name?.split(" ")[0]||"",lastName:Et.lastName||Et.name?.split(" ")[1]||"",email:Et.email||"",phone:Et.phone||"",address:Et.address||"",city:Et.city||"",country:Et.country||"",dateOfBirth:Et.dateOfBirth?Et.dateOfBirth.split("T")[0]:"",gender:Et.gender||"",jobTitle:Et.jobTitle||Et.role||"",department:Et.department||"",bio:Et.bio||"",avatar:Et.avatar||"",location:Et.city||Et.country||""};z(hs),Et.avatar&&ys([Et.avatar]),console.log(" Profile data loaded:",hs)}catch(dt){console.error(" Error fetching profile data:",dt),D.error("Error fetching profile data.")}})(),s&&gt()},[s,t]),v.useEffect(()=>{if(u==="connections"&&s){gt();const Se=setInterval(gt,3e4);return()=>clearInterval(Se)}},[u,s]),v.useEffect(()=>{(async()=>{if(s)try{const Ct={Authorization:`Bearer ${localStorage.getItem("token")}`},[Et,hs,vs,Ts]=await Promise.allSettled([Ne.get("/orders",{headers:Ct}),Ne.get("/invoices",{headers:Ct}),Ne.get("/team",{headers:Ct}),Ne.get("/products",{headers:Ct})]),Bs=Et.status==="fulfilled"?Array.isArray(Et.value?.data)?Et.value.data:[]:[],Q=hs.status==="fulfilled"?Array.isArray(hs.value?.data)?hs.value.data:[]:[],ue=vs.status==="fulfilled"?Array.isArray(vs.value?.data)?vs.value.data:[]:[],le=Ts.status==="fulfilled"?Array.isArray(Ts.value?.data)?Ts.value.data:[]:[],M=Bs.reduce((Ee,Je)=>{const it=parseFloat(Je.total||Je.amount||0);return Ee+it},0),ne=Bs.length,ce=ue.length,Re=le.filter(Ee=>Ee.status==="active").length,$e=[{id:1,title:"First Sale",description:"Made your first sale",earned:ne>0,icon:"",date:ne>0?Bs[0]?.createdAt:null,type:"sales"},{id:2,title:"Team Builder",description:"Added 10+ team members",earned:ce>=10,icon:"",date:ce>=10?new Date().toISOString():null,type:"team"},{id:3,title:"Revenue Milestone",description:"Reached $10K revenue",earned:M>=1e4,icon:"",date:M>=1e4?new Date().toISOString():null,type:"revenue"},{id:4,title:"Customer Champion",description:"100+ satisfied customers",earned:ne>=100,icon:"",date:ne>=100?new Date().toISOString():null,type:"customer"},{id:5,title:"Innovation Leader",description:"Launched 5+ products",earned:le.length>=5,icon:"",date:le.length>=5?new Date().toISOString():null,type:"innovation"},{id:6,title:"Community Builder",description:"50+ orders completed",earned:ne>=50,icon:"",date:ne>=50?new Date().toISOString():null,type:"community"}],Oe=[...Bs.slice(0,3).map((Ee,Je)=>({id:`order-${Je}`,action:`Created order #${Ee.orderNumber||Ee._id?.slice(-6)} - ${Ee.customerName||"Customer"}`,timestamp:je(Ee.createdAt),type:"order",icon:Yt,color:"text-blue-500",metadata:{amount:Ee.total||Ee.amount}})),...Q.slice(0,2).map((Ee,Je)=>({id:`invoice-${Je}`,action:`Generated invoice #${Ee.invoiceNumber||Ee._id?.slice(-6)} - $${Ee.total||0}`,timestamp:je(Ee.createdAt),type:"finance",icon:ra,color:"text-green-500",metadata:{amount:Ee.total}})),...ue.slice(0,2).map((Ee,Je)=>({id:`team-${Je}`,action:`Added team member: ${Ee.name||Ee.email}`,timestamp:je(Ee.createdAt),type:"team",icon:Zt,color:"text-orange-500"})),...le.filter(Ee=>Ee.createdAt).slice(0,2).map((Ee,Je)=>({id:`product-${Je}`,action:`Added product: ${Ee.name}`,timestamp:je(Ee.createdAt),type:"product",icon:Yt,color:"text-purple-500"}))].slice(0,8);de(Oe);const Me=Bs.length+Q.length+ue.length+le.length,Ie=Bs.filter(Ee=>Ee.status==="completed"||Ee.status==="delivered").length,he=Bs.filter(Ee=>Ee.status==="completed"||Ee.status==="delivered").filter(Ee=>Ee.rating),We=he.length>0?he.reduce((Ee,Je)=>Ee+(Je.rating||0),0)/he.length:0;W({completionRate:ct(),profileViews:0,connections:ue.length,totalOrders:ne,totalRevenue:M,activeProjects:Re,teamMembers:ce,rating:We,reviewsCount:he.length,engagements:Me,totalSales:Ie,achievements:$e}),Oe.length>0&&de(Oe),console.log(" Performance data loaded:",{orders:ne,revenue:M,team:ce,achievements:$e.filter(Ee=>Ee.earned).length})}catch(dt){console.error(" Error fetching performance data:",dt)}})()},[s]);const je=Se=>{if(!Se)return"Recently";const dt=new Date(Se),Et=new Date-dt,hs=Math.floor(Et/6e4),vs=Math.floor(Et/36e5),Ts=Math.floor(Et/864e5);return hs<60?`${hs} minute${hs!==1?"s":""} ago`:vs<24?`${vs} hour${vs!==1?"s":""} ago`:Ts<7?`${Ts} day${Ts!==1?"s":""} ago`:dt.toLocaleDateString()},fe=async()=>{try{const Se=localStorage.getItem("token"),dt={...P};(!dt.gender||dt.gender==="")&&delete dt.gender,Object.keys(dt).forEach(Ct=>{dt[Ct]===""&&delete dt[Ct]}),await Ne.put("/user/profile",dt,{headers:{Authorization:`Bearer ${Se}`}}),D.success("Profile updated successfully!"),c(!1)}catch(Se){D.error("Error updating profile."),console.error("Error updating profile:",Se)}},Ue=async Se=>{const dt=Se.target.files[0];if(dt){if(dt.size>5*1024*1024){D.error("File size must be less than 5MB");return}if(!dt.type.startsWith("image/")){D.error("Please select an image file");return}try{E(!0);const Ct=new FileReader;Ct.onload=Et=>{const hs=Et.target.result;S(hs),b(!0),ys(vs=>[hs,...vs.slice(0,4)])},Ct.readAsDataURL(dt)}catch(Ct){D.error("Error processing image"),console.error("Error processing image:",Ct)}finally{E(!1)}}},st=()=>{N&&(z({...P,avatar:N}),D.success("Profile picture updated!"),b(!1),k(1),G(0),sa({brightness:100,contrast:100,saturation:100}))},Dt=async()=>{const Se=prompt("Enter image URL:");if(Se)try{E(!0);const dt=new Sb;dt.onload=()=>{S(Se),b(!0),ys(Ct=>[Se,...Ct.slice(0,4)])},dt.onerror=()=>D.error("Invalid image URL"),dt.src=Se}catch{D.error("Error loading image from URL")}finally{E(!1)}},Pt=Se=>{const dt=Se.target.files[0];if(dt){if(dt.size>10*1024*1024){D.error("File size must be less than 10MB");return}const Ct=new FileReader;Ct.onload=Et=>{z({...P,coverImage:Et.target.result}),D.success("Cover image updated!")},Ct.readAsDataURL(dt)}},Jt=()=>{z({...P,avatar:""}),S(""),D.success("Profile picture removed")},as=()=>{G(Se=>(Se+90)%360)},ke=Se=>{k(dt=>{const Ct=Se==="in"?dt+.1:dt-.1;return Math.max(.5,Math.min(3,Ct))})},we=(Se,dt)=>{sa(Ct=>({...Ct,[Se]:dt}))},nt=(Se,dt=50)=>{Se&&!H.find(Ct=>Ct.name.toLowerCase()===Se.toLowerCase())&&(se([...H,{name:Se,level:dt,category:"Other"}]),D.success(`Added skill: ${Se}`))},Ke=Se=>{se(H.filter(dt=>dt.name!==Se)),D.success(`Removed skill: ${Se}`)},jt=(Se,dt)=>{se(H.map(Ct=>Ct.name===Se?{...Ct,level:dt}:Ct))},wt=()=>{const Se=`${window.location.origin}/profile/${t?.id}`;return`https://api.qrserver.com/v1/create-qr-code/?size=200x200&data=${encodeURIComponent(Se)}`},Xt=()=>{const Se=`${window.location.origin}/profile/${t?.id}`;navigator.clipboard.writeText(Se),D.success("Profile link copied to clipboard!")},ss=async()=>{const Se=`${window.location.origin}/profile/${t?.id}`;if(navigator.share)try{await navigator.share({title:`${P.firstName} ${P.lastName}'s Profile`,text:"Check out my profile on ominbiz",url:Se})}catch{Xt()}else Xt()},ge=()=>{const Se={...P,stats:V,preferences:q,exportedAt:new Date().toISOString()},dt=new Blob([JSON.stringify(Se,null,2)],{type:"application/json"}),Ct=URL.createObjectURL(dt),Et=document.createElement("a");Et.href=Ct,Et.download=`${P.firstName}_${P.lastName}_profile.json`,Et.click(),URL.revokeObjectURL(Ct),D.success("Profile exported successfully!")},tt=async()=>{D.info("This feature would generate a profile card image")};if(a)return e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-primary"})});if(!s)return e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsx(K,{className:"w-96",children:e.jsxs(Y,{className:"p-6 text-center",children:[e.jsx(da,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground"}),e.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Authentication Required"}),e.jsx("p",{className:"text-muted-foreground",children:"Please log in to view your profile."})]})})});const ct=()=>{const Se=[P.firstName,P.lastName,P.email,P.phone,P.bio,P.jobTitle,P.avatar,P.location],dt=Se.filter(Ct=>Ct&&Ct.trim()!=="").length;return Math.round(dt/Se.length*100)},ns=Se=>{switch(Se){case"available":return"bg-green-500";case"busy":return"bg-red-500";case"away":return"bg-yellow-500";default:return"bg-gray-500"}},ht=Se=>{switch(Se){case"available":return"Available";case"busy":return"Busy";case"away":return"Away";default:return"Offline"}};return e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsxs("div",{className:"relative h-64 bg-gradient-to-r from-blue-600 via-purple-600 to-pink-600 overflow-hidden",children:[P.coverImage&&e.jsx("img",{src:P.coverImage,alt:"Cover",className:"w-full h-full object-cover"}),e.jsx("div",{className:"absolute inset-0 bg-black/20"}),o&&e.jsxs("div",{className:"absolute top-4 right-4",children:[e.jsx("input",{type:"file",accept:"image/*",onChange:Pt,className:"hidden",id:"cover-upload",ref:_}),e.jsxs(R,{variant:"secondary",size:"sm",onClick:()=>_.current?.click(),children:[e.jsx(ng,{className:"h-4 w-4 mr-2"}),"Change Cover"]})]}),e.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-6",children:e.jsxs("div",{className:"flex items-end gap-6",children:[e.jsxs("div",{className:"relative group",children:[e.jsxs("div",{className:`relative rounded-full p-1 ${Xs?Xs.color:"border-4 border-white/20"}`,children:[e.jsxs(hr,{className:"h-32 w-32 border-4 border-white shadow-lg",children:[e.jsx(On,{src:P.avatar,alt:`${P.firstName} ${P.lastName}`}),e.jsxs(fr,{className:"text-2xl font-bold bg-primary text-primary-foreground",children:[P.firstName?.[0],P.lastName?.[0]]})]}),o&&e.jsxs(bg,{children:[e.jsx(wg,{asChild:!0,children:e.jsx("div",{className:"absolute inset-0 bg-black/50 rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity cursor-pointer",children:e.jsx(ng,{className:"h-8 w-8 text-white"})})}),e.jsxs(Sg,{align:"center",children:[e.jsxs(Wn,{onClick:()=>T.current?.click(),children:[e.jsx(N_,{className:"h-4 w-4 mr-2"}),"Upload Photo"]}),e.jsxs(Wn,{onClick:Dt,children:[e.jsx(_c,{className:"h-4 w-4 mr-2"}),"From URL"]}),P.avatar&&e.jsxs(Wn,{onClick:Jt,children:[e.jsx(ga,{className:"h-4 w-4 mr-2"}),"Remove Photo"]}),Ms.length>0&&e.jsxs(Wn,{onClick:()=>b(!0),children:[e.jsx(Yi,{className:"h-4 w-4 mr-2"}),"Edit Photo"]})]})]})]}),e.jsx("div",{className:`absolute bottom-2 right-2 h-6 w-6 rounded-full border-2 border-white ${ns(P.availability)}`})]}),e.jsxs("div",{className:"flex-1 text-white",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsxs("h1",{className:"text-3xl font-bold",children:[P.firstName," ",P.lastName]}),P.pronouns&&e.jsx(De,{variant:"secondary",className:"text-xs",children:P.pronouns}),e.jsx("div",{className:`px-2 py-1 rounded-full text-xs font-medium ${ns(P.availability)} text-white`,children:ht(P.availability)}),e.jsx(Hz,{showBadge:!0,className:"bg-white/10 backdrop-blur-sm px-2 py-1 rounded-full"})]}),e.jsxs("div",{className:"flex items-center gap-4 text-sm opacity-90 mb-3",children:[P.jobTitle&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Pl,{className:"h-4 w-4"}),P.jobTitle]}),P.location&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Yr,{className:"h-4 w-4"}),P.location]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Ja,{className:"h-4 w-4 fill-current"}),V.rating," (",V.reviewsCount," reviews)"]})]}),P.bio&&e.jsx("p",{className:"text-sm opacity-90 max-w-2xl",children:P.bio})]}),e.jsx("div",{className:"flex items-center gap-2",children:o?e.jsxs(e.Fragment,{children:[e.jsx(R,{variant:"outline",onClick:()=>c(!1),children:"Cancel"}),e.jsxs(R,{onClick:fe,children:[e.jsx(Ui,{className:"h-4 w-4 mr-2"}),"Save Changes"]})]}):e.jsxs(e.Fragment,{children:[e.jsxs(R,{variant:"secondary",size:"sm",onClick:ss,children:[e.jsx(Gc,{className:"h-4 w-4 mr-2"}),"Share"]}),e.jsxs(R,{variant:"secondary",size:"sm",onClick:()=>h(!0),children:[e.jsx(ig,{className:"h-4 w-4 mr-2"}),"QR Code"]}),e.jsxs(R,{onClick:()=>c(!0),children:[e.jsx(Yi,{className:"h-4 w-4 mr-2"}),"Edit Profile"]})]})})]})})]}),e.jsx("input",{type:"file",accept:"image/*",onChange:Ue,className:"hidden",ref:T}),e.jsxs("div",{className:"max-w-7xl mx-auto px-6 py-8",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[e.jsx(K,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Total Orders"}),e.jsx("p",{className:"text-2xl font-bold",children:V.totalOrders.toLocaleString()}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"From orders API"})]}),e.jsx(Yt,{className:"h-8 w-8 text-blue-500"})]})}),e.jsx(K,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Total Revenue"}),e.jsxs("p",{className:"text-2xl font-bold",children:["$",V.totalRevenue.toLocaleString()]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Calculated from orders"})]}),e.jsx(ra,{className:"h-8 w-8 text-green-500"})]})}),e.jsx(K,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Engagements"}),e.jsx("p",{className:"text-2xl font-bold",children:V.engagements.toLocaleString()}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Orders + Invoices + Team + Products"})]}),e.jsx(Is,{className:"h-8 w-8 text-purple-500"})]})}),e.jsx(K,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Completed Sales"}),e.jsx("p",{className:"text-2xl font-bold",children:V.totalSales.toLocaleString()}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Delivered orders"})]}),e.jsx(us,{className:"h-8 w-8 text-emerald-500"})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[e.jsx(K,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Team Size"}),e.jsx("p",{className:"text-2xl font-bold",children:V.teamMembers})]}),e.jsx(Zt,{className:"h-8 w-8 text-orange-500"})]})}),e.jsx(K,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Active Projects"}),e.jsx("p",{className:"text-2xl font-bold",children:V.activeProjects})]}),e.jsx(Pl,{className:"h-8 w-8 text-indigo-500"})]})}),e.jsx(K,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Avg Rating"}),e.jsx("p",{className:"text-2xl font-bold",children:V.rating?V.rating.toFixed(1):"0.0"}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[V.reviewsCount," reviews"]})]}),e.jsx(Ja,{className:"h-8 w-8 text-yellow-500 fill-current"})]})}),e.jsx(K,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Profile Progress"}),e.jsxs("p",{className:"text-2xl font-bold",children:[ct(),"%"]})]}),e.jsx(vi,{className:"h-8 w-8 text-pink-500"})]})})]}),e.jsxs(ja,{value:u,onValueChange:f,className:"space-y-6",children:[e.jsxs(Sa,{className:"grid w-full grid-cols-6",children:[e.jsx(ft,{value:"overview",children:"Overview"}),e.jsx(ft,{value:"about",children:"About"}),e.jsx(ft,{value:"skills",children:"Skills"}),e.jsx(ft,{value:"activity",children:"Activity"}),e.jsx(ft,{value:"connections",children:"Network"}),e.jsx(ft,{value:"settings",children:"Settings"})]}),e.jsx(pt,{value:"overview",className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs(K,{children:[e.jsxs(xe,{children:[e.jsxs(pe,{className:"flex items-center gap-2",children:[e.jsx(vi,{className:"h-5 w-5"}),"Profile Completion"]}),e.jsx(ot,{children:"Complete your profile to get better visibility"})]}),e.jsx(Y,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium",children:"Overall Progress"}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[ct(),"%"]})]}),e.jsx(Cr,{value:ct(),className:"h-2"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mt-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(us,{className:`h-4 w-4 ${P.avatar?"text-green-500":"text-gray-300"}`}),e.jsx("span",{className:"text-sm",children:"Profile Picture"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(us,{className:`h-4 w-4 ${P.bio?"text-green-500":"text-gray-300"}`}),e.jsx("span",{className:"text-sm",children:"Bio"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(us,{className:`h-4 w-4 ${P.jobTitle?"text-green-500":"text-gray-300"}`}),e.jsx("span",{className:"text-sm",children:"Job Title"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(us,{className:`h-4 w-4 ${P.location?"text-green-500":"text-gray-300"}`}),e.jsx("span",{className:"text-sm",children:"Location"})]})]})]})})]}),e.jsxs(K,{children:[e.jsxs(xe,{children:[e.jsxs(pe,{className:"flex items-center gap-2",children:[e.jsx(gv,{className:"h-5 w-5"}),"Achievements"]}),e.jsx(ot,{children:"Your milestones and accomplishments"})]}),e.jsx(Y,{children:e.jsx("div",{className:"grid grid-cols-2 gap-4",children:V.achievements.map(Se=>e.jsx("div",{className:`p-4 rounded-lg border-2 transition-all ${Se.earned?"border-green-200 bg-green-50 dark:border-green-800 dark:bg-green-950":"border-gray-200 bg-gray-50 dark:border-gray-800 dark:bg-gray-950 opacity-60"}`,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"text-2xl",children:Se.icon}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-medium text-sm",children:Se.title}),e.jsx("p",{className:"text-xs text-muted-foreground",children:Se.description}),Se.earned&&Se.date&&e.jsxs("p",{className:"text-xs text-green-600 dark:text-green-400 mt-1",children:["Earned ",new Date(Se.date).toLocaleDateString()]})]}),Se.earned&&e.jsx(us,{className:"h-5 w-5 text-green-500"})]})},Se.id))})})]}),e.jsxs(K,{children:[e.jsxs(xe,{children:[e.jsxs(pe,{className:"flex items-center gap-2",children:[e.jsx(La,{className:"h-5 w-5"}),"Recent Activity"]}),e.jsx(ot,{children:"Your latest actions and updates"})]}),e.jsx(Y,{children:e.jsx(kr,{className:"h-64",children:e.jsx("div",{className:"space-y-4",children:Z.map(Se=>e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:`p-2 rounded-full ${Se.color} bg-opacity-10`,children:e.jsx(Se.icon,{className:`h-4 w-4 ${Se.color}`})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium",children:Se.action}),e.jsx("p",{className:"text-xs text-muted-foreground",children:Se.timestamp})]})]},Se.id))})})})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(K,{children:[e.jsx(xe,{children:e.jsxs(pe,{className:"flex items-center gap-2",children:[e.jsx(_a,{className:"h-5 w-5"}),"Quick Actions"]})}),e.jsxs(Y,{className:"space-y-3",children:[e.jsxs(R,{variant:"outline",className:"w-full justify-start",onClick:Xt,children:[e.jsx(_c,{className:"h-4 w-4 mr-2"}),"Copy Profile Link"]}),e.jsxs(R,{variant:"outline",className:"w-full justify-start",onClick:ge,children:[e.jsx(Ma,{className:"h-4 w-4 mr-2"}),"Export Profile"]}),e.jsxs(R,{variant:"outline",className:"w-full justify-start",onClick:()=>h(!0),children:[e.jsx(ig,{className:"h-4 w-4 mr-2"}),"Show QR Code"]}),e.jsxs(R,{variant:"outline",className:"w-full justify-start",onClick:tt,children:[e.jsx(Sb,{className:"h-4 w-4 mr-2"}),"Save as Image"]})]})]}),e.jsxs(K,{children:[e.jsx(xe,{children:e.jsxs(pe,{className:"flex items-center gap-2",children:[e.jsx(_o,{className:"h-5 w-5"}),"Social Links"]})}),e.jsxs(Y,{className:"space-y-3",children:[P.website&&e.jsxs("a",{href:P.website,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 text-sm hover:text-primary transition-colors",children:[e.jsx(_o,{className:"h-4 w-4"}),"Website",e.jsx(_l,{className:"h-3 w-3"})]}),P.linkedin&&e.jsxs("a",{href:P.linkedin,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 text-sm hover:text-primary transition-colors",children:[e.jsx(vv,{className:"h-4 w-4"}),"LinkedIn",e.jsx(_l,{className:"h-3 w-3"})]}),P.github&&e.jsxs("a",{href:P.github,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 text-sm hover:text-primary transition-colors",children:[e.jsx(Bc,{className:"h-4 w-4"}),"GitHub",e.jsx(_l,{className:"h-3 w-3"})]}),P.twitter&&e.jsxs("a",{href:P.twitter,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 text-sm hover:text-primary transition-colors",children:[e.jsx(jv,{className:"h-4 w-4"}),"Twitter",e.jsx(_l,{className:"h-3 w-3"})]})]})]}),e.jsxs(K,{children:[e.jsx(xe,{children:e.jsxs(pe,{className:"flex items-center gap-2",children:[e.jsx(er,{className:"h-5 w-5"}),"Profile Stats"]})}),e.jsxs(Y,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm",children:"Total Orders"}),e.jsx("span",{className:"font-medium",children:V.totalOrders})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm",children:"Revenue"}),e.jsxs("span",{className:"font-medium",children:["$",V.totalRevenue.toLocaleString()]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm",children:"Active Projects"}),e.jsx("span",{className:"font-medium",children:V.activeProjects})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm",children:"Team Members"}),e.jsx("span",{className:"font-medium",children:V.teamMembers})]})]})]})]})]})}),e.jsx(pt,{value:"about",className:"space-y-6",children:e.jsxs(K,{children:[e.jsxs(xe,{children:[e.jsx(pe,{children:"About Me"}),e.jsx(ot,{children:"Personal and professional information"})]}),e.jsx(Y,{className:"space-y-6",children:o?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(te,{children:"First Name"}),e.jsx(me,{value:P.firstName,onChange:Se=>z({...P,firstName:Se.target.value})})]}),e.jsxs("div",{children:[e.jsx(te,{children:"Last Name"}),e.jsx(me,{value:P.lastName,onChange:Se=>z({...P,lastName:Se.target.value})})]})]}),e.jsxs("div",{children:[e.jsx(te,{children:"Bio"}),e.jsx(As,{rows:4,value:P.bio,onChange:Se=>z({...P,bio:Se.target.value}),placeholder:"Tell us about yourself..."})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(te,{children:"Email"}),e.jsx(me,{type:"email",value:P.email,onChange:Se=>z({...P,email:Se.target.value})})]}),e.jsxs("div",{children:[e.jsx(te,{children:"Phone"}),e.jsx(me,{value:P.phone,onChange:Se=>z({...P,phone:Se.target.value})})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(te,{children:"Job Title"}),e.jsx(me,{value:P.jobTitle,onChange:Se=>z({...P,jobTitle:Se.target.value})})]}),e.jsxs("div",{children:[e.jsx(te,{children:"Department"}),e.jsx(me,{value:P.department,onChange:Se=>z({...P,department:Se.target.value})})]})]}),e.jsxs("div",{children:[e.jsx(te,{children:"Location"}),e.jsx(me,{value:P.location,onChange:Se=>z({...P,location:Se.target.value})})]})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Ks,{className:"h-5 w-5 text-muted-foreground mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Email"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:P.email||"Not provided"})]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Ws,{className:"h-5 w-5 text-muted-foreground mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Phone"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:P.phone||"Not provided"})]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Pl,{className:"h-5 w-5 text-muted-foreground mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Job Title"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:P.jobTitle||"Not provided"})]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Yr,{className:"h-5 w-5 text-muted-foreground mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Location"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:P.location||"Not provided"})]})]})]})})]})}),e.jsx(pt,{value:"skills",className:"space-y-6",children:e.jsxs(K,{children:[e.jsx(xe,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(pe,{children:"Skills & Expertise"}),e.jsx(ot,{children:"Your professional skills and proficiency levels"})]}),e.jsxs(R,{size:"sm",onClick:()=>{const Se=prompt("Enter skill name:");Se&&nt(Se,50)},children:[e.jsx(Gs,{className:"h-4 w-4 mr-2"}),"Add Skill"]})]})}),e.jsx(Y,{children:e.jsx("div",{className:"space-y-6",children:H.map(Se=>e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"font-medium",children:Se.name}),e.jsx(De,{variant:"secondary",className:"text-xs",children:Se.category})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-sm text-muted-foreground",children:[Se.level,"%"]}),e.jsx(R,{variant:"ghost",size:"sm",onClick:()=>Ke(Se.name),children:e.jsx(jr,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Cr,{value:Se.level,className:"h-2 flex-1"}),e.jsx(mi,{value:[Se.level],onValueChange:([dt])=>jt(Se.name,dt),max:100,step:5,className:"w-32"})]})]},Se.name))})})]})}),e.jsx(pt,{value:"activity",className:"space-y-6",children:e.jsxs(K,{children:[e.jsxs(xe,{children:[e.jsx(pe,{children:"Activity Timeline"}),e.jsx(ot,{children:"Your recent actions and updates"})]}),e.jsx(Y,{children:e.jsx(kr,{className:"h-96",children:e.jsx("div",{className:"space-y-4",children:Z.map(Se=>e.jsxs("div",{className:"flex items-start gap-4 p-4 rounded-lg hover:bg-muted/50 transition-colors",children:[e.jsx("div",{className:`p-2 rounded-full ${Se.color} bg-opacity-10`,children:e.jsx(Se.icon,{className:`h-5 w-5 ${Se.color}`})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-medium",children:Se.action}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:Se.timestamp}),e.jsx(De,{variant:"outline",className:"mt-2 text-xs",children:Se.type})]})]},Se.id))})})})]})}),e.jsx(pt,{value:"connections",className:"space-y-6",children:e.jsxs(K,{children:[e.jsx(xe,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(pe,{children:"Network & Connections"}),e.jsxs(ot,{children:[ee.length," connections",X&&"  Refreshing..."]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(R,{size:"sm",variant:"outline",onClick:gt,disabled:X,children:[e.jsx(ru,{className:`h-4 w-4 mr-2 ${X?"animate-spin":""}`}),"Refresh"]}),e.jsxs(R,{size:"sm",onClick:()=>ie(!0),children:[e.jsx(yo,{className:"h-4 w-4 mr-2"}),"Add Connection"]})]})]})}),e.jsx(Y,{children:X&&ee.length===0?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsxs("div",{className:"text-center",children:[e.jsx(ru,{className:"h-8 w-8 animate-spin mx-auto text-muted-foreground mb-2"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Loading connections..."})]})}):ee.length===0?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Zt,{className:"h-12 w-12 mx-auto text-muted-foreground mb-3"}),e.jsx("h3",{className:"font-medium mb-1",children:"No connections yet"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Start building your network"}),e.jsxs(R,{size:"sm",onClick:()=>ie(!0),children:[e.jsx(yo,{className:"h-4 w-4 mr-2"}),"Add Your First Connection"]})]})}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:ee.map(Se=>e.jsx(K,{className:"p-4 hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(hr,{className:"h-12 w-12",children:[e.jsx(On,{src:Se.avatar}),e.jsx(fr,{children:Se.name.split(" ").map(dt=>dt[0]).join("")})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h4",{className:"font-medium text-sm",children:Se.name}),e.jsx("p",{className:"text-xs text-muted-foreground",children:Se.role}),Se.email&&e.jsx("p",{className:"text-xs text-muted-foreground",children:Se.email}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[Se.mutual," mutual connection",Se.mutual!==1?"s":""]})]}),e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx(R,{variant:Se.connected?"outline":"default",size:"sm",onClick:()=>Se.connected?lt(Se.id):bt(Se.id),children:Se.connected?"Connected":"Connect"}),Se.connected&&e.jsxs(bg,{children:[e.jsx(wg,{asChild:!0,children:e.jsx(R,{variant:"ghost",size:"sm",children:e.jsx(b_,{className:"h-4 w-4"})})}),e.jsxs(Sg,{children:[e.jsxs(Wn,{children:[e.jsx(ta,{className:"h-4 w-4 mr-2"}),"Send Message"]}),e.jsxs(Wn,{children:[e.jsx(ca,{className:"h-4 w-4 mr-2"}),"View Profile"]}),e.jsxs(Wn,{className:"text-destructive",onClick:()=>lt(Se.id),children:[e.jsx(ga,{className:"h-4 w-4 mr-2"}),"Remove Connection"]})]})]})]})]})},Se.id))})})]})}),e.jsx(Bt,{open:J,onOpenChange:ie,children:e.jsxs(zt,{children:[e.jsxs(Ut,{children:[e.jsx(Vt,{children:"Add New Connection"}),e.jsx(es,{children:"Send a connection invitation to someone via email"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(te,{htmlFor:"connection-email",children:"Email Address"}),e.jsx(me,{id:"connection-email",type:"email",placeholder:"colleague@example.com",value:be.email,onChange:Se=>Le(dt=>({...dt,email:Se.target.value}))})]}),e.jsxs("div",{children:[e.jsx(te,{htmlFor:"connection-message",children:"Personal Message (Optional)"}),e.jsx(As,{id:"connection-message",placeholder:"I'd like to connect with you...",value:be.message,onChange:Se=>Le(dt=>({...dt,message:Se.target.value})),rows:3})]})]}),e.jsxs(Ps,{children:[e.jsx(R,{variant:"outline",onClick:()=>{ie(!1),Le({email:"",message:""})},children:"Cancel"}),e.jsxs(R,{onClick:ms,children:[e.jsx(yo,{className:"h-4 w-4 mr-2"}),"Send Invitation"]})]})]})}),e.jsx(pt,{value:"settings",className:"space-y-6",children:e.jsxs(K,{children:[e.jsxs(xe,{children:[e.jsx(pe,{children:"Profile Settings"}),e.jsx(ot,{children:"Manage your privacy and preferences"})]}),e.jsx(Y,{className:"space-y-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg border",children:[e.jsxs("div",{children:[e.jsx(te,{children:"Email Notifications"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Receive updates via email"})]}),e.jsx(os,{checked:q.emailNotifications,onCheckedChange:Se=>{B({...q,emailNotifications:Se}),D.success(`Email notifications ${Se?"enabled":"disabled"}`)}})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg border",children:[e.jsxs("div",{children:[e.jsx(te,{children:"Push Notifications"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Browser push notifications"})]}),e.jsx(os,{checked:q.pushNotifications,onCheckedChange:Se=>{B({...q,pushNotifications:Se}),D.success(`Push notifications ${Se?"enabled":"disabled"}`)}})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg border",children:[e.jsxs("div",{children:[e.jsx(te,{children:"Show Activity Status"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Let others see when you're active"})]}),e.jsx(os,{checked:q.showActivity,onCheckedChange:Se=>{B({...q,showActivity:Se}),D.success(`Activity status ${Se?"visible":"hidden"}`)}})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg border",children:[e.jsxs("div",{children:[e.jsx(te,{children:"Profile Visibility"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Control who can see your profile"})]}),e.jsxs(Mt,{value:q.profileVisibility,onValueChange:Se=>{B({...q,profileVisibility:Se}),D.success(`Profile visibility set to ${Se}`)},children:[e.jsx(Lt,{className:"w-32",children:e.jsx(Ft,{})}),e.jsxs(It,{children:[e.jsx(Ae,{value:"public",children:"Public"}),e.jsx(Ae,{value:"connections",children:"Connections"}),e.jsx(Ae,{value:"private",children:"Private"})]})]})]}),e.jsxs("div",{className:"p-4 rounded-lg bg-red-50 dark:bg-red-950 border border-red-200 dark:border-red-800",children:[e.jsx("h4",{className:"font-medium text-red-900 dark:text-red-100 mb-2",children:"Danger Zone"}),e.jsx("p",{className:"text-sm text-red-700 dark:text-red-300 mb-4",children:"Irreversible actions"}),e.jsxs(R,{variant:"destructive",size:"sm",onClick:()=>oe(!0),children:[e.jsx(ga,{className:"h-4 w-4 mr-2"}),"Delete Account"]})]})]})})]})})]})]}),e.jsx(Bt,{open:x,onOpenChange:h,children:e.jsxs(zt,{className:"sm:max-w-md",children:[e.jsxs(Ut,{children:[e.jsx(Vt,{children:"Profile QR Code"}),e.jsx(es,{children:"Share your profile with others using this QR code"})]}),e.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[e.jsx("div",{className:"p-4 bg-white rounded-lg",children:e.jsx("img",{src:wt(),alt:"Profile QR Code",className:"w-48 h-48"})}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs(R,{variant:"outline",onClick:Xt,children:[e.jsx(pv,{className:"h-4 w-4 mr-2"}),"Copy Link"]}),e.jsxs(R,{onClick:ss,children:[e.jsx(Gc,{className:"h-4 w-4 mr-2"}),"Share"]})]})]})]})}),e.jsx(Bt,{open:ve,onOpenChange:oe,children:e.jsxs(zt,{className:"sm:max-w-md",children:[e.jsxs(Ut,{children:[e.jsxs(Vt,{className:"flex items-center gap-2 text-red-600",children:[e.jsx(ks,{className:"h-5 w-5"}),"Delete Account"]}),e.jsx(es,{children:"This action cannot be undone. This will permanently delete your account and remove all your data from our servers."})]}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(te,{htmlFor:"delete-confirm",children:["Type ",e.jsx("strong",{children:"DELETE"})," to confirm"]}),e.jsx(me,{id:"delete-confirm",value:Pe,onChange:Se=>Xe(Se.target.value),placeholder:"DELETE",className:"allow-select"})]}),e.jsxs("div",{className:"bg-red-50 dark:bg-red-950 p-3 rounded-lg",children:[e.jsx("p",{className:"text-sm text-red-800 dark:text-red-200 font-medium",children:"Warning:"}),e.jsxs("ul",{className:"text-xs text-red-700 dark:text-red-300 mt-2 space-y-1 list-disc list-inside",children:[e.jsx("li",{children:"All your profile data will be deleted"}),e.jsx("li",{children:"All your orders and transactions will be removed"}),e.jsx("li",{children:"All your products and inventory will be deleted"}),e.jsx("li",{children:"This action cannot be reversed"})]})]})]}),e.jsxs(Ps,{children:[e.jsx(R,{variant:"outline",onClick:()=>{oe(!1),Xe("")},disabled:yt,children:"Cancel"}),e.jsx(R,{variant:"destructive",onClick:is,disabled:yt||Pe!=="DELETE",children:yt?e.jsxs(e.Fragment,{children:[e.jsx(ru,{className:"h-4 w-4 mr-2 animate-spin"}),"Deleting..."]}):e.jsxs(e.Fragment,{children:[e.jsx(ga,{className:"h-4 w-4 mr-2"}),"Delete Account"]})})]})]})}),e.jsx(Bt,{open:y,onOpenChange:b,children:e.jsxs(zt,{className:"sm:max-w-2xl",children:[e.jsxs(Ut,{children:[e.jsx(Vt,{children:"Edit Profile Picture"}),e.jsx(es,{children:"Adjust and customize your profile picture"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"relative h-64 bg-gray-100 dark:bg-gray-800 rounded-lg flex items-center justify-center overflow-hidden",children:N&&e.jsx("img",{src:N,alt:"Avatar preview",className:"max-h-56 max-w-56 rounded-full object-cover transition-all",style:{transform:`scale(${C}) rotate(${A}deg)`,filter:`brightness(${Rt.brightness}%) contrast(${Rt.contrast}%) saturate(${Rt.saturation}%)`}})}),e.jsxs("div",{className:"flex justify-center space-x-2",children:[e.jsxs(R,{variant:"outline",size:"sm",onClick:as,children:[e.jsx(ru,{className:"h-4 w-4 mr-1"}),"Rotate"]}),e.jsxs(R,{variant:"outline",size:"sm",onClick:()=>ke("in"),children:[e.jsx(w_,{className:"h-4 w-4 mr-1"}),"Zoom In"]}),e.jsxs(R,{variant:"outline",size:"sm",onClick:()=>ke("out"),children:[e.jsx(S_,{className:"h-4 w-4 mr-1"}),"Zoom Out"]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx(te,{children:"Brightness"}),e.jsx(mi,{value:[Rt.brightness],onValueChange:([Se])=>we("brightness",Se),max:200,step:1}),e.jsx(te,{children:"Contrast"}),e.jsx(mi,{value:[Rt.contrast],onValueChange:([Se])=>we("contrast",Se),max:200,step:1}),e.jsx(te,{children:"Saturation"}),e.jsx(mi,{value:[Rt.saturation],onValueChange:([Se])=>we("saturation",Se),max:200,step:1})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(te,{children:"Avatar Frames"}),e.jsx("div",{className:"flex space-x-2",children:Te.map(Se=>e.jsx(R,{variant:"outline",size:"sm",className:`p-2 ${Xs?.id===Se.id?"border-2 border-primary":""}`,onClick:()=>xs(Se),children:e.jsx(Se.icon,{className:"h-4 w-4"})},Se.id))})]}),Ms.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(te,{children:"Recent Photos"}),e.jsx("div",{className:"flex space-x-2",children:Ms.slice(0,4).map((Se,dt)=>e.jsx("img",{src:Se,alt:`Previous ${dt+1}`,className:"h-12 w-12 rounded-full object-cover cursor-pointer border-2 hover:border-primary transition-colors",onClick:()=>S(Se)},dt))})]})]})]}),e.jsxs(Ps,{children:[e.jsx(R,{variant:"outline",onClick:()=>b(!1),children:"Cancel"}),e.jsxs(R,{onClick:st,disabled:F,children:[F?e.jsx(ru,{className:"h-4 w-4 mr-2 animate-spin"}):e.jsx(Ui,{className:"h-4 w-4 mr-2"}),"Save Changes"]})]})]})})]})},Gz=()=>{const{user:t,isAuthenticated:s}=_s(),{socket:a,connected:r}=ha(),[i,o]=v.useState({balance:0,totalIncome:0,totalExpenses:0,pendingPayments:0,availableFunds:0}),[c,u]=v.useState([]),[f,x]=v.useState([]),[h,p]=v.useState(!0),[g,y]=v.useState(!1),[b,N]=v.useState(!0),[S,C]=v.useState("all"),[k,A]=v.useState(!1),[G,F]=v.useState(!1),[E,T]=v.useState(!1),[_,P]=v.useState(!1),[z,V]=v.useState({amount:"",method:"bank",bankAccount:"",description:""}),[W,q]=v.useState({amount:"",method:"mpesa",reference:"",description:""}),[B,ae]=v.useState({amount:"",plan:"fixed",duration:"12",expectedReturn:""}),[U,Z]=v.useState({amount:"",recipient:"",accountNumber:"",description:""}),[de,H]=v.useState(!1),[se,ee]=v.useState(""),[L,X]=v.useState(null),[O,J]=v.useState({daily:5e4,perTransaction:2e4,todaySpent:0}),[ie,be]=v.useState(!1),[Le,ve]=v.useState(!1),[oe,Pe]=v.useState({amount:"",recipient:"",frequency:"monthly",startDate:""}),[Xe,yt]=v.useState({category:"",limit:"",period:"monthly"}),[vt,gt]=v.useState([]),[bt,lt]=v.useState([]),[ms,is]=v.useState(!1),[Ms,ys]=v.useState(!1),[Xs,xs]=v.useState(!1),[Rt,sa]=v.useState([]),[Te,je]=v.useState({transactionNotifications:!0,emailNotifications:!0,smsNotifications:!1,twoFactorAuth:!1,autoSaveReceipts:!0,currency:"KES",language:"en",theme:"auto"}),[fe,Ue]=v.useState({provider:"",accountType:"",phoneNumber:"",email:"",accountNumber:"",accountName:""}),[st,Dt]=v.useState({provider:"",accountId:"",amount:"",recipient:"",description:""});v.useEffect(()=>{s&&(ss(),Jt(),as(),ke(),we(),nt(),Pt())},[s]);const Pt=()=>{if(a)return a.on("wallet_balance_update",M=>{o(ne=>({...ne,balance:M.balance,availableFunds:M.availableFunds})),D.info("Balance updated",{duration:2e3})}),a.on("wallet_transaction",M=>{u(ne=>[M,...ne]),D.success(`New transaction: ${M.type}`,{duration:3e3}),ss()}),a.on("transaction_status_update",M=>{u(ne=>ne.map(ce=>ce.id===M.transactionId?{...ce,status:M.status}:ce)),D.info(`Transaction ${M.transactionId} ${M.status}`)}),()=>{a.off("wallet_balance_update"),a.off("wallet_transaction"),a.off("transaction_status_update")}},Jt=async()=>{try{const M=localStorage.getItem("token"),ne=await Ne.get("/wallet/limits",{headers:{Authorization:`Bearer ${M}`}});J(ne.data)}catch(M){M.response?.status===404&&J({daily:5e4,perTransaction:2e4,todaySpent:0})}},as=async()=>{try{const M=localStorage.getItem("token"),ne=await Ne.get("/wallet/budgets",{headers:{Authorization:`Bearer ${M}`}});gt(ne.data||[])}catch(M){M.response?.status===404&&gt([])}},ke=async()=>{try{const M=localStorage.getItem("token"),ne=await Ne.get("/wallet/recurring",{headers:{Authorization:`Bearer ${M}`}});lt(ne.data||[])}catch(M){M.response?.status===404&&lt([])}},we=async()=>{try{const M=localStorage.getItem("token"),ne=await Ne.get("/wallet/connected-accounts",{headers:{Authorization:`Bearer ${M}`}});sa(ne.data||[])}catch(M){M.response?.status===404&&sa([])}},nt=async()=>{try{const M=localStorage.getItem("token"),ne=await Ne.get("/wallet/settings",{headers:{Authorization:`Bearer ${M}`}});je(ne.data||Te)}catch(M){if(M.response?.status===404){const ne=localStorage.getItem("walletSettings");if(ne)try{je(JSON.parse(ne))}catch{}}}},Ke=async()=>{try{const M=localStorage.getItem("token");await Ne.put("/wallet/settings",{...Te,userId:t?._id},{headers:{Authorization:`Bearer ${M}`}}),D.success("Wallet settings updated successfully!"),xs(!1)}catch(M){M.response?.status===404?(localStorage.setItem("walletSettings",JSON.stringify(Te)),D.success("Settings saved locally!"),xs(!1)):D.error("Failed to update settings")}},jt=async()=>{if(!fe.provider){D.error("Please select a payment provider");return}if(fe.provider==="mpesa"&&!fe.phoneNumber){D.error("Please enter M-Pesa phone number");return}if(fe.provider==="paypal"&&!fe.email){D.error("Please enter PayPal email");return}if(fe.provider==="bank"&&!fe.accountNumber){D.error("Please enter bank account number");return}try{const M=localStorage.getItem("token"),ne=await Ne.post("/wallet/connect-account",{type:fe.accountType,accountName:fe.accountName,accountNumber:fe.accountNumber,provider:fe.provider},{headers:{Authorization:`Bearer ${M}`}});D.success(`${fe.provider.toUpperCase()} account linked successfully!`),is(!1),Ue({provider:"",accountType:"",phoneNumber:"",email:"",accountNumber:"",accountName:""}),await we()}catch(M){console.error("Link account error:",M),D.error("Failed to link account. Please try again.")}},wt=async()=>{if(!st.provider||!st.accountId){D.error("Please select a destination account");return}if(!st.amount||parseFloat(st.amount)<=0){D.error("Please enter a valid amount");return}if(parseFloat(st.amount)>i.availableFunds){D.error("Insufficient funds");return}if(ns(parseFloat(st.amount)))try{const M=localStorage.getItem("token"),ne=await Ne.post("/wallet/external-transfer",{...st,amount:parseFloat(st.amount),userId:t?._id},{headers:{Authorization:`Bearer ${M}`}});a&&r&&a.emit("wallet_action",{type:"external_transfer",amount:parseFloat(st.amount),provider:st.provider,userId:t?._id}),D.success(`Transfer to ${st.provider.toUpperCase()} initiated successfully!`),ys(!1),Dt({provider:"",accountId:"",amount:"",recipient:"",description:""}),await ss(),await Jt()}catch(M){console.error("External transfer error:",M),D.error("Transfer failed. Please try again.")}},Xt=async M=>{try{const ne=localStorage.getItem("token");await Ne.delete(`/wallet/connected-accounts/${M}`,{headers:{Authorization:`Bearer ${ne}`}}),D.success("Account disconnected successfully"),await we()}catch(ne){console.error("Disconnect error:",ne),D.error("Failed to disconnect account")}},ss=async()=>{try{p(!0);const ne={Authorization:`Bearer ${localStorage.getItem("token")}`},[ce,Re,$e]=await Promise.allSettled([Ne.get("/orders",{headers:ne}),Ne.get("/invoices",{headers:ne}),Ne.get("/payments",{headers:ne})]),Oe=ce.status==="fulfilled"?Array.isArray(ce.value?.data)?ce.value.data:[]:[],Me=Re.status==="fulfilled"?Array.isArray(Re.value?.data)?Re.value.data:[]:[],Ie=$e.status==="fulfilled"?Array.isArray($e.value?.data)?$e.value.data:[]:[],rt=Oe.filter(Qe=>Qe.status==="completed"||Qe.status==="delivered").reduce((Qe,Wt)=>Qe+parseFloat(Wt.total||Wt.amount||0),0),he=Ie.filter(Qe=>Qe.type==="expense"||Qe.type==="refund").reduce((Qe,Wt)=>Qe+parseFloat(Wt.amount||0),0),We=Me.filter(Qe=>Qe.status==="pending"||Qe.status==="sent").reduce((Qe,Wt)=>Qe+parseFloat(Wt.total||0),0),Ee=rt-he,Je=Ee-We;o({balance:Ee,totalIncome:rt,totalExpenses:he,pendingPayments:We,availableFunds:Je});const it=[...Oe.map(Qe=>({id:Qe._id,type:"income",category:"sale",description:`Order #${Qe.orderNumber||Qe._id?.slice(-6)} - ${Qe.customerName||"Customer"}`,amount:parseFloat(Qe.total||Qe.amount||0),currency:Qe.currency||"KES",status:Qe.status,date:new Date(Qe.createdAt),method:Qe.paymentMethod||"Card"})),...Me.map(Qe=>({id:Qe._id,type:Qe.status==="paid"?"income":"pending",category:"invoice",description:`Invoice #${Qe.invoiceNumber||Qe._id?.slice(-6)} - ${Qe.clientName||"Client"}`,amount:parseFloat(Qe.total||0),currency:Qe.currency||"KES",status:Qe.status,date:new Date(Qe.createdAt),method:Qe.paymentMethod||"Bank Transfer"})),...Ie.map(Qe=>({id:Qe._id,type:"expense",category:Qe.category||"expense",description:Qe.description||`Payment ${Qe._id?.slice(-6)}`,amount:parseFloat(Qe.amount||0),currency:Qe.currency||"KES",status:Qe.status||"completed",date:new Date(Qe.createdAt||Qe.date),method:Qe.method||"Cash"}))].sort((Qe,Wt)=>Wt.date-Qe.date);u(it);const kt={};it.forEach(Qe=>{kt[Qe.currency]||(kt[Qe.currency]={income:0,expenses:0,balance:0}),Qe.type==="income"?kt[Qe.currency].income+=Qe.amount:Qe.type==="expense"&&(kt[Qe.currency].expenses+=Qe.amount),kt[Qe.currency].balance=kt[Qe.currency].income-kt[Qe.currency].expenses}),x(Object.entries(kt).map(([Qe,Wt])=>({code:Qe,...Wt}))),console.log(" Wallet data loaded:",{balance:Ee,transactions:it.length,currencies:Object.keys(kt).length})}catch(M){console.error(" Error fetching wallet data:",M),D.error("Failed to load wallet data")}finally{p(!1)}},ge=async()=>{y(!0),await ss(),y(!1),D.success("Wallet data refreshed!")},tt=(M,ne)=>{X({action:M,data:ne}),H(!0)},ct=async()=>{if(!se||se.length<4){D.error("Please enter a valid PIN");return}try{const M=localStorage.getItem("token");if((await Ne.post("/wallet/verify-pin",{pin:se,userId:t?._id},{headers:{Authorization:`Bearer ${M}`}})).data.verified){if(H(!1),ee(""),L){switch(L.action){case"withdraw":await Se(L.data);break;case"transfer":await vs(L.data);break;case"invest":await Et(L.data);break}X(null)}}else D.error("Invalid PIN")}catch(M){D.error("Security verification failed"),console.error("PIN verification error:",M)}},ns=M=>M>O.perTransaction?(D.error(`Transaction limit is KES ${O.perTransaction.toLocaleString()}`),!1):O.todaySpent+M>O.daily?(D.error(`Daily limit exceeded. Remaining: KES ${(O.daily-O.todaySpent).toLocaleString()}`),!1):!0,ht=async()=>{if(!z.amount||parseFloat(z.amount)<=0){D.error("Please enter a valid amount");return}if(parseFloat(z.amount)>i.availableFunds){D.error("Insufficient funds");return}ns(parseFloat(z.amount))&&tt("withdraw",z)},Se=async M=>{try{const ne=localStorage.getItem("token"),ce=await Ne.post("/wallet/withdraw",{...M,amount:parseFloat(M.amount),userId:t?._id},{headers:{Authorization:`Bearer ${ne}`}});a&&r&&a.emit("wallet_action",{type:"withdraw",amount:parseFloat(M.amount),userId:t?._id}),D.success(`Withdrawal of KES ${M.amount} initiated successfully!`),A(!1),V({amount:"",method:"bank",bankAccount:"",description:""}),await ss(),await Jt()}catch(ne){console.error("Withdrawal error:",ne),D.error("Withdrawal failed. Please try again.")}},dt=async()=>{if(!W.amount||parseFloat(W.amount)<=0){D.error("Please enter a valid amount");return}try{const M=localStorage.getItem("token");await Ne.post("/wallet/deposit",{...W,amount:parseFloat(W.amount),userId:t?._id},{headers:{Authorization:`Bearer ${M}`}}),D.success(`Deposit of KES ${W.amount} recorded successfully!`),F(!1),q({amount:"",method:"mpesa",reference:"",description:""}),await ss()}catch(M){console.error("Deposit error:",M),D.error("Deposit failed. Please try again.")}},Ct=async()=>{if(!B.amount||parseFloat(B.amount)<=0){D.error("Please enter a valid amount");return}if(parseFloat(B.amount)>i.availableFunds){D.error("Insufficient funds for investment");return}tt("invest",B)},Et=async M=>{try{const ne=localStorage.getItem("token"),ce=Ts(parseFloat(M.amount),M.plan,parseInt(M.duration)),Re=await Ne.post("/wallet/invest",{...M,amount:parseFloat(M.amount),expectedReturn:ce,userId:t?._id},{headers:{Authorization:`Bearer ${ne}`}});a&&r&&a.emit("wallet_action",{type:"invest",amount:parseFloat(M.amount),plan:M.plan,userId:t?._id}),D.success(`Investment of KES ${M.amount} created successfully!`),T(!1),ae({amount:"",plan:"fixed",duration:"12",expectedReturn:""}),await ss()}catch(ne){console.error("Investment error:",ne),D.error("Investment failed. Please try again.")}},hs=async()=>{if(!U.amount||parseFloat(U.amount)<=0){D.error("Please enter a valid amount");return}if(parseFloat(U.amount)>i.availableFunds){D.error("Insufficient funds");return}if(!U.recipient||!U.accountNumber){D.error("Please provide recipient details");return}ns(parseFloat(U.amount))&&tt("transfer",U)},vs=async M=>{try{const ne=localStorage.getItem("token"),ce=await Ne.post("/wallet/transfer",{...M,amount:parseFloat(M.amount),userId:t?._id},{headers:{Authorization:`Bearer ${ne}`}});a&&r&&a.emit("wallet_action",{type:"transfer",amount:parseFloat(M.amount),recipient:M.recipient,userId:t?._id}),D.success(`Transfer of KES ${M.amount} to ${M.recipient} successful!`),P(!1),Z({amount:"",recipient:"",accountNumber:"",description:""}),await ss(),await Jt()}catch(ne){console.error("Transfer error:",ne),D.error("Transfer failed. Please try again.")}},Ts=(M,ne,ce)=>{const $e={fixed:.08,flexible:.06,premium:.12,compound:.1}[ne]||.08,Oe=ce/12;return ne==="compound"?M*Math.pow(1+$e,Oe):M*(1+$e*Oe)},Bs=(M,ne)=>M==="income"?e.jsx(Cb,{className:"h-4 w-4 text-green-600"}):M==="expense"?e.jsx(Tb,{className:"h-4 w-4 text-red-600"}):e.jsx(cs,{className:"h-4 w-4 text-blue-600"}),Q=M=>{switch(M?.toLowerCase()){case"mpesa":return"";case"paypal":return"";case"bank":return"";case"card":return"";case"stripe":return"";case"flutterwave":return"";case"airtel":return"";case"tkash":return"";case"paystack":return"";case"pesapal":return"";default:return""}},ue=M=>{switch(M?.toLowerCase()){case"completed":case"paid":case"delivered":return"bg-green-100 text-green-800";case"pending":case"processing":return"bg-yellow-100 text-yellow-800";case"failed":case"cancelled":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},le=c.filter(M=>S==="all"?!0:S==="income"?M.type==="income":S==="expense"?M.type==="expense":S==="pending"?M.type==="pending":!0);return h?e.jsx("div",{className:"p-6 max-w-7xl mx-auto",children:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto"}),e.jsx("p",{className:"text-muted-foreground",children:"Loading wallet data..."})]})})}):e.jsxs("div",{className:"p-6 max-w-7xl mx-auto space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold text-foreground flex items-center gap-3",children:[e.jsx(td,{className:"h-8 w-8 text-primary"}),"My Wallet"]}),e.jsx("p",{className:"text-muted-foreground mt-2",children:"Track your financial transactions and manage your funds"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(R,{variant:"outline",onClick:()=>xs(!0),children:[e.jsx(Wa,{className:"mr-2 h-4 w-4"}),"Settings"]}),e.jsxs(R,{variant:"outline",onClick:ge,disabled:g,children:[e.jsx(cs,{className:`mr-2 h-4 w-4 ${g?"animate-spin":""}`}),g?"Refreshing...":"Refresh"]}),e.jsxs(R,{variant:"outline",children:[e.jsx(Ma,{className:"mr-2 h-4 w-4"}),"Export"]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs(Bt,{open:G,onOpenChange:F,children:[e.jsx(wa,{asChild:!0,children:e.jsx(K,{className:"cursor-pointer hover:shadow-lg transition-shadow hover:border-green-500",children:e.jsxs(Y,{className:"p-6 text-center",children:[e.jsx("div",{className:"mx-auto w-12 h-12 rounded-full bg-green-100 flex items-center justify-center mb-3",children:e.jsx(Gs,{className:"h-6 w-6 text-green-600"})}),e.jsx("h3",{className:"font-semibold",children:"Deposit"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Add funds"})]})})}),e.jsxs(zt,{children:[e.jsxs(Ut,{children:[e.jsx(Vt,{children:"Deposit Funds"}),e.jsx(es,{children:"Add money to your wallet"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(te,{htmlFor:"deposit-amount",children:"Amount (KES) *"}),e.jsx(me,{id:"deposit-amount",type:"number",placeholder:"Enter amount",value:W.amount,onChange:M=>q({...W,amount:M.target.value})})]}),e.jsxs("div",{children:[e.jsx(te,{htmlFor:"deposit-method",children:"Payment Method *"}),e.jsxs(Mt,{value:W.method,onValueChange:M=>q({...W,method:M}),children:[e.jsx(Lt,{children:e.jsx(Ft,{})}),e.jsxs(It,{children:[e.jsx(Ae,{value:"mpesa",children:"M-Pesa"}),e.jsx(Ae,{value:"bank",children:"Bank Transfer"}),e.jsx(Ae,{value:"card",children:"Credit/Debit Card"}),e.jsx(Ae,{value:"paypal",children:"PayPal"})]})]})]}),e.jsxs("div",{children:[e.jsx(te,{htmlFor:"deposit-reference",children:"Reference Number"}),e.jsx(me,{id:"deposit-reference",placeholder:"Transaction reference",value:W.reference,onChange:M=>q({...W,reference:M.target.value})})]}),e.jsxs("div",{children:[e.jsx(te,{htmlFor:"deposit-description",children:"Description (Optional)"}),e.jsx(As,{id:"deposit-description",placeholder:"Add notes",value:W.description,onChange:M=>q({...W,description:M.target.value})})]})]}),e.jsxs(Ps,{children:[e.jsx(R,{variant:"outline",onClick:()=>F(!1),children:"Cancel"}),e.jsx(R,{onClick:dt,children:"Confirm Deposit"})]})]})]}),e.jsxs(Bt,{open:k,onOpenChange:A,children:[e.jsx(wa,{asChild:!0,children:e.jsx(K,{className:"cursor-pointer hover:shadow-lg transition-shadow hover:border-red-500",children:e.jsxs(Y,{className:"p-6 text-center",children:[e.jsx("div",{className:"mx-auto w-12 h-12 rounded-full bg-red-100 flex items-center justify-center mb-3",children:e.jsx(Pu,{className:"h-6 w-6 text-red-600"})}),e.jsx("h3",{className:"font-semibold",children:"Withdraw"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Cash out"})]})})}),e.jsxs(zt,{children:[e.jsxs(Ut,{children:[e.jsx(Vt,{children:"Withdraw Funds"}),e.jsxs(es,{children:["Available: KES ",i.availableFunds.toLocaleString()]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(te,{htmlFor:"withdraw-amount",children:"Amount (KES) *"}),e.jsx(me,{id:"withdraw-amount",type:"number",placeholder:"Enter amount",value:z.amount,onChange:M=>V({...z,amount:M.target.value})})]}),e.jsxs("div",{children:[e.jsx(te,{htmlFor:"withdraw-method",children:"Withdrawal Method *"}),e.jsxs(Mt,{value:z.method,onValueChange:M=>V({...z,method:M}),children:[e.jsx(Lt,{children:e.jsx(Ft,{})}),e.jsxs(It,{children:[e.jsx(Ae,{value:"bank",children:"Bank Transfer"}),e.jsx(Ae,{value:"mpesa",children:"M-Pesa"}),e.jsx(Ae,{value:"paypal",children:"PayPal"})]})]})]}),e.jsxs("div",{children:[e.jsx(te,{htmlFor:"withdraw-account",children:"Bank Account / Phone Number *"}),e.jsx(me,{id:"withdraw-account",placeholder:"Account details",value:z.bankAccount,onChange:M=>V({...z,bankAccount:M.target.value})})]}),e.jsxs("div",{children:[e.jsx(te,{htmlFor:"withdraw-description",children:"Description (Optional)"}),e.jsx(As,{id:"withdraw-description",placeholder:"Add notes",value:z.description,onChange:M=>V({...z,description:M.target.value})})]})]}),e.jsxs(Ps,{children:[e.jsx(R,{variant:"outline",onClick:()=>A(!1),children:"Cancel"}),e.jsx(R,{onClick:ht,variant:"destructive",children:"Confirm Withdrawal"})]})]})]}),e.jsxs(Bt,{open:_,onOpenChange:P,children:[e.jsx(wa,{asChild:!0,children:e.jsx(K,{className:"cursor-pointer hover:shadow-lg transition-shadow hover:border-blue-500",children:e.jsxs(Y,{className:"p-6 text-center",children:[e.jsx("div",{className:"mx-auto w-12 h-12 rounded-full bg-blue-100 flex items-center justify-center mb-3",children:e.jsx(E_,{className:"h-6 w-6 text-blue-600"})}),e.jsx("h3",{className:"font-semibold",children:"Transfer"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Send money"})]})})}),e.jsxs(zt,{children:[e.jsxs(Ut,{children:[e.jsx(Vt,{children:"Transfer Funds"}),e.jsx(es,{children:"Send money to another account"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(te,{htmlFor:"transfer-amount",children:"Amount (KES) *"}),e.jsx(me,{id:"transfer-amount",type:"number",placeholder:"Enter amount",value:U.amount,onChange:M=>Z({...U,amount:M.target.value})})]}),e.jsxs("div",{children:[e.jsx(te,{htmlFor:"transfer-recipient",children:"Recipient Name *"}),e.jsx(me,{id:"transfer-recipient",placeholder:"Full name",value:U.recipient,onChange:M=>Z({...U,recipient:M.target.value})})]}),e.jsxs("div",{children:[e.jsx(te,{htmlFor:"transfer-account",children:"Account Number *"}),e.jsx(me,{id:"transfer-account",placeholder:"Account or phone number",value:U.accountNumber,onChange:M=>Z({...U,accountNumber:M.target.value})})]}),e.jsxs("div",{children:[e.jsx(te,{htmlFor:"transfer-description",children:"Description (Optional)"}),e.jsx(As,{id:"transfer-description",placeholder:"Add notes",value:U.description,onChange:M=>Z({...U,description:M.target.value})})]})]}),e.jsxs(Ps,{children:[e.jsx(R,{variant:"outline",onClick:()=>P(!1),children:"Cancel"}),e.jsx(R,{onClick:hs,children:"Send Transfer"})]})]})]}),e.jsxs(Bt,{open:E,onOpenChange:T,children:[e.jsx(wa,{asChild:!0,children:e.jsx(K,{className:"cursor-pointer hover:shadow-lg transition-shadow hover:border-purple-500",children:e.jsxs(Y,{className:"p-6 text-center",children:[e.jsx("div",{className:"mx-auto w-12 h-12 rounded-full bg-purple-100 flex items-center justify-center mb-3",children:e.jsx(k_,{className:"h-6 w-6 text-purple-600"})}),e.jsx("h3",{className:"font-semibold",children:"Invest"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Grow wealth"})]})})}),e.jsxs(zt,{children:[e.jsxs(Ut,{children:[e.jsx(Vt,{children:"Create Investment"}),e.jsx(es,{children:"Invest your funds and earn returns"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(te,{htmlFor:"invest-amount",children:"Amount (KES) *"}),e.jsx(me,{id:"invest-amount",type:"number",placeholder:"Enter amount",value:B.amount,onChange:M=>ae({...B,amount:M.target.value})})]}),e.jsxs("div",{children:[e.jsx(te,{htmlFor:"invest-plan",children:"Investment Plan *"}),e.jsxs(Mt,{value:B.plan,onValueChange:M=>ae({...B,plan:M}),children:[e.jsx(Lt,{children:e.jsx(Ft,{})}),e.jsxs(It,{children:[e.jsx(Ae,{value:"fixed",children:"Fixed Deposit (8% p.a.)"}),e.jsx(Ae,{value:"flexible",children:"Flexible Savings (6% p.a.)"}),e.jsx(Ae,{value:"premium",children:"Premium Growth (12% p.a.)"}),e.jsx(Ae,{value:"compound",children:"Compound Interest (10% p.a.)"})]})]})]}),e.jsxs("div",{children:[e.jsx(te,{htmlFor:"invest-duration",children:"Duration (Months) *"}),e.jsxs(Mt,{value:B.duration,onValueChange:M=>ae({...B,duration:M}),children:[e.jsx(Lt,{children:e.jsx(Ft,{})}),e.jsxs(It,{children:[e.jsx(Ae,{value:"3",children:"3 Months"}),e.jsx(Ae,{value:"6",children:"6 Months"}),e.jsx(Ae,{value:"12",children:"12 Months"}),e.jsx(Ae,{value:"24",children:"24 Months"}),e.jsx(Ae,{value:"36",children:"36 Months"})]})]})]}),B.amount&&e.jsxs("div",{className:"p-4 bg-muted rounded-lg",children:[e.jsx("p",{className:"text-sm font-medium mb-1",children:"Expected Return:"}),e.jsxs("p",{className:"text-2xl font-bold text-green-600",children:["KES ",Ts(parseFloat(B.amount)||0,B.plan,parseInt(B.duration)).toLocaleString(void 0,{maximumFractionDigits:2})]}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Profit: KES ",(Ts(parseFloat(B.amount)||0,B.plan,parseInt(B.duration))-(parseFloat(B.amount)||0)).toLocaleString(void 0,{maximumFractionDigits:2})]})]})]}),e.jsxs(Ps,{children:[e.jsx(R,{variant:"outline",onClick:()=>T(!1),children:"Cancel"}),e.jsx(R,{onClick:Ct,children:"Start Investment"})]})]})]})]}),e.jsx(Bt,{open:de,onOpenChange:H,children:e.jsxs(zt,{children:[e.jsxs(Ut,{children:[e.jsxs(Vt,{className:"flex items-center gap-2",children:[e.jsx(da,{className:"h-5 w-5 text-primary"}),"Security Verification Required"]}),e.jsx(es,{children:"Enter your 4-digit security PIN to continue"})]}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{children:[e.jsx(te,{htmlFor:"security-pin",children:"Security PIN *"}),e.jsx(me,{id:"security-pin",type:"password",placeholder:"Enter 4-digit PIN",maxLength:4,value:se,onChange:M=>ee(M.target.value.replace(/\D/g,"")),className:"text-center text-2xl tracking-widest"})]}),L&&e.jsxs("div",{className:"p-4 bg-muted rounded-lg",children:[e.jsx("p",{className:"text-sm font-medium mb-1",children:"Pending Action:"}),e.jsx("p",{className:"text-lg font-bold capitalize",children:L.action}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Amount: KES ",parseFloat(L.data?.amount||0).toLocaleString()]})]}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:[e.jsx("p",{children:" Your PIN is encrypted and secure"}),e.jsx("p",{children:" Forgot PIN? Contact support"})]})]}),e.jsxs(Ps,{children:[e.jsx(R,{variant:"outline",onClick:()=>{H(!1),ee(""),X(null)},children:"Cancel"}),e.jsxs(R,{onClick:ct,disabled:se.length<4,children:[e.jsx(gr,{className:"mr-2 h-4 w-4"}),"Verify & Continue"]})]})]})}),e.jsx(Bt,{open:Xs,onOpenChange:xs,children:e.jsxs(zt,{className:"sm:max-w-[600px] max-h-[90vh] overflow-y-auto",children:[e.jsxs(Ut,{children:[e.jsxs(Vt,{className:"flex items-center gap-2",children:[e.jsx(Wa,{className:"h-5 w-5 text-primary"}),"Wallet Settings"]}),e.jsx(es,{children:"Manage your wallet preferences and security settings"})]}),e.jsxs("div",{className:"space-y-6 py-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-3",children:"Notifications"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(te,{htmlFor:"tx-notif",children:"Transaction Notifications"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Get notified for all transactions"})]}),e.jsx("input",{type:"checkbox",id:"tx-notif",checked:Te.transactionNotifications,onChange:M=>je({...Te,transactionNotifications:M.target.checked}),className:"h-4 w-4"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(te,{htmlFor:"email-notif",children:"Email Notifications"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Receive transaction alerts via email"})]}),e.jsx("input",{type:"checkbox",id:"email-notif",checked:Te.emailNotifications,onChange:M=>je({...Te,emailNotifications:M.target.checked}),className:"h-4 w-4"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(te,{htmlFor:"sms-notif",children:"SMS Notifications"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Get SMS alerts for transactions"})]}),e.jsx("input",{type:"checkbox",id:"sms-notif",checked:Te.smsNotifications,onChange:M=>je({...Te,smsNotifications:M.target.checked}),className:"h-4 w-4"})]})]})]}),e.jsxs("div",{className:"border-t pt-4",children:[e.jsx("h3",{className:"font-semibold mb-3",children:"Security"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(te,{htmlFor:"2fa",children:"Two-Factor Authentication"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Extra security for your wallet"})]}),e.jsx("input",{type:"checkbox",id:"2fa",checked:Te.twoFactorAuth,onChange:M=>je({...Te,twoFactorAuth:M.target.checked}),className:"h-4 w-4"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(te,{htmlFor:"auto-save",children:"Auto-Save Receipts"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Automatically save transaction receipts"})]}),e.jsx("input",{type:"checkbox",id:"auto-save",checked:Te.autoSaveReceipts,onChange:M=>je({...Te,autoSaveReceipts:M.target.checked}),className:"h-4 w-4"})]})]})]}),e.jsxs("div",{className:"border-t pt-4",children:[e.jsx("h3",{className:"font-semibold mb-3",children:"Preferences"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx(te,{htmlFor:"currency",children:"Default Currency"}),e.jsxs(Mt,{value:Te.currency,onValueChange:M=>je({...Te,currency:M}),children:[e.jsx(Lt,{children:e.jsx(Ft,{})}),e.jsxs(It,{children:[e.jsx(Ae,{value:"KES",children:" KES - Kenyan Shilling"}),e.jsx(Ae,{value:"USD",children:" USD - US Dollar"}),e.jsx(Ae,{value:"EUR",children:" EUR - Euro"}),e.jsx(Ae,{value:"GBP",children:" GBP - British Pound"}),e.jsx(Ae,{value:"UGX",children:" UGX - Ugandan Shilling"}),e.jsx(Ae,{value:"TZS",children:" TZS - Tanzanian Shilling"})]})]})]}),e.jsxs("div",{children:[e.jsx(te,{htmlFor:"language",children:"Language"}),e.jsxs(Mt,{value:Te.language,onValueChange:M=>je({...Te,language:M}),children:[e.jsx(Lt,{children:e.jsx(Ft,{})}),e.jsxs(It,{children:[e.jsx(Ae,{value:"en",children:"English"}),e.jsx(Ae,{value:"sw",children:"Swahili"}),e.jsx(Ae,{value:"fr",children:"French"})]})]})]}),e.jsxs("div",{children:[e.jsx(te,{htmlFor:"theme",children:"Theme"}),e.jsxs(Mt,{value:Te.theme,onValueChange:M=>je({...Te,theme:M}),children:[e.jsx(Lt,{children:e.jsx(Ft,{})}),e.jsxs(It,{children:[e.jsx(Ae,{value:"auto",children:"Auto (System)"}),e.jsx(Ae,{value:"light",children:"Light"}),e.jsx(Ae,{value:"dark",children:"Dark"})]})]})]})]})]}),e.jsxs("div",{className:"border-t pt-4",children:[e.jsx("h3",{className:"font-semibold mb-3",children:"Transaction Limits"}),e.jsxs("div",{className:"p-4 bg-muted rounded-lg space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Daily Limit:"}),e.jsxs("span",{className:"font-medium",children:["KES ",O.daily.toLocaleString()]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Per Transaction:"}),e.jsxs("span",{className:"font-medium",children:["KES ",O.perTransaction.toLocaleString()]})]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:"Contact support to increase limits"})]})]})]}),e.jsxs(Ps,{children:[e.jsx(R,{variant:"outline",onClick:()=>xs(!1),children:"Cancel"}),e.jsxs(R,{onClick:Ke,children:[e.jsx(ti,{className:"mr-2 h-4 w-4"}),"Save Settings"]})]})]})}),e.jsx(Bt,{open:ms,onOpenChange:is,children:e.jsxs(zt,{className:"sm:max-w-[500px]",children:[e.jsxs(Ut,{children:[e.jsxs(Vt,{className:"flex items-center gap-2",children:[e.jsx(_c,{className:"h-5 w-5 text-primary"}),"Link Payment Account"]}),e.jsx(es,{children:"Connect your external payment accounts for seamless transfers"})]}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{children:[e.jsx(te,{htmlFor:"provider",children:"Payment Provider *"}),e.jsxs(Mt,{value:fe.provider,onValueChange:M=>Ue({...fe,provider:M}),children:[e.jsx(Lt,{children:e.jsx(Ft,{placeholder:"Select provider"})}),e.jsxs(It,{children:[e.jsx(Ae,{value:"mpesa",children:" M-Pesa (Safaricom)"}),e.jsx(Ae,{value:"airtel",children:" Airtel Money"}),e.jsx(Ae,{value:"tkash",children:" T-Kash (Telkom)"}),e.jsx(Ae,{value:"paypal",children:" PayPal"}),e.jsx(Ae,{value:"stripe",children:" Stripe"}),e.jsx(Ae,{value:"flutterwave",children:" Flutterwave"}),e.jsx(Ae,{value:"paystack",children:" Paystack"}),e.jsx(Ae,{value:"pesapal",children:" PesaPal"}),e.jsx(Ae,{value:"bank",children:" Bank Account"}),e.jsx(Ae,{value:"card",children:" Credit/Debit Card"})]})]})]}),fe.provider==="mpesa"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx(te,{htmlFor:"mpesa-phone",children:"M-Pesa Phone Number *"}),e.jsx(me,{id:"mpesa-phone",placeholder:"+254 700 000 000",value:fe.phoneNumber,onChange:M=>Ue({...fe,phoneNumber:M.target.value})})]}),e.jsxs("div",{children:[e.jsx(te,{htmlFor:"mpesa-name",children:"Account Name *"}),e.jsx(me,{id:"mpesa-name",placeholder:"Full name as registered",value:fe.accountName,onChange:M=>Ue({...fe,accountName:M.target.value})})]})]}),fe.provider==="paypal"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx(te,{htmlFor:"paypal-email",children:"PayPal Email *"}),e.jsx(me,{id:"paypal-email",type:"email",placeholder:"your.email@example.com",value:fe.email,onChange:M=>Ue({...fe,email:M.target.value})})]}),e.jsxs("div",{children:[e.jsx(te,{htmlFor:"paypal-name",children:"Account Name *"}),e.jsx(me,{id:"paypal-name",placeholder:"Full name",value:fe.accountName,onChange:M=>Ue({...fe,accountName:M.target.value})})]})]}),fe.provider==="airtel"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx(te,{htmlFor:"airtel-phone",children:"Airtel Money Phone Number *"}),e.jsx(me,{id:"airtel-phone",placeholder:"+254 700 000 000",value:fe.phoneNumber,onChange:M=>Ue({...fe,phoneNumber:M.target.value})})]}),e.jsxs("div",{children:[e.jsx(te,{htmlFor:"airtel-name",children:"Account Name *"}),e.jsx(me,{id:"airtel-name",placeholder:"Full name as registered",value:fe.accountName,onChange:M=>Ue({...fe,accountName:M.target.value})})]})]}),fe.provider==="tkash"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx(te,{htmlFor:"tkash-phone",children:"T-Kash Phone Number *"}),e.jsx(me,{id:"tkash-phone",placeholder:"+254 700 000 000",value:fe.phoneNumber,onChange:M=>Ue({...fe,phoneNumber:M.target.value})})]}),e.jsxs("div",{children:[e.jsx(te,{htmlFor:"tkash-name",children:"Account Name *"}),e.jsx(me,{id:"tkash-name",placeholder:"Full name as registered",value:fe.accountName,onChange:M=>Ue({...fe,accountName:M.target.value})})]})]}),fe.provider==="stripe"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx(te,{htmlFor:"stripe-email",children:"Stripe Email *"}),e.jsx(me,{id:"stripe-email",type:"email",placeholder:"your.email@example.com",value:fe.email,onChange:M=>Ue({...fe,email:M.target.value})})]}),e.jsxs("div",{children:[e.jsx(te,{htmlFor:"stripe-account",children:"Stripe Account ID (Optional)"}),e.jsx(me,{id:"stripe-account",placeholder:"acct_xxxxxxxxxxxx",value:fe.accountNumber,onChange:M=>Ue({...fe,accountNumber:M.target.value})})]}),e.jsxs("div",{children:[e.jsx(te,{htmlFor:"stripe-name",children:"Account Name *"}),e.jsx(me,{id:"stripe-name",placeholder:"Full name",value:fe.accountName,onChange:M=>Ue({...fe,accountName:M.target.value})})]})]}),fe.provider==="flutterwave"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx(te,{htmlFor:"flutterwave-email",children:"Flutterwave Email *"}),e.jsx(me,{id:"flutterwave-email",type:"email",placeholder:"your.email@example.com",value:fe.email,onChange:M=>Ue({...fe,email:M.target.value})})]}),e.jsxs("div",{children:[e.jsx(te,{htmlFor:"flutterwave-phone",children:"Phone Number *"}),e.jsx(me,{id:"flutterwave-phone",placeholder:"+254 700 000 000",value:fe.phoneNumber,onChange:M=>Ue({...fe,phoneNumber:M.target.value})})]}),e.jsxs("div",{children:[e.jsx(te,{htmlFor:"flutterwave-name",children:"Account Name *"}),e.jsx(me,{id:"flutterwave-name",placeholder:"Full name",value:fe.accountName,onChange:M=>Ue({...fe,accountName:M.target.value})})]})]}),fe.provider==="paystack"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx(te,{htmlFor:"paystack-email",children:"Paystack Email *"}),e.jsx(me,{id:"paystack-email",type:"email",placeholder:"your.email@example.com",value:fe.email,onChange:M=>Ue({...fe,email:M.target.value})})]}),e.jsxs("div",{children:[e.jsx(te,{htmlFor:"paystack-name",children:"Account Name *"}),e.jsx(me,{id:"paystack-name",placeholder:"Full name",value:fe.accountName,onChange:M=>Ue({...fe,accountName:M.target.value})})]})]}),fe.provider==="pesapal"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx(te,{htmlFor:"pesapal-email",children:"PesaPal Email *"}),e.jsx(me,{id:"pesapal-email",type:"email",placeholder:"your.email@example.com",value:fe.email,onChange:M=>Ue({...fe,email:M.target.value})})]}),e.jsxs("div",{children:[e.jsx(te,{htmlFor:"pesapal-phone",children:"Phone Number *"}),e.jsx(me,{id:"pesapal-phone",placeholder:"+254 700 000 000",value:fe.phoneNumber,onChange:M=>Ue({...fe,phoneNumber:M.target.value})})]}),e.jsxs("div",{children:[e.jsx(te,{htmlFor:"pesapal-name",children:"Account Name *"}),e.jsx(me,{id:"pesapal-name",placeholder:"Full name",value:fe.accountName,onChange:M=>Ue({...fe,accountName:M.target.value})})]})]}),fe.provider==="bank"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx(te,{htmlFor:"bank-name",children:"Bank Name *"}),e.jsx(me,{id:"bank-name",placeholder:"e.g., Equity Bank",value:fe.accountType,onChange:M=>Ue({...fe,accountType:M.target.value})})]}),e.jsxs("div",{children:[e.jsx(te,{htmlFor:"bank-account",children:"Account Number *"}),e.jsx(me,{id:"bank-account",placeholder:"Account number",value:fe.accountNumber,onChange:M=>Ue({...fe,accountNumber:M.target.value})})]}),e.jsxs("div",{children:[e.jsx(te,{htmlFor:"bank-account-name",children:"Account Name *"}),e.jsx(me,{id:"bank-account-name",placeholder:"Account holder name",value:fe.accountName,onChange:M=>Ue({...fe,accountName:M.target.value})})]})]}),fe.provider==="card"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx(te,{htmlFor:"card-number",children:"Card Number *"}),e.jsx(me,{id:"card-number",placeholder:"1234 5678 9012 3456",maxLength:19,value:fe.accountNumber,onChange:M=>Ue({...fe,accountNumber:M.target.value})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(te,{htmlFor:"card-expiry",children:"Expiry Date *"}),e.jsx(me,{id:"card-expiry",placeholder:"MM/YY",maxLength:5})]}),e.jsxs("div",{children:[e.jsx(te,{htmlFor:"card-cvv",children:"CVV *"}),e.jsx(me,{id:"card-cvv",type:"password",placeholder:"123",maxLength:3})]})]}),e.jsxs("div",{children:[e.jsx(te,{htmlFor:"card-name",children:"Card Holder Name *"}),e.jsx(me,{id:"card-name",placeholder:"Name on card",value:fe.accountName,onChange:M=>Ue({...fe,accountName:M.target.value})})]})]}),e.jsxs("div",{className:"p-3 bg-blue-50 rounded-lg text-sm text-blue-700",children:[e.jsx("p",{className:"font-medium mb-1",children:" Secure Connection"}),e.jsx("p",{className:"text-xs",children:"Your payment information is encrypted and secure. We never store sensitive data."})]})]}),e.jsxs(Ps,{children:[e.jsx(R,{variant:"outline",onClick:()=>is(!1),children:"Cancel"}),e.jsxs(R,{onClick:jt,children:[e.jsx(_c,{className:"mr-2 h-4 w-4"}),"Link Account"]})]})]})}),e.jsx(Bt,{open:Ms,onOpenChange:ys,children:e.jsxs(zt,{className:"sm:max-w-[500px]",children:[e.jsxs(Ut,{children:[e.jsxs(Vt,{className:"flex items-center gap-2",children:[e.jsx(Fa,{className:"h-5 w-5 text-primary"}),"External Transfer"]}),e.jsx(es,{children:"Transfer funds to your connected payment accounts"})]}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{children:[e.jsx(te,{htmlFor:"transfer-account",children:"Destination Account *"}),e.jsxs(Mt,{value:st.accountId,onValueChange:M=>{const ne=Rt.find(ce=>ce._id===M);Dt({...st,accountId:M,provider:ne?.provider||""})},children:[e.jsx(Lt,{children:e.jsx(Ft,{placeholder:"Select connected account"})}),e.jsx(It,{children:Rt.map(M=>e.jsxs(Ae,{value:M._id,children:[Q(M.provider)," ",M.provider.toUpperCase()," - ",M.accountName||M.phoneNumber||M.email]},M._id))})]})]}),Rt.length===0&&e.jsxs("div",{className:"p-4 bg-yellow-50 rounded-lg",children:[e.jsx("p",{className:"text-sm text-yellow-800",children:"No connected accounts found. Please link an account first."}),e.jsx(R,{size:"sm",variant:"outline",className:"mt-2",onClick:()=>{ys(!1),is(!0)},children:"Link Account"})]}),e.jsxs("div",{children:[e.jsx(te,{htmlFor:"external-amount",children:"Amount (KES) *"}),e.jsx(me,{id:"external-amount",type:"number",placeholder:"Enter amount",value:st.amount,onChange:M=>Dt({...st,amount:M.target.value})}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Available: KES ",i.availableFunds.toLocaleString()]})]}),e.jsxs("div",{children:[e.jsx(te,{htmlFor:"external-description",children:"Description (Optional)"}),e.jsx(As,{id:"external-description",placeholder:"Add notes about this transfer",value:st.description,onChange:M=>Dt({...st,description:M.target.value})})]}),st.provider&&e.jsxs("div",{className:"p-4 bg-muted rounded-lg",children:[e.jsx("p",{className:"text-sm font-medium mb-2",children:"Transfer Summary:"}),e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("p",{children:["Provider: ",st.provider.toUpperCase()]}),e.jsxs("p",{children:["Amount: KES ",parseFloat(st.amount||0).toLocaleString()]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:"Processing time: 1-24 hours"})]})]})]}),e.jsxs(Ps,{children:[e.jsx(R,{variant:"outline",onClick:()=>ys(!1),children:"Cancel"}),e.jsxs(R,{onClick:wt,disabled:Rt.length===0,children:[e.jsx(Fa,{className:"mr-2 h-4 w-4"}),"Send Transfer"]})]})]})}),Rt.length>0&&e.jsxs(K,{children:[e.jsx(xe,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs(pe,{className:"flex items-center gap-2",children:[e.jsx(_c,{className:"h-5 w-5"}),"Connected Accounts"]}),e.jsx(ot,{children:"Manage your linked payment accounts"})]}),e.jsxs(R,{variant:"outline",size:"sm",onClick:()=>is(!0),children:[e.jsx(Gs,{className:"mr-2 h-4 w-4"}),"Link Account"]})]})}),e.jsx(Y,{children:e.jsx("div",{className:"space-y-3",children:Rt.map(M=>e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg hover:bg-muted/50 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"text-3xl",children:Q(M.provider)}),e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium flex items-center gap-2",children:[M.provider.toUpperCase(),M.verified&&e.jsx(ti,{className:"h-4 w-4 text-green-600"})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:M.accountName||M.phoneNumber||M.email||M.accountNumber}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Linked ",new Date(M.createdAt).toLocaleDateString()]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(R,{size:"sm",variant:"outline",onClick:()=>{Dt({...st,accountId:M._id,provider:M.provider}),ys(!0)},children:[e.jsx(Fa,{className:"h-4 w-4 mr-1"}),"Transfer"]}),e.jsx(R,{size:"sm",variant:"ghost",onClick:()=>Xt(M._id),children:e.jsx(A_,{className:"h-4 w-4"})})]})]},M._id))})})]}),Rt.length===0&&e.jsx(K,{className:"border-dashed",children:e.jsxs(Y,{className:"p-8 text-center",children:[e.jsx(_c,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),e.jsx("h3",{className:"font-semibold mb-2",children:"Connect Payment Accounts"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Link your M-Pesa, PayPal, or Bank accounts for quick transfers"}),e.jsxs(R,{onClick:()=>is(!0),children:[e.jsx(Gs,{className:"mr-2 h-4 w-4"}),"Link Your First Account"]})]})}),e.jsx(K,{className:"border-l-4 border-l-orange-500",children:e.jsxs(Y,{className:"p-4",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"font-semibold text-sm mb-2 flex items-center gap-2",children:[e.jsx(da,{className:"h-4 w-4 text-orange-500"}),"Transaction Limits & Security"]}),e.jsxs("div",{className:"space-y-1 text-sm text-muted-foreground",children:[e.jsxs("p",{children:["Daily Limit: KES ",O.daily.toLocaleString()]}),e.jsxs("p",{children:["Per Transaction: KES ",O.perTransaction.toLocaleString()]}),e.jsxs("p",{children:["Today's Spending: KES ",O.todaySpent.toLocaleString()]}),e.jsxs("p",{className:"text-xs text-green-600",children:["Remaining: KES ",(O.daily-O.todaySpent).toLocaleString()]})]})]}),e.jsx(De,{variant:"outline",className:"bg-green-50 text-green-700 border-green-200",children:r?" Live":" Offline"})]}),e.jsx(Cr,{value:O.todaySpent/O.daily*100,className:"mt-3 h-2"})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsxs(K,{className:"relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-gradient-to-br from-primary/20 to-transparent rounded-full -mr-16 -mt-16"}),e.jsx(xe,{className:"pb-2",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(pe,{className:"text-sm font-medium text-muted-foreground",children:"Total Balance"}),e.jsx(R,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:()=>N(!b),children:b?e.jsx(ca,{className:"h-4 w-4"}):e.jsx(ko,{className:"h-4 w-4"})})]})}),e.jsxs(Y,{children:[e.jsx("div",{className:"text-3xl font-bold",children:b?`KES ${i.balance.toLocaleString()}`:""}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-2",children:["Available funds: KES ",i.availableFunds.toLocaleString()]})]})]}),e.jsxs(K,{children:[e.jsx(xe,{className:"pb-2",children:e.jsxs(pe,{className:"text-sm font-medium text-muted-foreground flex items-center gap-2",children:[e.jsx(Cb,{className:"h-4 w-4 text-green-600"}),"Total Income"]})}),e.jsxs(Y,{children:[e.jsxs("div",{className:"text-3xl font-bold text-green-600",children:["KES ",i.totalIncome.toLocaleString()]}),e.jsxs("div",{className:"mt-2 flex items-center text-xs text-green-600",children:[e.jsx(Is,{className:"h-3 w-3 mr-1"}),"From sales & payments"]})]})]}),e.jsxs(K,{children:[e.jsx(xe,{className:"pb-2",children:e.jsxs(pe,{className:"text-sm font-medium text-muted-foreground flex items-center gap-2",children:[e.jsx(Tb,{className:"h-4 w-4 text-red-600"}),"Total Expenses"]})}),e.jsxs(Y,{children:[e.jsxs("div",{className:"text-3xl font-bold text-red-600",children:["KES ",i.totalExpenses.toLocaleString()]}),e.jsxs("div",{className:"mt-2 flex items-center text-xs text-red-600",children:[e.jsx(fi,{className:"h-3 w-3 mr-1"}),"Payments & refunds"]})]})]}),e.jsxs(K,{children:[e.jsx(xe,{className:"pb-2",children:e.jsxs(pe,{className:"text-sm font-medium text-muted-foreground flex items-center gap-2",children:[e.jsx(og,{className:"h-4 w-4 text-orange-600"}),"Pending Payments"]})}),e.jsxs(Y,{children:[e.jsxs("div",{className:"text-3xl font-bold text-orange-600",children:["KES ",i.pendingPayments.toLocaleString()]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:"Awaiting payment"})]})]})]}),f.length>0&&e.jsxs(K,{children:[e.jsxs(xe,{children:[e.jsx(pe,{children:"Currency Breakdown"}),e.jsx(ot,{children:"Your balance across different currencies"})]}),e.jsx(Y,{children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:f.map(M=>e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-muted-foreground",children:M.code}),e.jsx(De,{variant:"outline",children:M.code})]}),e.jsx("div",{className:"text-2xl font-bold mb-1",children:M.balance.toLocaleString()}),e.jsxs("div",{className:"flex items-center justify-between text-xs text-muted-foreground",children:[e.jsxs("span",{className:"text-green-600",children:[" ",M.income.toLocaleString()]}),e.jsxs("span",{className:"text-red-600",children:[" ",M.expenses.toLocaleString()]})]})]},M.code))})})]}),e.jsxs(K,{children:[e.jsx(xe,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(pe,{children:"Transactions"}),e.jsx(ot,{children:"View all your financial activities"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(R,{variant:S==="all"?"default":"outline",size:"sm",onClick:()=>C("all"),children:"All"}),e.jsxs(R,{variant:S==="income"?"default":"outline",size:"sm",onClick:()=>C("income"),children:[e.jsx(Gs,{className:"h-3 w-3 mr-1"}),"Income"]}),e.jsxs(R,{variant:S==="expense"?"default":"outline",size:"sm",onClick:()=>C("expense"),children:[e.jsx(Pu,{className:"h-3 w-3 mr-1"}),"Expenses"]})]})]})}),e.jsx(Y,{children:e.jsx(kr,{className:"h-[500px]",children:le.length===0?e.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[e.jsx(og,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"No transactions found"})]}):e.jsx("div",{className:"space-y-2",children:le.map(M=>e.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg border hover:bg-muted/50 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:`p-2 rounded-lg ${M.type==="income"?"bg-green-100":M.type==="expense"?"bg-red-100":"bg-blue-100"}`,children:Bs(M.type,M.category)}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:M.description}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx(De,{variant:"secondary",className:"text-xs",children:M.category}),e.jsx(De,{className:`text-xs ${ue(M.status)}`,children:M.status}),e.jsx("span",{className:"text-xs text-muted-foreground",children:M.method})]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:`text-lg font-bold ${M.type==="income"?"text-green-600":M.type==="expense"?"text-red-600":"text-orange-600"}`,children:[M.type==="income"?"+":M.type==="expense"?"-":"",M.currency," ",M.amount.toLocaleString()]}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[M.date.toLocaleDateString()," ",M.date.toLocaleTimeString()]})]})]},M.id))})})})]})]})},Jw={Electronics:["Smartphones","Laptops","Tablets","Accessories","Audio","Cameras","Gaming","Wearables","Smart Home"],"Clothing & Fashion":["Men","Women","Kids","Shoes","Accessories","Sportswear","Jewelry","Watches","Bags"],"Home & Garden":["Furniture","Decor","Kitchen","Bedding","Garden","Tools","Lighting","Storage","Bathroom"],"Books & Media":["Fiction","Non-Fiction","Educational","Comics","Magazines","E-books","Audiobooks"],"Sports & Outdoors":["Equipment","Apparel","Outdoor","Fitness","Team Sports","Camping","Cycling","Water Sports"],"Toys & Games":["Action Figures","Educational","Puzzles","Outdoor","Electronic","Board Games","Dolls","Building Sets"],"Beauty & Personal Care":["Skincare","Makeup","Haircare","Fragrances","Tools","Bath & Body","Nail Care","Men Grooming"],"Food & Beverages":["Snacks","Beverages","Bakery","Organic","Frozen","Fresh Produce","Dairy","Meat","Canned Goods"],"Health & Wellness":["Vitamins","Supplements","Personal Care","Medical Supplies","Fitness Equipment","Yoga","Diet"],Automotive:["Parts","Accessories","Maintenance","Electronics","Tires","Oil & Fluids","Tools"],"Baby & Kids":["Diapers","Baby Food","Toys","Clothing","Furniture","Safety","Strollers","Car Seats"],"Pet Supplies":["Pet Food","Toys","Accessories","Health","Grooming","Beds","Leashes","Aquariums"],"Office & Stationery":["Paper","Pens","Notebooks","Furniture","Electronics","Art Supplies","Filing"],"Arts & Crafts":["Painting","Drawing","Sewing","Knitting","Scrapbooking","Jewelry Making","Woodwork"],"Music & Instruments":["Guitars","Keyboards","Drums","Accessories","DJ Equipment","Sheet Music"],"Tools & Hardware":["Hand Tools","Power Tools","Electrical","Plumbing","Safety","Measuring","Fasteners"],"Jewelry & Watches":["Rings","Necklaces","Bracelets","Earrings","Watches","Accessories"],Appliances:["Kitchen","Laundry","Cleaning","Heating","Cooling","Small Appliances"],Furniture:["Living Room","Bedroom","Office","Outdoor","Storage","Kids"],Photography:["Cameras","Lenses","Tripods","Lighting","Bags","Accessories","Drones"],"Party & Events":["Decorations","Supplies","Balloons","Costumes","Tableware"],"Luggage & Travel":["Suitcases","Backpacks","Travel Accessories","Organizers"],"Industrial & Scientific":["Lab Equipment","Safety","Testing","Machinery","Raw Materials"],Other:["Custom Category"]},qz=["piece","kg","g","liter","ml","pack","box","dozen"],Kz=["Generic","Samsung","Apple","Sony","Nike","Adidas","HP","Dell","Lenovo","Canon","Nikon","LG","Panasonic","Philips","Xiaomi"],Yz=["active","inactive","draft","out-of-stock"],Xz=["new","refurbished","used-like-new","used-good","used-acceptable"],EE=({isOpen:t,onClose:s,onSubmit:a,initialData:r=null,mode:i="add"})=>{const o=()=>({name:"",description:"",price:"",category:"",subcategory:"",brand:"",sku:"",barcode:"",stock:"",minStock:"",unit:"piece",weight:"",dimensions:{length:"",width:"",height:""},condition:"new",status:"active",supplier:"",cost:"",taxRate:"16",featured:!1,freeShipping:!1,allowBackorder:!1,trackInventory:!0,images:[],tags:[],specifications:[],warranty:"",returnPolicy:"30",metaTitle:"",metaDescription:""}),[c,u]=v.useState(r||o()),[f,x]=v.useState(""),[h,p]=v.useState({key:"",value:""}),[g,y]=v.useState([]),[b,N]=v.useState(0),[S,C]=v.useState(0),[k,A]=v.useState(""),[G,F]=v.useState(!1);v.useEffect(()=>{r&&u({...o(),...r})},[r]),v.useEffect(()=>{c.category&&(c.category==="Other"?(F(!0),y([])):(F(!1),y(Jw[c.category]||[])))},[c.category]),v.useEffect(()=>{const B=parseFloat(c.price)||0,ae=parseFloat(c.cost)||0,U=parseFloat(c.taxRate)||0;if(B>0&&ae>0){const Z=B-ae-B*(U/100),de=(Z/B*100).toFixed(2);N(Z.toFixed(2)),C(de)}else N(0),C(0)},[c.price,c.cost,c.taxRate]);const E=(B,ae)=>{u(U=>({...U,[B]:ae}))},T=(B,ae,U)=>{u(Z=>({...Z,[B]:{...Z[B],[ae]:U}}))},_=()=>{f&&!c.tags.includes(f)&&(u(B=>({...B,tags:[...B.tags,f]})),x(""))},P=B=>{u(ae=>({...ae,tags:ae.tags.filter(U=>U!==B)}))},z=()=>{h.key&&h.value&&(u(B=>({...B,specifications:[...B.specifications,{...h}]})),p({key:"",value:""}))},V=B=>{u(ae=>({...ae,specifications:ae.specifications.filter((U,Z)=>Z!==B)}))},W=()=>{if(!c.name||!c.price||!c.category||!c.supplier){D.error("Please fill in all required fields (Name, Price, Category, Supplier)");return}if(parseFloat(c.price)<=0){D.error("Price must be greater than 0");return}let B=c.sku;if(!B){const U=c.category.substring(0,3).toUpperCase(),Z=Date.now().toString().slice(-6);B=`${U}-${Z}`}const ae={name:c.name,description:c.description,price:parseFloat(c.price),category:c.category,subcategory:c.subcategory,brand:c.brand,sku:B,barcode:c.barcode,stockQuantity:c.stock?parseInt(c.stock):0,reorderLevel:c.minStock?parseInt(c.minStock):5,supplierName:c.supplier,status:c.status,unit:c.unit,weight:c.weight,dimensions:c.dimensions,condition:c.condition,cost:c.cost?parseFloat(c.cost):void 0,taxRate:c.taxRate?parseFloat(c.taxRate):16,featured:c.featured,freeShipping:c.freeShipping,allowBackorder:c.allowBackorder,trackInventory:c.trackInventory,image:c.images&&c.images.length>0?c.images[0]:void 0,tags:c.tags,specifications:c.specifications,warranty:c.warranty,returnPolicy:c.returnPolicy,metaTitle:c.metaTitle,metaDescription:c.metaDescription};a(ae)},q=()=>{const B=c.category?c.category.substring(0,3).toUpperCase():"PRD",ae=Date.now().toString().slice(-6);E("sku",`${B}-${ae}`),D.success("SKU generated automatically")};return e.jsx(Bt,{open:t,onOpenChange:s,children:e.jsxs(zt,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(Ut,{children:[e.jsxs(Vt,{className:"flex items-center gap-2",children:[e.jsx(Yt,{className:"h-5 w-5"}),i==="add"?"Add New Product":"Edit Product"]}),e.jsx(es,{children:"Fill in the product details below. Fields marked with * are required."})]}),e.jsxs(ja,{defaultValue:"basic",className:"w-full",children:[e.jsxs(Sa,{className:"grid w-full grid-cols-4",children:[e.jsx(ft,{value:"basic",children:"Basic Info"}),e.jsx(ft,{value:"pricing",children:"Pricing & Stock"}),e.jsx(ft,{value:"details",children:"Details"}),e.jsx(ft,{value:"seo",children:"SEO & Meta"})]}),e.jsx(pt,{value:"basic",className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"col-span-2",children:[e.jsx(te,{htmlFor:"name",children:"Product Name *"}),e.jsx(me,{id:"name",value:c.name,onChange:B=>E("name",B.target.value),placeholder:"Enter product name",className:"font-medium"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx(te,{htmlFor:"description",children:"Description"}),e.jsx(As,{id:"description",value:c.description,onChange:B=>E("description",B.target.value),placeholder:"Detailed product description",rows:4})]}),e.jsxs("div",{children:[e.jsx(te,{htmlFor:"category",children:"Category *"}),e.jsxs(Mt,{value:c.category,onValueChange:B=>{E("category",B),E("subcategory",""),B!=="Other"&&A("")},children:[e.jsx(Lt,{children:e.jsx(Ft,{placeholder:"Select category"})}),e.jsx(It,{className:"max-h-80",children:Object.keys(Jw).map(B=>e.jsx(Ae,{value:B,children:B},B))})]})]}),G&&e.jsxs("div",{className:"col-span-2",children:[e.jsx(te,{htmlFor:"customCategory",children:"Custom Category Name *"}),e.jsx(me,{id:"customCategory",value:k,onChange:B=>{A(B.target.value),E("category",B.target.value||"Other")},placeholder:"Enter your custom category name",className:"border-primary/50"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:'Type your own category name (e.g., "Cosmetics", "Agriculture", "Real Estate")'})]}),e.jsxs("div",{children:[e.jsx(te,{htmlFor:"subcategory",children:"Subcategory"}),e.jsxs(Mt,{value:c.subcategory,onValueChange:B=>E("subcategory",B),disabled:!c.category||G,children:[e.jsx(Lt,{children:e.jsx(Ft,{placeholder:"Select subcategory"})}),e.jsx(It,{children:g.map(B=>e.jsx(Ae,{value:B,children:B},B))})]})]}),e.jsxs("div",{children:[e.jsx(te,{htmlFor:"brand",children:"Brand"}),e.jsxs(Mt,{value:c.brand,onValueChange:B=>E("brand",B),children:[e.jsx(Lt,{children:e.jsx(Ft,{placeholder:"Select brand"})}),e.jsx(It,{children:Kz.map(B=>e.jsx(Ae,{value:B,children:B},B))})]})]}),e.jsxs("div",{children:[e.jsx(te,{htmlFor:"condition",children:"Condition"}),e.jsxs(Mt,{value:c.condition,onValueChange:B=>E("condition",B),children:[e.jsx(Lt,{children:e.jsx(Ft,{})}),e.jsx(It,{children:Xz.map(B=>e.jsx(Ae,{value:B,children:B.split("-").map(ae=>ae.charAt(0).toUpperCase()+ae.slice(1)).join(" ")},B))})]})]}),e.jsxs("div",{children:[e.jsx(te,{htmlFor:"status",children:"Status"}),e.jsxs(Mt,{value:c.status,onValueChange:B=>E("status",B),children:[e.jsx(Lt,{children:e.jsx(Ft,{})}),e.jsx(It,{children:Yz.map(B=>e.jsx(Ae,{value:B,children:B.charAt(0).toUpperCase()+B.slice(1)},B))})]})]}),e.jsxs("div",{children:[e.jsx(te,{htmlFor:"supplier",children:"Supplier Name"}),e.jsx(me,{id:"supplier",value:c.supplier,onChange:B=>E("supplier",B.target.value),placeholder:"Supplier or manufacturer"})]})]})}),e.jsx(pt,{value:"pricing",className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(te,{htmlFor:"price",children:"Selling Price (KES) *"}),e.jsxs("div",{className:"relative",children:[e.jsx(ra,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),e.jsx(me,{id:"price",type:"number",value:c.price,onChange:B=>E("price",B.target.value),placeholder:"0.00",className:"pl-10"})]})]}),e.jsxs("div",{children:[e.jsx(te,{htmlFor:"cost",children:"Cost Price (KES)"}),e.jsxs("div",{className:"relative",children:[e.jsx(ra,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),e.jsx(me,{id:"cost",type:"number",value:c.cost,onChange:B=>E("cost",B.target.value),placeholder:"0.00",className:"pl-10"})]})]}),e.jsxs("div",{children:[e.jsx(te,{htmlFor:"taxRate",children:"Tax Rate (%)"}),e.jsx(me,{id:"taxRate",type:"number",value:c.taxRate,onChange:B=>E("taxRate",B.target.value),placeholder:"16"})]}),e.jsxs("div",{className:"bg-muted p-4 rounded-lg",children:[e.jsx("p",{className:"text-sm font-medium mb-2",children:"Profit Calculation"}),e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Profit:"}),e.jsxs("span",{className:"font-bold text-green-600",children:["KES ",b]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Margin:"}),e.jsxs("span",{className:"font-bold",children:[S,"%"]})]})]})]}),e.jsxs("div",{children:[e.jsx(te,{htmlFor:"stock",children:"Stock Quantity *"}),e.jsxs("div",{className:"relative",children:[e.jsx(__,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),e.jsx(me,{id:"stock",type:"number",value:c.stock,onChange:B=>E("stock",B.target.value),placeholder:"0",className:"pl-10"})]})]}),e.jsxs("div",{children:[e.jsx(te,{htmlFor:"minStock",children:"Minimum Stock Alert"}),e.jsx(me,{id:"minStock",type:"number",value:c.minStock,onChange:B=>E("minStock",B.target.value),placeholder:"5"})]}),e.jsxs("div",{children:[e.jsx(te,{htmlFor:"unit",children:"Unit"}),e.jsxs(Mt,{value:c.unit,onValueChange:B=>E("unit",B),children:[e.jsx(Lt,{children:e.jsx(Ft,{})}),e.jsx(It,{children:qz.map(B=>e.jsx(Ae,{value:B,children:B},B))})]})]}),e.jsxs("div",{children:[e.jsx(te,{htmlFor:"sku",children:"SKU (Stock Keeping Unit)"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(me,{id:"sku",value:c.sku,onChange:B=>E("sku",B.target.value),placeholder:"Auto-generated"}),e.jsx(R,{type:"button",variant:"outline",onClick:q,children:"Generate"})]})]}),e.jsxs("div",{className:"col-span-2 space-y-3 bg-muted p-4 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(te,{htmlFor:"featured",children:"Featured Product"}),e.jsx(os,{id:"featured",checked:c.featured,onCheckedChange:B=>E("featured",B)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(te,{htmlFor:"freeShipping",children:"Free Shipping"}),e.jsx(os,{id:"freeShipping",checked:c.freeShipping,onCheckedChange:B=>E("freeShipping",B)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(te,{htmlFor:"allowBackorder",children:"Allow Backorder"}),e.jsx(os,{id:"allowBackorder",checked:c.allowBackorder,onCheckedChange:B=>E("allowBackorder",B)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(te,{htmlFor:"trackInventory",children:"Track Inventory"}),e.jsx(os,{id:"trackInventory",checked:c.trackInventory,onCheckedChange:B=>E("trackInventory",B)})]})]})]})}),e.jsx(pt,{value:"details",className:"space-y-4",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(te,{htmlFor:"weight",children:"Weight (kg)"}),e.jsx(me,{id:"weight",type:"number",step:"0.01",value:c.weight,onChange:B=>E("weight",B.target.value),placeholder:"0.00"})]}),e.jsxs("div",{children:[e.jsx(te,{children:"Dimensions (cm)"}),e.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[e.jsx(me,{type:"number",value:c.dimensions.length,onChange:B=>T("dimensions","length",B.target.value),placeholder:"Length"}),e.jsx(me,{type:"number",value:c.dimensions.width,onChange:B=>T("dimensions","width",B.target.value),placeholder:"Width"}),e.jsx(me,{type:"number",value:c.dimensions.height,onChange:B=>T("dimensions","height",B.target.value),placeholder:"Height"})]})]}),e.jsxs("div",{children:[e.jsx(te,{htmlFor:"barcode",children:"Barcode / EAN"}),e.jsx(me,{id:"barcode",value:c.barcode,onChange:B=>E("barcode",B.target.value),placeholder:"Enter barcode number"})]}),e.jsxs("div",{children:[e.jsx(te,{children:"Tags"}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsx(me,{value:f,onChange:B=>x(B.target.value),placeholder:"Add a tag",onKeyPress:B=>B.key==="Enter"&&(B.preventDefault(),_())}),e.jsx(R,{type:"button",variant:"outline",onClick:_,children:e.jsx(Gs,{className:"h-4 w-4"})})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:c.tags.map((B,ae)=>e.jsxs(De,{variant:"secondary",children:[B,e.jsx(jr,{className:"h-3 w-3 ml-1 cursor-pointer",onClick:()=>P(B)})]},ae))})]}),e.jsxs("div",{children:[e.jsx(te,{children:"Specifications"}),e.jsx("div",{className:"space-y-2 mb-2",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(me,{value:h.key,onChange:B=>p({...h,key:B.target.value}),placeholder:"Key (e.g., Color)"}),e.jsx(me,{value:h.value,onChange:B=>p({...h,value:B.target.value}),placeholder:"Value (e.g., Blue)"}),e.jsx(R,{type:"button",variant:"outline",onClick:z,children:e.jsx(Gs,{className:"h-4 w-4"})})]})}),e.jsx("div",{className:"space-y-2",children:c.specifications.map((B,ae)=>e.jsxs("div",{className:"flex items-center justify-between p-2 bg-muted rounded",children:[e.jsxs("span",{className:"text-sm",children:[e.jsxs("strong",{children:[B.key,":"]})," ",B.value]}),e.jsx(jr,{className:"h-4 w-4 cursor-pointer text-destructive",onClick:()=>V(ae)})]},ae))})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(te,{htmlFor:"warranty",children:"Warranty (months)"}),e.jsx(me,{id:"warranty",type:"number",value:c.warranty,onChange:B=>E("warranty",B.target.value),placeholder:"12"})]}),e.jsxs("div",{children:[e.jsx(te,{htmlFor:"returnPolicy",children:"Return Policy (days)"}),e.jsx(me,{id:"returnPolicy",type:"number",value:c.returnPolicy,onChange:B=>E("returnPolicy",B.target.value),placeholder:"30"})]})]})]})}),e.jsx(pt,{value:"seo",className:"space-y-4",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(te,{htmlFor:"metaTitle",children:"Meta Title"}),e.jsx(me,{id:"metaTitle",value:c.metaTitle,onChange:B=>E("metaTitle",B.target.value),placeholder:"SEO optimized title",maxLength:60}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[c.metaTitle.length,"/60 characters"]})]}),e.jsxs("div",{children:[e.jsx(te,{htmlFor:"metaDescription",children:"Meta Description"}),e.jsx(As,{id:"metaDescription",value:c.metaDescription,onChange:B=>E("metaDescription",B.target.value),placeholder:"SEO optimized description",maxLength:160,rows:3}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[c.metaDescription.length,"/160 characters"]})]}),e.jsxs("div",{children:[e.jsx(te,{htmlFor:"image",children:"Product Image URL"}),e.jsx(me,{id:"image",value:c.image,onChange:B=>E("image",B.target.value),placeholder:"https://example.com/image.jpg"})]}),e.jsx("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-200",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(ks,{className:"h-5 w-5 text-blue-600 mt-0.5"}),e.jsxs("div",{className:"text-sm",children:[e.jsx("p",{className:"font-medium text-blue-900",children:"SEO Tips"}),e.jsxs("ul",{className:"list-disc list-inside text-blue-700 mt-2 space-y-1",children:[e.jsx("li",{children:"Use descriptive, keyword-rich titles"}),e.jsx("li",{children:"Include product benefits in description"}),e.jsx("li",{children:"Add relevant tags for better searchability"}),e.jsx("li",{children:"Use high-quality product images"})]})]})]})})]})})]}),e.jsxs("div",{className:"flex justify-between items-center pt-4 border-t",children:[e.jsx(R,{variant:"outline",onClick:s,children:"Cancel"}),e.jsxs(R,{onClick:W,className:"px-8",children:[e.jsx(us,{className:"mr-2 h-4 w-4"}),i==="add"?"Add Product":"Update Product"]})]})]})})},Qz=()=>{const t=Ka(),[s,a]=v.useState([]),[r,i]=v.useState([]),[o,c]=v.useState(""),[u,f]=v.useState("all"),[x,h]=v.useState("name"),[p,g]=v.useState("grid"),[y,b]=v.useState(!1),[N,S]=v.useState(!1),[C,k]=v.useState(!1),[A,G]=v.useState("add"),[F,E]=v.useState(null),[T,_]=v.useState([]),[P,z]=v.useState(null),[V,W]=v.useState(!1),[q,B]=v.useState(!1),[ae,U]=v.useState({name:"",description:"",price:"",category:"",stock:"",image:"",featured:!1,supplierName:""}),[Z,de]=v.useState({id:"",name:"",description:"",price:"",category:"",stock:"",image:"",featured:!1,supplierName:""}),H=async()=>{try{const Pe=(await Ne.get("/products")).data;if(Pe.length===0)D.info("No products found in the database."),a([]),i([]);else{const Xe=Pe.map(yt=>({id:yt._id,name:yt.name,description:yt.description||"",price:yt.price,category:yt.category,stock:yt.stockQuantity||0,image:yt.image||"https://images.unsplash.com/photo-1560472354-b33ff0c44a43?w=400&h=300&fit=crop",featured:yt.featured||!1,rating:yt.rating||4.5,reviews:yt.reviews||Math.floor(Math.random()*100),sku:yt.sku,supplierName:yt.supplierName,status:yt.status}));a(Xe),i(Xe)}}catch(oe){console.error("Error fetching products:",oe),D.error("Failed to load products. Please try again."),a([]),i([])}},se=async()=>{B(!0),await H(),B(!1),D.success("Products refreshed!")};v.useEffect(()=>{H()},[]),v.useEffect(()=>{let oe=s.filter(Pe=>{const Xe=Pe.name.toLowerCase().includes(o.toLowerCase())||Pe.description.toLowerCase().includes(o.toLowerCase()),yt=u==="all"||Pe.category===u;return Xe&&yt});oe.sort((Pe,Xe)=>{switch(x){case"price-low":return Pe.price-Xe.price;case"price-high":return Xe.price-Pe.price;case"rating":return(Xe.rating||0)-(Pe.rating||0);case"name":default:return Pe.name.localeCompare(Xe.name)}}),i(oe)},[s,o,u,x]);const ee=["all",...new Set(s.map(oe=>oe.category))],L=async oe=>{try{T.find(Xe=>Xe.id===oe.id)?(_(T.filter(Xe=>Xe.id!==oe.id)),D.success(`${oe.name} removed from wishlist`),await Ne.delete(`/wishlist/${oe.id}`)):(_([...T,oe]),D.success(`${oe.name} added to wishlist!`),await Ne.post("/wishlist",{productId:oe.id}))}catch(Pe){console.error("Error updating wishlist:",Pe),D.error("Failed to update wishlist. Please try again.")}},X=oe=>T.some(Pe=>Pe.id===oe),O=async oe=>{try{const Pe={name:oe.name,description:oe.description,price:parseFloat(oe.price),category:oe.category,subcategory:oe.subcategory,brand:oe.brand,stockQuantity:parseInt(oe.stock)||0,sku:oe.sku,barcode:oe.barcode,unit:oe.unit,weight:parseFloat(oe.weight)||0,dimensions:oe.dimensions,condition:oe.condition,status:oe.status,supplierName:oe.supplier||"Default Supplier",cost:parseFloat(oe.cost)||0,taxRate:parseFloat(oe.taxRate)||16,featured:oe.featured,freeShipping:oe.freeShipping,allowBackorder:oe.allowBackorder,trackInventory:oe.trackInventory,image:oe.image||"https://images.unsplash.com/photo-1560472354-b33ff0c44a43?w=400&h=300&fit=crop",tags:oe.tags,specifications:oe.specifications,warranty:oe.warranty,returnPolicy:oe.returnPolicy,minStock:parseInt(oe.minStock)||0,metaTitle:oe.metaTitle,metaDescription:oe.metaDescription};A==="edit"&&F?.id?(await Ne.put(`/products/${F.id}`,Pe),D.success("Product updated successfully!")):(await Ne.post("/products",Pe),D.success("Product added successfully!")),await H(),k(!1),E(null)}catch(Pe){console.error("Error saving product:",Pe),D.error("Failed to save product. Please try again.")}},J=async()=>{if(!ae.name||!ae.price||!ae.category){D.error("Please fill in all required fields");return}try{const oe={name:ae.name,description:ae.description,price:parseFloat(ae.price),category:ae.category,stockQuantity:parseInt(ae.stock)||0,sku:`SKU-${Date.now()}`,supplierName:ae.supplierName||"Default Supplier",image:ae.image||"https://images.unsplash.com/photo-1560472354-b33ff0c44a43?w=400&h=300&fit=crop",featured:ae.featured};await Ne.post("/products",oe),await H(),U({name:"",description:"",price:"",category:"",stock:"",image:"",featured:!1,supplierName:""}),b(!1),D.success("Product added successfully!")}catch(oe){console.error("Error adding product:",oe),D.error("Failed to add product. Please try again.")}},ie=async()=>{if(!Z.name||!Z.price||!Z.category){D.error("Please fill in all required fields");return}try{const oe={name:Z.name,description:Z.description,price:parseFloat(Z.price),category:Z.category,stockQuantity:parseInt(Z.stock)||0,supplierName:Z.supplierName||"Default Supplier",image:Z.image||"https://images.unsplash.com/photo-1560472354-b33ff0c44a43?w=400&h=300&fit=crop",featured:Z.featured};await Ne.put(`/products/${Z.id}`,oe),await H(),de({id:"",name:"",description:"",price:"",category:"",stock:"",image:"",featured:!1,supplierName:""}),S(!1),D.success("Product updated successfully!")}catch(oe){console.error("Error updating product:",oe),D.error("Failed to update product. Please try again.")}},be=async oe=>{try{await Ne.delete(`/products/${oe}`),await H(),D.success("Product deleted successfully!")}catch(Pe){console.error("Error deleting product:",Pe),D.error("Failed to delete product. Please try again.")}},Le=oe=>{de({id:oe.id,name:oe.name,description:oe.description,price:oe.price.toString(),category:oe.category,stock:oe.stock.toString(),image:oe.image,featured:oe.featured,supplierName:oe.supplierName}),S(!0)},ve=({product:oe})=>{const Pe=X(oe.id),Xe=Math.floor(oe.rating||0);return e.jsxs(K,{className:"group bg-white/30 backdrop-blur-md border border-green-200 rounded-xl shadow-md hover:shadow-lg transition-all duration-300",children:[e.jsxs("div",{className:"relative overflow-hidden rounded-t-xl",children:[e.jsx("img",{src:oe.image||"/placeholder.jpg",alt:oe.name||"Product image",className:"w-full h-48 object-cover transition-transform duration-300 group-hover:scale-105"}),oe.featured&&e.jsx(De,{className:"absolute top-2 left-2 bg-green-600 text-white text-xs font-medium",children:"Featured"}),e.jsxs("div",{className:"absolute top-2 right-2 flex gap-1",children:[e.jsx(R,{size:"sm",variant:"ghost",className:`h-8 w-8 p-0 opacity-0 group-hover:opacity-100 transition-opacity ${Pe?"bg-green-100 text-green-600":""}`,onClick:()=>L(oe),"aria-label":"Toggle wishlist",children:e.jsx($i,{className:`h-4 w-4 ${Pe?"fill-current":""}`})}),e.jsx(R,{size:"sm",variant:"ghost",className:"h-8 w-8 p-0 opacity-0 group-hover:opacity-100 transition-opacity",onClick:()=>{z(oe),W(!0)},"aria-label":"View details",children:e.jsx(ca,{className:"h-4 w-4"})})]})]}),e.jsxs(Y,{className:"p-4 space-y-3",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsx("h3",{className:"font-semibold text-lg line-clamp-1",children:oe.name}),e.jsx(De,{variant:"outline",className:"text-xs border-green-300 text-green-600",children:oe.category})]}),e.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2",children:oe.description}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"flex items-center",children:[...Array(5)].map((yt,vt)=>e.jsx(Ja,{className:`h-4 w-4 ${vt<Xe?"fill-yellow-400 text-yellow-400":"text-gray-300"}`},vt))}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:["(",oe.reviews||0,")"]})]}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-2xl font-bold text-green-600",children:["KES ",oe.price.toLocaleString()]}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Stock: ",oe.stock]})]}),e.jsxs("div",{className:"flex gap-2 pt-2",children:[e.jsxs(R,{size:"sm",variant:"outline",onClick:()=>Le(oe),className:"text-green-600 hover:text-green-700 hover:bg-green-50",children:[e.jsx(Yi,{className:"h-4 w-4 mr-1"}),"Edit"]}),e.jsxs(R,{size:"sm",variant:"outline",onClick:()=>be(oe.id),className:"text-red-600 hover:text-red-700 hover:bg-red-50",children:[e.jsx(ga,{className:"h-4 w-4 mr-1"}),"Delete"]})]})]})]})};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Products"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage your product catalog and inventory"})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsxs(R,{variant:"outline",size:"sm",onClick:()=>t("/dashboard/inventory"),className:"gap-2",children:[e.jsx(HS,{className:"h-4 w-4"}),"Inventory"]}),e.jsxs(R,{variant:"outline",size:"sm",onClick:()=>t("/store"),className:"gap-2",children:[e.jsx(D_,{className:"h-4 w-4"}),"Store"]}),e.jsxs(R,{variant:"outline",size:"sm",onClick:()=>t("/dashboard/ecommerce"),className:"gap-2",children:[e.jsx(ws,{className:"h-4 w-4"}),"Orders"]}),e.jsxs(R,{variant:"outline",size:"sm",onClick:se,disabled:q,className:"gap-2",children:[e.jsx(cs,{className:`h-4 w-4 ${q?"animate-spin":""}`}),q?"Refreshing...":"Refresh"]}),e.jsxs(R,{size:"sm",onClick:()=>{G("add"),E(null),k(!0)},className:"gap-2 bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700",children:[e.jsx(Gs,{className:"h-4 w-4"}),"Add Product (Enhanced)"]}),e.jsxs(Bt,{open:y,onOpenChange:b,children:[e.jsx(wa,{asChild:!0,children:e.jsxs(R,{variant:"outline",size:"sm",children:[e.jsx(Gs,{className:"mr-2 h-4 w-4"}),"Quick Add"]})}),e.jsxs(zt,{className:"sm:max-w-md",children:[e.jsxs(Ut,{children:[e.jsx(Vt,{children:"Add New Product"}),e.jsx(es,{children:"Create a new product for your catalog"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(te,{htmlFor:"name",children:"Product Name *"}),e.jsx(me,{id:"name",value:ae.name,onChange:oe=>U({...ae,name:oe.target.value}),placeholder:"Enter product name"})]}),e.jsxs("div",{children:[e.jsx(te,{htmlFor:"description",children:"Description"}),e.jsx(As,{id:"description",value:ae.description,onChange:oe=>U({...ae,description:oe.target.value}),placeholder:"Product description"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(te,{htmlFor:"price",children:"Price (KES) *"}),e.jsx(me,{id:"price",type:"number",value:ae.price,onChange:oe=>U({...ae,price:oe.target.value}),placeholder:"0"})]}),e.jsxs("div",{children:[e.jsx(te,{htmlFor:"stock",children:"Stock"}),e.jsx(me,{id:"stock",type:"number",value:ae.stock,onChange:oe=>U({...ae,stock:oe.target.value}),placeholder:"0"})]})]}),e.jsxs("div",{children:[e.jsx(te,{htmlFor:"category",children:"Category *"}),e.jsxs(Mt,{value:ae.category,onValueChange:oe=>U({...ae,category:oe}),children:[e.jsx(Lt,{children:e.jsx(Ft,{placeholder:"Select category"})}),e.jsxs(It,{children:[e.jsx(Ae,{value:"Beverages",children:"Beverages"}),e.jsx(Ae,{value:"Snacks",children:"Snacks"}),e.jsx(Ae,{value:"Bakery",children:"Bakery"}),e.jsx(Ae,{value:"Electronics",children:"Electronics"}),e.jsx(Ae,{value:"Clothing",children:"Clothing"}),e.jsx(Ae,{value:"Books",children:"Books"})]})]})]}),e.jsxs("div",{children:[e.jsx(te,{htmlFor:"image",children:"Image URL"}),e.jsx(me,{id:"image",value:ae.image,onChange:oe=>U({...ae,image:oe.target.value}),placeholder:"https://example.com/image.jpg"})]}),e.jsxs("div",{children:[e.jsx(te,{htmlFor:"supplierName",children:"Supplier Name"}),e.jsx(me,{id:"supplierName",value:ae.supplierName,onChange:oe=>U({...ae,supplierName:oe.target.value}),placeholder:"Enter supplier name"})]}),e.jsx(R,{onClick:J,className:"w-full",children:"Add Product"})]})]})]})]})]}),e.jsx(K,{className:"bg-card border-border",children:e.jsx(Y,{className:"p-4",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(oa,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),e.jsx(me,{placeholder:"Search products...",value:o,onChange:oe=>c(oe.target.value),className:"pl-10"})]})}),e.jsxs(Mt,{value:u,onValueChange:f,children:[e.jsx(Lt,{className:"w-full sm:w-48",children:e.jsx(Ft,{placeholder:"Category"})}),e.jsx(It,{children:ee.map(oe=>e.jsx(Ae,{value:oe,children:oe==="all"?"All Categories":oe},oe))})]}),e.jsxs(Mt,{value:x,onValueChange:h,children:[e.jsx(Lt,{className:"w-full sm:w-48",children:e.jsx(Ft,{placeholder:"Sort by"})}),e.jsxs(It,{children:[e.jsx(Ae,{value:"name",children:"Name"}),e.jsx(Ae,{value:"price-low",children:"Price: Low to High"}),e.jsx(Ae,{value:"price-high",children:"Price: High to Low"}),e.jsx(Ae,{value:"rating",children:"Rating"})]})]})]})})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:r.map(oe=>e.jsx(ve,{product:oe},oe.id))}),r.length===0&&e.jsx(K,{className:"bg-card border-border",children:e.jsxs(Y,{className:"p-8 text-center",children:[e.jsx(Yt,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No products found"}),e.jsx("p",{className:"text-muted-foreground",children:"Try adjusting your search or filter criteria"})]})}),P&&e.jsx(Bt,{open:V,onOpenChange:W,children:e.jsxs(zt,{className:"sm:max-w-2xl",children:[e.jsxs(Ut,{children:[e.jsx(Vt,{children:P.name}),e.jsx(es,{children:"Product details and specifications"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx("div",{children:e.jsx("img",{src:P.image,alt:P.name,className:"w-full h-64 object-cover rounded-lg"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(De,{variant:"outline",children:P.category}),P.featured&&e.jsx(De,{className:"ml-2",children:"Featured"})]}),e.jsx("p",{className:"text-muted-foreground",children:P.description}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"flex items-center",children:[...Array(5)].map((oe,Pe)=>e.jsx(Ja,{className:`h-4 w-4 ${Pe<Math.floor(P.rating||0)?"fill-yellow-400 text-yellow-400":"text-gray-300"}`},Pe))}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[P.rating," (",P.reviews," reviews)"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("p",{className:"text-3xl font-bold text-primary",children:["KES ",P.price.toLocaleString()]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Stock: ",P.stock," available"]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(R,{onClick:()=>Le(P),className:"flex-1",children:[e.jsx(Yi,{className:"w-4 h-4 mr-2"}),"Edit Product"]}),e.jsx(R,{variant:"outline",onClick:()=>L(P),className:X(P.id)?"bg-red-50 text-red-600":"",children:e.jsx($i,{className:`w-4 h-4 ${X(P.id)?"fill-current":""}`})})]})]})]})]})}),e.jsx(Bt,{open:N,onOpenChange:S,children:e.jsxs(zt,{className:"sm:max-w-md",children:[e.jsxs(Ut,{children:[e.jsx(Vt,{children:"Edit Product"}),e.jsx(es,{children:"Update product details"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(te,{htmlFor:"edit-name",children:"Product Name *"}),e.jsx(me,{id:"edit-name",value:Z.name,onChange:oe=>de({...Z,name:oe.target.value}),placeholder:"Enter product name"})]}),e.jsxs("div",{children:[e.jsx(te,{htmlFor:"edit-description",children:"Description"}),e.jsx(As,{id:"edit-description",value:Z.description,onChange:oe=>de({...Z,description:oe.target.value}),placeholder:"Product description"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(te,{htmlFor:"edit-price",children:"Price (KES) *"}),e.jsx(me,{id:"edit-price",type:"number",value:Z.price,onChange:oe=>de({...Z,price:oe.target.value}),placeholder:"0"})]}),e.jsxs("div",{children:[e.jsx(te,{htmlFor:"edit-stock",children:"Stock"}),e.jsx(me,{id:"edit-stock",type:"number",value:Z.stock,onChange:oe=>de({...Z,stock:oe.target.value}),placeholder:"0"})]})]}),e.jsxs("div",{children:[e.jsx(te,{htmlFor:"edit-category",children:"Category *"}),e.jsxs(Mt,{value:Z.category,onValueChange:oe=>de({...Z,category:oe}),children:[e.jsx(Lt,{children:e.jsx(Ft,{placeholder:"Select category"})}),e.jsxs(It,{children:[e.jsx(Ae,{value:"Beverages",children:"Beverages"}),e.jsx(Ae,{value:"Snacks",children:"Snacks"}),e.jsx(Ae,{value:"Bakery",children:"Bakery"}),e.jsx(Ae,{value:"Electronics",children:"Electronics"}),e.jsx(Ae,{value:"Clothing",children:"Clothing"}),e.jsx(Ae,{value:"Books",children:"Books"})]})]})]}),e.jsxs("div",{children:[e.jsx(te,{htmlFor:"edit-image",children:"Image URL"}),e.jsx(me,{id:"edit-image",value:Z.image,onChange:oe=>de({...Z,image:oe.target.value}),placeholder:"https://example.com/image.jpg"})]}),e.jsxs("div",{children:[e.jsx(te,{htmlFor:"edit-supplierName",children:"Supplier Name"}),e.jsx(me,{id:"edit-supplierName",value:Z.supplierName,onChange:oe=>de({...Z,supplierName:oe.target.value}),placeholder:"Enter supplier name"})]}),e.jsx(R,{onClick:ie,className:"w-full",children:"Update Product"})]})]})}),e.jsx(EE,{isOpen:C,onClose:()=>{k(!1),E(null)},onSubmit:O,initialData:F,mode:A})]})},kE=v.createContext(),sj=()=>{const t=v.useContext(kE);if(!t)throw new Error("useCart must be used within CartProvider");return t},Zz=({children:t})=>{const s=()=>{const p=localStorage.getItem("customerToken");if(p)try{const g=JSON.parse(atob(p.split(".")[1]));return`cart_items_${g.id||g.email||"guest"}`}catch{return"cart_items_guest"}return"cart_items_guest"},[a,r]=v.useState(()=>{try{const p=s(),g=localStorage.getItem(p);return g?JSON.parse(g):[]}catch{return[]}});v.useEffect(()=>{const p=s();localStorage.setItem(p,JSON.stringify(a))},[a]),v.useEffect(()=>{const p=s();try{const g=localStorage.getItem(p);r(g?JSON.parse(g):[])}catch{r([])}},[localStorage.getItem("customerToken")]);const i=(p,g=1)=>{const y=p._id||p.id;r(b=>b.find(S=>(S._id||S.id)===y)?b.map(S=>(S._id||S.id)===y?{...S,quantity:S.quantity+g}:S):[...b,{...p,_id:y,id:y,quantity:g}])},o=(p,g)=>{r(y=>y.map(b=>(b._id||b.id)===p?{...b,quantity:Math.max(0,g)}:b).filter(b=>b.quantity>0))},c=p=>r(g=>g.filter(y=>(y._id||y.id)!==p)),u=()=>r([]),f=v.useMemo(()=>a.reduce((p,g)=>p+(g.price||0)*(g.quantity||0),0),[a]),x=v.useMemo(()=>a.reduce((p,g)=>p+(g.quantity||0),0),[a]),h={items:a,add:i,update:o,remove:c,clear:u,total:f,count:x};return e.jsx(kE.Provider,{value:h,children:t})},Jz=()=>{const t=Ka(),{items:s,update:a,remove:r,clear:i,total:o,count:c}=sj(),{socket:u,connected:f}=ha(),{user:x,isAuthenticated:h}=_s(),[p,g]=v.useState(1),[y,b]=v.useState(!1),[N,S]=v.useState(""),[C,k]=v.useState(!1),[A,G]=v.useState({firstName:"",lastName:"",email:"",phone:"",company:""}),[F,E]=v.useState({address:"",city:"",state:"",zipCode:"",country:"Kenya",deliveryMethod:"standard",specialInstructions:""});v.useEffect(()=>{h&&x&&G({firstName:x.firstName||x.name?.split(" ")[0]||"",lastName:x.lastName||x.name?.split(" ")[1]||"",email:x.email||"",phone:x.phone||"",company:x.company||""})},[h,x]),v.useEffect(()=>{if(u&&f&&N)return u.on("order_status_updated",ee=>{ee.orderNumber===N&&D.info(`Order ${N}: ${ee.status}`)}),()=>{u.off("order_status_updated")}},[u,f,N]);const T=(ee,L)=>{if(L<=0){r(ee),D.success("Item removed from cart");return}a(ee,L)},_=ee=>{r(ee),D.success("Item removed from cart")},P=()=>s.reduce((ee,L)=>ee+L.price*L.quantity,0),z=()=>P()>=1e4?0:F.deliveryMethod==="express"?800:400,V=()=>Math.round(P()*.16),W=()=>P()+z()+V(),q=(ee,L)=>{G(X=>({...X,[ee]:L}))},B=(ee,L)=>{E(X=>({...X,[ee]:L}))},ae=ee=>{switch(ee){case 1:return s.length>0;case 2:return A.firstName&&A.lastName&&A.email&&A.phone;case 3:return F.address&&F.city&&F.state&&F.zipCode;default:return!0}},U=()=>{ae(p)?g(ee=>Math.min(ee+1,4)):D.error("Please fill in all required fields")},Z=()=>{g(ee=>Math.max(ee-1,1))},de=async ee=>{k(!0);try{const L=localStorage.getItem("token"),X={customer:A,shippingAddress:F,items:s.map(ie=>({product:ie._id||ie.id,name:ie.name,quantity:ie.quantity,price:ie.price})),payment:ee,subtotal:P(),shippingCost:z(),tax:V(),total:W(),status:"pending"},J=(await Ne.post("/orders",X,{headers:{Authorization:`Bearer ${L}`}})).data.orderNumber||`ORD-${Date.now()}`;S(J),b(!0),g(5),u&&f&&u.emit("order_created",{orderNumber:J,userId:x?._id,total:W()}),i(),D.success("Order placed successfully!")}catch(L){console.error("Order creation error:",L),D.error("Failed to create order. Please try again.")}finally{k(!1)}},H=ee=>{D.error("Payment failed. Please try again.")};if(y)return e.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center p-4",children:e.jsx(K,{className:"w-full max-w-md text-center bg-card border-border",children:e.jsx(Y,{className:"pt-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"mx-auto w-16 h-16 bg-green-100 rounded-full flex items-center justify-center",children:e.jsx(us,{className:"w-8 h-8 text-green-600"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-foreground",children:"Order Confirmed!"}),e.jsx("p",{className:"text-muted-foreground mt-2",children:"Thank you for your purchase. Your order has been successfully placed."})]}),e.jsxs("div",{className:"bg-muted p-4 rounded-lg",children:[e.jsx("p",{className:"text-sm font-medium",children:"Order Number"}),e.jsx("p",{className:"text-lg font-bold text-primary",children:N})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(R,{onClick:()=>t("/dashboard/products"),className:"w-full",children:"Continue Shopping"}),e.jsx(R,{variant:"outline",onClick:()=>t("/dashboard/ecommerce"),className:"w-full",children:"View Order History"})]})]})})})});const se=[{number:1,title:"Cart Review",icon:ws},{number:2,title:"Customer Info",icon:la},{number:3,title:"Shipping",icon:Kc},{number:4,title:"Payment",icon:pa}];return e.jsx("div",{className:"min-h-screen bg-background",children:e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[e.jsxs(R,{variant:"outline",size:"sm",onClick:()=>t("/dashboard/products"),children:[e.jsx(WS,{className:"w-4 h-4 mr-2"}),"Back to Products"]}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Checkout"}),e.jsx("p",{className:"text-muted-foreground",children:"Complete your purchase"})]})]}),e.jsx("div",{className:"mb-8",children:e.jsx("div",{className:"flex items-center justify-between",children:se.map((ee,L)=>e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`flex items-center justify-center w-10 h-10 rounded-full border-2 ${p>=ee.number?"bg-primary border-primary text-primary-foreground":"border-muted-foreground text-muted-foreground"}`,children:e.jsx(ee.icon,{className:"w-5 h-5"})}),e.jsx("div",{className:"ml-3 hidden sm:block",children:e.jsx("p",{className:`text-sm font-medium ${p>=ee.number?"text-foreground":"text-muted-foreground"}`,children:ee.title})}),L<se.length-1&&e.jsx("div",{className:`w-12 h-0.5 mx-4 ${p>ee.number?"bg-primary":"bg-muted"}`})]},ee.number))})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-2",children:[p===1&&e.jsxs(K,{className:"bg-card border-border",children:[e.jsxs(xe,{children:[e.jsxs(pe,{className:"flex items-center gap-2",children:[e.jsx(ws,{className:"w-5 h-5"}),"Review Your Cart"]}),e.jsx(ot,{children:"Review your items before proceeding to checkout"})]}),e.jsxs(Y,{className:"space-y-4",children:[s.map(ee=>e.jsxs("div",{className:"flex items-center gap-4 p-4 border rounded-lg",children:[e.jsx("img",{src:ee.image,alt:ee.name,className:"w-16 h-16 object-cover rounded-md"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold",children:ee.name}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["KES ",ee.price.toLocaleString()," each"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(R,{size:"sm",variant:"outline",onClick:()=>T(ee.id,ee.quantity-1),children:e.jsx(Pu,{className:"w-4 h-4"})}),e.jsx("span",{className:"w-8 text-center",children:ee.quantity}),e.jsx(R,{size:"sm",variant:"outline",onClick:()=>T(ee.id,ee.quantity+1),children:e.jsx(Gs,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"font-semibold",children:["KES ",(ee.price*ee.quantity).toLocaleString()]}),e.jsx(R,{size:"sm",variant:"ghost",onClick:()=>_(ee.id),className:"text-red-600 hover:text-red-700",children:e.jsx(ga,{className:"w-4 h-4"})})]})]},ee.id)),s.length===0&&e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Yt,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"Your cart is empty"}),e.jsx(R,{onClick:()=>t("/dashboard/products"),className:"mt-4",children:"Continue Shopping"})]})]})]}),p===2&&e.jsxs(K,{className:"bg-card border-border",children:[e.jsxs(xe,{children:[e.jsxs(pe,{className:"flex items-center gap-2",children:[e.jsx(la,{className:"w-5 h-5"}),"Customer Information"]}),e.jsx(ot,{children:"Please provide your contact information"})]}),e.jsxs(Y,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(te,{htmlFor:"firstName",children:"First Name *"}),e.jsx(me,{id:"firstName",value:A.firstName,onChange:ee=>q("firstName",ee.target.value),placeholder:"John"})]}),e.jsxs("div",{children:[e.jsx(te,{htmlFor:"lastName",children:"Last Name *"}),e.jsx(me,{id:"lastName",value:A.lastName,onChange:ee=>q("lastName",ee.target.value),placeholder:"Doe"})]})]}),e.jsxs("div",{children:[e.jsx(te,{htmlFor:"email",children:"Email Address *"}),e.jsx(me,{id:"email",type:"email",value:A.email,onChange:ee=>q("email",ee.target.value),placeholder:"john@example.com"})]}),e.jsxs("div",{children:[e.jsx(te,{htmlFor:"phone",children:"Phone Number *"}),e.jsx(me,{id:"phone",value:A.phone,onChange:ee=>q("phone",ee.target.value),placeholder:"+254 700 000 000"})]}),e.jsxs("div",{children:[e.jsx(te,{htmlFor:"company",children:"Company (Optional)"}),e.jsx(me,{id:"company",value:A.company,onChange:ee=>q("company",ee.target.value),placeholder:"Your Company"})]})]})]}),p===3&&e.jsxs(K,{className:"bg-card border-border",children:[e.jsxs(xe,{children:[e.jsxs(pe,{className:"flex items-center gap-2",children:[e.jsx(Kc,{className:"w-5 h-5"}),"Shipping Information"]}),e.jsx(ot,{children:"Where should we deliver your order?"})]}),e.jsxs(Y,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(te,{htmlFor:"address",children:"Street Address *"}),e.jsx(me,{id:"address",value:F.address,onChange:ee=>B("address",ee.target.value),placeholder:"123 Main Street"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(te,{htmlFor:"city",children:"City *"}),e.jsx(me,{id:"city",value:F.city,onChange:ee=>B("city",ee.target.value),placeholder:"Nairobi"})]}),e.jsxs("div",{children:[e.jsx(te,{htmlFor:"state",children:"State/County *"}),e.jsx(me,{id:"state",value:F.state,onChange:ee=>B("state",ee.target.value),placeholder:"Nairobi County"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(te,{htmlFor:"zipCode",children:"Postal Code *"}),e.jsx(me,{id:"zipCode",value:F.zipCode,onChange:ee=>B("zipCode",ee.target.value),placeholder:"00100"})]}),e.jsxs("div",{children:[e.jsx(te,{htmlFor:"country",children:"Country"}),e.jsxs(Mt,{value:F.country,onValueChange:ee=>B("country",ee),children:[e.jsx(Lt,{children:e.jsx(Ft,{})}),e.jsxs(It,{children:[e.jsx(Ae,{value:"Kenya",children:"Kenya"}),e.jsx(Ae,{value:"Uganda",children:"Uganda"}),e.jsx(Ae,{value:"Tanzania",children:"Tanzania"})]})]})]})]}),e.jsxs("div",{children:[e.jsx(te,{htmlFor:"deliveryMethod",children:"Delivery Method"}),e.jsxs(Mt,{value:F.deliveryMethod,onValueChange:ee=>B("deliveryMethod",ee),children:[e.jsx(Lt,{children:e.jsx(Ft,{})}),e.jsxs(It,{children:[e.jsx(Ae,{value:"standard",children:"Standard Delivery (3-5 days) - KES 400"}),e.jsx(Ae,{value:"express",children:"Express Delivery (1-2 days) - KES 800"})]})]})]}),e.jsxs("div",{children:[e.jsx(te,{htmlFor:"specialInstructions",children:"Special Instructions (Optional)"}),e.jsx(As,{id:"specialInstructions",value:F.specialInstructions,onChange:ee=>B("specialInstructions",ee.target.value),placeholder:"Any special delivery instructions..."})]})]})]}),p===4&&e.jsxs(K,{className:"bg-card border-border",children:[e.jsxs(xe,{children:[e.jsxs(pe,{className:"flex items-center gap-2",children:[e.jsx(pa,{className:"w-5 h-5"}),"Payment Method"]}),e.jsx(ot,{children:"Choose your preferred payment method"})]}),e.jsxs(Y,{children:[e.jsx(oE,{amount:W(),description:`Order for ${s.length} items`,currency:"KES",triggerText:`Pay KES ${W().toLocaleString()}`,onSuccess:de,onError:H}),e.jsx("div",{className:"mt-6 p-4 bg-muted/50 rounded-lg",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(da,{className:"w-5 h-5 text-primary mt-0.5"}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-sm font-medium",children:"Secure Payment"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Your payment information is encrypted and secure. We never store your payment details."})]})]})})]})]}),p<4&&e.jsxs("div",{className:"flex justify-between mt-6",children:[e.jsx(R,{variant:"outline",onClick:Z,disabled:p===1,children:"Previous"}),e.jsx(R,{onClick:U,disabled:!ae(p),children:p===3?"Proceed to Payment":"Next"})]})]}),e.jsx("div",{className:"lg:col-span-1",children:e.jsxs(K,{className:"bg-card border-border sticky top-4",children:[e.jsx(xe,{children:e.jsx(pe,{children:"Order Summary"})}),e.jsxs(Y,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Subtotal"}),e.jsxs("span",{children:["KES ",P().toLocaleString()]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Shipping"}),e.jsx("span",{children:z()===0?"Free":`KES ${z().toLocaleString()}`})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"VAT (16%)"}),e.jsxs("span",{children:["KES ",V().toLocaleString()]})]}),e.jsx(Pn,{}),e.jsxs("div",{className:"flex justify-between font-semibold text-lg",children:[e.jsx("span",{children:"Total"}),e.jsxs("span",{children:["KES ",W().toLocaleString()]})]})]}),z()===0&&e.jsx("div",{className:"p-3 bg-green-50 border border-green-200 rounded-lg",children:e.jsx("p",{className:"text-sm text-green-800 font-medium",children:" Free shipping on orders over KES 10,000!"})}),e.jsxs("div",{className:"space-y-2 text-sm text-muted-foreground",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ts,{className:"w-4 h-4"}),e.jsx("span",{children:"Estimated delivery: 3-5 business days"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(da,{className:"w-4 h-4"}),e.jsx("span",{children:"Secure checkout"})]})]})]})]})})]})]})})},aj=v.createContext({});function rj(t){const s=v.useRef(null);return s.current===null&&(s.current=t()),s.current}const nj=typeof window<"u",AE=nj?v.useLayoutEffect:v.useEffect,sx=v.createContext(null);function ij(t,s){t.indexOf(s)===-1&&t.push(s)}function lj(t,s){const a=t.indexOf(s);a>-1&&t.splice(a,1)}const Zi=(t,s,a)=>a>s?s:a<t?t:a;let oj=()=>{};const Ji={},_E=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function DE(t){return typeof t=="object"&&t!==null}const OE=t=>/^0[^.\s]+$/u.test(t);function cj(t){let s;return()=>(s===void 0&&(s=t()),s)}const Fn=t=>t,eU=(t,s)=>a=>s(t(a)),om=(...t)=>t.reduce(eU),Hu=(t,s,a)=>{const r=s-t;return r===0?1:(a-t)/r};class dj{constructor(){this.subscriptions=[]}add(s){return ij(this.subscriptions,s),()=>lj(this.subscriptions,s)}notify(s,a,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](s,a,r);else for(let o=0;o<i;o++){const c=this.subscriptions[o];c&&c(s,a,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const pi=t=>t*1e3,Mn=t=>t/1e3;function RE(t,s){return s?t*(1e3/s):0}const PE=(t,s,a)=>(((1-3*a+3*s)*t+(3*a-6*s))*t+3*s)*t,tU=1e-7,sU=12;function aU(t,s,a,r,i){let o,c,u=0;do c=s+(a-s)/2,o=PE(c,r,i)-t,o>0?a=c:s=c;while(Math.abs(o)>tU&&++u<sU);return c}function cm(t,s,a,r){if(t===s&&a===r)return Fn;const i=o=>aU(o,0,1,t,a);return o=>o===0||o===1?o:PE(i(o),s,r)}const ME=t=>s=>s<=.5?t(2*s)/2:(2-t(2*(1-s)))/2,FE=t=>s=>1-t(1-s),LE=cm(.33,1.53,.69,.99),uj=FE(LE),IE=ME(uj),BE=t=>(t*=2)<1?.5*uj(t):.5*(2-Math.pow(2,-10*(t-1))),mj=t=>1-Math.sin(Math.acos(t)),zE=FE(mj),UE=ME(mj),rU=cm(.42,0,1,1),nU=cm(0,0,.58,1),VE=cm(.42,0,.58,1),iU=t=>Array.isArray(t)&&typeof t[0]!="number",$E=t=>Array.isArray(t)&&typeof t[0]=="number",lU={linear:Fn,easeIn:rU,easeInOut:VE,easeOut:nU,circIn:mj,circInOut:UE,circOut:zE,backIn:uj,backInOut:IE,backOut:LE,anticipate:BE},oU=t=>typeof t=="string",e2=t=>{if($E(t)){oj(t.length===4);const[s,a,r,i]=t;return cm(s,a,r,i)}else if(oU(t))return lU[t];return t},zh=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function cU(t,s){let a=new Set,r=new Set,i=!1,o=!1;const c=new WeakSet;let u={delta:0,timestamp:0,isProcessing:!1};function f(h){c.has(h)&&(x.schedule(h),t()),h(u)}const x={schedule:(h,p=!1,g=!1)=>{const b=g&&i?a:r;return p&&c.add(h),b.has(h)||b.add(h),h},cancel:h=>{r.delete(h),c.delete(h)},process:h=>{if(u=h,i){o=!0;return}i=!0,[a,r]=[r,a],a.forEach(f),a.clear(),i=!1,o&&(o=!1,x.process(h))}};return x}const dU=40;function HE(t,s){let a=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},o=()=>a=!0,c=zh.reduce((A,G)=>(A[G]=cU(o),A),{}),{setup:u,read:f,resolveKeyframes:x,preUpdate:h,update:p,preRender:g,render:y,postRender:b}=c,N=()=>{const A=Ji.useManualTiming?i.timestamp:performance.now();a=!1,Ji.useManualTiming||(i.delta=r?1e3/60:Math.max(Math.min(A-i.timestamp,dU),1)),i.timestamp=A,i.isProcessing=!0,u.process(i),f.process(i),x.process(i),h.process(i),p.process(i),g.process(i),y.process(i),b.process(i),i.isProcessing=!1,a&&s&&(r=!1,t(N))},S=()=>{a=!0,r=!0,i.isProcessing||t(N)};return{schedule:zh.reduce((A,G)=>{const F=c[G];return A[G]=(E,T=!1,_=!1)=>(a||S(),F.schedule(E,T,_)),A},{}),cancel:A=>{for(let G=0;G<zh.length;G++)c[zh[G]].cancel(A)},state:i,steps:c}}const{schedule:va,cancel:Bl,state:ur,steps:I0}=HE(typeof requestAnimationFrame<"u"?requestAnimationFrame:Fn,!0);let Xh;function uU(){Xh=void 0}const Kr={now:()=>(Xh===void 0&&Kr.set(ur.isProcessing||Ji.useManualTiming?ur.timestamp:performance.now()),Xh),set:t=>{Xh=t,queueMicrotask(uU)}},WE=t=>s=>typeof s=="string"&&s.startsWith(t),hj=WE("--"),mU=WE("var(--"),fj=t=>mU(t)?hU.test(t.split("/*")[0].trim()):!1,hU=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,hd={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Wu={...hd,transform:t=>Zi(0,1,t)},Uh={...hd,default:1},Tu=t=>Math.round(t*1e5)/1e5,xj=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function fU(t){return t==null}const xU=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,pj=(t,s)=>a=>!!(typeof a=="string"&&xU.test(a)&&a.startsWith(t)||s&&!fU(a)&&Object.prototype.hasOwnProperty.call(a,s)),GE=(t,s,a)=>r=>{if(typeof r!="string")return r;const[i,o,c,u]=r.match(xj);return{[t]:parseFloat(i),[s]:parseFloat(o),[a]:parseFloat(c),alpha:u!==void 0?parseFloat(u):1}},pU=t=>Zi(0,255,t),B0={...hd,transform:t=>Math.round(pU(t))},go={test:pj("rgb","red"),parse:GE("red","green","blue"),transform:({red:t,green:s,blue:a,alpha:r=1})=>"rgba("+B0.transform(t)+", "+B0.transform(s)+", "+B0.transform(a)+", "+Tu(Wu.transform(r))+")"};function gU(t){let s="",a="",r="",i="";return t.length>5?(s=t.substring(1,3),a=t.substring(3,5),r=t.substring(5,7),i=t.substring(7,9)):(s=t.substring(1,2),a=t.substring(2,3),r=t.substring(3,4),i=t.substring(4,5),s+=s,a+=a,r+=r,i+=i),{red:parseInt(s,16),green:parseInt(a,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const Lg={test:pj("#"),parse:gU,transform:go.transform},dm=t=>({test:s=>typeof s=="string"&&s.endsWith(t)&&s.split(" ").length===1,parse:parseFloat,transform:s=>`${s}${t}`}),kl=dm("deg"),gi=dm("%"),Qt=dm("px"),vU=dm("vh"),jU=dm("vw"),t2={...gi,parse:t=>gi.parse(t)/100,transform:t=>gi.transform(t*100)},Oc={test:pj("hsl","hue"),parse:GE("hue","saturation","lightness"),transform:({hue:t,saturation:s,lightness:a,alpha:r=1})=>"hsla("+Math.round(t)+", "+gi.transform(Tu(s))+", "+gi.transform(Tu(a))+", "+Tu(Wu.transform(r))+")"},Ha={test:t=>go.test(t)||Lg.test(t)||Oc.test(t),parse:t=>go.test(t)?go.parse(t):Oc.test(t)?Oc.parse(t):Lg.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?go.transform(t):Oc.transform(t),getAnimatableNone:t=>{const s=Ha.parse(t);return s.alpha=0,Ha.transform(s)}},yU=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function NU(t){return isNaN(t)&&typeof t=="string"&&(t.match(xj)?.length||0)+(t.match(yU)?.length||0)>0}const qE="number",KE="color",bU="var",wU="var(",s2="${}",SU=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Gu(t){const s=t.toString(),a=[],r={color:[],number:[],var:[]},i=[];let o=0;const u=s.replace(SU,f=>(Ha.test(f)?(r.color.push(o),i.push(KE),a.push(Ha.parse(f))):f.startsWith(wU)?(r.var.push(o),i.push(bU),a.push(f)):(r.number.push(o),i.push(qE),a.push(parseFloat(f))),++o,s2)).split(s2);return{values:a,split:u,indexes:r,types:i}}function YE(t){return Gu(t).values}function XE(t){const{split:s,types:a}=Gu(t),r=s.length;return i=>{let o="";for(let c=0;c<r;c++)if(o+=s[c],i[c]!==void 0){const u=a[c];u===qE?o+=Tu(i[c]):u===KE?o+=Ha.transform(i[c]):o+=i[c]}return o}}const CU=t=>typeof t=="number"?0:Ha.test(t)?Ha.getAnimatableNone(t):t;function TU(t){const s=YE(t);return XE(t)(s.map(CU))}const zl={test:NU,parse:YE,createTransformer:XE,getAnimatableNone:TU};function z0(t,s,a){return a<0&&(a+=1),a>1&&(a-=1),a<1/6?t+(s-t)*6*a:a<1/2?s:a<2/3?t+(s-t)*(2/3-a)*6:t}function EU({hue:t,saturation:s,lightness:a,alpha:r}){t/=360,s/=100,a/=100;let i=0,o=0,c=0;if(!s)i=o=c=a;else{const u=a<.5?a*(1+s):a+s-a*s,f=2*a-u;i=z0(f,u,t+1/3),o=z0(f,u,t),c=z0(f,u,t-1/3)}return{red:Math.round(i*255),green:Math.round(o*255),blue:Math.round(c*255),alpha:r}}function Tf(t,s){return a=>a>0?s:t}const Na=(t,s,a)=>t+(s-t)*a,U0=(t,s,a)=>{const r=t*t,i=a*(s*s-r)+r;return i<0?0:Math.sqrt(i)},kU=[Lg,go,Oc],AU=t=>kU.find(s=>s.test(t));function a2(t){const s=AU(t);if(!s)return!1;let a=s.parse(t);return s===Oc&&(a=EU(a)),a}const r2=(t,s)=>{const a=a2(t),r=a2(s);if(!a||!r)return Tf(t,s);const i={...a};return o=>(i.red=U0(a.red,r.red,o),i.green=U0(a.green,r.green,o),i.blue=U0(a.blue,r.blue,o),i.alpha=Na(a.alpha,r.alpha,o),go.transform(i))},Ig=new Set(["none","hidden"]);function _U(t,s){return Ig.has(t)?a=>a<=0?t:s:a=>a>=1?s:t}function DU(t,s){return a=>Na(t,s,a)}function gj(t){return typeof t=="number"?DU:typeof t=="string"?fj(t)?Tf:Ha.test(t)?r2:PU:Array.isArray(t)?QE:typeof t=="object"?Ha.test(t)?r2:OU:Tf}function QE(t,s){const a=[...t],r=a.length,i=t.map((o,c)=>gj(o)(o,s[c]));return o=>{for(let c=0;c<r;c++)a[c]=i[c](o);return a}}function OU(t,s){const a={...t,...s},r={};for(const i in a)t[i]!==void 0&&s[i]!==void 0&&(r[i]=gj(t[i])(t[i],s[i]));return i=>{for(const o in r)a[o]=r[o](i);return a}}function RU(t,s){const a=[],r={color:0,var:0,number:0};for(let i=0;i<s.values.length;i++){const o=s.types[i],c=t.indexes[o][r[o]],u=t.values[c]??0;a[i]=u,r[o]++}return a}const PU=(t,s)=>{const a=zl.createTransformer(s),r=Gu(t),i=Gu(s);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?Ig.has(t)&&!i.values.length||Ig.has(s)&&!r.values.length?_U(t,s):om(QE(RU(r,i),i.values),a):Tf(t,s)};function ZE(t,s,a){return typeof t=="number"&&typeof s=="number"&&typeof a=="number"?Na(t,s,a):gj(t)(t,s)}const MU=t=>{const s=({timestamp:a})=>t(a);return{start:(a=!0)=>va.update(s,a),stop:()=>Bl(s),now:()=>ur.isProcessing?ur.timestamp:Kr.now()}},JE=(t,s,a=10)=>{let r="";const i=Math.max(Math.round(s/a),2);for(let o=0;o<i;o++)r+=Math.round(t(o/(i-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},Ef=2e4;function vj(t){let s=0;const a=50;let r=t.next(s);for(;!r.done&&s<Ef;)s+=a,r=t.next(s);return s>=Ef?1/0:s}function FU(t,s=100,a){const r=a({...t,keyframes:[0,s]}),i=Math.min(vj(r),Ef);return{type:"keyframes",ease:o=>r.next(i*o).value/s,duration:Mn(i)}}const LU=5;function ek(t,s,a){const r=Math.max(s-LU,0);return RE(a-t(r),s-r)}const Ea={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},V0=.001;function IU({duration:t=Ea.duration,bounce:s=Ea.bounce,velocity:a=Ea.velocity,mass:r=Ea.mass}){let i,o,c=1-s;c=Zi(Ea.minDamping,Ea.maxDamping,c),t=Zi(Ea.minDuration,Ea.maxDuration,Mn(t)),c<1?(i=x=>{const h=x*c,p=h*t,g=h-a,y=Bg(x,c),b=Math.exp(-p);return V0-g/y*b},o=x=>{const p=x*c*t,g=p*a+a,y=Math.pow(c,2)*Math.pow(x,2)*t,b=Math.exp(-p),N=Bg(Math.pow(x,2),c);return(-i(x)+V0>0?-1:1)*((g-y)*b)/N}):(i=x=>{const h=Math.exp(-x*t),p=(x-a)*t+1;return-V0+h*p},o=x=>{const h=Math.exp(-x*t),p=(a-x)*(t*t);return h*p});const u=5/t,f=zU(i,o,u);if(t=pi(t),isNaN(f))return{stiffness:Ea.stiffness,damping:Ea.damping,duration:t};{const x=Math.pow(f,2)*r;return{stiffness:x,damping:c*2*Math.sqrt(r*x),duration:t}}}const BU=12;function zU(t,s,a){let r=a;for(let i=1;i<BU;i++)r=r-t(r)/s(r);return r}function Bg(t,s){return t*Math.sqrt(1-s*s)}const UU=["duration","bounce"],VU=["stiffness","damping","mass"];function n2(t,s){return s.some(a=>t[a]!==void 0)}function $U(t){let s={velocity:Ea.velocity,stiffness:Ea.stiffness,damping:Ea.damping,mass:Ea.mass,isResolvedFromDuration:!1,...t};if(!n2(t,VU)&&n2(t,UU))if(t.visualDuration){const a=t.visualDuration,r=2*Math.PI/(a*1.2),i=r*r,o=2*Zi(.05,1,1-(t.bounce||0))*Math.sqrt(i);s={...s,mass:Ea.mass,stiffness:i,damping:o}}else{const a=IU(t);s={...s,...a,mass:Ea.mass},s.isResolvedFromDuration=!0}return s}function kf(t=Ea.visualDuration,s=Ea.bounce){const a=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:s}:t;let{restSpeed:r,restDelta:i}=a;const o=a.keyframes[0],c=a.keyframes[a.keyframes.length-1],u={done:!1,value:o},{stiffness:f,damping:x,mass:h,duration:p,velocity:g,isResolvedFromDuration:y}=$U({...a,velocity:-Mn(a.velocity||0)}),b=g||0,N=x/(2*Math.sqrt(f*h)),S=c-o,C=Mn(Math.sqrt(f/h)),k=Math.abs(S)<5;r||(r=k?Ea.restSpeed.granular:Ea.restSpeed.default),i||(i=k?Ea.restDelta.granular:Ea.restDelta.default);let A;if(N<1){const F=Bg(C,N);A=E=>{const T=Math.exp(-N*C*E);return c-T*((b+N*C*S)/F*Math.sin(F*E)+S*Math.cos(F*E))}}else if(N===1)A=F=>c-Math.exp(-C*F)*(S+(b+C*S)*F);else{const F=C*Math.sqrt(N*N-1);A=E=>{const T=Math.exp(-N*C*E),_=Math.min(F*E,300);return c-T*((b+N*C*S)*Math.sinh(_)+F*S*Math.cosh(_))/F}}const G={calculatedDuration:y&&p||null,next:F=>{const E=A(F);if(y)u.done=F>=p;else{let T=F===0?b:0;N<1&&(T=F===0?pi(b):ek(A,F,E));const _=Math.abs(T)<=r,P=Math.abs(c-E)<=i;u.done=_&&P}return u.value=u.done?c:E,u},toString:()=>{const F=Math.min(vj(G),Ef),E=JE(T=>G.next(F*T).value,F,30);return F+"ms "+E},toTransition:()=>{}};return G}kf.applyToOptions=t=>{const s=FU(t,100,kf);return t.ease=s.ease,t.duration=pi(s.duration),t.type="keyframes",t};function zg({keyframes:t,velocity:s=0,power:a=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:o=500,modifyTarget:c,min:u,max:f,restDelta:x=.5,restSpeed:h}){const p=t[0],g={done:!1,value:p},y=_=>u!==void 0&&_<u||f!==void 0&&_>f,b=_=>u===void 0?f:f===void 0||Math.abs(u-_)<Math.abs(f-_)?u:f;let N=a*s;const S=p+N,C=c===void 0?S:c(S);C!==S&&(N=C-p);const k=_=>-N*Math.exp(-_/r),A=_=>C+k(_),G=_=>{const P=k(_),z=A(_);g.done=Math.abs(P)<=x,g.value=g.done?C:z};let F,E;const T=_=>{y(g.value)&&(F=_,E=kf({keyframes:[g.value,b(g.value)],velocity:ek(A,_,g.value),damping:i,stiffness:o,restDelta:x,restSpeed:h}))};return T(0),{calculatedDuration:null,next:_=>{let P=!1;return!E&&F===void 0&&(P=!0,G(_),T(_)),F!==void 0&&_>=F?E.next(_-F):(!P&&G(_),g)}}}function HU(t,s,a){const r=[],i=a||Ji.mix||ZE,o=t.length-1;for(let c=0;c<o;c++){let u=i(t[c],t[c+1]);if(s){const f=Array.isArray(s)?s[c]||Fn:s;u=om(f,u)}r.push(u)}return r}function WU(t,s,{clamp:a=!0,ease:r,mixer:i}={}){const o=t.length;if(oj(o===s.length),o===1)return()=>s[0];if(o===2&&s[0]===s[1])return()=>s[1];const c=t[0]===t[1];t[0]>t[o-1]&&(t=[...t].reverse(),s=[...s].reverse());const u=HU(s,r,i),f=u.length,x=h=>{if(c&&h<t[0])return s[0];let p=0;if(f>1)for(;p<t.length-2&&!(h<t[p+1]);p++);const g=Hu(t[p],t[p+1],h);return u[p](g)};return a?h=>x(Zi(t[0],t[o-1],h)):x}function GU(t,s){const a=t[t.length-1];for(let r=1;r<=s;r++){const i=Hu(0,s,r);t.push(Na(a,1,i))}}function qU(t){const s=[0];return GU(s,t.length-1),s}function KU(t,s){return t.map(a=>a*s)}function YU(t,s){return t.map(()=>s||VE).splice(0,t.length-1)}function Eu({duration:t=300,keyframes:s,times:a,ease:r="easeInOut"}){const i=iU(r)?r.map(e2):e2(r),o={done:!1,value:s[0]},c=KU(a&&a.length===s.length?a:qU(s),t),u=WU(c,s,{ease:Array.isArray(i)?i:YU(s,i)});return{calculatedDuration:t,next:f=>(o.value=u(f),o.done=f>=t,o)}}const XU=t=>t!==null;function jj(t,{repeat:s,repeatType:a="loop"},r,i=1){const o=t.filter(XU),u=i<0||s&&a!=="loop"&&s%2===1?0:o.length-1;return!u||r===void 0?o[u]:r}const QU={decay:zg,inertia:zg,tween:Eu,keyframes:Eu,spring:kf};function tk(t){typeof t.type=="string"&&(t.type=QU[t.type])}class yj{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(s=>{this.resolve=s})}notifyFinished(){this.resolve()}then(s,a){return this.finished.then(s,a)}}const ZU=t=>t/100;class Nj extends yj{constructor(s){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:a}=this.options;a&&a.updatedAt!==Kr.now()&&this.tick(Kr.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=s,this.initAnimation(),this.play(),s.autoplay===!1&&this.pause()}initAnimation(){const{options:s}=this;tk(s);const{type:a=Eu,repeat:r=0,repeatDelay:i=0,repeatType:o,velocity:c=0}=s;let{keyframes:u}=s;const f=a||Eu;f!==Eu&&typeof u[0]!="number"&&(this.mixKeyframes=om(ZU,ZE(u[0],u[1])),u=[0,100]);const x=f({...s,keyframes:u});o==="mirror"&&(this.mirroredGenerator=f({...s,keyframes:[...u].reverse(),velocity:-c})),x.calculatedDuration===null&&(x.calculatedDuration=vj(x));const{calculatedDuration:h}=x;this.calculatedDuration=h,this.resolvedDuration=h+i,this.totalDuration=this.resolvedDuration*(r+1)-i,this.generator=x}updateTime(s){const a=Math.round(s-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=a}tick(s,a=!1){const{generator:r,totalDuration:i,mixKeyframes:o,mirroredGenerator:c,resolvedDuration:u,calculatedDuration:f}=this;if(this.startTime===null)return r.next(0);const{delay:x=0,keyframes:h,repeat:p,repeatType:g,repeatDelay:y,type:b,onUpdate:N,finalKeyframe:S}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,s):this.speed<0&&(this.startTime=Math.min(s-i/this.speed,this.startTime)),a?this.currentTime=s:this.updateTime(s);const C=this.currentTime-x*(this.playbackSpeed>=0?1:-1),k=this.playbackSpeed>=0?C<0:C>i;this.currentTime=Math.max(C,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=i);let A=this.currentTime,G=r;if(p){const _=Math.min(this.currentTime,i)/u;let P=Math.floor(_),z=_%1;!z&&_>=1&&(z=1),z===1&&P--,P=Math.min(P,p+1),!!(P%2)&&(g==="reverse"?(z=1-z,y&&(z-=y/u)):g==="mirror"&&(G=c)),A=Zi(0,1,z)*u}const F=k?{done:!1,value:h[0]}:G.next(A);o&&(F.value=o(F.value));let{done:E}=F;!k&&f!==null&&(E=this.playbackSpeed>=0?this.currentTime>=i:this.currentTime<=0);const T=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&E);return T&&b!==zg&&(F.value=jj(h,this.options,S,this.speed)),N&&N(F.value),T&&this.finish(),F}then(s,a){return this.finished.then(s,a)}get duration(){return Mn(this.calculatedDuration)}get iterationDuration(){const{delay:s=0}=this.options||{};return this.duration+Mn(s)}get time(){return Mn(this.currentTime)}set time(s){s=pi(s),this.currentTime=s,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=s:this.driver&&(this.startTime=this.driver.now()-s/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(s){this.updateTime(Kr.now());const a=this.playbackSpeed!==s;this.playbackSpeed=s,a&&(this.time=Mn(this.currentTime))}play(){if(this.isStopped)return;const{driver:s=MU,startTime:a}=this.options;this.driver||(this.driver=s(i=>this.tick(i))),this.options.onPlay?.();const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=a??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Kr.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(s){return this.startTime=0,this.tick(s,!0)}attachTimeline(s){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),s.observe(this)}}function JU(t){for(let s=1;s<t.length;s++)t[s]??(t[s]=t[s-1])}const vo=t=>t*180/Math.PI,Ug=t=>{const s=vo(Math.atan2(t[1],t[0]));return Vg(s)},eV={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:Ug,rotateZ:Ug,skewX:t=>vo(Math.atan(t[1])),skewY:t=>vo(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},Vg=t=>(t=t%360,t<0&&(t+=360),t),i2=Ug,l2=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),o2=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),tV={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:l2,scaleY:o2,scale:t=>(l2(t)+o2(t))/2,rotateX:t=>Vg(vo(Math.atan2(t[6],t[5]))),rotateY:t=>Vg(vo(Math.atan2(-t[2],t[0]))),rotateZ:i2,rotate:i2,skewX:t=>vo(Math.atan(t[4])),skewY:t=>vo(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function $g(t){return t.includes("scale")?1:0}function Hg(t,s){if(!t||t==="none")return $g(s);const a=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,i;if(a)r=tV,i=a;else{const u=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=eV,i=u}if(!i)return $g(s);const o=r[s],c=i[1].split(",").map(aV);return typeof o=="function"?o(c):c[o]}const sV=(t,s)=>{const{transform:a="none"}=getComputedStyle(t);return Hg(a,s)};function aV(t){return parseFloat(t.trim())}const fd=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],xd=new Set(fd),c2=t=>t===hd||t===Qt,rV=new Set(["x","y","z"]),nV=fd.filter(t=>!rV.has(t));function iV(t){const s=[];return nV.forEach(a=>{const r=t.getValue(a);r!==void 0&&(s.push([a,r.get()]),r.set(a.startsWith("scale")?1:0))}),s}const To={width:({x:t},{paddingLeft:s="0",paddingRight:a="0"})=>t.max-t.min-parseFloat(s)-parseFloat(a),height:({y:t},{paddingTop:s="0",paddingBottom:a="0"})=>t.max-t.min-parseFloat(s)-parseFloat(a),top:(t,{top:s})=>parseFloat(s),left:(t,{left:s})=>parseFloat(s),bottom:({y:t},{top:s})=>parseFloat(s)+(t.max-t.min),right:({x:t},{left:s})=>parseFloat(s)+(t.max-t.min),x:(t,{transform:s})=>Hg(s,"x"),y:(t,{transform:s})=>Hg(s,"y")};To.translateX=To.x;To.translateY=To.y;const Eo=new Set;let Wg=!1,Gg=!1,qg=!1;function sk(){if(Gg){const t=Array.from(Eo).filter(r=>r.needsMeasurement),s=new Set(t.map(r=>r.element)),a=new Map;s.forEach(r=>{const i=iV(r);i.length&&(a.set(r,i),r.render())}),t.forEach(r=>r.measureInitialState()),s.forEach(r=>{r.render();const i=a.get(r);i&&i.forEach(([o,c])=>{r.getValue(o)?.set(c)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}Gg=!1,Wg=!1,Eo.forEach(t=>t.complete(qg)),Eo.clear()}function ak(){Eo.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(Gg=!0)})}function lV(){qg=!0,ak(),sk(),qg=!1}class bj{constructor(s,a,r,i,o,c=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...s],this.onComplete=a,this.name=r,this.motionValue=i,this.element=o,this.isAsync=c}scheduleResolve(){this.state="scheduled",this.isAsync?(Eo.add(this),Wg||(Wg=!0,va.read(ak),va.resolveKeyframes(sk))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:s,name:a,element:r,motionValue:i}=this;if(s[0]===null){const o=i?.get(),c=s[s.length-1];if(o!==void 0)s[0]=o;else if(r&&a){const u=r.readValue(a,c);u!=null&&(s[0]=u)}s[0]===void 0&&(s[0]=c),i&&o===void 0&&i.set(s[0])}JU(s)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(s=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,s),Eo.delete(this)}cancel(){this.state==="scheduled"&&(Eo.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const oV=t=>t.startsWith("--");function cV(t,s,a){oV(s)?t.style.setProperty(s,a):t.style[s]=a}const dV=cj(()=>window.ScrollTimeline!==void 0),uV={};function mV(t,s){const a=cj(t);return()=>uV[s]??a()}const rk=mV(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),pu=([t,s,a,r])=>`cubic-bezier(${t}, ${s}, ${a}, ${r})`,d2={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:pu([0,.65,.55,1]),circOut:pu([.55,0,1,.45]),backIn:pu([.31,.01,.66,-.59]),backOut:pu([.33,1.53,.69,.99])};function nk(t,s){if(t)return typeof t=="function"?rk()?JE(t,s):"ease-out":$E(t)?pu(t):Array.isArray(t)?t.map(a=>nk(a,s)||d2.easeOut):d2[t]}function hV(t,s,a,{delay:r=0,duration:i=300,repeat:o=0,repeatType:c="loop",ease:u="easeOut",times:f}={},x=void 0){const h={[s]:a};f&&(h.offset=f);const p=nk(u,i);Array.isArray(p)&&(h.easing=p);const g={delay:r,duration:i,easing:Array.isArray(p)?"linear":p,fill:"both",iterations:o+1,direction:c==="reverse"?"alternate":"normal"};return x&&(g.pseudoElement=x),t.animate(h,g)}function ik(t){return typeof t=="function"&&"applyToOptions"in t}function fV({type:t,...s}){return ik(t)&&rk()?t.applyToOptions(s):(s.duration??(s.duration=300),s.ease??(s.ease="easeOut"),s)}class xV extends yj{constructor(s){if(super(),this.finishedTime=null,this.isStopped=!1,!s)return;const{element:a,name:r,keyframes:i,pseudoElement:o,allowFlatten:c=!1,finalKeyframe:u,onComplete:f}=s;this.isPseudoElement=!!o,this.allowFlatten=c,this.options=s,oj(typeof s.type!="string");const x=fV(s);this.animation=hV(a,r,i,x,o),x.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!o){const h=jj(i,this.options,u,this.speed);this.updateMotionValue?this.updateMotionValue(h):cV(a,r,h),this.animation.cancel()}f?.(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:s}=this;s==="idle"||s==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const s=this.animation.effect?.getComputedTiming?.().duration||0;return Mn(Number(s))}get iterationDuration(){const{delay:s=0}=this.options||{};return this.duration+Mn(s)}get time(){return Mn(Number(this.animation.currentTime)||0)}set time(s){this.finishedTime=null,this.animation.currentTime=pi(s)}get speed(){return this.animation.playbackRate}set speed(s){s<0&&(this.finishedTime=null),this.animation.playbackRate=s}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(s){this.animation.startTime=s}attachTimeline({timeline:s,observe:a}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,s&&dV()?(this.animation.timeline=s,Fn):a(this)}}const lk={anticipate:BE,backInOut:IE,circInOut:UE};function pV(t){return t in lk}function gV(t){typeof t.ease=="string"&&pV(t.ease)&&(t.ease=lk[t.ease])}const u2=10;class vV extends xV{constructor(s){gV(s),tk(s),super(s),s.startTime&&(this.startTime=s.startTime),this.options=s}updateMotionValue(s){const{motionValue:a,onUpdate:r,onComplete:i,element:o,...c}=this.options;if(!a)return;if(s!==void 0){a.set(s);return}const u=new Nj({...c,autoplay:!1}),f=pi(this.finishedTime??this.time);a.setWithVelocity(u.sample(f-u2).value,u.sample(f).value,u2),u.stop()}}const m2=(t,s)=>s==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(zl.test(t)||t==="0")&&!t.startsWith("url("));function jV(t){const s=t[0];if(t.length===1)return!0;for(let a=0;a<t.length;a++)if(t[a]!==s)return!0}function yV(t,s,a,r){const i=t[0];if(i===null)return!1;if(s==="display"||s==="visibility")return!0;const o=t[t.length-1],c=m2(i,s),u=m2(o,s);return!c||!u?!1:jV(t)||(a==="spring"||ik(a))&&r}function Kg(t){t.duration=0,t.type="keyframes"}const NV=new Set(["opacity","clipPath","filter","transform"]),bV=cj(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function wV(t){const{motionValue:s,name:a,repeatDelay:r,repeatType:i,damping:o,type:c}=t;if(!(s?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:f,transformTemplate:x}=s.owner.getProps();return bV()&&a&&NV.has(a)&&(a!=="transform"||!x)&&!f&&!r&&i!=="mirror"&&o!==0&&c!=="inertia"}const SV=40;class CV extends yj{constructor({autoplay:s=!0,delay:a=0,type:r="keyframes",repeat:i=0,repeatDelay:o=0,repeatType:c="loop",keyframes:u,name:f,motionValue:x,element:h,...p}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=Kr.now();const g={autoplay:s,delay:a,type:r,repeat:i,repeatDelay:o,repeatType:c,name:f,motionValue:x,element:h,...p},y=h?.KeyframeResolver||bj;this.keyframeResolver=new y(u,(b,N,S)=>this.onKeyframesResolved(b,N,g,!S),f,x,h),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(s,a,r,i){this.keyframeResolver=void 0;const{name:o,type:c,velocity:u,delay:f,isHandoff:x,onUpdate:h}=r;this.resolvedAt=Kr.now(),yV(s,o,c,u)||((Ji.instantAnimations||!f)&&h?.(jj(s,r,a)),s[0]=s[s.length-1],Kg(r),r.repeat=0);const g={startTime:i?this.resolvedAt?this.resolvedAt-this.createdAt>SV?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:a,...r,keyframes:s},y=!x&&wV(g)?new vV({...g,element:g.motionValue.owner.current}):new Nj(g);y.finished.then(()=>this.notifyFinished()).catch(Fn),this.pendingTimeline&&(this.stopTimeline=y.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=y}get finished(){return this._animation?this.animation.finished:this._finished}then(s,a){return this.finished.finally(s).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),lV()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(s){this.animation.time=s}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(s){this.animation.speed=s}get startTime(){return this.animation.startTime}attachTimeline(s){return this._animation?this.stopTimeline=this.animation.attachTimeline(s):this.pendingTimeline=s,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}const TV=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function EV(t){const s=TV.exec(t);if(!s)return[,];const[,a,r,i]=s;return[`--${a??r}`,i]}function ok(t,s,a=1){const[r,i]=EV(t);if(!r)return;const o=window.getComputedStyle(s).getPropertyValue(r);if(o){const c=o.trim();return _E(c)?parseFloat(c):c}return fj(i)?ok(i,s,a+1):i}function wj(t,s){return t?.[s]??t?.default??t}const ck=new Set(["width","height","top","left","right","bottom",...fd]),kV={test:t=>t==="auto",parse:t=>t},dk=t=>s=>s.test(t),uk=[hd,Qt,gi,kl,jU,vU,kV],h2=t=>uk.find(dk(t));function AV(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||OE(t):!0}const _V=new Set(["brightness","contrast","saturate","opacity"]);function DV(t){const[s,a]=t.slice(0,-1).split("(");if(s==="drop-shadow")return t;const[r]=a.match(xj)||[];if(!r)return t;const i=a.replace(r,"");let o=_V.has(s)?1:0;return r!==a&&(o*=100),s+"("+o+i+")"}const OV=/\b([a-z-]*)\(.*?\)/gu,Yg={...zl,getAnimatableNone:t=>{const s=t.match(OV);return s?s.map(DV).join(" "):t}},f2={...hd,transform:Math.round},RV={rotate:kl,rotateX:kl,rotateY:kl,rotateZ:kl,scale:Uh,scaleX:Uh,scaleY:Uh,scaleZ:Uh,skew:kl,skewX:kl,skewY:kl,distance:Qt,translateX:Qt,translateY:Qt,translateZ:Qt,x:Qt,y:Qt,z:Qt,perspective:Qt,transformPerspective:Qt,opacity:Wu,originX:t2,originY:t2,originZ:Qt},Sj={borderWidth:Qt,borderTopWidth:Qt,borderRightWidth:Qt,borderBottomWidth:Qt,borderLeftWidth:Qt,borderRadius:Qt,radius:Qt,borderTopLeftRadius:Qt,borderTopRightRadius:Qt,borderBottomRightRadius:Qt,borderBottomLeftRadius:Qt,width:Qt,maxWidth:Qt,height:Qt,maxHeight:Qt,top:Qt,right:Qt,bottom:Qt,left:Qt,padding:Qt,paddingTop:Qt,paddingRight:Qt,paddingBottom:Qt,paddingLeft:Qt,margin:Qt,marginTop:Qt,marginRight:Qt,marginBottom:Qt,marginLeft:Qt,backgroundPositionX:Qt,backgroundPositionY:Qt,...RV,zIndex:f2,fillOpacity:Wu,strokeOpacity:Wu,numOctaves:f2},PV={...Sj,color:Ha,backgroundColor:Ha,outlineColor:Ha,fill:Ha,stroke:Ha,borderColor:Ha,borderTopColor:Ha,borderRightColor:Ha,borderBottomColor:Ha,borderLeftColor:Ha,filter:Yg,WebkitFilter:Yg},mk=t=>PV[t];function hk(t,s){let a=mk(t);return a!==Yg&&(a=zl),a.getAnimatableNone?a.getAnimatableNone(s):void 0}const MV=new Set(["auto","none","0"]);function FV(t,s,a){let r=0,i;for(;r<t.length&&!i;){const o=t[r];typeof o=="string"&&!MV.has(o)&&Gu(o).values.length&&(i=t[r]),r++}if(i&&a)for(const o of s)t[o]=hk(a,i)}class LV extends bj{constructor(s,a,r,i,o){super(s,a,r,i,o,!0)}readKeyframes(){const{unresolvedKeyframes:s,element:a,name:r}=this;if(!a||!a.current)return;super.readKeyframes();for(let f=0;f<s.length;f++){let x=s[f];if(typeof x=="string"&&(x=x.trim(),fj(x))){const h=ok(x,a.current);h!==void 0&&(s[f]=h),f===s.length-1&&(this.finalKeyframe=x)}}if(this.resolveNoneKeyframes(),!ck.has(r)||s.length!==2)return;const[i,o]=s,c=h2(i),u=h2(o);if(c!==u)if(c2(c)&&c2(u))for(let f=0;f<s.length;f++){const x=s[f];typeof x=="string"&&(s[f]=parseFloat(x))}else To[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:s,name:a}=this,r=[];for(let i=0;i<s.length;i++)(s[i]===null||AV(s[i]))&&r.push(i);r.length&&FV(s,r,a)}measureInitialState(){const{element:s,unresolvedKeyframes:a,name:r}=this;if(!s||!s.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=To[r](s.measureViewportBox(),window.getComputedStyle(s.current)),a[0]=this.measuredOrigin;const i=a[a.length-1];i!==void 0&&s.getValue(r,i).jump(i,!1)}measureEndState(){const{element:s,name:a,unresolvedKeyframes:r}=this;if(!s||!s.current)return;const i=s.getValue(a);i&&i.jump(this.measuredOrigin,!1);const o=r.length-1,c=r[o];r[o]=To[a](s.measureViewportBox(),window.getComputedStyle(s.current)),c!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=c),this.removedTransforms?.length&&this.removedTransforms.forEach(([u,f])=>{s.getValue(u).set(f)}),this.resolveNoneKeyframes()}}function IV(t,s,a){if(t instanceof EventTarget)return[t];if(typeof t=="string"){let r=document;const i=a?.[t]??r.querySelectorAll(t);return i?Array.from(i):[]}return Array.from(t)}const fk=(t,s)=>s&&typeof t=="number"?s.transform(t):t;function xk(t){return DE(t)&&"offsetHeight"in t}const x2=30,BV=t=>!isNaN(parseFloat(t));class zV{constructor(s,a={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=r=>{const i=Kr.now();if(this.updatedAt!==i&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const o of this.dependents)o.dirty()},this.hasAnimated=!1,this.setCurrent(s),this.owner=a.owner}setCurrent(s){this.current=s,this.updatedAt=Kr.now(),this.canTrackVelocity===null&&s!==void 0&&(this.canTrackVelocity=BV(this.current))}setPrevFrameValue(s=this.current){this.prevFrameValue=s,this.prevUpdatedAt=this.updatedAt}onChange(s){return this.on("change",s)}on(s,a){this.events[s]||(this.events[s]=new dj);const r=this.events[s].add(a);return s==="change"?()=>{r(),va.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const s in this.events)this.events[s].clear()}attach(s,a){this.passiveEffect=s,this.stopPassiveEffect=a}set(s){this.passiveEffect?this.passiveEffect(s,this.updateAndNotify):this.updateAndNotify(s)}setWithVelocity(s,a,r){this.set(a),this.prev=void 0,this.prevFrameValue=s,this.prevUpdatedAt=this.updatedAt-r}jump(s,a=!0){this.updateAndNotify(s),this.prev=s,this.prevUpdatedAt=this.prevFrameValue=void 0,a&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(s){this.dependents||(this.dependents=new Set),this.dependents.add(s)}removeDependent(s){this.dependents&&this.dependents.delete(s)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const s=Kr.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||s-this.updatedAt>x2)return 0;const a=Math.min(this.updatedAt-this.prevUpdatedAt,x2);return RE(parseFloat(this.current)-parseFloat(this.prevFrameValue),a)}start(s){return this.stop(),new Promise(a=>{this.hasAnimated=!0,this.animation=s(a),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Jc(t,s){return new zV(t,s)}const{schedule:Cj}=HE(queueMicrotask,!1),Hn={x:!1,y:!1};function pk(){return Hn.x||Hn.y}function UV(t){return t==="x"||t==="y"?Hn[t]?null:(Hn[t]=!0,()=>{Hn[t]=!1}):Hn.x||Hn.y?null:(Hn.x=Hn.y=!0,()=>{Hn.x=Hn.y=!1})}function gk(t,s){const a=IV(t),r=new AbortController,i={passive:!0,...s,signal:r.signal};return[a,i,()=>r.abort()]}function p2(t){return!(t.pointerType==="touch"||pk())}function VV(t,s,a={}){const[r,i,o]=gk(t,a),c=u=>{if(!p2(u))return;const{target:f}=u,x=s(f,u);if(typeof x!="function"||!f)return;const h=p=>{p2(p)&&(x(p),f.removeEventListener("pointerleave",h))};f.addEventListener("pointerleave",h,i)};return r.forEach(u=>{u.addEventListener("pointerenter",c,i)}),o}const vk=(t,s)=>s?t===s?!0:vk(t,s.parentElement):!1,Tj=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,$V=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function HV(t){return $V.has(t.tagName)||t.tabIndex!==-1}const Qh=new WeakSet;function g2(t){return s=>{s.key==="Enter"&&t(s)}}function $0(t,s){t.dispatchEvent(new PointerEvent("pointer"+s,{isPrimary:!0,bubbles:!0}))}const WV=(t,s)=>{const a=t.currentTarget;if(!a)return;const r=g2(()=>{if(Qh.has(a))return;$0(a,"down");const i=g2(()=>{$0(a,"up")}),o=()=>$0(a,"cancel");a.addEventListener("keyup",i,s),a.addEventListener("blur",o,s)});a.addEventListener("keydown",r,s),a.addEventListener("blur",()=>a.removeEventListener("keydown",r),s)};function v2(t){return Tj(t)&&!pk()}function GV(t,s,a={}){const[r,i,o]=gk(t,a),c=u=>{const f=u.currentTarget;if(!v2(u))return;Qh.add(f);const x=s(f,u),h=(y,b)=>{window.removeEventListener("pointerup",p),window.removeEventListener("pointercancel",g),Qh.has(f)&&Qh.delete(f),v2(y)&&typeof x=="function"&&x(y,{success:b})},p=y=>{h(y,f===window||f===document||a.useGlobalTarget||vk(f,y.target))},g=y=>{h(y,!1)};window.addEventListener("pointerup",p,i),window.addEventListener("pointercancel",g,i)};return r.forEach(u=>{(a.useGlobalTarget?window:u).addEventListener("pointerdown",c,i),xk(u)&&(u.addEventListener("focus",x=>WV(x,i)),!HV(u)&&!u.hasAttribute("tabindex")&&(u.tabIndex=0))}),o}function jk(t){return DE(t)&&"ownerSVGElement"in t}function qV(t){return jk(t)&&t.tagName==="svg"}const Er=t=>!!(t&&t.getVelocity),KV=[...uk,Ha,zl],YV=t=>KV.find(dk(t)),Ej=v.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});function j2(t,s){if(typeof t=="function")return t(s);t!=null&&(t.current=s)}function XV(...t){return s=>{let a=!1;const r=t.map(i=>{const o=j2(i,s);return!a&&typeof o=="function"&&(a=!0),o});if(a)return()=>{for(let i=0;i<r.length;i++){const o=r[i];typeof o=="function"?o():j2(t[i],null)}}}}function QV(...t){return v.useCallback(XV(...t),t)}class ZV extends v.Component{getSnapshotBeforeUpdate(s){const a=this.props.childRef.current;if(a&&s.isPresent&&!this.props.isPresent){const r=a.offsetParent,i=xk(r)&&r.offsetWidth||0,o=this.props.sizeRef.current;o.height=a.offsetHeight||0,o.width=a.offsetWidth||0,o.top=a.offsetTop,o.left=a.offsetLeft,o.right=i-o.width-o.left}return null}componentDidUpdate(){}render(){return this.props.children}}function JV({children:t,isPresent:s,anchorX:a,root:r}){const i=v.useId(),o=v.useRef(null),c=v.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:u}=v.useContext(Ej),f=QV(o,t?.ref);return v.useInsertionEffect(()=>{const{width:x,height:h,top:p,left:g,right:y}=c.current;if(s||!o.current||!x||!h)return;const b=a==="left"?`left: ${g}`:`right: ${y}`;o.current.dataset.motionPopId=i;const N=document.createElement("style");u&&(N.nonce=u);const S=r??document.head;return S.appendChild(N),N.sheet&&N.sheet.insertRule(`
          [data-motion-pop-id="${i}"] {
            position: absolute !important;
            width: ${x}px !important;
            height: ${h}px !important;
            ${b}px !important;
            top: ${p}px !important;
          }
        `),()=>{S.contains(N)&&S.removeChild(N)}},[s]),e.jsx(ZV,{isPresent:s,childRef:o,sizeRef:c,children:v.cloneElement(t,{ref:f})})}const e$=({children:t,initial:s,isPresent:a,onExitComplete:r,custom:i,presenceAffectsLayout:o,mode:c,anchorX:u,root:f})=>{const x=rj(t$),h=v.useId();let p=!0,g=v.useMemo(()=>(p=!1,{id:h,initial:s,isPresent:a,custom:i,onExitComplete:y=>{x.set(y,!0);for(const b of x.values())if(!b)return;r&&r()},register:y=>(x.set(y,!1),()=>x.delete(y))}),[a,x,r]);return o&&p&&(g={...g}),v.useMemo(()=>{x.forEach((y,b)=>x.set(b,!1))},[a]),v.useEffect(()=>{!a&&!x.size&&r&&r()},[a]),c==="popLayout"&&(t=e.jsx(JV,{isPresent:a,anchorX:u,root:f,children:t})),e.jsx(sx.Provider,{value:g,children:t})};function t$(){return new Map}function yk(t=!0){const s=v.useContext(sx);if(s===null)return[!0,null];const{isPresent:a,onExitComplete:r,register:i}=s,o=v.useId();v.useEffect(()=>{if(t)return i(o)},[t]);const c=v.useCallback(()=>t&&r&&r(o),[o,r,t]);return!a&&r?[!1,c]:[!0]}const Vh=t=>t.key||"";function y2(t){const s=[];return v.Children.forEach(t,a=>{v.isValidElement(a)&&s.push(a)}),s}const s$=({children:t,custom:s,initial:a=!0,onExitComplete:r,presenceAffectsLayout:i=!0,mode:o="sync",propagate:c=!1,anchorX:u="left",root:f})=>{const[x,h]=yk(c),p=v.useMemo(()=>y2(t),[t]),g=c&&!x?[]:p.map(Vh),y=v.useRef(!0),b=v.useRef(p),N=rj(()=>new Map),[S,C]=v.useState(p),[k,A]=v.useState(p);AE(()=>{y.current=!1,b.current=p;for(let E=0;E<k.length;E++){const T=Vh(k[E]);g.includes(T)?N.delete(T):N.get(T)!==!0&&N.set(T,!1)}},[k,g.length,g.join("-")]);const G=[];if(p!==S){let E=[...p];for(let T=0;T<k.length;T++){const _=k[T],P=Vh(_);g.includes(P)||(E.splice(T,0,_),G.push(_))}return o==="wait"&&G.length&&(E=G),A(y2(E)),C(p),null}const{forceRender:F}=v.useContext(aj);return e.jsx(e.Fragment,{children:k.map(E=>{const T=Vh(E),_=c&&!x?!1:p===k||g.includes(T),P=()=>{if(N.has(T))N.set(T,!0);else return;let z=!0;N.forEach(V=>{V||(z=!1)}),z&&(F?.(),A(b.current),c&&h?.(),r&&r())};return e.jsx(e$,{isPresent:_,initial:!y.current||a?void 0:!1,custom:s,presenceAffectsLayout:i,mode:o,root:f,onExitComplete:_?void 0:P,anchorX:u,children:E},T)})})},Nk=v.createContext({strict:!1}),N2={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},ed={};for(const t in N2)ed[t]={isEnabled:s=>N2[t].some(a=>!!s[a])};function a$(t){for(const s in t)ed[s]={...ed[s],...t[s]}}const r$=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Af(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||r$.has(t)}let bk=t=>!Af(t);function n$(t){typeof t=="function"&&(bk=s=>s.startsWith("on")?!Af(s):t(s))}try{n$(require("@emotion/is-prop-valid").default)}catch{}function i$(t,s,a){const r={};for(const i in t)i==="values"&&typeof t.values=="object"||(bk(i)||a===!0&&Af(i)||!s&&!Af(i)||t.draggable&&i.startsWith("onDrag"))&&(r[i]=t[i]);return r}const ax=v.createContext({});function rx(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function qu(t){return typeof t=="string"||Array.isArray(t)}const kj=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Aj=["initial",...kj];function nx(t){return rx(t.animate)||Aj.some(s=>qu(t[s]))}function wk(t){return!!(nx(t)||t.variants)}function l$(t,s){if(nx(t)){const{initial:a,animate:r}=t;return{initial:a===!1||qu(a)?a:void 0,animate:qu(r)?r:void 0}}return t.inherit!==!1?s:{}}function o$(t){const{initial:s,animate:a}=l$(t,v.useContext(ax));return v.useMemo(()=>({initial:s,animate:a}),[b2(s),b2(a)])}function b2(t){return Array.isArray(t)?t.join(" "):t}const Ku={};function c$(t){for(const s in t)Ku[s]=t[s],hj(s)&&(Ku[s].isCSSVariable=!0)}function Sk(t,{layout:s,layoutId:a}){return xd.has(t)||t.startsWith("origin")||(s||a!==void 0)&&(!!Ku[t]||t==="opacity")}const d$={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},u$=fd.length;function m$(t,s,a){let r="",i=!0;for(let o=0;o<u$;o++){const c=fd[o],u=t[c];if(u===void 0)continue;let f=!0;if(typeof u=="number"?f=u===(c.startsWith("scale")?1:0):f=parseFloat(u)===0,!f||a){const x=fk(u,Sj[c]);if(!f){i=!1;const h=d$[c]||c;r+=`${h}(${x}) `}a&&(s[c]=x)}}return r=r.trim(),a?r=a(s,i?"":r):i&&(r="none"),r}function _j(t,s,a){const{style:r,vars:i,transformOrigin:o}=t;let c=!1,u=!1;for(const f in s){const x=s[f];if(xd.has(f)){c=!0;continue}else if(hj(f)){i[f]=x;continue}else{const h=fk(x,Sj[f]);f.startsWith("origin")?(u=!0,o[f]=h):r[f]=h}}if(s.transform||(c||a?r.transform=m$(s,t.transform,a):r.transform&&(r.transform="none")),u){const{originX:f="50%",originY:x="50%",originZ:h=0}=o;r.transformOrigin=`${f} ${x} ${h}`}}const Dj=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function Ck(t,s,a){for(const r in s)!Er(s[r])&&!Sk(r,a)&&(t[r]=s[r])}function h$({transformTemplate:t},s){return v.useMemo(()=>{const a=Dj();return _j(a,s,t),Object.assign({},a.vars,a.style)},[s])}function f$(t,s){const a=t.style||{},r={};return Ck(r,a,t),Object.assign(r,h$(t,s)),r}function x$(t,s){const a={},r=f$(t,s);return t.drag&&t.dragListener!==!1&&(a.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(a.tabIndex=0),a.style=r,a}const p$={offset:"stroke-dashoffset",array:"stroke-dasharray"},g$={offset:"strokeDashoffset",array:"strokeDasharray"};function v$(t,s,a=1,r=0,i=!0){t.pathLength=1;const o=i?p$:g$;t[o.offset]=Qt.transform(-r);const c=Qt.transform(s),u=Qt.transform(a);t[o.array]=`${c} ${u}`}function Tk(t,{attrX:s,attrY:a,attrScale:r,pathLength:i,pathSpacing:o=1,pathOffset:c=0,...u},f,x,h){if(_j(t,u,x),f){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:p,style:g}=t;p.transform&&(g.transform=p.transform,delete p.transform),(g.transform||p.transformOrigin)&&(g.transformOrigin=p.transformOrigin??"50% 50%",delete p.transformOrigin),g.transform&&(g.transformBox=h?.transformBox??"fill-box",delete p.transformBox),s!==void 0&&(p.x=s),a!==void 0&&(p.y=a),r!==void 0&&(p.scale=r),i!==void 0&&v$(p,i,o,c,!1)}const Ek=()=>({...Dj(),attrs:{}}),kk=t=>typeof t=="string"&&t.toLowerCase()==="svg";function j$(t,s,a,r){const i=v.useMemo(()=>{const o=Ek();return Tk(o,s,kk(r),t.transformTemplate,t.style),{...o.attrs,style:{...o.style}}},[s]);if(t.style){const o={};Ck(o,t.style,t),i.style={...o,...i.style}}return i}const y$=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Oj(t){return typeof t!="string"||t.includes("-")?!1:!!(y$.indexOf(t)>-1||/[A-Z]/u.test(t))}function N$(t,s,a,{latestValues:r},i,o=!1){const u=(Oj(t)?j$:x$)(s,r,i,t),f=i$(s,typeof t=="string",o),x=t!==v.Fragment?{...f,...u,ref:a}:{},{children:h}=s,p=v.useMemo(()=>Er(h)?h.get():h,[h]);return v.createElement(t,{...x,children:p})}function w2(t){const s=[{},{}];return t?.values.forEach((a,r)=>{s[0][r]=a.get(),s[1][r]=a.getVelocity()}),s}function Rj(t,s,a,r){if(typeof s=="function"){const[i,o]=w2(r);s=s(a!==void 0?a:t.custom,i,o)}if(typeof s=="string"&&(s=t.variants&&t.variants[s]),typeof s=="function"){const[i,o]=w2(r);s=s(a!==void 0?a:t.custom,i,o)}return s}function Zh(t){return Er(t)?t.get():t}function b$({scrapeMotionValuesFromProps:t,createRenderState:s},a,r,i){return{latestValues:w$(a,r,i,t),renderState:s()}}function w$(t,s,a,r){const i={},o=r(t,{});for(const g in o)i[g]=Zh(o[g]);let{initial:c,animate:u}=t;const f=nx(t),x=wk(t);s&&x&&!f&&t.inherit!==!1&&(c===void 0&&(c=s.initial),u===void 0&&(u=s.animate));let h=a?a.initial===!1:!1;h=h||c===!1;const p=h?u:c;if(p&&typeof p!="boolean"&&!rx(p)){const g=Array.isArray(p)?p:[p];for(let y=0;y<g.length;y++){const b=Rj(t,g[y]);if(b){const{transitionEnd:N,transition:S,...C}=b;for(const k in C){let A=C[k];if(Array.isArray(A)){const G=h?A.length-1:0;A=A[G]}A!==null&&(i[k]=A)}for(const k in N)i[k]=N[k]}}}return i}const Ak=t=>(s,a)=>{const r=v.useContext(ax),i=v.useContext(sx),o=()=>b$(t,s,r,i);return a?o():rj(o)};function Pj(t,s,a){const{style:r}=t,i={};for(const o in r)(Er(r[o])||s.style&&Er(s.style[o])||Sk(o,t)||a?.getValue(o)?.liveStyle!==void 0)&&(i[o]=r[o]);return i}const S$=Ak({scrapeMotionValuesFromProps:Pj,createRenderState:Dj});function _k(t,s,a){const r=Pj(t,s,a);for(const i in t)if(Er(t[i])||Er(s[i])){const o=fd.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[o]=t[i]}return r}const C$=Ak({scrapeMotionValuesFromProps:_k,createRenderState:Ek}),T$=Symbol.for("motionComponentSymbol");function Rc(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function E$(t,s,a){return v.useCallback(r=>{r&&t.onMount&&t.onMount(r),s&&(r?s.mount(r):s.unmount()),a&&(typeof a=="function"?a(r):Rc(a)&&(a.current=r))},[s])}const Mj=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),k$="framerAppearId",Dk="data-"+Mj(k$),Ok=v.createContext({});function A$(t,s,a,r,i){const{visualElement:o}=v.useContext(ax),c=v.useContext(Nk),u=v.useContext(sx),f=v.useContext(Ej).reducedMotion,x=v.useRef(null);r=r||c.renderer,!x.current&&r&&(x.current=r(t,{visualState:s,parent:o,props:a,presenceContext:u,blockInitialAnimation:u?u.initial===!1:!1,reducedMotionConfig:f}));const h=x.current,p=v.useContext(Ok);h&&!h.projection&&i&&(h.type==="html"||h.type==="svg")&&_$(x.current,a,i,p);const g=v.useRef(!1);v.useInsertionEffect(()=>{h&&g.current&&h.update(a,u)});const y=a[Dk],b=v.useRef(!!y&&!window.MotionHandoffIsComplete?.(y)&&window.MotionHasOptimisedAnimation?.(y));return AE(()=>{h&&(g.current=!0,window.MotionIsMounted=!0,h.updateFeatures(),h.scheduleRenderMicrotask(),b.current&&h.animationState&&h.animationState.animateChanges())}),v.useEffect(()=>{h&&(!b.current&&h.animationState&&h.animationState.animateChanges(),b.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(y)}),b.current=!1),h.enteringChildren=void 0)}),h}function _$(t,s,a,r){const{layoutId:i,layout:o,drag:c,dragConstraints:u,layoutScroll:f,layoutRoot:x,layoutCrossfade:h}=s;t.projection=new a(t.latestValues,s["data-framer-portal-id"]?void 0:Rk(t.parent)),t.projection.setOptions({layoutId:i,layout:o,alwaysMeasureLayout:!!c||u&&Rc(u),visualElement:t,animationType:typeof o=="string"?o:"both",initialPromotionConfig:r,crossfade:h,layoutScroll:f,layoutRoot:x})}function Rk(t){if(t)return t.options.allowProjection!==!1?t.projection:Rk(t.parent)}function H0(t,{forwardMotionProps:s=!1}={},a,r){a&&a$(a);const i=Oj(t)?C$:S$;function o(u,f){let x;const h={...v.useContext(Ej),...u,layoutId:D$(u)},{isStatic:p}=h,g=o$(u),y=i(u,p);if(!p&&nj){O$();const b=R$(h);x=b.MeasureLayout,g.visualElement=A$(t,y,h,r,b.ProjectionNode)}return e.jsxs(ax.Provider,{value:g,children:[x&&g.visualElement?e.jsx(x,{visualElement:g.visualElement,...h}):null,N$(t,u,E$(y,g.visualElement,f),y,p,s)]})}o.displayName=`motion.${typeof t=="string"?t:`create(${t.displayName??t.name??""})`}`;const c=v.forwardRef(o);return c[T$]=t,c}function D$({layoutId:t}){const s=v.useContext(aj).id;return s&&t!==void 0?s+"-"+t:t}function O$(t,s){v.useContext(Nk).strict}function R$(t){const{drag:s,layout:a}=ed;if(!s&&!a)return{};const r={...s,...a};return{MeasureLayout:s?.isEnabled(t)||a?.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}function P$(t,s){if(typeof Proxy>"u")return H0;const a=new Map,r=(o,c)=>H0(o,c,t,s),i=(o,c)=>r(o,c);return new Proxy(i,{get:(o,c)=>c==="create"?r:(a.has(c)||a.set(c,H0(c,void 0,t,s)),a.get(c))})}function Pk({top:t,left:s,right:a,bottom:r}){return{x:{min:s,max:a},y:{min:t,max:r}}}function M$({x:t,y:s}){return{top:s.min,right:t.max,bottom:s.max,left:t.min}}function F$(t,s){if(!s)return t;const a=s({x:t.left,y:t.top}),r=s({x:t.right,y:t.bottom});return{top:a.y,left:a.x,bottom:r.y,right:r.x}}function W0(t){return t===void 0||t===1}function Xg({scale:t,scaleX:s,scaleY:a}){return!W0(t)||!W0(s)||!W0(a)}function fo(t){return Xg(t)||Mk(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function Mk(t){return S2(t.x)||S2(t.y)}function S2(t){return t&&t!=="0%"}function _f(t,s,a){const r=t-a,i=s*r;return a+i}function C2(t,s,a,r,i){return i!==void 0&&(t=_f(t,i,r)),_f(t,a,r)+s}function Qg(t,s=0,a=1,r,i){t.min=C2(t.min,s,a,r,i),t.max=C2(t.max,s,a,r,i)}function Fk(t,{x:s,y:a}){Qg(t.x,s.translate,s.scale,s.originPoint),Qg(t.y,a.translate,a.scale,a.originPoint)}const T2=.999999999999,E2=1.0000000000001;function L$(t,s,a,r=!1){const i=a.length;if(!i)return;s.x=s.y=1;let o,c;for(let u=0;u<i;u++){o=a[u],c=o.projectionDelta;const{visualElement:f}=o.options;f&&f.props.style&&f.props.style.display==="contents"||(r&&o.options.layoutScroll&&o.scroll&&o!==o.root&&Mc(t,{x:-o.scroll.offset.x,y:-o.scroll.offset.y}),c&&(s.x*=c.x.scale,s.y*=c.y.scale,Fk(t,c)),r&&fo(o.latestValues)&&Mc(t,o.latestValues))}s.x<E2&&s.x>T2&&(s.x=1),s.y<E2&&s.y>T2&&(s.y=1)}function Pc(t,s){t.min=t.min+s,t.max=t.max+s}function k2(t,s,a,r,i=.5){const o=Na(t.min,t.max,i);Qg(t,s,a,o,r)}function Mc(t,s){k2(t.x,s.x,s.scaleX,s.scale,s.originX),k2(t.y,s.y,s.scaleY,s.scale,s.originY)}function Lk(t,s){return Pk(F$(t.getBoundingClientRect(),s))}function I$(t,s,a){const r=Lk(t,a),{scroll:i}=s;return i&&(Pc(r.x,i.offset.x),Pc(r.y,i.offset.y)),r}const A2=()=>({translate:0,scale:1,origin:0,originPoint:0}),Fc=()=>({x:A2(),y:A2()}),_2=()=>({min:0,max:0}),Pa=()=>({x:_2(),y:_2()}),Zg={current:null},Ik={current:!1};function B$(){if(Ik.current=!0,!!nj)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),s=()=>Zg.current=t.matches;t.addEventListener("change",s),s()}else Zg.current=!1}const z$=new WeakMap;function U$(t,s,a){for(const r in s){const i=s[r],o=a[r];if(Er(i))t.addValue(r,i);else if(Er(o))t.addValue(r,Jc(i,{owner:t}));else if(o!==i)if(t.hasValue(r)){const c=t.getValue(r);c.liveStyle===!0?c.jump(i):c.hasAnimated||c.set(i)}else{const c=t.getStaticValue(r);t.addValue(r,Jc(c!==void 0?c:i,{owner:t}))}}for(const r in a)s[r]===void 0&&t.removeValue(r);return s}const D2=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class V${scrapeMotionValuesFromProps(s,a,r){return{}}constructor({parent:s,props:a,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:o,visualState:c},u={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=bj,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const g=Kr.now();this.renderScheduledAt<g&&(this.renderScheduledAt=g,va.render(this.render,!1,!0))};const{latestValues:f,renderState:x}=c;this.latestValues=f,this.baseTarget={...f},this.initialValues=a.initial?{...f}:{},this.renderState=x,this.parent=s,this.props=a,this.presenceContext=r,this.depth=s?s.depth+1:0,this.reducedMotionConfig=i,this.options=u,this.blockInitialAnimation=!!o,this.isControllingVariants=nx(a),this.isVariantNode=wk(a),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(s&&s.current);const{willChange:h,...p}=this.scrapeMotionValuesFromProps(a,{},this);for(const g in p){const y=p[g];f[g]!==void 0&&Er(y)&&y.set(f[g])}}mount(s){this.current=s,z$.set(s,this),this.projection&&!this.projection.instance&&this.projection.mount(s),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((a,r)=>this.bindToMotionValue(r,a)),Ik.current||B$(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Zg.current,this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),Bl(this.notifyUpdate),Bl(this.render),this.valueSubscriptions.forEach(s=>s()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const s in this.events)this.events[s].clear();for(const s in this.features){const a=this.features[s];a&&(a.unmount(),a.isMounted=!1)}this.current=null}addChild(s){this.children.add(s),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(s)}removeChild(s){this.children.delete(s),this.enteringChildren&&this.enteringChildren.delete(s)}bindToMotionValue(s,a){this.valueSubscriptions.has(s)&&this.valueSubscriptions.get(s)();const r=xd.has(s);r&&this.onBindTransform&&this.onBindTransform();const i=a.on("change",c=>{this.latestValues[s]=c,this.props.onUpdate&&va.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let o;window.MotionCheckAppearSync&&(o=window.MotionCheckAppearSync(this,s,a)),this.valueSubscriptions.set(s,()=>{i(),o&&o(),a.owner&&a.stop()})}sortNodePosition(s){return!this.current||!this.sortInstanceNodePosition||this.type!==s.type?0:this.sortInstanceNodePosition(this.current,s.current)}updateFeatures(){let s="animation";for(s in ed){const a=ed[s];if(!a)continue;const{isEnabled:r,Feature:i}=a;if(!this.features[s]&&i&&r(this.props)&&(this.features[s]=new i(this)),this.features[s]){const o=this.features[s];o.isMounted?o.update():(o.mount(),o.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Pa()}getStaticValue(s){return this.latestValues[s]}setStaticValue(s,a){this.latestValues[s]=a}update(s,a){(s.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=s,this.prevPresenceContext=this.presenceContext,this.presenceContext=a;for(let r=0;r<D2.length;r++){const i=D2[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const o="on"+i,c=s[o];c&&(this.propEventSubscriptions[i]=this.on(i,c))}this.prevMotionValues=U$(this,this.scrapeMotionValuesFromProps(s,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(s){return this.props.variants?this.props.variants[s]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(s){const a=this.getClosestVariantNode();if(a)return a.variantChildren&&a.variantChildren.add(s),()=>a.variantChildren.delete(s)}addValue(s,a){const r=this.values.get(s);a!==r&&(r&&this.removeValue(s),this.bindToMotionValue(s,a),this.values.set(s,a),this.latestValues[s]=a.get())}removeValue(s){this.values.delete(s);const a=this.valueSubscriptions.get(s);a&&(a(),this.valueSubscriptions.delete(s)),delete this.latestValues[s],this.removeValueFromRenderState(s,this.renderState)}hasValue(s){return this.values.has(s)}getValue(s,a){if(this.props.values&&this.props.values[s])return this.props.values[s];let r=this.values.get(s);return r===void 0&&a!==void 0&&(r=Jc(a===null?void 0:a,{owner:this}),this.addValue(s,r)),r}readValue(s,a){let r=this.latestValues[s]!==void 0||!this.current?this.latestValues[s]:this.getBaseTargetFromProps(this.props,s)??this.readValueFromInstance(this.current,s,this.options);return r!=null&&(typeof r=="string"&&(_E(r)||OE(r))?r=parseFloat(r):!YV(r)&&zl.test(a)&&(r=hk(s,a)),this.setBaseTarget(s,Er(r)?r.get():r)),Er(r)?r.get():r}setBaseTarget(s,a){this.baseTarget[s]=a}getBaseTarget(s){const{initial:a}=this.props;let r;if(typeof a=="string"||typeof a=="object"){const o=Rj(this.props,a,this.presenceContext?.custom);o&&(r=o[s])}if(a&&r!==void 0)return r;const i=this.getBaseTargetFromProps(this.props,s);return i!==void 0&&!Er(i)?i:this.initialValues[s]!==void 0&&r===void 0?void 0:this.baseTarget[s]}on(s,a){return this.events[s]||(this.events[s]=new dj),this.events[s].add(a)}notify(s,...a){this.events[s]&&this.events[s].notify(...a)}scheduleRenderMicrotask(){Cj.render(this.render)}}class Bk extends V${constructor(){super(...arguments),this.KeyframeResolver=LV}sortInstanceNodePosition(s,a){return s.compareDocumentPosition(a)&2?1:-1}getBaseTargetFromProps(s,a){return s.style?s.style[a]:void 0}removeValueFromRenderState(s,{vars:a,style:r}){delete a[s],delete r[s]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:s}=this.props;Er(s)&&(this.childSubscription=s.on("change",a=>{this.current&&(this.current.textContent=`${a}`)}))}}function zk(t,{style:s,vars:a},r,i){const o=t.style;let c;for(c in s)o[c]=s[c];i?.applyProjectionStyles(o,r);for(c in a)o.setProperty(c,a[c])}function $$(t){return window.getComputedStyle(t)}class H$ extends Bk{constructor(){super(...arguments),this.type="html",this.renderInstance=zk}readValueFromInstance(s,a){if(xd.has(a))return this.projection?.isProjecting?$g(a):sV(s,a);{const r=$$(s),i=(hj(a)?r.getPropertyValue(a):r[a])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(s,{transformPagePoint:a}){return Lk(s,a)}build(s,a,r){_j(s,a,r.transformTemplate)}scrapeMotionValuesFromProps(s,a,r){return Pj(s,a,r)}}const Uk=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function W$(t,s,a,r){zk(t,s,void 0,r);for(const i in s.attrs)t.setAttribute(Uk.has(i)?i:Mj(i),s.attrs[i])}class G$ extends Bk{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Pa}getBaseTargetFromProps(s,a){return s[a]}readValueFromInstance(s,a){if(xd.has(a)){const r=mk(a);return r&&r.default||0}return a=Uk.has(a)?a:Mj(a),s.getAttribute(a)}scrapeMotionValuesFromProps(s,a,r){return _k(s,a,r)}build(s,a,r){Tk(s,a,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(s,a,r,i){W$(s,a,r,i)}mount(s){this.isSVGTag=kk(s.tagName),super.mount(s)}}const q$=(t,s)=>Oj(t)?new G$(s):new H$(s,{allowProjection:t!==v.Fragment});function Wc(t,s,a){const r=t.getProps();return Rj(r,s,a!==void 0?a:r.custom,t)}const Jg=t=>Array.isArray(t);function K$(t,s,a){t.hasValue(s)?t.getValue(s).set(a):t.addValue(s,Jc(a))}function Y$(t){return Jg(t)?t[t.length-1]||0:t}function X$(t,s){const a=Wc(t,s);let{transitionEnd:r={},transition:i={},...o}=a||{};o={...o,...r};for(const c in o){const u=Y$(o[c]);K$(t,c,u)}}function Q$(t){return!!(Er(t)&&t.add)}function ev(t,s){const a=t.getValue("willChange");if(Q$(a))return a.add(s);if(!a&&Ji.WillChange){const r=new Ji.WillChange("auto");t.addValue("willChange",r),r.add(s)}}function Vk(t){return t.props[Dk]}const Z$=t=>t!==null;function J$(t,{repeat:s,repeatType:a="loop"},r){const i=t.filter(Z$),o=s&&a!=="loop"&&s%2===1?0:i.length-1;return i[o]}const eH={type:"spring",stiffness:500,damping:25,restSpeed:10},tH=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),sH={type:"keyframes",duration:.8},aH={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},rH=(t,{keyframes:s})=>s.length>2?sH:xd.has(t)?t.startsWith("scale")?tH(s[1]):eH:aH;function nH({when:t,delay:s,delayChildren:a,staggerChildren:r,staggerDirection:i,repeat:o,repeatType:c,repeatDelay:u,from:f,elapsed:x,...h}){return!!Object.keys(h).length}const Fj=(t,s,a,r={},i,o)=>c=>{const u=wj(r,t)||{},f=u.delay||r.delay||0;let{elapsed:x=0}=r;x=x-pi(f);const h={keyframes:Array.isArray(a)?a:[null,a],ease:"easeOut",velocity:s.getVelocity(),...u,delay:-x,onUpdate:g=>{s.set(g),u.onUpdate&&u.onUpdate(g)},onComplete:()=>{c(),u.onComplete&&u.onComplete()},name:t,motionValue:s,element:o?void 0:i};nH(u)||Object.assign(h,rH(t,h)),h.duration&&(h.duration=pi(h.duration)),h.repeatDelay&&(h.repeatDelay=pi(h.repeatDelay)),h.from!==void 0&&(h.keyframes[0]=h.from);let p=!1;if((h.type===!1||h.duration===0&&!h.repeatDelay)&&(Kg(h),h.delay===0&&(p=!0)),(Ji.instantAnimations||Ji.skipAnimations)&&(p=!0,Kg(h),h.delay=0),h.allowFlatten=!u.type&&!u.ease,p&&!o&&s.get()!==void 0){const g=J$(h.keyframes,u);if(g!==void 0){va.update(()=>{h.onUpdate(g),h.onComplete()});return}}return u.isSync?new Nj(h):new CV(h)};function iH({protectedKeys:t,needsAnimating:s},a){const r=t.hasOwnProperty(a)&&s[a]!==!0;return s[a]=!1,r}function $k(t,s,{delay:a=0,transitionOverride:r,type:i}={}){let{transition:o=t.getDefaultTransition(),transitionEnd:c,...u}=s;r&&(o=r);const f=[],x=i&&t.animationState&&t.animationState.getState()[i];for(const h in u){const p=t.getValue(h,t.latestValues[h]??null),g=u[h];if(g===void 0||x&&iH(x,h))continue;const y={delay:a,...wj(o||{},h)},b=p.get();if(b!==void 0&&!p.isAnimating&&!Array.isArray(g)&&g===b&&!y.velocity)continue;let N=!1;if(window.MotionHandoffAnimation){const C=Vk(t);if(C){const k=window.MotionHandoffAnimation(C,h,va);k!==null&&(y.startTime=k,N=!0)}}ev(t,h),p.start(Fj(h,p,g,t.shouldReduceMotion&&ck.has(h)?{type:!1}:y,t,N));const S=p.animation;S&&f.push(S)}return c&&Promise.all(f).then(()=>{va.update(()=>{c&&X$(t,c)})}),f}function Hk(t,s,a,r=0,i=1){const o=Array.from(t).sort((x,h)=>x.sortNodePosition(h)).indexOf(s),c=t.size,u=(c-1)*r;return typeof a=="function"?a(o,c):i===1?o*r:u-o*r}function tv(t,s,a={}){const r=Wc(t,s,a.type==="exit"?t.presenceContext?.custom:void 0);let{transition:i=t.getDefaultTransition()||{}}=r||{};a.transitionOverride&&(i=a.transitionOverride);const o=r?()=>Promise.all($k(t,r,a)):()=>Promise.resolve(),c=t.variantChildren&&t.variantChildren.size?(f=0)=>{const{delayChildren:x=0,staggerChildren:h,staggerDirection:p}=i;return lH(t,s,f,x,h,p,a)}:()=>Promise.resolve(),{when:u}=i;if(u){const[f,x]=u==="beforeChildren"?[o,c]:[c,o];return f().then(()=>x())}else return Promise.all([o(),c(a.delay)])}function lH(t,s,a=0,r=0,i=0,o=1,c){const u=[];for(const f of t.variantChildren)f.notify("AnimationStart",s),u.push(tv(f,s,{...c,delay:a+(typeof r=="function"?0:r)+Hk(t.variantChildren,f,r,i,o)}).then(()=>f.notify("AnimationComplete",s)));return Promise.all(u)}function oH(t,s,a={}){t.notify("AnimationStart",s);let r;if(Array.isArray(s)){const i=s.map(o=>tv(t,o,a));r=Promise.all(i)}else if(typeof s=="string")r=tv(t,s,a);else{const i=typeof s=="function"?Wc(t,s,a.custom):s;r=Promise.all($k(t,i,a))}return r.then(()=>{t.notify("AnimationComplete",s)})}function Wk(t,s){if(!Array.isArray(s))return!1;const a=s.length;if(a!==t.length)return!1;for(let r=0;r<a;r++)if(s[r]!==t[r])return!1;return!0}const cH=Aj.length;function Gk(t){if(!t)return;if(!t.isControllingVariants){const a=t.parent?Gk(t.parent)||{}:{};return t.props.initial!==void 0&&(a.initial=t.props.initial),a}const s={};for(let a=0;a<cH;a++){const r=Aj[a],i=t.props[r];(qu(i)||i===!1)&&(s[r]=i)}return s}const dH=[...kj].reverse(),uH=kj.length;function mH(t){return s=>Promise.all(s.map(({animation:a,options:r})=>oH(t,a,r)))}function hH(t){let s=mH(t),a=O2(),r=!0;const i=f=>(x,h)=>{const p=Wc(t,h,f==="exit"?t.presenceContext?.custom:void 0);if(p){const{transition:g,transitionEnd:y,...b}=p;x={...x,...b,...y}}return x};function o(f){s=f(t)}function c(f){const{props:x}=t,h=Gk(t.parent)||{},p=[],g=new Set;let y={},b=1/0;for(let S=0;S<uH;S++){const C=dH[S],k=a[C],A=x[C]!==void 0?x[C]:h[C],G=qu(A),F=C===f?k.isActive:null;F===!1&&(b=S);let E=A===h[C]&&A!==x[C]&&G;if(E&&r&&t.manuallyAnimateOnMount&&(E=!1),k.protectedKeys={...y},!k.isActive&&F===null||!A&&!k.prevProp||rx(A)||typeof A=="boolean")continue;const T=fH(k.prevProp,A);let _=T||C===f&&k.isActive&&!E&&G||S>b&&G,P=!1;const z=Array.isArray(A)?A:[A];let V=z.reduce(i(C),{});F===!1&&(V={});const{prevResolvedValues:W={}}=k,q={...W,...V},B=Z=>{_=!0,g.has(Z)&&(P=!0,g.delete(Z)),k.needsAnimating[Z]=!0;const de=t.getValue(Z);de&&(de.liveStyle=!1)};for(const Z in q){const de=V[Z],H=W[Z];if(y.hasOwnProperty(Z))continue;let se=!1;Jg(de)&&Jg(H)?se=!Wk(de,H):se=de!==H,se?de!=null?B(Z):g.add(Z):de!==void 0&&g.has(Z)?B(Z):k.protectedKeys[Z]=!0}k.prevProp=A,k.prevResolvedValues=V,k.isActive&&(y={...y,...V}),r&&t.blockInitialAnimation&&(_=!1);const ae=E&&T;_&&(!ae||P)&&p.push(...z.map(Z=>{const de={type:C};if(typeof Z=="string"&&r&&!ae&&t.manuallyAnimateOnMount&&t.parent){const{parent:H}=t,se=Wc(H,Z);if(H.enteringChildren&&se){const{delayChildren:ee}=se.transition||{};de.delay=Hk(H.enteringChildren,t,ee)}}return{animation:Z,options:de}}))}if(g.size){const S={};if(typeof x.initial!="boolean"){const C=Wc(t,Array.isArray(x.initial)?x.initial[0]:x.initial);C&&C.transition&&(S.transition=C.transition)}g.forEach(C=>{const k=t.getBaseTarget(C),A=t.getValue(C);A&&(A.liveStyle=!0),S[C]=k??null}),p.push({animation:S})}let N=!!p.length;return r&&(x.initial===!1||x.initial===x.animate)&&!t.manuallyAnimateOnMount&&(N=!1),r=!1,N?s(p):Promise.resolve()}function u(f,x){if(a[f].isActive===x)return Promise.resolve();t.variantChildren?.forEach(p=>p.animationState?.setActive(f,x)),a[f].isActive=x;const h=c(f);for(const p in a)a[p].protectedKeys={};return h}return{animateChanges:c,setActive:u,setAnimateFunction:o,getState:()=>a,reset:()=>{a=O2()}}}function fH(t,s){return typeof s=="string"?s!==t:Array.isArray(s)?!Wk(s,t):!1}function mo(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function O2(){return{animate:mo(!0),whileInView:mo(),whileHover:mo(),whileTap:mo(),whileDrag:mo(),whileFocus:mo(),exit:mo()}}class Gl{constructor(s){this.isMounted=!1,this.node=s}update(){}}class xH extends Gl{constructor(s){super(s),s.animationState||(s.animationState=hH(s))}updateAnimationControlsSubscription(){const{animate:s}=this.node.getProps();rx(s)&&(this.unmountControls=s.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:s}=this.node.getProps(),{animate:a}=this.node.prevProps||{};s!==a&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let pH=0;class gH extends Gl{constructor(){super(...arguments),this.id=pH++}update(){if(!this.node.presenceContext)return;const{isPresent:s,onExitComplete:a}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||s===r)return;const i=this.node.animationState.setActive("exit",!s);a&&!s&&i.then(()=>{a(this.id)})}mount(){const{register:s,onExitComplete:a}=this.node.presenceContext||{};a&&a(this.id),s&&(this.unmount=s(this.id))}unmount(){}}const vH={animation:{Feature:xH},exit:{Feature:gH}};function Yu(t,s,a,r={passive:!0}){return t.addEventListener(s,a,r),()=>t.removeEventListener(s,a)}function um(t){return{point:{x:t.pageX,y:t.pageY}}}const jH=t=>s=>Tj(s)&&t(s,um(s));function ku(t,s,a,r){return Yu(t,s,jH(a),r)}const qk=1e-4,yH=1-qk,NH=1+qk,Kk=.01,bH=0-Kk,wH=0+Kk;function Mr(t){return t.max-t.min}function SH(t,s,a){return Math.abs(t-s)<=a}function R2(t,s,a,r=.5){t.origin=r,t.originPoint=Na(s.min,s.max,t.origin),t.scale=Mr(a)/Mr(s),t.translate=Na(a.min,a.max,t.origin)-t.originPoint,(t.scale>=yH&&t.scale<=NH||isNaN(t.scale))&&(t.scale=1),(t.translate>=bH&&t.translate<=wH||isNaN(t.translate))&&(t.translate=0)}function Au(t,s,a,r){R2(t.x,s.x,a.x,r?r.originX:void 0),R2(t.y,s.y,a.y,r?r.originY:void 0)}function P2(t,s,a){t.min=a.min+s.min,t.max=t.min+Mr(s)}function CH(t,s,a){P2(t.x,s.x,a.x),P2(t.y,s.y,a.y)}function M2(t,s,a){t.min=s.min-a.min,t.max=t.min+Mr(s)}function _u(t,s,a){M2(t.x,s.x,a.x),M2(t.y,s.y,a.y)}function _n(t){return[t("x"),t("y")]}const Yk=({current:t})=>t?t.ownerDocument.defaultView:null,F2=(t,s)=>Math.abs(t-s);function TH(t,s){const a=F2(t.x,s.x),r=F2(t.y,s.y);return Math.sqrt(a**2+r**2)}class Xk{constructor(s,a,{transformPagePoint:r,contextWindow:i=window,dragSnapToOrigin:o=!1,distanceThreshold:c=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const g=q0(this.lastMoveEventInfo,this.history),y=this.startEvent!==null,b=TH(g.offset,{x:0,y:0})>=this.distanceThreshold;if(!y&&!b)return;const{point:N}=g,{timestamp:S}=ur;this.history.push({...N,timestamp:S});const{onStart:C,onMove:k}=this.handlers;y||(C&&C(this.lastMoveEvent,g),this.startEvent=this.lastMoveEvent),k&&k(this.lastMoveEvent,g)},this.handlePointerMove=(g,y)=>{this.lastMoveEvent=g,this.lastMoveEventInfo=G0(y,this.transformPagePoint),va.update(this.updatePoint,!0)},this.handlePointerUp=(g,y)=>{this.end();const{onEnd:b,onSessionEnd:N,resumeAnimation:S}=this.handlers;if(this.dragSnapToOrigin&&S&&S(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const C=q0(g.type==="pointercancel"?this.lastMoveEventInfo:G0(y,this.transformPagePoint),this.history);this.startEvent&&b&&b(g,C),N&&N(g,C)},!Tj(s))return;this.dragSnapToOrigin=o,this.handlers=a,this.transformPagePoint=r,this.distanceThreshold=c,this.contextWindow=i||window;const u=um(s),f=G0(u,this.transformPagePoint),{point:x}=f,{timestamp:h}=ur;this.history=[{...x,timestamp:h}];const{onSessionStart:p}=a;p&&p(s,q0(f,this.history)),this.removeListeners=om(ku(this.contextWindow,"pointermove",this.handlePointerMove),ku(this.contextWindow,"pointerup",this.handlePointerUp),ku(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(s){this.handlers=s}end(){this.removeListeners&&this.removeListeners(),Bl(this.updatePoint)}}function G0(t,s){return s?{point:s(t.point)}:t}function L2(t,s){return{x:t.x-s.x,y:t.y-s.y}}function q0({point:t},s){return{point:t,delta:L2(t,Qk(s)),offset:L2(t,EH(s)),velocity:kH(s,.1)}}function EH(t){return t[0]}function Qk(t){return t[t.length-1]}function kH(t,s){if(t.length<2)return{x:0,y:0};let a=t.length-1,r=null;const i=Qk(t);for(;a>=0&&(r=t[a],!(i.timestamp-r.timestamp>pi(s)));)a--;if(!r)return{x:0,y:0};const o=Mn(i.timestamp-r.timestamp);if(o===0)return{x:0,y:0};const c={x:(i.x-r.x)/o,y:(i.y-r.y)/o};return c.x===1/0&&(c.x=0),c.y===1/0&&(c.y=0),c}function AH(t,{min:s,max:a},r){return s!==void 0&&t<s?t=r?Na(s,t,r.min):Math.max(t,s):a!==void 0&&t>a&&(t=r?Na(a,t,r.max):Math.min(t,a)),t}function I2(t,s,a){return{min:s!==void 0?t.min+s:void 0,max:a!==void 0?t.max+a-(t.max-t.min):void 0}}function _H(t,{top:s,left:a,bottom:r,right:i}){return{x:I2(t.x,a,i),y:I2(t.y,s,r)}}function B2(t,s){let a=s.min-t.min,r=s.max-t.max;return s.max-s.min<t.max-t.min&&([a,r]=[r,a]),{min:a,max:r}}function DH(t,s){return{x:B2(t.x,s.x),y:B2(t.y,s.y)}}function OH(t,s){let a=.5;const r=Mr(t),i=Mr(s);return i>r?a=Hu(s.min,s.max-r,t.min):r>i&&(a=Hu(t.min,t.max-i,s.min)),Zi(0,1,a)}function RH(t,s){const a={};return s.min!==void 0&&(a.min=s.min-t.min),s.max!==void 0&&(a.max=s.max-t.min),a}const sv=.35;function PH(t=sv){return t===!1?t=0:t===!0&&(t=sv),{x:z2(t,"left","right"),y:z2(t,"top","bottom")}}function z2(t,s,a){return{min:U2(t,s),max:U2(t,a)}}function U2(t,s){return typeof t=="number"?t:t[s]||0}const MH=new WeakMap;class FH{constructor(s){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Pa(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=s}start(s,{snapToCursor:a=!1,distanceThreshold:r}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const o=p=>{const{dragSnapToOrigin:g}=this.getProps();g?this.pauseAnimation():this.stopAnimation(),a&&this.snapToCursor(um(p).point)},c=(p,g)=>{const{drag:y,dragPropagation:b,onDragStart:N}=this.getProps();if(y&&!b&&(this.openDragLock&&this.openDragLock(),this.openDragLock=UV(y),!this.openDragLock))return;this.latestPointerEvent=p,this.latestPanInfo=g,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),_n(C=>{let k=this.getAxisMotionValue(C).get()||0;if(gi.test(k)){const{projection:A}=this.visualElement;if(A&&A.layout){const G=A.layout.layoutBox[C];G&&(k=Mr(G)*(parseFloat(k)/100))}}this.originPoint[C]=k}),N&&va.postRender(()=>N(p,g)),ev(this.visualElement,"transform");const{animationState:S}=this.visualElement;S&&S.setActive("whileDrag",!0)},u=(p,g)=>{this.latestPointerEvent=p,this.latestPanInfo=g;const{dragPropagation:y,dragDirectionLock:b,onDirectionLock:N,onDrag:S}=this.getProps();if(!y&&!this.openDragLock)return;const{offset:C}=g;if(b&&this.currentDirection===null){this.currentDirection=LH(C),this.currentDirection!==null&&N&&N(this.currentDirection);return}this.updateAxis("x",g.point,C),this.updateAxis("y",g.point,C),this.visualElement.render(),S&&S(p,g)},f=(p,g)=>{this.latestPointerEvent=p,this.latestPanInfo=g,this.stop(p,g),this.latestPointerEvent=null,this.latestPanInfo=null},x=()=>_n(p=>this.getAnimationState(p)==="paused"&&this.getAxisMotionValue(p).animation?.play()),{dragSnapToOrigin:h}=this.getProps();this.panSession=new Xk(s,{onSessionStart:o,onStart:c,onMove:u,onSessionEnd:f,resumeAnimation:x},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:h,distanceThreshold:r,contextWindow:Yk(this.visualElement)})}stop(s,a){const r=s||this.latestPointerEvent,i=a||this.latestPanInfo,o=this.isDragging;if(this.cancel(),!o||!i||!r)return;const{velocity:c}=i;this.startAnimation(c);const{onDragEnd:u}=this.getProps();u&&va.postRender(()=>u(r,i))}cancel(){this.isDragging=!1;const{projection:s,animationState:a}=this.visualElement;s&&(s.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),a&&a.setActive("whileDrag",!1)}updateAxis(s,a,r){const{drag:i}=this.getProps();if(!r||!$h(s,i,this.currentDirection))return;const o=this.getAxisMotionValue(s);let c=this.originPoint[s]+r[s];this.constraints&&this.constraints[s]&&(c=AH(c,this.constraints[s],this.elastic[s])),o.set(c)}resolveConstraints(){const{dragConstraints:s,dragElastic:a}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,i=this.constraints;s&&Rc(s)?this.constraints||(this.constraints=this.resolveRefConstraints()):s&&r?this.constraints=_H(r.layoutBox,s):this.constraints=!1,this.elastic=PH(a),i!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&_n(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=RH(r.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:s,onMeasureDragConstraints:a}=this.getProps();if(!s||!Rc(s))return!1;const r=s.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const o=I$(r,i.root,this.visualElement.getTransformPagePoint());let c=DH(i.layout.layoutBox,o);if(a){const u=a(M$(c));this.hasMutatedConstraints=!!u,u&&(c=Pk(u))}return c}startAnimation(s){const{drag:a,dragMomentum:r,dragElastic:i,dragTransition:o,dragSnapToOrigin:c,onDragTransitionEnd:u}=this.getProps(),f=this.constraints||{},x=_n(h=>{if(!$h(h,a,this.currentDirection))return;let p=f&&f[h]||{};c&&(p={min:0,max:0});const g=i?200:1e6,y=i?40:1e7,b={type:"inertia",velocity:r?s[h]:0,bounceStiffness:g,bounceDamping:y,timeConstant:750,restDelta:1,restSpeed:10,...o,...p};return this.startAxisValueAnimation(h,b)});return Promise.all(x).then(u)}startAxisValueAnimation(s,a){const r=this.getAxisMotionValue(s);return ev(this.visualElement,s),r.start(Fj(s,r,0,a,this.visualElement,!1))}stopAnimation(){_n(s=>this.getAxisMotionValue(s).stop())}pauseAnimation(){_n(s=>this.getAxisMotionValue(s).animation?.pause())}getAnimationState(s){return this.getAxisMotionValue(s).animation?.state}getAxisMotionValue(s){const a=`_drag${s.toUpperCase()}`,r=this.visualElement.getProps(),i=r[a];return i||this.visualElement.getValue(s,(r.initial?r.initial[s]:void 0)||0)}snapToCursor(s){_n(a=>{const{drag:r}=this.getProps();if(!$h(a,r,this.currentDirection))return;const{projection:i}=this.visualElement,o=this.getAxisMotionValue(a);if(i&&i.layout){const{min:c,max:u}=i.layout.layoutBox[a];o.set(s[a]-Na(c,u,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:s,dragConstraints:a}=this.getProps(),{projection:r}=this.visualElement;if(!Rc(a)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};_n(c=>{const u=this.getAxisMotionValue(c);if(u&&this.constraints!==!1){const f=u.get();i[c]=OH({min:f,max:f},this.constraints[c])}});const{transformTemplate:o}=this.visualElement.getProps();this.visualElement.current.style.transform=o?o({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),_n(c=>{if(!$h(c,s,null))return;const u=this.getAxisMotionValue(c),{min:f,max:x}=this.constraints[c];u.set(Na(f,x,i[c]))})}addListeners(){if(!this.visualElement.current)return;MH.set(this.visualElement,this);const s=this.visualElement.current,a=ku(s,"pointerdown",f=>{const{drag:x,dragListener:h=!0}=this.getProps();x&&h&&this.start(f)}),r=()=>{const{dragConstraints:f}=this.getProps();Rc(f)&&f.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,o=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),va.read(r);const c=Yu(window,"resize",()=>this.scalePositionWithinConstraints()),u=i.addEventListener("didUpdate",(({delta:f,hasLayoutChanged:x})=>{this.isDragging&&x&&(_n(h=>{const p=this.getAxisMotionValue(h);p&&(this.originPoint[h]+=f[h].translate,p.set(p.get()+f[h].translate))}),this.visualElement.render())}));return()=>{c(),a(),o(),u&&u()}}getProps(){const s=this.visualElement.getProps(),{drag:a=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:o=!1,dragElastic:c=sv,dragMomentum:u=!0}=s;return{...s,drag:a,dragDirectionLock:r,dragPropagation:i,dragConstraints:o,dragElastic:c,dragMomentum:u}}}function $h(t,s,a){return(s===!0||s===t)&&(a===null||a===t)}function LH(t,s=10){let a=null;return Math.abs(t.y)>s?a="y":Math.abs(t.x)>s&&(a="x"),a}class IH extends Gl{constructor(s){super(s),this.removeGroupControls=Fn,this.removeListeners=Fn,this.controls=new FH(s)}mount(){const{dragControls:s}=this.node.getProps();s&&(this.removeGroupControls=s.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Fn}unmount(){this.removeGroupControls(),this.removeListeners()}}const V2=t=>(s,a)=>{t&&va.postRender(()=>t(s,a))};class BH extends Gl{constructor(){super(...arguments),this.removePointerDownListener=Fn}onPointerDown(s){this.session=new Xk(s,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:Yk(this.node)})}createPanHandlers(){const{onPanSessionStart:s,onPanStart:a,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:V2(s),onStart:V2(a),onMove:r,onEnd:(o,c)=>{delete this.session,i&&va.postRender(()=>i(o,c))}}}mount(){this.removePointerDownListener=ku(this.node.current,"pointerdown",s=>this.onPointerDown(s))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Jh={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function $2(t,s){return s.max===s.min?0:t/(s.max-s.min)*100}const du={correct:(t,s)=>{if(!s.target)return t;if(typeof t=="string")if(Qt.test(t))t=parseFloat(t);else return t;const a=$2(t,s.target.x),r=$2(t,s.target.y);return`${a}% ${r}%`}},zH={correct:(t,{treeScale:s,projectionDelta:a})=>{const r=t,i=zl.parse(t);if(i.length>5)return r;const o=zl.createTransformer(t),c=typeof i[0]!="number"?1:0,u=a.x.scale*s.x,f=a.y.scale*s.y;i[0+c]/=u,i[1+c]/=f;const x=Na(u,f,.5);return typeof i[2+c]=="number"&&(i[2+c]/=x),typeof i[3+c]=="number"&&(i[3+c]/=x),o(i)}};let K0=!1;class UH extends v.Component{componentDidMount(){const{visualElement:s,layoutGroup:a,switchLayoutGroup:r,layoutId:i}=this.props,{projection:o}=s;c$(VH),o&&(a.group&&a.group.add(o),r&&r.register&&i&&r.register(o),K0&&o.root.didUpdate(),o.addEventListener("animationComplete",()=>{this.safeToRemove()}),o.setOptions({...o.options,onExitComplete:()=>this.safeToRemove()})),Jh.hasEverUpdated=!0}getSnapshotBeforeUpdate(s){const{layoutDependency:a,visualElement:r,drag:i,isPresent:o}=this.props,{projection:c}=r;return c&&(c.isPresent=o,K0=!0,i||s.layoutDependency!==a||a===void 0||s.isPresent!==o?c.willUpdate():this.safeToRemove(),s.isPresent!==o&&(o?c.promote():c.relegate()||va.postRender(()=>{const u=c.getStack();(!u||!u.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:s}=this.props.visualElement;s&&(s.root.didUpdate(),Cj.postRender(()=>{!s.currentAnimation&&s.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:s,layoutGroup:a,switchLayoutGroup:r}=this.props,{projection:i}=s;K0=!0,i&&(i.scheduleCheckAfterUnmount(),a&&a.group&&a.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:s}=this.props;s&&s()}render(){return null}}function Zk(t){const[s,a]=yk(),r=v.useContext(aj);return e.jsx(UH,{...t,layoutGroup:r,switchLayoutGroup:v.useContext(Ok),isPresent:s,safeToRemove:a})}const VH={borderRadius:{...du,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:du,borderTopRightRadius:du,borderBottomLeftRadius:du,borderBottomRightRadius:du,boxShadow:zH};function $H(t,s,a){const r=Er(t)?t:Jc(t);return r.start(Fj("",r,s,a)),r.animation}const HH=(t,s)=>t.depth-s.depth;class WH{constructor(){this.children=[],this.isDirty=!1}add(s){ij(this.children,s),this.isDirty=!0}remove(s){lj(this.children,s),this.isDirty=!0}forEach(s){this.isDirty&&this.children.sort(HH),this.isDirty=!1,this.children.forEach(s)}}function GH(t,s){const a=Kr.now(),r=({timestamp:i})=>{const o=i-a;o>=s&&(Bl(r),t(o-s))};return va.setup(r,!0),()=>Bl(r)}const Jk=["TopLeft","TopRight","BottomLeft","BottomRight"],qH=Jk.length,H2=t=>typeof t=="string"?parseFloat(t):t,W2=t=>typeof t=="number"||Qt.test(t);function KH(t,s,a,r,i,o){i?(t.opacity=Na(0,a.opacity??1,YH(r)),t.opacityExit=Na(s.opacity??1,0,XH(r))):o&&(t.opacity=Na(s.opacity??1,a.opacity??1,r));for(let c=0;c<qH;c++){const u=`border${Jk[c]}Radius`;let f=G2(s,u),x=G2(a,u);if(f===void 0&&x===void 0)continue;f||(f=0),x||(x=0),f===0||x===0||W2(f)===W2(x)?(t[u]=Math.max(Na(H2(f),H2(x),r),0),(gi.test(x)||gi.test(f))&&(t[u]+="%")):t[u]=x}(s.rotate||a.rotate)&&(t.rotate=Na(s.rotate||0,a.rotate||0,r))}function G2(t,s){return t[s]!==void 0?t[s]:t.borderRadius}const YH=eA(0,.5,zE),XH=eA(.5,.95,Fn);function eA(t,s,a){return r=>r<t?0:r>s?1:a(Hu(t,s,r))}function q2(t,s){t.min=s.min,t.max=s.max}function kn(t,s){q2(t.x,s.x),q2(t.y,s.y)}function K2(t,s){t.translate=s.translate,t.scale=s.scale,t.originPoint=s.originPoint,t.origin=s.origin}function Y2(t,s,a,r,i){return t-=s,t=_f(t,1/a,r),i!==void 0&&(t=_f(t,1/i,r)),t}function QH(t,s=0,a=1,r=.5,i,o=t,c=t){if(gi.test(s)&&(s=parseFloat(s),s=Na(c.min,c.max,s/100)-c.min),typeof s!="number")return;let u=Na(o.min,o.max,r);t===o&&(u-=s),t.min=Y2(t.min,s,a,u,i),t.max=Y2(t.max,s,a,u,i)}function X2(t,s,[a,r,i],o,c){QH(t,s[a],s[r],s[i],s.scale,o,c)}const ZH=["x","scaleX","originX"],JH=["y","scaleY","originY"];function Q2(t,s,a,r){X2(t.x,s,ZH,a?a.x:void 0,r?r.x:void 0),X2(t.y,s,JH,a?a.y:void 0,r?r.y:void 0)}function Z2(t){return t.translate===0&&t.scale===1}function tA(t){return Z2(t.x)&&Z2(t.y)}function J2(t,s){return t.min===s.min&&t.max===s.max}function eW(t,s){return J2(t.x,s.x)&&J2(t.y,s.y)}function eS(t,s){return Math.round(t.min)===Math.round(s.min)&&Math.round(t.max)===Math.round(s.max)}function sA(t,s){return eS(t.x,s.x)&&eS(t.y,s.y)}function tS(t){return Mr(t.x)/Mr(t.y)}function sS(t,s){return t.translate===s.translate&&t.scale===s.scale&&t.originPoint===s.originPoint}class tW{constructor(){this.members=[]}add(s){ij(this.members,s),s.scheduleRender()}remove(s){if(lj(this.members,s),s===this.prevLead&&(this.prevLead=void 0),s===this.lead){const a=this.members[this.members.length-1];a&&this.promote(a)}}relegate(s){const a=this.members.findIndex(i=>s===i);if(a===0)return!1;let r;for(let i=a;i>=0;i--){const o=this.members[i];if(o.isPresent!==!1){r=o;break}}return r?(this.promote(r),!0):!1}promote(s,a){const r=this.lead;if(s!==r&&(this.prevLead=r,this.lead=s,s.show(),r)){r.instance&&r.scheduleRender(),s.scheduleRender(),s.resumeFrom=r,a&&(s.resumeFrom.preserveOpacity=!0),r.snapshot&&(s.snapshot=r.snapshot,s.snapshot.latestValues=r.animationValues||r.latestValues),s.root&&s.root.isUpdating&&(s.isLayoutDirty=!0);const{crossfade:i}=s.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(s=>{const{options:a,resumingFrom:r}=s;a.onExitComplete&&a.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(s=>{s.instance&&s.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function sW(t,s,a){let r="";const i=t.x.translate/s.x,o=t.y.translate/s.y,c=a?.z||0;if((i||o||c)&&(r=`translate3d(${i}px, ${o}px, ${c}px) `),(s.x!==1||s.y!==1)&&(r+=`scale(${1/s.x}, ${1/s.y}) `),a){const{transformPerspective:x,rotate:h,rotateX:p,rotateY:g,skewX:y,skewY:b}=a;x&&(r=`perspective(${x}px) ${r}`),h&&(r+=`rotate(${h}deg) `),p&&(r+=`rotateX(${p}deg) `),g&&(r+=`rotateY(${g}deg) `),y&&(r+=`skewX(${y}deg) `),b&&(r+=`skewY(${b}deg) `)}const u=t.x.scale*s.x,f=t.y.scale*s.y;return(u!==1||f!==1)&&(r+=`scale(${u}, ${f})`),r||"none"}const Y0=["","X","Y","Z"],aW=1e3;let rW=0;function X0(t,s,a,r){const{latestValues:i}=s;i[t]&&(a[t]=i[t],s.setStaticValue(t,0),r&&(r[t]=0))}function aA(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:s}=t.options;if(!s)return;const a=Vk(s);if(window.MotionHasOptimisedAnimation(a,"transform")){const{layout:i,layoutId:o}=t.options;window.MotionCancelOptimisedAnimation(a,"transform",va,!(i||o))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&aA(r)}function rA({attachResizeListener:t,defaultParent:s,measureScroll:a,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(c={},u=s?.()){this.id=rW++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(lW),this.nodes.forEach(uW),this.nodes.forEach(mW),this.nodes.forEach(oW)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=c,this.root=u?u.root||u:this,this.path=u?[...u.path,u]:[],this.parent=u,this.depth=u?u.depth+1:0;for(let f=0;f<this.path.length;f++)this.path[f].shouldResetTransform=!0;this.root===this&&(this.nodes=new WH)}addEventListener(c,u){return this.eventHandlers.has(c)||this.eventHandlers.set(c,new dj),this.eventHandlers.get(c).add(u)}notifyListeners(c,...u){const f=this.eventHandlers.get(c);f&&f.notify(...u)}hasListeners(c){return this.eventHandlers.has(c)}mount(c){if(this.instance)return;this.isSVG=jk(c)&&!qV(c),this.instance=c;const{layoutId:u,layout:f,visualElement:x}=this.options;if(x&&!x.current&&x.mount(c),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(f||u)&&(this.isLayoutDirty=!0),t){let h,p=0;const g=()=>this.root.updateBlockedByResize=!1;va.read(()=>{p=window.innerWidth}),t(c,()=>{const y=window.innerWidth;y!==p&&(p=y,this.root.updateBlockedByResize=!0,h&&h(),h=GH(g,250),Jh.hasAnimatedSinceResize&&(Jh.hasAnimatedSinceResize=!1,this.nodes.forEach(nS)))})}u&&this.root.registerSharedNode(u,this),this.options.animate!==!1&&x&&(u||f)&&this.addEventListener("didUpdate",({delta:h,hasLayoutChanged:p,hasRelativeLayoutChanged:g,layout:y})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const b=this.options.transition||x.getDefaultTransition()||gW,{onLayoutAnimationStart:N,onLayoutAnimationComplete:S}=x.getProps(),C=!this.targetLayout||!sA(this.targetLayout,y),k=!p&&g;if(this.options.layoutRoot||this.resumeFrom||k||p&&(C||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const A={...wj(b,"layout"),onPlay:N,onComplete:S};(x.shouldReduceMotion||this.options.layoutRoot)&&(A.delay=0,A.type=!1),this.startAnimation(A),this.setAnimationOrigin(h,k)}else p||nS(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=y})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const c=this.getStack();c&&c.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Bl(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(hW),this.animationId++)}getTransformTemplate(){const{visualElement:c}=this.options;return c&&c.getProps().transformTemplate}willUpdate(c=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&aA(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let h=0;h<this.path.length;h++){const p=this.path[h];p.shouldResetTransform=!0,p.updateScroll("snapshot"),p.options.layoutRoot&&p.willUpdate(!1)}const{layoutId:u,layout:f}=this.options;if(u===void 0&&!f)return;const x=this.getTransformTemplate();this.prevTransformTemplateValue=x?x(this.latestValues,""):void 0,this.updateSnapshot(),c&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(aS);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(rS);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(dW),this.nodes.forEach(nW),this.nodes.forEach(iW)):this.nodes.forEach(rS),this.clearAllSnapshots();const u=Kr.now();ur.delta=Zi(0,1e3/60,u-ur.timestamp),ur.timestamp=u,ur.isProcessing=!0,I0.update.process(ur),I0.preRender.process(ur),I0.render.process(ur),ur.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Cj.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(cW),this.sharedNodes.forEach(fW)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,va.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){va.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Mr(this.snapshot.measuredBox.x)&&!Mr(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let f=0;f<this.path.length;f++)this.path[f].updateScroll();const c=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Pa(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:u}=this.options;u&&u.notify("LayoutMeasure",this.layout.layoutBox,c?c.layoutBox:void 0)}updateScroll(c="measure"){let u=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===c&&(u=!1),u&&this.instance){const f=r(this.instance);this.scroll={animationId:this.root.animationId,phase:c,isRoot:f,offset:a(this.instance),wasRoot:this.scroll?this.scroll.isRoot:f}}}resetTransform(){if(!i)return;const c=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,u=this.projectionDelta&&!tA(this.projectionDelta),f=this.getTransformTemplate(),x=f?f(this.latestValues,""):void 0,h=x!==this.prevTransformTemplateValue;c&&this.instance&&(u||fo(this.latestValues)||h)&&(i(this.instance,x),this.shouldResetTransform=!1,this.scheduleRender())}measure(c=!0){const u=this.measurePageBox();let f=this.removeElementScroll(u);return c&&(f=this.removeTransform(f)),vW(f),{animationId:this.root.animationId,measuredBox:u,layoutBox:f,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:c}=this.options;if(!c)return Pa();const u=c.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(jW))){const{scroll:x}=this.root;x&&(Pc(u.x,x.offset.x),Pc(u.y,x.offset.y))}return u}removeElementScroll(c){const u=Pa();if(kn(u,c),this.scroll?.wasRoot)return u;for(let f=0;f<this.path.length;f++){const x=this.path[f],{scroll:h,options:p}=x;x!==this.root&&h&&p.layoutScroll&&(h.wasRoot&&kn(u,c),Pc(u.x,h.offset.x),Pc(u.y,h.offset.y))}return u}applyTransform(c,u=!1){const f=Pa();kn(f,c);for(let x=0;x<this.path.length;x++){const h=this.path[x];!u&&h.options.layoutScroll&&h.scroll&&h!==h.root&&Mc(f,{x:-h.scroll.offset.x,y:-h.scroll.offset.y}),fo(h.latestValues)&&Mc(f,h.latestValues)}return fo(this.latestValues)&&Mc(f,this.latestValues),f}removeTransform(c){const u=Pa();kn(u,c);for(let f=0;f<this.path.length;f++){const x=this.path[f];if(!x.instance||!fo(x.latestValues))continue;Xg(x.latestValues)&&x.updateSnapshot();const h=Pa(),p=x.measurePageBox();kn(h,p),Q2(u,x.latestValues,x.snapshot?x.snapshot.layoutBox:void 0,h)}return fo(this.latestValues)&&Q2(u,this.latestValues),u}setTargetDelta(c){this.targetDelta=c,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(c){this.options={...this.options,...c,crossfade:c.crossfade!==void 0?c.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==ur.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(c=!1){const u=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=u.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=u.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=u.isSharedProjectionDirty);const f=!!this.resumingFrom||this!==u;if(!(c||f&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:h,layoutId:p}=this.options;if(!(!this.layout||!(h||p))){if(this.resolvedRelativeTargetAt=ur.timestamp,!this.targetDelta&&!this.relativeTarget){const g=this.getClosestProjectingParent();g&&g.layout&&this.animationProgress!==1?(this.relativeParent=g,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Pa(),this.relativeTargetOrigin=Pa(),_u(this.relativeTargetOrigin,this.layout.layoutBox,g.layout.layoutBox),kn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Pa(),this.targetWithTransforms=Pa()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),CH(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):kn(this.target,this.layout.layoutBox),Fk(this.target,this.targetDelta)):kn(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const g=this.getClosestProjectingParent();g&&!!g.resumingFrom==!!this.resumingFrom&&!g.options.layoutScroll&&g.target&&this.animationProgress!==1?(this.relativeParent=g,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Pa(),this.relativeTargetOrigin=Pa(),_u(this.relativeTargetOrigin,this.target,g.target),kn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||Xg(this.parent.latestValues)||Mk(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){const c=this.getLead(),u=!!this.resumingFrom||this!==c;let f=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(f=!1),u&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(f=!1),this.resolvedRelativeTargetAt===ur.timestamp&&(f=!1),f)return;const{layout:x,layoutId:h}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(x||h))return;kn(this.layoutCorrected,this.layout.layoutBox);const p=this.treeScale.x,g=this.treeScale.y;L$(this.layoutCorrected,this.treeScale,this.path,u),c.layout&&!c.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(c.target=c.layout.layoutBox,c.targetWithTransforms=Pa());const{target:y}=c;if(!y){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(K2(this.prevProjectionDelta.x,this.projectionDelta.x),K2(this.prevProjectionDelta.y,this.projectionDelta.y)),Au(this.projectionDelta,this.layoutCorrected,y,this.latestValues),(this.treeScale.x!==p||this.treeScale.y!==g||!sS(this.projectionDelta.x,this.prevProjectionDelta.x)||!sS(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",y))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(c=!0){if(this.options.visualElement?.scheduleRender(),c){const u=this.getStack();u&&u.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Fc(),this.projectionDelta=Fc(),this.projectionDeltaWithTransform=Fc()}setAnimationOrigin(c,u=!1){const f=this.snapshot,x=f?f.latestValues:{},h={...this.latestValues},p=Fc();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!u;const g=Pa(),y=f?f.source:void 0,b=this.layout?this.layout.source:void 0,N=y!==b,S=this.getStack(),C=!S||S.members.length<=1,k=!!(N&&!C&&this.options.crossfade===!0&&!this.path.some(pW));this.animationProgress=0;let A;this.mixTargetDelta=G=>{const F=G/1e3;iS(p.x,c.x,F),iS(p.y,c.y,F),this.setTargetDelta(p),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(_u(g,this.layout.layoutBox,this.relativeParent.layout.layoutBox),xW(this.relativeTarget,this.relativeTargetOrigin,g,F),A&&eW(this.relativeTarget,A)&&(this.isProjectionDirty=!1),A||(A=Pa()),kn(A,this.relativeTarget)),N&&(this.animationValues=h,KH(h,x,this.latestValues,F,k,C)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=F},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(c){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(Bl(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=va.update(()=>{Jh.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Jc(0)),this.currentAnimation=$H(this.motionValue,[0,1e3],{...c,velocity:0,isSync:!0,onUpdate:u=>{this.mixTargetDelta(u),c.onUpdate&&c.onUpdate(u)},onStop:()=>{},onComplete:()=>{c.onComplete&&c.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const c=this.getStack();c&&c.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(aW),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const c=this.getLead();let{targetWithTransforms:u,target:f,layout:x,latestValues:h}=c;if(!(!u||!f||!x)){if(this!==c&&this.layout&&x&&nA(this.options.animationType,this.layout.layoutBox,x.layoutBox)){f=this.target||Pa();const p=Mr(this.layout.layoutBox.x);f.x.min=c.target.x.min,f.x.max=f.x.min+p;const g=Mr(this.layout.layoutBox.y);f.y.min=c.target.y.min,f.y.max=f.y.min+g}kn(u,f),Mc(u,h),Au(this.projectionDeltaWithTransform,this.layoutCorrected,u,h)}}registerSharedNode(c,u){this.sharedNodes.has(c)||this.sharedNodes.set(c,new tW),this.sharedNodes.get(c).add(u);const x=u.options.initialPromotionConfig;u.promote({transition:x?x.transition:void 0,preserveFollowOpacity:x&&x.shouldPreserveFollowOpacity?x.shouldPreserveFollowOpacity(u):void 0})}isLead(){const c=this.getStack();return c?c.lead===this:!0}getLead(){const{layoutId:c}=this.options;return c?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:c}=this.options;return c?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:c}=this.options;if(c)return this.root.sharedNodes.get(c)}promote({needsReset:c,transition:u,preserveFollowOpacity:f}={}){const x=this.getStack();x&&x.promote(this,f),c&&(this.projectionDelta=void 0,this.needsReset=!0),u&&this.setOptions({transition:u})}relegate(){const c=this.getStack();return c?c.relegate(this):!1}resetSkewAndRotation(){const{visualElement:c}=this.options;if(!c)return;let u=!1;const{latestValues:f}=c;if((f.z||f.rotate||f.rotateX||f.rotateY||f.rotateZ||f.skewX||f.skewY)&&(u=!0),!u)return;const x={};f.z&&X0("z",c,x,this.animationValues);for(let h=0;h<Y0.length;h++)X0(`rotate${Y0[h]}`,c,x,this.animationValues),X0(`skew${Y0[h]}`,c,x,this.animationValues);c.render();for(const h in x)c.setStaticValue(h,x[h]),this.animationValues&&(this.animationValues[h]=x[h]);c.scheduleRender()}applyProjectionStyles(c,u){if(!this.instance||this.isSVG)return;if(!this.isVisible){c.visibility="hidden";return}const f=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,c.visibility="",c.opacity="",c.pointerEvents=Zh(u?.pointerEvents)||"",c.transform=f?f(this.latestValues,""):"none";return}const x=this.getLead();if(!this.projectionDelta||!this.layout||!x.target){this.options.layoutId&&(c.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,c.pointerEvents=Zh(u?.pointerEvents)||""),this.hasProjected&&!fo(this.latestValues)&&(c.transform=f?f({},""):"none",this.hasProjected=!1);return}c.visibility="";const h=x.animationValues||x.latestValues;this.applyTransformsToTarget();let p=sW(this.projectionDeltaWithTransform,this.treeScale,h);f&&(p=f(h,p)),c.transform=p;const{x:g,y}=this.projectionDelta;c.transformOrigin=`${g.origin*100}% ${y.origin*100}% 0`,x.animationValues?c.opacity=x===this?h.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:h.opacityExit:c.opacity=x===this?h.opacity!==void 0?h.opacity:"":h.opacityExit!==void 0?h.opacityExit:0;for(const b in Ku){if(h[b]===void 0)continue;const{correct:N,applyTo:S,isCSSVariable:C}=Ku[b],k=p==="none"?h[b]:N(h[b],x);if(S){const A=S.length;for(let G=0;G<A;G++)c[S[G]]=k}else C?this.options.visualElement.renderState.vars[b]=k:c[b]=k}this.options.layoutId&&(c.pointerEvents=x===this?Zh(u?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(c=>c.currentAnimation?.stop()),this.root.nodes.forEach(aS),this.root.sharedNodes.clear()}}}function nW(t){t.updateLayout()}function iW(t){const s=t.resumeFrom?.snapshot||t.snapshot;if(t.isLead()&&t.layout&&s&&t.hasListeners("didUpdate")){const{layoutBox:a,measuredBox:r}=t.layout,{animationType:i}=t.options,o=s.source!==t.layout.source;i==="size"?_n(h=>{const p=o?s.measuredBox[h]:s.layoutBox[h],g=Mr(p);p.min=a[h].min,p.max=p.min+g}):nA(i,s.layoutBox,a)&&_n(h=>{const p=o?s.measuredBox[h]:s.layoutBox[h],g=Mr(a[h]);p.max=p.min+g,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[h].max=t.relativeTarget[h].min+g)});const c=Fc();Au(c,a,s.layoutBox);const u=Fc();o?Au(u,t.applyTransform(r,!0),s.measuredBox):Au(u,a,s.layoutBox);const f=!tA(c);let x=!1;if(!t.resumeFrom){const h=t.getClosestProjectingParent();if(h&&!h.resumeFrom){const{snapshot:p,layout:g}=h;if(p&&g){const y=Pa();_u(y,s.layoutBox,p.layoutBox);const b=Pa();_u(b,a,g.layoutBox),sA(y,b)||(x=!0),h.options.layoutRoot&&(t.relativeTarget=b,t.relativeTargetOrigin=y,t.relativeParent=h)}}}t.notifyListeners("didUpdate",{layout:a,snapshot:s,delta:u,layoutDelta:c,hasLayoutChanged:f,hasRelativeLayoutChanged:x})}else if(t.isLead()){const{onExitComplete:a}=t.options;a&&a()}t.options.transition=void 0}function lW(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function oW(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function cW(t){t.clearSnapshot()}function aS(t){t.clearMeasurements()}function rS(t){t.isLayoutDirty=!1}function dW(t){const{visualElement:s}=t.options;s&&s.getProps().onBeforeLayoutMeasure&&s.notify("BeforeLayoutMeasure"),t.resetTransform()}function nS(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function uW(t){t.resolveTargetDelta()}function mW(t){t.calcProjection()}function hW(t){t.resetSkewAndRotation()}function fW(t){t.removeLeadSnapshot()}function iS(t,s,a){t.translate=Na(s.translate,0,a),t.scale=Na(s.scale,1,a),t.origin=s.origin,t.originPoint=s.originPoint}function lS(t,s,a,r){t.min=Na(s.min,a.min,r),t.max=Na(s.max,a.max,r)}function xW(t,s,a,r){lS(t.x,s.x,a.x,r),lS(t.y,s.y,a.y,r)}function pW(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const gW={duration:.45,ease:[.4,0,.1,1]},oS=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),cS=oS("applewebkit/")&&!oS("chrome/")?Math.round:Fn;function dS(t){t.min=cS(t.min),t.max=cS(t.max)}function vW(t){dS(t.x),dS(t.y)}function nA(t,s,a){return t==="position"||t==="preserve-aspect"&&!SH(tS(s),tS(a),.2)}function jW(t){return t!==t.root&&t.scroll?.wasRoot}const yW=rA({attachResizeListener:(t,s)=>Yu(t,"resize",s),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Q0={current:void 0},iA=rA({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!Q0.current){const t=new yW({});t.mount(window),t.setOptions({layoutScroll:!0}),Q0.current=t}return Q0.current},resetTransform:(t,s)=>{t.style.transform=s!==void 0?s:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),NW={pan:{Feature:BH},drag:{Feature:IH,ProjectionNode:iA,MeasureLayout:Zk}};function uS(t,s,a){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",a==="Start");const i="onHover"+a,o=r[i];o&&va.postRender(()=>o(s,um(s)))}class bW extends Gl{mount(){const{current:s}=this.node;s&&(this.unmount=VV(s,(a,r)=>(uS(this.node,r,"Start"),i=>uS(this.node,i,"End"))))}unmount(){}}class wW extends Gl{constructor(){super(...arguments),this.isActive=!1}onFocus(){let s=!1;try{s=this.node.current.matches(":focus-visible")}catch{s=!0}!s||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=om(Yu(this.node.current,"focus",()=>this.onFocus()),Yu(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function mS(t,s,a){const{props:r}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",a==="Start");const i="onTap"+(a==="End"?"":a),o=r[i];o&&va.postRender(()=>o(s,um(s)))}class SW extends Gl{mount(){const{current:s}=this.node;s&&(this.unmount=GV(s,(a,r)=>(mS(this.node,r,"Start"),(i,{success:o})=>mS(this.node,i,o?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const av=new WeakMap,Z0=new WeakMap,CW=t=>{const s=av.get(t.target);s&&s(t)},TW=t=>{t.forEach(CW)};function EW({root:t,...s}){const a=t||document;Z0.has(a)||Z0.set(a,{});const r=Z0.get(a),i=JSON.stringify(s);return r[i]||(r[i]=new IntersectionObserver(TW,{root:t,...s})),r[i]}function kW(t,s,a){const r=EW(s);return av.set(t,a),r.observe(t),()=>{av.delete(t),r.unobserve(t)}}const AW={some:0,all:1};class _W extends Gl{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:s={}}=this.node.getProps(),{root:a,margin:r,amount:i="some",once:o}=s,c={root:a?a.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:AW[i]},u=f=>{const{isIntersecting:x}=f;if(this.isInView===x||(this.isInView=x,o&&!x&&this.hasEnteredView))return;x&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",x);const{onViewportEnter:h,onViewportLeave:p}=this.node.getProps(),g=x?h:p;g&&g(f)};return kW(this.node.current,c,u)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:s,prevProps:a}=this.node;["amount","margin","root"].some(DW(s,a))&&this.startObserver()}unmount(){}}function DW({viewport:t={}},{viewport:s={}}={}){return a=>t[a]!==s[a]}const OW={inView:{Feature:_W},tap:{Feature:SW},focus:{Feature:wW},hover:{Feature:bW}},RW={layout:{ProjectionNode:iA,MeasureLayout:Zk}},PW={...vH,...OW,...NW,...RW},zi=P$(PW,q$),MW=({onComplete:t,duration:s=3e3})=>{const[a,r]=v.useState(0),[i,o]=v.useState(0),[c,u]=v.useState(!0),f=[{label:"Initializing ominbiz...",duration:800},{label:"Loading your workspace...",duration:600},{label:"Connecting to services...",duration:700},{label:"Preparing dashboard...",duration:500},{label:"Almost ready...",duration:400}];return v.useEffect(()=>{let x,h,p=0;return(()=>{x=setInterval(()=>{r(b=>{const N=b+100/(s/50);return N>=100?100:N})},50);const y=()=>{i<f.length-1&&(h=setTimeout(()=>{o(b=>b+1),p+=f[i].duration,p<s-500&&y()},f[i].duration))};y(),setTimeout(()=>{r(100),setTimeout(()=>{u(!1),setTimeout(()=>{t?.()},500)},300)},s)})(),()=>{x&&clearInterval(x),h&&clearTimeout(h)}},[s,t,i]),e.jsx(s$,{children:c&&e.jsxs(zi.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0,scale:1.1},transition:{duration:.5},className:"fixed inset-0 z-50 flex items-center justify-center bg-gradient-to-br from-green-50 via-white to-green-50 dark:from-gray-900 dark:via-gray-800 dark:to-gray-900",children:[e.jsx("div",{className:"absolute inset-0 opacity-5",children:e.jsx("div",{className:"absolute inset-0",style:{backgroundImage:`url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23059669' fill-opacity='0.1'%3E%3Ccircle cx='30' cy='30' r='2'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E")`}})}),e.jsxs("div",{className:"relative flex flex-col items-center space-y-8 p-8",children:[e.jsx(zi.div,{initial:{scale:.5,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.8,ease:"easeOut",delay:.2},children:e.jsx(_R,{size:"2xl",variant:"full",animated:!0,className:"mb-4"})}),e.jsxs(zi.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{duration:.6,delay:.8},className:"text-center space-y-2",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Welcome to ominbiz"}),e.jsx("p",{className:"text-lg text-gray-600 dark:text-gray-300",children:"Your Complete Business Management Solution"})]}),e.jsxs(zi.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{duration:.6,delay:1.2},className:"w-full max-w-md space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Cr,{value:a,className:"h-2 bg-gray-200 dark:bg-gray-700"}),e.jsxs("div",{className:"flex justify-between text-xs text-gray-500 dark:text-gray-400",children:[e.jsx("span",{children:"Loading..."}),e.jsxs("span",{children:[Math.round(a),"%"]})]})]}),e.jsx(zi.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.3},className:"text-center",children:e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:f[i]?.label})},i)]}),e.jsx(zi.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{duration:.6,delay:1.6},className:"grid grid-cols-3 gap-6 mt-8",children:[{icon:"",label:"Analytics"},{icon:"",label:"Orders"},{icon:"",label:"Customers"}].map((x,h)=>e.jsxs(zi.div,{initial:{scale:0},animate:{scale:1},transition:{duration:.4,delay:1.8+h*.1,type:"spring",stiffness:200},className:"flex flex-col items-center space-y-2 p-4 rounded-lg bg-white/50 dark:bg-gray-800/50 backdrop-blur-sm",children:[e.jsx("span",{className:"text-2xl",children:x.icon}),e.jsx("span",{className:"text-xs font-medium text-gray-700 dark:text-gray-300",children:x.label})]},x.label))}),e.jsx("div",{className:"absolute inset-0 pointer-events-none",children:[...Array(6)].map((x,h)=>e.jsx(zi.div,{className:"absolute w-2 h-2 bg-green-400 rounded-full opacity-20",style:{left:`${20+h*15}%`,top:`${30+h%2*40}%`},animate:{y:[-10,10,-10],opacity:[.2,.5,.2]},transition:{duration:2+h*.5,repeat:1/0,ease:"easeInOut"}},h))})]}),e.jsxs(zi.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.6,delay:2},className:"absolute bottom-8 text-center",children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Powered by ominbiz Technology"}),e.jsx("p",{className:"text-xs text-gray-400 dark:text-gray-500 mt-1",children:"Version 2.0.0"})]})]})})};function FW(){const t=[{icon:_a,title:"Boost Productivity",description:"Automate routine tasks and streamline workflows to increase team efficiency by up to 40%."},{icon:er,title:"Data-Driven Insights",description:"Make informed decisions with real-time analytics and comprehensive business intelligence."},{icon:Zt,title:"Team Collaboration",description:"Enable seamless collaboration across departments with integrated communication tools."},{icon:da,title:"Enterprise Security",description:"Bank-level security with end-to-end encryption and compliance with global standards."}],s=["QuickBooks","Xero","Shopify","WooCommerce","Stripe","PayPal","Mailchimp","Slack","Google Workspace","Microsoft 365","Zapier","API Access"],a=[{name:"Retail & E-commerce",description:"Manage inventory, process orders, and track sales across multiple channels.",features:["Multi-channel inventory","Order management","Customer analytics"]},{name:"Professional Services",description:"Schedule appointments, track time, and manage client relationships.",features:["Appointment booking","Time tracking","Client portal"]},{name:"Manufacturing",description:"Optimize production, manage supply chain, and track quality metrics.",features:["Production planning","Supply chain","Quality control"]},{name:"Healthcare",description:"Manage patient records, schedule appointments, and handle billing.",features:["Patient management","Appointment scheduling","Billing integration"]}];return e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx($o,{}),e.jsx("section",{className:"py-20 bg-gradient-to-br from-green-50 to-blue-50",children:e.jsxs("div",{className:"container mx-auto px-4 text-center",children:[e.jsxs("h1",{className:"text-5xl font-bold text-foreground mb-6",children:["Powerful ",e.jsx("span",{className:"text-green-500",children:"Features"})," for Modern Business"]}),e.jsx("p",{className:"text-xl text-muted-foreground max-w-3xl mx-auto mb-8",children:"Discover how ominbiz can transform your business operations with our comprehensive suite of integrated tools and intelligent automation."}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[e.jsx(qt,{to:"/signup",children:e.jsx(R,{size:"lg",className:"bg-green-500 hover:bg-green-600",children:"Start Free Trial"})}),e.jsx(qt,{to:"/pricing",children:e.jsx(R,{size:"lg",variant:"outline",children:"View Pricing"})})]})]})}),e.jsx(eE,{}),e.jsx("section",{className:"py-16 bg-muted/30",children:e.jsxs("div",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h2",{className:"text-3xl font-bold text-foreground mb-4",children:"Why Businesses Choose ominbiz"}),e.jsx("p",{className:"text-muted-foreground max-w-2xl mx-auto",children:"Join thousands of businesses that have transformed their operations with our platform."})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:t.map((r,i)=>{const o=r.icon;return e.jsxs(K,{className:"text-center hover:shadow-md transition-shadow",children:[e.jsxs(xe,{children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx("div",{className:"p-3 bg-green-100 rounded-full",children:e.jsx(o,{className:"h-6 w-6 text-green-600"})})}),e.jsx(pe,{className:"text-lg",children:r.title})]}),e.jsx(Y,{children:e.jsx("p",{className:"text-sm text-muted-foreground",children:r.description})})]},i)})})]})}),e.jsx("section",{className:"py-16",children:e.jsxs("div",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h2",{className:"text-3xl font-bold text-foreground mb-4",children:"Tailored for Your Industry"}),e.jsx("p",{className:"text-muted-foreground max-w-2xl mx-auto",children:"ominbiz adapts to your specific industry needs with customizable workflows and features."})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 max-w-4xl mx-auto",children:a.map((r,i)=>e.jsxs(K,{className:"hover:shadow-md transition-shadow",children:[e.jsxs(xe,{children:[e.jsx(pe,{className:"text-xl",children:r.name}),e.jsx(ot,{children:r.description})]}),e.jsx(Y,{children:e.jsx("div",{className:"space-y-2",children:r.features.map((o,c)=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(us,{className:"h-4 w-4 text-green-500"}),e.jsx("span",{className:"text-sm text-muted-foreground",children:o})]},c))})})]},i))})]})}),e.jsx("section",{className:"py-16 bg-muted/30",children:e.jsxs("div",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h2",{className:"text-3xl font-bold text-foreground mb-4",children:"Seamless Integrations"}),e.jsx("p",{className:"text-muted-foreground max-w-2xl mx-auto",children:"Connect ominbiz with your favorite tools and services for a unified business ecosystem."})]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4 max-w-4xl mx-auto",children:s.map((r,i)=>e.jsx(K,{className:"text-center p-4 hover:shadow-md transition-shadow",children:e.jsx(Y,{className:"p-2",children:e.jsx("span",{className:"text-sm font-medium text-muted-foreground",children:r})})},i))}),e.jsxs("div",{className:"text-center mt-8",children:[e.jsx("p",{className:"text-muted-foreground mb-4",children:"Don't see your tool? We offer custom integrations and a powerful API."}),e.jsx(qt,{to:"/contact",children:e.jsxs(R,{variant:"outline",children:["Request Integration",e.jsx(fv,{className:"h-4 w-4 ml-2"})]})})]})]})}),e.jsx("section",{className:"py-16",children:e.jsxs("div",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h2",{className:"text-3xl font-bold text-foreground mb-4",children:"Built for Scale and Performance"}),e.jsx("p",{className:"text-muted-foreground max-w-2xl mx-auto",children:"Enterprise-grade infrastructure that grows with your business."})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsxs(K,{className:"text-center",children:[e.jsxs(xe,{children:[e.jsx(O_,{className:"h-8 w-8 text-green-600 mx-auto mb-2"}),e.jsx(pe,{className:"text-lg",children:"Cloud-Native"})]}),e.jsx(Y,{children:e.jsx("p",{className:"text-sm text-muted-foreground",children:"Built on modern cloud infrastructure for reliability and scalability."})})]}),e.jsxs(K,{className:"text-center",children:[e.jsxs(xe,{children:[e.jsx(qr,{className:"h-8 w-8 text-green-600 mx-auto mb-2"}),e.jsx(pe,{className:"text-lg",children:"Mobile-First"})]}),e.jsx(Y,{children:e.jsx("p",{className:"text-sm text-muted-foreground",children:"Responsive design that works perfectly on all devices and screen sizes."})})]}),e.jsxs(K,{className:"text-center",children:[e.jsxs(xe,{children:[e.jsx(_o,{className:"h-8 w-8 text-green-600 mx-auto mb-2"}),e.jsx(pe,{className:"text-lg",children:"Global CDN"})]}),e.jsx(Y,{children:e.jsx("p",{className:"text-sm text-muted-foreground",children:"Fast loading times worldwide with our global content delivery network."})})]}),e.jsxs(K,{className:"text-center",children:[e.jsxs(xe,{children:[e.jsx(Pf,{className:"h-8 w-8 text-green-600 mx-auto mb-2"}),e.jsx(pe,{className:"text-lg",children:"24/7 Support"})]}),e.jsx(Y,{children:e.jsx("p",{className:"text-sm text-muted-foreground",children:"Round-the-clock customer support to help you succeed."})})]})]})]})}),e.jsx("section",{className:"py-16 bg-green-50",children:e.jsxs("div",{className:"container mx-auto px-4 text-center",children:[e.jsx("h2",{className:"text-3xl font-bold text-foreground mb-4",children:"Ready to Transform Your Business?"}),e.jsx("p",{className:"text-muted-foreground mb-8 max-w-2xl mx-auto",children:"Join thousands of businesses that have streamlined their operations with ominbiz. Start your free trial today and experience the difference."}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[e.jsx(qt,{to:"/signup",children:e.jsx(R,{size:"lg",className:"bg-green-500 hover:bg-green-600",children:"Start Free Trial - No Credit Card Required"})}),e.jsx(qt,{to:"/contact",children:e.jsx(R,{size:"lg",variant:"outline",children:"Schedule a Demo"})})]})]})}),e.jsx(Vo,{})]})}function LW(){const{user:t}=_s(),s=Ka(),[a,r]=v.useState(!1),[i,o]=v.useState(null),[c,u]=v.useState(!1),[f,x]=v.useState(!1),[h,p]=v.useState(null),[g,y]=v.useState({cardNumber:"",expiryDate:"",cvv:"",cardholderName:"",billingAddress:{street:"",city:"",state:"",zipCode:"",country:"US"}});v.useEffect(()=>{if(t){b();const F=setInterval(b,3e4);return()=>clearInterval(F)}},[t]);const b=async()=>{try{const F=await Ne.get("/subscriptions/current");p(F.data.subscription)}catch(F){console.error("Error fetching subscription:",F)}},N=[{id:"starter",name:"Starter",price:0,originalPrice:0,period:"forever",description:"Perfect for small businesses just getting started",icon:Ja,popular:!1,features:["Up to 100 products","Basic inventory tracking","5 team members","Email support","Basic reports","Mobile app access"],limitations:["Limited integrations","Basic analytics only","No custom branding"],buttonText:"Get Started Free",buttonVariant:"outline",trialDays:0},{id:"professional",name:"Professional",price:a?24:29,originalPrice:29,period:a?"per month (billed annually)":"per month",description:"Ideal for growing businesses with advanced needs",icon:_a,popular:!0,features:["Unlimited products","Advanced inventory management","Unlimited team members","Priority support","Advanced analytics","API access","Custom integrations","Multi-location support","Automated workflows","Custom reports","Real-time AI insights","Interactive maps"],limitations:[],buttonText:h?.plan==="professional"?"Current Plan":"Start Free Trial",buttonVariant:h?.plan==="professional"?"outline":"default",trialDays:14},{id:"enterprise",name:"Enterprise",price:"Custom",originalPrice:"Custom",period:"contact us",description:"For large organizations with complex requirements",icon:VS,popular:!1,features:["Everything in Professional","Dedicated account manager","Custom development","On-premise deployment","Advanced security features","SLA guarantee","Training & onboarding","24/7 phone support","Custom integrations","White-label options","Advanced compliance","Custom reporting"],limitations:[],buttonText:"Contact Sales",buttonVariant:"outline",trialDays:30}],S=async F=>{if(!t){D.info("Please sign in to subscribe to a plan"),s("/login");return}if(F.id==="starter"){try{u(!0),await Ne.post("/subscriptions/activate",{planId:F.id}),D.success("Welcome to ominbiz Starter!"),b()}catch{D.error("Failed to activate plan. Please try again.")}finally{u(!1)}return}if(F.id==="enterprise"){s("/contact");return}o(F),x(!0)},C=async()=>{if(i)try{if(u(!0),!g.cardNumber||!g.expiryDate||!g.cvv||!g.cardholderName){D.error("Please fill in all payment details");return}const F={planId:i.id,isAnnual:a,amount:a?i.price*12*.8:i.price,paymentMethod:{cardNumber:g.cardNumber.replace(/\s/g,""),expiryDate:g.expiryDate,cvv:g.cvv,cardholderName:g.cardholderName,billingAddress:g.billingAddress}};(await Ne.post("/subscriptions/subscribe",F)).data.success&&(D.success(`Successfully subscribed to ${i.name}!`),x(!1),b(),setTimeout(()=>{s("/dashboard")},2e3))}catch(F){D.error(F.response?.data?.message||"Payment failed. Please try again.")}finally{u(!1)}},k=(F,E)=>{if(F.includes(".")){const[T,_]=F.split(".");y(P=>({...P,[T]:{...P[T],[_]:E}}))}else y(T=>({...T,[F]:E}))},A=F=>{const E=F.replace(/\s+/g,"").replace(/[^0-9]/gi,""),T=E.match(/\d{4,16}/g),_=T&&T[0]||"",P=[];for(let z=0,V=_.length;z<V;z+=4)P.push(_.substring(z,z+4));return P.length?P.join(" "):E},G=[{question:"Can I change my plan at any time?",answer:"Yes, you can upgrade or downgrade your plan at any time. Changes take effect immediately and billing is prorated."},{question:"Is there a free trial?",answer:"Yes, we offer a 14-day free trial for all paid plans. No credit card required to start."},{question:"What payment methods do you accept?",answer:"We accept all major credit cards, PayPal, and bank transfers for annual plans."},{question:"Can I cancel anytime?",answer:"Absolutely. You can cancel your subscription at any time with no cancellation fees."}];return e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx($o,{}),e.jsx("section",{className:"py-20 bg-gradient-to-br from-green-50 to-blue-50",children:e.jsxs("div",{className:"container mx-auto px-4 text-center",children:[e.jsxs("h1",{className:"text-5xl font-bold text-foreground mb-6",children:["Simple, Transparent ",e.jsx("span",{className:"text-green-500",children:"Pricing"})]}),e.jsx("p",{className:"text-xl text-muted-foreground max-w-3xl mx-auto mb-8",children:"Choose the perfect plan for your business. Start free and scale as you grow."}),e.jsxs("div",{className:"flex justify-center items-center gap-4 mb-8",children:[e.jsx("span",{className:`text-sm ${a?"text-muted-foreground":"text-foreground font-medium"}`,children:"Monthly"}),e.jsx(os,{checked:a,onCheckedChange:r,className:"data-[state=checked]:bg-green-500"}),e.jsxs("span",{className:`text-sm ${a?"text-foreground font-medium":"text-muted-foreground"}`,children:["Annual ",e.jsx(De,{variant:"secondary",className:"ml-2",children:"Save 20%"})]})]}),h&&e.jsx("div",{className:"max-w-md mx-auto mb-8",children:e.jsx(K,{className:"border-green-200 bg-green-50",children:e.jsxs(Y,{className:"pt-6",children:[e.jsxs("div",{className:"flex items-center justify-center gap-2 text-green-700",children:[e.jsx(da,{className:"h-5 w-5"}),e.jsxs("span",{className:"font-medium",children:["Current Plan: ",h.plan.charAt(0).toUpperCase()+h.plan.slice(1)]})]}),e.jsx("div",{className:"text-center text-sm text-green-600 mt-2",children:h.status==="active"?e.jsxs(e.Fragment,{children:["Next billing: ",new Date(h.nextBilling).toLocaleDateString()]}):e.jsxs(e.Fragment,{children:["Status: ",h.status]})})]})})})]})}),e.jsx("section",{className:"py-16",children:e.jsx("div",{className:"container mx-auto px-4",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 max-w-6xl mx-auto",children:N.map((F,E)=>{const T=F.icon;return e.jsxs(K,{className:`relative ${F.popular?"border-green-500 shadow-lg scale-105":""}`,children:[F.popular&&e.jsx(De,{className:"absolute -top-3 left-1/2 transform -translate-x-1/2 bg-green-500",children:"Most Popular"}),e.jsxs(xe,{className:"text-center pb-4",children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx("div",{className:"p-3 bg-green-100 rounded-full",children:e.jsx(T,{className:"h-8 w-8 text-green-600"})})}),e.jsx(pe,{className:"text-2xl",children:F.name}),e.jsx(ot,{className:"text-sm",children:F.description}),e.jsxs("div",{className:"mt-4",children:[e.jsxs("div",{className:"flex items-baseline justify-center gap-2",children:[e.jsx("span",{className:"text-4xl font-bold text-foreground",children:typeof F.price=="number"?`$${F.price}`:F.price}),a&&F.originalPrice!==F.price&&typeof F.price=="number"&&e.jsxs("span",{className:"text-lg text-muted-foreground line-through",children:["$",F.originalPrice]})]}),F.period&&e.jsxs("div",{className:"text-muted-foreground text-sm mt-1",children:[F.period,F.trialDays>0&&e.jsxs("div",{className:"text-green-600 font-medium mt-1",children:[F.trialDays,"-day free trial"]})]})]})]}),e.jsxs(Y,{className:"space-y-4",children:[e.jsx(R,{className:`w-full ${F.popular?"bg-green-500 hover:bg-green-600":""}`,variant:F.buttonVariant,onClick:()=>S(F),disabled:c||h?.plan===F.id&&h?.status==="active",children:c?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Processing..."]}):F.buttonText}),e.jsxs("div",{className:"flex items-center justify-center gap-4 text-xs text-muted-foreground",children:[F.id!=="starter"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Zt,{className:"h-3 w-3"}),e.jsx("span",{children:"Unlimited users"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(da,{className:"h-3 w-3"}),e.jsx("span",{children:"Secure"})]})]}),F.trialDays>0&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(ts,{className:"h-3 w-3"}),e.jsxs("span",{children:[F.trialDays,"-day trial"]})]})]}),e.jsxs("div",{className:"space-y-3",children:[F.features.map((_,P)=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(yi,{className:"h-4 w-4 text-green-500 flex-shrink-0"}),e.jsx("span",{className:"text-sm text-foreground",children:_})]},P)),F.limitations.map((_,P)=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(jr,{className:"h-4 w-4 text-red-400 flex-shrink-0"}),e.jsx("span",{className:"text-sm text-muted-foreground",children:_})]},P))]})]})]},E)})})})}),e.jsx("section",{className:"py-16 bg-muted/30",children:e.jsxs("div",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h2",{className:"text-3xl font-bold text-foreground mb-4",children:"Frequently Asked Questions"}),e.jsx("p",{className:"text-muted-foreground max-w-2xl mx-auto",children:"Have questions? We have answers. If you can't find what you're looking for, contact our support team."})]}),e.jsx("div",{className:"max-w-3xl mx-auto space-y-6",children:G.map((F,E)=>e.jsxs(K,{children:[e.jsx(xe,{children:e.jsx(pe,{className:"text-lg",children:F.question})}),e.jsx(Y,{children:e.jsx("p",{className:"text-muted-foreground",children:F.answer})})]},E))})]})}),e.jsx("section",{className:"py-16",children:e.jsxs("div",{className:"container mx-auto px-4 text-center",children:[e.jsx("h2",{className:"text-3xl font-bold text-foreground mb-4",children:"Ready to Get Started?"}),e.jsx("p",{className:"text-muted-foreground mb-8 max-w-2xl mx-auto",children:"Join thousands of businesses that trust ominbiz to manage their operations."}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[e.jsx(qt,{to:"/signup",children:e.jsx(R,{size:"lg",className:"bg-green-500 hover:bg-green-600",children:"Start Free Trial"})}),e.jsx(qt,{to:"/contact",children:e.jsx(R,{size:"lg",variant:"outline",children:"Contact Sales"})})]})]})}),e.jsx(Bt,{open:f,onOpenChange:x,children:e.jsxs(zt,{className:"max-w-md",children:[e.jsxs(Ut,{children:[e.jsxs(Vt,{children:["Subscribe to ",i?.name]}),e.jsx(es,{children:"Complete your subscription to unlock all features"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-muted/30 p-4 rounded-lg",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("span",{className:"font-medium",children:[i?.name," Plan"]}),e.jsxs("span",{className:"font-bold",children:["$",a?i?.price*12*.8:i?.price,a?"/year":"/month"]})]}),a&&e.jsxs("div",{className:"text-sm text-green-600 mt-1",children:["Save $",i?.price*12*.2,"/year with annual billing"]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(te,{htmlFor:"cardholderName",children:"Cardholder Name"}),e.jsx(me,{id:"cardholderName",value:g.cardholderName,onChange:F=>k("cardholderName",F.target.value),placeholder:"John Doe"})]}),e.jsxs("div",{children:[e.jsx(te,{htmlFor:"cardNumber",children:"Card Number"}),e.jsx(me,{id:"cardNumber",value:g.cardNumber,onChange:F=>k("cardNumber",A(F.target.value)),placeholder:"1234 5678 9012 3456",maxLength:19})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(te,{htmlFor:"expiryDate",children:"Expiry Date"}),e.jsx(me,{id:"expiryDate",value:g.expiryDate,onChange:F=>k("expiryDate",F.target.value),placeholder:"MM/YY",maxLength:5})]}),e.jsxs("div",{children:[e.jsx(te,{htmlFor:"cvv",children:"CVV"}),e.jsx(me,{id:"cvv",value:g.cvv,onChange:F=>k("cvv",F.target.value),placeholder:"123",maxLength:4})]})]}),e.jsxs("div",{children:[e.jsx(te,{htmlFor:"billingAddress",children:"Billing Address"}),e.jsx(me,{id:"billingAddress",value:g.billingAddress.street,onChange:F=>k("billingAddress.street",F.target.value),placeholder:"123 Main St",className:"mb-2"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx(me,{value:g.billingAddress.city,onChange:F=>k("billingAddress.city",F.target.value),placeholder:"City"}),e.jsx(me,{value:g.billingAddress.zipCode,onChange:F=>k("billingAddress.zipCode",F.target.value),placeholder:"ZIP Code"})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[e.jsx(da,{className:"h-4 w-4"}),e.jsx("span",{children:"Your payment information is secure and encrypted"})]}),e.jsxs("div",{className:"flex gap-2 pt-4",children:[e.jsx(R,{variant:"outline",onClick:()=>x(!1),className:"flex-1",disabled:c,children:"Cancel"}),e.jsx(R,{onClick:C,className:"flex-1 bg-green-500 hover:bg-green-600",disabled:c,children:c?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Processing..."]}):e.jsxs(e.Fragment,{children:[e.jsx(pa,{className:"h-4 w-4 mr-2"}),"Subscribe Now"]})})]})]})]})}),e.jsx(Vo,{})]})}function IW(){const[t,s]=v.useState({name:"",email:"",company:"",subject:"",message:"",inquiryType:""}),[a,r]=v.useState(!1),i=x=>{const{name:h,value:p}=x.target;s(g=>({...g,[h]:p}))},o=x=>{s(h=>({...h,inquiryType:x}))},c=async x=>{x.preventDefault(),r(!0);try{await new Promise(h=>setTimeout(h,2e3)),D.success("Message sent successfully! We'll get back to you soon."),s({name:"",email:"",company:"",subject:"",message:"",inquiryType:""})}catch{D.error("Failed to send message. Please try again.")}finally{r(!1)}},u=[{icon:Ks,title:"Email Us",description:"Send us an email anytime",contact:"hello@ominbiz.com",action:"mailto:hello@ominbiz.com"},{icon:Ws,title:"Call Us",description:"Mon-Fri from 8am to 6pm",contact:"+254 700 123 456",action:"tel:+254700123456"},{icon:Yr,title:"Visit Us",description:"Come say hello at our office",contact:"Nairobi, Kenya",action:"#"},{icon:ts,title:"Working Hours",description:"Monday - Friday",contact:"8:00 AM - 6:00 PM",action:"#"}],f=[{icon:xi,title:"Live Chat",description:"Chat with our support team",available:"Available 24/7"},{icon:Pf,title:"Phone Support",description:"Call our support hotline",available:"Mon-Fri 8AM-6PM"},{icon:Zt,title:"Community",description:"Join our user community",available:"Always active"}];return e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx($o,{}),e.jsx("section",{className:"py-20 bg-gradient-to-br from-green-50 to-blue-50",children:e.jsxs("div",{className:"container mx-auto px-4 text-center",children:[e.jsxs("h1",{className:"text-5xl font-bold text-foreground mb-6",children:["Get in ",e.jsx("span",{className:"text-green-500",children:"Touch"})]}),e.jsx("p",{className:"text-xl text-muted-foreground max-w-3xl mx-auto",children:"Have questions about ominbiz? We're here to help. Reach out to our team and we'll get back to you as soon as possible."})]})}),e.jsx("section",{className:"py-16",children:e.jsx("div",{className:"container mx-auto px-4",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-16",children:u.map((x,h)=>{const p=x.icon;return e.jsxs(K,{className:"text-center hover:shadow-md transition-shadow",children:[e.jsxs(xe,{children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx("div",{className:"p-3 bg-green-100 rounded-full",children:e.jsx(p,{className:"h-6 w-6 text-green-600"})})}),e.jsx(pe,{className:"text-lg",children:x.title}),e.jsx(ot,{children:x.description})]}),e.jsx(Y,{children:e.jsx("a",{href:x.action,className:"text-green-600 hover:text-green-700 font-medium",children:x.contact})})]},h)})})})}),e.jsx("section",{className:"py-16 bg-muted/30",children:e.jsx("div",{className:"container mx-auto px-4",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-12 max-w-6xl mx-auto",children:[e.jsxs(K,{children:[e.jsxs(xe,{children:[e.jsx(pe,{className:"text-2xl",children:"Send us a Message"}),e.jsx(ot,{children:"Fill out the form below and we'll get back to you within 24 hours."})]}),e.jsx(Y,{children:e.jsxs("form",{onSubmit:c,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(te,{htmlFor:"name",children:"Full Name *"}),e.jsx(me,{id:"name",name:"name",value:t.name,onChange:i,required:!0,placeholder:"Your full name"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(te,{htmlFor:"email",children:"Email *"}),e.jsx(me,{id:"email",name:"email",type:"email",value:t.email,onChange:i,required:!0,placeholder:"your@email.com"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(te,{htmlFor:"company",children:"Company"}),e.jsx(me,{id:"company",name:"company",value:t.company,onChange:i,placeholder:"Your company name"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(te,{htmlFor:"inquiryType",children:"Inquiry Type"}),e.jsxs(Mt,{onValueChange:o,children:[e.jsx(Lt,{children:e.jsx(Ft,{placeholder:"Select inquiry type"})}),e.jsxs(It,{children:[e.jsx(Ae,{value:"sales",children:"Sales Inquiry"}),e.jsx(Ae,{value:"support",children:"Technical Support"}),e.jsx(Ae,{value:"billing",children:"Billing Question"}),e.jsx(Ae,{value:"partnership",children:"Partnership"}),e.jsx(Ae,{value:"other",children:"Other"})]})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(te,{htmlFor:"subject",children:"Subject *"}),e.jsx(me,{id:"subject",name:"subject",value:t.subject,onChange:i,required:!0,placeholder:"Brief description of your inquiry"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(te,{htmlFor:"message",children:"Message *"}),e.jsx(As,{id:"message",name:"message",value:t.message,onChange:i,required:!0,placeholder:"Tell us more about your inquiry...",rows:5})]}),e.jsx(R,{type:"submit",className:"w-full bg-green-500 hover:bg-green-600",disabled:a,children:a?e.jsx(e.Fragment,{children:"Sending..."}):e.jsxs(e.Fragment,{children:[e.jsx(Fa,{className:"h-4 w-4 mr-2"}),"Send Message"]})})]})})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-foreground mb-4",children:"Other Ways to Reach Us"}),e.jsx("p",{className:"text-muted-foreground mb-6",children:"Choose the support option that works best for you."})]}),e.jsx("div",{className:"space-y-4",children:f.map((x,h)=>{const p=x.icon;return e.jsx(K,{className:"hover:shadow-md transition-shadow",children:e.jsxs(Y,{className:"flex items-center p-6",children:[e.jsx("div",{className:"p-3 bg-green-100 rounded-full mr-4",children:e.jsx(p,{className:"h-6 w-6 text-green-600"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-foreground",children:x.title}),e.jsx("p",{className:"text-sm text-muted-foreground",children:x.description}),e.jsx("p",{className:"text-sm text-green-600 font-medium",children:x.available})]})]})},h)})}),e.jsxs(K,{className:"bg-green-50 border-green-200",children:[e.jsx(xe,{children:e.jsx(pe,{className:"text-green-800",children:"Office Hours"})}),e.jsx(Y,{className:"text-green-700",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Monday - Friday:"}),e.jsx("span",{children:"8:00 AM - 6:00 PM"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Saturday:"}),e.jsx("span",{children:"9:00 AM - 2:00 PM"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Sunday:"}),e.jsx("span",{children:"Closed"})]})]})})]})]})]})})}),e.jsx(Vo,{})]})}const BW="/assets/glorison-CRlH09PY.jpg",zW="/assets/dan-Yi6WQeZ9.jpg";function UW(){const t=[{icon:vi,title:"Mission-Driven",description:"We're committed to empowering businesses with tools that drive real growth and success."},{icon:Zt,title:"Customer-Centric",description:"Every decision we make is guided by what's best for our customers and their businesses."},{icon:Ru,title:"Innovation",description:"We continuously innovate to stay ahead of business needs and technological advances."},{icon:$i,title:"Passion",description:"We're passionate about helping businesses thrive in an increasingly digital world."}],s=[{number:"10,000+",label:"Active Businesses"},{number:"50+",label:"Countries Served"},{number:"99.9%",label:"Uptime Guarantee"},{number:"24/7",label:"Customer Support"}],a=[{name:"Daniel Ndk",role:"CEO & Founder",image:zW,bio:"Visionary leader driving innovation and growth in business management solutions."},{name:"Glorison Ouma",role:"CTO & Co-Founder",image:BW,bio:"Technology expert passionate about building scalable, intelligent solutions for businesses."},{name:"Mr Timothy Ndala",role:"Head of Operations",image:"https://tse1.mm.bing.net/th/id/OIP.w-L3HP_7QYalYXw7apT2tAHaHx?cb=12&rs=1&pid=ImgDetMain&o=7&rm=3",bio:"Operations strategist ensuring seamless business workflows and customer success."},{name:"David Kamau",role:"Head of Product Development",image:"https://th.bing.com/th/id/R.9a5877425188cdd10fd29f9178b680f6?rik=F%2fI%2bWzCaY1cPrw&riu=http%3a%2f%2fart.beopenfuture.com%2fwp-content%2fuploads%2fAlex-Ayivi.jpg&ehk=L0n3vEqGR9PpE9zPHHwZvTSZYPdDlCzbovMdLkQPoyI%3d&risl=&pid=ImgRaw&r=0",bio:"Product innovator focused on delivering exceptional user experiences and features."}],r=[{year:"2020",title:"Company Founded",description:"Started with a vision to simplify business operations for SMEs"},{year:"2021",title:"First 1,000 Customers",description:"Reached our first major milestone with businesses across 10 countries"},{year:"2022",title:"Series A Funding",description:"Raised $10M to accelerate product development and global expansion"},{year:"2023",title:"AI Integration",description:"Launched AI-powered insights and automation features"},{year:"2024",title:"Global Expansion",description:"Now serving 10,000+ businesses across 50+ countries"}];return e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx($o,{}),e.jsx("section",{className:"py-20 bg-gradient-to-br from-green-50 to-blue-50",children:e.jsxs("div",{className:"container mx-auto px-4 text-center",children:[e.jsxs("h1",{className:"text-5xl font-bold text-foreground mb-6",children:["About ",e.jsx("span",{className:"text-green-500",children:"ominbiz"})]}),e.jsx("p",{className:"text-xl text-muted-foreground max-w-3xl mx-auto mb-8",children:"We're on a mission to empower businesses worldwide with intelligent, integrated solutions that drive growth and operational excellence."}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[e.jsx(qt,{to:"/contact",children:e.jsx(R,{size:"lg",className:"bg-green-500 hover:bg-green-600",children:"Get in Touch"})}),e.jsx(qt,{to:"/pricing",children:e.jsx(R,{size:"lg",variant:"outline",children:"View Pricing"})})]})]})}),e.jsx("section",{className:"py-16",children:e.jsx("div",{className:"container mx-auto px-4",children:e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-8 text-center",children:s.map((i,o)=>e.jsxs("div",{children:[e.jsx("div",{className:"text-4xl font-bold text-green-600 mb-2",children:i.number}),e.jsx("div",{className:"text-muted-foreground",children:i.label})]},o))})})}),e.jsx("section",{className:"py-16 bg-muted/30",children:e.jsx("div",{className:"container mx-auto px-4",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-12 max-w-6xl mx-auto",children:[e.jsxs(K,{children:[e.jsx(xe,{children:e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:e.jsx(vi,{className:"h-6 w-6 text-green-600"})}),e.jsx(pe,{className:"text-2xl",children:"Our Mission"})]})}),e.jsx(Y,{children:e.jsx("p",{className:"text-muted-foreground leading-relaxed",children:"To democratize access to enterprise-grade business management tools, enabling businesses of all sizes to operate efficiently, make data-driven decisions, and achieve sustainable growth in the digital economy."})})]}),e.jsxs(K,{children:[e.jsx(xe,{children:e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx(_o,{className:"h-6 w-6 text-blue-600"})}),e.jsx(pe,{className:"text-2xl",children:"Our Vision"})]})}),e.jsx(Y,{children:e.jsx("p",{className:"text-muted-foreground leading-relaxed",children:"To become the world's most trusted business management platform, powering millions of businesses globally and fostering economic growth through technology innovation and exceptional user experiences."})})]})]})})}),e.jsx("section",{className:"py-16",children:e.jsxs("div",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h2",{className:"text-3xl font-bold text-foreground mb-4",children:"Our Values"}),e.jsx("p",{className:"text-muted-foreground max-w-2xl mx-auto",children:"The principles that guide everything we do and shape our company culture."})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:t.map((i,o)=>{const c=i.icon;return e.jsxs(K,{className:"text-center hover:shadow-md transition-shadow",children:[e.jsxs(xe,{children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx("div",{className:"p-3 bg-green-100 rounded-full",children:e.jsx(c,{className:"h-6 w-6 text-green-600"})})}),e.jsx(pe,{className:"text-lg",children:i.title})]}),e.jsx(Y,{children:e.jsx("p",{className:"text-sm text-muted-foreground",children:i.description})})]},o)})})]})}),e.jsx("section",{className:"py-16 bg-muted/30",children:e.jsxs("div",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h2",{className:"text-3xl font-bold text-foreground mb-4",children:"Meet Our Team"}),e.jsx("p",{className:"text-muted-foreground max-w-2xl mx-auto",children:"The passionate individuals behind OminBiz, dedicated to your business success."})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8",children:a.map((i,o)=>e.jsxs(K,{className:"text-center hover:shadow-md transition-shadow",children:[e.jsxs(xe,{children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx("img",{src:i.image,alt:i.name,className:"w-20 h-20 rounded-full object-cover"})}),e.jsx(pe,{className:"text-lg",children:i.name}),e.jsx(ot,{className:"text-green-600 font-medium",children:i.role})]}),e.jsx(Y,{children:e.jsx("p",{className:"text-sm text-muted-foreground",children:i.bio})})]},o))})]})}),e.jsx("section",{className:"py-16",children:e.jsxs("div",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h2",{className:"text-3xl font-bold text-foreground mb-4",children:"Our Journey"}),e.jsx("p",{className:"text-muted-foreground max-w-2xl mx-auto",children:"Key milestones in our mission to transform business operations worldwide."})]}),e.jsx("div",{className:"max-w-4xl mx-auto",children:e.jsx("div",{className:"space-y-8",children:r.map((i,o)=>e.jsxs("div",{className:"flex items-start gap-6",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-12 h-12 bg-green-500 rounded-full flex items-center justify-center text-white font-bold",children:i.year.slice(-2)})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("h3",{className:"text-xl font-semibold text-foreground",children:i.title}),e.jsx("span",{className:"text-sm text-green-600 font-medium",children:i.year})]}),e.jsx("p",{className:"text-muted-foreground",children:i.description})]})]},o))})})]})}),e.jsx("section",{className:"py-16 bg-green-50",children:e.jsxs("div",{className:"container mx-auto px-4 text-center",children:[e.jsx("h2",{className:"text-3xl font-bold text-foreground mb-4",children:"Ready to Join Our Journey?"}),e.jsx("p",{className:"text-muted-foreground mb-8 max-w-2xl mx-auto",children:"Whether you're looking to streamline your business operations or join our team, we'd love to hear from you."}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[e.jsx(qt,{to:"/signup",children:e.jsx(R,{size:"lg",className:"bg-green-500 hover:bg-green-600",children:"Start Your Free Trial"})}),e.jsx(qt,{to:"/contact",children:e.jsx(R,{size:"lg",variant:"outline",children:"Contact Us"})})]})]})}),e.jsx(Vo,{})]})}function VW(){const t=[{icon:ba,title:"Information We Collect",content:["Personal information (name, email, phone number, business details)","Account credentials and authentication data","Payment and billing information","Business data (inventory, orders, customers, transactions)","Usage data and analytics","Device information and IP addresses","Cookies and tracking technologies"]},{icon:ca,title:"How We Use Your Information",content:["Provide and maintain our services","Process transactions and payments","Send important updates and notifications","Improve and optimize our platform","Provide customer support","Detect and prevent fraud","Comply with legal obligations","Personalize your experience"]},{icon:da,title:"Data Security",content:["Industry-standard encryption (SSL/TLS)","Secure data centers with 24/7 monitoring","Regular security audits and updates","Access controls and authentication","Data backup and disaster recovery","Employee training on data protection","Compliance with GDPR and data protection laws"]},{icon:gr,title:"Your Rights",content:["Access your personal data","Correct inaccurate information","Request data deletion","Export your data","Opt-out of marketing communications","Withdraw consent","Lodge a complaint with supervisory authorities"]}];return e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx($o,{}),e.jsx("section",{className:"py-20 bg-gradient-to-br from-green-50 to-blue-50",children:e.jsxs("div",{className:"container mx-auto px-4 text-center",children:[e.jsx("div",{className:"flex justify-center mb-6",children:e.jsx("div",{className:"p-4 bg-green-100 rounded-full",children:e.jsx(da,{className:"h-12 w-12 text-green-600"})})}),e.jsxs("h1",{className:"text-5xl font-bold text-foreground mb-6",children:["Privacy ",e.jsx("span",{className:"text-green-500",children:"Policy"})]}),e.jsx("p",{className:"text-xl text-muted-foreground max-w-3xl mx-auto mb-4",children:"Your privacy is important to us. This policy explains how we collect, use, and protect your information."}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Last updated: ",new Date().toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"})]})]})}),e.jsx("section",{className:"py-16",children:e.jsxs("div",{className:"container mx-auto px-4 max-w-4xl",children:[e.jsx(K,{className:"mb-8",children:e.jsx(Y,{className:"pt-6",children:e.jsx("p",{className:"text-muted-foreground leading-relaxed",children:"At ominbiz, we are committed to protecting your privacy and ensuring the security of your personal and business data. This Privacy Policy describes how we collect, use, store, and share information when you use our platform. By using ominbiz, you agree to the practices described in this policy."})})}),e.jsx("div",{className:"space-y-6",children:t.map((s,a)=>{const r=s.icon;return e.jsxs(K,{children:[e.jsx(xe,{children:e.jsxs(pe,{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:e.jsx(r,{className:"h-5 w-5 text-green-600"})}),s.title]})}),e.jsx(Y,{children:e.jsx("ul",{className:"space-y-3",children:s.content.map((i,o)=>e.jsxs("li",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-green-500 rounded-full mt-2 flex-shrink-0"}),e.jsx("span",{className:"text-muted-foreground",children:i})]},o))})})]},a)})}),e.jsxs(K,{className:"mt-6",children:[e.jsx(xe,{children:e.jsxs(pe,{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:e.jsx(ba,{className:"h-5 w-5 text-green-600"})}),"Information Sharing"]})}),e.jsxs(Y,{className:"space-y-4",children:[e.jsx("p",{className:"text-muted-foreground",children:"We do not sell your personal information. We may share your information only in the following circumstances:"}),e.jsxs("ul",{className:"space-y-2",children:[e.jsxs("li",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-green-500 rounded-full mt-2 flex-shrink-0"}),e.jsxs("span",{className:"text-muted-foreground",children:[e.jsx("strong",{children:"Service Providers:"})," With trusted third-party vendors who help us provide our services (payment processors, hosting providers, analytics services)"]})]}),e.jsxs("li",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-green-500 rounded-full mt-2 flex-shrink-0"}),e.jsxs("span",{className:"text-muted-foreground",children:[e.jsx("strong",{children:"Legal Requirements:"})," When required by law or to protect our rights and safety"]})]}),e.jsxs("li",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-green-500 rounded-full mt-2 flex-shrink-0"}),e.jsxs("span",{className:"text-muted-foreground",children:[e.jsx("strong",{children:"Business Transfers:"})," In connection with a merger, acquisition, or sale of assets"]})]})]})]})]}),e.jsxs(K,{className:"mt-6",children:[e.jsx(xe,{children:e.jsx(pe,{children:"Cookies and Tracking"})}),e.jsxs(Y,{className:"space-y-4",children:[e.jsx("p",{className:"text-muted-foreground",children:"We use cookies and similar tracking technologies to enhance your experience, analyze usage, and provide personalized content. You can control cookies through your browser settings."}),e.jsxs("div",{className:"bg-muted/30 p-4 rounded-lg",children:[e.jsx("p",{className:"text-sm font-medium mb-2",children:"Types of cookies we use:"}),e.jsxs("ul",{className:"space-y-1 text-sm text-muted-foreground",children:[e.jsx("li",{children:" Essential cookies (required for platform functionality)"}),e.jsx("li",{children:" Analytics cookies (help us understand usage patterns)"}),e.jsx("li",{children:" Preference cookies (remember your settings)"}),e.jsx("li",{children:" Marketing cookies (deliver relevant content)"})]})]})]})]}),e.jsxs(K,{className:"mt-6",children:[e.jsx(xe,{children:e.jsx(pe,{children:"Data Retention"})}),e.jsx(Y,{children:e.jsx("p",{className:"text-muted-foreground mb-4",children:"We retain your information for as long as necessary to provide our services and comply with legal obligations. When you close your account, we will delete or anonymize your data within 90 days, except where we are required to retain it for legal or regulatory purposes."})})]}),e.jsxs(K,{className:"mt-6",children:[e.jsx(xe,{children:e.jsx(pe,{children:"Children's Privacy"})}),e.jsx(Y,{children:e.jsx("p",{className:"text-muted-foreground",children:"Our services are not intended for individuals under the age of 18. We do not knowingly collect personal information from children. If you believe we have collected information from a child, please contact us immediately."})})]}),e.jsxs(K,{className:"mt-6",children:[e.jsx(xe,{children:e.jsx(pe,{children:"International Data Transfers"})}),e.jsx(Y,{children:e.jsx("p",{className:"text-muted-foreground",children:"Your information may be transferred to and processed in countries other than your own. We ensure appropriate safeguards are in place to protect your data in accordance with this Privacy Policy and applicable laws."})})]}),e.jsxs(K,{className:"mt-6",children:[e.jsx(xe,{children:e.jsx(pe,{children:"Policy Updates"})}),e.jsx(Y,{children:e.jsx("p",{className:"text-muted-foreground",children:"We may update this Privacy Policy from time to time. We will notify you of significant changes by email or through our platform. Your continued use of ominbiz after changes constitutes acceptance of the updated policy."})})]}),e.jsxs(K,{className:"mt-6 border-green-200 bg-green-50",children:[e.jsx(xe,{children:e.jsx(pe,{className:"text-green-900",children:"Contact Us"})}),e.jsxs(Y,{className:"space-y-3",children:[e.jsx("p",{className:"text-green-800",children:"If you have questions about this Privacy Policy or how we handle your data, please contact us:"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-3 text-green-800",children:[e.jsx(Ks,{className:"h-4 w-4"}),e.jsx("span",{children:"privacy@ominbiz.com"})]}),e.jsxs("div",{className:"flex items-center gap-3 text-green-800",children:[e.jsx(Ws,{className:"h-4 w-4"}),e.jsx("span",{children:"+254 700 000 000"})]}),e.jsxs("div",{className:"flex items-center gap-3 text-green-800",children:[e.jsx(ba,{className:"h-4 w-4"}),e.jsx("span",{children:"Data Protection Officer: dpo@ominbiz.com"})]})]})]})]})]})}),e.jsx(Vo,{})]})}function $W(){return e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx($o,{}),e.jsx("section",{className:"py-20 bg-gradient-to-br from-green-50 to-blue-50",children:e.jsxs("div",{className:"container mx-auto px-4 text-center",children:[e.jsx("div",{className:"flex justify-center mb-6",children:e.jsx("div",{className:"p-4 bg-green-100 rounded-full",children:e.jsx(ba,{className:"h-12 w-12 text-green-600"})})}),e.jsxs("h1",{className:"text-5xl font-bold text-foreground mb-6",children:["Terms of ",e.jsx("span",{className:"text-green-500",children:"Service"})]}),e.jsx("p",{className:"text-xl text-muted-foreground max-w-3xl mx-auto mb-4",children:"Please read these terms carefully before using ominbiz platform."}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Last updated: ",new Date().toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"})]})]})}),e.jsx("section",{className:"py-16",children:e.jsxs("div",{className:"container mx-auto px-4 max-w-4xl",children:[e.jsxs(Vu,{className:"mb-8 border-green-200 bg-green-50",children:[e.jsx(Fr,{className:"h-4 w-4 text-green-600"}),e.jsx($u,{className:"text-green-800",children:"By accessing and using ominbiz, you agree to be bound by these Terms of Service and all applicable laws and regulations. If you do not agree with any of these terms, you are prohibited from using this platform."})]}),e.jsxs(K,{className:"mb-6",children:[e.jsx(xe,{children:e.jsxs(pe,{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:e.jsx(us,{className:"h-5 w-5 text-green-600"})}),"1. Acceptance of Terms"]})}),e.jsxs(Y,{className:"space-y-4",children:[e.jsx("p",{className:"text-muted-foreground",children:'These Terms of Service ("Terms") govern your use of the ominbiz platform and services ("Services"). By creating an account or using our Services, you acknowledge that you have read, understood, and agree to be bound by these Terms.'}),e.jsx("p",{className:"text-muted-foreground",children:"We reserve the right to modify these Terms at any time. Continued use of the Services after changes constitutes acceptance of the modified Terms."})]})]}),e.jsxs(K,{className:"mb-6",children:[e.jsx(xe,{children:e.jsxs(pe,{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:e.jsx(Zt,{className:"h-5 w-5 text-green-600"})}),"2. Eligibility"]})}),e.jsx(Y,{children:e.jsxs("ul",{className:"space-y-3",children:[e.jsxs("li",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-green-500 rounded-full mt-2 flex-shrink-0"}),e.jsx("span",{className:"text-muted-foreground",children:"You must be at least 18 years old to use ominbiz"})]}),e.jsxs("li",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-green-500 rounded-full mt-2 flex-shrink-0"}),e.jsx("span",{className:"text-muted-foreground",children:"You must have the authority to enter into these Terms on behalf of your business"})]}),e.jsxs("li",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-green-500 rounded-full mt-2 flex-shrink-0"}),e.jsx("span",{className:"text-muted-foreground",children:"You must provide accurate and complete information during registration"})]}),e.jsxs("li",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-green-500 rounded-full mt-2 flex-shrink-0"}),e.jsx("span",{className:"text-muted-foreground",children:"You must comply with all applicable laws and regulations"})]})]})})]}),e.jsxs(K,{className:"mb-6",children:[e.jsx(xe,{children:e.jsx(pe,{children:"3. Account Registration and Security"})}),e.jsxs(Y,{className:"space-y-4",children:[e.jsx("p",{className:"text-muted-foreground",children:"To access certain features, you must create an account. You agree to:"}),e.jsxs("ul",{className:"space-y-3",children:[e.jsxs("li",{className:"flex items-start gap-3",children:[e.jsx(us,{className:"h-4 w-4 text-green-500 mt-1 flex-shrink-0"}),e.jsx("span",{className:"text-muted-foreground",children:"Provide accurate, current, and complete information"})]}),e.jsxs("li",{className:"flex items-start gap-3",children:[e.jsx(us,{className:"h-4 w-4 text-green-500 mt-1 flex-shrink-0"}),e.jsx("span",{className:"text-muted-foreground",children:"Maintain and update your information to keep it accurate"})]}),e.jsxs("li",{className:"flex items-start gap-3",children:[e.jsx(us,{className:"h-4 w-4 text-green-500 mt-1 flex-shrink-0"}),e.jsx("span",{className:"text-muted-foreground",children:"Maintain the security of your password and account"})]}),e.jsxs("li",{className:"flex items-start gap-3",children:[e.jsx(us,{className:"h-4 w-4 text-green-500 mt-1 flex-shrink-0"}),e.jsx("span",{className:"text-muted-foreground",children:"Immediately notify us of any unauthorized access"})]}),e.jsxs("li",{className:"flex items-start gap-3",children:[e.jsx(us,{className:"h-4 w-4 text-green-500 mt-1 flex-shrink-0"}),e.jsx("span",{className:"text-muted-foreground",children:"Be responsible for all activities under your account"})]})]})]})]}),e.jsxs(K,{className:"mb-6",children:[e.jsx(xe,{children:e.jsxs(pe,{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:e.jsx(pa,{className:"h-5 w-5 text-green-600"})}),"4. Subscription and Payment Terms"]})}),e.jsxs(Y,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-2",children:"Subscription Plans"}),e.jsx("p",{className:"text-muted-foreground mb-3",children:"ominbiz offers various subscription tiers (Client, Standard, Professional, Premium, Enterprise) with different features and pricing."})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-2",children:"Billing"}),e.jsxs("ul",{className:"space-y-2",children:[e.jsxs("li",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-green-500 rounded-full mt-2 flex-shrink-0"}),e.jsx("span",{className:"text-muted-foreground",children:"Subscription fees are billed in advance on a monthly or annual basis"})]}),e.jsxs("li",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-green-500 rounded-full mt-2 flex-shrink-0"}),e.jsx("span",{className:"text-muted-foreground",children:"All fees are non-refundable except as required by law"})]}),e.jsxs("li",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-green-500 rounded-full mt-2 flex-shrink-0"}),e.jsx("span",{className:"text-muted-foreground",children:"You authorize us to charge your payment method automatically"})]}),e.jsxs("li",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-green-500 rounded-full mt-2 flex-shrink-0"}),e.jsx("span",{className:"text-muted-foreground",children:"Failure to pay may result in service suspension or termination"})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-2",children:"Free Trial"}),e.jsx("p",{className:"text-muted-foreground",children:"Free trials are available for eligible plans. You will be charged automatically at the end of the trial period unless you cancel before it ends."})]})]})]}),e.jsxs(K,{className:"mb-6",children:[e.jsx(xe,{children:e.jsxs(pe,{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:e.jsx(R_,{className:"h-5 w-5 text-green-600"})}),"5. Acceptable Use Policy"]})}),e.jsxs(Y,{className:"space-y-4",children:[e.jsx("p",{className:"text-muted-foreground",children:"You agree NOT to:"}),e.jsxs("ul",{className:"space-y-3",children:[e.jsxs("li",{className:"flex items-start gap-3",children:[e.jsx(Sr,{className:"h-4 w-4 text-red-500 mt-1 flex-shrink-0"}),e.jsx("span",{className:"text-muted-foreground",children:"Violate any laws or regulations"})]}),e.jsxs("li",{className:"flex items-start gap-3",children:[e.jsx(Sr,{className:"h-4 w-4 text-red-500 mt-1 flex-shrink-0"}),e.jsx("span",{className:"text-muted-foreground",children:"Infringe on intellectual property rights"})]}),e.jsxs("li",{className:"flex items-start gap-3",children:[e.jsx(Sr,{className:"h-4 w-4 text-red-500 mt-1 flex-shrink-0"}),e.jsx("span",{className:"text-muted-foreground",children:"Upload malicious code, viruses, or harmful content"})]}),e.jsxs("li",{className:"flex items-start gap-3",children:[e.jsx(Sr,{className:"h-4 w-4 text-red-500 mt-1 flex-shrink-0"}),e.jsx("span",{className:"text-muted-foreground",children:"Attempt to gain unauthorized access to our systems"})]}),e.jsxs("li",{className:"flex items-start gap-3",children:[e.jsx(Sr,{className:"h-4 w-4 text-red-500 mt-1 flex-shrink-0"}),e.jsx("span",{className:"text-muted-foreground",children:"Interfere with the operation of the Services"})]}),e.jsxs("li",{className:"flex items-start gap-3",children:[e.jsx(Sr,{className:"h-4 w-4 text-red-500 mt-1 flex-shrink-0"}),e.jsx("span",{className:"text-muted-foreground",children:"Use the Services for illegal or fraudulent activities"})]}),e.jsxs("li",{className:"flex items-start gap-3",children:[e.jsx(Sr,{className:"h-4 w-4 text-red-500 mt-1 flex-shrink-0"}),e.jsx("span",{className:"text-muted-foreground",children:"Share your account credentials with unauthorized parties"})]}),e.jsxs("li",{className:"flex items-start gap-3",children:[e.jsx(Sr,{className:"h-4 w-4 text-red-500 mt-1 flex-shrink-0"}),e.jsx("span",{className:"text-muted-foreground",children:"Reverse engineer, decompile, or disassemble the platform"})]})]})]})]}),e.jsxs(K,{className:"mb-6",children:[e.jsx(xe,{children:e.jsx(pe,{children:"6. Data Ownership and License"})}),e.jsxs(Y,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-2",children:"Your Data"}),e.jsx("p",{className:"text-muted-foreground",children:"You retain all rights to your business data. By using ominbiz, you grant us a limited license to use, store, and process your data solely to provide and improve our Services."})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-2",children:"Our Platform"}),e.jsx("p",{className:"text-muted-foreground",children:"ominbiz and all intellectual property rights in the platform remain our property. You are granted a limited, non-exclusive, non-transferable license to use the Services."})]})]})]}),e.jsxs(K,{className:"mb-6",children:[e.jsx(xe,{children:e.jsx(pe,{children:"7. Service Availability and Support"})}),e.jsxs(Y,{className:"space-y-4",children:[e.jsx("p",{className:"text-muted-foreground",children:"We strive to provide 99.9% uptime but do not guarantee uninterrupted access. We may perform maintenance, updates, or improvements that may temporarily affect service availability."}),e.jsx("p",{className:"text-muted-foreground",children:"Support is provided according to your subscription tier. Response times and support channels vary by plan."})]})]}),e.jsxs(K,{className:"mb-6",children:[e.jsx(xe,{children:e.jsx(pe,{children:"8. Termination"})}),e.jsxs(Y,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-2",children:"By You"}),e.jsx("p",{className:"text-muted-foreground",children:"You may cancel your subscription at any time through your account settings. Cancellation takes effect at the end of your current billing period."})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-2",children:"By Us"}),e.jsx("p",{className:"text-muted-foreground mb-3",children:"We may suspend or terminate your account if you:"}),e.jsxs("ul",{className:"space-y-2",children:[e.jsxs("li",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-green-500 rounded-full mt-2 flex-shrink-0"}),e.jsx("span",{className:"text-muted-foreground",children:"Violate these Terms"})]}),e.jsxs("li",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-green-500 rounded-full mt-2 flex-shrink-0"}),e.jsx("span",{className:"text-muted-foreground",children:"Fail to pay fees"})]}),e.jsxs("li",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-green-500 rounded-full mt-2 flex-shrink-0"}),e.jsx("span",{className:"text-muted-foreground",children:"Engage in fraudulent or illegal activity"})]}),e.jsxs("li",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-green-500 rounded-full mt-2 flex-shrink-0"}),e.jsx("span",{className:"text-muted-foreground",children:"Pose a security risk to our platform"})]})]})]})]})]}),e.jsxs(K,{className:"mb-6",children:[e.jsx(xe,{children:e.jsx(pe,{children:"9. Disclaimers and Limitations of Liability"})}),e.jsxs(Y,{className:"space-y-4",children:[e.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 p-4 rounded-lg",children:[e.jsx("p",{className:"text-sm font-medium text-yellow-900 mb-2",children:"IMPORTANT LEGAL NOTICE"}),e.jsx("p",{className:"text-sm text-yellow-800",children:'THE SERVICES ARE PROVIDED "AS IS" AND "AS AVAILABLE" WITHOUT WARRANTIES OF ANY KIND, EITHER EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE, OR NON-INFRINGEMENT.'})]}),e.jsx("p",{className:"text-muted-foreground",children:"TO THE MAXIMUM EXTENT PERMITTED BY LAW, ominbiz SHALL NOT BE LIABLE FOR ANY INDIRECT, INCIDENTAL, SPECIAL, CONSEQUENTIAL, OR PUNITIVE DAMAGES, OR ANY LOSS OF PROFITS OR REVENUES, WHETHER INCURRED DIRECTLY OR INDIRECTLY, OR ANY LOSS OF DATA, USE, GOODWILL, OR OTHER INTANGIBLE LOSSES."})]})]}),e.jsxs(K,{className:"mb-6",children:[e.jsx(xe,{children:e.jsx(pe,{children:"10. Indemnification"})}),e.jsx(Y,{children:e.jsx("p",{className:"text-muted-foreground",children:"You agree to indemnify and hold ominbiz harmless from any claims, damages, losses, liabilities, and expenses (including legal fees) arising from your use of the Services, violation of these Terms, or infringement of any third-party rights."})})]}),e.jsxs(K,{className:"mb-6",children:[e.jsx(xe,{children:e.jsx(pe,{children:"11. Governing Law and Dispute Resolution"})}),e.jsx(Y,{className:"space-y-4",children:e.jsx("p",{className:"text-muted-foreground",children:"These Terms are governed by the laws of Kenya. Any disputes arising from these Terms or the Services shall be resolved through arbitration in Nairobi, Kenya, or through the courts of Kenya."})})]}),e.jsxs(K,{className:"mb-6",children:[e.jsx(xe,{children:e.jsx(pe,{children:"12. Changes to Terms"})}),e.jsx(Y,{children:e.jsx("p",{className:"text-muted-foreground",children:"We reserve the right to modify these Terms at any time. We will notify you of material changes via email or through the platform. Your continued use of the Services after such notification constitutes acceptance of the modified Terms."})})]}),e.jsxs(K,{className:"border-green-200 bg-green-50",children:[e.jsx(xe,{children:e.jsx(pe,{className:"text-green-900",children:"13. Contact Information"})}),e.jsxs(Y,{className:"space-y-3",children:[e.jsx("p",{className:"text-green-800",children:"For questions about these Terms of Service, please contact us:"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-3 text-green-800",children:[e.jsx(ba,{className:"h-4 w-4"}),e.jsx("span",{children:"legal@ominbiz.com"})]}),e.jsxs("div",{className:"flex items-center gap-3 text-green-800",children:[e.jsx(Zt,{className:"h-4 w-4"}),e.jsx("span",{children:"ominbiz Limited, Nairobi, Kenya"})]})]}),e.jsx("div",{className:"mt-4 pt-4 border-t border-green-200",children:e.jsx("p",{className:"text-sm text-green-800",children:"By using ominbiz, you acknowledge that you have read and understood these Terms of Service and agree to be bound by them. Thank you for choosing ominbiz!"})})]})]}),e.jsxs("div",{className:"mt-8 p-6 bg-muted/30 rounded-lg",children:[e.jsx("h3",{className:"font-semibold mb-4",children:"Related Documents"}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsx(qt,{to:"/privacy",className:"text-green-600 hover:text-green-700 font-medium",children:" Privacy Policy"}),e.jsx(qt,{to:"/contact",className:"text-green-600 hover:text-green-700 font-medium",children:" Contact Support"}),e.jsx(qt,{to:"/pricing",className:"text-green-600 hover:text-green-700 font-medium",children:" View Pricing"})]})]})]})}),e.jsx(Vo,{})]})}const HW=()=>{const[t,s]=v.useState(""),[a,r]=v.useState({subject:"",category:"",message:"",priority:"medium"}),i=[{id:"getting-started",title:"Getting Started",icon:ui,faqs:[{question:"How do I set up my ominbiz account?",answer:"To set up your account, click on Sign Up, fill in your business details, verify your email, and complete the onboarding process."},{question:"What features are included in the free plan?",answer:"The free plan includes basic inventory management, up to 100 products, basic reporting, and email support."},{question:"How do I add my first product?",answer:"Go to Products > Add Product, fill in the product details including name, price, category, and stock quantity."}]},{id:"inventory",title:"Inventory Management",icon:Yt,faqs:[{question:"How do I track stock levels?",answer:"Stock levels are automatically updated when you make sales or receive inventory. You can also manually adjust stock in the Inventory section."},{question:"Can I set up low stock alerts?",answer:"Yes, you can set reorder levels for each product. When stock falls below this level, you'll receive notifications."},{question:"How do I manage multiple locations?",answer:"Go to Locations to add and manage multiple business locations. Each location can have separate inventory tracking."}]},{id:"payments",title:"Payments & Billing",icon:pa,faqs:[{question:"What payment methods do you accept?",answer:"We accept M-Pesa, PayPal, Visa, Mastercard, and bank transfers for subscription payments."},{question:"How do I set up M-Pesa integration?",answer:"Go to Settings > Payment Integration, enter your M-Pesa business details, and follow the verification process."},{question:"Can I process customer payments through the system?",answer:"Yes, you can process payments through our integrated payment gateway for both online and in-person sales."}]},{id:"reports",title:"Reports & Analytics",icon:er,faqs:[{question:"How do I generate sales reports?",answer:"Go to Finances > Reports to generate various sales reports including daily, weekly, monthly, and custom date ranges."},{question:"Can I export data to Excel?",answer:"Yes, all reports can be exported to Excel, PDF, or CSV formats for further analysis."},{question:"How do I track business performance?",answer:"Use the Dashboard overview and AI Insights section to monitor key performance indicators and business trends."}]}],o=[{title:"Live Chat",description:"Get instant help from our support team",icon:xi,action:"Start Chat",available:"24/7"},{title:"Phone Support",description:"Speak directly with our experts",icon:Ws,action:"Call Now",available:"Mon-Fri 8AM-6PM"},{title:"Email Support",description:"Send us a detailed message",icon:Ks,action:"Send Email",available:"Response within 24hrs"},{title:"Video Tutorial",description:"Watch step-by-step guides",icon:Aa,action:"Watch Now",available:"On-demand"}],c=f=>{if(f.preventDefault(),!a.subject||!a.message){D.error("Please fill in all required fields");return}D.success("Support ticket submitted successfully! We'll get back to you within 24 hours."),r({subject:"",category:"",message:"",priority:"medium"})},u=i.map(f=>({...f,faqs:f.faqs.filter(x=>x.question.toLowerCase().includes(t.toLowerCase())||x.answer.toLowerCase().includes(t.toLowerCase()))})).filter(f=>f.faqs.length>0);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Help & Support"}),e.jsx("p",{className:"text-muted-foreground",children:"Get help with ominbiz features and find answers to common questions"})]}),e.jsx(De,{variant:"outline",className:"text-xs",children:"Support Center"})]}),e.jsx(K,{children:e.jsx(Y,{className:"p-6",children:e.jsxs("div",{className:"relative",children:[e.jsx(oa,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),e.jsx(me,{placeholder:"Search for help articles, features, or common issues...",value:t,onChange:f=>s(f.target.value),className:"pl-10"})]})})}),e.jsxs(ja,{defaultValue:"faq",className:"space-y-6",children:[e.jsxs(Sa,{className:"grid w-full grid-cols-3",children:[e.jsx(ft,{value:"faq",children:"FAQ"}),e.jsx(ft,{value:"support",children:"Contact Support"}),e.jsx(ft,{value:"resources",children:"Resources"})]}),e.jsxs(pt,{value:"faq",className:"space-y-6",children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:o.map((f,x)=>e.jsx(K,{className:"hover:shadow-md transition-shadow",children:e.jsxs(Y,{className:"p-4 text-center",children:[e.jsx(f.icon,{className:"h-8 w-8 mx-auto mb-2 text-primary"}),e.jsx("h3",{className:"font-semibold mb-1",children:f.title}),e.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:f.description}),e.jsx(De,{variant:"outline",className:"text-xs mb-3",children:f.available}),e.jsx(R,{size:"sm",className:"w-full",onClick:()=>{switch(f.title){case"Live Chat":D.success("Opening live chat..."),window.open("https://tawk.to/chat/ominbiz","_blank");break;case"Phone Support":window.location.href="tel:+254758175275",D.success("Opening phone dialer...");break;case"Email Support":window.location.href="mailto:ominbizsolutions@gmail.com?subject=Support Request",D.success("Opening email client...");break;case"Video Tutorial":window.open("/tutorials","_blank"),D.success("Opening video tutorials...");break;default:D.info(`${f.title} feature coming soon!`)}},children:f.action})]})},x))}),e.jsx("div",{className:"space-y-6",children:(t?u:i).map(f=>e.jsxs(K,{children:[e.jsx(xe,{children:e.jsxs(pe,{className:"flex items-center gap-2",children:[e.jsx(f.icon,{className:"h-5 w-5"}),f.title]})}),e.jsx(Y,{className:"space-y-4",children:f.faqs.map((x,h)=>e.jsxs("div",{className:"border-b pb-4 last:border-b-0",children:[e.jsxs("h4",{className:"font-medium mb-2 flex items-center gap-2",children:[e.jsx(xv,{className:"h-4 w-4 text-primary"}),x.question]}),e.jsx("p",{className:"text-muted-foreground text-sm pl-6",children:x.answer})]},h))})]},f.id))})]}),e.jsx(pt,{value:"support",className:"space-y-6",children:e.jsxs(K,{children:[e.jsxs(xe,{children:[e.jsx(pe,{children:"Submit a Support Ticket"}),e.jsx(ot,{children:"Can't find what you're looking for? Send us a message and we'll help you out."})]}),e.jsx(Y,{children:e.jsxs("form",{onSubmit:c,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Subject *"}),e.jsx(me,{value:a.subject,onChange:f=>r({...a,subject:f.target.value}),placeholder:"Brief description of your issue"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Category"}),e.jsxs("select",{className:"w-full p-2 border rounded-md",value:a.category,onChange:f=>r({...a,category:f.target.value}),children:[e.jsx("option",{value:"",children:"Select a category"}),e.jsx("option",{value:"technical",children:"Technical Issue"}),e.jsx("option",{value:"billing",children:"Billing & Payments"}),e.jsx("option",{value:"feature",children:"Feature Request"}),e.jsx("option",{value:"general",children:"General Question"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Priority"}),e.jsxs("select",{className:"w-full p-2 border rounded-md",value:a.priority,onChange:f=>r({...a,priority:f.target.value}),children:[e.jsx("option",{value:"low",children:"Low"}),e.jsx("option",{value:"medium",children:"Medium"}),e.jsx("option",{value:"high",children:"High"}),e.jsx("option",{value:"urgent",children:"Urgent"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Message *"}),e.jsx(As,{value:a.message,onChange:f=>r({...a,message:f.target.value}),placeholder:"Please describe your issue in detail...",rows:5})]}),e.jsxs(R,{type:"submit",className:"w-full",children:[e.jsx(Fa,{className:"h-4 w-4 mr-2"}),"Submit Support Ticket"]})]})})]})}),e.jsx(pt,{value:"resources",className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[e.jsxs(K,{children:[e.jsx(xe,{children:e.jsxs(pe,{className:"flex items-center gap-2",children:[e.jsx(Aa,{className:"h-5 w-5"}),"Video Tutorials"]})}),e.jsxs(Y,{children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Step-by-step video guides for all ominbiz features"}),e.jsx(R,{variant:"outline",className:"w-full",children:"Watch Tutorials"})]})]}),e.jsxs(K,{children:[e.jsx(xe,{children:e.jsxs(pe,{className:"flex items-center gap-2",children:[e.jsx(ba,{className:"h-5 w-5"}),"Documentation"]})}),e.jsxs(Y,{children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Comprehensive guides and API documentation"}),e.jsx(R,{variant:"outline",className:"w-full",children:"Read Docs"})]})]}),e.jsxs(K,{children:[e.jsx(xe,{children:e.jsxs(pe,{className:"flex items-center gap-2",children:[e.jsx(Zt,{className:"h-5 w-5"}),"Community"]})}),e.jsxs(Y,{children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Connect with other ominbiz users and share tips"}),e.jsx(R,{variant:"outline",className:"w-full",children:"Join Community"})]})]})]})})]})]})},ho=(t="trend",s=30)=>{const a=[];for(let i=0;i<s;i++){const o=new Date;o.setDate(o.getDate()-(s-i-1));const c=t==="growth"?i*20:t==="decline"?-i*10:Math.sin(i/5)*100,u=(Math.random()-.5)*200;a.push({name:o.toLocaleDateString("en-US",{month:"short",day:"numeric"}),date:o.toISOString().split("T")[0],value:Math.max(0,1e3+c+u),revenue:Math.max(0,1e3+c+u),profit:Math.max(0,(1e3+c+u)*.3),loss:Math.max(0,(1e3+c+u)*.1),orders:Math.floor(20+Math.random()*50+i*2),customers:Math.floor(10+Math.random()*30+i),products:Math.floor(5+Math.random()*15)})}return a},WW=()=>{const{isAuthenticated:t}=_s(),[s,a]=v.useState(!0),[r,i]=v.useState(null),[o,c]=v.useState({orders:[],products:[],salesData:[],customerData:[]}),[u,f]=v.useState({overview:{totalRevenue:0,totalOrders:0,totalCustomers:0,averageOrderValue:0,growthRate:0,conversionRate:3.2},salesTrends:{daily:[],topProducts:[]},customerInsights:{demographics:{ageGroups:[],locations:[]},behavior:{averageSessionTime:"0m 0s",bounceRate:0,repeatCustomers:0,customerLifetimeValue:0}},performance:{goals:[{name:"Monthly Revenue",target:15e4,current:0,percentage:0},{name:"New Customers",target:200,current:0,percentage:0},{name:"Order Volume",target:1500,current:0,percentage:0},{name:"Customer Satisfaction",target:95,current:92,percentage:96.8}],kpis:{revenueGrowth:0,customerGrowth:0,orderGrowth:0,profitMargin:0}}}),[x,h]=v.useState(!1),[p,g]=v.useState("7d"),y=async()=>{if(t){a(!0),i(null);try{const T={Authorization:`Bearer ${localStorage.getItem("token")}`},[_,P,z]=await Promise.all([Ne.get("/orders",{headers:T}).catch(()=>({data:[]})),Ne.get("/products",{headers:T}).catch(()=>({data:[]})),Ne.get("/transactions",{headers:T}).catch(()=>({data:[]}))]),V=_.data||[],W=P.data||[],q=z.data||[];console.log(" Analytics data loaded:",{orders:V.length,products:W.length,transactions:q.length}),b(V,W,q),c({orders:V,products:W,salesData:S(V),customerData:C(V)})}catch(E){console.error(" Error fetching analytics:",E),i(E.message),D.error("Failed to load analytics data")}finally{a(!1)}}},b=(E,T,_)=>{const P=E.reduce((X,O)=>X+(Number(O.total)||0),0),z=E.length,V=new Set(E.map(X=>X.customer?.email).filter(Boolean)).size,W=z>0?P/z:0,q=new Date,B=new Date(q.getFullYear(),q.getMonth()-1,1),ae=new Date(q.getFullYear(),q.getMonth(),1),U=E.filter(X=>{const O=new Date(X.date||X.createdAt);return O>=B&&O<ae}),Z=E.filter(X=>new Date(X.date||X.createdAt)>=ae),de=U.reduce((X,O)=>X+(Number(O.total)||0),0),H=Z.reduce((X,O)=>X+(Number(O.total)||0),0),se=de>0?(H-de)/de*100:0,ee={};E.forEach(X=>{X.items?.forEach(O=>{const J=O.product||O.name;ee[J]||(ee[J]={name:O.name||"Unknown",sales:0,revenue:0}),ee[J].sales+=O.quantity||1,ee[J].revenue+=(O.price||0)*(O.quantity||1)})});const L=Object.values(ee).sort((X,O)=>O.revenue-X.revenue).slice(0,5);f({overview:{totalRevenue:P,totalOrders:z,totalCustomers:V,averageOrderValue:W,growthRate:se,conversionRate:3.2},salesTrends:{daily:N(E),topProducts:L.length>0?L:u.salesTrends.topProducts},customerInsights:u.customerInsights,performance:{...u.performance,goals:[{name:"Monthly Revenue",target:15e4,current:H,percentage:H/15e4*100},{name:"New Customers",target:200,current:V,percentage:V/200*100},{name:"Order Volume",target:1500,current:z,percentage:z/1500*100},{name:"Customer Satisfaction",target:95,current:92,percentage:96.8}],kpis:{revenueGrowth:se,customerGrowth:(()=>{const X=new Set(U.map(J=>J.customer?.email).filter(Boolean)).size,O=new Set(Z.map(J=>J.customer?.email).filter(Boolean)).size;return X>0?(O-X)/X*100:0})(),orderGrowth:(Z.length-U.length)/Math.max(U.length,1)*100,profitMargin:P>0?P*.25/P*100:0}}})},N=E=>{const T=[],_=new Date;for(let P=6;P>=0;P--){const z=new Date(_);z.setDate(z.getDate()-P);const V=z.toISOString().split("T")[0],W=E.filter(B=>new Date(B.date||B.createdAt).toISOString().split("T")[0]===V),q=W.reduce((B,ae)=>B+(Number(ae.total)||0),0);T.push({date:V,revenue:q,orders:W.length})}return T},S=E=>{const T=[],_=new Date;for(let P=29;P>=0;P--){const z=new Date(_);z.setDate(z.getDate()-P);const V=z.toISOString().split("T")[0],W=E.filter(B=>new Date(B.date||B.createdAt).toISOString().split("T")[0]===V),q=W.reduce((B,ae)=>B+(Number(ae.total)||0),0);T.push({date:V,name:z.toLocaleDateString("en-US",{month:"short",day:"numeric"}),value:q,orders:W.length})}return T},C=E=>{const T=[],_=new Date;for(let P=29;P>=0;P--){const z=new Date(_);z.setDate(z.getDate()-P);const V=z.toISOString().split("T")[0],W=E.filter(B=>new Date(B.date||B.createdAt).toISOString().split("T")[0]===V),q=new Set(W.map(B=>B.customer?.email).filter(Boolean)).size;T.push({date:V,name:z.toLocaleDateString("en-US",{month:"short",day:"numeric"}),value:q})}return T};v.useEffect(()=>{y();const E=setInterval(y,12e4);return()=>clearInterval(E)},[t]);const k=async()=>{h(!0),await y(),h(!1),D.success("Analytics data refreshed!")},A=E=>{D.info(`Generating ${E} report...`,{duration:2e3});const T={reportType:E,generatedAt:new Date().toISOString(),period:p,data:{overview:u.overview,salesTrends:u.salesTrends,customerInsights:u.customerInsights,performance:u.performance}},_=JSON.stringify(T,null,2),P=new Blob([_],{type:"application/json"}),z=URL.createObjectURL(P),V=document.createElement("a");V.href=z,V.download=`${E.toLowerCase().replace(/\s+/g,"-")}-report-${Date.now()}.json`,document.body.appendChild(V),V.click(),document.body.removeChild(V),URL.revokeObjectURL(z),D.success(`${E} report downloaded!`)},G=E=>new Intl.NumberFormat("en-KE",{style:"currency",currency:"KES"}).format(E),F=E=>`${E.toFixed(1)}%`;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Analytics Dashboard"}),e.jsx("p",{className:"text-muted-foreground",children:"Comprehensive business insights and performance metrics"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("select",{value:p,onChange:E=>g(E.target.value),className:"px-3 py-2 border rounded-md",children:[e.jsx("option",{value:"7d",children:"Last 7 days"}),e.jsx("option",{value:"30d",children:"Last 30 days"}),e.jsx("option",{value:"90d",children:"Last 90 days"}),e.jsx("option",{value:"1y",children:"Last year"})]}),e.jsxs(R,{onClick:k,disabled:x,variant:"outline",children:[e.jsx(cs,{className:`h-4 w-4 mr-2 ${x?"animate-spin":""}`}),"Refresh"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx(K,{children:e.jsx(Y,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Total Revenue"}),e.jsx("p",{className:"text-2xl font-bold",children:G(u.overview.totalRevenue)}),e.jsxs("p",{className:"text-xs text-green-600 flex items-center mt-1",children:[e.jsx(Is,{className:"h-3 w-3 mr-1"}),"+",F(u.overview.growthRate)," from last month"]})]}),e.jsx(ra,{className:"h-8 w-8 text-green-600"})]})})}),e.jsx(K,{children:e.jsx(Y,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Total Orders"}),e.jsx("p",{className:"text-2xl font-bold",children:u.overview.totalOrders.toLocaleString()}),e.jsxs("p",{className:`text-xs flex items-center mt-1 ${u.performance.kpis.orderGrowth>=0?"text-green-600":"text-red-600"}`,children:[u.performance.kpis.orderGrowth>=0?e.jsx(Is,{className:"h-3 w-3 mr-1"}):e.jsx(fi,{className:"h-3 w-3 mr-1"}),u.performance.kpis.orderGrowth>=0?"+":"",F(Math.abs(u.performance.kpis.orderGrowth))," from last month"]})]}),e.jsx(ws,{className:"h-8 w-8 text-blue-600"})]})})}),e.jsx(K,{children:e.jsx(Y,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Total Customers"}),e.jsx("p",{className:"text-2xl font-bold",children:u.overview.totalCustomers.toLocaleString()}),e.jsxs("p",{className:`text-xs flex items-center mt-1 ${u.performance.kpis.customerGrowth>=0?"text-green-600":"text-red-600"}`,children:[u.performance.kpis.customerGrowth>=0?e.jsx(Is,{className:"h-3 w-3 mr-1"}):e.jsx(fi,{className:"h-3 w-3 mr-1"}),u.performance.kpis.customerGrowth>=0?"+":"",F(Math.abs(u.performance.kpis.customerGrowth))," from last month"]})]}),e.jsx(Zt,{className:"h-8 w-8 text-purple-600"})]})})}),e.jsx(K,{children:e.jsx(Y,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Avg Order Value"}),e.jsx("p",{className:"text-2xl font-bold",children:G(u.overview.averageOrderValue)}),u.overview.totalOrders>0?e.jsxs("p",{className:"text-xs text-muted-foreground flex items-center mt-1",children:["Based on ",u.overview.totalOrders," orders"]}):e.jsx("p",{className:"text-xs text-muted-foreground flex items-center mt-1",children:"No orders yet"})]}),e.jsx(vi,{className:"h-8 w-8 text-orange-600"})]})})})]}),e.jsxs(ja,{defaultValue:"sales",className:"space-y-6",children:[e.jsxs(Sa,{className:"grid w-full grid-cols-4",children:[e.jsx(ft,{value:"sales",children:"Sales Analytics"}),e.jsx(ft,{value:"customers",children:"Customer Insights"}),e.jsx(ft,{value:"performance",children:"Performance"}),e.jsx(ft,{value:"reports",children:"Reports"})]}),e.jsx(pt,{value:"sales",className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx(rs,{title:"Sales Revenue Trends",description:"Last 30 days of revenue from real orders",type:"area",data:s?ho("growth",30):o.salesData,height:350,autoRefresh:!0,refreshInterval:12e4}),e.jsx(rs,{title:"Order Volume Trends",description:"Daily order count from database",type:"line",data:s?ho("trend",30):o.salesData,height:350,autoRefresh:!0,refreshInterval:12e4}),e.jsxs(K,{children:[e.jsxs(xe,{children:[e.jsxs(pe,{className:"flex items-center gap-2",children:[e.jsx(Yt,{className:"h-5 w-5"}),"Top Products"]}),e.jsx(ot,{children:"Best performing products by revenue"})]}),e.jsx(Y,{children:e.jsx("div",{className:"space-y-4",children:u.salesTrends.topProducts.map((E,T)=>e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium",children:E.name}),e.jsx("span",{className:"text-sm",children:G(E.revenue)})]}),e.jsxs("div",{className:"flex items-center justify-between text-xs text-muted-foreground",children:[e.jsxs("span",{children:[E.sales," sales"]}),e.jsx(Cr,{value:E.sales/250*100,className:"w-20 h-2"})]})]},T))})})]})]})}),e.jsx(pt,{value:"customers",className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx(rs,{title:"Customer Demographics",description:"Customer distribution from real orders",type:"pie",data:s?[{name:"18-25",value:25},{name:"26-35",value:35},{name:"36-45",value:20},{name:"46-55",value:15},{name:"55+",value:5}]:[{name:"Active Customers",value:u.overview.totalCustomers},{name:"One-time Buyers",value:Math.floor(u.overview.totalCustomers*.3)},{name:"Repeat Customers",value:Math.floor(u.overview.totalCustomers*.7)}],height:350,showControls:!1}),e.jsx(rs,{title:"Customer Acquisition",description:"Daily unique customers from database",type:"bar",data:s?ho("growth",30):o.customerData,height:350,autoRefresh:!0,refreshInterval:12e4}),e.jsxs(K,{children:[e.jsxs(xe,{children:[e.jsxs(pe,{className:"flex items-center gap-2",children:[e.jsx(La,{className:"h-5 w-5"}),"Customer Behavior"]}),e.jsx(ot,{children:"Calculated from order data"})]}),e.jsx(Y,{children:s?e.jsx("div",{className:"space-y-4",children:[1,2,3,4].map(E=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"h-4 w-32 bg-gray-200 rounded animate-pulse"}),e.jsx("div",{className:"h-4 w-20 bg-gray-200 rounded animate-pulse"})]},E))}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm",children:"Total Customers"}),e.jsx("span",{className:"text-sm font-medium",children:u.overview.totalCustomers})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm",children:"Avg Orders per Customer"}),e.jsx("span",{className:"text-sm font-medium",children:u.overview.totalCustomers>0?(u.overview.totalOrders/u.overview.totalCustomers).toFixed(1):"0"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm",children:"Customer Lifetime Value"}),e.jsx("span",{className:"text-sm font-medium",children:G(u.overview.averageOrderValue*1.5)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm",children:"Repeat Purchase Rate"}),e.jsx("span",{className:"text-sm font-medium",children:(()=>{if(u.overview.totalCustomers===0)return"0%";const E=(u.overview.totalOrders-u.overview.totalCustomers)/u.overview.totalCustomers*100;return E>0?`${E.toFixed(1)}%`:"0%"})()})]})]})})]})]})}),e.jsxs(pt,{value:"performance",className:"space-y-6",children:[e.jsxs(K,{children:[e.jsxs(xe,{children:[e.jsxs(pe,{className:"flex items-center gap-2",children:[e.jsx(vi,{className:"h-5 w-5"}),"Goals & Targets"]}),e.jsx(ot,{children:"Track progress towards monthly goals"})]}),e.jsx(Y,{children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:u.performance.goals.map((E,T)=>e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium",children:E.name}),e.jsxs("span",{className:"text-sm",children:[E.current.toLocaleString()," / ",E.target.toLocaleString()]})]}),e.jsx(Cr,{value:E.percentage,className:"h-3"}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[E.percentage.toFixed(1),"% of target achieved"]})]},T))})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(K,{children:e.jsxs(Y,{className:"p-4 text-center",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Revenue Growth"}),e.jsxs("p",{className:"text-2xl font-bold text-green-600",children:["+",u.performance.kpis.revenueGrowth,"%"]})]})}),e.jsx(K,{children:e.jsxs(Y,{className:"p-4 text-center",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Customer Growth"}),e.jsxs("p",{className:"text-2xl font-bold text-blue-600",children:["+",u.performance.kpis.customerGrowth,"%"]})]})}),e.jsx(K,{children:e.jsxs(Y,{className:"p-4 text-center",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Order Growth"}),e.jsxs("p",{className:"text-2xl font-bold text-purple-600",children:["+",u.performance.kpis.orderGrowth,"%"]})]})}),e.jsx(K,{children:e.jsxs(Y,{className:"p-4 text-center",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Profit Margin"}),e.jsxs("p",{className:"text-2xl font-bold text-orange-600",children:[u.performance.kpis.profitMargin,"%"]})]})})]})]}),e.jsx(pt,{value:"reports",className:"space-y-6",children:e.jsxs(K,{children:[e.jsxs(xe,{children:[e.jsxs(pe,{className:"flex items-center gap-2",children:[e.jsx(er,{className:"h-5 w-5"}),"Generate Reports"]}),e.jsx(ot,{children:"Export detailed analytics reports"})]}),e.jsx(Y,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.jsxs(R,{variant:"outline",className:"h-20 flex-col hover:bg-blue-50 hover:border-blue-500 transition-colors",onClick:()=>A("Monthly Report"),children:[e.jsx(gs,{className:"h-6 w-6 mb-2"}),"Monthly Report"]}),e.jsxs(R,{variant:"outline",className:"h-20 flex-col hover:bg-purple-50 hover:border-purple-500 transition-colors",onClick:()=>A("Customer Report"),children:[e.jsx(Zt,{className:"h-6 w-6 mb-2"}),"Customer Report"]}),e.jsxs(R,{variant:"outline",className:"h-20 flex-col hover:bg-orange-50 hover:border-orange-500 transition-colors",onClick:()=>A("Product Report"),children:[e.jsx(Yt,{className:"h-6 w-6 mb-2"}),"Product Report"]}),e.jsxs(R,{variant:"outline",className:"h-20 flex-col hover:bg-green-50 hover:border-green-500 transition-colors",onClick:()=>A("Financial Report"),children:[e.jsx(ra,{className:"h-6 w-6 mb-2"}),"Financial Report"]}),e.jsxs(R,{variant:"outline",className:"h-20 flex-col hover:bg-cyan-50 hover:border-cyan-500 transition-colors",onClick:()=>A("Growth Report"),children:[e.jsx(Is,{className:"h-6 w-6 mb-2"}),"Growth Report"]}),e.jsxs(R,{variant:"outline",className:"h-20 flex-col hover:bg-pink-50 hover:border-pink-500 transition-colors",onClick:()=>A("Performance Report"),children:[e.jsx(La,{className:"h-6 w-6 mb-2"}),"Performance Report"]})]})})]})})]}),e.jsxs("div",{className:"mt-8 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Advanced Analytics"}),e.jsx(De,{variant:"secondary",children:"Real-time Data"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx(rs,{title:"Sales Revenue Trends",description:"Real-time revenue from orders",defaultType:"line",data:s?ho("growth",30):o.salesData,height:350,autoRefresh:!0,refreshInterval:12e4}),e.jsx(rs,{title:"Order Volume Analysis",description:"Daily order counts from database",defaultType:"bar",data:s?ho("trend",30):o.salesData,height:350,autoRefresh:!0,refreshInterval:12e4})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx(rs,{title:"Customer Demographics",description:"Customer segmentation from orders",defaultType:"pie",data:s?[{name:"Segment A",value:30},{name:"Segment B",value:40},{name:"Segment C",value:30}]:[{name:"Active",value:u.overview.totalCustomers},{name:"New",value:Math.floor(u.overview.totalCustomers*.4)},{name:"Returning",value:Math.floor(u.overview.totalCustomers*.6)}],height:350,autoRefresh:!1,refreshInterval:12e4}),e.jsx(rs,{title:"Customer Acquisition",description:"Daily new customers",defaultType:"area",data:s?ho("growth",30):o.customerData,height:350,autoRefresh:!0,refreshInterval:12e4})]}),e.jsx("div",{className:"w-full",children:e.jsx(rs,{title:"Comprehensive Business Analytics",description:"Combined metrics from all data sources",defaultType:"composed",data:s?ho("growth",30):o.salesData,height:400,autoRefresh:!0,refreshInterval:12e4,fullscreen:!1})})]})]})},GW=()=>{const{user:t,isAuthenticated:s}=_s(),{socket:a,connected:r}=ha(),[i,o]=v.useState(!0),[c,u]=v.useState(!0),f=v.useRef(null),[x,h]=v.useState({locations:[{id:1,name:"Main Store",address:"123 Business Street, Nairobi",coordinates:{lat:-1.2921,lng:36.8219},status:"active",employees:12,dailyRevenue:15420,customers:156,type:"store"},{id:2,name:"Westlands Branch",address:"456 Westlands Avenue, Nairobi",coordinates:{lat:-1.2676,lng:36.8108},status:"active",employees:8,dailyRevenue:12300,customers:98,type:"branch"},{id:3,name:"Kisumu Branch",address:"789 Kisumu Road, Kisumu",coordinates:{lat:-.0917,lng:34.768},status:"active",employees:10,dailyRevenue:9800,customers:87,type:"branch"},{id:4,name:"Delivery Hub",address:"321 Industrial Area, Nairobi",coordinates:{lat:-1.3197,lng:36.851},status:"active",employees:5,dailyRevenue:0,customers:0,type:"warehouse"}],deliveries:[{id:1,orderId:"ORD-001",customer:"John Doe",address:"Kilimani, Nairobi",coordinates:{lat:-1.2884,lng:36.7856},status:"in_transit",estimatedTime:"15 mins",driver:"Peter Kamau"},{id:2,orderId:"ORD-002",customer:"Jane Smith",address:"Karen, Nairobi",coordinates:{lat:-1.3197,lng:36.7076},status:"delivered",estimatedTime:"Delivered",driver:"Mary Wanjiku"},{id:3,orderId:"ORD-003",customer:"Bob Johnson",address:"Eastleigh, Nairobi",coordinates:{lat:-1.2921,lng:36.857},status:"pending",estimatedTime:"30 mins",driver:"James Mwangi"}],analytics:{totalLocations:4,activeDeliveries:2,completedToday:15,averageDeliveryTime:"22 mins",coverage:"85%"}}),[p,g]=v.useState(null),[y,b]=v.useState(""),[N,S]=v.useState("locations"),[C,k]=v.useState(!1),[A,G]=v.useState(!1),[F,E]=v.useState(!1),T=async()=>{try{const B=localStorage.getItem("token"),ae=await Ne.get("/locations",{headers:{Authorization:`Bearer ${B}`}});if(ae.data&&Array.isArray(ae.data)){const U=ae.data.map(Z=>({id:Z._id||Z.id,name:Z.name,address:`${Z.address}, ${Z.city||""}`,coordinates:Z.coordinates||{lat:-1.2921,lng:36.8219},status:Z.status||"active",employees:Z.employees||0,dailyRevenue:Z.revenue||0,customers:Z.customers||0,type:Z.type||"branch",phone:Z.phone,manager:Z.manager,operatingHours:Z.operatingHours}));return h(Z=>({...Z,locations:U,analytics:{...Z.analytics,totalLocations:U.length}})),u(!1),U}}catch(B){console.error("Error fetching locations:",B),D.error("Failed to fetch locations from database"),u(!1)}},_=async()=>{try{const B=localStorage.getItem("token"),ae=await Ne.get("/orders?status=in_transit,pending",{headers:{Authorization:`Bearer ${B}`}});if(ae.data&&Array.isArray(ae.data)){const U=ae.data.map(Z=>({id:Z._id||Z.id,orderId:Z.orderNumber||`ORD-${Z.id}`,customer:Z.customerName||Z.customer?.name||"Customer",address:Z.deliveryAddress||Z.address,coordinates:Z.deliveryCoordinates||{lat:-1.2921,lng:36.8219},status:Z.status||"pending",estimatedTime:Z.estimatedDelivery||"30 mins",driver:Z.driver||"Assigned"}));h(Z=>({...Z,deliveries:U,analytics:{...Z.analytics,activeDeliveries:U.filter(de=>de.status==="in_transit").length}}))}}catch(B){console.error("Error fetching deliveries:",B)}};v.useEffect(()=>{if(a&&r&&i)return a.emit("join_maps",{userId:t?._id}),a.on("location_updated",B=>{h(ae=>({...ae,locations:ae.locations.map(U=>U.id===B.id?{...U,...B}:U)})),D.info(`Location "${B.name}" updated`)}),a.on("location_added",B=>{h(ae=>({...ae,locations:[...ae.locations,B],analytics:{...ae.analytics,totalLocations:ae.analytics.totalLocations+1}})),D.success(`New location "${B.name}" added`)}),a.on("delivery_updated",B=>{h(ae=>({...ae,deliveries:ae.deliveries.map(U=>U.id===B.id?{...U,...B}:U)}))}),a.on("delivery_started",B=>{h(ae=>({...ae,deliveries:[...ae.deliveries,B],analytics:{...ae.analytics,activeDeliveries:ae.analytics.activeDeliveries+1}})),D.info(`New delivery started: ${B.orderId}`)}),()=>{a.off("location_updated"),a.off("location_added"),a.off("delivery_updated"),a.off("delivery_started")}},[a,r,i,t]),v.useEffect(()=>{s&&(T(),_())},[s]),v.useEffect(()=>{if(!i&&s)return f.current=setInterval(()=>{T(),_()},3e4),()=>{f.current&&clearInterval(f.current)}},[i,s]);const P=async()=>{k(!0),await Promise.all([T(),_()]),k(!1),D.success("Map data refreshed!")},z=B=>{switch(B){case"active":return"bg-green-500";case"inactive":return"bg-gray-500";case"maintenance":return"bg-yellow-500";case"in_transit":return"bg-blue-500";case"delivered":return"bg-green-500";case"pending":return"bg-orange-500";default:return"bg-gray-500"}},V=B=>{switch(B){case"store":return"";case"branch":return"";case"warehouse":return"";default:return""}},W=x.locations.filter(B=>B.name.toLowerCase().includes(y.toLowerCase())||B.address.toLowerCase().includes(y.toLowerCase())),q=x.deliveries.filter(B=>B.customer.toLowerCase().includes(y.toLowerCase())||B.orderId.toLowerCase().includes(y.toLowerCase()));return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Maps & Locations"}),e.jsxs("p",{className:"text-muted-foreground",children:["Track locations, deliveries, and geographic analytics ",r?e.jsx("span",{className:"text-green-600",children:"  Real-time Connected"}):e.jsx("span",{className:"text-red-600",children:"  Offline Mode"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 border rounded-lg bg-background",children:[e.jsx(_a,{className:`h-4 w-4 ${i?"text-green-500":"text-gray-400"}`}),e.jsx(te,{htmlFor:"realtime-sync",className:"text-sm cursor-pointer",children:"Real-time Sync"}),e.jsx(os,{id:"realtime-sync",checked:i,onCheckedChange:B=>{o(B),D.info(B?"Real-time sync enabled":"Real-time sync disabled")}})]}),e.jsxs(R,{onClick:P,disabled:C||c,variant:"outline",children:[e.jsx(cs,{className:`h-4 w-4 mr-2 ${C?"animate-spin":""}`}),"Refresh"]}),e.jsxs(R,{variant:"outline",onClick:()=>D.info("Full screen mode - Coming soon"),children:[e.jsx(P_,{className:"h-4 w-4 mr-2"}),"Full Screen"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:[e.jsx(K,{children:e.jsxs(Y,{className:"p-4 text-center",children:[e.jsx(Yr,{className:"h-6 w-6 mx-auto mb-2 text-blue-600"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Locations"}),e.jsx("p",{className:"text-2xl font-bold",children:x.analytics.totalLocations})]})}),e.jsx(K,{children:e.jsxs(Y,{className:"p-4 text-center",children:[e.jsx(Eb,{className:"h-6 w-6 mx-auto mb-2 text-green-600"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Active Deliveries"}),e.jsx("p",{className:"text-2xl font-bold",children:x.analytics.activeDeliveries})]})}),e.jsx(K,{children:e.jsxs(Y,{className:"p-4 text-center",children:[e.jsx(Yt,{className:"h-6 w-6 mx-auto mb-2 text-purple-600"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Completed Today"}),e.jsx("p",{className:"text-2xl font-bold",children:x.analytics.completedToday})]})}),e.jsx(K,{children:e.jsxs(Y,{className:"p-4 text-center",children:[e.jsx(ts,{className:"h-6 w-6 mx-auto mb-2 text-orange-600"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Avg Delivery Time"}),e.jsx("p",{className:"text-2xl font-bold",children:x.analytics.averageDeliveryTime})]})}),e.jsx(K,{children:e.jsxs(Y,{className:"p-4 text-center",children:[e.jsx(La,{className:"h-6 w-6 mx-auto mb-2 text-red-600"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Coverage"}),e.jsx("p",{className:"text-2xl font-bold",children:x.analytics.coverage})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsxs(K,{children:[e.jsx(xe,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(pe,{className:"flex items-center gap-2",children:[e.jsx(M_,{className:"h-5 w-5"}),"Interactive Map"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(R,{variant:N==="locations"?"default":"outline",size:"sm",onClick:()=>S("locations"),children:"Locations"}),e.jsx(R,{variant:N==="deliveries"?"default":"outline",size:"sm",onClick:()=>S("deliveries"),children:"Deliveries"})]})]})}),e.jsx(Y,{children:e.jsxs("div",{className:"h-96 bg-gray-100 rounded-lg flex items-center justify-center relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-50 to-green-50"}),e.jsxs("div",{className:"relative z-10 text-center",children:[e.jsx(Yr,{className:"h-12 w-12 mx-auto mb-4 text-blue-600"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Interactive Map View"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:N==="locations"?"Showing business locations":"Showing active deliveries"}),e.jsx(De,{variant:"outline",children:"Map integration ready - Connect your preferred map service"})]}),N==="locations"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"absolute top-20 left-32 w-6 h-6 bg-red-500 rounded-full flex items-center justify-center text-white text-xs font-bold animate-pulse",children:"1"}),e.jsx("div",{className:"absolute top-32 right-40 w-6 h-6 bg-blue-500 rounded-full flex items-center justify-center text-white text-xs font-bold animate-pulse",children:"2"}),e.jsx("div",{className:"absolute bottom-20 left-20 w-6 h-6 bg-green-500 rounded-full flex items-center justify-center text-white text-xs font-bold animate-pulse",children:"3"})]}),N==="deliveries"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"absolute top-24 right-32 w-4 h-4 bg-orange-500 rounded-full animate-bounce"}),e.jsx("div",{className:"absolute bottom-32 left-40 w-4 h-4 bg-green-500 rounded-full"}),e.jsx("div",{className:"absolute top-40 left-24 w-4 h-4 bg-blue-500 rounded-full animate-pulse"})]})]})})]})}),e.jsxs("div",{className:"space-y-6",children:[e.jsx(K,{children:e.jsx(Y,{className:"p-4",children:e.jsxs("div",{className:"relative",children:[e.jsx(oa,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),e.jsx(me,{placeholder:"Search locations or deliveries...",value:y,onChange:B=>b(B.target.value),className:"pl-10"})]})})}),e.jsxs(ja,{defaultValue:"locations",className:"space-y-4",children:[e.jsxs(Sa,{className:"grid w-full grid-cols-2",children:[e.jsx(ft,{value:"locations",children:"Locations"}),e.jsx(ft,{value:"deliveries",children:"Deliveries"})]}),e.jsx(pt,{value:"locations",className:"space-y-4",children:e.jsxs(K,{children:[e.jsxs(xe,{children:[e.jsx(pe,{className:"text-lg",children:"Business Locations"}),e.jsx(ot,{children:"Manage your business locations"})]}),e.jsx(Y,{className:"space-y-4",children:W.map(B=>e.jsx("div",{className:`p-3 border rounded-lg cursor-pointer transition-colors ${p?.id===B.id?"bg-blue-50 border-blue-200":"hover:bg-gray-50"}`,onClick:()=>g(B),children:e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"text-lg",children:V(B.type)}),e.jsx("h4",{className:"font-medium",children:B.name}),e.jsx("div",{className:`w-2 h-2 rounded-full ${z(B.status)}`})]}),e.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:B.address}),e.jsxs("div",{className:"flex items-center gap-4 text-xs",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Zt,{className:"h-3 w-3"}),B.employees]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(ra,{className:"h-3 w-3"}),"KES ",B.dailyRevenue.toLocaleString()]})]})]})})},B.id))})]})}),e.jsx(pt,{value:"deliveries",className:"space-y-4",children:e.jsxs(K,{children:[e.jsxs(xe,{children:[e.jsx(pe,{className:"text-lg",children:"Active Deliveries"}),e.jsx(ot,{children:"Track ongoing deliveries"})]}),e.jsx(Y,{className:"space-y-4",children:q.map(B=>e.jsxs("div",{className:"p-3 border rounded-lg",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:B.orderId}),e.jsx("p",{className:"text-sm text-muted-foreground",children:B.customer})]}),e.jsx(De,{variant:"outline",className:`${z(B.status)} text-white border-none`,children:B.status.replace("_"," ")})]}),e.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:B.address}),e.jsxs("div",{className:"flex items-center justify-between text-xs",children:[e.jsxs("span",{children:["Driver: ",B.driver]}),e.jsx("span",{className:"font-medium",children:B.estimatedTime})]})]},B.id))})]})})]}),e.jsxs(K,{children:[e.jsx(xe,{children:e.jsx(pe,{className:"text-lg",children:"Quick Actions"})}),e.jsxs(Y,{className:"space-y-2",children:[e.jsxs(R,{variant:"outline",className:"w-full justify-start",onClick:()=>window.open("/dashboard/locations","_blank"),children:[e.jsx(Yr,{className:"h-4 w-4 mr-2"}),"Manage Locations"]}),e.jsxs(R,{variant:"outline",className:"w-full justify-start",onClick:()=>D.info("Route planning - Coming soon"),children:[e.jsx(Eb,{className:"h-4 w-4 mr-2"}),"Plan Route"]}),e.jsxs(R,{variant:"outline",className:"w-full justify-start",onClick:()=>S("deliveries"),children:[e.jsx(cg,{className:"h-4 w-4 mr-2"}),"Track Deliveries"]}),e.jsxs(R,{variant:"outline",className:"w-full justify-start",onClick:()=>{G(!A),D.info(A?"Heatmap disabled":"Heatmap enabled")},children:[e.jsx(vi,{className:"h-4 w-4 mr-2"}),A?"Hide":"Show"," Heatmap"]})]})]}),e.jsxs(K,{children:[e.jsx(xe,{children:e.jsx(pe,{className:"text-lg",children:"Map Settings"})}),e.jsxs(Y,{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(te,{htmlFor:"show-routes",className:"text-sm",children:"Show Routes"}),e.jsx(os,{id:"show-routes",checked:F,onCheckedChange:E})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(te,{htmlFor:"show-heatmap",className:"text-sm",children:"Revenue Heatmap"}),e.jsx(os,{id:"show-heatmap",checked:A,onCheckedChange:G})]}),e.jsx(R,{variant:"outline",size:"sm",className:"w-full",onClick:()=>{b(""),S("locations"),G(!1),E(!1),D.success("Map view reset")},children:"Reset View"})]})]}),c?e.jsx(K,{children:e.jsxs(Y,{className:"p-6 text-center",children:[e.jsx(cs,{className:"h-8 w-8 mx-auto mb-2 animate-spin text-primary"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Loading map data..."})]})}):e.jsxs(K,{children:[e.jsx(xe,{children:e.jsxs(pe,{className:"text-lg flex items-center gap-2",children:[e.jsx(F_,{className:"h-4 w-4"}),"Sync Status"]})}),e.jsxs(Y,{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Connection"}),e.jsx(De,{variant:r?"default":"secondary",children:r?" Connected":" Disconnected"})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Real-time"}),e.jsx(De,{variant:i?"default":"outline",children:i?"Enabled":"Disabled"})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Last Updated"}),e.jsx("span",{className:"text-xs",children:new Date().toLocaleTimeString()})]})]})]})]})]})]})},qW=()=>{const{socket:t,connected:s}=ha(),{user:a}=_s(),[r,i]=v.useState([]),[o,c]=v.useState([]),[u,f]=v.useState(!1),[x,h]=v.useState(!1),[p,g]=v.useState(!1),[y,b]=v.useState(null),[N,S]=v.useState(null),[C,k]=v.useState(!1),[A,G]=v.useState(!0),[F,E]=v.useState([]);v.useRef(null);const[T,_]=v.useState({supplier:"",items:[{product:"",quantity:1,unitPrice:0}],expectedDelivery:"",notes:"",priority:"medium"}),[P,z]=v.useState({name:"",contact:"",email:"",address:""}),V=[{id:1,orderNumber:"PO-001",supplier:"ABC Suppliers Ltd",totalAmount:25e3,status:"pending",orderDate:"2024-01-15",expectedDelivery:"2024-01-22",items:[{product:"Office Chairs",quantity:10,unitPrice:2e3},{product:"Desk Lamps",quantity:5,unitPrice:1e3}]},{id:2,orderNumber:"PO-002",supplier:"XYZ Trading Co",totalAmount:18500,status:"approved",orderDate:"2024-01-14",expectedDelivery:"2024-01-20",items:[{product:"Laptops",quantity:3,unitPrice:5500},{product:"Keyboards",quantity:10,unitPrice:250}]},{id:3,orderNumber:"PO-003",supplier:"Tech Solutions Inc",totalAmount:45e3,status:"delivered",orderDate:"2024-01-10",expectedDelivery:"2024-01-18",items:[{product:"Servers",quantity:1,unitPrice:45e3}]}],W=[{id:1,name:"ABC Suppliers Ltd",contact:"+254 700 123 456",email:"info@abcsuppliers.com"},{id:2,name:"XYZ Trading Co",contact:"+254 700 789 012",email:"sales@xyztrading.com"},{id:3,name:"Tech Solutions Inc",contact:"+254 700 345 678",email:"orders@techsolutions.com"}];v.useEffect(()=>{q()},[]);const q=async()=>{G(!0);try{const O=localStorage.getItem("token"),[J,ie]=await Promise.allSettled([Ne.get("/purchasing/orders",{headers:{Authorization:`Bearer ${O}`}}),Ne.get("/purchasing/suppliers",{headers:{Authorization:`Bearer ${O}`}})]);J.status==="fulfilled"&&J.value?.data?i(J.value.data):i(V),ie.status==="fulfilled"&&ie.value?.data?c(ie.value.data):c(W),G(!1)}catch(O){console.error("Error fetching purchase data:",O),D.error("Error loading purchase data"),i(V),c(W),G(!1)}};v.useEffect(()=>{if(t&&s)return t.emit("join_purchasing",{userId:a?._id}),t.on("purchase_order_updated",O=>{i(J=>J.map(ie=>ie.id===O.id?{...ie,...O}:ie)),D.info(`Purchase order ${O.orderNumber}: ${O.status}`),E(J=>[{id:Date.now(),type:"order_update",message:`PO ${O.orderNumber} status changed to ${O.status}`,timestamp:new Date},...J])}),t.on("delivery_status_updated",O=>{i(J=>J.map(ie=>ie.id===O.orderId?{...ie,deliveryStatus:O.status}:ie)),D.success(`Delivery update: ${O.status}`)}),t.on("payment_processed",O=>{i(J=>J.map(ie=>ie.id===O.orderId?{...ie,paymentStatus:O.status}:ie)),D.success(`Payment ${O.status} for ${O.orderNumber}`),E(J=>[{id:Date.now(),type:"payment",message:`Payment ${O.status} - ${O.amount}`,timestamp:new Date},...J])}),()=>{t.off("purchase_order_updated"),t.off("delivery_status_updated"),t.off("payment_processed")}},[t,s,a]);const B=async()=>{k(!0),await q(),k(!1),D.success("Purchase data refreshed!")},ae=async()=>{if(!T.supplier||T.items.length===0){D.error("Please fill in all required fields");return}try{const O=T.items.reduce((ie,be)=>ie+be.quantity*be.unitPrice,0),J={...T,orderNumber:`PO-${String(r.length+1).padStart(3,"0")}`,totalAmount:O,status:"pending",orderDate:new Date().toISOString().split("T")[0]};i([J,...r]),f(!1),_({supplier:"",items:[{product:"",quantity:1,unitPrice:0}],expectedDelivery:"",notes:"",priority:"medium"}),D.success("Purchase order created successfully!")}catch(O){console.error("Error creating purchase order:",O),D.error("Error creating purchase order")}},U=()=>{_({...T,items:[...T.items,{product:"",quantity:1,unitPrice:0}]})},Z=O=>{const J=T.items.filter((ie,be)=>be!==O);_({...T,items:J})},de=(O,J,ie)=>{const be=T.items.map((Le,ve)=>ve===O?{...Le,[J]:ie}:Le);_({...T,items:be})},H=O=>{const J={pending:{variant:"outline",color:"text-yellow-600",icon:ts},approved:{variant:"outline",color:"text-blue-600",icon:us},delivered:{variant:"outline",color:"text-green-600",icon:Yt},cancelled:{variant:"outline",color:"text-red-600",icon:ks}},ie=J[O]||J.pending,be=ie.icon;return e.jsxs(De,{variant:ie.variant,className:ie.color,children:[e.jsx(be,{className:"h-3 w-3 mr-1"}),O.charAt(0).toUpperCase()+O.slice(1)]})},se=O=>new Intl.NumberFormat("en-KE",{style:"currency",currency:"KES"}).format(O),ee=r.filter(O=>O.status==="pending").length,L=r.filter(O=>O.status==="approved").length,X=r.reduce((O,J)=>O+J.totalAmount,0);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Purchasing"}),e.jsxs("p",{className:"text-muted-foreground",children:["Manage purchase orders and supplier relationships ",s?e.jsx("span",{className:"text-green-600",children:"  Real-time Connected"}):e.jsx("span",{className:"text-red-600",children:"  Offline Mode"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(R,{onClick:B,disabled:C||A,variant:"outline",children:[e.jsx(cs,{className:`h-4 w-4 mr-2 ${C?"animate-spin":""}`}),"Refresh"]}),e.jsxs(Bt,{open:u,onOpenChange:f,children:[e.jsx(wa,{asChild:!0,children:e.jsxs(R,{className:"bg-green-500 hover:bg-green-400",children:[e.jsx(Gs,{className:"h-4 w-4 mr-2"}),"New Purchase Order"]})}),e.jsxs(zt,{className:"max-w-4xl max-h-[80vh] overflow-y-auto",children:[e.jsxs(Ut,{children:[e.jsx(Vt,{children:"Create Purchase Order"}),e.jsx(es,{children:"Create a new purchase order for your suppliers"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(te,{children:"Supplier *"}),e.jsxs(Mt,{value:T.supplier,onValueChange:O=>_({...T,supplier:O}),children:[e.jsx(Lt,{children:e.jsx(Ft,{placeholder:"Select supplier"})}),e.jsx(It,{children:o.map(O=>e.jsx(Ae,{value:O.name,children:O.name},O.id))})]})]}),e.jsxs("div",{children:[e.jsx(te,{children:"Expected Delivery"}),e.jsx(me,{type:"date",value:T.expectedDelivery,onChange:O=>_({...T,expectedDelivery:O.target.value})})]})]}),e.jsxs("div",{children:[e.jsx(te,{children:"Priority"}),e.jsxs(Mt,{value:T.priority,onValueChange:O=>_({...T,priority:O}),children:[e.jsx(Lt,{children:e.jsx(Ft,{})}),e.jsxs(It,{children:[e.jsx(Ae,{value:"low",children:"Low"}),e.jsx(Ae,{value:"medium",children:"Medium"}),e.jsx(Ae,{value:"high",children:"High"}),e.jsx(Ae,{value:"urgent",children:"Urgent"})]})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx(te,{children:"Items *"}),e.jsxs(R,{type:"button",variant:"outline",size:"sm",onClick:U,children:[e.jsx(Gs,{className:"h-4 w-4 mr-1"}),"Add Item"]})]}),e.jsx("div",{className:"space-y-2",children:T.items.map((O,J)=>e.jsxs("div",{className:"grid grid-cols-12 gap-2 items-end",children:[e.jsx("div",{className:"col-span-5",children:e.jsx(me,{placeholder:"Product name",value:O.product,onChange:ie=>de(J,"product",ie.target.value)})}),e.jsx("div",{className:"col-span-2",children:e.jsx(me,{type:"number",placeholder:"Qty",value:O.quantity,onChange:ie=>de(J,"quantity",parseInt(ie.target.value)||1)})}),e.jsx("div",{className:"col-span-3",children:e.jsx(me,{type:"number",placeholder:"Unit price",value:O.unitPrice,onChange:ie=>de(J,"unitPrice",parseFloat(ie.target.value)||0)})}),e.jsx("div",{className:"col-span-1",children:e.jsx("p",{className:"text-sm font-medium",children:se(O.quantity*O.unitPrice)})}),e.jsx("div",{className:"col-span-1",children:T.items.length>1&&e.jsx(R,{type:"button",variant:"outline",size:"sm",onClick:()=>Z(J),children:e.jsx(ga,{className:"h-4 w-4"})})})]},J))}),e.jsx("div",{className:"text-right mt-2",children:e.jsxs("p",{className:"text-lg font-semibold",children:["Total: ",se(T.items.reduce((O,J)=>O+J.quantity*J.unitPrice,0))]})})]}),e.jsxs("div",{children:[e.jsx(te,{children:"Notes"}),e.jsx(As,{placeholder:"Additional notes or requirements",value:T.notes,onChange:O=>_({...T,notes:O.target.value})})]})]}),e.jsxs(Ps,{children:[e.jsx(R,{variant:"outline",onClick:()=>f(!1),children:"Cancel"}),e.jsx(R,{onClick:ae,children:"Create Purchase Order"})]})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsx(K,{children:e.jsx(Y,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Total Orders"}),e.jsx("p",{className:"text-2xl font-bold",children:r.length})]}),e.jsx(ws,{className:"h-8 w-8 text-blue-600"})]})})}),e.jsx(K,{children:e.jsx(Y,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Pending Orders"}),e.jsx("p",{className:"text-2xl font-bold",children:ee})]}),e.jsx(ts,{className:"h-8 w-8 text-yellow-600"})]})})}),e.jsx(K,{children:e.jsx(Y,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Approved Orders"}),e.jsx("p",{className:"text-2xl font-bold",children:L})]}),e.jsx(us,{className:"h-8 w-8 text-green-600"})]})})}),e.jsx(K,{children:e.jsx(Y,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Total Value"}),e.jsx("p",{className:"text-2xl font-bold",children:se(X)})]}),e.jsx(ra,{className:"h-8 w-8 text-purple-600"})]})})})]}),e.jsxs(ja,{defaultValue:"orders",className:"space-y-6",children:[e.jsxs(Sa,{className:"grid w-full grid-cols-3",children:[e.jsx(ft,{value:"orders",children:"Purchase Orders"}),e.jsx(ft,{value:"suppliers",children:"Suppliers"}),e.jsx(ft,{value:"activity",children:"Activity & Payments"})]}),e.jsx(pt,{value:"orders",children:e.jsxs(K,{children:[e.jsxs(xe,{children:[e.jsx(pe,{children:"Purchase Orders"}),e.jsx(ot,{children:"Manage and track all purchase orders"})]}),e.jsx(Y,{children:e.jsxs(Xn,{children:[e.jsx(Qn,{children:e.jsxs(xa,{children:[e.jsx(St,{children:"Order Number"}),e.jsx(St,{children:"Supplier"}),e.jsx(St,{children:"Order Date"}),e.jsx(St,{children:"Expected Delivery"}),e.jsx(St,{children:"Total Amount"}),e.jsx(St,{children:"Status"}),e.jsx(St,{children:"Actions"})]})}),e.jsx(Zn,{children:r.map(O=>e.jsxs(xa,{children:[e.jsx(Nt,{className:"font-medium",children:O.orderNumber}),e.jsx(Nt,{children:O.supplier}),e.jsx(Nt,{children:new Date(O.orderDate).toLocaleDateString()}),e.jsx(Nt,{children:new Date(O.expectedDelivery).toLocaleDateString()}),e.jsx(Nt,{children:se(O.totalAmount)}),e.jsx(Nt,{children:H(O.status)}),e.jsx(Nt,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(R,{variant:"outline",size:"sm",onClick:()=>{b(O),h(!0)},children:e.jsx(ca,{className:"h-4 w-4"})}),e.jsx(R,{variant:"outline",size:"sm",children:e.jsx(Yi,{className:"h-4 w-4"})})]})})]},O.id))})]})})]})}),e.jsx(pt,{value:"suppliers",children:e.jsxs(K,{children:[e.jsx(xe,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(pe,{children:"Suppliers"}),e.jsx(ot,{children:"Manage supplier contacts and information"})]}),e.jsxs(R,{onClick:()=>g(!0),children:[e.jsx(Gs,{className:"h-4 w-4 mr-2"}),"Add Supplier"]})]})}),e.jsx(Y,{children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:o.map(O=>e.jsxs(K,{className:"hover:shadow-md transition-shadow",children:[e.jsx(xe,{children:e.jsxs(pe,{className:"text-lg flex items-center gap-2",children:[e.jsx(qc,{className:"h-5 w-5 text-blue-600"}),O.name]})}),e.jsxs(Y,{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(Ws,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{children:O.contact})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(Ks,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"truncate",children:O.email})]}),e.jsxs("div",{className:"flex gap-2 mt-4",children:[e.jsxs(R,{variant:"outline",size:"sm",className:"flex-1",onClick:()=>{window.location.href=`tel:${O.contact}`,D.info(`Calling ${O.name}...`)},children:[e.jsx(Ws,{className:"h-4 w-4 mr-1"}),"Call"]}),e.jsxs(R,{variant:"outline",size:"sm",className:"flex-1",onClick:()=>{window.location.href=`mailto:${O.email}`,D.info(`Opening email to ${O.name}...`)},children:[e.jsx(Ks,{className:"h-4 w-4 mr-1"}),"Email"]})]})]})]},O.id))})})]})}),e.jsx(pt,{value:"activity",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(K,{children:[e.jsxs(xe,{children:[e.jsxs(pe,{className:"flex items-center gap-2",children:[e.jsx(La,{className:"h-5 w-5"}),"Recent Activity"]}),e.jsx(ot,{children:"Track purchasing activities in real-time"})]}),e.jsx(Y,{children:e.jsx("div",{className:"space-y-4",children:F.length>0?F.slice(0,10).map(O=>e.jsxs("div",{className:"flex items-start gap-3 pb-3 border-b last:border-0",children:[e.jsx("div",{className:`mt-1 rounded-full p-2 ${O.type==="payment"?"bg-green-100":O.type==="order_update"?"bg-blue-100":"bg-gray-100"}`,children:O.type==="payment"?e.jsx(pa,{className:"h-4 w-4 text-green-600"}):e.jsx(ba,{className:"h-4 w-4 text-blue-600"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium",children:O.message}),e.jsx("p",{className:"text-xs text-muted-foreground",children:new Date(O.timestamp).toLocaleString()})]})]},O.id)):e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(La,{className:"h-12 w-12 mx-auto mb-2 opacity-20"}),e.jsx("p",{children:"No recent activities"})]})})})]}),e.jsxs(K,{children:[e.jsxs(xe,{children:[e.jsxs(pe,{className:"flex items-center gap-2",children:[e.jsx(pa,{className:"h-5 w-5"}),"Payment Tracking"]}),e.jsx(ot,{children:"Monitor payment status for purchase orders"})]}),e.jsx(Y,{children:e.jsx("div",{className:"space-y-4",children:r.filter(O=>O.status!=="cancelled").map(O=>e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-sm",children:O.orderNumber}),e.jsx("p",{className:"text-xs text-muted-foreground",children:O.supplier})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"font-semibold text-sm",children:se(O.totalAmount)}),e.jsx(De,{variant:O.paymentStatus==="paid"?"default":O.paymentStatus==="pending"?"secondary":"outline",className:"text-xs",children:O.paymentStatus||"Pending"})]})]},O.id))})})]}),e.jsxs(K,{className:"lg:col-span-2",children:[e.jsxs(xe,{children:[e.jsxs(pe,{className:"flex items-center gap-2",children:[e.jsx(Kc,{className:"h-5 w-5"}),"Delivery Status"]}),e.jsx(ot,{children:"Track delivery status after purchase orders"})]}),e.jsx(Y,{children:e.jsxs(Xn,{children:[e.jsx(Qn,{children:e.jsxs(xa,{children:[e.jsx(St,{children:"Order Number"}),e.jsx(St,{children:"Supplier"}),e.jsx(St,{children:"Expected Delivery"}),e.jsx(St,{children:"Delivery Status"}),e.jsx(St,{children:"Payment Status"})]})}),e.jsx(Zn,{children:r.filter(O=>O.status==="approved"||O.status==="delivered").map(O=>e.jsxs(xa,{children:[e.jsx(Nt,{className:"font-medium",children:O.orderNumber}),e.jsx(Nt,{children:O.supplier}),e.jsx(Nt,{children:new Date(O.expectedDelivery).toLocaleDateString()}),e.jsx(Nt,{children:e.jsx(De,{variant:O.status==="delivered"?"default":"secondary",children:O.deliveryStatus||O.status})}),e.jsx(Nt,{children:e.jsx(De,{variant:O.paymentStatus==="paid"?"default":"outline",children:O.paymentStatus||"Pending"})})]},O.id))})]})})]})]})})]}),e.jsx(Bt,{open:x,onOpenChange:h,children:e.jsxs(zt,{className:"max-w-2xl",children:[e.jsxs(Ut,{children:[e.jsx(Vt,{children:"Purchase Order Details"}),e.jsxs(es,{children:[y?.orderNumber," - ",y?.supplier]})]}),y&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(te,{children:"Order Date"}),e.jsx("p",{className:"text-sm",children:new Date(y.orderDate).toLocaleDateString()})]}),e.jsxs("div",{children:[e.jsx(te,{children:"Expected Delivery"}),e.jsx("p",{className:"text-sm",children:new Date(y.expectedDelivery).toLocaleDateString()})]}),e.jsxs("div",{children:[e.jsx(te,{children:"Status"}),e.jsx("div",{className:"mt-1",children:H(y.status)})]}),e.jsxs("div",{children:[e.jsx(te,{children:"Total Amount"}),e.jsx("p",{className:"text-sm font-semibold",children:se(y.totalAmount)})]})]}),e.jsxs("div",{children:[e.jsx(te,{children:"Items"}),e.jsxs(Xn,{children:[e.jsx(Qn,{children:e.jsxs(xa,{children:[e.jsx(St,{children:"Product"}),e.jsx(St,{children:"Quantity"}),e.jsx(St,{children:"Unit Price"}),e.jsx(St,{children:"Total"})]})}),e.jsx(Zn,{children:y.items.map((O,J)=>e.jsxs(xa,{children:[e.jsx(Nt,{children:O.product}),e.jsx(Nt,{children:O.quantity}),e.jsx(Nt,{children:se(O.unitPrice)}),e.jsx(Nt,{children:se(O.quantity*O.unitPrice)})]},J))})]})]})]}),e.jsx(Ps,{children:e.jsx(R,{variant:"outline",onClick:()=>h(!1),children:"Close"})})]})}),e.jsx(Bt,{open:p,onOpenChange:g,children:e.jsxs(zt,{className:"max-w-md",children:[e.jsxs(Ut,{children:[e.jsx(Vt,{children:"Add New Supplier"}),e.jsx(es,{children:"Add a new supplier contact to your database"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(te,{children:"Supplier Name *"}),e.jsx(me,{placeholder:"e.g., ABC Suppliers Ltd",value:P.name,onChange:O=>z({...P,name:O.target.value})})]}),e.jsxs("div",{children:[e.jsx(te,{children:"Contact Number *"}),e.jsx(me,{placeholder:"e.g., +254 700 123 456",value:P.contact,onChange:O=>z({...P,contact:O.target.value})})]}),e.jsxs("div",{children:[e.jsx(te,{children:"Email Address *"}),e.jsx(me,{type:"email",placeholder:"e.g., info@supplier.com",value:P.email,onChange:O=>z({...P,email:O.target.value})})]}),e.jsxs("div",{children:[e.jsx(te,{children:"Address (Optional)"}),e.jsx(As,{placeholder:"Business address",value:P.address,onChange:O=>z({...P,address:O.target.value})})]})]}),e.jsxs(Ps,{children:[e.jsx(R,{variant:"outline",onClick:()=>{g(!1),z({name:"",contact:"",email:"",address:""})},children:"Cancel"}),e.jsx(R,{onClick:async()=>{if(!P.name||!P.contact||!P.email){D.error("Please fill in all required fields");return}try{const O=localStorage.getItem("token"),J=await Ne.post("/purchasing/suppliers",P,{headers:{Authorization:`Bearer ${O}`}});c(ie=>[...ie,J.data]),g(!1),z({name:"",contact:"",email:"",address:""}),D.success("Supplier added successfully!")}catch(O){console.error("Error adding supplier:",O),D.error("Failed to add supplier")}},children:"Add Supplier"})]})]})})]})};function lA({date:t,setDate:s,className:a,...r}){const[i,o]=v.useState(!1),c=p=>p?p.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"",u=()=>t?t.from&&t.to?`${c(t.from)} - ${c(t.to)}`:t.from?`${c(t.from)} - ...`:"Pick a date range":"Pick a date range",f=(p,g)=>{const y={...t};y[p]=new Date(g),y.from&&y.to&&y.from>y.to&&(p==="from"?y.to=y.from:y.from=y.to),s(y)},x=p=>p?p.toISOString().split("T")[0]:"",h=[{label:"Last 7 days",range:{from:new Date(Date.now()-10080*60*1e3),to:new Date}},{label:"Last 30 days",range:{from:new Date(Date.now()-720*60*60*1e3),to:new Date}},{label:"Last 90 days",range:{from:new Date(Date.now()-2160*60*60*1e3),to:new Date}},{label:"This month",range:{from:new Date(new Date().getFullYear(),new Date().getMonth(),1),to:new Date}}];return e.jsxs("div",{className:Ze("relative",a),...r,children:[e.jsxs(R,{variant:"outline",className:Ze("w-full justify-start text-left font-normal",!t&&"text-muted-foreground"),onClick:()=>o(!i),children:[e.jsx(gs,{className:"mr-2 h-4 w-4"}),u(),e.jsx(Mf,{className:"ml-auto h-4 w-4"})]}),i&&e.jsxs("div",{className:"absolute top-full left-0 z-50 mt-1 w-full min-w-[300px] rounded-md border bg-white p-4 shadow-lg dark:bg-gray-800",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("h4",{className:"text-sm font-medium mb-2",children:"Quick Select"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:h.map(p=>e.jsx(R,{variant:"outline",size:"sm",className:"text-xs",onClick:()=>{s(p.range),o(!1)},children:p.label},p.label))})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-1 block",children:"From Date"}),e.jsx("input",{type:"date",value:x(t?.from),onChange:p=>f("from",p.target.value),className:"w-full px-3 py-2 border rounded-md text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-1 block",children:"To Date"}),e.jsx("input",{type:"date",value:x(t?.to),onChange:p=>f("to",p.target.value),className:"w-full px-3 py-2 border rounded-md text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600"})]})]}),e.jsxs("div",{className:"flex justify-between mt-4 pt-3 border-t",children:[e.jsx(R,{variant:"outline",size:"sm",onClick:()=>{s(null),o(!1)},children:"Clear"}),e.jsx(R,{size:"sm",onClick:()=>o(!1),children:"Done"})]})]}),i&&e.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>o(!1)})]})}const gu=({userId:t=null,showFilters:s=!0,limit:a=20})=>{const{user:r}=_s(),[i,o]=v.useState([]),[c,u]=v.useState(!0),[f,x]=v.useState({currentPage:1,totalPages:1,totalCount:0,hasNext:!1,hasPrev:!1}),[h,p]=v.useState({category:"all",action:"all",search:"",dateRange:null,page:1}),[g,y]=v.useState({summary:{totalActivities:0,successRate:100,timeframe:"30d",categoriesBreakdown:[]},trends:[],highRiskActivities:[]});v.useEffect(()=>{b(),N()},[h,t]);const b=async()=>{try{u(!0);const _=new URLSearchParams;h.category&&h.category!=="all"&&_.append("category",h.category),h.action&&h.action!=="all"&&_.append("action",h.action),h.search&&_.append("search",h.search),h.dateRange?.from&&_.append("startDate",h.dateRange.from.toISOString()),h.dateRange?.to&&_.append("endDate",h.dateRange.to.toISOString()),_.append("page",h.page.toString()),_.append("limit",a.toString());const P=await Ne.get(`/activities/history?${_}`);o(P.data.activities),x(P.data.pagination)}catch(_){console.error("Error fetching activities:",_),D.error("Failed to load activity history")}finally{u(!1)}},N=async()=>{try{const _=await Ne.get("/activities/stats?timeframe=30d");y(_.data)}catch(_){console.error("Error fetching activity stats:",_)}},S=(_,P)=>{p(z=>({...z,[_]:P,page:1}))},C=_=>{p(P=>({...P,page:_}))},k=async()=>{try{const _={format:"json",startDate:h.dateRange?.from?.toISOString(),endDate:h.dateRange?.to?.toISOString(),categories:h.category?[h.category]:[],includeMetadata:!1},P=await Ne.post("/activities/export",_),z=new Blob([JSON.stringify(P.data,null,2)],{type:"application/json"}),V=window.URL.createObjectURL(z),W=document.createElement("a");W.href=V,W.download=`activity-history-${Date.now()}.json`,document.body.appendChild(W),W.click(),window.URL.revokeObjectURL(V),document.body.removeChild(W),D.success("Activity history exported successfully")}catch(_){console.error("Error exporting activities:",_),D.error("Failed to export activity history")}},A=(_,P)=>{switch(_){case"authentication":return e.jsx(la,{className:"h-4 w-4"});case"orders":return e.jsx(ws,{className:"h-4 w-4"});case"services":return e.jsx(ba,{className:"h-4 w-4"});case"financial":return e.jsx(ra,{className:"h-4 w-4"});case"admin":return e.jsx(Wa,{className:"h-4 w-4"});case"system":return e.jsx(ca,{className:"h-4 w-4"});default:return e.jsx(ts,{className:"h-4 w-4"})}},G=(_,P)=>{if(!P)return"text-red-600 bg-red-50";switch(_){case"authentication":return"text-blue-600 bg-blue-50";case"orders":return"text-green-600 bg-green-50";case"services":return"text-purple-600 bg-purple-50";case"financial":return"text-yellow-600 bg-yellow-50";case"admin":return"text-red-600 bg-red-50";case"system":return"text-gray-600 bg-gray-50";default:return"text-gray-600 bg-gray-50"}},F=_=>{const P={low:"bg-green-100 text-green-800",medium:"bg-yellow-100 text-yellow-800",high:"bg-orange-100 text-orange-800",critical:"bg-red-100 text-red-800"};return e.jsx(De,{className:`${P[_]||P.low} text-xs`,children:_})},E=_=>new Date(_).toLocaleString(),T=[{value:"all",label:"All Categories"},{value:"authentication",label:"Authentication"},{value:"orders",label:"Orders"},{value:"services",label:"Services"},{value:"financial",label:"Financial"},{value:"admin",label:"Admin"},{value:"system",label:"System"}];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(K,{children:e.jsx(Y,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Activities"}),e.jsx("p",{className:"text-2xl font-bold",children:g.summary.totalActivities})]}),e.jsx(ts,{className:"h-8 w-8 text-blue-600"})]})})}),e.jsx(K,{children:e.jsx(Y,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Success Rate"}),e.jsxs("p",{className:"text-2xl font-bold text-green-600",children:[g.summary.successRate,"%"]})]}),e.jsx(us,{className:"h-8 w-8 text-green-600"})]})})}),e.jsx(K,{children:e.jsx(Y,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"High Risk Events"}),e.jsx("p",{className:"text-2xl font-bold text-orange-600",children:g.highRiskActivities.length})]}),e.jsx(Fr,{className:"h-8 w-8 text-orange-600"})]})})})]}),s&&e.jsxs(K,{children:[e.jsx(xe,{children:e.jsxs(pe,{className:"flex items-center gap-2",children:[e.jsx(tl,{className:"h-5 w-5"}),"Filters"]})}),e.jsx(Y,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Category"}),e.jsxs(Mt,{value:h.category,onValueChange:_=>S("category",_),children:[e.jsx(Lt,{children:e.jsx(Ft,{placeholder:"Select category"})}),e.jsx(It,{children:T.map(_=>e.jsx(Ae,{value:_.value,children:_.label},_.value))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Search"}),e.jsxs("div",{className:"relative",children:[e.jsx(oa,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(me,{placeholder:"Search activities...",value:h.search,onChange:_=>S("search",_.target.value),className:"pl-10"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Date Range"}),e.jsx(lA,{date:h.dateRange,setDate:_=>S("dateRange",_)})]}),e.jsx("div",{className:"flex items-end",children:e.jsxs(R,{onClick:k,variant:"outline",className:"w-full",children:[e.jsx(Ma,{className:"h-4 w-4 mr-2"}),"Export"]})})]})})]}),e.jsxs(K,{children:[e.jsx(xe,{children:e.jsx(pe,{children:"Activity History"})}),e.jsxs(Y,{children:[c?e.jsx("div",{className:"flex items-center justify-center h-32",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900"})}):i.length===0?e.jsx("div",{className:"text-center py-8 text-gray-500",children:"No activities found for the selected criteria."}):e.jsx("div",{className:"space-y-4",children:i.map(_=>e.jsxs("div",{className:"flex items-start space-x-4 p-4 border rounded-lg hover:bg-gray-50",children:[e.jsx("div",{className:`p-2 rounded-full ${G(_.category,_.metadata?.success)}`,children:A(_.category,_.action)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:_.description}),e.jsxs("div",{className:"flex items-center space-x-2",children:[F(_.riskLevel),_.metadata?.success===!1&&e.jsx(Sr,{className:"h-4 w-4 text-red-600"})]})]}),e.jsxs("div",{className:"mt-1 flex items-center space-x-4 text-xs text-gray-500",children:[e.jsxs("span",{className:"flex items-center",children:[e.jsx(gs,{className:"h-3 w-3 mr-1"}),E(_.timestamp)]}),e.jsx(De,{variant:"outline",className:"text-xs",children:_.category}),e.jsx(De,{variant:"outline",className:"text-xs",children:_.action}),_.metadata?.ipAddress&&e.jsxs("span",{children:["IP: ",_.metadata.ipAddress]})]})]})]},_._id))}),f.totalPages>1&&e.jsxs("div",{className:"flex items-center justify-between mt-6",children:[e.jsxs("div",{className:"text-sm text-gray-500",children:["Showing ",(f.currentPage-1)*a+1," to ",Math.min(f.currentPage*a,f.totalCount)," of ",f.totalCount," activities"]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(R,{variant:"outline",size:"sm",onClick:()=>C(f.currentPage-1),disabled:!f.hasPrev,children:"Previous"}),e.jsx(R,{variant:"outline",size:"sm",onClick:()=>C(f.currentPage+1),disabled:!f.hasNext,children:"Next"})]})]})]})]})]})},KW=()=>{const{user:t,isAuthenticated:s}=_s(),a=Ka(),[r,i]=v.useState(!1),[o,c]=v.useState(!0),[u,f]=v.useState(!1),[x,h]=v.useState(null),[p,g]=v.useState([{title:"Total Activities",value:"0",change:"0%",trend:"up",icon:La,description:"from last month"},{title:"User Actions",value:"0",change:"0%",trend:"up",icon:Zt,description:"from last month"},{title:"System Events",value:"0",change:"0%",trend:"up",icon:Wa,description:"from last month"},{title:"Critical Events",value:"0",change:"0%",trend:"down",icon:ba,description:"from last month"}]),y=v.useCallback(async(A=!1)=>{if(s)try{A?(f(!0),D.info("Refreshing activity data...")):c(!0),h(null);const F={Authorization:`Bearer ${localStorage.getItem("token")}`},[E,T,_,P]=await Promise.all([Ne.get("/orders",{headers:F}).catch(()=>({data:[]})),Ne.get("/invoices",{headers:F}).catch(()=>({data:[]})),Ne.get("/expenses",{headers:F}).catch(()=>({data:[]})),Ne.get("/transactions",{headers:F}).catch(()=>({data:[]}))]),z=Array.isArray(E.data)?E.data:[],V=Array.isArray(T.data)?T.data:[],W=Array.isArray(_.data)?_.data:[],q=Array.isArray(P.data)?P.data:[];console.log(" Fetched data:",{orders:z.length,invoices:V.length,expenses:W.length,transactions:q.length});const B=new Date,ae=new Date(B.getFullYear(),B.getMonth()-1,1),U=new Date(B.getFullYear(),B.getMonth(),1),Z=(z?.filter(ve=>ve.createdAt&&new Date(ve.createdAt)>=U)||[]).length+(V?.filter(ve=>ve.createdAt&&new Date(ve.createdAt)>=U)||[]).length+(W?.filter(ve=>ve.createdAt&&new Date(ve.createdAt)>=U)||[]).length+(q?.filter(ve=>ve.createdAt&&new Date(ve.createdAt)>=U)||[]).length,de=(z?.filter(ve=>ve.createdAt&&new Date(ve.createdAt)>=ae&&new Date(ve.createdAt)<U)||[]).length+(V?.filter(ve=>ve.createdAt&&new Date(ve.createdAt)>=ae&&new Date(ve.createdAt)<U)||[]).length+(W?.filter(ve=>ve.createdAt&&new Date(ve.createdAt)>=ae&&new Date(ve.createdAt)<U)||[]).length+(q?.filter(ve=>ve.createdAt&&new Date(ve.createdAt)>=ae&&new Date(ve.createdAt)<U)||[]).length,H=de>0?((Z-de)/de*100).toFixed(1):0,se=(z?.filter(ve=>ve.createdAt&&new Date(ve.createdAt)>=U)||[]).length+(V?.filter(ve=>ve.createdAt&&new Date(ve.createdAt)>=U)||[]).length,ee=(z?.filter(ve=>ve.createdAt&&new Date(ve.createdAt)>=ae&&new Date(ve.createdAt)<U)||[]).length+(V?.filter(ve=>ve.createdAt&&new Date(ve.createdAt)>=ae&&new Date(ve.createdAt)<U)||[]).length,L=ee>0?((se-ee)/ee*100).toFixed(1):0,X=(q?.filter(ve=>ve.createdAt&&new Date(ve.createdAt)>=U)||[]).length+(W?.filter(ve=>ve.createdAt&&new Date(ve.createdAt)>=U)||[]).length,O=(q?.filter(ve=>ve.createdAt&&new Date(ve.createdAt)>=ae&&new Date(ve.createdAt)<U)||[]).length+(W?.filter(ve=>ve.createdAt&&new Date(ve.createdAt)>=ae&&new Date(ve.createdAt)<U)||[]).length,J=O>0?((X-O)/O*100).toFixed(1):0,ie=(q?.filter(ve=>ve.createdAt&&new Date(ve.createdAt)>=U&&(ve.status==="failed"||ve.status==="error"))||[]).length+(V?.filter(ve=>ve.createdAt&&new Date(ve.createdAt)>=U&&ve.paymentStatus==="overdue")||[]).length,be=(q?.filter(ve=>ve.createdAt&&new Date(ve.createdAt)>=ae&&new Date(ve.createdAt)<U&&(ve.status==="failed"||ve.status==="error"))||[]).length+(V?.filter(ve=>ve.createdAt&&new Date(ve.createdAt)>=ae&&new Date(ve.createdAt)<U&&ve.paymentStatus==="overdue")||[]).length,Le=be>0?((ie-be)/be*100).toFixed(1):0;g([{title:"Total Activities",value:Z.toLocaleString(),change:`${H>=0?"+":""}${H}%`,trend:H>=0?"up":"down",icon:La,description:"from last month"},{title:"User Actions",value:se.toLocaleString(),change:`${L>=0?"+":""}${L}%`,trend:L>=0?"up":"down",icon:Zt,description:"from last month"},{title:"System Events",value:X.toLocaleString(),change:`${J>=0?"+":""}${J}%`,trend:J>=0?"up":"down",icon:Wa,description:"from last month"},{title:"Critical Events",value:ie.toLocaleString(),change:`${Le>=0?"+":""}${Le}%`,trend:Le>=0?"up":"down",icon:ba,description:"from last month"}]),console.log(" Activity stats loaded:",{total:Z,user:se,system:X,critical:ie}),A&&D.success("Activity data refreshed!")}catch(G){console.error(" Error fetching activity stats:",G),h(G.message||"Failed to load activity data"),A&&D.error("Failed to refresh activity data")}finally{c(!1),f(!1)}},[s]);v.useEffect(()=>{if(s){y();const A=setInterval(()=>y(),18e4);return()=>clearInterval(A)}},[s,y]);const b=async()=>{try{i(!0);const A=await fetch("/api/activities/export?format=csv",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(A.ok){const G=await A.blob(),F=window.URL.createObjectURL(G),E=document.createElement("a");E.href=F,E.download=`activity-history-${Date.now()}.csv`,document.body.appendChild(E),E.click(),window.URL.revokeObjectURL(F),document.body.removeChild(E),D.success("History exported successfully!")}else throw new Error("Export failed")}catch{D.error("Failed to export history. Please try again.")}finally{i(!1)}},N=()=>{D.info("Opening schedule settings..."),a("/dashboard/reports")},S=()=>{D.info("Opening alert configuration..."),a("/dashboard/settings")},C=()=>{D.info("Archive feature coming soon!")},k=()=>{y(!0)};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold text-foreground flex items-center gap-2",children:[e.jsx(Al,{className:"h-8 w-8 text-green-600"}),"Activity History"]}),e.jsx("p",{className:"text-muted-foreground",children:"Comprehensive tracking of all system activities and user actions"})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs(R,{variant:"outline",onClick:k,disabled:u,children:[e.jsx(cs,{className:`mr-2 h-4 w-4 ${u?"animate-spin":""}`}),"Refresh"]}),e.jsxs(R,{variant:"outline",onClick:b,disabled:r,children:[e.jsx(Ma,{className:"mr-2 h-4 w-4"}),r?"Exporting...":"Export History"]}),e.jsxs(R,{onClick:()=>{D.info("Advanced filters feature coming soon!")},children:[e.jsx(tl,{className:"mr-2 h-4 w-4"}),"Advanced Filters"]})]})]}),x?e.jsx(K,{className:"border-red-200 bg-red-50",children:e.jsx(Y,{className:"flex items-center justify-center py-12",children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx(ks,{className:"h-12 w-12 text-red-500 mx-auto"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-red-700",children:"Failed to Load Activity Data"}),e.jsx("p",{className:"text-sm text-red-600",children:x})]}),e.jsxs(R,{onClick:()=>y(),variant:"outline",children:[e.jsx(cs,{className:"mr-2 h-4 w-4"}),"Retry"]})]})})}):o?e.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-4",children:[1,2,3,4].map(A=>e.jsxs(K,{children:[e.jsx(xe,{className:"pb-2",children:e.jsx("div",{className:"h-4 w-32 bg-gray-200 rounded animate-pulse"})}),e.jsxs(Y,{children:[e.jsx("div",{className:"h-8 w-20 bg-gray-200 rounded animate-pulse mb-2"}),e.jsx("div",{className:"h-3 w-24 bg-gray-200 rounded animate-pulse"})]})]},A))}):e.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-4",children:p.map(A=>{const G=A.icon;return e.jsxs(K,{children:[e.jsxs(xe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(pe,{className:"text-sm font-medium",children:A.title}),e.jsx(G,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(Y,{children:[e.jsx("div",{className:"text-2xl font-bold",children:A.value}),e.jsxs("div",{className:"flex items-center text-xs text-muted-foreground",children:[A.trend==="up"?e.jsx(Is,{className:"mr-1 h-3 w-3 text-green-600"}):e.jsx(Is,{className:"mr-1 h-3 w-3 text-red-600 rotate-180"}),e.jsx("span",{className:A.trend==="up"?"text-green-600":"text-red-600",children:A.change}),e.jsx("span",{className:"ml-1",children:A.description})]})]})]},A.title)})}),e.jsxs(ja,{defaultValue:"all",className:"space-y-4",children:[e.jsxs(Sa,{children:[e.jsx(ft,{value:"all",children:"All Activities"}),e.jsx(ft,{value:"user",children:"User Actions"}),e.jsx(ft,{value:"system",children:"System Events"}),e.jsx(ft,{value:"critical",children:"Critical"})]}),e.jsx(pt,{value:"all",className:"space-y-4",children:e.jsxs(K,{children:[e.jsxs(xe,{children:[e.jsx(pe,{children:"Complete Activity Log"}),e.jsx(ot,{children:"All system activities and user actions in chronological order"})]}),e.jsx(Y,{children:e.jsx(gu,{showFilters:!0,limit:50})})]})}),e.jsx(pt,{value:"user",className:"space-y-4",children:e.jsxs(K,{children:[e.jsxs(xe,{children:[e.jsx(pe,{children:"User Actions"}),e.jsx(ot,{children:"Activities performed by users in the system"})]}),e.jsx(Y,{children:e.jsx(gu,{showFilters:!0,limit:50,filterCategory:"user"})})]})}),e.jsx(pt,{value:"system",className:"space-y-4",children:e.jsxs(K,{children:[e.jsxs(xe,{children:[e.jsx(pe,{children:"System Events"}),e.jsx(ot,{children:"Automated system activities and background processes"})]}),e.jsx(Y,{children:e.jsx(gu,{showFilters:!0,limit:50,filterCategory:"system"})})]})}),e.jsx(pt,{value:"critical",className:"space-y-4",children:e.jsxs(K,{children:[e.jsxs(xe,{children:[e.jsx(pe,{children:"Critical Events"}),e.jsx(ot,{children:"High-priority events that require attention"})]}),e.jsx(Y,{children:e.jsx(gu,{showFilters:!0,limit:50,filterPriority:"critical"})})]})})]}),e.jsxs(K,{children:[e.jsxs(xe,{children:[e.jsx(pe,{children:"Quick Actions"}),e.jsx(ot,{children:"Common history-related tasks and utilities"})]}),e.jsx(Y,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs(R,{variant:"outline",className:"h-auto flex-col py-4 hover:bg-blue-50 hover:border-blue-500 transition-colors",onClick:N,children:[e.jsx(gs,{className:"h-6 w-6 mb-2 text-blue-600"}),e.jsx("span",{className:"text-sm font-medium",children:"Schedule Report"}),e.jsx("span",{className:"text-xs text-muted-foreground mt-1",children:"Automate activity reports"})]}),e.jsxs(R,{variant:"outline",className:"h-auto flex-col py-4 hover:bg-orange-50 hover:border-orange-500 transition-colors",onClick:S,children:[e.jsx(ts,{className:"h-6 w-6 mb-2 text-orange-600"}),e.jsx("span",{className:"text-sm font-medium",children:"Set Alerts"}),e.jsx("span",{className:"text-xs text-muted-foreground mt-1",children:"Configure notifications"})]}),e.jsxs(R,{variant:"outline",className:"h-auto flex-col py-4 hover:bg-purple-50 hover:border-purple-500 transition-colors",onClick:C,children:[e.jsx(ba,{className:"h-6 w-6 mb-2 text-purple-600"}),e.jsx("span",{className:"text-sm font-medium",children:"Archive Data"}),e.jsx("span",{className:"text-xs text-muted-foreground mt-1",children:"Store old records"})]})]})})]})]})},J0={search:async(t,s={})=>{try{return(await Ne.get("/search",{params:{q:t,...s}})).data}catch(a){return console.error("Error searching:",a),D.error("Search failed. Please try again."),{products:[],orders:[],customers:[],transactions:[],locations:[],appointments:[],documents:[]}}},searchByCategory:async(t,s)=>{try{return(await Ne.get(`/search/${t}`,{params:{q:s}})).data}catch(a){return console.error(`Error searching ${t}:`,a),[]}}},kc={createTicket:async t=>{try{const s=await Ne.post("/support/tickets",t);return D.success("Support ticket created!"),s.data}catch(s){throw D.error("Failed to create ticket"),s}},getTickets:async()=>{try{return(await Ne.get("/support/tickets")).data}catch(t){return console.error("Error fetching tickets:",t),[]}},getTicketById:async t=>{try{return(await Ne.get(`/support/tickets/${t}`)).data}catch(s){throw console.error("Error fetching ticket:",s),s}},updateTicket:async(t,s)=>{try{const a=await Ne.put(`/support/tickets/${t}`,s);return D.success("Ticket updated!"),a.data}catch(a){throw D.error("Failed to update ticket"),a}},getFAQs:async()=>{try{return(await Ne.get("/support/faqs")).data}catch(t){return console.error("Error fetching FAQs:",t),[]}},getSupportAgents:async()=>{try{return(await Ne.get("/support/agents")).data}catch(t){return console.error("Error fetching support agents:",t),[{id:1,name:"Support Team",role:"Customer Support",avatar:"/api/placeholder/40/40",status:"online",rating:4.9,specialties:["General Support","Technical Help"]}]}},sendMessage:async(t,s)=>{try{return(await Ne.post(`/support/tickets/${t}/messages`,{message:s})).data}catch(a){throw D.error("Failed to send message"),a}}},YW=()=>{const[t]=s_(),s=Ka(),[a,r]=v.useState(t.get("q")||""),[i,o]=v.useState({products:[],orders:[],customers:[],transactions:[],locations:[],appointments:[],documents:[]}),[c,u]=v.useState(!1),[f,x]=v.useState("all"),[h,p]=v.useState(0),[g,y]=v.useState(null),[b,N]=v.useState(!1),[S,C]=v.useState({products:{loaded:!1,count:0,error:null},orders:{loaded:!1,count:0,error:null},customers:{loaded:!1,count:0,error:null}});v.useEffect(()=>{const T=t.get("q");T&&(r(T),k(T))},[t]),v.useEffect(()=>{if(!a.trim()){o({products:[],orders:[],customers:[],transactions:[],locations:[],appointments:[],documents:[]}),p(0),N(!1);return}const T=setTimeout(()=>{k(a)},500);return()=>clearTimeout(T)},[a]);const k=async T=>{if(T.trim()){u(!0),y(null),N(!0);try{const _=localStorage.getItem("token"),[P,z,V]=await Promise.allSettled([J0.searchByCategory("products",T),J0.searchByCategory("orders",T),J0.searchByCategory("customers",T)]),W={products:{loaded:P.status==="fulfilled",count:P.status==="fulfilled"&&P.value?.length||0,error:P.status==="rejected"?P.reason?.message:null},orders:{loaded:z.status==="fulfilled",count:z.status==="fulfilled"&&z.value?.length||0,error:z.status==="rejected"?z.reason?.message:null},customers:{loaded:V.status==="fulfilled",count:V.status==="fulfilled"&&V.value?.length||0,error:V.status==="rejected"?V.reason?.message:null}};C(W);const q={products:P.status==="fulfilled"?P.value||[]:[],orders:z.status==="fulfilled"?z.value||[]:[],customers:V.status==="fulfilled"?V.value||[]:[],transactions:[],locations:[],appointments:[],documents:[]};o(q);const B=Object.values(q).reduce((Z,de)=>Z+(de?.length||0),0);p(B);const ae=Object.values(W).filter(Z=>!Z.loaded).length,U=Object.values(W).filter(Z=>Z.loaded).length;console.log(" Search completed:",{query:T,total:B,sources:{success:U,failed:ae},breakdown:{products:W.products.count,orders:W.orders.count,customers:W.customers.count}}),B>0?D.success(`Found ${B} results for "${T}" from ${U} sources`):ae>0?D.warning(`No results found. ${ae} source(s) unavailable.`):D.info("No results found. Try different keywords.")}catch(_){console.error(" Search error:",_),y(_.message||"Search failed"),D.error("Search failed. Please check your connection and try again."),o({products:[],orders:[],customers:[],transactions:[],locations:[],appointments:[],documents:[]}),p(0)}finally{u(!1)}}},A=T=>{T.preventDefault(),a.trim()&&(k(a),s(`/dashboard/search?q=${encodeURIComponent(a.trim())}`,{replace:!0}))},G=[{id:"all",label:"All Results",icon:oa,count:h},{id:"products",label:"Products",icon:Yt,count:i.products?.length||0},{id:"orders",label:"Orders",icon:ws,count:i.orders?.length||0},{id:"customers",label:"Customers",icon:Zt,count:i.customers?.length||0},{id:"transactions",label:"Transactions",icon:ra,count:i.transactions?.length||0},{id:"locations",label:"Locations",icon:Yr,count:i.locations?.length||0},{id:"appointments",label:"Appointments",icon:gs,count:i.appointments?.length||0},{id:"documents",label:"Documents",icon:ba,count:i.documents?.length||0}],F=(T,_)=>{switch(_){case"products":s("/dashboard/inventory"),D.success(`Viewing product: ${T.name}`);break;case"orders":s("/dashboard/ecommerce"),D.success(`Viewing order: ${T.id}`);break;case"customers":s("/dashboard/ecommerce"),D.success(`Viewing customer: ${T.name}`);break;case"transactions":s("/dashboard/finances"),D.success(`Viewing transaction: ${T.id}`);break;case"locations":s("/dashboard/locations"),D.success(`Viewing location: ${T.name}`);break;case"appointments":s("/dashboard/appointments"),D.success(`Viewing appointment with ${T.client}`);break;case"documents":s("/dashboard/reports"),D.success(`Viewing document: ${T.name}`);break;default:D.info("Opening details...")}},E=({item:T,type:_})=>e.jsx(K,{className:"hover:shadow-md transition-shadow cursor-pointer",onClick:()=>F(T,_),children:e.jsx(Y,{className:"p-4",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-sm mb-1",children:T.name||T.client||T.customer?.name||T.customer?.email||`${_.toUpperCase()} #${T.id}`}),e.jsxs("p",{className:"text-xs text-muted-foreground mb-2",children:[_==="products"&&`${T.category}  $${T.price}  Stock: ${T.stock}`,_==="orders"&&`${T.customer?.name||T.customer?.email||"Unknown"}  $${T.total}  ${T.status}`,_==="customers"&&`${T.email}  ${T.orders} orders  $${T.totalSpent}`,_==="transactions"&&`${T.type}  $${Math.abs(T.amount)}  ${T.description}`,_==="locations"&&`${T.address}, ${T.city}  ${T.status}`,_==="appointments"&&`${T.service}  ${T.date} at ${T.time}`,_==="documents"&&`${T.type}  ${T.date}  ${T.size}`]})]}),e.jsx(_l,{className:"h-4 w-4 text-muted-foreground"})]})})});return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold text-foreground flex items-center gap-2",children:[e.jsx(oa,{className:"h-8 w-8 text-green-600"}),"Search Results"]}),e.jsx("p",{className:"text-muted-foreground",children:a?`Results for "${a}"`:"Search across all modules and data"})]})}),e.jsx(K,{children:e.jsxs(Y,{className:"p-4",children:[e.jsxs("form",{onSubmit:A,className:"flex gap-2",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(oa,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(me,{value:a,onChange:T=>r(T.target.value),placeholder:"Search products, orders, customers, and more...",className:"pl-10"})]}),e.jsx(R,{type:"submit",disabled:c,children:c?"Searching...":"Search"})]}),b&&!c&&e.jsxs("div",{className:"mt-4 space-y-2",children:[e.jsx("p",{className:"text-xs font-medium text-muted-foreground",children:"Data Sources:"}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:Object.entries(S).map(([T,_])=>e.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[_.loaded?e.jsx(ti,{className:"h-3 w-3 text-green-600"}):e.jsx(ks,{className:"h-3 w-3 text-red-600"}),e.jsx("span",{className:_.loaded?"text-green-600":"text-red-600",children:T.charAt(0).toUpperCase()+T.slice(1)}),_.loaded&&_.count>0&&e.jsx(De,{variant:"secondary",className:"text-xs px-1 py-0",children:_.count})]},T))})]})]})}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-8 gap-2",children:G.map(T=>{const _=T.icon;return e.jsxs(R,{variant:f===T.id?"default":"outline",className:"h-auto p-3 flex flex-col items-center gap-1",onClick:()=>x(T.id),children:[e.jsx(_,{className:"h-4 w-4"}),e.jsx("span",{className:"text-xs",children:T.label}),e.jsx(De,{variant:"secondary",className:"text-xs",children:T.count})]},T.id)})}),h>0?e.jsxs(ja,{value:f,onValueChange:x,children:[e.jsx(pt,{value:"all",className:"space-y-4",children:Object.entries(i).map(([T,_])=>_.length>0&&e.jsxs(K,{children:[e.jsx(xe,{children:e.jsxs(pe,{className:"capitalize",children:[T," (",_.length,")"]})}),e.jsxs(Y,{className:"space-y-2",children:[_.slice(0,3).map((P,z)=>e.jsx(E,{item:P,type:T},z)),_.length>3&&e.jsxs(R,{variant:"outline",size:"sm",className:"w-full",children:["View all ",_.length," ",T]})]})]},T))}),Object.entries(i).map(([T,_])=>e.jsxs(pt,{value:T,className:"space-y-2",children:[_.map((P,z)=>e.jsx(E,{item:P,type:T},z)),_.length===0&&e.jsx(K,{children:e.jsxs(Y,{className:"p-8 text-center",children:[e.jsx(oa,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),e.jsxs("h3",{className:"text-lg font-semibold mb-2",children:["No ",T," found"]}),e.jsx("p",{className:"text-muted-foreground",children:"Try adjusting your search terms or check your filters"})]})})]},T))]}):g?e.jsx(K,{className:"border-red-200 bg-red-50",children:e.jsxs(Y,{className:"p-8 text-center",children:[e.jsx(ks,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-red-700 mb-2",children:"Search Error"}),e.jsx("p",{className:"text-red-600 mb-4",children:g}),e.jsx(R,{onClick:()=>k(a),variant:"outline",children:"Try Again"})]})}):a&&!c?e.jsx(K,{children:e.jsxs(Y,{className:"p-8 text-center",children:[e.jsx(oa,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No results found"}),e.jsx("p",{className:"text-muted-foreground",children:"Try different keywords or check your spelling"})]})}):null]})},XW=()=>{const{socket:t,connected:s}=ha(),{isAuthenticated:a}=_s(),[r,i]=v.useState(0),[o,c]=v.useState(!0),[u,f]=v.useState({revenue:[],sales:[],categories:[],traffic:[],performance:[]});v.useEffect(()=>{(async()=>{if(a){c(!0);try{const g={Authorization:`Bearer ${localStorage.getItem("token")}`},[y,b]=await Promise.all([Ne.get("/orders",{headers:g}).catch(()=>({data:[]})),Ne.get("/products",{headers:g}).catch(()=>({data:[]}))]),N=y.data||[],S=b.data||[],C=[];for(let _=29;_>=0;_--){const P=new Date;P.setDate(P.getDate()-_);const z=N.filter(V=>new Date(V.date||V.createdAt).toDateString()===P.toDateString());C.push({name:P.toLocaleDateString("en-US",{month:"short",day:"numeric"}),value:z.reduce((V,W)=>V+(Number(W.total)||0),0),orders:z.length})}const k={};S.forEach(_=>{const P=_.category||"Other";k[P]=(k[P]||0)+_.price*(_.stockQuantity||0)});const A=Object.entries(k).map(([_,P])=>({name:_,value:P})),G={Online:0,"Walk-in":0,Mobile:0};N.forEach(_=>{const P=_.source||"Online";G[P]=(G[P]||0)+1});const F=Object.entries(G).map(([_,P])=>({name:_,value:P})),E={};N.forEach(_=>{const P=_.status||"Pending";E[P]=(E[P]||0)+1});const T=Object.entries(E).map(([_,P])=>({name:_,value:P}));f({revenue:C,sales:C,categories:A.length>0?A:[{name:"No Data",value:1}],traffic:F,performance:T.length>0?T:[{name:"No Data",value:1}]})}catch(p){console.error("Error fetching graph data:",p)}finally{c(!1)}}})()},[a,r]);const x=()=>{i(h=>h+1),D.success("All graphs refreshed successfully!")};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold text-foreground flex items-center gap-2",children:[e.jsx(er,{className:"h-8 w-8 text-green-600"}),"Real-Time Business Analytics"]}),e.jsx("p",{className:"text-muted-foreground",children:"Live data from your business operations"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(De,{variant:s?"default":"secondary",children:s?" Live":"Offline"}),e.jsxs(R,{onClick:x,className:"gap-2",disabled:o,children:[e.jsx(cs,{className:`h-4 w-4 ${o?"animate-spin":""}`}),"Refresh All"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(K,{children:e.jsx(Y,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(La,{className:"h-5 w-5 text-blue-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:"Real-time Updates"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Auto-refresh capabilities"})]})]})})}),e.jsx(K,{children:e.jsx(Y,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(vi,{className:"h-5 w-5 text-green-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:"Interactive Controls"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Chart type switching"})]})]})})}),e.jsx(K,{children:e.jsx(Y,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(_a,{className:"h-5 w-5 text-yellow-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:"Export Ready"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"CSV data export"})]})]})})}),e.jsx(K,{children:e.jsx(Y,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(er,{className:"h-5 w-5 text-purple-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:"Multiple Types"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Line, Bar, Pie, Area"})]})]})})})]}),e.jsxs(ja,{defaultValue:"trends",className:"space-y-6",children:[e.jsxs(Sa,{className:"grid w-full grid-cols-5",children:[e.jsx(ft,{value:"trends",children:"Trends"}),e.jsx(ft,{value:"comparisons",children:"Comparisons"}),e.jsx(ft,{value:"distributions",children:"Distributions"}),e.jsx(ft,{value:"performance",children:"Performance"}),e.jsx(ft,{value:"realtime",children:"Real-time"})]}),e.jsxs(pt,{value:"trends",className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx(rs,{title:"Revenue Growth Trends",description:`Last 30 days - KES ${u.revenue.reduce((h,p)=>h+p.value,0).toLocaleString()}`,type:"area",data:u.revenue,height:350},`trend-1-${r}`),e.jsx(rs,{title:"Daily Sales Performance",description:`${u.sales.reduce((h,p)=>h+p.orders,0)} total orders`,type:"line",data:u.sales,height:350},`trend-2-${r}`)]}),e.jsx(rs,{title:"Sales Performance Timeline",description:"Real-time sales data with order metrics",type:"composed",data:u.sales,height:400},`trend-3-${r}`)]}),e.jsx(pt,{value:"comparisons",className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx(rs,{title:"Daily Revenue Comparison",description:"Day-by-day performance analysis",type:"bar",data:u.revenue,height:350},`comp-1-${r}`),e.jsx(rs,{title:"Product Category Performance",description:`${u.categories.length} categories`,type:"bar",data:u.categories,height:350,showControls:!1},`comp-2-${r}`)]})}),e.jsx(pt,{value:"distributions",className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx(rs,{title:"Order Sources",description:"Order source distribution",type:"pie",data:u.traffic,height:300,showControls:!1},`dist-1-${r}`),e.jsx(rs,{title:"Product Categories",description:"Sales by product category",type:"pie",data:u.categories,height:300,showControls:!1},`dist-2-${r}`),e.jsx(rs,{title:"Order Status",description:"Current order distribution",type:"pie",data:u.performance,height:300,showControls:!1},`dist-3-${r}`)]})}),e.jsx(pt,{value:"performance",className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx(rs,{title:"Sales KPI Dashboard",description:"Real-time sales performance",type:"composed",data:u.sales,height:350},`perf-1-${r}`),e.jsx(rs,{title:"Revenue Efficiency",description:"Revenue generation over time",type:"area",data:u.revenue,height:350},`perf-2-${r}`)]})}),e.jsxs(pt,{value:"realtime",className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx(rs,{title:"Live Sales Data",description:"Last 7 days real-time sales",type:"line",data:u.sales.slice(-7),height:350,autoRefresh:!0,refreshInterval:3e4},`rt-1-${r}`),e.jsx(rs,{title:"Revenue Tracking",description:"Real-time revenue monitoring",type:"area",data:u.revenue.slice(-7),height:350,autoRefresh:!0,refreshInterval:3e4},`rt-2-${r}`)]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx(rs,{title:"Recent Activity",description:"Last 10 days",type:"line",data:u.sales.slice(-10),height:250,autoRefresh:!0,refreshInterval:3e4},`rt-3-${r}`),e.jsx(rs,{title:"Category Distribution",description:"Live category breakdown",type:"bar",data:u.categories.slice(0,5),height:250,autoRefresh:!0,refreshInterval:6e4},`rt-4-${r}`),e.jsx(rs,{title:"Order Status",description:"Current order status",type:"pie",data:u.performance,height:250,autoRefresh:!0,refreshInterval:3e4,showControls:!1},`rt-5-${r}`)]})]})]}),e.jsxs(K,{children:[e.jsxs(xe,{children:[e.jsx(pe,{children:"How to Use Comprehensive Graphs"}),e.jsx(ot,{children:"Interactive features and customization options"})]}),e.jsx(Y,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-2",children:"Interactive Features"}),e.jsxs("ul",{className:"text-sm space-y-1 text-muted-foreground",children:[e.jsx("li",{children:" Switch between chart types (Line, Bar, Area, Pie)"}),e.jsx("li",{children:" Adjust time ranges (7d, 30d, 90d, 1y)"}),e.jsx("li",{children:" Real-time data refresh capabilities"}),e.jsx("li",{children:" Export data to CSV format"}),e.jsx("li",{children:" Hover tooltips for detailed information"})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-2",children:"Customization Options"}),e.jsxs("ul",{className:"text-sm space-y-1 text-muted-foreground",children:[e.jsx("li",{children:" Custom color schemes for different data types"}),e.jsx("li",{children:" Configurable auto-refresh intervals"}),e.jsx("li",{children:" Responsive design for all screen sizes"}),e.jsx("li",{children:" Data transformation and filtering"}),e.jsx("li",{children:" Integration with existing API endpoints"})]})]})]})})]})]})},QW=({userId:t=null,showFilters:s=!0,limit:a=20})=>{const{user:r}=_s(),[i,o]=v.useState([]),[c,u]=v.useState(!0),[f,x]=v.useState({currentPage:1,totalPages:1,totalCount:0,hasNext:!1,hasPrev:!1}),[h,p]=v.useState({status:"all",orderType:"all",priority:"all",search:"",dateRange:null,minAmount:"",maxAmount:"",page:1}),[g,y]=v.useState({totalOrders:0,totalValue:0,averageOrderValue:0,statusBreakdown:{},monthlyTrends:[]});v.useEffect(()=>{b(),N()},[h,t]);const b=async()=>{try{u(!0);const V=new URLSearchParams;h.status&&h.status!=="all"&&V.append("status",h.status),h.orderType&&h.orderType!=="all"&&V.append("orderType",h.orderType),h.priority&&h.priority!=="all"&&V.append("priority",h.priority),h.search&&V.append("search",h.search),h.dateRange?.from&&V.append("startDate",h.dateRange.from.toISOString()),h.dateRange?.to&&V.append("endDate",h.dateRange.to.toISOString()),h.minAmount&&V.append("minAmount",h.minAmount),h.maxAmount&&V.append("maxAmount",h.maxAmount),V.append("page",h.page.toString()),V.append("limit",a.toString());const W=r.role==="client"?"/client/orders":"/admin/orders",q=await Ne.get(`${W}?${V}`);o(q.data.orders||[]),x(q.data.pagination||{})}catch(V){console.error("Error fetching orders:",V),D.error("Failed to load order history")}finally{u(!1)}},N=async()=>{try{const V=await Ne.get("/dashboard/analytics/orders?timeframe=12m");y(V.data.data||{})}catch(V){console.error("Error fetching order stats:",V)}},S=(V,W)=>{p(q=>({...q,[V]:W,page:1}))},C=V=>{p(W=>({...W,page:V}))},k=V=>{window.open(`/dashboard/orders/${V}`,"_blank")},A=async()=>{try{const V=new URLSearchParams;h.status&&V.append("status",h.status),h.dateRange?.from&&V.append("startDate",h.dateRange.from.toISOString()),h.dateRange?.to&&V.append("endDate",h.dateRange.to.toISOString()),V.append("format","csv");const W=r.role==="client"?"/client/orders/export":"/admin/orders/export",q=await Ne.get(`${W}?${V}`,{responseType:"blob"}),B=new Blob([q.data],{type:"text/csv"}),ae=window.URL.createObjectURL(B),U=document.createElement("a");U.href=ae,U.download=`orders-export-${Date.now()}.csv`,document.body.appendChild(U),U.click(),window.URL.revokeObjectURL(ae),document.body.removeChild(U),D.success("Orders exported successfully")}catch(V){console.error("Error exporting orders:",V),D.error("Failed to export orders")}},G=V=>{const W={Draft:{color:"bg-gray-100 text-gray-800",icon:ts},Submitted:{color:"bg-blue-100 text-blue-800",icon:ts},Under_Review:{color:"bg-yellow-100 text-yellow-800",icon:Fr},Approved:{color:"bg-green-100 text-green-800",icon:us},Rejected:{color:"bg-red-100 text-red-800",icon:Sr},Completed:{color:"bg-green-100 text-green-800",icon:us},Cancelled:{color:"bg-red-100 text-red-800",icon:Sr}},q=W[V]||W.Draft,B=q.icon;return e.jsxs(De,{className:`${q.color} flex items-center gap-1`,children:[e.jsx(B,{className:"h-3 w-3"}),V.replace("_"," ")]})},F=V=>{const W={low:"bg-green-100 text-green-800",normal:"bg-blue-100 text-blue-800",high:"bg-orange-100 text-orange-800",urgent:"bg-red-100 text-red-800"};return e.jsx(De,{className:`${W[V]||W.normal} text-xs`,children:V})},E=V=>new Intl.NumberFormat("en-KE",{style:"currency",currency:"KES"}).format(V),T=V=>new Date(V).toLocaleDateString("en-KE",{year:"numeric",month:"short",day:"numeric"}),_=[{value:"all",label:"All Statuses"},{value:"Draft",label:"Draft"},{value:"Submitted",label:"Submitted"},{value:"Under_Review",label:"Under Review"},{value:"Approved",label:"Approved"},{value:"Rejected",label:"Rejected"},{value:"Completed",label:"Completed"},{value:"Cancelled",label:"Cancelled"}],P=[{value:"all",label:"All Types"},{value:"standard",label:"Standard"},{value:"bulk",label:"Bulk"},{value:"custom",label:"Custom"},{value:"urgent",label:"Urgent"}],z=[{value:"all",label:"All Priorities"},{value:"low",label:"Low"},{value:"normal",label:"Normal"},{value:"high",label:"High"},{value:"urgent",label:"Urgent"}];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx(K,{children:e.jsx(Y,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Orders"}),e.jsx("p",{className:"text-2xl font-bold",children:g.totalOrders||0})]}),e.jsx(Yt,{className:"h-8 w-8 text-blue-600"})]})})}),e.jsx(K,{children:e.jsx(Y,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Value"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:E(g.totalValue||0)})]}),e.jsx(ra,{className:"h-8 w-8 text-green-600"})]})})}),e.jsx(K,{children:e.jsx(Y,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Average Order"}),e.jsx("p",{className:"text-2xl font-bold text-purple-600",children:E(g.averageOrderValue||0)})]}),e.jsx(Is,{className:"h-8 w-8 text-purple-600"})]})})}),e.jsx(K,{children:e.jsx(Y,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"This Month"}),e.jsx("p",{className:"text-2xl font-bold text-orange-600",children:g.monthlyTrends?.[0]?.count||0})]}),e.jsx(gs,{className:"h-8 w-8 text-orange-600"})]})})})]}),s&&e.jsxs(K,{children:[e.jsx(xe,{children:e.jsxs(pe,{className:"flex items-center gap-2",children:[e.jsx(tl,{className:"h-5 w-5"}),"Filters"]})}),e.jsxs(Y,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-5 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Status"}),e.jsxs(Mt,{value:h.status,onValueChange:V=>S("status",V),children:[e.jsx(Lt,{children:e.jsx(Ft,{placeholder:"Select status"})}),e.jsx(It,{children:_.map(V=>e.jsx(Ae,{value:V.value,children:V.label},V.value))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Type"}),e.jsxs(Mt,{value:h.orderType,onValueChange:V=>S("orderType",V),children:[e.jsx(Lt,{children:e.jsx(Ft,{placeholder:"Select type"})}),e.jsx(It,{children:P.map(V=>e.jsx(Ae,{value:V.value,children:V.label},V.value))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Priority"}),e.jsxs(Mt,{value:h.priority,onValueChange:V=>S("priority",V),children:[e.jsx(Lt,{children:e.jsx(Ft,{placeholder:"Select priority"})}),e.jsx(It,{children:z.map(V=>e.jsx(Ae,{value:V.value,children:V.label},V.value))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Search"}),e.jsxs("div",{className:"relative",children:[e.jsx(oa,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(me,{placeholder:"Order ID, customer...",value:h.search,onChange:V=>S("search",V.target.value),className:"pl-10"})]})]}),e.jsx("div",{className:"flex items-end",children:e.jsxs(R,{onClick:A,variant:"outline",className:"w-full",children:[e.jsx(Ma,{className:"h-4 w-4 mr-2"}),"Export"]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mt-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Date Range"}),e.jsx(lA,{date:h.dateRange,setDate:V=>S("dateRange",V)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Min Amount"}),e.jsx(me,{type:"number",placeholder:"0",value:h.minAmount,onChange:V=>S("minAmount",V.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Max Amount"}),e.jsx(me,{type:"number",placeholder:"No limit",value:h.maxAmount,onChange:V=>S("maxAmount",V.target.value)})]})]})]})]}),e.jsxs(K,{children:[e.jsx(xe,{children:e.jsx(pe,{children:"Order History"})}),e.jsxs(Y,{children:[c?e.jsx("div",{className:"flex items-center justify-center h-32",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900"})}):i.length===0?e.jsx("div",{className:"text-center py-8 text-gray-500",children:"No orders found for the selected criteria."}):e.jsx("div",{className:"space-y-4",children:i.map(V=>e.jsxs("div",{className:"border rounded-lg p-4 hover:bg-gray-50 transition-colors",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("h3",{className:"font-semibold text-lg",children:V.orderId}),G(V.status),F(V.priority)]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-lg font-bold text-green-600",children:E(V.total)}),e.jsxs(R,{variant:"outline",size:"sm",onClick:()=>k(V._id),children:[e.jsx(ca,{className:"h-4 w-4 mr-1"}),"View"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm text-gray-600",children:[e.jsxs("div",{children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Customer:"})," ",V.customer?.name||"N/A"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Type:"})," ",V.orderType]})]}),e.jsxs("div",{children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Items:"})," ",V.items?.length||0," items"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Created:"})," ",T(V.createdAt)]})]}),e.jsxs("div",{children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Delivery:"})," ",V.deliveryInfo?.address||"N/A"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Updated:"})," ",T(V.updatedAt)]})]})]}),V.clientNotes&&e.jsx("div",{className:"mt-3 p-3 bg-gray-50 rounded",children:e.jsxs("p",{className:"text-sm",children:[e.jsx("strong",{children:"Notes:"})," ",V.clientNotes]})})]},V._id))}),f.totalPages>1&&e.jsxs("div",{className:"flex items-center justify-between mt-6",children:[e.jsxs("div",{className:"text-sm text-gray-500",children:["Showing ",(f.currentPage-1)*a+1," to ",Math.min(f.currentPage*a,f.totalCount)," of ",f.totalCount," orders"]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(R,{variant:"outline",size:"sm",onClick:()=>C(f.currentPage-1),disabled:!f.hasPrev,children:"Previous"}),e.jsx(R,{variant:"outline",size:"sm",onClick:()=>C(f.currentPage+1),disabled:!f.hasNext,children:"Next"})]})]})]})]})]})},ZW=()=>{const{user:t,isAuthenticated:s}=_s(),[a,r]=v.useState(!0),[i,o]=v.useState(null),[c,u]=v.useState(!1),[f,x]=v.useState({overview:{},trends:{},analytics:{}}),[h,p]=v.useState({timeframe:"30d",reportType:"overview",dateRange:null}),[g,y]=v.useState([]);v.useEffect(()=>{s&&(b(),N())},[h.timeframe,s]);const b=v.useCallback(async(E=!1)=>{if(s)try{E?(u(!0),D.info("Refreshing reports...")):r(!0),o(null);const _={Authorization:`Bearer ${localStorage.getItem("token")}`},[P,z,V]=await Promise.allSettled([Ne.get("/orders",{headers:_}),Ne.get("/invoices",{headers:_}),Ne.get("/expenses",{headers:_})]),W=P.status==="fulfilled"?P.value?.data||[]:[],q=z.status==="fulfilled"?z.value?.data||[]:[],B=V.status==="fulfilled"?V.value?.data||[]:[],ae=Array.isArray(W)?W:[],U=Array.isArray(q)?q:[],Z=Array.isArray(B)?B:[],de=ae.reduce((gt,bt)=>gt+(Number(bt.total)||0),0),H=ae.length,se=new Set(ae.map(gt=>gt.customer?.email).filter(Boolean)).size,ee=U.filter(gt=>gt.paymentStatus==="pending").length,L=new Date,X=h.timeframe==="7d"?7:h.timeframe==="30d"?30:h.timeframe==="90d"?90:365,O=new Date(L.getTime()-X*24*60*60*1e3),J=new Date(O.getTime()-X*24*60*60*1e3),ie=ae.filter(gt=>new Date(gt.createdAt)>=O),be=ae.filter(gt=>new Date(gt.createdAt)>=J&&new Date(gt.createdAt)<O),Le=ie.reduce((gt,bt)=>gt+(Number(bt.total)||0),0),ve=be.reduce((gt,bt)=>gt+(Number(bt.total)||0),0),oe=ve>0?((Le-ve)/ve*100).toFixed(1):0,Pe=be.length>0?((ie.length-be.length)/be.length*100).toFixed(1):0,Xe=new Set(ie.map(gt=>gt.customer?.email).filter(Boolean)).size,yt=new Set(be.map(gt=>gt.customer?.email).filter(Boolean)).size,vt=yt>0?((Xe-yt)/yt*100).toFixed(1):0;x({overview:{totalRevenue:de,totalOrders:H,totalUsers:se,activeServiceRequests:ee,growthRates:{revenue:Number(oe),orders:Number(Pe),users:Number(vt)}},analytics:{orders:ae,invoices:U,expenses:Z}}),console.log(" Report data loaded:",{orders:ae.length,invoices:U.length,expenses:Z.length,totalRevenue:de,growthRates:{revenueGrowth:oe,ordersGrowth:Pe,usersGrowth:vt}}),E&&D.success("Reports refreshed!")}catch(T){console.error(" Error fetching report data:",T),o(T.message||"Failed to load report data"),D.error("Failed to load report data")}finally{r(!1),u(!1)}},[h.timeframe,s]),N=()=>{const E=[{id:"sales-summary",name:"Sales Summary Report",description:"Comprehensive sales performance and revenue analysis",icon:ra,category:"Financial",permissions:["canViewReports","admin"]},{id:"order-analysis",name:"Order Analysis Report",description:"Detailed order trends, status breakdown, and customer insights",icon:ws,category:"Operations",permissions:["canViewAllOrders"]},{id:"customer-insights",name:"Customer Insights Report",description:"Customer behavior, demographics, and engagement metrics",icon:Zt,category:"Marketing",permissions:["canViewAllClients"]},{id:"activity-audit",name:"Activity Audit Report",description:"User activity logs, security events, and system usage",icon:ba,category:"Security",permissions:["canViewReports"]},{id:"performance-metrics",name:"Performance Metrics Report",description:"System performance, response times, and efficiency metrics",icon:Is,category:"Technical",permissions:["canManageSettings"]}],T=t?.permissions||{},_=t?.role||"user",P=E.filter(z=>_==="admin"||z.permissions.some(V=>T[V]||V===_));y(P.length>0?P:E)},S=async E=>{try{r(!0),D.info(`Generating ${E} report...`);const T=localStorage.getItem("token"),_={reportType:E,timeframe:h.timeframe,format:"pdf"};h.dateRange?.from&&(_.startDate=h.dateRange.from.toISOString()),h.dateRange?.to&&(_.endDate=h.dateRange.to.toISOString());const P=await Ne.post("/reports/generate",_,{headers:{Authorization:`Bearer ${T}`},responseType:"blob"});if(P.data){const z=new Blob([P.data],{type:"application/pdf"}),V=window.URL.createObjectURL(z),W=document.createElement("a");W.href=V,W.download=`${E}-${new Date().toISOString().split("T")[0]}.pdf`,document.body.appendChild(W),W.click(),window.URL.revokeObjectURL(V),document.body.removeChild(W),D.success("Report downloaded successfully!")}else throw new Error("No data received")}catch(T){console.error("Error generating report:",T),D.error(T.response?.data?.message||"Report generation is currently unavailable. Please try again later.")}finally{r(!1)}},C=async(E="csv")=>{try{D.info(`Preparing ${E.toUpperCase()} export...`);const T=localStorage.getItem("token"),_=await Ne.post("/reports/export",{format:E,timeframe:h.timeframe,dateRange:h.dateRange,includeCharts:E==="pdf"},{headers:{Authorization:`Bearer ${T}`},responseType:"blob"}),P=new Blob([_.data],{type:E==="pdf"?"application/pdf":"text/csv"}),z=window.URL.createObjectURL(P),V=document.createElement("a");V.href=z,V.download=`ominbiz-report-${new Date().toISOString().split("T")[0]}.${E}`,document.body.appendChild(V),V.click(),window.URL.revokeObjectURL(z),document.body.removeChild(V),D.success(`Data exported as ${E.toUpperCase()}`)}catch(T){console.error("Error exporting data:",T),D.error("Export feature is currently unavailable. Please contact support.")}},k=async(E,T)=>{try{const _=localStorage.getItem("token");await Ne.post("/reports/schedule",{reportId:E,schedule:T,recipients:[t?.email||"admin@ominbiz.com"],format:"pdf"},{headers:{Authorization:`Bearer ${_}`}}),D.success(`${E} report scheduled to be sent ${T}`)}catch(_){console.error("Error scheduling report:",_),D.error("Report scheduling is currently unavailable. Feature coming soon!")}},A=E=>new Intl.NumberFormat("en-KE",{style:"currency",currency:"KES"}).format(E),G=E=>new Intl.NumberFormat().format(E),F=[{value:"7d",label:"Last 7 Days"},{value:"30d",label:"Last 30 Days"},{value:"90d",label:"Last 90 Days"},{value:"1y",label:"Last Year"}];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Reports & Analytics"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Generate comprehensive reports and analyze business performance"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(R,{variant:"outline",onClick:()=>b(!0),disabled:c||a,children:[e.jsx(cs,{className:`h-4 w-4 mr-2 ${c?"animate-spin":""}`}),c?"Refreshing...":"Refresh"]}),e.jsxs(R,{onClick:()=>C("csv"),disabled:a,children:[e.jsx(Ma,{className:"h-4 w-4 mr-2"}),"Export CSV"]})]})]}),e.jsxs(K,{children:[e.jsx(xe,{children:e.jsxs(pe,{className:"flex items-center gap-2",children:[e.jsx(tl,{className:"h-5 w-5"}),"Report Filters"]})}),e.jsx(Y,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Timeframe"}),e.jsxs(Mt,{value:h.timeframe,onValueChange:E=>p(T=>({...T,timeframe:E})),children:[e.jsx(Lt,{children:e.jsx(Ft,{placeholder:"Select timeframe"})}),e.jsx(It,{children:F.map(E=>e.jsx(Ae,{value:E.value,children:E.label},E.value))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Report Type"}),e.jsxs(Mt,{value:h.reportType,onValueChange:E=>p(T=>({...T,reportType:E})),children:[e.jsx(Lt,{children:e.jsx(Ft,{placeholder:"Select type"})}),e.jsxs(It,{children:[e.jsx(Ae,{value:"overview",children:"Overview"}),e.jsx(Ae,{value:"detailed",children:"Detailed"}),e.jsx(Ae,{value:"summary",children:"Summary"})]})]})]}),e.jsx("div",{className:"flex items-end",children:e.jsxs(R,{onClick:()=>b(!0),className:"w-full",disabled:a||c,children:[e.jsx(er,{className:"h-4 w-4 mr-2"}),a?"Loading...":"Update Reports"]})})]})})]}),e.jsxs(ja,{defaultValue:"overview",className:"space-y-6",children:[e.jsxs(Sa,{className:"grid w-full grid-cols-5",children:[e.jsx(ft,{value:"overview",children:"Overview"}),e.jsx(ft,{value:"reports",children:"Reports"}),e.jsx(ft,{value:"orders",children:"Orders"}),e.jsx(ft,{value:"activities",children:"Activities"}),e.jsx(ft,{value:"analytics",children:"Analytics"})]}),e.jsx(pt,{value:"overview",className:"space-y-6",children:i?e.jsx(K,{className:"border-red-200 bg-red-50",children:e.jsx(Y,{className:"flex items-center justify-center py-12",children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx(ks,{className:"h-12 w-12 text-red-500 mx-auto"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-red-700",children:"Failed to Load Report Data"}),e.jsx("p",{className:"text-sm text-red-600",children:i})]}),e.jsxs(R,{onClick:()=>b(),variant:"outline",children:[e.jsx(cs,{className:"mr-2 h-4 w-4"}),"Retry"]})]})})}):a?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[1,2,3,4].map(E=>e.jsx(K,{children:e.jsx(Y,{className:"p-6",children:e.jsxs("div",{className:"space-y-2 animate-pulse",children:[e.jsx("div",{className:"h-4 w-24 bg-gray-200 rounded"}),e.jsx("div",{className:"h-8 w-32 bg-gray-200 rounded"}),e.jsx("div",{className:"h-3 w-20 bg-gray-200 rounded"})]})})},E))}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx(K,{children:e.jsx(Y,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Revenue"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:A(f.overview?.totalRevenue||0)}),e.jsx("div",{className:"flex items-center mt-1",children:(f.overview?.growthRates?.revenue||0)>=0?e.jsxs(e.Fragment,{children:[e.jsx(Is,{className:"h-3 w-3 text-green-600 mr-1"}),e.jsxs("span",{className:"text-xs text-green-600",children:["+",Math.abs(f.overview?.growthRates?.revenue||0),"%"]})]}):e.jsxs(e.Fragment,{children:[e.jsx(fi,{className:"h-3 w-3 text-red-600 mr-1"}),e.jsxs("span",{className:"text-xs text-red-600",children:[f.overview?.growthRates?.revenue,"%"]})]})})]}),e.jsx(ra,{className:"h-8 w-8 text-green-600"})]})})}),e.jsx(K,{children:e.jsx(Y,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Orders"}),e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:G(f.overview?.totalOrders||0)}),e.jsx("div",{className:"flex items-center mt-1",children:(f.overview?.growthRates?.orders||0)>=0?e.jsxs(e.Fragment,{children:[e.jsx(Is,{className:"h-3 w-3 text-green-600 mr-1"}),e.jsxs("span",{className:"text-xs text-green-600",children:["+",Math.abs(f.overview?.growthRates?.orders||0),"%"]})]}):e.jsxs(e.Fragment,{children:[e.jsx(fi,{className:"h-3 w-3 text-red-600 mr-1"}),e.jsxs("span",{className:"text-xs text-red-600",children:[f.overview?.growthRates?.orders,"%"]})]})})]}),e.jsx(ws,{className:"h-8 w-8 text-blue-600"})]})})}),e.jsx(K,{children:e.jsx(Y,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Users"}),e.jsx("p",{className:"text-2xl font-bold text-purple-600",children:G(f.overview?.totalUsers||0)}),e.jsx("div",{className:"flex items-center mt-1",children:(f.overview?.growthRates?.users||0)>=0?e.jsxs(e.Fragment,{children:[e.jsx(Is,{className:"h-3 w-3 text-green-600 mr-1"}),e.jsxs("span",{className:"text-xs text-green-600",children:["+",Math.abs(f.overview?.growthRates?.users||0),"%"]})]}):e.jsxs(e.Fragment,{children:[e.jsx(fi,{className:"h-3 w-3 text-red-600 mr-1"}),e.jsxs("span",{className:"text-xs text-red-600",children:[f.overview?.growthRates?.users,"%"]})]})})]}),e.jsx(Zt,{className:"h-8 w-8 text-purple-600"})]})})}),e.jsx(K,{children:e.jsx(Y,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Active Requests"}),e.jsx("p",{className:"text-2xl font-bold text-orange-600",children:G(f.overview?.activeServiceRequests||0)}),e.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Service requests"})]}),e.jsx(ba,{className:"h-8 w-8 text-orange-600"})]})})})]}),e.jsxs(K,{children:[e.jsx(xe,{children:e.jsx(pe,{children:"Quick Report Actions"})}),e.jsx(Y,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs(R,{variant:"outline",className:"h-20 flex-col",onClick:()=>C("pdf"),children:[e.jsx(Ma,{className:"h-6 w-6 mb-2"}),e.jsx("span",{className:"text-sm",children:"Export PDF Report"})]}),e.jsxs(R,{variant:"outline",className:"h-20 flex-col",onClick:()=>C("csv"),children:[e.jsx(ba,{className:"h-6 w-6 mb-2"}),e.jsx("span",{className:"text-sm",children:"Export Data CSV"})]}),e.jsxs(R,{variant:"outline",className:"h-20 flex-col",onClick:()=>k("overview","weekly"),children:[e.jsx(Ks,{className:"h-6 w-6 mb-2"}),e.jsx("span",{className:"text-sm",children:"Schedule Weekly Report"})]})]})})]})]})}),e.jsx(pt,{value:"reports",className:"space-y-6",children:g.length===0?e.jsx(K,{children:e.jsx(Y,{className:"flex items-center justify-center py-12",children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx(ba,{className:"h-12 w-12 text-muted-foreground mx-auto"}),e.jsx("p",{className:"text-muted-foreground",children:"No reports available"})]})})}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:g.map(E=>{const T=E.icon;return e.jsxs(K,{className:"hover:shadow-lg transition-shadow",children:[e.jsxs(xe,{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(T,{className:"h-8 w-8 text-blue-600"}),e.jsx(De,{variant:"outline",children:E.category})]}),e.jsx(pe,{className:"text-lg",children:E.name})]}),e.jsxs(Y,{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:E.description}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs(R,{size:"sm",onClick:()=>S(E.id),disabled:a,children:[e.jsx(Ma,{className:"h-4 w-4 mr-1"}),"Generate"]}),e.jsxs(R,{size:"sm",variant:"outline",onClick:()=>k(E.id,"monthly"),children:[e.jsx(ts,{className:"h-4 w-4 mr-1"}),"Schedule"]})]})]})]},E.id)})})}),e.jsx(pt,{value:"orders",children:e.jsx(QW,{showFilters:!0,limit:20})}),e.jsx(pt,{value:"activities",children:e.jsx(gu,{showFilters:!0,limit:20})}),e.jsx(pt,{value:"analytics",className:"space-y-6",children:e.jsxs(K,{children:[e.jsx(xe,{children:e.jsx(pe,{children:"Advanced Analytics"})}),e.jsx(Y,{children:e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(er,{className:"h-16 w-16 mx-auto mb-4 text-gray-300"}),e.jsx("p",{children:"Advanced analytics charts and visualizations will be displayed here."}),e.jsx("p",{className:"text-sm mt-2",children:"Integration with charting libraries like Chart.js or D3.js recommended."})]})})]})})]})]})},JW=()=>{const{user:t}=_s(),{socket:s,connected:a}=ha(),r=Ka(),[i,o]=v.useState("chat"),[c,u]=v.useState([]),[f,x]=v.useState(""),[h,p]=v.useState(!1),[g,y]=v.useState([]),[b,N]=v.useState(null),[S,C]=v.useState("offline"),[k,A]=v.useState(""),[G,F]=v.useState([]),[E,T]=v.useState([]),[_,P]=v.useState(!1),[z,V]=v.useState(!1),[W,q]=v.useState(!1),[B,ae]=v.useState({subject:"",description:"",priority:"medium"}),[U,Z]=v.useState(!0),[de,H]=v.useState(null),[se,ee]=v.useState(null),[L,X]=v.useState(null),[O,J]=v.useState(null),[ie,be]=v.useState(!0),[Le,ve]=v.useState(!0),oe=v.useRef(null),Pe=v.useRef(null),Xe=v.useRef(null),yt=v.useRef(null);v.useEffect(()=>(gt(),bt(),lt(),vt(),()=>{xs()}),[s]);const vt=()=>{if(s)return s.emit("join_support_chat",{userId:t?._id,userName:t?.name}),s.on("support_message_received",ke=>{u(we=>[...we,ke]),p(!1)}),s.on("agent_typing",ke=>{p(ke.isTyping)}),s.on("agent_status_update",ke=>{y(we=>we.map(nt=>nt.id===ke.agentId?{...nt,status:ke.status}:nt)),ke.agentId===b?.id&&C(ke.status)}),s.on("ticket_status_update",ke=>{T(we=>we.map(nt=>nt.id===ke.ticketId?{...nt,status:ke.status,lastUpdate:new Date}:nt)),D.info(`Ticket ${ke.ticketId} updated: ${ke.status}`)}),s.on("video_offer",Te),s.on("video_answer",je),s.on("ice_candidate",fe),s.on("call_ended",Ue),()=>{s.off("support_message_received"),s.off("agent_typing"),s.off("agent_status_update"),s.off("ticket_status_update"),s.off("video_offer"),s.off("video_answer"),s.off("ice_candidate"),s.off("call_ended")}};v.useEffect(()=>{is()},[c]);const gt=async()=>{try{Z(!0),H(null);const ke=await kc.getSupportAgents().catch(()=>[{id:1,name:"Support Team",role:"Customer Support",avatar:"/api/placeholder/40/40",status:"online",rating:4.9,specialties:["General Support","Technical Help"]}]);y(ke),N(ke[0]),C(ke[0]?.status||"online");const we={id:1,sender:"agent",message:`Hi ${t?.name||"there"}! I'm ${ke[0]?.name}, your support specialist. How can I help you today?`,timestamp:new Date,agent:ke[0]};u([we]),console.log(" Support initialized:",{agents:ke.length,activeAgent:ke[0]?.name})}catch(ke){console.error(" Error initializing support:",ke),H("Failed to connect to support. Please try again later."),D.error("Failed to initialize support system")}finally{Z(!1)}},bt=async()=>{try{const ke=await kc.getFAQs();F(Array.isArray(ke)?ke:[]),console.log(" FAQs loaded:",ke.length)}catch(ke){console.error(" Error loading FAQs:",ke),F([{id:1,question:"How do I reset my password?",answer:'You can reset your password by clicking on "Forgot Password" on the login page. Enter your email and follow the instructions sent to your inbox.',category:"Account",helpful:45,views:234},{id:2,question:"How to integrate with third-party APIs?",answer:"Our API integration guide provides step-by-step instructions. Visit the Developer section in Settings for API keys and documentation.",category:"Technical",helpful:38,views:189},{id:3,question:"What payment methods do you accept?",answer:"We accept all major credit cards (Visa, Mastercard, Amex), PayPal, M-Pesa, and bank transfers. All transactions are encrypted and secure.",category:"Billing",helpful:52,views:312},{id:4,question:"How do I export my data?",answer:"Navigate to Reports > Export Data. Choose your format (CSV, PDF, Excel) and date range. Your export will download automatically.",category:"Data",helpful:29,views:156},{id:5,question:"Can I customize my dashboard?",answer:"Yes! Click the Settings icon on your dashboard. You can rearrange widgets, choose themes, and customize which metrics to display.",category:"Customization",helpful:67,views:421}])}},lt=async()=>{try{const ke=await kc.getTickets();T(Array.isArray(ke)?ke:[]),console.log(" Tickets loaded:",ke.length)}catch(ke){console.error(" Error loading tickets:",ke),T([])}},ms=async()=>{if(!f.trim())return;const ke={id:Date.now(),sender:"user",senderName:t?.name,message:f,timestamp:new Date,userId:t?._id,agentId:b?.id};u(we=>[...we,ke]),x(""),s&&a&&s.emit("send_support_message",ke);try{await kc.sendMessage(b?.id,f)}catch(we){console.error("Failed to save message:",we)}},is=()=>{oe.current?.scrollIntoView({behavior:"smooth"})},Ms=ke=>{const we=ke.target.files[0];if(we){const nt={id:Date.now(),sender:"user",message:`Uploaded file: ${we.name}`,timestamp:new Date,attachment:{name:we.name,size:we.size,type:we.type}};u(Ke=>[...Ke,nt]),D.success("File uploaded successfully")}},ys=async()=>{try{const ke=await navigator.mediaDevices.getUserMedia({video:{width:1280,height:720},audio:!0});ee(ke),V(!0),Xe.current&&(Xe.current.srcObject=ke);const we=new RTCPeerConnection({iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:"stun:stun1.l.google.com:19302"}]});ke.getTracks().forEach(Ke=>{we.addTrack(Ke,ke)}),we.ontrack=Ke=>{X(Ke.streams[0]),yt.current&&(yt.current.srcObject=Ke.streams[0])},we.onicecandidate=Ke=>{Ke.candidate&&s&&s.emit("ice_candidate",{candidate:Ke.candidate,userId:t?._id,agentId:b?.id})},J(we);const nt=await we.createOffer();await we.setLocalDescription(nt),s&&s.emit("video_call_offer",{offer:nt,userId:t?._id,agentId:b?.id}),D.success("Video call started with "+b?.name)}catch(ke){console.error("Error starting video call:",ke),D.error("Failed to access camera/microphone. Please check permissions.")}},Xs=()=>{xs(),s&&s.emit("end_video_call",{userId:t?._id,agentId:b?.id}),V(!1),D.info("Video call ended")},xs=()=>{se&&(se.getTracks().forEach(ke=>ke.stop()),ee(null)),O&&(O.close(),J(null)),X(null),be(!0),ve(!0)},Rt=()=>{if(se){const ke=se.getVideoTracks()[0];ke&&(ke.enabled=!ke.enabled,be(ke.enabled),D.info(ke.enabled?"Camera on":"Camera off"))}},sa=()=>{if(se){const ke=se.getAudioTracks()[0];ke&&(ke.enabled=!ke.enabled,ve(ke.enabled),D.info(ke.enabled?"Microphone on":"Microphone off"))}},Te=async ke=>{if(O)try{await O.setRemoteDescription(new RTCSessionDescription(ke.offer));const we=await O.createAnswer();await O.setLocalDescription(we),s&&s.emit("video_call_answer",{answer:we,userId:t?._id,agentId:ke.userId})}catch(we){console.error("Error handling video offer:",we)}},je=async ke=>{if(O)try{await O.setRemoteDescription(new RTCSessionDescription(ke.answer))}catch(we){console.error("Error handling video answer:",we)}},fe=async ke=>{if(O)try{await O.addIceCandidate(new RTCIceCandidate(ke.candidate))}catch(we){console.error("Error adding ICE candidate:",we)}},Ue=()=>{xs(),V(!1),D.info("Call ended by agent")},st=()=>{P(!_),D.info(_?"Recording stopped":"Recording started")},Dt=async()=>{if(!B.subject.trim()||!B.description.trim()){D.error("Please fill in all required fields");return}try{const ke=await kc.createTicket({subject:B.subject,description:B.description,priority:B.priority,userId:t?._id});T(we=>[ke,...we]),ae({subject:"",description:"",priority:"medium"}),q(!1),D.success("Support ticket created successfully!")}catch(ke){console.error("Error creating ticket:",ke);const we={id:`TKT-${Date.now()}`,subject:B.subject,status:"open",priority:B.priority,created:new Date,lastUpdate:new Date,agent:"Unassigned"};T(nt=>[we,...nt]),ae({subject:"",description:"",priority:"medium"}),q(!1),D.success("Support ticket created successfully!")}},Pt=(ke,we)=>{F(nt=>nt.map(Ke=>Ke.id===ke?{...Ke,helpful:Ke.helpful+(we?1:-1)}:Ke)),D.success(we?"Marked as helpful!":"Feedback recorded")},Jt=async ke=>{ke.preventDefault();const we=new FormData(ke.target),nt=we.get("subject"),Ke=we.get("message");try{await kc.createTicket({subject:nt,description:Ke,priority:"medium",userId:t?._id}),D.success("Message sent! We'll respond shortly."),ke.target.reset()}catch{const wt={id:`TKT-${Date.now()}`,subject:nt,status:"open",priority:"medium",created:new Date,lastUpdate:new Date,agent:"Unassigned"};T(Xt=>[wt,...Xt]),D.success("Message sent! We'll respond shortly."),ke.target.reset()}},as=G.filter(ke=>ke.question.toLowerCase().includes(k.toLowerCase())||ke.answer.toLowerCase().includes(k.toLowerCase()));return U?e.jsx("div",{className:"p-6 max-w-7xl mx-auto",children:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto"}),e.jsx("p",{className:"text-muted-foreground",children:"Loading support system..."})]})})}):de?e.jsx("div",{className:"p-6 max-w-7xl mx-auto",children:e.jsx(K,{className:"border-red-200 bg-red-50",children:e.jsx(Y,{className:"flex items-center justify-center py-12",children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx(ks,{className:"h-12 w-12 text-red-500 mx-auto"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-red-700",children:"Support System Error"}),e.jsx("p",{className:"text-sm text-red-600",children:de})]}),e.jsxs(R,{onClick:gt,variant:"outline",children:[e.jsx(cs,{className:"mr-2 h-4 w-4"}),"Try Again"]})]})})})}):e.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Help & Support"}),e.jsxs("p",{className:"text-muted-foreground mt-2",children:["Get instant help from our support team  ",a?" Connected":" Offline"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-8",children:[e.jsx(K,{className:"cursor-pointer hover:shadow-lg transition-all hover:border-primary group",onClick:()=>r("/dashboard/sessions"),children:e.jsxs(Y,{className:"p-6",children:[e.jsx("div",{className:"bg-blue-50 dark:bg-blue-950 rounded-lg p-3 w-fit mb-3 group-hover:scale-110 transition-transform",children:e.jsx(Aa,{className:"h-6 w-6 text-blue-500"})}),e.jsxs("h3",{className:"font-semibold mb-1 flex items-center gap-2",children:["Live Sessions",e.jsx(De,{className:"bg-green-500 text-white text-[10px] px-1.5 py-0",children:"New"})]}),e.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Schedule video meetings & webinars"}),e.jsx(R,{variant:"link",className:"p-0 h-auto text-sm",children:"Schedule Now "})]})}),e.jsx(K,{className:"cursor-pointer hover:shadow-lg transition-all hover:border-primary",onClick:()=>r("/dashboard/messages"),children:e.jsxs(Y,{className:"p-6",children:[e.jsx("div",{className:"bg-purple-50 dark:bg-purple-950 rounded-lg p-3 w-fit mb-3",children:e.jsx(ta,{className:"h-6 w-6 text-purple-500"})}),e.jsx("h3",{className:"font-semibold mb-1",children:"Messages"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Direct messaging with team"}),e.jsx(R,{variant:"link",className:"p-0 h-auto text-sm",children:"Open Messages "})]})}),e.jsx(K,{className:"cursor-pointer hover:shadow-lg transition-all hover:border-primary",children:e.jsxs(Y,{className:"p-6",children:[e.jsx("div",{className:"bg-green-50 dark:bg-green-950 rounded-lg p-3 w-fit mb-3",children:e.jsx(ba,{className:"h-6 w-6 text-green-500"})}),e.jsx("h3",{className:"font-semibold mb-1",children:"Support Tickets"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Track your support requests"}),e.jsx(R,{variant:"link",className:"p-0 h-auto text-sm",onClick:()=>o("tickets"),children:"View Tickets "})]})}),e.jsx(K,{className:"cursor-pointer hover:shadow-lg transition-all hover:border-primary",children:e.jsxs(Y,{className:"p-6",children:[e.jsx("div",{className:"bg-orange-50 dark:bg-orange-950 rounded-lg p-3 w-fit mb-3",children:e.jsx(Ws,{className:"h-6 w-6 text-orange-500"})}),e.jsx("h3",{className:"font-semibold mb-1",children:"Contact Us"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Phone, email & social media"}),e.jsx(R,{variant:"link",className:"p-0 h-auto text-sm",onClick:()=>o("contact"),children:"Get in Touch "})]})})]}),e.jsxs(ja,{value:i,onValueChange:o,className:"space-y-6",children:[e.jsxs(Sa,{className:"grid w-full grid-cols-4",children:[e.jsxs(ft,{value:"chat",className:"flex items-center gap-2",children:[e.jsx(ta,{className:"h-4 w-4"}),"Live Chat"]}),e.jsxs(ft,{value:"faq",className:"flex items-center gap-2",children:[e.jsx(xv,{className:"h-4 w-4"}),"FAQ"]}),e.jsxs(ft,{value:"tickets",className:"flex items-center gap-2",children:[e.jsx(ba,{className:"h-4 w-4"}),"Support Tickets"]}),e.jsxs(ft,{value:"contact",className:"flex items-center gap-2",children:[e.jsx(Ws,{className:"h-4 w-4"}),"Contact"]})]}),e.jsx(pt,{value:"chat",className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[e.jsxs(K,{className:"lg:col-span-1",children:[e.jsx(xe,{children:e.jsxs(pe,{className:"flex items-center gap-2",children:[e.jsx(Zt,{className:"h-5 w-5"}),"Support Team"]})}),e.jsx(Y,{className:"space-y-4",children:g.map(ke=>e.jsxs("div",{className:`p-3 rounded-lg cursor-pointer transition-colors border ${b?.id===ke.id?"bg-primary/10 border-primary":"hover:bg-muted border-transparent"}`,onClick:()=>N(ke),children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"relative",children:[e.jsxs(hr,{className:"h-10 w-10",children:[e.jsx(On,{src:ke.avatar}),e.jsx(fr,{children:ke.name.split(" ").map(we=>we[0]).join("")})]}),e.jsx("div",{className:`absolute -bottom-1 -right-1 w-3 h-3 rounded-full border-2 border-white ${ke.status==="online"?"bg-green-500":ke.status==="busy"?"bg-yellow-500":"bg-gray-400"}`})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-medium text-sm",children:ke.name}),e.jsx("p",{className:"text-xs text-muted-foreground",children:ke.role}),e.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[e.jsx(Ja,{className:"h-3 w-3 text-yellow-500 fill-current"}),e.jsx("span",{className:"text-xs text-muted-foreground",children:ke.rating})]})]})]}),e.jsx("div",{className:"mt-2",children:ke.specialties&&Array.isArray(ke.specialties)&&ke.specialties.map(we=>e.jsx(De,{variant:"secondary",className:"text-xs mr-1 mb-1",children:we},we))})]},ke.id))})]}),e.jsxs(K,{className:"lg:col-span-3",children:[e.jsx(xe,{className:"border-b",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(hr,{className:"h-10 w-10",children:[e.jsx(On,{src:b?.avatar}),e.jsx(fr,{children:b?.name.split(" ").map(ke=>ke[0]).join("")})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:b?.name}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${S==="online"?"bg-green-500":"bg-muted-foreground"}`}),e.jsx("span",{className:"text-sm text-muted-foreground capitalize",children:S})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(R,{variant:"outline",size:"sm",onClick:ys,className:"flex items-center gap-2",children:[e.jsx(Aa,{className:"h-4 w-4"}),"Video Call"]}),e.jsxs(R,{variant:"outline",size:"sm",onClick:st,className:`flex items-center gap-2 ${_?"text-red-600":""}`,children:[_?e.jsx(nf,{className:"h-4 w-4"}):e.jsx(lf,{className:"h-4 w-4"}),_?"Stop":"Record"]})]})]})}),e.jsxs(Y,{className:"p-0",children:[e.jsx(kr,{className:"h-96 p-4",children:e.jsxs("div",{className:"space-y-4",children:[c.map(ke=>e.jsx("div",{className:`flex ${ke.sender==="user"?"justify-end":"justify-start"}`,children:e.jsxs("div",{className:`max-w-xs lg:max-w-md px-4 py-2 rounded-lg ${ke.sender==="user"?"bg-primary text-primary-foreground":"bg-muted text-foreground"}`,children:[ke.sender==="agent"&&e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsxs(hr,{className:"h-6 w-6",children:[e.jsx(On,{src:ke.agent?.avatar}),e.jsx(fr,{className:"text-xs",children:ke.agent?.name.split(" ").map(we=>we[0]).join("")})]}),e.jsx("span",{className:"text-xs font-medium",children:ke.agent?.name})]}),e.jsx("p",{className:"text-sm",children:ke.message}),ke.attachment&&e.jsxs("div",{className:"mt-2 p-2 bg-white bg-opacity-20 rounded flex items-center gap-2",children:[e.jsx(Yc,{className:"h-4 w-4"}),e.jsx("span",{className:"text-xs",children:ke.attachment.name})]}),e.jsx("p",{className:"text-xs opacity-70 mt-1",children:ke.timestamp.toLocaleTimeString()})]})},ke.id)),h&&e.jsx("div",{className:"flex justify-start",children:e.jsx("div",{className:"bg-muted px-4 py-2 rounded-lg",children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-2 h-2 bg-muted-foreground rounded-full animate-bounce"}),e.jsx("div",{className:"w-2 h-2 bg-muted-foreground rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),e.jsx("div",{className:"w-2 h-2 bg-muted-foreground rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})})}),e.jsx("div",{ref:oe})]})}),e.jsx("div",{className:"border-t p-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"file",ref:Pe,onChange:Ms,className:"hidden"}),e.jsx(R,{variant:"outline",size:"sm",onClick:()=>Pe.current?.click(),children:e.jsx(Yc,{className:"h-4 w-4"})}),e.jsx(me,{value:f,onChange:ke=>x(ke.target.value),placeholder:"Type your message...",onKeyPress:ke=>ke.key==="Enter"&&ms(),className:"flex-1"}),e.jsx(R,{onClick:ms,disabled:!f.trim(),children:e.jsx(Fa,{className:"h-4 w-4"})})]})})]})]})]})}),e.jsx(pt,{value:"faq",className:"space-y-6",children:e.jsxs(K,{children:[e.jsxs(xe,{children:[e.jsx(pe,{children:"Frequently Asked Questions"}),e.jsxs("div",{className:"relative",children:[e.jsx(oa,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(me,{placeholder:"Search FAQs...",value:k,onChange:ke=>A(ke.target.value),className:"pl-10"})]})]}),e.jsx(Y,{children:e.jsx("div",{className:"space-y-4",children:as.map(ke=>e.jsx("div",{className:"border rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-medium text-foreground mb-2",children:ke.question}),e.jsx("p",{className:"text-muted-foreground text-sm mb-3",children:ke.answer}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[e.jsx(De,{variant:"secondary",children:ke.category}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Ao,{className:"h-4 w-4"}),ke.helpful]}),e.jsxs("span",{children:[ke.views," views"]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(R,{variant:"ghost",size:"sm",onClick:()=>Pt(ke.id,!0),children:e.jsx(Ao,{className:"h-4 w-4"})}),e.jsx(R,{variant:"ghost",size:"sm",onClick:()=>Pt(ke.id,!1),children:e.jsx(US,{className:"h-4 w-4"})})]})]})},ke.id))})})]})}),e.jsxs(pt,{value:"tickets",className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Support Tickets"}),e.jsxs(Bt,{open:W,onOpenChange:q,children:[e.jsx(wa,{asChild:!0,children:e.jsxs(R,{className:"flex items-center gap-2",children:[e.jsx(Gs,{className:"h-4 w-4"}),"Create New Ticket"]})}),e.jsxs(zt,{className:"sm:max-w-[500px]",children:[e.jsxs(Ut,{children:[e.jsx(Vt,{children:"Create Support Ticket"}),e.jsx(es,{children:"Describe your issue and we'll get back to you as soon as possible."})]}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(te,{htmlFor:"ticket-subject",children:"Subject *"}),e.jsx(me,{id:"ticket-subject",placeholder:"Brief description of your issue",value:B.subject,onChange:ke=>ae(we=>({...we,subject:ke.target.value}))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(te,{htmlFor:"ticket-priority",children:"Priority"}),e.jsxs(Mt,{value:B.priority,onValueChange:ke=>ae(we=>({...we,priority:ke})),children:[e.jsx(Lt,{children:e.jsx(Ft,{placeholder:"Select priority"})}),e.jsxs(It,{children:[e.jsx(Ae,{value:"low",children:"Low"}),e.jsx(Ae,{value:"medium",children:"Medium"}),e.jsx(Ae,{value:"high",children:"High"}),e.jsx(Ae,{value:"urgent",children:"Urgent"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(te,{htmlFor:"ticket-description",children:"Description *"}),e.jsx(As,{id:"ticket-description",placeholder:"Provide detailed information about your issue",rows:5,value:B.description,onChange:ke=>ae(we=>({...we,description:ke.target.value}))})]})]}),e.jsxs(Ps,{children:[e.jsx(R,{variant:"outline",onClick:()=>q(!1),children:"Cancel"}),e.jsx(R,{onClick:Dt,children:"Create Ticket"})]})]})]})]}),e.jsx("div",{className:"grid gap-4",children:E.map(ke=>e.jsx(K,{children:e.jsx(Y,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium",children:ke.subject}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Ticket #",ke.id]})]}),e.jsx(De,{variant:ke.status==="open"?"destructive":"default",children:ke.status}),e.jsx(De,{variant:ke.priority==="high"?"destructive":"secondary",children:ke.priority})]}),e.jsxs("div",{className:"text-right text-sm text-muted-foreground",children:[e.jsxs("p",{children:["Assigned to: ",ke.agent]}),e.jsxs("p",{children:["Last update: ",ke.lastUpdate.toLocaleDateString()]})]})]})})},ke.id))})]}),e.jsx(pt,{value:"contact",className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(K,{children:[e.jsx(xe,{children:e.jsx(pe,{children:"Contact Information"})}),e.jsxs(Y,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ws,{className:"h-5 w-5 text-blue-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Phone Support"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"+254 758 175 275"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Available 24/7"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ks,{className:"h-5 w-5 text-green-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Email Support"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"ominbizsolutions@gmail.com"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Response within 2 hours"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Aa,{className:"h-5 w-5 text-purple-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Video Support"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Schedule a call"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Mon-Fri 9AM-6PM EST"})]})]})]})]}),e.jsxs(K,{children:[e.jsxs(xe,{children:[e.jsx(pe,{children:"Quick Contact"}),e.jsx(ot,{children:"Send us a message and we'll create a ticket for you"})]}),e.jsx(Y,{children:e.jsxs("form",{onSubmit:Jt,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(te,{htmlFor:"contact-subject",children:"Subject *"}),e.jsx(me,{id:"contact-subject",name:"subject",placeholder:"How can we help?",required:!0})]}),e.jsxs("div",{children:[e.jsx(te,{htmlFor:"contact-message",children:"Message *"}),e.jsx(As,{id:"contact-message",name:"message",placeholder:"Describe your issue...",rows:4,required:!0})]}),e.jsxs(R,{type:"submit",className:"w-full",children:[e.jsx(Fa,{className:"h-4 w-4 mr-2"}),"Send Message"]})]})})]})]})})]}),z&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-95 flex items-center justify-center z-50",children:e.jsxs("div",{className:"w-full max-w-6xl mx-4 h-[90vh] flex flex-col",children:[e.jsxs("div",{className:"bg-gray-900 text-white p-4 rounded-t-lg flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"relative",children:[e.jsxs(hr,{className:"h-10 w-10",children:[e.jsx(On,{src:b?.avatar}),e.jsx(fr,{children:b?.name.split(" ").map(ke=>ke[0]).join("")})]}),e.jsx("div",{className:"absolute -bottom-1 -right-1 w-3 h-3 rounded-full bg-green-500 border-2 border-gray-900 animate-pulse"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:b?.name}),e.jsx("p",{className:"text-xs text-gray-400",children:"In call"})]})]}),e.jsxs(R,{variant:"destructive",onClick:Xs,children:[e.jsx(jr,{className:"h-4 w-4 mr-2"}),"End Call"]})]}),e.jsxs("div",{className:"flex-1 relative bg-gray-800 rounded-b-lg overflow-hidden",children:[e.jsx("video",{ref:yt,autoPlay:!0,playsInline:!0,className:"w-full h-full object-cover"}),!L&&e.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center bg-gray-800",children:[e.jsxs(hr,{className:"h-32 w-32 mb-4",children:[e.jsx(On,{src:b?.avatar}),e.jsx(fr,{className:"text-4xl",children:b?.name.split(" ").map(ke=>ke[0]).join("")})]}),e.jsxs("p",{className:"text-white text-lg",children:["Connecting to ",b?.name,"..."]}),e.jsxs("div",{className:"flex gap-2 mt-4",children:[e.jsx("div",{className:"w-2 h-2 bg-white rounded-full animate-bounce"}),e.jsx("div",{className:"w-2 h-2 bg-white rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),e.jsx("div",{className:"w-2 h-2 bg-white rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})]}),e.jsxs("div",{className:"absolute bottom-4 right-4 w-64 h-48 bg-gray-900 rounded-lg overflow-hidden border-2 border-gray-600 shadow-2xl",children:[e.jsx("video",{ref:Xe,autoPlay:!0,playsInline:!0,muted:!0,className:"w-full h-full object-cover"}),e.jsx("div",{className:"absolute bottom-2 left-2 bg-black bg-opacity-70 px-2 py-1 rounded text-xs text-white",children:"You"}),!ie&&e.jsx("div",{className:"absolute inset-0 bg-gray-900 flex items-center justify-center",children:e.jsx(ug,{className:"h-12 w-12 text-gray-500"})})]}),e.jsxs("div",{className:"absolute bottom-4 left-1/2 transform -translate-x-1/2 flex items-center gap-3 bg-gray-900 bg-opacity-90 px-6 py-3 rounded-full",children:[e.jsx(R,{variant:Le?"secondary":"destructive",size:"icon",className:"rounded-full w-12 h-12",onClick:sa,children:Le?e.jsx(lf,{className:"h-5 w-5"}):e.jsx(nf,{className:"h-5 w-5"})}),e.jsx(R,{variant:ie?"secondary":"destructive",size:"icon",className:"rounded-full w-12 h-12",onClick:Rt,children:ie?e.jsx(Aa,{className:"h-5 w-5"}):e.jsx(ug,{className:"h-5 w-5"})}),e.jsx(R,{variant:"destructive",size:"icon",className:"rounded-full w-14 h-14",onClick:Xs,children:e.jsx(Ws,{className:"h-6 w-6 rotate-135"})})]}),e.jsxs("div",{className:"absolute top-4 left-4 flex items-center gap-2 bg-black bg-opacity-70 px-3 py-2 rounded-full",children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${a?"bg-green-500 animate-pulse":"bg-red-500"}`}),e.jsx("span",{className:"text-xs text-white",children:a?"Connected":"Connecting..."})]})]})]})})]})},eG=()=>{const[t,s]=v.useState([]),[a,r]=v.useState(!0),[i,o]=v.useState(!1),[c,u]=v.useState(null),{socket:f,connected:x}=ha(),[h,p]=v.useState({type:"feedback",category:"general",subject:"",message:"",name:"",email:"",phone:"",priority:"normal",contactMethod:"email"});v.useEffect(()=>{g()},[]),v.useEffect(()=>{if(!(!f||!x))return f.on("feedback_created",k=>{s(A=>[k.feedback,...A]),D.success("New feedback received")}),f.on("feedback_updated",k=>{s(A=>A.map(G=>G._id===k.feedback._id?k.feedback:G)),c?._id===k.feedback._id&&u(k.feedback)}),()=>{f.off("feedback_created"),f.off("feedback_updated")}},[f,x,c]);const g=async()=>{try{r(!0);const k=localStorage.getItem("token"),{data:A}=await Ne.get("/feedback",{headers:{Authorization:`Bearer ${k}`}});s(A.feedback||[])}catch(k){console.error("Error fetching feedback:",k),D.error("Failed to load feedback")}finally{r(!1)}},y=async k=>{if(k.preventDefault(),!h.subject||!h.message||!h.email){D.error("Please fill in all required fields");return}try{const A=localStorage.getItem("token"),{data:G}=await Ne.post("/feedback",h,{headers:{Authorization:`Bearer ${A}`}});D.success("Feedback submitted successfully!"),s(F=>[G.feedback,...F]),o(!1),N()}catch(A){D.error("Failed to submit feedback"),console.error("Error:",A)}},b=async(k,A)=>{try{const G=localStorage.getItem("token");await Ne.post(`/feedback/${k}/response`,{response:A,status:"resolved"},{headers:{Authorization:`Bearer ${G}`}}),D.success("Response sent successfully"),g()}catch{D.error("Failed to send response")}},N=()=>{p({type:"feedback",category:"general",subject:"",message:"",name:"",email:"",phone:"",priority:"normal",contactMethod:"email"})},S=k=>{const A={pending:"bg-yellow-100 text-yellow-800",in_progress:"bg-blue-100 text-blue-800",resolved:"bg-green-100 text-green-800",closed:"bg-gray-100 text-gray-800"};return e.jsx(De,{className:A[k]||A.pending,children:k})},C=k=>{switch(k){case"complaint":return e.jsx(ks,{className:"h-5 w-5 text-red-600"});case"feedback":return e.jsx(xi,{className:"h-5 w-5 text-blue-600"});case"suggestion":return e.jsx(Ao,{className:"h-5 w-5 text-green-600"});case"question":return e.jsx(ba,{className:"h-5 w-5 text-purple-600"});default:return e.jsx(xi,{className:"h-5 w-5"})}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Support & Feedback System"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage client feedback, complaints, and support requests"})]}),e.jsxs(R,{onClick:()=>o(!0),children:[e.jsx(Fa,{className:"mr-2 h-4 w-4"}),"New Feedback"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx(K,{children:e.jsx(Y,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Total"}),e.jsx("p",{className:"text-2xl font-bold",children:t.length})]}),e.jsx(xi,{className:"h-8 w-8 text-blue-600"})]})})}),e.jsx(K,{children:e.jsx(Y,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Pending"}),e.jsx("p",{className:"text-2xl font-bold",children:t.filter(k=>k.status==="pending").length})]}),e.jsx(ts,{className:"h-8 w-8 text-yellow-600"})]})})}),e.jsx(K,{children:e.jsx(Y,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"In Progress"}),e.jsx("p",{className:"text-2xl font-bold",children:t.filter(k=>k.status==="in_progress").length})]}),e.jsx(ks,{className:"h-8 w-8 text-blue-600"})]})})}),e.jsx(K,{children:e.jsx(Y,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Resolved"}),e.jsx("p",{className:"text-2xl font-bold",children:t.filter(k=>k.status==="resolved").length})]}),e.jsx(us,{className:"h-8 w-8 text-green-600"})]})})})]}),e.jsxs(K,{children:[e.jsxs(xe,{children:[e.jsx(pe,{children:"Feedback & Support Requests"}),e.jsxs(ot,{children:["Real-time updates  ",x?" Connected":" Disconnected"]})]}),e.jsx(Y,{children:e.jsxs(ja,{defaultValue:"all",children:[e.jsxs(Sa,{children:[e.jsx(ft,{value:"all",children:"All"}),e.jsx(ft,{value:"feedback",children:"Feedback"}),e.jsx(ft,{value:"complaint",children:"Complaints"}),e.jsx(ft,{value:"suggestion",children:"Suggestions"})]}),e.jsx(pt,{value:"all",className:"space-y-4",children:t.map(k=>e.jsx(K,{className:"cursor-pointer hover:shadow-md transition-shadow",onClick:()=>u(k),children:e.jsx(Y,{className:"p-4",children:e.jsxs("div",{className:"flex items-start gap-4",children:[C(k.type),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h3",{className:"font-semibold",children:k.subject}),S(k.status)]}),e.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2 mb-2",children:k.message}),e.jsxs("div",{className:"flex items-center gap-4 text-xs text-muted-foreground",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(la,{className:"h-3 w-3"}),k.name||k.email]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Ks,{className:"h-3 w-3"}),k.email]}),k.phone&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Ws,{className:"h-3 w-3"}),k.phone]}),e.jsx("span",{children:new Date(k.createdAt).toLocaleDateString()})]})]})]})})},k._id))})]})})]}),e.jsx(Bt,{open:i,onOpenChange:o,children:e.jsxs(zt,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsx(Ut,{children:e.jsx(Vt,{children:"Submit Feedback"})}),e.jsxs("form",{onSubmit:y,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(te,{children:"Type *"}),e.jsxs(Mt,{value:h.type,onValueChange:k=>p({...h,type:k}),children:[e.jsx(Lt,{children:e.jsx(Ft,{})}),e.jsxs(It,{children:[e.jsx(Ae,{value:"feedback",children:"Feedback"}),e.jsx(Ae,{value:"complaint",children:"Complaint"}),e.jsx(Ae,{value:"suggestion",children:"Suggestion"}),e.jsx(Ae,{value:"question",children:"Question"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(te,{children:"Priority"}),e.jsxs(Mt,{value:h.priority,onValueChange:k=>p({...h,priority:k}),children:[e.jsx(Lt,{children:e.jsx(Ft,{})}),e.jsxs(It,{children:[e.jsx(Ae,{value:"low",children:"Low"}),e.jsx(Ae,{value:"normal",children:"Normal"}),e.jsx(Ae,{value:"high",children:"High"}),e.jsx(Ae,{value:"urgent",children:"Urgent"})]})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(te,{children:"Subject *"}),e.jsx(me,{value:h.subject,onChange:k=>p({...h,subject:k.target.value}),placeholder:"Brief description of your feedback",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(te,{children:"Message *"}),e.jsx(As,{value:h.message,onChange:k=>p({...h,message:k.target.value}),placeholder:"Detailed message...",rows:5,required:!0})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(te,{children:"Name"}),e.jsx(me,{value:h.name,onChange:k=>p({...h,name:k.target.value}),placeholder:"Your name"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(te,{children:"Email *"}),e.jsx(me,{type:"email",value:h.email,onChange:k=>p({...h,email:k.target.value}),placeholder:"your@email.com",required:!0})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(te,{children:"Phone (Optional)"}),e.jsx(me,{type:"tel",value:h.phone,onChange:k=>p({...h,phone:k.target.value}),placeholder:"+254 XXX XXX XXX"})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(R,{type:"button",variant:"outline",onClick:()=>o(!1),children:"Cancel"}),e.jsxs(R,{type:"submit",children:[e.jsx(Fa,{className:"mr-2 h-4 w-4"}),"Submit Feedback"]})]})]})]})}),c&&e.jsx(Bt,{open:!!c,onOpenChange:()=>u(null),children:e.jsxs(zt,{className:"max-w-3xl",children:[e.jsx(Ut,{children:e.jsxs(Vt,{className:"flex items-center gap-2",children:[C(c.type),c.subject]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[S(c.status),e.jsxs(De,{variant:"outline",children:[c.priority," priority"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-semibold",children:"Message:"}),e.jsx("p",{className:"text-muted-foreground",children:c.message})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 p-4 bg-muted rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Contact Information:"}),e.jsx("p",{className:"text-sm",children:c.name}),e.jsx("p",{className:"text-sm",children:c.email}),c.phone&&e.jsx("p",{className:"text-sm",children:c.phone})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Submitted:"}),e.jsx("p",{className:"text-sm",children:new Date(c.createdAt).toLocaleString()})]})]}),c.response&&e.jsxs("div",{className:"p-4 bg-green-50 rounded-lg",children:[e.jsx("h4",{className:"font-semibold text-green-800 mb-2",children:"Response:"}),e.jsx("p",{className:"text-sm text-green-700",children:c.response})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(R,{variant:"outline",onClick:()=>u(null),children:"Close"}),c.status!=="resolved"&&e.jsx(R,{onClick:()=>{const k=prompt("Enter your response:");k&&(b(c._id,k),u(null))},children:"Send Response"})]})]})]})})]})},tG=()=>{const[t,s]=v.useState(""),[a,r]=v.useState("discussions"),i=[{id:1,title:"How to integrate payment gateway?",author:"John Doe",avatar:"JD",replies:12,likes:24,status:"answered",category:"Integration",timestamp:"2 hours ago"},{id:2,title:"Best practices for inventory management",author:"Jane Smith",avatar:"JS",replies:8,likes:15,status:"open",category:"Best Practices",timestamp:"5 hours ago"},{id:3,title:"Video call feature not working",author:"Mike Johnson",avatar:"MJ",replies:5,likes:7,status:"resolved",category:"Technical",timestamp:"1 day ago"}],o=[{name:"Sarah Wilson",posts:145,reputation:2840,avatar:"SW"},{name:"David Brown",posts:128,reputation:2350,avatar:"DB"},{name:"Emma Davis",posts:98,reputation:1920,avatar:"ED"}],c=[{title:"Getting Started Guide",type:"Documentation",icon:ui,link:"#",description:"Complete guide to get started with OmniBiz"},{title:"Video Tutorials",type:"Video",icon:Aa,link:"#",description:"Step-by-step video tutorials"},{title:"GitHub Repository",type:"Code",icon:Bc,link:"https://github.com/omnibiz",description:"Contribute to our open-source project"},{title:"API Documentation",type:"Technical",icon:ui,link:"#",description:"Complete API reference and examples"}],u=[{name:"GitHub",icon:Bc,link:"https://github.com/omnibiz-solutions",color:"text-gray-800"},{name:"Twitter",icon:jv,link:"https://twitter.com/omnibiz_solutions",color:"text-blue-500"},{name:"LinkedIn",icon:vv,link:"https://linkedin.com/company/omnibiz-solutions",color:"text-blue-700"},{name:"Email",icon:Ks,link:"mailto:ominbizsolutions@gmail.com",color:"text-red-600"}],f=x=>{const h={answered:"bg-green-100 text-green-800",open:"bg-blue-100 text-blue-800",resolved:"bg-purple-100 text-purple-800"};return e.jsx(De,{className:h[x],children:x})};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row items-start md:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold",children:"Community Support"}),e.jsx("p",{className:"text-muted-foreground",children:"Connect with other users, share knowledge, and get help"})]}),e.jsxs(R,{children:[e.jsx(ta,{className:"mr-2 h-4 w-4"}),"Start Discussion"]})]}),e.jsx(K,{children:e.jsx(Y,{className:"pt-6",children:e.jsxs("div",{className:"relative",children:[e.jsx(oa,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),e.jsx(me,{placeholder:"Search discussions, documentation, and more...",className:"pl-10",value:t,onChange:x=>s(x.target.value)})]})})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx(K,{children:e.jsx(Y,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Active Users"}),e.jsx("p",{className:"text-2xl font-bold",children:"1,234"})]}),e.jsx(Zt,{className:"h-8 w-8 text-blue-600"})]})})}),e.jsx(K,{children:e.jsx(Y,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Discussions"}),e.jsx("p",{className:"text-2xl font-bold",children:"892"})]}),e.jsx(xi,{className:"h-8 w-8 text-green-600"})]})})}),e.jsx(K,{children:e.jsx(Y,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Resources"}),e.jsx("p",{className:"text-2xl font-bold",children:"156"})]}),e.jsx(ui,{className:"h-8 w-8 text-purple-600"})]})})}),e.jsx(K,{children:e.jsx(Y,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Contributors"}),e.jsx("p",{className:"text-2xl font-bold",children:"342"})]}),e.jsx(gv,{className:"h-8 w-8 text-orange-600"})]})})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"lg:col-span-2 space-y-6",children:e.jsxs(K,{children:[e.jsxs(xe,{children:[e.jsx(pe,{children:"Community Discussions"}),e.jsx(ot,{children:"Join the conversation and help others"})]}),e.jsx(Y,{children:e.jsxs(ja,{value:a,onValueChange:r,children:[e.jsxs(Sa,{className:"grid w-full grid-cols-3",children:[e.jsx(ft,{value:"discussions",children:"Discussions"}),e.jsx(ft,{value:"resources",children:"Resources"}),e.jsx(ft,{value:"videos",children:"Videos"})]}),e.jsx(pt,{value:"discussions",className:"space-y-4",children:i.map(x=>e.jsx(K,{className:"hover:shadow-md transition-shadow cursor-pointer",children:e.jsx(Y,{className:"p-4",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx(hr,{children:e.jsx(fr,{children:x.avatar})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold hover:text-primary",children:x.title}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["by ",x.author,"  ",x.timestamp]})]}),f(x.status)]}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[e.jsx(De,{variant:"outline",children:x.category}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(ta,{className:"h-3 w-3"}),x.replies," replies"]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Ao,{className:"h-3 w-3"}),x.likes," likes"]})]})]})]})})},x.id))}),e.jsx(pt,{value:"resources",className:"space-y-4",children:c.map((x,h)=>{const p=x.icon;return e.jsx(K,{className:"hover:shadow-md transition-shadow cursor-pointer",children:e.jsx(Y,{className:"p-4",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"p-2 bg-primary/10 rounded-lg",children:e.jsx(p,{className:"h-6 w-6 text-primary"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h4",{className:"font-semibold",children:x.title}),e.jsx(_l,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:x.description}),e.jsx(De,{variant:"outline",className:"mt-2",children:x.type})]})]})})},h)})}),e.jsx(pt,{value:"videos",className:"space-y-4",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[1,2,3,4].map(x=>e.jsxs(K,{className:"overflow-hidden",children:[e.jsx("div",{className:"aspect-video bg-gradient-to-br from-primary/20 to-secondary/20 flex items-center justify-center",children:e.jsx(Aa,{className:"h-12 w-12 text-primary"})}),e.jsxs(Y,{className:"p-4",children:[e.jsxs("h4",{className:"font-semibold mb-1",children:["Video Tutorial ",x]}),e.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Learn how to use OmniBiz effectively"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-xs text-muted-foreground",children:"12:34"}),e.jsx(R,{size:"sm",variant:"ghost",children:"Watch"})]})]})]},x))})})]})})]})}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(K,{children:[e.jsx(xe,{children:e.jsx(pe,{className:"text-lg",children:"Top Contributors"})}),e.jsx(Y,{className:"space-y-4",children:o.map((x,h)=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(hr,{children:e.jsx(fr,{children:x.avatar})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-sm",children:x.name}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[x.posts," posts  ",x.reputation," rep"]})]}),e.jsx(Ja,{className:"h-4 w-4 text-yellow-500"})]},h))})]}),e.jsxs(K,{children:[e.jsx(xe,{children:e.jsx(pe,{className:"text-lg",children:"Connect With Us"})}),e.jsx(Y,{className:"space-y-3",children:u.map((x,h)=>{const p=x.icon;return e.jsxs(R,{variant:"outline",className:"w-full justify-start",onClick:()=>window.open(x.link,"_blank"),children:[e.jsx(p,{className:`mr-2 h-4 w-4 ${x.color}`}),x.name]},h)})})]}),e.jsxs(K,{children:[e.jsx(xe,{children:e.jsx(pe,{className:"text-lg",children:"Quick Actions"})}),e.jsxs(Y,{className:"space-y-2",children:[e.jsxs(R,{variant:"outline",className:"w-full justify-start",children:[e.jsx(ta,{className:"mr-2 h-4 w-4"}),"Ask a Question"]}),e.jsxs(R,{variant:"outline",className:"w-full justify-start",children:[e.jsx(ui,{className:"mr-2 h-4 w-4"}),"Read Documentation"]}),e.jsxs(R,{variant:"outline",className:"w-full justify-start",children:[e.jsx(Bc,{className:"mr-2 h-4 w-4"}),"View on GitHub"]})]})]})]})]})]})},sG=()=>{const[t,s]=v.useState(""),[a,r]=v.useState(null),[i,o]=v.useState("all"),c=[{id:"all",name:"All Videos",icon:Aa,count:24},{id:"getting-started",name:"Getting Started",icon:_a,count:8},{id:"features",name:"Features",icon:Ja,count:12},{id:"integration",name:"Integration",icon:$S,count:4}],u=[{id:1,title:"Getting Started with OmniBiz",description:"Complete walkthrough of OmniBiz platform setup and configuration",thumbnail:"https://via.placeholder.com/640x360?text=Getting+Started",duration:"12:34",views:1234,likes:98,category:"getting-started",level:"Beginner",videoUrl:"https://www.youtube.com/embed/dQw4w9WgXcQ",tags:["setup","basics","tutorial"],publishedAt:"2024-01-15"},{id:2,title:"Inventory Management Tutorial",description:"Learn how to effectively manage your inventory with real-time tracking",thumbnail:"https://via.placeholder.com/640x360?text=Inventory+Management",duration:"18:45",views:2456,likes:156,category:"features",level:"Intermediate",videoUrl:"https://www.youtube.com/embed/dQw4w9WgXcQ",tags:["inventory","products","management"],publishedAt:"2024-01-20"},{id:3,title:"Setting Up Payment Integration",description:"Step-by-step guide to integrate payment gateways",thumbnail:"https://via.placeholder.com/640x360?text=Payment+Setup",duration:"15:20",views:3421,likes:234,category:"integration",level:"Advanced",videoUrl:"https://www.youtube.com/embed/dQw4w9WgXcQ",tags:["payments","integration","api"],publishedAt:"2024-02-01"},{id:4,title:"Client Storefront Customization",description:"Customize your client-facing storefront with themes and branding",thumbnail:"https://via.placeholder.com/640x360?text=Storefront+Custom",duration:"10:15",views:1876,likes:142,category:"features",level:"Intermediate",videoUrl:"https://www.youtube.com/embed/dQw4w9WgXcQ",tags:["storefront","customization","branding"],publishedAt:"2024-02-05"},{id:5,title:"Advanced Analytics Dashboard",description:"Master the analytics dashboard and generate insightful reports",thumbnail:"https://via.placeholder.com/640x360?text=Analytics",duration:"22:10",views:2987,likes:198,category:"features",level:"Advanced",videoUrl:"https://www.youtube.com/embed/dQw4w9WgXcQ",tags:["analytics","reports","insights"],publishedAt:"2024-02-10"},{id:6,title:"Service Booking System",description:"Set up and manage service bookings with calendar integration",thumbnail:"https://via.placeholder.com/640x360?text=Booking+System",duration:"16:30",views:2145,likes:167,category:"features",level:"Intermediate",videoUrl:"https://www.youtube.com/embed/dQw4w9WgXcQ",tags:["services","bookings","appointments"],publishedAt:"2024-02-12"},{id:7,title:"Real-time Notifications Setup",description:"Configure real-time notifications for orders, bookings, and updates",thumbnail:"https://via.placeholder.com/640x360?text=Notifications",duration:"08:45",views:1654,likes:123,category:"features",level:"Beginner",videoUrl:"https://www.youtube.com/embed/dQw4w9WgXcQ",tags:["notifications","realtime","setup"],publishedAt:"2024-02-15"},{id:8,title:"API Integration Guide",description:"Complete guide to integrating external services via API",thumbnail:"https://via.placeholder.com/640x360?text=API+Integration",duration:"25:00",views:4321,likes:289,category:"integration",level:"Advanced",videoUrl:"https://www.youtube.com/embed/dQw4w9WgXcQ",tags:["api","integration","development"],publishedAt:"2024-02-18"}],f=[{id:1,title:"Quick Start Guide",description:"5-minute guide to get started",duration:"5:00",icon:_a},{id:2,title:"Security Best Practices",description:"Secure your business data",duration:"12:00",icon:da},{id:3,title:"Team Collaboration",description:"Work efficiently with your team",duration:"10:00",icon:Zt},{id:4,title:"Sales Optimization",description:"Boost your sales with analytics",duration:"15:00",icon:Is}],x=u.filter(p=>{const g=p.title.toLowerCase().includes(t.toLowerCase())||p.description.toLowerCase().includes(t.toLowerCase()),y=i==="all"||p.category===i;return g&&y}),h=p=>{const g={Beginner:"bg-green-100 text-green-800",Intermediate:"bg-yellow-100 text-yellow-800",Advanced:"bg-red-100 text-red-800"};return e.jsx(De,{className:g[p],children:p})};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row items-start md:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold",children:"Video Tutorials & Demos"}),e.jsx("p",{className:"text-muted-foreground",children:"Learn OmniBiz with step-by-step video guides"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(R,{variant:"outline",children:[e.jsx(Ma,{className:"mr-2 h-4 w-4"}),"Resources"]}),e.jsxs(R,{children:[e.jsx(ui,{className:"mr-2 h-4 w-4"}),"Documentation"]})]})]}),e.jsx(K,{children:e.jsx(Y,{className:"pt-6",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(oa,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),e.jsx(me,{placeholder:"Search videos...",className:"pl-10",value:t,onChange:p=>s(p.target.value)})]}),e.jsxs(R,{variant:"outline",children:[e.jsx(tl,{className:"mr-2 h-4 w-4"}),"Filter"]})]})})}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:c.map(p=>{const g=p.icon;return e.jsx(K,{className:`cursor-pointer transition-all hover:shadow-md ${i===p.id?"ring-2 ring-primary":""}`,onClick:()=>o(p.id),children:e.jsx(Y,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-primary/10 rounded-lg",children:e.jsx(g,{className:"h-5 w-5 text-primary"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:p.name}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[p.count," videos"]})]})]})})},p.id)})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsxs(K,{children:[e.jsxs(xe,{children:[e.jsx(pe,{children:"Video Library"}),e.jsxs(ot,{children:[x.length," videos available"]})]}),e.jsx(Y,{children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:x.map(p=>e.jsxs(K,{className:"overflow-hidden cursor-pointer hover:shadow-lg transition-shadow",onClick:()=>r(p),children:[e.jsxs("div",{className:"relative aspect-video bg-gradient-to-br from-primary/20 to-secondary/20",children:[e.jsx("div",{className:"absolute inset-0 flex items-center justify-center group",children:e.jsx("div",{className:"bg-black/60 rounded-full p-4 group-hover:scale-110 transition-transform",children:e.jsx(zc,{className:"h-8 w-8 text-white"})})}),e.jsx("div",{className:"absolute bottom-2 right-2 bg-black/80 text-white px-2 py-1 rounded text-xs",children:p.duration}),h(p.level)]}),e.jsxs(Y,{className:"p-4",children:[e.jsx("h4",{className:"font-semibold mb-2 line-clamp-2",children:p.title}),e.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2 mb-3",children:p.description}),e.jsxs("div",{className:"flex items-center gap-4 text-xs text-muted-foreground",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(ca,{className:"h-3 w-3"}),p.views]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Ao,{className:"h-3 w-3"}),p.likes]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(ts,{className:"h-3 w-3"}),p.duration]})]}),e.jsx("div",{className:"flex gap-2 mt-3",children:p.tags.slice(0,2).map((g,y)=>e.jsx(De,{variant:"outline",className:"text-xs",children:g},y))})]})]},p.id))})})]})}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(K,{children:[e.jsx(xe,{children:e.jsx(pe,{className:"text-lg",children:"Quick Tutorials"})}),e.jsx(Y,{className:"space-y-3",children:f.map(p=>{const g=p.icon;return e.jsx("div",{className:"p-3 border rounded-lg cursor-pointer hover:bg-muted transition-colors",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(g,{className:"h-5 w-5 text-primary mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h5",{className:"font-medium text-sm",children:p.title}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:p.description}),e.jsx("span",{className:"text-xs text-primary mt-1 inline-block",children:p.duration})]})]})},p.id)})})]}),e.jsxs(K,{children:[e.jsx(xe,{children:e.jsx(pe,{className:"text-lg",children:"Most Popular"})}),e.jsx(Y,{className:"space-y-3",children:u.slice(0,3).sort((p,g)=>g.views-p.views).map(p=>e.jsxs("div",{className:"flex gap-3 cursor-pointer hover:bg-muted p-2 rounded transition-colors",onClick:()=>r(p),children:[e.jsx("div",{className:"w-20 h-12 bg-gradient-to-br from-primary/20 to-secondary/20 rounded flex items-center justify-center",children:e.jsx(zc,{className:"h-4 w-4"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium line-clamp-2",children:p.title}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[p.views," views"]})]})]},p.id))})]})]})]}),a&&e.jsx(Bt,{open:!!a,onOpenChange:()=>r(null),children:e.jsxs(zt,{className:"max-w-4xl",children:[e.jsx(Ut,{children:e.jsx(Vt,{children:a.title})}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"aspect-video bg-black rounded-lg overflow-hidden",children:e.jsx("iframe",{className:"w-full h-full",src:a.videoUrl,title:a.title,frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[h(a.level),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[a.views," views  ",a.publishedAt]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(R,{variant:"outline",size:"sm",children:[e.jsx(Ao,{className:"h-4 w-4 mr-1"}),a.likes]}),e.jsx(R,{variant:"outline",size:"sm",children:e.jsx(Gc,{className:"h-4 w-4"})})]})]}),e.jsx("p",{className:"text-muted-foreground",children:a.description}),e.jsx("div",{className:"flex gap-2",children:a.tags.map((p,g)=>e.jsx(De,{variant:"secondary",children:p},g))})]})]})]})})]})},aG=()=>{const[t,s]=v.useState("videos"),a=[{title:"Video Tutorials",value:"24+",icon:Aa,color:"text-purple-600",bgColor:"bg-purple-100"},{title:"Community Members",value:"1,234",icon:Zt,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"Resources",value:"156",icon:ui,color:"text-green-600",bgColor:"bg-green-100"},{title:"Feedback Received",value:"89",icon:xi,color:"text-orange-600",bgColor:"bg-orange-100"}];return e.jsxs("div",{className:"space-y-6 p-6 max-w-7xl mx-auto",children:[e.jsxs("div",{className:"flex flex-col md:flex-row items-start md:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[e.jsx(ui,{className:"h-8 w-8 text-primary"}),"Learning & Resources Center"]}),e.jsx("p",{className:"text-muted-foreground mt-2",children:"Explore tutorials, join the community, and share your feedback"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(R,{variant:"outline",children:[e.jsx(Bc,{className:"mr-2 h-4 w-4"}),"GitHub"]}),e.jsxs(R,{children:[e.jsx(Ja,{className:"mr-2 h-4 w-4"}),"Rate Us"]})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:a.map((r,i)=>{const o=r.icon;return e.jsx(K,{className:"hover:shadow-md transition-shadow",children:e.jsx(Y,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:r.title}),e.jsx("p",{className:"text-2xl font-bold mt-1",children:r.value})]}),e.jsx("div",{className:`p-3 rounded-full ${r.bgColor}`,children:e.jsx(o,{className:`h-6 w-6 ${r.color}`})})]})})},i)})}),e.jsxs(K,{className:"shadow-lg",children:[e.jsxs(xe,{children:[e.jsxs(pe,{className:"flex items-center gap-2",children:[e.jsx(Is,{className:"h-5 w-5"}),"Explore Resources"]}),e.jsx(ot,{children:"Learn, connect, and grow with OmniBiz"})]}),e.jsx(Y,{children:e.jsxs(ja,{value:t,onValueChange:s,children:[e.jsxs(Sa,{className:"grid w-full grid-cols-3",children:[e.jsxs(ft,{value:"videos",className:"gap-2",children:[e.jsx(Aa,{className:"h-4 w-4"}),"Video Tutorials"]}),e.jsxs(ft,{value:"community",className:"gap-2",children:[e.jsx(Zt,{className:"h-4 w-4"}),"Community"]}),e.jsxs(ft,{value:"feedback",className:"gap-2",children:[e.jsx(xi,{className:"h-4 w-4"}),"Feedback"]})]}),e.jsx(pt,{value:"videos",className:"mt-6",children:e.jsx(sG,{})}),e.jsx(pt,{value:"community",className:"mt-6",children:e.jsx(tG,{})}),e.jsx(pt,{value:"feedback",className:"mt-6",children:e.jsx(eG,{})})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(K,{className:"hover:shadow-md transition-shadow cursor-pointer",children:e.jsx(Y,{className:"pt-6",children:e.jsxs("div",{className:"text-center space-y-3",children:[e.jsx("div",{className:"mx-auto w-12 h-12 bg-purple-100 rounded-full flex items-center justify-center",children:e.jsx(ui,{className:"h-6 w-6 text-purple-600"})}),e.jsx("h3",{className:"font-semibold",children:"Documentation"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Complete guides and API docs"}),e.jsx(De,{variant:"outline",children:"Updated Daily"})]})})}),e.jsx(K,{className:"hover:shadow-md transition-shadow cursor-pointer",children:e.jsx(Y,{className:"pt-6",children:e.jsxs("div",{className:"text-center space-y-3",children:[e.jsx("div",{className:"mx-auto w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsx(Zt,{className:"h-6 w-6 text-blue-600"})}),e.jsx("h3",{className:"font-semibold",children:"Join Community"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Connect with 1,200+ users"}),e.jsx(De,{variant:"outline",children:"Active Now"})]})})}),e.jsx(K,{className:"hover:shadow-md transition-shadow cursor-pointer",children:e.jsx(Y,{className:"pt-6",children:e.jsxs("div",{className:"text-center space-y-3",children:[e.jsx("div",{className:"mx-auto w-12 h-12 bg-green-100 rounded-full flex items-center justify-center",children:e.jsx(gv,{className:"h-6 w-6 text-green-600"})}),e.jsx("h3",{className:"font-semibold",children:"Contribute"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Help improve OmniBiz"}),e.jsx(De,{variant:"outline",children:"Open Source"})]})})})]}),e.jsx(K,{children:e.jsx(Y,{className:"pt-6",children:e.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Stay Connected"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Follow us on social media for updates and tips"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(R,{variant:"outline",size:"icon",children:e.jsx(Bc,{className:"h-4 w-4"})}),e.jsx(R,{variant:"outline",size:"icon",children:e.jsx(jv,{className:"h-4 w-4"})}),e.jsx(R,{variant:"outline",size:"icon",children:e.jsx(vv,{className:"h-4 w-4"})}),e.jsx(R,{variant:"outline",size:"icon",children:e.jsx(Ks,{className:"h-4 w-4"})})]})]})})})]})};function rG(){const[t,s]=v.useState([]),[a,r]=v.useState(!0),[i,o]=v.useState(!1),[c,u]=v.useState(null),[f,x]=v.useState([]),[h,p]=v.useState([]),{socket:g,connected:y}=ha(),[b,N]=v.useState({name:"",description:"",type:"percentage",value:"",code:"",isActive:!0,isSeasonalPromotion:!1,seasonalDetails:{seasonName:"",bannerImage:"",bannerText:"",priority:0},applicableTo:"all",applicableProducts:[],applicableServices:[],minPurchaseAmount:0,maxDiscountAmount:"",usageLimit:{total:"",perCustomer:1},validFrom:"",validUntil:"",showOnStorefront:!0,showNewArrivalsBadge:!1,customerSegment:"all"});v.useEffect(()=>{S(),C(),k()},[]);const S=async()=>{try{r(!0);const{data:z}=await Ne.get("/discounts");s(z.discounts||[])}catch(z){console.error("Error fetching discounts:",z),D.error("Failed to load discounts")}finally{r(!1)}},C=async()=>{try{const z=localStorage.getItem("token"),{data:V}=await Ne.get("/products",{headers:{Authorization:`Bearer ${z}`}});x(V||[])}catch(z){console.error("Error fetching products:",z)}},k=async()=>{try{const z=localStorage.getItem("token"),{data:V}=await Ne.get("/services",{headers:{Authorization:`Bearer ${z}`}});p(Array.isArray(V)?V:V?.services||[])}catch(z){console.error("Error fetching services:",z)}};v.useEffect(()=>{if(!(!g||!y))return g.on("discount_created",()=>{S(),D.success("New discount created")}),g.on("discount_sync",z=>{z.type==="update"?s(V=>V.map(W=>W._id===z.discount._id?z.discount:W)):z.type==="delete"&&s(V=>V.filter(W=>W._id!==z.discount._id))}),()=>{g.off("discount_created"),g.off("discount_sync")}},[g,y]);const A=(z,V)=>{if(z.includes(".")){const[W,q]=z.split(".");N(B=>({...B,[W]:{...B[W],[q]:V}}))}else N(W=>({...W,[z]:V}))},G=()=>{N({name:"",description:"",type:"percentage",value:"",code:"",isActive:!0,isSeasonalPromotion:!1,seasonalDetails:{seasonName:"",bannerImage:"",bannerText:"",priority:0},applicableTo:"all",applicableProducts:[],applicableServices:[],minPurchaseAmount:0,maxDiscountAmount:"",usageLimit:{total:"",perCustomer:1},validFrom:"",validUntil:"",showOnStorefront:!0,showNewArrivalsBadge:!1,customerSegment:"all"}),u(null)},F=async()=>{try{if(!b.name||!b.value||!b.validFrom||!b.validUntil){D.error("Please fill in all required fields");return}const z={...b,value:parseFloat(b.value),minPurchaseAmount:parseFloat(b.minPurchaseAmount)||0,maxDiscountAmount:b.maxDiscountAmount?parseFloat(b.maxDiscountAmount):void 0,usageLimit:{total:b.usageLimit.total?parseInt(b.usageLimit.total):void 0,perCustomer:parseInt(b.usageLimit.perCustomer)||1}};c?(await Ne.put(`/discounts/${c._id}`,z),D.success("Discount updated successfully")):(await Ne.post("/discounts",z),D.success("Discount created successfully")),S(),o(!1),G()}catch(z){console.error("Error saving discount:",z),D.error(z.response?.data?.message||"Failed to save discount")}},E=z=>{u(z),N({name:z.name||"",description:z.description||"",type:z.type||"percentage",value:z.value?.toString()||"",code:z.code||"",isActive:z.isActive??!0,isSeasonalPromotion:z.isSeasonalPromotion||!1,seasonalDetails:z.seasonalDetails||{seasonName:"",bannerImage:"",bannerText:"",priority:0},applicableTo:z.applicableTo||"all",minPurchaseAmount:z.minPurchaseAmount||0,maxDiscountAmount:z.maxDiscountAmount?.toString()||"",usageLimit:{total:z.usageLimit?.total?.toString()||"",perCustomer:z.usageLimit?.perCustomer||1},validFrom:z.validFrom?new Date(z.validFrom).toISOString().split("T")[0]:"",validUntil:z.validUntil?new Date(z.validUntil).toISOString().split("T")[0]:"",showOnStorefront:z.showOnStorefront??!0,showNewArrivalsBadge:z.showNewArrivalsBadge||!1,customerSegment:z.customerSegment||"all"}),o(!0)},T=async(z,V)=>{try{await Ne.patch(`/discounts/${z}/toggle`),D.success(`Discount ${V?"deactivated":"activated"}`),S()}catch{D.error("Failed to toggle discount status")}},_=async z=>{if(confirm("Are you sure you want to delete this discount?"))try{await Ne.delete(`/discounts/${z}`),D.success("Discount deleted successfully"),S()}catch{D.error("Failed to delete discount")}},P={total:t.length,active:t.filter(z=>z.isActive).length,totalRedemptions:t.reduce((z,V)=>z+(V.stats?.redemptions||0),0),totalRevenue:t.reduce((z,V)=>z+(V.stats?.revenue||0),0)};return a?e.jsx("div",{className:"flex items-center justify-center h-96",children:"Loading..."}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Discounts & Promotions"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage discounts and seasonal campaigns"})]}),e.jsxs(Bt,{open:i,onOpenChange:z=>{o(z),z||G()},children:[e.jsx(wa,{asChild:!0,children:e.jsxs(R,{children:[e.jsx(Gs,{className:"mr-2 h-4 w-4"}),"Create Discount"]})}),e.jsxs(zt,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsx(Ut,{children:e.jsx(Vt,{children:c?"Edit Discount":"Create New Discount"})}),e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(te,{children:"Name *"}),e.jsx(me,{value:b.name,onChange:z=>A("name",z.target.value),placeholder:"e.g., Summer Sale 2024"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(te,{children:"Description"}),e.jsx(As,{value:b.description,onChange:z=>A("description",z.target.value),placeholder:"Discount description..."})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(te,{children:"Type *"}),e.jsxs(Mt,{value:b.type,onValueChange:z=>A("type",z),children:[e.jsx(Lt,{children:e.jsx(Ft,{})}),e.jsxs(It,{children:[e.jsx(Ae,{value:"percentage",children:"Percentage (%)"}),e.jsx(Ae,{value:"fixed",children:"Fixed Amount (KES)"}),e.jsx(Ae,{value:"buy_x_get_y",children:"Buy X Get Y"}),e.jsx(Ae,{value:"seasonal",children:"Seasonal"})]})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(te,{children:"Value *"}),e.jsx(me,{type:"number",value:b.value,onChange:z=>A("value",z.target.value),placeholder:b.type==="percentage"?"20":"500"})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(te,{children:"Discount Code (Optional)"}),e.jsx(me,{value:b.code,onChange:z=>A("code",z.target.value.toUpperCase()),placeholder:"SUMMER20"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(os,{checked:b.isSeasonalPromotion,onCheckedChange:z=>A("isSeasonalPromotion",z)}),e.jsx(te,{children:"Seasonal Promotion"})]}),b.isSeasonalPromotion&&e.jsxs("div",{className:"border p-4 rounded space-y-3",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(te,{children:"Season Name"}),e.jsx(me,{value:b.seasonalDetails.seasonName,onChange:z=>A("seasonalDetails.seasonName",z.target.value),placeholder:"Black Friday Sale"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(te,{children:"Banner Image URL"}),e.jsx(me,{value:b.seasonalDetails.bannerImage,onChange:z=>A("seasonalDetails.bannerImage",z.target.value),placeholder:"https://..."})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(te,{children:"Banner Text"}),e.jsx(me,{value:b.seasonalDetails.bannerText,onChange:z=>A("seasonalDetails.bannerText",z.target.value),placeholder:"Up to 50% OFF on all items!"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(te,{children:"Valid From *"}),e.jsx(me,{type:"date",value:b.validFrom,onChange:z=>A("validFrom",z.target.value)})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(te,{children:"Valid Until *"}),e.jsx(me,{type:"date",value:b.validUntil,onChange:z=>A("validUntil",z.target.value)})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(te,{children:"Min Purchase Amount"}),e.jsx(me,{type:"number",value:b.minPurchaseAmount,onChange:z=>A("minPurchaseAmount",z.target.value),placeholder:"0"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(te,{children:"Max Discount (Optional)"}),e.jsx(me,{type:"number",value:b.maxDiscountAmount,onChange:z=>A("maxDiscountAmount",z.target.value),placeholder:"No limit"})]})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(os,{checked:b.showOnStorefront,onCheckedChange:z=>A("showOnStorefront",z)}),e.jsx(te,{children:"Show on Storefront"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(os,{checked:b.isActive,onCheckedChange:z=>A("isActive",z)}),e.jsx(te,{children:"Active"})]})]})]}),e.jsxs(Ps,{children:[e.jsx(R,{variant:"outline",onClick:()=>o(!1),children:"Cancel"}),e.jsxs(R,{onClick:F,children:[c?"Update":"Create"," Discount"]})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[e.jsxs(K,{children:[e.jsxs(xe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(pe,{className:"text-sm font-medium",children:"Total Discounts"}),e.jsx(No,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(Y,{children:[e.jsx("div",{className:"text-2xl font-bold",children:P.total}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"All discount campaigns"})]})]}),e.jsxs(K,{children:[e.jsxs(xe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(pe,{className:"text-sm font-medium",children:"Active"}),e.jsx(No,{className:"h-4 w-4 text-green-600"})]}),e.jsxs(Y,{children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:P.active}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Currently running"})]})]}),e.jsxs(K,{children:[e.jsxs(xe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(pe,{className:"text-sm font-medium",children:"Redemptions"}),e.jsx(Is,{className:"h-4 w-4 text-blue-600"})]}),e.jsxs(Y,{children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:P.totalRedemptions}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Times used"})]})]}),e.jsxs(K,{children:[e.jsxs(xe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(pe,{className:"text-sm font-medium",children:"Revenue Impact"}),e.jsx(ra,{className:"h-4 w-4 text-purple-600"})]}),e.jsxs(Y,{children:[e.jsxs("div",{className:"text-2xl font-bold text-purple-600",children:["KES ",P.totalRevenue.toLocaleString()]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Generated"})]})]})]}),e.jsxs(K,{children:[e.jsxs(xe,{children:[e.jsx(pe,{children:"All Discounts"}),e.jsxs(ot,{children:["Manage your discount campaigns ",y&&e.jsx(De,{variant:"outline",className:"ml-2 bg-green-100 text-green-800",children:" Live"})]})]}),e.jsx(Y,{children:e.jsxs(Xn,{children:[e.jsx(Qn,{children:e.jsxs(xa,{children:[e.jsx(St,{children:"Name"}),e.jsx(St,{children:"Type"}),e.jsx(St,{children:"Value"}),e.jsx(St,{children:"Code"}),e.jsx(St,{children:"Valid Period"}),e.jsx(St,{children:"Status"}),e.jsx(St,{children:"Stats"}),e.jsx(St,{children:"Actions"})]})}),e.jsx(Zn,{children:t.length===0?e.jsx(xa,{children:e.jsx(Nt,{colSpan:8,className:"text-center py-8",children:e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsx(No,{className:"h-12 w-12 text-muted-foreground"}),e.jsx("p",{className:"text-muted-foreground",children:"No discounts yet"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Create your first discount campaign"})]})})}):t.map(z=>e.jsxs(xa,{children:[e.jsx(Nt,{children:e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:z.name}),z.isSeasonalPromotion&&e.jsx(De,{variant:"secondary",className:"mt-1",children:"Seasonal"})]})}),e.jsx(Nt,{className:"capitalize",children:z.type.replace("_"," ")}),e.jsx(Nt,{className:"font-semibold",children:z.type==="percentage"?`${z.value}%`:`KES ${z.value}`}),e.jsx(Nt,{children:z.code?e.jsx(De,{variant:"outline",children:z.code}):e.jsx("span",{className:"text-muted-foreground",children:"-"})}),e.jsxs(Nt,{className:"text-sm",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(gs,{className:"h-3 w-3"}),new Date(z.validFrom).toLocaleDateString()]}),e.jsxs("div",{className:"text-muted-foreground",children:["to ",new Date(z.validUntil).toLocaleDateString()]})]}),e.jsx(Nt,{children:e.jsx(os,{checked:z.isActive,onCheckedChange:()=>T(z._id,z.isActive)})}),e.jsx(Nt,{className:"text-sm",children:e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(ca,{className:"h-3 w-3"}),z.stats?.views||0," views"]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Is,{className:"h-3 w-3"}),z.stats?.redemptions||0," used"]})]})}),e.jsx(Nt,{children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(R,{variant:"outline",size:"sm",onClick:()=>E(z),children:e.jsx(Yi,{className:"h-3 w-3"})}),e.jsx(R,{variant:"ghost",size:"sm",className:"text-red-600 hover:text-red-700 hover:bg-red-50",onClick:()=>_(z._id),children:e.jsx(ga,{className:"h-3 w-3"})})]})})]},z._id))})]})})]})]})}const nG=()=>{const{socket:t,connected:s}=ha(),{theme:a}=id(),[r,i]=v.useState([]),[o,c]=v.useState(navigator.onLine),[u,f]=v.useState(0),[x,h]=v.useState(0),[p,g]=v.useState(100),[y,b]=v.useState(!1),[N,S]=v.useState(4),[C,k]=v.useState([75]),[A,G]=v.useState(!1),[F,E]=v.useState(!1),[T,_]=v.useState(""),[P,z]=v.useState(0),[V,W]=v.useState(0),[q,B]=v.useState([1e3]),[ae,U]=v.useState([5]),[Z,de]=v.useState(!0),[H,se]=v.useState(!0),[ee,L]=v.useState(!1),[X,O]=v.useState(!1),[J,ie]=v.useState("downloads"),[be,Le]=v.useState(0),[ve,oe]=v.useState(0),[Pe,Xe]=v.useState(0),[yt,vt]=v.useState("4g"),[gt,bt]=v.useState([]),[lt,ms]=v.useState([]),[is,Ms]=v.useState(""),[ys,Xs]=v.useState(""),[xs,Rt]=v.useState(0),[sa,Te]=v.useState(0),je=v.useRef(null),[fe,Ue]=v.useState(new Date().toLocaleTimeString()),[st,Dt]=v.useState("ominbiz_Network"),[Pt,Jt]=v.useState(""),[as,ke]=v.useState(0),[we,nt]=v.useState(10240),[Ke,jt]=v.useState([75]),[wt,Xt]=v.useState([]),[ss,ge]=v.useState([]),[tt,ct]=v.useState(0),ns=v.useRef(null),ht=v.useRef(new Audio),Se=v.useRef(null);v.useEffect(()=>{const he=()=>c(!0),We=()=>c(!1);if(window.addEventListener("online",he),window.addEventListener("offline",We),"connection"in navigator){const it=navigator.connection||navigator.mozConnection||navigator.webkitConnection,kt=()=>{it.effectiveType&&vt(it.effectiveType),it.downlink&&f(it.downlink*1024)};kt(),it.addEventListener("change",kt)}"getBattery"in navigator&&navigator.getBattery().then(it=>{const kt=()=>{g(it.level*100),b(it.charging)};kt(),it.addEventListener("levelchange",kt),it.addEventListener("chargingchange",kt)});const Ee=setInterval(()=>{if(performance.memory){const Qe=performance.memory.usedJSHeapSize/performance.memory.jsHeapSizeLimit*100;oe(Qe)}Le(Qe=>Math.min(100,Math.max(0,Qe+(Math.random()-.5)*10))),Xe(Qe=>Math.min(100,Math.max(20,Qe+(Math.random()-.5)*2))),(!("connection"in navigator)||Math.random()>.7)&&S(Qe=>{const Wt=Math.random()>.5?1:-1;return Math.min(4,Math.max(0,Qe+Wt))}),h(Qe=>{const Wt=u*(.1+Math.random()*.2);return Math.max(0,Wt)});const it=u/1024,kt=x/1024;ke(Qe=>Math.min(we,Qe+it+kt)),Xt(Qe=>[...Qe.slice(-29),u]),ge(Qe=>[...Qe.slice(-29),x]),ct(Math.floor(10+Math.random()*40))},2e3),Je=setInterval(()=>{i(it=>it.map(kt=>{if(kt.status==="downloading"&&kt.progress<100){const Qe=Math.min(100,kt.progress+Math.random()*3),Wt=Math.random()*1e3,Nr=kt.size*(1-Qe/100),gn=Wt>0?$e(Nr/Wt):"00:00:00";return{...kt,progress:Qe,speed:Wt,eta:gn,...Qe>=100&&{status:"completed"}}}return kt}))},1e3);return()=>{window.removeEventListener("online",he),window.removeEventListener("offline",We),clearInterval(Ee),clearInterval(Je)}},[]),v.useEffect(()=>{if(t)return t.on("download_update",he=>{i(We=>We.map(Ee=>Ee.id===he.id?{...Ee,...he}:Ee))}),t.on("system_notification",he=>{Oe(he)}),()=>{t.off("download_update"),t.off("system_notification")}},[t]),v.useEffect(()=>{const he=ht.current,We=()=>{he.duration&&(z(he.currentTime/he.duration*100),W(he.duration))},Ee=()=>{E(!1),z(0)};return he.addEventListener("timeupdate",We),he.addEventListener("ended",Ee),he.addEventListener("loadedmetadata",We),()=>{he.removeEventListener("timeupdate",We),he.removeEventListener("ended",Ee),he.removeEventListener("loadedmetadata",We)}},[]),v.useEffect(()=>{ht.current.volume=A?0:C[0]/100},[C,A]),v.useEffect(()=>{const he=setInterval(()=>{Ue(new Date().toLocaleTimeString())},1e3);return()=>clearInterval(he)},[]),v.useEffect(()=>{if(lt.length===0)return;const he=setInterval(()=>{const We=new Date().getTime();lt.forEach(Ee=>{const it=new Date(Ee.scheduledTime).getTime()-We;if(Ee.status==="scheduled"&&it<=5e3&&it>=-5e3){console.log(" Auto-starting scheduled download:",Ee.filename),dt(Ee.url),ms(Qe=>Qe.map(Wt=>Wt.id===Ee.id?{...Wt,status:"started"}:Wt));const kt={id:Date.now(),title:"Scheduled Download Started",message:`${Ee.filename} is now downloading`,type:"info"};bt(Qe=>[...Qe,kt]),D.success(` Starting scheduled download: ${Ee.filename}`),setTimeout(()=>{ms(Qe=>Qe.filter(Wt=>Wt.id!==Ee.id))},3e3)}})},5e3);return()=>clearInterval(he)},[lt]);const dt=async(he,We=null)=>{try{const Ee={id:Date.now(),url:he,filename:We||he.split("/").pop()||`file_${Date.now()}`,progress:0,speed:0,size:0,status:"downloading",protocol:he.includes("magnet:")?"BitTorrent":"HTTP",eta:"Calculating...",startTime:Date.now()};i(Je=>[...Je,Ee]),D.success(`Download started: ${Ee.filename}`),t&&s&&t.emit("start_download",Ee);try{const Je=await fetch(he,{mode:"cors"});if(!Je.ok)throw new Error(`HTTP ${Je.status}`);const it=+Je.headers.get("Content-Length"),kt=Je.body.getReader(),Qe=[];let Wt=0;for(;;){const{done:Br,value:vn}=await kt.read();if(Br)break;Qe.push(vn),Wt+=vn.length;const br=it?Wt/it*100:0,Ho=(Date.now()-Ee.startTime)/1e3,tn=Wt/Ho/1024,zr=it-Wt,fm=tn>0?$e(zr/tn/1024):"00:00:00";i(lx=>lx.map(ql=>ql.id===Ee.id?{...ql,progress:br,speed:tn,size:it/(1024*1024),eta:fm}:ql))}const Nr=new Blob(Qe),gn=window.URL.createObjectURL(Nr),Ir=document.createElement("a");Ir.href=gn,Ir.download=Ee.filename,document.body.appendChild(Ir),Ir.click(),document.body.removeChild(Ir),window.URL.revokeObjectURL(gn),i(Br=>Br.map(vn=>vn.id===Ee.id?{...vn,status:"completed",progress:100}:vn)),D.success(`Download completed: ${Ee.filename}`),Oe({title:"Download Complete",message:`${Ee.filename} has been downloaded successfully`,type:"success"})}catch(Je){console.error("Download error:",Je),i(it=>it.map(kt=>kt.id===Ee.id?{...kt,status:"error",progress:0}:kt)),D.error(`Download failed: ${Je.message}`)}}catch(Ee){console.error("Error starting download:",Ee),D.error("Failed to start download")}},Ct=he=>{i(We=>We.map(Ee=>Ee.id===he?{...Ee,status:"paused"}:Ee))},Et=he=>{i(We=>We.map(Ee=>Ee.id===he?{...Ee,status:"downloading"}:Ee))},hs=he=>{i(We=>We.filter(Ee=>Ee.id!==he)),D.info("Download cancelled")},vs=()=>{switch(N){case 0:return e.jsx(Ic,{className:"h-4 w-4 text-red-500"});case 1:return e.jsx(W_,{className:"h-4 w-4 text-red-500"});case 2:return e.jsx(H_,{className:"h-4 w-4 text-yellow-500"});case 3:return e.jsx($_,{className:"h-4 w-4 text-green-500"});case 4:return e.jsx(V_,{className:"h-4 w-4 text-green-500"});default:return e.jsx(Ic,{className:"h-4 w-4 text-gray-500"})}},Ts=()=>p<20?e.jsx(G_,{className:"h-4 w-4 text-red-500"}):e.jsx(q_,{className:"h-4 w-4 text-green-500"}),Bs=he=>he<1024?`${he.toFixed(1)} KB/s`:`${(he/1024).toFixed(1)} MB/s`,Q=he=>he<1024?`${he} MB`:`${(he/1024).toFixed(1)} GB`,ue=he=>{Array.from(he.target.files).forEach(Ee=>{const Je=URL.createObjectURL(Ee),it={id:Date.now()+Math.random(),url:Je,filename:Ee.name,progress:100,speed:0,size:Ee.size/(1024*1024),status:"completed",protocol:"Local",eta:"00:00:00"};i(kt=>[...kt,it]),D.success(`Added: ${Ee.name}`)})},le=he=>{const We=he.target.files[0];if(We){const Ee=URL.createObjectURL(We);ht.current.src=Ee,_(We.name),z(0),D.success(`Loaded: ${We.name}`)}},M=()=>{const he=ht.current;F?he.pause():he.play(),E(!F)},ne=()=>{ht.current.currentTime=Math.min(ht.current.duration,ht.current.currentTime+10)},ce=()=>{ht.current.currentTime=Math.max(0,ht.current.currentTime-10)},Re=he=>{ht.current.currentTime=he/100*ht.current.duration},$e=he=>{if(!he||isNaN(he))return"00:00";const We=Math.floor(he/60),Ee=Math.floor(he%60);return`${We.toString().padStart(2,"0")}:${Ee.toString().padStart(2,"0")}`},Oe=he=>{const We={id:Date.now(),timestamp:new Date,...he};bt(Ee=>[We,...Ee].slice(0,50))},Me=(he,We,Ee)=>{const Je={id:Date.now(),url:he,filename:We,scheduledTime:Ee,status:"scheduled"};ms(it=>[...it,Je]),D.success(`Download scheduled for ${new Date(Ee).toLocaleString()}`)},Ie=()=>{const he=JSON.stringify(r,null,2),We=new Blob([he],{type:"application/json"}),Ee=URL.createObjectURL(We),Je=document.createElement("a");Je.href=Ee,Je.download=`download-history-${Date.now()}.json`,Je.click(),URL.revokeObjectURL(Ee),D.success("Download history exported")},rt=he=>{const We=he.target.files[0];if(We){const Ee=new FileReader;Ee.onload=Je=>{try{const it=JSON.parse(Je.target.result);i(kt=>[...kt,...it]),D.success(`Imported ${it.length} downloads`)}catch{D.error("Invalid file format")}},Ee.readAsText(We)}};return e.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:"DAS - Data Analytics System"}),e.jsx("p",{className:"text-muted-foreground mt-2",children:"Real-Time Network Monitor & Download Manager with Live System Analytics"})]}),e.jsx(K,{className:"mb-6 bg-gradient-to-r from-blue-50 to-purple-50",children:e.jsxs(Y,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsx("div",{className:"flex items-center gap-2 transition-all duration-300",children:o?e.jsxs(e.Fragment,{children:[e.jsx(of,{className:"h-4 w-4 text-green-500 animate-pulse"}),e.jsx("span",{className:"text-sm font-medium text-green-700",children:yt.toUpperCase()})]}):e.jsxs(e.Fragment,{children:[e.jsx(Ic,{className:"h-4 w-4 text-red-500 animate-bounce"}),e.jsx("span",{className:"text-sm font-medium text-red-700",children:"Disconnected"})]})}),e.jsxs("div",{className:"flex items-center gap-2 transition-all duration-500",children:[e.jsx("div",{className:"animate-pulse",children:vs()}),e.jsxs("span",{className:"text-sm font-medium transition-colors duration-300",children:["Signal: ",e.jsxs("span",{className:`font-bold ${N>=3?"text-green-600":N>=2?"text-yellow-600":"text-red-600"}`,children:[N,"/4"]})]})]}),e.jsxs("div",{className:"flex items-center gap-2 transition-all duration-300",children:[Ts(),e.jsxs("span",{className:`text-sm font-medium ${y?"text-green-600":p<20?"text-red-600":"text-gray-700"}`,children:[p.toFixed(0),"%",y&&e.jsx(_a,{className:"inline h-3 w-3 ml-1 text-yellow-500 animate-pulse"})]})]})]}),e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsxs("div",{className:"flex items-center gap-2 transition-all duration-300",children:[e.jsx(Ma,{className:"h-4 w-4 text-blue-500 animate-bounce",style:{animationDuration:u>500?"0.5s":"1s"}}),e.jsxs("span",{className:"text-sm font-mono font-bold text-blue-600",children:[" ",Bs(u)]})]}),e.jsxs("div",{className:"flex items-center gap-2 transition-all duration-300",children:[e.jsx(Vi,{className:"h-4 w-4 text-green-500",style:{animation:x>50?"pulse 1s infinite":"none"}}),e.jsxs("span",{className:"text-sm font-mono font-bold text-green-600",children:[" ",Bs(x)]})]}),e.jsxs("div",{className:"flex items-center gap-2 transition-all duration-200",children:[A?e.jsx(Gh,{className:"h-4 w-4 text-red-500"}):e.jsx(mu,{className:"h-4 w-4 text-gray-600"}),e.jsxs("span",{className:"text-sm font-medium",children:[C[0],"%"]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium text-gray-600",children:[e.jsx(ts,{className:"h-4 w-4 animate-spin",style:{animationDuration:"60s"}}),e.jsx("span",{className:"font-mono tabular-nums",children:fe})]})]})]}),e.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[e.jsx(La,{className:"h-3 w-3 text-blue-500 animate-pulse"}),e.jsxs("span",{className:"text-xs text-gray-500",children:[s?"WebSocket Connected":"Offline Mode"," "," ",r.filter(he=>he.status==="downloading").length," Active Downloads "," ","CPU: ",be.toFixed(0),"% "," ","Memory: ",ve.toFixed(0),"%"]})]})]})}),e.jsxs(ja,{value:J,onValueChange:ie,className:"space-y-6",children:[e.jsxs(Sa,{className:"grid w-full grid-cols-6 bg-card",children:[e.jsxs(ft,{value:"downloads",className:"data-[state=active]:bg-primary data-[state=active]:text-primary-foreground",children:[e.jsx(Ma,{className:"h-4 w-4 mr-2"}),"Downloads"]}),e.jsxs(ft,{value:"settings",className:"data-[state=active]:bg-primary data-[state=active]:text-primary-foreground",children:[e.jsx(Wa,{className:"h-4 w-4 mr-2"}),"Settings"]}),e.jsxs(ft,{value:"media",className:"data-[state=active]:bg-primary data-[state=active]:text-primary-foreground",children:[e.jsx(p0,{className:"h-4 w-4 mr-2"}),"Media"]}),e.jsxs(ft,{value:"system",className:"data-[state=active]:bg-primary data-[state=active]:text-primary-foreground",children:[e.jsx(BS,{className:"h-4 w-4 mr-2"}),"System"]}),e.jsxs(ft,{value:"schedule",className:"data-[state=active]:bg-primary data-[state=active]:text-primary-foreground",children:[e.jsx(gs,{className:"h-4 w-4 mr-2"}),"Schedule"]}),e.jsxs(ft,{value:"database",className:"data-[state=active]:bg-primary data-[state=active]:text-primary-foreground",children:[e.jsx(ju,{className:"h-4 w-4 mr-2"}),"Database"]})]}),e.jsx(pt,{value:"downloads",className:"space-y-6",children:e.jsxs(K,{className:"border-primary/20",children:[e.jsx(xe,{className:"bg-gradient-to-r from-blue-50 to-cyan-50 dark:from-blue-950 dark:to-cyan-950",children:e.jsxs(pe,{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(Ma,{className:"h-5 w-5 text-primary"}),"Download Manager"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(De,{variant:"secondary",children:[r.filter(he=>he.status==="downloading").length," Active"]}),e.jsxs(De,{variant:"outline",children:[r.length," Total"]})]})]})}),e.jsxs(Y,{className:"space-y-4 pt-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(_o,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(me,{placeholder:"Enter URL, magnet link, or paste from clipboard...",className:"pl-10 border-primary/30 focus:border-primary",onKeyPress:he=>{he.key==="Enter"&&he.target.value&&(dt(he.target.value),he.target.value="")}})]}),e.jsx("input",{type:"file",ref:ns,onChange:ue,multiple:!0,className:"hidden"}),e.jsxs(R,{onClick:()=>ns.current?.click(),className:"gap-2",children:[e.jsx(Vi,{className:"h-4 w-4"}),"Add Files"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(R,{variant:"outline",size:"sm",onClick:async()=>{try{const he=await navigator.clipboard.readText();he&&(he.startsWith("http")||he.startsWith("magnet"))?(dt(he),D.success("URL added from clipboard")):D.error("No valid URL in clipboard")}catch{D.error("Could not read clipboard")}},children:[e.jsx(Yc,{className:"h-3 w-3 mr-1"}),"Paste from Clipboard"]}),e.jsxs(R,{variant:"outline",size:"sm",onClick:()=>{const he=r.filter(We=>We.status==="downloading");if(he.length===0){D.info("No active downloads");return}he.forEach(We=>Ct(We.id)),D.success(`Paused ${he.length} downloads`)},disabled:r.filter(he=>he.status==="downloading").length===0,children:[e.jsx(g0,{className:"h-3 w-3 mr-1"}),"Pause All"]}),e.jsxs(R,{variant:"outline",size:"sm",onClick:()=>{const he=r.filter(We=>We.status==="paused");if(he.length===0){D.info("No paused downloads");return}he.forEach(We=>Et(We.id)),D.success(`Resumed ${he.length} downloads`)},disabled:r.filter(he=>he.status==="paused").length===0,children:[e.jsx(zc,{className:"h-3 w-3 mr-1"}),"Resume All"]})]})]}),e.jsxs("div",{className:"flex items-center gap-2 border-b pb-2",children:[e.jsxs(R,{variant:r.length===r.length?"default":"ghost",size:"sm",onClick:()=>{},children:["All (",r.length,")"]}),e.jsxs(R,{variant:"ghost",size:"sm",children:["Downloading (",r.filter(he=>he.status==="downloading").length,")"]}),e.jsxs(R,{variant:"ghost",size:"sm",children:["Completed (",r.filter(he=>he.status==="completed").length,")"]})]}),e.jsx(kr,{className:"h-96",children:e.jsxs("div",{className:"space-y-3",children:[r.map(he=>e.jsxs(K,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(kb,{className:"h-5 w-5 text-blue-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-sm",children:he.filename}),e.jsx("p",{className:"text-xs text-gray-500",children:he.url})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(De,{variant:he.status==="downloading"?"default":"secondary",children:he.status}),e.jsx(De,{variant:"outline",children:he.protocol})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Cr,{value:he.progress,className:"h-2"}),e.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[e.jsxs("span",{children:[he.progress.toFixed(1),"% of ",Q(he.size)]}),e.jsxs("span",{children:[Bs(he.speed),"  ETA: ",he.eta]})]})]}),e.jsxs("div",{className:"flex items-center gap-2 mt-3",children:[he.status==="downloading"?e.jsx(R,{size:"sm",variant:"outline",onClick:()=>Ct(he.id),children:e.jsx(g0,{className:"h-3 w-3"})}):e.jsx(R,{size:"sm",variant:"outline",onClick:()=>Et(he.id),children:e.jsx(zc,{className:"h-3 w-3"})}),e.jsx(R,{size:"sm",variant:"outline",onClick:()=>hs(he.id),children:e.jsx(jr,{className:"h-3 w-3"})}),e.jsx(R,{size:"sm",variant:"outline",children:e.jsx(cs,{className:"h-3 w-3"})})]})]},he.id)),r.length===0&&e.jsxs("div",{className:"text-center py-12 text-gray-500",children:[e.jsx(Ma,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"No downloads yet. Add a URL or file to get started."})]})]})})]})]})}),e.jsx(pt,{value:"settings",className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(K,{className:"border-primary/20",children:[e.jsx(xe,{className:"bg-gradient-to-r from-yellow-50 to-orange-50 dark:from-yellow-950 dark:to-orange-950",children:e.jsxs(pe,{className:"flex items-center gap-2",children:[e.jsx(_a,{className:"h-5 w-5 text-primary"}),"Speed & Connection Limits"]})}),e.jsxs(Y,{className:"space-y-6 pt-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("label",{className:"text-sm font-medium",children:"Max Download Speed"}),e.jsxs(De,{variant:"secondary",children:[q[0]," KB/s"]})]}),e.jsx(mi,{value:q,onValueChange:he=>{B(he),D.info(`Speed limit: ${he[0]} KB/s`)},max:1e4,min:100,step:100,className:"w-full"}),e.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground",children:[e.jsx("span",{children:"100 KB/s"}),e.jsx("span",{children:"10 MB/s"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("label",{className:"text-sm font-medium",children:"Max Connections"}),e.jsxs(De,{variant:"secondary",children:[ae[0]," connections"]})]}),e.jsx(mi,{value:ae,onValueChange:he=>{U(he),D.info(`Max connections: ${he[0]}`)},max:20,min:1,step:1,className:"w-full"}),e.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground",children:[e.jsx("span",{children:"1"}),e.jsx("span",{children:"20"})]})]}),e.jsxs(R,{variant:"outline",size:"sm",className:"w-full",onClick:()=>{B([1e3]),U([5]),D.success("Reset to default values")},children:[e.jsx(dg,{className:"h-4 w-4 mr-2"}),"Reset to Defaults"]})]})]}),e.jsxs(K,{className:"border-primary/20",children:[e.jsx(xe,{className:"bg-gradient-to-r from-purple-50 to-pink-50 dark:from-purple-950 dark:to-pink-950",children:e.jsxs(pe,{className:"flex items-center gap-2",children:[e.jsx(Wa,{className:"h-5 w-5 text-primary"}),"Advanced Features"]})}),e.jsxs(Y,{className:"space-y-4 pt-6",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border hover:bg-accent transition-colors",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(cs,{className:"h-4 w-4 text-primary"}),e.jsx("p",{className:"font-medium",children:"Auto Retry"})]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Automatically retry failed downloads"})]}),e.jsx(os,{checked:Z,onCheckedChange:he=>{de(he),D.info(`Auto retry ${he?"enabled":"disabled"}`)}})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border hover:bg-accent transition-colors",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(us,{className:"h-4 w-4 text-primary"}),e.jsx("p",{className:"font-medium",children:"File Validation"})]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Verify file integrity after download"})]}),e.jsx(os,{checked:H,onCheckedChange:he=>{se(he),D.info(`File validation ${he?"enabled":"disabled"}`)}})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border hover:bg-accent transition-colors",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(L_,{className:"h-4 w-4 text-primary"}),e.jsx("p",{className:"font-medium",children:"Compression"})]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Enable compression for transfers"})]}),e.jsx(os,{checked:ee,onCheckedChange:he=>{L(he),D.info(`Compression ${he?"enabled":"disabled"}`)}})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border hover:bg-accent transition-colors",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(gr,{className:"h-4 w-4 text-primary"}),e.jsx("p",{className:"font-medium",children:"Encryption"})]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Encrypt downloads for security"})]}),e.jsx(os,{checked:X,onCheckedChange:he=>{O(he),D.info(`Encryption ${he?"enabled":"disabled"}`)}})]})]})]})]})}),e.jsx(pt,{value:"media",className:"space-y-6",children:e.jsxs(K,{className:"bg-gradient-to-br from-purple-50 to-pink-50 dark:from-purple-950 dark:to-pink-950 border-primary/20",children:[e.jsx(xe,{children:e.jsxs(pe,{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(p0,{className:"h-5 w-5 text-purple-600"}),"Media Player"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"file",ref:Se,onChange:le,accept:"audio/*,video/*",className:"hidden"}),e.jsxs(R,{size:"sm",variant:"outline",onClick:()=>Se.current?.click(),children:[e.jsx(Vi,{className:"h-4 w-4 mr-2"}),"Load Media"]})]})]})}),e.jsxs(Y,{className:"space-y-4",children:[e.jsxs("div",{className:"text-center py-8 bg-white rounded-lg",children:[e.jsxs("div",{className:"w-32 h-32 bg-gradient-to-br from-purple-100 to-pink-100 rounded-full mx-auto mb-4 flex items-center justify-center relative overflow-hidden",children:[F?e.jsx("div",{className:"absolute inset-0 bg-purple-400 opacity-20 animate-ping"}):null,e.jsx(p0,{className:`h-16 w-16 ${F?"text-purple-600 animate-bounce":"text-purple-400"}`})]}),e.jsx("p",{className:"font-bold text-lg text-primary",children:T||"No media selected"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:T?F?"Now Playing":"Paused":'Click "Load Media" to select a file'}),V>0&&e.jsxs("div",{className:"flex items-center justify-center gap-2 mt-2 text-sm text-muted-foreground",children:[e.jsx(ts,{className:"h-4 w-4"}),e.jsxs("span",{children:[$e(ht.current.currentTime)," / ",$e(V)]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"relative cursor-pointer group",onClick:he=>{if(V>0){const We=he.currentTarget.getBoundingClientRect(),Ee=(he.clientX-We.left)/We.width*100;Re(Ee)}},children:[e.jsx(Cr,{value:P,className:"h-3 cursor-pointer transition-all group-hover:h-4"}),e.jsxs("div",{className:"absolute -top-1 flex justify-between w-full px-1 text-xs text-muted-foreground",children:[e.jsx("span",{children:$e(ht.current.currentTime)}),e.jsx("span",{children:$e(V)})]})]}),e.jsxs("div",{className:"flex items-center justify-center gap-4",children:[e.jsxs(R,{variant:"outline",size:"sm",onClick:ce,disabled:!T,className:"hover:bg-purple-100",children:[e.jsx(I_,{className:"h-4 w-4"}),e.jsx("span",{className:"ml-1 text-xs",children:"10s"})]}),e.jsx(R,{size:"lg",onClick:M,disabled:!T,className:`w-16 h-16 rounded-full ${F?"bg-purple-600 hover:bg-purple-700":"bg-purple-500 hover:bg-purple-600"}`,children:F?e.jsx(g0,{className:"h-6 w-6"}):e.jsx(zc,{className:"h-6 w-6 ml-1"})}),e.jsxs(R,{variant:"outline",size:"sm",onClick:ne,disabled:!T,className:"hover:bg-purple-100",children:[e.jsx("span",{className:"mr-1 text-xs",children:"10s"}),e.jsx(B_,{className:"h-4 w-4"})]})]}),e.jsxs("div",{className:"flex items-center gap-4 p-4 bg-white rounded-lg",children:[e.jsx(R,{variant:"ghost",size:"sm",onClick:()=>G(!A),className:"hover:bg-purple-100",children:A?e.jsx(Gh,{className:"h-5 w-5 text-destructive"}):e.jsx(mu,{className:"h-5 w-5 text-primary"})}),e.jsx(mi,{value:C,onValueChange:k,max:100,min:0,step:1,className:"flex-1"}),e.jsxs("span",{className:"text-sm font-bold text-primary w-12",children:[C[0],"%"]})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-white rounded-lg",children:[e.jsxs(R,{variant:"outline",size:"sm",onClick:()=>{ht.current.currentTime>0&&(ht.current.currentTime=0,z(0),D.info("Restarted from beginning"))},disabled:!T,children:[e.jsx(dg,{className:"h-4 w-4 mr-2"}),"Restart"]}),e.jsxs(R,{variant:"outline",size:"sm",onClick:()=>{ht.current.playbackRate=ht.current.playbackRate===1?1.5:ht.current.playbackRate===1.5?2:1,D.info(`Speed: ${ht.current.playbackRate}x`)},disabled:!T,children:[e.jsx(_a,{className:"h-4 w-4 mr-2"}),ht.current.playbackRate,"x Speed"]}),e.jsxs(R,{variant:"outline",size:"sm",onClick:()=>{_(""),ht.current.src="",E(!1),z(0),D.success("Media cleared")},disabled:!T,children:[e.jsx(jr,{className:"h-4 w-4 mr-2"}),"Clear"]})]})]})]})]})}),e.jsx(pt,{value:"schedule",className:"space-y-6",children:e.jsxs(K,{className:"bg-gradient-to-br from-cyan-50 to-blue-50 dark:from-cyan-950 dark:to-blue-950 border-primary/20",children:[e.jsx(xe,{children:e.jsxs(pe,{className:"flex items-center gap-2",children:[e.jsx(gs,{className:"h-5 w-5 text-primary"}),"Scheduled Downloads"]})}),e.jsx(Y,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"p-4 bg-card rounded-lg border-2 border-primary/30",children:[e.jsx("h3",{className:"text-sm font-semibold mb-3 text-primary",children:"Schedule New Download"}),e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-muted-foreground mb-1 block",children:"Download URL *"}),e.jsx(me,{placeholder:"https://example.com/file.zip",className:"flex-1",value:is,onChange:he=>Ms(he.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-muted-foreground mb-1 block",children:"Schedule Date & Time *"}),e.jsx(me,{type:"datetime-local",className:"w-full",value:ys,onChange:he=>Xs(he.target.value),min:new Date().toISOString().slice(0,16)})]}),e.jsxs(R,{className:"w-full",onClick:()=>{if(!is.trim()){D.error("Please enter a URL");return}if(!ys){D.error("Please select date and time");return}if(new Date(ys)<=new Date){D.error("Please select a future date and time");return}const We=is.split("/").pop()||`scheduled_${Date.now()}`;Me(is,We,ys),Ms(""),Xs("")},disabled:!is||!ys,children:[e.jsx(ts,{className:"h-4 w-4 mr-2"}),"Schedule Download"]})]})]}),lt.length===0?e.jsxs("div",{className:"text-center py-12 text-muted-foreground bg-card rounded-lg",children:[e.jsx(gs,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{className:"font-medium",children:"No scheduled downloads"}),e.jsx("p",{className:"text-xs mt-2",children:"Schedule downloads to start automatically at a specific time"})]}):e.jsxs("div",{className:"space-y-2",children:[e.jsxs("h3",{className:"text-sm font-semibold flex items-center gap-2",children:[e.jsx(Pr,{className:"h-4 w-4"}),"Scheduled (",lt.length,")"]}),lt.map(he=>e.jsx(K,{className:"p-3 hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(kb,{className:"h-4 w-4 text-primary"}),e.jsx("p",{className:"font-medium text-sm",children:he.filename})]}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1 flex items-center gap-1",children:[e.jsx(ts,{className:"h-3 w-3"}),new Date(he.scheduledTime).toLocaleString()]}),e.jsx("p",{className:"text-xs text-primary mt-1",children:he.url})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(De,{variant:he.status==="scheduled"?"secondary":"default",children:he.status}),e.jsx(R,{variant:"ghost",size:"sm",onClick:()=>{ms(We=>We.filter(Ee=>Ee.id!==he.id)),D.success("Scheduled download removed")},children:e.jsx(ga,{className:"h-4 w-4 text-destructive"})})]})]})},he.id))]})]})})]})}),e.jsx(pt,{value:"system",className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(K,{className:"bg-gradient-to-br from-blue-50 to-cyan-50 dark:from-blue-950 dark:to-cyan-950 border-primary/20",children:[e.jsx(xe,{children:e.jsxs(pe,{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(of,{className:`h-5 w-5 ${o?"text-green-500 animate-pulse":"text-red-500"}`}),"WiFi Connection"]}),e.jsx(De,{variant:o?"default":"destructive",className:"animate-pulse",children:o?"Online":"Offline"})]})}),e.jsx(Y,{className:"space-y-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium",children:"Network Name:"}),e.jsx("span",{className:"text-sm font-bold text-blue-600",children:st})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium",children:"Security:"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(gr,{className:"h-4 w-4 text-green-600"}),e.jsx("span",{className:"text-sm",children:"WPA2-PSK"})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium",children:"Signal Strength:"}),e.jsxs("div",{className:"flex items-center gap-2",children:[vs(),e.jsx(Cr,{value:N*25,className:"w-24 h-2"}),e.jsxs("span",{className:"text-sm font-bold",children:[N*25,"%"]})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium",children:"Connection Type:"}),e.jsx(De,{variant:"secondary",className:"font-bold",children:yt.toUpperCase()})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium",children:"IP Address:"}),e.jsxs("span",{className:"text-sm font-mono",children:["192.168.1.",Math.floor(Math.random()*255)]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium",children:"Ping/Latency:"}),e.jsxs("span",{className:`text-sm font-bold ${tt<20?"text-green-600":tt<40?"text-yellow-600":"text-red-600"}`,children:[tt,"ms"]})]})]})})]}),e.jsxs(K,{className:"bg-gradient-to-br from-purple-50 to-pink-50 dark:from-purple-950 dark:to-pink-950 border-primary/20",children:[e.jsx(xe,{children:e.jsxs(pe,{className:"flex items-center gap-2",children:[e.jsx(mu,{className:"h-5 w-5 text-purple-600"}),"System Volume"]})}),e.jsxs(Y,{className:"space-y-6",children:[e.jsx("div",{className:"text-center",children:e.jsxs("div",{className:"relative w-32 h-32 mx-auto mb-4",children:[e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsxs("div",{className:"text-4xl font-bold text-purple-600",children:[Ke[0],"%"]})}),e.jsxs("svg",{className:"w-full h-full transform -rotate-90",children:[e.jsx("circle",{cx:"64",cy:"64",r:"56",fill:"none",stroke:"#e5e7eb",strokeWidth:"8"}),e.jsx("circle",{cx:"64",cy:"64",r:"56",fill:"none",stroke:"#9333ea",strokeWidth:"8",strokeDasharray:`${Ke[0]*3.51} 351`,className:"transition-all duration-300"})]})]})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(mi,{value:Ke,onValueChange:he=>{jt(he),D.info(`Volume: ${he[0]}%`)},max:100,min:0,step:1,className:"w-full"}),e.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-600",children:[e.jsx(Gh,{className:"h-4 w-4"}),e.jsx(mu,{className:"h-4 w-4"})]})]})]})]}),e.jsxs(K,{className:"lg:col-span-2 bg-gradient-to-br from-green-50 to-emerald-50 dark:from-green-950 dark:to-emerald-950 border-primary/20",children:[e.jsx(xe,{children:e.jsxs(pe,{className:"flex items-center gap-2",children:[e.jsx(La,{className:"h-5 w-5 text-green-600 animate-pulse"}),"Network Speed Monitor (Real-Time)"]})}),e.jsx(Y,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"h-48 relative bg-white rounded-lg p-4 border-2 border-green-200 dark:border-green-800",children:[e.jsxs("div",{className:"absolute top-2 left-4 flex gap-4 text-xs",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-3 h-3 bg-blue-500 rounded-full animate-pulse"}),"Download"]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full animate-pulse"}),"Upload"]})]}),e.jsx("div",{className:"h-full flex items-end justify-between gap-1 pt-6",children:wt.map((he,We)=>e.jsxs("div",{className:"flex-1 flex flex-col items-center gap-1",children:[e.jsx("div",{className:"w-full bg-blue-500 rounded-t transition-all duration-300 hover:bg-blue-600",style:{height:`${Math.min(100,he/10)}%`}}),e.jsx("div",{className:"w-full bg-green-500 rounded-t transition-all duration-300 hover:bg-green-600",style:{height:`${Math.min(100,ss[We]/2)}%`}})]},We))})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"p-4 bg-blue-100 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx(Ma,{className:"h-5 w-5 text-blue-600 animate-bounce"}),e.jsx("span",{className:"text-xs text-blue-600 font-medium",children:"Download"})]}),e.jsx("div",{className:"text-2xl font-bold text-blue-700",children:Bs(u)}),e.jsxs("div",{className:"text-xs text-blue-600 mt-1",children:["Peak: ",Bs(Math.max(...wt))]})]}),e.jsxs("div",{className:"p-4 bg-green-100 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx(Vi,{className:"h-5 w-5 text-green-600 animate-bounce"}),e.jsx("span",{className:"text-xs text-green-600 font-medium",children:"Upload"})]}),e.jsx("div",{className:"text-2xl font-bold text-green-700",children:Bs(x)}),e.jsxs("div",{className:"text-xs text-green-600 mt-1",children:["Peak: ",Bs(Math.max(...ss))]})]})]})]})})]}),e.jsxs(K,{className:"bg-gradient-to-br from-orange-50 to-amber-50 dark:from-orange-950 dark:to-amber-950 border-primary/20",children:[e.jsx(xe,{children:e.jsxs(pe,{className:"flex items-center gap-2",children:[e.jsx(z_,{className:"h-5 w-5 text-orange-600"}),"Data Usage"]})}),e.jsxs(Y,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium",children:"Used:"}),e.jsxs("span",{className:"text-sm font-bold text-orange-600",children:[(as/1024).toFixed(2)," GB"]})]}),e.jsx(Cr,{value:as/we*100,className:"h-3"}),e.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-600",children:[e.jsx("span",{children:"0 GB"}),e.jsxs("span",{children:[(we/1024).toFixed(0)," GB Total"]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[e.jsxs("div",{className:"p-2 bg-white rounded border",children:[e.jsx("div",{className:"text-xs text-gray-600",children:"Downloaded"}),e.jsxs("div",{className:"font-bold text-blue-600",children:[(as*.7/1024).toFixed(2)," GB"]})]}),e.jsxs("div",{className:"p-2 bg-white rounded border",children:[e.jsx("div",{className:"text-xs text-gray-600",children:"Uploaded"}),e.jsxs("div",{className:"font-bold text-green-600",children:[(as*.3/1024).toFixed(2)," GB"]})]})]}),e.jsxs(R,{variant:"outline",size:"sm",className:"w-full",onClick:()=>{ke(0),D.success("Data usage reset")},children:[e.jsx(cs,{className:"h-4 w-4 mr-2"}),"Reset Usage"]})]})]}),e.jsxs(K,{className:"bg-gradient-to-br from-indigo-50 to-blue-50 dark:from-indigo-950 dark:to-blue-950 border-primary/20",children:[e.jsx(xe,{children:e.jsxs(pe,{className:"flex items-center gap-2",children:[e.jsx(U_,{className:"h-5 w-5 text-indigo-600"}),"System Resources"]})}),e.jsxs(Y,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("span",{className:"text-sm font-medium",children:"CPU Usage"}),e.jsxs("span",{className:`text-sm font-bold ${be>80?"text-red-600":be>50?"text-yellow-600":"text-green-600"}`,children:[be.toFixed(0),"%"]})]}),e.jsx(Cr,{value:be,className:"h-2"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("span",{className:"text-sm font-medium",children:"Memory"}),e.jsxs("span",{className:`text-sm font-bold ${ve>80?"text-red-600":ve>50?"text-yellow-600":"text-green-600"}`,children:[ve.toFixed(0),"%"]})]}),e.jsx(Cr,{value:ve,className:"h-2"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("span",{className:"text-sm font-medium",children:"Disk Space"}),e.jsxs("span",{className:`text-sm font-bold ${Pe>80?"text-red-600":Pe>50?"text-yellow-600":"text-green-600"}`,children:[Pe.toFixed(0),"%"]})]}),e.jsx(Cr,{value:Pe,className:"h-2"})]})]}),e.jsx("div",{className:"pt-3 border-t",children:e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Status:"}),e.jsx(De,{variant:be<70&&ve<70?"default":"destructive",children:be<70&&ve<70?"Optimal":"High Load"})]})})]})]})]})}),e.jsx(pt,{value:"database",className:"space-y-6",children:e.jsxs(K,{className:"bg-gradient-to-br from-slate-50 to-gray-50 dark:from-slate-950 dark:to-gray-950 border-primary/20",children:[e.jsx(xe,{children:e.jsxs(pe,{className:"flex items-center gap-2",children:[e.jsx(ju,{className:"h-5 w-5 text-slate-600"}),"Download History Database"]})}),e.jsxs(Y,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[e.jsxs("div",{className:"text-center p-4 bg-blue-50 dark:bg-blue-950 rounded-lg border-2 border-blue-200 dark:border-blue-800 hover:shadow-md transition-shadow",children:[e.jsx(ju,{className:"h-8 w-8 text-blue-600 dark:text-blue-400 mx-auto mb-2 animate-pulse"}),e.jsx("p",{className:"font-medium text-sm text-muted-foreground",children:"Total Downloads"}),e.jsx("p",{className:"text-3xl font-bold text-blue-600 dark:text-blue-400 mt-1",children:r.length+xs}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"All time"})]}),e.jsxs("div",{className:"text-center p-4 bg-green-50 dark:bg-green-950 rounded-lg border-2 border-green-200 dark:border-green-800 hover:shadow-md transition-shadow",children:[e.jsx(us,{className:"h-8 w-8 text-green-600 dark:text-green-400 mx-auto mb-2"}),e.jsx("p",{className:"font-medium text-sm text-muted-foreground",children:"Completed"}),e.jsx("p",{className:"text-3xl font-bold text-green-600 dark:text-green-400 mt-1",children:r.filter(he=>he.status==="completed").length+xs}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[(r.filter(he=>he.status==="completed").length/Math.max(r.length,1)*100).toFixed(0),"% success rate"]})]}),e.jsxs("div",{className:"text-center p-4 bg-red-50 dark:bg-red-950 rounded-lg border-2 border-red-200 dark:border-red-800 hover:shadow-md transition-shadow",children:[e.jsx(ks,{className:"h-8 w-8 text-red-600 dark:text-red-400 mx-auto mb-2"}),e.jsx("p",{className:"font-medium text-sm text-muted-foreground",children:"Failed"}),e.jsx("p",{className:"text-3xl font-bold text-red-600 dark:text-red-400 mt-1",children:r.filter(he=>he.status==="error").length+sa}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[(r.filter(he=>he.status==="error").length/Math.max(r.length,1)*100).toFixed(0),"% error rate"]})]})]}),r.length>0&&e.jsxs("div",{className:"mb-6 p-4 bg-card rounded-lg border",children:[e.jsxs("h3",{className:"text-sm font-semibold mb-3 flex items-center gap-2",children:[e.jsx(La,{className:"h-4 w-4 text-primary"}),"Recent Downloads"]}),e.jsx(kr,{className:"h-32",children:e.jsx("div",{className:"space-y-2",children:r.slice(-5).reverse().map(he=>e.jsxs("div",{className:"flex items-center justify-between text-xs p-2 hover:bg-accent rounded",children:[e.jsx("span",{className:"font-medium truncate flex-1",children:he.filename}),e.jsx(De,{variant:he.status==="completed"?"default":he.status==="error"?"destructive":"secondary",className:"text-xs",children:he.status})]},he.id))})})]}),e.jsxs("div",{className:"flex flex-wrap gap-3",children:[e.jsx("input",{type:"file",ref:je,onChange:rt,accept:".json",className:"hidden"}),e.jsxs(R,{variant:"outline",onClick:Ie,className:"hover:bg-blue-50",children:[e.jsx(Ma,{className:"h-4 w-4 mr-2"}),"Export History"]}),e.jsxs(R,{variant:"outline",onClick:()=>je.current?.click(),className:"hover:bg-green-50",children:[e.jsx(Vi,{className:"h-4 w-4 mr-2"}),"Import History"]}),e.jsxs(R,{variant:"outline",onClick:()=>{Rt(he=>he+r.filter(We=>We.status==="completed").length),Te(he=>he+r.filter(We=>We.status==="error").length),D.success("Database refreshed")},className:"hover:bg-purple-50",children:[e.jsx(cs,{className:"h-4 w-4 mr-2"}),"Refresh Database"]}),e.jsxs(R,{variant:"outline",onClick:()=>{if(r.length===0){D.info("No downloads to clear");return}confirm("Are you sure you want to clear all download history?")&&(i([]),Rt(0),Te(0),D.success("Download history cleared"))},className:"hover:bg-red-50",children:[e.jsx(ga,{className:"h-4 w-4 mr-2"}),"Clear History"]})]})]})]})})]})]})},oA=v.createContext({}),pd=()=>{const t=v.useContext(oA);if(!t)throw new Error("useCustomerAuth must be used within CustomerAuthProvider");return t},iG=({children:t})=>{const[s,a]=v.useState(null),[r,i]=v.useState(!0),[o,c]=v.useState(!1);v.useEffect(()=>{u()},[]);const u=async()=>{if(!localStorage.getItem("customerToken")){i(!1);return}try{const b=await hu.getProfile();a(b.data.customer),c(!0)}catch(b){console.error("Customer auth check failed:",b),localStorage.removeItem("customerToken"),c(!1)}finally{i(!1)}},g={customer:s,loading:r,isAuthenticated:o,login:async y=>{try{const b=await hu.login(y),{customer:N,token:S,storeOwner:C}=b.data;return localStorage.setItem("customerToken",S),a(N),c(!0),D.success(`Welcome back, ${N.name}!`),{success:!0,customer:N,storeOwner:C}}catch(b){const N=b.response?.data?.message||"Login failed";return D.error(N),{success:!1,error:N}}},register:async y=>{try{const b=await hu.register(y),{customer:N,token:S,storeOwner:C}=b.data;return localStorage.setItem("customerToken",S),a(N),c(!0),D.success("Registration successful! Please verify your email."),{success:!0,customer:N,storeOwner:C}}catch(b){const N=b.response?.data?.message||"Registration failed";return D.error(N),{success:!1,error:N}}},logout:()=>{const y=localStorage.getItem("customerToken");if(y)try{const b=JSON.parse(atob(y.split(".")[1])),N=`cart_items_${b.id||b.email||"guest"}`;localStorage.removeItem(N)}catch(b){console.error("Error clearing cart:",b)}localStorage.removeItem("customerToken"),a(null),c(!1),D.info("Logged out successfully")},updateProfile:async y=>{try{const b=await hu.updateProfile(y);return a(b.data.customer),D.success("Profile updated successfully"),{success:!0}}catch(b){const N=b.response?.data?.message||"Update failed";return D.error(N),{success:!1,error:N}}},checkAuth:u};return e.jsx(oA.Provider,{value:g,children:t})},lG="2.0.0",oG={version:lG};class cG{constructor(){this.isInitialized=!1,this.updateCheckInterval=null,this.currentVersion=oG.version,this.updateCheckUrl=null,this.checkInterval=parseInt(void 0)||18e5,this.autoUpdate=!1,this.enableUpdateNotifications=!0}start(){return console.log("Update service started"),this.isInitialized=!0,this}stop(){return console.log("Update service stopped"),this.updateCheckInterval&&(clearInterval(this.updateCheckInterval),this.updateCheckInterval=null),this.isInitialized=!1,this}initialize(){return this.isInitialized?(console.log(" Initializing automatic updates..."),console.log(` Current version: ${this.currentVersion}`),console.log(` Check interval: ${this.checkInterval/1e3/60} minutes`),this.updateCheckInterval=setInterval(()=>{this.checkForUpdates()},this.checkInterval),setTimeout(()=>{this.checkForUpdates()},5e3),this.registerServiceWorkerListener(),this):(console.warn("Update service not started. Call start() first."),this)}async checkForUpdates(){if(!this.enableUpdateNotifications)return console.log(" Update notifications disabled"),this;console.log(" Checking for updates...");try{if(this.updateCheckUrl){const a=await(await fetch(this.updateCheckUrl)).json();a.latestVersion&&this.isNewerVersion(a.latestVersion,this.currentVersion)?this.notifyUpdate(a):console.log(" App is up to date")}else this.checkServiceWorkerUpdate()}catch(s){console.error(" Update check failed:",s)}return this}isNewerVersion(s,a){const r=s.split(".").map(Number),i=a.split(".").map(Number);for(let o=0;o<Math.max(r.length,i.length);o++){const c=r[o]||0,u=i[o]||0;if(c>u)return!0;if(c<u)return!1}return!1}checkServiceWorkerUpdate(){"serviceWorker"in navigator&&navigator.serviceWorker.getRegistration().then(s=>{s&&s.update()})}registerServiceWorkerListener(){"serviceWorker"in navigator&&navigator.serviceWorker.addEventListener("controllerchange",()=>{this.notifyUpdate({latestVersion:"New version",message:"A new version of the app is available.",updateType:"service-worker"})})}showWelcomeMessage(){if(!this.enableUpdateNotifications)return this;console.log(" Checking for welcome message...");const s=localStorage.getItem("app_version");return s?s!==this.currentVersion&&D.info(`Updated to v${this.currentVersion}`,{description:"Check out the new features and improvements!",duration:5e3,action:{label:"See What's New",onClick:()=>this.showChangelogModal()}}):D.success("Welcome to ominbiz!",{description:"Your all-in-one business management platform is ready!",duration:5e3,action:{label:"Get Started",onClick:()=>console.log("Welcome acknowledged")}}),localStorage.setItem("app_version",this.currentVersion),this}showChangelogModal(){const s=this.getChangelog();console.log(" Changelog:",s),D.info("Changelog",{description:s.slice(0,2).join(`
`),duration:8e3})}getChangelog(){return[" Enhanced AI chat with dashboard-specific responses"," Added voice input support"," New settings panel with AI personality options"," Real-time data integration"," Conversation history with search & export"," Improved UI with maximizable interface"]}notifyUpdate(s={}){const{latestVersion:a,message:r,updateType:i}=s;if(console.log(" Update available:",a||"New version"),this.autoUpdate)D.info("Auto-updating...",{description:"The app will refresh in 3 seconds",duration:3e3}),setTimeout(()=>{window.location.reload()},3e3);else{const o=a?`v${a}`:"New version";D.success("Update Available!",{description:r||`${o} is ready. Refresh to update.`,duration:0,action:{label:"Update Now",onClick:()=>window.location.reload()},cancel:{label:"Later",onClick:()=>{console.log("Update postponed"),setTimeout(()=>{this.notifyUpdate(s)},36e5)}}})}return this}triggerUpdate(){return D.loading("Updating app...",{duration:1e3}),setTimeout(()=>{window.location.reload()},1e3),this}checkNetworkStatus(){return navigator.onLine?!0:(D.error("No internet connection",{description:"Updates require an internet connection",duration:5e3}),!1)}forceUpdateCheck(){return this.checkNetworkStatus()?(D.info("Checking for updates...",{duration:2e3}),this.checkForUpdates(),this):this}destroy(){return console.log(" Destroying update service..."),this.stop(),this.isInitialized=!1,this}getStatus(){return{isInitialized:this.isInitialized,hasActiveInterval:!!this.updateCheckInterval,currentVersion:this.currentVersion,checkInterval:this.checkInterval,autoUpdate:this.autoUpdate,notificationsEnabled:this.enableUpdateNotifications,hasUpdateUrl:!!this.updateCheckUrl}}getVersion(){return this.currentVersion}setNotificationsEnabled(s){return this.enableUpdateNotifications=s,console.log(` Update notifications ${s?"enabled":"disabled"}`),this}}const uu=new cG,dG=()=>{const{theme:t,setTheme:s}=tj(),{theme:a,setTheme:r,compactMode:i,highContrast:o,reducedMotion:c,animations:u,customAccentColor:f,fontSize:x,borderRadius:h,soundEnabled:p,availableThemes:g}=id();return v.useEffect(()=>{a!==t&&s(a)},[a,t,s]),v.useEffect(()=>{const S=document.documentElement,C=document.body;C.className=C.className.replace(/theme-\w+/g,""),C.classList.add(`theme-${a}`);const k=g[a];k&&k.colors&&Object.entries(k.colors).forEach(([F,E])=>{S.style.setProperty(`--color-${F}`,E)}),f&&(S.style.setProperty("--color-accent",f),S.style.setProperty("--color-primary",f)),i?(C.classList.add("compact-mode"),S.style.setProperty("--spacing-scale","0.75")):(C.classList.remove("compact-mode"),S.style.setProperty("--spacing-scale","1")),o?C.classList.add("high-contrast"):C.classList.remove("high-contrast"),c?C.classList.add("reduce-motion"):C.classList.remove("reduce-motion"),u?C.classList.remove("no-animations"):C.classList.add("no-animations");const A={small:"14px",medium:"16px",large:"18px","extra-large":"20px"};S.style.setProperty("--font-size-base",A[x]||"16px");const G={none:"0px",small:"0.25rem",medium:"0.5rem",large:"0.75rem","extra-large":"1rem"};S.style.setProperty("--border-radius-base",G[h]||"0.5rem")},[a,i,o,c,u,f,x,h,p,g]),{resetToDefaults:()=>{r("light"),D.success("Theme settings reset to defaults")},exportSettings:()=>{const S={theme:a,compactMode:i,highContrast:o,reducedMotion:c,animations:u,customAccentColor:f,fontSize:x,borderRadius:h,soundEnabled:p,exportedAt:new Date().toISOString()},C=new Blob([JSON.stringify(S,null,2)],{type:"application/json"}),k=URL.createObjectURL(C),A=document.createElement("a");A.href=k,A.download="ominbiz-theme-settings.json",A.click(),URL.revokeObjectURL(k),D.success("Theme settings exported successfully")},importSettings:S=>{const C=new FileReader;C.onload=k=>{try{const A=JSON.parse(k.target.result);A.theme&&g[A.theme]?(r(A.theme),D.success("Theme settings imported successfully")):D.error("Invalid theme settings file")}catch{D.error("Failed to import theme settings")}},C.readAsText(S)}}},uG=()=>(dG(),null),cA=v.createContext(),mG=()=>{const t=v.useContext(cA);if(!t)throw new Error("usePWA must be used within a PWAProvider");return t},hG=({children:t})=>{const[s,a]=v.useState(navigator.onLine),[r,i]=v.useState(!1),[o,c]=v.useState(!1),[u,f]=v.useState(null);v.useEffect(()=>{const g=()=>{const S=window.matchMedia("(display-mode: standalone)").matches||window.navigator.standalone===!0;i(S)},y=()=>a(!0),b=()=>a(!1),N=async()=>{if("serviceWorker"in navigator)try{const S=await navigator.serviceWorker.register("/sw.js",{type:"module",scope:"/"});f(S),S.addEventListener("updatefound",()=>{const C=S.installing;C&&C.addEventListener("statechange",()=>{C.state==="installed"&&navigator.serviceWorker.controller&&c(!0)})}),navigator.serviceWorker.addEventListener("message",C=>{C.data&&C.data.type==="SKIP_WAITING"&&window.location.reload()})}catch(S){console.error("Service Worker registration failed:",S)}};return window.addEventListener("online",y),window.addEventListener("offline",b),g(),N(),()=>{window.removeEventListener("online",y),window.removeEventListener("offline",b)}},[]);const p={isOnline:s,isInstalled:r,updateAvailable:o,updateApp:()=>{u&&u.waiting&&u.waiting.postMessage({type:"SKIP_WAITING"})},dismissUpdate:()=>{c(!1)},registration:u};return e.jsx(cA.Provider,{value:p,children:t})},fG=({...t})=>{const{theme:s="system"}=tj();return e.jsx(K_,{theme:s,className:"toaster group",position:"top-center",toastOptions:{style:{background:"#000000",color:"#ffffff",border:"1px solid #10b981"},className:"sonner-toast",success:{style:{background:"#000000",color:"#10b981",border:"1px solid #10b981"},iconTheme:{primary:"#10b981",secondary:"#000000"}},error:{style:{background:"#000000",color:"#ef4444",border:"1px solid #ef4444"}},warning:{style:{background:"#000000",color:"#f59e0b",border:"1px solid #f59e0b"}},info:{style:{background:"#000000",color:"#10b981",border:"1px solid #10b981"}}},limit:1,...t})};class xG extends xt.Component{constructor(s){super(s),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(s){return{hasError:!0}}componentDidCatch(s,a){console.error("Error caught by boundary:",s,a),this.setState({error:s,errorInfo:a})}handleReload=()=>{window.location.reload()};handleReset=()=>{this.setState({hasError:!1,error:null,errorInfo:null})};render(){return this.state.hasError?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background p-4",children:e.jsxs(K,{className:"w-full max-w-md",children:[e.jsxs(xe,{className:"text-center",children:[e.jsx("div",{className:"mx-auto mb-4 flex h-12 w-12 items-center justify-center rounded-full bg-red-100 dark:bg-red-900/20",children:e.jsx(Fr,{className:"h-6 w-6 text-red-600 dark:text-red-400"})}),e.jsx(pe,{className:"text-xl",children:"Something went wrong"}),e.jsx(ot,{children:"An unexpected error occurred. Please try refreshing the page."})]}),e.jsxs(Y,{className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs(R,{onClick:this.handleReload,className:"w-full",children:[e.jsx(cs,{className:"mr-2 h-4 w-4"}),"Refresh Page"]}),e.jsx(R,{onClick:this.handleReset,variant:"outline",className:"w-full",children:"Try Again"})]}),!1]})]})}):this.props.children}}const pG=()=>{const[t,s]=v.useState(null),[a,r]=v.useState(!1),[i,o]=v.useState(navigator.onLine),[c,u]=v.useState(!1);v.useEffect(()=>{const h=()=>{(window.matchMedia("(display-mode: standalone)").matches||window.navigator.standalone===!0)&&u(!0)},p=N=>{N.preventDefault(),s(N);const S=localStorage.getItem("pwa-install-dismissed"),C=new Date().getTime(),k=1440*60*1e3;(!S||C-parseInt(S)>k*7)&&r(!0)},g=()=>o(!0),y=()=>o(!1),b=()=>{u(!0),r(!1),s(null)};return window.addEventListener("beforeinstallprompt",p),window.addEventListener("appinstalled",b),window.addEventListener("online",g),window.addEventListener("offline",y),h(),()=>{window.removeEventListener("beforeinstallprompt",p),window.removeEventListener("appinstalled",b),window.removeEventListener("online",g),window.removeEventListener("offline",y)}},[]);const f=async()=>{if(t)try{t.prompt();const{outcome:h}=await t.userChoice;h==="accepted"?console.log("User accepted the install prompt"):(console.log("User dismissed the install prompt"),localStorage.setItem("pwa-install-dismissed",new Date().getTime().toString())),s(null),r(!1)}catch(h){console.error("Error during PWA installation:",h)}},x=()=>{r(!1),localStorage.setItem("pwa-install-dismissed",new Date().getTime().toString())};return c?null:e.jsxs(e.Fragment,{children:[!i&&e.jsx("div",{className:"fixed top-0 left-0 right-0 z-50 bg-yellow-500 text-black px-4 py-2 text-center text-sm font-medium",children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(Ic,{size:16}),e.jsx("span",{children:"You're offline. Some features may be limited."})]})}),a&&t&&e.jsx("div",{className:"fixed bottom-4 left-4 right-4 md:left-auto md:right-4 md:max-w-sm z-40 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg shadow-lg p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"flex-shrink-0 w-10 h-10 bg-black dark:bg-white rounded-lg flex items-center justify-center",children:e.jsx(Ma,{className:"w-5 h-5 text-white dark:text-black"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:"Install ominbiz"}),e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-300 mt-1",children:"Install our app for a better experience with offline access and quick launch."}),e.jsxs("div",{className:"flex gap-2 mt-3",children:[e.jsx("button",{onClick:f,className:"flex-1 bg-black dark:bg-white text-white dark:text-black text-xs font-medium py-2 px-3 rounded-md hover:bg-gray-800 dark:hover:bg-gray-100 transition-colors",children:"Install"}),e.jsx("button",{onClick:x,className:"flex-shrink-0 text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200 p-2",children:e.jsx(jr,{size:14})})]})]})]})}),i&&e.jsx("div",{className:"fixed top-4 right-4 z-30 animate-fade-in",children:e.jsxs("div",{className:"bg-green-500 text-white px-3 py-1 rounded-full text-xs font-medium flex items-center gap-1",children:[e.jsx(of,{size:12}),e.jsx("span",{children:"Online"})]})})]})},gG=()=>{const{updateAvailable:t,updateApp:s,dismissUpdate:a}=mG();return t?e.jsx("div",{className:"fixed top-4 left-4 right-4 md:left-auto md:right-4 md:max-w-sm z-50 bg-blue-600 text-white rounded-lg shadow-lg p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"flex-shrink-0 w-8 h-8 bg-blue-500 rounded-lg flex items-center justify-center",children:e.jsx(cs,{className:"w-4 h-4"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"text-sm font-semibold",children:"Update Available"}),e.jsx("p",{className:"text-xs opacity-90 mt-1",children:"A new version of ominbiz is available. Update now for the latest features and improvements."}),e.jsxs("div",{className:"flex gap-2 mt-3",children:[e.jsx("button",{onClick:s,className:"flex-1 bg-white text-blue-600 text-xs font-medium py-2 px-3 rounded-md hover:bg-blue-50 transition-colors",children:"Update Now"}),e.jsx("button",{onClick:a,className:"flex-shrink-0 text-white/80 hover:text-white p-2",children:e.jsx(jr,{size:14})})]})]})]})}):null},vG=()=>{const{inviteCode:t}=el(),s=Ka(),{register:a}=pd(),[r,i]=v.useState(!1),[o,c]=v.useState(!1),[u,f]=v.useState(!0),[x,h]=v.useState({name:"",email:"",phone:"",password:""}),[p,g]=v.useState({businessName:"Premium Beauty Store",ownerName:"Loading..."});v.useEffect(()=>{t?f(!1):(D.error("No invite code provided"),s("/"))},[t,s]);const y=N=>{h({...x,[N.target.name]:N.target.value})},b=async N=>{N.preventDefault(),c(!0);try{(await a({...x,inviteCode:t})).success&&(D.success(`Welcome! You now have access to ${p.businessName}`),s(`/client/store/${t}`))}catch(S){console.error("Registration error:",S)}finally{c(!1)}};return u?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-primary/5 via-background to-accent/5 flex items-center justify-center p-4",children:e.jsx(K,{className:"w-full max-w-md shadow-lg border-primary/10",children:e.jsxs(Y,{className:"pt-6 text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"Loading..."})]})})}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-primary/5 via-background to-accent/5 flex items-center justify-center p-4",children:e.jsxs(K,{className:"w-full max-w-md shadow-lg border-primary/10",children:[e.jsxs(xe,{className:"space-y-4 text-center",children:[e.jsx("div",{className:"mx-auto h-16 w-16 rounded-full bg-primary/10 flex items-center justify-center",children:e.jsx(Ab,{className:"h-8 w-8 text-primary"})}),e.jsxs("div",{children:[e.jsx(pe,{className:"text-2xl",children:"You're Invited!"}),e.jsxs(ot,{className:"mt-2",children:[p.ownerName," has invited you to shop at"," ",e.jsx("span",{className:"font-semibold text-foreground",children:p.businessName})]})]})]}),e.jsx(Y,{children:e.jsxs("form",{onSubmit:b,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(te,{htmlFor:"name",children:"Full Name"}),e.jsxs("div",{className:"relative",children:[e.jsx(la,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(me,{id:"name",name:"name",placeholder:"John Doe",value:x.name,onChange:y,className:"pl-10",required:!0})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(te,{htmlFor:"email",children:"Email"}),e.jsxs("div",{className:"relative",children:[e.jsx(Ks,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(me,{id:"email",name:"email",type:"email",placeholder:"john@example.com",value:x.email,onChange:y,className:"pl-10",required:!0})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(te,{htmlFor:"phone",children:"Phone Number"}),e.jsxs("div",{className:"relative",children:[e.jsx(Ws,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(me,{id:"phone",name:"phone",type:"tel",placeholder:"+254 712 345 678",value:x.phone,onChange:y,className:"pl-10",required:!0})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(te,{htmlFor:"password",children:"Create Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(gr,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(me,{id:"password",name:"password",type:r?"text":"password",placeholder:"",value:x.password,onChange:y,className:"pl-10 pr-10",required:!0}),e.jsx("button",{type:"button",onClick:()=>i(!r),className:"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground transition-colors",children:r?e.jsx(ko,{className:"h-4 w-4"}):e.jsx(ca,{className:"h-4 w-4"})})]})]}),e.jsx(R,{type:"submit",className:"w-full gap-2",disabled:o,children:o?"Creating Account...":e.jsxs(e.Fragment,{children:[e.jsx(Ab,{className:"h-4 w-4"}),"Join Store"]})}),e.jsxs("p",{className:"text-xs text-center text-muted-foreground",children:["By signing up, you agree to our"," ",e.jsx("a",{href:"#",className:"text-primary hover:underline",children:"Terms"})," ","and"," ",e.jsx("a",{href:"#",className:"text-primary hover:underline",children:"Privacy Policy"})]}),e.jsxs("div",{className:"text-xs text-center text-muted-foreground",children:["Already have an account?"," ",e.jsxs(qt,{to:`/client/login/${t}`,className:"text-primary hover:underline inline-flex items-center gap-1 ml-1",children:[e.jsx(yv,{className:"h-3 w-3"}),"Log in"]})]}),e.jsx("div",{className:"pt-4 border-t",children:e.jsxs("p",{className:"text-xs text-center text-muted-foreground",children:[e.jsx(gr,{className:"inline h-4 w-4 mr-1"})," Secure & Private  Only ",p.ownerName," can see your orders"]})})]})})]})})};function rv({...t}){return e.jsx(W5,{"data-slot":"sheet",...t})}function nv({...t}){return e.jsx(G5,{"data-slot":"sheet-trigger",...t})}function jG({...t}){return e.jsx(Q5,{"data-slot":"sheet-portal",...t})}function yG({className:t,...s}){return e.jsx(Z5,{"data-slot":"sheet-overlay",className:Ze("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",t),...s})}function iv({className:t,children:s,side:a="right",...r}){return e.jsxs(jG,{children:[e.jsx(yG,{}),e.jsxs(q5,{"data-slot":"sheet-content",className:Ze("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out fixed z-50 flex flex-col gap-4 shadow-lg transition ease-in-out data-[state=closed]:duration-300 data-[state=open]:duration-500",a==="right"&&"data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right inset-y-0 right-0 h-full w-3/4 border-l sm:max-w-sm",a==="left"&&"data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left inset-y-0 left-0 h-full w-3/4 border-r sm:max-w-sm",a==="top"&&"data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top inset-x-0 top-0 h-auto border-b",a==="bottom"&&"data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom inset-x-0 bottom-0 h-auto border-t",t),...r,children:[s,e.jsxs(K5,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-secondary absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none",children:[e.jsx(jr,{className:"size-4"}),e.jsx("span",{className:"sr-only",children:"Close"})]})]})]})}function lv({className:t,...s}){return e.jsx("div",{"data-slot":"sheet-header",className:Ze("flex flex-col gap-1.5 p-4",t),...s})}function ov({className:t,...s}){return e.jsx(Y5,{"data-slot":"sheet-title",className:Ze("text-foreground font-semibold",t),...s})}function cv({className:t,...s}){return e.jsx(X5,{"data-slot":"sheet-description",className:Ze("text-muted-foreground text-sm",t),...s})}const NG=({product:t,open:s,onClose:a,onAddToCart:r})=>{const[i,o]=v.useState(1),[c,u]=v.useState(!1);if(!t)return null;const f=t.rating||4.5,x=t.reviews?.length||12;return e.jsx(Bt,{open:s,onOpenChange:a,children:e.jsxs(zt,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsx(Ut,{children:e.jsx(Vt,{className:"sr-only",children:t.name})}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"aspect-square bg-gradient-to-br from-secondary/30 to-primary/10 rounded-xl flex items-center justify-center overflow-hidden",children:e.jsx(Yt,{className:"h-32 w-32 text-primary/40"})}),e.jsx("div",{className:"grid grid-cols-4 gap-2",children:[1,2,3,4].map(h=>e.jsx("div",{className:"aspect-square bg-muted rounded-lg flex items-center justify-center",children:e.jsx(Yt,{className:"h-8 w-8 text-muted-foreground"})},h))})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsx("h2",{className:"text-2xl font-bold text-foreground",children:t.name}),e.jsx(R,{variant:"ghost",size:"icon",onClick:()=>u(!c),className:"text-muted-foreground hover:text-primary",children:e.jsx($i,{className:`h-5 w-5 ${c?"fill-primary text-primary":""}`})})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx("div",{className:"flex items-center",children:[...Array(5)].map((h,p)=>e.jsx(Ja,{className:`h-4 w-4 ${p<Math.floor(f)?"fill-warning text-warning":"text-muted-foreground"}`},p))}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[f," (",x," reviews)"]})]}),e.jsxs("p",{className:"text-3xl font-bold text-primary",children:["KES ",(Number(t.price)||0).toFixed(2)]})]}),e.jsx(Pn,{}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-2 text-foreground",children:"Description"}),e.jsx("p",{className:"text-muted-foreground",children:t.description})]}),t.specs&&t.specs.length>0&&e.jsxs(e.Fragment,{children:[e.jsx(Pn,{}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-2 text-foreground",children:"Specifications"}),e.jsx("ul",{className:"space-y-1",children:t.specs.map((h,p)=>e.jsxs("li",{className:"text-sm text-muted-foreground flex items-center gap-2",children:[e.jsx("span",{className:"h-1.5 w-1.5 rounded-full bg-primary"}),h]},p))})]})]}),e.jsx(Pn,{}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(Yt,{className:"h-4 w-4 text-success"}),e.jsx("span",{className:(t.stockQuantity||t.stock||0)>10?"text-success":"text-warning",children:(t.stockQuantity||t.stock||0)>10?"In Stock":`Only ${t.stockQuantity||t.stock||0} left`})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[e.jsx(Kc,{className:"h-4 w-4"}),e.jsx("span",{children:"Free delivery on orders over KES 1,000"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[e.jsx(da,{className:"h-4 w-4"}),e.jsx("span",{children:"Secure payment & 7-day return policy"})]})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsxs("div",{className:"flex items-center border border-border rounded-lg",children:[e.jsx(R,{variant:"ghost",size:"sm",onClick:()=>o(Math.max(1,i-1)),className:"rounded-r-none",children:"-"}),e.jsx("span",{className:"px-4 font-semibold",children:i}),e.jsx(R,{variant:"ghost",size:"sm",onClick:()=>o(Math.min(t.stockQuantity||t.stock||0,i+1)),className:"rounded-l-none",children:"+"})]}),e.jsxs(R,{className:"flex-1 gap-2",onClick:()=>{for(let h=0;h<i;h++)r(t);a()},disabled:(t.stockQuantity||t.stock||0)===0,children:[e.jsx(ws,{className:"h-4 w-4"}),"Add to Cart"]})]})]})]}),t.reviews&&t.reviews.length>0&&e.jsxs(e.Fragment,{children:[e.jsx(Pn,{className:"my-6"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold mb-4 text-foreground",children:"Customer Reviews"}),e.jsx("div",{className:"space-y-4",children:t.reviews.slice(0,3).map(h=>e.jsxs("div",{className:"border border-border rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"h-8 w-8 rounded-full bg-primary/10 flex items-center justify-center",children:e.jsx("span",{className:"text-sm font-semibold text-primary",children:h.author.charAt(0)})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-sm text-foreground",children:h.author}),e.jsx("p",{className:"text-xs text-muted-foreground",children:h.date})]})]}),e.jsx("div",{className:"flex items-center",children:[...Array(5)].map((p,g)=>e.jsx(Ja,{className:`h-3 w-3 ${g<h.rating?"fill-warning text-warning":"text-muted-foreground"}`},g))})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:h.comment})]},h.id))})]})]})]})})},bG=1,wG=1e6;let eg=0;function SG(){return eg=(eg+1)%Number.MAX_SAFE_INTEGER,eg.toString()}const tg=new Map,hS=t=>{if(tg.has(t))return;const s=setTimeout(()=>{tg.delete(t),Du({type:"REMOVE_TOAST",toastId:t})},wG);tg.set(t,s)},CG=(t,s)=>{switch(s.type){case"ADD_TOAST":return{...t,toasts:[s.toast,...t.toasts].slice(0,bG)};case"UPDATE_TOAST":return{...t,toasts:t.toasts.map(a=>a.id===s.toast.id?{...a,...s.toast}:a)};case"DISMISS_TOAST":{const{toastId:a}=s;return a?hS(a):t.toasts.forEach(r=>{hS(r.id)}),{...t,toasts:t.toasts.map(r=>r.id===a||a===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return s.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(a=>a.id!==s.toastId)}}},ef=[];let tf={toasts:[]};function Du(t){tf=CG(tf,t),ef.forEach(s=>{s(tf)})}function TG(t){const s=SG(),a=i=>Du({type:"UPDATE_TOAST",toast:{...i,id:s}}),r=()=>Du({type:"DISMISS_TOAST",toastId:s});return Du({type:"ADD_TOAST",toast:{...t,id:s,open:!0,onOpenChange:i=>{i||r()}}}),{id:s,dismiss:r,update:a}}function dA(){const[t,s]=v.useState(tf);return v.useEffect(()=>(ef.push(s),()=>{const a=ef.indexOf(s);a>-1&&ef.splice(a,1)}),[t]),{...t,toast:TG,dismiss:a=>Du({type:"DISMISS_TOAST",toastId:a})}}const EG=({open:t,onClose:s,cartItems:a,cartTotal:r,onClearCart:i})=>{const{toast:o}=dA(),{inviteCode:c}=el(),[u,f]=v.useState(1),[x,h]=v.useState(""),[p,g]=v.useState(!1),[y,b]=v.useState("cash"),[N,S]=v.useState("mpesa"),[C,k]=v.useState({name:"",email:"",phone:"",address:"",city:""}),A=_=>{k({...C,[_.target.name]:_.target.value})},G=async(_=null)=>{try{const P=`ORD-${Date.now()}-${Math.floor(Math.random()*1e3)}`,z={orderId:P,customer:{name:C.name,email:C.email,phone:C.phone},items:a.map(ae=>({product:ae._id||ae.id,name:ae.name,price:ae.price,quantity:ae.quantity,currency:ae.currency||"USD",image:ae.image||null})),subtotal:r,total:r,status:y==="cash"||y==="dollar"?"Submitted":"Processing",paymentStatus:_?"Paid":"Pending",deliveryInfo:{address:C.address,city:C.city,method:"delivery",contactPerson:C.name,contactPhone:C.phone},paymentMethod:y,paymentDetails:_||{method:y},orderType:"standard",priority:"medium"},V=localStorage.getItem("customerToken"),W=c||window.location.pathname.split("/").filter(Boolean).pop();if(!W)throw new Error("Store invite code is missing. Please refresh the page and try again.");let q;const B=V?{Authorization:`Bearer ${V}`}:{};return q=await Ne.post("/public/orders",{...z,inviteCode:W},{headers:B}),console.log(" Order created successfully:",q.data),{success:!0,orderNum:P,order:q.data}}catch(P){return console.error(" Error creating order:",P),{success:!1,error:P.response?.data?.message||P.message||"Failed to create order. Please try again."}}},F=async _=>{g(!0);const P=await G(_);g(!1),P.success?(h(P.orderNum),o({title:"Payment & Order Successful!",description:`Your order #${P.orderNum} has been confirmed and saved.`}),i(),f(4)):o({title:"Order Creation Failed",description:P.error,variant:"destructive"})},E=_=>{g(!1),o({title:"Payment Failed",description:_?.message||"Payment could not be processed. Please try again.",variant:"destructive"})},T=()=>{f(1),k({name:"",email:"",phone:"",address:"",city:""}),h(""),g(!1),s()};return e.jsx(Bt,{open:t,onOpenChange:T,children:e.jsxs(zt,{className:"max-w-2xl max-h-[90vh] overflow-y-auto glass-panel",children:[e.jsx(Ut,{children:e.jsx(Vt,{children:"Checkout"})}),e.jsx("div",{className:"flex items-center justify-between mb-6",children:["Cart","Details","Payment","Done"].map((_,P)=>e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`h-8 w-8 rounded-full flex items-center justify-center text-sm font-semibold ${u>P+1?"bg-success text-success-foreground":u===P+1?"bg-primary text-primary-foreground":"bg-muted text-muted-foreground"}`,children:u>P+1?"":P+1}),P<3&&e.jsx("div",{className:`h-1 w-12 mx-2 ${u>P+1?"bg-success":"bg-muted"}`})]},_))}),u===1&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"font-semibold text-foreground",children:"Review Your Order"}),e.jsx("div",{className:"space-y-3",children:a.map(_=>e.jsxs("div",{className:"flex justify-between items-center p-3 bg-secondary/20 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-foreground",children:_.name}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Quantity: ",_.quantity]})]}),e.jsxs("p",{className:"font-semibold text-primary",children:["KES ",(_.price*_.quantity).toFixed(2)]})]},_.id))}),e.jsx(Pn,{}),e.jsxs("div",{className:"flex justify-between text-lg font-bold",children:[e.jsx("span",{className:"text-foreground",children:"Total:"}),e.jsxs("span",{className:"text-primary",children:["KES ",r.toFixed(2)]})]}),e.jsx(R,{className:"w-full",onClick:()=>f(2),children:"Continue to Details"})]}),u===2&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"font-semibold text-foreground",children:"Delivery Details"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(te,{htmlFor:"name",className:"flex items-center gap-2",children:[e.jsx(la,{className:"h-4 w-4"}),"Full Name"]}),e.jsx(me,{id:"name",name:"name",value:C.name,onChange:A,placeholder:"John Doe",required:!0})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(te,{htmlFor:"email",className:"flex items-center gap-2",children:[e.jsx(Ks,{className:"h-4 w-4"}),"Email"]}),e.jsx(me,{id:"email",name:"email",type:"email",value:C.email,onChange:A,placeholder:"john@example.com",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(te,{htmlFor:"phone",className:"flex items-center gap-2",children:[e.jsx(Ws,{className:"h-4 w-4"}),"Phone"]}),e.jsx(me,{id:"phone",name:"phone",value:C.phone,onChange:A,placeholder:"+254 700 000000",required:!0})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(te,{htmlFor:"address",className:"flex items-center gap-2",children:[e.jsx(Yr,{className:"h-4 w-4"}),"Delivery Address"]}),e.jsx(me,{id:"address",name:"address",value:C.address,onChange:A,placeholder:"123 Main Street, Apartment 4B",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(te,{htmlFor:"city",children:"City"}),e.jsx(me,{id:"city",name:"city",value:C.city,onChange:A,placeholder:"Nairobi",required:!0})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(R,{variant:"outline",className:"flex-1",onClick:()=>f(1),children:"Back"}),e.jsx(R,{className:"flex-1",onClick:()=>{if(!C.name||!C.email||!C.phone||!C.address||!C.city){o({title:"Missing Information",description:"Please fill in all required fields before continuing.",variant:"destructive"});return}f(3)},children:"Continue to Payment"})]})]}),u===3&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"font-semibold text-foreground",children:"Complete Payment"}),e.jsxs("div",{className:"bg-secondary/20 p-4 rounded-lg space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Subtotal"}),e.jsxs("span",{className:"text-foreground",children:["KES ",r.toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Delivery Fee"}),e.jsx("span",{className:"text-success",children:"Free"})]}),e.jsx(Pn,{}),e.jsxs("div",{className:"flex justify-between font-bold text-lg",children:[e.jsx("span",{className:"text-foreground",children:"Total"}),e.jsxs("span",{className:"text-primary",children:["KES ",r.toFixed(2)]})]})]}),e.jsxs("div",{className:"bg-muted/50 p-4 rounded-lg space-y-2",children:[e.jsxs("h4",{className:"font-semibold text-sm flex items-center gap-2",children:[e.jsx(la,{className:"h-4 w-4"}),"Delivery Details"]}),e.jsxs("div",{className:"text-sm text-muted-foreground space-y-1",children:[e.jsx("p",{children:C.name}),e.jsx("p",{children:C.email}),e.jsx("p",{children:C.phone}),e.jsxs("p",{children:[C.address,", ",C.city]})]})]}),e.jsxs("div",{className:"flex items-start gap-2 p-3 bg-blue-50 dark:bg-blue-950/20 border border-blue-200 dark:border-blue-900 rounded-lg",children:[e.jsx(ks,{className:"h-5 w-5 text-blue-600 dark:text-blue-400 mt-0.5"}),e.jsxs("div",{className:"text-sm text-blue-600 dark:text-blue-400",children:[e.jsx("p",{className:"font-semibold",children:"Secure Payment"}),e.jsx("p",{className:"text-xs",children:"Click below to choose your payment method. You can pay via M-Pesa or credit/debit card."})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-semibold",children:"Choose Payment Method"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("button",{onClick:()=>b("cash"),className:`p-4 rounded-xl border-2 transition-all ${y==="cash"?"border-green-600 bg-green-50 dark:bg-green-950/20":"border-border hover:border-green-300"}`,children:[e.jsx(td,{className:"h-8 w-8 mx-auto mb-2 text-green-600"}),e.jsx("div",{className:"font-semibold",children:"Cash on Delivery"}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Pay when you receive"})]}),e.jsxs("button",{onClick:()=>b("paynow"),className:`p-4 rounded-xl border-2 transition-all ${y==="paynow"?"border-blue-600 bg-blue-50 dark:bg-blue-950/20":"border-border hover:border-blue-300"}`,children:[e.jsx(pa,{className:"h-8 w-8 mx-auto mb-2 text-blue-600"}),e.jsx("div",{className:"font-semibold",children:"Pay Now"}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"M-Pesa or PayPal"})]})]})]}),y==="paynow"&&e.jsxs("div",{className:"space-y-3 animate-in fade-in slide-in-from-top-2",children:[e.jsx("h4",{className:"font-semibold text-sm",children:"Select Payment Gateway"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("button",{onClick:()=>S("mpesa"),className:`p-3 rounded-lg border-2 transition-all ${N==="mpesa"?"border-green-600 bg-green-50 dark:bg-green-950/20":"border-border hover:border-green-300"}`,children:[e.jsx(qr,{className:"h-6 w-6 mx-auto mb-1 text-green-600"}),e.jsx("div",{className:"font-semibold text-sm",children:"M-Pesa"}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Safaricom STK Push"})]}),e.jsxs("button",{onClick:()=>S("paypal"),className:`p-3 rounded-lg border-2 transition-all ${N==="paypal"?"border-blue-600 bg-blue-50 dark:bg-blue-950/20":"border-border hover:border-blue-300"}`,children:[e.jsx(_o,{className:"h-6 w-6 mx-auto mb-1 text-blue-600"}),e.jsx("div",{className:"font-semibold text-sm",children:"PayPal"}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Cards & PayPal"})]})]})]}),y==="paynow"?e.jsx("div",{className:"flex flex-col items-center justify-center gap-4 py-4",children:e.jsx(oE,{amount:r,description:`Order for ${a.length} items from store`,currency:"KES",onSuccess:F,onError:E,triggerText:"Proceed to Payment",showMpesa:N==="mpesa",showPaypal:N==="paypal",disabled:p||!C.name||!C.email||!C.phone})}):y==="cash"&&e.jsx(R,{className:"w-full h-12 text-lg font-bold",onClick:async()=>{if(!C.name||!C.email||!C.phone||!C.address||!C.city){o({title:"Missing Information",description:"Please go back and fill in all delivery details.",variant:"destructive"});return}g(!0);const _=await G();g(!1),_.success?(h(_.orderNum),o({title:"Order Placed!",description:`Your order #${_.orderNum} has been confirmed. Payment method: Cash on Delivery.`}),i(),f(4)):o({title:"Order Failed",description:_.error,variant:"destructive"})},disabled:p,children:p?"Processing...":"Place Order (Cash on Delivery)"}),e.jsx("div",{className:"flex gap-3",children:e.jsx(R,{variant:"outline",className:"flex-1",onClick:()=>f(2),disabled:p,children:"Back"})})]}),u===4&&e.jsxs("div",{className:"text-center space-y-4 py-8",children:[e.jsx("div",{className:"h-16 w-16 mx-auto bg-success/10 rounded-full flex items-center justify-center",children:e.jsx(ti,{className:"h-10 w-10 text-success"})}),e.jsx("h3",{className:"text-2xl font-bold text-foreground",children:"Order Confirmed!"}),e.jsx("p",{className:"text-muted-foreground",children:"Thank you for your order. We'll send you a confirmation email with tracking details shortly."}),e.jsx(R,{className:"w-full",onClick:T,children:"Continue Shopping"})]})]})})};function kG(t,s,a="long"){return new Intl.DateTimeFormat("en-US",{hour:"numeric",timeZone:t,timeZoneName:a}).format(s).split(/\s/g).slice(2).join(" ")}const AG={},vu={};function jo(t,s){try{const r=(AG[t]||=new Intl.DateTimeFormat("en-US",{timeZone:t,timeZoneName:"longOffset"}).format)(s).split("GMT")[1];return r in vu?vu[r]:fS(r,r.split(":"))}catch{if(t in vu)return vu[t];const a=t?.match(_G);return a?fS(t,a.slice(1)):NaN}}const _G=/([+-]\d\d):?(\d\d)?/;function fS(t,s){const a=+(s[0]||0),r=+(s[1]||0),i=+(s[2]||0)/60;return vu[t]=a*60+r>0?a*60+r+i:a*60-r-i}class hi extends Date{constructor(...s){super(),s.length>1&&typeof s[s.length-1]=="string"&&(this.timeZone=s.pop()),this.internal=new Date,isNaN(jo(this.timeZone,this))?this.setTime(NaN):s.length?typeof s[0]=="number"&&(s.length===1||s.length===2&&typeof s[1]!="number")?this.setTime(s[0]):typeof s[0]=="string"?this.setTime(+new Date(s[0])):s[0]instanceof Date?this.setTime(+s[0]):(this.setTime(+new Date(...s)),uA(this),dv(this)):this.setTime(Date.now())}static tz(s,...a){return a.length?new hi(...a,s):new hi(Date.now(),s)}withTimeZone(s){return new hi(+this,s)}getTimezoneOffset(){const s=-jo(this.timeZone,this);return s>0?Math.floor(s):Math.ceil(s)}setTime(s){return Date.prototype.setTime.apply(this,arguments),dv(this),+this}[Symbol.for("constructDateFrom")](s){return new hi(+new Date(s),this.timeZone)}}const xS=/^(get|set)(?!UTC)/;Object.getOwnPropertyNames(Date.prototype).forEach(t=>{if(!xS.test(t))return;const s=t.replace(xS,"$1UTC");hi.prototype[s]&&(t.startsWith("get")?hi.prototype[t]=function(){return this.internal[s]()}:(hi.prototype[t]=function(){return Date.prototype[s].apply(this.internal,arguments),DG(this),+this},hi.prototype[s]=function(){return Date.prototype[s].apply(this,arguments),dv(this),+this}))});function dv(t){t.internal.setTime(+t),t.internal.setUTCSeconds(t.internal.getUTCSeconds()-Math.round(-jo(t.timeZone,t)*60))}function DG(t){Date.prototype.setFullYear.call(t,t.internal.getUTCFullYear(),t.internal.getUTCMonth(),t.internal.getUTCDate()),Date.prototype.setHours.call(t,t.internal.getUTCHours(),t.internal.getUTCMinutes(),t.internal.getUTCSeconds(),t.internal.getUTCMilliseconds()),uA(t)}function uA(t){const s=jo(t.timeZone,t),a=s>0?Math.floor(s):Math.ceil(s),r=new Date(+t);r.setUTCHours(r.getUTCHours()-1);const i=-new Date(+t).getTimezoneOffset(),o=-new Date(+r).getTimezoneOffset(),c=i-o,u=Date.prototype.getHours.apply(t)!==t.internal.getUTCHours();c&&u&&t.internal.setUTCMinutes(t.internal.getUTCMinutes()+c);const f=i-a;f&&Date.prototype.setUTCMinutes.call(t,Date.prototype.getUTCMinutes.call(t)+f);const x=new Date(+t);x.setUTCSeconds(0);const h=i>0?x.getSeconds():(x.getSeconds()-60)%60,p=Math.round(-(jo(t.timeZone,t)*60))%60;(p||h)&&(t.internal.setUTCSeconds(t.internal.getUTCSeconds()+p),Date.prototype.setUTCSeconds.call(t,Date.prototype.getUTCSeconds.call(t)+p+h));const g=jo(t.timeZone,t),y=g>0?Math.floor(g):Math.ceil(g),N=-new Date(+t).getTimezoneOffset()-y,S=y!==a,C=N-f;if(S&&C){Date.prototype.setUTCMinutes.call(t,Date.prototype.getUTCMinutes.call(t)+C);const k=jo(t.timeZone,t),A=k>0?Math.floor(k):Math.ceil(k),G=y-A;G&&(t.internal.setUTCMinutes(t.internal.getUTCMinutes()+G),Date.prototype.setUTCMinutes.call(t,Date.prototype.getUTCMinutes.call(t)+G))}}class wr extends hi{static tz(s,...a){return a.length?new wr(...a,s):new wr(Date.now(),s)}toISOString(){const[s,a,r]=this.tzComponents(),i=`${s}${a}:${r}`;return this.internal.toISOString().slice(0,-1)+i}toString(){return`${this.toDateString()} ${this.toTimeString()}`}toDateString(){const[s,a,r,i]=this.internal.toUTCString().split(" ");return`${s?.slice(0,-1)} ${r} ${a} ${i}`}toTimeString(){const s=this.internal.toUTCString().split(" ")[4],[a,r,i]=this.tzComponents();return`${s} GMT${a}${r}${i} (${kG(this.timeZone,this)})`}toLocaleString(s,a){return Date.prototype.toLocaleString.call(this,s,{...a,timeZone:a?.timeZone||this.timeZone})}toLocaleDateString(s,a){return Date.prototype.toLocaleDateString.call(this,s,{...a,timeZone:a?.timeZone||this.timeZone})}toLocaleTimeString(s,a){return Date.prototype.toLocaleTimeString.call(this,s,{...a,timeZone:a?.timeZone||this.timeZone})}tzComponents(){const s=this.getTimezoneOffset(),a=s>0?"-":"+",r=String(Math.floor(Math.abs(s)/60)).padStart(2,"0"),i=String(Math.abs(s)%60).padStart(2,"0");return[a,r,i]}withTimeZone(s){return new wr(+this,s)}[Symbol.for("constructDateFrom")](s){return new wr(+new Date(s),this.timeZone)}}const pS=5,OG=4;function RG(t,s){const a=s.startOfMonth(t),r=a.getDay()>0?a.getDay():7,i=s.addDays(t,-r+1),o=s.addDays(i,pS*7-1);return s.getMonth(t)===s.getMonth(o)?pS:OG}function mA(t,s){const a=s.startOfMonth(t),r=a.getDay();return r===1?a:r===0?s.addDays(a,-6):s.addDays(a,-1*(r-1))}function PG(t,s){const a=mA(t,s),r=RG(t,s);return s.addDays(a,r*7-1)}class pn{constructor(s,a){this.Date=Date,this.today=()=>this.overrides?.today?this.overrides.today():this.options.timeZone?wr.tz(this.options.timeZone):new this.Date,this.newDate=(r,i,o)=>this.overrides?.newDate?this.overrides.newDate(r,i,o):this.options.timeZone?new wr(r,i,o,this.options.timeZone):new Date(r,i,o),this.addDays=(r,i)=>this.overrides?.addDays?this.overrides.addDays(r,i):Y_(r,i),this.addMonths=(r,i)=>this.overrides?.addMonths?this.overrides.addMonths(r,i):X_(r,i),this.addWeeks=(r,i)=>this.overrides?.addWeeks?this.overrides.addWeeks(r,i):Q_(r,i),this.addYears=(r,i)=>this.overrides?.addYears?this.overrides.addYears(r,i):Z_(r,i),this.differenceInCalendarDays=(r,i)=>this.overrides?.differenceInCalendarDays?this.overrides.differenceInCalendarDays(r,i):J_(r,i),this.differenceInCalendarMonths=(r,i)=>this.overrides?.differenceInCalendarMonths?this.overrides.differenceInCalendarMonths(r,i):e6(r,i),this.eachMonthOfInterval=r=>this.overrides?.eachMonthOfInterval?this.overrides.eachMonthOfInterval(r):t6(r),this.eachYearOfInterval=r=>{const i=this.overrides?.eachYearOfInterval?this.overrides.eachYearOfInterval(r):s6(r),o=new Set(i.map(u=>this.getYear(u)));if(o.size===i.length)return i;const c=[];return o.forEach(u=>{c.push(new Date(u,0,1))}),c},this.endOfBroadcastWeek=r=>this.overrides?.endOfBroadcastWeek?this.overrides.endOfBroadcastWeek(r):PG(r,this),this.endOfISOWeek=r=>this.overrides?.endOfISOWeek?this.overrides.endOfISOWeek(r):a6(r),this.endOfMonth=r=>this.overrides?.endOfMonth?this.overrides.endOfMonth(r):r6(r),this.endOfWeek=(r,i)=>this.overrides?.endOfWeek?this.overrides.endOfWeek(r,i):n6(r,this.options),this.endOfYear=r=>this.overrides?.endOfYear?this.overrides.endOfYear(r):i6(r),this.format=(r,i,o)=>{const c=this.overrides?.format?this.overrides.format(r,i,this.options):mg(r,i,this.options);return this.options.numerals&&this.options.numerals!=="latn"?this.replaceDigits(c):c},this.getISOWeek=r=>this.overrides?.getISOWeek?this.overrides.getISOWeek(r):l6(r),this.getMonth=(r,i)=>this.overrides?.getMonth?this.overrides.getMonth(r,this.options):o6(r,this.options),this.getYear=(r,i)=>this.overrides?.getYear?this.overrides.getYear(r,this.options):c6(r,this.options),this.getWeek=(r,i)=>this.overrides?.getWeek?this.overrides.getWeek(r,this.options):d6(r,this.options),this.isAfter=(r,i)=>this.overrides?.isAfter?this.overrides.isAfter(r,i):u6(r,i),this.isBefore=(r,i)=>this.overrides?.isBefore?this.overrides.isBefore(r,i):m6(r,i),this.isDate=r=>this.overrides?.isDate?this.overrides.isDate(r):h6(r),this.isSameDay=(r,i)=>this.overrides?.isSameDay?this.overrides.isSameDay(r,i):f6(r,i),this.isSameMonth=(r,i)=>this.overrides?.isSameMonth?this.overrides.isSameMonth(r,i):x6(r,i),this.isSameYear=(r,i)=>this.overrides?.isSameYear?this.overrides.isSameYear(r,i):p6(r,i),this.max=r=>this.overrides?.max?this.overrides.max(r):g6(r),this.min=r=>this.overrides?.min?this.overrides.min(r):v6(r),this.setMonth=(r,i)=>this.overrides?.setMonth?this.overrides.setMonth(r,i):j6(r,i),this.setYear=(r,i)=>this.overrides?.setYear?this.overrides.setYear(r,i):y6(r,i),this.startOfBroadcastWeek=(r,i)=>this.overrides?.startOfBroadcastWeek?this.overrides.startOfBroadcastWeek(r,this):mA(r,this),this.startOfDay=r=>this.overrides?.startOfDay?this.overrides.startOfDay(r):N6(r),this.startOfISOWeek=r=>this.overrides?.startOfISOWeek?this.overrides.startOfISOWeek(r):b6(r),this.startOfMonth=r=>this.overrides?.startOfMonth?this.overrides.startOfMonth(r):w6(r),this.startOfWeek=(r,i)=>this.overrides?.startOfWeek?this.overrides.startOfWeek(r,this.options):S6(r,this.options),this.startOfYear=r=>this.overrides?.startOfYear?this.overrides.startOfYear(r):C6(r),this.options={locale:GS,...s},this.overrides=a}getDigitMap(){const{numerals:s="latn"}=this.options,a=new Intl.NumberFormat("en-US",{numberingSystem:s}),r={};for(let i=0;i<10;i++)r[i.toString()]=a.format(i);return r}replaceDigits(s){const a=this.getDigitMap();return s.replace(/\d/g,r=>a[r]||r)}formatNumber(s){return this.replaceDigits(s.toString())}getMonthYearOrder(){const s=this.options.locale?.code;return s&&pn.yearFirstLocales.has(s)?"year-first":"month-first"}formatMonthYear(s){const{locale:a,timeZone:r,numerals:i}=this.options,o=a?.code;if(o&&pn.yearFirstLocales.has(o))try{return new Intl.DateTimeFormat(o,{month:"long",year:"numeric",timeZone:r,numberingSystem:i}).format(s)}catch{}const c=this.getMonthYearOrder()==="year-first"?"y LLLL":"LLLL y";return this.format(s,c)}}pn.yearFirstLocales=new Set(["eu","hu","ja","ja-Hira","ja-JP","ko","ko-KR","lt","lt-LT","lv","lv-LV","mn","mn-MN","zh","zh-CN","zh-HK","zh-TW"]);const Ni=new pn;class hA{constructor(s,a,r=Ni){this.date=s,this.displayMonth=a,this.outside=!!(a&&!r.isSameMonth(s,a)),this.dateLib=r}isEqualTo(s){return this.dateLib.isSameDay(s.date,this.date)&&this.dateLib.isSameMonth(s.displayMonth,this.displayMonth)}}class MG{constructor(s,a){this.date=s,this.weeks=a}}class FG{constructor(s,a){this.days=a,this.weekNumber=s}}function LG(t){return xt.createElement("button",{...t})}function IG(t){return xt.createElement("span",{...t})}function BG(t){const{size:s=24,orientation:a="left",className:r}=t;return xt.createElement("svg",{className:r,width:s,height:s,viewBox:"0 0 24 24"},a==="up"&&xt.createElement("polygon",{points:"6.77 17 12.5 11.43 18.24 17 20 15.28 12.5 8 5 15.28"}),a==="down"&&xt.createElement("polygon",{points:"6.77 8 12.5 13.57 18.24 8 20 9.72 12.5 17 5 9.72"}),a==="left"&&xt.createElement("polygon",{points:"16 18.112 9.81111111 12 16 5.87733333 14.0888889 4 6 12 14.0888889 20"}),a==="right"&&xt.createElement("polygon",{points:"8 18.112 14.18888889 12 8 5.87733333 9.91111111 4 18 12 9.91111111 20"}))}function zG(t){const{day:s,modifiers:a,...r}=t;return xt.createElement("td",{...r})}function UG(t){const{day:s,modifiers:a,...r}=t,i=xt.useRef(null);return xt.useEffect(()=>{a.focused&&i.current?.focus()},[a.focused]),xt.createElement("button",{ref:i,...r})}var $t;(function(t){t.Root="root",t.Chevron="chevron",t.Day="day",t.DayButton="day_button",t.CaptionLabel="caption_label",t.Dropdowns="dropdowns",t.Dropdown="dropdown",t.DropdownRoot="dropdown_root",t.Footer="footer",t.MonthGrid="month_grid",t.MonthCaption="month_caption",t.MonthsDropdown="months_dropdown",t.Month="month",t.Months="months",t.Nav="nav",t.NextMonthButton="button_next",t.PreviousMonthButton="button_previous",t.Week="week",t.Weeks="weeks",t.Weekday="weekday",t.Weekdays="weekdays",t.WeekNumber="week_number",t.WeekNumberHeader="week_number_header",t.YearsDropdown="years_dropdown"})($t||($t={}));var ya;(function(t){t.disabled="disabled",t.hidden="hidden",t.outside="outside",t.focused="focused",t.today="today"})(ya||(ya={}));var Yn;(function(t){t.range_end="range_end",t.range_middle="range_middle",t.range_start="range_start",t.selected="selected"})(Yn||(Yn={}));var un;(function(t){t.weeks_before_enter="weeks_before_enter",t.weeks_before_exit="weeks_before_exit",t.weeks_after_enter="weeks_after_enter",t.weeks_after_exit="weeks_after_exit",t.caption_after_enter="caption_after_enter",t.caption_after_exit="caption_after_exit",t.caption_before_enter="caption_before_enter",t.caption_before_exit="caption_before_exit"})(un||(un={}));function VG(t){const{options:s,className:a,components:r,classNames:i,...o}=t,c=[i[$t.Dropdown],a].join(" "),u=s?.find(({value:f})=>f===o.value);return xt.createElement("span",{"data-disabled":o.disabled,className:i[$t.DropdownRoot]},xt.createElement(r.Select,{className:c,...o},s?.map(({value:f,label:x,disabled:h})=>xt.createElement(r.Option,{key:f,value:f,disabled:h},x))),xt.createElement("span",{className:i[$t.CaptionLabel],"aria-hidden":!0},u?.label,xt.createElement(r.Chevron,{orientation:"down",size:18,className:i[$t.Chevron]})))}function $G(t){return xt.createElement("div",{...t})}function HG(t){return xt.createElement("div",{...t})}function WG(t){const{calendarMonth:s,displayIndex:a,...r}=t;return xt.createElement("div",{...r},t.children)}function GG(t){const{calendarMonth:s,displayIndex:a,...r}=t;return xt.createElement("div",{...r})}function qG(t){return xt.createElement("table",{...t})}function KG(t){return xt.createElement("div",{...t})}const fA=v.createContext(void 0);function mm(){const t=v.useContext(fA);if(t===void 0)throw new Error("useDayPicker() must be used within a custom component.");return t}function YG(t){const{components:s}=mm();return xt.createElement(s.Dropdown,{...t})}function XG(t){const{onPreviousClick:s,onNextClick:a,previousMonth:r,nextMonth:i,...o}=t,{components:c,classNames:u,labels:{labelPrevious:f,labelNext:x}}=mm(),h=v.useCallback(g=>{i&&a?.(g)},[i,a]),p=v.useCallback(g=>{r&&s?.(g)},[r,s]);return xt.createElement("nav",{...o},xt.createElement(c.PreviousMonthButton,{type:"button",className:u[$t.PreviousMonthButton],tabIndex:r?void 0:-1,"aria-disabled":r?void 0:!0,"aria-label":f(r),onClick:p},xt.createElement(c.Chevron,{disabled:r?void 0:!0,className:u[$t.Chevron],orientation:"left"})),xt.createElement(c.NextMonthButton,{type:"button",className:u[$t.NextMonthButton],tabIndex:i?void 0:-1,"aria-disabled":i?void 0:!0,"aria-label":x(i),onClick:h},xt.createElement(c.Chevron,{disabled:i?void 0:!0,orientation:"right",className:u[$t.Chevron]})))}function QG(t){const{components:s}=mm();return xt.createElement(s.Button,{...t})}function ZG(t){return xt.createElement("option",{...t})}function JG(t){const{components:s}=mm();return xt.createElement(s.Button,{...t})}function eq(t){const{rootRef:s,...a}=t;return xt.createElement("div",{...a,ref:s})}function tq(t){return xt.createElement("select",{...t})}function sq(t){const{week:s,...a}=t;return xt.createElement("tr",{...a})}function aq(t){return xt.createElement("th",{...t})}function rq(t){return xt.createElement("thead",{"aria-hidden":!0},xt.createElement("tr",{...t}))}function nq(t){const{week:s,...a}=t;return xt.createElement("th",{...a})}function iq(t){return xt.createElement("th",{...t})}function lq(t){return xt.createElement("tbody",{...t})}function oq(t){const{components:s}=mm();return xt.createElement(s.Dropdown,{...t})}const cq=Object.freeze(Object.defineProperty({__proto__:null,Button:LG,CaptionLabel:IG,Chevron:BG,Day:zG,DayButton:UG,Dropdown:VG,DropdownNav:$G,Footer:HG,Month:WG,MonthCaption:GG,MonthGrid:qG,Months:KG,MonthsDropdown:YG,Nav:XG,NextMonthButton:QG,Option:ZG,PreviousMonthButton:JG,Root:eq,Select:tq,Week:sq,WeekNumber:nq,WeekNumberHeader:iq,Weekday:aq,Weekdays:rq,Weeks:lq,YearsDropdown:oq},Symbol.toStringTag,{value:"Module"}));function Hi(t,s,a=!1,r=Ni){let{from:i,to:o}=t;const{differenceInCalendarDays:c,isSameDay:u}=r;return i&&o?(c(o,i)<0&&([i,o]=[o,i]),c(s,i)>=(a?1:0)&&c(o,s)>=(a?1:0)):!a&&o?u(o,s):!a&&i?u(i,s):!1}function xA(t){return!!(t&&typeof t=="object"&&"before"in t&&"after"in t)}function Lj(t){return!!(t&&typeof t=="object"&&"from"in t)}function pA(t){return!!(t&&typeof t=="object"&&"after"in t)}function gA(t){return!!(t&&typeof t=="object"&&"before"in t)}function vA(t){return!!(t&&typeof t=="object"&&"dayOfWeek"in t)}function jA(t,s){return Array.isArray(t)&&t.every(s.isDate)}function Wi(t,s,a=Ni){const r=Array.isArray(s)?s:[s],{isSameDay:i,differenceInCalendarDays:o,isAfter:c}=a;return r.some(u=>{if(typeof u=="boolean")return u;if(a.isDate(u))return i(t,u);if(jA(u,a))return u.includes(t);if(Lj(u))return Hi(u,t,!1,a);if(vA(u))return Array.isArray(u.dayOfWeek)?u.dayOfWeek.includes(t.getDay()):u.dayOfWeek===t.getDay();if(xA(u)){const f=o(u.before,t),x=o(u.after,t),h=f>0,p=x<0;return c(u.before,u.after)?p&&h:h||p}return pA(u)?o(t,u.after)>0:gA(u)?o(u.before,t)>0:typeof u=="function"?u(t):!1})}function dq(t,s,a,r,i){const{disabled:o,hidden:c,modifiers:u,showOutsideDays:f,broadcastCalendar:x,today:h}=s,{isSameDay:p,isSameMonth:g,startOfMonth:y,isBefore:b,endOfMonth:N,isAfter:S}=i,C=a&&y(a),k=r&&N(r),A={[ya.focused]:[],[ya.outside]:[],[ya.disabled]:[],[ya.hidden]:[],[ya.today]:[]},G={};for(const F of t){const{date:E,displayMonth:T}=F,_=!!(T&&!g(E,T)),P=!!(C&&b(E,C)),z=!!(k&&S(E,k)),V=!!(o&&Wi(E,o,i)),W=!!(c&&Wi(E,c,i))||P||z||!x&&!f&&_||x&&f===!1&&_,q=p(E,h??i.today());_&&A.outside.push(F),V&&A.disabled.push(F),W&&A.hidden.push(F),q&&A.today.push(F),u&&Object.keys(u).forEach(B=>{const ae=u?.[B];ae&&Wi(E,ae,i)&&(G[B]?G[B].push(F):G[B]=[F])})}return F=>{const E={[ya.focused]:!1,[ya.disabled]:!1,[ya.hidden]:!1,[ya.outside]:!1,[ya.today]:!1},T={};for(const _ in A){const P=A[_];E[_]=P.some(z=>z===F)}for(const _ in G)T[_]=G[_].some(P=>P===F);return{...E,...T}}}function uq(t,s,a={}){return Object.entries(t).filter(([,i])=>i===!0).reduce((i,[o])=>(a[o]?i.push(a[o]):s[ya[o]]?i.push(s[ya[o]]):s[Yn[o]]&&i.push(s[Yn[o]]),i),[s[$t.Day]])}function mq(t){return{...cq,...t}}function hq(t){const s={"data-mode":t.mode??void 0,"data-required":"required"in t?t.required:void 0,"data-multiple-months":t.numberOfMonths&&t.numberOfMonths>1||void 0,"data-week-numbers":t.showWeekNumber||void 0,"data-broadcast-calendar":t.broadcastCalendar||void 0,"data-nav-layout":t.navLayout||void 0};return Object.entries(t).forEach(([a,r])=>{a.startsWith("data-")&&(s[a]=r)}),s}function Ij(){const t={};for(const s in $t)t[$t[s]]=`rdp-${$t[s]}`;for(const s in ya)t[ya[s]]=`rdp-${ya[s]}`;for(const s in Yn)t[Yn[s]]=`rdp-${Yn[s]}`;for(const s in un)t[un[s]]=`rdp-${un[s]}`;return t}function yA(t,s,a){return(a??new pn(s)).formatMonthYear(t)}const fq=yA;function xq(t,s,a){return(a??new pn(s)).format(t,"d")}function pq(t,s=Ni){return s.format(t,"LLLL")}function gq(t,s,a){return(a??new pn(s)).format(t,"cccccc")}function vq(t,s=Ni){return t<10?s.formatNumber(`0${t.toLocaleString()}`):s.formatNumber(`${t.toLocaleString()}`)}function jq(){return""}function NA(t,s=Ni){return s.format(t,"yyyy")}const yq=NA,Nq=Object.freeze(Object.defineProperty({__proto__:null,formatCaption:yA,formatDay:xq,formatMonthCaption:fq,formatMonthDropdown:pq,formatWeekNumber:vq,formatWeekNumberHeader:jq,formatWeekdayName:gq,formatYearCaption:yq,formatYearDropdown:NA},Symbol.toStringTag,{value:"Module"}));function bq(t){return t?.formatMonthCaption&&!t.formatCaption&&(t.formatCaption=t.formatMonthCaption),t?.formatYearCaption&&!t.formatYearDropdown&&(t.formatYearDropdown=t.formatYearCaption),{...Nq,...t}}function wq(t,s,a,r,i){const{startOfMonth:o,startOfYear:c,endOfYear:u,eachMonthOfInterval:f,getMonth:x}=i;return f({start:c(t),end:u(t)}).map(g=>{const y=r.formatMonthDropdown(g,i),b=x(g),N=s&&g<o(s)||a&&g>o(a)||!1;return{value:b,label:y,disabled:N}})}function Sq(t,s={},a={}){let r={...s?.[$t.Day]};return Object.entries(t).filter(([,i])=>i===!0).forEach(([i])=>{r={...r,...a?.[i]}}),r}function Cq(t,s,a){const r=t.today(),i=s?t.startOfISOWeek(r):t.startOfWeek(r),o=[];for(let c=0;c<7;c++){const u=t.addDays(i,c);o.push(u)}return o}function Tq(t,s,a,r,i=!1){if(!t||!s)return;const{startOfYear:o,endOfYear:c,eachYearOfInterval:u,getYear:f}=r,x=o(t),h=c(s),p=u({start:x,end:h});return i&&p.reverse(),p.map(g=>{const y=a.formatYearDropdown(g,r);return{value:f(g),label:y,disabled:!1}})}function bA(t,s,a,r){let i=(r??new pn(a)).format(t,"PPPP");return s.today&&(i=`Today, ${i}`),s.selected&&(i=`${i}, selected`),i}const Eq=bA;function wA(t,s,a){return(a??new pn(s)).formatMonthYear(t)}const kq=wA;function Aq(t,s,a,r){let i=(r??new pn(a)).format(t,"PPPP");return s?.today&&(i=`Today, ${i}`),i}function _q(t){return"Choose the Month"}function Dq(){return""}function Oq(t){return"Go to the Next Month"}function Rq(t){return"Go to the Previous Month"}function Pq(t,s,a){return(a??new pn(s)).format(t,"cccc")}function Mq(t,s){return`Week ${t}`}function Fq(t){return"Week Number"}function Lq(t){return"Choose the Year"}const Iq=Object.freeze(Object.defineProperty({__proto__:null,labelCaption:kq,labelDay:Eq,labelDayButton:bA,labelGrid:wA,labelGridcell:Aq,labelMonthDropdown:_q,labelNav:Dq,labelNext:Oq,labelPrevious:Rq,labelWeekNumber:Mq,labelWeekNumberHeader:Fq,labelWeekday:Pq,labelYearDropdown:Lq},Symbol.toStringTag,{value:"Module"})),hm=t=>t instanceof HTMLElement?t:null,sg=t=>[...t.querySelectorAll("[data-animated-month]")??[]],Bq=t=>hm(t.querySelector("[data-animated-month]")),ag=t=>hm(t.querySelector("[data-animated-caption]")),rg=t=>hm(t.querySelector("[data-animated-weeks]")),zq=t=>hm(t.querySelector("[data-animated-nav]")),Uq=t=>hm(t.querySelector("[data-animated-weekdays]"));function Vq(t,s,{classNames:a,months:r,focused:i,dateLib:o}){const c=v.useRef(null),u=v.useRef(r),f=v.useRef(!1);v.useLayoutEffect(()=>{const x=u.current;if(u.current=r,!s||!t.current||!(t.current instanceof HTMLElement)||r.length===0||x.length===0||r.length!==x.length)return;const h=o.isSameMonth(r[0].date,x[0].date),p=o.isAfter(r[0].date,x[0].date),g=p?a[un.caption_after_enter]:a[un.caption_before_enter],y=p?a[un.weeks_after_enter]:a[un.weeks_before_enter],b=c.current,N=t.current.cloneNode(!0);if(N instanceof HTMLElement?(sg(N).forEach(A=>{if(!(A instanceof HTMLElement))return;const G=Bq(A);G&&A.contains(G)&&A.removeChild(G);const F=ag(A);F&&F.classList.remove(g);const E=rg(A);E&&E.classList.remove(y)}),c.current=N):c.current=null,f.current||h||i)return;const S=b instanceof HTMLElement?sg(b):[],C=sg(t.current);if(C?.every(k=>k instanceof HTMLElement)&&S&&S.every(k=>k instanceof HTMLElement)){f.current=!0,t.current.style.isolation="isolate";const k=zq(t.current);k&&(k.style.zIndex="1"),C.forEach((A,G)=>{const F=S[G];if(!F)return;A.style.position="relative",A.style.overflow="hidden";const E=ag(A);E&&E.classList.add(g);const T=rg(A);T&&T.classList.add(y);const _=()=>{f.current=!1,t.current&&(t.current.style.isolation=""),k&&(k.style.zIndex=""),E&&E.classList.remove(g),T&&T.classList.remove(y),A.style.position="",A.style.overflow="",A.contains(F)&&A.removeChild(F)};F.style.pointerEvents="none",F.style.position="absolute",F.style.overflow="hidden",F.setAttribute("aria-hidden","true");const P=Uq(F);P&&(P.style.opacity="0");const z=ag(F);z&&(z.classList.add(p?a[un.caption_before_exit]:a[un.caption_after_exit]),z.addEventListener("animationend",_));const V=rg(F);V&&V.classList.add(p?a[un.weeks_before_exit]:a[un.weeks_after_exit]),A.insertBefore(F,A.firstChild)})}})}function $q(t,s,a,r){const i=t[0],o=t[t.length-1],{ISOWeek:c,fixedWeeks:u,broadcastCalendar:f}=a??{},{addDays:x,differenceInCalendarDays:h,differenceInCalendarMonths:p,endOfBroadcastWeek:g,endOfISOWeek:y,endOfMonth:b,endOfWeek:N,isAfter:S,startOfBroadcastWeek:C,startOfISOWeek:k,startOfWeek:A}=r,G=f?C(i,r):c?k(i):A(i),F=f?g(o):c?y(b(o)):N(b(o)),E=h(F,G),T=p(o,i)+1,_=[];for(let V=0;V<=E;V++){const W=x(G,V);if(s&&S(W,s))break;_.push(W)}const z=(f?35:42)*T;if(u&&_.length<z){const V=z-_.length;for(let W=0;W<V;W++){const q=x(_[_.length-1],1);_.push(q)}}return _}function Hq(t){const s=[];return t.reduce((a,r)=>{const i=r.weeks.reduce((o,c)=>o.concat(c.days.slice()),s.slice());return a.concat(i.slice())},s.slice())}function Wq(t,s,a,r){const{numberOfMonths:i=1}=a,o=[];for(let c=0;c<i;c++){const u=r.addMonths(t,c);if(s&&u>s)break;o.push(u)}return o}function gS(t,s,a,r){const{month:i,defaultMonth:o,today:c=r.today(),numberOfMonths:u=1}=t;let f=i||o||c;const{differenceInCalendarMonths:x,addMonths:h,startOfMonth:p}=r;if(a&&x(a,f)<u-1){const g=-1*(u-1);f=h(a,g)}return s&&x(f,s)<0&&(f=s),p(f)}function Gq(t,s,a,r){const{addDays:i,endOfBroadcastWeek:o,endOfISOWeek:c,endOfMonth:u,endOfWeek:f,getISOWeek:x,getWeek:h,startOfBroadcastWeek:p,startOfISOWeek:g,startOfWeek:y}=r,b=t.reduce((N,S)=>{const C=a.broadcastCalendar?p(S,r):a.ISOWeek?g(S):y(S),k=a.broadcastCalendar?o(S):a.ISOWeek?c(u(S)):f(u(S)),A=s.filter(T=>T>=C&&T<=k),G=a.broadcastCalendar?35:42;if(a.fixedWeeks&&A.length<G){const T=s.filter(_=>{const P=G-A.length;return _>k&&_<=i(k,P)});A.push(...T)}const F=A.reduce((T,_)=>{const P=a.ISOWeek?x(_):h(_),z=T.find(W=>W.weekNumber===P),V=new hA(_,S,r);return z?z.days.push(V):T.push(new FG(P,[V])),T},[]),E=new MG(S,F);return N.push(E),N},[]);return a.reverseMonths?b.reverse():b}function qq(t,s){let{startMonth:a,endMonth:r}=t;const{startOfYear:i,startOfDay:o,startOfMonth:c,endOfMonth:u,addYears:f,endOfYear:x,newDate:h,today:p}=s,{fromYear:g,toYear:y,fromMonth:b,toMonth:N}=t;!a&&b&&(a=b),!a&&g&&(a=s.newDate(g,0,1)),!r&&N&&(r=N),!r&&y&&(r=h(y,11,31));const S=t.captionLayout==="dropdown"||t.captionLayout==="dropdown-years";return a?a=c(a):g?a=h(g,0,1):!a&&S&&(a=i(f(t.today??p(),-100))),r?r=u(r):y?r=h(y,11,31):!r&&S&&(r=x(t.today??p())),[a&&o(a),r&&o(r)]}function Kq(t,s,a,r){if(a.disableNavigation)return;const{pagedNavigation:i,numberOfMonths:o=1}=a,{startOfMonth:c,addMonths:u,differenceInCalendarMonths:f}=r,x=i?o:1,h=c(t);if(!s)return u(h,x);if(!(f(s,t)<o))return u(h,x)}function Yq(t,s,a,r){if(a.disableNavigation)return;const{pagedNavigation:i,numberOfMonths:o}=a,{startOfMonth:c,addMonths:u,differenceInCalendarMonths:f}=r,x=i?o??1:1,h=c(t);if(!s)return u(h,-x);if(!(f(h,s)<=0))return u(h,-x)}function Xq(t){const s=[];return t.reduce((a,r)=>a.concat(r.weeks.slice()),s.slice())}function ix(t,s){const[a,r]=v.useState(t);return[s===void 0?a:s,r]}function Qq(t,s){const[a,r]=qq(t,s),{startOfMonth:i,endOfMonth:o}=s,c=gS(t,a,r,s),[u,f]=ix(c,t.month?c:void 0);v.useEffect(()=>{const E=gS(t,a,r,s);f(E)},[t.timeZone]);const x=Wq(u,r,t,s),h=$q(x,t.endMonth?o(t.endMonth):void 0,t,s),p=Gq(x,h,t,s),g=Xq(p),y=Hq(p),b=Yq(u,a,t,s),N=Kq(u,r,t,s),{disableNavigation:S,onMonthChange:C}=t,k=E=>g.some(T=>T.days.some(_=>_.isEqualTo(E))),A=E=>{if(S)return;let T=i(E);a&&T<i(a)&&(T=i(a)),r&&T>i(r)&&(T=i(r)),f(T),C?.(T)};return{months:p,weeks:g,days:y,navStart:a,navEnd:r,previousMonth:b,nextMonth:N,goToMonth:A,goToDay:E=>{k(E)||A(E.date)}}}var di;(function(t){t[t.Today=0]="Today",t[t.Selected=1]="Selected",t[t.LastFocused=2]="LastFocused",t[t.FocusedModifier=3]="FocusedModifier"})(di||(di={}));function vS(t){return!t[ya.disabled]&&!t[ya.hidden]&&!t[ya.outside]}function Zq(t,s,a,r){let i,o=-1;for(const c of t){const u=s(c);vS(u)&&(u[ya.focused]&&o<di.FocusedModifier?(i=c,o=di.FocusedModifier):r?.isEqualTo(c)&&o<di.LastFocused?(i=c,o=di.LastFocused):a(c.date)&&o<di.Selected?(i=c,o=di.Selected):u[ya.today]&&o<di.Today&&(i=c,o=di.Today))}return i||(i=t.find(c=>vS(s(c)))),i}function Jq(t,s,a,r,i,o,c){const{ISOWeek:u,broadcastCalendar:f}=o,{addDays:x,addMonths:h,addWeeks:p,addYears:g,endOfBroadcastWeek:y,endOfISOWeek:b,endOfWeek:N,max:S,min:C,startOfBroadcastWeek:k,startOfISOWeek:A,startOfWeek:G}=c;let E={day:x,week:p,month:h,year:g,startOfWeek:T=>f?k(T,c):u?A(T):G(T),endOfWeek:T=>f?y(T):u?b(T):N(T)}[t](a,s==="after"?1:-1);return s==="before"&&r?E=S([r,E]):s==="after"&&i&&(E=C([i,E])),E}function SA(t,s,a,r,i,o,c,u=0){if(u>365)return;const f=Jq(t,s,a.date,r,i,o,c),x=!!(o.disabled&&Wi(f,o.disabled,c)),h=!!(o.hidden&&Wi(f,o.hidden,c)),p=f,g=new hA(f,p,c);return!x&&!h?g:SA(t,s,g,r,i,o,c,u+1)}function eK(t,s,a,r,i){const{autoFocus:o}=t,[c,u]=v.useState(),f=Zq(s.days,a,r||(()=>!1),c),[x,h]=v.useState(o?f:void 0);return{isFocusTarget:N=>!!f?.isEqualTo(N),setFocused:h,focused:x,blur:()=>{u(x),h(void 0)},moveFocus:(N,S)=>{if(!x)return;const C=SA(N,S,x,s.navStart,s.navEnd,t,i);C&&(t.disableNavigation&&!s.days.some(A=>A.isEqualTo(C))||(s.goToDay(C),h(C)))}}}function tK(t,s){const{selected:a,required:r,onSelect:i}=t,[o,c]=ix(a,i?a:void 0),u=i?a:o,{isSameDay:f}=s,x=y=>u?.some(b=>f(b,y))??!1,{min:h,max:p}=t;return{selected:u,select:(y,b,N)=>{let S=[...u??[]];if(x(y)){if(u?.length===h||r&&u?.length===1)return;S=u?.filter(C=>!f(C,y))}else u?.length===p?S=[y]:S=[...S,y];return i||c(S),i?.(S,y,b,N),S},isSelected:x}}function sK(t,s,a=0,r=0,i=!1,o=Ni){const{from:c,to:u}=s||{},{isSameDay:f,isAfter:x,isBefore:h}=o;let p;if(!c&&!u)p={from:t,to:a>0?void 0:t};else if(c&&!u)f(c,t)?a===0?p={from:c,to:t}:i?p={from:c,to:void 0}:p=void 0:h(t,c)?p={from:t,to:c}:p={from:c,to:t};else if(c&&u)if(f(c,t)&&f(u,t))i?p={from:c,to:u}:p=void 0;else if(f(c,t))p={from:c,to:a>0?void 0:t};else if(f(u,t))p={from:t,to:a>0?void 0:t};else if(h(t,c))p={from:t,to:u};else if(x(t,c))p={from:c,to:t};else if(x(t,u))p={from:c,to:t};else throw new Error("Invalid range");if(p?.from&&p?.to){const g=o.differenceInCalendarDays(p.to,p.from);r>0&&g>r?p={from:t,to:void 0}:a>1&&g<a&&(p={from:t,to:void 0})}return p}function aK(t,s,a=Ni){const r=Array.isArray(s)?s:[s];let i=t.from;const o=a.differenceInCalendarDays(t.to,t.from),c=Math.min(o,6);for(let u=0;u<=c;u++){if(r.includes(i.getDay()))return!0;i=a.addDays(i,1)}return!1}function jS(t,s,a=Ni){return Hi(t,s.from,!1,a)||Hi(t,s.to,!1,a)||Hi(s,t.from,!1,a)||Hi(s,t.to,!1,a)}function rK(t,s,a=Ni){const r=Array.isArray(s)?s:[s];if(r.filter(u=>typeof u!="function").some(u=>typeof u=="boolean"?u:a.isDate(u)?Hi(t,u,!1,a):jA(u,a)?u.some(f=>Hi(t,f,!1,a)):Lj(u)?u.from&&u.to?jS(t,{from:u.from,to:u.to},a):!1:vA(u)?aK(t,u.dayOfWeek,a):xA(u)?a.isAfter(u.before,u.after)?jS(t,{from:a.addDays(u.after,1),to:a.addDays(u.before,-1)},a):Wi(t.from,u,a)||Wi(t.to,u,a):pA(u)||gA(u)?Wi(t.from,u,a)||Wi(t.to,u,a):!1))return!0;const c=r.filter(u=>typeof u=="function");if(c.length){let u=t.from;const f=a.differenceInCalendarDays(t.to,t.from);for(let x=0;x<=f;x++){if(c.some(h=>h(u)))return!0;u=a.addDays(u,1)}}return!1}function nK(t,s){const{disabled:a,excludeDisabled:r,selected:i,required:o,onSelect:c}=t,[u,f]=ix(i,c?i:void 0),x=c?i:u;return{selected:x,select:(g,y,b)=>{const{min:N,max:S}=t,C=g?sK(g,x,N,S,o,s):void 0;return r&&a&&C?.from&&C.to&&rK({from:C.from,to:C.to},a,s)&&(C.from=g,C.to=void 0),c||f(C),c?.(C,g,y,b),C},isSelected:g=>x&&Hi(x,g,!1,s)}}function iK(t,s){const{selected:a,required:r,onSelect:i}=t,[o,c]=ix(a,i?a:void 0),u=i?a:o,{isSameDay:f}=s;return{selected:u,select:(p,g,y)=>{let b=p;return!r&&u&&u&&f(p,u)&&(b=void 0),i||c(b),i?.(b,p,g,y),b},isSelected:p=>u?f(u,p):!1}}function lK(t,s){const a=iK(t,s),r=tK(t,s),i=nK(t,s);switch(t.mode){case"single":return a;case"multiple":return r;case"range":return i;default:return}}function oK(t){let s=t;s.timeZone&&(s={...t},s.today&&(s.today=new wr(s.today,s.timeZone)),s.month&&(s.month=new wr(s.month,s.timeZone)),s.defaultMonth&&(s.defaultMonth=new wr(s.defaultMonth,s.timeZone)),s.startMonth&&(s.startMonth=new wr(s.startMonth,s.timeZone)),s.endMonth&&(s.endMonth=new wr(s.endMonth,s.timeZone)),s.mode==="single"&&s.selected?s.selected=new wr(s.selected,s.timeZone):s.mode==="multiple"&&s.selected?s.selected=s.selected?.map(Ke=>new wr(Ke,s.timeZone)):s.mode==="range"&&s.selected&&(s.selected={from:s.selected.from?new wr(s.selected.from,s.timeZone):void 0,to:s.selected.to?new wr(s.selected.to,s.timeZone):void 0}));const{components:a,formatters:r,labels:i,dateLib:o,locale:c,classNames:u}=v.useMemo(()=>{const Ke={...GS,...s.locale};return{dateLib:new pn({locale:Ke,weekStartsOn:s.broadcastCalendar?1:s.weekStartsOn,firstWeekContainsDate:s.firstWeekContainsDate,useAdditionalWeekYearTokens:s.useAdditionalWeekYearTokens,useAdditionalDayOfYearTokens:s.useAdditionalDayOfYearTokens,timeZone:s.timeZone,numerals:s.numerals},s.dateLib),components:mq(s.components),formatters:bq(s.formatters),labels:{...Iq,...s.labels},locale:Ke,classNames:{...Ij(),...s.classNames}}},[s.locale,s.broadcastCalendar,s.weekStartsOn,s.firstWeekContainsDate,s.useAdditionalWeekYearTokens,s.useAdditionalDayOfYearTokens,s.timeZone,s.numerals,s.dateLib,s.components,s.formatters,s.labels,s.classNames]),{captionLayout:f,mode:x,navLayout:h,numberOfMonths:p=1,onDayBlur:g,onDayClick:y,onDayFocus:b,onDayKeyDown:N,onDayMouseEnter:S,onDayMouseLeave:C,onNextClick:k,onPrevClick:A,showWeekNumber:G,styles:F}=s,{formatCaption:E,formatDay:T,formatMonthDropdown:_,formatWeekNumber:P,formatWeekNumberHeader:z,formatWeekdayName:V,formatYearDropdown:W}=r,q=Qq(s,o),{days:B,months:ae,navStart:U,navEnd:Z,previousMonth:de,nextMonth:H,goToMonth:se}=q,ee=dq(B,s,U,Z,o),{isSelected:L,select:X,selected:O}=lK(s,o)??{},{blur:J,focused:ie,isFocusTarget:be,moveFocus:Le,setFocused:ve}=eK(s,q,ee,L??(()=>!1),o),{labelDayButton:oe,labelGridcell:Pe,labelGrid:Xe,labelMonthDropdown:yt,labelNav:vt,labelPrevious:gt,labelNext:bt,labelWeekday:lt,labelWeekNumber:ms,labelWeekNumberHeader:is,labelYearDropdown:Ms}=i,ys=v.useMemo(()=>Cq(o,s.ISOWeek),[o,s.ISOWeek]),Xs=x!==void 0||y!==void 0,xs=v.useCallback(()=>{de&&(se(de),A?.(de))},[de,se,A]),Rt=v.useCallback(()=>{H&&(se(H),k?.(H))},[se,H,k]),sa=v.useCallback((Ke,jt)=>wt=>{wt.preventDefault(),wt.stopPropagation(),ve(Ke),X?.(Ke.date,jt,wt),y?.(Ke.date,jt,wt)},[X,y,ve]),Te=v.useCallback((Ke,jt)=>wt=>{ve(Ke),b?.(Ke.date,jt,wt)},[b,ve]),je=v.useCallback((Ke,jt)=>wt=>{J(),g?.(Ke.date,jt,wt)},[J,g]),fe=v.useCallback((Ke,jt)=>wt=>{const Xt={ArrowLeft:[wt.shiftKey?"month":"day",s.dir==="rtl"?"after":"before"],ArrowRight:[wt.shiftKey?"month":"day",s.dir==="rtl"?"before":"after"],ArrowDown:[wt.shiftKey?"year":"week","after"],ArrowUp:[wt.shiftKey?"year":"week","before"],PageUp:[wt.shiftKey?"year":"month","before"],PageDown:[wt.shiftKey?"year":"month","after"],Home:["startOfWeek","before"],End:["endOfWeek","after"]};if(Xt[wt.key]){wt.preventDefault(),wt.stopPropagation();const[ss,ge]=Xt[wt.key];Le(ss,ge)}N?.(Ke.date,jt,wt)},[Le,N,s.dir]),Ue=v.useCallback((Ke,jt)=>wt=>{S?.(Ke.date,jt,wt)},[S]),st=v.useCallback((Ke,jt)=>wt=>{C?.(Ke.date,jt,wt)},[C]),Dt=v.useCallback(Ke=>jt=>{const wt=Number(jt.target.value),Xt=o.setMonth(o.startOfMonth(Ke),wt);se(Xt)},[o,se]),Pt=v.useCallback(Ke=>jt=>{const wt=Number(jt.target.value),Xt=o.setYear(o.startOfMonth(Ke),wt);se(Xt)},[o,se]),{className:Jt,style:as}=v.useMemo(()=>({className:[u[$t.Root],s.className].filter(Boolean).join(" "),style:{...F?.[$t.Root],...s.style}}),[u,s.className,s.style,F]),ke=hq(s),we=v.useRef(null);Vq(we,!!s.animate,{classNames:u,months:ae,focused:ie,dateLib:o});const nt={dayPickerProps:s,selected:O,select:X,isSelected:L,months:ae,nextMonth:H,previousMonth:de,goToMonth:se,getModifiers:ee,components:a,classNames:u,styles:F,labels:i,formatters:r};return xt.createElement(fA.Provider,{value:nt},xt.createElement(a.Root,{rootRef:s.animate?we:void 0,className:Jt,style:as,dir:s.dir,id:s.id,lang:s.lang,nonce:s.nonce,title:s.title,role:s.role,"aria-label":s["aria-label"],"aria-labelledby":s["aria-labelledby"],...ke},xt.createElement(a.Months,{className:u[$t.Months],style:F?.[$t.Months]},!s.hideNavigation&&!h&&xt.createElement(a.Nav,{"data-animated-nav":s.animate?"true":void 0,className:u[$t.Nav],style:F?.[$t.Nav],"aria-label":vt(),onPreviousClick:xs,onNextClick:Rt,previousMonth:de,nextMonth:H}),ae.map((Ke,jt)=>xt.createElement(a.Month,{"data-animated-month":s.animate?"true":void 0,className:u[$t.Month],style:F?.[$t.Month],key:jt,displayIndex:jt,calendarMonth:Ke},h==="around"&&!s.hideNavigation&&jt===0&&xt.createElement(a.PreviousMonthButton,{type:"button",className:u[$t.PreviousMonthButton],tabIndex:de?void 0:-1,"aria-disabled":de?void 0:!0,"aria-label":gt(de),onClick:xs,"data-animated-button":s.animate?"true":void 0},xt.createElement(a.Chevron,{disabled:de?void 0:!0,className:u[$t.Chevron],orientation:s.dir==="rtl"?"right":"left"})),xt.createElement(a.MonthCaption,{"data-animated-caption":s.animate?"true":void 0,className:u[$t.MonthCaption],style:F?.[$t.MonthCaption],calendarMonth:Ke,displayIndex:jt},f?.startsWith("dropdown")?xt.createElement(a.DropdownNav,{className:u[$t.Dropdowns],style:F?.[$t.Dropdowns]},(()=>{const wt=f==="dropdown"||f==="dropdown-months"?xt.createElement(a.MonthsDropdown,{key:"month",className:u[$t.MonthsDropdown],"aria-label":yt(),classNames:u,components:a,disabled:!!s.disableNavigation,onChange:Dt(Ke.date),options:wq(Ke.date,U,Z,r,o),style:F?.[$t.Dropdown],value:o.getMonth(Ke.date)}):xt.createElement("span",{key:"month"},_(Ke.date,o)),Xt=f==="dropdown"||f==="dropdown-years"?xt.createElement(a.YearsDropdown,{key:"year",className:u[$t.YearsDropdown],"aria-label":Ms(o.options),classNames:u,components:a,disabled:!!s.disableNavigation,onChange:Pt(Ke.date),options:Tq(U,Z,r,o,!!s.reverseYears),style:F?.[$t.Dropdown],value:o.getYear(Ke.date)}):xt.createElement("span",{key:"year"},W(Ke.date,o));return o.getMonthYearOrder()==="year-first"?[Xt,wt]:[wt,Xt]})(),xt.createElement("span",{role:"status","aria-live":"polite",style:{border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"absolute",width:"1px",whiteSpace:"nowrap",wordWrap:"normal"}},E(Ke.date,o.options,o))):xt.createElement(a.CaptionLabel,{className:u[$t.CaptionLabel],role:"status","aria-live":"polite"},E(Ke.date,o.options,o))),h==="around"&&!s.hideNavigation&&jt===p-1&&xt.createElement(a.NextMonthButton,{type:"button",className:u[$t.NextMonthButton],tabIndex:H?void 0:-1,"aria-disabled":H?void 0:!0,"aria-label":bt(H),onClick:Rt,"data-animated-button":s.animate?"true":void 0},xt.createElement(a.Chevron,{disabled:H?void 0:!0,className:u[$t.Chevron],orientation:s.dir==="rtl"?"left":"right"})),jt===p-1&&h==="after"&&!s.hideNavigation&&xt.createElement(a.Nav,{"data-animated-nav":s.animate?"true":void 0,className:u[$t.Nav],style:F?.[$t.Nav],"aria-label":vt(),onPreviousClick:xs,onNextClick:Rt,previousMonth:de,nextMonth:H}),xt.createElement(a.MonthGrid,{role:"grid","aria-multiselectable":x==="multiple"||x==="range","aria-label":Xe(Ke.date,o.options,o)||void 0,className:u[$t.MonthGrid],style:F?.[$t.MonthGrid]},!s.hideWeekdays&&xt.createElement(a.Weekdays,{"data-animated-weekdays":s.animate?"true":void 0,className:u[$t.Weekdays],style:F?.[$t.Weekdays]},G&&xt.createElement(a.WeekNumberHeader,{"aria-label":is(o.options),className:u[$t.WeekNumberHeader],style:F?.[$t.WeekNumberHeader],scope:"col"},z()),ys.map(wt=>xt.createElement(a.Weekday,{"aria-label":lt(wt,o.options,o),className:u[$t.Weekday],key:String(wt),style:F?.[$t.Weekday],scope:"col"},V(wt,o.options,o)))),xt.createElement(a.Weeks,{"data-animated-weeks":s.animate?"true":void 0,className:u[$t.Weeks],style:F?.[$t.Weeks]},Ke.weeks.map(wt=>xt.createElement(a.Week,{className:u[$t.Week],key:wt.weekNumber,style:F?.[$t.Week],week:wt},G&&xt.createElement(a.WeekNumber,{week:wt,style:F?.[$t.WeekNumber],"aria-label":ms(wt.weekNumber,{locale:c}),className:u[$t.WeekNumber],scope:"row",role:"rowheader"},P(wt.weekNumber,o)),wt.days.map(Xt=>{const{date:ss}=Xt,ge=ee(Xt);if(ge[ya.focused]=!ge.hidden&&!!ie?.isEqualTo(Xt),ge[Yn.selected]=L?.(ss)||ge.selected,Lj(O)){const{from:ht,to:Se}=O;ge[Yn.range_start]=!!(ht&&Se&&o.isSameDay(ss,ht)),ge[Yn.range_end]=!!(ht&&Se&&o.isSameDay(ss,Se)),ge[Yn.range_middle]=Hi(O,ss,!0,o)}const tt=Sq(ge,F,s.modifiersStyles),ct=uq(ge,u,s.modifiersClassNames),ns=!Xs&&!ge.hidden?Pe(ss,ge,o.options,o):void 0;return xt.createElement(a.Day,{key:`${o.format(ss,"yyyy-MM-dd")}_${o.format(Xt.displayMonth,"yyyy-MM")}`,day:Xt,modifiers:ge,className:ct.join(" "),style:tt,role:"gridcell","aria-selected":ge.selected||void 0,"aria-label":ns,"data-day":o.format(ss,"yyyy-MM-dd"),"data-month":Xt.outside?o.format(ss,"yyyy-MM"):void 0,"data-selected":ge.selected||void 0,"data-disabled":ge.disabled||void 0,"data-hidden":ge.hidden||void 0,"data-outside":Xt.outside||void 0,"data-focused":ge.focused||void 0,"data-today":ge.today||void 0},!ge.hidden&&Xs?xt.createElement(a.DayButton,{className:u[$t.DayButton],style:F?.[$t.DayButton],type:"button",day:Xt,modifiers:ge,disabled:ge.disabled||void 0,tabIndex:be(Xt)?0:-1,"aria-label":oe(ss,ge,o.options,o),onClick:sa(Xt,ge),onBlur:je(Xt,ge),onFocus:Te(Xt,ge),onKeyDown:fe(Xt,ge),onMouseEnter:Ue(Xt,ge),onMouseLeave:st(Xt,ge)},T(ss,o.options,o)):!ge.hidden&&T(Xt.date,o.options,o))})))))))),s.footer&&xt.createElement(a.Footer,{className:u[$t.Footer],style:F?.[$t.Footer],role:"status","aria-live":"polite"},s.footer)))}function CA({className:t,classNames:s,showOutsideDays:a=!0,captionLayout:r="label",buttonVariant:i="ghost",formatters:o,components:c,...u}){const f=Ij();return e.jsx(oK,{showOutsideDays:a,className:Ze("bg-background group/calendar p-3 [--cell-size:--spacing(8)] [[data-slot=card-content]_&]:bg-transparent [[data-slot=popover-content]_&]:bg-transparent",String.raw`rtl:**:[.rdp-button\_next>svg]:rotate-180`,String.raw`rtl:**:[.rdp-button\_previous>svg]:rotate-180`,t),captionLayout:r,formatters:{formatMonthDropdown:x=>x.toLocaleString("default",{month:"short"}),...o},classNames:{root:Ze("w-fit",f.root),months:Ze("flex gap-4 flex-col md:flex-row relative",f.months),month:Ze("flex flex-col w-full gap-4",f.month),nav:Ze("flex items-center gap-1 w-full absolute top-0 inset-x-0 justify-between",f.nav),button_previous:Ze(pg({variant:i}),"size-(--cell-size) aria-disabled:opacity-50 p-0 select-none",f.button_previous),button_next:Ze(pg({variant:i}),"size-(--cell-size) aria-disabled:opacity-50 p-0 select-none",f.button_next),month_caption:Ze("flex items-center justify-center h-(--cell-size) w-full px-(--cell-size)",f.month_caption),dropdowns:Ze("w-full flex items-center text-sm font-medium justify-center h-(--cell-size) gap-1.5",f.dropdowns),dropdown_root:Ze("relative has-focus:border-ring border border-input shadow-xs has-focus:ring-ring/50 has-focus:ring-[3px] rounded-md",f.dropdown_root),dropdown:Ze("absolute bg-popover inset-0 opacity-0",f.dropdown),caption_label:Ze("select-none font-medium",r==="label"?"text-sm":"rounded-md pl-2 pr-1 flex items-center gap-1 text-sm h-8 [&>svg]:text-muted-foreground [&>svg]:size-3.5",f.caption_label),table:"w-full border-collapse",weekdays:Ze("flex",f.weekdays),weekday:Ze("text-muted-foreground rounded-md flex-1 font-normal text-[0.8rem] select-none",f.weekday),week:Ze("flex w-full mt-2",f.week),week_number_header:Ze("select-none w-(--cell-size)",f.week_number_header),week_number:Ze("text-[0.8rem] select-none text-muted-foreground",f.week_number),day:Ze("relative w-full h-full p-0 text-center [&:first-child[data-selected=true]_button]:rounded-l-md [&:last-child[data-selected=true]_button]:rounded-r-md group/day aspect-square select-none",f.day),range_start:Ze("rounded-l-md bg-accent",f.range_start),range_middle:Ze("rounded-none",f.range_middle),range_end:Ze("rounded-r-md bg-accent",f.range_end),today:Ze("bg-accent text-accent-foreground rounded-md data-[selected=true]:rounded-none",f.today),outside:Ze("text-muted-foreground aria-selected:text-muted-foreground",f.outside),disabled:Ze("text-muted-foreground opacity-50",f.disabled),hidden:Ze("invisible",f.hidden),...s},components:{Root:({className:x,rootRef:h,...p})=>e.jsx("div",{"data-slot":"calendar",ref:h,className:Ze(x),...p}),Chevron:({className:x,orientation:h,...p})=>h==="left"?e.jsx(T6,{className:Ze("size-4",x),...p}):h==="right"?e.jsx(zS,{className:Ze("size-4",x),...p}):e.jsx(Mf,{className:Ze("size-4",x),...p}),DayButton:cK,WeekNumber:({children:x,...h})=>e.jsx("td",{...h,children:e.jsx("div",{className:"flex size-(--cell-size) items-center justify-center text-center",children:x})}),...c},...u})}function cK({className:t,day:s,modifiers:a,...r}){const i=Ij(),o=v.useRef(null);return v.useEffect(()=>{a.focused&&o.current?.focus()},[a.focused]),e.jsx(R,{ref:o,variant:"ghost",size:"icon","data-day":s.date.toLocaleDateString(),"data-selected-single":a.selected&&!a.range_start&&!a.range_end&&!a.range_middle,"data-range-start":a.range_start,"data-range-end":a.range_end,"data-range-middle":a.range_middle,className:Ze("data-[selected-single=true]:bg-primary data-[selected-single=true]:text-primary-foreground data-[range-middle=true]:bg-accent data-[range-middle=true]:text-accent-foreground data-[range-start=true]:bg-primary data-[range-start=true]:text-primary-foreground data-[range-end=true]:bg-primary data-[range-end=true]:text-primary-foreground group-data-[focused=true]/day:border-ring group-data-[focused=true]/day:ring-ring/50 dark:hover:text-accent-foreground flex aspect-square size-auto w-full min-w-(--cell-size) flex-col gap-1 leading-none font-normal group-data-[focused=true]/day:relative group-data-[focused=true]/day:z-10 group-data-[focused=true]/day:ring-[3px] data-[range-end=true]:rounded-md data-[range-end=true]:rounded-r-md data-[range-middle=true]:rounded-none data-[range-start=true]:rounded-md data-[range-start=true]:rounded-l-md [&>span]:text-xs [&>span]:opacity-70",i.day,t),...r})}const dK=({open:t,onClose:s,service:a})=>{const{toast:r}=dA(),{inviteCode:i}=el(),[o,c]=v.useState(1),[u,f]=v.useState(""),[x,h]=v.useState(!1),[p,g]=v.useState(null),[y,b]=v.useState(""),[N,S]=v.useState({name:"",email:"",phone:"",notes:""}),C=["09:00 AM","10:00 AM","11:00 AM","12:00 PM","01:00 PM","02:00 PM","03:00 PM","04:00 PM","05:00 PM"],k=E=>{S({...N,[E.target.name]:E.target.value})},A=async()=>{try{if(!p||!y)throw new Error("Please select a date and time");const[E,T]=y.split(" ");let[_,P]=E.split(":").map(Number);T==="PM"&&_!==12&&(_+=12),T==="AM"&&_===12&&(_=0);const z=new Date(p);z.setHours(_,P,0,0);const V=Z=>{if(!Z)return 60;const de=Z.match(/\d+/);if(!de)return 60;const H=parseInt(de[0]);return Z.toLowerCase().includes("hour")?H*60:H},W={inviteCode:i||window.location.pathname.split("/").filter(Boolean).pop(),customerName:N.name,customerEmail:N.email,customerPhone:N.phone,service:a.name,serviceId:a._id||a.id,time:z.toISOString(),durationMinutes:V(a.duration),notes:N.notes,price:a.price},q=localStorage.getItem("customerToken"),B=q?{Authorization:`Bearer ${q}`}:{},ae=await Ne.post("/public/appointments",W,{headers:B}),U=`BOOK-${Date.now()}`;return f(U),{success:!0,bookingNum:U,data:ae.data}}catch(E){return console.error(" Booking error:",E),console.error("Error response:",E.response?.data),console.error("Booking data sent:",bookingData),{success:!1,error:E.response?.data?.message||E.message||"Failed to create booking"}}},G=async()=>{if(!N.name||!N.email||!N.phone){r({title:"Missing Information",description:"Please fill in all required fields.",variant:"destructive"});return}if(!p){r({title:"Select Date",description:"Please select a date for your appointment.",variant:"destructive"});return}if(!y){r({title:"Select Time",description:"Please select a time slot for your appointment.",variant:"destructive"});return}h(!0);const E=await A();h(!1),E.success?(r({title:"Booking Confirmed!",description:`Your appointment for ${a.name} has been booked successfully.`}),c(3)):r({title:"Booking Failed",description:E.error,variant:"destructive"})},F=()=>{c(1),g(null),b(""),S({name:"",email:"",phone:"",notes:""}),f(""),h(!1),s()};return a?e.jsx(Bt,{open:t,onOpenChange:F,children:e.jsxs(zt,{className:"max-w-2xl max-h-[90vh] overflow-y-auto glass-panel",children:[e.jsx(Ut,{children:e.jsx(Vt,{children:"Book Service"})}),e.jsx("div",{className:"flex items-center justify-between mb-6",children:["Details","Schedule","Confirmed"].map((E,T)=>e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`h-8 w-8 rounded-full flex items-center justify-center text-sm font-semibold ${o>T+1?"bg-success text-success-foreground":o===T+1?"bg-primary text-primary-foreground":"bg-muted text-muted-foreground"}`,children:o>T+1?"":T+1}),T<2&&e.jsx("div",{className:`h-1 w-12 mx-2 ${o>T+1?"bg-success":"bg-muted"}`})]},E))}),o===1&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"font-semibold text-foreground",children:"Service Details"}),e.jsxs("div",{className:"bg-secondary/20 p-4 rounded-lg space-y-3",children:[a.image&&e.jsx("img",{src:a.image,alt:a.name,className:"w-full h-32 object-cover rounded-lg"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-lg",children:a.name}),e.jsx("p",{className:"text-sm text-muted-foreground",children:a.description})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(ts,{className:"h-4 w-4"}),a.duration]}),e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(ra,{className:"h-4 w-4"}),"KES ",a.price?.toLocaleString()]})]})]}),e.jsx(Pn,{}),e.jsx("h3",{className:"font-semibold text-foreground",children:"Your Information"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(te,{htmlFor:"name",className:"flex items-center gap-2",children:[e.jsx(la,{className:"h-4 w-4"}),"Full Name *"]}),e.jsx(me,{id:"name",name:"name",value:N.name,onChange:k,placeholder:"John Doe",required:!0})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(te,{htmlFor:"email",className:"flex items-center gap-2",children:[e.jsx(Ks,{className:"h-4 w-4"}),"Email *"]}),e.jsx(me,{id:"email",name:"email",type:"email",value:N.email,onChange:k,placeholder:"john@example.com",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(te,{htmlFor:"phone",className:"flex items-center gap-2",children:[e.jsx(Ws,{className:"h-4 w-4"}),"Phone *"]}),e.jsx(me,{id:"phone",name:"phone",value:N.phone,onChange:k,placeholder:"+254 700 000000",required:!0})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(te,{htmlFor:"notes",children:"Special Requests (Optional)"}),e.jsx(As,{id:"notes",name:"notes",value:N.notes,onChange:k,placeholder:"Any special requests or preferences...",rows:3})]})]}),e.jsx(R,{className:"w-full",onClick:()=>{if(!N.name||!N.email||!N.phone){r({title:"Missing Information",description:"Please fill in all required fields.",variant:"destructive"});return}c(2)},children:"Continue to Schedule"})]}),o===2&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"font-semibold text-foreground",children:"Choose Date & Time"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(te,{className:"flex items-center gap-2",children:[e.jsx(gs,{className:"h-4 w-4"}),"Select Date"]}),e.jsx(CA,{mode:"single",selected:p,onSelect:g,disabled:E=>E<new Date||E<new Date().setHours(0,0,0,0),className:"rounded-md border"})]}),p&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs(te,{className:"flex items-center gap-2",children:[e.jsx(ts,{className:"h-4 w-4"}),"Select Time Slot"]}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:C.map(E=>e.jsx(R,{variant:y===E?"default":"outline",size:"sm",onClick:()=>b(E),className:"w-full",children:E},E))})]}),p&&y&&e.jsxs("div",{className:"bg-blue-50 dark:bg-blue-950/20 p-4 rounded-lg border border-blue-200 dark:border-blue-900",children:[e.jsx(ks,{className:"h-5 w-5 text-blue-600 dark:text-blue-400 mb-2"}),e.jsxs("p",{className:"text-sm text-blue-600 dark:text-blue-400",children:[e.jsx("strong",{children:"Appointment Summary:"}),e.jsx("br",{}),a.name,e.jsx("br",{}),p.toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),e.jsx("br",{}),"Time: ",y,e.jsx("br",{}),"Duration: ",a.duration,e.jsx("br",{}),"Price: KES ",a.price?.toLocaleString()]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(R,{variant:"outline",className:"flex-1",onClick:()=>c(1),children:"Back"}),e.jsx(R,{className:"flex-1",onClick:G,disabled:x||!p||!y,children:x?"Processing...":"Confirm Booking"})]})]}),o===3&&e.jsxs("div",{className:"text-center space-y-4 py-8",children:[e.jsx("div",{className:"h-16 w-16 mx-auto bg-success/10 rounded-full flex items-center justify-center",children:e.jsx(ti,{className:"h-10 w-10 text-success"})}),e.jsx("h3",{className:"text-2xl font-bold text-foreground",children:"Booking Confirmed!"}),e.jsxs("p",{className:"text-muted-foreground",children:["Your appointment for ",e.jsx("strong",{children:a.name})," has been successfully booked."]}),p&&y&&e.jsx("div",{className:"bg-secondary/20 p-4 rounded-lg inline-block",children:e.jsxs("p",{className:"text-sm",children:[e.jsx("strong",{children:"Date:"})," ",p.toLocaleDateString(),e.jsx("br",{}),e.jsx("strong",{children:"Time:"})," ",y,e.jsx("br",{}),e.jsx("strong",{children:"Duration:"})," ",a.duration]})}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["A confirmation email has been sent to ",N.email]}),e.jsx(R,{className:"w-full",onClick:F,children:"Done"})]})]})}):null},uK=()=>{const[t,s]=v.useState([]),[a,r]=v.useState(!0),[i,o]=v.useState(null),[c,u]=v.useState(!1),{socket:f}=ha(),{inviteCode:x}=el(),h=Ka();v.useEffect(()=>{localStorage.getItem("customerToken")?p():(r(!1),s([]))},[]),v.useEffect(()=>{if(!f||!localStorage.getItem("customerToken"))return;const N=()=>{localStorage.getItem("customerToken")&&p()};return f.on("order_updated",N),()=>{f.off("order_updated",N)}},[f]);const p=async()=>{r(!0),o(null),u(!1);try{const b=localStorage.getItem("customerToken");if(!b){s([]),r(!1);return}const S=(await Ne.get("/customer/orders",{headers:{Authorization:`Bearer ${b}`}})).data,C=Array.isArray(S)?S:S.orders||[];s(C),console.log(` Loaded ${C.length} orders for current customer`)}catch(b){if(console.error("Error fetching orders:",b),b.response?.status===401)o("Please log in to view your orders"),u(!0);else if(b.response?.status===400&&b.response?.data?.requiresRelogin)o("Your session has expired. Please log in again to view your orders."),u(!0),localStorage.removeItem("customerToken");else if(b.response?.status===400){const N=b.response?.data?.message||"Unable to load orders";o(N),(N.toLowerCase().includes("email")||N.toLowerCase().includes("login"))&&u(!0)}else o("Failed to load orders. Please try again.")}finally{r(!1)}},g=b=>{switch(b){case"pending":return e.jsx(ts,{className:"h-4 w-4"});case"processing":return e.jsx(Yt,{className:"h-4 w-4"});case"shipped":return e.jsx(Kc,{className:"h-4 w-4"});case"delivered":return e.jsx(ti,{className:"h-4 w-4"})}},y=b=>{switch(b?.toLowerCase()){case"draft":case"pending":return"secondary";case"submitted":case"processing":case"under_review":return"default";case"approved":case"shipped":return"default";case"delivered":return"outline";case"cancelled":case"rejected":return"destructive";default:return"secondary"}};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-2xl font-bold text-foreground",children:"Order History"}),e.jsx(R,{variant:"outline",size:"sm",onClick:p,disabled:a,children:a?"Refreshing...":"Refresh"})]}),a?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"Loading your orders..."})]}):i?e.jsx(K,{className:"glass-card",children:e.jsxs(Y,{className:"p-8 text-center",children:[e.jsx(ks,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:i}),e.jsx("div",{className:"flex gap-2 justify-center",children:c?e.jsxs(R,{onClick:()=>{h(x?`/client/login/${x}`:"/client/login")},children:[e.jsx(yv,{className:"h-4 w-4 mr-2"}),"Log In Again"]}):e.jsx(R,{onClick:p,children:"Try Again"})})]})}):t.length===0?e.jsx(K,{className:"glass-card",children:e.jsxs(Y,{className:"p-8 text-center",children:[e.jsx(Yt,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No orders yet"}),e.jsx("p",{className:"text-muted-foreground",children:"Your order history will appear here"})]})}):t.map(b=>e.jsxs(K,{className:"glass-card",children:[e.jsxs(xe,{className:"pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(pe,{className:"text-base",children:["Order ",b.orderId]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(De,{variant:y(b.status?.toLowerCase()),className:"gap-1",children:[g(b.status?.toLowerCase()),b.status]}),e.jsx(De,{variant:b.paymentStatus==="Paid"?"default":"secondary",children:b.paymentStatus})]})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm text-muted-foreground",children:[e.jsx("span",{children:new Date(b.date||b.createdAt).toLocaleDateString()}),e.jsx("span",{children:b.customer?.name})]})]}),e.jsxs(Y,{className:"space-y-3",children:[e.jsx("div",{className:"space-y-2",children:b.items&&b.items.length>0?b.items.map((N,S)=>e.jsxs("div",{className:"text-sm flex justify-between",children:[e.jsxs("span",{className:"text-foreground",children:[N.name||"Product","  ",N.quantity]}),e.jsxs("span",{className:"text-muted-foreground",children:["KES ",(N.price*N.quantity).toLocaleString("en-KE",{minimumFractionDigits:2,maximumFractionDigits:2})]})]},S)):e.jsx("p",{className:"text-sm text-muted-foreground",children:"No items"})}),b.deliveryInfo?.address&&e.jsxs("div",{className:"text-xs text-muted-foreground pt-2 border-t border-border",children:[e.jsx("strong",{children:"Delivery:"})," ",b.deliveryInfo.address,", ",b.deliveryInfo.city]}),e.jsxs("div",{className:"flex items-center justify-between pt-2 border-t border-border",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold text-foreground",children:"Total: "}),e.jsxs("span",{className:"text-lg font-bold text-green-600",children:["KES ",b.total?.toLocaleString("en-KE",{minimumFractionDigits:2,maximumFractionDigits:2})||"0.00"]})]}),e.jsxs("div",{className:"flex gap-2",children:[b.trackingNumber&&e.jsx(R,{variant:"outline",size:"sm",children:"Track"}),e.jsx(R,{variant:"ghost",size:"sm",children:"Details"})]})]})]})]},b._id))]})},mK=()=>{const[t,s]=v.useState([]),[a,r]=v.useState(!0),[i,o]=v.useState(null),[c,u]=v.useState(!1),{socket:f}=ha(),{inviteCode:x}=el(),h=Ka();v.useEffect(()=>{localStorage.getItem("customerToken")?p():(r(!1),s([]))},[]),v.useEffect(()=>{if(!f||!localStorage.getItem("customerToken"))return;const N=()=>{localStorage.getItem("customerToken")&&p()};return f.on("appointment_updated",N),()=>{f.off("appointment_updated",N)}},[f]);const p=async()=>{r(!0),o(null),u(!1);try{const b=localStorage.getItem("customerToken");if(!b){s([]),r(!1);return}try{const S=(await Ne.get("/customer/appointments",{headers:{Authorization:`Bearer ${b}`}})).data,C=Array.isArray(S)?S:S.appointments||[];s(C),console.log(` Loaded ${C.length} bookings for current customer`)}catch(N){if(N.response?.status===404)s([]);else throw N}}catch(b){if(console.error("Error fetching bookings:",b),b.response?.status===401)o("Please log in to view your bookings"),u(!0);else if(b.response?.status===400&&b.response?.data?.requiresRelogin)o("Your session has expired. Please log in again to view your bookings."),u(!0),localStorage.removeItem("customerToken");else if(b.response?.status===400){const N=b.response?.data?.message||"Unable to load bookings";o(N),(N.toLowerCase().includes("email")||N.toLowerCase().includes("login"))&&u(!0)}else o("Failed to load bookings. Please try again.")}finally{r(!1)}},g=b=>{switch(b?.toLowerCase()){case"confirmed":case"completed":return"default";case"pending":return"secondary";case"cancelled":case"rejected":return"destructive";default:return"secondary"}},y=b=>{switch(b?.toLowerCase()){case"confirmed":return e.jsx(ti,{className:"h-4 w-4"});case"pending":return e.jsx(ts,{className:"h-4 w-4"});case"completed":return e.jsx(ti,{className:"h-4 w-4"});case"cancelled":case"rejected":return e.jsx(Sr,{className:"h-4 w-4"});default:return e.jsx(gs,{className:"h-4 w-4"})}};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-2xl font-bold text-foreground",children:"Booking History"}),e.jsx(R,{variant:"outline",size:"sm",onClick:p,disabled:a,children:a?"Refreshing...":"Refresh"})]}),a?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"Loading your bookings..."})]}):i?e.jsx(K,{className:"glass-card",children:e.jsxs(Y,{className:"p-8 text-center",children:[e.jsx(ks,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:i}),e.jsx("div",{className:"flex gap-2 justify-center",children:c?e.jsxs(R,{onClick:()=>{h(x?`/client/login/${x}`:"/client/login")},children:[e.jsx(yv,{className:"h-4 w-4 mr-2"}),"Log In Again"]}):e.jsx(R,{onClick:p,children:"Try Again"})})]})}):t.length===0?e.jsx(K,{className:"glass-card",children:e.jsxs(Y,{className:"p-8 text-center",children:[e.jsx(gs,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No bookings yet"}),e.jsx("p",{className:"text-muted-foreground",children:"Your service bookings will appear here"})]})}):t.map(b=>e.jsxs(K,{className:"glass-card",children:[e.jsxs(xe,{className:"pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(pe,{className:"text-base flex items-center gap-2",children:[e.jsx(gs,{className:"h-4 w-4"}),b.service||"Service Booking"]}),e.jsxs(De,{variant:g(b.status),className:"gap-1",children:[y(b.status),b.status||"Pending"]})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm text-muted-foreground",children:[e.jsx("span",{children:new Date(b.time||b.createdAt).toLocaleDateString()}),e.jsx("span",{children:new Date(b.time||b.createdAt).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})]}),e.jsxs(Y,{className:"space-y-3",children:[e.jsxs("div",{className:"space-y-2",children:[b.customerName&&e.jsxs("div",{className:"text-sm flex items-center gap-2",children:[e.jsx(la,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"text-foreground",children:b.customerName})]}),b.durationMinutes&&e.jsxs("div",{className:"text-sm flex items-center gap-2",children:[e.jsx(ts,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("span",{className:"text-muted-foreground",children:[b.durationMinutes," minutes"]})]}),b.notes&&e.jsxs("div",{className:"text-xs text-muted-foreground pt-2 border-t border-border",children:[e.jsx("strong",{children:"Notes:"})," ",b.notes]})]}),b.price&&e.jsxs("div",{className:"flex items-center justify-between pt-2 border-t border-border",children:[e.jsx("span",{className:"font-semibold text-foreground",children:"Price:"}),e.jsxs("span",{className:"text-lg font-bold text-green-600",children:["KES ",b.price?.toLocaleString()]})]})]})]},b._id))]})},TA=v.createContext(),EA=()=>{const t=v.useContext(TA);if(!t)throw new Error("useNotifications must be used within a NotificationProvider");return t},hK=({children:t})=>{const{socket:s,connected:a}=ha(),{customer:r}=pd(),[i,o]=v.useState([]),[c,u]=v.useState(0),[f,x]=v.useState(0);v.useEffect(()=>{if(!(!s||!r))return s.on("new_message_notification",C=>{const k=new Date,A={id:Date.now(),type:"message",title:"New Message",message:`${C.from}: ${C.preview}`,preview:C.preview,from:C.from,timestamp:k,read:!1,data:C};h(A),x(G=>G+1),D.info(e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(ta,{className:"h-5 w-5 text-blue-500 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:"font-semibold",children:C.from}),e.jsx("span",{className:"text-xs text-muted-foreground",children:k.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"})})]}),e.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2",children:C.preview})]})]}),{duration:5e3})}),s.on("order_updated",C=>{const k={id:Date.now(),type:"order",title:"Order Update",message:`Order #${C.orderNumber||"N/A"} - ${C.status||"Updated"}`,timestamp:new Date,read:!1,data:C};h(k),D.success(e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(ws,{className:"h-5 w-5 text-green-500 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:"Order Update"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:k.message})]})]}),{duration:5e3})}),s.on("appointment_updated",C=>{const k={id:Date.now(),type:"appointment",title:"Appointment Update",message:`Your appointment - ${C.status||"Updated"}`,timestamp:new Date,read:!1,data:C};h(k),D.info(e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(gs,{className:"h-5 w-5 text-purple-500 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:"Appointment Update"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:k.message})]})]}),{duration:5e3})}),s.on("notification",C=>{const k={id:Date.now(),type:C.type||"general",title:C.title||"Notification",message:C.message,timestamp:new Date,read:!1,data:C};h(k),D(e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Pr,{className:"h-5 w-5 text-blue-500 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:k.title}),e.jsx("p",{className:"text-sm text-muted-foreground",children:k.message})]})]}),{duration:5e3})}),()=>{s.off("new_message_notification"),s.off("order_updated"),s.off("appointment_updated"),s.off("notification")}},[s,r]);const h=C=>{o(k=>[C,...k].slice(0,50)),u(k=>k+1)},S={notifications:i,unreadCount:c,messageUnreadCount:f,addNotification:h,markAsRead:C=>{o(k=>k.map(A=>A.id===C?{...A,read:!0}:A)),u(k=>Math.max(0,k-1))},markAllAsRead:()=>{o(C=>C.map(k=>({...k,read:!0}))),u(0)},clearNotification:C=>{o(A=>A.filter(G=>G.id!==C));const k=i.find(A=>A.id===C);k&&!k.read&&u(A=>Math.max(0,A-1))},clearAllNotifications:()=>{o([]),u(0)},resetMessageUnreadCount:()=>{x(0)},connected:a};return e.jsx(TA.Provider,{value:S,children:t})},fK=()=>{const{customer:t}=pd(),{socket:s,connected:a}=ha(),{resetMessageUnreadCount:r}=EA(),[i,o]=v.useState(null),[c,u]=v.useState([]),[f,x]=v.useState(""),[h,p]=v.useState(!1),[g,y]=v.useState({}),[b,N]=v.useState(!0),[S,C]=v.useState(!1),[k,A]=v.useState("connecting"),G=v.useRef(null),F=v.useRef(null);v.useEffect(()=>{t&&(T(),r())},[t]),v.useEffect(()=>{A(s?a?"connected":"connecting":"disconnected")},[s,a]),v.useEffect(()=>(i?.id&&s&&a&&(s.emit("join_conversation",i.id),E()),()=>{i?.id&&s&&(s.emit("leave_conversation",i.id),s.off("message_received"),s.off("user_typing"),s.off("user_stopped_typing"),s.off("message_sent"))}),[i,s,a]),v.useEffect(()=>{V()},[c]);const E=()=>{s&&(s.on("message_received",B=>{i&&B.conversationId===i.id&&u(ae=>ae.some(U=>U.id===B.id)?ae:[...ae,B])}),s.on("user_typing",({conversationId:B,userId:ae,userName:U})=>{i?.id===B&&ae!==t._id&&y(Z=>({...Z,[ae]:U}))}),s.on("user_stopped_typing",({conversationId:B,userId:ae})=>{i?.id===B&&y(U=>{const Z={...U};return delete Z[ae],Z})}),s.on("message_sent",B=>{u(ae=>ae.map(U=>U.tempId&&U.content===B.content?{...B,status:"delivered"}:U))}))},T=async()=>{try{N(!0);const B=localStorage.getItem("customerToken");if(!B){o({id:null,name:"Business Owner",isOnline:!1}),N(!1);return}const ae=await Ne.get("/messages/conversations",{headers:{Authorization:`Bearer ${B}`}});if(ae.data.conversations&&ae.data.conversations.length>0){const U=ae.data.conversations[0];o(U),_(U.id)}else o({id:null,name:"Business Owner",isOnline:!1}),N(!1)}catch(B){console.error("Error loading conversation:",B),o({id:null,name:"Business Owner",isOnline:!1}),N(!1)}},_=async B=>{try{const ae=localStorage.getItem("customerToken"),U=await Ne.get(`/messages/conversations/${B}`,{headers:{Authorization:`Bearer ${ae}`}});u(U.data.messages||[]),N(!1)}catch(ae){console.error("Error loading messages:",ae),N(!1)}},P=async B=>{if(B.preventDefault(),!f.trim()||!t||S)return;const ae=f.trim(),U=`temp_${Date.now()}`,Z={id:U,tempId:U,conversationId:i?.id,senderId:t._id,senderName:t.name,content:ae,timestamp:new Date,status:"sending"};u(de=>[...de,Z]),x(""),C(!0);try{const de=localStorage.getItem("customerToken");if(i?.id)s&&a?(s.emit("send_message",{conversationId:i.id,message:ae,senderId:t._id,senderName:t.name}),u(H=>H.map(se=>se.tempId===U?{...se,status:"sent"}:se))):(await Ne.post("/messages/send",{conversationId:i.id,content:ae},{headers:{Authorization:`Bearer ${de}`}}),u(H=>H.map(se=>se.tempId===U?{...se,status:"sent"}:se)));else{const H=await Ne.post("/messages/conversations",{},{headers:{Authorization:`Bearer ${de}`}});if(H.data.success){const se=H.data.conversation;o({id:se.id,name:"Business Owner",isOnline:!1}),await Ne.post("/messages/send",{conversationId:se.id,content:ae},{headers:{Authorization:`Bearer ${de}`}}),u(ee=>ee.map(L=>L.tempId===U?{...L,status:"sent",conversationId:se.id}:L)),s&&a&&(s.emit("join_conversation",se.id),E())}}}catch(de){console.error("Error sending message:",de),D.error("Failed to send message"),u(H=>H.map(se=>se.tempId===U?{...se,status:"failed"}:se))}finally{C(!1)}},z=()=>{!h&&i?.id&&s&&a&&(p(!0),s.emit("typing_start",{conversationId:i.id,userId:t._id,userName:t.name}),setTimeout(()=>{p(!1),s.emit("typing_stop",{conversationId:i.id,userId:t._id})},3e3))},V=()=>{G.current?.scrollIntoView({behavior:"smooth"})},W=B=>{switch(B){case"sent":return e.jsx(yi,{className:"h-3 w-3"});case"delivered":return e.jsx(ei,{className:"h-3 w-3"});case"read":return e.jsx(ei,{className:"h-3 w-3 text-blue-500"});case"failed":return e.jsx(ks,{className:"h-3 w-3 text-red-500"});default:return e.jsx(ts,{className:"h-3 w-3"})}},q=B=>{const ae=new Date(B);return new Date-ae<864e5?mg(ae,"HH:mm"):mg(ae,"MMM d, HH:mm")};return t?e.jsxs(K,{className:"h-[600px] flex flex-col",children:[e.jsx(xe,{className:"border-b py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(hr,{className:"h-10 w-10",children:e.jsx(fr,{className:"bg-primary text-primary-foreground",children:i?.name?.[0]||"B"})}),e.jsxs("div",{children:[e.jsx(pe,{className:"text-base",children:i?.name||"Business Owner"}),e.jsx("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:k==="connecting"?e.jsxs(e.Fragment,{children:[e.jsx(qn,{className:"h-3 w-3 animate-spin"}),e.jsx("span",{children:"Connecting..."})]}):k==="connected"?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"h-2 w-2 bg-green-500 rounded-full animate-pulse"}),e.jsx("span",{children:"Connected"})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"h-2 w-2 bg-red-500 rounded-full"}),e.jsx("span",{children:"Disconnected"})]})})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(R,{variant:"ghost",size:"icon",onClick:()=>D.info("Voice call - Coming soon"),children:e.jsx(Ws,{className:"h-4 w-4"})}),e.jsx(R,{variant:"ghost",size:"icon",onClick:()=>D.info("Video call - Coming soon"),children:e.jsx(Aa,{className:"h-4 w-4"})}),e.jsx(R,{variant:"ghost",size:"icon",children:e.jsx(Nv,{className:"h-4 w-4"})})]})]})}),e.jsx(Y,{className:"flex-1 p-4 overflow-hidden",children:b?e.jsx("div",{className:"h-full flex items-center justify-center",children:e.jsx(qn,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):e.jsx(kr,{className:"h-full pr-4",children:e.jsxs("div",{className:"space-y-4",children:[c.length===0?e.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-center py-12",children:[e.jsx(ta,{className:"h-12 w-12 text-muted-foreground mb-3"}),e.jsx("p",{className:"text-muted-foreground mb-1",children:"No messages yet"}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Start a conversation with ",i?.name]})]}):c.map((B,ae)=>{const U=B.senderId===t._id,Z=ae===0||new Date(B.timestamp)-new Date(c[ae-1].timestamp)>36e5;return e.jsxs("div",{children:[Z&&e.jsx("div",{className:"text-center text-xs text-muted-foreground my-4",children:Xu(new Date(B.timestamp),{addSuffix:!0})}),e.jsx("div",{className:`flex ${U?"justify-end":"justify-start"}`,children:e.jsxs("div",{className:`max-w-[75%] rounded-2xl px-4 py-2 ${U?"bg-primary text-primary-foreground rounded-br-sm":"bg-muted rounded-bl-sm"}`,children:[!U&&e.jsx("p",{className:"text-xs font-semibold mb-1 opacity-70",children:B.senderName}),e.jsx("p",{className:"text-sm break-words",children:B.content}),e.jsxs("div",{className:"flex items-center gap-1 mt-1 justify-end",children:[e.jsx("span",{className:"text-xs opacity-70",children:q(B.timestamp)}),U&&W(B.status)]})]})})]},B.id||B.tempId)}),Object.keys(g).length>0&&e.jsx("div",{className:"flex justify-start",children:e.jsx("div",{className:"bg-muted rounded-2xl rounded-bl-sm px-4 py-3",children:e.jsxs("div",{className:"flex gap-1",children:[e.jsx("div",{className:"w-2 h-2 bg-gray-500 rounded-full animate-bounce"}),e.jsx("div",{className:"w-2 h-2 bg-gray-500 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),e.jsx("div",{className:"w-2 h-2 bg-gray-500 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})})}),e.jsx("div",{ref:G})]})})}),e.jsxs("div",{className:"border-t p-4",children:[e.jsxs("form",{onSubmit:P,className:"flex gap-2",children:[e.jsx(R,{type:"button",variant:"ghost",size:"icon",disabled:!0,children:e.jsx(Yc,{className:"h-5 w-5"})}),e.jsx(me,{ref:F,value:f,onChange:B=>{x(B.target.value),z()},onKeyPress:B=>{B.key==="Enter"&&!B.shiftKey&&(B.preventDefault(),P(B))},placeholder:"Type a message...",className:"flex-1",disabled:!a||S}),e.jsx(R,{type:"button",variant:"ghost",size:"icon",disabled:!0,children:e.jsx(bv,{className:"h-5 w-5"})}),e.jsx(R,{type:"submit",disabled:!f.trim()||S,children:S?e.jsx(qn,{className:"h-4 w-4 animate-spin"}):e.jsx(Fa,{className:"h-4 w-4"})})]}),k==="connecting"&&e.jsxs("div",{className:"flex items-center justify-center gap-2 text-xs text-muted-foreground mt-2",children:[e.jsx(qn,{className:"h-3 w-3 animate-spin"}),e.jsx("span",{children:"Connecting to chat server..."})]}),k==="disconnected"&&e.jsxs("div",{className:"flex items-center justify-center gap-2 text-xs text-red-500 mt-2",children:[e.jsx(ks,{className:"h-3 w-3"}),e.jsx("span",{children:"Connection lost. Retrying..."})]})]})]}):e.jsx(K,{className:"h-full flex items-center justify-center",children:e.jsxs(Y,{className:"p-12 text-center",children:[e.jsx(ta,{className:"h-16 w-16 text-muted-foreground mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Please Login"}),e.jsx("p",{className:"text-muted-foreground",children:"Sign in to chat with the business owner"})]})})},xK=()=>{const{notifications:t,unreadCount:s,markAsRead:a,markAllAsRead:r,clearNotification:i,clearAllNotifications:o}=EA(),[c,u]=v.useState(!1),f=h=>{switch(h){case"message":return e.jsx(ta,{className:"h-5 w-5 text-blue-500"});case"order":return e.jsx(ws,{className:"h-5 w-5 text-green-500"});case"appointment":return e.jsx(gs,{className:"h-5 w-5 text-purple-500"});default:return e.jsx(Pr,{className:"h-5 w-5 text-gray-500"})}},x=h=>{h.read||a(h.id)};return e.jsxs(rv,{open:c,onOpenChange:u,children:[e.jsx(nv,{asChild:!0,children:e.jsxs(R,{variant:"ghost",size:"icon",className:"relative",children:[e.jsx(Pr,{className:"h-5 w-5"}),s>0&&e.jsx(De,{className:"absolute -top-1 -right-1 h-5 w-5 flex items-center justify-center p-0 text-xs",variant:"destructive",children:s>9?"9+":s})]})}),e.jsxs(iv,{children:[e.jsxs(lv,{children:[e.jsxs(ov,{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Notifications"}),t.length>0&&e.jsxs("div",{className:"flex gap-2",children:[s>0&&e.jsxs(R,{variant:"ghost",size:"sm",onClick:r,className:"text-xs",children:[e.jsx(ei,{className:"h-4 w-4 mr-1"}),"Mark all read"]}),e.jsxs(R,{variant:"ghost",size:"sm",onClick:o,className:"text-xs",children:[e.jsx(ga,{className:"h-4 w-4 mr-1"}),"Clear all"]})]})]}),e.jsx(cv,{children:s>0?`You have ${s} unread notification${s>1?"s":""}`:"All caught up!"})]}),e.jsx("div",{className:"mt-6",children:t.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[e.jsx(Pr,{className:"h-12 w-12 text-muted-foreground mb-3"}),e.jsx("p",{className:"text-muted-foreground mb-1",children:"No notifications"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"You're all caught up!"})]}):e.jsx(kr,{className:"h-[calc(100vh-12rem)]",children:e.jsx("div",{className:"space-y-2",children:t.map(h=>e.jsxs("div",{onClick:()=>x(h),className:`p-4 rounded-lg border cursor-pointer transition-colors ${h.read?"bg-background hover:bg-accent":"bg-primary/5 border-primary/20 hover:bg-primary/10"}`,children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"mt-0.5",children:f(h.type)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-semibold text-sm",children:h.title}),h.from&&e.jsx("p",{className:"text-xs text-muted-foreground",children:h.from})]}),e.jsx(R,{variant:"ghost",size:"icon",className:"h-6 w-6 -mr-2",onClick:p=>{p.stopPropagation(),i(h.id)},children:e.jsx(ga,{className:"h-3 w-3"})})]}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1 line-clamp-2",children:h.preview||h.message}),e.jsxs("div",{className:"flex items-center justify-between mt-2",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:Xu(new Date(h.timestamp),{addSuffix:!0})}),!h.read&&e.jsx(De,{variant:"secondary",className:"text-xs",children:"New"})]})]})]}),!h.read&&e.jsx("div",{className:"absolute right-2 top-2 h-2 w-2 bg-primary rounded-full"})]},h.id))})})})]})]})},pK=({onThemeChange:t,currentTheme:s})=>{const[a,r]=v.useState("all");Object.entries(Rn).reduce((u,[f,x])=>{const h=x.category||"other";return u[h]||(u[h]=[]),u[h].push({key:f,...x}),u},{});const i=Object.entries(Rn).map(([u,f])=>({key:u,...f})),o=u=>u==="all"?i:i.filter(f=>f.category===u),c=[{key:"all",name:"All Themes",icon:Lc},{key:"default",name:"Default",icon:null},{key:"color",name:"Colors",icon:null},{key:"neutral",name:"Neutral",icon:null},{key:"special",name:"Special",icon:Rl},{key:"auto",name:"Auto",icon:null}];return e.jsxs("div",{className:"space-y-4",children:[e.jsxs(ja,{value:a,onValueChange:r,className:"w-full",children:[e.jsx(Sa,{className:"grid w-full grid-cols-3 lg:grid-cols-6",children:c.map(u=>e.jsxs(ft,{value:u.key,className:"text-xs",children:[u.icon&&e.jsx(u.icon,{className:"h-3 w-3 mr-1"}),u.name]},u.key))}),e.jsx(pt,{value:a,className:"mt-4",children:e.jsx(kr,{className:"h-[400px] w-full pr-4",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:o(a).map(u=>e.jsxs(K,{className:`cursor-pointer transition-all hover:shadow-lg ${s===u.key?"ring-2 ring-primary shadow-lg":"hover:ring-1 hover:ring-primary/50"}`,onClick:()=>t(u.key),children:[e.jsx(xe,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(pe,{className:"text-sm font-medium",children:u.name}),e.jsx(ot,{className:"text-xs mt-1",children:u.description})]}),s===u.key&&e.jsxs(De,{variant:"default",className:"gap-1",children:[e.jsx(yi,{className:"h-3 w-3"}),"Active"]})]})}),e.jsxs(Y,{className:"p-4 pt-0",children:[e.jsx("div",{className:`h-16 rounded-md ${u.preview} p-3 flex items-center justify-center`,children:e.jsx("div",{className:"text-xs font-medium opacity-90",children:"Preview"})}),u.category&&e.jsx(De,{variant:"outline",className:"mt-2 text-xs",children:u.category})]})]},u.key))})})})]}),e.jsxs(K,{children:[e.jsx(xe,{children:e.jsx(pe,{className:"text-sm",children:"Current Theme"})}),e.jsx(Y,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:Rn[s]?.name||"Light"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:Rn[s]?.description||"Default theme"})]}),e.jsx("div",{className:`h-10 w-10 rounded-full ${Rn[s]?.preview||"bg-white"}`})]})})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx(R,{size:"sm",variant:s==="light"?"default":"outline",onClick:()=>t("light"),children:"Light"}),e.jsx(R,{size:"sm",variant:s==="dark"?"default":"outline",onClick:()=>t("dark"),children:"Dark"}),e.jsx(R,{size:"sm",variant:s==="blue"?"default":"outline",onClick:()=>t("blue"),children:"Blue"}),e.jsx(R,{size:"sm",variant:s==="purple"?"default":"outline",onClick:()=>t("purple"),children:"Purple"}),e.jsx(R,{size:"sm",variant:s==="cyberpunk"?"default":"outline",onClick:()=>t("cyberpunk"),children:"Cyberpunk"}),e.jsx(R,{size:"sm",variant:s==="matrix"?"default":"outline",onClick:()=>t("matrix"),children:"Matrix"})]})]})},Hh=[{id:"sample-1",name:"Professional Haircut & Styling",description:"Expert haircut and styling service tailored to your preferences. Includes wash, cut, and blow-dry.",price:1500,duration:"45 min",category:"Hair & Beauty",bookings:156,rating:4.9,staff:3,image:"https://images.unsplash.com/photo-1562322140-8baeececf3df?w=500"},{id:"sample-2",name:"Full Body Massage",description:"Relaxing full body massage to relieve stress and tension. Perfect for unwinding after a long day.",price:3500,duration:"90 min",category:"Wellness & Spa",bookings:89,rating:5,staff:2,image:"https://images.unsplash.com/photo-1544161515-4ab6ce6db874?w=500"},{id:"sample-3",name:"Manicure & Pedicure",description:"Complete nail care service including filing, buffing, cuticle care, and polish application.",price:2e3,duration:"60 min",category:"Hair & Beauty",bookings:234,rating:4.8,staff:4,image:"https://images.unsplash.com/photo-1604654894610-df63bc536371?w=500"},{id:"sample-4",name:"Personal Training Session",description:"One-on-one fitness training with certified personal trainer. Customized workout plan included.",price:2500,duration:"60 min",category:"Fitness & Health",bookings:67,rating:4.9,staff:5,image:"https://images.unsplash.com/photo-1571019614242-c5c5dee9f50b?w=500"},{id:"sample-5",name:"Deep Tissue Massage",description:"Therapeutic massage targeting deep muscle layers to relieve chronic pain and muscle tension.",price:4e3,duration:"75 min",category:"Wellness & Spa",bookings:112,rating:5,staff:2,image:"https://images.unsplash.com/photo-1519823551278-64ac92734fb1?w=500"},{id:"sample-6",name:"Facial Treatment",description:"Rejuvenating facial treatment with deep cleansing, exfoliation, and hydration for glowing skin.",price:3e3,duration:"60 min",category:"Hair & Beauty",bookings:145,rating:4.8,staff:3,image:"https://images.unsplash.com/photo-1570172619644-dfd03ed5d881?w=500"},{id:"sample-7",name:"Yoga Class",description:"Group or private yoga session for flexibility, strength, and mindfulness. All levels welcome.",price:1200,duration:"60 min",category:"Fitness & Health",bookings:198,rating:4.9,staff:2,image:"https://images.unsplash.com/photo-1588286840104-8957b019727f?w=500"},{id:"sample-8",name:"Hair Coloring Service",description:"Professional hair coloring with premium products. Includes consultation, application, and styling.",price:4500,duration:"120 min",category:"Hair & Beauty",bookings:78,rating:4.7,staff:3,image:"https://images.unsplash.com/photo-1522337360788-8b13dee7a37e?w=500"},{id:"sample-9",name:"Nutritional Consultation",description:"Personalized nutrition plan and dietary guidance from certified nutritionist.",price:2800,duration:"45 min",category:"Fitness & Health",bookings:45,rating:4.8,staff:1,image:"https://images.unsplash.com/photo-1490645935967-10de6ba17061?w=500"},{id:"sample-10",name:"Hot Stone Massage",description:"Luxurious massage using heated stones to melt away tension and promote deep relaxation.",price:4500,duration:"90 min",category:"Wellness & Spa",bookings:91,rating:5,staff:2,image:"https://images.unsplash.com/photo-1583416750470-965b2707b355?w=500"},{id:"sample-11",name:"Makeup Application",description:"Professional makeup for events, photoshoots, or special occasions. Includes consultation.",price:3500,duration:"60 min",category:"Hair & Beauty",bookings:123,rating:4.9,staff:2,image:"https://images.unsplash.com/photo-1487412947147-5cebf100ffc2?w=500"},{id:"sample-12",name:"Aromatherapy Session",description:"Therapeutic treatment using essential oils to enhance physical and emotional well-being.",price:3200,duration:"60 min",category:"Wellness & Spa",bookings:67,rating:4.8,staff:2,image:"https://images.unsplash.com/photo-1600334089648-b0d9d3028eb2?w=500"},{id:"sample-13",name:"Group Fitness Class",description:"High-energy group workout including cardio, strength training, and flexibility exercises.",price:800,duration:"45 min",category:"Fitness & Health",bookings:312,rating:4.7,staff:3,image:"https://images.unsplash.com/photo-1571902943202-507ec2618e8f?w=500"},{id:"sample-14",name:"Reflexology Treatment",description:"Foot reflexology targeting pressure points to promote healing and relaxation throughout the body.",price:2500,duration:"60 min",category:"Wellness & Spa",bookings:89,rating:4.9,staff:2,image:"https://images.unsplash.com/photo-1544367567-0f2fcb009e0b?w=500"},{id:"sample-15",name:"Bridal Hair & Makeup",description:"Complete bridal beauty package including hair styling, makeup, and trial session.",price:8500,duration:"150 min",category:"Hair & Beauty",bookings:34,rating:5,staff:2,image:"https://images.unsplash.com/photo-1519699047748-de8e457a634e?w=500"}],gK=()=>{const{inviteCode:t}=el(),s=Ka(),{customer:a,isAuthenticated:r,logout:i}=pd(),{socket:o,connected:c}=ha(),[u,f]=v.useState(()=>localStorage.getItem("storefront-theme")||"light"),[x,h]=v.useState(""),[p,g]=v.useState("all"),{items:y,add:b,update:N,remove:S,clear:C,total:k,count:A}=sj(),[G,F]=v.useState(null),[E,T]=v.useState(null),[_,P]=v.useState(!1),[z,V]=v.useState(!1),[W,q]=v.useState("shop"),[B,ae]=v.useState([]),[U,Z]=v.useState([]),[de,H]=v.useState([]),[se,ee]=v.useState(null),[L,X]=v.useState([]),[O,J]=v.useState(null),[ie,be]=v.useState([]),[Le,ve]=v.useState([]),[oe,Pe]=v.useState([]),[Xe,yt]=v.useState(!1),[vt,gt]=v.useState([]),[bt,lt]=v.useState(!1),[ms,is]=v.useState({name:"",phone:""}),[Ms,ys]=v.useState(!1),[Xs,xs]=v.useState([]),[Rt,sa]=v.useState(!0),[Te,je]=v.useState({businessName:"ominbiz Store",ownerName:"Store Owner"});v.useEffect(()=>{["chats","orders","account"].includes(W)&&!a&&(D.error("Please login to access this feature"),q("shop"))},[W,a]),v.useEffect(()=>{(async()=>{if(t)try{const tt=await Ne.get(`/public/store-owner/${t}`);je({businessName:tt.data.businessName||tt.data.name,ownerName:tt.data.name,email:tt.data.businessEmail,phone:tt.data.businessPhone,address:tt.data.businessAddress})}catch(tt){console.error("Error fetching store owner:",tt),D.error("Could not load store information")}})()},[t]),v.useEffect(()=>{const ge=async()=>{sa(!0);try{const ct=localStorage.getItem("customerToken"),ns=ct?{Authorization:`Bearer ${ct}`}:{},[ht,Se,dt,Ct,Et]=await Promise.allSettled([Ne.get("/products",{headers:ns,params:{inviteCode:t}}),Ne.get("/locations",{headers:ns}),Ne.get("/team",{headers:ns}),Ne.get("/public/services",{params:{inviteCode:t}}),Ne.get("/public/discounts",{params:{inviteCode:t,active:!0}})]);if(ht.status==="fulfilled"&&ht.value.data?.length>0?(xs(ht.value.data),console.log(" Loaded",ht.value.data.length,"products from store")):t?(xs([]),console.log(" Store has no products yet")):(xs(Jt),console.warn(" No invite code - showing sample products")),Se.status==="fulfilled"&&(ae(Se.value.data||[]),Se.value.data?.length>0&&J(Se.value.data[0])),dt.status==="fulfilled"&&Z(dt.value.data||[]),Et.status==="fulfilled"&&Et.value.data?.length>0){be(Et.value.data);const hs=Et.value.data.filter(Ts=>Ts.active&&Ts.applicableProducts?.length>0).flatMap(Ts=>Ts.applicableProducts.map(Bs=>({productId:Bs,discount:Ts})));ve(hs);const vs=Et.value.data.filter(Ts=>Ts.active&&Ts.applicableServices?.length>0).flatMap(Ts=>Ts.applicableServices.map(Bs=>({serviceId:Bs,discount:Ts})));Pe(vs)}if(Ct.status==="fulfilled"&&Ct.value.data?.length>0){const hs=Ct.value.data.map(vs=>({_id:vs._id,id:vs._id,name:vs.name,description:vs.description||"Professional service",price:vs.price||0,duration:vs.duration||"60 min",category:vs.category||"General",bookings:vs.bookings||0,rating:vs.rating||5,staff:vs.availableTeamMembers?.length||U.length||1,image:vs.image}));H(hs),console.log(" Loaded",hs.length,"services from database")}else t?(H(Hh),console.log(" No services in database, showing",Hh.length,"sample services")):(H(Hh),console.log(" Showing",Hh.length,"sample services (demo mode)"))}catch(ct){console.error("Error fetching data:",ct),D.error("Could not load some information. Please refresh."),xs(Jt)}finally{sa(!1)}};ge();const tt=setInterval(ge,3e4);return()=>clearInterval(tt)},[t,U.length]);const fe=ge=>oe.find(ct=>ct.serviceId===ge||ct.serviceId===ge.toString())?.discount||null,Ue=(ge,tt)=>{const ct=Number(ge)||0;if(!tt||!tt.value)return ct;const ns=Number(tt.value)||0;let ht=ct;if(tt.type==="percentage"){const Se=ct*ns/100;ht=ct-Se}else tt.type==="fixed"&&(ht=Math.max(0,ct-ns));return isNaN(ht)?ct:ht};v.useEffect(()=>{if(!(!o||!c||!t))return o.emit("join_storefront",t),o.on("product_sync",ge=>{console.log("Product sync:",ge),ge.type==="insert"?(xs(tt=>[ge.product,...tt]),D.success(`New product: ${ge.product.name}`)):ge.type==="update"?(xs(tt=>tt.map(ct=>ct._id===ge.product._id?ge.product:ct)),D.info(`Product updated: ${ge.product.name}`)):ge.type==="delete"&&(xs(tt=>tt.filter(ct=>ct._id!==ge.product._id)),D.info("Product removed"))}),o.on("service_sync",ge=>{console.log("Service sync:",ge),ge.type==="insert"?(H(tt=>[ge.service,...tt]),D.success(`New service: ${ge.service.name}`)):ge.type==="update"?(H(tt=>tt.map(ct=>ct._id===ge.service._id?ge.service:ct)),D.info(`Service updated: ${ge.service.name}`)):ge.type==="delete"&&(H(tt=>tt.filter(ct=>ct._id!==ge.service._id)),D.info("Service removed"))}),o.on("location_sync",ge=>{console.log("Location sync:",ge),ge.type==="insert"?(ae(tt=>[ge.location,...tt]),D.success(`New location: ${ge.location.name}`)):ge.type==="update"?(ae(tt=>tt.map(ct=>ct._id===ge.location._id?ge.location:ct)),D.info(`Location updated: ${ge.location.name}`)):ge.type==="delete"&&(ae(tt=>tt.filter(ct=>ct._id!==ge.location._id)),D.info("Location removed"))}),o.on("team_sync",ge=>{console.log("Team sync:",ge),ge.type==="insert"?(Z(tt=>[ge.team,...tt]),D.success(`New team member: ${ge.team.name}`)):ge.type==="update"?(Z(tt=>tt.map(ct=>ct._id===ge.team._id?ge.team:ct)),D.info(`Team member updated: ${ge.team.name}`)):ge.type==="delete"&&(Z(tt=>tt.filter(ct=>ct._id!==ge.team._id)),D.info("Team member removed"))}),o.on("stock_alert",ge=>{ge.alertType==="out_of_stock"&&D.error(`Out of Stock: ${ge.product.name} is currently unavailable`)}),o.on("order_updated",ge=>{ge.order.customer?.email===a?.email&&D.info(`Order Update: Your order status is ${ge.order.status}`)}),()=>{o&&c&&(o.emit("leave_storefront",t),o.off("product_sync"),o.off("service_sync"),o.off("location_sync"),o.off("team_sync"),o.off("stock_alert"),o.off("order_updated"))}},[o,c,t,a]);const st=()=>{a?(q("account"),D.success(`Welcome ${a.name}!`)):(D.info("Please sign in to access more features"),s(`/client/login/${t}`))},Dt=()=>{a?(i(),C(),X([]),D.success("You have been successfully logged out"),s(`/client/login/${t}`)):D.info("You are not currently logged in")},Pt=ge=>{f(ge),localStorage.setItem("storefront-theme",ge),yt(!1),D.success(`Storefront theme: ${ge}`)};v.useEffect(()=>{(()=>{try{const tt=Rn[u];if(!tt||!tt.colors){console.warn("Theme not found:",u);return}const ct=ht=>{try{ht=ht.replace("#","");const Se=parseInt(ht.substring(0,2),16)/255,dt=parseInt(ht.substring(2,4),16)/255,Ct=parseInt(ht.substring(4,6),16)/255,Et=Math.max(Se,dt,Ct),hs=Math.min(Se,dt,Ct);let vs,Ts,Bs=(Et+hs)/2;if(Et===hs)vs=Ts=0;else{const Q=Et-hs;switch(Ts=Bs>.5?Q/(2-Et-hs):Q/(Et+hs),Et){case Se:vs=((dt-Ct)/Q+(dt<Ct?6:0))/6;break;case dt:vs=((Ct-Se)/Q+2)/6;break;case Ct:vs=((Se-dt)/Q+4)/6;break}}return`${Math.round(vs*360)} ${Math.round(Ts*100)}% ${Math.round(Bs*100)}%`}catch(Se){return console.error("Error converting hex to HSL:",ht,Se),"0 0% 50%"}},ns=()=>{const ht=document.querySelector(".storefront-container");if(!ht){console.warn("Storefront container not found, retrying..."),setTimeout(ns,100);return}const Se=ct(tt.colors.primary),dt=ct(tt.colors.secondary),Ct=ct(tt.colors.accent),Et=tt.colors.background.startsWith("#")?ct(tt.colors.background):"0 0% 100%",hs=ct(tt.colors.foreground);ht.style.setProperty("--primary",Se),ht.style.setProperty("--primary-foreground","0 0% 100%"),ht.style.setProperty("--secondary",dt),ht.style.setProperty("--secondary-foreground",hs),ht.style.setProperty("--accent",Ct),ht.style.setProperty("--accent-foreground",hs),ht.style.setProperty("--background",Et),ht.style.setProperty("--foreground",hs),ht.style.setProperty("--card",Et),ht.style.setProperty("--card-foreground",hs),ht.style.setProperty("--popover",Et),ht.style.setProperty("--popover-foreground",hs),ht.style.setProperty("--muted",dt),ht.style.setProperty("--muted-foreground","0 0% 45%"),ht.style.setProperty("--border",`${Se.split(" ")[0]} 30% 80%`),ht.style.setProperty("--input",`${Se.split(" ")[0]} 30% 80%`),ht.style.setProperty("--ring",Se),console.log(" Storefront theme applied:",u)};ns()}catch(tt){console.error("Error applying storefront theme:",tt)}})()},[u]);const Jt=[{id:"1",name:"Premium Hair Shampoo",description:"Nourishing shampoo for all hair types with natural ingredients",price:30,category:"Hair Care",stock:25,image:"/placeholder.svg",rating:4.8,specs:["250ml bottle","Sulfate-free","pH balanced","Natural ingredients"],reviews:[{id:"r1",author:"Jane Doe",rating:5,comment:"Best shampoo I've ever used!",date:"2025-10-10"},{id:"r2",author:"John Smith",rating:4,comment:"Great product, will buy again",date:"2025-10-08"}]},{id:"2",name:"Hair Styling Gel",description:"Strong hold gel with natural finish and no residue",price:16,category:"Hair Care",stock:40,image:"/placeholder.svg",rating:4.5,specs:["150ml","Water-based","Easy wash out","Long-lasting hold"],reviews:[{id:"r3",author:"Mike Johnson",rating:5,comment:"Perfect hold without being sticky",date:"2025-10-12"}]},{id:"3",name:"Organic Face Mask",description:"Deep cleansing and hydrating mask with organic ingredients",price:45,category:"Skincare",stock:15,image:"/placeholder.svg",rating:4.9,specs:["100ml","Organic certified","Vegan","Cruelty-free"],reviews:[{id:"r4",author:"Sarah Lee",rating:5,comment:"My skin feels amazing!",date:"2025-10-11"}]},{id:"4",name:"Professional Hair Dryer",description:"Fast drying with heat protection and ionic technology",price:200,category:"Tools",stock:8,image:"/placeholder.svg",rating:4.7,specs:["2200W","Ionic technology","3 heat settings","Cool shot button"],reviews:[{id:"r5",author:"Emily White",rating:5,comment:"Salon quality at home!",date:"2025-10-09"}]},{id:"5",name:"Moisturizing Cream",description:"24-hour hydration with SPF 15 protection",price:35,category:"Skincare",stock:30,image:"/placeholder.svg",rating:4.6,specs:["50ml","SPF 15","Non-greasy","Suitable for all skin types"],reviews:[]},{id:"6",name:"Hair Brush Set",description:"Professional quality brushes for all hair types",price:28,category:"Tools",stock:20,image:"/placeholder.svg",rating:4.4,specs:["3-piece set","Bamboo handle","Anti-static bristles","Ergonomic design"],reviews:[]}],as=["all",...Array.from(new Set(Xs.map(ge=>ge.category)))],ke=Xs.filter(ge=>{const tt=ge.name.toLowerCase().includes(x.toLowerCase())||ge.description.toLowerCase().includes(x.toLowerCase()),ct=p==="all"||ge.category===p;return tt&&ct}),we=ge=>{const tt=ge._id||ge.id,ct=ge.stockQuantity||ge.stock||0,ns=y.find(ht=>(ht._id||ht.id)===tt);ns?ns.quantity<ct?(N(tt,ns.quantity+1),D.success(`${ge.name} quantity increased`)):D.error(`Stock limit reached: Only ${ct} available`):(b({...ge,_id:tt,id:tt,stock:ct,stockQuantity:ct},1),D.success(` ${ge.name} added to cart!`))},nt=(ge,tt)=>{const ct=y.find(Se=>(Se._id||Se.id)===ge);if(!ct)return;const ns=ct.stockQuantity||ct.stock||0,ht=ct.quantity+tt;if(ht===0){Ke(ge);return}if(ht>ns){D.error(`Stock limit reached: Only ${ns} available`);return}N(ge,ht)},Ke=ge=>{const tt=y.find(ct=>(ct._id||ct.id)===ge);S(ge),tt&&D.info(`${tt.name} removed from cart`)},jt=ge=>{const tt=ge._id||ge.id;L.some(ns=>(ns._id||ns.id)===tt)?(X(L.filter(ns=>(ns._id||ns.id)!==tt)),D.info(`${ge.name} removed from wishlist`)):(X([...L,ge]),D.success(` ${ge.name} added to wishlist`))},wt=ge=>L.some(tt=>(tt._id||tt.id)===ge),Xt=()=>{P(!0)},ss=async()=>{try{(await hu.updateProfile(ms)).data.success&&(D.success("Profile updated successfully!"),lt(!1),window.location.reload())}catch(ge){console.error("Profile update error:",ge),D.error(ge.response?.data?.message||"Failed to update profile")}};return e.jsx(hK,{children:e.jsxs("div",{className:"storefront-container min-h-screen bg-gradient-to-br from-background via-secondary/10 to-background smooth-scroll",children:[e.jsx("header",{className:"sticky top-0 z-40 glass-panel",children:e.jsx("div",{className:"container mx-auto px-4 py-4",children:e.jsxs("div",{className:"flex items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"h-10 w-10 rounded-full bg-gradient-to-br from-primary to-primary/60 flex items-center justify-center shadow-md",children:e.jsx(Yt,{className:"h-5 w-5 text-primary-foreground"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-lg font-bold text-foreground",children:Te.businessName}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["by ",Te.ownerName]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(R,{variant:W==="chats"?"default":"ghost",size:"icon",onClick:()=>q("chats"),className:"hidden sm:flex",title:"Messages",children:e.jsx(ta,{className:"h-5 w-5"})}),e.jsx(xK,{}),e.jsx(R,{variant:W==="orders"?"default":"ghost",size:"icon",onClick:()=>q("orders"),className:"hidden sm:flex",children:e.jsx(Al,{className:"h-5 w-5"})}),e.jsx(R,{variant:"ghost",size:"icon",onClick:st,title:"My Account",children:e.jsx(la,{className:"h-5 w-5"})}),e.jsxs(rv,{open:Xe,onOpenChange:yt,children:[e.jsx(nv,{asChild:!0,children:e.jsx(R,{variant:"ghost",size:"icon",title:"Change Theme",children:e.jsx(Wa,{className:"h-5 w-5"})})}),e.jsxs(iv,{children:[e.jsxs(lv,{children:[e.jsx(ov,{children:"Theme Settings"}),e.jsx(cv,{children:"Choose your preferred theme"})]}),e.jsx("div",{className:"mt-6 space-y-4",children:e.jsx(pK,{onThemeChange:Pt,currentTheme:u})})]})]}),e.jsx(R,{variant:"ghost",size:"icon",onClick:Dt,title:a?"Logout":"Login",children:e.jsx(rf,{className:"h-5 w-5"})})]})]})})}),e.jsx("div",{className:"container mx-auto px-4 py-6",children:e.jsxs(ja,{value:W,onValueChange:q,className:"space-y-6",children:[e.jsxs(Sa,{className:"grid w-full max-w-3xl mx-auto grid-cols-5",children:[e.jsxs(ft,{value:"shop",className:"gap-1",children:[e.jsx(ws,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Shop"})]}),e.jsxs(ft,{value:"services",className:"gap-1",children:[e.jsx(gs,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Services"})]}),e.jsxs(ft,{value:"chats",className:"gap-1 relative",children:[e.jsx(ta,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Chats"})]}),e.jsxs(ft,{value:"orders",className:"gap-1",children:[e.jsx(Al,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Orders"})]}),e.jsxs(ft,{value:"account",className:"gap-1",children:[e.jsx(la,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Account"})]})]}),e.jsxs(pt,{value:"shop",className:"space-y-6",children:[ie.length>0&&e.jsx(K,{className:"glass-card bg-gradient-to-r from-red-500/10 to-orange-500/10 border-red-300",children:e.jsx(Y,{className:"p-4",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"h-10 w-10 rounded-full bg-red-500 flex items-center justify-center animate-pulse",children:e.jsx("span",{className:"text-white font-bold text-lg",children:"%"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-lg",children:"Special Offers Active!"}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[ie.length," discount",ie.length>1?"s":""," available - Look for products with discount badges"]})]})]})})})}),e.jsxs("div",{className:"flex flex-wrap items-center justify-center gap-4 py-4",children:[e.jsxs(De,{variant:"outline",className:"gap-2 px-4 py-2",children:[e.jsx(af,{className:"h-4 w-4 text-success"}),"Secure Payment"]}),e.jsxs(De,{variant:"outline",className:"gap-2 px-4 py-2",children:[e.jsx(Yt,{className:"h-4 w-4 text-primary"}),"Fast Delivery"]}),e.jsxs(De,{variant:"outline",className:"gap-2 px-4 py-2",children:[e.jsx(af,{className:"h-4 w-4 text-warning"}),"7-Day Returns"]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(oa,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(me,{placeholder:"Search products...",value:x,onChange:ge=>h(ge.target.value),className:"pl-10 glass-panel"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(Mt,{value:p,onValueChange:g,children:[e.jsxs(Lt,{className:"w-[180px] glass-panel",children:[e.jsx(tl,{className:"h-4 w-4 mr-2"}),e.jsx(Ft,{placeholder:"Category"})]}),e.jsx(It,{className:"bg-background/95 backdrop-blur-lg border-white/20",children:as.map(ge=>e.jsx(Ae,{value:ge,children:ge==="all"?"All Categories":ge},ge))})]}),e.jsxs(rv,{children:[e.jsx(nv,{asChild:!0,children:e.jsxs(R,{className:"gap-2 relative",children:[e.jsx(ws,{className:"h-4 w-4"}),"Cart",A>0&&e.jsx(De,{className:"absolute -top-2 -right-2 h-5 w-5 p-0 flex items-center justify-center badge-pulse",children:A})]})}),e.jsxs(iv,{className:"w-full sm:max-w-md overflow-y-auto glass-panel",children:[e.jsxs(lv,{children:[e.jsx(ov,{children:"Shopping Cart"}),e.jsxs(cv,{children:[A," ",A===1?"item":"items"," in your cart"]})]}),e.jsx("div",{className:"mt-6 space-y-4",children:y.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(ws,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"Your cart is empty"})]}):e.jsxs(e.Fragment,{children:[y.map(ge=>e.jsx(K,{className:"glass-card",children:e.jsx(Y,{className:"p-4",children:e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:"h-16 w-16 rounded bg-muted flex items-center justify-center",children:e.jsx(Yt,{className:"h-8 w-8 text-muted-foreground"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-semibold text-sm",children:ge.name}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["KES ",ge.price.toFixed(2)]}),e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsx(R,{size:"icon",variant:"outline",className:"h-7 w-7",onClick:()=>nt(ge.id,-1),children:e.jsx(Pu,{className:"h-3 w-3"})}),e.jsx("span",{className:"text-sm font-medium w-8 text-center",children:ge.quantity}),e.jsx(R,{size:"icon",variant:"outline",className:"h-7 w-7",onClick:()=>nt(ge.id,1),children:e.jsx(Gs,{className:"h-3 w-3"})}),e.jsx(R,{size:"icon",variant:"ghost",className:"h-7 w-7 ml-auto",onClick:()=>Ke(ge.id),children:e.jsx(ga,{className:"h-3 w-3"})})]})]})]})})},ge._id||ge.id)),e.jsxs("div",{className:"border-t pt-4",children:[e.jsxs("div",{className:"flex justify-between text-lg font-bold mb-4",children:[e.jsx("span",{children:"Total:"}),e.jsxs("span",{children:["KES ",k.toFixed(2)]})]}),e.jsx(R,{className:"w-full",size:"lg",onClick:Xt,children:"Proceed to Checkout"})]})]})})]})]})]})]}),Rt?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-primary mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"Loading products..."})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:ke.map(ge=>e.jsxs(K,{className:"group glass-card cursor-pointer relative overflow-hidden hover:shadow-xl transition-all duration-300",onClick:()=>F(ge),children:[e.jsx(R,{size:"icon",variant:"ghost",className:"absolute top-2 right-2 z-10 h-8 w-8 rounded-full bg-background/80 backdrop-blur-sm hover:bg-background",onClick:tt=>{tt.stopPropagation(),jt(ge)},children:e.jsx($i,{className:`h-4 w-4 transition-all ${wt(ge._id||ge.id)?"fill-red-500 text-red-500":"text-muted-foreground"}`})}),e.jsx(xe,{className:"p-0",children:e.jsxs("div",{className:"aspect-square bg-gradient-to-br from-secondary/30 to-primary/10 rounded-t-lg flex items-center justify-center overflow-hidden relative group-hover:scale-105 transition-transform duration-300",children:[ge.image?e.jsx("img",{src:ge.image,alt:ge.name,className:"w-full h-full object-cover"}):e.jsx(Yt,{className:"h-20 w-20 text-primary/40 product-card-image"}),e.jsx("div",{className:"absolute bottom-2 left-2",children:e.jsx(De,{variant:(ge.stockQuantity||ge.stock)>10?"default":(ge.stockQuantity||ge.stock)===0?"destructive":"secondary",className:"shadow-lg",children:(ge.stockQuantity||ge.stock)===0?"Out of Stock":`${ge.stockQuantity||ge.stock} left`})})]})}),e.jsxs(Y,{className:"p-4",children:[e.jsxs("div",{className:"mb-2",children:[e.jsx("div",{className:"flex items-center justify-between mb-1",children:e.jsx(pe,{className:"text-base line-clamp-1 flex-1",children:ge.name})}),e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("div",{className:"flex items-center gap-0.5",children:[...Array(5)].map((tt,ct)=>e.jsx(Ja,{className:`h-3 w-3 ${ct<Math.floor(ge.rating||4.5)?"fill-yellow-500 text-yellow-500":"text-muted-foreground"}`},ct))}),e.jsx("span",{className:"text-xs text-muted-foreground",children:ge.rating||4.5})]})]}),e.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2 mb-3",children:ge.description}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{children:(()=>{const tt=Le.find(ct=>ct.productId===(ge._id||ge.id));if(tt){const ct=tt.discount,ns=ct.discountType==="percentage"?ge.price*ct.discountValue/100:ct.discountValue,ht=ge.price-ns;return e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-lg font-bold text-primary",children:["KES ",ht.toFixed(2)]}),e.jsxs(De,{variant:"destructive",className:"text-xs animate-pulse",children:["-",ct.discountType==="percentage"?`${ct.discountValue}%`:`KES ${ct.discountValue}`]})]}),e.jsxs("span",{className:"text-xs text-muted-foreground line-through",children:["KES ",ge.price.toFixed(2)]})]})}return e.jsxs("span",{className:"text-lg font-bold text-primary",children:["KES ",(ge.price||0).toFixed(2)]})})()}),e.jsx(De,{variant:"outline",className:"text-xs",children:ge.category||"General"})]})]}),e.jsxs(wo,{className:"p-4 pt-0 gap-2",children:[e.jsxs(R,{className:"flex-1 gap-2",onClick:tt=>{tt.stopPropagation(),we(ge)},disabled:(ge.stockQuantity||ge.stock)===0,children:[e.jsx(ws,{className:"h-4 w-4"}),(ge.stockQuantity||ge.stock)===0?"Out of Stock":"Add to Cart"]}),e.jsx(R,{variant:"outline",size:"icon",onClick:tt=>{tt.stopPropagation(),F(ge)},children:e.jsx(ca,{className:"h-4 w-4"})})]})]},ge._id||ge.id))}),ke.length===0&&!Rt&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Yt,{className:"h-16 w-16 mx-auto text-muted-foreground mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No products found"}),e.jsx("p",{className:"text-muted-foreground",children:"Try adjusting your search or filters"})]})]})]}),e.jsx(pt,{value:"services",className:"space-y-6",children:e.jsxs("div",{className:"space-y-4",children:[B.length>0&&e.jsx(K,{className:"glass-card",children:e.jsxs(Y,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Yr,{className:"h-5 w-5 text-primary"}),e.jsxs("div",{className:"flex-1",children:[e.jsx(te,{children:"Select Location"}),e.jsxs(Mt,{value:O?._id||O?.id,onValueChange:ge=>{const tt=B.find(ct=>(ct._id||ct.id)===ge);J(tt)},children:[e.jsx(Lt,{className:"mt-1",children:e.jsx(Ft,{placeholder:"Choose a location"})}),e.jsx(It,{children:B.map(ge=>e.jsx(Ae,{value:ge._id||ge.id,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(qc,{className:"h-4 w-4"}),ge.name," - ",ge.city]})},ge._id||ge.id))})]})]})]}),O&&e.jsxs("div",{className:"mt-3 p-3 bg-accent/20 rounded-lg",children:[e.jsx("p",{className:"text-sm font-medium",children:O.name}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[O.address,", ",O.city]}),O.phone&&e.jsxs("p",{className:"text-xs text-muted-foreground flex items-center gap-1 mt-1",children:[e.jsx(Ws,{className:"h-3 w-3"})," ",O.phone]}),O.operatingHours&&e.jsxs("p",{className:"text-xs text-muted-foreground flex items-center gap-1",children:[e.jsx(ts,{className:"h-3 w-3"})," ",O.operatingHours]})]})]})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold text-foreground",children:"Our Services"}),e.jsxs("p",{className:"text-muted-foreground mt-1",children:["Professional services delivered by our expert team ",de.length>0&&` ${de.length} available`]})]}),de.length>0&&e.jsxs(De,{variant:"default",className:"text-sm px-4 py-2 animate-pulse",children:[e.jsx(gs,{className:"h-4 w-4 mr-1"}),de.length," Live Services"]})]}),Rt?e.jsx(K,{className:"glass-card",children:e.jsxs(Y,{className:"p-12 text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"Loading services..."})]})}):de.length===0?e.jsx(K,{className:"glass-card",children:e.jsxs(Y,{className:"p-12 text-center",children:[e.jsx(gs,{className:"h-16 w-16 mx-auto mb-4 text-muted-foreground"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No Services Available Yet"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"Services will appear here once the store owner adds them."}),e.jsx(R,{variant:"outline",onClick:()=>{window.location.reload()},children:"Refresh Page"})]})}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:de.map(ge=>e.jsxs(K,{className:"glass-card hover:shadow-xl transition-all duration-300 group overflow-hidden",children:[e.jsxs("div",{className:"aspect-video bg-gradient-to-br from-primary/20 to-secondary/20 relative overflow-hidden",children:[ge.image?e.jsx("img",{src:ge.image,alt:ge.name,className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-300"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx(gs,{className:"h-16 w-16 text-primary/40"})}),ge.category&&e.jsx("div",{className:"absolute top-3 right-3",children:e.jsx(De,{className:"bg-white/90 text-foreground backdrop-blur-sm",children:ge.category})})]}),e.jsxs(xe,{className:"pb-3",children:[e.jsx(pe,{className:"text-xl mb-2 group-hover:text-primary transition-colors",children:ge.name}),e.jsxs(ot,{className:"flex items-center gap-2 justify-between",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(ts,{className:"h-4 w-4"}),ge.duration]}),e.jsxs(De,{variant:"secondary",className:"gap-1",children:[e.jsx(Zt,{className:"h-3 w-3"}),ge.staff," staff"]})]})]}),e.jsxs(Y,{children:[ge.description&&e.jsx("p",{className:"text-sm text-muted-foreground mb-3 line-clamp-2",children:ge.description}),e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[(()=>{const tt=fe(ge._id||ge.id),ct=Number(ge.price)||0,ns=tt?Ue(ct,tt):null,ht=ns!==null?ns:ct,Se=isNaN(ct)?0:ct,dt=isNaN(ht)?0:ht;return e.jsxs("div",{className:"flex flex-col gap-1",children:[tt&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-sm text-muted-foreground line-through",children:["KES ",Se.toLocaleString()]}),e.jsxs(De,{variant:"destructive",className:"text-xs",children:["-",Number(tt.value)||0,tt.type==="percentage"?"%":" KES"," OFF"]})]}),e.jsxs("span",{className:`text-2xl font-bold ${tt?"text-green-600":"text-primary"}`,children:["KES ",dt.toLocaleString()]})]})})(),e.jsx("div",{className:"flex items-center gap-1 text-yellow-500",children:[...Array(5)].map((tt,ct)=>e.jsx(Ja,{className:`h-4 w-4 ${ct<Math.floor(ge.rating||5)?"fill-current":"text-muted-foreground"}`},ct))})]}),ge.bookings>0&&e.jsxs("p",{className:"text-xs text-muted-foreground mb-3",children:[ge.bookings," bookings completed"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs(R,{variant:"outline",onClick:()=>{T(ge),D.info("Service details opened")},children:[e.jsx(ca,{className:"h-4 w-4 mr-2"}),"Details"]}),e.jsxs(R,{onClick:()=>{T(ge),V(!0)},children:[e.jsx(gs,{className:"h-4 w-4 mr-2"}),"Book Now"]})]})]})]},ge._id||ge.id))})]}),U.length>0&&e.jsxs("div",{children:[e.jsxs("h3",{className:"text-xl font-semibold mb-4 flex items-center gap-2",children:[e.jsx(Zt,{className:"h-5 w-5"}),"Our Team"]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:U.slice(0,8).map(ge=>e.jsx(K,{className:"text-center glass-card",children:e.jsxs(Y,{className:"p-4",children:[e.jsx("div",{className:"h-16 w-16 rounded-full bg-gradient-to-br from-primary to-accent mx-auto mb-3 flex items-center justify-center",children:e.jsx(la,{className:"h-8 w-8 text-primary-foreground"})}),e.jsx("p",{className:"font-medium text-sm",children:ge.name}),e.jsx("p",{className:"text-xs text-muted-foreground",children:ge.role})]})},ge._id||ge.id))})]})]})}),e.jsx(pt,{value:"chats",className:"space-y-6",children:a?e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Messages"}),e.jsxs("p",{className:"text-muted-foreground",children:["Chat with ",Te.businessName]})]}),e.jsx(fK,{})]}):e.jsx(K,{className:"glass-card max-w-md mx-auto",children:e.jsxs(Y,{className:"p-12 text-center",children:[e.jsx(ta,{className:"h-16 w-16 mx-auto mb-4 text-muted-foreground"}),e.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Login Required"}),e.jsxs("p",{className:"text-muted-foreground mb-6",children:["Please sign in to chat with ",Te.businessName]}),e.jsxs(R,{onClick:()=>s("/client/login"),className:"gap-2",children:[e.jsx(la,{className:"h-4 w-4"}),"Sign In"]})]})})}),e.jsx(pt,{value:"orders",children:e.jsx(uK,{})}),e.jsx(pt,{value:"account",className:"space-y-6",children:a?e.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[e.jsxs(K,{className:"glass-card",children:[e.jsxs(xe,{children:[e.jsxs(pe,{className:"flex items-center gap-2",children:[e.jsx(la,{className:"h-5 w-5"}),"My Account"]}),e.jsx(ot,{children:"Manage your profile and preferences"})]}),e.jsx(Y,{className:"space-y-4",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"h-20 w-20 rounded-full bg-gradient-to-br from-primary to-accent flex items-center justify-center",children:e.jsx(la,{className:"h-10 w-10 text-primary-foreground"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-xl font-bold",children:a?.name||"Guest User"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:a?.email||"Not logged in"}),e.jsx(De,{className:"mt-1",children:a?"Premium Member":"Guest"})]}),e.jsxs(R,{variant:"outline",size:"sm",onClick:()=>{a?(is({name:a.name||"",phone:a.phone||""}),lt(!0)):(D.info("Please login to edit profile"),s(`/client/login/${t}`))},children:[e.jsx(_b,{className:"h-4 w-4 mr-2"}),"Edit"]})]})})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsx(K,{className:"glass-card",children:e.jsxs(Y,{className:"p-4 text-center",children:[e.jsx(ws,{className:"h-8 w-8 mx-auto mb-2 text-primary"}),e.jsx("p",{className:"text-2xl font-bold",children:y.length}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Cart Items"})]})}),e.jsx(K,{className:"glass-card",children:e.jsxs(Y,{className:"p-4 text-center",children:[e.jsx($i,{className:"h-8 w-8 mx-auto mb-2 text-red-500"}),e.jsx("p",{className:"text-2xl font-bold",children:L.length}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Wishlist"})]})}),e.jsx(K,{className:"glass-card",children:e.jsxs(Y,{className:"p-4 text-center",children:[e.jsx(Al,{className:"h-8 w-8 mx-auto mb-2 text-accent"}),e.jsx("p",{className:"text-2xl font-bold",children:"0"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Orders"})]})}),e.jsx(K,{className:"glass-card",children:e.jsxs(Y,{className:"p-4 text-center",children:[e.jsx(Ja,{className:"h-8 w-8 mx-auto mb-2 text-yellow-500"}),e.jsx("p",{className:"text-2xl font-bold",children:"100"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Reward Points"})]})})]}),e.jsxs(K,{className:"glass-card",children:[e.jsx(xe,{children:e.jsx(pe,{className:"text-lg",children:"Quick Actions"})}),e.jsx(Y,{children:e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[e.jsxs(R,{variant:"outline",className:"h-auto flex-col gap-2 py-4",onClick:()=>q("orders"),children:[e.jsx(ws,{className:"h-6 w-6"}),e.jsx("span",{className:"text-sm",children:"View Orders"})]}),e.jsxs(R,{variant:"outline",className:"h-auto flex-col gap-2 py-4",onClick:()=>q("shop"),children:[e.jsx(Yt,{className:"h-6 w-6"}),e.jsx("span",{className:"text-sm",children:"Shop Products"})]}),e.jsxs(R,{variant:"outline",className:"h-auto flex-col gap-2 py-4",onClick:()=>q("services"),children:[e.jsx(gs,{className:"h-6 w-6"}),e.jsx("span",{className:"text-sm",children:"Book Service"})]}),e.jsxs(R,{variant:"outline",className:"h-auto flex-col gap-2 py-4",onClick:()=>s("/client/messages"),children:[e.jsx(ta,{className:"h-6 w-6"}),e.jsx("span",{className:"text-sm",children:"Messages"})]}),e.jsxs(R,{variant:"outline",className:"h-auto flex-col gap-2 py-4",onClick:()=>{lt(!0)},children:[e.jsx(Wa,{className:"h-6 w-6"}),e.jsx("span",{className:"text-sm",children:"Settings"})]})]})})]}),L.length>0&&e.jsxs(K,{className:"glass-card",children:[e.jsx(xe,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(pe,{className:"flex items-center gap-2",children:[e.jsx($i,{className:"h-5 w-5 text-red-500"}),"My Wishlist"]}),e.jsxs(De,{children:[L.length," items"]})]})}),e.jsxs(Y,{children:[e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:L.slice(0,4).map(ge=>e.jsx(K,{className:"group cursor-pointer",onClick:()=>F(ge),children:e.jsxs(Y,{className:"p-3",children:[e.jsx("div",{className:"aspect-square bg-gradient-to-br from-secondary/30 to-primary/10 rounded-lg flex items-center justify-center mb-2 group-hover:scale-105 transition-transform",children:e.jsx(Yt,{className:"h-8 w-8 text-primary/40"})}),e.jsx("p",{className:"text-sm font-medium line-clamp-1",children:ge.name}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["KES ",(ge.price||0).toLocaleString()]})]})},ge._id||ge.id))}),L.length>4&&e.jsxs(R,{variant:"outline",className:"w-full mt-4",onClick:()=>q("shop"),children:["View All ",L.length," Items"]})]})]}),e.jsxs(K,{className:"glass-card bg-gradient-to-br from-primary/5 to-accent/5",children:[e.jsx(xe,{children:e.jsxs(pe,{className:"flex items-center gap-2",children:[e.jsx(Ja,{className:"h-5 w-5 text-yellow-500"}),"Rewards & Loyalty"]})}),e.jsxs(Y,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Current Points"}),e.jsx("span",{className:"text-2xl font-bold text-primary",children:"100"})]}),e.jsx("div",{className:"w-full bg-secondary rounded-full h-2",children:e.jsx("div",{className:"bg-primary h-2 rounded-full",style:{width:"20%"}})}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"400 more points to next reward"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"p-3 bg-card rounded-lg border",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Lifetime Points"}),e.jsx("p",{className:"text-lg font-bold",children:"100"})]}),e.jsxs("div",{className:"p-3 bg-card rounded-lg border",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Member Since"}),e.jsx("p",{className:"text-lg font-bold",children:"2025"})]})]})]})]}),e.jsxs(K,{className:"glass-card",children:[e.jsx(xe,{children:e.jsxs(pe,{className:"flex items-center gap-2",children:[e.jsx(ts,{className:"h-5 w-5"}),"Recent Activity"]})}),e.jsx(Y,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-accent/10 rounded-lg",children:[e.jsx(ws,{className:"h-5 w-5 text-primary"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium",children:"Cart updated"}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[y.length," items in cart"]})]}),e.jsx(De,{variant:"secondary",children:"Now"})]}),L.length>0&&e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-accent/10 rounded-lg",children:[e.jsx($i,{className:"h-5 w-5 text-red-500"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium",children:"Wishlist updated"}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[L.length," items saved"]})]}),e.jsx(De,{variant:"secondary",children:"Recent"})]})]})})]}),e.jsx(mK,{}),e.jsxs(K,{className:"glass-card",children:[e.jsx(xe,{children:e.jsx(pe,{className:"text-lg",children:"Account Settings"})}),e.jsxs(Y,{className:"space-y-3",children:[e.jsxs(R,{variant:"outline",className:"w-full justify-between",onClick:()=>lt(!0),children:[e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(la,{className:"h-4 w-4"}),"Edit Profile"]}),e.jsx(_b,{className:"h-4 w-4"})]}),e.jsxs(R,{variant:"outline",className:"w-full justify-between",onClick:()=>q("orders"),children:[e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(Al,{className:"h-4 w-4"}),"Order History"]}),e.jsx(ca,{className:"h-4 w-4"})]}),e.jsxs(R,{variant:"outline",className:"w-full justify-between",onClick:()=>yt(!0),children:[e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(Wa,{className:"h-4 w-4"}),"Theme Preferences"]}),e.jsx(Wa,{className:"h-4 w-4"})]}),e.jsx(R,{variant:"destructive",className:"w-full justify-between",onClick:Dt,children:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(rf,{className:"h-4 w-4"}),"Logout"]})})]})]})]}):e.jsx(K,{className:"glass-card",children:e.jsxs(Y,{className:"p-12 text-center",children:[e.jsx(la,{className:"h-16 w-16 mx-auto mb-4 text-muted-foreground"}),e.jsx("h3",{className:"text-xl font-bold mb-2",children:"Sign In Required"}),e.jsx("p",{className:"text-muted-foreground mb-6",children:"Please log in to access your account, orders, and personalized features"}),e.jsxs("div",{className:"flex gap-3 justify-center",children:[e.jsx(R,{onClick:()=>s(`/client/login/${t}`),children:"Sign In"}),e.jsx(R,{variant:"outline",onClick:()=>s(`/client/register/${t}`),children:"Create Account"})]})]})})})]})}),e.jsx(NG,{product:G,open:!!G,onClose:()=>F(null),onAddToCart:we}),E&&e.jsx(Bt,{open:!!E,onOpenChange:()=>T(null),children:e.jsxs(zt,{className:"max-w-2xl",children:[e.jsxs(Ut,{children:[e.jsx(Vt,{className:"text-2xl",children:E.name}),e.jsx(es,{children:"Complete service details and booking information"})]}),e.jsxs("div",{className:"space-y-4",children:[E.image&&e.jsx("div",{className:"aspect-video rounded-lg overflow-hidden",children:e.jsx("img",{src:E.image,alt:E.name,className:"w-full h-full object-cover"})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(K,{children:e.jsxs(Y,{className:"p-4 flex items-center gap-3",children:[e.jsx(ra,{className:"h-8 w-8 text-green-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Price"}),e.jsxs("p",{className:"text-xl font-bold",children:["KES ",(E.price||0).toLocaleString()]})]})]})}),e.jsx(K,{children:e.jsxs(Y,{className:"p-4 flex items-center gap-3",children:[e.jsx(ts,{className:"h-8 w-8 text-blue-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Duration"}),e.jsx("p",{className:"text-xl font-bold",children:E.duration})]})]})})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-2",children:"Description"}),e.jsx("p",{className:"text-muted-foreground",children:E.description||"Professional service provided by our expert team."})]}),e.jsxs("div",{className:"flex items-center gap-6 pt-2 border-t",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ja,{className:"h-5 w-5 text-yellow-500 fill-yellow-500"}),e.jsxs("span",{className:"font-semibold",children:[E.rating||5,"/5"]})]}),E.bookings>0&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(gs,{className:"h-5 w-5 text-primary"}),e.jsxs("span",{className:"font-semibold",children:[E.bookings," bookings"]})]})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx(R,{variant:"outline",className:"flex-1",onClick:()=>T(null),children:"Close"}),e.jsxs(R,{className:"flex-1",onClick:()=>{if(!a){D.error("Please log in to book services"),s(`/client/login/${t}`),T(null);return}q("account"),D.success(`Selected: ${E.name}`),T(null)},children:[e.jsx(gs,{className:"h-4 w-4 mr-2"}),"Book Service"]})]})]})]})}),e.jsx(Bt,{open:bt,onOpenChange:lt,children:e.jsxs(zt,{className:"sm:max-w-md",children:[e.jsxs(Ut,{children:[e.jsx(Vt,{children:"Edit Profile"}),e.jsx(es,{children:"Update your personal information"})]}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(te,{htmlFor:"edit-name",children:"Full Name"}),e.jsxs("div",{className:"relative",children:[e.jsx(la,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(me,{id:"edit-name",value:ms.name,onChange:ge=>is({...ms,name:ge.target.value}),className:"pl-10",placeholder:"Your full name"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(te,{htmlFor:"edit-phone",children:"Phone Number"}),e.jsxs("div",{className:"relative",children:[e.jsx(Ws,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(me,{id:"edit-phone",value:ms.phone,onChange:ge=>is({...ms,phone:ge.target.value}),className:"pl-10",placeholder:"+254 700 000 000"})]})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx(R,{variant:"outline",className:"flex-1",onClick:()=>lt(!1),children:"Cancel"}),e.jsxs(R,{className:"flex-1 gap-2",onClick:ss,children:[e.jsx(Ui,{className:"h-4 w-4"}),"Save Changes"]})]})]})]})}),e.jsx(EG,{open:_,onClose:()=>P(!1),cartItems:y,cartTotal:k,onClearCart:C}),e.jsx(dK,{open:z,onClose:()=>{V(!1),T(null)},service:E}),e.jsx(G4,{})]})})},vK=({product:t,isOpen:s,onClose:a})=>{const[r,i]=v.useState(1),[o,c]=v.useState(!1);if(!t)return null;const f=(C=>C>20?{label:"In Stock",variant:"default",color:"text-green-600",icon:ti}:C>0?{label:"Low Stock",variant:"secondary",color:"text-orange-600",icon:ks}:{label:"Out of Stock",variant:"destructive",color:"text-red-600",icon:ks})(t.stockQuantity||0),x=f.icon,p=(t.currency||"USD")==="KES"?"KES":"$",g=(t.price*r).toFixed(2),y=Math.min(t.stockQuantity||0,99),b=()=>{D.success(`Added ${r} ${t.name} to cart`,{description:`Total: $${g}`,icon:""}),a()},N=()=>{navigator.share?navigator.share({title:t.name,text:`Check out ${t.name} - $${t.price}`,url:window.location.href}).catch(()=>{navigator.clipboard.writeText(window.location.href),D.success("Link copied to clipboard!")}):(navigator.clipboard.writeText(window.location.href),D.success("Link copied to clipboard!"))},S=()=>{c(!o),D.success(o?"Removed from favorites":"Added to favorites",{icon:o?"":""})};return e.jsx(Bt,{open:s,onOpenChange:a,children:e.jsxs(zt,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(Ut,{children:[e.jsxs(Vt,{className:"text-2xl font-bold flex items-center gap-2",children:[e.jsx(Yt,{className:"h-6 w-6 text-primary"}),"Product Details"]}),e.jsx(es,{children:"Complete information about this product"})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6 py-4",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"aspect-square relative overflow-hidden rounded-xl border-2 border-primary/20 bg-primary/10 shadow-2xl",children:[e.jsx("img",{src:t.image||`https://via.placeholder.com/500x500?text=${encodeURIComponent(t.name)}`,alt:t.name,className:"object-cover w-full h-full hover:scale-110 transition-all duration-500"}),e.jsx("div",{className:"absolute inset-0 bg-black/10 opacity-0 hover:opacity-100 transition-opacity duration-300"}),t.featured&&e.jsxs(De,{className:"absolute top-4 right-4 bg-yellow-500 text-white border-0 shadow-lg animate-pulse",children:[e.jsx(_a,{className:"h-3 w-3 mr-1"}),"Featured"]}),t.stockQuantity>0&&t.stockQuantity<=5&&e.jsxs(De,{className:"absolute top-4 left-4 bg-red-500 text-white border-0 shadow-lg",children:[e.jsx(ks,{className:"h-3 w-3 mr-1"}),"Only ",t.stockQuantity," left!"]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(R,{variant:"outline",className:"flex-1",onClick:S,children:[e.jsx($i,{className:Ze("h-4 w-4 mr-2",o&&"fill-red-500 text-red-500")}),o?"Favorited":"Add to Favorites"]}),e.jsx(R,{variant:"outline",onClick:N,children:e.jsx(Gc,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx("h3",{className:"text-4xl font-bold text-foreground leading-tight",children:t.name}),e.jsxs("div",{className:"flex items-center gap-4 flex-wrap",children:[e.jsxs("div",{className:"bg-green-600 text-white px-6 py-3 rounded-xl shadow-lg",children:[e.jsx("span",{className:"text-sm font-medium opacity-90",children:"Price"}),e.jsxs("div",{className:"text-3xl font-bold",children:[p," ",t.price?.toFixed(2)||"0.00"]})]}),e.jsxs(De,{variant:f.variant,className:"gap-2 px-4 py-2 text-base",children:[e.jsx(x,{className:"h-4 w-4"}),f.label]})]}),t.description&&e.jsx("p",{className:"text-lg text-muted-foreground leading-relaxed",children:t.description})]}),e.jsx(Pn,{}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"flex items-start gap-3 p-4 rounded-xl bg-primary/10 border border-primary/20 hover:shadow-md transition-shadow",children:[e.jsx(No,{className:"h-5 w-5 text-primary mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Category"}),e.jsx("p",{className:"font-semibold",children:t.category||"Uncategorized"})]})]}),e.jsxs("div",{className:"flex items-start gap-3 p-4 rounded-xl bg-primary/10 border border-primary/20 hover:shadow-md transition-shadow",children:[e.jsx(Yt,{className:"h-5 w-5 text-primary mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"SKU"}),e.jsx("p",{className:"font-semibold font-mono",children:t.sku||"N/A"})]})]}),e.jsxs("div",{className:"flex items-start gap-3 p-4 rounded-xl bg-primary/10 border border-primary/20 hover:shadow-md transition-shadow",children:[e.jsx(HS,{className:"h-5 w-5 text-primary mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Available Stock"}),e.jsxs("p",{className:Ze("font-semibold text-lg",f.color),children:[t.stockQuantity||0," units"]})]})]}),e.jsxs("div",{className:"flex items-start gap-3 p-4 rounded-xl bg-primary/10 border border-primary/20 hover:shadow-md transition-shadow",children:[e.jsx(ks,{className:"h-5 w-5 text-primary mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Reorder Level"}),e.jsxs("p",{className:"font-semibold",children:[t.reorderLevel||5," units"]})]})]})]}),t.supplierName&&e.jsxs("div",{className:"flex items-start gap-3 p-4 rounded-lg border bg-card",children:[e.jsx(Kc,{className:"h-5 w-5 text-primary mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Supplier"}),e.jsx("p",{className:"font-semibold",children:t.supplierName})]})]}),e.jsx(Pn,{}),t.stockQuantity>0&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("label",{className:"text-sm font-medium",children:"Quantity:"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(R,{variant:"outline",size:"sm",onClick:()=>i(Math.max(1,r-1)),disabled:r<=1,children:"-"}),e.jsx("span",{className:"w-12 text-center font-semibold",children:r}),e.jsx(R,{variant:"outline",size:"sm",onClick:()=>i(Math.min(y,r+1)),disabled:r>=y,children:"+"})]}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:["(Max: ",y,")"]})]}),e.jsxs("div",{className:"flex items-center justify-between p-5 bg-primary/15 rounded-xl border-2 border-primary/30 shadow-inner",children:[e.jsx("span",{className:"text-lg font-semibold",children:"Total Price:"}),e.jsxs("span",{className:"text-3xl font-bold text-green-600",children:[p," ",g]})]}),e.jsxs(R,{className:"w-full gap-2 h-14 text-lg font-bold bg-green-600 hover:bg-green-700 shadow-lg hover:shadow-xl transition-all duration-300",onClick:b,children:[e.jsx(ws,{className:"h-5 w-5"}),"Add to Cart"]})]}),t.stockQuantity===0&&e.jsxs("div",{className:"p-4 bg-red-50 dark:bg-red-950/20 border border-red-200 dark:border-red-900 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 text-red-600 dark:text-red-400",children:[e.jsx(ks,{className:"h-5 w-5"}),e.jsx("p",{className:"font-semibold",children:"This product is currently out of stock"})]}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Please check back later or contact us for availability."})]}),t.createdAt&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground pt-2",children:[e.jsx(gs,{className:"h-4 w-4"}),e.jsxs("span",{children:["Added on ",new Date(t.createdAt).toLocaleDateString()]})]})]})]}),e.jsx(Ps,{children:e.jsx(R,{variant:"outline",onClick:a,children:"Close"})})]})})},jK=()=>{const t=Ka(),{isAuthenticated:s}=_s(),{add:a,count:r}=sj(),[i,o]=v.useState([]),[c,u]=v.useState(!0),[f,x]=v.useState(""),[h,p]=v.useState("all"),[g,y]=v.useState("grid"),[b,N]=v.useState(null),[S,C]=v.useState(!1),[k,A]=v.useState(null);v.useEffect(()=>{G()},[]);const G=async()=>{u(!0);try{const W=localStorage.getItem("token"),q=await Ne.get("/products",{headers:W?{Authorization:`Bearer ${W}`}:{}});o(q.data||[]),(!q.data||q.data.length===0)&&D.info("No products found. Add products to get started!")}catch(W){console.error("Error fetching products:",W),D.error("Failed to load products. Please check your connection."),o([])}finally{u(!1)}},F=["all",...new Set(i.map(W=>W.category))],E=i.filter(W=>{const q=W.name?.toLowerCase().includes(f.toLowerCase())||W.description?.toLowerCase().includes(f.toLowerCase()),B=h==="all"||W.category===h;return q&&B}),T=W=>W>20?{label:"In Stock",variant:"default"}:W>0?{label:"Low Stock",variant:"secondary"}:{label:"Out of Stock",variant:"destructive"},_=W=>{N(W),C(!0)},P=()=>{C(!1),setTimeout(()=>N(null),300)},z=W=>{A(W._id||W.id),a(W,1),D.success(e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ti,{className:"h-4 w-4 text-green-500"}),e.jsxs("span",{children:[W.name," added to cart"]})]})),setTimeout(()=>A(null),1e3)},V=()=>{t("/dashboard/checkout")};return e.jsxs("div",{className:"space-y-6 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(R,{variant:"outline",size:"sm",onClick:()=>t(-1),children:[e.jsx(WS,{className:"h-4 w-4 mr-2"}),"Back"]}),e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold text-foreground flex items-center gap-2",children:[e.jsx(Yt,{className:"h-8 w-8 text-green-600"}),"Product Store"]}),e.jsx("p",{className:"text-muted-foreground",children:"Browse and manage all available products"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(R,{variant:"outline",onClick:V,className:"relative",children:[e.jsx(ws,{className:"h-4 w-4 mr-2"}),"Cart",r>0&&e.jsx("span",{className:"absolute -top-2 -right-2 bg-green-600 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:r})]}),e.jsx(R,{variant:g==="grid"?"default":"outline",size:"sm",onClick:()=>y("grid"),children:e.jsx(E6,{className:"h-4 w-4"})}),e.jsx(R,{variant:g==="list"?"default":"outline",size:"sm",onClick:()=>y("list"),children:e.jsx(k6,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{className:"grid gap-6 md:grid-cols-4",children:[e.jsxs(K,{children:[e.jsxs(xe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(pe,{className:"text-sm font-medium",children:"Total Products"}),e.jsx(Yt,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(Y,{children:[e.jsx("div",{className:"text-2xl font-bold",children:i.length}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[E.length," shown"]})]})]}),e.jsxs(K,{children:[e.jsxs(xe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(pe,{className:"text-sm font-medium",children:"Total Value"}),e.jsx(ra,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(Y,{children:[e.jsxs("div",{className:"text-2xl font-bold",children:["KES ",i.reduce((W,q)=>W+(q.price*q.stockQuantity||0),0).toLocaleString()]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Inventory value"})]})]}),e.jsxs(K,{children:[e.jsxs(xe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(pe,{className:"text-sm font-medium",children:"Categories"}),e.jsx(tl,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(Y,{children:[e.jsx("div",{className:"text-2xl font-bold",children:F.length-1}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Product categories"})]})]}),e.jsxs(K,{children:[e.jsxs(xe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(pe,{className:"text-sm font-medium",children:"Low Stock Items"}),e.jsx(Yt,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(Y,{children:[e.jsx("div",{className:"text-2xl font-bold text-orange-600",children:i.filter(W=>W.stockQuantity<20&&W.stockQuantity>0).length}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Need restocking"})]})]})]}),e.jsx(K,{children:e.jsx(Y,{className:"pt-6",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(oa,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(me,{placeholder:"Search products by name or description...",value:f,onChange:W=>x(W.target.value),className:"pl-10"})]}),e.jsxs(Mt,{value:h,onValueChange:p,children:[e.jsx(Lt,{className:"w-full md:w-[200px]",children:e.jsx(Ft,{placeholder:"Filter by category"})}),e.jsx(It,{children:F.map(W=>e.jsx(Ae,{value:W,children:W==="all"?"All Categories":W},W))})]})]})})}),c?e.jsx(K,{children:e.jsxs(Y,{className:"p-8 text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"Loading products..."})]})}):E.length===0?e.jsx(K,{children:e.jsxs(Y,{className:"p-8 text-center",children:[e.jsx(Yt,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No products found"}),e.jsx("p",{className:"text-muted-foreground",children:f||h!=="all"?"Try adjusting your search or filters":"No products available in the store"})]})}):e.jsx("div",{className:g==="grid"?"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6":"space-y-4",children:E.map(W=>{const q=T(W.stockQuantity||0);return g==="grid"?e.jsxs(K,{className:"hover:shadow-lg transition-shadow",children:[e.jsxs(xe,{children:[e.jsx("div",{className:"aspect-square relative overflow-hidden rounded-md bg-muted mb-4",children:e.jsx("img",{src:W.image||`https://via.placeholder.com/300x300?text=${encodeURIComponent(W.name)}`,alt:W.name,className:"object-cover w-full h-full"})}),e.jsx(pe,{className:"line-clamp-1",children:W.name}),e.jsx(ot,{className:"line-clamp-2",children:W.description||"No description available"})]}),e.jsx(Y,{children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"text-2xl font-bold text-green-600",children:["KES ",W.price?.toLocaleString()||"0"]}),e.jsx(De,{variant:q.variant,children:q.label})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm text-muted-foreground",children:[e.jsx("span",{children:W.category||"Uncategorized"}),e.jsxs("span",{children:["Stock: ",W.stockQuantity||0]})]})]})}),e.jsxs(wo,{className:"flex gap-2",children:[e.jsxs(R,{className:"flex-1",variant:"outline",onClick:()=>_(W),children:[e.jsx(ca,{className:"h-4 w-4 mr-2"}),"Details"]}),e.jsx(R,{className:"flex-1",onClick:()=>z(W),disabled:W.stockQuantity<=0||k===(W._id||W.id),children:k===(W._id||W.id)?e.jsxs(e.Fragment,{children:[e.jsx(ti,{className:"h-4 w-4 mr-2"}),"Added!"]}):e.jsxs(e.Fragment,{children:[e.jsx(ws,{className:"h-4 w-4 mr-2"}),"Add to Cart"]})})]})]},W._id||W.id):e.jsx(K,{className:"hover:shadow-md transition-shadow",children:e.jsx(Y,{className:"p-6",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-24 h-24 relative overflow-hidden rounded-md bg-muted flex-shrink-0",children:e.jsx("img",{src:W.image||`https://via.placeholder.com/100x100?text=${encodeURIComponent(W.name)}`,alt:W.name,className:"object-cover w-full h-full"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-lg mb-1",children:W.name}),e.jsx("p",{className:"text-sm text-muted-foreground mb-2 line-clamp-1",children:W.description||"No description available"}),e.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[e.jsx(De,{variant:"outline",children:W.category||"Uncategorized"}),e.jsxs("span",{className:"text-muted-foreground",children:["Stock: ",W.stockQuantity||0]}),e.jsx(De,{variant:q.variant,children:q.label})]})]}),e.jsxs("div",{className:"flex flex-col items-end gap-2",children:[e.jsxs("span",{className:"text-2xl font-bold text-green-600",children:["KES ",W.price?.toLocaleString()||"0"]}),e.jsxs(R,{variant:"outline",size:"sm",onClick:()=>_(W),children:[e.jsx(ca,{className:"h-4 w-4 mr-2"}),"View"]})]})]})})},W._id||W.id)})}),e.jsx(vK,{product:b,isOpen:S,onClose:P})]})},yK=[{id:1,name:"Premium Hair Treatment",category:"Services",price:2500,image:"",description:"Professional hair treatment with organic products",stock:"Available"},{id:2,name:"Manicure & Pedicure",category:"Services",price:1500,image:"",description:"Complete nail care service",stock:"Available"},{id:3,name:"Organic Shampoo",category:"Products",price:800,image:"",description:"Natural ingredients for healthy hair",stock:"In Stock"},{id:4,name:"Face Massage",category:"Services",price:2e3,image:"",description:"Relaxing facial massage therapy",stock:"Available"},{id:5,name:"Hair Dryer Pro",category:"Products",price:3500,image:"",description:"Professional grade hair dryer",stock:"In Stock"},{id:6,name:"Spa Package",category:"Services",price:5e3,image:"",description:"Full day spa experience",stock:"Available"}],NK=()=>{const[t,s]=v.useState(""),[a,r]=v.useState("all"),[i,o]=v.useState([]),c=yK.filter(p=>{const g=p.name.toLowerCase().includes(t.toLowerCase()),y=a==="all"||p.category===a;return g&&y}),u=p=>{o(g=>g.find(b=>b.id===p.id)?g.map(b=>b.id===p.id?{...b,quantity:b.quantity+1}:b):[...g,{id:p.id,name:p.name,price:p.price,quantity:1}]),D.success(`${p.name} added to cart`)},f=(p,g)=>{o(y=>y.map(b=>b.id===p?{...b,quantity:Math.max(0,b.quantity+g)}:b).filter(b=>b.quantity>0))},x=i.reduce((p,g)=>p+g.price*g.quantity,0),h=i.reduce((p,g)=>p+g.quantity,0);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Product Catalog"}),e.jsx("p",{className:"text-muted-foreground",children:"Browse our products and services"})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs(De,{variant:"secondary",className:"text-lg py-2 px-4",children:[e.jsx(ws,{className:"h-4 w-4 mr-2"}),h," items"]})})]}),e.jsx(K,{children:e.jsx(Y,{className:"p-4",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(oa,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),e.jsx(me,{placeholder:"Search products or services...",value:t,onChange:p=>s(p.target.value),className:"pl-10"})]}),e.jsxs(Mt,{value:a,onValueChange:r,children:[e.jsxs(Lt,{className:"w-full sm:w-48",children:[e.jsx(tl,{className:"h-4 w-4 mr-2"}),e.jsx(Ft,{placeholder:"Category"})]}),e.jsxs(It,{children:[e.jsx(Ae,{value:"all",children:"All Categories"}),e.jsx(Ae,{value:"Services",children:"Services"}),e.jsx(Ae,{value:"Products",children:"Products"})]})]})]})})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:c.map(p=>e.jsxs(K,{className:"card-hover",children:[e.jsxs(xe,{children:[e.jsx("div",{className:"text-5xl mb-4 text-center",children:p.image}),e.jsx(pe,{children:p.name}),e.jsx(ot,{children:p.description})]}),e.jsxs(Y,{children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"text-2xl font-bold text-primary",children:["KES ",p.price.toLocaleString()]}),e.jsx(De,{variant:"outline",children:p.stock})]}),e.jsx(De,{className:"mt-2",children:p.category})]}),e.jsx(wo,{children:e.jsxs(R,{onClick:()=>u(p),className:"w-full",children:[e.jsx(ws,{className:"h-4 w-4 mr-2"}),"Add to Cart"]})})]},p.id))}),i.length>0&&e.jsxs(K,{className:"border-primary",children:[e.jsx(xe,{children:e.jsxs(pe,{children:["Shopping Cart (",h," items)"]})}),e.jsx(Y,{className:"space-y-4",children:i.map(p=>e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium",children:p.name}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["KES ",p.price.toLocaleString()," each"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(R,{variant:"outline",size:"icon",onClick:()=>f(p.id,-1),children:e.jsx(Pu,{className:"h-4 w-4"})}),e.jsx("span",{className:"w-8 text-center font-medium",children:p.quantity}),e.jsx(R,{variant:"outline",size:"icon",onClick:()=>f(p.id,1),children:e.jsx(Gs,{className:"h-4 w-4"})}),e.jsxs("div",{className:"w-32 text-right font-bold",children:["KES ",(p.price*p.quantity).toLocaleString()]})]})]},p.id))}),e.jsxs(wo,{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"w-full flex justify-between items-center text-xl font-bold",children:[e.jsx("span",{children:"Total:"}),e.jsxs("span",{className:"text-primary",children:["KES ",x.toLocaleString()]})]}),e.jsx(R,{className:"w-full",size:"lg",children:"Proceed to Checkout"})]})]})]})},Wh=[{id:1,name:"Premium Hair Treatment",duration:"1 hour",price:2500},{id:2,name:"Manicure & Pedicure",duration:"45 min",price:1500},{id:3,name:"Face Massage",duration:"30 min",price:2e3},{id:4,name:"Spa Package",duration:"2 hours",price:5e3}],bK=["09:00 AM","10:00 AM","11:00 AM","12:00 PM","01:00 PM","02:00 PM","03:00 PM","04:00 PM","05:00 PM"],wK=()=>{const[t,s]=v.useState(),[a,r]=v.useState(""),[i,o]=v.useState(""),[c,u]=v.useState({name:"",phone:"",email:"",notes:""}),[f,x]=v.useState(1),h=async g=>{if(g.preventDefault(),!a||!t||!i){D.error("Please complete all required fields");return}try{const y={customerName:c.name,service:Wh.find(S=>S.id.toString()===a)?.name||a,time:new Date(`${t?.toISOString().split("T")[0]}T${i.replace(" ","")}`),durationMinutes:parseInt((Wh.find(S=>S.id.toString()===a)?.duration||"0").replace(/[^0-9]/g,""),10)||60,notes:c.notes,email:c.email},b=localStorage.getItem("token"),N=window.location.pathname.split("/").pop();b?await Ne.post("/appointments",y):await Ne.post("/public/appointments",{...y,inviteCode:N}),D.success("Appointment booked successfully! We'll send you a confirmation shortly.",{icon:e.jsx(us,{className:"h-5 w-5"})}),x(1),s(void 0),r(""),o(""),u({name:"",phone:"",email:"",notes:""})}catch(y){console.error("Failed to book appointment",y),D.error("Failed to book appointment. Please try again.")}},p=Wh.find(g=>g.id.toString()===a);return e.jsxs("div",{className:"space-y-6 max-w-4xl mx-auto",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Book an Appointment"}),e.jsx("p",{className:"text-muted-foreground",children:"Schedule your service in 3 easy steps"})]}),e.jsx("div",{className:"flex justify-between items-center mb-8",children:[1,2,3].map(g=>e.jsxs("div",{className:"flex items-center flex-1",children:[e.jsx("div",{className:`flex items-center justify-center w-10 h-10 rounded-full font-bold ${f>=g?"bg-primary text-primary-foreground":"bg-muted text-muted-foreground"}`,children:g}),g<3&&e.jsx("div",{className:`flex-1 h-1 mx-2 ${f>g?"bg-primary":"bg-muted"}`})]},g))}),e.jsxs("form",{onSubmit:h,className:"space-y-6",children:[f===1&&e.jsxs(K,{children:[e.jsxs(xe,{children:[e.jsxs(pe,{className:"flex items-center gap-2",children:[e.jsx(la,{className:"h-5 w-5"}),"Choose Your Service"]}),e.jsx(ot,{children:"Select the service you'd like to book"})]}),e.jsx(Y,{className:"space-y-4",children:e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:Wh.map(g=>e.jsx(K,{className:`cursor-pointer transition-all ${a===g.id.toString()?"border-primary ring-2 ring-primary":"hover:border-primary/50"}`,onClick:()=>r(g.id.toString()),children:e.jsxs(xe,{children:[e.jsx(pe,{className:"text-lg",children:g.name}),e.jsxs(ot,{className:"flex justify-between",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(ts,{className:"h-4 w-4"}),g.duration]}),e.jsxs("span",{className:"font-bold text-primary",children:["KES ",g.price.toLocaleString()]})]})]})},g.id))})}),e.jsx(wo,{children:e.jsx(R,{type:"button",onClick:()=>x(2),disabled:!a,className:"w-full",children:"Continue to Date & Time"})})]}),f===2&&e.jsxs(K,{children:[e.jsxs(xe,{children:[e.jsxs(pe,{className:"flex items-center gap-2",children:[e.jsx(gs,{className:"h-5 w-5"}),"Select Date & Time"]}),e.jsx(ot,{children:"Choose your preferred appointment slot"})]}),e.jsx(Y,{className:"space-y-6",children:e.jsxs("div",{className:"flex flex-col lg:flex-row gap-6",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx(te,{children:"Select Date"}),e.jsx(CA,{mode:"single",selected:t,onSelect:s,disabled:g=>g<new Date,className:"rounded-md border mt-2"})]}),e.jsxs("div",{className:"flex-1 space-y-4",children:[e.jsxs("div",{children:[e.jsx(te,{children:"Select Time"}),e.jsxs(Mt,{value:i,onValueChange:o,children:[e.jsx(Lt,{className:"mt-2",children:e.jsx(Ft,{placeholder:"Choose a time slot"})}),e.jsx(It,{children:bK.map(g=>e.jsx(Ae,{value:g,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ts,{className:"h-4 w-4"}),g]})},g))})]})]}),p&&t&&i&&e.jsxs(K,{className:"bg-accent",children:[e.jsx(xe,{children:e.jsx(pe,{className:"text-base",children:"Booking Summary"})}),e.jsxs(Y,{className:"space-y-2 text-sm",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Service:"})," ",p.name]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Date:"})," ",t.toLocaleDateString()]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Time:"})," ",i]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Duration:"})," ",p.duration]}),e.jsxs("p",{className:"text-lg font-bold text-primary mt-2",children:["Total: KES ",p.price.toLocaleString()]})]})]})]})]})}),e.jsxs(wo,{className:"flex gap-4",children:[e.jsx(R,{type:"button",variant:"outline",onClick:()=>x(1),className:"flex-1",children:"Back"}),e.jsx(R,{type:"button",onClick:()=>x(3),disabled:!t||!i,className:"flex-1",children:"Continue to Contact Info"})]})]}),f===3&&e.jsxs(K,{children:[e.jsxs(xe,{children:[e.jsxs(pe,{className:"flex items-center gap-2",children:[e.jsx(la,{className:"h-5 w-5"}),"Your Contact Information"]}),e.jsx(ot,{children:"We'll use this to confirm your appointment"})]}),e.jsxs(Y,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(te,{htmlFor:"name",children:"Full Name *"}),e.jsx(me,{id:"name",placeholder:"John Doe",value:c.name,onChange:g=>u({...c,name:g.target.value}),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(te,{htmlFor:"phone",children:"Phone Number *"}),e.jsxs("div",{className:"relative",children:[e.jsx(Ws,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),e.jsx(me,{id:"phone",placeholder:"0712345678",className:"pl-10",value:c.phone,onChange:g=>u({...c,phone:g.target.value}),required:!0})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(te,{htmlFor:"email",children:"Email Address *"}),e.jsxs("div",{className:"relative",children:[e.jsx(Ks,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),e.jsx(me,{id:"email",type:"email",placeholder:"john@example.com",className:"pl-10",value:c.email,onChange:g=>u({...c,email:g.target.value}),required:!0})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(te,{htmlFor:"notes",children:"Additional Notes (Optional)"}),e.jsx(As,{id:"notes",placeholder:"Any special requests or requirements...",value:c.notes,onChange:g=>u({...c,notes:g.target.value}),rows:4})]})]}),e.jsxs(wo,{className:"flex gap-4",children:[e.jsx(R,{type:"button",variant:"outline",onClick:()=>x(2),className:"flex-1",children:"Back"}),e.jsxs(R,{type:"submit",className:"flex-1",children:[e.jsx(us,{className:"h-4 w-4 mr-2"}),"Confirm Booking"]})]})]})]})]})},yS=[{id:1,service:"Premium Hair Treatment",date:"2025-10-15",time:"10:00 AM",duration:"1 hour",status:"confirmed",price:2500,location:"Main Branch",staff:"Sarah Johnson"},{id:2,service:"Spa Package",date:"2025-10-20",time:"02:00 PM",duration:"2 hours",status:"pending",price:5e3,location:"Downtown Branch",staff:"Michael Chen"},{id:3,service:"Manicure & Pedicure",date:"2025-09-28",time:"11:00 AM",duration:"45 min",status:"completed",price:1500,location:"Main Branch",staff:"Emily Davis"}],SK=()=>{const t=o=>{switch(o){case"confirmed":return e.jsxs(De,{className:"bg-success",children:[e.jsx(us,{className:"h-3 w-3 mr-1"}),"Confirmed"]});case"pending":return e.jsxs(De,{variant:"secondary",children:[e.jsx(ks,{className:"h-3 w-3 mr-1"}),"Pending"]});case"completed":return e.jsxs(De,{variant:"outline",children:[e.jsx(us,{className:"h-3 w-3 mr-1"}),"Completed"]});case"cancelled":return e.jsxs(De,{variant:"destructive",children:[e.jsx(Sr,{className:"h-3 w-3 mr-1"}),"Cancelled"]});default:return e.jsx(De,{children:o})}},s=o=>{D.success("Booking cancelled successfully")},a=o=>{D.info("Reschedule feature coming soon!")},r=yS.filter(o=>o.status!=="completed"&&o.status!=="cancelled"),i=yS.filter(o=>o.status==="completed"||o.status==="cancelled");return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"My Bookings"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage your appointments and view history"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h2",{className:"text-xl font-semibold text-foreground",children:"Upcoming Appointments"}),r.length>0?e.jsx("div",{className:"grid grid-cols-1 gap-4",children:r.map(o=>e.jsxs(K,{className:"card-hover",children:[e.jsx(xe,{children:e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsxs("div",{children:[e.jsx(pe,{className:"text-xl",children:o.service}),e.jsxs(ot,{className:"mt-1",children:["Booking ID: #",o.id.toString().padStart(4,"0")]})]}),t(o.status)]})}),e.jsxs(Y,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[e.jsx(gs,{className:"h-4 w-4"}),e.jsx("span",{children:new Date(o.date).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]}),e.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[e.jsx(ts,{className:"h-4 w-4"}),e.jsxs("span",{children:[o.time," (",o.duration,")"]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[e.jsx(Yr,{className:"h-4 w-4"}),e.jsx("span",{children:o.location})]}),e.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[e.jsx(Ws,{className:"h-4 w-4"}),e.jsxs("span",{children:["Staff: ",o.staff]})]})]}),e.jsx(Pn,{}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsxs("div",{className:"text-xl font-bold text-primary",children:["Total: KES ",o.price.toLocaleString()]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(R,{variant:"outline",onClick:()=>a(o.id),children:"Reschedule"}),o.status!=="completed"&&e.jsx(R,{variant:"destructive",onClick:()=>s(o.id),children:"Cancel"})]})]})]})]},o.id))}):e.jsx(K,{children:e.jsxs(Y,{className:"py-12 text-center",children:[e.jsx(gs,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"No upcoming bookings"}),e.jsx(R,{className:"mt-4",children:"Book an Appointment"})]})})]}),i.length>0&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("h2",{className:"text-xl font-semibold text-foreground",children:"Past Appointments"}),e.jsx("div",{className:"grid grid-cols-1 gap-4",children:i.map(o=>e.jsxs(K,{className:"opacity-75",children:[e.jsx(xe,{children:e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsxs("div",{children:[e.jsx(pe,{className:"text-lg",children:o.service}),e.jsxs(ot,{children:[new Date(o.date).toLocaleDateString()," at ",o.time]})]}),t(o.status)]})}),e.jsx(Y,{children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:o.location}),e.jsxs("span",{className:"font-semibold",children:["KES ",o.price.toLocaleString()]})]})})]},o.id))})]})]})},CK=()=>{const t=Ka(),{inviteCode:s}=el(),{login:a}=pd(),[r,i]=v.useState(!1),[o,c]=v.useState(!1),[u,f]=v.useState({email:"",password:""}),x=p=>{f({...u,[p.target.name]:p.target.value})},h=async p=>{p.preventDefault(),c(!0);try{(await a(u)).success&&(D.success("Welcome Back! Successfully logged in"),t(s?`/client/store/${s}`:"/client/store"))}catch(g){console.error("Login error:",g)}finally{c(!1)}};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-primary/5 via-background to-accent/5 flex items-center justify-center p-4",children:e.jsxs(K,{className:"w-full max-w-md shadow-lg border-primary/10",children:[e.jsxs(xe,{className:"space-y-4 text-center",children:[e.jsx("div",{className:"mx-auto h-16 w-16 rounded-full bg-primary/10 flex items-center justify-center",children:e.jsx(gr,{className:"h-8 w-8 text-primary"})}),e.jsxs("div",{children:[e.jsx(pe,{className:"text-2xl",children:"Welcome Back! "}),e.jsx(ot,{className:"mt-2",children:"Log in to continue shopping"})]})]}),e.jsx(Y,{children:e.jsxs("form",{onSubmit:h,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(te,{htmlFor:"email",children:"Email"}),e.jsxs("div",{className:"relative",children:[e.jsx(Ks,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-500"}),e.jsx(me,{id:"email",name:"email",type:"email",placeholder:"john@example.com",value:u.email,onChange:x,className:"pl-10",required:!0})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(te,{htmlFor:"password",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(gr,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-500"}),e.jsx(me,{id:"password",name:"password",type:r?"text":"password",placeholder:"",value:u.password,onChange:x,className:"pl-10 pr-10",required:!0}),e.jsx("button",{type:"button",onClick:()=>i(!r),className:"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground transition-colors",children:r?e.jsx(ko,{className:"h-4 w-4"}):e.jsx(ca,{className:"h-4 w-4"})})]})]}),e.jsx(R,{type:"submit",className:"w-full gap-2",disabled:o,children:o?"Logging In...":e.jsxs(e.Fragment,{children:[e.jsx(gr,{className:"h-4 w-4"}),"Log In"]})}),e.jsxs("div",{className:"text-xs text-center text-muted-foreground",children:["Don't have an account?"," ",e.jsxs(qt,{to:`/client/signup/${s}`,className:"text-primary hover:underline inline-flex items-center gap-1 ml-1",children:[e.jsx(yo,{className:"h-3 w-3"}),"Sign Up"]})]}),e.jsx("div",{className:"pt-4 border-t",children:e.jsxs("p",{className:"text-xs text-center text-muted-foreground",children:[e.jsx(gr,{className:"inline h-3 w-3 mr-1"})," Secure Login  Your data is protected"]})})]})})]})})},TK=()=>{const{customer:t}=pd(),{socket:s,connected:a}=ha(),[r,i]=v.useState(null),[o,c]=v.useState([]),[u,f]=v.useState(""),[x,h]=v.useState(!1),[p,g]=v.useState({}),y=v.useRef(null);v.useEffect(()=>{t&&N()},[t]),v.useEffect(()=>(r&&s&&a&&(s.emit("join_conversation",r.id),b()),()=>{r&&s&&(s.emit("leave_conversation",r.id),s.off("message_received"),s.off("user_typing"),s.off("user_stopped_typing"))}),[r,s,a]),v.useEffect(()=>{A()},[o]);const b=()=>{s&&(s.on("message_received",F=>{r&&F.conversationId===r.id&&c(E=>[...E,F])}),s.on("user_typing",({conversationId:F,userId:E,userName:T})=>{r?.id===F&&E!==t._id&&g(_=>({..._,[E]:T}))}),s.on("user_stopped_typing",({conversationId:F,userId:E})=>{r?.id===F&&g(T=>{const _={...T};return delete _[E],_})}))},N=async()=>{try{const F=localStorage.getItem("customerToken");if(!F){console.log("No customer token found");return}const E=await Ne.get("/messages/conversations",{headers:{Authorization:`Bearer ${F}`}});if(E.data.conversations&&E.data.conversations.length>0){const T=E.data.conversations[0];i(T),S(T.id)}else i({id:null,name:"Business Owner",isOnline:!1})}catch(F){console.error("Error loading conversation:",F),i({id:null,name:"Business Owner",isOnline:!1})}},S=async F=>{try{const E=localStorage.getItem("customerToken"),T=await Ne.get(`/messages/conversations/${F}`,{headers:{Authorization:`Bearer ${E}`}});c(T.data.messages||[])}catch(E){console.error("Error loading messages:",E)}},C=async F=>{if(F.preventDefault(),!u.trim()||!t)return;const E=u.trim(),T=Date.now(),_={id:T,conversationId:r?.id,senderId:t._id,senderName:t.name,content:E,timestamp:new Date,status:"sending"};c(P=>[...P,_]),f("");try{const P=localStorage.getItem("customerToken");if(r?.id)s&&a?s.emit("send_message",{conversationId:r.id,message:E,senderId:t._id,senderName:t.name}):await Ne.post("/messages/send",{conversationId:r.id,content:E},{headers:{Authorization:`Bearer ${P}`}}),c(z=>z.map(V=>V.id===T?{...V,status:"sent"}:V));else{const z=await Ne.post("/messages/conversations",{businessOwnerId:t.invitedBy,customerName:t.name,customerEmail:t.email,customerPhone:t.phone},{headers:{Authorization:`Bearer ${P}`}});if(z.data.success){const V=z.data.conversation;i({id:V.id,name:"Business Owner",isOnline:!1}),await Ne.post("/messages/send",{conversationId:V.id,content:E},{headers:{Authorization:`Bearer ${P}`}}),c(W=>W.map(q=>q.id===T?{...q,status:"sent",conversationId:V.id}:q)),s&&a&&s.emit("join_conversation",V.id)}}}catch(P){console.error("Error sending message:",P),D.error("Failed to send message"),c(z=>z.map(V=>V.id===T?{...V,status:"failed"}:V))}},k=()=>{!x&&r&&s&&(h(!0),s.emit("typing_start",{conversationId:r.id,userId:t._id,userName:t.name}),setTimeout(()=>{h(!1),s.emit("typing_stop",{conversationId:r.id,userId:t._id})},3e3))},A=()=>{y.current?.scrollIntoView({behavior:"smooth"})},G=F=>{switch(F){case"sent":return e.jsx(yi,{className:"h-3 w-3"});case"delivered":return e.jsx(ei,{className:"h-3 w-3"});case"read":return e.jsx(ei,{className:"h-3 w-3 text-blue-500"});default:return e.jsx(ts,{className:"h-3 w-3"})}};return t?e.jsxs("div",{className:"h-screen p-4 md:p-6",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("h1",{className:"text-2xl md:text-3xl font-bold",children:"Messages"}),e.jsxs("p",{className:"text-muted-foreground",children:["Chat with ",r?.name||"Business Owner","  ",a?" Connected":" Offline"]})]}),e.jsx(K,{className:"h-[calc(100vh-12rem)] flex flex-col",children:r?e.jsxs(e.Fragment,{children:[e.jsx(xe,{className:"border-b py-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(hr,{className:"h-10 w-10",children:e.jsx(fr,{children:r.name[0]})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:r.name}),e.jsx("p",{className:"text-xs text-muted-foreground",children:r.isOnline?"Active now":"Offline"})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(R,{variant:"ghost",size:"icon",onClick:()=>D.info("Voice call - Coming soon"),children:e.jsx(Ws,{className:"h-4 w-4"})}),e.jsx(R,{variant:"ghost",size:"icon",onClick:()=>D.info("Video call - Coming soon"),children:e.jsx(Aa,{className:"h-4 w-4"})}),e.jsx(R,{variant:"ghost",size:"icon",children:e.jsx(Nv,{className:"h-4 w-4"})})]})]})}),e.jsx(Y,{className:"flex-1 p-4 overflow-hidden",children:e.jsx(kr,{className:"h-full pr-4",children:e.jsxs("div",{className:"space-y-4",children:[o.map(F=>{const E=F.senderId===t._id;return e.jsx("div",{className:`flex ${E?"justify-end":"justify-start"}`,children:e.jsxs("div",{className:`max-w-[70%] rounded-lg p-3 ${E?"bg-primary text-primary-foreground":"bg-muted"}`,children:[!E&&e.jsx("p",{className:"text-xs font-semibold mb-1",children:F.senderName}),e.jsx("p",{className:"text-sm",children:F.content}),e.jsxs("div",{className:"flex items-center gap-1 mt-1 justify-end",children:[e.jsx("span",{className:"text-xs opacity-70",children:new Date(F.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}),E&&G(F.status)]})]})},F.id)}),Object.keys(p).length>0&&e.jsx("div",{className:"flex justify-start",children:e.jsx("div",{className:"bg-muted rounded-lg p-3",children:e.jsxs("div",{className:"flex gap-1",children:[e.jsx("div",{className:"w-2 h-2 bg-gray-500 rounded-full animate-bounce"}),e.jsx("div",{className:"w-2 h-2 bg-gray-500 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),e.jsx("div",{className:"w-2 h-2 bg-gray-500 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})})}),e.jsx("div",{ref:y})]})})}),e.jsx("div",{className:"border-t p-4",children:e.jsxs("form",{onSubmit:C,className:"flex gap-2",children:[e.jsx(R,{type:"button",variant:"ghost",size:"icon",children:e.jsx(Yc,{className:"h-5 w-5"})}),e.jsx(me,{value:u,onChange:F=>{f(F.target.value),k()},placeholder:"Type a message...",className:"flex-1"}),e.jsx(R,{type:"button",variant:"ghost",size:"icon",children:e.jsx(bv,{className:"h-5 w-5"})}),e.jsx(R,{type:"submit",disabled:!u.trim(),children:e.jsx(Fa,{className:"h-4 w-4"})})]})})]}):e.jsx("div",{className:"flex-1 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(ta,{className:"h-16 w-16 text-muted-foreground mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No Conversation"}),e.jsx("p",{className:"text-muted-foreground",children:"Start a conversation with the business owner"})]})})})]}):e.jsx("div",{className:"flex items-center justify-center h-screen",children:e.jsx(K,{className:"p-6",children:e.jsx("p",{className:"text-muted-foreground",children:"Please log in to access messages"})})})},EK=()=>{const{socket:t}=ha(),[s,a]=v.useState([]),[r,i]=v.useState(!0),[o,c]=v.useState(!1),[u,f]=v.useState(null),[x,h]=v.useState({title:"",description:"",sessionType:"meeting",scheduledStartTime:"",scheduledEndTime:"",participants:[],maxParticipants:100,enableRecording:!1,waitingRoomEnabled:!1}),[p,g]=v.useState({email:"",name:""});v.useEffect(()=>{y()},[]),v.useEffect(()=>{if(t)return t.on("session_started",F),t.on("session_ended",E),t.on("participant_joined",T),()=>{t.off("session_started"),t.off("session_ended"),t.off("participant_joined")}},[t]);const y=async()=>{try{const W=localStorage.getItem("token"),q=await Ne.get("/sessions",{headers:{Authorization:`Bearer ${W}`}});a(q.data)}catch(W){console.error("Fetch sessions error:",W),D.error("Failed to load sessions")}finally{i(!1)}},b=async()=>{try{const W=localStorage.getItem("token"),q=await Ne.post("/sessions",x,{headers:{Authorization:`Bearer ${W}`}});a([q.data,...s]),c(!1),G(),D.success("Session created and invitations sent!")}catch(W){console.error("Create session error:",W),D.error(W.response?.data?.error||"Failed to create session")}},N=async W=>{try{const q=localStorage.getItem("token"),B=await Ne.post(`/sessions/${W}/start`,{},{headers:{Authorization:`Bearer ${q}`}});a(s.map(ae=>ae._id===W?B.data:ae)),D.success("Session started! Participants have been notified.")}catch(q){D.error(q.response?.data?.error||"Failed to start session")}},S=async W=>{try{const q=localStorage.getItem("token"),B=await Ne.post(`/sessions/${W}/end`,{},{headers:{Authorization:`Bearer ${q}`}});a(s.map(ae=>ae._id===W?B.data:ae)),D.success("Session ended")}catch(q){D.error(q.response?.data?.error||"Failed to end session")}},C=W=>{const B=`${window.location.origin}/session/join/${W.accessLink}`;navigator.clipboard.writeText(B),f(W._id),D.success("Link copied to clipboard!"),setTimeout(()=>f(null),2e3)},k=()=>{if(!p.email||!p.name){D.error("Email and name are required");return}h({...x,participants:[...x.participants,p]}),g({email:"",name:""})},A=W=>{h({...x,participants:x.participants.filter((q,B)=>B!==W)})},G=()=>{h({title:"",description:"",sessionType:"meeting",scheduledStartTime:"",scheduledEndTime:"",participants:[],maxParticipants:100,enableRecording:!1,waitingRoomEnabled:!1})},F=W=>{D.success(`Session "${W.title}" has started!`),y()},E=W=>{D.info("Session has ended"),y()},T=W=>{D.info(`${W.participant.name} joined the session`)},_=W=>{const q={scheduled:"default",live:"destructive",ended:"secondary",cancelled:"outline"};return e.jsx(De,{variant:q[W],children:W.toUpperCase()})},P=s.filter(W=>W.status==="scheduled"&&new Date(W.scheduledStartTime)>new Date),z=s.filter(W=>W.status==="live"),V=s.filter(W=>W.status==="ended");return e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Live Sessions & Webinars"}),e.jsx("p",{className:"text-muted-foreground",children:"Schedule and manage video sessions with clients"})]}),e.jsxs(R,{onClick:()=>c(!0),children:[e.jsx(Aa,{className:"w-4 h-4 mr-2"}),"Schedule Session"]})]}),e.jsxs(ja,{defaultValue:"upcoming",children:[e.jsxs(Sa,{children:[e.jsxs(ft,{value:"upcoming",children:["Upcoming (",P.length,")"]}),e.jsxs(ft,{value:"live",children:["Live (",z.length,")"]}),e.jsxs(ft,{value:"past",children:["Past (",V.length,")"]})]}),e.jsxs(pt,{value:"upcoming",className:"space-y-4",children:[P.map(W=>e.jsxs(K,{children:[e.jsx(xe,{children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx(pe,{children:W.title}),e.jsx(ot,{children:W.description})]}),_(W.status)]})}),e.jsxs(Y,{children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(gs,{className:"w-4 h-4"}),e.jsx("span",{children:new Date(W.scheduledStartTime).toLocaleDateString()})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ts,{className:"w-4 h-4"}),e.jsx("span",{children:new Date(W.scheduledStartTime).toLocaleTimeString()})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Zt,{className:"w-4 h-4"}),e.jsxs("span",{children:[W.participants.length," participants"]})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx(De,{variant:"outline",children:W.sessionType})})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(R,{variant:"default",onClick:()=>N(W._id),disabled:!kK(W),children:[e.jsx(zc,{className:"w-4 h-4 mr-2"}),"Start Session"]}),e.jsxs(R,{variant:"outline",onClick:()=>C(W),children:[u===W._id?e.jsx(yi,{className:"w-4 h-4 mr-2"}):e.jsx(lg,{className:"w-4 h-4 mr-2"}),"Copy Link"]})]})]})]},W._id)),P.length===0&&e.jsx(K,{children:e.jsxs(Y,{className:"text-center py-12",children:[e.jsx(gs,{className:"w-12 h-12 mx-auto text-muted-foreground mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"No upcoming sessions"})]})})]}),e.jsxs(pt,{value:"live",className:"space-y-4",children:[z.map(W=>e.jsxs(K,{className:"border-green-500",children:[e.jsx(xe,{children:e.jsx("div",{className:"flex justify-between items-start",children:e.jsx("div",{children:e.jsxs(pe,{className:"flex items-center gap-2",children:[W.title,e.jsx(De,{variant:"destructive",className:"animate-pulse",children:"LIVE"})]})})})}),e.jsx(Y,{children:e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(R,{variant:"default",onClick:()=>window.open(`/session/join/${W.accessLink}`,"_blank"),children:[e.jsx(Aa,{className:"w-4 h-4 mr-2"}),"Join Session"]}),e.jsxs(R,{variant:"destructive",onClick:()=>S(W._id),children:[e.jsx(A6,{className:"w-4 h-4 mr-2"}),"End Session"]}),e.jsxs(R,{variant:"outline",onClick:()=>C(W),children:[e.jsx(Gc,{className:"w-4 h-4 mr-2"}),"Share"]})]})})]},W._id)),z.length===0&&e.jsx(K,{children:e.jsxs(Y,{className:"text-center py-12",children:[e.jsx(Aa,{className:"w-12 h-12 mx-auto text-muted-foreground mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"No live sessions"})]})})]}),e.jsx(pt,{value:"past",className:"space-y-4",children:V.slice(0,10).map(W=>e.jsxs(K,{children:[e.jsxs(xe,{children:[e.jsx(pe,{children:W.title}),e.jsxs(ot,{children:[new Date(W.actualStartTime).toLocaleString()," - ",W.totalDuration?`${Math.floor(W.totalDuration/60)} min`:"N/A"]})]}),e.jsx(Y,{children:e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Peak participants: ",W.peakParticipants]})})]},W._id))})]}),e.jsx(Bt,{open:o,onOpenChange:c,children:e.jsxs(zt,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(Ut,{children:[e.jsx(Vt,{children:"Schedule a Live Session"}),e.jsx(es,{children:"Create a video session or webinar with clients"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(te,{children:"Title *"}),e.jsx(me,{value:x.title,onChange:W=>h({...x,title:W.target.value}),placeholder:"e.g., Product Demo, Support Call, Training"})]}),e.jsxs("div",{children:[e.jsx(te,{children:"Description"}),e.jsx(As,{value:x.description,onChange:W=>h({...x,description:W.target.value}),placeholder:"What is this session about?",rows:3})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(te,{children:"Session Type"}),e.jsxs(Mt,{value:x.sessionType,onValueChange:W=>h({...x,sessionType:W}),children:[e.jsx(Lt,{children:e.jsx(Ft,{})}),e.jsxs(It,{children:[e.jsx(Ae,{value:"meeting",children:"Meeting"}),e.jsx(Ae,{value:"webinar",children:"Webinar"}),e.jsx(Ae,{value:"support_call",children:"Support Call"}),e.jsx(Ae,{value:"training",children:"Training"}),e.jsx(Ae,{value:"demo",children:"Demo"}),e.jsx(Ae,{value:"consultation",children:"Consultation"})]})]})]}),e.jsxs("div",{children:[e.jsx(te,{children:"Max Participants"}),e.jsx(me,{type:"number",value:x.maxParticipants,onChange:W=>h({...x,maxParticipants:parseInt(W.target.value)})})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(te,{children:"Start Time *"}),e.jsx(me,{type:"datetime-local",value:x.scheduledStartTime,onChange:W=>h({...x,scheduledStartTime:W.target.value})})]}),e.jsxs("div",{children:[e.jsx(te,{children:"End Time *"}),e.jsx(me,{type:"datetime-local",value:x.scheduledEndTime,onChange:W=>h({...x,scheduledEndTime:W.target.value})})]})]}),e.jsxs("div",{children:[e.jsx(te,{children:"Add Participants"}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsx(me,{placeholder:"Email",value:p.email,onChange:W=>g({...p,email:W.target.value})}),e.jsx(me,{placeholder:"Name",value:p.name,onChange:W=>g({...p,name:W.target.value})}),e.jsx(R,{onClick:k,children:e.jsx(yo,{className:"w-4 h-4"})})]}),x.participants.length>0&&e.jsx("div",{className:"space-y-2",children:x.participants.map((W,q)=>e.jsxs("div",{className:"flex justify-between items-center p-2 bg-secondary rounded",children:[e.jsxs("span",{children:[W.name," (",W.email,")"]}),e.jsx(R,{variant:"ghost",size:"sm",onClick:()=>A(q),children:""})]},q))})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs(R,{onClick:b,className:"flex-1",children:[e.jsx(Ks,{className:"w-4 h-4 mr-2"}),"Create & Send Invites"]}),e.jsx(R,{variant:"outline",onClick:()=>c(!1),children:"Cancel"})]})]})]})})]})},kK=t=>{const s=new Date,a=new Date(t.scheduledStartTime),r=new Date(a.getTime()-900*1e3);return s>=r&&t.status==="scheduled"},AK=()=>{const{accessLink:t}=el(),s=Ka(),{socket:a}=ha(),[r,i]=v.useState(null),[o,c]=v.useState(!0),[u,f]=v.useState(!1),[x,h]=v.useState(!1),[p,g]=v.useState({email:"",name:"",password:""}),[y,b]=v.useState({videoEnabled:!0,audioEnabled:!0}),N=v.useRef(null),S=v.useRef({}),C=v.useRef({}),k=v.useRef(null);v.useEffect(()=>{A()},[t]),v.useEffect(()=>(x&&a&&(F(),E()),()=>{de()}),[x,a]);const A=async()=>{try{const H=await Ne.get(`/sessions/join/${t}`);i(H.data),c(!1)}catch(H){console.error("Fetch session error:",H),D.error("Session not found"),c(!1)}},G=async()=>{if(!p.email||!p.name){D.error("Email and name are required");return}f(!0);try{const H=await Ne.post(`/sessions/${t}/join`,p);if(H.data.status==="waiting"){D.info(H.data.message),f(!1);return}H.data.status==="joined"&&(h(!0),i(se=>({...se,...H.data.session})),D.success("Joined session successfully!"))}catch(H){console.error("Join session error:",H),D.error(H.response?.data?.error||"Failed to join session")}finally{f(!1)}},F=async()=>{try{const H=await navigator.mediaDevices.getUserMedia({video:y.videoEnabled,audio:y.audioEnabled});k.current=H,N.current&&(N.current.srcObject=H),a.emit("webrtc:join-room",{roomId:r.webrtcRoomId,userId:p.email,userName:p.name,callType:"video"})}catch(H){console.error("Media access error:",H),D.error("Failed to access camera/microphone")}},E=()=>{a.on("webrtc:joined-room",T),a.on("webrtc:user-joined",_),a.on("webrtc:offer",z),a.on("webrtc:answer",V),a.on("webrtc:ice-candidate",W),a.on("webrtc:user-left",q),a.on("session_ended",B)},T=H=>{console.log("Joined room:",H),H.participants.forEach(se=>{P(se.socketId,!0)})},_=H=>{console.log("User joined:",H),D.info(`${H.userName} joined`),P(H.socketId,!1)},P=async(H,se)=>{const ee=new RTCPeerConnection({iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:"stun:stun1.l.google.com:19302"}]});if(C.current[H]=ee,k.current&&k.current.getTracks().forEach(L=>{ee.addTrack(L,k.current)}),ee.ontrack=L=>{const[X]=L.streams;if(!S.current[H]){const O=document.createElement("video");O.autoplay=!0,O.srcObject=X,O.className="w-full h-full object-cover rounded",document.getElementById("remote-videos")?.appendChild(O),S.current[H]=O}},ee.onicecandidate=L=>{L.candidate&&a.emit("webrtc:ice-candidate",{to:H,candidate:L.candidate,roomId:r.webrtcRoomId})},se){const L=await ee.createOffer();await ee.setLocalDescription(L),a.emit("webrtc:offer",{to:H,offer:L,roomId:r.webrtcRoomId})}},z=async H=>{const se=C.current[H.from];if(se){await se.setRemoteDescription(new RTCSessionDescription(H.offer));const ee=await se.createAnswer();await se.setLocalDescription(ee),a.emit("webrtc:answer",{to:H.from,answer:ee,roomId:r.webrtcRoomId})}},V=async H=>{const se=C.current[H.from];se&&await se.setRemoteDescription(new RTCSessionDescription(H.answer))},W=async H=>{const se=C.current[H.from];se&&H.candidate&&await se.addIceCandidate(new RTCIceCandidate(H.candidate))},q=H=>{console.log("User left:",H),C.current[H.socketId]&&(C.current[H.socketId].close(),delete C.current[H.socketId]),S.current[H.socketId]&&(S.current[H.socketId].remove(),delete S.current[H.socketId])},B=()=>{D.info("Session has ended"),de(),s("/")},ae=()=>{if(k.current){const H=k.current.getVideoTracks()[0];H&&(H.enabled=!H.enabled,b(se=>({...se,videoEnabled:H.enabled})),a.emit("webrtc:toggle-video",{enabled:H.enabled}))}},U=()=>{if(k.current){const H=k.current.getAudioTracks()[0];H&&(H.enabled=!H.enabled,b(se=>({...se,audioEnabled:H.enabled})),a.emit("webrtc:toggle-audio",{enabled:H.enabled}))}},Z=()=>{a.emit("webrtc:end-call"),de(),s("/")},de=()=>{k.current&&(k.current.getTracks().forEach(H=>H.stop()),k.current=null),Object.values(C.current).forEach(H=>H.close()),C.current={},Object.values(S.current).forEach(H=>H.remove()),S.current={}};return o?e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsx(qn,{className:"w-8 h-8 animate-spin"})}):r?x?e.jsxs("div",{className:"h-screen bg-black flex flex-col",children:[e.jsxs("div",{className:"flex-1 grid grid-cols-2 gap-2 p-4",children:[e.jsxs("div",{className:"relative bg-gray-900 rounded-lg overflow-hidden",children:[e.jsx("video",{ref:N,autoPlay:!0,muted:!0,playsInline:!0,className:"w-full h-full object-cover"}),e.jsx("div",{className:"absolute bottom-2 left-2 bg-black/50 px-2 py-1 rounded text-white text-sm",children:"You"})]}),e.jsx("div",{id:"remote-videos",className:"grid grid-cols-2 gap-2"})]}),e.jsxs("div",{className:"bg-gray-900 p-4 flex items-center justify-between",children:[e.jsxs("div",{className:"text-white",children:[e.jsx("h3",{className:"font-semibold",children:r.title}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Hosted by ",r.host?.name]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(R,{variant:y.audioEnabled?"default":"destructive",size:"icon",onClick:U,children:y.audioEnabled?e.jsx(lf,{className:"w-4 h-4"}):e.jsx(nf,{className:"w-4 h-4"})}),e.jsx(R,{variant:y.videoEnabled?"default":"destructive",size:"icon",onClick:ae,children:y.videoEnabled?e.jsx(Aa,{className:"w-4 h-4"}):e.jsx(ug,{className:"w-4 h-4"})}),e.jsxs(R,{variant:"destructive",onClick:Z,children:[e.jsx(Ws,{className:"w-4 h-4 mr-2"}),"Leave"]})]})]})]}):e.jsx("div",{className:"flex items-center justify-center min-h-screen p-4",children:e.jsxs(K,{className:"max-w-md w-full",children:[e.jsxs(xe,{children:[e.jsx(pe,{children:r.title}),e.jsx(ot,{children:r.description})]}),e.jsxs(Y,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(ts,{className:"w-4 h-4"}),e.jsx("span",{children:new Date(r.scheduledStartTime).toLocaleString()})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(Zt,{className:"w-4 h-4"}),e.jsxs("span",{children:[r.currentParticipants," / ",r.maxParticipants," participants"]})]}),e.jsx(De,{children:r.sessionType}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx(te,{children:"Your Name *"}),e.jsx(me,{value:p.name,onChange:H=>g({...p,name:H.target.value}),placeholder:"Enter your name"})]}),e.jsxs("div",{children:[e.jsx(te,{children:"Your Email *"}),e.jsx(me,{type:"email",value:p.email,onChange:H=>g({...p,email:H.target.value}),placeholder:"your@email.com"})]}),r.requiresPassword&&e.jsxs("div",{children:[e.jsx(te,{children:"Session Password"}),e.jsx(me,{type:"password",value:p.password,onChange:H=>g({...p,password:H.target.value}),placeholder:"Enter password"})]}),e.jsxs(R,{onClick:G,disabled:u,className:"w-full",children:[u?e.jsx(qn,{className:"w-4 h-4 mr-2 animate-spin"}):e.jsx(Aa,{className:"w-4 h-4 mr-2"}),"Join Session"]})]})]})]})}):e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsx(K,{className:"max-w-md",children:e.jsxs(xe,{children:[e.jsx(ks,{className:"w-12 h-12 mx-auto text-destructive mb-4"}),e.jsx(pe,{children:"Session Not Found"}),e.jsx(ot,{children:"This session link is invalid or has expired"})]})})})},_K=()=>{const{socket:t,connected:s}=ha(),{user:a}=_s(),[r,i]=v.useState([]),[o,c]=v.useState(0),[u,f]=v.useState(!1);v.useEffect(()=>{if(!(!t||!a))return t.on("new_message_notification",S=>{const C={id:Date.now(),type:"message",title:"New Message",message:`${S.from}: ${S.preview}`,timestamp:new Date,read:!1,data:S};x(C),D.info(e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(ta,{className:"h-5 w-5 text-blue-500 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:S.from}),e.jsx("p",{className:"text-sm text-muted-foreground",children:S.preview})]})]}),{duration:5e3})}),t.on("message_received",S=>{if(S.senderId!==a._id){const C={id:Date.now(),type:"message",title:"Message Reply",message:`${S.senderName}: ${S.content.substring(0,50)}${S.content.length>50?"...":""}`,timestamp:new Date(S.timestamp),read:!1,data:{conversationId:S.conversationId,messageId:S.id}};x(C),D.info(e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(ta,{className:"h-5 w-5 text-blue-500 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:S.senderName}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[S.content.substring(0,50),S.content.length>50?"...":""]})]})]}),{duration:5e3})}}),t.on("order_notification",S=>{const C={id:Date.now(),type:"order",title:"Order Update",message:`Order #${S.orderNumber||"N/A"} - ${S.status||"Updated"}`,timestamp:new Date,read:!1,data:S};x(C),D.success(e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(ws,{className:"h-5 w-5 text-green-500 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:"Order Update"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:C.message})]})]}),{duration:5e3})}),t.on("system_notification",S=>{const C={id:Date.now(),type:"system",title:S.title||"System Alert",message:S.message,timestamp:new Date,read:!1,data:S};x(C),D(e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Pr,{className:"h-5 w-5 text-orange-500 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:C.title}),e.jsx("p",{className:"text-sm text-muted-foreground",children:C.message})]})]}),{duration:5e3})}),()=>{t.off("new_message_notification"),t.off("message_received"),t.off("order_notification"),t.off("system_notification")}},[t,a]);const x=S=>{i(C=>[S,...C].slice(0,50)),c(C=>C+1)},h=S=>{i(C=>C.map(k=>k.id===S?{...k,read:!0}:k)),c(C=>Math.max(0,C-1))},p=()=>{i(S=>S.map(C=>({...C,read:!0}))),c(0)},g=S=>{const C=r.find(k=>k.id===S);i(k=>k.filter(A=>A.id!==S)),C&&!C.read&&c(k=>Math.max(0,k-1))},y=()=>{i([]),c(0)},b=S=>{switch(S){case"message":return e.jsx(ta,{className:"h-5 w-5 text-blue-500"});case"order":return e.jsx(ws,{className:"h-5 w-5 text-green-500"});case"appointment":return e.jsx(gs,{className:"h-5 w-5 text-purple-500"});default:return e.jsx(Pr,{className:"h-5 w-5 text-orange-500"})}},N=S=>{S.read||h(S.id)};return e.jsxs(V4,{open:u,onOpenChange:f,children:[e.jsx($4,{asChild:!0,children:e.jsxs(R,{variant:"ghost",size:"icon",className:"relative",children:[e.jsx(Pr,{className:"h-5 w-5"}),o>0&&e.jsx(De,{className:"absolute -top-1 -right-1 h-5 w-5 flex items-center justify-center p-0 text-xs",variant:"destructive",children:o>9?"9+":o})]})}),e.jsxs(Av,{className:"w-[380px] p-0",align:"end",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:"Notifications"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:o>0?`${o} unread`:"All caught up!"})]}),e.jsxs("div",{className:"flex gap-1",children:[o>0&&e.jsx(R,{variant:"ghost",size:"sm",onClick:p,className:"h-8 px-2 text-xs",children:e.jsx(ei,{className:"h-3 w-3"})}),r.length>0&&e.jsx(R,{variant:"ghost",size:"sm",onClick:y,className:"h-8 px-2 text-xs",children:e.jsx(ga,{className:"h-3 w-3"})}),e.jsx(R,{variant:"ghost",size:"sm",onClick:()=>f(!1),className:"h-8 px-2",children:e.jsx(jr,{className:"h-4 w-4"})})]})]}),r.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[e.jsx(Pr,{className:"h-12 w-12 text-muted-foreground mb-3 opacity-50"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"No notifications"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"You're all caught up!"})]}):e.jsx(kr,{className:"h-[400px]",children:e.jsx("div",{className:"p-2",children:r.map(S=>e.jsxs("div",{onClick:()=>N(S),className:`relative p-3 rounded-lg mb-2 cursor-pointer transition-colors ${S.read?"bg-background hover:bg-accent":"bg-primary/5 hover:bg-primary/10"}`,children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"mt-0.5",children:b(S.type)}),e.jsxs("div",{className:"flex-1 min-w-0 pr-6",children:[e.jsx("p",{className:"font-semibold text-sm",children:S.title}),e.jsx("p",{className:"text-sm text-muted-foreground mt-0.5 line-clamp-2",children:S.message}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:Xu(new Date(S.timestamp),{addSuffix:!0})})]}),e.jsx(R,{variant:"ghost",size:"icon",className:"absolute top-2 right-2 h-6 w-6",onClick:C=>{C.stopPropagation(),g(S.id)},children:e.jsx(jr,{className:"h-3 w-3"})})]}),!S.read&&e.jsx("div",{className:"absolute right-2 top-2 h-2 w-2 bg-primary rounded-full"})]},S.id))})})]})]})},DK=()=>{const{user:t}=_s(),{socket:s,connected:a}=ha(),[r,i]=v.useState([]),[o,c]=v.useState([]),[u,f]=v.useState(null),[x,h]=v.useState([]),[p,g]=v.useState(""),[y,b]=v.useState(""),[N,S]=v.useState(!1),[C,k]=v.useState({}),[A,G]=v.useState("conversations"),[F,E]=v.useState(!1),T=v.useRef(null),_=v.useRef(null);v.useEffect(()=>(V(),z(),P(),()=>{s&&(s.off("message_received"),s.off("user_typing"),s.off("user_stopped_typing"),s.off("message_sent"),s.off("new_message_notification"))}),[s]),v.useEffect(()=>(u&&(W(u.id),s&&a&&s.emit("join_conversation",u.id)),()=>{u&&s&&s.emit("leave_conversation",u.id)}),[u,s,a]),v.useEffect(()=>{Z()},[x]);const P=()=>{s&&(s.on("message_received",L=>{u&&L.conversationId===u.id&&(h(X=>[...X,L]),ae(L.id)),U(L)}),s.on("user_typing",({conversationId:L,userId:X,userName:O})=>{u?.id===L&&k(J=>({...J,[X]:O}))}),s.on("user_stopped_typing",({conversationId:L,userId:X})=>{u?.id===L&&k(O=>{const J={...O};return delete J[X],J})}),s.on("message_sent",L=>{h(X=>X.map(O=>O.id===L.id?{...O,status:"delivered"}:O))}),s.on("new_message_notification",L=>{D.info(`New message from ${L.from}`),V()}))},z=async()=>{try{const L=localStorage.getItem("token"),X=await Ne.get("/messages/customers",{headers:{Authorization:`Bearer ${L}`}});c(X.data.customers||[])}catch(L){console.error("Error fetching customers:",L),D.error("Failed to load customers")}},V=async()=>{try{const L=localStorage.getItem("token"),X=[{id:1,name:"Support Team",avatar:"",lastMessage:"How can we help you today?",lastMessageTime:new Date,unreadCount:0,isOnline:!0,type:"support"},{id:2,name:"Sales Department",avatar:"",lastMessage:"Your order has been processed",lastMessageTime:new Date(Date.now()-36e5),unreadCount:2,isOnline:!0,type:"team"},{id:3,name:"Team Chat",avatar:"",lastMessage:"Meeting at 3 PM",lastMessageTime:new Date(Date.now()-72e5),unreadCount:5,isOnline:!1,type:"group"}];try{const O=await Ne.get("/messages/conversations",{headers:{Authorization:`Bearer ${L}`}});i(O.data.conversations||[])}catch(O){console.error("Error loading conversations:",O),i([])}}catch(L){console.error("Error fetching conversations:",L),D.error("Failed to load conversations")}},W=async L=>{try{const X=localStorage.getItem("token"),O=[{id:1,conversationId:L,senderId:"other",senderName:r.find(J=>J.id===L)?.name||"Support",content:"Hello! How can I help you today?",timestamp:new Date(Date.now()-36e5),status:"read"},{id:2,conversationId:L,senderId:t._id,senderName:t.name,content:"Hi! I need some assistance.",timestamp:new Date(Date.now()-3e6),status:"read"},{id:3,conversationId:L,senderId:"other",senderName:r.find(J=>J.id===L)?.name||"Support",content:"Of course! What do you need help with?",timestamp:new Date(Date.now()-24e5),status:"delivered"}];try{const J=await Ne.get(`/messages/conversations/${L}`,{headers:{Authorization:`Bearer ${X}`}});h(J.data.messages||O)}catch{console.log("Using demo messages"),h(O)}}catch(X){console.error("Error fetching messages:",X),D.error("Failed to load messages")}},q=async L=>{if(L.preventDefault(),!p.trim()||!u)return;const X={id:Date.now(),conversationId:u.id,senderId:t._id,senderName:t.name,content:p,timestamp:new Date,status:"sending"};h(O=>[...O,X]),g("");try{const O=localStorage.getItem("token");s&&a?s.emit("send_message",{conversationId:u.id,message:p,senderId:t._id,senderName:t.name}):await Ne.post("/messages/send",{conversationId:u.id,content:p},{headers:{Authorization:`Bearer ${O}`}}),h(J=>J.map(ie=>ie.id===X.id?{...ie,status:"sent"}:ie))}catch(O){console.error("Error sending message:",O),D.error("Failed to send message"),h(J=>J.map(ie=>ie.id===X.id?{...ie,status:"failed"}:ie))}},B=()=>{!N&&u&&s&&(S(!0),s.emit("typing_start",{conversationId:u.id,userId:t._id,userName:t.name}),setTimeout(()=>{S(!1),s.emit("typing_stop",{conversationId:u.id,userId:t._id})},3e3))},ae=async L=>{try{const X=localStorage.getItem("token");await Ne.post(`/messages/${L}/read`,{},{headers:{Authorization:`Bearer ${X}`}})}catch(X){console.error("Error marking message as read:",X)}},U=L=>{i(X=>X.map(O=>O.id===L.conversationId?{...O,lastMessage:L.content,lastMessageTime:L.timestamp,unreadCount:O.id===u?.id?0:O.unreadCount+1}:O))},Z=()=>{T.current?.scrollIntoView({behavior:"smooth"})},de=L=>{switch(L){case"sent":return e.jsx(yi,{className:"h-3 w-3"});case"delivered":return e.jsx(ei,{className:"h-3 w-3"});case"read":return e.jsx(ei,{className:"h-3 w-3 text-blue-500"});default:return e.jsx(ts,{className:"h-3 w-3"})}},H=async L=>{try{E(!0);const X=localStorage.getItem("token");if(L.hasConversation&&L.conversationId){const J=r.find(ie=>ie.id===L.conversationId);if(J){f(J),G("conversations");return}}const O=await Ne.post("/messages/conversations",{customerId:L.id,customerName:L.name,customerEmail:L.email,customerPhone:L.phone},{headers:{Authorization:`Bearer ${X}`}});if(O.data.success){D.success(`Started conversation with ${L.name}`),await V(),G("conversations");const J={id:O.data.conversation.id,name:L.name,email:L.email,phone:L.phone,lastMessage:"",lastMessageTime:new Date,unreadCount:0,isOnline:!1,type:"direct"};f(J)}}catch(X){console.error("Error starting conversation:",X),D.error("Failed to start conversation")}finally{E(!1)}},se=r.filter(L=>L.name.toLowerCase().includes(y.toLowerCase())),ee=o.filter(L=>L.name.toLowerCase().includes(y.toLowerCase())||L.email.toLowerCase().includes(y.toLowerCase()));return e.jsxs("div",{className:"h-[calc(100vh-4rem)] p-6",children:[e.jsxs("div",{className:"mb-6 flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Messages"}),e.jsxs("p",{className:"text-muted-foreground",children:["Chat with your customers and support  ",a?" Connected":" Offline"]})]}),e.jsx(_K,{})]}),e.jsxs("div",{className:"grid grid-cols-12 gap-6 h-[calc(100%-5rem)]",children:[e.jsxs(K,{className:"col-span-12 lg:col-span-4 h-full flex flex-col",children:[e.jsxs(xe,{className:"pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs(pe,{className:"flex items-center gap-2",children:[e.jsx(ta,{className:"h-5 w-5"}),"Messages"]}),e.jsxs(De,{variant:"secondary",children:[o.length," customers"]})]}),e.jsxs("div",{className:"relative",children:[e.jsx(oa,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(me,{placeholder:"Search...",value:y,onChange:L=>b(L.target.value),className:"pl-9"})]})]}),e.jsxs(ja,{value:A,onValueChange:G,className:"flex-1 flex flex-col",children:[e.jsxs(Sa,{className:"grid w-full grid-cols-2 mx-4",children:[e.jsxs(ft,{value:"conversations",className:"gap-2",children:[e.jsx(ta,{className:"h-4 w-4"}),"Chats (",r.length,")"]}),e.jsxs(ft,{value:"customers",className:"gap-2",children:[e.jsx(Zt,{className:"h-4 w-4"}),"Customers (",o.length,")"]})]}),e.jsx(pt,{value:"conversations",className:"flex-1 mt-0 overflow-hidden",children:e.jsx(kr,{className:"h-full",children:se.length===0?e.jsxs("div",{className:"p-8 text-center text-muted-foreground",children:[e.jsx(ta,{className:"h-12 w-12 mx-auto mb-3 opacity-50"}),e.jsx("p",{children:"No conversations yet"}),e.jsx("p",{className:"text-sm mt-1",children:"Start a chat with a customer"})]}):se.map(L=>e.jsx("div",{onClick:()=>f(L),className:`p-4 cursor-pointer hover:bg-accent transition-colors border-b ${u?.id===L.id?"bg-accent":""}`,children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsxs("div",{className:"relative",children:[e.jsxs(hr,{className:"h-12 w-12",children:[e.jsx(On,{src:L.avatar}),e.jsx(fr,{children:L.type==="group"?e.jsx(Zt,{className:"h-6 w-6"}):L.name[0]})]}),L.isOnline&&e.jsx("div",{className:"absolute bottom-0 right-0 h-3 w-3 bg-green-500 border-2 border-white rounded-full"})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"font-semibold truncate",children:L.name}),e.jsx("span",{className:"text-xs text-muted-foreground",children:Xu(new Date(L.lastMessageTime),{addSuffix:!0})})]}),e.jsx("p",{className:"text-sm text-muted-foreground truncate",children:L.lastMessage}),L.unreadCount>0&&e.jsx(De,{className:"mt-1 bg-primary text-primary-foreground",children:L.unreadCount})]})]})},L.id))})}),e.jsx(pt,{value:"customers",className:"flex-1 mt-0 overflow-hidden",children:e.jsx(kr,{className:"h-full",children:ee.length===0?e.jsxs("div",{className:"p-8 text-center text-muted-foreground",children:[e.jsx(Zt,{className:"h-12 w-12 mx-auto mb-3 opacity-50"}),e.jsx("p",{children:"No customers found"})]}):ee.map(L=>e.jsx("div",{className:"p-4 hover:bg-accent transition-colors border-b",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(hr,{className:"h-12 w-12",children:e.jsx(fr,{className:"bg-primary/10 text-primary",children:L.name[0]})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("h3",{className:"font-semibold truncate",children:L.name}),L.unreadCount>0&&e.jsx(De,{className:"bg-primary text-primary-foreground",children:L.unreadCount})]}),e.jsx("p",{className:"text-sm text-muted-foreground truncate",children:L.email}),L.phone&&e.jsx("p",{className:"text-xs text-muted-foreground",children:L.phone}),e.jsxs("div",{className:"flex items-center gap-3 mt-2 text-xs text-muted-foreground",children:[e.jsxs("span",{children:[L.totalOrders||0," orders"]}),e.jsx("span",{children:""}),e.jsxs("span",{children:["KES ",(L.totalSpent||0).toLocaleString()]})]})]}),e.jsx(R,{size:"sm",variant:L.hasConversation?"outline":"default",onClick:()=>H(L),disabled:F,className:"gap-2",children:L.hasConversation?e.jsxs(e.Fragment,{children:[e.jsx(ta,{className:"h-4 w-4"}),"Open"]}):e.jsxs(e.Fragment,{children:[e.jsx(yo,{className:"h-4 w-4"}),"Chat"]})})]})},L.id))})})]})]}),e.jsx(K,{className:"col-span-12 lg:col-span-8 h-full flex flex-col",children:u?e.jsxs(e.Fragment,{children:[e.jsx(xe,{className:"border-b",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(hr,{className:"h-10 w-10",children:[e.jsx(On,{src:u.avatar}),e.jsx(fr,{children:u.type==="group"?e.jsx(Zt,{className:"h-5 w-5"}):u.name[0]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:u.name}),e.jsx("p",{className:"text-xs text-muted-foreground",children:u.isOnline?"Active now":"Offline"})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(R,{variant:"ghost",size:"icon",onClick:()=>D.info("Voice call - Coming soon"),children:e.jsx(Ws,{className:"h-4 w-4"})}),e.jsx(R,{variant:"ghost",size:"icon",onClick:()=>window.open("/dashboard/sessions","_blank"),children:e.jsx(Aa,{className:"h-4 w-4"})}),e.jsx(R,{variant:"ghost",size:"icon",children:e.jsx(Nv,{className:"h-4 w-4"})})]})]})}),e.jsx(Y,{className:"flex-1 p-4 overflow-hidden",children:e.jsx(kr,{className:"h-full pr-4",children:e.jsxs("div",{className:"space-y-4",children:[x.map(L=>{const X=L.senderId===t._id;return e.jsx("div",{className:`flex ${X?"justify-end":"justify-start"}`,children:e.jsxs("div",{className:`max-w-[70%] rounded-lg p-3 ${X?"bg-primary text-primary-foreground":"bg-muted"}`,children:[!X&&e.jsx("p",{className:"text-xs font-semibold mb-1",children:L.senderName}),e.jsx("p",{className:"text-sm",children:L.content}),e.jsxs("div",{className:"flex items-center gap-1 mt-1 justify-end",children:[e.jsx("span",{className:"text-xs opacity-70",children:new Date(L.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}),X&&de(L.status)]})]})},L.id)}),Object.keys(C).length>0&&e.jsx("div",{className:"flex justify-start",children:e.jsx("div",{className:"bg-muted rounded-lg p-3",children:e.jsxs("div",{className:"flex gap-1",children:[e.jsx("div",{className:"w-2 h-2 bg-gray-500 rounded-full animate-bounce"}),e.jsx("div",{className:"w-2 h-2 bg-gray-500 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),e.jsx("div",{className:"w-2 h-2 bg-gray-500 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})})}),e.jsx("div",{ref:T})]})})}),e.jsx("div",{className:"border-t p-4",children:e.jsxs("form",{onSubmit:q,className:"flex gap-2",children:[e.jsx(R,{type:"button",variant:"ghost",size:"icon",children:e.jsx(Gs,{className:"h-5 w-5"})}),e.jsx(R,{type:"button",variant:"ghost",size:"icon",onClick:()=>_.current?.click(),children:e.jsx(Yc,{className:"h-5 w-5"})}),e.jsx("input",{type:"file",ref:_,className:"hidden"}),e.jsx(me,{value:p,onChange:L=>{g(L.target.value),B()},placeholder:"Type a message...",className:"flex-1"}),e.jsx(R,{type:"button",variant:"ghost",size:"icon",children:e.jsx(bv,{className:"h-5 w-5"})}),e.jsx(R,{type:"submit",disabled:!p.trim(),children:e.jsx(Fa,{className:"h-4 w-4"})})]})})]}):e.jsx("div",{className:"flex-1 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(ta,{className:"h-16 w-16 text-muted-foreground mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No Conversation Selected"}),e.jsx("p",{className:"text-muted-foreground",children:"Choose a conversation to start messaging"})]})})})]})]})},OK=()=>{const{socket:t,connected:s}=ha(),[a,r]=v.useState([]),[i,o]=v.useState([]),[c,u]=v.useState(null),[f,x]=v.useState(!0),[h,p]=v.useState("all"),[g,y]=v.useState("");v.useEffect(()=>{C(),b()},[]),v.useEffect(()=>{if(!(!t||!s))return t.on("security_alert",N),t.on("new_security_event",S),()=>{t.off("security_alert"),t.off("new_security_event")}},[t,s]);const b=()=>{t&&s&&t.emit("join_security_dashboard")},N=E=>{o(_=>{const P=Array.isArray(_)?_:[];return[E,...P]}),(E.severity==="critical"?D.error:E.severity==="high"?D.warning:D.info)(e.jsxs("div",{children:[e.jsx("strong",{children:E.title}),e.jsx("p",{className:"text-sm",children:E.message}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["IP: ",E.ipAddress," | User: ",E.user]})]}))},S=E=>{r(T=>{const _=Array.isArray(T)?T:[];return[E.securityLog,..._].slice(0,100)})},C=async()=>{x(!0);try{const E=localStorage.getItem("token"),[T,_,P]=await Promise.all([Ne.get("/security/logs",{headers:{Authorization:`Bearer ${E}`}}),Ne.get("/security/stats",{headers:{Authorization:`Bearer ${E}`}}),Ne.get("/security/alerts",{headers:{Authorization:`Bearer ${E}`}})]);r(T.data.logs||[]),u(_.data||{}),o(P.data||[])}catch(E){console.error("Error fetching security data:",E),D.error("Failed to load security data")}finally{x(!1)}},k=async E=>{try{const T=localStorage.getItem("token");await Ne.patch(`/security/logs/${E}/resolve`,{},{headers:{Authorization:`Bearer ${T}`}}),D.success("Alert marked as resolved"),C()}catch(T){console.error("Error resolving alert:",T),D.error("Failed to resolve alert")}},A=E=>{switch(E){case"critical":return"bg-red-100 text-red-800 border-red-300";case"high":return"bg-orange-100 text-orange-800 border-orange-300";case"medium":return"bg-yellow-100 text-yellow-800 border-yellow-300";case"low":return"bg-green-100 text-green-800 border-green-300";default:return"bg-gray-100 text-gray-800 border-gray-300"}},G=E=>{switch(E){case"critical":case"high":return e.jsx(Fr,{className:"h-4 w-4"});case"medium":return e.jsx(La,{className:"h-4 w-4"});case"low":return e.jsx(us,{className:"h-4 w-4"});default:return e.jsx(da,{className:"h-4 w-4"})}},F=(Array.isArray(a)?a:[]).filter(E=>{if(h!=="all"&&E.severity!==h)return!1;if(g){const T=g.toLowerCase();return E.description?.toLowerCase().includes(T)||E.userEmail?.toLowerCase().includes(T)||E.ipAddress?.toLowerCase().includes(T)}return!0});return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold text-foreground flex items-center gap-2",children:[e.jsx(da,{className:"h-8 w-8 text-green-600"}),"AI Security Monitoring"]}),e.jsxs("p",{className:"text-muted-foreground",children:["Real-time threat detection and automated response ",s?e.jsx("span",{className:"text-green-600",children:"  Live Monitoring"}):e.jsx("span",{className:"text-red-600",children:"  Offline"})]})]}),e.jsxs(R,{onClick:C,disabled:f,children:[e.jsx(cs,{className:`h-4 w-4 mr-2 ${f?"animate-spin":""}`}),"Refresh"]})]}),e.jsxs("div",{className:"grid gap-6 md:grid-cols-4",children:[e.jsx(K,{children:e.jsx(Y,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Total Events (24h)"}),e.jsx("p",{className:"text-2xl font-bold",children:c?.totalEvents||0})]}),e.jsx(La,{className:"h-8 w-8 text-blue-600"})]})})}),e.jsx(K,{children:e.jsx(Y,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Critical Alerts"}),e.jsx("p",{className:"text-2xl font-bold text-red-600",children:c?.bySeverity?.critical||0})]}),e.jsx(Fr,{className:"h-8 w-8 text-red-600"})]})})}),e.jsx(K,{children:e.jsx(Y,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Blocked IPs"}),e.jsx("p",{className:"text-2xl font-bold",children:c?.blockedIPs||0})]}),e.jsx(_6,{className:"h-8 w-8 text-orange-600"})]})})}),e.jsx(K,{children:e.jsx(Y,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Auto-Fixed"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:c?.autoFixed||0})]}),e.jsx(_a,{className:"h-8 w-8 text-green-600"})]})})})]}),e.jsxs(ja,{defaultValue:"alerts",className:"space-y-6",children:[e.jsxs(Sa,{children:[e.jsxs(ft,{value:"alerts",children:[e.jsx(Fr,{className:"h-4 w-4 mr-2"}),"Active Alerts (",i.length,")"]}),e.jsxs(ft,{value:"logs",children:[e.jsx(La,{className:"h-4 w-4 mr-2"}),"Security Logs"]}),e.jsxs(ft,{value:"suggestions",children:[e.jsx(_a,{className:"h-4 w-4 mr-2"}),"AI Suggestions"]})]}),e.jsx(pt,{value:"alerts",className:"space-y-4",children:e.jsxs(K,{children:[e.jsxs(xe,{children:[e.jsx(pe,{children:"Active Security Alerts"}),e.jsx(ot,{children:"Real-time security threats detected by AI"})]}),e.jsx(Y,{children:i.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(da,{className:"h-12 w-12 text-green-600 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"All Clear!"}),e.jsx("p",{className:"text-muted-foreground",children:"No active security alerts"})]}):e.jsx("div",{className:"space-y-4",children:i.map((E,T)=>e.jsx("div",{className:"border rounded-lg p-4 hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs(De,{className:A(E.severity),children:[G(E.severity),E.severity]}),e.jsx("span",{className:"text-xs text-muted-foreground",children:new Date(E.timestamp).toLocaleString()})]}),e.jsx("h4",{className:"font-semibold text-lg mb-2",children:E.title}),e.jsx("p",{className:"text-sm text-foreground mb-2",children:E.message}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Zt,{className:"h-4 w-4"}),E.user]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(_o,{className:"h-4 w-4"}),E.ipAddress]})]}),E.suggestion&&e.jsxs("div",{className:"mt-3 p-3 bg-blue-50 rounded-lg",children:[e.jsxs("p",{className:"text-sm font-medium text-blue-900 flex items-center gap-2",children:[e.jsx(_a,{className:"h-4 w-4"}),"AI Suggestion:"]}),e.jsx("p",{className:"text-sm text-blue-800 mt-1",children:E.suggestion})]})]}),e.jsx("div",{className:"flex gap-2 ml-4",children:E.logId&&e.jsxs(R,{size:"sm",variant:"outline",onClick:()=>k(E.logId),children:[e.jsx(us,{className:"h-4 w-4 mr-1"}),"Resolve"]})})]})},T))})})]})}),e.jsx(pt,{value:"logs",children:e.jsxs(K,{children:[e.jsx(xe,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(pe,{children:"Security Event Logs"}),e.jsx(ot,{children:"Comprehensive activity tracking"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(me,{placeholder:"Search logs...",value:g,onChange:E=>y(E.target.value),className:"w-64"}),e.jsxs("select",{value:h,onChange:E=>p(E.target.value),className:"border rounded-md px-3 py-2",children:[e.jsx("option",{value:"all",children:"All Severity"}),e.jsx("option",{value:"critical",children:"Critical"}),e.jsx("option",{value:"high",children:"High"}),e.jsx("option",{value:"medium",children:"Medium"}),e.jsx("option",{value:"low",children:"Low"})]})]})]})}),e.jsx(Y,{children:e.jsxs(Xn,{children:[e.jsx(Qn,{children:e.jsxs(xa,{children:[e.jsx(St,{children:"Time"}),e.jsx(St,{children:"Severity"}),e.jsx(St,{children:"Event Type"}),e.jsx(St,{children:"Description"}),e.jsx(St,{children:"User/IP"}),e.jsx(St,{children:"Status"})]})}),e.jsx(Zn,{children:F.slice(0,50).map(E=>e.jsxs(xa,{children:[e.jsx(Nt,{className:"text-xs",children:new Date(E.timestamp).toLocaleString()}),e.jsx(Nt,{children:e.jsx(De,{className:A(E.severity),variant:"outline",children:E.severity})}),e.jsx(Nt,{className:"text-sm",children:E.eventType}),e.jsx(Nt,{className:"text-sm max-w-xs truncate",children:E.description}),e.jsxs(Nt,{className:"text-xs",children:[e.jsx("div",{children:E.userEmail||"Unknown"}),e.jsx("div",{className:"text-muted-foreground",children:E.ipAddress})]}),e.jsx(Nt,{children:E.resolved?e.jsxs(De,{variant:"outline",className:"bg-green-100 text-green-800",children:[e.jsx(us,{className:"h-3 w-3 mr-1"}),"Resolved"]}):e.jsxs(De,{variant:"outline",className:"bg-yellow-100 text-yellow-800",children:[e.jsx(ts,{className:"h-3 w-3 mr-1"}),"Open"]})})]},E._id))})]})})]})}),e.jsx(pt,{value:"suggestions",children:e.jsxs(K,{children:[e.jsxs(xe,{children:[e.jsx(pe,{children:"AI Security Recommendations"}),e.jsx(ot,{children:"Automated security improvements and best practices"})]}),e.jsx(Y,{children:e.jsxs("div",{className:"space-y-4",children:[i.filter(E=>E.suggestion).map((E,T)=>e.jsx("div",{className:"border-l-4 border-blue-500 bg-blue-50 p-4 rounded-r-lg",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(_a,{className:"h-5 w-5 text-blue-600 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-semibold text-blue-900 mb-1",children:E.title}),e.jsx("p",{className:"text-sm text-blue-800 mb-2",children:E.suggestion}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-blue-700",children:[e.jsxs(De,{variant:"outline",className:"bg-white",children:["Priority: ",E.severity]}),e.jsx("span",{children:new Date(E.timestamp).toLocaleString()})]})]})]})},T)),i.filter(E=>E.suggestion).length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(us,{className:"h-12 w-12 text-green-600 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No Recommendations"}),e.jsx("p",{className:"text-muted-foreground",children:"Your security posture is excellent!"})]})]})})]})})]})]})};function RK(){const[t,s]=v.useState(!0),[a,r]=v.useState(!1);v.useEffect(()=>{const o=setTimeout(()=>{s(!1),r(!0),uu.start()},3e3);return()=>{clearTimeout(o),uu.stop()}},[]),v.useEffect(()=>{if(a)return uu.initialize(),uu.showWelcomeMessage(),()=>{uu.destroy()}},[a]);const i=()=>{s(!1),r(!0)};return t||!a?e.jsx(iw,{children:e.jsx(MW,{onComplete:i})}):e.jsx(xG,{children:e.jsx(iw,{children:e.jsx(hG,{children:e.jsx(rR,{children:e.jsx(iG,{children:e.jsx(ER,{children:e.jsx(M9,{children:e.jsx(Zz,{children:e.jsxs(a_,{children:[e.jsx(uG,{}),e.jsxs(r_,{children:[e.jsx(Kt,{path:"/",element:e.jsx(O9,{})}),e.jsx(Kt,{path:"/features",element:e.jsx(FW,{})}),e.jsx(Kt,{path:"/pricing",element:e.jsx(LW,{})}),e.jsx(Kt,{path:"/contact",element:e.jsx(IW,{})}),e.jsx(Kt,{path:"/about",element:e.jsx(UW,{})}),e.jsx(Kt,{path:"/privacy",element:e.jsx(VW,{})}),e.jsx(Kt,{path:"/terms",element:e.jsx($W,{})}),e.jsx(Kt,{path:"/loginpage",element:e.jsx(iR,{})}),e.jsx(Kt,{path:"/signup",element:e.jsx(oR,{})}),e.jsx(Kt,{path:"/client/signup/:inviteCode",element:e.jsx(vG,{})}),e.jsx(Kt,{path:"/client/login/:inviteCode",element:e.jsx(CK,{})}),e.jsx(Kt,{path:"/client/store/:inviteCode",element:e.jsx(gK,{})}),e.jsx(Kt,{path:"/client/catalog",element:e.jsx(NK,{})}),e.jsx(Kt,{path:"/store",element:e.jsx(jK,{})}),e.jsx(Kt,{path:"/client/book",element:e.jsx(wK,{})}),e.jsx(Kt,{path:"/client/my-bookings",element:e.jsx(SK,{})}),e.jsx(Kt,{path:"/client/messages",element:e.jsx(TK,{})}),e.jsx(Kt,{path:"/session/join/:accessLink",element:e.jsx(AK,{})}),e.jsxs(Kt,{path:"/dashboard",element:e.jsx(BR,{}),children:[e.jsx(Kt,{index:!0,element:e.jsx(g9,{})}),e.jsx(Kt,{path:"inventory",element:e.jsx(CP,{})}),e.jsx(Kt,{path:"ecommerce",element:e.jsx(Q9,{})}),e.jsx(Kt,{path:"discounts",element:e.jsx(rG,{})}),e.jsx(Kt,{path:"services",element:e.jsx(J9,{})}),e.jsx(Kt,{path:"appointments",element:e.jsx(Z9,{})}),e.jsx(Kt,{path:"finances",element:e.jsx(hz,{})}),e.jsx(Kt,{path:"subscriptions",element:e.jsx(fz,{})}),e.jsx(Kt,{path:"team",element:e.jsx(iz,{})}),e.jsx(Kt,{path:"ai-insights",element:e.jsx(pz,{})}),e.jsx(Kt,{path:"locations",element:e.jsx(gz,{})}),e.jsx(Kt,{path:"settings",element:e.jsx(zz,{})}),e.jsx(Kt,{path:"profile",element:e.jsx(Wz,{})}),e.jsx(Kt,{path:"wallet",element:e.jsx(Gz,{})}),e.jsx(Kt,{path:"products",element:e.jsx(Qz,{})}),e.jsx(Kt,{path:"checkout",element:e.jsx(Jz,{})}),e.jsx(Kt,{path:"help",element:e.jsx(HW,{})}),e.jsx(Kt,{path:"support",element:e.jsx(JW,{})}),e.jsx(Kt,{path:"resources",element:e.jsx(aG,{})}),e.jsx(Kt,{path:"analytics",element:e.jsx(WW,{})}),e.jsx(Kt,{path:"maps",element:e.jsx(GW,{})}),e.jsx(Kt,{path:"purchasing",element:e.jsx(qW,{})}),e.jsx(Kt,{path:"history",element:e.jsx(KW,{})}),e.jsx(Kt,{path:"search",element:e.jsx(YW,{})}),e.jsx(Kt,{path:"graphs",element:e.jsx(XW,{})}),e.jsx(Kt,{path:"reports",element:e.jsx(ZW,{})}),e.jsx(Kt,{path:"gui",element:e.jsx(nG,{})}),e.jsx(Kt,{path:"sessions",element:e.jsx(EK,{})}),e.jsx(Kt,{path:"messages",element:e.jsx(DK,{})}),e.jsx(Kt,{path:"security",element:e.jsx(OK,{})})]}),e.jsx(Kt,{path:"*",element:e.jsx(cR,{})})]}),e.jsx(pG,{}),e.jsx(gG,{}),e.jsx(fG,{position:"top-center",expand:!0,toastOptions:{classNames:{toast:"group-[.toaster]:bg-white group-[.toaster]:text-slate-900 group-[.toaster]:border-green-200 group-[.toaster]:shadow-xl group-[.toaster]:backdrop-blur-sm",description:"group-[.toast]:text-slate-600",actionButton:"group-[.toast]:bg-green-600 group-[.toast]:text-white group-[.toast]:hover:bg-green-700",cancelButton:"group-[.toast]:bg-slate-100 group-[.toast]:text-slate-700 group-[.toast]:hover:bg-slate-200",error:"group-[.toaster]:bg-white group-[.toaster]:text-red-900 group-[.toaster]:border-red-200",success:"group-[.toaster]:bg-white group-[.toaster]:text-green-900 group-[.toaster]:border-green-300",warning:"group-[.toaster]:bg-white group-[.toaster]:text-amber-900 group-[.toaster]:border-amber-200",info:"group-[.toaster]:bg-white group-[.toaster]:text-blue-900 group-[.toaster]:border-blue-200"},style:{borderWidth:"2px"},duration:4e3}})]})})})})})})})})})}W6.createRoot(document.getElementById("root")).render(e.jsx(v.StrictMode,{children:e.jsx(RK,{})}));const PK=Object.freeze(Object.defineProperty({__proto__:null,default:EE},Symbol.toStringTag,{value:"Module"}));export{As as A,R as B,K as C,bg as D,Ps as E,ha as F,Ze as G,me as I,te as L,kr as S,Xn as T,xe as a,pe as b,ot as c,Y as d,wg as e,Sg as f,mR as g,nw as h,Wn as i,Qn as j,xa as k,St as l,Zn as m,Nt as n,De as o,Bt as p,zt as q,Ut as r,Vt as s,es as t,Pn as u,Mt as v,Lt as w,Ft as x,It as y,Ae as z};
